(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function yA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kB(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var a4={exports:{}},Sv={},l4={exports:{}},gs={},h8;function rW(){if(h8)return gs;h8=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),B=Symbol.iterator;function D(Te){return Te===null||typeof Te!="object"?null:(Te=B&&Te[B]||Te["@@iterator"],typeof Te=="function"?Te:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,G={};function W(Te,He,pt){this.props=Te,this.context=He,this.refs=G,this.updater=pt||R}W.prototype.isReactComponent={},W.prototype.setState=function(Te,He){if(typeof Te!="object"&&typeof Te!="function"&&Te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Te,He,"setState")},W.prototype.forceUpdate=function(Te){this.updater.enqueueForceUpdate(this,Te,"forceUpdate")};function J(){}J.prototype=W.prototype;function $(Te,He,pt){this.props=Te,this.context=He,this.refs=G,this.updater=pt||R}var oe=$.prototype=new J;oe.constructor=$,U(oe,W.prototype),oe.isPureReactComponent=!0;var te=Array.isArray,H=Object.prototype.hasOwnProperty,re={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function ue(Te,He,pt){var kt,ft={},Bt=null,Tt=null;if(He!=null)for(kt in He.ref!==void 0&&(Tt=He.ref),He.key!==void 0&&(Bt=""+He.key),He)H.call(He,kt)&&!j.hasOwnProperty(kt)&&(ft[kt]=He[kt]);var Le=arguments.length-2;if(Le===1)ft.children=pt;else if(1<Le){for(var Pe=Array(Le),ke=0;ke<Le;ke++)Pe[ke]=arguments[ke+2];ft.children=Pe}if(Te&&Te.defaultProps)for(kt in Le=Te.defaultProps,Le)ft[kt]===void 0&&(ft[kt]=Le[kt]);return{$$typeof:n,type:Te,key:Bt,ref:Tt,props:ft,_owner:re.current}}function me(Te,He){return{$$typeof:n,type:Te.type,key:He,ref:Te.ref,props:Te.props,_owner:Te._owner}}function ge(Te){return typeof Te=="object"&&Te!==null&&Te.$$typeof===n}function we(Te){var He={"=":"=0",":":"=2"};return"$"+Te.replace(/[=:]/g,function(pt){return He[pt]})}var Ee=/\/+/g;function xe(Te,He){return typeof Te=="object"&&Te!==null&&Te.key!=null?we(""+Te.key):He.toString(36)}function We(Te,He,pt,kt,ft){var Bt=typeof Te;(Bt==="undefined"||Bt==="boolean")&&(Te=null);var Tt=!1;if(Te===null)Tt=!0;else switch(Bt){case"string":case"number":Tt=!0;break;case"object":switch(Te.$$typeof){case n:case e:Tt=!0}}if(Tt)return Tt=Te,ft=ft(Tt),Te=kt===""?"."+xe(Tt,0):kt,te(ft)?(pt="",Te!=null&&(pt=Te.replace(Ee,"$&/")+"/"),We(ft,He,pt,"",function(ke){return ke})):ft!=null&&(ge(ft)&&(ft=me(ft,pt+(!ft.key||Tt&&Tt.key===ft.key?"":(""+ft.key).replace(Ee,"$&/")+"/")+Te)),He.push(ft)),1;if(Tt=0,kt=kt===""?".":kt+":",te(Te))for(var Le=0;Le<Te.length;Le++){Bt=Te[Le];var Pe=kt+xe(Bt,Le);Tt+=We(Bt,He,pt,Pe,ft)}else if(Pe=D(Te),typeof Pe=="function")for(Te=Pe.call(Te),Le=0;!(Bt=Te.next()).done;)Bt=Bt.value,Pe=kt+xe(Bt,Le++),Tt+=We(Bt,He,pt,Pe,ft);else if(Bt==="object")throw He=String(Te),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Te).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Tt}function be(Te,He,pt){if(Te==null)return Te;var kt=[],ft=0;return We(Te,kt,"","",function(Bt){return He.call(pt,Bt,ft++)}),kt}function rt(Te){if(Te._status===-1){var He=Te._result;He=He(),He.then(function(pt){(Te._status===0||Te._status===-1)&&(Te._status=1,Te._result=pt)},function(pt){(Te._status===0||Te._status===-1)&&(Te._status=2,Te._result=pt)}),Te._status===-1&&(Te._status=0,Te._result=He)}if(Te._status===1)return Te._result.default;throw Te._result}var Ct={current:null},at={transition:null},Je={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:at,ReactCurrentOwner:re};function ze(){throw Error("act(...) is not supported in production builds of React.")}return gs.Children={map:be,forEach:function(Te,He,pt){be(Te,function(){He.apply(this,arguments)},pt)},count:function(Te){var He=0;return be(Te,function(){He++}),He},toArray:function(Te){return be(Te,function(He){return He})||[]},only:function(Te){if(!ge(Te))throw Error("React.Children.only expected to receive a single React element child.");return Te}},gs.Component=W,gs.Fragment=t,gs.Profiler=i,gs.PureComponent=$,gs.StrictMode=r,gs.Suspense=f,gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Je,gs.act=ze,gs.cloneElement=function(Te,He,pt){if(Te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Te+".");var kt=U({},Te.props),ft=Te.key,Bt=Te.ref,Tt=Te._owner;if(He!=null){if(He.ref!==void 0&&(Bt=He.ref,Tt=re.current),He.key!==void 0&&(ft=""+He.key),Te.type&&Te.type.defaultProps)var Le=Te.type.defaultProps;for(Pe in He)H.call(He,Pe)&&!j.hasOwnProperty(Pe)&&(kt[Pe]=He[Pe]===void 0&&Le!==void 0?Le[Pe]:He[Pe])}var Pe=arguments.length-2;if(Pe===1)kt.children=pt;else if(1<Pe){Le=Array(Pe);for(var ke=0;ke<Pe;ke++)Le[ke]=arguments[ke+2];kt.children=Le}return{$$typeof:n,type:Te.type,key:ft,ref:Bt,props:kt,_owner:Tt}},gs.createContext=function(Te){return Te={$$typeof:l,_currentValue:Te,_currentValue2:Te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Te.Provider={$$typeof:s,_context:Te},Te.Consumer=Te},gs.createElement=ue,gs.createFactory=function(Te){var He=ue.bind(null,Te);return He.type=Te,He},gs.createRef=function(){return{current:null}},gs.forwardRef=function(Te){return{$$typeof:o,render:Te}},gs.isValidElement=ge,gs.lazy=function(Te){return{$$typeof:M,_payload:{_status:-1,_result:Te},_init:rt}},gs.memo=function(Te,He){return{$$typeof:C,type:Te,compare:He===void 0?null:He}},gs.startTransition=function(Te){var He=at.transition;at.transition={};try{Te()}finally{at.transition=He}},gs.unstable_act=ze,gs.useCallback=function(Te,He){return Ct.current.useCallback(Te,He)},gs.useContext=function(Te){return Ct.current.useContext(Te)},gs.useDebugValue=function(){},gs.useDeferredValue=function(Te){return Ct.current.useDeferredValue(Te)},gs.useEffect=function(Te,He){return Ct.current.useEffect(Te,He)},gs.useId=function(){return Ct.current.useId()},gs.useImperativeHandle=function(Te,He,pt){return Ct.current.useImperativeHandle(Te,He,pt)},gs.useInsertionEffect=function(Te,He){return Ct.current.useInsertionEffect(Te,He)},gs.useLayoutEffect=function(Te,He){return Ct.current.useLayoutEffect(Te,He)},gs.useMemo=function(Te,He){return Ct.current.useMemo(Te,He)},gs.useReducer=function(Te,He,pt){return Ct.current.useReducer(Te,He,pt)},gs.useRef=function(Te){return Ct.current.useRef(Te)},gs.useState=function(Te){return Ct.current.useState(Te)},gs.useSyncExternalStore=function(Te,He,pt){return Ct.current.useSyncExternalStore(Te,He,pt)},gs.useTransition=function(){return Ct.current.useTransition()},gs.version="18.3.1",gs}var d8;function Ya(){return d8||(d8=1,l4.exports=rW()),l4.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f8;function iW(){if(f8)return Sv;f8=1;var n=Ya(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(o,f,C){var M,B={},D=null,R=null;C!==void 0&&(D=""+C),f.key!==void 0&&(D=""+f.key),f.ref!==void 0&&(R=f.ref);for(M in f)r.call(f,M)&&!s.hasOwnProperty(M)&&(B[M]=f[M]);if(o&&o.defaultProps)for(M in f=o.defaultProps,f)B[M]===void 0&&(B[M]=f[M]);return{$$typeof:e,type:o,key:D,ref:R,props:B,_owner:i.current}}return Sv.Fragment=t,Sv.jsx=l,Sv.jsxs=l,Sv}var p8;function oW(){return p8||(p8=1,a4.exports=iW()),a4.exports}var le=oW(),Nt=Ya();const Fn=yA(Nt);var UK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ey=Fn.createContext&&Fn.createContext(UK),sW=["attr","size","title"];function aW(n,e){if(n==null)return{};var t=lW(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lW(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function p2(){return p2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p2.apply(this,arguments)}function m8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function m2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m8(Object(t),!0).forEach(function(r){AW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function AW(n,e,t){return e=uW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uW(n){var e=cW(n,"string");return typeof e=="symbol"?e:e+""}function cW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zK(n){return n&&n.map((e,t)=>Fn.createElement(e.tag,m2({key:t},e.attr),zK(e.child)))}function Vl(n){return e=>Fn.createElement(hW,p2({attr:m2({},n.attr)},e),zK(n.child))}function hW(n){var e=t=>{var{attr:r,size:i,title:s}=n,l=aW(n,sW),o=i||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),Fn.createElement("svg",p2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:f,style:m2(m2({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Fn.createElement("title",null,s),n.children)};return Ey!==void 0?Fn.createElement(Ey.Consumer,null,t=>e(t)):e(UK)}var Ab={},A4={exports:{}},yd={},u4={exports:{}},c4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8;function dW(){return g8||(g8=1,function(n){function e(at,Je){var ze=at.length;at.push(Je);e:for(;0<ze;){var Te=ze-1>>>1,He=at[Te];if(0<i(He,Je))at[Te]=Je,at[ze]=He,ze=Te;else break e}}function t(at){return at.length===0?null:at[0]}function r(at){if(at.length===0)return null;var Je=at[0],ze=at.pop();if(ze!==Je){at[0]=ze;e:for(var Te=0,He=at.length,pt=He>>>1;Te<pt;){var kt=2*(Te+1)-1,ft=at[kt],Bt=kt+1,Tt=at[Bt];if(0>i(ft,ze))Bt<He&&0>i(Tt,ft)?(at[Te]=Tt,at[Bt]=ze,Te=Bt):(at[Te]=ft,at[kt]=ze,Te=kt);else if(Bt<He&&0>i(Tt,ze))at[Te]=Tt,at[Bt]=ze,Te=Bt;else break e}}return Je}function i(at,Je){var ze=at.sortIndex-Je.sortIndex;return ze!==0?ze:at.id-Je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var f=[],C=[],M=1,B=null,D=3,R=!1,U=!1,G=!1,W=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(at){for(var Je=t(C);Je!==null;){if(Je.callback===null)r(C);else if(Je.startTime<=at)r(C),Je.sortIndex=Je.expirationTime,e(f,Je);else break;Je=t(C)}}function te(at){if(G=!1,oe(at),!U)if(t(f)!==null)U=!0,rt(H);else{var Je=t(C);Je!==null&&Ct(te,Je.startTime-at)}}function H(at,Je){U=!1,G&&(G=!1,J(ue),ue=-1),R=!0;var ze=D;try{for(oe(Je),B=t(f);B!==null&&(!(B.expirationTime>Je)||at&&!we());){var Te=B.callback;if(typeof Te=="function"){B.callback=null,D=B.priorityLevel;var He=Te(B.expirationTime<=Je);Je=n.unstable_now(),typeof He=="function"?B.callback=He:B===t(f)&&r(f),oe(Je)}else r(f);B=t(f)}if(B!==null)var pt=!0;else{var kt=t(C);kt!==null&&Ct(te,kt.startTime-Je),pt=!1}return pt}finally{B=null,D=ze,R=!1}}var re=!1,j=null,ue=-1,me=5,ge=-1;function we(){return!(n.unstable_now()-ge<me)}function Ee(){if(j!==null){var at=n.unstable_now();ge=at;var Je=!0;try{Je=j(!0,at)}finally{Je?xe():(re=!1,j=null)}}else re=!1}var xe;if(typeof $=="function")xe=function(){$(Ee)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,be=We.port2;We.port1.onmessage=Ee,xe=function(){be.postMessage(null)}}else xe=function(){W(Ee,0)};function rt(at){j=at,re||(re=!0,xe())}function Ct(at,Je){ue=W(function(){at(n.unstable_now())},Je)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(at){at.callback=null},n.unstable_continueExecution=function(){U||R||(U=!0,rt(H))},n.unstable_forceFrameRate=function(at){0>at||125<at?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<at?Math.floor(1e3/at):5},n.unstable_getCurrentPriorityLevel=function(){return D},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(at){switch(D){case 1:case 2:case 3:var Je=3;break;default:Je=D}var ze=D;D=Je;try{return at()}finally{D=ze}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(at,Je){switch(at){case 1:case 2:case 3:case 4:case 5:break;default:at=3}var ze=D;D=at;try{return Je()}finally{D=ze}},n.unstable_scheduleCallback=function(at,Je,ze){var Te=n.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?Te+ze:Te):ze=Te,at){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ze+He,at={id:M++,callback:Je,priorityLevel:at,startTime:ze,expirationTime:He,sortIndex:-1},ze>Te?(at.sortIndex=ze,e(C,at),t(f)===null&&at===t(C)&&(G?(J(ue),ue=-1):G=!0,Ct(te,ze-Te))):(at.sortIndex=He,e(f,at),U||R||(U=!0,rt(H))),at},n.unstable_shouldYield=we,n.unstable_wrapCallback=function(at){var Je=D;return function(){var ze=D;D=Je;try{return at.apply(this,arguments)}finally{D=ze}}}}(c4)),c4}var y8;function fW(){return y8||(y8=1,u4.exports=dW()),u4.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v8;function pW(){if(v8)return yd;v8=1;var n=Ya(),e=fW();function t(p){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+p,K=1;K<arguments.length;K++)_+="&args[]="+encodeURIComponent(arguments[K]);return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(p,_){l(p,_),l(p+"Capture",_)}function l(p,_){for(i[p]=_,p=0;p<_.length;p++)r.add(_[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},B={};function D(p){return f.call(B,p)?!0:f.call(M,p)?!1:C.test(p)?B[p]=!0:(M[p]=!0,!1)}function R(p,_,K,Q){if(K!==null&&K.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return Q?!1:K!==null?!K.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function U(p,_,K,Q){if(_===null||typeof _>"u"||R(p,_,K,Q))return!0;if(Q)return!1;if(K!==null)switch(K.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function G(p,_,K,Q,Ae,ve,tt){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=Q,this.attributeNamespace=Ae,this.mustUseProperty=K,this.propertyName=p,this.type=_,this.sanitizeURL=ve,this.removeEmptyString=tt}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){W[p]=new G(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var _=p[0];W[_]=new G(_,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){W[p]=new G(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){W[p]=new G(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){W[p]=new G(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){W[p]=new G(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){W[p]=new G(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){W[p]=new G(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){W[p]=new G(p,5,!1,p.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function $(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var _=p.replace(J,$);W[_]=new G(_,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var _=p.replace(J,$);W[_]=new G(_,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var _=p.replace(J,$);W[_]=new G(_,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){W[p]=new G(p,1,!1,p.toLowerCase(),null,!1,!1)}),W.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){W[p]=new G(p,1,!1,p.toLowerCase(),null,!0,!0)});function oe(p,_,K,Q){var Ae=W.hasOwnProperty(_)?W[_]:null;(Ae!==null?Ae.type!==0:Q||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(U(_,K,Ae,Q)&&(K=null),Q||Ae===null?D(_)&&(K===null?p.removeAttribute(_):p.setAttribute(_,""+K)):Ae.mustUseProperty?p[Ae.propertyName]=K===null?Ae.type===3?!1:"":K:(_=Ae.attributeName,Q=Ae.attributeNamespace,K===null?p.removeAttribute(_):(Ae=Ae.type,K=Ae===3||Ae===4&&K===!0?"":""+K,Q?p.setAttributeNS(Q,_,K):p.setAttribute(_,K))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),re=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),we=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),We=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Ct=Symbol.for("react.offscreen"),at=Symbol.iterator;function Je(p){return p===null||typeof p!="object"?null:(p=at&&p[at]||p["@@iterator"],typeof p=="function"?p:null)}var ze=Object.assign,Te;function He(p){if(Te===void 0)try{throw Error()}catch(K){var _=K.stack.trim().match(/\n( *(at )?)/);Te=_&&_[1]||""}return`
`+Te+p}var pt=!1;function kt(p,_){if(!p||pt)return"";pt=!0;var K=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Cn){var Q=Cn}Reflect.construct(p,[],_)}else{try{_.call()}catch(Cn){Q=Cn}p.call(_.prototype)}else{try{throw Error()}catch(Cn){Q=Cn}p()}}catch(Cn){if(Cn&&Q&&typeof Cn.stack=="string"){for(var Ae=Cn.stack.split(`
`),ve=Q.stack.split(`
`),tt=Ae.length-1,Rt=ve.length-1;1<=tt&&0<=Rt&&Ae[tt]!==ve[Rt];)Rt--;for(;1<=tt&&0<=Rt;tt--,Rt--)if(Ae[tt]!==ve[Rt]){if(tt!==1||Rt!==1)do if(tt--,Rt--,0>Rt||Ae[tt]!==ve[Rt]){var Wt=`
`+Ae[tt].replace(" at new "," at ");return p.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",p.displayName)),Wt}while(1<=tt&&0<=Rt);break}}}finally{pt=!1,Error.prepareStackTrace=K}return(p=p?p.displayName||p.name:"")?He(p):""}function ft(p){switch(p.tag){case 5:return He(p.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return p=kt(p.type,!1),p;case 11:return p=kt(p.type.render,!1),p;case 1:return p=kt(p.type,!0),p;default:return""}}function Bt(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case j:return"Fragment";case re:return"Portal";case me:return"Profiler";case ue:return"StrictMode";case xe:return"Suspense";case We:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case we:return(p.displayName||"Context")+".Consumer";case ge:return(p._context.displayName||"Context")+".Provider";case Ee:var _=p.render;return p=p.displayName,p||(p=_.displayName||_.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case be:return _=p.displayName||null,_!==null?_:Bt(p.type)||"Memo";case rt:_=p._payload,p=p._init;try{return Bt(p(_))}catch{}}return null}function Tt(p){var _=p.type;switch(p.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=_.render,p=p.displayName||p.name||"",_.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bt(_);case 8:return _===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Le(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Pe(p){var _=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function ke(p){var _=Pe(p)?"checked":"value",K=Object.getOwnPropertyDescriptor(p.constructor.prototype,_),Q=""+p[_];if(!p.hasOwnProperty(_)&&typeof K<"u"&&typeof K.get=="function"&&typeof K.set=="function"){var Ae=K.get,ve=K.set;return Object.defineProperty(p,_,{configurable:!0,get:function(){return Ae.call(this)},set:function(tt){Q=""+tt,ve.call(this,tt)}}),Object.defineProperty(p,_,{enumerable:K.enumerable}),{getValue:function(){return Q},setValue:function(tt){Q=""+tt},stopTracking:function(){p._valueTracker=null,delete p[_]}}}}function Qe(p){p._valueTracker||(p._valueTracker=ke(p))}function _t(p){if(!p)return!1;var _=p._valueTracker;if(!_)return!0;var K=_.getValue(),Q="";return p&&(Q=Pe(p)?p.checked?"true":"false":p.value),p=Q,p!==K?(_.setValue(p),!0):!1}function gt(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function wt(p,_){var K=_.checked;return ze({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:K??p._wrapperState.initialChecked})}function Qt(p,_){var K=_.defaultValue==null?"":_.defaultValue,Q=_.checked!=null?_.checked:_.defaultChecked;K=Le(_.value!=null?_.value:K),p._wrapperState={initialChecked:Q,initialValue:K,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function Ft(p,_){_=_.checked,_!=null&&oe(p,"checked",_,!1)}function ln(p,_){Ft(p,_);var K=Le(_.value),Q=_.type;if(K!=null)Q==="number"?(K===0&&p.value===""||p.value!=K)&&(p.value=""+K):p.value!==""+K&&(p.value=""+K);else if(Q==="submit"||Q==="reset"){p.removeAttribute("value");return}_.hasOwnProperty("value")?jt(p,_.type,K):_.hasOwnProperty("defaultValue")&&jt(p,_.type,Le(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(p.defaultChecked=!!_.defaultChecked)}function Vn(p,_,K){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var Q=_.type;if(!(Q!=="submit"&&Q!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+p._wrapperState.initialValue,K||_===p.value||(p.value=_),p.defaultValue=_}K=p.name,K!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,K!==""&&(p.name=K)}function jt(p,_,K){(_!=="number"||gt(p.ownerDocument)!==p)&&(K==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+K&&(p.defaultValue=""+K))}var Un=Array.isArray;function wn(p,_,K,Q){if(p=p.options,_){_={};for(var Ae=0;Ae<K.length;Ae++)_["$"+K[Ae]]=!0;for(K=0;K<p.length;K++)Ae=_.hasOwnProperty("$"+p[K].value),p[K].selected!==Ae&&(p[K].selected=Ae),Ae&&Q&&(p[K].defaultSelected=!0)}else{for(K=""+Le(K),_=null,Ae=0;Ae<p.length;Ae++){if(p[Ae].value===K){p[Ae].selected=!0,Q&&(p[Ae].defaultSelected=!0);return}_!==null||p[Ae].disabled||(_=p[Ae])}_!==null&&(_.selected=!0)}}function Mn(p,_){if(_.dangerouslySetInnerHTML!=null)throw Error(t(91));return ze({},_,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function En(p,_){var K=_.value;if(K==null){if(K=_.children,_=_.defaultValue,K!=null){if(_!=null)throw Error(t(92));if(Un(K)){if(1<K.length)throw Error(t(93));K=K[0]}_=K}_==null&&(_=""),K=_}p._wrapperState={initialValue:Le(K)}}function Mr(p,_){var K=Le(_.value),Q=Le(_.defaultValue);K!=null&&(K=""+K,K!==p.value&&(p.value=K),_.defaultValue==null&&p.defaultValue!==K&&(p.defaultValue=K)),Q!=null&&(p.defaultValue=""+Q)}function Hn(p){var _=p.textContent;_===p._wrapperState.initialValue&&_!==""&&_!==null&&(p.value=_)}function Pn(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(p,_){return p==null||p==="http://www.w3.org/1999/xhtml"?Pn(_):p==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var he,ie=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,K,Q,Ae){MSApp.execUnsafeLocalFunction(function(){return p(_,K,Q,Ae)})}:p}(function(p,_){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=_;else{for(he=he||document.createElement("div"),he.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=he.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;_.firstChild;)p.appendChild(_.firstChild)}});function se(p,_){if(_){var K=p.firstChild;if(K&&K===p.lastChild&&K.nodeType===3){K.nodeValue=_;return}}p.textContent=_}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oe=["Webkit","ms","Moz","O"];Object.keys(fe).forEach(function(p){Oe.forEach(function(_){_=_+p.charAt(0).toUpperCase()+p.substring(1),fe[_]=fe[p]})});function Ge(p,_,K){return _==null||typeof _=="boolean"||_===""?"":K||typeof _!="number"||_===0||fe.hasOwnProperty(p)&&fe[p]?(""+_).trim():_+"px"}function ct(p,_){p=p.style;for(var K in _)if(_.hasOwnProperty(K)){var Q=K.indexOf("--")===0,Ae=Ge(K,_[K],Q);K==="float"&&(K="cssFloat"),Q?p.setProperty(K,Ae):p[K]=Ae}}var $e=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function De(p,_){if(_){if($e[p]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(t(137,p));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(t(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(t(61))}if(_.style!=null&&typeof _.style!="object")throw Error(t(62))}}function Ze(p,_){if(p.indexOf("-")===-1)return typeof _.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m=null;function mt(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var At=null,It=null,nt=null;function en(p){if(p=Do(p)){if(typeof At!="function")throw Error(t(280));var _=p.stateNode;_&&(_=ua(_),At(p.stateNode,p.type,_))}}function Tn(p){It?nt?nt.push(p):nt=[p]:It=p}function xn(){if(It){var p=It,_=nt;if(nt=It=null,en(p),_)for(p=0;p<_.length;p++)en(_[p])}}function er(p,_){return p(_)}function Qn(){}var Qr=!1;function $r(p,_,K){if(Qr)return p(_,K);Qr=!0;try{return er(p,_,K)}finally{Qr=!1,(It!==null||nt!==null)&&(Qn(),xn())}}function Br(p,_){var K=p.stateNode;if(K===null)return null;var Q=ua(K);if(Q===null)return null;K=Q[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(p=p.type,Q=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!Q;break e;default:p=!1}if(p)return null;if(K&&typeof K!="function")throw Error(t(231,_,typeof K));return K}var br=!1;if(o)try{var or={};Object.defineProperty(or,"passive",{get:function(){br=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{br=!1}function ti(p,_,K,Q,Ae,ve,tt,Rt,Wt){var Cn=Array.prototype.slice.call(arguments,3);try{_.apply(K,Cn)}catch(rr){this.onError(rr)}}var bn=!1,Vi=null,zr=!1,$o=null,is={onError:function(p){bn=!0,Vi=p}};function Zn(p,_,K,Q,Ae,ve,tt,Rt,Wt){bn=!1,Vi=null,ti.apply(is,arguments)}function _i(p,_,K,Q,Ae,ve,tt,Rt,Wt){if(Zn.apply(this,arguments),bn){if(bn){var Cn=Vi;bn=!1,Vi=null}else throw Error(t(198));zr||(zr=!0,$o=Cn)}}function Kr(p){var _=p,K=p;if(p.alternate)for(;_.return;)_=_.return;else{p=_;do _=p,(_.flags&4098)!==0&&(K=_.return),p=_.return;while(p)}return _.tag===3?K:null}function ki(p){if(p.tag===13){var _=p.memoizedState;if(_===null&&(p=p.alternate,p!==null&&(_=p.memoizedState)),_!==null)return _.dehydrated}return null}function oa(p){if(Kr(p)!==p)throw Error(t(188))}function os(p){var _=p.alternate;if(!_){if(_=Kr(p),_===null)throw Error(t(188));return _!==p?null:p}for(var K=p,Q=_;;){var Ae=K.return;if(Ae===null)break;var ve=Ae.alternate;if(ve===null){if(Q=Ae.return,Q!==null){K=Q;continue}break}if(Ae.child===ve.child){for(ve=Ae.child;ve;){if(ve===K)return oa(Ae),p;if(ve===Q)return oa(Ae),_;ve=ve.sibling}throw Error(t(188))}if(K.return!==Q.return)K=Ae,Q=ve;else{for(var tt=!1,Rt=Ae.child;Rt;){if(Rt===K){tt=!0,K=Ae,Q=ve;break}if(Rt===Q){tt=!0,Q=Ae,K=ve;break}Rt=Rt.sibling}if(!tt){for(Rt=ve.child;Rt;){if(Rt===K){tt=!0,K=ve,Q=Ae;break}if(Rt===Q){tt=!0,Q=ve,K=Ae;break}Rt=Rt.sibling}if(!tt)throw Error(t(189))}}if(K.alternate!==Q)throw Error(t(190))}if(K.tag!==3)throw Error(t(188));return K.stateNode.current===K?p:_}function Gr(p){return p=os(p),p!==null?qa(p):null}function qa(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var _=qa(p);if(_!==null)return _;p=p.sibling}return null}var sa=e.unstable_scheduleCallback,jo=e.unstable_cancelCallback,Ds=e.unstable_shouldYield,yl=e.unstable_requestPaint,si=e.unstable_now,vA=e.unstable_getCurrentPriorityLevel,Bs=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,Sr=e.unstable_NormalPriority,aa=e.unstable_LowPriority,vs=e.unstable_IdlePriority,ss=null,Ye=null;function Et(p){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ss,p,void 0,(p.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:sr,Nn=Math.log,cn=Math.LN2;function sr(p){return p>>>=0,p===0?32:31-(Nn(p)/cn|0)|0}var ji=64,wo=4194304;function xs(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function va(p,_){var K=p.pendingLanes;if(K===0)return 0;var Q=0,Ae=p.suspendedLanes,ve=p.pingedLanes,tt=K&268435455;if(tt!==0){var Rt=tt&~Ae;Rt!==0?Q=xs(Rt):(ve&=tt,ve!==0&&(Q=xs(ve)))}else tt=K&~Ae,tt!==0?Q=xs(tt):ve!==0&&(Q=xs(ve));if(Q===0)return 0;if(_!==0&&_!==Q&&(_&Ae)===0&&(Ae=Q&-Q,ve=_&-_,Ae>=ve||Ae===16&&(ve&4194240)!==0))return _;if((Q&4)!==0&&(Q|=K&16),_=p.entangledLanes,_!==0)for(p=p.entanglements,_&=Q;0<_;)K=31-gn(_),Ae=1<<K,Q|=p[K],_&=~Ae;return Q}function CA(p,_){switch(p){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(p,_){for(var K=p.suspendedLanes,Q=p.pingedLanes,Ae=p.expirationTimes,ve=p.pendingLanes;0<ve;){var tt=31-gn(ve),Rt=1<<tt,Wt=Ae[tt];Wt===-1?((Rt&K)===0||(Rt&Q)!==0)&&(Ae[tt]=CA(Rt,_)):Wt<=_&&(p.expiredLanes|=Rt),ve&=~Rt}}function cu(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Hl(){var p=ji;return ji<<=1,(ji&4194240)===0&&(ji=64),p}function $a(p){for(var _=[],K=0;31>K;K++)_.push(p);return _}function Ca(p,_,K){p.pendingLanes|=_,_!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,_=31-gn(_),p[_]=K}function wc(p,_){var K=p.pendingLanes&~_;p.pendingLanes=_,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=_,p.mutableReadLanes&=_,p.entangledLanes&=_,_=p.entanglements;var Q=p.eventTimes;for(p=p.expirationTimes;0<K;){var Ae=31-gn(K),ve=1<<Ae;_[Ae]=0,Q[Ae]=-1,p[Ae]=-1,K&=~ve}}function _a(p,_){var K=p.entangledLanes|=_;for(p=p.entanglements;K;){var Q=31-gn(K),Ae=1<<Q;Ae&_|p[Q]&_&&(p[Q]|=_),K&=~Ae}}var gi=0;function So(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var yi,ol,cs,sl,Fl,Bi=!1,vl=[],al=null,Eo=null,go=null,hs=new Map,as=new Map,yo=[],Xi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(p,_){switch(p){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":hs.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(_.pointerId)}}function Cs(p,_,K,Q,Ae,ve){return p===null||p.nativeEvent!==ve?(p={blockedOn:_,domEventName:K,eventSystemFlags:Q,nativeEvent:ve,targetContainers:[Ae]},_!==null&&(_=Do(_),_!==null&&ol(_)),p):(p.eventSystemFlags|=Q,_=p.targetContainers,Ae!==null&&_.indexOf(Ae)===-1&&_.push(Ae),p)}function ba(p,_,K,Q,Ae){switch(_){case"focusin":return al=Cs(al,p,_,K,Q,Ae),!0;case"dragenter":return Eo=Cs(Eo,p,_,K,Q,Ae),!0;case"mouseover":return go=Cs(go,p,_,K,Q,Ae),!0;case"pointerover":var ve=Ae.pointerId;return hs.set(ve,Cs(hs.get(ve)||null,p,_,K,Q,Ae)),!0;case"gotpointercapture":return ve=Ae.pointerId,as.set(ve,Cs(as.get(ve)||null,p,_,K,Q,Ae)),!0}return!1}function Ns(p){var _=js(p.target);if(_!==null){var K=Kr(_);if(K!==null){if(_=K.tag,_===13){if(_=ki(K),_!==null){p.blockedOn=_,Fl(p.priority,function(){cs(K)});return}}else if(_===3&&K.stateNode.current.memoizedState.isDehydrated){p.blockedOn=K.tag===3?K.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Ri(p){if(p.blockedOn!==null)return!1;for(var _=p.targetContainers;0<_.length;){var K=qr(p.domEventName,p.eventSystemFlags,_[0],p.nativeEvent);if(K===null){K=p.nativeEvent;var Q=new K.constructor(K.type,K);m=Q,K.target.dispatchEvent(Q),m=null}else return _=Do(K),_!==null&&ol(_),p.blockedOn=K,!1;_.shift()}return!0}function Cl(p,_,K){Ri(p)&&K.delete(_)}function Zr(){Bi=!1,al!==null&&Ri(al)&&(al=null),Eo!==null&&Ri(Eo)&&(Eo=null),go!==null&&Ri(go)&&(go=null),hs.forEach(Cl),as.forEach(Cl)}function Cr(p,_){p.blockedOn===_&&(p.blockedOn=null,Bi||(Bi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zr)))}function Wi(p){function _(Ae){return Cr(Ae,p)}if(0<vl.length){Cr(vl[0],p);for(var K=1;K<vl.length;K++){var Q=vl[K];Q.blockedOn===p&&(Q.blockedOn=null)}}for(al!==null&&Cr(al,p),Eo!==null&&Cr(Eo,p),go!==null&&Cr(go,p),hs.forEach(_),as.forEach(_),K=0;K<yo.length;K++)Q=yo[K],Q.blockedOn===p&&(Q.blockedOn=null);for(;0<yo.length&&(K=yo[0],K.blockedOn===null);)Ns(K),K.blockedOn===null&&yo.shift()}var ee=te.ReactCurrentBatchConfig,Ie=!0;function st(p,_,K,Q){var Ae=gi,ve=ee.transition;ee.transition=null;try{gi=1,wr(p,_,K,Q)}finally{gi=Ae,ee.transition=ve}}function Yt(p,_,K,Q){var Ae=gi,ve=ee.transition;ee.transition=null;try{gi=4,wr(p,_,K,Q)}finally{gi=Ae,ee.transition=ve}}function wr(p,_,K,Q){if(Ie){var Ae=qr(p,_,K,Q);if(Ae===null)Th(p,_,Q,zn,K),Sc(p,Q);else if(ba(Ae,p,_,K,Q))Q.stopPropagation();else if(Sc(p,Q),_&4&&-1<Xi.indexOf(p)){for(;Ae!==null;){var ve=Do(Ae);if(ve!==null&&yi(ve),ve=qr(p,_,K,Q),ve===null&&Th(p,_,Q,zn,K),ve===Ae)break;Ae=ve}Ae!==null&&Q.stopPropagation()}else Th(p,_,Q,null,K)}}var zn=null;function qr(p,_,K,Q){if(zn=null,p=mt(Q),p=js(p),p!==null)if(_=Kr(p),_===null)p=null;else if(K=_.tag,K===13){if(p=ki(_),p!==null)return p;p=null}else if(K===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;p=null}else _!==p&&(p=null);return zn=p,null}function ai(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vA()){case Bs:return 1;case Hr:return 4;case Sr:case aa:return 16;case vs:return 536870912;default:return 16}default:return 16}}var Er=null,Xr=null,Hi=null;function Ji(){if(Hi)return Hi;var p,_=Xr,K=_.length,Q,Ae="value"in Er?Er.value:Er.textContent,ve=Ae.length;for(p=0;p<K&&_[p]===Ae[p];p++);var tt=K-p;for(Q=1;Q<=tt&&_[K-Q]===Ae[ve-Q];Q++);return Hi=Ae.slice(p,1<Q?1-Q:void 0)}function ni(p){var _=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&_===13&&(p=13)):p=_,p===10&&(p=13),32<=p||p===13?p:0}function di(){return!0}function lo(){return!1}function zi(p){function _(K,Q,Ae,ve,tt){this._reactName=K,this._targetInst=Ae,this.type=Q,this.nativeEvent=ve,this.target=tt,this.currentTarget=null;for(var Rt in p)p.hasOwnProperty(Rt)&&(K=p[Rt],this[Rt]=K?K(ve):ve[Rt]);return this.isDefaultPrevented=(ve.defaultPrevented!=null?ve.defaultPrevented:ve.returnValue===!1)?di:lo,this.isPropagationStopped=lo,this}return ze(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var K=this.nativeEvent;K&&(K.preventDefault?K.preventDefault():typeof K.returnValue!="unknown"&&(K.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var K=this.nativeEvent;K&&(K.stopPropagation?K.stopPropagation():typeof K.cancelBubble!="unknown"&&(K.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),_}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=zi(Oi),Ea=ze({},Oi,{view:0,detail:0}),_A=zi(Ea),Gs,$c,Vo,Ec=ze({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rd,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Vo&&(Vo&&p.type==="mousemove"?(Gs=p.screenX-Vo.screenX,$c=p.screenY-Vo.screenY):$c=Gs=0,Vo=p),Gs)},movementY:function(p){return"movementY"in p?p.movementY:$c}}),jA=zi(Ec),hu=ze({},Ec,{dataTransfer:0}),Vc=zi(hu),Mh=ze({},Ea,{relatedTarget:0}),so=zi(Mh),ec=ze({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),td=zi(ec),zp=ze({},Oi,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Hc=zi(zp),nd=ze({},Oi,{data:0}),Np=zi(nd),Af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fs(p){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(p):(p=bA[p])?!!_[p]:!1}function rd(){return Fs}var WA=ze({},Ea,{key:function(p){if(p.key){var _=Af[p.key]||p.key;if(_!=="Unidentified")return _}return p.type==="keypress"?(p=ni(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?uf[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rd,charCode:function(p){return p.type==="keypress"?ni(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?ni(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),id=zi(WA),od=ze({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=zi(od),sd=ze({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rd}),Qf=zi(sd),wh=ze({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yf=zi(wh),Sh=ze({},Ec,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),cf=zi(Sh),Kl=[9,13,27,32],Od=o&&"CompositionEvent"in window,xA=null;o&&"documentMode"in document&&(xA=document.documentMode);var du=o&&"TextEvent"in window&&!xA,Eh=o&&(!Od||xA&&8<xA&&11>=xA),Bh=" ",hf=!1;function fu(p,_){switch(p){case"keyup":return Kl.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MA(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var tc=!1;function Zc(p,_){switch(p){case"compositionend":return MA(_);case"keypress":return _.which!==32?null:(hf=!0,Bh);case"textInput":return p=_.data,p===Bh&&hf?null:p;default:return null}}function ad(p,_){if(tc)return p==="compositionend"||!Od&&fu(p,_)?(p=Ji(),Hi=Xr=Er=null,tc=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return Eh&&_.locale!=="ko"?null:_.data;default:return null}}var vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oc(p){var _=p&&p.nodeName&&p.nodeName.toLowerCase();return _==="input"?!!vm[p.type]:_==="textarea"}function ld(p,_,K,Q){Tn(Q),_=kh(_,"onChange"),0<_.length&&(K=new la("onChange","change",null,K,Q),p.push({event:K,listeners:_}))}var _l=null,ll=null;function qf(p){ff(p,0)}function Oh(p){var _=fi(p);if(_t(_))return p}function $f(p,_){if(p==="change")return _}var Xc=!1;if(o){var Ll;if(o){var QA="oninput"in document;if(!QA){var Bo=document.createElement("div");Bo.setAttribute("oninput","return;"),QA=typeof Bo.oninput=="function"}Ll=QA}else Ll=!1;Xc=Ll&&(!document.documentMode||9<document.documentMode)}function Jc(){_l&&(_l.detachEvent("onpropertychange",Id),ll=_l=null)}function Id(p){if(p.propertyName==="value"&&Oh(ll)){var _=[];ld(_,ll,p,mt(p)),$r(qf,_)}}function Vf(p,_,K){p==="focusin"?(Jc(),_l=_,ll=K,_l.attachEvent("onpropertychange",Id)):p==="focusout"&&Jc()}function Td(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Oh(ll)}function Zl(p,_){if(p==="click")return Oh(_)}function Xt(p,_){if(p==="input"||p==="change")return Oh(_)}function Sn(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var hn=typeof Object.is=="function"?Object.is:Sn;function Pr(p,_){if(hn(p,_))return!0;if(typeof p!="object"||p===null||typeof _!="object"||_===null)return!1;var K=Object.keys(p),Q=Object.keys(_);if(K.length!==Q.length)return!1;for(Q=0;Q<K.length;Q++){var Ae=K[Q];if(!f.call(_,Ae)||!hn(p[Ae],_[Ae]))return!1}return!0}function Di(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Po(p,_){var K=Di(p);p=0;for(var Q;K;){if(K.nodeType===3){if(Q=p+K.textContent.length,p<=_&&Q>=_)return{node:K,offset:_-p};p=Q}e:{for(;K;){if(K.nextSibling){K=K.nextSibling;break e}K=K.parentNode}K=void 0}K=Di(K)}}function Ba(p,_){return p&&_?p===_?!0:p&&p.nodeType===3?!1:_&&_.nodeType===3?Ba(p,_.parentNode):"contains"in p?p.contains(_):p.compareDocumentPosition?!!(p.compareDocumentPosition(_)&16):!1:!1}function ds(){for(var p=window,_=gt();_ instanceof p.HTMLIFrameElement;){try{var K=typeof _.contentWindow.location.href=="string"}catch{K=!1}if(K)p=_.contentWindow;else break;_=gt(p.document)}return _}function nc(p){var _=p&&p.nodeName&&p.nodeName.toLowerCase();return _&&(_==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||_==="textarea"||p.contentEditable==="true")}function df(p){var _=ds(),K=p.focusedElem,Q=p.selectionRange;if(_!==K&&K&&K.ownerDocument&&Ba(K.ownerDocument.documentElement,K)){if(Q!==null&&nc(K)){if(_=Q.start,p=Q.end,p===void 0&&(p=_),"selectionStart"in K)K.selectionStart=_,K.selectionEnd=Math.min(p,K.value.length);else if(p=(_=K.ownerDocument||document)&&_.defaultView||window,p.getSelection){p=p.getSelection();var Ae=K.textContent.length,ve=Math.min(Q.start,Ae);Q=Q.end===void 0?ve:Math.min(Q.end,Ae),!p.extend&&ve>Q&&(Ae=Q,Q=ve,ve=Ae),Ae=Po(K,ve);var tt=Po(K,Q);Ae&&tt&&(p.rangeCount!==1||p.anchorNode!==Ae.node||p.anchorOffset!==Ae.offset||p.focusNode!==tt.node||p.focusOffset!==tt.offset)&&(_=_.createRange(),_.setStart(Ae.node,Ae.offset),p.removeAllRanges(),ve>Q?(p.addRange(_),p.extend(tt.node,tt.offset)):(_.setEnd(tt.node,tt.offset),p.addRange(_)))}}for(_=[],p=K;p=p.parentNode;)p.nodeType===1&&_.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<_.length;K++)p=_[K],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Xl=o&&"documentMode"in document&&11>=document.documentMode,Fu=null,Jl=null,Va=null,Ul=!1;function Al(p,_,K){var Q=K.window===K?K.document:K.nodeType===9?K:K.ownerDocument;Ul||Fu==null||Fu!==gt(Q)||(Q=Fu,"selectionStart"in Q&&nc(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Va&&Pr(Va,Q)||(Va=Q,Q=kh(Jl,"onSelect"),0<Q.length&&(_=new la("onSelect","select",null,_,K),p.push({event:_,listeners:Q}),_.target=Fu)))}function Ro(p,_){var K={};return K[p.toLowerCase()]=_.toLowerCase(),K["Webkit"+p]="webkit"+_,K["Moz"+p]="moz"+_,K}var eh={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},th={},bl={};o&&(bl=document.createElement("div").style,"AnimationEvent"in window||(delete eh.animationend.animation,delete eh.animationiteration.animation,delete eh.animationstart.animation),"TransitionEvent"in window||delete eh.transitionend.transition);function YA(p){if(th[p])return th[p];if(!eh[p])return p;var _=eh[p],K;for(K in _)if(_.hasOwnProperty(K)&&K in bl)return th[p]=_[K];return p}var Ha=YA("animationend"),qA=YA("animationiteration"),eA=YA("animationstart"),$A=YA("transitionend"),rc=new Map,Ku="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zl(p,_){rc.set(p,_),s(_,[p])}for(var Ih=0;Ih<Ku.length;Ih++){var Qi=Ku[Ih],Lu=Qi.toLowerCase(),Gp=Qi[0].toUpperCase()+Qi.slice(1);zl(Lu,"on"+Gp)}zl(Ha,"onAnimationEnd"),zl(qA,"onAnimationIteration"),zl(eA,"onAnimationStart"),zl("dblclick","onDoubleClick"),zl("focusin","onFocus"),zl("focusout","onBlur"),zl($A,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function nh(p,_,K){var Q=p.type||"unknown-event";p.currentTarget=K,_i(Q,_,void 0,p),p.currentTarget=null}function ff(p,_){_=(_&4)!==0;for(var K=0;K<p.length;K++){var Q=p[K],Ae=Q.event;Q=Q.listeners;e:{var ve=void 0;if(_)for(var tt=Q.length-1;0<=tt;tt--){var Rt=Q[tt],Wt=Rt.instance,Cn=Rt.currentTarget;if(Rt=Rt.listener,Wt!==ve&&Ae.isPropagationStopped())break e;nh(Ae,Rt,Cn),ve=Wt}else for(tt=0;tt<Q.length;tt++){if(Rt=Q[tt],Wt=Rt.instance,Cn=Rt.currentTarget,Rt=Rt.listener,Wt!==ve&&Ae.isPropagationStopped())break e;nh(Ae,Rt,Cn),ve=Wt}}}if(zr)throw p=$o,zr=!1,$o=null,p}function ls(p,_){var K=_[ac];K===void 0&&(K=_[ac]=new Set);var Q=p+"__bubble";K.has(Q)||(rh(_,p,2,!1),K.add(Q))}function Ad(p,_,K){var Q=0;_&&(Q|=4),rh(K,p,Q,_)}var ic="_reactListening"+Math.random().toString(36).slice(2);function wA(p){if(!p[ic]){p[ic]=!0,r.forEach(function(K){K!=="selectionchange"&&(tA.has(K)||Ad(K,!1,p),Ad(K,!0,p))});var _=p.nodeType===9?p:p.ownerDocument;_===null||_[ic]||(_[ic]=!0,Ad("selectionchange",!1,_))}}function rh(p,_,K,Q){switch(ai(_)){case 1:var Ae=st;break;case 4:Ae=Yt;break;default:Ae=wr}K=Ae.bind(null,_,K,p),Ae=void 0,!br||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(Ae=!0),Q?Ae!==void 0?p.addEventListener(_,K,{capture:!0,passive:Ae}):p.addEventListener(_,K,!0):Ae!==void 0?p.addEventListener(_,K,{passive:Ae}):p.addEventListener(_,K,!1)}function Th(p,_,K,Q,Ae){var ve=Q;if((_&1)===0&&(_&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var tt=Q.tag;if(tt===3||tt===4){var Rt=Q.stateNode.containerInfo;if(Rt===Ae||Rt.nodeType===8&&Rt.parentNode===Ae)break;if(tt===4)for(tt=Q.return;tt!==null;){var Wt=tt.tag;if((Wt===3||Wt===4)&&(Wt=tt.stateNode.containerInfo,Wt===Ae||Wt.nodeType===8&&Wt.parentNode===Ae))return;tt=tt.return}for(;Rt!==null;){if(tt=js(Rt),tt===null)return;if(Wt=tt.tag,Wt===5||Wt===6){Q=ve=tt;continue e}Rt=Rt.parentNode}}Q=Q.return}$r(function(){var Cn=ve,rr=mt(K),Xn=[];e:{var jn=rc.get(p);if(jn!==void 0){var Nr=la,Jr=p;switch(p){case"keypress":if(ni(K)===0)break e;case"keydown":case"keyup":Nr=id;break;case"focusin":Jr="focus",Nr=so;break;case"focusout":Jr="blur",Nr=so;break;case"beforeblur":case"afterblur":Nr=so;break;case"click":if(K.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nr=jA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nr=Vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nr=Qf;break;case Ha:case qA:case eA:Nr=td;break;case $A:Nr=Yf;break;case"scroll":Nr=_A;break;case"wheel":Nr=cf;break;case"copy":case"cut":case"paste":Nr=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nr=Bc}var li=(_&4)!==0,Na=!li&&p==="scroll",An=li?jn!==null?jn+"Capture":null:jn;li=[];for(var Zt=Cn,dn;Zt!==null;){dn=Zt;var hr=dn.stateNode;if(dn.tag===5&&hr!==null&&(dn=hr,An!==null&&(hr=Br(Zt,An),hr!=null&&li.push(ih(Zt,hr,dn)))),Na)break;Zt=Zt.return}0<li.length&&(jn=new Nr(jn,Jr,null,K,rr),Xn.push({event:jn,listeners:li}))}}if((_&7)===0){e:{if(jn=p==="mouseover"||p==="pointerover",Nr=p==="mouseout"||p==="pointerout",jn&&K!==m&&(Jr=K.relatedTarget||K.fromElement)&&(js(Jr)||Jr[EA]))break e;if((Nr||jn)&&(jn=rr.window===rr?rr:(jn=rr.ownerDocument)?jn.defaultView||jn.parentWindow:window,Nr?(Jr=K.relatedTarget||K.toElement,Nr=Cn,Jr=Jr?js(Jr):null,Jr!==null&&(Na=Kr(Jr),Jr!==Na||Jr.tag!==5&&Jr.tag!==6)&&(Jr=null)):(Nr=null,Jr=Cn),Nr!==Jr)){if(li=jA,hr="onMouseLeave",An="onMouseEnter",Zt="mouse",(p==="pointerout"||p==="pointerover")&&(li=Bc,hr="onPointerLeave",An="onPointerEnter",Zt="pointer"),Na=Nr==null?jn:fi(Nr),dn=Jr==null?jn:fi(Jr),jn=new li(hr,Zt+"leave",Nr,K,rr),jn.target=Na,jn.relatedTarget=dn,hr=null,js(rr)===Cn&&(li=new li(An,Zt+"enter",Jr,K,rr),li.target=dn,li.relatedTarget=Na,hr=li),Na=hr,Nr&&Jr)t:{for(li=Nr,An=Jr,Zt=0,dn=li;dn;dn=mu(dn))Zt++;for(dn=0,hr=An;hr;hr=mu(hr))dn++;for(;0<Zt-dn;)li=mu(li),Zt--;for(;0<dn-Zt;)An=mu(An),dn--;for(;Zt--;){if(li===An||An!==null&&li===An.alternate)break t;li=mu(li),An=mu(An)}li=null}else li=null;Nr!==null&&_s(Xn,jn,Nr,li,!1),Jr!==null&&Na!==null&&_s(Xn,Na,Jr,li,!0)}}e:{if(jn=Cn?fi(Cn):window,Nr=jn.nodeName&&jn.nodeName.toLowerCase(),Nr==="select"||Nr==="input"&&jn.type==="file")var ii=$f;else if(Oc(jn))if(Xc)ii=Xt;else{ii=Td;var Pi=Vf}else(Nr=jn.nodeName)&&Nr.toLowerCase()==="input"&&(jn.type==="checkbox"||jn.type==="radio")&&(ii=Zl);if(ii&&(ii=ii(p,Cn))){ld(Xn,ii,K,rr);break e}Pi&&Pi(p,jn,Cn),p==="focusout"&&(Pi=jn._wrapperState)&&Pi.controlled&&jn.type==="number"&&jt(jn,"number",jn.value)}switch(Pi=Cn?fi(Cn):window,p){case"focusin":(Oc(Pi)||Pi.contentEditable==="true")&&(Fu=Pi,Jl=Cn,Va=null);break;case"focusout":Va=Jl=Fu=null;break;case"mousedown":Ul=!0;break;case"contextmenu":case"mouseup":case"dragend":Ul=!1,Al(Xn,K,rr);break;case"selectionchange":if(Xl)break;case"keydown":case"keyup":Al(Xn,K,rr)}var Ii;if(Od)e:{switch(p){case"compositionstart":var Ni="onCompositionStart";break e;case"compositionend":Ni="onCompositionEnd";break e;case"compositionupdate":Ni="onCompositionUpdate";break e}Ni=void 0}else tc?fu(p,K)&&(Ni="onCompositionEnd"):p==="keydown"&&K.keyCode===229&&(Ni="onCompositionStart");Ni&&(Eh&&K.locale!=="ko"&&(tc||Ni!=="onCompositionStart"?Ni==="onCompositionEnd"&&tc&&(Ii=Ji()):(Er=rr,Xr="value"in Er?Er.value:Er.textContent,tc=!0)),Pi=kh(Cn,Ni),0<Pi.length&&(Ni=new Np(Ni,p,null,K,rr),Xn.push({event:Ni,listeners:Pi}),Ii?Ni.data=Ii:(Ii=MA(K),Ii!==null&&(Ni.data=Ii)))),(Ii=du?Zc(p,K):ad(p,K))&&(Cn=kh(Cn,"onBeforeInput"),0<Cn.length&&(rr=new Np("onBeforeInput","beforeinput",null,K,rr),Xn.push({event:rr,listeners:Cn}),rr.data=Ii))}ff(Xn,_)})}function ih(p,_,K){return{instance:p,listener:_,currentTarget:K}}function kh(p,_){for(var K=_+"Capture",Q=[];p!==null;){var Ae=p,ve=Ae.stateNode;Ae.tag===5&&ve!==null&&(Ae=ve,ve=Br(p,K),ve!=null&&Q.unshift(ih(p,ve,Ae)),ve=Br(p,_),ve!=null&&Q.push(ih(p,ve,Ae))),p=p.return}return Q}function mu(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function _s(p,_,K,Q,Ae){for(var ve=_._reactName,tt=[];K!==null&&K!==Q;){var Rt=K,Wt=Rt.alternate,Cn=Rt.stateNode;if(Wt!==null&&Wt===Q)break;Rt.tag===5&&Cn!==null&&(Rt=Cn,Ae?(Wt=Br(K,ve),Wt!=null&&tt.unshift(ih(K,Wt,Rt))):Ae||(Wt=Br(K,ve),Wt!=null&&tt.push(ih(K,Wt,Rt)))),K=K.return}tt.length!==0&&p.push({event:_,listeners:tt})}var Zs=/\r\n?/g,pf=/\u0000|\uFFFD/g;function Ph(p){return(typeof p=="string"?p:""+p).replace(Zs,`
`).replace(pf,"")}function gu(p,_,K){if(_=Ph(_),Ph(p)!==_&&K)throw Error(t(425))}function oc(){}var Ic=null,Za=null;function Uu(p,_){return p==="textarea"||p==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var nA=typeof setTimeout=="function"?setTimeout:void 0,sc=typeof clearTimeout=="function"?clearTimeout:void 0,SA=typeof Promise=="function"?Promise:void 0,Rh=typeof queueMicrotask=="function"?queueMicrotask:typeof SA<"u"?function(p){return SA.resolve(null).then(p).catch(Dh)}:nA;function Dh(p){setTimeout(function(){throw p})}function ud(p,_){var K=_,Q=0;do{var Ae=K.nextSibling;if(p.removeChild(K),Ae&&Ae.nodeType===8)if(K=Ae.data,K==="/$"){if(Q===0){p.removeChild(Ae),Wi(_);return}Q--}else K!=="$"&&K!=="$?"&&K!=="$!"||Q++;K=Ae}while(K);Wi(_)}function fs(p){for(;p!=null;p=p.nextSibling){var _=p.nodeType;if(_===1||_===3)break;if(_===8){if(_=p.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return p}function xl(p){p=p.previousSibling;for(var _=0;p;){if(p.nodeType===8){var K=p.data;if(K==="$"||K==="$!"||K==="$?"){if(_===0)return p;_--}else K==="/$"&&_++}p=p.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),VA="__reactFiber$"+Aa,yu="__reactProps$"+Aa,EA="__reactContainer$"+Aa,ac="__reactEvents$"+Aa,ot="__reactListeners$"+Aa,BA="__reactHandles$"+Aa;function js(p){var _=p[VA];if(_)return _;for(var K=p.parentNode;K;){if(_=K[EA]||K[VA]){if(K=_.alternate,_.child!==null||K!==null&&K.child!==null)for(p=xl(p);p!==null;){if(K=p[VA])return K;p=xl(p)}return _}p=K,K=p.parentNode}return null}function Do(p){return p=p[VA]||p[EA],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function fi(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(t(33))}function ua(p){return p[yu]||null}var oh=[],Fh=-1;function Os(p){return{current:p}}function ps(p){0>Fh||(p.current=oh[Fh],oh[Fh]=null,Fh--)}function ho(p,_){Fh++,oh[Fh]=p.current,p.current=_}var HA={},Fa=Os(HA),Nl=Os(!1),ul=HA;function zu(p,_){var K=p.type.contextTypes;if(!K)return HA;var Q=p.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===_)return Q.__reactInternalMemoizedMaskedChildContext;var Ae={},ve;for(ve in K)Ae[ve]=_[ve];return Q&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=_,p.__reactInternalMemoizedMaskedChildContext=Ae),Ae}function cl(p){return p=p.childContextTypes,p!=null}function Nu(){ps(Nl),ps(Fa)}function mf(p,_,K){if(Fa.current!==HA)throw Error(t(168));ho(Fa,_),ho(Nl,K)}function Gl(p,_,K){var Q=p.stateNode;if(_=_.childContextTypes,typeof Q.getChildContext!="function")return K;Q=Q.getChildContext();for(var Ae in Q)if(!(Ae in _))throw Error(t(108,Tt(p)||"Unknown",Ae));return ze({},K,Q)}function Xs(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||HA,ul=Fa.current,ho(Fa,p),ho(Nl,Nl.current),!0}function sh(p,_,K){var Q=p.stateNode;if(!Q)throw Error(t(169));K?(p=Gl(p,_,ul),Q.__reactInternalMemoizedMergedChildContext=p,ps(Nl),ps(Fa),ho(Fa,p)):ps(Nl),ho(Nl,K)}var ca=null,Tc=!1,cd=!1;function OA(p){ca===null?ca=[p]:ca.push(p)}function ah(p){Tc=!0,OA(p)}function lh(){if(!cd&&ca!==null){cd=!0;var p=0,_=gi;try{var K=ca;for(gi=1;p<K.length;p++){var Q=K[p];do Q=Q(!0);while(Q!==null)}ca=null,Tc=!1}catch(Ae){throw ca!==null&&(ca=ca.slice(p+1)),sa(Bs,lh),Ae}finally{gi=_,cd=!1}}return null}var Gu=[],Ho=0,Yi=null,Ar=0,Oa=[],xa=0,lc=null,Ml=1,wl="";function Ac(p,_){Gu[Ho++]=Ar,Gu[Ho++]=Yi,Yi=p,Ar=_}function eo(p,_,K){Oa[xa++]=Ml,Oa[xa++]=wl,Oa[xa++]=lc,lc=p;var Q=Ml;p=wl;var Ae=32-gn(Q)-1;Q&=~(1<<Ae),K+=1;var ve=32-gn(_)+Ae;if(30<ve){var tt=Ae-Ae%5;ve=(Q&(1<<tt)-1).toString(32),Q>>=tt,Ae-=tt,Ml=1<<32-gn(_)+Ae|K<<Ae|Q,wl=ve+p}else Ml=1<<ve|K<<Ae|Q,wl=p}function vu(p){p.return!==null&&(Ac(p,1),eo(p,1,0))}function Ah(p){for(;p===Yi;)Yi=Gu[--Ho],Gu[Ho]=null,Ar=Gu[--Ho],Gu[Ho]=null;for(;p===lc;)lc=Oa[--xa],Oa[xa]=null,wl=Oa[--xa],Oa[xa]=null,Ml=Oa[--xa],Oa[xa]=null}var Ia=null,Ka=null,Is=!1,IA=null;function Cu(p,_){var K=Uc(5,null,null,0);K.elementType="DELETED",K.stateNode=_,K.return=p,_=p.deletions,_===null?(p.deletions=[K],p.flags|=16):_.push(K)}function uh(p,_){switch(p.tag){case 5:var K=p.type;return _=_.nodeType!==1||K.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(p.stateNode=_,Ia=p,Ka=fs(_.firstChild),!0):!1;case 6:return _=p.pendingProps===""||_.nodeType!==3?null:_,_!==null?(p.stateNode=_,Ia=p,Ka=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(K=lc!==null?{id:Ml,overflow:wl}:null,p.memoizedState={dehydrated:_,treeContext:K,retryLane:1073741824},K=Uc(18,null,null,0),K.stateNode=_,K.return=p,p.child=K,Ia=p,Ka=null,!0):!1;default:return!1}}function _u(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Sl(p){if(Is){var _=Ka;if(_){var K=_;if(!uh(p,_)){if(_u(p))throw Error(t(418));_=fs(K.nextSibling);var Q=Ia;_&&uh(p,_)?Cu(Q,K):(p.flags=p.flags&-4097|2,Is=!1,Ia=p)}}else{if(_u(p))throw Error(t(418));p.flags=p.flags&-4097|2,Is=!1,Ia=p}}}function Hf(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Ia=p}function Kh(p){if(p!==Ia)return!1;if(!Is)return Hf(p),Is=!0,!1;var _;if((_=p.tag!==3)&&!(_=p.tag!==5)&&(_=p.type,_=_!=="head"&&_!=="body"&&!Uu(p.type,p.memoizedProps)),_&&(_=Ka)){if(_u(p))throw ZA(),Error(t(418));for(;_;)Cu(p,_),_=fs(_.nextSibling)}if(Hf(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));e:{for(p=p.nextSibling,_=0;p;){if(p.nodeType===8){var K=p.data;if(K==="/$"){if(_===0){Ka=fs(p.nextSibling);break e}_--}else K!=="$"&&K!=="$!"&&K!=="$?"||_++}p=p.nextSibling}Ka=null}}else Ka=Ia?fs(p.stateNode.nextSibling):null;return!0}function ZA(){for(var p=Ka;p;)p=fs(p.nextSibling)}function bo(){Ka=Ia=null,Is=!1}function hl(p){IA===null?IA=[p]:IA.push(p)}var kd=te.ReactCurrentBatchConfig;function hd(p,_,K){if(p=K.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(K._owner){if(K=K._owner,K){if(K.tag!==1)throw Error(t(309));var Q=K.stateNode}if(!Q)throw Error(t(147,p));var Ae=Q,ve=""+p;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ve?_.ref:(_=function(tt){var Rt=Ae.refs;tt===null?delete Rt[ve]:Rt[ve]=tt},_._stringRef=ve,_)}if(typeof p!="string")throw Error(t(284));if(!K._owner)throw Error(t(290,p))}return p}function kc(p,_){throw p=Object.prototype.toString.call(_),Error(t(31,p==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":p))}function Pd(p){var _=p._init;return _(p._payload)}function Pc(p){function _(An,Zt){if(p){var dn=An.deletions;dn===null?(An.deletions=[Zt],An.flags|=16):dn.push(Zt)}}function K(An,Zt){if(!p)return null;for(;Zt!==null;)_(An,Zt),Zt=Zt.sibling;return null}function Q(An,Zt){for(An=new Map;Zt!==null;)Zt.key!==null?An.set(Zt.key,Zt):An.set(Zt.index,Zt),Zt=Zt.sibling;return An}function Ae(An,Zt){return An=gh(An,Zt),An.index=0,An.sibling=null,An}function ve(An,Zt,dn){return An.index=dn,p?(dn=An.alternate,dn!==null?(dn=dn.index,dn<Zt?(An.flags|=2,Zt):dn):(An.flags|=2,Zt)):(An.flags|=1048576,Zt)}function tt(An){return p&&An.alternate===null&&(An.flags|=2),An}function Rt(An,Zt,dn,hr){return Zt===null||Zt.tag!==6?(Zt=sg(dn,An.mode,hr),Zt.return=An,Zt):(Zt=Ae(Zt,dn),Zt.return=An,Zt)}function Wt(An,Zt,dn,hr){var ii=dn.type;return ii===j?rr(An,Zt,dn.props.children,hr,dn.key):Zt!==null&&(Zt.elementType===ii||typeof ii=="object"&&ii!==null&&ii.$$typeof===rt&&Pd(ii)===Zt.type)?(hr=Ae(Zt,dn.props),hr.ref=hd(An,Zt,dn),hr.return=An,hr):(hr=l0(dn.type,dn.key,dn.props,null,An.mode,hr),hr.ref=hd(An,Zt,dn),hr.return=An,hr)}function Cn(An,Zt,dn,hr){return Zt===null||Zt.tag!==4||Zt.stateNode.containerInfo!==dn.containerInfo||Zt.stateNode.implementation!==dn.implementation?(Zt=ag(dn,An.mode,hr),Zt.return=An,Zt):(Zt=Ae(Zt,dn.children||[]),Zt.return=An,Zt)}function rr(An,Zt,dn,hr,ii){return Zt===null||Zt.tag!==7?(Zt=lp(dn,An.mode,hr,ii),Zt.return=An,Zt):(Zt=Ae(Zt,dn),Zt.return=An,Zt)}function Xn(An,Zt,dn){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number")return Zt=sg(""+Zt,An.mode,dn),Zt.return=An,Zt;if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case H:return dn=l0(Zt.type,Zt.key,Zt.props,null,An.mode,dn),dn.ref=hd(An,null,Zt),dn.return=An,dn;case re:return Zt=ag(Zt,An.mode,dn),Zt.return=An,Zt;case rt:var hr=Zt._init;return Xn(An,hr(Zt._payload),dn)}if(Un(Zt)||Je(Zt))return Zt=lp(Zt,An.mode,dn,null),Zt.return=An,Zt;kc(An,Zt)}return null}function jn(An,Zt,dn,hr){var ii=Zt!==null?Zt.key:null;if(typeof dn=="string"&&dn!==""||typeof dn=="number")return ii!==null?null:Rt(An,Zt,""+dn,hr);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case H:return dn.key===ii?Wt(An,Zt,dn,hr):null;case re:return dn.key===ii?Cn(An,Zt,dn,hr):null;case rt:return ii=dn._init,jn(An,Zt,ii(dn._payload),hr)}if(Un(dn)||Je(dn))return ii!==null?null:rr(An,Zt,dn,hr,null);kc(An,dn)}return null}function Nr(An,Zt,dn,hr,ii){if(typeof hr=="string"&&hr!==""||typeof hr=="number")return An=An.get(dn)||null,Rt(Zt,An,""+hr,ii);if(typeof hr=="object"&&hr!==null){switch(hr.$$typeof){case H:return An=An.get(hr.key===null?dn:hr.key)||null,Wt(Zt,An,hr,ii);case re:return An=An.get(hr.key===null?dn:hr.key)||null,Cn(Zt,An,hr,ii);case rt:var Pi=hr._init;return Nr(An,Zt,dn,Pi(hr._payload),ii)}if(Un(hr)||Je(hr))return An=An.get(dn)||null,rr(Zt,An,hr,ii,null);kc(Zt,hr)}return null}function Jr(An,Zt,dn,hr){for(var ii=null,Pi=null,Ii=Zt,Ni=Zt=0,cA=null;Ii!==null&&Ni<dn.length;Ni++){Ii.index>Ni?(cA=Ii,Ii=null):cA=Ii.sibling;var us=jn(An,Ii,dn[Ni],hr);if(us===null){Ii===null&&(Ii=cA);break}p&&Ii&&us.alternate===null&&_(An,Ii),Zt=ve(us,Zt,Ni),Pi===null?ii=us:Pi.sibling=us,Pi=us,Ii=cA}if(Ni===dn.length)return K(An,Ii),Is&&Ac(An,Ni),ii;if(Ii===null){for(;Ni<dn.length;Ni++)Ii=Xn(An,dn[Ni],hr),Ii!==null&&(Zt=ve(Ii,Zt,Ni),Pi===null?ii=Ii:Pi.sibling=Ii,Pi=Ii);return Is&&Ac(An,Ni),ii}for(Ii=Q(An,Ii);Ni<dn.length;Ni++)cA=Nr(Ii,An,Ni,dn[Ni],hr),cA!==null&&(p&&cA.alternate!==null&&Ii.delete(cA.key===null?Ni:cA.key),Zt=ve(cA,Zt,Ni),Pi===null?ii=cA:Pi.sibling=cA,Pi=cA);return p&&Ii.forEach(function(Gd){return _(An,Gd)}),Is&&Ac(An,Ni),ii}function li(An,Zt,dn,hr){var ii=Je(dn);if(typeof ii!="function")throw Error(t(150));if(dn=ii.call(dn),dn==null)throw Error(t(151));for(var Pi=ii=null,Ii=Zt,Ni=Zt=0,cA=null,us=dn.next();Ii!==null&&!us.done;Ni++,us=dn.next()){Ii.index>Ni?(cA=Ii,Ii=null):cA=Ii.sibling;var Gd=jn(An,Ii,us.value,hr);if(Gd===null){Ii===null&&(Ii=cA);break}p&&Ii&&Gd.alternate===null&&_(An,Ii),Zt=ve(Gd,Zt,Ni),Pi===null?ii=Gd:Pi.sibling=Gd,Pi=Gd,Ii=cA}if(us.done)return K(An,Ii),Is&&Ac(An,Ni),ii;if(Ii===null){for(;!us.done;Ni++,us=dn.next())us=Xn(An,us.value,hr),us!==null&&(Zt=ve(us,Zt,Ni),Pi===null?ii=us:Pi.sibling=us,Pi=us);return Is&&Ac(An,Ni),ii}for(Ii=Q(An,Ii);!us.done;Ni++,us=dn.next())us=Nr(Ii,An,Ni,us.value,hr),us!==null&&(p&&us.alternate!==null&&Ii.delete(us.key===null?Ni:us.key),Zt=ve(us,Zt,Ni),Pi===null?ii=us:Pi.sibling=us,Pi=us);return p&&Ii.forEach(function(lv){return _(An,lv)}),Is&&Ac(An,Ni),ii}function Na(An,Zt,dn,hr){if(typeof dn=="object"&&dn!==null&&dn.type===j&&dn.key===null&&(dn=dn.props.children),typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case H:e:{for(var ii=dn.key,Pi=Zt;Pi!==null;){if(Pi.key===ii){if(ii=dn.type,ii===j){if(Pi.tag===7){K(An,Pi.sibling),Zt=Ae(Pi,dn.props.children),Zt.return=An,An=Zt;break e}}else if(Pi.elementType===ii||typeof ii=="object"&&ii!==null&&ii.$$typeof===rt&&Pd(ii)===Pi.type){K(An,Pi.sibling),Zt=Ae(Pi,dn.props),Zt.ref=hd(An,Pi,dn),Zt.return=An,An=Zt;break e}K(An,Pi);break}else _(An,Pi);Pi=Pi.sibling}dn.type===j?(Zt=lp(dn.props.children,An.mode,hr,dn.key),Zt.return=An,An=Zt):(hr=l0(dn.type,dn.key,dn.props,null,An.mode,hr),hr.ref=hd(An,Zt,dn),hr.return=An,An=hr)}return tt(An);case re:e:{for(Pi=dn.key;Zt!==null;){if(Zt.key===Pi)if(Zt.tag===4&&Zt.stateNode.containerInfo===dn.containerInfo&&Zt.stateNode.implementation===dn.implementation){K(An,Zt.sibling),Zt=Ae(Zt,dn.children||[]),Zt.return=An,An=Zt;break e}else{K(An,Zt);break}else _(An,Zt);Zt=Zt.sibling}Zt=ag(dn,An.mode,hr),Zt.return=An,An=Zt}return tt(An);case rt:return Pi=dn._init,Na(An,Zt,Pi(dn._payload),hr)}if(Un(dn))return Jr(An,Zt,dn,hr);if(Je(dn))return li(An,Zt,dn,hr);kc(An,dn)}return typeof dn=="string"&&dn!==""||typeof dn=="number"?(dn=""+dn,Zt!==null&&Zt.tag===6?(K(An,Zt.sibling),Zt=Ae(Zt,dn),Zt.return=An,An=Zt):(K(An,Zt),Zt=sg(dn,An.mode,hr),Zt.return=An,An=Zt),tt(An)):K(An,Zt)}return Na}var Wo=Pc(!0),uc=Pc(!1),Ir=Os(null),Dr=null,bu=null,XA=null;function JA(){XA=bu=Dr=null}function Uo(p){var _=Ir.current;ps(Ir),p._currentValue=_}function Ta(p,_,K){for(;p!==null;){var Q=p.alternate;if((p.childLanes&_)!==_?(p.childLanes|=_,Q!==null&&(Q.childLanes|=_)):Q!==null&&(Q.childLanes&_)!==_&&(Q.childLanes|=_),p===K)break;p=p.return}}function La(p,_){Dr=p,XA=bu=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&_)!==0&&(Wl=!0),p.firstContext=null)}function eu(p){var _=p._currentValue;if(XA!==p)if(p={context:p,memoizedValue:_,next:null},bu===null){if(Dr===null)throw Error(t(308));bu=p,Dr.dependencies={lanes:0,firstContext:p}}else bu=bu.next=p;return _}var xu=null;function Oo(p){xu===null?xu=[p]:xu.push(p)}function Ms(p,_,K,Q){var Ae=_.interleaved;return Ae===null?(K.next=K,Oo(_)):(K.next=Ae.next,Ae.next=K),_.interleaved=K,tu(p,Q)}function tu(p,_){p.lanes|=_;var K=p.alternate;for(K!==null&&(K.lanes|=_),K=p,p=p.return;p!==null;)p.childLanes|=_,K=p.alternate,K!==null&&(K.childLanes|=_),K=p,p=p.return;return K.tag===3?K.stateNode:null}var dl=!1;function cc(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rc(p,_){p=p.updateQueue,_.updateQueue===p&&(_.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function rA(p,_){return{eventTime:p,lane:_,tag:0,payload:null,callback:null,next:null}}function ka(p,_,K){var Q=p.updateQueue;if(Q===null)return null;if(Q=Q.shared,(hi&2)!==0){var Ae=Q.pending;return Ae===null?_.next=_:(_.next=Ae.next,Ae.next=_),Q.pending=_,tu(p,K)}return Ae=Q.interleaved,Ae===null?(_.next=_,Oo(Q)):(_.next=Ae.next,Ae.next=_),Q.interleaved=_,tu(p,K)}function Dc(p,_,K){if(_=_.updateQueue,_!==null&&(_=_.shared,(K&4194240)!==0)){var Q=_.lanes;Q&=p.pendingLanes,K|=Q,_.lanes=K,_a(p,K)}}function Fc(p,_){var K=p.updateQueue,Q=p.alternate;if(Q!==null&&(Q=Q.updateQueue,K===Q)){var Ae=null,ve=null;if(K=K.firstBaseUpdate,K!==null){do{var tt={eventTime:K.eventTime,lane:K.lane,tag:K.tag,payload:K.payload,callback:K.callback,next:null};ve===null?Ae=ve=tt:ve=ve.next=tt,K=K.next}while(K!==null);ve===null?Ae=ve=_:ve=ve.next=_}else Ae=ve=_;K={baseState:Q.baseState,firstBaseUpdate:Ae,lastBaseUpdate:ve,shared:Q.shared,effects:Q.effects},p.updateQueue=K;return}p=K.lastBaseUpdate,p===null?K.firstBaseUpdate=_:p.next=_,K.lastBaseUpdate=_}function Mu(p,_,K,Q){var Ae=p.updateQueue;dl=!1;var ve=Ae.firstBaseUpdate,tt=Ae.lastBaseUpdate,Rt=Ae.shared.pending;if(Rt!==null){Ae.shared.pending=null;var Wt=Rt,Cn=Wt.next;Wt.next=null,tt===null?ve=Cn:tt.next=Cn,tt=Wt;var rr=p.alternate;rr!==null&&(rr=rr.updateQueue,Rt=rr.lastBaseUpdate,Rt!==tt&&(Rt===null?rr.firstBaseUpdate=Cn:Rt.next=Cn,rr.lastBaseUpdate=Wt))}if(ve!==null){var Xn=Ae.baseState;tt=0,rr=Cn=Wt=null,Rt=ve;do{var jn=Rt.lane,Nr=Rt.eventTime;if((Q&jn)===jn){rr!==null&&(rr=rr.next={eventTime:Nr,lane:0,tag:Rt.tag,payload:Rt.payload,callback:Rt.callback,next:null});e:{var Jr=p,li=Rt;switch(jn=_,Nr=K,li.tag){case 1:if(Jr=li.payload,typeof Jr=="function"){Xn=Jr.call(Nr,Xn,jn);break e}Xn=Jr;break e;case 3:Jr.flags=Jr.flags&-65537|128;case 0:if(Jr=li.payload,jn=typeof Jr=="function"?Jr.call(Nr,Xn,jn):Jr,jn==null)break e;Xn=ze({},Xn,jn);break e;case 2:dl=!0}}Rt.callback!==null&&Rt.lane!==0&&(p.flags|=64,jn=Ae.effects,jn===null?Ae.effects=[Rt]:jn.push(Rt))}else Nr={eventTime:Nr,lane:jn,tag:Rt.tag,payload:Rt.payload,callback:Rt.callback,next:null},rr===null?(Cn=rr=Nr,Wt=Xn):rr=rr.next=Nr,tt|=jn;if(Rt=Rt.next,Rt===null){if(Rt=Ae.shared.pending,Rt===null)break;jn=Rt,Rt=jn.next,jn.next=null,Ae.lastBaseUpdate=jn,Ae.shared.pending=null}}while(!0);if(rr===null&&(Wt=Xn),Ae.baseState=Wt,Ae.firstBaseUpdate=Cn,Ae.lastBaseUpdate=rr,_=Ae.shared.interleaved,_!==null){Ae=_;do tt|=Ae.lane,Ae=Ae.next;while(Ae!==_)}else ve===null&&(Ae.shared.lanes=0);AA|=tt,p.lanes=tt,p.memoizedState=Xn}}function hc(p,_,K){if(p=_.effects,_.effects=null,p!==null)for(_=0;_<p.length;_++){var Q=p[_],Ae=Q.callback;if(Ae!==null){if(Q.callback=null,Q=K,typeof Ae!="function")throw Error(t(191,Ae));Ae.call(Q)}}}var ch={},TA=Os(ch),hh=Os(ch),O=Os(ch);function a(p){if(p===ch)throw Error(t(174));return p}function d(p,_){switch(ho(O,_),ho(hh,p),ho(TA,ch),p=_.nodeType,p){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Ne(null,"");break;default:p=p===8?_.parentNode:_,_=p.namespaceURI||null,p=p.tagName,_=Ne(_,p)}ps(TA),ho(TA,_)}function v(){ps(TA),ps(hh),ps(O)}function w(p){a(O.current);var _=a(TA.current),K=Ne(_,p.type);_!==K&&(ho(hh,p),ho(TA,K))}function I(p){hh.current===p&&(ps(TA),ps(hh))}var z=Os(0);function Y(p){for(var _=p;_!==null;){if(_.tag===13){var K=_.memoizedState;if(K!==null&&(K=K.dehydrated,K===null||K.data==="$?"||K.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var X=[];function ce(){for(var p=0;p<X.length;p++)X[p]._workInProgressVersionPrimary=null;X.length=0}var pe=te.ReactCurrentDispatcher,Se=te.ReactCurrentBatchConfig,Me=0,Fe=null,qe=null,it=null,lt=!1,ht=!1,bt=0,vt=0;function xt(){throw Error(t(321))}function Dt(p,_){if(_===null)return!1;for(var K=0;K<_.length&&K<p.length;K++)if(!hn(p[K],_[K]))return!1;return!0}function Lt(p,_,K,Q,Ae,ve){if(Me=ve,Fe=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,pe.current=p===null||p.memoizedState===null?Ua:dc,p=K(Q,Ae),ht){ve=0;do{if(ht=!1,bt=0,25<=ve)throw Error(t(301));ve+=1,it=qe=null,_.updateQueue=null,pe.current=oA,p=K(Q,Ae)}while(ht)}if(pe.current=jl,_=qe!==null&&qe.next!==null,Me=0,it=qe=Fe=null,lt=!1,_)throw Error(t(300));return p}function St(){var p=bt!==0;return bt=0,p}function Gt(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Fe.memoizedState=it=p:it=it.next=p,it}function rn(){if(qe===null){var p=Fe.alternate;p=p!==null?p.memoizedState:null}else p=qe.next;var _=it===null?Fe.memoizedState:it.next;if(_!==null)it=_,qe=p;else{if(p===null)throw Error(t(310));qe=p,p={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},it===null?Fe.memoizedState=it=p:it=it.next=p}return it}function Ht(p,_){return typeof _=="function"?_(p):_}function tn(p){var _=rn(),K=_.queue;if(K===null)throw Error(t(311));K.lastRenderedReducer=p;var Q=qe,Ae=Q.baseQueue,ve=K.pending;if(ve!==null){if(Ae!==null){var tt=Ae.next;Ae.next=ve.next,ve.next=tt}Q.baseQueue=Ae=ve,K.pending=null}if(Ae!==null){ve=Ae.next,Q=Q.baseState;var Rt=tt=null,Wt=null,Cn=ve;do{var rr=Cn.lane;if((Me&rr)===rr)Wt!==null&&(Wt=Wt.next={lane:0,action:Cn.action,hasEagerState:Cn.hasEagerState,eagerState:Cn.eagerState,next:null}),Q=Cn.hasEagerState?Cn.eagerState:p(Q,Cn.action);else{var Xn={lane:rr,action:Cn.action,hasEagerState:Cn.hasEagerState,eagerState:Cn.eagerState,next:null};Wt===null?(Rt=Wt=Xn,tt=Q):Wt=Wt.next=Xn,Fe.lanes|=rr,AA|=rr}Cn=Cn.next}while(Cn!==null&&Cn!==ve);Wt===null?tt=Q:Wt.next=Rt,hn(Q,_.memoizedState)||(Wl=!0),_.memoizedState=Q,_.baseState=tt,_.baseQueue=Wt,K.lastRenderedState=Q}if(p=K.interleaved,p!==null){Ae=p;do ve=Ae.lane,Fe.lanes|=ve,AA|=ve,Ae=Ae.next;while(Ae!==p)}else Ae===null&&(K.lanes=0);return[_.memoizedState,K.dispatch]}function sn(p){var _=rn(),K=_.queue;if(K===null)throw Error(t(311));K.lastRenderedReducer=p;var Q=K.dispatch,Ae=K.pending,ve=_.memoizedState;if(Ae!==null){K.pending=null;var tt=Ae=Ae.next;do ve=p(ve,tt.action),tt=tt.next;while(tt!==Ae);hn(ve,_.memoizedState)||(Wl=!0),_.memoizedState=ve,_.baseQueue===null&&(_.baseState=ve),K.lastRenderedState=ve}return[ve,Q]}function Yn(){}function Gn(p,_){var K=Fe,Q=rn(),Ae=_(),ve=!hn(Q.memoizedState,Ae);if(ve&&(Q.memoizedState=Ae,Wl=!0),Q=Q.queue,ws(ui.bind(null,K,Q,p),[p]),Q.getSnapshot!==_||ve||it!==null&&it.memoizedState.tag&1){if(K.flags|=2048,Xo(9,_r.bind(null,K,Q,Ae,_),void 0,null),Yo===null)throw Error(t(349));(Me&30)!==0||On(K,_,Ae)}return Ae}function On(p,_,K){p.flags|=16384,p={getSnapshot:_,value:K},_=Fe.updateQueue,_===null?(_={lastEffect:null,stores:null},Fe.updateQueue=_,_.stores=[p]):(K=_.stores,K===null?_.stores=[p]:K.push(p))}function _r(p,_,K,Q){_.value=K,_.getSnapshot=Q,xo(_)&&Zo(p)}function ui(p,_,K){return K(function(){xo(_)&&Zo(p)})}function xo(p){var _=p.getSnapshot;p=p.value;try{var K=_();return!hn(p,K)}catch{return!0}}function Zo(p){var _=tu(p,1);_!==null&&jh(_,p,1,-1)}function Fo(p){var _=Gt();return typeof p=="function"&&(p=p()),_.memoizedState=_.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:p},_.queue=p,p=p.dispatch=fl.bind(null,Fe,p),[_.memoizedState,p]}function Xo(p,_,K,Q){return p={tag:p,create:_,destroy:K,deps:Q,next:null},_=Fe.updateQueue,_===null?(_={lastEffect:null,stores:null},Fe.updateQueue=_,_.lastEffect=p.next=p):(K=_.lastEffect,K===null?_.lastEffect=p.next=p:(Q=K.next,K.next=p,p.next=Q,_.lastEffect=p)),p}function As(){return rn().memoizedState}function wi(p,_,K,Q){var Ae=Gt();Fe.flags|=p,Ae.memoizedState=Xo(1|_,K,void 0,Q===void 0?null:Q)}function Io(p,_,K,Q){var Ae=rn();Q=Q===void 0?null:Q;var ve=void 0;if(qe!==null){var tt=qe.memoizedState;if(ve=tt.destroy,Q!==null&&Dt(Q,tt.deps)){Ae.memoizedState=Xo(_,K,ve,Q);return}}Fe.flags|=p,Ae.memoizedState=Xo(1|_,K,ve,Q)}function Ws(p,_){return wi(8390656,8,p,_)}function ws(p,_){return Io(2048,8,p,_)}function ha(p,_){return Io(4,2,p,_)}function Js(p,_){return Io(4,4,p,_)}function nu(p,_){if(typeof _=="function")return p=p(),_(p),function(){_(null)};if(_!=null)return p=p(),_.current=p,function(){_.current=null}}function ju(p,_,K){return K=K!=null?K.concat([p]):null,Io(4,4,nu.bind(null,_,p),K)}function iA(){}function Lh(p,_){var K=rn();_=_===void 0?null:_;var Q=K.memoizedState;return Q!==null&&_!==null&&Dt(_,Q[1])?Q[0]:(K.memoizedState=[p,_],p)}function Uh(p,_){var K=rn();_=_===void 0?null:_;var Q=K.memoizedState;return Q!==null&&_!==null&&Dt(_,Q[1])?Q[0]:(p=p(),K.memoizedState=[p,_],p)}function wu(p,_,K){return(Me&21)===0?(p.baseState&&(p.baseState=!1,Wl=!0),p.memoizedState=K):(hn(K,_)||(K=Hl(),Fe.lanes|=K,AA|=K,p.baseState=!0),_)}function Kc(p,_){var K=gi;gi=K!==0&&4>K?K:4,p(!0);var Q=Se.transition;Se.transition={};try{p(!1),_()}finally{gi=K,Se.transition=Q}}function El(){return rn().memoizedState}function Wu(p,_,K){var Q=md(p);if(K={lane:Q,action:K,hasEagerState:!1,eagerState:null,next:null},Qu(p))zo(_,K);else if(K=Ms(p,_,K,Q),K!==null){var Ae=uA();jh(K,p,Q,Ae),ms(K,_,Q)}}function fl(p,_,K){var Q=md(p),Ae={lane:Q,action:K,hasEagerState:!1,eagerState:null,next:null};if(Qu(p))zo(_,Ae);else{var ve=p.alternate;if(p.lanes===0&&(ve===null||ve.lanes===0)&&(ve=_.lastRenderedReducer,ve!==null))try{var tt=_.lastRenderedState,Rt=ve(tt,K);if(Ae.hasEagerState=!0,Ae.eagerState=Rt,hn(Rt,tt)){var Wt=_.interleaved;Wt===null?(Ae.next=Ae,Oo(_)):(Ae.next=Wt.next,Wt.next=Ae),_.interleaved=Ae;return}}catch{}finally{}K=Ms(p,_,Ae,Q),K!==null&&(Ae=uA(),jh(K,p,Q,Ae),ms(K,_,Q))}}function Qu(p){var _=p.alternate;return p===Fe||_!==null&&_===Fe}function zo(p,_){ht=lt=!0;var K=p.pending;K===null?_.next=_:(_.next=K.next,K.next=_),p.pending=_}function ms(p,_,K){if((K&4194240)!==0){var Q=_.lanes;Q&=p.pendingLanes,K|=Q,_.lanes=K,_a(p,K)}}var jl={readContext:eu,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Ua={readContext:eu,useCallback:function(p,_){return Gt().memoizedState=[p,_===void 0?null:_],p},useContext:eu,useEffect:Ws,useImperativeHandle:function(p,_,K){return K=K!=null?K.concat([p]):null,wi(4194308,4,nu.bind(null,_,p),K)},useLayoutEffect:function(p,_){return wi(4194308,4,p,_)},useInsertionEffect:function(p,_){return wi(4,2,p,_)},useMemo:function(p,_){var K=Gt();return _=_===void 0?null:_,p=p(),K.memoizedState=[p,_],p},useReducer:function(p,_,K){var Q=Gt();return _=K!==void 0?K(_):_,Q.memoizedState=Q.baseState=_,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:_},Q.queue=p,p=p.dispatch=Wu.bind(null,Fe,p),[Q.memoizedState,p]},useRef:function(p){var _=Gt();return p={current:p},_.memoizedState=p},useState:Fo,useDebugValue:iA,useDeferredValue:function(p){return Gt().memoizedState=p},useTransition:function(){var p=Fo(!1),_=p[0];return p=Kc.bind(null,p[1]),Gt().memoizedState=p,[_,p]},useMutableSource:function(){},useSyncExternalStore:function(p,_,K){var Q=Fe,Ae=Gt();if(Is){if(K===void 0)throw Error(t(407));K=K()}else{if(K=_(),Yo===null)throw Error(t(349));(Me&30)!==0||On(Q,_,K)}Ae.memoizedState=K;var ve={value:K,getSnapshot:_};return Ae.queue=ve,Ws(ui.bind(null,Q,ve,p),[p]),Q.flags|=2048,Xo(9,_r.bind(null,Q,ve,K,_),void 0,null),K},useId:function(){var p=Gt(),_=Yo.identifierPrefix;if(Is){var K=wl,Q=Ml;K=(Q&~(1<<32-gn(Q)-1)).toString(32)+K,_=":"+_+"R"+K,K=bt++,0<K&&(_+="H"+K.toString(32)),_+=":"}else K=vt++,_=":"+_+"r"+K.toString(32)+":";return p.memoizedState=_},unstable_isNewReconciler:!1},dc={readContext:eu,useCallback:Lh,useContext:eu,useEffect:ws,useImperativeHandle:ju,useInsertionEffect:ha,useLayoutEffect:Js,useMemo:Uh,useReducer:tn,useRef:As,useState:function(){return tn(Ht)},useDebugValue:iA,useDeferredValue:function(p){var _=rn();return wu(_,qe.memoizedState,p)},useTransition:function(){var p=tn(Ht)[0],_=rn().memoizedState;return[p,_]},useMutableSource:Yn,useSyncExternalStore:Gn,useId:El,unstable_isNewReconciler:!1},oA={readContext:eu,useCallback:Lh,useContext:eu,useEffect:ws,useImperativeHandle:ju,useInsertionEffect:ha,useLayoutEffect:Js,useMemo:Uh,useReducer:sn,useRef:As,useState:function(){return sn(Ht)},useDebugValue:iA,useDeferredValue:function(p){var _=rn();return qe===null?_.memoizedState=p:wu(_,qe.memoizedState,p)},useTransition:function(){var p=sn(Ht)[0],_=rn().memoizedState;return[p,_]},useMutableSource:Yn,useSyncExternalStore:Gn,useId:El,unstable_isNewReconciler:!1};function ea(p,_){if(p&&p.defaultProps){_=ze({},_),p=p.defaultProps;for(var K in p)_[K]===void 0&&(_[K]=p[K]);return _}return _}function kA(p,_,K,Q){_=p.memoizedState,K=K(Q,_),K=K==null?_:ze({},_,K),p.memoizedState=K,p.lanes===0&&(p.updateQueue.baseState=K)}var Su={isMounted:function(p){return(p=p._reactInternals)?Kr(p)===p:!1},enqueueSetState:function(p,_,K){p=p._reactInternals;var Q=uA(),Ae=md(p),ve=rA(Q,Ae);ve.payload=_,K!=null&&(ve.callback=K),_=ka(p,ve,Ae),_!==null&&(jh(_,p,Ae,Q),Dc(_,p,Ae))},enqueueReplaceState:function(p,_,K){p=p._reactInternals;var Q=uA(),Ae=md(p),ve=rA(Q,Ae);ve.tag=1,ve.payload=_,K!=null&&(ve.callback=K),_=ka(p,ve,Ae),_!==null&&(jh(_,p,Ae,Q),Dc(_,p,Ae))},enqueueForceUpdate:function(p,_){p=p._reactInternals;var K=uA(),Q=md(p),Ae=rA(K,Q);Ae.tag=2,_!=null&&(Ae.callback=_),_=ka(p,Ae,Q),_!==null&&(jh(_,p,Q,K),Dc(_,p,Q))}};function gf(p,_,K,Q,Ae,ve,tt){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(Q,ve,tt):_.prototype&&_.prototype.isPureReactComponent?!Pr(K,Q)||!Pr(Ae,ve):!0}function Xa(p,_,K){var Q=!1,Ae=HA,ve=_.contextType;return typeof ve=="object"&&ve!==null?ve=eu(ve):(Ae=cl(_)?ul:Fa.current,Q=_.contextTypes,ve=(Q=Q!=null)?zu(p,Ae):HA),_=new _(K,ve),p.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Su,p.stateNode=_,_._reactInternals=p,Q&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=Ae,p.__reactInternalMemoizedMaskedChildContext=ve),_}function zh(p,_,K,Q){p=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(K,Q),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(K,Q),_.state!==p&&Su.enqueueReplaceState(_,_.state,null)}function Rd(p,_,K,Q){var Ae=p.stateNode;Ae.props=K,Ae.state=p.memoizedState,Ae.refs={},cc(p);var ve=_.contextType;typeof ve=="object"&&ve!==null?Ae.context=eu(ve):(ve=cl(_)?ul:Fa.current,Ae.context=zu(p,ve)),Ae.state=p.memoizedState,ve=_.getDerivedStateFromProps,typeof ve=="function"&&(kA(p,_,ve,K),Ae.state=p.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Ae.getSnapshotBeforeUpdate=="function"||typeof Ae.UNSAFE_componentWillMount!="function"&&typeof Ae.componentWillMount!="function"||(_=Ae.state,typeof Ae.componentWillMount=="function"&&Ae.componentWillMount(),typeof Ae.UNSAFE_componentWillMount=="function"&&Ae.UNSAFE_componentWillMount(),_!==Ae.state&&Su.enqueueReplaceState(Ae,Ae.state,null),Mu(p,K,Ae,Q),Ae.state=p.memoizedState),typeof Ae.componentDidMount=="function"&&(p.flags|=4194308)}function Yu(p,_){try{var K="",Q=_;do K+=ft(Q),Q=Q.return;while(Q);var Ae=K}catch(ve){Ae=`
Error generating stack: `+ve.message+`
`+ve.stack}return{value:p,source:_,stack:Ae,digest:null}}function Nh(p,_,K){return{value:p,source:null,stack:K??null,digest:_??null}}function ru(p,_){try{console.error(_.value)}catch(K){setTimeout(function(){throw K})}}var qu=typeof WeakMap=="function"?WeakMap:Map;function dd(p,_,K){K=rA(-1,K),K.tag=3,K.payload={element:null};var Q=_.value;return K.callback=function(){t0||(t0=!0,eg=Q),ru(p,_)},K}function Zf(p,_,K){K=rA(-1,K),K.tag=3;var Q=p.type.getDerivedStateFromError;if(typeof Q=="function"){var Ae=_.value;K.payload=function(){return Q(Ae)},K.callback=function(){ru(p,_)}}var ve=p.stateNode;return ve!==null&&typeof ve.componentDidCatch=="function"&&(K.callback=function(){ru(p,_),typeof Q!="function"&&(Lc===null?Lc=new Set([this]):Lc.add(this));var tt=_.stack;this.componentDidCatch(_.value,{componentStack:tt!==null?tt:""})}),K}function Dd(p,_,K){var Q=p.pingCache;if(Q===null){Q=p.pingCache=new qu;var Ae=new Set;Q.set(_,Ae)}else Ae=Q.get(_),Ae===void 0&&(Ae=new Set,Q.set(_,Ae));Ae.has(K)||(Ae.add(K),p=h1.bind(null,p,_,K),_.then(p,p))}function jp(p){do{var _;if((_=p.tag===13)&&(_=p.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return p;p=p.return}while(p!==null);return null}function fd(p,_,K,Q,Ae){return(p.mode&1)===0?(p===_?p.flags|=65536:(p.flags|=128,K.flags|=131072,K.flags&=-52805,K.tag===1&&(K.alternate===null?K.tag=17:(_=rA(-1,1),_.tag=2,ka(K,_,1))),K.lanes|=1),p):(p.flags|=65536,p.lanes=Ae,p)}var yf=te.ReactCurrentOwner,Wl=!1;function Bl(p,_,K,Q){_.child=p===null?uc(_,null,K,Q):Wo(_,p.child,K,Q)}function e0(p,_,K,Q,Ae){K=K.render;var ve=_.ref;return La(_,Ae),Q=Lt(p,_,K,Q,ve,Ae),K=St(),p!==null&&!Wl?(_.updateQueue=p.updateQueue,_.flags&=-2053,p.lanes&=~Ae,pl(p,_,Ae)):(Is&&K&&vu(_),_.flags|=1,Bl(p,_,Q,Ae),_.child)}function Xf(p,_,K,Q,Ae){if(p===null){var ve=K.type;return typeof ve=="function"&&!qp(ve)&&ve.defaultProps===void 0&&K.compare===null&&K.defaultProps===void 0?(_.tag=15,_.type=ve,Qo(p,_,ve,Q,Ae)):(p=l0(K.type,null,Q,_,_.mode,Ae),p.ref=_.ref,p.return=_,_.child=p)}if(ve=p.child,(p.lanes&Ae)===0){var tt=ve.memoizedProps;if(K=K.compare,K=K!==null?K:Pr,K(tt,Q)&&p.ref===_.ref)return pl(p,_,Ae)}return _.flags|=1,p=gh(ve,Q),p.ref=_.ref,p.return=_,_.child=p}function Qo(p,_,K,Q,Ae){if(p!==null){var ve=p.memoizedProps;if(Pr(ve,Q)&&p.ref===_.ref)if(Wl=!1,_.pendingProps=Q=ve,(p.lanes&Ae)!==0)(p.flags&131072)!==0&&(Wl=!0);else return _.lanes=p.lanes,pl(p,_,Ae)}return Fd(p,_,K,Q,Ae)}function Wp(p,_,K){var Q=_.pendingProps,Ae=Q.children,ve=p!==null?p.memoizedState:null;if(Q.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},ho(RA,Ts),Ts|=K;else{if((K&1073741824)===0)return p=ve!==null?ve.baseLanes|K:K,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:p,cachePool:null,transitions:null},_.updateQueue=null,ho(RA,Ts),Ts|=p,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ve!==null?ve.baseLanes:K,ho(RA,Ts),Ts|=Q}else ve!==null?(Q=ve.baseLanes|K,_.memoizedState=null):Q=K,ho(RA,Ts),Ts|=Q;return Bl(p,_,Ae,K),_.child}function dh(p,_){var K=_.ref;(p===null&&K!==null||p!==null&&p.ref!==K)&&(_.flags|=512,_.flags|=2097152)}function Fd(p,_,K,Q,Ae){var ve=cl(K)?ul:Fa.current;return ve=zu(_,ve),La(_,Ae),K=Lt(p,_,K,Q,ve,Ae),Q=St(),p!==null&&!Wl?(_.updateQueue=p.updateQueue,_.flags&=-2053,p.lanes&=~Ae,pl(p,_,Ae)):(Is&&Q&&vu(_),_.flags|=1,Bl(p,_,K,Ae),_.child)}function sA(p,_,K,Q,Ae){if(cl(K)){var ve=!0;Xs(_)}else ve=!1;if(La(_,Ae),_.stateNode===null)bf(p,_),Xa(_,K,Q),Rd(_,K,Q,Ae),Q=!0;else if(p===null){var tt=_.stateNode,Rt=_.memoizedProps;tt.props=Rt;var Wt=tt.context,Cn=K.contextType;typeof Cn=="object"&&Cn!==null?Cn=eu(Cn):(Cn=cl(K)?ul:Fa.current,Cn=zu(_,Cn));var rr=K.getDerivedStateFromProps,Xn=typeof rr=="function"||typeof tt.getSnapshotBeforeUpdate=="function";Xn||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Rt!==Q||Wt!==Cn)&&zh(_,tt,Q,Cn),dl=!1;var jn=_.memoizedState;tt.state=jn,Mu(_,Q,tt,Ae),Wt=_.memoizedState,Rt!==Q||jn!==Wt||Nl.current||dl?(typeof rr=="function"&&(kA(_,K,rr,Q),Wt=_.memoizedState),(Rt=dl||gf(_,K,Rt,Q,jn,Wt,Cn))?(Xn||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(_.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=Q,_.memoizedState=Wt),tt.props=Q,tt.state=Wt,tt.context=Cn,Q=Rt):(typeof tt.componentDidMount=="function"&&(_.flags|=4194308),Q=!1)}else{tt=_.stateNode,Rc(p,_),Rt=_.memoizedProps,Cn=_.type===_.elementType?Rt:ea(_.type,Rt),tt.props=Cn,Xn=_.pendingProps,jn=tt.context,Wt=K.contextType,typeof Wt=="object"&&Wt!==null?Wt=eu(Wt):(Wt=cl(K)?ul:Fa.current,Wt=zu(_,Wt));var Nr=K.getDerivedStateFromProps;(rr=typeof Nr=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Rt!==Xn||jn!==Wt)&&zh(_,tt,Q,Wt),dl=!1,jn=_.memoizedState,tt.state=jn,Mu(_,Q,tt,Ae);var Jr=_.memoizedState;Rt!==Xn||jn!==Jr||Nl.current||dl?(typeof Nr=="function"&&(kA(_,K,Nr,Q),Jr=_.memoizedState),(Cn=dl||gf(_,K,Cn,Q,jn,Jr,Wt)||!1)?(rr||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(Q,Jr,Wt),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(Q,Jr,Wt)),typeof tt.componentDidUpdate=="function"&&(_.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof tt.componentDidUpdate!="function"||Rt===p.memoizedProps&&jn===p.memoizedState||(_.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Rt===p.memoizedProps&&jn===p.memoizedState||(_.flags|=1024),_.memoizedProps=Q,_.memoizedState=Jr),tt.props=Q,tt.state=Jr,tt.context=Wt,Q=Cn):(typeof tt.componentDidUpdate!="function"||Rt===p.memoizedProps&&jn===p.memoizedState||(_.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Rt===p.memoizedProps&&jn===p.memoizedState||(_.flags|=1024),Q=!1)}return Gh(p,_,K,Q,ve,Ae)}function Gh(p,_,K,Q,Ae,ve){dh(p,_);var tt=(_.flags&128)!==0;if(!Q&&!tt)return Ae&&sh(_,K,!1),pl(p,_,ve);Q=_.stateNode,yf.current=_;var Rt=tt&&typeof K.getDerivedStateFromError!="function"?null:Q.render();return _.flags|=1,p!==null&&tt?(_.child=Wo(_,p.child,null,ve),_.child=Wo(_,null,Rt,ve)):Bl(p,_,Rt,ve),_.memoizedState=Q.state,Ae&&sh(_,K,!0),_.child}function Kd(p){var _=p.stateNode;_.pendingContext?mf(p,_.pendingContext,_.pendingContext!==_.context):_.context&&mf(p,_.context,!1),d(p,_.containerInfo)}function fc(p,_,K,Q,Ae){return bo(),hl(Ae),_.flags|=256,Bl(p,_,K,Q),_.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function vf(p){return{baseLanes:p,cachePool:null,transitions:null}}function Cf(p,_,K){var Q=_.pendingProps,Ae=z.current,ve=!1,tt=(_.flags&128)!==0,Rt;if((Rt=tt)||(Rt=p!==null&&p.memoizedState===null?!1:(Ae&2)!==0),Rt?(ve=!0,_.flags&=-129):(p===null||p.memoizedState!==null)&&(Ae|=1),ho(z,Ae&1),p===null)return Sl(_),p=_.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((_.mode&1)===0?_.lanes=1:p.data==="$!"?_.lanes=8:_.lanes=1073741824,null):(tt=Q.children,p=Q.fallback,ve?(Q=_.mode,ve=_.child,tt={mode:"hidden",children:tt},(Q&1)===0&&ve!==null?(ve.childLanes=0,ve.pendingProps=tt):ve=A0(tt,Q,0,null),p=lp(p,Q,K,null),ve.return=_,p.return=_,ve.sibling=p,_.child=ve,_.child.memoizedState=vf(K),_.memoizedState=Ld,p):pd(_,tt));if(Ae=p.memoizedState,Ae!==null&&(Rt=Ae.dehydrated,Rt!==null))return Si(p,_,tt,Q,Rt,Ae,K);if(ve){ve=Q.fallback,tt=_.mode,Ae=p.child,Rt=Ae.sibling;var Wt={mode:"hidden",children:Q.children};return(tt&1)===0&&_.child!==Ae?(Q=_.child,Q.childLanes=0,Q.pendingProps=Wt,_.deletions=null):(Q=gh(Ae,Wt),Q.subtreeFlags=Ae.subtreeFlags&14680064),Rt!==null?ve=gh(Rt,ve):(ve=lp(ve,tt,K,null),ve.flags|=2),ve.return=_,Q.return=_,Q.sibling=ve,_.child=Q,Q=ve,ve=_.child,tt=p.child.memoizedState,tt=tt===null?vf(K):{baseLanes:tt.baseLanes|K,cachePool:null,transitions:tt.transitions},ve.memoizedState=tt,ve.childLanes=p.childLanes&~K,_.memoizedState=Ld,Q}return ve=p.child,p=ve.sibling,Q=gh(ve,{mode:"visible",children:Q.children}),(_.mode&1)===0&&(Q.lanes=K),Q.return=_,Q.sibling=null,p!==null&&(K=_.deletions,K===null?(_.deletions=[p],_.flags|=16):K.push(p)),_.child=Q,_.memoizedState=null,Q}function pd(p,_){return _=A0({mode:"visible",children:_},p.mode,0,null),_.return=p,p.child=_}function fh(p,_,K,Q){return Q!==null&&hl(Q),Wo(_,p.child,null,K),p=pd(_,_.pendingProps.children),p.flags|=2,_.memoizedState=null,p}function Si(p,_,K,Q,Ae,ve,tt){if(K)return _.flags&256?(_.flags&=-257,Q=Nh(Error(t(422))),fh(p,_,tt,Q)):_.memoizedState!==null?(_.child=p.child,_.flags|=128,null):(ve=Q.fallback,Ae=_.mode,Q=A0({mode:"visible",children:Q.children},Ae,0,null),ve=lp(ve,Ae,tt,null),ve.flags|=2,Q.return=_,ve.return=_,Q.sibling=ve,_.child=Q,(_.mode&1)!==0&&Wo(_,p.child,null,tt),_.child.memoizedState=vf(tt),_.memoizedState=Ld,ve);if((_.mode&1)===0)return fh(p,_,tt,null);if(Ae.data==="$!"){if(Q=Ae.nextSibling&&Ae.nextSibling.dataset,Q)var Rt=Q.dgst;return Q=Rt,ve=Error(t(419)),Q=Nh(ve,Q,void 0),fh(p,_,tt,Q)}if(Rt=(tt&p.childLanes)!==0,Wl||Rt){if(Q=Yo,Q!==null){switch(tt&-tt){case 4:Ae=2;break;case 16:Ae=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ae=32;break;case 536870912:Ae=268435456;break;default:Ae=0}Ae=(Ae&(Q.suspendedLanes|tt))!==0?0:Ae,Ae!==0&&Ae!==ve.retryLane&&(ve.retryLane=Ae,tu(p,Ae),jh(Q,p,Ae,-1))}return bm(),Q=Nh(Error(t(421))),fh(p,_,tt,Q)}return Ae.data==="$?"?(_.flags|=128,_.child=p.child,_=iv.bind(null,p),Ae._reactRetry=_,null):(p=ve.treeContext,Ka=fs(Ae.nextSibling),Ia=_,Is=!0,IA=null,p!==null&&(Oa[xa++]=Ml,Oa[xa++]=wl,Oa[xa++]=lc,Ml=p.id,wl=p.overflow,lc=_),_=pd(_,Q.children),_.flags|=4096,_)}function _f(p,_,K){p.lanes|=_;var Q=p.alternate;Q!==null&&(Q.lanes|=_),Ta(p.return,_,K)}function No(p,_,K,Q,Ae){var ve=p.memoizedState;ve===null?p.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:Q,tail:K,tailMode:Ae}:(ve.isBackwards=_,ve.rendering=null,ve.renderingStartTime=0,ve.last=Q,ve.tail=K,ve.tailMode=Ae)}function ph(p,_,K){var Q=_.pendingProps,Ae=Q.revealOrder,ve=Q.tail;if(Bl(p,_,Q.children,K),Q=z.current,(Q&2)!==0)Q=Q&1|2,_.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=_.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&_f(p,K,_);else if(p.tag===19)_f(p,K,_);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===_)break e;for(;p.sibling===null;){if(p.return===null||p.return===_)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}Q&=1}if(ho(z,Q),(_.mode&1)===0)_.memoizedState=null;else switch(Ae){case"forwards":for(K=_.child,Ae=null;K!==null;)p=K.alternate,p!==null&&Y(p)===null&&(Ae=K),K=K.sibling;K=Ae,K===null?(Ae=_.child,_.child=null):(Ae=K.sibling,K.sibling=null),No(_,!1,Ae,K,ve);break;case"backwards":for(K=null,Ae=_.child,_.child=null;Ae!==null;){if(p=Ae.alternate,p!==null&&Y(p)===null){_.child=Ae;break}p=Ae.sibling,Ae.sibling=K,K=Ae,Ae=p}No(_,!0,K,null,ve);break;case"together":No(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function bf(p,_){(_.mode&1)===0&&p!==null&&(p.alternate=null,_.alternate=null,_.flags|=2)}function pl(p,_,K){if(p!==null&&(_.dependencies=p.dependencies),AA|=_.lanes,(K&_.childLanes)===0)return null;if(p!==null&&_.child!==p.child)throw Error(t(153));if(_.child!==null){for(p=_.child,K=gh(p,p.pendingProps),_.child=K,K.return=_;p.sibling!==null;)p=p.sibling,K=K.sibling=gh(p,p.pendingProps),K.return=_;K.sibling=null}return _.child}function PA(p,_,K){switch(_.tag){case 3:Kd(_),bo();break;case 5:w(_);break;case 1:cl(_.type)&&Xs(_);break;case 4:d(_,_.stateNode.containerInfo);break;case 10:var Q=_.type._context,Ae=_.memoizedProps.value;ho(Ir,Q._currentValue),Q._currentValue=Ae;break;case 13:if(Q=_.memoizedState,Q!==null)return Q.dehydrated!==null?(ho(z,z.current&1),_.flags|=128,null):(K&_.child.childLanes)!==0?Cf(p,_,K):(ho(z,z.current&1),p=pl(p,_,K),p!==null?p.sibling:null);ho(z,z.current&1);break;case 19:if(Q=(K&_.childLanes)!==0,(p.flags&128)!==0){if(Q)return ph(p,_,K);_.flags|=128}if(Ae=_.memoizedState,Ae!==null&&(Ae.rendering=null,Ae.tail=null,Ae.lastEffect=null),ho(z,z.current),Q)break;return null;case 22:case 23:return _.lanes=0,Wp(p,_,K)}return pl(p,_,K)}var Ja,Jf,Pa,Qp;Ja=function(p,_){for(var K=_.child;K!==null;){if(K.tag===5||K.tag===6)p.appendChild(K.stateNode);else if(K.tag!==4&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===_)break;for(;K.sibling===null;){if(K.return===null||K.return===_)return;K=K.return}K.sibling.return=K.return,K=K.sibling}},Jf=function(){},Pa=function(p,_,K,Q){var Ae=p.memoizedProps;if(Ae!==Q){p=_.stateNode,a(TA.current);var ve=null;switch(K){case"input":Ae=wt(p,Ae),Q=wt(p,Q),ve=[];break;case"select":Ae=ze({},Ae,{value:void 0}),Q=ze({},Q,{value:void 0}),ve=[];break;case"textarea":Ae=Mn(p,Ae),Q=Mn(p,Q),ve=[];break;default:typeof Ae.onClick!="function"&&typeof Q.onClick=="function"&&(p.onclick=oc)}De(K,Q);var tt;K=null;for(Cn in Ae)if(!Q.hasOwnProperty(Cn)&&Ae.hasOwnProperty(Cn)&&Ae[Cn]!=null)if(Cn==="style"){var Rt=Ae[Cn];for(tt in Rt)Rt.hasOwnProperty(tt)&&(K||(K={}),K[tt]="")}else Cn!=="dangerouslySetInnerHTML"&&Cn!=="children"&&Cn!=="suppressContentEditableWarning"&&Cn!=="suppressHydrationWarning"&&Cn!=="autoFocus"&&(i.hasOwnProperty(Cn)?ve||(ve=[]):(ve=ve||[]).push(Cn,null));for(Cn in Q){var Wt=Q[Cn];if(Rt=Ae?.[Cn],Q.hasOwnProperty(Cn)&&Wt!==Rt&&(Wt!=null||Rt!=null))if(Cn==="style")if(Rt){for(tt in Rt)!Rt.hasOwnProperty(tt)||Wt&&Wt.hasOwnProperty(tt)||(K||(K={}),K[tt]="");for(tt in Wt)Wt.hasOwnProperty(tt)&&Rt[tt]!==Wt[tt]&&(K||(K={}),K[tt]=Wt[tt])}else K||(ve||(ve=[]),ve.push(Cn,K)),K=Wt;else Cn==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Rt=Rt?Rt.__html:void 0,Wt!=null&&Rt!==Wt&&(ve=ve||[]).push(Cn,Wt)):Cn==="children"?typeof Wt!="string"&&typeof Wt!="number"||(ve=ve||[]).push(Cn,""+Wt):Cn!=="suppressContentEditableWarning"&&Cn!=="suppressHydrationWarning"&&(i.hasOwnProperty(Cn)?(Wt!=null&&Cn==="onScroll"&&ls("scroll",p),ve||Rt===Wt||(ve=[])):(ve=ve||[]).push(Cn,Wt))}K&&(ve=ve||[]).push("style",K);var Cn=ve;(_.updateQueue=Cn)&&(_.flags|=4)}},Qp=function(p,_,K,Q){K!==Q&&(_.flags|=4)};function ep(p,_){if(!Is)switch(p.tailMode){case"hidden":_=p.tail;for(var K=null;_!==null;)_.alternate!==null&&(K=_),_=_.sibling;K===null?p.tail=null:K.sibling=null;break;case"collapsed":K=p.tail;for(var Q=null;K!==null;)K.alternate!==null&&(Q=K),K=K.sibling;Q===null?_||p.tail===null?p.tail=null:p.tail.sibling=null:Q.sibling=null}}function aA(p){var _=p.alternate!==null&&p.alternate.child===p.child,K=0,Q=0;if(_)for(var Ae=p.child;Ae!==null;)K|=Ae.lanes|Ae.childLanes,Q|=Ae.subtreeFlags&14680064,Q|=Ae.flags&14680064,Ae.return=p,Ae=Ae.sibling;else for(Ae=p.child;Ae!==null;)K|=Ae.lanes|Ae.childLanes,Q|=Ae.subtreeFlags,Q|=Ae.flags,Ae.return=p,Ae=Ae.sibling;return p.subtreeFlags|=Q,p.childLanes=K,_}function tp(p,_,K){var Q=_.pendingProps;switch(Ah(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aA(_),null;case 1:return cl(_.type)&&Nu(),aA(_),null;case 3:return Q=_.stateNode,v(),ps(Nl),ps(Fa),ce(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(p===null||p.child===null)&&(Kh(_)?_.flags|=4:p===null||p.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,IA!==null&&(tg(IA),IA=null))),Jf(p,_),aA(_),null;case 5:I(_);var Ae=a(O.current);if(K=_.type,p!==null&&_.stateNode!=null)Pa(p,_,K,Q,Ae),p.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!Q){if(_.stateNode===null)throw Error(t(166));return aA(_),null}if(p=a(TA.current),Kh(_)){Q=_.stateNode,K=_.type;var ve=_.memoizedProps;switch(Q[VA]=_,Q[yu]=ve,p=(_.mode&1)!==0,K){case"dialog":ls("cancel",Q),ls("close",Q);break;case"iframe":case"object":case"embed":ls("load",Q);break;case"video":case"audio":for(Ae=0;Ae<pu.length;Ae++)ls(pu[Ae],Q);break;case"source":ls("error",Q);break;case"img":case"image":case"link":ls("error",Q),ls("load",Q);break;case"details":ls("toggle",Q);break;case"input":Qt(Q,ve),ls("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ve.multiple},ls("invalid",Q);break;case"textarea":En(Q,ve),ls("invalid",Q)}De(K,ve),Ae=null;for(var tt in ve)if(ve.hasOwnProperty(tt)){var Rt=ve[tt];tt==="children"?typeof Rt=="string"?Q.textContent!==Rt&&(ve.suppressHydrationWarning!==!0&&gu(Q.textContent,Rt,p),Ae=["children",Rt]):typeof Rt=="number"&&Q.textContent!==""+Rt&&(ve.suppressHydrationWarning!==!0&&gu(Q.textContent,Rt,p),Ae=["children",""+Rt]):i.hasOwnProperty(tt)&&Rt!=null&&tt==="onScroll"&&ls("scroll",Q)}switch(K){case"input":Qe(Q),Vn(Q,ve,!0);break;case"textarea":Qe(Q),Hn(Q);break;case"select":case"option":break;default:typeof ve.onClick=="function"&&(Q.onclick=oc)}Q=Ae,_.updateQueue=Q,Q!==null&&(_.flags|=4)}else{tt=Ae.nodeType===9?Ae:Ae.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=Pn(K)),p==="http://www.w3.org/1999/xhtml"?K==="script"?(p=tt.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof Q.is=="string"?p=tt.createElement(K,{is:Q.is}):(p=tt.createElement(K),K==="select"&&(tt=p,Q.multiple?tt.multiple=!0:Q.size&&(tt.size=Q.size))):p=tt.createElementNS(p,K),p[VA]=_,p[yu]=Q,Ja(p,_,!1,!1),_.stateNode=p;e:{switch(tt=Ze(K,Q),K){case"dialog":ls("cancel",p),ls("close",p),Ae=Q;break;case"iframe":case"object":case"embed":ls("load",p),Ae=Q;break;case"video":case"audio":for(Ae=0;Ae<pu.length;Ae++)ls(pu[Ae],p);Ae=Q;break;case"source":ls("error",p),Ae=Q;break;case"img":case"image":case"link":ls("error",p),ls("load",p),Ae=Q;break;case"details":ls("toggle",p),Ae=Q;break;case"input":Qt(p,Q),Ae=wt(p,Q),ls("invalid",p);break;case"option":Ae=Q;break;case"select":p._wrapperState={wasMultiple:!!Q.multiple},Ae=ze({},Q,{value:void 0}),ls("invalid",p);break;case"textarea":En(p,Q),Ae=Mn(p,Q),ls("invalid",p);break;default:Ae=Q}De(K,Ae),Rt=Ae;for(ve in Rt)if(Rt.hasOwnProperty(ve)){var Wt=Rt[ve];ve==="style"?ct(p,Wt):ve==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Wt!=null&&ie(p,Wt)):ve==="children"?typeof Wt=="string"?(K!=="textarea"||Wt!=="")&&se(p,Wt):typeof Wt=="number"&&se(p,""+Wt):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?Wt!=null&&ve==="onScroll"&&ls("scroll",p):Wt!=null&&oe(p,ve,Wt,tt))}switch(K){case"input":Qe(p),Vn(p,Q,!1);break;case"textarea":Qe(p),Hn(p);break;case"option":Q.value!=null&&p.setAttribute("value",""+Le(Q.value));break;case"select":p.multiple=!!Q.multiple,ve=Q.value,ve!=null?wn(p,!!Q.multiple,ve,!1):Q.defaultValue!=null&&wn(p,!!Q.multiple,Q.defaultValue,!0);break;default:typeof Ae.onClick=="function"&&(p.onclick=oc)}switch(K){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return aA(_),null;case 6:if(p&&_.stateNode!=null)Qp(p,_,p.memoizedProps,Q);else{if(typeof Q!="string"&&_.stateNode===null)throw Error(t(166));if(K=a(O.current),a(TA.current),Kh(_)){if(Q=_.stateNode,K=_.memoizedProps,Q[VA]=_,(ve=Q.nodeValue!==K)&&(p=Ia,p!==null))switch(p.tag){case 3:gu(Q.nodeValue,K,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&gu(Q.nodeValue,K,(p.mode&1)!==0)}ve&&(_.flags|=4)}else Q=(K.nodeType===9?K:K.ownerDocument).createTextNode(Q),Q[VA]=_,_.stateNode=Q}return aA(_),null;case 13:if(ps(z),Q=_.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Is&&Ka!==null&&(_.mode&1)!==0&&(_.flags&128)===0)ZA(),bo(),_.flags|=98560,ve=!1;else if(ve=Kh(_),Q!==null&&Q.dehydrated!==null){if(p===null){if(!ve)throw Error(t(318));if(ve=_.memoizedState,ve=ve!==null?ve.dehydrated:null,!ve)throw Error(t(317));ve[VA]=_}else bo(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;aA(_),ve=!1}else IA!==null&&(tg(IA),IA=null),ve=!0;if(!ve)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=K,_):(Q=Q!==null,Q!==(p!==null&&p.memoizedState!==null)&&Q&&(_.child.flags|=8192,(_.mode&1)!==0&&(p===null||(z.current&1)!==0?ao===0&&(ao=3):bm())),_.updateQueue!==null&&(_.flags|=4),aA(_),null);case 4:return v(),Jf(p,_),p===null&&wA(_.stateNode.containerInfo),aA(_),null;case 10:return Uo(_.type._context),aA(_),null;case 17:return cl(_.type)&&Nu(),aA(_),null;case 19:if(ps(z),ve=_.memoizedState,ve===null)return aA(_),null;if(Q=(_.flags&128)!==0,tt=ve.rendering,tt===null)if(Q)ep(ve,!1);else{if(ao!==0||p!==null&&(p.flags&128)!==0)for(p=_.child;p!==null;){if(tt=Y(p),tt!==null){for(_.flags|=128,ep(ve,!1),Q=tt.updateQueue,Q!==null&&(_.updateQueue=Q,_.flags|=4),_.subtreeFlags=0,Q=K,K=_.child;K!==null;)ve=K,p=Q,ve.flags&=14680066,tt=ve.alternate,tt===null?(ve.childLanes=0,ve.lanes=p,ve.child=null,ve.subtreeFlags=0,ve.memoizedProps=null,ve.memoizedState=null,ve.updateQueue=null,ve.dependencies=null,ve.stateNode=null):(ve.childLanes=tt.childLanes,ve.lanes=tt.lanes,ve.child=tt.child,ve.subtreeFlags=0,ve.deletions=null,ve.memoizedProps=tt.memoizedProps,ve.memoizedState=tt.memoizedState,ve.updateQueue=tt.updateQueue,ve.type=tt.type,p=tt.dependencies,ve.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),K=K.sibling;return ho(z,z.current&1|2),_.child}p=p.sibling}ve.tail!==null&&si()>rp&&(_.flags|=128,Q=!0,ep(ve,!1),_.lanes=4194304)}else{if(!Q)if(p=Y(tt),p!==null){if(_.flags|=128,Q=!0,K=p.updateQueue,K!==null&&(_.updateQueue=K,_.flags|=4),ep(ve,!0),ve.tail===null&&ve.tailMode==="hidden"&&!tt.alternate&&!Is)return aA(_),null}else 2*si()-ve.renderingStartTime>rp&&K!==1073741824&&(_.flags|=128,Q=!0,ep(ve,!1),_.lanes=4194304);ve.isBackwards?(tt.sibling=_.child,_.child=tt):(K=ve.last,K!==null?K.sibling=tt:_.child=tt,ve.last=tt)}return ve.tail!==null?(_=ve.tail,ve.rendering=_,ve.tail=_.sibling,ve.renderingStartTime=si(),_.sibling=null,K=z.current,ho(z,Q?K&1|2:K&1),_):(aA(_),null);case 22:case 23:return ig(),Q=_.memoizedState!==null,p!==null&&p.memoizedState!==null!==Q&&(_.flags|=8192),Q&&(_.mode&1)!==0?(Ts&1073741824)!==0&&(aA(_),_.subtreeFlags&6&&(_.flags|=8192)):aA(_),null;case 24:return null;case 25:return null}throw Error(t(156,_.tag))}function h(p,_){switch(Ah(_),_.tag){case 1:return cl(_.type)&&Nu(),p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 3:return v(),ps(Nl),ps(Fa),ce(),p=_.flags,(p&65536)!==0&&(p&128)===0?(_.flags=p&-65537|128,_):null;case 5:return I(_),null;case 13:if(ps(z),p=_.memoizedState,p!==null&&p.dehydrated!==null){if(_.alternate===null)throw Error(t(340));bo()}return p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 19:return ps(z),null;case 4:return v(),null;case 10:return Uo(_.type._context),null;case 22:case 23:return ig(),null;case 24:return null;default:return null}}var y=!1,E=!1,S=typeof WeakSet=="function"?WeakSet:Set,F=null;function Z(p,_){var K=p.ref;if(K!==null)if(typeof K=="function")try{K(null)}catch(Q){tl(p,_,Q)}else K.current=null}function de(p,_,K){try{K()}catch(Q){tl(p,_,Q)}}var _e=!1;function Re(p,_){if(Ic=Ie,p=ds(),nc(p)){if("selectionStart"in p)var K={start:p.selectionStart,end:p.selectionEnd};else e:{K=(K=p.ownerDocument)&&K.defaultView||window;var Q=K.getSelection&&K.getSelection();if(Q&&Q.rangeCount!==0){K=Q.anchorNode;var Ae=Q.anchorOffset,ve=Q.focusNode;Q=Q.focusOffset;try{K.nodeType,ve.nodeType}catch{K=null;break e}var tt=0,Rt=-1,Wt=-1,Cn=0,rr=0,Xn=p,jn=null;t:for(;;){for(var Nr;Xn!==K||Ae!==0&&Xn.nodeType!==3||(Rt=tt+Ae),Xn!==ve||Q!==0&&Xn.nodeType!==3||(Wt=tt+Q),Xn.nodeType===3&&(tt+=Xn.nodeValue.length),(Nr=Xn.firstChild)!==null;)jn=Xn,Xn=Nr;for(;;){if(Xn===p)break t;if(jn===K&&++Cn===Ae&&(Rt=tt),jn===ve&&++rr===Q&&(Wt=tt),(Nr=Xn.nextSibling)!==null)break;Xn=jn,jn=Xn.parentNode}Xn=Nr}K=Rt===-1||Wt===-1?null:{start:Rt,end:Wt}}else K=null}K=K||{start:0,end:0}}else K=null;for(Za={focusedElem:p,selectionRange:K},Ie=!1,F=_;F!==null;)if(_=F,p=_.child,(_.subtreeFlags&1028)!==0&&p!==null)p.return=_,F=p;else for(;F!==null;){_=F;try{var Jr=_.alternate;if((_.flags&1024)!==0)switch(_.tag){case 0:case 11:case 15:break;case 1:if(Jr!==null){var li=Jr.memoizedProps,Na=Jr.memoizedState,An=_.stateNode,Zt=An.getSnapshotBeforeUpdate(_.elementType===_.type?li:ea(_.type,li),Na);An.__reactInternalSnapshotBeforeUpdate=Zt}break;case 3:var dn=_.stateNode.containerInfo;dn.nodeType===1?dn.textContent="":dn.nodeType===9&&dn.documentElement&&dn.removeChild(dn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(hr){tl(_,_.return,hr)}if(p=_.sibling,p!==null){p.return=_.return,F=p;break}F=_.return}return Jr=_e,_e=!1,Jr}function Ue(p,_,K){var Q=_.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var Ae=Q=Q.next;do{if((Ae.tag&p)===p){var ve=Ae.destroy;Ae.destroy=void 0,ve!==void 0&&de(_,K,ve)}Ae=Ae.next}while(Ae!==Q)}}function yt(p,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var K=_=_.next;do{if((K.tag&p)===p){var Q=K.create;K.destroy=Q()}K=K.next}while(K!==_)}}function Ot(p){var _=p.ref;if(_!==null){var K=p.stateNode;switch(p.tag){case 5:p=K;break;default:p=K}typeof _=="function"?_(p):_.current=p}}function Jt(p){var _=p.alternate;_!==null&&(p.alternate=null,Jt(_)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(_=p.stateNode,_!==null&&(delete _[VA],delete _[yu],delete _[ac],delete _[ot],delete _[BA])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function qt(p){return p.tag===5||p.tag===3||p.tag===4}function _n(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||qt(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function In(p,_,K){var Q=p.tag;if(Q===5||Q===6)p=p.stateNode,_?K.nodeType===8?K.parentNode.insertBefore(p,_):K.insertBefore(p,_):(K.nodeType===8?(_=K.parentNode,_.insertBefore(p,K)):(_=K,_.appendChild(p)),K=K._reactRootContainer,K!=null||_.onclick!==null||(_.onclick=oc));else if(Q!==4&&(p=p.child,p!==null))for(In(p,_,K),p=p.sibling;p!==null;)In(p,_,K),p=p.sibling}function nr(p,_,K){var Q=p.tag;if(Q===5||Q===6)p=p.stateNode,_?K.insertBefore(p,_):K.appendChild(p);else if(Q!==4&&(p=p.child,p!==null))for(nr(p,_,K),p=p.sibling;p!==null;)nr(p,_,K),p=p.sibling}var Jn=null,fr=!1;function ar(p,_,K){for(K=K.child;K!==null;)Tr(p,_,K),K=K.sibling}function Tr(p,_,K){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ss,K)}catch{}switch(K.tag){case 5:E||Z(K,_);case 6:var Q=Jn,Ae=fr;Jn=null,ar(p,_,K),Jn=Q,fr=Ae,Jn!==null&&(fr?(p=Jn,K=K.stateNode,p.nodeType===8?p.parentNode.removeChild(K):p.removeChild(K)):Jn.removeChild(K.stateNode));break;case 18:Jn!==null&&(fr?(p=Jn,K=K.stateNode,p.nodeType===8?ud(p.parentNode,K):p.nodeType===1&&ud(p,K),Wi(p)):ud(Jn,K.stateNode));break;case 4:Q=Jn,Ae=fr,Jn=K.stateNode.containerInfo,fr=!0,ar(p,_,K),Jn=Q,fr=Ae;break;case 0:case 11:case 14:case 15:if(!E&&(Q=K.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){Ae=Q=Q.next;do{var ve=Ae,tt=ve.destroy;ve=ve.tag,tt!==void 0&&((ve&2)!==0||(ve&4)!==0)&&de(K,_,tt),Ae=Ae.next}while(Ae!==Q)}ar(p,_,K);break;case 1:if(!E&&(Z(K,_),Q=K.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=K.memoizedProps,Q.state=K.memoizedState,Q.componentWillUnmount()}catch(Rt){tl(K,_,Rt)}ar(p,_,K);break;case 21:ar(p,_,K);break;case 22:K.mode&1?(E=(Q=E)||K.memoizedState!==null,ar(p,_,K),E=Q):ar(p,_,K);break;default:ar(p,_,K)}}function ri(p){var _=p.updateQueue;if(_!==null){p.updateQueue=null;var K=p.stateNode;K===null&&(K=p.stateNode=new S),_.forEach(function(Q){var Ae=wm.bind(null,p,Q);K.has(Q)||(K.add(Q),Q.then(Ae,Ae))})}}function Or(p,_){var K=_.deletions;if(K!==null)for(var Q=0;Q<K.length;Q++){var Ae=K[Q];try{var ve=p,tt=_,Rt=tt;e:for(;Rt!==null;){switch(Rt.tag){case 5:Jn=Rt.stateNode,fr=!1;break e;case 3:Jn=Rt.stateNode.containerInfo,fr=!0;break e;case 4:Jn=Rt.stateNode.containerInfo,fr=!0;break e}Rt=Rt.return}if(Jn===null)throw Error(t(160));Tr(ve,tt,Ae),Jn=null,fr=!1;var Wt=Ae.alternate;Wt!==null&&(Wt.return=null),Ae.return=null}catch(Cn){tl(Ae,_,Cn)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)to(_,p),_=_.sibling}function to(p,_){var K=p.alternate,Q=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Or(_,p),ci(p),Q&4){try{Ue(3,p,p.return),yt(3,p)}catch(li){tl(p,p.return,li)}try{Ue(5,p,p.return)}catch(li){tl(p,p.return,li)}}break;case 1:Or(_,p),ci(p),Q&512&&K!==null&&Z(K,K.return);break;case 5:if(Or(_,p),ci(p),Q&512&&K!==null&&Z(K,K.return),p.flags&32){var Ae=p.stateNode;try{se(Ae,"")}catch(li){tl(p,p.return,li)}}if(Q&4&&(Ae=p.stateNode,Ae!=null)){var ve=p.memoizedProps,tt=K!==null?K.memoizedProps:ve,Rt=p.type,Wt=p.updateQueue;if(p.updateQueue=null,Wt!==null)try{Rt==="input"&&ve.type==="radio"&&ve.name!=null&&Ft(Ae,ve),Ze(Rt,tt);var Cn=Ze(Rt,ve);for(tt=0;tt<Wt.length;tt+=2){var rr=Wt[tt],Xn=Wt[tt+1];rr==="style"?ct(Ae,Xn):rr==="dangerouslySetInnerHTML"?ie(Ae,Xn):rr==="children"?se(Ae,Xn):oe(Ae,rr,Xn,Cn)}switch(Rt){case"input":ln(Ae,ve);break;case"textarea":Mr(Ae,ve);break;case"select":var jn=Ae._wrapperState.wasMultiple;Ae._wrapperState.wasMultiple=!!ve.multiple;var Nr=ve.value;Nr!=null?wn(Ae,!!ve.multiple,Nr,!1):jn!==!!ve.multiple&&(ve.defaultValue!=null?wn(Ae,!!ve.multiple,ve.defaultValue,!0):wn(Ae,!!ve.multiple,ve.multiple?[]:"",!1))}Ae[yu]=ve}catch(li){tl(p,p.return,li)}}break;case 6:if(Or(_,p),ci(p),Q&4){if(p.stateNode===null)throw Error(t(162));Ae=p.stateNode,ve=p.memoizedProps;try{Ae.nodeValue=ve}catch(li){tl(p,p.return,li)}}break;case 3:if(Or(_,p),ci(p),Q&4&&K!==null&&K.memoizedState.isDehydrated)try{Wi(_.containerInfo)}catch(li){tl(p,p.return,li)}break;case 4:Or(_,p),ci(p);break;case 13:Or(_,p),ci(p),Ae=p.child,Ae.flags&8192&&(ve=Ae.memoizedState!==null,Ae.stateNode.isHidden=ve,!ve||Ae.alternate!==null&&Ae.alternate.memoizedState!==null||(np=si())),Q&4&&ri(p);break;case 22:if(rr=K!==null&&K.memoizedState!==null,p.mode&1?(E=(Cn=E)||rr,Or(_,p),E=Cn):Or(_,p),ci(p),Q&8192){if(Cn=p.memoizedState!==null,(p.stateNode.isHidden=Cn)&&!rr&&(p.mode&1)!==0)for(F=p,rr=p.child;rr!==null;){for(Xn=F=rr;F!==null;){switch(jn=F,Nr=jn.child,jn.tag){case 0:case 11:case 14:case 15:Ue(4,jn,jn.return);break;case 1:Z(jn,jn.return);var Jr=jn.stateNode;if(typeof Jr.componentWillUnmount=="function"){Q=jn,K=jn.return;try{_=Q,Jr.props=_.memoizedProps,Jr.state=_.memoizedState,Jr.componentWillUnmount()}catch(li){tl(Q,K,li)}}break;case 5:Z(jn,jn.return);break;case 22:if(jn.memoizedState!==null){da(Xn);continue}}Nr!==null?(Nr.return=jn,F=Nr):da(Xn)}rr=rr.sibling}e:for(rr=null,Xn=p;;){if(Xn.tag===5){if(rr===null){rr=Xn;try{Ae=Xn.stateNode,Cn?(ve=Ae.style,typeof ve.setProperty=="function"?ve.setProperty("display","none","important"):ve.display="none"):(Rt=Xn.stateNode,Wt=Xn.memoizedProps.style,tt=Wt!=null&&Wt.hasOwnProperty("display")?Wt.display:null,Rt.style.display=Ge("display",tt))}catch(li){tl(p,p.return,li)}}}else if(Xn.tag===6){if(rr===null)try{Xn.stateNode.nodeValue=Cn?"":Xn.memoizedProps}catch(li){tl(p,p.return,li)}}else if((Xn.tag!==22&&Xn.tag!==23||Xn.memoizedState===null||Xn===p)&&Xn.child!==null){Xn.child.return=Xn,Xn=Xn.child;continue}if(Xn===p)break e;for(;Xn.sibling===null;){if(Xn.return===null||Xn.return===p)break e;rr===Xn&&(rr=null),Xn=Xn.return}rr===Xn&&(rr=null),Xn.sibling.return=Xn.return,Xn=Xn.sibling}}break;case 19:Or(_,p),ci(p),Q&4&&ri(p);break;case 21:break;default:Or(_,p),ci(p)}}function ci(p){var _=p.flags;if(_&2){try{e:{for(var K=p.return;K!==null;){if(qt(K)){var Q=K;break e}K=K.return}throw Error(t(160))}switch(Q.tag){case 5:var Ae=Q.stateNode;Q.flags&32&&(se(Ae,""),Q.flags&=-33);var ve=_n(p);nr(p,ve,Ae);break;case 3:case 4:var tt=Q.stateNode.containerInfo,Rt=_n(p);In(p,Rt,tt);break;default:throw Error(t(161))}}catch(Wt){tl(p,p.return,Wt)}p.flags&=-3}_&4096&&(p.flags&=-4097)}function Qs(p,_,K){F=p,Ys(p)}function Ys(p,_,K){for(var Q=(p.mode&1)!==0;F!==null;){var Ae=F,ve=Ae.child;if(Ae.tag===22&&Q){var tt=Ae.memoizedState!==null||y;if(!tt){var Rt=Ae.alternate,Wt=Rt!==null&&Rt.memoizedState!==null||E;Rt=y;var Cn=E;if(y=tt,(E=Wt)&&!Cn)for(F=Ae;F!==null;)tt=F,Wt=tt.child,tt.tag===22&&tt.memoizedState!==null?ta(Ae):Wt!==null?(Wt.return=tt,F=Wt):ta(Ae);for(;ve!==null;)F=ve,Ys(ve),ve=ve.sibling;F=Ae,y=Rt,E=Cn}qs(p)}else(Ae.subtreeFlags&8772)!==0&&ve!==null?(ve.return=Ae,F=ve):qs(p)}}function qs(p){for(;F!==null;){var _=F;if((_.flags&8772)!==0){var K=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:E||yt(5,_);break;case 1:var Q=_.stateNode;if(_.flags&4&&!E)if(K===null)Q.componentDidMount();else{var Ae=_.elementType===_.type?K.memoizedProps:ea(_.type,K.memoizedProps);Q.componentDidUpdate(Ae,K.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ve=_.updateQueue;ve!==null&&hc(_,ve,Q);break;case 3:var tt=_.updateQueue;if(tt!==null){if(K=null,_.child!==null)switch(_.child.tag){case 5:K=_.child.stateNode;break;case 1:K=_.child.stateNode}hc(_,tt,K)}break;case 5:var Rt=_.stateNode;if(K===null&&_.flags&4){K=Rt;var Wt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Wt.autoFocus&&K.focus();break;case"img":Wt.src&&(K.src=Wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Cn=_.alternate;if(Cn!==null){var rr=Cn.memoizedState;if(rr!==null){var Xn=rr.dehydrated;Xn!==null&&Wi(Xn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}E||_.flags&512&&Ot(_)}catch(jn){tl(_,_.return,jn)}}if(_===p){F=null;break}if(K=_.sibling,K!==null){K.return=_.return,F=K;break}F=_.return}}function da(p){for(;F!==null;){var _=F;if(_===p){F=null;break}var K=_.sibling;if(K!==null){K.return=_.return,F=K;break}F=_.return}}function ta(p){for(;F!==null;){var _=F;try{switch(_.tag){case 0:case 11:case 15:var K=_.return;try{yt(4,_)}catch(Wt){tl(_,K,Wt)}break;case 1:var Q=_.stateNode;if(typeof Q.componentDidMount=="function"){var Ae=_.return;try{Q.componentDidMount()}catch(Wt){tl(_,Ae,Wt)}}var ve=_.return;try{Ot(_)}catch(Wt){tl(_,ve,Wt)}break;case 5:var tt=_.return;try{Ot(_)}catch(Wt){tl(_,tt,Wt)}}}catch(Wt){tl(_,_.return,Wt)}if(_===p){F=null;break}var Rt=_.sibling;if(Rt!==null){Rt.return=_.return,F=Rt;break}F=_.return}}var lA=Math.ceil,za=te.ReactCurrentDispatcher,na=te.ReactCurrentOwner,Jo=te.ReactCurrentBatchConfig,hi=0,Yo=null,Ss=null,Ks=0,Ts=0,RA=Os(0),ao=0,Ud=null,AA=0,iu=0,pc=0,el=null,ml=null,np=0,rp=1/0,zd=null,t0=!1,eg=null,Lc=null,n0=!1,xf=null,Eu=0,Cm=0,r0=null,i0=-1,ip=0;function uA(){return(hi&6)!==0?si():i0!==-1?i0:i0=si()}function md(p){return(p.mode&1)===0?1:(hi&2)!==0&&Ks!==0?Ks&-Ks:kd.transition!==null?(ip===0&&(ip=Hl()),ip):(p=gi,p!==0||(p=window.event,p=p===void 0?16:ai(p.type)),p)}function jh(p,_,K,Q){if(50<Cm)throw Cm=0,r0=null,Error(t(185));Ca(p,K,Q),((hi&2)===0||p!==Yo)&&(p===Yo&&((hi&2)===0&&(iu|=K),ao===4&&mh(p,Ks)),mc(p,Q),K===1&&hi===0&&(_.mode&1)===0&&(rp=si()+500,Tc&&lh()))}function mc(p,_){var K=p.callbackNode;Ci(p,_);var Q=va(p,p===Yo?Ks:0);if(Q===0)K!==null&&jo(K),p.callbackNode=null,p.callbackPriority=0;else if(_=Q&-Q,p.callbackPriority!==_){if(K!=null&&jo(K),_===1)p.tag===0?ah(ng.bind(null,p)):OA(ng.bind(null,p)),Rh(function(){(hi&6)===0&&lh()}),K=null;else{switch(So(Q)){case 1:K=Bs;break;case 4:K=Hr;break;case 16:K=Sr;break;case 536870912:K=vs;break;default:K=Sr}K=a0(K,_m.bind(null,p))}p.callbackPriority=_,p.callbackNode=K}}function _m(p,_){if(i0=-1,ip=0,(hi&6)!==0)throw Error(t(327));var K=p.callbackNode;if(Yp()&&p.callbackNode!==K)return null;var Q=va(p,p===Yo?Ks:0);if(Q===0)return null;if((Q&30)!==0||(Q&p.expiredLanes)!==0||_)_=xm(p,Q);else{_=Q;var Ae=hi;hi|=2;var ve=og();(Yo!==p||Ks!==_)&&(zd=null,rp=si()+500,sp(p,_));do try{A1();break}catch(Rt){a1(p,Rt)}while(!0);JA(),za.current=ve,hi=Ae,Ss!==null?_=0:(Yo=null,Ks=0,_=ao)}if(_!==0){if(_===2&&(Ae=cu(p),Ae!==0&&(Q=Ae,_=o0(p,Ae))),_===1)throw K=Ud,sp(p,0),mh(p,Q),mc(p,si()),K;if(_===6)mh(p,Q);else{if(Ae=p.current.alternate,(Q&30)===0&&!rv(Ae)&&(_=xm(p,Q),_===2&&(ve=cu(p),ve!==0&&(Q=ve,_=o0(p,ve))),_===1))throw K=Ud,sp(p,0),mh(p,Q),mc(p,si()),K;switch(p.finishedWork=Ae,p.finishedLanes=Q,_){case 0:case 1:throw Error(t(345));case 2:ap(p,ml,zd);break;case 3:if(mh(p,Q),(Q&130023424)===Q&&(_=np+500-si(),10<_)){if(va(p,0)!==0)break;if(Ae=p.suspendedLanes,(Ae&Q)!==Q){uA(),p.pingedLanes|=p.suspendedLanes&Ae;break}p.timeoutHandle=nA(ap.bind(null,p,ml,zd),_);break}ap(p,ml,zd);break;case 4:if(mh(p,Q),(Q&4194240)===Q)break;for(_=p.eventTimes,Ae=-1;0<Q;){var tt=31-gn(Q);ve=1<<tt,tt=_[tt],tt>Ae&&(Ae=tt),Q&=~ve}if(Q=Ae,Q=si()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*lA(Q/1960))-Q,10<Q){p.timeoutHandle=nA(ap.bind(null,p,ml,zd),Q);break}ap(p,ml,zd);break;case 5:ap(p,ml,zd);break;default:throw Error(t(329))}}}return mc(p,si()),p.callbackNode===K?_m.bind(null,p):null}function o0(p,_){var K=el;return p.current.memoizedState.isDehydrated&&(sp(p,_).flags|=256),p=xm(p,_),p!==2&&(_=ml,ml=K,_!==null&&tg(_)),p}function tg(p){ml===null?ml=p:ml.push.apply(ml,p)}function rv(p){for(var _=p;;){if(_.flags&16384){var K=_.updateQueue;if(K!==null&&(K=K.stores,K!==null))for(var Q=0;Q<K.length;Q++){var Ae=K[Q],ve=Ae.getSnapshot;Ae=Ae.value;try{if(!hn(ve(),Ae))return!1}catch{return!1}}}if(K=_.child,_.subtreeFlags&16384&&K!==null)K.return=_,_=K;else{if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function mh(p,_){for(_&=~pc,_&=~iu,p.suspendedLanes|=_,p.pingedLanes&=~_,p=p.expirationTimes;0<_;){var K=31-gn(_),Q=1<<K;p[K]=-1,_&=~Q}}function ng(p){if((hi&6)!==0)throw Error(t(327));Yp();var _=va(p,0);if((_&1)===0)return mc(p,si()),null;var K=xm(p,_);if(p.tag!==0&&K===2){var Q=cu(p);Q!==0&&(_=Q,K=o0(p,Q))}if(K===1)throw K=Ud,sp(p,0),mh(p,_),mc(p,si()),K;if(K===6)throw Error(t(345));return p.finishedWork=p.current.alternate,p.finishedLanes=_,ap(p,ml,zd),mc(p,si()),null}function rg(p,_){var K=hi;hi|=1;try{return p(_)}finally{hi=K,hi===0&&(rp=si()+500,Tc&&lh())}}function op(p){xf!==null&&xf.tag===0&&(hi&6)===0&&Yp();var _=hi;hi|=1;var K=Jo.transition,Q=gi;try{if(Jo.transition=null,gi=1,p)return p()}finally{gi=Q,Jo.transition=K,hi=_,(hi&6)===0&&lh()}}function ig(){Ts=RA.current,ps(RA)}function sp(p,_){p.finishedWork=null,p.finishedLanes=0;var K=p.timeoutHandle;if(K!==-1&&(p.timeoutHandle=-1,sc(K)),Ss!==null)for(K=Ss.return;K!==null;){var Q=K;switch(Ah(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&Nu();break;case 3:v(),ps(Nl),ps(Fa),ce();break;case 5:I(Q);break;case 4:v();break;case 13:ps(z);break;case 19:ps(z);break;case 10:Uo(Q.type._context);break;case 22:case 23:ig()}K=K.return}if(Yo=p,Ss=p=gh(p.current,null),Ks=Ts=_,ao=0,Ud=null,pc=iu=AA=0,ml=el=null,xu!==null){for(_=0;_<xu.length;_++)if(K=xu[_],Q=K.interleaved,Q!==null){K.interleaved=null;var Ae=Q.next,ve=K.pending;if(ve!==null){var tt=ve.next;ve.next=Ae,Q.next=tt}K.pending=Q}xu=null}return p}function a1(p,_){do{var K=Ss;try{if(JA(),pe.current=jl,lt){for(var Q=Fe.memoizedState;Q!==null;){var Ae=Q.queue;Ae!==null&&(Ae.pending=null),Q=Q.next}lt=!1}if(Me=0,it=qe=Fe=null,ht=!1,bt=0,na.current=null,K===null||K.return===null){ao=1,Ud=_,Ss=null;break}e:{var ve=p,tt=K.return,Rt=K,Wt=_;if(_=Ks,Rt.flags|=32768,Wt!==null&&typeof Wt=="object"&&typeof Wt.then=="function"){var Cn=Wt,rr=Rt,Xn=rr.tag;if((rr.mode&1)===0&&(Xn===0||Xn===11||Xn===15)){var jn=rr.alternate;jn?(rr.updateQueue=jn.updateQueue,rr.memoizedState=jn.memoizedState,rr.lanes=jn.lanes):(rr.updateQueue=null,rr.memoizedState=null)}var Nr=jp(tt);if(Nr!==null){Nr.flags&=-257,fd(Nr,tt,Rt,ve,_),Nr.mode&1&&Dd(ve,Cn,_),_=Nr,Wt=Cn;var Jr=_.updateQueue;if(Jr===null){var li=new Set;li.add(Wt),_.updateQueue=li}else Jr.add(Wt);break e}else{if((_&1)===0){Dd(ve,Cn,_),bm();break e}Wt=Error(t(426))}}else if(Is&&Rt.mode&1){var Na=jp(tt);if(Na!==null){(Na.flags&65536)===0&&(Na.flags|=256),fd(Na,tt,Rt,ve,_),hl(Yu(Wt,Rt));break e}}ve=Wt=Yu(Wt,Rt),ao!==4&&(ao=2),el===null?el=[ve]:el.push(ve),ve=tt;do{switch(ve.tag){case 3:ve.flags|=65536,_&=-_,ve.lanes|=_;var An=dd(ve,Wt,_);Fc(ve,An);break e;case 1:Rt=Wt;var Zt=ve.type,dn=ve.stateNode;if((ve.flags&128)===0&&(typeof Zt.getDerivedStateFromError=="function"||dn!==null&&typeof dn.componentDidCatch=="function"&&(Lc===null||!Lc.has(dn)))){ve.flags|=65536,_&=-_,ve.lanes|=_;var hr=Zf(ve,Rt,_);Fc(ve,hr);break e}}ve=ve.return}while(ve!==null)}Mm(K)}catch(ii){_=ii,Ss===K&&K!==null&&(Ss=K=K.return);continue}break}while(!0)}function og(){var p=za.current;return za.current=jl,p===null?jl:p}function bm(){(ao===0||ao===3||ao===2)&&(ao=4),Yo===null||(AA&268435455)===0&&(iu&268435455)===0||mh(Yo,Ks)}function xm(p,_){var K=hi;hi|=2;var Q=og();(Yo!==p||Ks!==_)&&(zd=null,sp(p,_));do try{l1();break}catch(Ae){a1(p,Ae)}while(!0);if(JA(),hi=K,za.current=Q,Ss!==null)throw Error(t(261));return Yo=null,Ks=0,ao}function l1(){for(;Ss!==null;)u1(Ss)}function A1(){for(;Ss!==null&&!Ds();)u1(Ss)}function u1(p){var _=Ol(p.alternate,p,Ts);p.memoizedProps=p.pendingProps,_===null?Mm(p):Ss=_,na.current=null}function Mm(p){var _=p;do{var K=_.alternate;if(p=_.return,(_.flags&32768)===0){if(K=tp(K,_,Ts),K!==null){Ss=K;return}}else{if(K=h(K,_),K!==null){K.flags&=32767,Ss=K;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{ao=6,Ss=null;return}}if(_=_.sibling,_!==null){Ss=_;return}Ss=_=p}while(_!==null);ao===0&&(ao=5)}function ap(p,_,K){var Q=gi,Ae=Jo.transition;try{Jo.transition=null,gi=1,c1(p,_,K,Q)}finally{Jo.transition=Ae,gi=Q}return null}function c1(p,_,K,Q){do Yp();while(xf!==null);if((hi&6)!==0)throw Error(t(327));K=p.finishedWork;var Ae=p.finishedLanes;if(K===null)return null;if(p.finishedWork=null,p.finishedLanes=0,K===p.current)throw Error(t(177));p.callbackNode=null,p.callbackPriority=0;var ve=K.lanes|K.childLanes;if(wc(p,ve),p===Yo&&(Ss=Yo=null,Ks=0),(K.subtreeFlags&2064)===0&&(K.flags&2064)===0||n0||(n0=!0,a0(Sr,function(){return Yp(),null})),ve=(K.flags&15990)!==0,(K.subtreeFlags&15990)!==0||ve){ve=Jo.transition,Jo.transition=null;var tt=gi;gi=1;var Rt=hi;hi|=4,na.current=null,Re(p,K),to(K,p),df(Za),Ie=!!Ic,Za=Ic=null,p.current=K,Qs(K),yl(),hi=Rt,gi=tt,Jo.transition=ve}else p.current=K;if(n0&&(n0=!1,xf=p,Eu=Ae),ve=p.pendingLanes,ve===0&&(Lc=null),Et(K.stateNode),mc(p,si()),_!==null)for(Q=p.onRecoverableError,K=0;K<_.length;K++)Ae=_[K],Q(Ae.value,{componentStack:Ae.stack,digest:Ae.digest});if(t0)throw t0=!1,p=eg,eg=null,p;return(Eu&1)!==0&&p.tag!==0&&Yp(),ve=p.pendingLanes,(ve&1)!==0?p===r0?Cm++:(Cm=0,r0=p):Cm=0,lh(),null}function Yp(){if(xf!==null){var p=So(Eu),_=Jo.transition,K=gi;try{if(Jo.transition=null,gi=16>p?16:p,xf===null)var Q=!1;else{if(p=xf,xf=null,Eu=0,(hi&6)!==0)throw Error(t(331));var Ae=hi;for(hi|=4,F=p.current;F!==null;){var ve=F,tt=ve.child;if((F.flags&16)!==0){var Rt=ve.deletions;if(Rt!==null){for(var Wt=0;Wt<Rt.length;Wt++){var Cn=Rt[Wt];for(F=Cn;F!==null;){var rr=F;switch(rr.tag){case 0:case 11:case 15:Ue(8,rr,ve)}var Xn=rr.child;if(Xn!==null)Xn.return=rr,F=Xn;else for(;F!==null;){rr=F;var jn=rr.sibling,Nr=rr.return;if(Jt(rr),rr===Cn){F=null;break}if(jn!==null){jn.return=Nr,F=jn;break}F=Nr}}}var Jr=ve.alternate;if(Jr!==null){var li=Jr.child;if(li!==null){Jr.child=null;do{var Na=li.sibling;li.sibling=null,li=Na}while(li!==null)}}F=ve}}if((ve.subtreeFlags&2064)!==0&&tt!==null)tt.return=ve,F=tt;else e:for(;F!==null;){if(ve=F,(ve.flags&2048)!==0)switch(ve.tag){case 0:case 11:case 15:Ue(9,ve,ve.return)}var An=ve.sibling;if(An!==null){An.return=ve.return,F=An;break e}F=ve.return}}var Zt=p.current;for(F=Zt;F!==null;){tt=F;var dn=tt.child;if((tt.subtreeFlags&2064)!==0&&dn!==null)dn.return=tt,F=dn;else e:for(tt=Zt;F!==null;){if(Rt=F,(Rt.flags&2048)!==0)try{switch(Rt.tag){case 0:case 11:case 15:yt(9,Rt)}}catch(ii){tl(Rt,Rt.return,ii)}if(Rt===tt){F=null;break e}var hr=Rt.sibling;if(hr!==null){hr.return=Rt.return,F=hr;break e}F=Rt.return}}if(hi=Ae,lh(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ss,p)}catch{}Q=!0}return Q}finally{gi=K,Jo.transition=_}}return!1}function s0(p,_,K){_=Yu(K,_),_=dd(p,_,1),p=ka(p,_,1),_=uA(),p!==null&&(Ca(p,1,_),mc(p,_))}function tl(p,_,K){if(p.tag===3)s0(p,p,K);else for(;_!==null;){if(_.tag===3){s0(_,p,K);break}else if(_.tag===1){var Q=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Lc===null||!Lc.has(Q))){p=Yu(K,p),p=Zf(_,p,1),_=ka(_,p,1),p=uA(),_!==null&&(Ca(_,1,p),mc(_,p));break}}_=_.return}}function h1(p,_,K){var Q=p.pingCache;Q!==null&&Q.delete(_),_=uA(),p.pingedLanes|=p.suspendedLanes&K,Yo===p&&(Ks&K)===K&&(ao===4||ao===3&&(Ks&130023424)===Ks&&500>si()-np?sp(p,0):pc|=K),mc(p,_)}function d1(p,_){_===0&&((p.mode&1)===0?_=1:(_=wo,wo<<=1,(wo&130023424)===0&&(wo=4194304)));var K=uA();p=tu(p,_),p!==null&&(Ca(p,_,K),mc(p,K))}function iv(p){var _=p.memoizedState,K=0;_!==null&&(K=_.retryLane),d1(p,K)}function wm(p,_){var K=0;switch(p.tag){case 13:var Q=p.stateNode,Ae=p.memoizedState;Ae!==null&&(K=Ae.retryLane);break;case 19:Q=p.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(_),d1(p,K)}var Ol;Ol=function(p,_,K){if(p!==null)if(p.memoizedProps!==_.pendingProps||Nl.current)Wl=!0;else{if((p.lanes&K)===0&&(_.flags&128)===0)return Wl=!1,PA(p,_,K);Wl=(p.flags&131072)!==0}else Wl=!1,Is&&(_.flags&1048576)!==0&&eo(_,Ar,_.index);switch(_.lanes=0,_.tag){case 2:var Q=_.type;bf(p,_),p=_.pendingProps;var Ae=zu(_,Fa.current);La(_,K),Ae=Lt(null,_,Q,p,Ae,K);var ve=St();return _.flags|=1,typeof Ae=="object"&&Ae!==null&&typeof Ae.render=="function"&&Ae.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,cl(Q)?(ve=!0,Xs(_)):ve=!1,_.memoizedState=Ae.state!==null&&Ae.state!==void 0?Ae.state:null,cc(_),Ae.updater=Su,_.stateNode=Ae,Ae._reactInternals=_,Rd(_,Q,p,K),_=Gh(null,_,Q,!0,ve,K)):(_.tag=0,Is&&ve&&vu(_),Bl(null,_,Ae,K),_=_.child),_;case 16:Q=_.elementType;e:{switch(bf(p,_),p=_.pendingProps,Ae=Q._init,Q=Ae(Q._payload),_.type=Q,Ae=_.tag=$p(Q),p=ea(Q,p),Ae){case 0:_=Fd(null,_,Q,p,K);break e;case 1:_=sA(null,_,Q,p,K);break e;case 11:_=e0(null,_,Q,p,K);break e;case 14:_=Xf(null,_,Q,ea(Q.type,p),K);break e}throw Error(t(306,Q,""))}return _;case 0:return Q=_.type,Ae=_.pendingProps,Ae=_.elementType===Q?Ae:ea(Q,Ae),Fd(p,_,Q,Ae,K);case 1:return Q=_.type,Ae=_.pendingProps,Ae=_.elementType===Q?Ae:ea(Q,Ae),sA(p,_,Q,Ae,K);case 3:e:{if(Kd(_),p===null)throw Error(t(387));Q=_.pendingProps,ve=_.memoizedState,Ae=ve.element,Rc(p,_),Mu(_,Q,null,K);var tt=_.memoizedState;if(Q=tt.element,ve.isDehydrated)if(ve={element:Q,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},_.updateQueue.baseState=ve,_.memoizedState=ve,_.flags&256){Ae=Yu(Error(t(423)),_),_=fc(p,_,Q,K,Ae);break e}else if(Q!==Ae){Ae=Yu(Error(t(424)),_),_=fc(p,_,Q,K,Ae);break e}else for(Ka=fs(_.stateNode.containerInfo.firstChild),Ia=_,Is=!0,IA=null,K=uc(_,null,Q,K),_.child=K;K;)K.flags=K.flags&-3|4096,K=K.sibling;else{if(bo(),Q===Ae){_=pl(p,_,K);break e}Bl(p,_,Q,K)}_=_.child}return _;case 5:return w(_),p===null&&Sl(_),Q=_.type,Ae=_.pendingProps,ve=p!==null?p.memoizedProps:null,tt=Ae.children,Uu(Q,Ae)?tt=null:ve!==null&&Uu(Q,ve)&&(_.flags|=32),dh(p,_),Bl(p,_,tt,K),_.child;case 6:return p===null&&Sl(_),null;case 13:return Cf(p,_,K);case 4:return d(_,_.stateNode.containerInfo),Q=_.pendingProps,p===null?_.child=Wo(_,null,Q,K):Bl(p,_,Q,K),_.child;case 11:return Q=_.type,Ae=_.pendingProps,Ae=_.elementType===Q?Ae:ea(Q,Ae),e0(p,_,Q,Ae,K);case 7:return Bl(p,_,_.pendingProps,K),_.child;case 8:return Bl(p,_,_.pendingProps.children,K),_.child;case 12:return Bl(p,_,_.pendingProps.children,K),_.child;case 10:e:{if(Q=_.type._context,Ae=_.pendingProps,ve=_.memoizedProps,tt=Ae.value,ho(Ir,Q._currentValue),Q._currentValue=tt,ve!==null)if(hn(ve.value,tt)){if(ve.children===Ae.children&&!Nl.current){_=pl(p,_,K);break e}}else for(ve=_.child,ve!==null&&(ve.return=_);ve!==null;){var Rt=ve.dependencies;if(Rt!==null){tt=ve.child;for(var Wt=Rt.firstContext;Wt!==null;){if(Wt.context===Q){if(ve.tag===1){Wt=rA(-1,K&-K),Wt.tag=2;var Cn=ve.updateQueue;if(Cn!==null){Cn=Cn.shared;var rr=Cn.pending;rr===null?Wt.next=Wt:(Wt.next=rr.next,rr.next=Wt),Cn.pending=Wt}}ve.lanes|=K,Wt=ve.alternate,Wt!==null&&(Wt.lanes|=K),Ta(ve.return,K,_),Rt.lanes|=K;break}Wt=Wt.next}}else if(ve.tag===10)tt=ve.type===_.type?null:ve.child;else if(ve.tag===18){if(tt=ve.return,tt===null)throw Error(t(341));tt.lanes|=K,Rt=tt.alternate,Rt!==null&&(Rt.lanes|=K),Ta(tt,K,_),tt=ve.sibling}else tt=ve.child;if(tt!==null)tt.return=ve;else for(tt=ve;tt!==null;){if(tt===_){tt=null;break}if(ve=tt.sibling,ve!==null){ve.return=tt.return,tt=ve;break}tt=tt.return}ve=tt}Bl(p,_,Ae.children,K),_=_.child}return _;case 9:return Ae=_.type,Q=_.pendingProps.children,La(_,K),Ae=eu(Ae),Q=Q(Ae),_.flags|=1,Bl(p,_,Q,K),_.child;case 14:return Q=_.type,Ae=ea(Q,_.pendingProps),Ae=ea(Q.type,Ae),Xf(p,_,Q,Ae,K);case 15:return Qo(p,_,_.type,_.pendingProps,K);case 17:return Q=_.type,Ae=_.pendingProps,Ae=_.elementType===Q?Ae:ea(Q,Ae),bf(p,_),_.tag=1,cl(Q)?(p=!0,Xs(_)):p=!1,La(_,K),Xa(_,Q,Ae),Rd(_,Q,Ae,K),Gh(null,_,Q,!0,p,K);case 19:return ph(p,_,K);case 22:return Wp(p,_,K)}throw Error(t(156,_.tag))};function a0(p,_){return sa(p,_)}function f1(p,_,K,Q){this.tag=p,this.key=K,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uc(p,_,K,Q){return new f1(p,_,K,Q)}function qp(p){return p=p.prototype,!(!p||!p.isReactComponent)}function $p(p){if(typeof p=="function")return qp(p)?1:0;if(p!=null){if(p=p.$$typeof,p===Ee)return 11;if(p===be)return 14}return 2}function gh(p,_){var K=p.alternate;return K===null?(K=Uc(p.tag,_,p.key,p.mode),K.elementType=p.elementType,K.type=p.type,K.stateNode=p.stateNode,K.alternate=p,p.alternate=K):(K.pendingProps=_,K.type=p.type,K.flags=0,K.subtreeFlags=0,K.deletions=null),K.flags=p.flags&14680064,K.childLanes=p.childLanes,K.lanes=p.lanes,K.child=p.child,K.memoizedProps=p.memoizedProps,K.memoizedState=p.memoizedState,K.updateQueue=p.updateQueue,_=p.dependencies,K.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},K.sibling=p.sibling,K.index=p.index,K.ref=p.ref,K}function l0(p,_,K,Q,Ae,ve){var tt=2;if(Q=p,typeof p=="function")qp(p)&&(tt=1);else if(typeof p=="string")tt=5;else e:switch(p){case j:return lp(K.children,Ae,ve,_);case ue:tt=8,Ae|=8;break;case me:return p=Uc(12,K,_,Ae|2),p.elementType=me,p.lanes=ve,p;case xe:return p=Uc(13,K,_,Ae),p.elementType=xe,p.lanes=ve,p;case We:return p=Uc(19,K,_,Ae),p.elementType=We,p.lanes=ve,p;case Ct:return A0(K,Ae,ve,_);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case ge:tt=10;break e;case we:tt=9;break e;case Ee:tt=11;break e;case be:tt=14;break e;case rt:tt=16,Q=null;break e}throw Error(t(130,p==null?p:typeof p,""))}return _=Uc(tt,K,_,Ae),_.elementType=p,_.type=Q,_.lanes=ve,_}function lp(p,_,K,Q){return p=Uc(7,p,Q,_),p.lanes=K,p}function A0(p,_,K,Q){return p=Uc(22,p,Q,_),p.elementType=Ct,p.lanes=K,p.stateNode={isHidden:!1},p}function sg(p,_,K){return p=Uc(6,p,null,_),p.lanes=K,p}function ag(p,_,K){return _=Uc(4,p.children!==null?p.children:[],p.key,_),_.lanes=K,_.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},_}function ov(p,_,K,Q,Ae){this.tag=_,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$a(0),this.expirationTimes=$a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.identifierPrefix=Q,this.onRecoverableError=Ae,this.mutableSourceEagerHydrationData=null}function lg(p,_,K,Q,Ae,ve,tt,Rt,Wt){return p=new ov(p,_,K,Rt,Wt),_===1?(_=1,ve===!0&&(_|=8)):_=0,ve=Uc(3,null,null,_),p.current=ve,ve.stateNode=p,ve.memoizedState={element:Q,isDehydrated:K,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(ve),p}function sv(p,_,K){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:Q==null?null:""+Q,children:p,containerInfo:_,implementation:K}}function p1(p){if(!p)return HA;p=p._reactInternals;e:{if(Kr(p)!==p||p.tag!==1)throw Error(t(170));var _=p;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(cl(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(t(171))}if(p.tag===1){var K=p.type;if(cl(K))return Gl(p,K,_)}return _}function m1(p,_,K,Q,Ae,ve,tt,Rt,Wt){return p=lg(K,Q,!0,p,Ae,ve,tt,Rt,Wt),p.context=p1(null),K=p.current,Q=uA(),Ae=md(K),ve=rA(Q,Ae),ve.callback=_??null,ka(K,ve,Ae),p.current.lanes=Ae,Ca(p,Ae,Q),mc(p,Q),p}function u0(p,_,K,Q){var Ae=_.current,ve=uA(),tt=md(Ae);return K=p1(K),_.context===null?_.context=K:_.pendingContext=K,_=rA(ve,tt),_.payload={element:p},Q=Q===void 0?null:Q,Q!==null&&(_.callback=Q),p=ka(Ae,_,tt),p!==null&&(jh(p,Ae,tt,ve),Dc(p,Ae,tt)),tt}function c0(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function Ag(p,_){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var K=p.retryLane;p.retryLane=K!==0&&K<_?K:_}}function Sm(p,_){Ag(p,_),(p=p.alternate)&&Ag(p,_)}function g1(){return null}var Nd=typeof reportError=="function"?reportError:function(p){console.error(p)};function Mf(p){this._internalRoot=p}gd.prototype.render=Mf.prototype.render=function(p){var _=this._internalRoot;if(_===null)throw Error(t(409));u0(p,_,null,null)},gd.prototype.unmount=Mf.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var _=p.containerInfo;op(function(){u0(null,p,null,null)}),_[EA]=null}};function gd(p){this._internalRoot=p}gd.prototype.unstable_scheduleHydration=function(p){if(p){var _=sl();p={blockedOn:null,target:p,priority:_};for(var K=0;K<yo.length&&_!==0&&_<yo[K].priority;K++);yo.splice(K,0,p),K===0&&Ns(p)}};function Vp(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function Ap(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function y1(){}function av(p,_,K,Q,Ae){if(Ae){if(typeof Q=="function"){var ve=Q;Q=function(){var Cn=c0(tt);ve.call(Cn)}}var tt=m1(_,Q,p,0,null,!1,!1,"",y1);return p._reactRootContainer=tt,p[EA]=tt.current,wA(p.nodeType===8?p.parentNode:p),op(),tt}for(;Ae=p.lastChild;)p.removeChild(Ae);if(typeof Q=="function"){var Rt=Q;Q=function(){var Cn=c0(Wt);Rt.call(Cn)}}var Wt=lg(p,0,!1,null,null,!1,!1,"",y1);return p._reactRootContainer=Wt,p[EA]=Wt.current,wA(p.nodeType===8?p.parentNode:p),op(function(){u0(_,Wt,K,Q)}),Wt}function wf(p,_,K,Q,Ae){var ve=K._reactRootContainer;if(ve){var tt=ve;if(typeof Ae=="function"){var Rt=Ae;Ae=function(){var Wt=c0(tt);Rt.call(Wt)}}u0(_,tt,p,Ae)}else tt=av(K,_,p,Ae,Q);return c0(tt)}yi=function(p){switch(p.tag){case 3:var _=p.stateNode;if(_.current.memoizedState.isDehydrated){var K=xs(_.pendingLanes);K!==0&&(_a(_,K|1),mc(_,si()),(hi&6)===0&&(rp=si()+500,lh()))}break;case 13:op(function(){var Q=tu(p,1);if(Q!==null){var Ae=uA();jh(Q,p,1,Ae)}}),Sm(p,1)}},ol=function(p){if(p.tag===13){var _=tu(p,134217728);if(_!==null){var K=uA();jh(_,p,134217728,K)}Sm(p,134217728)}},cs=function(p){if(p.tag===13){var _=md(p),K=tu(p,_);if(K!==null){var Q=uA();jh(K,p,_,Q)}Sm(p,_)}},sl=function(){return gi},Fl=function(p,_){var K=gi;try{return gi=p,_()}finally{gi=K}},At=function(p,_,K){switch(_){case"input":if(ln(p,K),_=K.name,K.type==="radio"&&_!=null){for(K=p;K.parentNode;)K=K.parentNode;for(K=K.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<K.length;_++){var Q=K[_];if(Q!==p&&Q.form===p.form){var Ae=ua(Q);if(!Ae)throw Error(t(90));_t(Q),ln(Q,Ae)}}}break;case"textarea":Mr(p,K);break;case"select":_=K.value,_!=null&&wn(p,!!K.multiple,_,!1)}},er=rg,Qn=op;var v1={usingClientEntryPoint:!1,Events:[Do,fi,ua,Tn,xn,rg]},Em={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C1={bundleType:Em.bundleType,version:Em.version,rendererPackageName:Em.rendererPackageName,rendererConfig:Em.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Gr(p),p===null?null:p.stateNode},findFiberByHostInstance:Em.findFiberByHostInstance||g1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{ss=Bm.inject(C1),Ye=Bm}catch{}}return yd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v1,yd.createPortal=function(p,_){var K=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vp(_))throw Error(t(200));return sv(p,_,null,K)},yd.createRoot=function(p,_){if(!Vp(p))throw Error(t(299));var K=!1,Q="",Ae=Nd;return _!=null&&(_.unstable_strictMode===!0&&(K=!0),_.identifierPrefix!==void 0&&(Q=_.identifierPrefix),_.onRecoverableError!==void 0&&(Ae=_.onRecoverableError)),_=lg(p,1,!1,null,null,K,!1,Q,Ae),p[EA]=_.current,wA(p.nodeType===8?p.parentNode:p),new Mf(_)},yd.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var _=p._reactInternals;if(_===void 0)throw typeof p.render=="function"?Error(t(188)):(p=Object.keys(p).join(","),Error(t(268,p)));return p=Gr(_),p=p===null?null:p.stateNode,p},yd.flushSync=function(p){return op(p)},yd.hydrate=function(p,_,K){if(!Ap(_))throw Error(t(200));return wf(null,p,_,!0,K)},yd.hydrateRoot=function(p,_,K){if(!Vp(p))throw Error(t(405));var Q=K!=null&&K.hydratedSources||null,Ae=!1,ve="",tt=Nd;if(K!=null&&(K.unstable_strictMode===!0&&(Ae=!0),K.identifierPrefix!==void 0&&(ve=K.identifierPrefix),K.onRecoverableError!==void 0&&(tt=K.onRecoverableError)),_=m1(_,null,p,1,K??null,Ae,!1,ve,tt),p[EA]=_.current,wA(p),Q)for(p=0;p<Q.length;p++)K=Q[p],Ae=K._getVersion,Ae=Ae(K._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[K,Ae]:_.mutableSourceEagerHydrationData.push(K,Ae);return new gd(_)},yd.render=function(p,_,K){if(!Ap(_))throw Error(t(200));return wf(null,p,_,!1,K)},yd.unmountComponentAtNode=function(p){if(!Ap(p))throw Error(t(40));return p._reactRootContainer?(op(function(){wf(null,null,p,!1,function(){p._reactRootContainer=null,p[EA]=null})}),!0):!1},yd.unstable_batchedUpdates=rg,yd.unstable_renderSubtreeIntoContainer=function(p,_,K,Q){if(!Ap(K))throw Error(t(200));if(p==null||p._reactInternals===void 0)throw Error(t(38));return wf(p,_,K,!1,Q)},yd.version="18.3.1-next-f1338f8080-20240426",yd}var C8;function px(){if(C8)return A4.exports;C8=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),A4.exports=pW(),A4.exports}var _8;function mW(){if(_8)return Ab;_8=1;var n=px();return Ab.createRoot=n.createRoot,Ab.hydrateRoot=n.hydrateRoot,Ab}var NK=mW();const gW="modulepreload",yW=function(n){return"/maputnik/"+n},b8={},S1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let C=function(M){return Promise.all(M.map(B=>Promise.resolve(B).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};var l=C;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),f=o?.nonce||o?.getAttribute("nonce");i=C(t.map(M=>{if(M=yW(M),M in b8)return;b8[M]=!0;const B=M.endsWith(".css"),D=B?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${D}`))return;const R=document.createElement("link");if(R.rel=B?"stylesheet":gW,B||(R.as="script"),R.crossOrigin="",R.href=M,f&&R.setAttribute("nonce",f),document.head.appendChild(R),B)return new Promise((U,G)=>{R.addEventListener("load",U),R.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${M}`)))})}))}function s(o){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=o,window.dispatchEvent(f),!f.defaultPrevented)throw o}return i.then(o=>{for(const f of o||[])f.status==="rejected"&&s(f.reason);return e().catch(s)})},vW=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},_o=n=>typeof n=="string",Ev=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},x8=n=>n==null?"":""+n,CW=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},_W=/###/g,M8=n=>n&&n.indexOf("###")>-1?n.replace(_W,"."):n,w8=n=>!n||_o(n),sC=(n,e,t)=>{const r=_o(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(w8(n))return{};const s=M8(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return w8(n)?{}:{obj:n,k:M8(r[i])}},S8=(n,e,t)=>{const{obj:r,k:i}=sC(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],l=e.slice(0,e.length-1),o=sC(n,l,Object);for(;o.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),o=sC(n,l,Object),o?.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},bW=(n,e,t,r)=>{const{obj:i,k:s}=sC(n,e,Object);i[s]=i[s]||[],i[s].push(t)},g2=(n,e)=>{const{obj:t,k:r}=sC(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},xW=(n,e,t)=>{const r=g2(n,t);return r!==void 0?r:g2(e,t)},GK=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?_o(n[r])||n[r]instanceof String||_o(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):GK(n[r],e[r],t):n[r]=e[r]);return n},E1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var MW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wW=n=>_o(n)?n.replace(/[&<>"'\/]/g,e=>MW[e]):n;class SW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const EW=[" ",",","?","!",";"],BW=new SW(20),OW=(n,e,t)=>{e=e||"",t=t||"";const r=EW.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(r.length===0)return!0;const i=BW.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!i.test(n);if(!s){const l=n.indexOf(t);l>0&&!i.test(n.substring(0,l))&&(s=!0)}return s},c6=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let l,o="";for(let f=s;f<r.length;++f)if(f!==s&&(o+=t),o+=r[f],l=i[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&f<r.length-1)continue;s+=f-s+1;break}i=l}return i},MC=n=>n?.replace("_","-"),IW={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class y2{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||IW,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(_o(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new y2(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new y2(this.logger,e)}}var nm=new y2;class mx{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let l=0;l<s;l++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let l=0;l<s;l++)i.apply(i,[e,...t])})}}class E8 extends mx{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):_o(r)&&s?o.push(...r.split(s)):o.push(r)));const f=g2(this.data,o);return!f&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),f||!l||!_o(r)?f:c6(this.data?.[e]?.[t],r,s)}addResource(e,t,r,i,s={silent:!1}){const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),S8(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const s in r)(_o(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s,l={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let f=g2(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?GK(f,r,s):f={...f,...r},S8(this.data,o,f),l.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var jK={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{e=this.processors[s]?.process(e,t,r,i)??e}),e}};const WK=Symbol("i18next/PATH_KEY");function TW(){const n=[],e=Object.create(null);let t;return e.get=(r,i)=>(t?.revoke?.(),i===WK?n:(n.push(i),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function h6(n,e){const{[WK]:t}=n(TW());return t.join(e?.keySeparator??".")}const B8={},O8=n=>!_o(n)&&typeof n!="boolean"&&typeof n!="number";class v2 extends mx{constructor(e,t={}){super(),CW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=nm.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!OW(e,r,i);if(l&&!o){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:_o(s)?[s]:s};const C=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(C[0])>-1)&&(s=C.shift()),e=C.join(i)}return{key:e,namespaces:_o(s)?[s]:s}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=h6(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:o,namespaces:f}=this.extractFromKey(e[e.length-1],i),C=f[f.length-1];let M=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;M===void 0&&(M=":");const B=i.lng||this.language,D=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(B?.toLowerCase()==="cimode")return D?s?{res:`${C}${M}${o}`,usedKey:o,exactUsedKey:o,usedLng:B,usedNS:C,usedParams:this.getUsedParamsDetails(i)}:`${C}${M}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:B,usedNS:C,usedParams:this.getUsedParamsDetails(i)}:o;const R=this.resolve(e,i);let U=R?.res;const G=R?.usedKey||o,W=R?.exactUsedKey||o,J=["[object Number]","[object Function]","[object RegExp]"],$=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,oe=!this.i18nFormat||this.i18nFormat.handleAsObject,te=i.count!==void 0&&!_o(i.count),H=v2.hasDefaultValue(i),re=te?this.pluralResolver.getSuffix(B,i.count,i):"",j=i.ordinal&&te?this.pluralResolver.getSuffix(B,i.count,{ordinal:!1}):"",ue=te&&!i.ordinal&&i.count===0,me=ue&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${re}`]||i[`defaultValue${j}`]||i.defaultValue;let ge=U;oe&&!U&&H&&(ge=me);const we=O8(ge),Ee=Object.prototype.toString.apply(ge);if(oe&&ge&&we&&J.indexOf(Ee)<0&&!(_o($)&&Array.isArray(ge))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const xe=this.options.returnedObjectHandler?this.options.returnedObjectHandler(G,ge,{...i,ns:f}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(R.res=xe,R.usedParams=this.getUsedParamsDetails(i),R):xe}if(l){const xe=Array.isArray(ge),We=xe?[]:{},be=xe?W:G;for(const rt in ge)if(Object.prototype.hasOwnProperty.call(ge,rt)){const Ct=`${be}${l}${rt}`;H&&!U?We[rt]=this.translate(Ct,{...i,defaultValue:O8(me)?me[rt]:void 0,joinArrays:!1,ns:f}):We[rt]=this.translate(Ct,{...i,joinArrays:!1,ns:f}),We[rt]===Ct&&(We[rt]=ge[rt])}U=We}}else if(oe&&_o($)&&Array.isArray(U))U=U.join($),U&&(U=this.extendTranslation(U,e,i,r));else{let xe=!1,We=!1;!this.isValidLookup(U)&&H&&(xe=!0,U=me),this.isValidLookup(U)||(We=!0,U=o);const rt=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&We?void 0:U,Ct=H&&me!==U&&this.options.updateMissing;if(We||xe||Ct){if(this.logger.log(Ct?"updateKey":"missingKey",B,C,o,Ct?me:U),l){const Te=this.resolve(o,{...i,keySeparator:!1});Te&&Te.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let at=[];const Je=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Je&&Je[0])for(let Te=0;Te<Je.length;Te++)at.push(Je[Te]);else this.options.saveMissingTo==="all"?at=this.languageUtils.toResolveHierarchy(i.lng||this.language):at.push(i.lng||this.language);const ze=(Te,He,pt)=>{const kt=H&&pt!==U?pt:rt;this.options.missingKeyHandler?this.options.missingKeyHandler(Te,C,He,kt,Ct,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Te,C,He,kt,Ct,i),this.emit("missingKey",Te,C,He,U)};this.options.saveMissing&&(this.options.saveMissingPlurals&&te?at.forEach(Te=>{const He=this.pluralResolver.getSuffixes(Te,i);ue&&i[`defaultValue${this.options.pluralSeparator}zero`]&&He.indexOf(`${this.options.pluralSeparator}zero`)<0&&He.push(`${this.options.pluralSeparator}zero`),He.forEach(pt=>{ze([Te],o+pt,i[`defaultValue${pt}`]||me)})}):ze(at,o,me))}U=this.extendTranslation(U,e,i,R,r),We&&U===o&&this.options.appendNamespaceToMissingKey&&(U=`${C}${M}${o}`),(We||xe)&&this.options.parseMissingKeyHandler&&(U=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${C}${M}${o}`:o,xe?U:void 0,i))}return s?(R.res=U,R.usedParams=this.getUsedParamsDetails(i),R):U}extendTranslation(e,t,r,i,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=_o(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let C;if(f){const B=e.match(this.interpolator.nestingRegexp);C=B&&B.length}let M=r.replace&&!_o(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(M={...this.options.interpolation.defaultVariables,...M}),e=this.interpolator.interpolate(e,M,r.lng||this.language||i.usedLng,r),f){const B=e.match(this.interpolator.nestingRegexp),D=B&&B.length;C<D&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...B)=>s?.[0]===B[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${B[0]} in key: ${t[0]}`),null):this.translate(...B,t),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,o=_o(l)?[l]:l;return e!=null&&o?.length&&r.applyPostProcessor!==!1&&(e=jK.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,s,l,o;return _o(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const C=this.extractFromKey(f,t),M=C.key;i=M;let B=C.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const D=t.count!==void 0&&!_o(t.count),R=D&&!t.ordinal&&t.count===0,U=t.context!==void 0&&(_o(t.context)||typeof t.context=="number")&&t.context!=="",G=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(W=>{this.isValidLookup(r)||(o=W,!B8[`${G[0]}-${W}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(B8[`${G[0]}-${W}`]=!0,this.logger.warn(`key "${i}" for languages "${G.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),G.forEach(J=>{if(this.isValidLookup(r))return;l=J;const $=[M];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys($,M,J,W,t);else{let te;D&&(te=this.pluralResolver.getSuffix(J,t.count,t));const H=`${this.options.pluralSeparator}zero`,re=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(D&&(t.ordinal&&te.indexOf(re)===0&&$.push(M+te.replace(re,this.options.pluralSeparator)),$.push(M+te),R&&$.push(M+H)),U){const j=`${M}${this.options.contextSeparator||"_"}${t.context}`;$.push(j),D&&(t.ordinal&&te.indexOf(re)===0&&$.push(j+te.replace(re,this.options.pluralSeparator)),$.push(j+te),R&&$.push(j+H))}}let oe;for(;oe=$.pop();)this.isValidLookup(r)||(s=oe,r=this.getResource(J,W,oe,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!_o(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class I8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nm.create("languageUtils")}getScriptPartFromCode(e){if(e=MC(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=MC(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(_o(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(l=>{if(l===s)return l;if(!(l.indexOf("-")<0&&s.indexOf("-")<0)&&(l.indexOf("-")>0&&s.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===s||l.indexOf(s)===0&&s.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),_o(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],s=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return _o(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):_o(e)&&s(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&s(this.formatLanguageCode(l))}),i}}const T8={zero:0,one:1,two:2,few:3,many:4,other:5},k8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class kW{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=nm.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=MC(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let l;try{l=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),k8;if(!e.match(/-|_/))return k8;const f=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(f,t)}return this.pluralRulesCache[s]=l,l}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>T8[i]-T8[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const P8=(n,e,t,r=".",i=!0)=>{let s=xW(n,e,t);return!s&&i&&_o(t)&&(s=c6(n,t,r),s===void 0&&(s=c6(e,t,r))),s},h4=n=>n.replace(/\$/g,"$$$$");class PW{constructor(e={}){this.logger=nm.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:l,suffix:o,suffixEscaped:f,formatSeparator:C,unescapeSuffix:M,unescapePrefix:B,nestingPrefix:D,nestingPrefixEscaped:R,nestingSuffix:U,nestingSuffixEscaped:G,nestingOptionsSeparator:W,maxReplaces:J,alwaysFormat:$}=e.interpolation;this.escape=t!==void 0?t:wW,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?E1(s):l||"{{",this.suffix=o?E1(o):f||"}}",this.formatSeparator=C||",",this.unescapePrefix=M?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":M||"",this.nestingPrefix=D?E1(D):R||E1("$t("),this.nestingSuffix=U?E1(U):G||E1(")"),this.nestingOptionsSeparator=W||",",this.maxReplaces=J||1e3,this.alwaysFormat=$!==void 0?$:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let s,l,o;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},C=R=>{if(R.indexOf(this.formatSeparator)<0){const J=P8(t,f,R,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(J,void 0,r,{...i,...t,interpolationkey:R}):J}const U=R.split(this.formatSeparator),G=U.shift().trim(),W=U.join(this.formatSeparator).trim();return this.format(P8(t,f,G,this.options.keySeparator,this.options.ignoreJSONStructure),W,r,{...i,...t,interpolationkey:G})};this.resetRegExp();const M=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,B=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:R=>h4(R)},{regex:this.regexp,safeValue:R=>this.escapeValue?h4(this.escape(R)):h4(R)}].forEach(R=>{for(o=0;s=R.regex.exec(e);){const U=s[1].trim();if(l=C(U),l===void 0)if(typeof M=="function"){const W=M(e,s,i);l=_o(W)?W:""}else if(i&&Object.prototype.hasOwnProperty.call(i,U))l="";else if(B){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${U} for interpolating ${e}`),l="";else!_o(l)&&!this.useRawValueToEscape&&(l=x8(l));const G=R.safeValue(l);if(e=e.replace(s[0],G),B?(R.regex.lastIndex+=l.length,R.regex.lastIndex-=s[0].length):R.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,s,l;const o=(f,C)=>{const M=this.nestingOptionsSeparator;if(f.indexOf(M)<0)return f;const B=f.split(new RegExp(`${M}[ ]*{`));let D=`{${B[1]}`;f=B[0],D=this.interpolate(D,l);const R=D.match(/'/g),U=D.match(/"/g);((R?.length??0)%2===0&&!U||U.length%2!==0)&&(D=D.replace(/'/g,'"'));try{l=JSON.parse(D),C&&(l={...C,...l})}catch(G){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,G),`${f}${M}${D}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,f};for(;i=this.nestingRegexp.exec(e);){let f=[];l={...r},l=l.replace&&!_o(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const C=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(C!==-1&&(f=i[1].slice(C).split(this.formatSeparator).map(M=>M.trim()).filter(Boolean),i[1]=i[1].slice(0,C)),s=t(o.call(this,i[1].trim(),l),l),s&&i[0]===e&&!_o(s))return s;_o(s)||(s=x8(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),f.length&&(s=f.reduce((M,B)=>this.format(M,B,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const RW=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[o,...f]=l.split(":"),C=f.join(":").trim().replace(/^'+|'+$/g,""),M=o.trim();t[M]||(t[M]=C),C==="false"&&(t[M]=!1),C==="true"&&(t[M]=!0),isNaN(C)||(t[M]=parseInt(C,10))}})}return{formatName:e,formatOptions:t}},R8=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const l=r+JSON.stringify(s);let o=e[l];return o||(o=n(MC(r),i),e[l]=o),o(t)}},DW=n=>(e,t,r)=>n(MC(t),r)(e);class FW{constructor(e={}){this.logger=nm.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?R8:DW;this.formats={number:r((i,s)=>{const l=new Intl.NumberFormat(i,{...s});return o=>l.format(o)}),currency:r((i,s)=>{const l=new Intl.NumberFormat(i,{...s,style:"currency"});return o=>l.format(o)}),datetime:r((i,s)=>{const l=new Intl.DateTimeFormat(i,{...s});return o=>l.format(o)}),relativetime:r((i,s)=>{const l=new Intl.RelativeTimeFormat(i,{...s});return o=>l.format(o,s.range||"day")}),list:r((i,s)=>{const l=new Intl.ListFormat(i,{...s});return o=>l.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=R8(t)}format(e,t,r,i={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(f=>f.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,f)=>{const{formatName:C,formatOptions:M}=RW(f);if(this.formats[C]){let B=o;try{const D=i?.formatParams?.[i.interpolationkey]||{},R=D.locale||D.lng||i.locale||i.lng||r;B=this.formats[C](o,R,{...M,...i,...D})}catch(D){this.logger.warn(D)}return B}else this.logger.warn(`there was no format function for ${C}`);return o},e)}}const KW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class LW extends mx{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=nm.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const s={},l={},o={},f={};return e.forEach(C=>{let M=!0;t.forEach(B=>{const D=`${C}|${B}`;!r.reload&&this.store.hasResourceBundle(C,B)?this.state[D]=2:this.state[D]<0||(this.state[D]===1?l[D]===void 0&&(l[D]=!0):(this.state[D]=1,M=!1,l[D]===void 0&&(l[D]=!0),s[D]===void 0&&(s[D]=!0),f[B]===void 0&&(f[B]=!0)))}),M||(o[C]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(f)}}loaded(e,t,r){const i=e.split("|"),s=i[0],l=i[1];t&&this.emit("failedLoading",s,l,t),!t&&r&&this.store.addResourceBundle(s,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(f=>{bW(f.loaded,[s],l),KW(f,e),t&&f.errors.push(t),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(C=>{o[C]||(o[C]={});const M=f.loaded[C];M.length&&M.forEach(B=>{o[C][B]===void 0&&(o[C][B]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(f=>!f.done)}read(e,t,r,i=0,s=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:l});return}this.readingCalls++;const o=(C,M)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(C&&M&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,l)},s);return}l(C,M)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const C=f(e,t);C&&typeof C.then=="function"?C.then(M=>o(null,M)).catch(o):o(null,C)}catch(C){o(C)}return}return f(e,t,o)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();_o(e)&&(e=this.languageUtils.toResolveHierarchy(e)),_o(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,l,o)})}saveMissing(e,t,r,i,s,l={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const f={...l,isUpdate:s},C=this.backend.create.bind(this.backend);if(C.length<6)try{let M;C.length===5?M=C(e,t,r,i,f):M=C(e,t,r,i),M&&typeof M.then=="function"?M.then(B=>o(null,B)).catch(o):o(null,M)}catch(M){o(M)}else C(e,t,r,i,o,f)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const D8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),_o(n[1])&&(e.defaultValue=n[1]),_o(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),F8=n=>(_o(n.ns)&&(n.ns=[n.ns]),_o(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),_o(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),ub=()=>{},UW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class wC extends mx{constructor(e={},t){if(super(),this.options=F8(e),this.services={},this.logger=nm,this.modules={external:[]},UW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(_o(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=D8();this.options={...r,...this.options,...F8(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=C=>C?typeof C=="function"?new C:C:null;if(!this.options.isClone){this.modules.logger?nm.init(i(this.modules.logger),this.options):nm.init(null,this.options);let C;this.modules.formatter?C=this.modules.formatter:C=FW;const M=new I8(this.options);this.store=new E8(this.options.resources,this.options);const B=this.services;B.logger=nm,B.resourceStore=this.store,B.languageUtils=M,B.pluralResolver=new kW(M,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),C&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(B.formatter=i(C),B.formatter.init&&B.formatter.init(B,this.options),this.options.interpolation.format=B.formatter.format.bind(B.formatter)),B.interpolator=new PW(this.options),B.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},B.backendConnector=new LW(i(this.modules.backend),B.resourceStore,B,this.options),B.backendConnector.on("*",(R,...U)=>{this.emit(R,...U)}),this.modules.languageDetector&&(B.languageDetector=i(this.modules.languageDetector),B.languageDetector.init&&B.languageDetector.init(B,this.options.detection,this.options)),this.modules.i18nFormat&&(B.i18nFormat=i(this.modules.i18nFormat),B.i18nFormat.init&&B.i18nFormat.init(this)),this.translator=new v2(this.services,this.options),this.translator.on("*",(R,...U)=>{this.emit(R,...U)}),this.modules.external.forEach(R=>{R.init&&R.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ub),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const C=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);C.length>0&&C[0]!=="dev"&&(this.options.lng=C[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(C=>{this[C]=(...M)=>this.store[C](...M)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(C=>{this[C]=(...M)=>(this.store[C](...M),this)});const o=Ev(),f=()=>{const C=(M,B)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(B),t(M,B)};if(this.languages&&!this.isInitialized)return C(null,this.t.bind(this));this.changeLanguage(this.options.lng,C)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),o}loadResources(e,t=ub){let r=t;const i=_o(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(C=>{C!=="cimode"&&s.indexOf(C)<0&&s.push(C)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>l(f)),this.options.preload?.forEach?.(o=>l(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(e,t,r){const i=Ev();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=ub),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&jK.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Ev();this.emit("languageChanging",e);const i=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},s=(o,f)=>{f?this.isLanguageChangingTo===e&&(i(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,r.resolve((...C)=>this.t(...C)),t&&t(o,(...C)=>this.t(...C))},l=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const f=_o(o)?o:o&&o[0],C=this.store.hasLanguageSomeTranslations(f)?f:this.services.languageUtils.getBestMatchFromCodes(_o(o)?[o]:o);C&&(this.language||i(C),this.translator.language||this.translator.changeLanguage(C),this.services.languageDetector?.cacheUserLanguage?.(C)),this.loadResources(C,M=>{s(M,C)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,t,r){const i=(s,l,...o)=>{let f;typeof l!="object"?f=this.options.overloadTranslationOptionHandler([s,l].concat(o)):f={...l},f.lng=f.lng||i.lng,f.lngs=f.lngs||i.lngs,f.ns=f.ns||i.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||i.keyPrefix);const C=this.options.keySeparator||".";let M;return f.keyPrefix&&Array.isArray(s)?M=s.map(B=>(typeof B=="function"&&(B=h6(B,{...this.options,...l})),`${f.keyPrefix}${C}${B}`)):(typeof s=="function"&&(s=h6(s,{...this.options,...l})),M=f.keyPrefix?`${f.keyPrefix}${C}${s}`:s),this.t(M,f)};return _o(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,f)=>{const C=this.services.backendConnector.state[`${o}|${f}`];return C===-1||C===0||C===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(s,e)))}loadNamespaces(e,t){const r=Ev();return this.options.ns?(_o(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Ev();_o(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=i.concat(s),this.loadResources(l=>{r.resolve(),t&&t(l)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const s=i.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new I8(D8());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new wC(e,t)}cloneInstance(e={},t=ub){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new wC(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((f,C)=>(f[C]={...this.store.data[C]},f[C]=Object.keys(f[C]).reduce((M,B)=>(M[B]={...f[C][B]},M),f[C]),f),{});s.store=new E8(o,i),s.services.resourceStore=s.store}return s.translator=new v2(s.services,i),s.translator.on("*",(o,...f)=>{s.emit(o,...f)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const qc=wC.createInstance();qc.createInstance=wC.createInstance;qc.createInstance;qc.dir;qc.init;qc.loadResources;qc.reloadResources;qc.use;qc.changeLanguage;qc.getFixedT;qc.t;qc.exists;qc.setDefaultNamespace;qc.hasLoadedNamespace;qc.loadNamespaces;qc.loadLanguages;const{slice:zW,forEach:NW}=[];function GW(n){return NW.call(zW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function jW(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const K8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,WW=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!K8.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!K8.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},L8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=WW(n,e,i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var QW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return L8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&L8.create(t,n,r,i,s)}},YW={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const s=r.substring(1).split("&");for(let l=0;l<s.length;l++){const o=s[l].indexOf("=");o>0&&s[l].substring(0,o)===e&&(t=s[l].substring(o+1))}}return t}},qW={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const s=i.substring(1);if(e){const l=s.split("&");for(let o=0;o<l.length;o++){const f=l[o].indexOf("=");f>0&&l[o].substring(0,f)===e&&(r=l[o].substring(f+1))}}if(r)return r;if(!r&&t>-1){const l=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return r}};let B1=null;const U8=()=>{if(B1!==null)return B1;try{if(B1=typeof window<"u"&&window.localStorage!==null,!B1)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{B1=!1}return B1};var $W={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&U8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&U8()&&window.localStorage.setItem(t,n)}};let O1=null;const z8=()=>{if(O1!==null)return O1;try{if(O1=typeof window<"u"&&window.sessionStorage!==null,!O1)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{O1=!1}return O1};var VW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&z8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&z8()&&window.sessionStorage.setItem(t,n)}},HW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},ZW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},XW={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},JW={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};let QK=!1;try{document.cookie,QK=!0}catch{}const YK=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];QK||YK.splice(1,1);const eQ=()=>({order:YK,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class qK{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=GW(t,this.options||{},eQ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(QW),this.addDetector(YW),this.addDetector($W),this.addDetector(VW),this.addDetector(HW),this.addDetector(ZW),this.addDetector(XW),this.addDetector(JW),this.addDetector(qW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.filter(r=>r!=null&&!jW(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}qK.type="languageDetector";var tQ=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var l=e(r,i);l&&typeof l.then=="function"?l.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,l)}catch(o){s(o)}return}e(r,i,s);return}s(null,e&&e[r]&&e[r][i])}}},d4,N8;function nQ(){return N8||(N8=1,d4={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),d4}var rQ=nQ();const iQ=yA(rQ);var oQ=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function G8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(iQ[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(oQ),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var sQ=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,aQ=/^\s*$/,lQ=Object.create(null);function $K(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce($K,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var AQ={parse:function(n,e){e||(e={}),e.components||(e.components=lQ);var t,r=[],i=[],s=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(sQ,function(f,C){if(l){if(f!=="</"+t.name+">")return;l=!1}var M,B=f.charAt(1)!=="/",D=f.startsWith("<!--"),R=C+f.length,U=n.charAt(R);if(D){var G=G8(f);return s<0?(r.push(G),r):((M=i[s]).children.push(G),r)}if(B&&(s++,(t=G8(f)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!U||U==="<"||t.children.push({type:"text",content:n.slice(R,n.indexOf("<",R))}),s===0&&r.push(t),(M=i[s-1])&&M.children.push(t),i[s]=t),(!B||t.voidElement)&&(s>-1&&(t.voidElement||t.name===f.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!l&&U!=="<"&&U)){M=s===-1?r:i[s].children;var W=n.indexOf("<",R),J=n.slice(R,W===-1?void 0:W);aQ.test(J)&&(J=" "),(W>-1&&s+M.length>=0||J!==" ")&&M.push({type:"text",content:J})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+$K("",t)},"")}};const t2=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);rf(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},j8={},SC=(n,e,t,r)=>{rf(t)&&j8[t]||(rf(t)&&(j8[t]=new Date),t2(n,e,t,r))},VK=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},d6=(n,e,t)=>{n.loadNamespaces(e,VK(n,t))},W8=(n,e,t,r)=>{if(rf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return d6(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,VK(n,r))},uQ=(n,e,t={})=>!e.languages||!e.languages.length?(SC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),cQ=n=>n.displayName||n.name||(rf(n)&&n.length>0?n:"Unknown"),rf=n=>typeof n=="string",P0=n=>typeof n=="object"&&n!==null,hQ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dQ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},fQ=n=>dQ[n],pQ=n=>n.replace(hQ,fQ);let f6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:pQ};const mQ=(n={})=>{f6={...f6,...n}},HK=()=>f6;let ZK;const gQ=n=>{ZK=n},PB=()=>ZK,f4=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},p4=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?uy(e):e},yQ=n=>Array.isArray(n)&&n.every(Nt.isValidElement),uy=n=>Array.isArray(n)?n:[n],vQ=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},XK=(n,e,t,r)=>{if(!n)return"";let i="";const s=uy(n),l=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,f)=>{if(rf(o)){i+=`${o}`;return}if(Nt.isValidElement(o)){const{props:C,type:M}=o,B=Object.keys(C).length,D=l.indexOf(M)>-1,R=C.children;if(!R&&D&&!B){i+=`<${M}/>`;return}if(!R&&(!D||B)||C.i18nIsDynamicList){i+=`<${f}></${f}>`;return}if(D&&B===1&&rf(R)){i+=`<${M}>${R}</${M}>`;return}const U=XK(R,e,t,r);i+=`<${f}>${U}</${f}>`;return}if(o===null){t2(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(P0(o)){const{format:C,...M}=o,B=Object.keys(M);if(B.length===1){const D=C?`${B[0]}, ${C}`:B[0];i+=`{{${D}}}`;return}t2(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}t2(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},CQ=(n,e,t,r,i,s,l)=>{if(t==="")return[];const o=i.transKeepBasicHtmlNodesFor||[],f=t&&new RegExp(o.map(J=>`<${J}`).join("|")).test(t);if(!n&&!e&&!f&&!l)return[t];const C=e??{},M=J=>{uy(J).forEach(oe=>{rf(oe)||(f4(oe)?M(p4(oe)):P0(oe)&&!Nt.isValidElement(oe)&&Object.assign(C,oe))})};M(n);const B=AQ.parse(`<0>${t}</0>`),D={...C,...s},R=(J,$,oe)=>{const te=p4(J),H=G(te,$.children,oe);return yQ(te)&&H.length===0||J.props?.i18nIsDynamicList?te:H},U=(J,$,oe,te,H)=>{J.dummy?(J.children=$,oe.push(Nt.cloneElement(J,{key:te},H?void 0:$))):oe.push(...Nt.Children.map([J],re=>{const j={...re.props};return delete j.i18nIsDynamicList,Nt.createElement(re.type,{...j,key:te,ref:re.props.ref??re.ref},H?null:$)}))},G=(J,$,oe)=>{const te=uy(J);return uy($).reduce((re,j,ue)=>{const me=j.children?.[0]?.content&&r.services.interpolator.interpolate(j.children[0].content,D,r.language);if(j.type==="tag"){let ge=te[parseInt(j.name,10)];!ge&&e&&(ge=e[j.name]),oe.length===1&&!ge&&(ge=oe[0][j.name]),ge||(ge={});const we=Object.keys(j.attrs).length!==0?vQ({props:j.attrs},ge):ge,Ee=Nt.isValidElement(we),xe=Ee&&f4(j,!0)&&!j.voidElement,We=f&&P0(we)&&we.dummy&&!Ee,be=P0(e)&&Object.hasOwnProperty.call(e,j.name);if(rf(we)){const rt=r.services.interpolator.interpolate(we,D,r.language);re.push(rt)}else if(f4(we)||xe){const rt=R(we,j,oe);U(we,rt,re,ue)}else if(We){const rt=G(te,j.children,oe);U(we,rt,re,ue)}else if(Number.isNaN(parseFloat(j.name)))if(be){const rt=R(we,j,oe);U(we,rt,re,ue,j.voidElement)}else if(i.transSupportBasicHtmlNodes&&o.indexOf(j.name)>-1)if(j.voidElement)re.push(Nt.createElement(j.name,{key:`${j.name}-${ue}`}));else{const rt=G(te,j.children,oe);re.push(Nt.createElement(j.name,{key:`${j.name}-${ue}`},rt))}else if(j.voidElement)re.push(`<${j.name} />`);else{const rt=G(te,j.children,oe);re.push(`<${j.name}>${rt}</${j.name}>`)}else if(P0(we)&&!Ee){const rt=j.children[0]?me:null;rt&&re.push(rt)}else U(we,me,re,ue,j.children.length!==1||!me)}else if(j.type==="text"){const ge=i.transWrapTextNodes,we=l?i.unescape(r.services.interpolator.interpolate(j.content,D,r.language)):r.services.interpolator.interpolate(j.content,D,r.language);ge?re.push(Nt.createElement(ge,{key:`${j.name}-${ue}`},we)):re.push(we)}return re},[])},W=G([{dummy:!0,children:n||[]}],B,uy(n||[]));return p4(W[0])},JK=(n,e,t)=>{const r=n.key||e,i=Nt.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return Nt.createElement(Nt.Fragment,null,i)}return Nt.createElement(s,{key:r})},_Q=(n,e)=>n.map((t,r)=>JK(t,r,e)),bQ=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:JK(n[r],r,e)})}),t},xQ=(n,e,t,r)=>n?Array.isArray(n)?_Q(n,e):P0(n)?bQ(n,e):(SC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,MQ=n=>!P0(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function wQ({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:f,ns:C,i18n:M,t:B,shouldUnescape:D,...R}){const U=M||PB();if(!U)return SC(U,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const G=B||U.t.bind(U)||(We=>We),W={...HK(),...U.options?.react};let J=C||G.ns||U.options?.defaultNS;J=rf(J)?[J]:J||["translation"];const $=XK(n,W,U,r),oe=o||$||W.transEmptyNodeValue||r,{hashTransKey:te}=W,H=r||(te?te($||oe):$||oe);U.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...U.options.interpolation.defaultVariables}:{...U.options.interpolation.defaultVariables});const re=l||e!==void 0&&!U.options?.interpolation?.alwaysFormat||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},j={...s,context:i||s.context,count:e,...l,...re,defaultValue:oe,ns:J},ue=H?G(H,j):oe,me=xQ(f,ue,U,r);let ge=me||n,we=null;MQ(me)&&(we=me,ge=n);const Ee=CQ(ge,we,ue,U,W,j,D),xe=t??W.defaultTransParent;return xe?Nt.createElement(xe,R,Ee):Ee}const SQ={type:"3rdParty",init(n){mQ(n.options.react),gQ(n)}},eL=Nt.createContext();class EQ{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function N0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:f,ns:C,i18n:M,t:B,shouldUnescape:D,...R}){const{i18n:U,defaultNS:G}=Nt.useContext(eL)||{},W=M||U||PB(),J=B||W?.t.bind(W);return wQ({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:f,ns:C||J?.ns||G||W?.options?.defaultNS,i18n:W,t:B,shouldUnescape:D,...R})}const BQ=(n,e)=>{const t=Nt.useRef();return Nt.useEffect(()=>{t.current=n},[n,e]),t.current},tL=(n,e,t,r)=>n.getFixedT(e,t,r),OQ=(n,e,t,r)=>Nt.useCallback(tL(n,e,t,r),[n,e,t,r]),IQ=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=Nt.useContext(eL)||{},s=t||r||PB();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new EQ),!s){SC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const te=(re,j)=>rf(j)?j:P0(j)&&rf(j.defaultValue)?j.defaultValue:Array.isArray(re)?re[re.length-1]:re,H=[te,{},!1];return H.t=te,H.i18n={},H.ready=!1,H}s.options.react?.wait&&SC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...HK(),...s.options.react,...e},{useSuspense:o,keyPrefix:f}=l;let C=i||s.options?.defaultNS;C=rf(C)?[C]:C||["translation"],s.reportNamespaces.addUsedNamespaces?.(C);const M=(s.isInitialized||s.initializedStoreOnce)&&C.every(te=>uQ(te,s,l)),B=OQ(s,e.lng||null,l.nsMode==="fallback"?C:C[0],f),D=()=>B,R=()=>tL(s,e.lng||null,l.nsMode==="fallback"?C:C[0],f),[U,G]=Nt.useState(D);let W=C.join();e.lng&&(W=`${e.lng}${W}`);const J=BQ(W),$=Nt.useRef(!0);Nt.useEffect(()=>{const{bindI18n:te,bindI18nStore:H}=l;$.current=!0,!M&&!o&&(e.lng?W8(s,e.lng,C,()=>{$.current&&G(R)}):d6(s,C,()=>{$.current&&G(R)})),M&&J&&J!==W&&$.current&&G(R);const re=()=>{$.current&&G(R)};return te&&s?.on(te,re),H&&s?.store.on(H,re),()=>{$.current=!1,s&&te&&te?.split(" ").forEach(j=>s.off(j,re)),H&&s&&H.split(" ").forEach(j=>s.store.off(j,re))}},[s,W]),Nt.useEffect(()=>{$.current&&M&&G(D)},[s,f,M]);const oe=[U,s,M];if(oe.t=U,oe.i18n=s,oe.ready=M,M||!M&&!o)return oe;throw new Promise(te=>{e.lng?W8(s,e.lng,C,()=>te()):d6(s,C,()=>te())})},zs=(n,e={})=>function(r){function i({forwardedRef:l,...o}){const[f,C,M]=IQ(n,{...o,keyPrefix:e.keyPrefix}),B={...o,t:f,i18n:C,tReady:M};return e.withRef&&l?B.ref=l:!e.withRef&&l&&(B.forwardedRef=l),Nt.createElement(r,B)}i.displayName=`withI18nextTranslation(${cQ(r)})`,i.WrappedComponent=r;const s=(l,o)=>Nt.createElement(i,Object.assign({},l,{forwardedRef:o}));return e.withRef?Nt.forwardRef(s):i};function ja(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ja=function(){return l},l}ja();const nL=(ja().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});ja().s[1]++;qc.use(qK).use(tQ((n,e)=>(ja().f[0]++,ja().s[2]++,n==="en"?(ja().b[0][0]++,ja().s[3]++,{}):(ja().b[0][1]++,ja().s[4]++,vW(Object.assign({"./locales/de/translation.json":()=>(ja().f[1]++,ja().s[5]++,S1(()=>import("./translation-D-SdexDk.js"),[])),"./locales/fr/translation.json":()=>(ja().f[2]++,ja().s[6]++,S1(()=>import("./translation-DksxRINh.js"),[])),"./locales/he/translation.json":()=>(ja().f[3]++,ja().s[7]++,S1(()=>import("./translation-nRlFu3v0.js"),[])),"./locales/it/translation.json":()=>(ja().f[4]++,ja().s[8]++,S1(()=>import("./translation-BGP2gpqo.js"),[])),"./locales/ja/translation.json":()=>(ja().f[5]++,ja().s[9]++,S1(()=>import("./translation-C7LKy5U2.js"),[])),"./locales/zh/translation.json":()=>(ja().f[6]++,ja().s[10]++,S1(()=>import("./translation-d6S34pLX.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(SQ).init({supportedLngs:Object.keys(nL),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(ja().f[7]++,ja().s[11]++,n[0]==="en"){ja().b[1][0]++,ja().s[12]++;return}else ja().b[1][1]++;ja().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var Nv={exports:{}};Nv.exports;var Q8;function TQ(){return Q8||(Q8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",l="[object Array]",o="[object Boolean]",f="[object Date]",C="[object Error]",M="[object Function]",B="[object GeneratorFunction]",D="[object Map]",R="[object Number]",U="[object Object]",G="[object Promise]",W="[object RegExp]",J="[object Set]",$="[object String]",oe="[object Symbol]",te="[object WeakMap]",H="[object ArrayBuffer]",re="[object DataView]",j="[object Float32Array]",ue="[object Float64Array]",me="[object Int8Array]",ge="[object Int16Array]",we="[object Int32Array]",Ee="[object Uint8Array]",xe="[object Uint8ClampedArray]",We="[object Uint16Array]",be="[object Uint32Array]",rt=/[\\^$.*+?()[\]{}|]/g,Ct=/\w*$/,at=/^\[object .+?Constructor\]$/,Je=/^(?:0|[1-9]\d*)$/,ze={};ze[s]=ze[l]=ze[H]=ze[re]=ze[o]=ze[f]=ze[j]=ze[ue]=ze[me]=ze[ge]=ze[we]=ze[D]=ze[R]=ze[U]=ze[W]=ze[J]=ze[$]=ze[oe]=ze[Ee]=ze[xe]=ze[We]=ze[be]=!0,ze[C]=ze[M]=ze[te]=!1;var Te=typeof window=="object"&&window&&window.Object===Object&&window,He=typeof self=="object"&&self&&self.Object===Object&&self,pt=Te||He||Function("return this")(),kt=e&&!e.nodeType&&e,ft=kt&&!0&&n&&!n.nodeType&&n,Bt=ft&&ft.exports===kt;function Tt(ee,Ie){return ee.set(Ie[0],Ie[1]),ee}function Le(ee,Ie){return ee.add(Ie),ee}function Pe(ee,Ie){for(var st=-1,Yt=ee?ee.length:0;++st<Yt&&Ie(ee[st],st,ee)!==!1;);return ee}function ke(ee,Ie){for(var st=-1,Yt=Ie.length,wr=ee.length;++st<Yt;)ee[wr+st]=Ie[st];return ee}function Qe(ee,Ie,st,Yt){for(var wr=-1,zn=ee?ee.length:0;++wr<zn;)st=Ie(st,ee[wr],wr,ee);return st}function _t(ee,Ie){for(var st=-1,Yt=Array(ee);++st<ee;)Yt[st]=Ie(st);return Yt}function gt(ee,Ie){return ee?.[Ie]}function wt(ee){var Ie=!1;if(ee!=null&&typeof ee.toString!="function")try{Ie=!!(ee+"")}catch{}return Ie}function Qt(ee){var Ie=-1,st=Array(ee.size);return ee.forEach(function(Yt,wr){st[++Ie]=[wr,Yt]}),st}function Ft(ee,Ie){return function(st){return ee(Ie(st))}}function ln(ee){var Ie=-1,st=Array(ee.size);return ee.forEach(function(Yt){st[++Ie]=Yt}),st}var Vn=Array.prototype,jt=Function.prototype,Un=Object.prototype,wn=pt["__core-js_shared__"],Mn=function(){var ee=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),En=jt.toString,Mr=Un.hasOwnProperty,Hn=Un.toString,Pn=RegExp("^"+En.call(Mr).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=Bt?pt.Buffer:void 0,he=pt.Symbol,ie=pt.Uint8Array,se=Ft(Object.getPrototypeOf,Object),fe=Object.create,Oe=Un.propertyIsEnumerable,Ge=Vn.splice,ct=Object.getOwnPropertySymbols,$e=Ne?Ne.isBuffer:void 0,De=Ft(Object.keys,Object),Ze=gi(pt,"DataView"),m=gi(pt,"Map"),mt=gi(pt,"Promise"),At=gi(pt,"Set"),It=gi(pt,"WeakMap"),nt=gi(Object,"create"),en=Eo(Ze),Tn=Eo(m),xn=Eo(mt),er=Eo(At),Qn=Eo(It),Qr=he?he.prototype:void 0,$r=Qr?Qr.valueOf:void 0;function Br(ee){var Ie=-1,st=ee?ee.length:0;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function br(){this.__data__=nt?nt(null):{}}function or(ee){return this.has(ee)&&delete this.__data__[ee]}function ti(ee){var Ie=this.__data__;if(nt){var st=Ie[ee];return st===r?void 0:st}return Mr.call(Ie,ee)?Ie[ee]:void 0}function bn(ee){var Ie=this.__data__;return nt?Ie[ee]!==void 0:Mr.call(Ie,ee)}function Vi(ee,Ie){var st=this.__data__;return st[ee]=nt&&Ie===void 0?r:Ie,this}Br.prototype.clear=br,Br.prototype.delete=or,Br.prototype.get=ti,Br.prototype.has=bn,Br.prototype.set=Vi;function zr(ee){var Ie=-1,st=ee?ee.length:0;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function $o(){this.__data__=[]}function is(ee){var Ie=this.__data__,st=aa(Ie,ee);if(st<0)return!1;var Yt=Ie.length-1;return st==Yt?Ie.pop():Ge.call(Ie,st,1),!0}function Zn(ee){var Ie=this.__data__,st=aa(Ie,ee);return st<0?void 0:Ie[st][1]}function _i(ee){return aa(this.__data__,ee)>-1}function Kr(ee,Ie){var st=this.__data__,Yt=aa(st,ee);return Yt<0?st.push([ee,Ie]):st[Yt][1]=Ie,this}zr.prototype.clear=$o,zr.prototype.delete=is,zr.prototype.get=Zn,zr.prototype.has=_i,zr.prototype.set=Kr;function ki(ee){var Ie=-1,st=ee?ee.length:0;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function oa(){this.__data__={hash:new Br,map:new(m||zr),string:new Br}}function os(ee){return _a(this,ee).delete(ee)}function Gr(ee){return _a(this,ee).get(ee)}function qa(ee){return _a(this,ee).has(ee)}function sa(ee,Ie){return _a(this,ee).set(ee,Ie),this}ki.prototype.clear=oa,ki.prototype.delete=os,ki.prototype.get=Gr,ki.prototype.has=qa,ki.prototype.set=sa;function jo(ee){this.__data__=new zr(ee)}function Ds(){this.__data__=new zr}function yl(ee){return this.__data__.delete(ee)}function si(ee){return this.__data__.get(ee)}function vA(ee){return this.__data__.has(ee)}function Bs(ee,Ie){var st=this.__data__;if(st instanceof zr){var Yt=st.__data__;if(!m||Yt.length<t-1)return Yt.push([ee,Ie]),this;st=this.__data__=new ki(Yt)}return st.set(ee,Ie),this}jo.prototype.clear=Ds,jo.prototype.delete=yl,jo.prototype.get=si,jo.prototype.has=vA,jo.prototype.set=Bs;function Hr(ee,Ie){var st=yo(ee)||as(ee)?_t(ee.length,String):[],Yt=st.length,wr=!!Yt;for(var zn in ee)Mr.call(ee,zn)&&!(wr&&(zn=="length"||Fl(zn,Yt)))&&st.push(zn);return st}function Sr(ee,Ie,st){var Yt=ee[Ie];(!(Mr.call(ee,Ie)&&hs(Yt,st))||st===void 0&&!(Ie in ee))&&(ee[Ie]=st)}function aa(ee,Ie){for(var st=ee.length;st--;)if(hs(ee[st][0],Ie))return st;return-1}function vs(ee,Ie){return ee&&$a(Ie,Zr(Ie),ee)}function ss(ee,Ie,st,Yt,wr,zn,qr){var ai;if(Yt&&(ai=zn?Yt(ee,wr,zn,qr):Yt(ee)),ai!==void 0)return ai;if(!Ri(ee))return ee;var Er=yo(ee);if(Er){if(ai=ol(ee),!Ie)return Hl(ee,ai)}else{var Xr=yi(ee),Hi=Xr==M||Xr==B;if(Cs(ee))return sr(ee,Ie);if(Xr==U||Xr==s||Hi&&!zn){if(wt(ee))return zn?ee:{};if(ai=cs(Hi?{}:ee),!Ie)return Ca(ee,vs(ai,ee))}else{if(!ze[Xr])return zn?ee:{};ai=sl(ee,Xr,ss,Ie)}}qr||(qr=new jo);var Ji=qr.get(ee);if(Ji)return Ji;if(qr.set(ee,ai),!Er)var ni=st?wc(ee):Zr(ee);return Pe(ni||ee,function(di,lo){ni&&(lo=di,di=ee[lo]),Sr(ai,lo,ss(di,Ie,st,Yt,lo,ee,qr))}),ai}function Ye(ee){return Ri(ee)?fe(ee):{}}function Et(ee,Ie,st){var Yt=Ie(ee);return yo(ee)?Yt:ke(Yt,st(ee))}function gn(ee){return Hn.call(ee)}function Nn(ee){if(!Ri(ee)||vl(ee))return!1;var Ie=ba(ee)||wt(ee)?Pn:at;return Ie.test(Eo(ee))}function cn(ee){if(!al(ee))return De(ee);var Ie=[];for(var st in Object(ee))Mr.call(ee,st)&&st!="constructor"&&Ie.push(st);return Ie}function sr(ee,Ie){if(Ie)return ee.slice();var st=new ee.constructor(ee.length);return ee.copy(st),st}function ji(ee){var Ie=new ee.constructor(ee.byteLength);return new ie(Ie).set(new ie(ee)),Ie}function wo(ee,Ie){var st=Ie?ji(ee.buffer):ee.buffer;return new ee.constructor(st,ee.byteOffset,ee.byteLength)}function xs(ee,Ie,st){var Yt=Ie?st(Qt(ee),!0):Qt(ee);return Qe(Yt,Tt,new ee.constructor)}function va(ee){var Ie=new ee.constructor(ee.source,Ct.exec(ee));return Ie.lastIndex=ee.lastIndex,Ie}function CA(ee,Ie,st){var Yt=Ie?st(ln(ee),!0):ln(ee);return Qe(Yt,Le,new ee.constructor)}function Ci(ee){return $r?Object($r.call(ee)):{}}function cu(ee,Ie){var st=Ie?ji(ee.buffer):ee.buffer;return new ee.constructor(st,ee.byteOffset,ee.length)}function Hl(ee,Ie){var st=-1,Yt=ee.length;for(Ie||(Ie=Array(Yt));++st<Yt;)Ie[st]=ee[st];return Ie}function $a(ee,Ie,st,Yt){st||(st={});for(var wr=-1,zn=Ie.length;++wr<zn;){var qr=Ie[wr],ai=void 0;Sr(st,qr,ai===void 0?ee[qr]:ai)}return st}function Ca(ee,Ie){return $a(ee,So(ee),Ie)}function wc(ee){return Et(ee,Zr,So)}function _a(ee,Ie){var st=ee.__data__;return Bi(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function gi(ee,Ie){var st=gt(ee,Ie);return Nn(st)?st:void 0}var So=ct?Ft(ct,Object):Cr,yi=gn;(Ze&&yi(new Ze(new ArrayBuffer(1)))!=re||m&&yi(new m)!=D||mt&&yi(mt.resolve())!=G||At&&yi(new At)!=J||It&&yi(new It)!=te)&&(yi=function(ee){var Ie=Hn.call(ee),st=Ie==U?ee.constructor:void 0,Yt=st?Eo(st):void 0;if(Yt)switch(Yt){case en:return re;case Tn:return D;case xn:return G;case er:return J;case Qn:return te}return Ie});function ol(ee){var Ie=ee.length,st=ee.constructor(Ie);return Ie&&typeof ee[0]=="string"&&Mr.call(ee,"index")&&(st.index=ee.index,st.input=ee.input),st}function cs(ee){return typeof ee.constructor=="function"&&!al(ee)?Ye(se(ee)):{}}function sl(ee,Ie,st,Yt){var wr=ee.constructor;switch(Ie){case H:return ji(ee);case o:case f:return new wr(+ee);case re:return wo(ee,Yt);case j:case ue:case me:case ge:case we:case Ee:case xe:case We:case be:return cu(ee,Yt);case D:return xs(ee,Yt,st);case R:case $:return new wr(ee);case W:return va(ee);case J:return CA(ee,Yt,st);case oe:return Ci(ee)}}function Fl(ee,Ie){return Ie=Ie??i,!!Ie&&(typeof ee=="number"||Je.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function Bi(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function vl(ee){return!!Mn&&Mn in ee}function al(ee){var Ie=ee&&ee.constructor,st=typeof Ie=="function"&&Ie.prototype||Un;return ee===st}function Eo(ee){if(ee!=null){try{return En.call(ee)}catch{}try{return ee+""}catch{}}return""}function go(ee){return ss(ee,!0,!0)}function hs(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}function as(ee){return Sc(ee)&&Mr.call(ee,"callee")&&(!Oe.call(ee,"callee")||Hn.call(ee)==s)}var yo=Array.isArray;function Xi(ee){return ee!=null&&Ns(ee.length)&&!ba(ee)}function Sc(ee){return Cl(ee)&&Xi(ee)}var Cs=$e||Wi;function ba(ee){var Ie=Ri(ee)?Hn.call(ee):"";return Ie==M||Ie==B}function Ns(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=i}function Ri(ee){var Ie=typeof ee;return!!ee&&(Ie=="object"||Ie=="function")}function Cl(ee){return!!ee&&typeof ee=="object"}function Zr(ee){return Xi(ee)?Hr(ee):cn(ee)}function Cr(){return[]}function Wi(){return!1}n.exports=go}(Nv,Nv.exports)),Nv.exports}var kQ=TQ();const Y8=yA(kQ);var m4,q8;function PQ(){if(q8)return m4;q8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,f=o.toString;function C(G,W,J){return G===G&&(J!==void 0&&(G=G<=J?G:J),W!==void 0&&(G=G>=W?G:W)),G}function M(G){var W=typeof G;return!!G&&(W=="object"||W=="function")}function B(G){return!!G&&typeof G=="object"}function D(G){return typeof G=="symbol"||B(G)&&f.call(G)==e}function R(G){if(typeof G=="number")return G;if(D(G))return n;if(M(G)){var W=typeof G.valueOf=="function"?G.valueOf():G;G=M(W)?W+"":W}if(typeof G!="string")return G===0?G:+G;G=G.replace(t,"");var J=i.test(G);return J||s.test(G)?l(G.slice(2),J?2:8):r.test(G)?n:+G}function U(G,W,J){return J===void 0&&(J=W,W=void 0),J!==void 0&&(J=R(J),J=J===J?J:0),W!==void 0&&(W=R(W),W=W===W?W:0),C(R(G),W,J)}return m4=U,m4}var RQ=PQ();const $8=yA(RQ);var g4={},Bv={},V8;function DQ(){if(V8)return Bv;V8=1,Bv.byteLength=o,Bv.toByteArray=C,Bv.fromByteArray=D;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(R){var U=R.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var G=R.indexOf("=");G===-1&&(G=U);var W=G===U?0:4-G%4;return[G,W]}function o(R){var U=l(R),G=U[0],W=U[1];return(G+W)*3/4-W}function f(R,U,G){return(U+G)*3/4-G}function C(R){var U,G=l(R),W=G[0],J=G[1],$=new t(f(R,W,J)),oe=0,te=J>0?W-4:W,H;for(H=0;H<te;H+=4)U=e[R.charCodeAt(H)]<<18|e[R.charCodeAt(H+1)]<<12|e[R.charCodeAt(H+2)]<<6|e[R.charCodeAt(H+3)],$[oe++]=U>>16&255,$[oe++]=U>>8&255,$[oe++]=U&255;return J===2&&(U=e[R.charCodeAt(H)]<<2|e[R.charCodeAt(H+1)]>>4,$[oe++]=U&255),J===1&&(U=e[R.charCodeAt(H)]<<10|e[R.charCodeAt(H+1)]<<4|e[R.charCodeAt(H+2)]>>2,$[oe++]=U>>8&255,$[oe++]=U&255),$}function M(R){return n[R>>18&63]+n[R>>12&63]+n[R>>6&63]+n[R&63]}function B(R,U,G){for(var W,J=[],$=U;$<G;$+=3)W=(R[$]<<16&16711680)+(R[$+1]<<8&65280)+(R[$+2]&255),J.push(M(W));return J.join("")}function D(R){for(var U,G=R.length,W=G%3,J=[],$=16383,oe=0,te=G-W;oe<te;oe+=$)J.push(B(R,oe,oe+$>te?te:oe+$));return W===1?(U=R[G-1],J.push(n[U>>2]+n[U<<4&63]+"==")):W===2&&(U=(R[G-2]<<8)+R[G-1],J.push(n[U>>10]+n[U>>4&63]+n[U<<2&63]+"=")),J.join("")}return Bv}var cb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var H8;function FQ(){return H8||(H8=1,cb.read=function(n,e,t,r,i){var s,l,o=i*8-r-1,f=(1<<o)-1,C=f>>1,M=-7,B=t?i-1:0,D=t?-1:1,R=n[e+B];for(B+=D,s=R&(1<<-M)-1,R>>=-M,M+=o;M>0;s=s*256+n[e+B],B+=D,M-=8);for(l=s&(1<<-M)-1,s>>=-M,M+=r;M>0;l=l*256+n[e+B],B+=D,M-=8);if(s===0)s=1-C;else{if(s===f)return l?NaN:(R?-1:1)*(1/0);l=l+Math.pow(2,r),s=s-C}return(R?-1:1)*l*Math.pow(2,s-r)},cb.write=function(n,e,t,r,i,s){var l,o,f,C=s*8-i-1,M=(1<<C)-1,B=M>>1,D=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=r?0:s-1,U=r?1:-1,G=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=M):(l=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+B>=1?e+=D/f:e+=D*Math.pow(2,1-B),e*f>=2&&(l++,f/=2),l+B>=M?(o=0,l=M):l+B>=1?(o=(e*f-1)*Math.pow(2,i),l=l+B):(o=e*Math.pow(2,B-1)*Math.pow(2,i),l=0));i>=8;n[t+R]=o&255,R+=U,o/=256,i-=8);for(l=l<<i|o,C+=i;C>0;n[t+R]=l&255,R+=U,l/=256,C-=8);n[t+R-U]|=G*128}),cb}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Z8;function KQ(){return Z8||(Z8=1,function(n){const e=DQ(),t=FQ(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=$,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Ne=new Uint8Array(1),he={foo:function(){return 42}};return Object.setPrototypeOf(he,Uint8Array.prototype),Object.setPrototypeOf(Ne,he),Ne.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(Ne){if(Ne>i)throw new RangeError('The value "'+Ne+'" is invalid for option "size"');const he=new Uint8Array(Ne);return Object.setPrototypeOf(he,o.prototype),he}function o(Ne,he,ie){if(typeof Ne=="number"){if(typeof he=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(Ne)}return f(Ne,he,ie)}o.poolSize=8192;function f(Ne,he,ie){if(typeof Ne=="string")return D(Ne,he);if(ArrayBuffer.isView(Ne))return U(Ne);if(Ne==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ne);if(Mn(Ne,ArrayBuffer)||Ne&&Mn(Ne.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mn(Ne,SharedArrayBuffer)||Ne&&Mn(Ne.buffer,SharedArrayBuffer)))return G(Ne,he,ie);if(typeof Ne=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const se=Ne.valueOf&&Ne.valueOf();if(se!=null&&se!==Ne)return o.from(se,he,ie);const fe=W(Ne);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ne[Symbol.toPrimitive]=="function")return o.from(Ne[Symbol.toPrimitive]("string"),he,ie);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ne)}o.from=function(Ne,he,ie){return f(Ne,he,ie)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function C(Ne){if(typeof Ne!="number")throw new TypeError('"size" argument must be of type number');if(Ne<0)throw new RangeError('The value "'+Ne+'" is invalid for option "size"')}function M(Ne,he,ie){return C(Ne),Ne<=0?l(Ne):he!==void 0?typeof ie=="string"?l(Ne).fill(he,ie):l(Ne).fill(he):l(Ne)}o.alloc=function(Ne,he,ie){return M(Ne,he,ie)};function B(Ne){return C(Ne),l(Ne<0?0:J(Ne)|0)}o.allocUnsafe=function(Ne){return B(Ne)},o.allocUnsafeSlow=function(Ne){return B(Ne)};function D(Ne,he){if((typeof he!="string"||he==="")&&(he="utf8"),!o.isEncoding(he))throw new TypeError("Unknown encoding: "+he);const ie=oe(Ne,he)|0;let se=l(ie);const fe=se.write(Ne,he);return fe!==ie&&(se=se.slice(0,fe)),se}function R(Ne){const he=Ne.length<0?0:J(Ne.length)|0,ie=l(he);for(let se=0;se<he;se+=1)ie[se]=Ne[se]&255;return ie}function U(Ne){if(Mn(Ne,Uint8Array)){const he=new Uint8Array(Ne);return G(he.buffer,he.byteOffset,he.byteLength)}return R(Ne)}function G(Ne,he,ie){if(he<0||Ne.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(Ne.byteLength<he+(ie||0))throw new RangeError('"length" is outside of buffer bounds');let se;return he===void 0&&ie===void 0?se=new Uint8Array(Ne):ie===void 0?se=new Uint8Array(Ne,he):se=new Uint8Array(Ne,he,ie),Object.setPrototypeOf(se,o.prototype),se}function W(Ne){if(o.isBuffer(Ne)){const he=J(Ne.length)|0,ie=l(he);return ie.length===0||Ne.copy(ie,0,0,he),ie}if(Ne.length!==void 0)return typeof Ne.length!="number"||En(Ne.length)?l(0):R(Ne);if(Ne.type==="Buffer"&&Array.isArray(Ne.data))return R(Ne.data)}function J(Ne){if(Ne>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Ne|0}function $(Ne){return+Ne!=Ne&&(Ne=0),o.alloc(+Ne)}o.isBuffer=function(he){return he!=null&&he._isBuffer===!0&&he!==o.prototype},o.compare=function(he,ie){if(Mn(he,Uint8Array)&&(he=o.from(he,he.offset,he.byteLength)),Mn(ie,Uint8Array)&&(ie=o.from(ie,ie.offset,ie.byteLength)),!o.isBuffer(he)||!o.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===ie)return 0;let se=he.length,fe=ie.length;for(let Oe=0,Ge=Math.min(se,fe);Oe<Ge;++Oe)if(he[Oe]!==ie[Oe]){se=he[Oe],fe=ie[Oe];break}return se<fe?-1:fe<se?1:0},o.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(he,ie){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(he.length===0)return o.alloc(0);let se;if(ie===void 0)for(ie=0,se=0;se<he.length;++se)ie+=he[se].length;const fe=o.allocUnsafe(ie);let Oe=0;for(se=0;se<he.length;++se){let Ge=he[se];if(Mn(Ge,Uint8Array))Oe+Ge.length>fe.length?(o.isBuffer(Ge)||(Ge=o.from(Ge)),Ge.copy(fe,Oe)):Uint8Array.prototype.set.call(fe,Ge,Oe);else if(o.isBuffer(Ge))Ge.copy(fe,Oe);else throw new TypeError('"list" argument must be an Array of Buffers');Oe+=Ge.length}return fe};function oe(Ne,he){if(o.isBuffer(Ne))return Ne.length;if(ArrayBuffer.isView(Ne)||Mn(Ne,ArrayBuffer))return Ne.byteLength;if(typeof Ne!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ne);const ie=Ne.length,se=arguments.length>2&&arguments[2]===!0;if(!se&&ie===0)return 0;let fe=!1;for(;;)switch(he){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return ln(Ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie*2;case"hex":return ie>>>1;case"base64":return Un(Ne).length;default:if(fe)return se?-1:ln(Ne).length;he=(""+he).toLowerCase(),fe=!0}}o.byteLength=oe;function te(Ne,he,ie){let se=!1;if((he===void 0||he<0)&&(he=0),he>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0,he>>>=0,ie<=he))return"";for(Ne||(Ne="utf8");;)switch(Ne){case"hex":return Je(this,he,ie);case"utf8":case"utf-8":return We(this,he,ie);case"ascii":return Ct(this,he,ie);case"latin1":case"binary":return at(this,he,ie);case"base64":return xe(this,he,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,he,ie);default:if(se)throw new TypeError("Unknown encoding: "+Ne);Ne=(Ne+"").toLowerCase(),se=!0}}o.prototype._isBuffer=!0;function H(Ne,he,ie){const se=Ne[he];Ne[he]=Ne[ie],Ne[ie]=se}o.prototype.swap16=function(){const he=this.length;if(he%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ie=0;ie<he;ie+=2)H(this,ie,ie+1);return this},o.prototype.swap32=function(){const he=this.length;if(he%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ie=0;ie<he;ie+=4)H(this,ie,ie+3),H(this,ie+1,ie+2);return this},o.prototype.swap64=function(){const he=this.length;if(he%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ie=0;ie<he;ie+=8)H(this,ie,ie+7),H(this,ie+1,ie+6),H(this,ie+2,ie+5),H(this,ie+3,ie+4);return this},o.prototype.toString=function(){const he=this.length;return he===0?"":arguments.length===0?We(this,0,he):te.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(he){if(!o.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he?!0:o.compare(this,he)===0},o.prototype.inspect=function(){let he="";const ie=n.INSPECT_MAX_BYTES;return he=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(he+=" ... "),"<Buffer "+he+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(he,ie,se,fe,Oe){if(Mn(he,Uint8Array)&&(he=o.from(he,he.offset,he.byteLength)),!o.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof he);if(ie===void 0&&(ie=0),se===void 0&&(se=he?he.length:0),fe===void 0&&(fe=0),Oe===void 0&&(Oe=this.length),ie<0||se>he.length||fe<0||Oe>this.length)throw new RangeError("out of range index");if(fe>=Oe&&ie>=se)return 0;if(fe>=Oe)return-1;if(ie>=se)return 1;if(ie>>>=0,se>>>=0,fe>>>=0,Oe>>>=0,this===he)return 0;let Ge=Oe-fe,ct=se-ie;const $e=Math.min(Ge,ct),De=this.slice(fe,Oe),Ze=he.slice(ie,se);for(let m=0;m<$e;++m)if(De[m]!==Ze[m]){Ge=De[m],ct=Ze[m];break}return Ge<ct?-1:ct<Ge?1:0};function re(Ne,he,ie,se,fe){if(Ne.length===0)return-1;if(typeof ie=="string"?(se=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,En(ie)&&(ie=fe?0:Ne.length-1),ie<0&&(ie=Ne.length+ie),ie>=Ne.length){if(fe)return-1;ie=Ne.length-1}else if(ie<0)if(fe)ie=0;else return-1;if(typeof he=="string"&&(he=o.from(he,se)),o.isBuffer(he))return he.length===0?-1:j(Ne,he,ie,se,fe);if(typeof he=="number")return he=he&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(Ne,he,ie):Uint8Array.prototype.lastIndexOf.call(Ne,he,ie):j(Ne,[he],ie,se,fe);throw new TypeError("val must be string, number or Buffer")}function j(Ne,he,ie,se,fe){let Oe=1,Ge=Ne.length,ct=he.length;if(se!==void 0&&(se=String(se).toLowerCase(),se==="ucs2"||se==="ucs-2"||se==="utf16le"||se==="utf-16le")){if(Ne.length<2||he.length<2)return-1;Oe=2,Ge/=2,ct/=2,ie/=2}function $e(Ze,m){return Oe===1?Ze[m]:Ze.readUInt16BE(m*Oe)}let De;if(fe){let Ze=-1;for(De=ie;De<Ge;De++)if($e(Ne,De)===$e(he,Ze===-1?0:De-Ze)){if(Ze===-1&&(Ze=De),De-Ze+1===ct)return Ze*Oe}else Ze!==-1&&(De-=De-Ze),Ze=-1}else for(ie+ct>Ge&&(ie=Ge-ct),De=ie;De>=0;De--){let Ze=!0;for(let m=0;m<ct;m++)if($e(Ne,De+m)!==$e(he,m)){Ze=!1;break}if(Ze)return De}return-1}o.prototype.includes=function(he,ie,se){return this.indexOf(he,ie,se)!==-1},o.prototype.indexOf=function(he,ie,se){return re(this,he,ie,se,!0)},o.prototype.lastIndexOf=function(he,ie,se){return re(this,he,ie,se,!1)};function ue(Ne,he,ie,se){ie=Number(ie)||0;const fe=Ne.length-ie;se?(se=Number(se),se>fe&&(se=fe)):se=fe;const Oe=he.length;se>Oe/2&&(se=Oe/2);let Ge;for(Ge=0;Ge<se;++Ge){const ct=parseInt(he.substr(Ge*2,2),16);if(En(ct))return Ge;Ne[ie+Ge]=ct}return Ge}function me(Ne,he,ie,se){return wn(ln(he,Ne.length-ie),Ne,ie,se)}function ge(Ne,he,ie,se){return wn(Vn(he),Ne,ie,se)}function we(Ne,he,ie,se){return wn(Un(he),Ne,ie,se)}function Ee(Ne,he,ie,se){return wn(jt(he,Ne.length-ie),Ne,ie,se)}o.prototype.write=function(he,ie,se,fe){if(ie===void 0)fe="utf8",se=this.length,ie=0;else if(se===void 0&&typeof ie=="string")fe=ie,se=this.length,ie=0;else if(isFinite(ie))ie=ie>>>0,isFinite(se)?(se=se>>>0,fe===void 0&&(fe="utf8")):(fe=se,se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Oe=this.length-ie;if((se===void 0||se>Oe)&&(se=Oe),he.length>0&&(se<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let Ge=!1;for(;;)switch(fe){case"hex":return ue(this,he,ie,se);case"utf8":case"utf-8":return me(this,he,ie,se);case"ascii":case"latin1":case"binary":return ge(this,he,ie,se);case"base64":return we(this,he,ie,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,he,ie,se);default:if(Ge)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),Ge=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(Ne,he,ie){return he===0&&ie===Ne.length?e.fromByteArray(Ne):e.fromByteArray(Ne.slice(he,ie))}function We(Ne,he,ie){ie=Math.min(Ne.length,ie);const se=[];let fe=he;for(;fe<ie;){const Oe=Ne[fe];let Ge=null,ct=Oe>239?4:Oe>223?3:Oe>191?2:1;if(fe+ct<=ie){let $e,De,Ze,m;switch(ct){case 1:Oe<128&&(Ge=Oe);break;case 2:$e=Ne[fe+1],($e&192)===128&&(m=(Oe&31)<<6|$e&63,m>127&&(Ge=m));break;case 3:$e=Ne[fe+1],De=Ne[fe+2],($e&192)===128&&(De&192)===128&&(m=(Oe&15)<<12|($e&63)<<6|De&63,m>2047&&(m<55296||m>57343)&&(Ge=m));break;case 4:$e=Ne[fe+1],De=Ne[fe+2],Ze=Ne[fe+3],($e&192)===128&&(De&192)===128&&(Ze&192)===128&&(m=(Oe&15)<<18|($e&63)<<12|(De&63)<<6|Ze&63,m>65535&&m<1114112&&(Ge=m))}}Ge===null?(Ge=65533,ct=1):Ge>65535&&(Ge-=65536,se.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),se.push(Ge),fe+=ct}return rt(se)}const be=4096;function rt(Ne){const he=Ne.length;if(he<=be)return String.fromCharCode.apply(String,Ne);let ie="",se=0;for(;se<he;)ie+=String.fromCharCode.apply(String,Ne.slice(se,se+=be));return ie}function Ct(Ne,he,ie){let se="";ie=Math.min(Ne.length,ie);for(let fe=he;fe<ie;++fe)se+=String.fromCharCode(Ne[fe]&127);return se}function at(Ne,he,ie){let se="";ie=Math.min(Ne.length,ie);for(let fe=he;fe<ie;++fe)se+=String.fromCharCode(Ne[fe]);return se}function Je(Ne,he,ie){const se=Ne.length;(!he||he<0)&&(he=0),(!ie||ie<0||ie>se)&&(ie=se);let fe="";for(let Oe=he;Oe<ie;++Oe)fe+=Mr[Ne[Oe]];return fe}function ze(Ne,he,ie){const se=Ne.slice(he,ie);let fe="";for(let Oe=0;Oe<se.length-1;Oe+=2)fe+=String.fromCharCode(se[Oe]+se[Oe+1]*256);return fe}o.prototype.slice=function(he,ie){const se=this.length;he=~~he,ie=ie===void 0?se:~~ie,he<0?(he+=se,he<0&&(he=0)):he>se&&(he=se),ie<0?(ie+=se,ie<0&&(ie=0)):ie>se&&(ie=se),ie<he&&(ie=he);const fe=this.subarray(he,ie);return Object.setPrototypeOf(fe,o.prototype),fe};function Te(Ne,he,ie){if(Ne%1!==0||Ne<0)throw new RangeError("offset is not uint");if(Ne+he>ie)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(he,ie,se){he=he>>>0,ie=ie>>>0,se||Te(he,ie,this.length);let fe=this[he],Oe=1,Ge=0;for(;++Ge<ie&&(Oe*=256);)fe+=this[he+Ge]*Oe;return fe},o.prototype.readUintBE=o.prototype.readUIntBE=function(he,ie,se){he=he>>>0,ie=ie>>>0,se||Te(he,ie,this.length);let fe=this[he+--ie],Oe=1;for(;ie>0&&(Oe*=256);)fe+=this[he+--ie]*Oe;return fe},o.prototype.readUint8=o.prototype.readUInt8=function(he,ie){return he=he>>>0,ie||Te(he,1,this.length),this[he]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(he,ie){return he=he>>>0,ie||Te(he,2,this.length),this[he]|this[he+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(he,ie){return he=he>>>0,ie||Te(he,2,this.length),this[he]<<8|this[he+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(he,ie){return he=he>>>0,ie||Te(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+this[he+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(he,ie){return he=he>>>0,ie||Te(he,4,this.length),this[he]*16777216+(this[he+1]<<16|this[he+2]<<8|this[he+3])},o.prototype.readBigUInt64LE=Hn(function(he){he=he>>>0,gt(he,"offset");const ie=this[he],se=this[he+7];(ie===void 0||se===void 0)&&wt(he,this.length-8);const fe=ie+this[++he]*2**8+this[++he]*2**16+this[++he]*2**24,Oe=this[++he]+this[++he]*2**8+this[++he]*2**16+se*2**24;return BigInt(fe)+(BigInt(Oe)<<BigInt(32))}),o.prototype.readBigUInt64BE=Hn(function(he){he=he>>>0,gt(he,"offset");const ie=this[he],se=this[he+7];(ie===void 0||se===void 0)&&wt(he,this.length-8);const fe=ie*2**24+this[++he]*2**16+this[++he]*2**8+this[++he],Oe=this[++he]*2**24+this[++he]*2**16+this[++he]*2**8+se;return(BigInt(fe)<<BigInt(32))+BigInt(Oe)}),o.prototype.readIntLE=function(he,ie,se){he=he>>>0,ie=ie>>>0,se||Te(he,ie,this.length);let fe=this[he],Oe=1,Ge=0;for(;++Ge<ie&&(Oe*=256);)fe+=this[he+Ge]*Oe;return Oe*=128,fe>=Oe&&(fe-=Math.pow(2,8*ie)),fe},o.prototype.readIntBE=function(he,ie,se){he=he>>>0,ie=ie>>>0,se||Te(he,ie,this.length);let fe=ie,Oe=1,Ge=this[he+--fe];for(;fe>0&&(Oe*=256);)Ge+=this[he+--fe]*Oe;return Oe*=128,Ge>=Oe&&(Ge-=Math.pow(2,8*ie)),Ge},o.prototype.readInt8=function(he,ie){return he=he>>>0,ie||Te(he,1,this.length),this[he]&128?(255-this[he]+1)*-1:this[he]},o.prototype.readInt16LE=function(he,ie){he=he>>>0,ie||Te(he,2,this.length);const se=this[he]|this[he+1]<<8;return se&32768?se|4294901760:se},o.prototype.readInt16BE=function(he,ie){he=he>>>0,ie||Te(he,2,this.length);const se=this[he+1]|this[he]<<8;return se&32768?se|4294901760:se},o.prototype.readInt32LE=function(he,ie){return he=he>>>0,ie||Te(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},o.prototype.readInt32BE=function(he,ie){return he=he>>>0,ie||Te(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},o.prototype.readBigInt64LE=Hn(function(he){he=he>>>0,gt(he,"offset");const ie=this[he],se=this[he+7];(ie===void 0||se===void 0)&&wt(he,this.length-8);const fe=this[he+4]+this[he+5]*2**8+this[he+6]*2**16+(se<<24);return(BigInt(fe)<<BigInt(32))+BigInt(ie+this[++he]*2**8+this[++he]*2**16+this[++he]*2**24)}),o.prototype.readBigInt64BE=Hn(function(he){he=he>>>0,gt(he,"offset");const ie=this[he],se=this[he+7];(ie===void 0||se===void 0)&&wt(he,this.length-8);const fe=(ie<<24)+this[++he]*2**16+this[++he]*2**8+this[++he];return(BigInt(fe)<<BigInt(32))+BigInt(this[++he]*2**24+this[++he]*2**16+this[++he]*2**8+se)}),o.prototype.readFloatLE=function(he,ie){return he=he>>>0,ie||Te(he,4,this.length),t.read(this,he,!0,23,4)},o.prototype.readFloatBE=function(he,ie){return he=he>>>0,ie||Te(he,4,this.length),t.read(this,he,!1,23,4)},o.prototype.readDoubleLE=function(he,ie){return he=he>>>0,ie||Te(he,8,this.length),t.read(this,he,!0,52,8)},o.prototype.readDoubleBE=function(he,ie){return he=he>>>0,ie||Te(he,8,this.length),t.read(this,he,!1,52,8)};function He(Ne,he,ie,se,fe,Oe){if(!o.isBuffer(Ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(he>fe||he<Oe)throw new RangeError('"value" argument is out of bounds');if(ie+se>Ne.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(he,ie,se,fe){if(he=+he,ie=ie>>>0,se=se>>>0,!fe){const ct=Math.pow(2,8*se)-1;He(this,he,ie,se,ct,0)}let Oe=1,Ge=0;for(this[ie]=he&255;++Ge<se&&(Oe*=256);)this[ie+Ge]=he/Oe&255;return ie+se},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(he,ie,se,fe){if(he=+he,ie=ie>>>0,se=se>>>0,!fe){const ct=Math.pow(2,8*se)-1;He(this,he,ie,se,ct,0)}let Oe=se-1,Ge=1;for(this[ie+Oe]=he&255;--Oe>=0&&(Ge*=256);)this[ie+Oe]=he/Ge&255;return ie+se},o.prototype.writeUint8=o.prototype.writeUInt8=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,1,255,0),this[ie]=he&255,ie+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,2,65535,0),this[ie]=he&255,this[ie+1]=he>>>8,ie+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,2,65535,0),this[ie]=he>>>8,this[ie+1]=he&255,ie+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,4,4294967295,0),this[ie+3]=he>>>24,this[ie+2]=he>>>16,this[ie+1]=he>>>8,this[ie]=he&255,ie+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,4,4294967295,0),this[ie]=he>>>24,this[ie+1]=he>>>16,this[ie+2]=he>>>8,this[ie+3]=he&255,ie+4};function pt(Ne,he,ie,se,fe){_t(he,se,fe,Ne,ie,7);let Oe=Number(he&BigInt(4294967295));Ne[ie++]=Oe,Oe=Oe>>8,Ne[ie++]=Oe,Oe=Oe>>8,Ne[ie++]=Oe,Oe=Oe>>8,Ne[ie++]=Oe;let Ge=Number(he>>BigInt(32)&BigInt(4294967295));return Ne[ie++]=Ge,Ge=Ge>>8,Ne[ie++]=Ge,Ge=Ge>>8,Ne[ie++]=Ge,Ge=Ge>>8,Ne[ie++]=Ge,ie}function kt(Ne,he,ie,se,fe){_t(he,se,fe,Ne,ie,7);let Oe=Number(he&BigInt(4294967295));Ne[ie+7]=Oe,Oe=Oe>>8,Ne[ie+6]=Oe,Oe=Oe>>8,Ne[ie+5]=Oe,Oe=Oe>>8,Ne[ie+4]=Oe;let Ge=Number(he>>BigInt(32)&BigInt(4294967295));return Ne[ie+3]=Ge,Ge=Ge>>8,Ne[ie+2]=Ge,Ge=Ge>>8,Ne[ie+1]=Ge,Ge=Ge>>8,Ne[ie]=Ge,ie+8}o.prototype.writeBigUInt64LE=Hn(function(he,ie=0){return pt(this,he,ie,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Hn(function(he,ie=0){return kt(this,he,ie,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(he,ie,se,fe){if(he=+he,ie=ie>>>0,!fe){const $e=Math.pow(2,8*se-1);He(this,he,ie,se,$e-1,-$e)}let Oe=0,Ge=1,ct=0;for(this[ie]=he&255;++Oe<se&&(Ge*=256);)he<0&&ct===0&&this[ie+Oe-1]!==0&&(ct=1),this[ie+Oe]=(he/Ge>>0)-ct&255;return ie+se},o.prototype.writeIntBE=function(he,ie,se,fe){if(he=+he,ie=ie>>>0,!fe){const $e=Math.pow(2,8*se-1);He(this,he,ie,se,$e-1,-$e)}let Oe=se-1,Ge=1,ct=0;for(this[ie+Oe]=he&255;--Oe>=0&&(Ge*=256);)he<0&&ct===0&&this[ie+Oe+1]!==0&&(ct=1),this[ie+Oe]=(he/Ge>>0)-ct&255;return ie+se},o.prototype.writeInt8=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,1,127,-128),he<0&&(he=255+he+1),this[ie]=he&255,ie+1},o.prototype.writeInt16LE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,2,32767,-32768),this[ie]=he&255,this[ie+1]=he>>>8,ie+2},o.prototype.writeInt16BE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,2,32767,-32768),this[ie]=he>>>8,this[ie+1]=he&255,ie+2},o.prototype.writeInt32LE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,4,2147483647,-2147483648),this[ie]=he&255,this[ie+1]=he>>>8,this[ie+2]=he>>>16,this[ie+3]=he>>>24,ie+4},o.prototype.writeInt32BE=function(he,ie,se){return he=+he,ie=ie>>>0,se||He(this,he,ie,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[ie]=he>>>24,this[ie+1]=he>>>16,this[ie+2]=he>>>8,this[ie+3]=he&255,ie+4},o.prototype.writeBigInt64LE=Hn(function(he,ie=0){return pt(this,he,ie,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Hn(function(he,ie=0){return kt(this,he,ie,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(Ne,he,ie,se,fe,Oe){if(ie+se>Ne.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function Bt(Ne,he,ie,se,fe){return he=+he,ie=ie>>>0,fe||ft(Ne,he,ie,4),t.write(Ne,he,ie,se,23,4),ie+4}o.prototype.writeFloatLE=function(he,ie,se){return Bt(this,he,ie,!0,se)},o.prototype.writeFloatBE=function(he,ie,se){return Bt(this,he,ie,!1,se)};function Tt(Ne,he,ie,se,fe){return he=+he,ie=ie>>>0,fe||ft(Ne,he,ie,8),t.write(Ne,he,ie,se,52,8),ie+8}o.prototype.writeDoubleLE=function(he,ie,se){return Tt(this,he,ie,!0,se)},o.prototype.writeDoubleBE=function(he,ie,se){return Tt(this,he,ie,!1,se)},o.prototype.copy=function(he,ie,se,fe){if(!o.isBuffer(he))throw new TypeError("argument should be a Buffer");if(se||(se=0),!fe&&fe!==0&&(fe=this.length),ie>=he.length&&(ie=he.length),ie||(ie=0),fe>0&&fe<se&&(fe=se),fe===se||he.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(se<0||se>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),he.length-ie<fe-se&&(fe=he.length-ie+se);const Oe=fe-se;return this===he&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,se,fe):Uint8Array.prototype.set.call(he,this.subarray(se,fe),ie),Oe},o.prototype.fill=function(he,ie,se,fe){if(typeof he=="string"){if(typeof ie=="string"?(fe=ie,ie=0,se=this.length):typeof se=="string"&&(fe=se,se=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!o.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(he.length===1){const Ge=he.charCodeAt(0);(fe==="utf8"&&Ge<128||fe==="latin1")&&(he=Ge)}}else typeof he=="number"?he=he&255:typeof he=="boolean"&&(he=Number(he));if(ie<0||this.length<ie||this.length<se)throw new RangeError("Out of range index");if(se<=ie)return this;ie=ie>>>0,se=se===void 0?this.length:se>>>0,he||(he=0);let Oe;if(typeof he=="number")for(Oe=ie;Oe<se;++Oe)this[Oe]=he;else{const Ge=o.isBuffer(he)?he:o.from(he,fe),ct=Ge.length;if(ct===0)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Oe=0;Oe<se-ie;++Oe)this[Oe+ie]=Ge[Oe%ct]}return this};const Le={};function Pe(Ne,he,ie){Le[Ne]=class extends ie{constructor(){super(),Object.defineProperty(this,"message",{value:he.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ne}]`,this.stack,delete this.name}get code(){return Ne}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${Ne}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(Ne){return Ne?`${Ne} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(Ne,he){return`The "${Ne}" argument must be of type number. Received type ${typeof he}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(Ne,he,ie){let se=`The value of "${Ne}" is out of range.`,fe=ie;return Number.isInteger(ie)&&Math.abs(ie)>2**32?fe=ke(String(ie)):typeof ie=="bigint"&&(fe=String(ie),(ie>BigInt(2)**BigInt(32)||ie<-(BigInt(2)**BigInt(32)))&&(fe=ke(fe)),fe+="n"),se+=` It must be ${he}. Received ${fe}`,se},RangeError);function ke(Ne){let he="",ie=Ne.length;const se=Ne[0]==="-"?1:0;for(;ie>=se+4;ie-=3)he=`_${Ne.slice(ie-3,ie)}${he}`;return`${Ne.slice(0,ie)}${he}`}function Qe(Ne,he,ie){gt(he,"offset"),(Ne[he]===void 0||Ne[he+ie]===void 0)&&wt(he,Ne.length-(ie+1))}function _t(Ne,he,ie,se,fe,Oe){if(Ne>ie||Ne<he){const Ge=typeof he=="bigint"?"n":"";let ct;throw he===0||he===BigInt(0)?ct=`>= 0${Ge} and < 2${Ge} ** ${(Oe+1)*8}${Ge}`:ct=`>= -(2${Ge} ** ${(Oe+1)*8-1}${Ge}) and < 2 ** ${(Oe+1)*8-1}${Ge}`,new Le.ERR_OUT_OF_RANGE("value",ct,Ne)}Qe(se,fe,Oe)}function gt(Ne,he){if(typeof Ne!="number")throw new Le.ERR_INVALID_ARG_TYPE(he,"number",Ne)}function wt(Ne,he,ie){throw Math.floor(Ne)!==Ne?(gt(Ne,ie),new Le.ERR_OUT_OF_RANGE("offset","an integer",Ne)):he<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${he}`,Ne)}const Qt=/[^+/0-9A-Za-z-_]/g;function Ft(Ne){if(Ne=Ne.split("=")[0],Ne=Ne.trim().replace(Qt,""),Ne.length<2)return"";for(;Ne.length%4!==0;)Ne=Ne+"=";return Ne}function ln(Ne,he){he=he||1/0;let ie;const se=Ne.length;let fe=null;const Oe=[];for(let Ge=0;Ge<se;++Ge){if(ie=Ne.charCodeAt(Ge),ie>55295&&ie<57344){if(!fe){if(ie>56319){(he-=3)>-1&&Oe.push(239,191,189);continue}else if(Ge+1===se){(he-=3)>-1&&Oe.push(239,191,189);continue}fe=ie;continue}if(ie<56320){(he-=3)>-1&&Oe.push(239,191,189),fe=ie;continue}ie=(fe-55296<<10|ie-56320)+65536}else fe&&(he-=3)>-1&&Oe.push(239,191,189);if(fe=null,ie<128){if((he-=1)<0)break;Oe.push(ie)}else if(ie<2048){if((he-=2)<0)break;Oe.push(ie>>6|192,ie&63|128)}else if(ie<65536){if((he-=3)<0)break;Oe.push(ie>>12|224,ie>>6&63|128,ie&63|128)}else if(ie<1114112){if((he-=4)<0)break;Oe.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,ie&63|128)}else throw new Error("Invalid code point")}return Oe}function Vn(Ne){const he=[];for(let ie=0;ie<Ne.length;++ie)he.push(Ne.charCodeAt(ie)&255);return he}function jt(Ne,he){let ie,se,fe;const Oe=[];for(let Ge=0;Ge<Ne.length&&!((he-=2)<0);++Ge)ie=Ne.charCodeAt(Ge),se=ie>>8,fe=ie%256,Oe.push(fe),Oe.push(se);return Oe}function Un(Ne){return e.toByteArray(Ft(Ne))}function wn(Ne,he,ie,se){let fe;for(fe=0;fe<se&&!(fe+ie>=he.length||fe>=Ne.length);++fe)he[fe+ie]=Ne[fe];return fe}function Mn(Ne,he){return Ne instanceof he||Ne!=null&&Ne.constructor!=null&&Ne.constructor.name!=null&&Ne.constructor.name===he.name}function En(Ne){return Ne!==Ne}const Mr=function(){const Ne="0123456789abcdef",he=new Array(256);for(let ie=0;ie<16;++ie){const se=ie*16;for(let fe=0;fe<16;++fe)he[se+fe]=Ne[ie]+Ne[fe]}return he}();function Hn(Ne){return typeof BigInt>"u"?Pn:Ne}function Pn(){throw new Error("BigInt not supported")}}(g4)),g4}var LQ=KQ();const UQ=yA(LQ);var y4,X8;function zQ(){if(X8)return y4;X8=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/[\\^$.*+?()[\]{}|]/g,M=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,D=typeof window=="object"&&window&&window.Object===Object&&window,R=typeof self=="object"&&self&&self.Object===Object&&self,U=D||R||Function("return this")();function G(De,Ze){return De?.[Ze]}function W(De){var Ze=!1;if(De!=null&&typeof De.toString!="function")try{Ze=!!(De+"")}catch{}return Ze}var J=Array.prototype,$=Function.prototype,oe=Object.prototype,te=U["__core-js_shared__"],H=function(){var De=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return De?"Symbol(src)_1."+De:""}(),re=$.toString,j=oe.hasOwnProperty,ue=oe.toString,me=RegExp("^"+re.call(j).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=U.Symbol,we=J.splice,Ee=Un(U,"Map"),xe=Un(Object,"create"),We=ge?ge.prototype:void 0,be=We?We.toString:void 0;function rt(De){var Ze=-1,m=De?De.length:0;for(this.clear();++Ze<m;){var mt=De[Ze];this.set(mt[0],mt[1])}}function Ct(){this.__data__=xe?xe(null):{}}function at(De){return this.has(De)&&delete this.__data__[De]}function Je(De){var Ze=this.__data__;if(xe){var m=Ze[De];return m===e?void 0:m}return j.call(Ze,De)?Ze[De]:void 0}function ze(De){var Ze=this.__data__;return xe?Ze[De]!==void 0:j.call(Ze,De)}function Te(De,Ze){var m=this.__data__;return m[De]=xe&&Ze===void 0?e:Ze,this}rt.prototype.clear=Ct,rt.prototype.delete=at,rt.prototype.get=Je,rt.prototype.has=ze,rt.prototype.set=Te;function He(De){var Ze=-1,m=De?De.length:0;for(this.clear();++Ze<m;){var mt=De[Ze];this.set(mt[0],mt[1])}}function pt(){this.__data__=[]}function kt(De){var Ze=this.__data__,m=wt(Ze,De);if(m<0)return!1;var mt=Ze.length-1;return m==mt?Ze.pop():we.call(Ze,m,1),!0}function ft(De){var Ze=this.__data__,m=wt(Ze,De);return m<0?void 0:Ze[m][1]}function Bt(De){return wt(this.__data__,De)>-1}function Tt(De,Ze){var m=this.__data__,mt=wt(m,De);return mt<0?m.push([De,Ze]):m[mt][1]=Ze,this}He.prototype.clear=pt,He.prototype.delete=kt,He.prototype.get=ft,He.prototype.has=Bt,He.prototype.set=Tt;function Le(De){var Ze=-1,m=De?De.length:0;for(this.clear();++Ze<m;){var mt=De[Ze];this.set(mt[0],mt[1])}}function Pe(){this.__data__={hash:new rt,map:new(Ee||He),string:new rt}}function ke(De){return jt(this,De).delete(De)}function Qe(De){return jt(this,De).get(De)}function _t(De){return jt(this,De).has(De)}function gt(De,Ze){return jt(this,De).set(De,Ze),this}Le.prototype.clear=Pe,Le.prototype.delete=ke,Le.prototype.get=Qe,Le.prototype.has=_t,Le.prototype.set=gt;function wt(De,Ze){for(var m=De.length;m--;)if(he(De[m][0],Ze))return m;return-1}function Qt(De,Ze){Ze=wn(Ze,De)?[Ze]:Vn(Ze);for(var m=0,mt=Ze.length;De!=null&&m<mt;)De=De[Hn(Ze[m++])];return m&&m==mt?De:void 0}function Ft(De){if(!fe(De)||En(De))return!1;var Ze=se(De)||W(De)?me:B;return Ze.test(Pn(De))}function ln(De){if(typeof De=="string")return De;if(Ge(De))return be?be.call(De):"";var Ze=De+"";return Ze=="0"&&1/De==-1/0?"-0":Ze}function Vn(De){return ie(De)?De:Mr(De)}function jt(De,Ze){var m=De.__data__;return Mn(Ze)?m[typeof Ze=="string"?"string":"hash"]:m.map}function Un(De,Ze){var m=G(De,Ze);return Ft(m)?m:void 0}function wn(De,Ze){if(ie(De))return!1;var m=typeof De;return m=="number"||m=="symbol"||m=="boolean"||De==null||Ge(De)?!0:l.test(De)||!s.test(De)||Ze!=null&&De in Object(Ze)}function Mn(De){var Ze=typeof De;return Ze=="string"||Ze=="number"||Ze=="symbol"||Ze=="boolean"?De!=="__proto__":De===null}function En(De){return!!H&&H in De}var Mr=Ne(function(De){De=ct(De);var Ze=[];return o.test(De)&&Ze.push(""),De.replace(f,function(m,mt,At,It){Ze.push(At?It.replace(M,"$1"):mt||m)}),Ze});function Hn(De){if(typeof De=="string"||Ge(De))return De;var Ze=De+"";return Ze=="0"&&1/De==-1/0?"-0":Ze}function Pn(De){if(De!=null){try{return re.call(De)}catch{}try{return De+""}catch{}}return""}function Ne(De,Ze){if(typeof De!="function"||Ze&&typeof Ze!="function")throw new TypeError(n);var m=function(){var mt=arguments,At=Ze?Ze.apply(this,mt):mt[0],It=m.cache;if(It.has(At))return It.get(At);var nt=De.apply(this,mt);return m.cache=It.set(At,nt),nt};return m.cache=new(Ne.Cache||Le),m}Ne.Cache=Le;function he(De,Ze){return De===Ze||De!==De&&Ze!==Ze}var ie=Array.isArray;function se(De){var Ze=fe(De)?ue.call(De):"";return Ze==t||Ze==r}function fe(De){var Ze=typeof De;return!!De&&(Ze=="object"||Ze=="function")}function Oe(De){return!!De&&typeof De=="object"}function Ge(De){return typeof De=="symbol"||Oe(De)&&ue.call(De)==i}function ct(De){return De==null?"":ln(De)}function $e(De,Ze,m){var mt=De==null?void 0:Qt(De,Ze);return mt===void 0?m:mt}return y4=$e,y4}var NQ=zQ();const GQ=yA(NQ);var Gv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var jQ=Gv.exports,J8;function WQ(){return J8||(J8=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",C=500,M="__lodash_placeholder__",B=1,D=2,R=4,U=1,G=2,W=1,J=2,$=4,oe=8,te=16,H=32,re=64,j=128,ue=256,me=512,ge=30,we="...",Ee=800,xe=16,We=1,be=2,rt=3,Ct=1/0,at=9007199254740991,Je=17976931348623157e292,ze=NaN,Te=4294967295,He=Te-1,pt=Te>>>1,kt=[["ary",j],["bind",W],["bindKey",J],["curry",oe],["curryRight",te],["flip",me],["partial",H],["partialRight",re],["rearg",ue]],ft="[object Arguments]",Bt="[object Array]",Tt="[object AsyncFunction]",Le="[object Boolean]",Pe="[object Date]",ke="[object DOMException]",Qe="[object Error]",_t="[object Function]",gt="[object GeneratorFunction]",wt="[object Map]",Qt="[object Number]",Ft="[object Null]",ln="[object Object]",Vn="[object Promise]",jt="[object Proxy]",Un="[object RegExp]",wn="[object Set]",Mn="[object String]",En="[object Symbol]",Mr="[object Undefined]",Hn="[object WeakMap]",Pn="[object WeakSet]",Ne="[object ArrayBuffer]",he="[object DataView]",ie="[object Float32Array]",se="[object Float64Array]",fe="[object Int8Array]",Oe="[object Int16Array]",Ge="[object Int32Array]",ct="[object Uint8Array]",$e="[object Uint8ClampedArray]",De="[object Uint16Array]",Ze="[object Uint32Array]",m=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,At=/(__e\(.*?\)|\b__t\)) \+\n'';/g,It=/&(?:amp|lt|gt|quot|#39);/g,nt=/[&<>"']/g,en=RegExp(It.source),Tn=RegExp(nt.source),xn=/<%-([\s\S]+?)%>/g,er=/<%([\s\S]+?)%>/g,Qn=/<%=([\s\S]+?)%>/g,Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$r=/^\w*$/,Br=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,br=/[\\^$.*+?()[\]{}|]/g,or=RegExp(br.source),ti=/^\s+/,bn=/\s/,Vi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zr=/\{\n\/\* \[wrapped with (.+)\] \*/,$o=/,? & /,is=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zn=/[()=,{}\[\]\/\s]/,_i=/\\(\\)?/g,Kr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ki=/\w*$/,oa=/^[-+]0x[0-9a-f]+$/i,os=/^0b[01]+$/i,Gr=/^\[object .+?Constructor\]$/,qa=/^0o[0-7]+$/i,sa=/^(?:0|[1-9]\d*)$/,jo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ds=/($^)/,yl=/['\n\r\u2028\u2029\\]/g,si="\\ud800-\\udfff",vA="\\u0300-\\u036f",Bs="\\ufe20-\\ufe2f",Hr="\\u20d0-\\u20ff",Sr=vA+Bs+Hr,aa="\\u2700-\\u27bf",vs="a-z\\xdf-\\xf6\\xf8-\\xff",ss="\\xac\\xb1\\xd7\\xf7",Ye="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Et="\\u2000-\\u206f",gn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nn="A-Z\\xc0-\\xd6\\xd8-\\xde",cn="\\ufe0e\\ufe0f",sr=ss+Ye+Et+gn,ji="[']",wo="["+si+"]",xs="["+sr+"]",va="["+Sr+"]",CA="\\d+",Ci="["+aa+"]",cu="["+vs+"]",Hl="[^"+si+sr+CA+aa+vs+Nn+"]",$a="\\ud83c[\\udffb-\\udfff]",Ca="(?:"+va+"|"+$a+")",wc="[^"+si+"]",_a="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",So="["+Nn+"]",yi="\\u200d",ol="(?:"+cu+"|"+Hl+")",cs="(?:"+So+"|"+Hl+")",sl="(?:"+ji+"(?:d|ll|m|re|s|t|ve))?",Fl="(?:"+ji+"(?:D|LL|M|RE|S|T|VE))?",Bi=Ca+"?",vl="["+cn+"]?",al="(?:"+yi+"(?:"+[wc,_a,gi].join("|")+")"+vl+Bi+")*",Eo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",go="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hs=vl+Bi+al,as="(?:"+[Ci,_a,gi].join("|")+")"+hs,yo="(?:"+[wc+va+"?",va,_a,gi,wo].join("|")+")",Xi=RegExp(ji,"g"),Sc=RegExp(va,"g"),Cs=RegExp($a+"(?="+$a+")|"+yo+hs,"g"),ba=RegExp([So+"?"+cu+"+"+sl+"(?="+[xs,So,"$"].join("|")+")",cs+"+"+Fl+"(?="+[xs,So+ol,"$"].join("|")+")",So+"?"+ol+"+"+sl,So+"+"+Fl,go,Eo,CA,as].join("|"),"g"),Ns=RegExp("["+yi+si+Sr+cn+"]"),Ri=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Cl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zr=-1,Cr={};Cr[ie]=Cr[se]=Cr[fe]=Cr[Oe]=Cr[Ge]=Cr[ct]=Cr[$e]=Cr[De]=Cr[Ze]=!0,Cr[ft]=Cr[Bt]=Cr[Ne]=Cr[Le]=Cr[he]=Cr[Pe]=Cr[Qe]=Cr[_t]=Cr[wt]=Cr[Qt]=Cr[ln]=Cr[Un]=Cr[wn]=Cr[Mn]=Cr[Hn]=!1;var Wi={};Wi[ft]=Wi[Bt]=Wi[Ne]=Wi[he]=Wi[Le]=Wi[Pe]=Wi[ie]=Wi[se]=Wi[fe]=Wi[Oe]=Wi[Ge]=Wi[wt]=Wi[Qt]=Wi[ln]=Wi[Un]=Wi[wn]=Wi[Mn]=Wi[En]=Wi[ct]=Wi[$e]=Wi[De]=Wi[Ze]=!0,Wi[Qe]=Wi[_t]=Wi[Hn]=!1;var ee={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wr=parseFloat,zn=parseInt,qr=typeof window=="object"&&window&&window.Object===Object&&window,ai=typeof self=="object"&&self&&self.Object===Object&&self,Er=qr||ai||Function("return this")(),Xr=e&&!e.nodeType&&e,Hi=Xr&&!0&&n&&!n.nodeType&&n,Ji=Hi&&Hi.exports===Xr,ni=Ji&&qr.process,di=function(){try{var Xt=Hi&&Hi.require&&Hi.require("util").types;return Xt||ni&&ni.binding&&ni.binding("util")}catch{}}(),lo=di&&di.isArrayBuffer,zi=di&&di.isDate,Oi=di&&di.isMap,la=di&&di.isRegExp,Ea=di&&di.isSet,_A=di&&di.isTypedArray;function Gs(Xt,Sn,hn){switch(hn.length){case 0:return Xt.call(Sn);case 1:return Xt.call(Sn,hn[0]);case 2:return Xt.call(Sn,hn[0],hn[1]);case 3:return Xt.call(Sn,hn[0],hn[1],hn[2])}return Xt.apply(Sn,hn)}function $c(Xt,Sn,hn,Pr){for(var Di=-1,Po=Xt==null?0:Xt.length;++Di<Po;){var Ba=Xt[Di];Sn(Pr,Ba,hn(Ba),Xt)}return Pr}function Vo(Xt,Sn){for(var hn=-1,Pr=Xt==null?0:Xt.length;++hn<Pr&&Sn(Xt[hn],hn,Xt)!==!1;);return Xt}function Ec(Xt,Sn){for(var hn=Xt==null?0:Xt.length;hn--&&Sn(Xt[hn],hn,Xt)!==!1;);return Xt}function jA(Xt,Sn){for(var hn=-1,Pr=Xt==null?0:Xt.length;++hn<Pr;)if(!Sn(Xt[hn],hn,Xt))return!1;return!0}function hu(Xt,Sn){for(var hn=-1,Pr=Xt==null?0:Xt.length,Di=0,Po=[];++hn<Pr;){var Ba=Xt[hn];Sn(Ba,hn,Xt)&&(Po[Di++]=Ba)}return Po}function Vc(Xt,Sn){var hn=Xt==null?0:Xt.length;return!!hn&&Fs(Xt,Sn,0)>-1}function Mh(Xt,Sn,hn){for(var Pr=-1,Di=Xt==null?0:Xt.length;++Pr<Di;)if(hn(Sn,Xt[Pr]))return!0;return!1}function so(Xt,Sn){for(var hn=-1,Pr=Xt==null?0:Xt.length,Di=Array(Pr);++hn<Pr;)Di[hn]=Sn(Xt[hn],hn,Xt);return Di}function ec(Xt,Sn){for(var hn=-1,Pr=Sn.length,Di=Xt.length;++hn<Pr;)Xt[Di+hn]=Sn[hn];return Xt}function td(Xt,Sn,hn,Pr){var Di=-1,Po=Xt==null?0:Xt.length;for(Pr&&Po&&(hn=Xt[++Di]);++Di<Po;)hn=Sn(hn,Xt[Di],Di,Xt);return hn}function zp(Xt,Sn,hn,Pr){var Di=Xt==null?0:Xt.length;for(Pr&&Di&&(hn=Xt[--Di]);Di--;)hn=Sn(hn,Xt[Di],Di,Xt);return hn}function Hc(Xt,Sn){for(var hn=-1,Pr=Xt==null?0:Xt.length;++hn<Pr;)if(Sn(Xt[hn],hn,Xt))return!0;return!1}var nd=od("length");function Np(Xt){return Xt.split("")}function Af(Xt){return Xt.match(is)||[]}function uf(Xt,Sn,hn){var Pr;return hn(Xt,function(Di,Po,Ba){if(Sn(Di,Po,Ba))return Pr=Po,!1}),Pr}function bA(Xt,Sn,hn,Pr){for(var Di=Xt.length,Po=hn+(Pr?1:-1);Pr?Po--:++Po<Di;)if(Sn(Xt[Po],Po,Xt))return Po;return-1}function Fs(Xt,Sn,hn){return Sn===Sn?Oh(Xt,Sn,hn):bA(Xt,WA,hn)}function rd(Xt,Sn,hn,Pr){for(var Di=hn-1,Po=Xt.length;++Di<Po;)if(Pr(Xt[Di],Sn))return Di;return-1}function WA(Xt){return Xt!==Xt}function id(Xt,Sn){var hn=Xt==null?0:Xt.length;return hn?wh(Xt,Sn)/hn:ze}function od(Xt){return function(Sn){return Sn==null?t:Sn[Xt]}}function Bc(Xt){return function(Sn){return Xt==null?t:Xt[Sn]}}function sd(Xt,Sn,hn,Pr,Di){return Di(Xt,function(Po,Ba,ds){hn=Pr?(Pr=!1,Po):Sn(hn,Po,Ba,ds)}),hn}function Qf(Xt,Sn){var hn=Xt.length;for(Xt.sort(Sn);hn--;)Xt[hn]=Xt[hn].value;return Xt}function wh(Xt,Sn){for(var hn,Pr=-1,Di=Xt.length;++Pr<Di;){var Po=Sn(Xt[Pr]);Po!==t&&(hn=hn===t?Po:hn+Po)}return hn}function Yf(Xt,Sn){for(var hn=-1,Pr=Array(Xt);++hn<Xt;)Pr[hn]=Sn(hn);return Pr}function Sh(Xt,Sn){return so(Sn,function(hn){return[hn,Xt[hn]]})}function cf(Xt){return Xt&&Xt.slice(0,QA(Xt)+1).replace(ti,"")}function Kl(Xt){return function(Sn){return Xt(Sn)}}function Od(Xt,Sn){return so(Sn,function(hn){return Xt[hn]})}function xA(Xt,Sn){return Xt.has(Sn)}function du(Xt,Sn){for(var hn=-1,Pr=Xt.length;++hn<Pr&&Fs(Sn,Xt[hn],0)>-1;);return hn}function Eh(Xt,Sn){for(var hn=Xt.length;hn--&&Fs(Sn,Xt[hn],0)>-1;);return hn}function Bh(Xt,Sn){for(var hn=Xt.length,Pr=0;hn--;)Xt[hn]===Sn&&++Pr;return Pr}var hf=Bc(ee),fu=Bc(Ie);function MA(Xt){return"\\"+Yt[Xt]}function tc(Xt,Sn){return Xt==null?t:Xt[Sn]}function Zc(Xt){return Ns.test(Xt)}function ad(Xt){return Ri.test(Xt)}function vm(Xt){for(var Sn,hn=[];!(Sn=Xt.next()).done;)hn.push(Sn.value);return hn}function Oc(Xt){var Sn=-1,hn=Array(Xt.size);return Xt.forEach(function(Pr,Di){hn[++Sn]=[Di,Pr]}),hn}function ld(Xt,Sn){return function(hn){return Xt(Sn(hn))}}function _l(Xt,Sn){for(var hn=-1,Pr=Xt.length,Di=0,Po=[];++hn<Pr;){var Ba=Xt[hn];(Ba===Sn||Ba===M)&&(Xt[hn]=M,Po[Di++]=hn)}return Po}function ll(Xt){var Sn=-1,hn=Array(Xt.size);return Xt.forEach(function(Pr){hn[++Sn]=Pr}),hn}function qf(Xt){var Sn=-1,hn=Array(Xt.size);return Xt.forEach(function(Pr){hn[++Sn]=[Pr,Pr]}),hn}function Oh(Xt,Sn,hn){for(var Pr=hn-1,Di=Xt.length;++Pr<Di;)if(Xt[Pr]===Sn)return Pr;return-1}function $f(Xt,Sn,hn){for(var Pr=hn+1;Pr--;)if(Xt[Pr]===Sn)return Pr;return Pr}function Xc(Xt){return Zc(Xt)?Jc(Xt):nd(Xt)}function Ll(Xt){return Zc(Xt)?Id(Xt):Np(Xt)}function QA(Xt){for(var Sn=Xt.length;Sn--&&bn.test(Xt.charAt(Sn)););return Sn}var Bo=Bc(st);function Jc(Xt){for(var Sn=Cs.lastIndex=0;Cs.test(Xt);)++Sn;return Sn}function Id(Xt){return Xt.match(Cs)||[]}function Vf(Xt){return Xt.match(ba)||[]}var Td=function Xt(Sn){Sn=Sn==null?Er:Zl.defaults(Er.Object(),Sn,Zl.pick(Er,Cl));var hn=Sn.Array,Pr=Sn.Date,Di=Sn.Error,Po=Sn.Function,Ba=Sn.Math,ds=Sn.Object,nc=Sn.RegExp,df=Sn.String,Xl=Sn.TypeError,Fu=hn.prototype,Jl=Po.prototype,Va=ds.prototype,Ul=Sn["__core-js_shared__"],Al=Jl.toString,Ro=Va.hasOwnProperty,eh=0,th=function(){var b=/[^.]+$/.exec(Ul&&Ul.keys&&Ul.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),bl=Va.toString,YA=Al.call(ds),Ha=Er._,qA=nc("^"+Al.call(Ro).replace(br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eA=Ji?Sn.Buffer:t,$A=Sn.Symbol,rc=Sn.Uint8Array,Ku=eA?eA.allocUnsafe:t,zl=ld(ds.getPrototypeOf,ds),Ih=ds.create,Qi=Va.propertyIsEnumerable,Lu=Fu.splice,Gp=$A?$A.isConcatSpreadable:t,pu=$A?$A.iterator:t,tA=$A?$A.toStringTag:t,nh=function(){try{var b=ph(ds,"defineProperty");return b({},"",{}),b}catch{}}(),ff=Sn.clearTimeout!==Er.clearTimeout&&Sn.clearTimeout,ls=Pr&&Pr.now!==Er.Date.now&&Pr.now,Ad=Sn.setTimeout!==Er.setTimeout&&Sn.setTimeout,ic=Ba.ceil,wA=Ba.floor,rh=ds.getOwnPropertySymbols,Th=eA?eA.isBuffer:t,ih=Sn.isFinite,kh=Fu.join,mu=ld(ds.keys,ds),_s=Ba.max,Zs=Ba.min,pf=Pr.now,Ph=Sn.parseInt,gu=Ba.random,oc=Fu.reverse,Ic=ph(Sn,"DataView"),Za=ph(Sn,"Map"),Uu=ph(Sn,"Promise"),nA=ph(Sn,"Set"),sc=ph(Sn,"WeakMap"),SA=ph(ds,"create"),Rh=sc&&new sc,Dh={},ud=da(Ic),fs=da(Za),xl=da(Uu),Aa=da(nA),VA=da(sc),yu=$A?$A.prototype:t,EA=yu?yu.valueOf:t,ac=yu?yu.toString:t;function ot(b){if(Tl(b)&&!vo(b)&&!(b instanceof fi)){if(b instanceof Do)return b;if(Ro.call(b,"__wrapped__"))return lA(b)}return new Do(b)}var BA=function(){function b(){}return function(T){if(!Il(T))return{};if(Ih)return Ih(T);b.prototype=T;var V=new b;return b.prototype=t,V}}();function js(){}function Do(b,T){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}ot.templateSettings={escape:xn,evaluate:er,interpolate:Qn,variable:"",imports:{_:ot}},ot.prototype=js.prototype,ot.prototype.constructor=ot,Do.prototype=BA(js.prototype),Do.prototype.constructor=Do;function fi(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function ua(){var b=new fi(this.__wrapped__);return b.__actions__=zo(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=zo(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=zo(this.__views__),b}function oh(){if(this.__filtered__){var b=new fi(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function Fh(){var b=this.__wrapped__.value(),T=this.__dir__,V=vo(b),Ce=T<0,Xe=V?b.length:0,dt=Jf(0,Xe,this.__views__),Kt=dt.start,$t=dt.end,on=$t-Kt,Wn=Ce?$t:Kt-1,qn=this.__iteratees__,lr=qn.length,jr=0,Ei=Zs(on,this.__takeCount__);if(!V||!Ce&&Xe==on&&Ei==on)return Xo(b,this.__actions__);var no=[];e:for(;on--&&jr<Ei;){Wn+=T;for(var es=-1,ro=b[Wn];++es<lr;){var bs=qn[es],ks=bs.iteratee,qd=bs.type,$h=ks(ro);if(qd==be)ro=$h;else if(!$h){if(qd==We)continue e;break e}}no[jr++]=ro}return no}fi.prototype=BA(js.prototype),fi.prototype.constructor=fi;function Os(b){var T=-1,V=b==null?0:b.length;for(this.clear();++T<V;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function ps(){this.__data__=SA?SA(null):{},this.size=0}function ho(b){var T=this.has(b)&&delete this.__data__[b];return this.size-=T?1:0,T}function HA(b){var T=this.__data__;if(SA){var V=T[b];return V===f?t:V}return Ro.call(T,b)?T[b]:t}function Fa(b){var T=this.__data__;return SA?T[b]!==t:Ro.call(T,b)}function Nl(b,T){var V=this.__data__;return this.size+=this.has(b)?0:1,V[b]=SA&&T===t?f:T,this}Os.prototype.clear=ps,Os.prototype.delete=ho,Os.prototype.get=HA,Os.prototype.has=Fa,Os.prototype.set=Nl;function ul(b){var T=-1,V=b==null?0:b.length;for(this.clear();++T<V;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function zu(){this.__data__=[],this.size=0}function cl(b){var T=this.__data__,V=Ia(T,b);if(V<0)return!1;var Ce=T.length-1;return V==Ce?T.pop():Lu.call(T,V,1),--this.size,!0}function Nu(b){var T=this.__data__,V=Ia(T,b);return V<0?t:T[V][1]}function mf(b){return Ia(this.__data__,b)>-1}function Gl(b,T){var V=this.__data__,Ce=Ia(V,b);return Ce<0?(++this.size,V.push([b,T])):V[Ce][1]=T,this}ul.prototype.clear=zu,ul.prototype.delete=cl,ul.prototype.get=Nu,ul.prototype.has=mf,ul.prototype.set=Gl;function Xs(b){var T=-1,V=b==null?0:b.length;for(this.clear();++T<V;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function sh(){this.size=0,this.__data__={hash:new Os,map:new(Za||ul),string:new Os}}function ca(b){var T=_f(this,b).delete(b);return this.size-=T?1:0,T}function Tc(b){return _f(this,b).get(b)}function cd(b){return _f(this,b).has(b)}function OA(b,T){var V=_f(this,b),Ce=V.size;return V.set(b,T),this.size+=V.size==Ce?0:1,this}Xs.prototype.clear=sh,Xs.prototype.delete=ca,Xs.prototype.get=Tc,Xs.prototype.has=cd,Xs.prototype.set=OA;function ah(b){var T=-1,V=b==null?0:b.length;for(this.__data__=new Xs;++T<V;)this.add(b[T])}function lh(b){return this.__data__.set(b,f),this}function Gu(b){return this.__data__.has(b)}ah.prototype.add=ah.prototype.push=lh,ah.prototype.has=Gu;function Ho(b){var T=this.__data__=new ul(b);this.size=T.size}function Yi(){this.__data__=new ul,this.size=0}function Ar(b){var T=this.__data__,V=T.delete(b);return this.size=T.size,V}function Oa(b){return this.__data__.get(b)}function xa(b){return this.__data__.has(b)}function lc(b,T){var V=this.__data__;if(V instanceof ul){var Ce=V.__data__;if(!Za||Ce.length<i-1)return Ce.push([b,T]),this.size=++V.size,this;V=this.__data__=new Xs(Ce)}return V.set(b,T),this.size=V.size,this}Ho.prototype.clear=Yi,Ho.prototype.delete=Ar,Ho.prototype.get=Oa,Ho.prototype.has=xa,Ho.prototype.set=lc;function Ml(b,T){var V=vo(b),Ce=!V&&Hp(b),Xe=!V&&!Ce&&up(b),dt=!V&&!Ce&&!Xe&&p0(b),Kt=V||Ce||Xe||dt,$t=Kt?Yf(b.length,df):[],on=$t.length;for(var Wn in b)(T||Ro.call(b,Wn))&&!(Kt&&(Wn=="length"||Xe&&(Wn=="offset"||Wn=="parent")||dt&&(Wn=="buffer"||Wn=="byteLength"||Wn=="byteOffset")||E(Wn,on)))&&$t.push(Wn);return $t}function wl(b){var T=b.length;return T?b[lt(0,T-1)]:t}function Ac(b,T){return Qs(zo(b),_u(T,0,b.length))}function eo(b){return Qs(zo(b))}function vu(b,T,V){(V!==t&&!Bu(b[T],V)||V===t&&!(T in b))&&Cu(b,T,V)}function Ah(b,T,V){var Ce=b[T];(!(Ro.call(b,T)&&Bu(Ce,V))||V===t&&!(T in b))&&Cu(b,T,V)}function Ia(b,T){for(var V=b.length;V--;)if(Bu(b[V][0],T))return V;return-1}function Ka(b,T,V,Ce){return hl(b,function(Xe,dt,Kt){T(Ce,Xe,V(Xe),Kt)}),Ce}function Is(b,T){return b&&ms(T,ne(T),b)}function IA(b,T){return b&&ms(T,ae(T),b)}function Cu(b,T,V){T=="__proto__"&&nh?nh(b,T,{configurable:!0,enumerable:!0,value:V,writable:!0}):b[T]=V}function uh(b,T){for(var V=-1,Ce=T.length,Xe=hn(Ce),dt=b==null;++V<Ce;)Xe[V]=dt?t:g(b,T[V]);return Xe}function _u(b,T,V){return b===b&&(V!==t&&(b=b<=V?b:V),T!==t&&(b=b>=T?b:T)),b}function Sl(b,T,V,Ce,Xe,dt){var Kt,$t=T&B,on=T&D,Wn=T&R;if(V&&(Kt=Xe?V(b,Ce,Xe,dt):V(b)),Kt!==t)return Kt;if(!Il(b))return b;var qn=vo(b);if(qn){if(Kt=ep(b),!$t)return zo(b,Kt)}else{var lr=Ja(b),jr=lr==_t||lr==gt;if(up(b))return ju(b,$t);if(lr==ln||lr==ft||jr&&!Xe){if(Kt=on||jr?{}:aA(b),!$t)return on?Ua(b,IA(Kt,b)):jl(b,Is(Kt,b))}else{if(!Wi[lr])return Xe?b:{};Kt=tp(b,lr,$t)}}dt||(dt=new Ho);var Ei=dt.get(b);if(Ei)return Ei;dt.set(b,Kt),dg(b)?b.forEach(function(ro){Kt.add(Sl(ro,T,V,ro,b,dt))}):hp(b)&&b.forEach(function(ro,bs){Kt.set(bs,Sl(ro,T,V,bs,b,dt))});var no=Wn?on?vf:Ld:on?ae:ne,es=qn?t:no(b);return Vo(es||b,function(ro,bs){es&&(bs=ro,ro=b[bs]),Ah(Kt,bs,Sl(ro,T,V,bs,b,dt))}),Kt}function Hf(b){var T=ne(b);return function(V){return Kh(V,b,T)}}function Kh(b,T,V){var Ce=V.length;if(b==null)return!Ce;for(b=ds(b);Ce--;){var Xe=V[Ce],dt=T[Xe],Kt=b[Xe];if(Kt===t&&!(Xe in b)||!dt(Kt))return!1}return!0}function ZA(b,T,V){if(typeof b!="function")throw new Xl(l);return ri(function(){b.apply(t,V)},T)}function bo(b,T,V,Ce){var Xe=-1,dt=Vc,Kt=!0,$t=b.length,on=[],Wn=T.length;if(!$t)return on;V&&(T=so(T,Kl(V))),Ce?(dt=Mh,Kt=!1):T.length>=i&&(dt=xA,Kt=!1,T=new ah(T));e:for(;++Xe<$t;){var qn=b[Xe],lr=V==null?qn:V(qn);if(qn=Ce||qn!==0?qn:0,Kt&&lr===lr){for(var jr=Wn;jr--;)if(T[jr]===lr)continue e;on.push(qn)}else dt(T,lr,Ce)||on.push(qn)}return on}var hl=ea(Dr),kd=ea(bu,!0);function hd(b,T){var V=!0;return hl(b,function(Ce,Xe,dt){return V=!!T(Ce,Xe,dt),V}),V}function kc(b,T,V){for(var Ce=-1,Xe=b.length;++Ce<Xe;){var dt=b[Ce],Kt=T(dt);if(Kt!=null&&($t===t?Kt===Kt&&!yc(Kt):V(Kt,$t)))var $t=Kt,on=dt}return on}function Pd(b,T,V,Ce){var Xe=b.length;for(V=Mo(V),V<0&&(V=-V>Xe?0:Xe+V),Ce=Ce===t||Ce>Xe?Xe:Mo(Ce),Ce<0&&(Ce+=Xe),Ce=V>Ce?0:nb(Ce);V<Ce;)b[V++]=T;return b}function Pc(b,T){var V=[];return hl(b,function(Ce,Xe,dt){T(Ce,Xe,dt)&&V.push(Ce)}),V}function Wo(b,T,V,Ce,Xe){var dt=-1,Kt=b.length;for(V||(V=y),Xe||(Xe=[]);++dt<Kt;){var $t=b[dt];T>0&&V($t)?T>1?Wo($t,T-1,V,Ce,Xe):ec(Xe,$t):Ce||(Xe[Xe.length]=$t)}return Xe}var uc=kA(),Ir=kA(!0);function Dr(b,T){return b&&uc(b,T,ne)}function bu(b,T){return b&&Ir(b,T,ne)}function XA(b,T){return hu(T,function(V){return Sf(b[V])})}function JA(b,T){T=ws(T,b);for(var V=0,Ce=T.length;b!=null&&V<Ce;)b=b[qs(T[V++])];return V&&V==Ce?b:t}function Uo(b,T,V){var Ce=T(b);return vo(b)?Ce:ec(Ce,V(b))}function Ta(b){return b==null?b===t?Mr:Ft:tA&&tA in ds(b)?bf(b):In(b)}function La(b,T){return b>T}function eu(b,T){return b!=null&&Ro.call(b,T)}function xu(b,T){return b!=null&&T in ds(b)}function Oo(b,T,V){return b>=Zs(T,V)&&b<_s(T,V)}function Ms(b,T,V){for(var Ce=V?Mh:Vc,Xe=b[0].length,dt=b.length,Kt=dt,$t=hn(dt),on=1/0,Wn=[];Kt--;){var qn=b[Kt];Kt&&T&&(qn=so(qn,Kl(T))),on=Zs(qn.length,on),$t[Kt]=!V&&(T||Xe>=120&&qn.length>=120)?new ah(Kt&&qn):t}qn=b[0];var lr=-1,jr=$t[0];e:for(;++lr<Xe&&Wn.length<on;){var Ei=qn[lr],no=T?T(Ei):Ei;if(Ei=V||Ei!==0?Ei:0,!(jr?xA(jr,no):Ce(Wn,no,V))){for(Kt=dt;--Kt;){var es=$t[Kt];if(!(es?xA(es,no):Ce(b[Kt],no,V)))continue e}jr&&jr.push(no),Wn.push(Ei)}}return Wn}function tu(b,T,V,Ce){return Dr(b,function(Xe,dt,Kt){T(Ce,V(Xe),dt,Kt)}),Ce}function dl(b,T,V){T=ws(T,b),b=Jn(b,T);var Ce=b==null?b:b[qs(Eu(T))];return Ce==null?t:Gs(Ce,b,V)}function cc(b){return Tl(b)&&Ta(b)==ft}function Rc(b){return Tl(b)&&Ta(b)==Ne}function rA(b){return Tl(b)&&Ta(b)==Pe}function ka(b,T,V,Ce,Xe){return b===T?!0:b==null||T==null||!Tl(b)&&!Tl(T)?b!==b&&T!==T:Dc(b,T,V,Ce,ka,Xe)}function Dc(b,T,V,Ce,Xe,dt){var Kt=vo(b),$t=vo(T),on=Kt?Bt:Ja(b),Wn=$t?Bt:Ja(T);on=on==ft?ln:on,Wn=Wn==ft?ln:Wn;var qn=on==ln,lr=Wn==ln,jr=on==Wn;if(jr&&up(b)){if(!up(T))return!1;Kt=!0,qn=!1}if(jr&&!qn)return dt||(dt=new Ho),Kt||p0(b)?sA(b,T,V,Ce,Xe,dt):Gh(b,T,on,V,Ce,Xe,dt);if(!(V&U)){var Ei=qn&&Ro.call(b,"__wrapped__"),no=lr&&Ro.call(T,"__wrapped__");if(Ei||no){var es=Ei?b.value():b,ro=no?T.value():T;return dt||(dt=new Ho),Xe(es,ro,V,Ce,dt)}}return jr?(dt||(dt=new Ho),Kd(b,T,V,Ce,Xe,dt)):!1}function Fc(b){return Tl(b)&&Ja(b)==wt}function Mu(b,T,V,Ce){var Xe=V.length,dt=Xe,Kt=!Ce;if(b==null)return!dt;for(b=ds(b);Xe--;){var $t=V[Xe];if(Kt&&$t[2]?$t[1]!==b[$t[0]]:!($t[0]in b))return!1}for(;++Xe<dt;){$t=V[Xe];var on=$t[0],Wn=b[on],qn=$t[1];if(Kt&&$t[2]){if(Wn===t&&!(on in b))return!1}else{var lr=new Ho;if(Ce)var jr=Ce(Wn,qn,on,b,T,lr);if(!(jr===t?ka(qn,Wn,U|G,Ce,lr):jr))return!1}}return!0}function hc(b){if(!Il(b)||_e(b))return!1;var T=Sf(b)?qA:Gr;return T.test(da(b))}function ch(b){return Tl(b)&&Ta(b)==Un}function TA(b){return Tl(b)&&Ja(b)==wn}function hh(b){return Tl(b)&&hg(b.length)&&!!Cr[Ta(b)]}function O(b){return typeof b=="function"?b:b==null?Gc:typeof b=="object"?vo(b)?z(b[0],b[1]):I(b):lb(b)}function a(b){if(!Ue(b))return mu(b);var T=[];for(var V in ds(b))Ro.call(b,V)&&V!="constructor"&&T.push(V);return T}function d(b){if(!Il(b))return _n(b);var T=Ue(b),V=[];for(var Ce in b)Ce=="constructor"&&(T||!Ro.call(b,Ce))||V.push(Ce);return V}function v(b,T){return b<T}function w(b,T){var V=-1,Ce=gc(b)?hn(b.length):[];return hl(b,function(Xe,dt,Kt){Ce[++V]=T(Xe,dt,Kt)}),Ce}function I(b){var T=No(b);return T.length==1&&T[0][2]?Ot(T[0][0],T[0][1]):function(V){return V===b||Mu(V,b,T)}}function z(b,T){return F(b)&&yt(T)?Ot(qs(b),T):function(V){var Ce=g(V,b);return Ce===t&&Ce===T?k(V,b):ka(T,Ce,U|G)}}function Y(b,T,V,Ce,Xe){b!==T&&uc(T,function(dt,Kt){if(Xe||(Xe=new Ho),Il(dt))X(b,T,Kt,V,Y,Ce,Xe);else{var $t=Ce?Ce(ar(b,Kt),dt,Kt+"",b,T,Xe):t;$t===t&&($t=dt),vu(b,Kt,$t)}},ae)}function X(b,T,V,Ce,Xe,dt,Kt){var $t=ar(b,V),on=ar(T,V),Wn=Kt.get(on);if(Wn){vu(b,V,Wn);return}var qn=dt?dt($t,on,V+"",b,T,Kt):t,lr=qn===t;if(lr){var jr=vo(on),Ei=!jr&&up(on),no=!jr&&!Ei&&p0(on);qn=on,jr||Ei||no?vo($t)?qn=$t:Ql($t)?qn=zo($t):Ei?(lr=!1,qn=ju(on,!0)):no?(lr=!1,qn=Kc(on,!0)):qn=[]:d0(on)||Hp(on)?(qn=$t,Hp($t)?qn=pv($t):(!Il($t)||Sf($t))&&(qn=aA(on))):lr=!1}lr&&(Kt.set(on,qn),Xe(qn,on,Ce,dt,Kt),Kt.delete(on)),vu(b,V,qn)}function ce(b,T){var V=b.length;if(V)return T+=T<0?V:0,E(T,V)?b[T]:t}function pe(b,T,V){T.length?T=so(T,function(dt){return vo(dt)?function(Kt){return JA(Kt,dt.length===1?dt[0]:dt)}:dt}):T=[Gc];var Ce=-1;T=so(T,Kl(Si()));var Xe=w(b,function(dt,Kt,$t){var on=so(T,function(Wn){return Wn(dt)});return{criteria:on,index:++Ce,value:dt}});return Qf(Xe,function(dt,Kt){return Wu(dt,Kt,V)})}function Se(b,T){return Me(b,T,function(V,Ce){return k(b,Ce)})}function Me(b,T,V){for(var Ce=-1,Xe=T.length,dt={};++Ce<Xe;){var Kt=T[Ce],$t=JA(b,Kt);V($t,Kt)&&Lt(dt,ws(Kt,b),$t)}return dt}function Fe(b){return function(T){return JA(T,b)}}function qe(b,T,V,Ce){var Xe=Ce?rd:Fs,dt=-1,Kt=T.length,$t=b;for(b===T&&(T=zo(T)),V&&($t=so(b,Kl(V)));++dt<Kt;)for(var on=0,Wn=T[dt],qn=V?V(Wn):Wn;(on=Xe($t,qn,on,Ce))>-1;)$t!==b&&Lu.call($t,on,1),Lu.call(b,on,1);return b}function it(b,T){for(var V=b?T.length:0,Ce=V-1;V--;){var Xe=T[V];if(V==Ce||Xe!==dt){var dt=Xe;E(Xe)?Lu.call(b,Xe,1):xo(b,Xe)}}return b}function lt(b,T){return b+wA(gu()*(T-b+1))}function ht(b,T,V,Ce){for(var Xe=-1,dt=_s(ic((T-b)/(V||1)),0),Kt=hn(dt);dt--;)Kt[Ce?dt:++Xe]=b,b+=V;return Kt}function bt(b,T){var V="";if(!b||T<1||T>at)return V;do T%2&&(V+=b),T=wA(T/2),T&&(b+=b);while(T);return V}function vt(b,T){return Or(nr(b,T,Gc),b+"")}function xt(b){return wl(cr(b))}function Dt(b,T){var V=cr(b);return Qs(V,_u(T,0,V.length))}function Lt(b,T,V,Ce){if(!Il(b))return b;T=ws(T,b);for(var Xe=-1,dt=T.length,Kt=dt-1,$t=b;$t!=null&&++Xe<dt;){var on=qs(T[Xe]),Wn=V;if(on==="__proto__"||on==="constructor"||on==="prototype")return b;if(Xe!=Kt){var qn=$t[on];Wn=Ce?Ce(qn,on,$t):t,Wn===t&&(Wn=Il(qn)?qn:E(T[Xe+1])?[]:{})}Ah($t,on,Wn),$t=$t[on]}return b}var St=Rh?function(b,T){return Rh.set(b,T),b}:Gc,Gt=nh?function(b,T){return nh(b,"toString",{configurable:!0,enumerable:!1,value:x1(T),writable:!0})}:Gc;function rn(b){return Qs(cr(b))}function Ht(b,T,V){var Ce=-1,Xe=b.length;T<0&&(T=-T>Xe?0:Xe+T),V=V>Xe?Xe:V,V<0&&(V+=Xe),Xe=T>V?0:V-T>>>0,T>>>=0;for(var dt=hn(Xe);++Ce<Xe;)dt[Ce]=b[Ce+T];return dt}function tn(b,T){var V;return hl(b,function(Ce,Xe,dt){return V=T(Ce,Xe,dt),!V}),!!V}function sn(b,T,V){var Ce=0,Xe=b==null?Ce:b.length;if(typeof T=="number"&&T===T&&Xe<=pt){for(;Ce<Xe;){var dt=Ce+Xe>>>1,Kt=b[dt];Kt!==null&&!yc(Kt)&&(V?Kt<=T:Kt<T)?Ce=dt+1:Xe=dt}return Xe}return Yn(b,T,Gc,V)}function Yn(b,T,V,Ce){var Xe=0,dt=b==null?0:b.length;if(dt===0)return 0;T=V(T);for(var Kt=T!==T,$t=T===null,on=yc(T),Wn=T===t;Xe<dt;){var qn=wA((Xe+dt)/2),lr=V(b[qn]),jr=lr!==t,Ei=lr===null,no=lr===lr,es=yc(lr);if(Kt)var ro=Ce||no;else Wn?ro=no&&(Ce||jr):$t?ro=no&&jr&&(Ce||!Ei):on?ro=no&&jr&&!Ei&&(Ce||!es):Ei||es?ro=!1:ro=Ce?lr<=T:lr<T;ro?Xe=qn+1:dt=qn}return Zs(dt,He)}function Gn(b,T){for(var V=-1,Ce=b.length,Xe=0,dt=[];++V<Ce;){var Kt=b[V],$t=T?T(Kt):Kt;if(!V||!Bu($t,on)){var on=$t;dt[Xe++]=Kt===0?0:Kt}}return dt}function On(b){return typeof b=="number"?b:yc(b)?ze:+b}function _r(b){if(typeof b=="string")return b;if(vo(b))return so(b,_r)+"";if(yc(b))return ac?ac.call(b):"";var T=b+"";return T=="0"&&1/b==-Ct?"-0":T}function ui(b,T,V){var Ce=-1,Xe=Vc,dt=b.length,Kt=!0,$t=[],on=$t;if(V)Kt=!1,Xe=Mh;else if(dt>=i){var Wn=T?null:e0(b);if(Wn)return ll(Wn);Kt=!1,Xe=xA,on=new ah}else on=T?[]:$t;e:for(;++Ce<dt;){var qn=b[Ce],lr=T?T(qn):qn;if(qn=V||qn!==0?qn:0,Kt&&lr===lr){for(var jr=on.length;jr--;)if(on[jr]===lr)continue e;T&&on.push(lr),$t.push(qn)}else Xe(on,lr,V)||(on!==$t&&on.push(lr),$t.push(qn))}return $t}function xo(b,T){return T=ws(T,b),b=Jn(b,T),b==null||delete b[qs(Eu(T))]}function Zo(b,T,V,Ce){return Lt(b,T,V(JA(b,T)),Ce)}function Fo(b,T,V,Ce){for(var Xe=b.length,dt=Ce?Xe:-1;(Ce?dt--:++dt<Xe)&&T(b[dt],dt,b););return V?Ht(b,Ce?0:dt,Ce?dt+1:Xe):Ht(b,Ce?dt+1:0,Ce?Xe:dt)}function Xo(b,T){var V=b;return V instanceof fi&&(V=V.value()),td(T,function(Ce,Xe){return Xe.func.apply(Xe.thisArg,ec([Ce],Xe.args))},V)}function As(b,T,V){var Ce=b.length;if(Ce<2)return Ce?ui(b[0]):[];for(var Xe=-1,dt=hn(Ce);++Xe<Ce;)for(var Kt=b[Xe],$t=-1;++$t<Ce;)$t!=Xe&&(dt[Xe]=bo(dt[Xe]||Kt,b[$t],T,V));return ui(Wo(dt,1),T,V)}function wi(b,T,V){for(var Ce=-1,Xe=b.length,dt=T.length,Kt={};++Ce<Xe;){var $t=Ce<dt?T[Ce]:t;V(Kt,b[Ce],$t)}return Kt}function Io(b){return Ql(b)?b:[]}function Ws(b){return typeof b=="function"?b:Gc}function ws(b,T){return vo(b)?b:F(b,T)?[b]:Ys($s(b))}var ha=vt;function Js(b,T,V){var Ce=b.length;return V=V===t?Ce:V,!T&&V>=Ce?b:Ht(b,T,V)}var nu=ff||function(b){return Er.clearTimeout(b)};function ju(b,T){if(T)return b.slice();var V=b.length,Ce=Ku?Ku(V):new b.constructor(V);return b.copy(Ce),Ce}function iA(b){var T=new b.constructor(b.byteLength);return new rc(T).set(new rc(b)),T}function Lh(b,T){var V=T?iA(b.buffer):b.buffer;return new b.constructor(V,b.byteOffset,b.byteLength)}function Uh(b){var T=new b.constructor(b.source,ki.exec(b));return T.lastIndex=b.lastIndex,T}function wu(b){return EA?ds(EA.call(b)):{}}function Kc(b,T){var V=T?iA(b.buffer):b.buffer;return new b.constructor(V,b.byteOffset,b.length)}function El(b,T){if(b!==T){var V=b!==t,Ce=b===null,Xe=b===b,dt=yc(b),Kt=T!==t,$t=T===null,on=T===T,Wn=yc(T);if(!$t&&!Wn&&!dt&&b>T||dt&&Kt&&on&&!$t&&!Wn||Ce&&Kt&&on||!V&&on||!Xe)return 1;if(!Ce&&!dt&&!Wn&&b<T||Wn&&V&&Xe&&!Ce&&!dt||$t&&V&&Xe||!Kt&&Xe||!on)return-1}return 0}function Wu(b,T,V){for(var Ce=-1,Xe=b.criteria,dt=T.criteria,Kt=Xe.length,$t=V.length;++Ce<Kt;){var on=El(Xe[Ce],dt[Ce]);if(on){if(Ce>=$t)return on;var Wn=V[Ce];return on*(Wn=="desc"?-1:1)}}return b.index-T.index}function fl(b,T,V,Ce){for(var Xe=-1,dt=b.length,Kt=V.length,$t=-1,on=T.length,Wn=_s(dt-Kt,0),qn=hn(on+Wn),lr=!Ce;++$t<on;)qn[$t]=T[$t];for(;++Xe<Kt;)(lr||Xe<dt)&&(qn[V[Xe]]=b[Xe]);for(;Wn--;)qn[$t++]=b[Xe++];return qn}function Qu(b,T,V,Ce){for(var Xe=-1,dt=b.length,Kt=-1,$t=V.length,on=-1,Wn=T.length,qn=_s(dt-$t,0),lr=hn(qn+Wn),jr=!Ce;++Xe<qn;)lr[Xe]=b[Xe];for(var Ei=Xe;++on<Wn;)lr[Ei+on]=T[on];for(;++Kt<$t;)(jr||Xe<dt)&&(lr[Ei+V[Kt]]=b[Xe++]);return lr}function zo(b,T){var V=-1,Ce=b.length;for(T||(T=hn(Ce));++V<Ce;)T[V]=b[V];return T}function ms(b,T,V,Ce){var Xe=!V;V||(V={});for(var dt=-1,Kt=T.length;++dt<Kt;){var $t=T[dt],on=Ce?Ce(V[$t],b[$t],$t,V,b):t;on===t&&(on=b[$t]),Xe?Cu(V,$t,on):Ah(V,$t,on)}return V}function jl(b,T){return ms(b,pl(b),T)}function Ua(b,T){return ms(b,PA(b),T)}function dc(b,T){return function(V,Ce){var Xe=vo(V)?$c:Ka,dt=T?T():{};return Xe(V,b,Si(Ce,2),dt)}}function oA(b){return vt(function(T,V){var Ce=-1,Xe=V.length,dt=Xe>1?V[Xe-1]:t,Kt=Xe>2?V[2]:t;for(dt=b.length>3&&typeof dt=="function"?(Xe--,dt):t,Kt&&S(V[0],V[1],Kt)&&(dt=Xe<3?t:dt,Xe=1),T=ds(T);++Ce<Xe;){var $t=V[Ce];$t&&b(T,$t,Ce,dt)}return T})}function ea(b,T){return function(V,Ce){if(V==null)return V;if(!gc(V))return b(V,Ce);for(var Xe=V.length,dt=T?Xe:-1,Kt=ds(V);(T?dt--:++dt<Xe)&&Ce(Kt[dt],dt,Kt)!==!1;);return V}}function kA(b){return function(T,V,Ce){for(var Xe=-1,dt=ds(T),Kt=Ce(T),$t=Kt.length;$t--;){var on=Kt[b?$t:++Xe];if(V(dt[on],on,dt)===!1)break}return T}}function Su(b,T,V){var Ce=T&W,Xe=zh(b);function dt(){var Kt=this&&this!==Er&&this instanceof dt?Xe:b;return Kt.apply(Ce?V:this,arguments)}return dt}function gf(b){return function(T){T=$s(T);var V=Zc(T)?Ll(T):t,Ce=V?V[0]:T.charAt(0),Xe=V?Js(V,1).join(""):T.slice(1);return Ce[b]()+Xe}}function Xa(b){return function(T){return td(Tm(To(T).replace(Xi,"")),b,"")}}function zh(b){return function(){var T=arguments;switch(T.length){case 0:return new b;case 1:return new b(T[0]);case 2:return new b(T[0],T[1]);case 3:return new b(T[0],T[1],T[2]);case 4:return new b(T[0],T[1],T[2],T[3]);case 5:return new b(T[0],T[1],T[2],T[3],T[4]);case 6:return new b(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new b(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var V=BA(b.prototype),Ce=b.apply(V,T);return Il(Ce)?Ce:V}}function Rd(b,T,V){var Ce=zh(b);function Xe(){for(var dt=arguments.length,Kt=hn(dt),$t=dt,on=fh(Xe);$t--;)Kt[$t]=arguments[$t];var Wn=dt<3&&Kt[0]!==on&&Kt[dt-1]!==on?[]:_l(Kt,on);if(dt-=Wn.length,dt<V)return Wl(b,T,ru,Xe.placeholder,t,Kt,Wn,t,t,V-dt);var qn=this&&this!==Er&&this instanceof Xe?Ce:b;return Gs(qn,this,Kt)}return Xe}function Yu(b){return function(T,V,Ce){var Xe=ds(T);if(!gc(T)){var dt=Si(V,3);T=ne(T),V=function($t){return dt(Xe[$t],$t,Xe)}}var Kt=b(T,V,Ce);return Kt>-1?Xe[dt?T[Kt]:Kt]:t}}function Nh(b){return fc(function(T){var V=T.length,Ce=V,Xe=Do.prototype.thru;for(b&&T.reverse();Ce--;){var dt=T[Ce];if(typeof dt!="function")throw new Xl(l);if(Xe&&!Kt&&pd(dt)=="wrapper")var Kt=new Do([],!0)}for(Ce=Kt?Ce:V;++Ce<V;){dt=T[Ce];var $t=pd(dt),on=$t=="wrapper"?Cf(dt):t;on&&de(on[0])&&on[1]==(j|oe|H|ue)&&!on[4].length&&on[9]==1?Kt=Kt[pd(on[0])].apply(Kt,on[3]):Kt=dt.length==1&&de(dt)?Kt[$t]():Kt.thru(dt)}return function(){var Wn=arguments,qn=Wn[0];if(Kt&&Wn.length==1&&vo(qn))return Kt.plant(qn).value();for(var lr=0,jr=V?T[lr].apply(this,Wn):qn;++lr<V;)jr=T[lr].call(this,jr);return jr}})}function ru(b,T,V,Ce,Xe,dt,Kt,$t,on,Wn){var qn=T&j,lr=T&W,jr=T&J,Ei=T&(oe|te),no=T&me,es=jr?t:zh(b);function ro(){for(var bs=arguments.length,ks=hn(bs),qd=bs;qd--;)ks[qd]=arguments[qd];if(Ei)var $h=fh(ro),$d=Bh(ks,$h);if(Ce&&(ks=fl(ks,Ce,Xe,Ei)),dt&&(ks=Qu(ks,dt,Kt,Ei)),bs-=$d,Ei&&bs<Wn){var lu=_l(ks,$h);return Wl(b,T,ru,ro.placeholder,V,ks,lu,$t,on,Wn-bs)}var pp=lr?V:this,Rm=jr?pp[b]:b;return bs=ks.length,$t?ks=fr(ks,$t):no&&bs>1&&ks.reverse(),qn&&on<bs&&(ks.length=on),this&&this!==Er&&this instanceof ro&&(Rm=es||zh(Rm)),Rm.apply(pp,ks)}return ro}function qu(b,T){return function(V,Ce){return tu(V,b,T(Ce),{})}}function dd(b,T){return function(V,Ce){var Xe;if(V===t&&Ce===t)return T;if(V!==t&&(Xe=V),Ce!==t){if(Xe===t)return Ce;typeof V=="string"||typeof Ce=="string"?(V=_r(V),Ce=_r(Ce)):(V=On(V),Ce=On(Ce)),Xe=b(V,Ce)}return Xe}}function Zf(b){return fc(function(T){return T=so(T,Kl(Si())),vt(function(V){var Ce=this;return b(T,function(Xe){return Gs(Xe,Ce,V)})})})}function Dd(b,T){T=T===t?" ":_r(T);var V=T.length;if(V<2)return V?bt(T,b):T;var Ce=bt(T,ic(b/Xc(T)));return Zc(T)?Js(Ll(Ce),0,b).join(""):Ce.slice(0,b)}function jp(b,T,V,Ce){var Xe=T&W,dt=zh(b);function Kt(){for(var $t=-1,on=arguments.length,Wn=-1,qn=Ce.length,lr=hn(qn+on),jr=this&&this!==Er&&this instanceof Kt?dt:b;++Wn<qn;)lr[Wn]=Ce[Wn];for(;on--;)lr[Wn++]=arguments[++$t];return Gs(jr,Xe?V:this,lr)}return Kt}function fd(b){return function(T,V,Ce){return Ce&&typeof Ce!="number"&&S(T,V,Ce)&&(V=Ce=t),T=Ef(T),V===t?(V=T,T=0):V=Ef(V),Ce=Ce===t?T<V?1:-1:Ef(Ce),ht(T,V,Ce,b)}}function yf(b){return function(T,V){return typeof T=="string"&&typeof V=="string"||(T=Qh(T),V=Qh(V)),b(T,V)}}function Wl(b,T,V,Ce,Xe,dt,Kt,$t,on,Wn){var qn=T&oe,lr=qn?Kt:t,jr=qn?t:Kt,Ei=qn?dt:t,no=qn?t:dt;T|=qn?H:re,T&=~(qn?re:H),T&$||(T&=-4);var es=[b,T,Xe,Ei,lr,no,jr,$t,on,Wn],ro=V.apply(t,es);return de(b)&&Tr(ro,es),ro.placeholder=Ce,to(ro,b,T)}function Bl(b){var T=Ba[b];return function(V,Ce){if(V=Qh(V),Ce=Ce==null?0:Zs(Mo(Ce),292),Ce&&ih(V)){var Xe=($s(V)+"e").split("e"),dt=T(Xe[0]+"e"+(+Xe[1]+Ce));return Xe=($s(dt)+"e").split("e"),+(Xe[0]+"e"+(+Xe[1]-Ce))}return T(V)}}var e0=nA&&1/ll(new nA([,-0]))[1]==Ct?function(b){return new nA(b)}:wv;function Xf(b){return function(T){var V=Ja(T);return V==wt?Oc(T):V==wn?qf(T):Sh(T,b(T))}}function Qo(b,T,V,Ce,Xe,dt,Kt,$t){var on=T&J;if(!on&&typeof b!="function")throw new Xl(l);var Wn=Ce?Ce.length:0;if(Wn||(T&=-97,Ce=Xe=t),Kt=Kt===t?Kt:_s(Mo(Kt),0),$t=$t===t?$t:Mo($t),Wn-=Xe?Xe.length:0,T&re){var qn=Ce,lr=Xe;Ce=Xe=t}var jr=on?t:Cf(b),Ei=[b,T,V,Ce,Xe,qn,lr,dt,Kt,$t];if(jr&&qt(Ei,jr),b=Ei[0],T=Ei[1],V=Ei[2],Ce=Ei[3],Xe=Ei[4],$t=Ei[9]=Ei[9]===t?on?0:b.length:_s(Ei[9]-Wn,0),!$t&&T&(oe|te)&&(T&=-25),!T||T==W)var no=Su(b,T,V);else T==oe||T==te?no=Rd(b,T,$t):(T==H||T==(W|H))&&!Xe.length?no=jp(b,T,V,Ce):no=ru.apply(t,Ei);var es=jr?St:Tr;return to(es(no,Ei),b,T)}function Wp(b,T,V,Ce){return b===t||Bu(b,Va[V])&&!Ro.call(Ce,V)?T:b}function dh(b,T,V,Ce,Xe,dt){return Il(b)&&Il(T)&&(dt.set(T,b),Y(b,T,t,dh,dt),dt.delete(T)),b}function Fd(b){return d0(b)?t:b}function sA(b,T,V,Ce,Xe,dt){var Kt=V&U,$t=b.length,on=T.length;if($t!=on&&!(Kt&&on>$t))return!1;var Wn=dt.get(b),qn=dt.get(T);if(Wn&&qn)return Wn==T&&qn==b;var lr=-1,jr=!0,Ei=V&G?new ah:t;for(dt.set(b,T),dt.set(T,b);++lr<$t;){var no=b[lr],es=T[lr];if(Ce)var ro=Kt?Ce(es,no,lr,T,b,dt):Ce(no,es,lr,b,T,dt);if(ro!==t){if(ro)continue;jr=!1;break}if(Ei){if(!Hc(T,function(bs,ks){if(!xA(Ei,ks)&&(no===bs||Xe(no,bs,V,Ce,dt)))return Ei.push(ks)})){jr=!1;break}}else if(!(no===es||Xe(no,es,V,Ce,dt))){jr=!1;break}}return dt.delete(b),dt.delete(T),jr}function Gh(b,T,V,Ce,Xe,dt,Kt){switch(V){case he:if(b.byteLength!=T.byteLength||b.byteOffset!=T.byteOffset)return!1;b=b.buffer,T=T.buffer;case Ne:return!(b.byteLength!=T.byteLength||!dt(new rc(b),new rc(T)));case Le:case Pe:case Qt:return Bu(+b,+T);case Qe:return b.name==T.name&&b.message==T.message;case Un:case Mn:return b==T+"";case wt:var $t=Oc;case wn:var on=Ce&U;if($t||($t=ll),b.size!=T.size&&!on)return!1;var Wn=Kt.get(b);if(Wn)return Wn==T;Ce|=G,Kt.set(b,T);var qn=sA($t(b),$t(T),Ce,Xe,dt,Kt);return Kt.delete(b),qn;case En:if(EA)return EA.call(b)==EA.call(T)}return!1}function Kd(b,T,V,Ce,Xe,dt){var Kt=V&U,$t=Ld(b),on=$t.length,Wn=Ld(T),qn=Wn.length;if(on!=qn&&!Kt)return!1;for(var lr=on;lr--;){var jr=$t[lr];if(!(Kt?jr in T:Ro.call(T,jr)))return!1}var Ei=dt.get(b),no=dt.get(T);if(Ei&&no)return Ei==T&&no==b;var es=!0;dt.set(b,T),dt.set(T,b);for(var ro=Kt;++lr<on;){jr=$t[lr];var bs=b[jr],ks=T[jr];if(Ce)var qd=Kt?Ce(ks,bs,jr,T,b,dt):Ce(bs,ks,jr,b,T,dt);if(!(qd===t?bs===ks||Xe(bs,ks,V,Ce,dt):qd)){es=!1;break}ro||(ro=jr=="constructor")}if(es&&!ro){var $h=b.constructor,$d=T.constructor;$h!=$d&&"constructor"in b&&"constructor"in T&&!(typeof $h=="function"&&$h instanceof $h&&typeof $d=="function"&&$d instanceof $d)&&(es=!1)}return dt.delete(b),dt.delete(T),es}function fc(b){return Or(nr(b,t,pc),b+"")}function Ld(b){return Uo(b,ne,pl)}function vf(b){return Uo(b,ae,PA)}var Cf=Rh?function(b){return Rh.get(b)}:wv;function pd(b){for(var T=b.name+"",V=Dh[T],Ce=Ro.call(Dh,T)?V.length:0;Ce--;){var Xe=V[Ce],dt=Xe.func;if(dt==null||dt==b)return Xe.name}return T}function fh(b){var T=Ro.call(ot,"placeholder")?ot:b;return T.placeholder}function Si(){var b=ot.iteratee||M1;return b=b===M1?O:b,arguments.length?b(arguments[0],arguments[1]):b}function _f(b,T){var V=b.__data__;return Z(T)?V[typeof T=="string"?"string":"hash"]:V.map}function No(b){for(var T=ne(b),V=T.length;V--;){var Ce=T[V],Xe=b[Ce];T[V]=[Ce,Xe,yt(Xe)]}return T}function ph(b,T){var V=tc(b,T);return hc(V)?V:t}function bf(b){var T=Ro.call(b,tA),V=b[tA];try{b[tA]=t;var Ce=!0}catch{}var Xe=bl.call(b);return Ce&&(T?b[tA]=V:delete b[tA]),Xe}var pl=rh?function(b){return b==null?[]:(b=ds(b),hu(rh(b),function(T){return Qi.call(b,T)}))}:jc,PA=rh?function(b){for(var T=[];b;)ec(T,pl(b)),b=zl(b);return T}:jc,Ja=Ta;(Ic&&Ja(new Ic(new ArrayBuffer(1)))!=he||Za&&Ja(new Za)!=wt||Uu&&Ja(Uu.resolve())!=Vn||nA&&Ja(new nA)!=wn||sc&&Ja(new sc)!=Hn)&&(Ja=function(b){var T=Ta(b),V=T==ln?b.constructor:t,Ce=V?da(V):"";if(Ce)switch(Ce){case ud:return he;case fs:return wt;case xl:return Vn;case Aa:return wn;case VA:return Hn}return T});function Jf(b,T,V){for(var Ce=-1,Xe=V.length;++Ce<Xe;){var dt=V[Ce],Kt=dt.size;switch(dt.type){case"drop":b+=Kt;break;case"dropRight":T-=Kt;break;case"take":T=Zs(T,b+Kt);break;case"takeRight":b=_s(b,T-Kt);break}}return{start:b,end:T}}function Pa(b){var T=b.match(zr);return T?T[1].split($o):[]}function Qp(b,T,V){T=ws(T,b);for(var Ce=-1,Xe=T.length,dt=!1;++Ce<Xe;){var Kt=qs(T[Ce]);if(!(dt=b!=null&&V(b,Kt)))break;b=b[Kt]}return dt||++Ce!=Xe?dt:(Xe=b==null?0:b.length,!!Xe&&hg(Xe)&&E(Kt,Xe)&&(vo(b)||Hp(b)))}function ep(b){var T=b.length,V=new b.constructor(T);return T&&typeof b[0]=="string"&&Ro.call(b,"index")&&(V.index=b.index,V.input=b.input),V}function aA(b){return typeof b.constructor=="function"&&!Ue(b)?BA(zl(b)):{}}function tp(b,T,V){var Ce=b.constructor;switch(T){case Ne:return iA(b);case Le:case Pe:return new Ce(+b);case he:return Lh(b,V);case ie:case se:case fe:case Oe:case Ge:case ct:case $e:case De:case Ze:return Kc(b,V);case wt:return new Ce;case Qt:case Mn:return new Ce(b);case Un:return Uh(b);case wn:return new Ce;case En:return wu(b)}}function h(b,T){var V=T.length;if(!V)return b;var Ce=V-1;return T[Ce]=(V>1?"& ":"")+T[Ce],T=T.join(V>2?", ":" "),b.replace(Vi,`{
/* [wrapped with `+T+`] */
`)}function y(b){return vo(b)||Hp(b)||!!(Gp&&b&&b[Gp])}function E(b,T){var V=typeof b;return T=T??at,!!T&&(V=="number"||V!="symbol"&&sa.test(b))&&b>-1&&b%1==0&&b<T}function S(b,T,V){if(!Il(V))return!1;var Ce=typeof T;return(Ce=="number"?gc(V)&&E(T,V.length):Ce=="string"&&T in V)?Bu(V[T],b):!1}function F(b,T){if(vo(b))return!1;var V=typeof b;return V=="number"||V=="symbol"||V=="boolean"||b==null||yc(b)?!0:$r.test(b)||!Qr.test(b)||T!=null&&b in ds(T)}function Z(b){var T=typeof b;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?b!=="__proto__":b===null}function de(b){var T=pd(b),V=ot[T];if(typeof V!="function"||!(T in fi.prototype))return!1;if(b===V)return!0;var Ce=Cf(V);return!!Ce&&b===Ce[0]}function _e(b){return!!th&&th in b}var Re=Ul?Sf:fp;function Ue(b){var T=b&&b.constructor,V=typeof T=="function"&&T.prototype||Va;return b===V}function yt(b){return b===b&&!Il(b)}function Ot(b,T){return function(V){return V==null?!1:V[b]===T&&(T!==t||b in ds(V))}}function Jt(b){var T=dn(b,function(Ce){return V.size===C&&V.clear(),Ce}),V=T.cache;return T}function qt(b,T){var V=b[1],Ce=T[1],Xe=V|Ce,dt=Xe<(W|J|j),Kt=Ce==j&&V==oe||Ce==j&&V==ue&&b[7].length<=T[8]||Ce==(j|ue)&&T[7].length<=T[8]&&V==oe;if(!(dt||Kt))return b;Ce&W&&(b[2]=T[2],Xe|=V&W?0:$);var $t=T[3];if($t){var on=b[3];b[3]=on?fl(on,$t,T[4]):$t,b[4]=on?_l(b[3],M):T[4]}return $t=T[5],$t&&(on=b[5],b[5]=on?Qu(on,$t,T[6]):$t,b[6]=on?_l(b[5],M):T[6]),$t=T[7],$t&&(b[7]=$t),Ce&j&&(b[8]=b[8]==null?T[8]:Zs(b[8],T[8])),b[9]==null&&(b[9]=T[9]),b[0]=T[0],b[1]=Xe,b}function _n(b){var T=[];if(b!=null)for(var V in ds(b))T.push(V);return T}function In(b){return bl.call(b)}function nr(b,T,V){return T=_s(T===t?b.length-1:T,0),function(){for(var Ce=arguments,Xe=-1,dt=_s(Ce.length-T,0),Kt=hn(dt);++Xe<dt;)Kt[Xe]=Ce[T+Xe];Xe=-1;for(var $t=hn(T+1);++Xe<T;)$t[Xe]=Ce[Xe];return $t[T]=V(Kt),Gs(b,this,$t)}}function Jn(b,T){return T.length<2?b:JA(b,Ht(T,0,-1))}function fr(b,T){for(var V=b.length,Ce=Zs(T.length,V),Xe=zo(b);Ce--;){var dt=T[Ce];b[Ce]=E(dt,V)?Xe[dt]:t}return b}function ar(b,T){if(!(T==="constructor"&&typeof b[T]=="function")&&T!="__proto__")return b[T]}var Tr=ci(St),ri=Ad||function(b,T){return Er.setTimeout(b,T)},Or=ci(Gt);function to(b,T,V){var Ce=T+"";return Or(b,h(Ce,ta(Pa(Ce),V)))}function ci(b){var T=0,V=0;return function(){var Ce=pf(),Xe=xe-(Ce-V);if(V=Ce,Xe>0){if(++T>=Ee)return arguments[0]}else T=0;return b.apply(t,arguments)}}function Qs(b,T){var V=-1,Ce=b.length,Xe=Ce-1;for(T=T===t?Ce:T;++V<T;){var dt=lt(V,Xe),Kt=b[dt];b[dt]=b[V],b[V]=Kt}return b.length=T,b}var Ys=Jt(function(b){var T=[];return b.charCodeAt(0)===46&&T.push(""),b.replace(Br,function(V,Ce,Xe,dt){T.push(Xe?dt.replace(_i,"$1"):Ce||V)}),T});function qs(b){if(typeof b=="string"||yc(b))return b;var T=b+"";return T=="0"&&1/b==-Ct?"-0":T}function da(b){if(b!=null){try{return Al.call(b)}catch{}try{return b+""}catch{}}return""}function ta(b,T){return Vo(kt,function(V){var Ce="_."+V[0];T&V[1]&&!Vc(b,Ce)&&b.push(Ce)}),b.sort()}function lA(b){if(b instanceof fi)return b.clone();var T=new Do(b.__wrapped__,b.__chain__);return T.__actions__=zo(b.__actions__),T.__index__=b.__index__,T.__values__=b.__values__,T}function za(b,T,V){(V?S(b,T,V):T===t)?T=1:T=_s(Mo(T),0);var Ce=b==null?0:b.length;if(!Ce||T<1)return[];for(var Xe=0,dt=0,Kt=hn(ic(Ce/T));Xe<Ce;)Kt[dt++]=Ht(b,Xe,Xe+=T);return Kt}function na(b){for(var T=-1,V=b==null?0:b.length,Ce=0,Xe=[];++T<V;){var dt=b[T];dt&&(Xe[Ce++]=dt)}return Xe}function Jo(){var b=arguments.length;if(!b)return[];for(var T=hn(b-1),V=arguments[0],Ce=b;Ce--;)T[Ce-1]=arguments[Ce];return ec(vo(V)?zo(V):[V],Wo(T,1))}var hi=vt(function(b,T){return Ql(b)?bo(b,Wo(T,1,Ql,!0)):[]}),Yo=vt(function(b,T){var V=Eu(T);return Ql(V)&&(V=t),Ql(b)?bo(b,Wo(T,1,Ql,!0),Si(V,2)):[]}),Ss=vt(function(b,T){var V=Eu(T);return Ql(V)&&(V=t),Ql(b)?bo(b,Wo(T,1,Ql,!0),t,V):[]});function Ks(b,T,V){var Ce=b==null?0:b.length;return Ce?(T=V||T===t?1:Mo(T),Ht(b,T<0?0:T,Ce)):[]}function Ts(b,T,V){var Ce=b==null?0:b.length;return Ce?(T=V||T===t?1:Mo(T),T=Ce-T,Ht(b,0,T<0?0:T)):[]}function RA(b,T){return b&&b.length?Fo(b,Si(T,3),!0,!0):[]}function ao(b,T){return b&&b.length?Fo(b,Si(T,3),!0):[]}function Ud(b,T,V,Ce){var Xe=b==null?0:b.length;return Xe?(V&&typeof V!="number"&&S(b,T,V)&&(V=0,Ce=Xe),Pd(b,T,V,Ce)):[]}function AA(b,T,V){var Ce=b==null?0:b.length;if(!Ce)return-1;var Xe=V==null?0:Mo(V);return Xe<0&&(Xe=_s(Ce+Xe,0)),bA(b,Si(T,3),Xe)}function iu(b,T,V){var Ce=b==null?0:b.length;if(!Ce)return-1;var Xe=Ce-1;return V!==t&&(Xe=Mo(V),Xe=V<0?_s(Ce+Xe,0):Zs(Xe,Ce-1)),bA(b,Si(T,3),Xe,!0)}function pc(b){var T=b==null?0:b.length;return T?Wo(b,1):[]}function el(b){var T=b==null?0:b.length;return T?Wo(b,Ct):[]}function ml(b,T){var V=b==null?0:b.length;return V?(T=T===t?1:Mo(T),Wo(b,T)):[]}function np(b){for(var T=-1,V=b==null?0:b.length,Ce={};++T<V;){var Xe=b[T];Ce[Xe[0]]=Xe[1]}return Ce}function rp(b){return b&&b.length?b[0]:t}function zd(b,T,V){var Ce=b==null?0:b.length;if(!Ce)return-1;var Xe=V==null?0:Mo(V);return Xe<0&&(Xe=_s(Ce+Xe,0)),Fs(b,T,Xe)}function t0(b){var T=b==null?0:b.length;return T?Ht(b,0,-1):[]}var eg=vt(function(b){var T=so(b,Io);return T.length&&T[0]===b[0]?Ms(T):[]}),Lc=vt(function(b){var T=Eu(b),V=so(b,Io);return T===Eu(V)?T=t:V.pop(),V.length&&V[0]===b[0]?Ms(V,Si(T,2)):[]}),n0=vt(function(b){var T=Eu(b),V=so(b,Io);return T=typeof T=="function"?T:t,T&&V.pop(),V.length&&V[0]===b[0]?Ms(V,t,T):[]});function xf(b,T){return b==null?"":kh.call(b,T)}function Eu(b){var T=b==null?0:b.length;return T?b[T-1]:t}function Cm(b,T,V){var Ce=b==null?0:b.length;if(!Ce)return-1;var Xe=Ce;return V!==t&&(Xe=Mo(V),Xe=Xe<0?_s(Ce+Xe,0):Zs(Xe,Ce-1)),T===T?$f(b,T,Xe):bA(b,WA,Xe,!0)}function r0(b,T){return b&&b.length?ce(b,Mo(T)):t}var i0=vt(ip);function ip(b,T){return b&&b.length&&T&&T.length?qe(b,T):b}function uA(b,T,V){return b&&b.length&&T&&T.length?qe(b,T,Si(V,2)):b}function md(b,T,V){return b&&b.length&&T&&T.length?qe(b,T,t,V):b}var jh=fc(function(b,T){var V=b==null?0:b.length,Ce=uh(b,T);return it(b,so(T,function(Xe){return E(Xe,V)?+Xe:Xe}).sort(El)),Ce});function mc(b,T){var V=[];if(!(b&&b.length))return V;var Ce=-1,Xe=[],dt=b.length;for(T=Si(T,3);++Ce<dt;){var Kt=b[Ce];T(Kt,Ce,b)&&(V.push(Kt),Xe.push(Ce))}return it(b,Xe),V}function _m(b){return b==null?b:oc.call(b)}function o0(b,T,V){var Ce=b==null?0:b.length;return Ce?(V&&typeof V!="number"&&S(b,T,V)?(T=0,V=Ce):(T=T==null?0:Mo(T),V=V===t?Ce:Mo(V)),Ht(b,T,V)):[]}function tg(b,T){return sn(b,T)}function rv(b,T,V){return Yn(b,T,Si(V,2))}function mh(b,T){var V=b==null?0:b.length;if(V){var Ce=sn(b,T);if(Ce<V&&Bu(b[Ce],T))return Ce}return-1}function ng(b,T){return sn(b,T,!0)}function rg(b,T,V){return Yn(b,T,Si(V,2),!0)}function op(b,T){var V=b==null?0:b.length;if(V){var Ce=sn(b,T,!0)-1;if(Bu(b[Ce],T))return Ce}return-1}function ig(b){return b&&b.length?Gn(b):[]}function sp(b,T){return b&&b.length?Gn(b,Si(T,2)):[]}function a1(b){var T=b==null?0:b.length;return T?Ht(b,1,T):[]}function og(b,T,V){return b&&b.length?(T=V||T===t?1:Mo(T),Ht(b,0,T<0?0:T)):[]}function bm(b,T,V){var Ce=b==null?0:b.length;return Ce?(T=V||T===t?1:Mo(T),T=Ce-T,Ht(b,T<0?0:T,Ce)):[]}function xm(b,T){return b&&b.length?Fo(b,Si(T,3),!1,!0):[]}function l1(b,T){return b&&b.length?Fo(b,Si(T,3)):[]}var A1=vt(function(b){return ui(Wo(b,1,Ql,!0))}),u1=vt(function(b){var T=Eu(b);return Ql(T)&&(T=t),ui(Wo(b,1,Ql,!0),Si(T,2))}),Mm=vt(function(b){var T=Eu(b);return T=typeof T=="function"?T:t,ui(Wo(b,1,Ql,!0),t,T)});function ap(b){return b&&b.length?ui(b):[]}function c1(b,T){return b&&b.length?ui(b,Si(T,2)):[]}function Yp(b,T){return T=typeof T=="function"?T:t,b&&b.length?ui(b,t,T):[]}function s0(b){if(!(b&&b.length))return[];var T=0;return b=hu(b,function(V){if(Ql(V))return T=_s(V.length,T),!0}),Yf(T,function(V){return so(b,od(V))})}function tl(b,T){if(!(b&&b.length))return[];var V=s0(b);return T==null?V:so(V,function(Ce){return Gs(T,t,Ce)})}var h1=vt(function(b,T){return Ql(b)?bo(b,T):[]}),d1=vt(function(b){return As(hu(b,Ql))}),iv=vt(function(b){var T=Eu(b);return Ql(T)&&(T=t),As(hu(b,Ql),Si(T,2))}),wm=vt(function(b){var T=Eu(b);return T=typeof T=="function"?T:t,As(hu(b,Ql),t,T)}),Ol=vt(s0);function a0(b,T){return wi(b||[],T||[],Ah)}function f1(b,T){return wi(b||[],T||[],Lt)}var Uc=vt(function(b){var T=b.length,V=T>1?b[T-1]:t;return V=typeof V=="function"?(b.pop(),V):t,tl(b,V)});function qp(b){var T=ot(b);return T.__chain__=!0,T}function $p(b,T){return T(b),b}function gh(b,T){return T(b)}var l0=fc(function(b){var T=b.length,V=T?b[0]:0,Ce=this.__wrapped__,Xe=function(dt){return uh(dt,b)};return T>1||this.__actions__.length||!(Ce instanceof fi)||!E(V)?this.thru(Xe):(Ce=Ce.slice(V,+V+(T?1:0)),Ce.__actions__.push({func:gh,args:[Xe],thisArg:t}),new Do(Ce,this.__chain__).thru(function(dt){return T&&!dt.length&&dt.push(t),dt}))});function lp(){return qp(this)}function A0(){return new Do(this.value(),this.__chain__)}function sg(){this.__values__===t&&(this.__values__=fv(this.value()));var b=this.__index__>=this.__values__.length,T=b?t:this.__values__[this.__index__++];return{done:b,value:T}}function ag(){return this}function ov(b){for(var T,V=this;V instanceof js;){var Ce=lA(V);Ce.__index__=0,Ce.__values__=t,T?Xe.__wrapped__=Ce:T=Ce;var Xe=Ce;V=V.__wrapped__}return Xe.__wrapped__=b,T}function lg(){var b=this.__wrapped__;if(b instanceof fi){var T=b;return this.__actions__.length&&(T=new fi(this)),T=T.reverse(),T.__actions__.push({func:gh,args:[_m],thisArg:t}),new Do(T,this.__chain__)}return this.thru(_m)}function sv(){return Xo(this.__wrapped__,this.__actions__)}var p1=dc(function(b,T,V){Ro.call(b,V)?++b[V]:Cu(b,V,1)});function m1(b,T,V){var Ce=vo(b)?jA:hd;return V&&S(b,T,V)&&(T=t),Ce(b,Si(T,3))}function u0(b,T){var V=vo(b)?hu:Pc;return V(b,Si(T,3))}var c0=Yu(AA),Ag=Yu(iu);function Sm(b,T){return Wo(wf(b,T),1)}function g1(b,T){return Wo(wf(b,T),Ct)}function Nd(b,T,V){return V=V===t?1:Mo(V),Wo(wf(b,T),V)}function Mf(b,T){var V=vo(b)?Vo:hl;return V(b,Si(T,3))}function gd(b,T){var V=vo(b)?Ec:kd;return V(b,Si(T,3))}var Vp=dc(function(b,T,V){Ro.call(b,V)?b[V].push(T):Cu(b,V,[T])});function Ap(b,T,V,Ce){b=gc(b)?b:cr(b),V=V&&!Ce?Mo(V):0;var Xe=b.length;return V<0&&(V=_s(Xe+V,0)),Om(b)?V<=Xe&&b.indexOf(T,V)>-1:!!Xe&&Fs(b,T,V)>-1}var y1=vt(function(b,T,V){var Ce=-1,Xe=typeof T=="function",dt=gc(b)?hn(b.length):[];return hl(b,function(Kt){dt[++Ce]=Xe?Gs(T,Kt,V):dl(Kt,T,V)}),dt}),av=dc(function(b,T,V){Cu(b,V,T)});function wf(b,T){var V=vo(b)?so:w;return V(b,Si(T,3))}function v1(b,T,V,Ce){return b==null?[]:(vo(T)||(T=T==null?[]:[T]),V=Ce?t:V,vo(V)||(V=V==null?[]:[V]),pe(b,T,V))}var Em=dc(function(b,T,V){b[V?0:1].push(T)},function(){return[[],[]]});function C1(b,T,V){var Ce=vo(b)?td:sd,Xe=arguments.length<3;return Ce(b,Si(T,4),V,Xe,hl)}function Bm(b,T,V){var Ce=vo(b)?zp:sd,Xe=arguments.length<3;return Ce(b,Si(T,4),V,Xe,kd)}function p(b,T){var V=vo(b)?hu:Pc;return V(b,hr(Si(T,3)))}function _(b){var T=vo(b)?wl:xt;return T(b)}function K(b,T,V){(V?S(b,T,V):T===t)?T=1:T=Mo(T);var Ce=vo(b)?Ac:Dt;return Ce(b,T)}function Q(b){var T=vo(b)?eo:rn;return T(b)}function Ae(b){if(b==null)return 0;if(gc(b))return Om(b)?Xc(b):b.length;var T=Ja(b);return T==wt||T==wn?b.size:a(b).length}function ve(b,T,V){var Ce=vo(b)?Hc:tn;return V&&S(b,T,V)&&(T=t),Ce(b,Si(T,3))}var tt=vt(function(b,T){if(b==null)return[];var V=T.length;return V>1&&S(b,T[0],T[1])?T=[]:V>2&&S(T[0],T[1],T[2])&&(T=[T[0]]),pe(b,Wo(T,1),[])}),Rt=ls||function(){return Er.Date.now()};function Wt(b,T){if(typeof T!="function")throw new Xl(l);return b=Mo(b),function(){if(--b<1)return T.apply(this,arguments)}}function Cn(b,T,V){return T=V?t:T,T=b&&T==null?b.length:T,Qo(b,j,t,t,t,t,T)}function rr(b,T){var V;if(typeof T!="function")throw new Xl(l);return b=Mo(b),function(){return--b>0&&(V=T.apply(this,arguments)),b<=1&&(T=t),V}}var Xn=vt(function(b,T,V){var Ce=W;if(V.length){var Xe=_l(V,fh(Xn));Ce|=H}return Qo(b,Ce,T,V,Xe)}),jn=vt(function(b,T,V){var Ce=W|J;if(V.length){var Xe=_l(V,fh(jn));Ce|=H}return Qo(T,Ce,b,V,Xe)});function Nr(b,T,V){T=V?t:T;var Ce=Qo(b,oe,t,t,t,t,t,T);return Ce.placeholder=Nr.placeholder,Ce}function Jr(b,T,V){T=V?t:T;var Ce=Qo(b,te,t,t,t,t,t,T);return Ce.placeholder=Jr.placeholder,Ce}function li(b,T,V){var Ce,Xe,dt,Kt,$t,on,Wn=0,qn=!1,lr=!1,jr=!0;if(typeof b!="function")throw new Xl(l);T=Qh(T)||0,Il(V)&&(qn=!!V.leading,lr="maxWait"in V,dt=lr?_s(Qh(V.maxWait)||0,T):dt,jr="trailing"in V?!!V.trailing:jr);function Ei(lu){var pp=Ce,Rm=Xe;return Ce=Xe=t,Wn=lu,Kt=b.apply(Rm,pp),Kt}function no(lu){return Wn=lu,$t=ri(bs,T),qn?Ei(lu):Kt}function es(lu){var pp=lu-on,Rm=lu-Wn,c8=T-pp;return lr?Zs(c8,dt-Rm):c8}function ro(lu){var pp=lu-on,Rm=lu-Wn;return on===t||pp>=T||pp<0||lr&&Rm>=dt}function bs(){var lu=Rt();if(ro(lu))return ks(lu);$t=ri(bs,es(lu))}function ks(lu){return $t=t,jr&&Ce?Ei(lu):(Ce=Xe=t,Kt)}function qd(){$t!==t&&nu($t),Wn=0,Ce=on=Xe=$t=t}function $h(){return $t===t?Kt:ks(Rt())}function $d(){var lu=Rt(),pp=ro(lu);if(Ce=arguments,Xe=this,on=lu,pp){if($t===t)return no(on);if(lr)return nu($t),$t=ri(bs,T),Ei(on)}return $t===t&&($t=ri(bs,T)),Kt}return $d.cancel=qd,$d.flush=$h,$d}var Na=vt(function(b,T){return ZA(b,1,T)}),An=vt(function(b,T,V){return ZA(b,Qh(T)||0,V)});function Zt(b){return Qo(b,me)}function dn(b,T){if(typeof b!="function"||T!=null&&typeof T!="function")throw new Xl(l);var V=function(){var Ce=arguments,Xe=T?T.apply(this,Ce):Ce[0],dt=V.cache;if(dt.has(Xe))return dt.get(Xe);var Kt=b.apply(this,Ce);return V.cache=dt.set(Xe,Kt)||dt,Kt};return V.cache=new(dn.Cache||Xs),V}dn.Cache=Xs;function hr(b){if(typeof b!="function")throw new Xl(l);return function(){var T=arguments;switch(T.length){case 0:return!b.call(this);case 1:return!b.call(this,T[0]);case 2:return!b.call(this,T[0],T[1]);case 3:return!b.call(this,T[0],T[1],T[2])}return!b.apply(this,T)}}function ii(b){return rr(2,b)}var Pi=ha(function(b,T){T=T.length==1&&vo(T[0])?so(T[0],Kl(Si())):so(Wo(T,1),Kl(Si()));var V=T.length;return vt(function(Ce){for(var Xe=-1,dt=Zs(Ce.length,V);++Xe<dt;)Ce[Xe]=T[Xe].call(this,Ce[Xe]);return Gs(b,this,Ce)})}),Ii=vt(function(b,T){var V=_l(T,fh(Ii));return Qo(b,H,t,T,V)}),Ni=vt(function(b,T){var V=_l(T,fh(Ni));return Qo(b,re,t,T,V)}),cA=fc(function(b,T){return Qo(b,ue,t,t,t,T)});function us(b,T){if(typeof b!="function")throw new Xl(l);return T=T===t?T:Mo(T),vt(b,T)}function Gd(b,T){if(typeof b!="function")throw new Xl(l);return T=T==null?0:_s(Mo(T),0),vt(function(V){var Ce=V[T],Xe=Js(V,0,T);return Ce&&ec(Xe,Ce),Gs(b,this,Xe)})}function lv(b,T,V){var Ce=!0,Xe=!0;if(typeof b!="function")throw new Xl(l);return Il(V)&&(Ce="leading"in V?!!V.leading:Ce,Xe="trailing"in V?!!V.trailing:Xe),li(b,T,{leading:Ce,maxWait:T,trailing:Xe})}function z3(b){return Cn(b,1)}function Q_(b,T){return Ii(Ws(T),b)}function N3(){if(!arguments.length)return[];var b=arguments[0];return vo(b)?b:[b]}function G3(b){return Sl(b,R)}function j3(b,T){return T=typeof T=="function"?T:t,Sl(b,R,T)}function W3(b){return Sl(b,B|R)}function Q3(b,T){return T=typeof T=="function"?T:t,Sl(b,B|R,T)}function Av(b,T){return T==null||Kh(b,T,ne(T))}function Bu(b,T){return b===T||b!==b&&T!==T}var Y_=yf(La),q_=yf(function(b,T){return b>=T}),Hp=cc(function(){return arguments}())?cc:function(b){return Tl(b)&&Ro.call(b,"callee")&&!Qi.call(b,"callee")},vo=hn.isArray,$_=lo?Kl(lo):Rc;function gc(b){return b!=null&&hg(b.length)&&!Sf(b)}function Ql(b){return Tl(b)&&gc(b)}function ug(b){return b===!0||b===!1||Tl(b)&&Ta(b)==Le}var up=Th||fp,uv=zi?Kl(zi):rA;function V_(b){return Tl(b)&&b.nodeType===1&&!d0(b)}function Wh(b){if(b==null)return!0;if(gc(b)&&(vo(b)||typeof b=="string"||typeof b.splice=="function"||up(b)||p0(b)||Hp(b)))return!b.length;var T=Ja(b);if(T==wt||T==wn)return!b.size;if(Ue(b))return!a(b).length;for(var V in b)if(Ro.call(b,V))return!1;return!0}function h0(b,T){return ka(b,T)}function cg(b,T,V){V=typeof V=="function"?V:t;var Ce=V?V(b,T):t;return Ce===t?ka(b,T,t,V):!!Ce}function cp(b){if(!Tl(b))return!1;var T=Ta(b);return T==Qe||T==ke||typeof b.message=="string"&&typeof b.name=="string"&&!d0(b)}function H_(b){return typeof b=="number"&&ih(b)}function Sf(b){if(!Il(b))return!1;var T=Ta(b);return T==_t||T==gt||T==Tt||T==jt}function cv(b){return typeof b=="number"&&b==Mo(b)}function hg(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=at}function Il(b){var T=typeof b;return b!=null&&(T=="object"||T=="function")}function Tl(b){return b!=null&&typeof b=="object"}var hp=Oi?Kl(Oi):Fc;function Z_(b,T){return b===T||Mu(b,T,No(T))}function X_(b,T,V){return V=typeof V=="function"?V:t,Mu(b,T,No(T),V)}function J_(b){return hv(b)&&b!=+b}function eb(b){if(Re(b))throw new Di(s);return hc(b)}function Y3(b){return b===null}function q3(b){return b==null}function hv(b){return typeof b=="number"||Tl(b)&&Ta(b)==Qt}function d0(b){if(!Tl(b)||Ta(b)!=ln)return!1;var T=zl(b);if(T===null)return!0;var V=Ro.call(T,"constructor")&&T.constructor;return typeof V=="function"&&V instanceof V&&Al.call(V)==YA}var f0=la?Kl(la):ch;function tb(b){return cv(b)&&b>=-at&&b<=at}var dg=Ea?Kl(Ea):TA;function Om(b){return typeof b=="string"||!vo(b)&&Tl(b)&&Ta(b)==Mn}function yc(b){return typeof b=="symbol"||Tl(b)&&Ta(b)==En}var p0=_A?Kl(_A):hh;function $3(b){return b===t}function V3(b){return Tl(b)&&Ja(b)==Hn}function m0(b){return Tl(b)&&Ta(b)==Pn}var Ou=yf(v),dv=yf(function(b,T){return b<=T});function fv(b){if(!b)return[];if(gc(b))return Om(b)?Ll(b):zo(b);if(pu&&b[pu])return vm(b[pu]());var T=Ja(b),V=T==wt?Oc:T==wn?ll:cr;return V(b)}function Ef(b){if(!b)return b===0?b:0;if(b=Qh(b),b===Ct||b===-Ct){var T=b<0?-1:1;return T*Je}return b===b?b:0}function Mo(b){var T=Ef(b),V=T%1;return T===T?V?T-V:T:0}function nb(b){return b?_u(Mo(b),0,Te):0}function Qh(b){if(typeof b=="number")return b;if(yc(b))return ze;if(Il(b)){var T=typeof b.valueOf=="function"?b.valueOf():b;b=Il(T)?T+"":T}if(typeof b!="string")return b===0?b:+b;b=cf(b);var V=os.test(b);return V||qa.test(b)?zn(b.slice(2),V?2:8):oa.test(b)?ze:+b}function pv(b){return ms(b,ae(b))}function H3(b){return b?_u(Mo(b),-at,at):b===0?b:0}function $s(b){return b==null?"":_r(b)}var mv=oA(function(b,T){if(Ue(T)||gc(T)){ms(T,ne(T),b);return}for(var V in T)Ro.call(T,V)&&Ah(b,V,T[V])}),_1=oA(function(b,T){ms(T,ae(T),b)}),fg=oA(function(b,T,V,Ce){ms(T,ae(T),b,Ce)}),pg=oA(function(b,T,V,Ce){ms(T,ne(T),b,Ce)}),gv=fc(uh);function rb(b,T){var V=BA(b);return T==null?V:Is(V,T)}var yv=vt(function(b,T){b=ds(b);var V=-1,Ce=T.length,Xe=Ce>2?T[2]:t;for(Xe&&S(T[0],T[1],Xe)&&(Ce=1);++V<Ce;)for(var dt=T[V],Kt=ae(dt),$t=-1,on=Kt.length;++$t<on;){var Wn=Kt[$t],qn=b[Wn];(qn===t||Bu(qn,Va[Wn])&&!Ro.call(b,Wn))&&(b[Wn]=dt[Wn])}return b}),b1=vt(function(b){return b.push(t,dh),Gs(Ve,t,b)});function mg(b,T){return uf(b,Si(T,3),Dr)}function vv(b,T){return uf(b,Si(T,3),bu)}function Cv(b,T){return b==null?b:uc(b,Si(T,3),ae)}function _v(b,T){return b==null?b:Ir(b,Si(T,3),ae)}function Z3(b,T){return b&&Dr(b,Si(T,3))}function c(b,T){return b&&bu(b,Si(T,3))}function A(b){return b==null?[]:XA(b,ne(b))}function u(b){return b==null?[]:XA(b,ae(b))}function g(b,T,V){var Ce=b==null?t:JA(b,T);return Ce===t?V:Ce}function x(b,T){return b!=null&&Qp(b,T,eu)}function k(b,T){return b!=null&&Qp(b,T,xu)}var P=qu(function(b,T,V){T!=null&&typeof T.toString!="function"&&(T=bl.call(T)),b[T]=V},x1(Gc)),N=qu(function(b,T,V){T!=null&&typeof T.toString!="function"&&(T=bl.call(T)),Ro.call(b,T)?b[T].push(V):b[T]=[V]},Si),q=vt(dl);function ne(b){return gc(b)?Ml(b):a(b)}function ae(b){return gc(b)?Ml(b,!0):d(b)}function ye(b,T){var V={};return T=Si(T,3),Dr(b,function(Ce,Xe,dt){Cu(V,T(Ce,Xe,dt),Ce)}),V}function Ke(b,T){var V={};return T=Si(T,3),Dr(b,function(Ce,Xe,dt){Cu(V,Xe,T(Ce,Xe,dt))}),V}var je=oA(function(b,T,V){Y(b,T,V)}),Ve=oA(function(b,T,V,Ce){Y(b,T,V,Ce)}),et=fc(function(b,T){var V={};if(b==null)return V;var Ce=!1;T=so(T,function(dt){return dt=ws(dt,b),Ce||(Ce=dt.length>1),dt}),ms(b,vf(b),V),Ce&&(V=Sl(V,B|D|R,Fd));for(var Xe=T.length;Xe--;)xo(V,T[Xe]);return V});function ut(b,T){return Vt(b,hr(Si(T)))}var Mt=fc(function(b,T){return b==null?{}:Se(b,T)});function Vt(b,T){if(b==null)return{};var V=so(vf(b),function(Ce){return[Ce]});return T=Si(T),Me(b,V,function(Ce,Xe){return T(Ce,Xe[0])})}function Pt(b,T,V){T=ws(T,b);var Ce=-1,Xe=T.length;for(Xe||(Xe=1,b=t);++Ce<Xe;){var dt=b==null?t:b[qs(T[Ce])];dt===t&&(Ce=Xe,dt=V),b=Sf(dt)?dt.call(b):dt}return b}function Ut(b,T,V){return b==null?b:Lt(b,T,V)}function an(b,T,V,Ce){return Ce=typeof Ce=="function"?Ce:t,b==null?b:Lt(b,T,V,Ce)}var vn=Xf(ne),Rn=Xf(ae);function yr(b,T,V){var Ce=vo(b),Xe=Ce||up(b)||p0(b);if(T=Si(T,4),V==null){var dt=b&&b.constructor;Xe?V=Ce?new dt:[]:Il(b)?V=Sf(dt)?BA(zl(b)):{}:V={}}return(Xe?Vo:Dr)(b,function(Kt,$t,on){return T(V,Kt,$t,on)}),V}function ur(b,T){return b==null?!0:xo(b,T)}function pr(b,T,V){return b==null?b:Zo(b,T,Ws(V))}function oi(b,T,V,Ce){return Ce=typeof Ce=="function"?Ce:t,b==null?b:Zo(b,T,Ws(V),Ce)}function cr(b){return b==null?[]:Od(b,ne(b))}function mr(b){return b==null?[]:Od(b,ae(b))}function Bn(b,T,V){return V===t&&(V=T,T=t),V!==t&&(V=Qh(V),V=V===V?V:0),T!==t&&(T=Qh(T),T=T===T?T:0),_u(Qh(b),T,V)}function Ti(b,T,V){return T=Ef(T),V===t?(V=T,T=0):V=Ef(V),b=Qh(b),Oo(b,T,V)}function Fi(b,T,V){if(V&&typeof V!="boolean"&&S(b,T,V)&&(T=V=t),V===t&&(typeof T=="boolean"?(V=T,T=t):typeof b=="boolean"&&(V=b,b=t)),b===t&&T===t?(b=0,T=1):(b=Ef(b),T===t?(T=b,b=0):T=Ef(T)),b>T){var Ce=b;b=T,T=Ce}if(V||b%1||T%1){var Xe=gu();return Zs(b+Xe*(T-b+wr("1e-"+((Xe+"").length-1))),T)}return lt(b,T)}var pi=Xa(function(b,T,V){return T=T.toLowerCase(),b+(V?Yr(T):T)});function Yr(b){return Zp($s(b).toLowerCase())}function To(b){return b=$s(b),b&&b.replace(jo,hf).replace(Sc,"")}function nl(b,T,V){b=$s(b),T=_r(T);var Ce=b.length;V=V===t?Ce:_u(Mo(V),0,Ce);var Xe=V;return V-=T.length,V>=0&&b.slice(V,Xe)==T}function hA(b){return b=$s(b),b&&Tn.test(b)?b.replace(nt,fu):b}function Iu(b){return b=$s(b),b&&or.test(b)?b.replace(br,"\\$&"):b}var Yh=Xa(function(b,T,V){return b+(V?"-":"")+T.toLowerCase()}),zc=Xa(function(b,T,V){return b+(V?" ":"")+T.toLowerCase()}),ou=gf("toLowerCase");function Ga(b,T,V){b=$s(b),T=Mo(T);var Ce=T?Xc(b):0;if(!T||Ce>=T)return b;var Xe=(T-Ce)/2;return Dd(wA(Xe),V)+b+Dd(ic(Xe),V)}function DA(b,T,V){b=$s(b),T=Mo(T);var Ce=T?Xc(b):0;return T&&Ce<T?b+Dd(T-Ce,V):b}function su(b,T,V){b=$s(b),T=Mo(T);var Ce=T?Xc(b):0;return T&&Ce<T?Dd(T-Ce,V)+b:b}function au(b,T,V){return V||T==null?T=0:T&&(T=+T),Ph($s(b).replace(ti,""),T||0)}function vc(b,T,V){return(V?S(b,T,V):T===t)?T=1:T=Mo(T),bt($s(b),T)}function qh(){var b=arguments,T=$s(b[0]);return b.length<3?T:T.replace(b[1],b[2])}var FA=Xa(function(b,T,V){return b+(V?"_":"")+T.toLowerCase()});function Nc(b,T,V){return V&&typeof V!="number"&&S(b,T,V)&&(T=V=t),V=V===t?Te:V>>>0,V?(b=$s(b),b&&(typeof T=="string"||T!=null&&!f0(T))&&(T=_r(T),!T&&Zc(b))?Js(Ll(b),0,V):b.split(T,V)):[]}var dA=Xa(function(b,T,V){return b+(V?" ":"")+Zp(T)});function KA(b,T,V){return b=$s(b),V=V==null?0:_u(Mo(V),0,b.length),T=_r(T),b.slice(V,V+T.length)==T}function LA(b,T,V){var Ce=ot.templateSettings;V&&S(b,T,V)&&(T=t),b=$s(b),T=fg({},T,Ce,Wp);var Xe=fg({},T.imports,Ce.imports,Wp),dt=ne(Xe),Kt=Od(Xe,dt),$t,on,Wn=0,qn=T.interpolate||Ds,lr="__p += '",jr=nc((T.escape||Ds).source+"|"+qn.source+"|"+(qn===Qn?Kr:Ds).source+"|"+(T.evaluate||Ds).source+"|$","g"),Ei="//# sourceURL="+(Ro.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zr+"]")+`
`;b.replace(jr,function(ro,bs,ks,qd,$h,$d){return ks||(ks=qd),lr+=b.slice(Wn,$d).replace(yl,MA),bs&&($t=!0,lr+=`' +
__e(`+bs+`) +
'`),$h&&(on=!0,lr+=`';
`+$h+`;
__p += '`),ks&&(lr+=`' +
((__t = (`+ks+`)) == null ? '' : __t) +
'`),Wn=$d+ro.length,ro}),lr+=`';
`;var no=Ro.call(T,"variable")&&T.variable;if(!no)lr=`with (obj) {
`+lr+`
}
`;else if(Zn.test(no))throw new Di(o);lr=(on?lr.replace(m,""):lr).replace(mt,"$1").replace(At,"$1;"),lr="function("+(no||"obj")+`) {
`+(no?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($t?", __e = _.escape":"")+(on?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+lr+`return __p
}`;var es=km(function(){return Po(dt,Ei+"return "+lr).apply(t,Kt)});if(es.source=lr,cp(es))throw es;return es}function Yl(b){return $s(b).toLowerCase()}function Ma(b){return $s(b).toUpperCase()}function jd(b,T,V){if(b=$s(b),b&&(V||T===t))return cf(b);if(!b||!(T=_r(T)))return b;var Ce=Ll(b),Xe=Ll(T),dt=du(Ce,Xe),Kt=Eh(Ce,Xe)+1;return Js(Ce,dt,Kt).join("")}function g0(b,T,V){if(b=$s(b),b&&(V||T===t))return b.slice(0,QA(b)+1);if(!b||!(T=_r(T)))return b;var Ce=Ll(b),Xe=Eh(Ce,Ll(T))+1;return Js(Ce,0,Xe).join("")}function Wd(b,T,V){if(b=$s(b),b&&(V||T===t))return b.replace(ti,"");if(!b||!(T=_r(T)))return b;var Ce=Ll(b),Xe=du(Ce,Ll(T));return Js(Ce,Xe).join("")}function X3(b,T){var V=ge,Ce=we;if(Il(T)){var Xe="separator"in T?T.separator:Xe;V="length"in T?Mo(T.length):V,Ce="omission"in T?_r(T.omission):Ce}b=$s(b);var dt=b.length;if(Zc(b)){var Kt=Ll(b);dt=Kt.length}if(V>=dt)return b;var $t=V-Xc(Ce);if($t<1)return Ce;var on=Kt?Js(Kt,0,$t).join(""):b.slice(0,$t);if(Xe===t)return on+Ce;if(Kt&&($t+=on.length-$t),f0(Xe)){if(b.slice($t).search(Xe)){var Wn,qn=on;for(Xe.global||(Xe=nc(Xe.source,$s(ki.exec(Xe))+"g")),Xe.lastIndex=0;Wn=Xe.exec(qn);)var lr=Wn.index;on=on.slice(0,lr===t?$t:lr)}}else if(b.indexOf(_r(Xe),$t)!=$t){var jr=on.lastIndexOf(Xe);jr>-1&&(on=on.slice(0,jr))}return on+Ce}function y0(b){return b=$s(b),b&&en.test(b)?b.replace(It,Bo):b}var Im=Xa(function(b,T,V){return b+(V?" ":"")+T.toUpperCase()}),Zp=gf("toUpperCase");function Tm(b,T,V){return b=$s(b),T=V?t:T,T===t?ad(b)?Vf(b):Af(b):b.match(T)||[]}var km=vt(function(b,T){try{return Gs(b,t,T)}catch(V){return cp(V)?V:new Di(V)}}),ib=fc(function(b,T){return Vo(T,function(V){V=qs(V),Cu(b,V,Xn(b[V],b))}),b});function ob(b){var T=b==null?0:b.length,V=Si();return b=T?so(b,function(Ce){if(typeof Ce[1]!="function")throw new Xl(l);return[V(Ce[0]),Ce[1]]}):[],vt(function(Ce){for(var Xe=-1;++Xe<T;){var dt=b[Xe];if(Gs(dt[0],this,Ce))return Gs(dt[1],this,Ce)}})}function sb(b){return Hf(Sl(b,B))}function x1(b){return function(){return b}}function bv(b,T){return b==null||b!==b?T:b}var xv=Nh(),dp=Nh(!0);function Gc(b){return b}function M1(b){return O(typeof b=="function"?b:Sl(b,B))}function J3(b){return I(Sl(b,B))}function e4(b,T){return z(b,Sl(T,B))}var t4=vt(function(b,T){return function(V){return dl(V,b,T)}}),n4=vt(function(b,T){return function(V){return dl(b,V,T)}});function Mv(b,T,V){var Ce=ne(T),Xe=XA(T,Ce);V==null&&!(Il(T)&&(Xe.length||!Ce.length))&&(V=T,T=b,b=this,Xe=XA(T,ne(T)));var dt=!(Il(V)&&"chain"in V)||!!V.chain,Kt=Sf(b);return Vo(Xe,function($t){var on=T[$t];b[$t]=on,Kt&&(b.prototype[$t]=function(){var Wn=this.__chain__;if(dt||Wn){var qn=b(this.__wrapped__),lr=qn.__actions__=zo(this.__actions__);return lr.push({func:on,args:arguments,thisArg:b}),qn.__chain__=Wn,qn}return on.apply(b,ec([this.value()],arguments))})}),b}function r4(){return Er._===this&&(Er._=Ha),this}function wv(){}function i4(b){return b=Mo(b),vt(function(T){return ce(T,b)})}var Qd=Zf(so),w1=Zf(jA),ab=Zf(Hc);function lb(b){return F(b)?od(qs(b)):Fe(b)}function o4(b){return function(T){return b==null?t:JA(b,T)}}var s4=fd(),$u=fd(!0);function jc(){return[]}function fp(){return!1}function Yd(){return{}}function Pm(){return""}function Bf(){return!0}function Uj(b,T){if(b=Mo(b),b<1||b>at)return[];var V=Te,Ce=Zs(b,Te);T=Si(T),b-=Te;for(var Xe=Yf(Ce,T);++V<b;)T(V);return Xe}function zj(b){return vo(b)?so(b,qs):yc(b)?[b]:zo(Ys($s(b)))}function Nj(b){var T=++eh;return $s(b)+T}var Gj=dd(function(b,T){return b+T},0),jj=Bl("ceil"),Wj=dd(function(b,T){return b/T},1),Qj=Bl("floor");function Yj(b){return b&&b.length?kc(b,Gc,La):t}function qj(b,T){return b&&b.length?kc(b,Si(T,2),La):t}function $j(b){return id(b,Gc)}function Vj(b,T){return id(b,Si(T,2))}function Hj(b){return b&&b.length?kc(b,Gc,v):t}function Zj(b,T){return b&&b.length?kc(b,Si(T,2),v):t}var Xj=dd(function(b,T){return b*T},1),Jj=Bl("round"),eW=dd(function(b,T){return b-T},0);function tW(b){return b&&b.length?wh(b,Gc):0}function nW(b,T){return b&&b.length?wh(b,Si(T,2)):0}return ot.after=Wt,ot.ary=Cn,ot.assign=mv,ot.assignIn=_1,ot.assignInWith=fg,ot.assignWith=pg,ot.at=gv,ot.before=rr,ot.bind=Xn,ot.bindAll=ib,ot.bindKey=jn,ot.castArray=N3,ot.chain=qp,ot.chunk=za,ot.compact=na,ot.concat=Jo,ot.cond=ob,ot.conforms=sb,ot.constant=x1,ot.countBy=p1,ot.create=rb,ot.curry=Nr,ot.curryRight=Jr,ot.debounce=li,ot.defaults=yv,ot.defaultsDeep=b1,ot.defer=Na,ot.delay=An,ot.difference=hi,ot.differenceBy=Yo,ot.differenceWith=Ss,ot.drop=Ks,ot.dropRight=Ts,ot.dropRightWhile=RA,ot.dropWhile=ao,ot.fill=Ud,ot.filter=u0,ot.flatMap=Sm,ot.flatMapDeep=g1,ot.flatMapDepth=Nd,ot.flatten=pc,ot.flattenDeep=el,ot.flattenDepth=ml,ot.flip=Zt,ot.flow=xv,ot.flowRight=dp,ot.fromPairs=np,ot.functions=A,ot.functionsIn=u,ot.groupBy=Vp,ot.initial=t0,ot.intersection=eg,ot.intersectionBy=Lc,ot.intersectionWith=n0,ot.invert=P,ot.invertBy=N,ot.invokeMap=y1,ot.iteratee=M1,ot.keyBy=av,ot.keys=ne,ot.keysIn=ae,ot.map=wf,ot.mapKeys=ye,ot.mapValues=Ke,ot.matches=J3,ot.matchesProperty=e4,ot.memoize=dn,ot.merge=je,ot.mergeWith=Ve,ot.method=t4,ot.methodOf=n4,ot.mixin=Mv,ot.negate=hr,ot.nthArg=i4,ot.omit=et,ot.omitBy=ut,ot.once=ii,ot.orderBy=v1,ot.over=Qd,ot.overArgs=Pi,ot.overEvery=w1,ot.overSome=ab,ot.partial=Ii,ot.partialRight=Ni,ot.partition=Em,ot.pick=Mt,ot.pickBy=Vt,ot.property=lb,ot.propertyOf=o4,ot.pull=i0,ot.pullAll=ip,ot.pullAllBy=uA,ot.pullAllWith=md,ot.pullAt=jh,ot.range=s4,ot.rangeRight=$u,ot.rearg=cA,ot.reject=p,ot.remove=mc,ot.rest=us,ot.reverse=_m,ot.sampleSize=K,ot.set=Ut,ot.setWith=an,ot.shuffle=Q,ot.slice=o0,ot.sortBy=tt,ot.sortedUniq=ig,ot.sortedUniqBy=sp,ot.split=Nc,ot.spread=Gd,ot.tail=a1,ot.take=og,ot.takeRight=bm,ot.takeRightWhile=xm,ot.takeWhile=l1,ot.tap=$p,ot.throttle=lv,ot.thru=gh,ot.toArray=fv,ot.toPairs=vn,ot.toPairsIn=Rn,ot.toPath=zj,ot.toPlainObject=pv,ot.transform=yr,ot.unary=z3,ot.union=A1,ot.unionBy=u1,ot.unionWith=Mm,ot.uniq=ap,ot.uniqBy=c1,ot.uniqWith=Yp,ot.unset=ur,ot.unzip=s0,ot.unzipWith=tl,ot.update=pr,ot.updateWith=oi,ot.values=cr,ot.valuesIn=mr,ot.without=h1,ot.words=Tm,ot.wrap=Q_,ot.xor=d1,ot.xorBy=iv,ot.xorWith=wm,ot.zip=Ol,ot.zipObject=a0,ot.zipObjectDeep=f1,ot.zipWith=Uc,ot.entries=vn,ot.entriesIn=Rn,ot.extend=_1,ot.extendWith=fg,Mv(ot,ot),ot.add=Gj,ot.attempt=km,ot.camelCase=pi,ot.capitalize=Yr,ot.ceil=jj,ot.clamp=Bn,ot.clone=G3,ot.cloneDeep=W3,ot.cloneDeepWith=Q3,ot.cloneWith=j3,ot.conformsTo=Av,ot.deburr=To,ot.defaultTo=bv,ot.divide=Wj,ot.endsWith=nl,ot.eq=Bu,ot.escape=hA,ot.escapeRegExp=Iu,ot.every=m1,ot.find=c0,ot.findIndex=AA,ot.findKey=mg,ot.findLast=Ag,ot.findLastIndex=iu,ot.findLastKey=vv,ot.floor=Qj,ot.forEach=Mf,ot.forEachRight=gd,ot.forIn=Cv,ot.forInRight=_v,ot.forOwn=Z3,ot.forOwnRight=c,ot.get=g,ot.gt=Y_,ot.gte=q_,ot.has=x,ot.hasIn=k,ot.head=rp,ot.identity=Gc,ot.includes=Ap,ot.indexOf=zd,ot.inRange=Ti,ot.invoke=q,ot.isArguments=Hp,ot.isArray=vo,ot.isArrayBuffer=$_,ot.isArrayLike=gc,ot.isArrayLikeObject=Ql,ot.isBoolean=ug,ot.isBuffer=up,ot.isDate=uv,ot.isElement=V_,ot.isEmpty=Wh,ot.isEqual=h0,ot.isEqualWith=cg,ot.isError=cp,ot.isFinite=H_,ot.isFunction=Sf,ot.isInteger=cv,ot.isLength=hg,ot.isMap=hp,ot.isMatch=Z_,ot.isMatchWith=X_,ot.isNaN=J_,ot.isNative=eb,ot.isNil=q3,ot.isNull=Y3,ot.isNumber=hv,ot.isObject=Il,ot.isObjectLike=Tl,ot.isPlainObject=d0,ot.isRegExp=f0,ot.isSafeInteger=tb,ot.isSet=dg,ot.isString=Om,ot.isSymbol=yc,ot.isTypedArray=p0,ot.isUndefined=$3,ot.isWeakMap=V3,ot.isWeakSet=m0,ot.join=xf,ot.kebabCase=Yh,ot.last=Eu,ot.lastIndexOf=Cm,ot.lowerCase=zc,ot.lowerFirst=ou,ot.lt=Ou,ot.lte=dv,ot.max=Yj,ot.maxBy=qj,ot.mean=$j,ot.meanBy=Vj,ot.min=Hj,ot.minBy=Zj,ot.stubArray=jc,ot.stubFalse=fp,ot.stubObject=Yd,ot.stubString=Pm,ot.stubTrue=Bf,ot.multiply=Xj,ot.nth=r0,ot.noConflict=r4,ot.noop=wv,ot.now=Rt,ot.pad=Ga,ot.padEnd=DA,ot.padStart=su,ot.parseInt=au,ot.random=Fi,ot.reduce=C1,ot.reduceRight=Bm,ot.repeat=vc,ot.replace=qh,ot.result=Pt,ot.round=Jj,ot.runInContext=Xt,ot.sample=_,ot.size=Ae,ot.snakeCase=FA,ot.some=ve,ot.sortedIndex=tg,ot.sortedIndexBy=rv,ot.sortedIndexOf=mh,ot.sortedLastIndex=ng,ot.sortedLastIndexBy=rg,ot.sortedLastIndexOf=op,ot.startCase=dA,ot.startsWith=KA,ot.subtract=eW,ot.sum=tW,ot.sumBy=nW,ot.template=LA,ot.times=Uj,ot.toFinite=Ef,ot.toInteger=Mo,ot.toLength=nb,ot.toLower=Yl,ot.toNumber=Qh,ot.toSafeInteger=H3,ot.toString=$s,ot.toUpper=Ma,ot.trim=jd,ot.trimEnd=g0,ot.trimStart=Wd,ot.truncate=X3,ot.unescape=y0,ot.uniqueId=Nj,ot.upperCase=Im,ot.upperFirst=Zp,ot.each=Mf,ot.eachRight=gd,ot.first=rp,Mv(ot,function(){var b={};return Dr(ot,function(T,V){Ro.call(ot.prototype,V)||(b[V]=T)}),b}(),{chain:!1}),ot.VERSION=r,Vo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){ot[b].placeholder=ot}),Vo(["drop","take"],function(b,T){fi.prototype[b]=function(V){V=V===t?1:_s(Mo(V),0);var Ce=this.__filtered__&&!T?new fi(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=Zs(V,Ce.__takeCount__):Ce.__views__.push({size:Zs(V,Te),type:b+(Ce.__dir__<0?"Right":"")}),Ce},fi.prototype[b+"Right"]=function(V){return this.reverse()[b](V).reverse()}}),Vo(["filter","map","takeWhile"],function(b,T){var V=T+1,Ce=V==We||V==rt;fi.prototype[b]=function(Xe){var dt=this.clone();return dt.__iteratees__.push({iteratee:Si(Xe,3),type:V}),dt.__filtered__=dt.__filtered__||Ce,dt}}),Vo(["head","last"],function(b,T){var V="take"+(T?"Right":"");fi.prototype[b]=function(){return this[V](1).value()[0]}}),Vo(["initial","tail"],function(b,T){var V="drop"+(T?"":"Right");fi.prototype[b]=function(){return this.__filtered__?new fi(this):this[V](1)}}),fi.prototype.compact=function(){return this.filter(Gc)},fi.prototype.find=function(b){return this.filter(b).head()},fi.prototype.findLast=function(b){return this.reverse().find(b)},fi.prototype.invokeMap=vt(function(b,T){return typeof b=="function"?new fi(this):this.map(function(V){return dl(V,b,T)})}),fi.prototype.reject=function(b){return this.filter(hr(Si(b)))},fi.prototype.slice=function(b,T){b=Mo(b);var V=this;return V.__filtered__&&(b>0||T<0)?new fi(V):(b<0?V=V.takeRight(-b):b&&(V=V.drop(b)),T!==t&&(T=Mo(T),V=T<0?V.dropRight(-T):V.take(T-b)),V)},fi.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},fi.prototype.toArray=function(){return this.take(Te)},Dr(fi.prototype,function(b,T){var V=/^(?:filter|find|map|reject)|While$/.test(T),Ce=/^(?:head|last)$/.test(T),Xe=ot[Ce?"take"+(T=="last"?"Right":""):T],dt=Ce||/^find/.test(T);Xe&&(ot.prototype[T]=function(){var Kt=this.__wrapped__,$t=Ce?[1]:arguments,on=Kt instanceof fi,Wn=$t[0],qn=on||vo(Kt),lr=function(bs){var ks=Xe.apply(ot,ec([bs],$t));return Ce&&jr?ks[0]:ks};qn&&V&&typeof Wn=="function"&&Wn.length!=1&&(on=qn=!1);var jr=this.__chain__,Ei=!!this.__actions__.length,no=dt&&!jr,es=on&&!Ei;if(!dt&&qn){Kt=es?Kt:new fi(this);var ro=b.apply(Kt,$t);return ro.__actions__.push({func:gh,args:[lr],thisArg:t}),new Do(ro,jr)}return no&&es?b.apply(this,$t):(ro=this.thru(lr),no?Ce?ro.value()[0]:ro.value():ro)})}),Vo(["pop","push","shift","sort","splice","unshift"],function(b){var T=Fu[b],V=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(b);ot.prototype[b]=function(){var Xe=arguments;if(Ce&&!this.__chain__){var dt=this.value();return T.apply(vo(dt)?dt:[],Xe)}return this[V](function(Kt){return T.apply(vo(Kt)?Kt:[],Xe)})}}),Dr(fi.prototype,function(b,T){var V=ot[T];if(V){var Ce=V.name+"";Ro.call(Dh,Ce)||(Dh[Ce]=[]),Dh[Ce].push({name:T,func:V})}}),Dh[ru(t,J).name]=[{name:"wrapper",func:t}],fi.prototype.clone=ua,fi.prototype.reverse=oh,fi.prototype.value=Fh,ot.prototype.at=l0,ot.prototype.chain=lp,ot.prototype.commit=A0,ot.prototype.next=sg,ot.prototype.plant=ov,ot.prototype.reverse=lg,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=sv,ot.prototype.first=ot.prototype.head,pu&&(ot.prototype[pu]=ag),ot},Zl=Td();Hi?((Hi.exports=Zl)._=Zl,Xr._=Zl):Er._=Zl}).call(jQ)}(Gv,Gv.exports)),Gv.exports}var f_=WQ();const p6=yA(f_);function QQ(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var v4,e7;function YQ(){if(e7)return v4;e7=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return v4=n,v4}var qQ=YQ();const t7=yA(qQ);var Xd=Uint8Array,cy=Uint16Array,$Q=Int32Array,rL=new Xd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iL=new Xd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),VQ=new Xd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oL=function(n,e){for(var t=new cy(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new $Q(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},sL=oL(rL,2),aL=sL.b,HQ=sL.r;aL[28]=258,HQ[258]=28;var ZQ=oL(iL,0),XQ=ZQ.b,m6=new cy(32768);for(var Dl=0;Dl<32768;++Dl){var v0=(Dl&43690)>>1|(Dl&21845)<<1;v0=(v0&52428)>>2|(v0&13107)<<2,v0=(v0&61680)>>4|(v0&3855)<<4,m6[Dl]=((v0&65280)>>8|(v0&255)<<8)>>1}var aC=function(n,e,t){for(var r=n.length,i=0,s=new cy(e);i<r;++i)n[i]&&++s[n[i]-1];var l=new cy(e);for(i=1;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var o;if(t){o=new cy(1<<e);var f=15-e;for(i=0;i<r;++i)if(n[i])for(var C=i<<4|n[i],M=e-n[i],B=l[n[i]-1]++<<M,D=B|(1<<M)-1;B<=D;++B)o[m6[B]>>f]=C}else for(o=new cy(r),i=0;i<r;++i)n[i]&&(o[i]=m6[l[n[i]-1]++]>>15-n[i]);return o},p_=new Xd(288);for(var Dl=0;Dl<144;++Dl)p_[Dl]=8;for(var Dl=144;Dl<256;++Dl)p_[Dl]=9;for(var Dl=256;Dl<280;++Dl)p_[Dl]=7;for(var Dl=280;Dl<288;++Dl)p_[Dl]=8;var lL=new Xd(32);for(var Dl=0;Dl<32;++Dl)lL[Dl]=5;var JQ=aC(p_,9,1),eY=aC(lL,5,1),C4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},mp=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},_4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},tY=function(n){return(n+7)/8|0},nY=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Xd(n.subarray(e,t))},rY=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vd=function(n,e,t){var r=new Error(e||rY[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Vd),!t)throw r;return r},RB=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Xd(0);var l=!t,o=l||e.i!=2,f=e.i;l&&(t=new Xd(i*3));var C=function(Qe){var _t=t.length;if(Qe>_t){var gt=new Xd(Math.max(_t*2,Qe));gt.set(t),t=gt}},M=e.f||0,B=e.p||0,D=e.b||0,R=e.l,U=e.d,G=e.m,W=e.n,J=i*8;do{if(!R){M=mp(n,B,1);var $=mp(n,B+1,3);if(B+=3,$)if($==1)R=JQ,U=eY,G=9,W=5;else if($==2){var re=mp(n,B,31)+257,j=mp(n,B+10,15)+4,ue=re+mp(n,B+5,31)+1;B+=14;for(var me=new Xd(ue),ge=new Xd(19),we=0;we<j;++we)ge[VQ[we]]=mp(n,B+we*3,7);B+=j*3;for(var Ee=C4(ge),xe=(1<<Ee)-1,We=aC(ge,Ee,1),we=0;we<ue;){var be=We[mp(n,B,xe)];B+=be&15;var oe=be>>4;if(oe<16)me[we++]=oe;else{var rt=0,Ct=0;for(oe==16?(Ct=3+mp(n,B,3),B+=2,rt=me[we-1]):oe==17?(Ct=3+mp(n,B,7),B+=3):oe==18&&(Ct=11+mp(n,B,127),B+=7);Ct--;)me[we++]=rt}}var at=me.subarray(0,re),Je=me.subarray(re);G=C4(at),W=C4(Je),R=aC(at,G,1),U=aC(Je,W,1)}else Vd(1);else{var oe=tY(B)+4,te=n[oe-4]|n[oe-3]<<8,H=oe+te;if(H>i){f&&Vd(0);break}o&&C(D+te),t.set(n.subarray(oe,H),D),e.b=D+=te,e.p=B=H*8,e.f=M;continue}if(B>J){f&&Vd(0);break}}o&&C(D+131072);for(var ze=(1<<G)-1,Te=(1<<W)-1,He=B;;He=B){var rt=R[_4(n,B)&ze],pt=rt>>4;if(B+=rt&15,B>J){f&&Vd(0);break}if(rt||Vd(2),pt<256)t[D++]=pt;else if(pt==256){He=B,R=null;break}else{var kt=pt-254;if(pt>264){var we=pt-257,ft=rL[we];kt=mp(n,B,(1<<ft)-1)+aL[we],B+=ft}var Bt=U[_4(n,B)&Te],Tt=Bt>>4;Bt||Vd(3),B+=Bt&15;var Je=XQ[Tt];if(Tt>3){var ft=iL[Tt];Je+=_4(n,B)&(1<<ft)-1,B+=ft}if(B>J){f&&Vd(0);break}o&&C(D+131072);var Le=D+kt;if(D<Je){var Pe=s-Je,ke=Math.min(Je,Le);for(Pe+D<0&&Vd(3);D<ke;++D)t[D]=r[Pe+D]}for(;D<Le;++D)t[D]=t[D-Je]}}e.l=R,e.p=He,e.b=D,e.f=M,R&&(M=1,e.m=G,e.d=U,e.n=W)}while(!M);return D!=t.length&&l?nY(t,0,D):t.subarray(0,D)},iY=new Xd(0),oY=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Vd(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},sY=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},aY=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Vd(6,"invalid zlib data"),(n[1]>>5&1)==1&&Vd(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function lY(n,e){return RB(n,{i:2},e,e)}function AY(n,e){var t=oY(n);return t+8>n.length&&Vd(6,"invalid gzip data"),RB(n.subarray(t,-8),{i:2},new Xd(sY(n)),e)}function uY(n,e){return RB(n.subarray(aY(n),-4),{i:2},e,e)}function cY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?AY(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?lY(n,e):uY(n,e)}var hY=typeof TextDecoder<"u"&&new TextDecoder,dY=0;try{hY.decode(iY,{stream:!0}),dY=1}catch{}var fY=Object.defineProperty,lC=Math.pow,Wa=(n,e)=>fY(n,"name",{value:e,configurable:!0}),xc=(n,e,t)=>new Promise((r,i)=>{var s=f=>{try{o(t.next(f))}catch(C){i(C)}},l=f=>{try{o(t.throw(f))}catch(C){i(C)}},o=f=>f.done?r(f.value):Promise.resolve(f.value).then(s,l);o((t=t.apply(n,e)).next())});Wa((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Wa((s,l)=>{let o=document.createElement("img"),f=new AbortController,C=f.signal;return o.cancel=()=>{f.abort()},t||(n.getHeader().then(M=>{M.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):M.tileType===2?r="image/png":M.tileType===3?r="image/jpeg":M.tileType===4?r="image/webp":M.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,C).then(M=>{if(M){let B=new Blob([M.data],{type:r}),D=window.URL.createObjectURL(B);o.src=D,o.cancel=void 0,l(void 0,o)}}).catch(M=>{if(M.name!=="AbortError")throw M}),o},"createTile"),_removeTile:Wa(function(s){let l=this._tiles[s];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var pY=Wa(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Wa(()=>r.abort(),"cancel")}},"v3compat"),AL=class{constructor(e){this.tilev4=Wa((t,r)=>xc(this,null,function*(){if(t.type==="json"){let R=t.url.substr(10),U=this.tiles.get(R);if(U||(U=new y6(R),this.tiles.set(R,U)),this.metadata)return{data:yield U.getTileJson(t.url)};let G=yield U.getHeader();return(G.minLon>=G.maxLon||G.minLat>=G.maxLat)&&console.error(`Bounds of PMTiles archive ${G.minLon},${G.minLat},${G.maxLon},${G.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:G.minZoom,maxzoom:G.maxZoom,bounds:[G.minLon,G.minLat,G.maxLon,G.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let l=s[1],o=this.tiles.get(l);o||(o=new y6(l),this.tiles.set(l,o));let f=s[2],C=s[3],M=s[4],B=yield o.getHeader(),D=yield o?.getZxy(+f,+C,+M,r.signal);if(D)return{data:new Uint8Array(D.data),cacheControl:D.cacheControl,expires:D.expires};if(B.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=pY(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Wa(AL,"Protocol");var mY=AL;function uL(n,e){return(e>>>0)*4294967296+(n>>>0)}Wa(uL,"toNum");function cL(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return uL(n,i);throw new Error("Expected varint not more than 10 bytes")}Wa(cL,"readVarintRemainder");function ny(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,cL(r,n))}Wa(ny,"readVarint");function DB(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}Wa(DB,"rotate");function hL(n,e){let t=lC(2,n),r=e,i=e,s=e,l=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),DB(o,l,r,i),l[0]+=o*r,l[1]+=o*i,s=s/4,o*=2;return[n,l[0],l[1]]}Wa(hL,"idOnLevel");var gY=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function dL(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>lC(2,n)-1||t>lC(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=gY[n],i=lC(2,n),s=0,l=0,o=0,f=[e,t],C=i/2;for(;C>0;)s=(f[0]&C)>0?1:0,l=(f[1]&C)>0?1:0,o+=C*C*(3*s^l),DB(C,f,s,l),C=C/2;return r+o}Wa(dL,"zxyToTileId");function yY(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return hL(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Wa(yY,"tileIdToZxy");var vY=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(vY||{});function gx(n,e){return xc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return cY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Wa(gx,"defaultDecompress");var CY=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(CY||{});function fL(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Wa(fL,"tileTypeExt");var _Y=127;function pL(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Wa(pL,"findTile");var bY=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return xc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Wa(bY,"FileSource");var mL=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return xc(this,null,function*(){let s,l;r?l=r:(s=new AbortController,l=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let f;this.mustReload?f="reload":this.chromeWindowsNoCache&&(f="no-store");let C=yield fetch(this.url,{signal:l,cache:f,headers:o});if(e===0&&C.status===416){let D=C.headers.get("Content-Range");if(!D||!D.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let R=+D.substr(8);C=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${R-1}`}})}let M=C.headers.get("Etag");if(M!=null&&M.startsWith("W/")&&(M=null),C.status===416||i&&M&&M!==i)throw this.mustReload=!0,new g6(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(C.status>=300)throw new Error(`Bad response code: ${C.status}`);let B=C.headers.get("Content-Length");if(C.status===200&&(!B||+B>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield C.arrayBuffer(),etag:M||void 0,cacheControl:C.headers.get("Cache-Control")||void 0,expires:C.headers.get("Expires")||void 0}})}};Wa(mL,"FetchSource");var xY=mL;function If(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*lC(2,32)+r}Wa(If,"getUint64");function gL(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:If(t,8),rootDirectoryLength:If(t,16),jsonMetadataOffset:If(t,24),jsonMetadataLength:If(t,32),leafDirectoryOffset:If(t,40),leafDirectoryLength:If(t,48),tileDataOffset:If(t,56),tileDataLength:If(t,64),numAddressedTiles:If(t,72),numTileEntries:If(t,80),numTileContents:If(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Wa(gL,"bytesToHeader");function FB(n){let e={buf:new Uint8Array(n),pos:0},t=ny(e),r=[],i=0;for(let s=0;s<t;s++){let l=ny(e);r.push({tileId:i+l,offset:0,length:0,runLength:1}),i+=l}for(let s=0;s<t;s++)r[s].runLength=ny(e);for(let s=0;s<t;s++)r[s].length=ny(e);for(let s=0;s<t;s++){let l=ny(e);l===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=l-1}return r}Wa(FB,"deserializeIndex");var yL=class extends Error{};Wa(yL,"EtagMismatch");var g6=yL;function KB(n,e){return xc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,_Y),i=gL(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),l=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=FB(yield e(s,i.internalCompression));return[i,[l,o.length,o]]})}Wa(KB,"getHeaderAndRoot");function LB(n,e,t,r,i){return xc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),l=yield e(s.data,i.internalCompression),o=FB(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}Wa(LB,"getDirectory");var MY=class{constructor(e=100,t=!0,r=gx){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return xc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield KB(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return xc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,l.data;let o=yield LB(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return xc(this,null,function*(){this.cache.delete(e.getKey())})}};Wa(MY,"ResolvedValueCache");var vL=class{constructor(e=100,t=!0,r=gx){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return xc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,l)=>{KB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return xc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((f,C)=>{LB(e,this.decompress,t,r,i).then(M=>{f(M),this.prune()}).catch(M=>{C(M)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return xc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(l=>{i(),this.invalidations.delete(t)}).catch(l=>{s(l)})});this.invalidations.set(t,r)})}};Wa(vL,"SharedPromiseCache");var wY=vL,CL=class{constructor(e,t,r){typeof e=="string"?this.source=new xY(e):this.source=e,r?this.decompress=r:this.decompress=gx,t?this.cache=t:this.cache=new wY}getHeader(){return xc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return xc(this,null,function*(){let s=dL(e,t,r),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,f=l.rootDirectoryLength;for(let C=0;C<=3;C++){let M=yield this.cache.getDirectory(this.source,o,f,l),B=pL(M,s);if(B){if(B.runLength>0){let D=yield this.source.getBytes(l.tileDataOffset+B.offset,B.length,i,l.etag);return{data:yield this.decompress(D.data,l.tileCompression),cacheControl:D.cacheControl,expires:D.expires}}o=l.leafDirectoryOffset+B.offset,f=B.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return xc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof g6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return xc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return xc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof g6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return xc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=fL(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Wa(CL,"PMTiles");var y6=CL,SY=8,EY={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},BY={"*":{type:"source"}},OY=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],IY={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},TY={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},kY={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},PY={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},RY={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},DY={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},FY={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},KY=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],LY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},UY={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},zY={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},NY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},GY={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jY={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},WY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},QY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},YY={type:"array",value:"*"},qY={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},$Y={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},VY={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},HY={type:"array",value:"*",minimum:1},ZY={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},XY={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},JY={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},eq={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},tq=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],nq={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},rq={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},iq={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},oq={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},sq={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},aq={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},lq={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Aq={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},uq={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},cq={"*":{type:"string"}},Es={$version:SY,$root:EY,sources:BY,source:OY,source_vector:IY,source_raster:TY,source_raster_dem:kY,source_geojson:PY,source_video:RY,source_image:DY,layer:FY,layout:KY,layout_background:LY,layout_fill:UY,layout_circle:zY,layout_heatmap:NY,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:GY,layout_symbol:jY,layout_raster:WY,layout_hillshade:QY,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:YY,filter_operator:qY,geometry_type:$Y,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:VY,expression:HY,light:ZY,sky:XY,terrain:JY,projection:eq,paint:tq,paint_fill:nq,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:rq,paint_circle:iq,paint_heatmap:oq,paint_symbol:sq,paint_raster:aq,paint_hillshade:lq,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Aq,transition:uq,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:cq};const hq=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dq(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return hq.forEach(r=>{r in e&&(t[r]=e[r])}),t}function UB(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=dq(n[t],e[n[t].ref]));return n}function ma(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!ma(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!ma(n[r],e[r]))return!1;return!0}return n===e}function kf(n,e){n.push(e)}function _L(n,e,t){kf(t,{command:"addSource",args:[n,e[n]]})}function bL(n,e,t){kf(e,{command:"removeSource",args:[n]}),t[n]=!0}function fq(n,e,t,r){bL(n,t,r),_L(n,e,t)}function pq(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!ma(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!ma(n[t][r],e[t][r]))return!1;return!0}function mq(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||bL(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?ma(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&pq(n,e,i)?kf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):fq(i,e,t,r)):_L(i,e,t))}function hb(n,e,t,r,i,s){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(ma(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||ma(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]})}function n7(n){return n.id}function r7(n,e){return n[e.id]=e,n}function gq(n,e,t){n=n||[],e=e||[];const r=n.map(n7),i=e.map(n7),s=n.reduce(r7,{}),l=e.reduce(r7,{}),o=r.slice(),f=Object.create(null);let C,M,B,D,R;for(let U=0,G=0;U<r.length;U++)C=r[U],Object.prototype.hasOwnProperty.call(l,C)?G++:(kf(t,{command:"removeLayer",args:[C]}),o.splice(o.indexOf(C,G),1));for(let U=0,G=0;U<i.length;U++)C=i[i.length-1-U],o[o.length-1-U]!==C&&(Object.prototype.hasOwnProperty.call(s,C)?(kf(t,{command:"removeLayer",args:[C]}),o.splice(o.lastIndexOf(C,o.length-G),1)):G++,D=o[o.length-U],kf(t,{command:"addLayer",args:[l[C],D]}),o.splice(o.length-U,0,C),f[C]=!0);for(let U=0;U<i.length;U++)if(C=i[U],M=s[C],B=l[C],!(f[C]||ma(M,B))){if(!ma(M.source,B.source)||!ma(M["source-layer"],B["source-layer"])||!ma(M.type,B.type)){kf(t,{command:"removeLayer",args:[C]}),D=o[o.lastIndexOf(C)+1],kf(t,{command:"addLayer",args:[B,D]});continue}hb(M.layout,B.layout,t,C,null,"setLayoutProperty"),hb(M.paint,B.paint,t,C,null,"setPaintProperty"),ma(M.filter,B.filter)||kf(t,{command:"setFilter",args:[C,B.filter]}),(!ma(M.minzoom,B.minzoom)||!ma(M.maxzoom,B.maxzoom))&&kf(t,{command:"setLayerZoomRange",args:[C,B.minzoom,B.maxzoom]});for(R in M)Object.prototype.hasOwnProperty.call(M,R)&&(R==="layout"||R==="paint"||R==="filter"||R==="metadata"||R==="minzoom"||R==="maxzoom"||(R.indexOf("paint.")===0?hb(M[R],B[R],t,C,R.slice(6),"setPaintProperty"):ma(M[R],B[R])||kf(t,{command:"setLayerProperty",args:[C,R,B[R]]})));for(R in B)!Object.prototype.hasOwnProperty.call(B,R)||Object.prototype.hasOwnProperty.call(M,R)||R==="layout"||R==="paint"||R==="filter"||R==="metadata"||R==="minzoom"||R==="maxzoom"||(R.indexOf("paint.")===0?hb(M[R],B[R],t,C,R.slice(6),"setPaintProperty"):ma(M[R],B[R])||kf(t,{command:"setLayerProperty",args:[C,R,B[R]]}))}}function yq(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!ma(n.version,e.version))return[{command:"setStyle",args:[e]}];ma(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),ma(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),ma(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),ma(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),ma(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),ma(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),ma(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),ma(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),ma(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),ma(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),ma(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),ma(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),ma(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),ma(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];mq(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(l=>{"source"in l&&r[l.source]?t.push({command:"removeLayer",args:[l.id]}):s.push(l)}),t=t.concat(i),gq(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class vr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function By(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class tm extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class zB{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new zB(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const yx={kind:"null"},xr={kind:"number"},ns={kind:"string"},Go={kind:"boolean"},am={kind:"color"},vx={kind:"projectionDefinition"},Fg={kind:"object"},Lo={kind:"value"},vq={kind:"error"},Cx={kind:"collator"},_x={kind:"formatted"},bx={kind:"padding"},EC={kind:"colorArray"},xx={kind:"numberArray"},m_={kind:"resolvedImage"},Mx={kind:"variableAnchorOffsetCollection"};function Jd(n,e){return{kind:"array",itemType:n,N:e}}function $l(n){if(n.kind==="array"){const e=$l(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Cq=[yx,xr,ns,Go,am,vx,_x,Fg,Jd(Lo),bx,xx,EC,m_,Mx];function BC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!BC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Cq)if(!BC(t,e))return null}}return`Expected ${$l(n)} but found ${$l(e)} instead.`}function NB(n,e){return e.some(t=>t.kind===n.kind)}function Kg(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function C0(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const xL=.96422,ML=1,wL=.82521,SL=4/29,gy=6/29,EL=3*gy*gy,_q=gy*gy*gy,bq=Math.PI/180,xq=180/Math.PI;function BL(n){return n=n%360,n<0&&(n+=360),n}function OL([n,e,t,r]){n=b4(n),e=b4(e),t=b4(t);let i,s;const l=x4((.2225045*n+.7168786*e+.0606169*t)/ML);n===e&&e===t?i=s=l:(i=x4((.4360747*n+.3850649*e+.1430804*t)/xL),s=x4((.0139322*n+.0971045*e+.7141733*t)/wL));const o=116*l-16;return[o<0?0:o,500*(i-l),200*(l-s),r]}function b4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function x4(n){return n>_q?Math.pow(n,1/3):n/EL+SL}function IL([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,l=isNaN(t)?i:i-t/200;return i=ML*w4(i),s=xL*w4(s),l=wL*w4(l),[M4(3.1338561*s-1.6168667*i-.4906146*l),M4(-.9787684*s+1.9161415*i+.033454*l),M4(.0719453*s-.2289914*i+1.4052427*l),r]}function M4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function w4(n){return n>gy?n*n*n:EL*(n-SL)}function Mq(n){const[e,t,r,i]=OL(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?BL(Math.atan2(r,t)*xq):NaN,s,e,i]}function wq([n,e,t,r]){return n=isNaN(n)?0:n*bq,IL([t,Math.cos(n)*e,Math.sin(n)*e,r])}function Sq([n,e,t,r]){n=BL(n),e/=100,t/=100;function i(s){const l=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[i(0),i(8),i(4),r]}const Eq=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function AC(n,e){return Eq(n,e)?n[e]:void 0}function Bq(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=AC(Oq,n);if(e){const[i,s,l]=e;return[i/255,s/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let l=1;return[db(n.slice(l,l+=s)),db(n.slice(l,l+=s)),db(n.slice(l,l+=s)),db(n.slice(l,l+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[l,o,f,C,M,B,D,R,U,G,W,J]=s,$=[C||" ",D||" ",G].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const oe=[f,B,U].join(""),te=oe==="%%%"?100:oe===""?255:0;if(te){const H=[ry(+o/te,0,1),ry(+M/te,0,1),ry(+R/te,0,1),W?i7(+W,J):1];if(o7(H))return H}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,l,o,f,C,M,B,D]=r,R=[l||" ",f||" ",M].join("");if(R==="  "||R==="  /"||R===",,"||R===",,,"){const U=[+s,ry(+o,0,100),ry(+C,0,100),B?i7(+B,D):1];if(o7(U))return Sq(U)}}}function db(n){return parseInt(n.padEnd(2,n),16)/255}function i7(n,e){return ry(e?n/100:n,0,1)}function ry(n,e,t){return Math.min(Math.max(e,n),t)}function o7(n){return!n.some(Number.isNaN)}const Oq={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function G0(n,e,t){return n+t*(e-n)}function Oy(n,e,t){return n.map((r,i)=>G0(r,e[i],t))}function Iq(n){return n==="rgb"||n==="hcl"||n==="lab"}let Da=class iy{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof iy)return e;if(typeof e!="string")return;const t=Bq(e);if(t)return new iy(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",Mq(this.rgb))}get lab(){return this.overwriteGetter("lab",OL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,l,o,f]=Oy(e.rgb,t.rgb,r);return new iy(s,l,o,f,!1)}case"hcl":{const[s,l,o,f]=e.hcl,[C,M,B,D]=t.hcl;let R,U;if(!isNaN(s)&&!isNaN(C)){let oe=C-s;C>s&&oe>180?oe-=360:C<s&&s-C>180&&(oe+=360),R=s+r*oe}else isNaN(s)?isNaN(C)?R=NaN:(R=C,(o===1||o===0)&&(U=M)):(R=s,(B===1||B===0)&&(U=l));const[G,W,J,$]=wq([R,U??G0(l,M,r),G0(o,B,r),G0(f,D,r)]);return new iy(G,W,J,$,!1)}case"lab":{const[s,l,o,f]=IL(Oy(e.lab,t.lab,r));return new iy(s,l,o,f,!1)}}}};Da.black=new Da(0,0,0,1);Da.white=new Da(1,1,1,1);Da.transparent=new Da(0,0,0,0);Da.red=new Da(1,0,0,1);class GB{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Tq=["bottom","center","top"];class v6{constructor(e,t,r,i,s,l){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=l}}class lm{constructor(e){this.sections=e}static fromString(e){return new lm([new v6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof lm?e:lm.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Jh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Jh)return e;if(typeof e=="number")return new Jh([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Jh(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Jh(Oy(e.values,t.values,r))}}class ed{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ed)return e;if(typeof e=="number")return new ed([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new ed(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new ed(Oy(e.values,t.values,r))}}class Qc{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qc)return e;if(typeof e=="string"){const r=Da.parse(e);return r?new Qc([r]):void 0}if(!Array.isArray(e))return;const t=[];for(const r of e){if(typeof r!="string")return;const i=Da.parse(r);if(!i)return;t.push(i)}return new Qc(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r,i="rgb"){const s=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let l=0;l<e.values.length;l++)s.push(Da.interpolate(e.values[l],t.values[l],r,i));return new Qc(s)}}class pA extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const kq=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof zf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!kq.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new zf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new pA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new pA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);l.push(i[o]);const[f,C]=i[o+1],[M,B]=s[o+1];l.push([G0(f,M,r),G0(C,B,r)])}return new zf(l)}}class Zm{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Zm({name:e,available:!1}):null}}class Ff{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Ff(e,t,r)}static parse(e){if(e instanceof Ff)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Ff(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Ff(e.from,e.to,e.transition);if(typeof e=="string")return new Ff(e,e,1)}}function TL(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function OC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Ff||n instanceof Da||n instanceof GB||n instanceof lm||n instanceof Jh||n instanceof ed||n instanceof Qc||n instanceof zf||n instanceof Zm)return!0;if(Array.isArray(n)){for(const e of n)if(!OC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!OC(n[e]))return!1;return!0}else return!1}function Ru(n){if(n===null)return yx;if(typeof n=="string")return ns;if(typeof n=="boolean")return Go;if(typeof n=="number")return xr;if(n instanceof Da)return am;if(n instanceof Ff)return vx;if(n instanceof GB)return Cx;if(n instanceof lm)return _x;if(n instanceof Jh)return bx;if(n instanceof ed)return xx;if(n instanceof Qc)return EC;if(n instanceof zf)return Mx;if(n instanceof Zm)return m_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=Ru(r);if(!t)t=i;else{if(t===i)continue;t=Lo;break}}return Jd(t||Lo,e)}else return Fg}function uC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Da||n instanceof Ff||n instanceof lm||n instanceof Jh||n instanceof ed||n instanceof Qc||n instanceof zf||n instanceof Zm?n.toString():JSON.stringify(n)}class Iy{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!OC(e[1]))return t.error("invalid value");const r=e[1];let i=Ru(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new Iy(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const fb={string:ns,number:xr,boolean:Go,object:Fg};class Mp{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const C=e[1];if(typeof C!="string"||!(C in fb)||C==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=fb[C],r++}else o=Lo;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],r++}i=Jd(o,f)}else{if(!fb[s])throw new Error(`Types doesn't contain name = ${s}`);i=fb[s]}const l=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Lo);if(!o)return null;l.push(o)}return new Mp(i,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(BC(this.type,Ru(r))){if(t===this.args.length-1)throw new pA(`Expected value to be of type ${$l(this.type)}, but found ${$l(Ru(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const s7={"to-boolean":Go,"to-color":am,"to-number":xr,"to-string":ns};class R0{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!s7[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=s7[r],s=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,Lo);if(!o)return null;s.push(o)}return new R0(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Da)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=TL(t[0],t[1],t[2],t[3]),!r))return new Da(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new pA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Jh.parse(t);if(i)return i}throw new pA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=ed.parse(t);if(i)return i}throw new pA(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=Qc.parse(t);if(i)return i}throw new pA(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=zf.parse(t);if(i)return i}throw new pA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new pA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return lm.fromString(uC(this.args[0].evaluate(e)));case"resolvedImage":return Zm.fromString(uC(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return uC(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Pq=["Unknown","Point","LineString","Polygon"];class kL{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pq[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Da.parse(e),this._parseColorCache.set(e,t)),t}}class wx{constructor(e,t,r=[],i,s=new zB,l=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=l,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,l){return l==="assert"?new Mp(s,[i]):l==="coerce"?new R0(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let l=s.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,f=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&f.kind==="value")l=r(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&["string","array"].includes(f.kind)||["color","formatted","resolvedImage"].includes(o.kind)&&["value","string"].includes(f.kind)||["padding","numberArray"].includes(o.kind)&&["value","number","array"].includes(f.kind)||o.kind==="colorArray"&&["value","string","array"].includes(f.kind)||o.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(f.kind))l=r(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,f))return null}if(!(l instanceof Iy)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new kL;try{l=new Iy(l.type,l.evaluate(o))}catch(f){return this.error(f.message),null}}return l}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new wx(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new tm(r,e))}checkSubtype(e,t){const r=BC(e,t);return r&&this.error(r),r}}class Sx{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const l=e[s];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,s);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([l,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new Sx(r,i):null}outputDefined(){return this.result.outputDefined()}}class Ex{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Ex(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class jB{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,xr),i=t.parse(e[2],2,Jd(t.expectedType||Lo));if(!r||!i)return null;const s=i.type;return new jB(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new pA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new pA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new pA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class WB{constructor(e,t){this.type=Go,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Lo),i=t.parse(e[2],2,Lo);return!r||!i?null:NB(r.type,[Go,ns,xr,yx,Lo])?new WB(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$l(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Kg(t,["boolean","string","number","null"]))throw new pA(`Expected first argument to be of type boolean, string, number or null, but found ${$l(Ru(t))} instead.`);if(!Kg(r,["string","array"]))throw new pA(`Expected second argument to be of type array or string, but found ${$l(Ru(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class C2{constructor(e,t,r){this.type=xr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Lo),i=t.parse(e[2],2,Lo);if(!r||!i)return null;if(!NB(r.type,[Go,ns,xr,yx,Lo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$l(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,xr);return s?new C2(r,i,s):null}else return new C2(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Kg(t,["boolean","string","number","null"]))throw new pA(`Expected first argument to be of type boolean, string, number or null, but found ${$l(Ru(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Kg(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(Kg(r,["array"]))return r.indexOf(t,i);throw new pA(`Expected second argument to be of type array or string, but found ${$l(Ru(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class QB{constructor(e,t,r,i,s,l){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},l=[];for(let C=2;C<e.length-1;C+=2){let M=e[C];const B=e[C+1];Array.isArray(M)||(M=[M]);const D=t.concat(C);if(M.length===0)return D.error("Expected at least one branch label.");for(const U of M){if(typeof U!="number"&&typeof U!="string")return D.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return D.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return D.error("Numeric branch labels must be integer values.");if(!r)r=Ru(U);else if(D.checkSubtype(r,Ru(U)))return null;if(typeof s[String(U)]<"u")return D.error("Branch labels must be unique.");s[String(U)]=l.length}const R=t.parse(B,C,i);if(!R)return null;i=i||R.type,l.push(R)}const o=t.parse(e[1],1,Lo);if(!o)return null;const f=t.parse(e[e.length-1],e.length-1,i);return!f||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new QB(r,i,o,s,l,f)}evaluate(e){const t=this.input.evaluate(e);return(Ru(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class YB{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,Go);if(!o)return null;const f=t.parse(e[l+1],l+1,r);if(!f)return null;i.push([o,f]),r=r||f.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new YB(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class _2{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Lo),i=t.parse(e[2],2,xr);if(!r||!i)return null;if(!NB(r.type,[Jd(Lo),ns,Lo]))return t.error(`Expected first argument to be of type array or string, but found ${$l(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,xr);return s?new _2(r.type,r,i,s):null}else return new _2(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Kg(t,["string"]))return[...t].slice(r,i).join("");if(Kg(t,["array"]))return t.slice(r,i);throw new pA(`Expected first argument to be of type array or string, but found ${$l(Ru(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Bx(n,e){const t=n.length-1;let r=0,i=t,s=0,l,o;for(;r<=i;)if(s=Math.floor((r+i)/2),l=n[s],o=n[s+1],l<=e){if(s===t||e<o)return s;r=s+1}else if(l>e)i=s-1;else throw new pA("Input is not a number.");return 0}class Ox{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,xr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],f=e[l+1],C=l,M=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const B=t.parse(f,M,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new Ox(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=Bx(t,i);return r[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Rq(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var S4,a7;function Dq(){if(a7)return S4;a7=1,S4=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var l=this.sampleCurveDerivativeX(r);if(Math.abs(l)<1e-6)break;r=r-s/l}var o=0,f=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:f=r,r=(f-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},S4}var Fq=Dq(),Kq=Rq(Fq);class Nf{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[l,o]of s)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=E4(t,e.base,r,i);else if(e.name==="linear")s=E4(t,1,r,i);else if(e.name==="cubic-bezier"){const l=e.controlPoints;s=new Kq(l[0],l[1],l[2],l[3]).solve(E4(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...l]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const C=i[1];if(typeof C!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:C}}else if(i[0]==="cubic-bezier"){const C=i.slice(1);if(C.length!==4||C.some(M=>typeof M!="number"||M<0||M>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:C}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,xr),!s)return null;const o=[];let f=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&t.expectedType!=EC?f=am:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let C=0;C<l.length;C+=2){const M=l[C],B=l[C+1],D=C+3,R=C+4;if(typeof M!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(o.length&&o[o.length-1][0]>=M)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);const U=t.parse(B,R,f);if(!U)return null;f=f||U.type,o.push([M,U])}return!C0(f,xr)&&!C0(f,vx)&&!C0(f,am)&&!C0(f,bx)&&!C0(f,xx)&&!C0(f,EC)&&!C0(f,Mx)&&!C0(f,Jd(xr))?t.error(`Type ${$l(f)} is not interpolatable.`):new Nf(f,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=Bx(t,i),o=t[l],f=t[l+1],C=Nf.interpolationFactor(this.interpolation,i,o,f),M=r[l].evaluate(e),B=r[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return G0(M,B,C);case"color":return Da.interpolate(M,B,C);case"padding":return Jh.interpolate(M,B,C);case"colorArray":return Qc.interpolate(M,B,C);case"numberArray":return ed.interpolate(M,B,C);case"variableAnchorOffsetCollection":return zf.interpolate(M,B,C);case"array":return Oy(M,B,C);case"projectionDefinition":return Ff.interpolate(M,B,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return Da.interpolate(M,B,C,"hcl");case"colorArray":return Qc.interpolate(M,B,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Da.interpolate(M,B,C,"lab");case"colorArray":return Qc.interpolate(M,B,C,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function E4(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const Lq={color:Da.interpolate,number:G0,padding:Jh.interpolate,numberArray:ed.interpolate,colorArray:Qc.interpolate,variableAnchorOffsetCollection:zf.interpolate,array:Oy};class IC{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const f=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!f)return null;r=r||f.type,s.push(f)}if(!r)throw new Error("No output type");return i&&s.some(o=>BC(i,o.type))?new IC(Lo,s):new IC(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Zm&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function l7(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Uq(n,e,t){return e===t}function zq(n,e,t){return e!==t}function Nq(n,e,t){return e<t}function Gq(n,e,t){return e>t}function jq(n,e,t){return e<=t}function Wq(n,e,t){return e>=t}function PL(n,e,t,r){return r.compare(e,t)===0}function Qq(n,e,t,r){return!PL(n,e,t,r)}function Yq(n,e,t,r){return r.compare(e,t)<0}function qq(n,e,t,r){return r.compare(e,t)>0}function $q(n,e,t,r){return r.compare(e,t)<=0}function Vq(n,e,t,r){return r.compare(e,t)>=0}function Gy(n,e,t){const r=n!=="=="&&n!=="!=";return class RL{constructor(s,l,o){this.type=Go,this.lhs=s,this.rhs=l,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||l.type.kind==="value"}static parse(s,l){if(s.length!==3&&s.length!==4)return l.error("Expected two or three arguments.");const o=s[0];let f=l.parse(s[1],1,Lo);if(!f)return null;if(!l7(o,f.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${$l(f.type)}'.`);let C=l.parse(s[2],2,Lo);if(!C)return null;if(!l7(o,C.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${$l(C.type)}'.`);if(f.type.kind!==C.type.kind&&f.type.kind!=="value"&&C.type.kind!=="value")return l.error(`Cannot compare types '${$l(f.type)}' and '${$l(C.type)}'.`);r&&(f.type.kind==="value"&&C.type.kind!=="value"?f=new Mp(C.type,[f]):f.type.kind!=="value"&&C.type.kind==="value"&&(C=new Mp(f.type,[C])));let M=null;if(s.length===4){if(f.type.kind!=="string"&&C.type.kind!=="string"&&f.type.kind!=="value"&&C.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(M=l.parse(s[3],3,Cx),!M)return null}return new RL(f,C,M)}evaluate(s){const l=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const f=Ru(l),C=Ru(o);if(f.kind!==C.kind||!(f.kind==="string"||f.kind==="number"))throw new pA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${f.kind}, ${C.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const f=Ru(l),C=Ru(o);if(f.kind!=="string"||C.kind!=="string")return e(s,l,o)}return this.collator?t(s,l,o,this.collator.evaluate(s)):e(s,l,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const Hq=Gy("==",Uq,PL),Zq=Gy("!=",zq,Qq),Xq=Gy("<",Nq,Yq),Jq=Gy(">",Gq,qq),e$=Gy("<=",jq,$q),t$=Gy(">=",Wq,Vq);class Ix{constructor(e,t,r){this.type=Cx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Go);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Go);if(!s)return null;let l=null;return r.locale&&(l=t.parse(r.locale,1,ns),!l)?null:new Ix(i,s,l)}evaluate(e){return new GB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class qB{constructor(e,t,r,i,s){this.type=ns,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,xr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,ns),!s))return null;let l=null;if(i.currency&&(l=t.parse(i.currency,1,ns),!l))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,xr),!o))return null;let f=null;return i["max-fraction-digits"]&&(f=t.parse(i["max-fraction-digits"],1,xr),!f)?null:new qB(r,s,l,o,f)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class $B{constructor(e){this.type=_x,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let f=null;if(o["font-scale"]&&(f=t.parse(o["font-scale"],1,xr),!f))return null;let C=null;if(o["text-font"]&&(C=t.parse(o["text-font"],1,Jd(ns)),!C))return null;let M=null;if(o["text-color"]&&(M=t.parse(o["text-color"],1,am),!M))return null;let B=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!Tq.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(B=t.parse(o["vertical-align"],1,ns),!B)return null}const D=i[i.length-1];D.scale=f,D.font=C,D.textColor=M,D.verticalAlign=B}else{const f=t.parse(e[l],1,Lo);if(!f)return null;const C=f.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:f,scale:null,font:null,textColor:null,verticalAlign:null})}}return new $B(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return Ru(i)===m_?new v6("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new v6(uC(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new lm(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class VB{constructor(e){this.type=m_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ns);return r?new VB(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Zm.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class HB{constructor(e){this.type=xr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${$l(r.type)} instead.`):new HB(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new pA(`Expected value to be of type string or array, but found ${$l(Ru(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Am=8192;function n$(n,e){const t=r$(n[0]),r=o$(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Am),Math.round(r*i*Am)]}function ZB(n,e){const t=Math.pow(2,e.z),r=(n[0]/Am+e.x)/t,i=(n[1]/Am+e.y)/t;return[i$(r),s$(i)]}function r$(n){return(180+n)/360}function i$(n){return n*360-180}function o$(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function s$(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function g_(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function TC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function a$(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function l$(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],l=n[1]-t[1];return r*l-s*i===0&&r*s<=0&&i*l<=0}function Tx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return h$(s,i)===0?!1:!!(A7(n,e,t,r)&&A7(t,r,n,e))}function A$(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Tx(n,e,r[i],r[i+1]))return!0;return!1}function jy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(l$(n,i[s],i[s+1]))return t;a$(n,i[s],i[s+1])&&(r=!r)}return r}function u$(n,e){for(const t of e)if(jy(n,t))return!0;return!1}function DL(n,e){for(const t of n)if(!jy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(A$(n[t],n[t+1],e))return!1;return!0}function c$(n,e){for(const t of e)if(DL(n,t))return!0;return!1}function h$(n,e){return n[0]*e[1]-n[1]*e[0]}function A7(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],f=r[0]-t[0],C=r[1]-t[1],M=i*C-f*s,B=l*C-f*o;return M>0&&B<0||M<0&&B>0}function XB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let l=0;l<n[i].length;l++){const o=n$(n[i][l],t);g_(e,o),s.push(o)}r.push(s)}return r}function FL(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=XB(n[i],e,t);r.push(s)}return r}function KL(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}g_(e,n)}function d$(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function u7(n,e,t,r){const i=Math.pow(2,r.z)*Am,s=[r.x*Am,r.y*Am],l=[];for(const o of n)for(const f of o){const C=[f.x+s[0],f.y+s[1]];KL(C,e,t,i),l.push(C)}return l}function c7(n,e,t,r){const i=Math.pow(2,r.z)*Am,s=[r.x*Am,r.y*Am],l=[];for(const o of n){const f=[];for(const C of o){const M=[C.x+s[0],C.y+s[1]];g_(e,M),f.push(M)}l.push(f)}if(e[2]-e[0]<=i/2){d$(e);for(const o of l)for(const f of o)KL(f,e,t,i)}return l}function f$(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=XB(e.coordinates,r,i),l=u7(n.geometry(),t,r,i);if(!TC(t,r))return!1;for(const o of l)if(!jy(o,s))return!1}if(e.type==="MultiPolygon"){const s=FL(e.coordinates,r,i),l=u7(n.geometry(),t,r,i);if(!TC(t,r))return!1;for(const o of l)if(!u$(o,s))return!1}return!0}function p$(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=XB(e.coordinates,r,i),l=c7(n.geometry(),t,r,i);if(!TC(t,r))return!1;for(const o of l)if(!DL(o,s))return!1}if(e.type==="MultiPolygon"){const s=FL(e.coordinates,r,i),l=c7(n.geometry(),t,r,i);if(!TC(t,r))return!1;for(const o of l)if(!c$(o,s))return!1}return!0}class Lg{constructor(e,t){this.type=Go,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(OC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:l,coordinates:o}=s.geometry;l==="Polygon"&&i.push(o),l==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new Lg(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Lg(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Lg(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return f$(e,this.geometries);if(e.geometryType()==="LineString")return p$(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class LL{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,l=t[s];if(r(i,l)>=0)break;t[e]=l,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&r(t[o],t[l])<0&&(l=o),r(t[l],s)>=0)break;t[e]=t[l],e=l}t[e]=s}}function m$(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const l of n){const o=g$(l);o!==0&&(l.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[l]):i.push(l))}return i&&r.push(i),r}function g$(n){let e=0;for(let t=0,r=n.length,i=r-1,s,l;t<r;i=t++)s=n[t],l=n[i],e+=(l.x-s.x)*(s.y+l.y);return e}const y$=6378.137,h7=1/298.257223563,d7=h7*(2-h7),f7=Math.PI/180;class JB{constructor(e){const t=f7*y$*1e3,r=Math.cos(e*f7),i=1/(1-d7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-d7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,l,o;for(let f=0;f<e.length-1;f++){let C=e[f][0],M=e[f][1],B=this.wrap(e[f+1][0]-C)*this.kx,D=(e[f+1][1]-M)*this.ky,R=0;(B!==0||D!==0)&&(R=(this.wrap(t[0]-C)*this.kx*B+(t[1]-M)*this.ky*D)/(B*B+D*D),R>1?(C=e[f+1][0],M=e[f+1][1]):R>0&&(C+=B/this.kx*R,M+=D/this.ky*R)),B=this.wrap(t[0]-C)*this.kx,D=(t[1]-M)*this.ky;const U=B*B+D*D;U<r&&(r=U,i=C,s=M,l=f,o=R)}return{point:[i,s],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const C6=100,_6=50;function UL(n,e){return e[0]-n[0]}function b2(n){return n[1]-n[0]+1}function Ym(n,e){return n[1]>=n[0]&&n[1]<e}function b6(n,e){if(n[0]>n[1])return[null,null];const t=b2(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function x6(n,e){if(!Ym(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)g_(t,n[r]);return t}function M6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)g_(e,r);return e}function p7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function eO(n,e,t){if(!p7(n)||!p7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function Ig(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function tO(n,e,t,r,i){const s=Math.min(Ig(n,[t,r],i),Ig(e,[t,r],i)),l=Math.min(Ig(t,[n,e],i),Ig(r,[n,e],i));return Math.min(s,l)}function v$(n,e,t,r,i){if(!(Ym(e,n.length)&&Ym(r,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const f=n[o],C=n[o+1];for(let M=r[0];M<r[1];++M){const B=t[M],D=t[M+1];if(Tx(f,C,B,D))return 0;l=Math.min(l,tO(f,C,B,D,i))}}return l}function C$(n,e,t,r,i){if(!(Ym(e,n.length)&&Ym(r,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let f=r[0];f<=r[1];++f)if(l=Math.min(l,i.distance(n[o],t[f])),l===0)return l;return l}function _$(n,e,t){if(jy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],l=i[i.length-1];if(s!==l&&(r=Math.min(r,Ig(n,[l,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function b$(n,e,t,r){if(!Ym(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(jy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const l=n[s],o=n[s+1];for(const f of t)for(let C=0,M=f.length,B=M-1;C<M;B=C++){const D=f[B],R=f[C];if(Tx(l,o,D,R))return 0;i=Math.min(i,tO(l,o,D,R,r))}}return i}function m7(n,e){for(const t of n)for(const r of t)if(jy(r,e,!0))return!0;return!1}function x$(n,e,t,r=1/0){const i=M6(n),s=M6(e);if(r!==1/0&&eO(i,s,t)>=r)return r;if(TC(i,s)){if(m7(n,e))return 0}else if(m7(e,n))return 0;let l=1/0;for(const o of n)for(let f=0,C=o.length,M=C-1;f<C;M=f++){const B=o[M],D=o[f];for(const R of e)for(let U=0,G=R.length,W=G-1;U<G;W=U++){const J=R[W],$=R[U];if(Tx(B,D,J,$))return 0;l=Math.min(l,tO(B,D,J,$,t))}}return l}function g7(n,e,t,r,i,s){if(!s)return;const l=eO(x6(r,s),i,t);l<e&&n.push([l,s,[0,0]])}function pb(n,e,t,r,i,s,l){if(!s||!l)return;const o=eO(x6(r,s),x6(i,l),t);o<e&&n.push([o,s,l])}function x2(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const l=new LL([[0,[0,n.length-1],[0,0]]],UL),o=M6(t);for(;l.length>0;){const f=l.pop();if(f[0]>=s)continue;const C=f[1],M=e?_6:C6;if(b2(C)<=M){if(!Ym(C,n.length))return NaN;if(e){const B=b$(n,C,t,r);if(isNaN(B)||B===0)return B;s=Math.min(s,B)}else for(let B=C[0];B<=C[1];++B){const D=_$(n[B],t,r);if(s=Math.min(s,D),s===0)return 0}}else{const B=b6(C,e);g7(l,s,r,n,o,B[0]),g7(l,s,r,n,o,B[1])}}return s}function M2(n,e,t,r,i,s=1/0){let l=Math.min(s,i.distance(n[0],t[0]));if(l===0)return l;const o=new LL([[0,[0,n.length-1],[0,t.length-1]]],UL);for(;o.length>0;){const f=o.pop();if(f[0]>=l)continue;const C=f[1],M=f[2],B=e?_6:C6,D=r?_6:C6;if(b2(C)<=B&&b2(M)<=D){if(!Ym(C,n.length)&&Ym(M,t.length))return NaN;let R;if(e&&r)R=v$(n,C,t,M,i),l=Math.min(l,R);else if(e&&!r){const U=n.slice(C[0],C[1]+1);for(let G=M[0];G<=M[1];++G)if(R=Ig(t[G],U,i),l=Math.min(l,R),l===0)return l}else if(!e&&r){const U=t.slice(M[0],M[1]+1);for(let G=C[0];G<=C[1];++G)if(R=Ig(n[G],U,i),l=Math.min(l,R),l===0)return l}else R=C$(n,C,t,M,i),l=Math.min(l,R)}else{const R=b6(C,e),U=b6(M,r);pb(o,l,i,n,t,R[0],U[0]),pb(o,l,i,n,t,R[0],U[1]),pb(o,l,i,n,t,R[1],U[0]),pb(o,l,i,n,t,R[1],U[1])}}return l}function M$(n,e){const t=n.geometry(),r=t.flat().map(l=>ZB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new JB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,M2(r,!1,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,M2(r,!1,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,x2(r,!1,l.coordinates,i,s));break}if(s===0)return s}return s}function w$(n,e){const t=n.geometry(),r=t.flat().map(l=>ZB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new JB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,M2(r,!0,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,M2(r,!0,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,x2(r,!0,l.coordinates,i,s));break}if(s===0)return s}return s}function S$(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=m$(t).map(l=>l.map(o=>o.map(f=>ZB([f.x,f.y],n.canonical)))),i=new JB(r[0][0][0][1]);let s=1/0;for(const l of e)for(const o of r){switch(l.type){case"Point":s=Math.min(s,x2([l.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,x2(l.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,x$(o,l.coordinates,i,s));break}if(s===0)return s}return s}function B4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Ug{constructor(e,t){this.type=xr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(OC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Ug(r,r.features.map(i=>B4(i.geometry)).flat());if(r.type==="Feature")return new Ug(r,B4(r.geometry));if("type"in r&&"coordinates"in r)return new Ug(r,B4(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return M$(e,this.geometries);if(e.geometryType()==="LineString")return w$(e,this.geometries);if(e.geometryType()==="Polygon")return S$(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class y_{constructor(e){this.type=Lo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return r==null?t.error("Global state property must be defined."):typeof r!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new y_(r)}evaluate(e){var t;const r=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!r||Object.keys(r).length===0?null:AC(r,this.key)}eachChild(){}outputDefined(){return!1}}const kx={"==":Hq,"!=":Zq,">":Jq,"<":Xq,">=":t$,"<=":e$,array:Mp,at:jB,boolean:Mp,case:YB,coalesce:IC,collator:Ix,format:$B,image:VB,in:WB,"index-of":C2,interpolate:Nf,"interpolate-hcl":Nf,"interpolate-lab":Nf,length:HB,let:Sx,literal:Iy,match:QB,number:Mp,"number-format":qB,object:Mp,slice:_2,step:Ox,string:Mp,"to-boolean":R0,"to-color":R0,"to-number":R0,"to-string":R0,var:Ex,within:Lg,distance:Ug,"global-state":y_};class nf{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=nf.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,l=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=l.filter(([C])=>!Array.isArray(C)||C.length===e.length-1);let f=null;for(const[C,M]of o){f=new wx(t.registry,w2,t.path,null,t.scope);const B=[];let D=!1;for(let R=1;R<e.length;R++){const U=e[R],G=Array.isArray(C)?C[R-1]:C.type,W=f.parse(U,1+B.length,G);if(!W){D=!0;break}B.push(W)}if(!D){if(Array.isArray(C)&&C.length!==B.length){f.error(`Expected ${C.length} arguments, but found ${B.length} instead.`);continue}for(let R=0;R<B.length;R++){const U=Array.isArray(C)?C[R]:C.type,G=B[R];f.concat(R+1).checkSubtype(U,G.type)}if(f.errors.length===0)return new nf(r,s,M,B)}}if(o.length===1)t.errors.push(...f.errors);else{const M=(o.length?o:l).map(([D])=>B$(D)).join(" | "),B=[];for(let D=1;D<e.length;D++){const R=t.parse(e[D],1+B.length);if(!R)return null;B.push($l(R.type))}t.error(`Expected arguments of type ${M}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){nf.definitions=t;for(const r in t)e[r]=nf}}function y7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,l=TL(e,t,r,s);if(l)throw new pA(l);return new Da(e/255,t/255,r/255,s,!1)}function v7(n,e){return n in e}function O4(n,e){const t=e[n];return typeof t>"u"?null:t}function E$(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function gg(n){return{type:n}}nf.register(kx,{error:[vq,[ns],(n,[e])=>{throw new pA(e.evaluate(n))}],typeof:[ns,[Lo],(n,[e])=>$l(Ru(e.evaluate(n)))],"to-rgba":[Jd(xr,4),[am],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[am,[xr,xr,xr],y7],rgba:[am,[xr,xr,xr,xr],y7],has:{type:Go,overloads:[[[ns],(n,[e])=>v7(e.evaluate(n),n.properties())],[[ns,Fg],(n,[e,t])=>v7(e.evaluate(n),t.evaluate(n))]]},get:{type:Lo,overloads:[[[ns],(n,[e])=>O4(e.evaluate(n),n.properties())],[[ns,Fg],(n,[e,t])=>O4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Lo,[ns],(n,[e])=>O4(e.evaluate(n),n.featureState||{})],properties:[Fg,[],n=>n.properties()],"geometry-type":[ns,[],n=>n.geometryType()],id:[Lo,[],n=>n.id()],zoom:[xr,[],n=>n.globals.zoom],"heatmap-density":[xr,[],n=>n.globals.heatmapDensity||0],elevation:[xr,[],n=>n.globals.elevation||0],"line-progress":[xr,[],n=>n.globals.lineProgress||0],accumulated:[Lo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[xr,gg(xr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[xr,gg(xr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:xr,overloads:[[[xr,xr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[xr],(n,[e])=>-e.evaluate(n)]]},"/":[xr,[xr,xr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[xr,[xr,xr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[xr,[],()=>Math.LN2],pi:[xr,[],()=>Math.PI],e:[xr,[],()=>Math.E],"^":[xr,[xr,xr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[xr,[xr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[xr,[xr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[xr,[xr],(n,[e])=>Math.log(e.evaluate(n))],log2:[xr,[xr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[xr,[xr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[xr,[xr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[xr,[xr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[xr,[xr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[xr,[xr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[xr,[xr],(n,[e])=>Math.atan(e.evaluate(n))],min:[xr,gg(xr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[xr,gg(xr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[xr,[xr],(n,[e])=>Math.abs(e.evaluate(n))],round:[xr,[xr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[xr,[xr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[xr,[xr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Go,[ns,Lo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Go,[Lo],(n,[e])=>n.id()===e.value],"filter-type-==":[Go,[ns],(n,[e])=>n.geometryType()===e.value],"filter-<":[Go,[ns,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Go,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Go,[ns,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Go,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Go,[ns,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Go,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Go,[ns,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Go,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Go,[Lo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Go,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Go,[Jd(ns)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Go,[Jd(Lo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Go,[ns,Jd(Lo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Go,[ns,Jd(Lo)],(n,[e,t])=>E$(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Go,overloads:[[[Go,Go],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[gg(Go),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Go,overloads:[[[Go,Go],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[gg(Go),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Go,[Go],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Go,[ns],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[ns,[ns],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ns,[ns],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ns,gg(Lo),(n,e)=>e.map(t=>uC(t.evaluate(n))).join("")],"resolved-locale":[ns,[Cx],(n,[e])=>e.evaluate(n).resolvedLocale()]});function B$(n){return Array.isArray(n)?`(${n.map($l).join(", ")})`:`(${$l(n.type)}...)`}function w2(n){if(n instanceof Ex)return w2(n.boundExpression);if(n instanceof nf&&n.name==="error")return!1;if(n instanceof Ix)return!1;if(n instanceof Lg)return!1;if(n instanceof Ug)return!1;if(n instanceof y_)return!1;const e=n instanceof R0||n instanceof Mp;let t=!0;return n.eachChild(r=>{e?t=t&&w2(r):t=t&&r instanceof Iy}),t?Px(n)&&Rx(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function Px(n){if(n instanceof nf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Lg||n instanceof Ug)return!1;let e=!0;return n.eachChild(t=>{e&&!Px(t)&&(e=!1)}),e}function kC(n){if(n instanceof nf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!kC(t)&&(e=!1)}),e}function Rx(n,e){if(n instanceof nf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!Rx(r,e)&&(t=!1)}),t}function w6(n){return{result:"success",value:n}}function oy(n){return{result:"error",value:n}}function S2(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function zL(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function nO(n){return!!n.expression&&n.expression.interpolated}function rs(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Wy(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Ru(n)===Fg}function O$(n){return n}function I$(n){switch(n.type){case"color":return Da.parse;case"padding":return Jh.parse;case"numberArray":return ed.parse;case"colorArray":return Qc.parse;default:return null}}function T$(n){switch(n){case"exponential":return NL;case"interval":return P$;case"categorical":return k$;case"identity":return R$;default:throw new Error(`Unknown function type "${n}"`)}}function rO(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",r=t||n.property!==void 0,i=t||!r,s=n.type||(nO(e)?"exponential":"interval"),l=I$(e);if(l&&(n=By({},n),n.stops&&(n.stops=n.stops.map(M=>[M[0],l(M[1])])),n.default?n.default=l(n.default):n.default=l(e.default)),n.colorSpace&&!Iq(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const o=T$(s);let f,C;if(s==="categorical"){f=Object.create(null);for(const M of n.stops)f[M[0]]=M[1];C=typeof n.stops[0][0]}if(t){const M={},B=[];for(let U=0;U<n.stops.length;U++){const G=n.stops[U],W=G[0].zoom;M[W]===void 0&&(M[W]={zoom:W,type:n.type,property:n.property,default:n.default,stops:[]},B.push(W)),M[W].stops.push([G[0].value,G[1]])}const D=[];for(const U of B)D.push([M[U].zoom,rO(M[U],e)]);const R={name:"linear"};return{kind:"composite",interpolationType:R,interpolationFactor:Nf.interpolationFactor.bind(void 0,R),zoomStops:D.map(U=>U[0]),evaluate({zoom:U},G){return NL({stops:D,base:n.base},e,U).evaluate(U,G)}}}else if(i){const M=s==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Nf.interpolationFactor.bind(void 0,M),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>o(n,e,B,f,C)}}else return{kind:"source",evaluate(M,B){const D=B&&B.properties?B.properties[n.property]:void 0;return D===void 0?v_(n.default,e.default):o(n,e,D,f,C)}}}function v_(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function k$(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return v_(s,n.default,e.default)}function P$(n,e,t){if(rs(t)!=="number")return v_(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=Bx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function NL(n,e,t){const r=n.base!==void 0?n.base:1;if(rs(t)!=="number")return v_(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=Bx(n.stops.map(M=>M[0]),t),l=D$(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],f=n.stops[s+1][1],C=Lq[e.type]||O$;return typeof o.evaluate=="function"?{evaluate(...M){const B=o.evaluate.apply(void 0,M),D=f.evaluate.apply(void 0,M);if(!(B===void 0||D===void 0))return C(B,D,l,n.colorSpace)}}:C(o,f,l,n.colorSpace)}function R$(n,e,t){switch(e.type){case"color":t=Da.parse(t);break;case"formatted":t=lm.fromString(t.toString());break;case"resolvedImage":t=Zm.fromString(t.toString());break;case"padding":t=Jh.parse(t);break;case"colorArray":t=Qc.parse(t);break;case"numberArray":t=ed.parse(t);break;default:rs(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return v_(t,n.default,e.default)}function D$(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}class GL{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new kL,this._defaultValue=t?U$(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new pA(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function Qy(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in kx}function Dx(n,e){const t=new wx(kx,w2,[],e?L$(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?w6(new GL(r,e)):oy(t.errors)}class S6{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!kC(t.expression),this.globalStateRefs=Lx(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}}class E6{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!kC(t.expression),this.globalStateRefs=Lx(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}interpolationFactor(e,t,r){return this.interpolationType?Nf.interpolationFactor(this.interpolationType,e,t,r):0}}function F$(n){return n._styleExpression!==void 0}function Fx(n,e){const t=Dx(n,e);if(t.result==="error")return t;const r=t.value.expression,i=Px(r);if(!i&&!S2(e))return oy([new tm("","data expressions not supported")]);const s=Rx(r,["zoom"]);if(!s&&!zL(e))return oy([new tm("","zoom expressions not supported")]);const l=n2(r);if(!l&&!s)return oy([new tm("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof tm)return oy([l]);if(l instanceof Nf&&!nO(e))return oy([new tm("",'"interpolate" expressions cannot be used with this property')]);if(!l)return w6(i?new S6("constant",t.value):new S6("source",t.value));const o=l instanceof Nf?l.interpolation:void 0;return w6(i?new E6("camera",t.value,l.labels,o):new E6("composite",t.value,l.labels,o))}class Kx{constructor(e,t){this._parameters=e,this._specification=t,By(this,rO(this._parameters,this._specification))}static deserialize(e){return new Kx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function K$(n,e){if(Wy(n))return new Kx(n,e);if(Qy(n)){const t=Fx(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Da.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Jh.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?t=ed.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?t=Qc.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=zf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Ff.parse(n)),{globalStateRefs:new Set,kind:"constant",evaluate:()=>t}}}function n2(n){let e=null;if(n instanceof Sx)e=n2(n.result);else if(n instanceof IC){for(const t of n.args)if(e=n2(t),e)break}else(n instanceof Ox||n instanceof Nf)&&n.input instanceof nf&&n.input.name==="zoom"&&(e=n);return e instanceof tm||n.eachChild(t=>{const r=n2(t);r instanceof tm?e=r:!e&&r?e=new tm("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new tm("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Lx(n,e=new Set){return n instanceof y_&&e.add(n.key),n.eachChild(t=>{Lx(t,e)}),e}function L$(n){const e={color:am,string:ns,number:xr,enum:ns,boolean:Go,formatted:_x,padding:bx,numberArray:xx,colorArray:EC,projectionDefinition:vx,resolvedImage:m_,variableAnchorOffsetCollection:Mx};return n.type==="array"?Jd(e[n.value]||Lo,n.length):e[n.type]}function U$(n){if(n.type==="color"&&Wy(n.default))return new Da(0,0,0,0);switch(n.type){case"color":return Da.parse(n.default)||null;case"padding":return Jh.parse(n.default)||null;case"numberArray":return ed.parse(n.default)||null;case"colorArray":return Qc.parse(n.default)||null;case"variableAnchorOffsetCollection":return zf.parse(n.default)||null;case"projectionDefinition":return Ff.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function C_(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!C_(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const z$={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function N$(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};C_(n)||(n=E2(n));const e=Dx(n,z$);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=jL(n);return{filter:(r,i,s)=>e.value.evaluate(r,i,{},s),needGeometry:t,getGlobalStateRefs:()=>Lx(e.value.expression)}}}function G$(n,e){return n<e?-1:n>e?1:0}function jL(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(jL(n[e]))return!0;return!1}function E2(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?I4(n[1],n[2],"=="):e==="!="?mb(I4(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?I4(n[1],n[2],e):e==="any"?j$(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(E2)):e==="none"?["all"].concat(n.slice(1).map(E2).map(mb)):e==="in"?C7(n[1],n.slice(2)):e==="!in"?mb(C7(n[1],n.slice(2))):e==="has"?_7(n[1]):e==="!has"?mb(_7(n[1])):!0}function I4(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function j$(n){return["any"].concat(n.map(E2))}function C7(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(G$)]]:["filter-in-small",n,["literal",e]]}}function _7(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function mb(n){return["!",n]}function cC(n,e={}){if(C_(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return Q$(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(l=>{const o={},f=cC(l,o),C=W$(o);return C===!0?f:["case",C,f,!1]})]}case"all":{const[,...i]=t,s=i.map(l=>cC(l,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",cC(["any",...i],{})]}case"in":{const[,i,...s]=t;return b7(i,s)}case"!in":{const[,i,...s]=t;return b7(i,s,!0)}case"has":return x7(t[1]);case"!has":return["!",x7(t[1])];default:return!0}}function W$(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function Q$(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function b7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const l of e)if(typeof l!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const l=e.sort().filter((o,f)=>f===0||e[f-1]!==o);return["match",r,l,!t,t]}return t?["all",...e.map(l=>["!=",r,l])]:["any",...e.map(l=>["==",r,l])]}function x7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function PC(n){return typeof n=="object"?["literal",n]:n}function iO(n,e){let t=n.stops;if(!t)return Y$(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(l=>!i&&e.tokens&&typeof l[1]=="string"?[l[0],WL(l[1])]:[l[0],PC(l[1])]),r?q$(n,e,t):s?V$(n,e,t):B6(n,e,t)}function Y$(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,PC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function oO(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function q$(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const f=t[o],C=f[0].zoom;r[C]===void 0&&(r[C]={zoom:C,type:n.type,property:n.property,default:n.default},i[C]=[],s.push(C)),i[C].push([f[0].value,f[1]])}if(aO({},e)==="exponential"){const o=[oO(n),["linear"],["zoom"]];for(const f of s){const C=B6(r[f],e,i[f]);yy(o,f,C,!1)}return o}else{const o=["step",["zoom"]];for(const f of s){const C=B6(r[f],e,i[f]);yy(o,f,C,!0)}return sO(o),o}}function $$(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function M7(n,e){const t=PC($$(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function B6(n,e,t){const r=aO(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const l of t)s.push(["==",i,l[0]],l[1]);return s.push(M7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const l of t)yy(s,l[0],l[1],!1);return s.push(M7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const l of t)yy(s,l[0],l[1],!0);return sO(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,PC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,l=[oO(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)yy(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",i],"number"],l,PC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function V$(n,e,t,r=["zoom"]){const i=aO(n,e);let s,l=!1;if(i==="interval")s=["step",r],l=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[oO(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)yy(s,o[0],o[1],l);return sO(s),s}function sO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function yy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function aO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function WL(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function H$(n){for(let e=0;e<Es.layout.length;e++)for(const t in Es[Es.layout[e]])if(t===n)return Es[Es.layout[e]][t];for(let e=0;e<Es.paint.length;e++)for(const t in Es[Es.paint[e]])if(t===n)return Es[Es.paint[e]][t];return null}function Z$(n,e){for(const t in n.sources)e(n.sources[t])}function hC(n,e){for(const t of n.layers)e(t)}function lO(n,e,t){function r(i,s){const l=i[s];l&&Object.keys(l).forEach(o=>{t({path:[i.id,s,o],key:o,value:l[o],reference:H$(o),set(f){l[o]=f}})})}hC(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function QL(n){const e=n.key,t=n.value;return t?[new vr(e,t,"constants have been deprecated as of v8")]:[]}function NA(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Qg(n){if(Array.isArray(n))return n.map(Qg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Qg(n[t]);return e}return NA(n)}function Kf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,l=n.styleSpec,o=n.validateSpec;let f=[];const C=rs(t);if(C!=="object")return[new vr(e,t,`object expected, ${C} found`)];for(const M in t){const B=M.split(".")[0],D=AC(r,B)||r["*"];let R;if(AC(i,B))R=i[B];else if(AC(r,B))R=o;else if(i["*"])R=i["*"];else if(r["*"])R=o;else{f.push(new vr(e,t[M],`unknown property "${M}"`));continue}f=f.concat(R({key:(e&&`${e}.`)+M,value:t[M],valueSpec:D,style:s,styleSpec:l,object:t,objectKey:M,validateSpec:o},t))}for(const M in r)i[M]||r[M].required&&r[M].default===void 0&&t[M]===void 0&&f.push(new vr(e,t,`missing required property "${M}"`));return f}function AO(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.key,o=n.arrayElementValidator||r;if(rs(e)!=="array")return[new vr(l,e,`array expected, ${rs(e)} found`)];if(t.length&&e.length!==t.length)return[new vr(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new vr(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let f={type:t.value,values:t.values};s.$version<7&&(f.function=t.function),rs(t.value)==="object"&&(f=t.value);let C=[];for(let M=0;M<e.length;M++)C=C.concat(o({array:e,arrayIndex:M,value:e[M],valueSpec:f,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${l}[${M}]`}));return C}function Ux(n){const e=n.key,t=n.value,r=n.valueSpec;let i=rs(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new vr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new vr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new vr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function YL(n){const e=n.valueSpec,t=NA(n.value.type);let r,i={},s,l;const o=t!=="categorical"&&n.value.property===void 0,f=!o,C=rs(n.value.stops)==="array"&&rs(n.value.stops[0])==="array"&&rs(n.value.stops[0][0])==="object",M=Kf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:U}});return t==="identity"&&o&&M.push(new vr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&M.push(new vr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!nO(n.valueSpec)&&M.push(new vr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(f&&!S2(n.valueSpec)?M.push(new vr(n.key,n.value,"property functions not supported")):o&&!zL(n.valueSpec)&&M.push(new vr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||C)&&n.value.property===void 0&&M.push(new vr(n.key,n.value,'"property" property is required')),M;function B(G){if(t==="identity")return[new vr(G.key,G.value,'identity function may not have a "stops" property')];let W=[];const J=G.value;return W=W.concat(AO({key:G.key,value:J,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:D})),rs(J)==="array"&&J.length===0&&W.push(new vr(G.key,J,"array must have at least one stop")),W}function D(G){let W=[];const J=G.value,$=G.key;if(rs(J)!=="array")return[new vr($,J,`array expected, ${rs(J)} found`)];if(J.length!==2)return[new vr($,J,`array length 2 expected, length ${J.length} found`)];if(C){if(rs(J[0])!=="object")return[new vr($,J,`object expected, ${rs(J[0])} found`)];if(J[0].zoom===void 0)return[new vr($,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new vr($,J,"object stop key must have value")];if(l&&l>NA(J[0].zoom))return[new vr($,J[0].zoom,"stop zoom values must appear in ascending order")];NA(J[0].zoom)!==l&&(l=NA(J[0].zoom),s=void 0,i={}),W=W.concat(Kf({key:`${$}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Ux,value:R}}))}else W=W.concat(R({key:`${$}[0]`,value:J[0],validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},J));return Qy(Qg(J[1]))?W.concat([new vr(`${$}[1]`,J[1],"expressions are not allowed in function stops.")]):W.concat(G.validateSpec({key:`${$}[1]`,value:J[1],valueSpec:e,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function R(G,W){const J=rs(G.value),$=NA(G.value),oe=G.value!==null?G.value:W;if(!r)r=J;else if(J!==r)return[new vr(G.key,oe,`${J} stop domain type must match previous stop domain type ${r}`)];if(J!=="number"&&J!=="string"&&J!=="boolean")return[new vr(G.key,oe,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&t!=="categorical"){let te=`number expected, ${J} found`;return S2(e)&&t===void 0&&(te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vr(G.key,oe,te)]}return t==="categorical"&&J==="number"&&(!isFinite($)||Math.floor($)!==$)?[new vr(G.key,oe,`integer expected, found ${$}`)]:t!=="categorical"&&J==="number"&&s!==void 0&&$<s?[new vr(G.key,oe,"stop domain values must appear in ascending order")]:(s=$,t==="categorical"&&$ in i?[new vr(G.key,oe,"stop domain values must be unique")]:(i[$]=!0,[]))}function U(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:e,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}function Ty(n){const e=(n.expressionContext==="property"?Fx:Dx)(Qg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new vr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new vr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!kC(t))return[new vr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!kC(t))return[new vr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Rx(t,["zoom","feature-state"]))return[new vr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Px(t))return[new vr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function X$(n){const e=n.value,t=n.key,r=rs(e);return r!=="boolean"?[new vr(t,e,`boolean expected, ${r} found`)]:[]}function O6(n){const e=n.key,t=n.value,r=rs(t);return r!=="string"?[new vr(e,t,`color expected, ${r} found`)]:Da.parse(String(t))?[]:[new vr(e,t,`color expected, "${t}" found`)]}function RC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(NA(t))===-1&&i.push(new vr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(NA(t))===-1&&i.push(new vr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function uO(n){return C_(Qg(n.value))?Ty(By({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qL(n)}function qL(n){const e=n.value,t=n.key;if(rs(e)!=="array")return[new vr(t,e,`array expected, ${rs(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new vr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(RC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),NA(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&NA(e[1])==="$type"&&s.push(new vr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new vr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=rs(e[1]),i!=="string"&&s.push(new vr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let l=2;l<e.length;l++)i=rs(e[l]),NA(e[1])==="$type"?s=s.concat(RC({key:`${t}[${l}]`,value:e[l],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new vr(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)s=s.concat(qL({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=rs(e[1]),e.length!==2?s.push(new vr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new vr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function $L(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.value,o=n.objectKey,f=s[`${e}_${n.layerType}`];if(!f)return[];const C=o.match(/^(.*)-transition$/);if(e==="paint"&&C&&f[C[1]]&&f[C[1]].transition)return r({key:t,value:l,valueSpec:s.transition,style:i,styleSpec:s});const M=n.valueSpec||f[o];if(!M)return[new vr(t,l,`unknown property "${o}"`)];let B;if(rs(l)==="string"&&S2(M)&&!M.tokens&&(B=/^{([^}]+)}$/.exec(l)))return[new vr(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const D=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&D.push(new vr(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Wy(Qg(l))&&NA(l.type)==="identity"&&D.push(new vr(t,l,'"text-font" does not support identity functions'))),D.concat(r({key:n.key,value:l,valueSpec:M,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function VL(n){return $L(n,"paint")}function HL(n){return $L(n,"layout")}function ZL(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;if(rs(t)!=="object")return[new vr(r,t,`object expected, ${rs(t)} found`)];!t.type&&!t.ref&&e.push(new vr(r,t,'either "type" or "ref" is required'));let l=NA(t.type);const o=NA(t.ref);if(t.id){const f=NA(t.id);for(let C=0;C<n.arrayIndex;C++){const M=i.layers[C];NA(M.id)===f&&e.push(new vr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${M.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(C=>{C in t&&e.push(new vr(r,t[C],`"${C}" is prohibited for ref layers`))});let f;i.layers.forEach(C=>{NA(C.id)===o&&(f=C)}),f?f.ref?e.push(new vr(r,t.ref,"ref cannot reference another ref layer")):l=NA(f.type):e.push(new vr(r,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new vr(r,t,'missing required property "source"'));else{const f=i.sources&&i.sources[t.source],C=f&&NA(f.type);f?C==="vector"&&l==="raster"?e.push(new vr(r,t.source,`layer "${t.id}" requires a raster source`)):C!=="raster-dem"&&l==="hillshade"?e.push(new vr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):C!=="raster-dem"&&l==="color-relief"?e.push(new vr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):C==="raster"&&l!=="raster"?e.push(new vr(r,t.source,`layer "${t.id}" requires a vector source`)):C==="vector"&&!t["source-layer"]?e.push(new vr(r,t,`layer "${t.id}" must specify a "source-layer"`)):C==="raster-dem"&&l!=="hillshade"&&l!=="color-relief"?e.push(new vr(r,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(C!=="geojson"||!f.lineMetrics)&&e.push(new vr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new vr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Kf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:uO,layout(f){return Kf({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(C){return HL(By({layerType:l},C))}}})},paint(f){return Kf({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(C){return VL(By({layerType:l},C))}}})}}})),e}function Yg(n){const e=n.value,t=n.key,r=rs(e);return r!=="string"?[new vr(t,e,`string expected, ${r} found`)]:[]}function J$(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,l=n.style;let o=[];const f=rs(r);if(r===void 0)return o;if(f!=="object")return o.push(new vr("source_raster_dem",r,`object expected, ${f} found`)),o;const M=NA(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],D=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const R in r)!M&&B.includes(R)?o.push(new vr(R,r[R],`In "${t}": "${R}" is only valid when "encoding" is set to "custom". ${D} encoding found`)):s[R]?o=o.concat(n.validateSpec({key:R,value:r[R],valueSpec:s[R],validateSpec:n.validateSpec,style:l,styleSpec:i})):o.push(new vr(R,r[R],`unknown property "${R}"`));return o}const w7={promoteId:eV};function XL(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new vr(t,e,'"type" is required')];const l=NA(e.type);let o;switch(l){case"vector":case"raster":return o=Kf({key:t,value:e,valueSpec:r[`source_${l.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:w7,validateSpec:s}),o;case"raster-dem":return o=J$({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=Kf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:w7}),e.cluster)for(const f in e.clusterProperties){const[C,M]=e.clusterProperties[f],B=typeof C=="string"?[C,["accumulated"],["get",f]]:C;o.push(...Ty({key:`${t}.${f}.map`,value:M,expressionContext:"cluster-map"})),o.push(...Ty({key:`${t}.${f}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return o;case"video":return Kf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return Kf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new vr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return RC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function eV({key:n,value:e}){if(rs(e)==="string")return Yg({key:n,value:e});{const t=[];for(const r in e)t.push(...Yg({key:`${n}.${r}`,value:e[r]}));return t}}function JL(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const l=rs(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new vr("light",e,`object expected, ${l} found`)]),s;for(const o in e){const f=o.match(/^(.*)-transition$/);f&&r[f[1]]&&r[f[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new vr(o,e[o],`unknown property "${o}"`)])}return s}function eU(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=rs(e);if(e===void 0)return[];if(s!=="object")return[new vr("sky",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new vr(o,e[o],`unknown property "${o}"`)]);return l}function tU(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const l=rs(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new vr("terrain",e,`object expected, ${l} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new vr(o,e[o],`unknown property "${o}"`)]);return s}function tV(n){return Yg(n).length===0?[]:Ty(n)}function nV(n){return Yg(n).length===0?[]:Ty(n)}function rV(n){const e=n.key,t=n.value;if(rs(t)==="array"){if(t.length<1||t.length>4)return[new vr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return Ux({key:e,value:t,valueSpec:{}})}function iV(n){const e=n.key,t=n.value;if(rs(t)==="array"){const i={type:"number"};if(t.length<1)return[new vr(e,t,"array length at least 1 expected, length 0 found")];let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return Ux({key:e,value:t,valueSpec:{}})}function oV(n){const e=n.key,t=n.value;if(rs(t)==="array"){if(t.length<1)return[new vr(e,t,"array length at least 1 expected, length 0 found")];let i=[];for(let s=0;s<t.length;s++)i=i.concat(O6({key:`${e}[${s}]`,value:t[s]}));return i}else return O6({key:e,value:t})}function sV(n){const e=n.key,t=n.value,r=rs(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new vr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let l=0;l<t.length;l+=2)s=s.concat(RC({key:`${e}[${l}]`,value:t[l],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(AO({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function nU(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const l in t){t[l].id&&i.includes(t[l].id)&&e.push(new vr(r,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),i.push(t[l].id),t[l].url&&s.includes(t[l].url)&&e.push(new vr(r,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),s.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Kf({key:`${r}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Yg({key:r,value:t})}function aV(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=rs(e);if(e===void 0)return[];if(s!=="object")return[new vr("projection",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new vr(o,e[o],`unknown property "${o}"`)]);return l}function lV(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=rs(t);return r==="array"&&!uV(t)&&!AV(t)?[new vr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new vr(e,t,`projection expected, invalid type "${r}" found`)]}function AV(n){return!!["interpolate","step","literal"].includes(n[0])}function uV(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function cV(n){return!!n&&n.constructor===Object}function rU(n){return cV(n.value)?[]:[new vr(n.key,n.value,`object expected, ${rs(n.value)} found`)]}const S7={"*"(){return[]},array:AO,boolean:X$,number:Ux,color:O6,constants:QL,enum:RC,filter:uO,function:YL,layer:ZL,object:Kf,source:XL,light:JL,sky:eU,terrain:tU,projection:aV,projectionDefinition:lV,string:Yg,formatted:tV,resolvedImage:nV,padding:rV,numberArray:iV,colorArray:oV,variableAnchorOffsetCollection:sV,sprite:nU,state:rU};function B2(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=B2,t.expression&&Wy(NA(e))?YL(n):t.expression&&Qy(Qg(e))?Ty(n):t.type&&S7[t.type]?S7[t.type](n):Kf(By({},n,{valueSpec:t.type?r[t.type]:t}))}function iU(n){const e=n.value,t=n.key,r=Yg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new vr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new vr(t,e,'"glyphs" url must include a "{range}" token'))),r}function af(n,e=Es){let t=[];return t=t.concat(B2({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:B2,objectElementValidators:{glyphs:iU,"*"(){return[]}}})),n.constants&&(t=t.concat(QL({key:"constants",value:n.constants}))),oU(t)}af.source=Dp(Rp(XL));af.sprite=Dp(Rp(nU));af.glyphs=Dp(Rp(iU));af.light=Dp(Rp(JL));af.sky=Dp(Rp(eU));af.terrain=Dp(Rp(tU));af.state=Dp(Rp(rU));af.layer=Dp(Rp(ZL));af.filter=Dp(Rp(uO));af.paintProperty=Dp(Rp(VL));af.layoutProperty=Dp(Rp(HL));function Rp(n){return function(e){return n({...e,validateSpec:B2})}}function oU(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function Dp(n){return function(...e){return oU(n.apply(this,e))}}const hV=/("(?:[^\\"]|\\.)*")|[:,]/g;function dV(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,f){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,i);if(C===void 0)return C;const M=r-o.length-f;if(C.length<=M){const B=C.replace(hV,(D,R)=>R||`${D} `);if(B.length<=M)return B}if(i!=null&&(l=JSON.parse(C),i=void 0),typeof l=="object"&&l!==null){const B=o+t,D=[];let R=0,U,G;if(Array.isArray(l)){U="[",G="]";const{length:W}=l;for(;R<W;R++)D.push(s(l[R],B,R===W-1?0:1)||"null")}else{U="{",G="}";const W=Object.keys(l),{length:J}=W;for(;R<J;R++){const $=W[R],oe=`${JSON.stringify($)}: `,te=s(l[$],B,oe.length+(R===J-1?0:1));te!==void 0&&D.push(oe+te)}}if(D.length>0)return[U,t+D.join(`,
${B}`),G].join(`
${o}`)}return C}(n,"",0)}function E7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function fV(n,e=2){return n=E7(n,Es.$root),n.layers&&(n.layers=n.layers.map(t=>E7(t,Es.layer))),dV(n,{indent:e})}function T4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function B7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function I6(n,e){return typeof e=="string"&&e[0]==="@"?I6(n,n.constants[e]):e}function pV(n){return Array.isArray(n.stops)}function Ov(n,e,t){n[t]=n[e],delete n[e]}function mV(n){n.version=8,Z$(n,i=>{i.type==="video"&&i.url!==void 0&&Ov(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),hC(n,i=>{T4(i,s=>{s["symbol-min-distance"]!==void 0&&Ov(s,"symbol-min-distance","symbol-spacing")}),B7(i,s=>{s["background-image"]!==void 0&&Ov(s,"background-image","background-pattern"),s["line-image"]!==void 0&&Ov(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&Ov(s,"fill-image","fill-pattern")})}),lO(n,{paint:!0,layout:!0},i=>{const s=I6(n,i.value);pV(s)&&s.stops.forEach(l=>{l[1]=I6(n,l[1])}),i.set(s)}),delete n.constants,hC(n,i=>{T4(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),B7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(l=>{l[1]=s(l[1])}),i;throw new Error("unexpected font value")}hC(n,i=>{T4(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function gV(n){const e=[];return hC(n,t=>{t.filter&&(t.filter=cC(t.filter))}),lO(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{Qy(r)||(typeof r=="object"&&!Array.isArray(r)?(s(iO(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(WL(r)))}),n}function yV(n){return JSON.parse(vV(JSON.stringify(n)))}function vV(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,l,o]=r.slice(1);return[s,l]=[s,l].map(f=>f.endsWith("%")?f:`${parseFloat(f)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,l,o].filter(Boolean).join(",")})"`}return e})}function CV(n){let e=!1;if(n.version===7&&(n=mV(n),e=!0),n.version===8&&(e=!!gV(n),e=!0),lO(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(yV(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const ef=Es,_V={StyleExpression:GL,StylePropertyFunction:Kx,ZoomConstantExpression:S6,ZoomDependentExpression:E6,createExpression:Dx,createPropertyExpression:Fx,isExpression:Qy,isExpressionFilter:C_,isZoomExpression:F$,normalizePropertyExpression:K$},bV={convertFunction:iO,createFunction:rO,isFunction:Wy};var r2={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
 */var xV=r2.exports,O7;function MV(){return O7||(O7=1,function(n,e){(function(t,r){n.exports=r()})(xV,function(){var t={},r={};function i(l,o,f){if(r[l]=f,l==="index"){var C="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",M={};return r.shared(M),r.index(t,M),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),t}}i("shared",["exports"],function(l){function o(c,A,u,g){return new(u||(u=Promise))(function(x,k){function P(ne){try{q(g.next(ne))}catch(ae){k(ae)}}function N(ne){try{q(g.throw(ne))}catch(ae){k(ae)}}function q(ne){var ae;ne.done?x(ne.value):(ae=ne.value,ae instanceof u?ae:new u(function(ye){ye(ae)})).then(P,N)}q((g=g.apply(c,A||[])).next())})}function f(c,A){this.x=c,this.y=A}function C(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var M,B;typeof SuppressedError=="function"&&SuppressedError,f.prototype={clone(){return new f(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,A){return this.clone()._rotateAround(c,A)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const A=c.x-this.x,u=c.y-this.y;return A*A+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,A){return Math.atan2(this.x*A-this.y*c,this.x*c+this.y*A)},_matMult(c){const A=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=A,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const A=Math.cos(c),u=Math.sin(c),g=u*this.x+A*this.y;return this.x=A*this.x-u*this.y,this.y=g,this},_rotateAround(c,A){const u=Math.cos(c),g=Math.sin(c),x=A.y+g*(this.x-A.x)+u*(this.y-A.y);return this.x=A.x+u*(this.x-A.x)-g*(this.y-A.y),this.y=x,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:f},f.convert=function(c){if(c instanceof f)return c;if(Array.isArray(c))return new f(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new f(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var D=function(){if(B)return M;function c(A,u,g,x){this.cx=3*A,this.bx=3*(g-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(x-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=u,this.p2x=g,this.p2y=x}return B=1,M=c,c.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,u){if(u===void 0&&(u=1e-6),A<0)return 0;if(A>1)return 1;for(var g=A,x=0;x<8;x++){var k=this.sampleCurveX(g)-A;if(Math.abs(k)<u)return g;var P=this.sampleCurveDerivativeX(g);if(Math.abs(P)<1e-6)break;g-=k/P}var N=0,q=1;for(g=A,x=0;x<20&&(k=this.sampleCurveX(g),!(Math.abs(k-A)<u));x++)A>k?N=g:q=g,g=.5*(q-N)+N;return g},solve:function(A,u){return this.sampleCurveY(this.solveCurveX(A,u))}},M}(),R=C(D);let U,G;function W(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function J(){if(G==null&&(G=!1,W())){const A=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(A){for(let g=0;g<5*5;g++){const x=4*g;A.fillStyle=`rgb(${x},${x+1},${x+2})`,A.fillRect(g%5,Math.floor(g/5),1,1)}const u=A.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){G=!0;break}}}return G||!1}var $=1e-6,oe=typeof Float32Array<"u"?Float32Array:Array;function te(){var c=new oe(9);return oe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function H(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function re(){var c=new oe(3);return oe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function j(c){var A=c[0],u=c[1],g=c[2];return Math.sqrt(A*A+u*u+g*g)}function ue(c,A,u){var g=new oe(3);return g[0]=c,g[1]=A,g[2]=u,g}function me(c,A,u){return c[0]=A[0]+u[0],c[1]=A[1]+u[1],c[2]=A[2]+u[2],c}function ge(c,A,u){return c[0]=A[0]*u,c[1]=A[1]*u,c[2]=A[2]*u,c}function we(c,A,u){var g=A[0],x=A[1],k=A[2],P=u[0],N=u[1],q=u[2];return c[0]=x*q-k*N,c[1]=k*P-g*q,c[2]=g*N-x*P,c}var Ee,xe=j;function We(c,A,u){var g=A[0],x=A[1],k=A[2],P=A[3];return c[0]=u[0]*g+u[4]*x+u[8]*k+u[12]*P,c[1]=u[1]*g+u[5]*x+u[9]*k+u[13]*P,c[2]=u[2]*g+u[6]*x+u[10]*k+u[14]*P,c[3]=u[3]*g+u[7]*x+u[11]*k+u[15]*P,c}function be(){var c=new oe(4);return oe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function rt(c,A,u,g){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",k=Math.PI/360;A*=k,g*=k,u*=k;var P=Math.sin(A),N=Math.cos(A),q=Math.sin(u),ne=Math.cos(u),ae=Math.sin(g),ye=Math.cos(g);switch(x){case"xyz":c[0]=P*ne*ye+N*q*ae,c[1]=N*q*ye-P*ne*ae,c[2]=N*ne*ae+P*q*ye,c[3]=N*ne*ye-P*q*ae;break;case"xzy":c[0]=P*ne*ye-N*q*ae,c[1]=N*q*ye-P*ne*ae,c[2]=N*ne*ae+P*q*ye,c[3]=N*ne*ye+P*q*ae;break;case"yxz":c[0]=P*ne*ye+N*q*ae,c[1]=N*q*ye-P*ne*ae,c[2]=N*ne*ae-P*q*ye,c[3]=N*ne*ye+P*q*ae;break;case"yzx":c[0]=P*ne*ye+N*q*ae,c[1]=N*q*ye+P*ne*ae,c[2]=N*ne*ae-P*q*ye,c[3]=N*ne*ye-P*q*ae;break;case"zxy":c[0]=P*ne*ye-N*q*ae,c[1]=N*q*ye+P*ne*ae,c[2]=N*ne*ae+P*q*ye,c[3]=N*ne*ye-P*q*ae;break;case"zyx":c[0]=P*ne*ye-N*q*ae,c[1]=N*q*ye+P*ne*ae,c[2]=N*ne*ae-P*q*ye,c[3]=N*ne*ye+P*q*ae;break;default:throw new Error("Unknown angle order "+x)}return c}function Ct(){var c=new oe(2);return oe!=Float32Array&&(c[0]=0,c[1]=0),c}function at(c,A){var u=new oe(2);return u[0]=c,u[1]=A,u}re(),Ee=new oe(4),oe!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee[3]=0),re(),ue(1,0,0),ue(0,1,0),be(),be(),te(),Ct();const Je=8192;function ze(c,A,u){return A*(Je/(c.tileSize*Math.pow(2,u-c.tileID.overscaledZ)))}function Te(c,A){return(c%A+A)%A}function He(c,A,u){return c*(1-u)+A*u}function pt(c){if(c<=0)return 0;if(c>=1)return 1;const A=c*c,u=A*c;return 4*(c<.5?u:3*(c-A)+u-.75)}function kt(c,A,u,g){const x=new R(c,A,u,g);return k=>x.solve(k)}const ft=kt(.25,.1,.25,1);function Bt(c,A,u){return Math.min(u,Math.max(A,c))}function Tt(c,A,u){const g=u-A,x=((c-A)%g+g)%g+A;return x===A?u:x}function Le(c,...A){for(const u of A)for(const g in u)c[g]=u[g];return c}let Pe=1;function ke(c,A,u){const g={};for(const x in c)g[x]=A.call(this,c[x],x,c);return g}function Qe(c,A,u){const g={};for(const x in c)A.call(this,c[x],x,c)&&(g[x]=c[x]);return g}function _t(c){return Array.isArray(c)?c.map(_t):typeof c=="object"&&c?ke(c,_t):c}const gt={};function wt(c){gt[c]||(typeof console<"u"&&console.warn(c),gt[c]=!0)}function Qt(c,A,u){return(u.y-c.y)*(A.x-c.x)>(A.y-c.y)*(u.x-c.x)}function Ft(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let ln=null;function Vn(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Un(c,A,u,g,x){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(c,{timestamp:0});try{const P=k?.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const N=P.startsWith("BGR"),q=new Uint8ClampedArray(g*x*4);if(yield k.copyTo(q,function(ne,ae,ye,Ke,je){const Ve=4*Math.max(-ae,0),et=(Math.max(0,ye)-ye)*Ke*4+Ve,ut=4*Ke,Mt=Math.max(0,ae),Vt=Math.max(0,ye);return{rect:{x:Mt,y:Vt,width:Math.min(ne.width,ae+Ke)-Mt,height:Math.min(ne.height,ye+je)-Vt},layout:[{offset:et,stride:ut}]}}(c,A,u,g,x)),N)for(let ne=0;ne<q.length;ne+=4){const ae=q[ne];q[ne]=q[ne+2],q[ne+2]=ae}return q}finally{k.close()}})}let wn,Mn;function En(c,A,u,g){return c.addEventListener(A,u,g),{unsubscribe:()=>{c.removeEventListener(A,u,g)}}}function Mr(c){return c*Math.PI/180}function Hn(c){return c/Math.PI*180}const Pn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ne={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},he="AbortError";function ie(){return new Error(he)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function fe(c){return se.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Oe="global-dispatcher";class Ge extends Error{constructor(A,u,g,x){super(`AJAXError: ${u} (${A}): ${g}`),this.status=A,this.statusText=u,this.url=g,this.body=x}}const ct=()=>Ft(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,$e=function(c,A){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const g=fe(c.url);if(g)return g(c,A);if(Ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Oe},A)}if(!(/^file:/.test(u=c.url)||/^file:/.test(ct())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(g,x){return o(this,void 0,void 0,function*(){const k=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:ct(),signal:x.signal});let P,N;g.type!=="json"||k.headers.has("Accept")||k.headers.set("Accept","application/json");try{P=yield fetch(k)}catch(ne){throw new Ge(0,ne.message,g.url,new Blob)}if(!P.ok){const ne=yield P.blob();throw new Ge(P.status,P.statusText,g.url,ne)}N=g.type==="arrayBuffer"||g.type==="image"?P.arrayBuffer():g.type==="json"?P.json():P.text();const q=yield N;if(x.signal.aborted)throw ie();return{data:q,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}})}(c,A);if(Ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Oe},A)}var u;return function(g,x){return new Promise((k,P)=>{var N;const q=new XMLHttpRequest;q.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(q.responseType="arraybuffer");for(const ne in g.headers)q.setRequestHeader(ne,g.headers[ne]);g.type==="json"&&(q.responseType="text",!((N=g.headers)===null||N===void 0)&&N.Accept||q.setRequestHeader("Accept","application/json")),q.withCredentials=g.credentials==="include",q.onerror=()=>{P(new Error(q.statusText))},q.onload=()=>{if(!x.signal.aborted)if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let ne=q.response;if(g.type==="json")try{ne=JSON.parse(q.response)}catch(ae){return void P(ae)}k({data:ne,cacheControl:q.getResponseHeader("Cache-Control"),expires:q.getResponseHeader("Expires")})}else{const ne=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});P(new Ge(q.status,q.statusText,g.url,ne))}},x.signal.addEventListener("abort",()=>{q.abort(),P(ie())}),q.send(g.body)})}(c,A)};function De(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const A=new URL(c),u=window.location;return A.protocol===u.protocol&&A.host===u.host}function Ze(c,A,u){u[c]&&u[c].indexOf(A)!==-1||(u[c]=u[c]||[],u[c].push(A))}function m(c,A,u){if(u&&u[c]){const g=u[c].indexOf(A);g!==-1&&u[c].splice(g,1)}}class mt{constructor(A,u={}){Le(this,u),this.type=A}}class At extends mt{constructor(A,u={}){super("error",Le({error:A},u))}}class It{on(A,u){return this._listeners=this._listeners||{},Ze(A,u,this._listeners),{unsubscribe:()=>{this.off(A,u)}}}off(A,u){return m(A,u,this._listeners),m(A,u,this._oneTimeListeners),this}once(A,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(A,u,this._oneTimeListeners),this):new Promise(g=>this.once(A,g))}fire(A,u){typeof A=="string"&&(A=new mt(A,u||{}));const g=A.type;if(this.listens(g)){A.target=this;const x=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const N of x)N.call(this,A);const k=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const N of k)m(g,N,this._oneTimeListeners),N.call(this,A);const P=this._eventedParent;P&&(Le(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(A))}else A instanceof At&&console.error(A.error);return this}listens(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)}setEventedParent(A,u){return this._eventedParent=A,this._eventedParentData=u,this}}var nt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const en=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Tn(c,A){const u={};for(const g in c)g!=="ref"&&(u[g]=c[g]);return en.forEach(g=>{g in A&&(u[g]=A[g])}),u}function xn(c,A){if(Array.isArray(c)){if(!Array.isArray(A)||c.length!==A.length)return!1;for(let u=0;u<c.length;u++)if(!xn(c[u],A[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&A!==null){if(typeof A!="object"||Object.keys(c).length!==Object.keys(A).length)return!1;for(const u in c)if(!xn(c[u],A[u]))return!1;return!0}return c===A}function er(c,A){c.push(A)}function Qn(c,A,u){er(u,{command:"addSource",args:[c,A[c]]})}function Qr(c,A,u){er(A,{command:"removeSource",args:[c]}),u[c]=!0}function $r(c,A,u,g){Qr(c,u,g),Qn(c,A,u)}function Br(c,A,u){let g;for(g in c[u])if(Object.prototype.hasOwnProperty.call(c[u],g)&&g!=="data"&&!xn(c[u][g],A[u][g]))return!1;for(g in A[u])if(Object.prototype.hasOwnProperty.call(A[u],g)&&g!=="data"&&!xn(c[u][g],A[u][g]))return!1;return!0}function br(c,A,u,g,x,k){c=c||{},A=A||{};for(const P in c)Object.prototype.hasOwnProperty.call(c,P)&&(xn(c[P],A[P])||u.push({command:k,args:[g,P,A[P],x]}));for(const P in A)Object.prototype.hasOwnProperty.call(A,P)&&!Object.prototype.hasOwnProperty.call(c,P)&&(xn(c[P],A[P])||u.push({command:k,args:[g,P,A[P],x]}))}function or(c){return c.id}function ti(c,A){return c[A.id]=A,c}class bn{constructor(A,u,g,x){this.message=(A?`${A}: `:"")+g,x&&(this.identifier=x),u!=null&&u.__line__&&(this.line=u.__line__)}}function Vi(c,...A){for(const u of A)for(const g in u)c[g]=u[g];return c}class zr extends Error{constructor(A,u){super(u),this.message=u,this.key=A}}class $o{constructor(A,u=[]){this.parent=A,this.bindings={};for(const[g,x]of u)this.bindings[g]=x}concat(A){return new $o(this,A)}get(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(`${A} not found in scope.`)}has(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)}}const is={kind:"null"},Zn={kind:"number"},_i={kind:"string"},Kr={kind:"boolean"},ki={kind:"color"},oa={kind:"projectionDefinition"},os={kind:"object"},Gr={kind:"value"},qa={kind:"collator"},sa={kind:"formatted"},jo={kind:"padding"},Ds={kind:"colorArray"},yl={kind:"numberArray"},si={kind:"resolvedImage"},vA={kind:"variableAnchorOffsetCollection"};function Bs(c,A){return{kind:"array",itemType:c,N:A}}function Hr(c){if(c.kind==="array"){const A=Hr(c.itemType);return typeof c.N=="number"?`array<${A}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${A}>`}return c.kind}const Sr=[is,Zn,_i,Kr,ki,oa,sa,os,Bs(Gr),jo,yl,Ds,si,vA];function aa(c,A){if(A.kind==="error")return null;if(c.kind==="array"){if(A.kind==="array"&&(A.N===0&&A.itemType.kind==="value"||!aa(c.itemType,A.itemType))&&(typeof c.N!="number"||c.N===A.N))return null}else{if(c.kind===A.kind)return null;if(c.kind==="value"){for(const u of Sr)if(!aa(u,A))return null}}return`Expected ${Hr(c)} but found ${Hr(A)} instead.`}function vs(c,A){return A.some(u=>u.kind===c.kind)}function ss(c,A){return A.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function Ye(c,A){return c.kind==="array"&&A.kind==="array"?c.itemType.kind===A.itemType.kind&&typeof c.N=="number":c.kind===A.kind}const Et=.96422,gn=.82521,Nn=4/29,cn=6/29,sr=3*cn*cn,ji=cn*cn*cn,wo=Math.PI/180,xs=180/Math.PI;function va(c){return(c%=360)<0&&(c+=360),c}function CA([c,A,u,g]){let x,k;const P=cu((.2225045*(c=Ci(c))+.7168786*(A=Ci(A))+.0606169*(u=Ci(u)))/1);c===A&&A===u?x=k=P:(x=cu((.4360747*c+.3850649*A+.1430804*u)/Et),k=cu((.0139322*c+.0971045*A+.7141733*u)/gn));const N=116*P-16;return[N<0?0:N,500*(x-P),200*(P-k),g]}function Ci(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function cu(c){return c>ji?Math.pow(c,1/3):c/sr+Nn}function Hl([c,A,u,g]){let x=(c+16)/116,k=isNaN(A)?x:x+A/500,P=isNaN(u)?x:x-u/200;return x=1*Ca(x),k=Et*Ca(k),P=gn*Ca(P),[$a(3.1338561*k-1.6168667*x-.4906146*P),$a(-.9787684*k+1.9161415*x+.033454*P),$a(.0719453*k-.2289914*x+1.4052427*P),g]}function $a(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function Ca(c){return c>cn?c*c*c:sr*(c-Nn)}const wc=Object.hasOwn||function(c,A){return Object.prototype.hasOwnProperty.call(c,A)};function _a(c,A){return wc(c,A)?c[A]:void 0}function gi(c){return parseInt(c.padEnd(2,c),16)/255}function So(c,A){return yi(A?c/100:c,0,1)}function yi(c,A,u){return Math.min(Math.max(A,c),u)}function ol(c){return!c.some(Number.isNaN)}const cs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function sl(c,A,u){return c+u*(A-c)}function Fl(c,A,u){return c.map((g,x)=>sl(g,A[x],u))}class Bi{constructor(A,u,g,x=1,k=!0){this.r=A,this.g=u,this.b=g,this.a=x,k||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[A,u,g,x]))}static parse(A){if(A instanceof Bi)return A;if(typeof A!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=_a(cs,g);if(x){const[P,N,q]=x;return[P/255,N/255,q/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const P=g.length<6?1:2;let N=1;return[gi(g.slice(N,N+=P)),gi(g.slice(N,N+=P)),gi(g.slice(N,N+=P)),gi(g.slice(N,N+P)||"ff")]}if(g.startsWith("rgb")){const P=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt,Vt]=P,Pt=[ae||" ",je||" ",ut].join("");if(Pt==="  "||Pt==="  /"||Pt===",,"||Pt===",,,"){const Ut=[ne,Ke,et].join(""),an=Ut==="%%%"?100:Ut===""?255:0;if(an){const vn=[yi(+q/an,0,1),yi(+ye/an,0,1),yi(+Ve/an,0,1),Mt?So(+Mt,Vt):1];if(ol(vn))return vn}}return}}const k=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[P,N,q,ne,ae,ye,Ke,je,Ve]=k,et=[q||" ",ae||" ",Ke].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const ut=[+N,yi(+ne,0,100),yi(+ye,0,100),je?So(+je,Ve):1];if(ol(ut))return function([Mt,Vt,Pt,Ut]){function an(vn){const Rn=(vn+Mt/30)%12,yr=Vt*Math.min(Pt,1-Pt);return Pt-yr*Math.max(-1,Math.min(Rn-3,9-Rn,1))}return Mt=va(Mt),Vt/=100,Pt/=100,[an(0),an(8),an(4),Ut]}(ut)}}}(A);return u?new Bi(...u,!1):void 0}get rgb(){const{r:A,g:u,b:g,a:x}=this,k=x||1/0;return this.overwriteGetter("rgb",[A/k,u/k,g/k,x])}get hcl(){return this.overwriteGetter("hcl",function(A){const[u,g,x,k]=CA(A),P=Math.sqrt(g*g+x*x);return[Math.round(1e4*P)?va(Math.atan2(x,g)*xs):NaN,P,u,k]}(this.rgb))}get lab(){return this.overwriteGetter("lab",CA(this.rgb))}overwriteGetter(A,u){return Object.defineProperty(this,A,{value:u}),u}toString(){const[A,u,g,x]=this.rgb;return`rgba(${[A,u,g].map(k=>Math.round(255*k)).join(",")},${x})`}static interpolate(A,u,g,x="rgb"){switch(x){case"rgb":{const[k,P,N,q]=Fl(A.rgb,u.rgb,g);return new Bi(k,P,N,q,!1)}case"hcl":{const[k,P,N,q]=A.hcl,[ne,ae,ye,Ke]=u.hcl;let je,Ve;if(isNaN(k)||isNaN(ne))isNaN(k)?isNaN(ne)?je=NaN:(je=ne,N!==1&&N!==0||(Ve=ae)):(je=k,ye!==1&&ye!==0||(Ve=P));else{let Pt=ne-k;ne>k&&Pt>180?Pt-=360:ne<k&&k-ne>180&&(Pt+=360),je=k+g*Pt}const[et,ut,Mt,Vt]=function([Pt,Ut,an,vn]){return Pt=isNaN(Pt)?0:Pt*wo,Hl([an,Math.cos(Pt)*Ut,Math.sin(Pt)*Ut,vn])}([je,Ve??sl(P,ae,g),sl(N,ye,g),sl(q,Ke,g)]);return new Bi(et,ut,Mt,Vt,!1)}case"lab":{const[k,P,N,q]=Hl(Fl(A.lab,u.lab,g));return new Bi(k,P,N,q,!1)}}}}Bi.black=new Bi(0,0,0,1),Bi.white=new Bi(1,1,1,1),Bi.transparent=new Bi(0,0,0,0),Bi.red=new Bi(1,0,0,1);class vl{constructor(A,u,g){this.sensitivity=A?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(A,u){return this.collator.compare(A,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const al=["bottom","center","top"];class Eo{constructor(A,u,g,x,k,P){this.text=A,this.image=u,this.scale=g,this.fontStack=x,this.textColor=k,this.verticalAlign=P}}class go{constructor(A){this.sections=A}static fromString(A){return new go([new Eo(A,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(A=>A.text.length!==0||A.image&&A.image.name.length!==0)}static factory(A){return A instanceof go?A:go.fromString(A)}toString(){return this.sections.length===0?"":this.sections.map(A=>A.text).join("")}}class hs{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof hs)return A;if(typeof A=="number")return new hs([A,A,A,A]);if(Array.isArray(A)&&!(A.length<1||A.length>4)){for(const u of A)if(typeof u!="number")return;switch(A.length){case 1:A=[A[0],A[0],A[0],A[0]];break;case 2:A=[A[0],A[1],A[0],A[1]];break;case 3:A=[A[0],A[1],A[2],A[1]]}return new hs(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,u,g){return new hs(Fl(A.values,u.values,g))}}class as{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof as)return A;if(typeof A=="number")return new as([A]);if(Array.isArray(A)){for(const u of A)if(typeof u!="number")return;return new as(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,u,g){return new as(Fl(A.values,u.values,g))}}class yo{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof yo)return A;if(typeof A=="string"){const g=Bi.parse(A);return g?new yo([g]):void 0}if(!Array.isArray(A))return;const u=[];for(const g of A){if(typeof g!="string")return;const x=Bi.parse(g);if(!x)return;u.push(x)}return new yo(u)}toString(){return JSON.stringify(this.values)}static interpolate(A,u,g,x="rgb"){const k=[];if(A.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${A.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let P=0;P<A.values.length;P++)k.push(Bi.interpolate(A.values[P],u.values[P],g,x));return new yo(k)}}class Xi extends Error{constructor(A){super(A),this.name="RuntimeError"}toJSON(){return this.message}}const Sc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Cs{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof Cs)return A;if(Array.isArray(A)&&!(A.length<1)&&A.length%2==0){for(let u=0;u<A.length;u+=2){const g=A[u],x=A[u+1];if(typeof g!="string"||!Sc.has(g)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new Cs(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,u,g){const x=A.values,k=u.values;if(x.length!==k.length)throw new Xi(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${u.toString()}`);const P=[];for(let N=0;N<x.length;N+=2){if(x[N]!==k[N])throw new Xi(`Cannot interpolate values containing mismatched anchors. from[${N}]: ${x[N]}, to[${N}]: ${k[N]}`);P.push(x[N]);const[q,ne]=x[N+1],[ae,ye]=k[N+1];P.push([sl(q,ae,g),sl(ne,ye,g)])}return new Cs(P)}}class ba{constructor(A){this.name=A.name,this.available=A.available}toString(){return this.name}static fromString(A){return A?new ba({name:A,available:!1}):null}}class Ns{constructor(A,u,g){this.from=A,this.to=u,this.transition=g}static interpolate(A,u,g){return new Ns(A,u,g)}static parse(A){return A instanceof Ns?A:Array.isArray(A)&&A.length===3&&typeof A[0]=="string"&&typeof A[1]=="string"&&typeof A[2]=="number"?new Ns(A[0],A[1],A[2]):typeof A=="object"&&typeof A.from=="string"&&typeof A.to=="string"&&typeof A.transition=="number"?new Ns(A.from,A.to,A.transition):typeof A=="string"?new Ns(A,A,1):void 0}}function Ri(c,A,u,g){return typeof c=="number"&&c>=0&&c<=255&&typeof A=="number"&&A>=0&&A<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[c,A,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[c,A,u,g]:[c,A,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Cl(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Ns||c instanceof Bi||c instanceof vl||c instanceof go||c instanceof hs||c instanceof as||c instanceof yo||c instanceof Cs||c instanceof ba)return!0;if(Array.isArray(c)){for(const A of c)if(!Cl(A))return!1;return!0}if(typeof c=="object"){for(const A in c)if(!Cl(c[A]))return!1;return!0}return!1}function Zr(c){if(c===null)return is;if(typeof c=="string")return _i;if(typeof c=="boolean")return Kr;if(typeof c=="number")return Zn;if(c instanceof Bi)return ki;if(c instanceof Ns)return oa;if(c instanceof vl)return qa;if(c instanceof go)return sa;if(c instanceof hs)return jo;if(c instanceof as)return yl;if(c instanceof yo)return Ds;if(c instanceof Cs)return vA;if(c instanceof ba)return si;if(Array.isArray(c)){const A=c.length;let u;for(const g of c){const x=Zr(g);if(u){if(u===x)continue;u=Gr;break}u=x}return Bs(u||Gr,A)}return os}function Cr(c){const A=typeof c;return c===null?"":A==="string"||A==="number"||A==="boolean"?String(c):c instanceof Bi||c instanceof Ns||c instanceof go||c instanceof hs||c instanceof as||c instanceof yo||c instanceof Cs||c instanceof ba?c.toString():JSON.stringify(c)}class Wi{constructor(A,u){this.type=A,this.value=u}static parse(A,u){if(A.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${A.length-1} instead.`);if(!Cl(A[1]))return u.error("invalid value");const g=A[1];let x=Zr(g);const k=u.expectedType;return x.kind!=="array"||x.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(x=k),new Wi(x,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ee={string:_i,number:Zn,boolean:Kr,object:os};class Ie{constructor(A,u){this.type=A,this.args=u}static parse(A,u){if(A.length<2)return u.error("Expected at least one argument.");let g,x=1;const k=A[0];if(k==="array"){let N,q;if(A.length>2){const ne=A[1];if(typeof ne!="string"||!(ne in ee)||ne==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);N=ee[ne],x++}else N=Gr;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return u.error('The length argument to "array" must be a positive integer literal',2);q=A[2],x++}g=Bs(N,q)}else{if(!ee[k])throw new Error(`Types doesn't contain name = ${k}`);g=ee[k]}const P=[];for(;x<A.length;x++){const N=u.parse(A[x],x,Gr);if(!N)return null;P.push(N)}return new Ie(g,P)}evaluate(A){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(A);if(!aa(this.type,Zr(g)))return g;if(u===this.args.length-1)throw new Xi(`Expected value to be of type ${Hr(this.type)}, but found ${Hr(Zr(g))} instead.`)}throw new Error}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const st={"to-boolean":Kr,"to-color":ki,"to-number":Zn,"to-string":_i};class Yt{constructor(A,u){this.type=A,this.args=u}static parse(A,u){if(A.length<2)return u.error("Expected at least one argument.");const g=A[0];if(!st[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&A.length!==2)return u.error("Expected one argument.");const x=st[g],k=[];for(let P=1;P<A.length;P++){const N=u.parse(A[P],P,Gr);if(!N)return null;k.push(N)}return new Yt(x,k)}evaluate(A){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(A);case"color":{let u,g;for(const x of this.args){if(u=x.evaluate(A),g=null,u instanceof Bi)return u;if(typeof u=="string"){const k=A.parseColor(u);if(k)return k}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Ri(u[0],u[1],u[2],u[3]),!g))return new Bi(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Xi(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(A);const x=hs.parse(u);if(x)return x}throw new Xi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const g of this.args){u=g.evaluate(A);const x=as.parse(u);if(x)return x}throw new Xi(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const g of this.args){u=g.evaluate(A);const x=yo.parse(u);if(x)return x}throw new Xi(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(A);const x=Cs.parse(u);if(x)return x}throw new Xi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(A),u===null)return 0;const x=Number(u);if(!isNaN(x))return x}throw new Xi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return go.fromString(Cr(this.args[0].evaluate(A)));case"resolvedImage":return ba.fromString(Cr(this.args[0].evaluate(A)));case"projectionDefinition":return this.args[0].evaluate(A);default:return Cr(this.args[0].evaluate(A))}}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const wr=["Unknown","Point","LineString","Polygon"];class zn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(A){let u=this._parseColorCache.get(A);return u||(u=Bi.parse(A),this._parseColorCache.set(A,u)),u}}class qr{constructor(A,u,g=[],x,k=new $o,P=[]){this.registry=A,this.path=g,this.key=g.map(N=>`[${N}]`).join(""),this.scope=k,this.errors=P,this.expectedType=x,this._isConstant=u}parse(A,u,g,x,k={}){return u?this.concat(u,g,x)._parse(A,k):this._parse(A,k)}_parse(A,u){function g(x,k,P){return P==="assert"?new Ie(k,[x]):P==="coerce"?new Yt(k,[x]):x}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=A[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[x];if(k){let P=k.parse(A,this);if(!P)return null;if(this.expectedType){const N=this.expectedType,q=P.type;if(N.kind!=="string"&&N.kind!=="number"&&N.kind!=="boolean"&&N.kind!=="object"&&N.kind!=="array"||q.kind!=="value"){if(N.kind==="projectionDefinition"&&["string","array"].includes(q.kind)||["color","formatted","resolvedImage"].includes(N.kind)&&["value","string"].includes(q.kind)||["padding","numberArray"].includes(N.kind)&&["value","number","array"].includes(q.kind)||N.kind==="colorArray"&&["value","string","array"].includes(q.kind)||N.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(q.kind))P=g(P,N,u.typeAnnotation||"coerce");else if(this.checkSubtype(N,q))return null}else P=g(P,N,u.typeAnnotation||"assert")}if(!(P instanceof Wi)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const N=new zn;try{P=new Wi(P.type,P.evaluate(N))}catch(q){return this.error(q.message),null}}return P}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(A===void 0?"'undefined' value invalid. Use null instead.":typeof A=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof A} instead.`)}concat(A,u,g){const x=typeof A=="number"?this.path.concat(A):this.path,k=g?this.scope.concat(g):this.scope;return new qr(this.registry,this._isConstant,x,u||null,k,this.errors)}error(A,...u){const g=`${this.key}${u.map(x=>`[${x}]`).join("")}`;this.errors.push(new zr(g,A))}checkSubtype(A,u){const g=aa(A,u);return g&&this.error(g),g}}class ai{constructor(A,u){this.type=u.type,this.bindings=[].concat(A),this.result=u}evaluate(A){return this.result.evaluate(A)}eachChild(A){for(const u of this.bindings)A(u[1]);A(this.result)}static parse(A,u){if(A.length<4)return u.error(`Expected at least 3 arguments, but found ${A.length-1} instead.`);const g=[];for(let k=1;k<A.length-1;k+=2){const P=A[k];if(typeof P!="string")return u.error(`Expected string, but found ${typeof P} instead.`,k);if(/[^a-zA-Z0-9_]/.test(P))return u.error("Variable names must contain only alphanumeric characters or '_'.",k);const N=u.parse(A[k+1],k+1);if(!N)return null;g.push([P,N])}const x=u.parse(A[A.length-1],A.length-1,u.expectedType,g);return x?new ai(g,x):null}outputDefined(){return this.result.outputDefined()}}class Er{constructor(A,u){this.type=u.type,this.name=A,this.boundExpression=u}static parse(A,u){if(A.length!==2||typeof A[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=A[1];return u.scope.has(g)?new Er(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(A){return this.boundExpression.evaluate(A)}eachChild(){}outputDefined(){return!1}}class Xr{constructor(A,u,g){this.type=A,this.index=u,this.input=g}static parse(A,u){if(A.length!==3)return u.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const g=u.parse(A[1],1,Zn),x=u.parse(A[2],2,Bs(u.expectedType||Gr));return g&&x?new Xr(x.type.itemType,g,x):null}evaluate(A){const u=this.index.evaluate(A),g=this.input.evaluate(A);if(u<0)throw new Xi(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Xi(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Xi(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(A){A(this.index),A(this.input)}outputDefined(){return!1}}class Hi{constructor(A,u){this.type=Kr,this.needle=A,this.haystack=u}static parse(A,u){if(A.length!==3)return u.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const g=u.parse(A[1],1,Gr),x=u.parse(A[2],2,Gr);return g&&x?vs(g.type,[Kr,_i,Zn,is,Gr])?new Hi(g,x):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(g.type)} instead`):null}evaluate(A){const u=this.needle.evaluate(A),g=this.haystack.evaluate(A);if(!g)return!1;if(!ss(u,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(Zr(u))} instead.`);if(!ss(g,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${Hr(Zr(g))} instead.`);return g.indexOf(u)>=0}eachChild(A){A(this.needle),A(this.haystack)}outputDefined(){return!0}}class Ji{constructor(A,u,g){this.type=Zn,this.needle=A,this.haystack=u,this.fromIndex=g}static parse(A,u){if(A.length<=2||A.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const g=u.parse(A[1],1,Gr),x=u.parse(A[2],2,Gr);if(!g||!x)return null;if(!vs(g.type,[Kr,_i,Zn,is,Gr]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(g.type)} instead`);if(A.length===4){const k=u.parse(A[3],3,Zn);return k?new Ji(g,x,k):null}return new Ji(g,x)}evaluate(A){const u=this.needle.evaluate(A),g=this.haystack.evaluate(A);if(!ss(u,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(Zr(u))} instead.`);let x;if(this.fromIndex&&(x=this.fromIndex.evaluate(A)),ss(g,["string"])){const k=g.indexOf(u,x);return k===-1?-1:[...g.slice(0,k)].length}if(ss(g,["array"]))return g.indexOf(u,x);throw new Xi(`Expected second argument to be of type array or string, but found ${Hr(Zr(g))} instead.`)}eachChild(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)}outputDefined(){return!1}}class ni{constructor(A,u,g,x,k,P){this.inputType=A,this.type=u,this.input=g,this.cases=x,this.outputs=k,this.otherwise=P}static parse(A,u){if(A.length<5)return u.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if(A.length%2!=1)return u.error("Expected an even number of arguments.");let g,x;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);const k={},P=[];for(let ne=2;ne<A.length-1;ne+=2){let ae=A[ne];const ye=A[ne+1];Array.isArray(ae)||(ae=[ae]);const Ke=u.concat(ne);if(ae.length===0)return Ke.error("Expected at least one branch label.");for(const Ve of ae){if(typeof Ve!="number"&&typeof Ve!="string")return Ke.error("Branch labels must be numbers or strings.");if(typeof Ve=="number"&&Math.abs(Ve)>Number.MAX_SAFE_INTEGER)return Ke.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ve=="number"&&Math.floor(Ve)!==Ve)return Ke.error("Numeric branch labels must be integer values.");if(g){if(Ke.checkSubtype(g,Zr(Ve)))return null}else g=Zr(Ve);if(k[String(Ve)]!==void 0)return Ke.error("Branch labels must be unique.");k[String(Ve)]=P.length}const je=u.parse(ye,ne,x);if(!je)return null;x=x||je.type,P.push(je)}const N=u.parse(A[1],1,Gr);if(!N)return null;const q=u.parse(A[A.length-1],A.length-1,x);return q?N.type.kind!=="value"&&u.concat(1).checkSubtype(g,N.type)?null:new ni(g,x,N,k,P,q):null}evaluate(A){const u=this.input.evaluate(A);return(Zr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(A)}eachChild(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)}outputDefined(){return this.outputs.every(A=>A.outputDefined())&&this.otherwise.outputDefined()}}class di{constructor(A,u,g){this.type=A,this.branches=u,this.otherwise=g}static parse(A,u){if(A.length<4)return u.error(`Expected at least 3 arguments, but found only ${A.length-1}.`);if(A.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const x=[];for(let P=1;P<A.length-1;P+=2){const N=u.parse(A[P],P,Kr);if(!N)return null;const q=u.parse(A[P+1],P+1,g);if(!q)return null;x.push([N,q]),g=g||q.type}const k=u.parse(A[A.length-1],A.length-1,g);if(!k)return null;if(!g)throw new Error("Can't infer output type");return new di(g,x,k)}evaluate(A){for(const[u,g]of this.branches)if(u.evaluate(A))return g.evaluate(A);return this.otherwise.evaluate(A)}eachChild(A){for(const[u,g]of this.branches)A(u),A(g);A(this.otherwise)}outputDefined(){return this.branches.every(([A,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class lo{constructor(A,u,g,x){this.type=A,this.input=u,this.beginIndex=g,this.endIndex=x}static parse(A,u){if(A.length<=2||A.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const g=u.parse(A[1],1,Gr),x=u.parse(A[2],2,Zn);if(!g||!x)return null;if(!vs(g.type,[Bs(Gr),_i,Gr]))return u.error(`Expected first argument to be of type array or string, but found ${Hr(g.type)} instead`);if(A.length===4){const k=u.parse(A[3],3,Zn);return k?new lo(g.type,g,x,k):null}return new lo(g.type,g,x)}evaluate(A){const u=this.input.evaluate(A),g=this.beginIndex.evaluate(A);let x;if(this.endIndex&&(x=this.endIndex.evaluate(A)),ss(u,["string"]))return[...u].slice(g,x).join("");if(ss(u,["array"]))return u.slice(g,x);throw new Xi(`Expected first argument to be of type array or string, but found ${Hr(Zr(u))} instead.`)}eachChild(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)}outputDefined(){return!1}}function zi(c,A){const u=c.length-1;let g,x,k=0,P=u,N=0;for(;k<=P;)if(N=Math.floor((k+P)/2),g=c[N],x=c[N+1],g<=A){if(N===u||A<x)return N;k=N+1}else{if(!(g>A))throw new Xi("Input is not a number.");P=N-1}return 0}class Oi{constructor(A,u,g){this.type=A,this.input=u,this.labels=[],this.outputs=[];for(const[x,k]of g)this.labels.push(x),this.outputs.push(k)}static parse(A,u){if(A.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(A[1],1,Zn);if(!g)return null;const x=[];let k=null;u.expectedType&&u.expectedType.kind!=="value"&&(k=u.expectedType);for(let P=1;P<A.length;P+=2){const N=P===1?-1/0:A[P],q=A[P+1],ne=P,ae=P+1;if(typeof N!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(x.length&&x[x.length-1][0]>=N)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ne);const ye=u.parse(q,ae,k);if(!ye)return null;k=k||ye.type,x.push([N,ye])}return new Oi(k,g,x)}evaluate(A){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(A);const x=this.input.evaluate(A);if(x<=u[0])return g[0].evaluate(A);const k=u.length;return x>=u[k-1]?g[k-1].evaluate(A):g[zi(u,x)].evaluate(A)}eachChild(A){A(this.input);for(const u of this.outputs)A(u)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function la(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ea,_A,Gs=function(){if(_A)return Ea;function c(A,u,g,x){this.cx=3*A,this.bx=3*(g-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(x-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=u,this.p2x=g,this.p2y=x}return _A=1,Ea=c,c.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,u){if(u===void 0&&(u=1e-6),A<0)return 0;if(A>1)return 1;for(var g=A,x=0;x<8;x++){var k=this.sampleCurveX(g)-A;if(Math.abs(k)<u)return g;var P=this.sampleCurveDerivativeX(g);if(Math.abs(P)<1e-6)break;g-=k/P}var N=0,q=1;for(g=A,x=0;x<20&&(k=this.sampleCurveX(g),!(Math.abs(k-A)<u));x++)A>k?N=g:q=g,g=.5*(q-N)+N;return g},solve:function(A,u){return this.sampleCurveY(this.solveCurveX(A,u))}},Ea}(),$c=la(Gs);class Vo{constructor(A,u,g,x,k){this.type=A,this.operator=u,this.interpolation=g,this.input=x,this.labels=[],this.outputs=[];for(const[P,N]of k)this.labels.push(P),this.outputs.push(N)}static interpolationFactor(A,u,g,x){let k=0;if(A.name==="exponential")k=Ec(u,A.base,g,x);else if(A.name==="linear")k=Ec(u,1,g,x);else if(A.name==="cubic-bezier"){const P=A.controlPoints;k=new $c(P[0],P[1],P[2],P[3]).solve(Ec(u,1,g,x))}return k}static parse(A,u){let[g,x,k,...P]=A;if(!Array.isArray(x)||x.length===0)return u.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const ne=x[1];if(typeof ne!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:ne}}else{if(x[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const ne=x.slice(1);if(ne.length!==4||ne.some(ae=>typeof ae!="number"||ae<0||ae>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:ne}}}if(A.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(k=u.parse(k,2,Zn),!k)return null;const N=[];let q=null;g!=="interpolate-hcl"&&g!=="interpolate-lab"||u.expectedType==Ds?u.expectedType&&u.expectedType.kind!=="value"&&(q=u.expectedType):q=ki;for(let ne=0;ne<P.length;ne+=2){const ae=P[ne],ye=P[ne+1],Ke=ne+3,je=ne+4;if(typeof ae!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ke);if(N.length&&N[N.length-1][0]>=ae)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ke);const Ve=u.parse(ye,je,q);if(!Ve)return null;q=q||Ve.type,N.push([ae,Ve])}return Ye(q,Zn)||Ye(q,oa)||Ye(q,ki)||Ye(q,jo)||Ye(q,yl)||Ye(q,Ds)||Ye(q,vA)||Ye(q,Bs(Zn))?new Vo(q,g,x,k,N):u.error(`Type ${Hr(q)} is not interpolatable.`)}evaluate(A){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(A);const x=this.input.evaluate(A);if(x<=u[0])return g[0].evaluate(A);const k=u.length;if(x>=u[k-1])return g[k-1].evaluate(A);const P=zi(u,x),N=Vo.interpolationFactor(this.interpolation,x,u[P],u[P+1]),q=g[P].evaluate(A),ne=g[P+1].evaluate(A);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return sl(q,ne,N);case"color":return Bi.interpolate(q,ne,N);case"padding":return hs.interpolate(q,ne,N);case"colorArray":return yo.interpolate(q,ne,N);case"numberArray":return as.interpolate(q,ne,N);case"variableAnchorOffsetCollection":return Cs.interpolate(q,ne,N);case"array":return Fl(q,ne,N);case"projectionDefinition":return Ns.interpolate(q,ne,N)}case"interpolate-hcl":switch(this.type.kind){case"color":return Bi.interpolate(q,ne,N,"hcl");case"colorArray":return yo.interpolate(q,ne,N,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Bi.interpolate(q,ne,N,"lab");case"colorArray":return yo.interpolate(q,ne,N,"lab")}}}eachChild(A){A(this.input);for(const u of this.outputs)A(u)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function Ec(c,A,u,g){const x=g-u,k=c-u;return x===0?0:A===1?k/x:(Math.pow(A,k)-1)/(Math.pow(A,x)-1)}const jA={color:Bi.interpolate,number:sl,padding:hs.interpolate,numberArray:as.interpolate,colorArray:yo.interpolate,variableAnchorOffsetCollection:Cs.interpolate,array:Fl};class hu{constructor(A,u){this.type=A,this.args=u}static parse(A,u){if(A.length<2)return u.error("Expected at least one argument.");let g=null;const x=u.expectedType;x&&x.kind!=="value"&&(g=x);const k=[];for(const N of A.slice(1)){const q=u.parse(N,1+k.length,g,void 0,{typeAnnotation:"omit"});if(!q)return null;g=g||q.type,k.push(q)}if(!g)throw new Error("No output type");const P=x&&k.some(N=>aa(x,N.type));return new hu(P?Gr:g,k)}evaluate(A){let u,g=null,x=0;for(const k of this.args)if(x++,g=k.evaluate(A),g&&g instanceof ba&&!g.available&&(u||(u=g.name),g=null,x===this.args.length&&(g=u)),g!==null)break;return g}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}function Vc(c,A){return c==="=="||c==="!="?A.kind==="boolean"||A.kind==="string"||A.kind==="number"||A.kind==="null"||A.kind==="value":A.kind==="string"||A.kind==="number"||A.kind==="value"}function Mh(c,A,u,g){return g.compare(A,u)===0}function so(c,A,u){const g=c!=="=="&&c!=="!=";return class sU{constructor(k,P,N){this.type=Kr,this.lhs=k,this.rhs=P,this.collator=N,this.hasUntypedArgument=k.type.kind==="value"||P.type.kind==="value"}static parse(k,P){if(k.length!==3&&k.length!==4)return P.error("Expected two or three arguments.");const N=k[0];let q=P.parse(k[1],1,Gr);if(!q)return null;if(!Vc(N,q.type))return P.concat(1).error(`"${N}" comparisons are not supported for type '${Hr(q.type)}'.`);let ne=P.parse(k[2],2,Gr);if(!ne)return null;if(!Vc(N,ne.type))return P.concat(2).error(`"${N}" comparisons are not supported for type '${Hr(ne.type)}'.`);if(q.type.kind!==ne.type.kind&&q.type.kind!=="value"&&ne.type.kind!=="value")return P.error(`Cannot compare types '${Hr(q.type)}' and '${Hr(ne.type)}'.`);g&&(q.type.kind==="value"&&ne.type.kind!=="value"?q=new Ie(ne.type,[q]):q.type.kind!=="value"&&ne.type.kind==="value"&&(ne=new Ie(q.type,[ne])));let ae=null;if(k.length===4){if(q.type.kind!=="string"&&ne.type.kind!=="string"&&q.type.kind!=="value"&&ne.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(ae=P.parse(k[3],3,qa),!ae)return null}return new sU(q,ne,ae)}evaluate(k){const P=this.lhs.evaluate(k),N=this.rhs.evaluate(k);if(g&&this.hasUntypedArgument){const q=Zr(P),ne=Zr(N);if(q.kind!==ne.kind||q.kind!=="string"&&q.kind!=="number")throw new Xi(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${q.kind}, ${ne.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const q=Zr(P),ne=Zr(N);if(q.kind!=="string"||ne.kind!=="string")return A(k,P,N)}return this.collator?u(k,P,N,this.collator.evaluate(k)):A(k,P,N)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const ec=so("==",function(c,A,u){return A===u},Mh),td=so("!=",function(c,A,u){return A!==u},function(c,A,u,g){return!Mh(0,A,u,g)}),zp=so("<",function(c,A,u){return A<u},function(c,A,u,g){return g.compare(A,u)<0}),Hc=so(">",function(c,A,u){return A>u},function(c,A,u,g){return g.compare(A,u)>0}),nd=so("<=",function(c,A,u){return A<=u},function(c,A,u,g){return g.compare(A,u)<=0}),Np=so(">=",function(c,A,u){return A>=u},function(c,A,u,g){return g.compare(A,u)>=0});class Af{constructor(A,u,g){this.type=qa,this.locale=g,this.caseSensitive=A,this.diacriticSensitive=u}static parse(A,u){if(A.length!==2)return u.error("Expected one argument.");const g=A[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const x=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Kr);if(!x)return null;const k=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Kr);if(!k)return null;let P=null;return g.locale&&(P=u.parse(g.locale,1,_i),!P)?null:new Af(x,k,P)}evaluate(A){return new vl(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)}eachChild(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)}outputDefined(){return!1}}class uf{constructor(A,u,g,x,k){this.type=_i,this.number=A,this.locale=u,this.currency=g,this.minFractionDigits=x,this.maxFractionDigits=k}static parse(A,u){if(A.length!==3)return u.error("Expected two arguments.");const g=u.parse(A[1],1,Zn);if(!g)return null;const x=A[2];if(typeof x!="object"||Array.isArray(x))return u.error("NumberFormat options argument must be an object.");let k=null;if(x.locale&&(k=u.parse(x.locale,1,_i),!k))return null;let P=null;if(x.currency&&(P=u.parse(x.currency,1,_i),!P))return null;let N=null;if(x["min-fraction-digits"]&&(N=u.parse(x["min-fraction-digits"],1,Zn),!N))return null;let q=null;return x["max-fraction-digits"]&&(q=u.parse(x["max-fraction-digits"],1,Zn),!q)?null:new uf(g,k,P,N,q)}evaluate(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))}eachChild(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)}outputDefined(){return!1}}class bA{constructor(A){this.type=sa,this.sections=A}static parse(A,u){if(A.length<2)return u.error("Expected at least one argument.");const g=A[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const x=[];let k=!1;for(let P=1;P<=A.length-1;++P){const N=A[P];if(k&&typeof N=="object"&&!Array.isArray(N)){k=!1;let q=null;if(N["font-scale"]&&(q=u.parse(N["font-scale"],1,Zn),!q))return null;let ne=null;if(N["text-font"]&&(ne=u.parse(N["text-font"],1,Bs(_i)),!ne))return null;let ae=null;if(N["text-color"]&&(ae=u.parse(N["text-color"],1,ki),!ae))return null;let ye=null;if(N["vertical-align"]){if(typeof N["vertical-align"]=="string"&&!al.includes(N["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${N["vertical-align"]}' instead.`);if(ye=u.parse(N["vertical-align"],1,_i),!ye)return null}const Ke=x[x.length-1];Ke.scale=q,Ke.font=ne,Ke.textColor=ae,Ke.verticalAlign=ye}else{const q=u.parse(A[P],1,Gr);if(!q)return null;const ne=q.type.kind;if(ne!=="string"&&ne!=="value"&&ne!=="null"&&ne!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,x.push({content:q,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bA(x)}evaluate(A){return new go(this.sections.map(u=>{const g=u.content.evaluate(A);return Zr(g)===si?new Eo("",g,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(A):null):new Eo(Cr(g),null,u.scale?u.scale.evaluate(A):null,u.font?u.font.evaluate(A).join(","):null,u.textColor?u.textColor.evaluate(A):null,u.verticalAlign?u.verticalAlign.evaluate(A):null)}))}eachChild(A){for(const u of this.sections)A(u.content),u.scale&&A(u.scale),u.font&&A(u.font),u.textColor&&A(u.textColor),u.verticalAlign&&A(u.verticalAlign)}outputDefined(){return!1}}class Fs{constructor(A){this.type=si,this.input=A}static parse(A,u){if(A.length!==2)return u.error("Expected two arguments.");const g=u.parse(A[1],1,_i);return g?new Fs(g):u.error("No image name provided.")}evaluate(A){const u=this.input.evaluate(A),g=ba.fromString(u);return g&&A.availableImages&&(g.available=A.availableImages.indexOf(u)>-1),g}eachChild(A){A(this.input)}outputDefined(){return!1}}class rd{constructor(A){this.type=Zn,this.input=A}static parse(A,u){if(A.length!==2)return u.error(`Expected 1 argument, but found ${A.length-1} instead.`);const g=u.parse(A[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Hr(g.type)} instead.`):new rd(g):null}evaluate(A){const u=this.input.evaluate(A);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Xi(`Expected value to be of type string or array, but found ${Hr(Zr(u))} instead.`)}eachChild(A){A(this.input)}outputDefined(){return!1}}const WA=8192;function id(c,A){const u=(180+c[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,x=Math.pow(2,A.z);return[Math.round(u*x*WA),Math.round(g*x*WA)]}function od(c,A){const u=Math.pow(2,A.z);return[(x=(c[0]/WA+A.x)/u,360*x-180),(g=(c[1]/WA+A.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,x}function Bc(c,A){c[0]=Math.min(c[0],A[0]),c[1]=Math.min(c[1],A[1]),c[2]=Math.max(c[2],A[0]),c[3]=Math.max(c[3],A[1])}function sd(c,A){return!(c[0]<=A[0]||c[2]>=A[2]||c[1]<=A[1]||c[3]>=A[3])}function Qf(c,A,u){const g=c[0]-A[0],x=c[1]-A[1],k=c[0]-u[0],P=c[1]-u[1];return g*P-k*x==0&&g*k<=0&&x*P<=0}function wh(c,A,u,g){return(x=[g[0]-u[0],g[1]-u[1]])[0]*(k=[A[0]-c[0],A[1]-c[1]])[1]-x[1]*k[0]!=0&&!(!xA(c,A,u,g)||!xA(u,g,c,A));var x,k}function Yf(c,A,u){for(const g of u)for(let x=0;x<g.length-1;++x)if(wh(c,A,g[x],g[x+1]))return!0;return!1}function Sh(c,A,u=!1){let g=!1;for(const N of A)for(let q=0;q<N.length-1;q++){if(Qf(c,N[q],N[q+1]))return u;(k=N[q])[1]>(x=c)[1]!=(P=N[q+1])[1]>x[1]&&x[0]<(P[0]-k[0])*(x[1]-k[1])/(P[1]-k[1])+k[0]&&(g=!g)}var x,k,P;return g}function cf(c,A){for(const u of A)if(Sh(c,u))return!0;return!1}function Kl(c,A){for(const u of c)if(!Sh(u,A))return!1;for(let u=0;u<c.length-1;++u)if(Yf(c[u],c[u+1],A))return!1;return!0}function Od(c,A){for(const u of A)if(Kl(c,u))return!0;return!1}function xA(c,A,u,g){const x=g[0]-u[0],k=g[1]-u[1],P=(c[0]-u[0])*k-x*(c[1]-u[1]),N=(A[0]-u[0])*k-x*(A[1]-u[1]);return P>0&&N<0||P<0&&N>0}function du(c,A,u){const g=[];for(let x=0;x<c.length;x++){const k=[];for(let P=0;P<c[x].length;P++){const N=id(c[x][P],u);Bc(A,N),k.push(N)}g.push(k)}return g}function Eh(c,A,u){const g=[];for(let x=0;x<c.length;x++){const k=du(c[x],A,u);g.push(k)}return g}function Bh(c,A,u,g){if(c[0]<u[0]||c[0]>u[2]){const x=.5*g;let k=c[0]-u[0]>x?-g:u[0]-c[0]>x?g:0;k===0&&(k=c[0]-u[2]>x?-g:u[2]-c[0]>x?g:0),c[0]+=k}Bc(A,c)}function hf(c,A,u,g){const x=Math.pow(2,g.z)*WA,k=[g.x*WA,g.y*WA],P=[];for(const N of c)for(const q of N){const ne=[q.x+k[0],q.y+k[1]];Bh(ne,A,u,x),P.push(ne)}return P}function fu(c,A,u,g){const x=Math.pow(2,g.z)*WA,k=[g.x*WA,g.y*WA],P=[];for(const q of c){const ne=[];for(const ae of q){const ye=[ae.x+k[0],ae.y+k[1]];Bc(A,ye),ne.push(ye)}P.push(ne)}if(A[2]-A[0]<=x/2){(N=A)[0]=N[1]=1/0,N[2]=N[3]=-1/0;for(const q of P)for(const ne of q)Bh(ne,A,u,x)}var N;return P}class MA{constructor(A,u){this.type=Kr,this.geojson=A,this.geometries=u}static parse(A,u){if(A.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${A.length-1} instead.`);if(Cl(A[1])){const g=A[1];if(g.type==="FeatureCollection"){const x=[];for(const k of g.features){const{type:P,coordinates:N}=k.geometry;P==="Polygon"&&x.push(N),P==="MultiPolygon"&&x.push(...N)}if(x.length)return new MA(g,{type:"MultiPolygon",coordinates:x})}else if(g.type==="Feature"){const x=g.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new MA(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new MA(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(u,g){const x=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],P=u.canonicalID();if(g.type==="Polygon"){const N=du(g.coordinates,k,P),q=hf(u.geometry(),x,k,P);if(!sd(x,k))return!1;for(const ne of q)if(!Sh(ne,N))return!1}if(g.type==="MultiPolygon"){const N=Eh(g.coordinates,k,P),q=hf(u.geometry(),x,k,P);if(!sd(x,k))return!1;for(const ne of q)if(!cf(ne,N))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(u,g){const x=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],P=u.canonicalID();if(g.type==="Polygon"){const N=du(g.coordinates,k,P),q=fu(u.geometry(),x,k,P);if(!sd(x,k))return!1;for(const ne of q)if(!Kl(ne,N))return!1}if(g.type==="MultiPolygon"){const N=Eh(g.coordinates,k,P),q=fu(u.geometry(),x,k,P);if(!sd(x,k))return!1;for(const ne of q)if(!Od(ne,N))return!1}return!0}(A,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let tc=class{constructor(c=[],A=(u,g)=>u<g?-1:u>g?1:0){if(this.data=c,this.length=this.data.length,this.compare=A,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:A,compare:u}=this,g=A[c];for(;c>0;){const x=c-1>>1,k=A[x];if(u(g,k)>=0)break;A[c]=k,c=x}A[c]=g}_down(c){const{data:A,compare:u}=this,g=this.length>>1,x=A[c];for(;c<g;){let k=1+(c<<1);const P=k+1;if(P<this.length&&u(A[P],A[k])<0&&(k=P),u(A[k],x)>=0)break;A[c]=A[k],c=k}A[c]=x}};function Zc(c,A,u=0,g=c.length-1,x=vm){for(;g>u;){if(g-u>600){const q=g-u+1,ne=A-u+1,ae=Math.log(q),ye=.5*Math.exp(2*ae/3),Ke=.5*Math.sqrt(ae*ye*(q-ye)/q)*(ne-q/2<0?-1:1);Zc(c,A,Math.max(u,Math.floor(A-ne*ye/q+Ke)),Math.min(g,Math.floor(A+(q-ne)*ye/q+Ke)),x)}const k=c[A];let P=u,N=g;for(ad(c,u,A),x(c[g],k)>0&&ad(c,u,g);P<N;){for(ad(c,P,N),P++,N--;x(c[P],k)<0;)P++;for(;x(c[N],k)>0;)N--}x(c[u],k)===0?ad(c,u,N):(N++,ad(c,N,g)),N<=A&&(u=N+1),A<=N&&(g=N-1)}}function ad(c,A,u){const g=c[A];c[A]=c[u],c[u]=g}function vm(c,A){return c<A?-1:c>A?1:0}function Oc(c,A){if(c.length<=1)return[c];const u=[];let g,x;for(const k of c){const P=_l(k);P!==0&&(k.area=Math.abs(P),x===void 0&&(x=P<0),x===P<0?(g&&u.push(g),g=[k]):g.push(k))}if(g&&u.push(g),A>1)for(let k=0;k<u.length;k++)u[k].length<=A||(Zc(u[k],A,1,u[k].length-1,ld),u[k]=u[k].slice(0,A));return u}function ld(c,A){return A.area-c.area}function _l(c){let A=0;for(let u,g,x=0,k=c.length,P=k-1;x<k;P=x++)u=c[x],g=c[P],A+=(g.x-u.x)*(u.y+g.y);return A}const ll=1/298.257223563,qf=ll*(2-ll),Oh=Math.PI/180;class $f{constructor(A){const u=6378.137*Oh*1e3,g=Math.cos(A*Oh),x=1/(1-qf*(1-g*g)),k=Math.sqrt(x);this.kx=u*k*g,this.ky=u*k*x*(1-qf)}distance(A,u){const g=this.wrap(A[0]-u[0])*this.kx,x=(A[1]-u[1])*this.ky;return Math.sqrt(g*g+x*x)}pointOnLine(A,u){let g,x,k,P,N=1/0;for(let q=0;q<A.length-1;q++){let ne=A[q][0],ae=A[q][1],ye=this.wrap(A[q+1][0]-ne)*this.kx,Ke=(A[q+1][1]-ae)*this.ky,je=0;ye===0&&Ke===0||(je=(this.wrap(u[0]-ne)*this.kx*ye+(u[1]-ae)*this.ky*Ke)/(ye*ye+Ke*Ke),je>1?(ne=A[q+1][0],ae=A[q+1][1]):je>0&&(ne+=ye/this.kx*je,ae+=Ke/this.ky*je)),ye=this.wrap(u[0]-ne)*this.kx,Ke=(u[1]-ae)*this.ky;const Ve=ye*ye+Ke*Ke;Ve<N&&(N=Ve,g=ne,x=ae,k=q,P=je)}return{point:[g,x],index:k,t:Math.max(0,Math.min(1,P))}}wrap(A){for(;A<-180;)A+=360;for(;A>180;)A-=360;return A}}function Xc(c,A){return A[0]-c[0]}function Ll(c){return c[1]-c[0]+1}function QA(c,A){return c[1]>=c[0]&&c[1]<A}function Bo(c,A){if(c[0]>c[1])return[null,null];const u=Ll(c);if(A){if(u===2)return[c,null];const x=Math.floor(u/2);return[[c[0],c[0]+x],[c[0]+x,c[1]]]}if(u===1)return[c,null];const g=Math.floor(u/2)-1;return[[c[0],c[0]+g],[c[0]+g+1,c[1]]]}function Jc(c,A){if(!QA(A,c.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let g=A[0];g<=A[1];++g)Bc(u,c[g]);return u}function Id(c){const A=[1/0,1/0,-1/0,-1/0];for(const u of c)for(const g of u)Bc(A,g);return A}function Vf(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Td(c,A,u){if(!Vf(c)||!Vf(A))return NaN;let g=0,x=0;return c[2]<A[0]&&(g=A[0]-c[2]),c[0]>A[2]&&(g=c[0]-A[2]),c[1]>A[3]&&(x=c[1]-A[3]),c[3]<A[1]&&(x=A[1]-c[3]),u.distance([0,0],[g,x])}function Zl(c,A,u){const g=u.pointOnLine(A,c);return u.distance(c,g.point)}function Xt(c,A,u,g,x){const k=Math.min(Zl(c,[u,g],x),Zl(A,[u,g],x)),P=Math.min(Zl(u,[c,A],x),Zl(g,[c,A],x));return Math.min(k,P)}function Sn(c,A,u,g,x){if(!QA(A,c.length)||!QA(g,u.length))return 1/0;let k=1/0;for(let P=A[0];P<A[1];++P){const N=c[P],q=c[P+1];for(let ne=g[0];ne<g[1];++ne){const ae=u[ne],ye=u[ne+1];if(wh(N,q,ae,ye))return 0;k=Math.min(k,Xt(N,q,ae,ye,x))}}return k}function hn(c,A,u,g,x){if(!QA(A,c.length)||!QA(g,u.length))return NaN;let k=1/0;for(let P=A[0];P<=A[1];++P)for(let N=g[0];N<=g[1];++N)if(k=Math.min(k,x.distance(c[P],u[N])),k===0)return k;return k}function Pr(c,A,u){if(Sh(c,A,!0))return 0;let g=1/0;for(const x of A){const k=x[0],P=x[x.length-1];if(k!==P&&(g=Math.min(g,Zl(c,[P,k],u)),g===0))return g;const N=u.pointOnLine(x,c);if(g=Math.min(g,u.distance(c,N.point)),g===0)return g}return g}function Di(c,A,u,g){if(!QA(A,c.length))return NaN;for(let k=A[0];k<=A[1];++k)if(Sh(c[k],u,!0))return 0;let x=1/0;for(let k=A[0];k<A[1];++k){const P=c[k],N=c[k+1];for(const q of u)for(let ne=0,ae=q.length,ye=ae-1;ne<ae;ye=ne++){const Ke=q[ye],je=q[ne];if(wh(P,N,Ke,je))return 0;x=Math.min(x,Xt(P,N,Ke,je,g))}}return x}function Po(c,A){for(const u of c)for(const g of u)if(Sh(g,A,!0))return!0;return!1}function Ba(c,A,u,g=1/0){const x=Id(c),k=Id(A);if(g!==1/0&&Td(x,k,u)>=g)return g;if(sd(x,k)){if(Po(c,A))return 0}else if(Po(A,c))return 0;let P=1/0;for(const N of c)for(let q=0,ne=N.length,ae=ne-1;q<ne;ae=q++){const ye=N[ae],Ke=N[q];for(const je of A)for(let Ve=0,et=je.length,ut=et-1;Ve<et;ut=Ve++){const Mt=je[ut],Vt=je[Ve];if(wh(ye,Ke,Mt,Vt))return 0;P=Math.min(P,Xt(ye,Ke,Mt,Vt,u))}}return P}function ds(c,A,u,g,x,k){if(!k)return;const P=Td(Jc(g,k),x,u);P<A&&c.push([P,k,[0,0]])}function nc(c,A,u,g,x,k,P){if(!k||!P)return;const N=Td(Jc(g,k),Jc(x,P),u);N<A&&c.push([N,k,P])}function df(c,A,u,g,x=1/0){let k=Math.min(g.distance(c[0],u[0][0]),x);if(k===0)return k;const P=new tc([[0,[0,c.length-1],[0,0]]],Xc),N=Id(u);for(;P.length>0;){const q=P.pop();if(q[0]>=k)continue;const ne=q[1],ae=A?50:100;if(Ll(ne)<=ae){if(!QA(ne,c.length))return NaN;if(A){const ye=Di(c,ne,u,g);if(isNaN(ye)||ye===0)return ye;k=Math.min(k,ye)}else for(let ye=ne[0];ye<=ne[1];++ye){const Ke=Pr(c[ye],u,g);if(k=Math.min(k,Ke),k===0)return 0}}else{const ye=Bo(ne,A);ds(P,k,g,c,N,ye[0]),ds(P,k,g,c,N,ye[1])}}return k}function Xl(c,A,u,g,x,k=1/0){let P=Math.min(k,x.distance(c[0],u[0]));if(P===0)return P;const N=new tc([[0,[0,c.length-1],[0,u.length-1]]],Xc);for(;N.length>0;){const q=N.pop();if(q[0]>=P)continue;const ne=q[1],ae=q[2],ye=A?50:100,Ke=g?50:100;if(Ll(ne)<=ye&&Ll(ae)<=Ke){if(!QA(ne,c.length)&&QA(ae,u.length))return NaN;let je;if(A&&g)je=Sn(c,ne,u,ae,x),P=Math.min(P,je);else if(A&&!g){const Ve=c.slice(ne[0],ne[1]+1);for(let et=ae[0];et<=ae[1];++et)if(je=Zl(u[et],Ve,x),P=Math.min(P,je),P===0)return P}else if(!A&&g){const Ve=u.slice(ae[0],ae[1]+1);for(let et=ne[0];et<=ne[1];++et)if(je=Zl(c[et],Ve,x),P=Math.min(P,je),P===0)return P}else je=hn(c,ne,u,ae,x),P=Math.min(P,je)}else{const je=Bo(ne,A),Ve=Bo(ae,g);nc(N,P,x,c,u,je[0],Ve[0]),nc(N,P,x,c,u,je[0],Ve[1]),nc(N,P,x,c,u,je[1],Ve[0]),nc(N,P,x,c,u,je[1],Ve[1])}}return P}function Fu(c){return c.type==="MultiPolygon"?c.coordinates.map(A=>({type:"Polygon",coordinates:A})):c.type==="MultiLineString"?c.coordinates.map(A=>({type:"LineString",coordinates:A})):c.type==="MultiPoint"?c.coordinates.map(A=>({type:"Point",coordinates:A})):[c]}class Jl{constructor(A,u){this.type=Zn,this.geojson=A,this.geometries=u}static parse(A,u){if(A.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${A.length-1} instead.`);if(Cl(A[1])){const g=A[1];if(g.type==="FeatureCollection")return new Jl(g,g.features.map(x=>Fu(x.geometry)).flat());if(g.type==="Feature")return new Jl(g,Fu(g.geometry));if("type"in g&&"coordinates"in g)return new Jl(g,Fu(g))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(u,g){const x=u.geometry(),k=x.flat().map(q=>od([q.x,q.y],u.canonical));if(x.length===0)return NaN;const P=new $f(k[0][1]);let N=1/0;for(const q of g){switch(q.type){case"Point":N=Math.min(N,Xl(k,!1,[q.coordinates],!1,P,N));break;case"LineString":N=Math.min(N,Xl(k,!1,q.coordinates,!0,P,N));break;case"Polygon":N=Math.min(N,df(k,!1,q.coordinates,P,N))}if(N===0)return N}return N}(A,this.geometries);if(A.geometryType()==="LineString")return function(u,g){const x=u.geometry(),k=x.flat().map(q=>od([q.x,q.y],u.canonical));if(x.length===0)return NaN;const P=new $f(k[0][1]);let N=1/0;for(const q of g){switch(q.type){case"Point":N=Math.min(N,Xl(k,!0,[q.coordinates],!1,P,N));break;case"LineString":N=Math.min(N,Xl(k,!0,q.coordinates,!0,P,N));break;case"Polygon":N=Math.min(N,df(k,!0,q.coordinates,P,N))}if(N===0)return N}return N}(A,this.geometries);if(A.geometryType()==="Polygon")return function(u,g){const x=u.geometry();if(x.length===0||x[0].length===0)return NaN;const k=Oc(x,0).map(q=>q.map(ne=>ne.map(ae=>od([ae.x,ae.y],u.canonical)))),P=new $f(k[0][0][0][1]);let N=1/0;for(const q of g)for(const ne of k){switch(q.type){case"Point":N=Math.min(N,df([q.coordinates],!1,ne,P,N));break;case"LineString":N=Math.min(N,df(q.coordinates,!0,ne,P,N));break;case"Polygon":N=Math.min(N,Ba(ne,q.coordinates,P,N))}if(N===0)return N}return N}(A,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Va{constructor(A){this.type=Gr,this.key=A}static parse(A,u){if(A.length!==2)return u.error(`Expected 1 argument, but found ${A.length-1} instead.`);const g=A[1];return g==null?u.error("Global state property must be defined."):typeof g!="string"?u.error(`Global state property must be string, but found ${typeof A[1]} instead.`):new Va(g)}evaluate(A){var u;const g=(u=A.globals)===null||u===void 0?void 0:u.globalState;return g&&Object.keys(g).length!==0?_a(g,this.key):null}eachChild(){}outputDefined(){return!1}}const Ul={"==":ec,"!=":td,">":Hc,"<":zp,">=":Np,"<=":nd,array:Ie,at:Xr,boolean:Ie,case:di,coalesce:hu,collator:Af,format:bA,image:Fs,in:Hi,"index-of":Ji,interpolate:Vo,"interpolate-hcl":Vo,"interpolate-lab":Vo,length:rd,let:ai,literal:Wi,match:ni,number:Ie,"number-format":uf,object:Ie,slice:lo,step:Oi,string:Ie,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:Er,within:MA,distance:Jl,"global-state":Va};class Al{constructor(A,u,g,x){this.name=A,this.type=u,this._evaluate=g,this.args=x}evaluate(A){return this._evaluate(A,this.args)}eachChild(A){this.args.forEach(A)}outputDefined(){return!1}static parse(A,u){const g=A[0],x=Al.definitions[g];if(!x)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(x)?x[0]:x.type,P=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,N=P.filter(([ne])=>!Array.isArray(ne)||ne.length===A.length-1);let q=null;for(const[ne,ae]of N){q=new qr(u.registry,YA,u.path,null,u.scope);const ye=[];let Ke=!1;for(let je=1;je<A.length;je++){const Ve=A[je],et=Array.isArray(ne)?ne[je-1]:ne.type,ut=q.parse(Ve,1+ye.length,et);if(!ut){Ke=!0;break}ye.push(ut)}if(!Ke)if(Array.isArray(ne)&&ne.length!==ye.length)q.error(`Expected ${ne.length} arguments, but found ${ye.length} instead.`);else{for(let je=0;je<ye.length;je++){const Ve=Array.isArray(ne)?ne[je]:ne.type,et=ye[je];q.concat(je+1).checkSubtype(Ve,et.type)}if(q.errors.length===0)return new Al(g,k,ae,ye)}}if(N.length===1)u.errors.push(...q.errors);else{const ne=(N.length?N:P).map(([ye])=>{return Ke=ye,Array.isArray(Ke)?`(${Ke.map(Hr).join(", ")})`:`(${Hr(Ke.type)}...)`;var Ke}).join(" | "),ae=[];for(let ye=1;ye<A.length;ye++){const Ke=u.parse(A[ye],1+ae.length);if(!Ke)return null;ae.push(Hr(Ke.type))}u.error(`Expected arguments of type ${ne}, but found (${ae.join(", ")}) instead.`)}return null}static register(A,u){Al.definitions=u;for(const g in u)A[g]=Al}}function Ro(c,[A,u,g,x]){A=A.evaluate(c),u=u.evaluate(c),g=g.evaluate(c);const k=x?x.evaluate(c):1,P=Ri(A,u,g,k);if(P)throw new Xi(P);return new Bi(A/255,u/255,g/255,k,!1)}function eh(c,A){return c in A}function th(c,A){const u=A[c];return u===void 0?null:u}function bl(c){return{type:c}}function YA(c){if(c instanceof Er)return YA(c.boundExpression);if(c instanceof Al&&c.name==="error"||c instanceof Af||c instanceof MA||c instanceof Jl||c instanceof Va)return!1;const A=c instanceof Yt||c instanceof Ie;let u=!0;return c.eachChild(g=>{u=A?u&&YA(g):u&&g instanceof Wi}),!!u&&Ha(c)&&eA(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ha(c){if(c instanceof Al&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof MA||c instanceof Jl)return!1;let A=!0;return c.eachChild(u=>{A&&!Ha(u)&&(A=!1)}),A}function qA(c){if(c instanceof Al&&c.name==="feature-state")return!1;let A=!0;return c.eachChild(u=>{A&&!qA(u)&&(A=!1)}),A}function eA(c,A){if(c instanceof Al&&A.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(g=>{u&&!eA(g,A)&&(u=!1)}),u}function $A(c){return{result:"success",value:c}}function rc(c){return{result:"error",value:c}}function Ku(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function zl(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Ih(c){return!!c.expression&&c.expression.interpolated}function Qi(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Lu(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&Zr(c)===os}function Gp(c){return c}function pu(c,A){const u=c.stops&&typeof c.stops[0][0]=="object",g=u||!(u||c.property!==void 0),x=c.type||(Ih(A)?"exponential":"interval"),k=function(ae){switch(ae.type){case"color":return Bi.parse;case"padding":return hs.parse;case"numberArray":return as.parse;case"colorArray":return yo.parse;default:return null}}(A);if(k&&((c=Vi({},c)).stops&&(c.stops=c.stops.map(ae=>[ae[0],k(ae[1])])),c.default=k(c.default?c.default:A.default)),c.colorSpace&&(P=c.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var P;const N=function(ae){switch(ae){case"exponential":return ls;case"interval":return ff;case"categorical":return nh;case"identity":return Ad;default:throw new Error(`Unknown function type "${ae}"`)}}(x);let q,ne;if(x==="categorical"){q=Object.create(null);for(const ae of c.stops)q[ae[0]]=ae[1];ne=typeof c.stops[0][0]}if(u){const ae={},ye=[];for(let Ve=0;Ve<c.stops.length;Ve++){const et=c.stops[Ve],ut=et[0].zoom;ae[ut]===void 0&&(ae[ut]={zoom:ut,type:c.type,property:c.property,default:c.default,stops:[]},ye.push(ut)),ae[ut].stops.push([et[0].value,et[1]])}const Ke=[];for(const Ve of ye)Ke.push([ae[Ve].zoom,pu(ae[Ve],A)]);const je={name:"linear"};return{kind:"composite",interpolationType:je,interpolationFactor:Vo.interpolationFactor.bind(void 0,je),zoomStops:Ke.map(Ve=>Ve[0]),evaluate:({zoom:Ve},et)=>ls({stops:Ke,base:c.base},A,Ve).evaluate(Ve,et)}}if(g){const ae=x==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:ae,interpolationFactor:Vo.interpolationFactor.bind(void 0,ae),zoomStops:c.stops.map(ye=>ye[0]),evaluate:({zoom:ye})=>N(c,A,ye,q,ne)}}return{kind:"source",evaluate(ae,ye){const Ke=ye&&ye.properties?ye.properties[c.property]:void 0;return Ke===void 0?tA(c.default,A.default):N(c,A,Ke,q,ne)}}}function tA(c,A,u){return c!==void 0?c:A!==void 0?A:u!==void 0?u:void 0}function nh(c,A,u,g,x){return tA(typeof u===x?g[u]:void 0,c.default,A.default)}function ff(c,A,u){if(Qi(u)!=="number")return tA(c.default,A.default);const g=c.stops.length;if(g===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[g-1][0])return c.stops[g-1][1];const x=zi(c.stops.map(k=>k[0]),u);return c.stops[x][1]}function ls(c,A,u){const g=c.base!==void 0?c.base:1;if(Qi(u)!=="number")return tA(c.default,A.default);const x=c.stops.length;if(x===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[x-1][0])return c.stops[x-1][1];const k=zi(c.stops.map(ae=>ae[0]),u),P=function(ae,ye,Ke,je){const Ve=je-Ke,et=ae-Ke;return Ve===0?0:ye===1?et/Ve:(Math.pow(ye,et)-1)/(Math.pow(ye,Ve)-1)}(u,g,c.stops[k][0],c.stops[k+1][0]),N=c.stops[k][1],q=c.stops[k+1][1],ne=jA[A.type]||Gp;return typeof N.evaluate=="function"?{evaluate(...ae){const ye=N.evaluate.apply(void 0,ae),Ke=q.evaluate.apply(void 0,ae);if(ye!==void 0&&Ke!==void 0)return ne(ye,Ke,P,c.colorSpace)}}:ne(N,q,P,c.colorSpace)}function Ad(c,A,u){switch(A.type){case"color":u=Bi.parse(u);break;case"formatted":u=go.fromString(u.toString());break;case"resolvedImage":u=ba.fromString(u.toString());break;case"padding":u=hs.parse(u);break;case"colorArray":u=yo.parse(u);break;case"numberArray":u=as.parse(u);break;default:Qi(u)===A.type||A.type==="enum"&&A.values[u]||(u=void 0)}return tA(u,c.default,A.default)}Al.register(Ul,{error:[{kind:"error"},[_i],(c,[A])=>{throw new Xi(A.evaluate(c))}],typeof:[_i,[Gr],(c,[A])=>Hr(Zr(A.evaluate(c)))],"to-rgba":[Bs(Zn,4),[ki],(c,[A])=>{const[u,g,x,k]=A.evaluate(c).rgb;return[255*u,255*g,255*x,k]}],rgb:[ki,[Zn,Zn,Zn],Ro],rgba:[ki,[Zn,Zn,Zn,Zn],Ro],has:{type:Kr,overloads:[[[_i],(c,[A])=>eh(A.evaluate(c),c.properties())],[[_i,os],(c,[A,u])=>eh(A.evaluate(c),u.evaluate(c))]]},get:{type:Gr,overloads:[[[_i],(c,[A])=>th(A.evaluate(c),c.properties())],[[_i,os],(c,[A,u])=>th(A.evaluate(c),u.evaluate(c))]]},"feature-state":[Gr,[_i],(c,[A])=>th(A.evaluate(c),c.featureState||{})],properties:[os,[],c=>c.properties()],"geometry-type":[_i,[],c=>c.geometryType()],id:[Gr,[],c=>c.id()],zoom:[Zn,[],c=>c.globals.zoom],"heatmap-density":[Zn,[],c=>c.globals.heatmapDensity||0],elevation:[Zn,[],c=>c.globals.elevation||0],"line-progress":[Zn,[],c=>c.globals.lineProgress||0],accumulated:[Gr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Zn,bl(Zn),(c,A)=>{let u=0;for(const g of A)u+=g.evaluate(c);return u}],"*":[Zn,bl(Zn),(c,A)=>{let u=1;for(const g of A)u*=g.evaluate(c);return u}],"-":{type:Zn,overloads:[[[Zn,Zn],(c,[A,u])=>A.evaluate(c)-u.evaluate(c)],[[Zn],(c,[A])=>-A.evaluate(c)]]},"/":[Zn,[Zn,Zn],(c,[A,u])=>A.evaluate(c)/u.evaluate(c)],"%":[Zn,[Zn,Zn],(c,[A,u])=>A.evaluate(c)%u.evaluate(c)],ln2:[Zn,[],()=>Math.LN2],pi:[Zn,[],()=>Math.PI],e:[Zn,[],()=>Math.E],"^":[Zn,[Zn,Zn],(c,[A,u])=>Math.pow(A.evaluate(c),u.evaluate(c))],sqrt:[Zn,[Zn],(c,[A])=>Math.sqrt(A.evaluate(c))],log10:[Zn,[Zn],(c,[A])=>Math.log(A.evaluate(c))/Math.LN10],ln:[Zn,[Zn],(c,[A])=>Math.log(A.evaluate(c))],log2:[Zn,[Zn],(c,[A])=>Math.log(A.evaluate(c))/Math.LN2],sin:[Zn,[Zn],(c,[A])=>Math.sin(A.evaluate(c))],cos:[Zn,[Zn],(c,[A])=>Math.cos(A.evaluate(c))],tan:[Zn,[Zn],(c,[A])=>Math.tan(A.evaluate(c))],asin:[Zn,[Zn],(c,[A])=>Math.asin(A.evaluate(c))],acos:[Zn,[Zn],(c,[A])=>Math.acos(A.evaluate(c))],atan:[Zn,[Zn],(c,[A])=>Math.atan(A.evaluate(c))],min:[Zn,bl(Zn),(c,A)=>Math.min(...A.map(u=>u.evaluate(c)))],max:[Zn,bl(Zn),(c,A)=>Math.max(...A.map(u=>u.evaluate(c)))],abs:[Zn,[Zn],(c,[A])=>Math.abs(A.evaluate(c))],round:[Zn,[Zn],(c,[A])=>{const u=A.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[Zn,[Zn],(c,[A])=>Math.floor(A.evaluate(c))],ceil:[Zn,[Zn],(c,[A])=>Math.ceil(A.evaluate(c))],"filter-==":[Kr,[_i,Gr],(c,[A,u])=>c.properties()[A.value]===u.value],"filter-id-==":[Kr,[Gr],(c,[A])=>c.id()===A.value],"filter-type-==":[Kr,[_i],(c,[A])=>c.geometryType()===A.value],"filter-<":[Kr,[_i,Gr],(c,[A,u])=>{const g=c.properties()[A.value],x=u.value;return typeof g==typeof x&&g<x}],"filter-id-<":[Kr,[Gr],(c,[A])=>{const u=c.id(),g=A.value;return typeof u==typeof g&&u<g}],"filter->":[Kr,[_i,Gr],(c,[A,u])=>{const g=c.properties()[A.value],x=u.value;return typeof g==typeof x&&g>x}],"filter-id->":[Kr,[Gr],(c,[A])=>{const u=c.id(),g=A.value;return typeof u==typeof g&&u>g}],"filter-<=":[Kr,[_i,Gr],(c,[A,u])=>{const g=c.properties()[A.value],x=u.value;return typeof g==typeof x&&g<=x}],"filter-id-<=":[Kr,[Gr],(c,[A])=>{const u=c.id(),g=A.value;return typeof u==typeof g&&u<=g}],"filter->=":[Kr,[_i,Gr],(c,[A,u])=>{const g=c.properties()[A.value],x=u.value;return typeof g==typeof x&&g>=x}],"filter-id->=":[Kr,[Gr],(c,[A])=>{const u=c.id(),g=A.value;return typeof u==typeof g&&u>=g}],"filter-has":[Kr,[Gr],(c,[A])=>A.value in c.properties()],"filter-has-id":[Kr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Kr,[Bs(_i)],(c,[A])=>A.value.indexOf(c.geometryType())>=0],"filter-id-in":[Kr,[Bs(Gr)],(c,[A])=>A.value.indexOf(c.id())>=0],"filter-in-small":[Kr,[_i,Bs(Gr)],(c,[A,u])=>u.value.indexOf(c.properties()[A.value])>=0],"filter-in-large":[Kr,[_i,Bs(Gr)],(c,[A,u])=>function(g,x,k,P){for(;k<=P;){const N=k+P>>1;if(x[N]===g)return!0;x[N]>g?P=N-1:k=N+1}return!1}(c.properties()[A.value],u.value,0,u.value.length-1)],all:{type:Kr,overloads:[[[Kr,Kr],(c,[A,u])=>A.evaluate(c)&&u.evaluate(c)],[bl(Kr),(c,A)=>{for(const u of A)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Kr,overloads:[[[Kr,Kr],(c,[A,u])=>A.evaluate(c)||u.evaluate(c)],[bl(Kr),(c,A)=>{for(const u of A)if(u.evaluate(c))return!0;return!1}]]},"!":[Kr,[Kr],(c,[A])=>!A.evaluate(c)],"is-supported-script":[Kr,[_i],(c,[A])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(A.evaluate(c))}],upcase:[_i,[_i],(c,[A])=>A.evaluate(c).toUpperCase()],downcase:[_i,[_i],(c,[A])=>A.evaluate(c).toLowerCase()],concat:[_i,bl(Gr),(c,A)=>A.map(u=>Cr(u.evaluate(c))).join("")],"resolved-locale":[_i,[qa],(c,[A])=>A.evaluate(c).resolvedLocale()]});class ic{constructor(A,u){this.expression=A,this._warningHistory={},this._evaluator=new zn,this._defaultValue=u?function(g){if(g.type==="color"&&Lu(g.default))return new Bi(0,0,0,0);switch(g.type){case"color":return Bi.parse(g.default)||null;case"padding":return hs.parse(g.default)||null;case"numberArray":return as.parse(g.default)||null;case"colorArray":return yo.parse(g.default)||null;case"variableAnchorOffsetCollection":return Cs.parse(g.default)||null;case"projectionDefinition":return Ns.parse(g.default)||null;default:return g.default===void 0?null:g.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(A,u,g,x,k,P){return this._evaluator.globals=A,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=x,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(A,u,g,x,k,P){this._evaluator.globals=A,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=x,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=P||null;try{const N=this.expression.evaluate(this._evaluator);if(N==null||typeof N=="number"&&N!=N)return this._defaultValue;if(this._enumValues&&!(N in this._enumValues))throw new Xi(`Expected value to be one of ${Object.keys(this._enumValues).map(q=>JSON.stringify(q)).join(", ")}, but found ${JSON.stringify(N)} instead.`);return N}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}}}function wA(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Ul}function rh(c,A){const u=new qr(Ul,YA,[],A?function(x){const k={color:ki,string:_i,number:Zn,enum:_i,boolean:Kr,formatted:sa,padding:jo,numberArray:yl,colorArray:Ds,projectionDefinition:oa,resolvedImage:si,variableAnchorOffsetCollection:vA};return x.type==="array"?Bs(k[x.value]||Gr,x.length):k[x.type]}(A):void 0),g=u.parse(c,void 0,void 0,void 0,A&&A.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?$A(new ic(g,A)):rc(u.errors)}class Th{constructor(A,u){this.kind=A,this._styleExpression=u,this.isStateDependent=A!=="constant"&&!qA(u.expression),this.globalStateRefs=Zs(u.expression)}evaluateWithoutErrorHandling(A,u,g,x,k,P){return this._styleExpression.evaluateWithoutErrorHandling(A,u,g,x,k,P)}evaluate(A,u,g,x,k,P){return this._styleExpression.evaluate(A,u,g,x,k,P)}}class ih{constructor(A,u,g,x){this.kind=A,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=A!=="camera"&&!qA(u.expression),this.globalStateRefs=Zs(u.expression),this.interpolationType=x}evaluateWithoutErrorHandling(A,u,g,x,k,P){return this._styleExpression.evaluateWithoutErrorHandling(A,u,g,x,k,P)}evaluate(A,u,g,x,k,P){return this._styleExpression.evaluate(A,u,g,x,k,P)}interpolationFactor(A,u,g){return this.interpolationType?Vo.interpolationFactor(this.interpolationType,A,u,g):0}}function kh(c,A){const u=rh(c,A);if(u.result==="error")return u;const g=u.value.expression,x=Ha(g);if(!x&&!Ku(A))return rc([new zr("","data expressions not supported")]);const k=eA(g,["zoom"]);if(!k&&!zl(A))return rc([new zr("","zoom expressions not supported")]);const P=_s(g);return P||k?P instanceof zr?rc([P]):P instanceof Vo&&!Ih(A)?rc([new zr("",'"interpolate" expressions cannot be used with this property')]):$A(P?new ih(x?"camera":"composite",u.value,P.labels,P instanceof Vo?P.interpolation:void 0):new Th(x?"constant":"source",u.value)):rc([new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class mu{constructor(A,u){this._parameters=A,this._specification=u,Vi(this,pu(this._parameters,this._specification))}static deserialize(A){return new mu(A._parameters,A._specification)}static serialize(A){return{_parameters:A._parameters,_specification:A._specification}}}function _s(c){let A=null;if(c instanceof ai)A=_s(c.result);else if(c instanceof hu){for(const u of c.args)if(A=_s(u),A)break}else(c instanceof Oi||c instanceof Vo)&&c.input instanceof Al&&c.input.name==="zoom"&&(A=c);return A instanceof zr||c.eachChild(u=>{const g=_s(u);g instanceof zr?A=g:!A&&g?A=new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&g&&A!==g&&(A=new zr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}function Zs(c,A=new Set){return c instanceof Va&&A.add(c.key),c.eachChild(u=>{Zs(u,A)}),A}function pf(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const A of c.slice(1))if(!pf(A)&&typeof A!="boolean")return!1;return!0;default:return!0}}const Ph={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gu(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};pf(c)||(c=Za(c));const A=rh(c,Ph);if(A.result==="error")throw new Error(A.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,x)=>A.value.evaluate(u,g,{},x),needGeometry:Ic(c),getGlobalStateRefs:()=>Zs(A.value.expression)}}function oc(c,A){return c<A?-1:c>A?1:0}function Ic(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let A=1;A<c.length;A++)if(Ic(c[A]))return!0;return!1}function Za(c){if(!c)return!0;const A=c[0];return c.length<=1?A!=="any":A==="=="?Uu(c[1],c[2],"=="):A==="!="?SA(Uu(c[1],c[2],"==")):A==="<"||A===">"||A==="<="||A===">="?Uu(c[1],c[2],A):A==="any"?(u=c.slice(1),["any"].concat(u.map(Za))):A==="all"?["all"].concat(c.slice(1).map(Za)):A==="none"?["all"].concat(c.slice(1).map(Za).map(SA)):A==="in"?nA(c[1],c.slice(2)):A==="!in"?SA(nA(c[1],c.slice(2))):A==="has"?sc(c[1]):A!=="!has"||SA(sc(c[1]));var u}function Uu(c,A,u){switch(c){case"$type":return[`filter-type-${u}`,A];case"$id":return[`filter-id-${u}`,A];default:return[`filter-${u}`,c,A]}}function nA(c,A){if(A.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",A]];case"$id":return["filter-id-in",["literal",A]];default:return A.length>200&&!A.some(u=>typeof u!=typeof A[0])?["filter-in-large",c,["literal",A.sort(oc)]]:["filter-in-small",c,["literal",A]]}}function sc(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function SA(c){return["!",c]}function Rh(c){const A=typeof c;if(A==="number"||A==="boolean"||A==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let x="[";for(const k of c)x+=`${Rh(k)},`;return`${x}]`}const u=Object.keys(c).sort();let g="{";for(let x=0;x<u.length;x++)g+=`${JSON.stringify(u[x])}:${Rh(c[u[x]])},`;return`${g}}`}function Dh(c){let A="";for(const u of en)A+=`/${Rh(c[u])}`;return A}function ud(c){const A=c.value;return A?[new bn(c.key,A,"constants have been deprecated as of v8")]:[]}function fs(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function xl(c){if(Array.isArray(c))return c.map(xl);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const A={};for(const u in c)A[u]=xl(c[u]);return A}return fs(c)}function Aa(c){const A=c.key,u=c.value,g=c.valueSpec||{},x=c.objectElementValidators||{},k=c.style,P=c.styleSpec,N=c.validateSpec;let q=[];const ne=Qi(u);if(ne!=="object")return[new bn(A,u,`object expected, ${ne} found`)];for(const ae in u){const ye=ae.split(".")[0],Ke=_a(g,ye)||g["*"];let je;if(_a(x,ye))je=x[ye];else if(_a(g,ye))je=N;else if(x["*"])je=x["*"];else{if(!g["*"]){q.push(new bn(A,u[ae],`unknown property "${ae}"`));continue}je=N}q=q.concat(je({key:(A&&`${A}.`)+ae,value:u[ae],valueSpec:Ke,style:k,styleSpec:P,object:u,objectKey:ae,validateSpec:N},u))}for(const ae in g)x[ae]||g[ae].required&&g[ae].default===void 0&&u[ae]===void 0&&q.push(new bn(A,u,`missing required property "${ae}"`));return q}function VA(c){const A=c.value,u=c.valueSpec,g=c.style,x=c.styleSpec,k=c.key,P=c.arrayElementValidator||c.validateSpec;if(Qi(A)!=="array")return[new bn(k,A,`array expected, ${Qi(A)} found`)];if(u.length&&A.length!==u.length)return[new bn(k,A,`array length ${u.length} expected, length ${A.length} found`)];if(u["min-length"]&&A.length<u["min-length"])return[new bn(k,A,`array length at least ${u["min-length"]} expected, length ${A.length} found`)];let N={type:u.value,values:u.values};x.$version<7&&(N.function=u.function),Qi(u.value)==="object"&&(N=u.value);let q=[];for(let ne=0;ne<A.length;ne++)q=q.concat(P({array:A,arrayIndex:ne,value:A[ne],valueSpec:N,validateSpec:c.validateSpec,style:g,styleSpec:x,key:`${k}[${ne}]`}));return q}function yu(c){const A=c.key,u=c.value,g=c.valueSpec;let x=Qi(u);return x==="number"&&u!=u&&(x="NaN"),x!=="number"?[new bn(A,u,`number expected, ${x} found`)]:"minimum"in g&&u<g.minimum?[new bn(A,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new bn(A,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function EA(c){const A=c.valueSpec,u=fs(c.value.type);let g,x,k,P={};const N=u!=="categorical"&&c.value.property===void 0,q=!N,ne=Qi(c.value.stops)==="array"&&Qi(c.value.stops[0])==="array"&&Qi(c.value.stops[0][0])==="object",ae=Aa({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(je){if(u==="identity")return[new bn(je.key,je.value,'identity function may not have a "stops" property')];let Ve=[];const et=je.value;return Ve=Ve.concat(VA({key:je.key,value:et,valueSpec:je.valueSpec,validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec,arrayElementValidator:ye})),Qi(et)==="array"&&et.length===0&&Ve.push(new bn(je.key,et,"array must have at least one stop")),Ve},default:function(je){return je.validateSpec({key:je.key,value:je.value,valueSpec:A,validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec})}}});return u==="identity"&&N&&ae.push(new bn(c.key,c.value,'missing required property "property"')),u==="identity"||c.value.stops||ae.push(new bn(c.key,c.value,'missing required property "stops"')),u==="exponential"&&c.valueSpec.expression&&!Ih(c.valueSpec)&&ae.push(new bn(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(q&&!Ku(c.valueSpec)?ae.push(new bn(c.key,c.value,"property functions not supported")):N&&!zl(c.valueSpec)&&ae.push(new bn(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!ne||c.value.property!==void 0||ae.push(new bn(c.key,c.value,'"property" property is required')),ae;function ye(je){let Ve=[];const et=je.value,ut=je.key;if(Qi(et)!=="array")return[new bn(ut,et,`array expected, ${Qi(et)} found`)];if(et.length!==2)return[new bn(ut,et,`array length 2 expected, length ${et.length} found`)];if(ne){if(Qi(et[0])!=="object")return[new bn(ut,et,`object expected, ${Qi(et[0])} found`)];if(et[0].zoom===void 0)return[new bn(ut,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new bn(ut,et,"object stop key must have value")];if(k&&k>fs(et[0].zoom))return[new bn(ut,et[0].zoom,"stop zoom values must appear in ascending order")];fs(et[0].zoom)!==k&&(k=fs(et[0].zoom),x=void 0,P={}),Ve=Ve.concat(Aa({key:`${ut}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec,objectElementValidators:{zoom:yu,value:Ke}}))}else Ve=Ve.concat(Ke({key:`${ut}[0]`,value:et[0],validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec},et));return wA(xl(et[1]))?Ve.concat([new bn(`${ut}[1]`,et[1],"expressions are not allowed in function stops.")]):Ve.concat(je.validateSpec({key:`${ut}[1]`,value:et[1],valueSpec:A,validateSpec:je.validateSpec,style:je.style,styleSpec:je.styleSpec}))}function Ke(je,Ve){const et=Qi(je.value),ut=fs(je.value),Mt=je.value!==null?je.value:Ve;if(g){if(et!==g)return[new bn(je.key,Mt,`${et} stop domain type must match previous stop domain type ${g}`)]}else g=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new bn(je.key,Mt,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&u!=="categorical"){let Vt=`number expected, ${et} found`;return Ku(A)&&u===void 0&&(Vt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bn(je.key,Mt,Vt)]}return u!=="categorical"||et!=="number"||isFinite(ut)&&Math.floor(ut)===ut?u!=="categorical"&&et==="number"&&x!==void 0&&ut<x?[new bn(je.key,Mt,"stop domain values must appear in ascending order")]:(x=ut,u==="categorical"&&ut in P?[new bn(je.key,Mt,"stop domain values must be unique")]:(P[ut]=!0,[])):[new bn(je.key,Mt,`integer expected, found ${ut}`)]}}function ac(c){const A=(c.expressionContext==="property"?kh:rh)(xl(c.value),c.valueSpec);if(A.result==="error")return A.value.map(g=>new bn(`${c.key}${g.key}`,c.value,g.message));const u=A.value.expression||A.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new bn(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!qA(u))return[new bn(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!qA(u))return[new bn(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!eA(u,["zoom","feature-state"]))return[new bn(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ha(u))return[new bn(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ot(c){const A=c.key,u=c.value,g=Qi(u);return g!=="string"?[new bn(A,u,`color expected, ${g} found`)]:Bi.parse(String(u))?[]:[new bn(A,u,`color expected, "${u}" found`)]}function BA(c){const A=c.key,u=c.value,g=c.valueSpec,x=[];return Array.isArray(g.values)?g.values.indexOf(fs(u))===-1&&x.push(new bn(A,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(fs(u))===-1&&x.push(new bn(A,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),x}function js(c){return pf(xl(c.value))?ac(Vi({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Do(c)}function Do(c){const A=c.value,u=c.key;if(Qi(A)!=="array")return[new bn(u,A,`array expected, ${Qi(A)} found`)];const g=c.styleSpec;let x,k=[];if(A.length<1)return[new bn(u,A,"filter array must have at least 1 element")];switch(k=k.concat(BA({key:`${u}[0]`,value:A[0],valueSpec:g.filter_operator,style:c.style,styleSpec:c.styleSpec})),fs(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&fs(A[1])==="$type"&&k.push(new bn(u,A,`"$type" cannot be use with operator "${A[0]}"`));case"==":case"!=":A.length!==3&&k.push(new bn(u,A,`filter array for operator "${A[0]}" must have 3 elements`));case"in":case"!in":A.length>=2&&(x=Qi(A[1]),x!=="string"&&k.push(new bn(`${u}[1]`,A[1],`string expected, ${x} found`)));for(let P=2;P<A.length;P++)x=Qi(A[P]),fs(A[1])==="$type"?k=k.concat(BA({key:`${u}[${P}]`,value:A[P],valueSpec:g.geometry_type,style:c.style,styleSpec:c.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&k.push(new bn(`${u}[${P}]`,A[P],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let P=1;P<A.length;P++)k=k.concat(Do({key:`${u}[${P}]`,value:A[P],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":x=Qi(A[1]),A.length!==2?k.push(new bn(u,A,`filter array for "${A[0]}" operator must have 2 elements`)):x!=="string"&&k.push(new bn(`${u}[1]`,A[1],`string expected, ${x} found`))}return k}function fi(c,A){const u=c.key,g=c.validateSpec,x=c.style,k=c.styleSpec,P=c.value,N=c.objectKey,q=k[`${A}_${c.layerType}`];if(!q)return[];const ne=N.match(/^(.*)-transition$/);if(A==="paint"&&ne&&q[ne[1]]&&q[ne[1]].transition)return g({key:u,value:P,valueSpec:k.transition,style:x,styleSpec:k});const ae=c.valueSpec||q[N];if(!ae)return[new bn(u,P,`unknown property "${N}"`)];let ye;if(Qi(P)==="string"&&Ku(ae)&&!ae.tokens&&(ye=/^{([^}]+)}$/.exec(P)))return[new bn(u,P,`"${N}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ye[1])} }\`.`)];const Ke=[];return c.layerType==="symbol"&&(N==="text-field"&&x&&!x.glyphs&&Ke.push(new bn(u,P,'use of "text-field" requires a style "glyphs" property')),N==="text-font"&&Lu(xl(P))&&fs(P.type)==="identity"&&Ke.push(new bn(u,P,'"text-font" does not support identity functions'))),Ke.concat(g({key:c.key,value:P,valueSpec:ae,style:x,styleSpec:k,expressionContext:"property",propertyType:A,propertyKey:N}))}function ua(c){return fi(c,"paint")}function oh(c){return fi(c,"layout")}function Fh(c){let A=[];const u=c.value,g=c.key,x=c.style,k=c.styleSpec;if(Qi(u)!=="object")return[new bn(g,u,`object expected, ${Qi(u)} found`)];u.type||u.ref||A.push(new bn(g,u,'either "type" or "ref" is required'));let P=fs(u.type);const N=fs(u.ref);if(u.id){const q=fs(u.id);for(let ne=0;ne<c.arrayIndex;ne++){const ae=x.layers[ne];fs(ae.id)===q&&A.push(new bn(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ae.id.__line__}`))}}if("ref"in u){let q;["type","source","source-layer","filter","layout"].forEach(ne=>{ne in u&&A.push(new bn(g,u[ne],`"${ne}" is prohibited for ref layers`))}),x.layers.forEach(ne=>{fs(ne.id)===N&&(q=ne)}),q?q.ref?A.push(new bn(g,u.ref,"ref cannot reference another ref layer")):P=fs(q.type):A.push(new bn(g,u.ref,`ref layer "${N}" not found`))}else if(P!=="background")if(u.source){const q=x.sources&&x.sources[u.source],ne=q&&fs(q.type);q?ne==="vector"&&P==="raster"?A.push(new bn(g,u.source,`layer "${u.id}" requires a raster source`)):ne!=="raster-dem"&&P==="hillshade"||ne!=="raster-dem"&&P==="color-relief"?A.push(new bn(g,u.source,`layer "${u.id}" requires a raster-dem source`)):ne==="raster"&&P!=="raster"?A.push(new bn(g,u.source,`layer "${u.id}" requires a vector source`)):ne!=="vector"||u["source-layer"]?ne==="raster-dem"&&P!=="hillshade"&&P!=="color-relief"?A.push(new bn(g,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):P!=="line"||!u.paint||!u.paint["line-gradient"]||ne==="geojson"&&q.lineMetrics||A.push(new bn(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):A.push(new bn(g,u,`layer "${u.id}" must specify a "source-layer"`)):A.push(new bn(g,u.source,`source "${u.source}" not found`))}else A.push(new bn(g,u,'missing required property "source"'));return A=A.concat(Aa({key:g,value:u,valueSpec:k.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${g}.type`,value:u.type,valueSpec:k.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:u,objectKey:"type"}),filter:js,layout:q=>Aa({layer:u,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":ne=>oh(Vi({layerType:P},ne))}}),paint:q=>Aa({layer:u,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":ne=>ua(Vi({layerType:P},ne))}})}})),A}function Os(c){const A=c.value,u=c.key,g=Qi(A);return g!=="string"?[new bn(u,A,`string expected, ${g} found`)]:[]}const ps={promoteId:function({key:c,value:A}){if(Qi(A)==="string")return Os({key:c,value:A});{const u=[];for(const g in A)u.push(...Os({key:`${c}.${g}`,value:A[g]}));return u}}};function ho(c){const A=c.value,u=c.key,g=c.styleSpec,x=c.style,k=c.validateSpec;if(!A.type)return[new bn(u,A,'"type" is required')];const P=fs(A.type);let N;switch(P){case"vector":case"raster":return N=Aa({key:u,value:A,valueSpec:g[`source_${P.replace("-","_")}`],style:c.style,styleSpec:g,objectElementValidators:ps,validateSpec:k}),N;case"raster-dem":return N=function(q){var ne;const ae=(ne=q.sourceName)!==null&&ne!==void 0?ne:"",ye=q.value,Ke=q.styleSpec,je=Ke.source_raster_dem,Ve=q.style;let et=[];const ut=Qi(ye);if(ye===void 0)return et;if(ut!=="object")return et.push(new bn("source_raster_dem",ye,`object expected, ${ut} found`)),et;const Mt=fs(ye.encoding)==="custom",Vt=["redFactor","greenFactor","blueFactor","baseShift"],Pt=q.value.encoding?`"${q.value.encoding}"`:"Default";for(const Ut in ye)!Mt&&Vt.includes(Ut)?et.push(new bn(Ut,ye[Ut],`In "${ae}": "${Ut}" is only valid when "encoding" is set to "custom". ${Pt} encoding found`)):je[Ut]?et=et.concat(q.validateSpec({key:Ut,value:ye[Ut],valueSpec:je[Ut],validateSpec:q.validateSpec,style:Ve,styleSpec:Ke})):et.push(new bn(Ut,ye[Ut],`unknown property "${Ut}"`));return et}({sourceName:u,value:A,style:c.style,styleSpec:g,validateSpec:k}),N;case"geojson":if(N=Aa({key:u,value:A,valueSpec:g.source_geojson,style:x,styleSpec:g,validateSpec:k,objectElementValidators:ps}),A.cluster)for(const q in A.clusterProperties){const[ne,ae]=A.clusterProperties[q],ye=typeof ne=="string"?[ne,["accumulated"],["get",q]]:ne;N.push(...ac({key:`${u}.${q}.map`,value:ae,expressionContext:"cluster-map"})),N.push(...ac({key:`${u}.${q}.reduce`,value:ye,expressionContext:"cluster-reduce"}))}return N;case"video":return Aa({key:u,value:A,valueSpec:g.source_video,style:x,validateSpec:k,styleSpec:g});case"image":return Aa({key:u,value:A,valueSpec:g.source_image,style:x,validateSpec:k,styleSpec:g});case"canvas":return[new bn(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return BA({key:`${u}.type`,value:A.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function HA(c){const A=c.value,u=c.styleSpec,g=u.light,x=c.style;let k=[];const P=Qi(A);if(A===void 0)return k;if(P!=="object")return k=k.concat([new bn("light",A,`object expected, ${P} found`)]),k;for(const N in A){const q=N.match(/^(.*)-transition$/);k=k.concat(q&&g[q[1]]&&g[q[1]].transition?c.validateSpec({key:N,value:A[N],valueSpec:u.transition,validateSpec:c.validateSpec,style:x,styleSpec:u}):g[N]?c.validateSpec({key:N,value:A[N],valueSpec:g[N],validateSpec:c.validateSpec,style:x,styleSpec:u}):[new bn(N,A[N],`unknown property "${N}"`)])}return k}function Fa(c){const A=c.value,u=c.styleSpec,g=u.sky,x=c.style,k=Qi(A);if(A===void 0)return[];if(k!=="object")return[new bn("sky",A,`object expected, ${k} found`)];let P=[];for(const N in A)P=P.concat(g[N]?c.validateSpec({key:N,value:A[N],valueSpec:g[N],style:x,styleSpec:u}):[new bn(N,A[N],`unknown property "${N}"`)]);return P}function Nl(c){const A=c.value,u=c.styleSpec,g=u.terrain,x=c.style;let k=[];const P=Qi(A);if(A===void 0)return k;if(P!=="object")return k=k.concat([new bn("terrain",A,`object expected, ${P} found`)]),k;for(const N in A)k=k.concat(g[N]?c.validateSpec({key:N,value:A[N],valueSpec:g[N],validateSpec:c.validateSpec,style:x,styleSpec:u}):[new bn(N,A[N],`unknown property "${N}"`)]);return k}function ul(c){let A=[];const u=c.value,g=c.key;if(Array.isArray(u)){const x=[],k=[];for(const P in u)u[P].id&&x.includes(u[P].id)&&A.push(new bn(g,u,`all the sprites' ids must be unique, but ${u[P].id} is duplicated`)),x.push(u[P].id),u[P].url&&k.includes(u[P].url)&&A.push(new bn(g,u,`all the sprites' URLs must be unique, but ${u[P].url} is duplicated`)),k.push(u[P].url),A=A.concat(Aa({key:`${g}[${P}]`,value:u[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return A}return Os({key:g,value:u})}function zu(c){return A=c.value,A&&A.constructor===Object?[]:[new bn(c.key,c.value,`object expected, ${Qi(c.value)} found`)];var A}const cl={"*":()=>[],array:VA,boolean:function(c){const A=c.value,u=c.key,g=Qi(A);return g!=="boolean"?[new bn(u,A,`boolean expected, ${g} found`)]:[]},number:yu,color:ot,constants:ud,enum:BA,filter:js,function:EA,layer:Fh,object:Aa,source:ho,light:HA,sky:Fa,terrain:Nl,projection:function(c){const A=c.value,u=c.styleSpec,g=u.projection,x=c.style,k=Qi(A);if(A===void 0)return[];if(k!=="object")return[new bn("projection",A,`object expected, ${k} found`)];let P=[];for(const N in A)P=P.concat(g[N]?c.validateSpec({key:N,value:A[N],valueSpec:g[N],style:x,styleSpec:u}):[new bn(N,A[N],`unknown property "${N}"`)]);return P},projectionDefinition:function(c){const A=c.key;let u=c.value;u=u instanceof String?u.valueOf():u;const g=Qi(u);return g!=="array"||function(x){return Array.isArray(x)&&x.length===3&&typeof x[0]=="string"&&typeof x[1]=="string"&&typeof x[2]=="number"}(u)||function(x){return!!["interpolate","step","literal"].includes(x[0])}(u)?["array","string"].includes(g)?[]:[new bn(A,u,`projection expected, invalid type "${g}" found`)]:[new bn(A,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:Os,formatted:function(c){return Os(c).length===0?[]:ac(c)},resolvedImage:function(c){return Os(c).length===0?[]:ac(c)},padding:function(c){const A=c.key,u=c.value;if(Qi(u)==="array"){if(u.length<1||u.length>4)return[new bn(A,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let x=[];for(let k=0;k<u.length;k++)x=x.concat(c.validateSpec({key:`${A}[${k}]`,value:u[k],validateSpec:c.validateSpec,valueSpec:g}));return x}return yu({key:A,value:u,valueSpec:{}})},numberArray:function(c){const A=c.key,u=c.value;if(Qi(u)==="array"){const g={type:"number"};if(u.length<1)return[new bn(A,u,"array length at least 1 expected, length 0 found")];let x=[];for(let k=0;k<u.length;k++)x=x.concat(c.validateSpec({key:`${A}[${k}]`,value:u[k],validateSpec:c.validateSpec,valueSpec:g}));return x}return yu({key:A,value:u,valueSpec:{}})},colorArray:function(c){const A=c.key,u=c.value;if(Qi(u)==="array"){if(u.length<1)return[new bn(A,u,"array length at least 1 expected, length 0 found")];let g=[];for(let x=0;x<u.length;x++)g=g.concat(ot({key:`${A}[${x}]`,value:u[x]}));return g}return ot({key:A,value:u})},variableAnchorOffsetCollection:function(c){const A=c.key,u=c.value,g=Qi(u),x=c.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new bn(A,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let P=0;P<u.length;P+=2)k=k.concat(BA({key:`${A}[${P}]`,value:u[P],valueSpec:x.layout_symbol["text-anchor"]})),k=k.concat(VA({key:`${A}[${P+1}]`,value:u[P+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:x}));return k},sprite:ul,state:zu};function Nu(c){const A=c.value,u=c.valueSpec,g=c.styleSpec;return c.validateSpec=Nu,u.expression&&Lu(fs(A))?EA(c):u.expression&&wA(xl(A))?ac(c):u.type&&cl[u.type]?cl[u.type](c):Aa(Vi({},c,{valueSpec:u.type?g[u.type]:u}))}function mf(c){const A=c.value,u=c.key,g=Os(c);return g.length||(A.indexOf("{fontstack}")===-1&&g.push(new bn(u,A,'"glyphs" url must include a "{fontstack}" token')),A.indexOf("{range}")===-1&&g.push(new bn(u,A,'"glyphs" url must include a "{range}" token'))),g}function Gl(c,A=nt){let u=[];return u=u.concat(Nu({key:"",value:c,valueSpec:A.$root,styleSpec:A,style:c,validateSpec:Nu,objectElementValidators:{glyphs:mf,"*":()=>[]}})),c.constants&&(u=u.concat(ud({key:"constants",value:c.constants}))),sh(u)}function Xs(c){return function(A){return c({...A,validateSpec:Nu})}}function sh(c){return[].concat(c).sort((A,u)=>A.line-u.line)}function ca(c){return function(...A){return sh(c.apply(this,A))}}Gl.source=ca(Xs(ho)),Gl.sprite=ca(Xs(ul)),Gl.glyphs=ca(Xs(mf)),Gl.light=ca(Xs(HA)),Gl.sky=ca(Xs(Fa)),Gl.terrain=ca(Xs(Nl)),Gl.state=ca(Xs(zu)),Gl.layer=ca(Xs(Fh)),Gl.filter=ca(Xs(js)),Gl.paintProperty=ca(Xs(ua)),Gl.layoutProperty=ca(Xs(oh));const Tc=Gl,cd=Tc.light,OA=Tc.sky,ah=Tc.paintProperty,lh=Tc.layoutProperty;function Gu(c,A){let u=!1;if(A&&A.length)for(const g of A)c.fire(new At(new Error(g.message))),u=!0;return u}class Ho{constructor(A,u,g){const x=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;const P=new Int32Array(this.arrayBuffer);A=P[0],this.d=(u=P[1])+2*(g=P[2]);for(let q=0;q<this.d*this.d;q++){const ne=P[3+q],ae=P[3+q+1];x.push(ne===ae?null:P.subarray(ne,ae))}const N=P[3+x.length+1];this.keys=P.subarray(P[3+x.length],N),this.bboxes=P.subarray(N),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let P=0;P<this.d*this.d;P++)x.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=A,this.padding=g,this.scale=u/A,this.uid=0;const k=g/u*A;this.min=-k,this.max=A+k}insert(A,u,g,x,k){this._forEachCell(u,g,x,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(A),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(A,u,g,x,k,P){this.cells[k].push(P)}query(A,u,g,x,k){const P=this.min,N=this.max;if(A<=P&&u<=P&&N<=g&&N<=x&&!k)return Array.prototype.slice.call(this.keys);{const q=[];return this._forEachCell(A,u,g,x,this._queryCell,q,{},k),q}}_queryCell(A,u,g,x,k,P,N,q){const ne=this.cells[k];if(ne!==null){const ae=this.keys,ye=this.bboxes;for(let Ke=0;Ke<ne.length;Ke++){const je=ne[Ke];if(N[je]===void 0){const Ve=4*je;(q?q(ye[Ve+0],ye[Ve+1],ye[Ve+2],ye[Ve+3]):A<=ye[Ve+2]&&u<=ye[Ve+3]&&g>=ye[Ve+0]&&x>=ye[Ve+1])?(N[je]=!0,P.push(ae[je])):N[je]=!1}}}}_forEachCell(A,u,g,x,k,P,N,q){const ne=this._convertToCellCoord(A),ae=this._convertToCellCoord(u),ye=this._convertToCellCoord(g),Ke=this._convertToCellCoord(x);for(let je=ne;je<=ye;je++)for(let Ve=ae;Ve<=Ke;Ve++){const et=this.d*Ve+je;if((!q||q(this._convertFromCellCoord(je),this._convertFromCellCoord(Ve),this._convertFromCellCoord(je+1),this._convertFromCellCoord(Ve+1)))&&k.call(this,A,u,g,x,et,P,N,q))return}}_convertFromCellCoord(A){return(A-this.padding)/this.scale}_convertToCellCoord(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const A=this.cells,u=3+this.cells.length+1+1;let g=0;for(let P=0;P<this.cells.length;P++)g+=this.cells[P].length;const x=new Int32Array(u+g+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let k=u;for(let P=0;P<A.length;P++){const N=A[P];x[3+P]=k,x.set(N,k),k+=N.length}return x[3+A.length]=k,x.set(this.keys,k),k+=this.keys.length,x[3+A.length+1]=k,x.set(this.bboxes,k),k+=this.bboxes.length,x.buffer}static serialize(A,u){const g=A.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(A){return new Ho(A.buffer)}}const Yi={};function Ar(c,A,u={}){if(Yi[c])throw new Error(`${c} is already registered.`);Object.defineProperty(A,"_classRegistryKey",{value:c,writeable:!1}),Yi[c]={klass:A,omit:u.omit||[],shallow:u.shallow||[]}}Ar("Object",Object),Ar("Set",Set),Ar("TransferableGridIndex",Ho),Ar("Color",Bi),Ar("Error",Error),Ar("AJAXError",Ge),Ar("ResolvedImage",ba),Ar("StylePropertyFunction",mu),Ar("StyleExpression",ic,{omit:["_evaluator"]}),Ar("ZoomDependentExpression",ih),Ar("ZoomConstantExpression",Th),Ar("CompoundExpression",Al,{omit:["_evaluate"]});for(const c in Ul)Ul[c]._classRegistryKey||Ar(`Expression_${c}`,Ul[c]);function Oa(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function xa(c){return c.$name||c.constructor._classRegistryKey}function lc(c){return!function(A){if(A===null||typeof A!="object")return!1;const u=xa(A);return!(!u||u==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Oa(c)||Vn(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Ml(c,A){if(lc(c))return(Oa(c)||Vn(c))&&A&&A.push(c),ArrayBuffer.isView(c)&&A&&A.push(c.buffer),c instanceof ImageData&&A&&A.push(c.data.buffer),c;if(Array.isArray(c)){const k=[];for(const P of c)k.push(Ml(P,A));return k}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const u=xa(c);if(!u)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Yi[u])throw new Error(`${u} is not registered.`);const{klass:g}=Yi[u],x=g.serialize?g.serialize(c,A):{};if(g.serialize){if(A&&x===A[A.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in c){if(!c.hasOwnProperty(k)||Yi[u].omit.indexOf(k)>=0)continue;const P=c[k];x[k]=Yi[u].shallow.indexOf(k)>=0?P:Ml(P,A)}c instanceof Error&&(x.message=c.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(x.$name=u),x}function wl(c){if(lc(c))return c;if(Array.isArray(c))return c.map(wl);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const A=xa(c)||"Object";if(!Yi[A])throw new Error(`can't deserialize unregistered class ${A}`);const{klass:u}=Yi[A];if(!u)throw new Error(`can't deserialize unregistered class ${A}`);if(u.deserialize)return u.deserialize(c);const g=Object.create(u.prototype);for(const x of Object.keys(c)){if(x==="$name")continue;const k=c[x];g[x]=Yi[A].shallow.indexOf(x)>=0?k:wl(k)}return g}class Ac{constructor(){this.first=!0}update(A,u){const g=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=g,!0))}}const eo={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function vu(c){for(const A of c)if(Cu(A.charCodeAt(0)))return!0;return!1}function Ah(c){for(const A of c)if(!Is(A.charCodeAt(0)))return!1;return!0}function Ia(c){const A=c.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(A.join("|"),"u")}const Ka=Ia(["Arab","Dupl","Mong","Ougr","Syrc"]);function Is(c){return!Ka.test(String.fromCodePoint(c))}const IA=Ia(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Cu(c){return!(c!==746&&c!==747&&(c<4352||!(eo["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||eo["CJK Compatibility"](c)||eo["CJK Strokes"](c)||!(!eo["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||eo["Enclosed CJK Letters and Months"](c)||eo["Ideographic Description Characters"](c)||eo.Kanbun(c)||eo.Katakana(c)&&c!==12540||!(!eo["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!eo["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||eo["Vertical Forms"](c)||eo["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||IA.test(String.fromCodePoint(c)))))}function uh(c){return!(Cu(c)||function(A){return!!(eo["Latin-1 Supplement"](A)&&(A===167||A===169||A===174||A===177||A===188||A===189||A===190||A===215||A===247)||eo["General Punctuation"](A)&&(A===8214||A===8224||A===8225||A===8240||A===8241||A===8251||A===8252||A===8258||A===8263||A===8264||A===8265||A===8273)||eo["Letterlike Symbols"](A)||eo["Number Forms"](A)||eo["Miscellaneous Technical"](A)&&(A>=8960&&A<=8967||A>=8972&&A<=8991||A>=8996&&A<=9e3||A===9003||A>=9085&&A<=9114||A>=9150&&A<=9165||A===9167||A>=9169&&A<=9179||A>=9186&&A<=9215)||eo["Control Pictures"](A)&&A!==9251||eo["Optical Character Recognition"](A)||eo["Enclosed Alphanumerics"](A)||eo["Geometric Shapes"](A)||eo["Miscellaneous Symbols"](A)&&!(A>=9754&&A<=9759)||eo["Miscellaneous Symbols and Arrows"](A)&&(A>=11026&&A<=11055||A>=11088&&A<=11097||A>=11192&&A<=11243)||eo["CJK Symbols and Punctuation"](A)||eo.Katakana(A)||eo["Private Use Area"](A)||eo["CJK Compatibility Forms"](A)||eo["Small Form Variants"](A)||eo["Halfwidth and Fullwidth Forms"](A)||A===8734||A===8756||A===8757||A>=9984&&A<=10087||A>=10102&&A<=10131||A===65532||A===65533)}(c))}const _u=Ia(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sl(c){return _u.test(String.fromCodePoint(c))}function Hf(c,A){return!(!A&&Sl(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||eo.Khmer(c))}function Kh(c){for(const A of c)if(Sl(A.charCodeAt(0)))return!0;return!1}const ZA=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(ZA.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,A){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const u=c.pluginURL,g=new Promise(k=>{this.loadScriptResolve=k});A(u);const x=new Promise(k=>setTimeout(()=>k(),this.TIMEOUT));if(yield Promise.race([g,x]),this.isParsed()){const k={pluginStatus:"loaded",pluginURL:u};return this.setState(k),k}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class bo{constructor(A,u){this.zoom=A,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new Ac,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ac,this.transition={},this.globalState={})}isSupportedScript(A){return function(u,g){for(const x of u)if(!Hf(x.charCodeAt(0),g))return!1;return!0}(A,ZA.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const A=this.zoom,u=A-Math.floor(A),g=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class hl{constructor(A,u){this.property=A,this.value=u,this.expression=function(g,x){if(Lu(g))return new mu(g,x);if(wA(g)){const k=kh(g,x);if(k.result==="error")throw new Error(k.value.map(P=>`${P.key}: ${P.message}`).join(", "));return k.value}{let k=g;return x.type==="color"&&typeof g=="string"?k=Bi.parse(g):x.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?x.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?x.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?k=Cs.parse(g):x.type==="projectionDefinition"&&typeof g=="string"&&(k=Ns.parse(g)):k=yo.parse(g):k=as.parse(g):k=hs.parse(g),{globalStateRefs:new Set,kind:"constant",evaluate:()=>k}}}(u===void 0?A.specification.default:u,A.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(A,u,g){return this.property.possiblyEvaluate(this,A,u,g)}setGlobalState(A){this.expression.evaluate=(u,g,x,k,P,N)=>(u.globalState=A,this._evaluate.call(this.expression,u,g,x,k,P,N))}}class kd{constructor(A){this.property=A,this.value=new hl(A,void 0)}transitioned(A,u){return new kc(this.property,this.value,u,Le({},A.transition,this.transition),A.now)}untransitioned(){return new kc(this.property,this.value,null,{},0)}}class hd{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)}getValue(A){return _t(this._values[A].value.value)}setValue(A,u){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new kd(this._values[A].property)),this._values[A].value=new hl(this._values[A].property,u===null?void 0:_t(u))}getTransition(A){return _t(this._values[A].transition)}setTransition(A,u){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new kd(this._values[A].property)),this._values[A].transition=_t(u)||void 0}serialize(){const A={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(A[u]=g);const x=this.getTransition(u);x!==void 0&&(A[`${u}-transition`]=x)}return A}transitioned(A,u){const g=new Pd(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].transitioned(A,u._values[x]);return g}untransitioned(){const A=new Pd(this._properties);for(const u of Object.keys(this._values))A._values[u]=this._values[u].untransitioned();return A}}class kc{constructor(A,u,g,x,k){this.property=A,this.value=u,this.begin=k+x.delay||0,this.end=this.begin+x.duration||0,A.specification.transition&&(x.delay||x.duration)&&(this.prior=g)}possiblyEvaluate(A,u,g){const x=A.now||0,k=this.value.possiblyEvaluate(A,u,g),P=this.prior;if(P){if(x>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(x<this.begin)return P.possiblyEvaluate(A,u,g);{const N=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(A,u,g),k,pt(N))}}return k}}class Pd{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)}possiblyEvaluate(A,u,g){const x=new uc(this._properties);for(const k of Object.keys(this._values))x._values[k]=this._values[k].possiblyEvaluate(A,u,g);return x}hasTransition(){for(const A of Object.keys(this._values))if(this._values[A].prior)return!0;return!1}}class Pc{constructor(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues),this._globalState={}}hasValue(A){return this._values[A].value!==void 0}getValue(A){return _t(this._values[A].value)}setValue(A,u){this._values[A]=new hl(this._values[A].property,u===null?void 0:_t(u)),this._values[A].setGlobalState(this._globalState)}serialize(){const A={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(A[u]=g)}return A}possiblyEvaluate(A,u,g){const x=new uc(this._properties);for(const k of Object.keys(this._values))x._values[k]=this._values[k].possiblyEvaluate(A,u,g);return x}setGlobalState(A){this._globalState=A;for(const u of Object.values(this._values))u.setGlobalState(A)}}class Wo{constructor(A,u,g){this.property=A,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(A){return this.value.kind==="constant"?this.value.value:A}evaluate(A,u,g,x){return this.property.evaluate(this.value,this.parameters,A,u,g,x)}}class uc{constructor(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)}get(A){return this._values[A]}}class Ir{constructor(A){this.specification=A}possiblyEvaluate(A,u){if(A.isDataDriven())throw new Error("Value should not be data driven");return A.expression.evaluate(u)}interpolate(A,u,g){const x=jA[this.specification.type];return x?x(A,u,g):A}}class Dr{constructor(A,u){this.specification=A,this.overrides=u}possiblyEvaluate(A,u,g,x){return new Wo(this,A.expression.kind==="constant"||A.expression.kind==="camera"?{kind:"constant",value:A.expression.evaluate(u,null,{},g,x)}:A.expression,u)}interpolate(A,u,g){if(A.value.kind!=="constant"||u.value.kind!=="constant")return A;if(A.value.value===void 0||u.value.value===void 0)return new Wo(this,{kind:"constant",value:void 0},A.parameters);const x=jA[this.specification.type];if(x){const k=x(A.value.value,u.value.value,g);return new Wo(this,{kind:"constant",value:k},A.parameters)}return A}evaluate(A,u,g,x,k,P){return A.kind==="constant"?A.value:A.evaluate(u,g,x,k,P)}}class bu extends Dr{possiblyEvaluate(A,u,g,x){if(A.value===void 0)return new Wo(this,{kind:"constant",value:void 0},u);if(A.expression.kind==="constant"){const k=A.expression.evaluate(u,null,{},g,x),P=A.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,N=this._calculate(P,P,P,u);return new Wo(this,{kind:"constant",value:N},u)}if(A.expression.kind==="camera"){const k=this._calculate(A.expression.evaluate({zoom:u.zoom-1}),A.expression.evaluate({zoom:u.zoom}),A.expression.evaluate({zoom:u.zoom+1}),u);return new Wo(this,{kind:"constant",value:k},u)}return new Wo(this,A.expression,u)}evaluate(A,u,g,x,k,P){if(A.kind==="source"){const N=A.evaluate(u,g,x,k,P);return this._calculate(N,N,N,u)}return A.kind==="composite"?this._calculate(A.evaluate({zoom:Math.floor(u.zoom)-1},g,x),A.evaluate({zoom:Math.floor(u.zoom)},g,x),A.evaluate({zoom:Math.floor(u.zoom)+1},g,x),u):A.value}_calculate(A,u,g,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:A,to:u}:{from:g,to:u}}interpolate(A){return A}}class XA{constructor(A){this.specification=A}possiblyEvaluate(A,u,g,x){if(A.value!==void 0){if(A.expression.kind==="constant"){const k=A.expression.evaluate(u,null,{},g,x);return this._calculate(k,k,k,u)}return this._calculate(A.expression.evaluate(new bo(Math.floor(u.zoom-1),u)),A.expression.evaluate(new bo(Math.floor(u.zoom),u)),A.expression.evaluate(new bo(Math.floor(u.zoom+1),u)),u)}}_calculate(A,u,g,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:A,to:u}:{from:g,to:u}}interpolate(A){return A}}class JA{constructor(A){this.specification=A}possiblyEvaluate(A,u,g,x){return!!A.expression.evaluate(u,null,{},g,x)}interpolate(){return!1}}class Uo{constructor(A){this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in A){const g=A[u];g.specification.overridable&&this.overridableProperties.push(u);const x=this.defaultPropertyValues[u]=new hl(g,void 0),k=this.defaultTransitionablePropertyValues[u]=new kd(g);this.defaultTransitioningPropertyValues[u]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=x.possiblyEvaluate({})}}}Ar("DataDrivenProperty",Dr),Ar("DataConstantProperty",Ir),Ar("CrossFadedDataDrivenProperty",bu),Ar("CrossFadedProperty",XA),Ar("ColorRampProperty",JA);const Ta="-transition";class La extends It{constructor(A,u){if(super(),this.id=A.id,this.type=A.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},A.type!=="custom"&&(this.metadata=A.metadata,this.minzoom=A.minzoom,this.maxzoom=A.maxzoom,this._globalState={},A.type!=="background"&&(this.source=A.source,this.sourceLayer=A["source-layer"],this.filter=A.filter,this._featureFilter=gu(A.filter)),u.layout&&(this._unevaluatedLayout=new Pc(u.layout)),u.paint)){this._transitionablePaint=new hd(u.paint);for(const g in A.paint)this.setPaintProperty(g,A.paint[g],{validate:!1});for(const g in A.layout)this.setLayoutProperty(g,A.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new uc(u.paint)}}setFilter(A){this.filter=A,this._featureFilter=gu(A)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(A){return A==="visibility"?this.visibility:this._unevaluatedLayout.getValue(A)}getLayoutAffectingGlobalStateRefs(){const A=new Set;if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const g=this._unevaluatedLayout._values[u];for(const x of g.getGlobalStateRefs())A.add(x)}for(const u of this._featureFilter.getGlobalStateRefs())A.add(u);return A}getPaintAffectingGlobalStateRefs(){var A;const u=new globalThis.Map;if(this._transitionablePaint)for(const g in this._transitionablePaint._values){const x=this._transitionablePaint._values[g].value;for(const k of x.getGlobalStateRefs()){const P=(A=u.get(k))!==null&&A!==void 0?A:[];P.push({name:g,value:x.value}),u.set(k,P)}}return u}setLayoutProperty(A,u,g={}){u!=null&&this._validate(lh,`layers.${this.id}.layout.${A}`,A,u,g)||(A!=="visibility"?this._unevaluatedLayout.setValue(A,u):this.visibility=u)}getPaintProperty(A){return A.endsWith(Ta)?this._transitionablePaint.getTransition(A.slice(0,-11)):this._transitionablePaint.getValue(A)}setPaintProperty(A,u,g={}){if(u!=null&&this._validate(ah,`layers.${this.id}.paint.${A}`,A,u,g))return!1;if(A.endsWith(Ta))return this._transitionablePaint.setTransition(A.slice(0,-11),u||void 0),!1;{const x=this._transitionablePaint._values[A],k=x.property.specification["property-type"]==="cross-faded-data-driven",P=x.value.isDataDriven(),N=x.value;this._transitionablePaint.setValue(A,u),this._handleSpecialPaintPropertyUpdate(A);const q=this._transitionablePaint._values[A].value;return q.isDataDriven()||P||k||this._handleOverridablePaintPropertyUpdate(A,N,q)}}_handleSpecialPaintPropertyUpdate(A){}_handleOverridablePaintPropertyUpdate(A,u,g){return!1}isHidden(A){return!!(this.minzoom&&A<this.minzoom)||!!(this.maxzoom&&A>=this.maxzoom)||this.visibility==="none"}updateTransitions(A){this._transitioningPaint=this._transitionablePaint.transitioned(A,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(A,u){A.globalState=this._globalState,A.getCrossfadeParameters&&(this._crossfadeParameters=A.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(A,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(A,void 0,u)}setGlobalState(A){this._globalState=A,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(A)}serialize(){const A={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(A.layout=A.layout||{},A.layout.visibility=this.visibility),Qe(A,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(A,u,g,x,k={}){return(!k||k.validate!==!1)&&Gu(this,A.call(Tc,{key:u,layerType:this.type,objectKey:g,value:x,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const A in this.paint._values){const u=this.paint.get(A);if(u instanceof Wo&&Ku(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const eu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class xu{constructor(A,u){this._structArray=A,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Oo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(A,u){return A._trim(),u&&(A.isTransferred=!0,u.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}}static deserialize(A){const u=Object.create(this.prototype);return u.arrayBuffer=A.arrayBuffer,u.length=A.length,u.capacity=A.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(A){this.reserve(A),this.length=A}reserve(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ms(c,A=1){let u=0,g=0;return{members:c.map(x=>{const k=eu[x.type].BYTES_PER_ELEMENT,P=u=tu(u,Math.max(A,k)),N=x.components||1;return g=Math.max(g,k),u+=k*N,{name:x.name,type:x.type,components:N,offset:P}}),size:tu(u,Math.max(g,A)),alignment:A}}function tu(c,A){return Math.ceil(c/A)*A}class dl extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u){const g=this.length;return this.resize(g+1),this.emplace(g,A,u)}emplace(A,u,g){const x=2*A;return this.int16[x+0]=u,this.int16[x+1]=g,A}}dl.prototype.bytesPerElement=4,Ar("StructArrayLayout2i4",dl);class cc extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g){const x=this.length;return this.resize(x+1),this.emplace(x,A,u,g)}emplace(A,u,g,x){const k=3*A;return this.int16[k+0]=u,this.int16[k+1]=g,this.int16[k+2]=x,A}}cc.prototype.bytesPerElement=6,Ar("StructArrayLayout3i6",cc);class Rc extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g,x){const k=this.length;return this.resize(k+1),this.emplace(k,A,u,g,x)}emplace(A,u,g,x,k){const P=4*A;return this.int16[P+0]=u,this.int16[P+1]=g,this.int16[P+2]=x,this.int16[P+3]=k,A}}Rc.prototype.bytesPerElement=8,Ar("StructArrayLayout4i8",Rc);class rA extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P){const N=this.length;return this.resize(N+1),this.emplace(N,A,u,g,x,k,P)}emplace(A,u,g,x,k,P,N){const q=6*A;return this.int16[q+0]=u,this.int16[q+1]=g,this.int16[q+2]=x,this.int16[q+3]=k,this.int16[q+4]=P,this.int16[q+5]=N,A}}rA.prototype.bytesPerElement=12,Ar("StructArrayLayout2i4i12",rA);class ka extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P){const N=this.length;return this.resize(N+1),this.emplace(N,A,u,g,x,k,P)}emplace(A,u,g,x,k,P,N){const q=4*A,ne=8*A;return this.int16[q+0]=u,this.int16[q+1]=g,this.uint8[ne+4]=x,this.uint8[ne+5]=k,this.uint8[ne+6]=P,this.uint8[ne+7]=N,A}}ka.prototype.bytesPerElement=8,Ar("StructArrayLayout2i4ub8",ka);class Dc extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,u){const g=this.length;return this.resize(g+1),this.emplace(g,A,u)}emplace(A,u,g){const x=2*A;return this.float32[x+0]=u,this.float32[x+1]=g,A}}Dc.prototype.bytesPerElement=8,Ar("StructArrayLayout2f8",Dc);class Fc extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P,N,q,ne,ae){const ye=this.length;return this.resize(ye+1),this.emplace(ye,A,u,g,x,k,P,N,q,ne,ae)}emplace(A,u,g,x,k,P,N,q,ne,ae,ye){const Ke=10*A;return this.uint16[Ke+0]=u,this.uint16[Ke+1]=g,this.uint16[Ke+2]=x,this.uint16[Ke+3]=k,this.uint16[Ke+4]=P,this.uint16[Ke+5]=N,this.uint16[Ke+6]=q,this.uint16[Ke+7]=ne,this.uint16[Ke+8]=ae,this.uint16[Ke+9]=ye,A}}Fc.prototype.bytesPerElement=20,Ar("StructArrayLayout10ui20",Fc);class Mu extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P,N,q,ne,ae,ye,Ke){const je=this.length;return this.resize(je+1),this.emplace(je,A,u,g,x,k,P,N,q,ne,ae,ye,Ke)}emplace(A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je){const Ve=12*A;return this.int16[Ve+0]=u,this.int16[Ve+1]=g,this.int16[Ve+2]=x,this.int16[Ve+3]=k,this.uint16[Ve+4]=P,this.uint16[Ve+5]=N,this.uint16[Ve+6]=q,this.uint16[Ve+7]=ne,this.int16[Ve+8]=ae,this.int16[Ve+9]=ye,this.int16[Ve+10]=Ke,this.int16[Ve+11]=je,A}}Mu.prototype.bytesPerElement=24,Ar("StructArrayLayout4i4ui4i24",Mu);class hc extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,u,g){const x=this.length;return this.resize(x+1),this.emplace(x,A,u,g)}emplace(A,u,g,x){const k=3*A;return this.float32[k+0]=u,this.float32[k+1]=g,this.float32[k+2]=x,A}}hc.prototype.bytesPerElement=12,Ar("StructArrayLayout3f12",hc);class ch extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(A){const u=this.length;return this.resize(u+1),this.emplace(u,A)}emplace(A,u){return this.uint32[1*A+0]=u,A}}ch.prototype.bytesPerElement=4,Ar("StructArrayLayout1ul4",ch);class TA extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P,N,q,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,A,u,g,x,k,P,N,q,ne)}emplace(A,u,g,x,k,P,N,q,ne,ae){const ye=10*A,Ke=5*A;return this.int16[ye+0]=u,this.int16[ye+1]=g,this.int16[ye+2]=x,this.int16[ye+3]=k,this.int16[ye+4]=P,this.int16[ye+5]=N,this.uint32[Ke+3]=q,this.uint16[ye+8]=ne,this.uint16[ye+9]=ae,A}}TA.prototype.bytesPerElement=20,Ar("StructArrayLayout6i1ul2ui20",TA);class hh extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P){const N=this.length;return this.resize(N+1),this.emplace(N,A,u,g,x,k,P)}emplace(A,u,g,x,k,P,N){const q=6*A;return this.int16[q+0]=u,this.int16[q+1]=g,this.int16[q+2]=x,this.int16[q+3]=k,this.int16[q+4]=P,this.int16[q+5]=N,A}}hh.prototype.bytesPerElement=12,Ar("StructArrayLayout2i2i2i12",hh);class O extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k){const P=this.length;return this.resize(P+1),this.emplace(P,A,u,g,x,k)}emplace(A,u,g,x,k,P){const N=4*A,q=8*A;return this.float32[N+0]=u,this.float32[N+1]=g,this.float32[N+2]=x,this.int16[q+6]=k,this.int16[q+7]=P,A}}O.prototype.bytesPerElement=16,Ar("StructArrayLayout2f1f2i16",O);class a extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P){const N=this.length;return this.resize(N+1),this.emplace(N,A,u,g,x,k,P)}emplace(A,u,g,x,k,P,N){const q=16*A,ne=4*A,ae=8*A;return this.uint8[q+0]=u,this.uint8[q+1]=g,this.float32[ne+1]=x,this.float32[ne+2]=k,this.int16[ae+6]=P,this.int16[ae+7]=N,A}}a.prototype.bytesPerElement=16,Ar("StructArrayLayout2ub2f2i16",a);class d extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,u,g){const x=this.length;return this.resize(x+1),this.emplace(x,A,u,g)}emplace(A,u,g,x){const k=3*A;return this.uint16[k+0]=u,this.uint16[k+1]=g,this.uint16[k+2]=x,A}}d.prototype.bytesPerElement=6,Ar("StructArrayLayout3ui6",d);class v extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt){const Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt)}emplace(A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt,Vt){const Pt=24*A,Ut=12*A,an=48*A;return this.int16[Pt+0]=u,this.int16[Pt+1]=g,this.uint16[Pt+2]=x,this.uint16[Pt+3]=k,this.uint32[Ut+2]=P,this.uint32[Ut+3]=N,this.uint32[Ut+4]=q,this.uint16[Pt+10]=ne,this.uint16[Pt+11]=ae,this.uint16[Pt+12]=ye,this.float32[Ut+7]=Ke,this.float32[Ut+8]=je,this.uint8[an+36]=Ve,this.uint8[an+37]=et,this.uint8[an+38]=ut,this.uint32[Ut+10]=Mt,this.int16[Pt+22]=Vt,A}}v.prototype.bytesPerElement=48,Ar("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",v);class w extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt,Vt,Pt,Ut,an,vn,Rn,yr,ur,pr,oi,cr){const mr=this.length;return this.resize(mr+1),this.emplace(mr,A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt,Vt,Pt,Ut,an,vn,Rn,yr,ur,pr,oi,cr)}emplace(A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt,Vt,Pt,Ut,an,vn,Rn,yr,ur,pr,oi,cr,mr){const Bn=32*A,Ti=16*A;return this.int16[Bn+0]=u,this.int16[Bn+1]=g,this.int16[Bn+2]=x,this.int16[Bn+3]=k,this.int16[Bn+4]=P,this.int16[Bn+5]=N,this.int16[Bn+6]=q,this.int16[Bn+7]=ne,this.uint16[Bn+8]=ae,this.uint16[Bn+9]=ye,this.uint16[Bn+10]=Ke,this.uint16[Bn+11]=je,this.uint16[Bn+12]=Ve,this.uint16[Bn+13]=et,this.uint16[Bn+14]=ut,this.uint16[Bn+15]=Mt,this.uint16[Bn+16]=Vt,this.uint16[Bn+17]=Pt,this.uint16[Bn+18]=Ut,this.uint16[Bn+19]=an,this.uint16[Bn+20]=vn,this.uint16[Bn+21]=Rn,this.uint16[Bn+22]=yr,this.uint32[Ti+12]=ur,this.float32[Ti+13]=pr,this.float32[Ti+14]=oi,this.uint16[Bn+30]=cr,this.uint16[Bn+31]=mr,A}}w.prototype.bytesPerElement=64,Ar("StructArrayLayout8i15ui1ul2f2ui64",w);class I extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A){const u=this.length;return this.resize(u+1),this.emplace(u,A)}emplace(A,u){return this.float32[1*A+0]=u,A}}I.prototype.bytesPerElement=4,Ar("StructArrayLayout1f4",I);class z extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,u,g){const x=this.length;return this.resize(x+1),this.emplace(x,A,u,g)}emplace(A,u,g,x){const k=3*A;return this.uint16[6*A+0]=u,this.float32[k+1]=g,this.float32[k+2]=x,A}}z.prototype.bytesPerElement=12,Ar("StructArrayLayout1ui2f12",z);class Y extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,u,g){const x=this.length;return this.resize(x+1),this.emplace(x,A,u,g)}emplace(A,u,g,x){const k=4*A;return this.uint32[2*A+0]=u,this.uint16[k+2]=g,this.uint16[k+3]=x,A}}Y.prototype.bytesPerElement=8,Ar("StructArrayLayout1ul2ui8",Y);class X extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,u){const g=this.length;return this.resize(g+1),this.emplace(g,A,u)}emplace(A,u,g){const x=2*A;return this.uint16[x+0]=u,this.uint16[x+1]=g,A}}X.prototype.bytesPerElement=4,Ar("StructArrayLayout2ui4",X);class ce extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A){const u=this.length;return this.resize(u+1),this.emplace(u,A)}emplace(A,u){return this.uint16[1*A+0]=u,A}}ce.prototype.bytesPerElement=2,Ar("StructArrayLayout1ui2",ce);class pe extends Oo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,u,g,x){const k=this.length;return this.resize(k+1),this.emplace(k,A,u,g,x)}emplace(A,u,g,x,k){const P=4*A;return this.float32[P+0]=u,this.float32[P+1]=g,this.float32[P+2]=x,this.float32[P+3]=k,A}}pe.prototype.bytesPerElement=16,Ar("StructArrayLayout4f16",pe);class Se extends xu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}}Se.prototype.size=20;class Me extends TA{get(A){return new Se(this,A)}}Ar("CollisionBoxArray",Me);class Fe extends xu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(A){this._structArray.uint8[this._pos1+37]=A}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(A){this._structArray.uint8[this._pos1+38]=A}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(A){this._structArray.uint32[this._pos4+10]=A}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Fe.prototype.size=48;class qe extends v{get(A){return new Fe(this,A)}}Ar("PlacedSymbolArray",qe);class it extends xu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(A){this._structArray.uint32[this._pos4+12]=A}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}it.prototype.size=64;class lt extends w{get(A){return new it(this,A)}}Ar("SymbolInstanceArray",lt);class ht extends I{getoffsetX(A){return this.float32[1*A+0]}}Ar("GlyphOffsetArray",ht);class bt extends cc{getx(A){return this.int16[3*A+0]}gety(A){return this.int16[3*A+1]}gettileUnitDistanceFromAnchor(A){return this.int16[3*A+2]}}Ar("SymbolLineVertexArray",bt);class vt extends xu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}vt.prototype.size=12;class xt extends z{get(A){return new vt(this,A)}}Ar("TextAnchorOffsetArray",xt);class Dt extends xu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Dt.prototype.size=8;class Lt extends Y{get(A){return new Dt(this,A)}}Ar("FeatureIndexArray",Lt);class St extends dl{}class Gt extends dl{}class rn extends dl{}class Ht extends rA{}class tn extends ka{}class sn extends Dc{}class Yn extends Fc{}class Gn extends Mu{}class On extends hc{}class _r extends ch{}class ui extends hh{}class xo extends a{}class Zo extends d{}class Fo extends X{}const Xo=Ms([{name:"a_pos",components:2,type:"Int16"}],4),{members:As}=Xo;class wi{constructor(A=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=A}prepareSegment(A,u,g,x){const k=this.segments[this.segments.length-1];return A>wi.MAX_VERTEX_ARRAY_LENGTH&&wt(`Max vertices per segment is ${wi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${A}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${wi.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!k||k.vertexLength+A>wi.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==x?this.createNewSegment(u,g,x):k}createNewSegment(A,u,g){const x={vertexOffset:A.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return g!==void 0&&(x.sortKey=g),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(x),x}getOrCreateLatestSegment(A,u,g){return this.prepareSegment(0,A,u,g)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const A of this.segments)for(const u in A.vaos)A.vaos[u].destroy()}static simpleSegment(A,u,g,x){return new wi([{vertexOffset:A,primitiveOffset:u,vertexLength:g,primitiveLength:x,vaos:{},sortKey:0}])}}function Io(c,A){return 256*(c=Bt(Math.floor(c),0,255))+Bt(Math.floor(A),0,255)}wi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ar("SegmentVector",wi);const Ws=Ms([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ws,ha,Js,nu={exports:{}},ju={exports:{}},iA={exports:{}},Lh=function(){if(Js)return nu.exports;Js=1;var c=(ws||(ws=1,ju.exports=function(u,g){var x,k,P,N,q,ne,ae,ye;for(k=u.length-(x=3&u.length),P=g,q=3432918353,ne=461845907,ye=0;ye<k;)ae=255&u.charCodeAt(ye)|(255&u.charCodeAt(++ye))<<8|(255&u.charCodeAt(++ye))<<16|(255&u.charCodeAt(++ye))<<24,++ye,P=27492+(65535&(N=5*(65535&(P=(P^=ae=(65535&(ae=(ae=(65535&ae)*q+(((ae>>>16)*q&65535)<<16)&4294967295)<<15|ae>>>17))*ne+(((ae>>>16)*ne&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(ae=0,x){case 3:ae^=(255&u.charCodeAt(ye+2))<<16;case 2:ae^=(255&u.charCodeAt(ye+1))<<8;case 1:P^=ae=(65535&(ae=(ae=(65535&(ae^=255&u.charCodeAt(ye)))*q+(((ae>>>16)*q&65535)<<16)&4294967295)<<15|ae>>>17))*ne+(((ae>>>16)*ne&65535)<<16)&4294967295}return P^=u.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}),ju.exports),A=(ha||(ha=1,iA.exports=function(u,g){for(var x,k=u.length,P=g^k,N=0;k>=4;)x=1540483477*(65535&(x=255&u.charCodeAt(N)|(255&u.charCodeAt(++N))<<8|(255&u.charCodeAt(++N))<<16|(255&u.charCodeAt(++N))<<24))+((1540483477*(x>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),k-=4,++N;switch(k){case 3:P^=(255&u.charCodeAt(N+2))<<16;case 2:P^=(255&u.charCodeAt(N+1))<<8;case 1:P=1540483477*(65535&(P^=255&u.charCodeAt(N)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}),iA.exports);return nu.exports=c,nu.exports.murmur3=c,nu.exports.murmur2=A,nu.exports}(),Uh=C(Lh);class wu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(A,u,g,x){this.ids.push(Kc(A)),this.positions.push(u,g,x)}getPositions(A){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Kc(A);let g=0,x=this.ids.length-1;for(;g<x;){const P=g+x>>1;this.ids[P]>=u?x=P:g=P+1}const k=[];for(;this.ids[g]===u;)k.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return k}static serialize(A,u){const g=new Float64Array(A.ids),x=new Uint32Array(A.positions);return El(g,x,0,g.length-1),u&&u.push(g.buffer,x.buffer),{ids:g,positions:x}}static deserialize(A){const u=new wu;return u.ids=A.ids,u.positions=A.positions,u.indexed=!0,u}}function Kc(c){const A=+c;return!isNaN(A)&&A<=Number.MAX_SAFE_INTEGER?A:Uh(String(c))}function El(c,A,u,g){for(;u<g;){const x=c[u+g>>1];let k=u-1,P=g+1;for(;;){do k++;while(c[k]<x);do P--;while(c[P]>x);if(k>=P)break;Wu(c,k,P),Wu(A,3*k,3*P),Wu(A,3*k+1,3*P+1),Wu(A,3*k+2,3*P+2)}P-u<g-P?(El(c,A,u,P),u=P+1):(El(c,A,P+1,g),g=P)}}function Wu(c,A,u){const g=c[A];c[A]=c[u],c[u]=g}Ar("FeaturePositionMap",wu);class fl{constructor(A,u){this.gl=A.gl,this.location=u}}class Qu extends fl{constructor(A,u){super(A,u),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1f(this.location,A))}}class zo extends fl{constructor(A,u){super(A,u),this.current=[0,0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]&&A[3]===this.current[3]||(this.current=A,this.gl.uniform4f(this.location,A[0],A[1],A[2],A[3]))}}class ms extends fl{constructor(A,u){super(A,u),this.current=Bi.transparent}set(A){A.r===this.current.r&&A.g===this.current.g&&A.b===this.current.b&&A.a===this.current.a||(this.current=A,this.gl.uniform4f(this.location,A.r,A.g,A.b,A.a))}}const jl=new Float32Array(16);function Ua(c){return[Io(255*c.r,255*c.g),Io(255*c.b,255*c.a)]}class dc{constructor(A,u,g){this.value=A,this.uniformNames=u.map(x=>`u_${x}`),this.type=g}setUniform(A,u,g){A.set(g.constantOr(this.value))}getBinding(A,u,g){return this.type==="color"?new ms(A,u):new Qu(A,u)}}class oA{constructor(A,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(A,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=A.tlbr}setUniform(A,u,g,x){const k=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;k&&A.set(k)}getBinding(A,u,g){return g.substr(0,9)==="u_pattern"?new zo(A,u):new Qu(A,u)}}class ea{constructor(A,u,g,x){this.expression=A,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(k=>({name:`a_${k}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(A,u,g){const x=this.paintVertexArray.length,k=this.expression.evaluate(new bo(0,g),u,{},g.canonical,[],g.formattedSection);this.paintVertexArray.resize(A),this._setPaintValue(x,A,k)}updatePaintArray(A,u,g,x,k){const P=this.expression.evaluate(new bo(0,k),g,x);this._setPaintValue(A,u,P)}_setPaintValue(A,u,g){if(this.type==="color"){const x=Ua(g);for(let k=A;k<u;k++)this.paintVertexArray.emplace(k,x[0],x[1])}else{for(let x=A;x<u;x++)this.paintVertexArray.emplace(x,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class kA{constructor(A,u,g,x,k,P){this.expression=A,this.uniformNames=u.map(N=>`u_${N}_t`),this.type=g,this.useIntegerZoom=x,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=u.map(N=>({name:`a_${N}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new P}populatePaintArray(A,u,g){const x=this.expression.evaluate(new bo(this.zoom,g),u,{},g.canonical,[],g.formattedSection),k=this.expression.evaluate(new bo(this.zoom+1,g),u,{},g.canonical,[],g.formattedSection),P=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(P,A,x,k)}updatePaintArray(A,u,g,x,k){const P=this.expression.evaluate(new bo(this.zoom,k),g,x),N=this.expression.evaluate(new bo(this.zoom+1,k),g,x);this._setPaintValue(A,u,P,N)}_setPaintValue(A,u,g,x){if(this.type==="color"){const k=Ua(g),P=Ua(x);for(let N=A;N<u;N++)this.paintVertexArray.emplace(N,k[0],k[1],P[0],P[1])}else{for(let k=A;k<u;k++)this.paintVertexArray.emplace(k,g,x);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(x))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(A,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=Bt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);A.set(x)}getBinding(A,u,g){return new Qu(A,u)}}class Su{constructor(A,u,g,x,k,P){this.expression=A,this.type=u,this.useIntegerZoom=g,this.zoom=x,this.layerId=P,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(A,u,g){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(x,A,u.patterns&&u.patterns[this.layerId],g.imagePositions)}updatePaintArray(A,u,g,x,k){this._setPaintValues(A,u,g.patterns&&g.patterns[this.layerId],k.imagePositions)}_setPaintValues(A,u,g,x){if(!x||!g)return;const{min:k,mid:P,max:N}=g,q=x[k],ne=x[P],ae=x[N];if(q&&ne&&ae)for(let ye=A;ye<u;ye++)this.zoomInPaintVertexArray.emplace(ye,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],ne.pixelRatio,q.pixelRatio),this.zoomOutPaintVertexArray.emplace(ye,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1],ne.pixelRatio,ae.pixelRatio)}upload(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Ws.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Ws.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class gf{constructor(A,u,g){this.binders={},this._buffers=[];const x=[];for(const k in A.paint._values){if(!g(k))continue;const P=A.paint.get(k);if(!(P instanceof Wo&&Ku(P.property.specification)))continue;const N=zh(k,A.type),q=P.value,ne=P.property.specification.type,ae=P.property.useIntegerZoom,ye=P.property.specification["property-type"],Ke=ye==="cross-faded"||ye==="cross-faded-data-driven";if(q.kind==="constant")this.binders[k]=Ke?new oA(q.value,N):new dc(q.value,N,ne),x.push(`/u_${k}`);else if(q.kind==="source"||Ke){const je=Rd(k,ne,"source");this.binders[k]=Ke?new Su(q,ne,ae,u,je,A.id):new ea(q,N,ne,je),x.push(`/a_${k}`)}else{const je=Rd(k,ne,"composite");this.binders[k]=new kA(q,N,ne,ae,u,je),x.push(`/z_${k}`)}}this.cacheKey=x.sort().join("")}getMaxValue(A){const u=this.binders[A];return u instanceof ea||u instanceof kA?u.maxValue:0}populatePaintArrays(A,u,g){for(const x in this.binders){const k=this.binders[x];(k instanceof ea||k instanceof kA||k instanceof Su)&&k.populatePaintArray(A,u,g)}}setConstantPatternPositions(A,u){for(const g in this.binders){const x=this.binders[g];x instanceof oA&&x.setConstantPatternPositions(A,u)}}updatePaintArrays(A,u,g,x,k){let P=!1;for(const N in A){const q=u.getPositions(N);for(const ne of q){const ae=g.feature(ne.index);for(const ye in this.binders){const Ke=this.binders[ye];if((Ke instanceof ea||Ke instanceof kA||Ke instanceof Su)&&Ke.expression.isStateDependent===!0){const je=x.paint.get(ye);Ke.expression=je.value,Ke.updatePaintArray(ne.start,ne.end,ae,A[N],k),P=!0}}}}return P}defines(){const A=[];for(const u in this.binders){const g=this.binders[u];(g instanceof dc||g instanceof oA)&&A.push(...g.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return A}getBinderAttributes(){const A=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof ea||g instanceof kA)for(let x=0;x<g.paintVertexAttributes.length;x++)A.push(g.paintVertexAttributes[x].name);else if(g instanceof Su)for(let x=0;x<Ws.members.length;x++)A.push(Ws.members[x].name)}return A}getBinderUniforms(){const A=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof dc||g instanceof oA||g instanceof kA)for(const x of g.uniformNames)A.push(x)}return A}getPaintVertexBuffers(){return this._buffers}getUniforms(A,u){const g=[];for(const x in this.binders){const k=this.binders[x];if(k instanceof dc||k instanceof oA||k instanceof kA){for(const P of k.uniformNames)if(u[P]){const N=k.getBinding(A,u[P],P);g.push({name:P,property:x,binding:N})}}}return g}setUniforms(A,u,g,x){for(const{name:k,property:P,binding:N}of u)this.binders[P].setUniform(N,x,g.get(P),k)}updatePaintBuffers(A){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(A&&g instanceof Su){const x=A.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(g instanceof ea||g instanceof kA)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(A){for(const u in this.binders){const g=this.binders[u];(g instanceof ea||g instanceof kA||g instanceof Su)&&g.upload(A)}this.updatePaintBuffers()}destroy(){for(const A in this.binders){const u=this.binders[A];(u instanceof ea||u instanceof kA||u instanceof Su)&&u.destroy()}}}class Xa{constructor(A,u,g=()=>!0){this.programConfigurations={};for(const x of A)this.programConfigurations[x.id]=new gf(x,u,g);this.needsUpload=!1,this._featureMap=new wu,this._bufferOffset=0}populatePaintArrays(A,u,g,x){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(A,u,x);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0}updatePaintArrays(A,u,g,x){for(const k of g)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(A,this._featureMap,u,k,x)||this.needsUpload}get(A){return this.programConfigurations[A]}upload(A){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(A);this.needsUpload=!1}}destroy(){for(const A in this.programConfigurations)this.programConfigurations[A].destroy()}}function zh(c,A){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${A}-`,"").replace(/-/g,"_")]}function Rd(c,A,u){const g={color:{source:Dc,composite:pe},number:{source:I,composite:Dc}},x=function(k){return{"line-pattern":{source:Yn,composite:Yn},"fill-pattern":{source:Yn,composite:Yn},"fill-extrusion-pattern":{source:Yn,composite:Yn}}[k]}(c);return x&&x[u]||g[A][u]}Ar("ConstantBinder",dc),Ar("CrossFadedConstantBinder",oA),Ar("SourceExpressionBinder",ea),Ar("CrossFadedCompositeBinder",Su),Ar("CompositeExpressionBinder",kA),Ar("ProgramConfiguration",gf,{omit:["_buffers"]}),Ar("ProgramConfigurationSet",Xa);const Yu=Math.pow(2,14)-1,Nh=-Yu-1;function ru(c){const A=Je/c.extent,u=c.loadGeometry();for(let g=0;g<u.length;g++){const x=u[g];for(let k=0;k<x.length;k++){const P=x[k],N=Math.round(P.x*A),q=Math.round(P.y*A);P.x=Bt(N,Nh,Yu),P.y=Bt(q,Nh,Yu),(N<P.x||N>P.x+1||q<P.y||q>P.y+1)&&wt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function qu(c,A){return{type:c.type,id:c.id,properties:c.properties,geometry:A?ru(c):[]}}const dd=-32768;function Zf(c,A,u,g,x){c.emplaceBack(dd+8*A+g,dd+8*u+x)}class Dd{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(u=>u.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Gt,this.indexArray=new Zo,this.segments=new wi,this.programConfigurations=new Xa(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(A,u,g){const x=this.layers[0],k=[];let P=null,N=!1,q=x.type==="heatmap";if(x.type==="circle"){const ae=x;P=ae.layout.get("circle-sort-key"),N=!P.isConstant(),q=q||ae.paint.get("circle-pitch-alignment")==="map"}const ne=q?u.subdivisionGranularity.circle:1;for(const{feature:ae,id:ye,index:Ke,sourceLayerIndex:je}of A){const Ve=this.layers[0]._featureFilter.needGeometry,et=qu(ae,Ve);if(!this.layers[0]._featureFilter.filter(new bo(this.zoom,{globalState:this.globalState}),et,g))continue;const ut=N?P.evaluate(et,{},g):void 0,Mt={id:ye,properties:ae.properties,type:ae.type,sourceLayerIndex:je,index:Ke,geometry:Ve?et.geometry:ru(ae),patterns:{},sortKey:ut};k.push(Mt)}N&&k.sort((ae,ye)=>ae.sortKey-ye.sortKey);for(const ae of k){const{geometry:ye,index:Ke,sourceLayerIndex:je}=ae,Ve=A[Ke].feature;this.addFeature(ae,ye,Ke,g,ne),u.featureIndex.insert(Ve,ye,Ke,je,this.index)}}update(A,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,u,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,As),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(A,u,g,x,k=1){let P;switch(k){case 1:P=[0,7];break;case 3:P=[0,2,5,7];break;case 5:P=[0,1,3,4,6,7];break;case 7:P=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${k}; valid values are 1, 3, 5, 7.`)}const N=P.length;for(const q of u)for(const ne of q){const ae=ne.x,ye=ne.y;if(ae<0||ae>=Je||ye<0||ye>=Je)continue;const Ke=this.segments.prepareSegment(N*N,this.layoutVertexArray,this.indexArray,A.sortKey),je=Ke.vertexLength;for(let Ve=0;Ve<N;Ve++)for(let et=0;et<N;et++)Zf(this.layoutVertexArray,ae,ye,P[et],P[Ve]);for(let Ve=0;Ve<N-1;Ve++)for(let et=0;et<N-1;et++){const ut=je+Ve*N+et,Mt=je+(Ve+1)*N+et;this.indexArray.emplaceBack(ut,Mt+1,ut+1),this.indexArray.emplaceBack(ut,Mt,Mt+1)}Ke.vertexLength+=N*N,Ke.primitiveLength+=(N-1)*(N-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,g,{imagePositions:{},canonical:x,globalState:this.globalState})}}function jp(c,A){for(let u=0;u<c.length;u++)if(dh(A,c[u]))return!0;for(let u=0;u<A.length;u++)if(dh(c,A[u]))return!0;return!!Bl(c,A)}function fd(c,A,u){return!!dh(c,A)||!!Xf(A,c,u)}function yf(c,A){if(c.length===1)return Wp(A,c[0]);for(let u=0;u<A.length;u++){const g=A[u];for(let x=0;x<g.length;x++)if(dh(c,g[x]))return!0}for(let u=0;u<c.length;u++)if(Wp(A,c[u]))return!0;for(let u=0;u<A.length;u++)if(Bl(c,A[u]))return!0;return!1}function Wl(c,A,u){if(c.length>1){if(Bl(c,A))return!0;for(let g=0;g<A.length;g++)if(Xf(A[g],c,u))return!0}for(let g=0;g<c.length;g++)if(Xf(c[g],A,u))return!0;return!1}function Bl(c,A){if(c.length===0||A.length===0)return!1;for(let u=0;u<c.length-1;u++){const g=c[u],x=c[u+1];for(let k=0;k<A.length-1;k++)if(e0(g,x,A[k],A[k+1]))return!0}return!1}function e0(c,A,u,g){return Qt(c,u,g)!==Qt(A,u,g)&&Qt(c,A,u)!==Qt(c,A,g)}function Xf(c,A,u){const g=u*u;if(A.length===1)return c.distSqr(A[0])<g;for(let x=1;x<A.length;x++)if(Qo(c,A[x-1],A[x])<g)return!0;return!1}function Qo(c,A,u){const g=A.distSqr(u);if(g===0)return c.distSqr(A);const x=((c.x-A.x)*(u.x-A.x)+(c.y-A.y)*(u.y-A.y))/g;return c.distSqr(x<0?A:x>1?u:u.sub(A)._mult(x)._add(A))}function Wp(c,A){let u,g,x,k=!1;for(let P=0;P<c.length;P++){u=c[P];for(let N=0,q=u.length-1;N<u.length;q=N++)g=u[N],x=u[q],g.y>A.y!=x.y>A.y&&A.x<(x.x-g.x)*(A.y-g.y)/(x.y-g.y)+g.x&&(k=!k)}return k}function dh(c,A){let u=!1;for(let g=0,x=c.length-1;g<c.length;x=g++){const k=c[g],P=c[x];k.y>A.y!=P.y>A.y&&A.x<(P.x-k.x)*(A.y-k.y)/(P.y-k.y)+k.x&&(u=!u)}return u}function Fd(c,A,u){const g=u[0],x=u[2];if(c.x<g.x&&A.x<g.x||c.x>x.x&&A.x>x.x||c.y<g.y&&A.y<g.y||c.y>x.y&&A.y>x.y)return!1;const k=Qt(c,A,u[0]);return k!==Qt(c,A,u[1])||k!==Qt(c,A,u[2])||k!==Qt(c,A,u[3])}function sA(c,A,u){const g=A.paint.get(c).value;return g.kind==="constant"?g.value:u.programConfigurations.get(A.id).getMaxValue(c)}function Gh(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Kd(c,A,u,g,x){if(!A[0]&&!A[1])return c;const k=f.convert(A)._mult(x);u==="viewport"&&k._rotate(-g);const P=[];for(let N=0;N<c.length;N++)P.push(c[N].sub(k));return P}let fc,Ld;Ar("CircleBucket",Dd,{omit:["layers"]});var vf={get paint(){return Ld=Ld||new Uo({"circle-radius":new Dr(nt.paint_circle["circle-radius"]),"circle-color":new Dr(nt.paint_circle["circle-color"]),"circle-blur":new Dr(nt.paint_circle["circle-blur"]),"circle-opacity":new Dr(nt.paint_circle["circle-opacity"]),"circle-translate":new Ir(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ir(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ir(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ir(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dr(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dr(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dr(nt.paint_circle["circle-stroke-opacity"])})},get layout(){return fc=fc||new Uo({"circle-sort-key":new Dr(nt.layout_circle["circle-sort-key"])})}};class Cf extends La{constructor(A){super(A,vf)}createBucket(A){return new Dd(A)}queryRadius(A){const u=A;return sA("circle-radius",this,u)+sA("circle-stroke-width",this,u)+Gh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:A,feature:u,featureState:g,geometry:x,transform:k,pixelsToTileUnits:P,unwrappedTileID:N,getElevation:q}){const ne=Kd(A,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-k.bearingInRadians,P),ae=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),ye=this.paint.get("circle-pitch-alignment")==="map",Ke=ye?ne:function(Ve,et,ut,Mt){return Ve.map(Vt=>pd(Vt,et,ut,Mt))}(ne,k,N,q),je=ye?ae*P:ae;for(const Ve of x)for(const et of Ve){const ut=ye?et:pd(et,k,N,q);let Mt=je;const Vt=k.projectTileCoordinates(et.x,et.y,N,q).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Mt*=Vt/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Mt*=k.cameraToCenterDistance/Vt),fd(Ke,ut,Mt))return!0}return!1}}function pd(c,A,u,g){const x=A.projectTileCoordinates(c.x,c.y,u,g).point;return new f((.5*x.x+.5)*A.width,(.5*-x.y+.5)*A.height)}class fh extends Dd{}let Si;Ar("HeatmapBucket",fh,{omit:["layers"]});var _f={get paint(){return Si=Si||new Uo({"heatmap-radius":new Dr(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dr(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ir(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new JA(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ir(nt.paint_heatmap["heatmap-opacity"])})}};function No(c,{width:A,height:u},g,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==A*u*g)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${A*u*g}`)}else x=new Uint8Array(A*u*g);return c.width=A,c.height=u,c.data=x,c}function ph(c,{width:A,height:u},g){if(A===c.width&&u===c.height)return;const x=No({},{width:A,height:u},g);bf(c,x,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,A),height:Math.min(c.height,u)},g),c.width=A,c.height=u,c.data=x.data}function bf(c,A,u,g,x,k){if(x.width===0||x.height===0)return A;if(x.width>c.width||x.height>c.height||u.x>c.width-x.width||u.y>c.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>A.width||x.height>A.height||g.x>A.width-x.width||g.y>A.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const P=c.data,N=A.data;if(P===N)throw new Error("srcData equals dstData, so image is already copied");for(let q=0;q<x.height;q++){const ne=((u.y+q)*c.width+u.x)*k,ae=((g.y+q)*A.width+g.x)*k;for(let ye=0;ye<x.width*k;ye++)N[ae+ye]=P[ne+ye]}return A}class pl{constructor(A,u){No(this,A,1,u)}resize(A){ph(this,A,1)}clone(){return new pl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,u,g,x,k){bf(A,u,g,x,k,1)}}class PA{constructor(A,u){No(this,A,4,u)}resize(A){ph(this,A,4)}replace(A,u){u?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A}clone(){return new PA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,u,g,x,k){bf(A,u,g,x,k,4)}setPixel(A,u,g){const x=4*(A*this.width+u);this.data[x+0]=Math.round(255*g.r/g.a),this.data[x+1]=Math.round(255*g.g/g.a),this.data[x+2]=Math.round(255*g.b/g.a),this.data[x+3]=Math.round(255*g.a)}}function Ja(c){const A={},u=c.resolution||256,g=c.clips?c.clips.length:1,x=c.image||new PA({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const k=(P,N,q)=>{A[c.evaluationKey]=q;const ne=c.expression.evaluate(A);x.setPixel(P/4/u,N/4,ne)};if(c.clips)for(let P=0,N=0;P<g;++P,N+=4*u)for(let q=0,ne=0;q<u;q++,ne+=4){const ae=q/(u-1),{start:ye,end:Ke}=c.clips[P];k(N,ne,ye*(1-ae)+Ke*ae)}else for(let P=0,N=0;P<u;P++,N+=4)k(0,N,P/(u-1));return x}Ar("AlphaImage",pl),Ar("RGBAImage",PA);const Jf="big-fb";class Pa extends La{createBucket(A){return new fh(A)}constructor(A){super(A,_f),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ja({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Jf)&&this.heatmapFbos.delete(Jf)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Qp;var ep={get paint(){return Qp=Qp||new Uo({"hillshade-illumination-direction":new Ir(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Ir(nt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Ir(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ir(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ir(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ir(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ir(nt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Ir(nt.paint_hillshade["hillshade-method"])})}};class aA extends La{constructor(A){super(A,ep),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let A=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,g=this.paint.get("hillshade-highlight-color").values,x=this.paint.get("hillshade-shadow-color").values;const k=Math.max(A.length,u.length,g.length,x.length);A=A.concat(Array(k-A.length).fill(A.at(-1))),u=u.concat(Array(k-u.length).fill(u.at(-1))),g=g.concat(Array(k-g.length).fill(g.at(-1))),x=x.concat(Array(k-x.length).fill(x.at(-1)));const P=u.map(Mr);return{directionRadians:A.map(Mr),altitudeRadians:P,shadowColor:x,highlightColor:g}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let tp;var h={get paint(){return tp=tp||new Uo({"color-relief-opacity":new Ir(nt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new JA(nt["paint_color-relief"]["color-relief-color"])})}};class y{constructor(A,u,g,x){this.context=A,this.format=g,this.texture=A.gl.createTexture(),this.update(u,x)}update(A,u,g){const{width:x,height:k}=A,P=!(this.size&&this.size[0]===x&&this.size[1]===k||g),{context:N}=this,{gl:q}=N;if(this.useMipmap=!!(u&&u.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!u||u.premultiply!==!1)),P)this.size=[x,k],A instanceof HTMLImageElement||A instanceof HTMLCanvasElement||A instanceof HTMLVideoElement||A instanceof ImageData||Vn(A)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,A):q.texImage2D(q.TEXTURE_2D,0,this.format,x,k,0,this.format,q.UNSIGNED_BYTE,A.data);else{const{x:ne,y:ae}=g||{x:0,y:0};A instanceof HTMLImageElement||A instanceof HTMLCanvasElement||A instanceof HTMLVideoElement||A instanceof ImageData||Vn(A)?q.texSubImage2D(q.TEXTURE_2D,0,ne,ae,q.RGBA,q.UNSIGNED_BYTE,A):q.texSubImage2D(q.TEXTURE_2D,0,ne,ae,x,k,q.RGBA,q.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D),N.pixelStoreUnpackFlipY.setDefault(),N.pixelStoreUnpack.setDefault(),N.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(A,u,g){const{context:x}=this,{gl:k}=x;k.bindTexture(k.TEXTURE_2D,this.texture),g!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=k.LINEAR),A!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,A),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,g||A),this.filter=A),u!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:A}=this.context;A.deleteTexture(this.texture),this.texture=null}}class E{constructor(A,u,g,x=1,k=1,P=1,N=0){if(this.uid=A,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void wt(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const q=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=k,this.blueFactor=P,this.baseShift=N;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ne=0;ne<q;ne++)this.data[this._idx(-1,ne)]=this.data[this._idx(0,ne)],this.data[this._idx(q,ne)]=this.data[this._idx(q-1,ne)],this.data[this._idx(ne,-1)]=this.data[this._idx(ne,0)],this.data[this._idx(ne,q)]=this.data[this._idx(ne,q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(q,-1)]=this.data[this._idx(q-1,0)],this.data[this._idx(-1,q)]=this.data[this._idx(0,q-1)],this.data[this._idx(q,q)]=this.data[this._idx(q-1,q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ne=0;ne<q;ne++)for(let ae=0;ae<q;ae++){const ye=this.get(ne,ae);ye>this.max&&(this.max=ye),ye<this.min&&(this.min=ye)}}get(A,u){const g=new Uint8Array(this.data.buffer),x=4*this._idx(A,u);return this.unpack(g[x],g[x+1],g[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(A,u){if(A<-1||A>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(A+1)}unpack(A,u,g){return A*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}pack(A){return S(A,this.getUnpackVector())}getPixels(){return new PA({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(A,u,g){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");let x=u*this.dim,k=u*this.dim+this.dim,P=g*this.dim,N=g*this.dim+this.dim;switch(u){case-1:x=k-1;break;case 1:k=x+1}switch(g){case-1:P=N-1;break;case 1:N=P+1}const q=-u*this.dim,ne=-g*this.dim;for(let ae=P;ae<N;ae++)for(let ye=x;ye<k;ye++)this.data[this._idx(ye,ae)]=A.data[this._idx(ye+q,ae+ne)]}}function S(c,A){const u=A[0],g=A[1],x=A[2],k=A[3],P=Math.min(u,g,x),N=Math.round((c+k)/P);return{r:Math.floor(N*P/u)%256,g:Math.floor(N*P/g)%256,b:Math.floor(N*P/x)%256}}Ar("DEMData",E);class F extends La{constructor(A){super(A,h)}_createColorRamp(A){const u={elevationStops:[],colorStops:[]},g=this._transitionablePaint._values["color-relief-color"].value.expression;if(g instanceof Th&&g._styleExpression.expression instanceof Vo){this.colorRampExpression=g;const P=g._styleExpression.expression;u.elevationStops=P.labels,u.colorStops=[];for(const N of u.elevationStops)u.colorStops.push(P.evaluate({globals:{elevation:N}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[Bi.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=A)return u;const x={elevationStops:[],colorStops:[]},k=(u.elevationStops.length-1)/(A-1);for(let P=0;P<u.elevationStops.length-.5;P+=k)x.elevationStops.push(u.elevationStops[Math.round(P)]),x.colorStops.push(u.colorStops[Math.round(P)]);return wt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),x}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(A,u,g){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const x=this._createColorRamp(u),k=new PA({width:x.colorStops.length,height:1}),P=new PA({width:x.colorStops.length,height:1});for(let N=0;N<x.elevationStops.length;N++){const q=S(x.elevationStops[N],g);P.setPixel(0,N,new Bi(q.r/255,q.g/255,q.b/255,1)),k.setPixel(0,N,x.colorStops[N])}return this.colorRampTextures={elevationTexture:new y(A,P,A.gl.RGBA),colorTexture:new y(A,k,A.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Z=Ms([{name:"a_pos",components:2,type:"Int16"}],4),{members:de}=Z;function _e(c,A,u){const g=u.patternDependencies;let x=!1;for(const k of A){const P=k.paint.get(`${c}-pattern`);P.isConstant()||(x=!0);const N=P.constantOr(null);N&&(x=!0,g[N.to]=!0,g[N.from]=!0)}return x}function Re(c,A,u,g,x){const{zoom:k,globalState:P}=g,N=x.patternDependencies;for(const q of A){const ne=q.paint.get(`${c}-pattern`).value;if(ne.kind!=="constant"){let ae=ne.evaluate({zoom:k-1,globalState:P},u,{},x.availableImages),ye=ne.evaluate({zoom:k,globalState:P},u,{},x.availableImages),Ke=ne.evaluate({zoom:k+1,globalState:P},u,{},x.availableImages);ae=ae&&ae.name?ae.name:ae,ye=ye&&ye.name?ye.name:ye,Ke=Ke&&Ke.name?Ke.name:Ke,N[ae]=!0,N[ye]=!0,N[Ke]=!0,u.patterns[q.id]={min:ae,mid:ye,max:Ke}}}return u}function Ue(c,A,u,g,x){let k;if(x===function(P,N,q,ne){let ae=0;for(let ye=N,Ke=q-ne;ye<q;ye+=ne)ae+=(P[Ke]-P[ye])*(P[ye+1]+P[Ke+1]),Ke=ye;return ae}(c,A,u,g)>0)for(let P=A;P<u;P+=g)k=za(P/g|0,c[P],c[P+1],k);else for(let P=u-g;P>=A;P-=g)k=za(P/g|0,c[P],c[P+1],k);return k&&Qs(k,k.next)&&(na(k),k=k.next),k}function yt(c,A){if(!c)return c;A||(A=c);let u,g=c;do if(u=!1,g.steiner||!Qs(g,g.next)&&ci(g.prev,g,g.next)!==0)g=g.next;else{if(na(g),g=A=g.prev,g===g.next)break;u=!0}while(u||g!==A);return A}function Ot(c,A,u,g,x,k,P){if(!c)return;!P&&k&&function(q,ne,ae,ye){let Ke=q;do Ke.z===0&&(Ke.z=ar(Ke.x,Ke.y,ne,ae,ye)),Ke.prevZ=Ke.prev,Ke.nextZ=Ke.next,Ke=Ke.next;while(Ke!==q);Ke.prevZ.nextZ=null,Ke.prevZ=null,function(je){let Ve,et=1;do{let ut,Mt=je;je=null;let Vt=null;for(Ve=0;Mt;){Ve++;let Pt=Mt,Ut=0;for(let vn=0;vn<et&&(Ut++,Pt=Pt.nextZ,Pt);vn++);let an=et;for(;Ut>0||an>0&&Pt;)Ut!==0&&(an===0||!Pt||Mt.z<=Pt.z)?(ut=Mt,Mt=Mt.nextZ,Ut--):(ut=Pt,Pt=Pt.nextZ,an--),Vt?Vt.nextZ=ut:je=ut,ut.prevZ=Vt,Vt=ut;Mt=Pt}Vt.nextZ=null,et*=2}while(Ve>1)}(Ke)}(c,g,x,k);let N=c;for(;c.prev!==c.next;){const q=c.prev,ne=c.next;if(k?qt(c,g,x,k):Jt(c))A.push(q.i,c.i,ne.i),na(c),c=ne.next,N=ne.next;else if((c=ne)===N){P?P===1?Ot(c=_n(yt(c),A),A,u,g,x,k,2):P===2&&In(c,A,u,g,x,k):Ot(yt(c),A,u,g,x,k,1);break}}}function Jt(c){const A=c.prev,u=c,g=c.next;if(ci(A,u,g)>=0)return!1;const x=A.x,k=u.x,P=g.x,N=A.y,q=u.y,ne=g.y,ae=Math.min(x,k,P),ye=Math.min(N,q,ne),Ke=Math.max(x,k,P),je=Math.max(N,q,ne);let Ve=g.next;for(;Ve!==A;){if(Ve.x>=ae&&Ve.x<=Ke&&Ve.y>=ye&&Ve.y<=je&&Or(x,N,k,q,P,ne,Ve.x,Ve.y)&&ci(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.next}return!0}function qt(c,A,u,g){const x=c.prev,k=c,P=c.next;if(ci(x,k,P)>=0)return!1;const N=x.x,q=k.x,ne=P.x,ae=x.y,ye=k.y,Ke=P.y,je=Math.min(N,q,ne),Ve=Math.min(ae,ye,Ke),et=Math.max(N,q,ne),ut=Math.max(ae,ye,Ke),Mt=ar(je,Ve,A,u,g),Vt=ar(et,ut,A,u,g);let Pt=c.prevZ,Ut=c.nextZ;for(;Pt&&Pt.z>=Mt&&Ut&&Ut.z<=Vt;){if(Pt.x>=je&&Pt.x<=et&&Pt.y>=Ve&&Pt.y<=ut&&Pt!==x&&Pt!==P&&Or(N,ae,q,ye,ne,Ke,Pt.x,Pt.y)&&ci(Pt.prev,Pt,Pt.next)>=0||(Pt=Pt.prevZ,Ut.x>=je&&Ut.x<=et&&Ut.y>=Ve&&Ut.y<=ut&&Ut!==x&&Ut!==P&&Or(N,ae,q,ye,ne,Ke,Ut.x,Ut.y)&&ci(Ut.prev,Ut,Ut.next)>=0))return!1;Ut=Ut.nextZ}for(;Pt&&Pt.z>=Mt;){if(Pt.x>=je&&Pt.x<=et&&Pt.y>=Ve&&Pt.y<=ut&&Pt!==x&&Pt!==P&&Or(N,ae,q,ye,ne,Ke,Pt.x,Pt.y)&&ci(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.prevZ}for(;Ut&&Ut.z<=Vt;){if(Ut.x>=je&&Ut.x<=et&&Ut.y>=Ve&&Ut.y<=ut&&Ut!==x&&Ut!==P&&Or(N,ae,q,ye,ne,Ke,Ut.x,Ut.y)&&ci(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.nextZ}return!0}function _n(c,A){let u=c;do{const g=u.prev,x=u.next.next;!Qs(g,x)&&Ys(g,u,u.next,x)&&ta(g,x)&&ta(x,g)&&(A.push(g.i,u.i,x.i),na(u),na(u.next),u=c=x),u=u.next}while(u!==c);return yt(u)}function In(c,A,u,g,x,k){let P=c;do{let N=P.next.next;for(;N!==P.prev;){if(P.i!==N.i&&to(P,N)){let q=lA(P,N);return P=yt(P,P.next),q=yt(q,q.next),Ot(P,A,u,g,x,k,0),void Ot(q,A,u,g,x,k,0)}N=N.next}P=P.next}while(P!==c)}function nr(c,A){let u=c.x-A.x;return u===0&&(u=c.y-A.y,u===0)&&(u=(c.next.y-c.y)/(c.next.x-c.x)-(A.next.y-A.y)/(A.next.x-A.x)),u}function Jn(c,A){const u=function(x,k){let P=k;const N=x.x,q=x.y;let ne,ae=-1/0;if(Qs(x,P))return P;do{if(Qs(x,P.next))return P.next;if(q<=P.y&&q>=P.next.y&&P.next.y!==P.y){const et=P.x+(q-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(et<=N&&et>ae&&(ae=et,ne=P.x<P.next.x?P:P.next,et===N))return ne}P=P.next}while(P!==k);if(!ne)return null;const ye=ne,Ke=ne.x,je=ne.y;let Ve=1/0;P=ne;do{if(N>=P.x&&P.x>=Ke&&N!==P.x&&ri(q<je?N:ae,q,Ke,je,q<je?ae:N,q,P.x,P.y)){const et=Math.abs(q-P.y)/(N-P.x);ta(P,x)&&(et<Ve||et===Ve&&(P.x>ne.x||P.x===ne.x&&fr(ne,P)))&&(ne=P,Ve=et)}P=P.next}while(P!==ye);return ne}(c,A);if(!u)return A;const g=lA(u,c);return yt(g,g.next),yt(u,u.next)}function fr(c,A){return ci(c.prev,c,A.prev)<0&&ci(A.next,c,c.next)<0}function ar(c,A,u,g,x){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*x|0)|c<<8))|c<<4))|c<<2))|c<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-g)*x|0)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function Tr(c){let A=c,u=c;do(A.x<u.x||A.x===u.x&&A.y<u.y)&&(u=A),A=A.next;while(A!==c);return u}function ri(c,A,u,g,x,k,P,N){return(x-P)*(A-N)>=(c-P)*(k-N)&&(c-P)*(g-N)>=(u-P)*(A-N)&&(u-P)*(k-N)>=(x-P)*(g-N)}function Or(c,A,u,g,x,k,P,N){return!(c===P&&A===N)&&ri(c,A,u,g,x,k,P,N)}function to(c,A){return c.next.i!==A.i&&c.prev.i!==A.i&&!function(u,g){let x=u;do{if(x.i!==u.i&&x.next.i!==u.i&&x.i!==g.i&&x.next.i!==g.i&&Ys(x,x.next,u,g))return!0;x=x.next}while(x!==u);return!1}(c,A)&&(ta(c,A)&&ta(A,c)&&function(u,g){let x=u,k=!1;const P=(u.x+g.x)/2,N=(u.y+g.y)/2;do x.y>N!=x.next.y>N&&x.next.y!==x.y&&P<(x.next.x-x.x)*(N-x.y)/(x.next.y-x.y)+x.x&&(k=!k),x=x.next;while(x!==u);return k}(c,A)&&(ci(c.prev,c,A.prev)||ci(c,A.prev,A))||Qs(c,A)&&ci(c.prev,c,c.next)>0&&ci(A.prev,A,A.next)>0)}function ci(c,A,u){return(A.y-c.y)*(u.x-A.x)-(A.x-c.x)*(u.y-A.y)}function Qs(c,A){return c.x===A.x&&c.y===A.y}function Ys(c,A,u,g){const x=da(ci(c,A,u)),k=da(ci(c,A,g)),P=da(ci(u,g,c)),N=da(ci(u,g,A));return x!==k&&P!==N||!(x!==0||!qs(c,u,A))||!(k!==0||!qs(c,g,A))||!(P!==0||!qs(u,c,g))||!(N!==0||!qs(u,A,g))}function qs(c,A,u){return A.x<=Math.max(c.x,u.x)&&A.x>=Math.min(c.x,u.x)&&A.y<=Math.max(c.y,u.y)&&A.y>=Math.min(c.y,u.y)}function da(c){return c>0?1:c<0?-1:0}function ta(c,A){return ci(c.prev,c,c.next)<0?ci(c,A,c.next)>=0&&ci(c,c.prev,A)>=0:ci(c,A,c.prev)<0||ci(c,c.next,A)<0}function lA(c,A){const u=Jo(c.i,c.x,c.y),g=Jo(A.i,A.x,A.y),x=c.next,k=A.prev;return c.next=A,A.prev=c,u.next=x,x.prev=u,g.next=u,u.prev=g,k.next=g,g.prev=k,g}function za(c,A,u,g){const x=Jo(c,A,u);return g?(x.next=g.next,x.prev=g,g.next.prev=x,g.next=x):(x.prev=x,x.next=x),x}function na(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Jo(c,A,u){return{i:c,x:A,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class hi{constructor(A,u){if(u>A)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=A,this._minGranularity=u}getGranularityForZoomLevel(A){return Math.max(Math.floor(this._baseZoomGranularity/(1<<A)),this._minGranularity,1)}}class Yo{constructor(A){this.fill=A.fill,this.line=A.line,this.tile=A.tile,this.stencil=A.stencil,this.circle=A.circle}}Yo.noSubdivision=new Yo({fill:new hi(0,0),line:new hi(0,0),tile:new hi(0,0),stencil:new hi(0,0),circle:1}),Ar("SubdivisionGranularityExpression",hi),Ar("SubdivisionGranularitySetting",Yo);const Ss=-32768,Ks=32767;class Ts{constructor(A,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=A,this._granularityCellSize=Je/A,this._canonical=u}_getKey(A,u){return(A+=32768)<<16|u+32768}_vertexToIndex(A,u){if(A<-32768||u<-32768||A>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const g=0|Math.round(A),x=0|Math.round(u),k=this._getKey(g,x);if(this._vertexDictionary.has(k))return this._vertexDictionary.get(k);const P=this._vertexBuffer.length/2;return this._vertexDictionary.set(k,P),this._vertexBuffer.push(g,x),P}_subdivideTrianglesScanline(A){if(this._granularity<2)return function(x,k){const P=[];for(let N=0;N<k.length;N+=3){const q=k[N],ne=k[N+1],ae=k[N+2],ye=x[2*q],Ke=x[2*q+1];(x[2*ne]-ye)*(x[2*ae+1]-Ke)-(x[2*ne+1]-Ke)*(x[2*ae]-ye)>0?(P.push(q),P.push(ae),P.push(ne)):(P.push(q),P.push(ne),P.push(ae))}return P}(this._vertexBuffer,A);const u=[],g=A.length;for(let x=0;x<g;x+=3){const k=[A[x+0],A[x+1],A[x+2]],P=[this._vertexBuffer[2*A[x+0]+0],this._vertexBuffer[2*A[x+0]+1],this._vertexBuffer[2*A[x+1]+0],this._vertexBuffer[2*A[x+1]+1],this._vertexBuffer[2*A[x+2]+0],this._vertexBuffer[2*A[x+2]+1]];let N=1/0,q=1/0,ne=-1/0,ae=-1/0;for(let et=0;et<3;et++){const ut=P[2*et],Mt=P[2*et+1];N=Math.min(N,ut),ne=Math.max(ne,ut),q=Math.min(q,Mt),ae=Math.max(ae,Mt)}if(N===ne||q===ae)continue;const ye=Math.floor(N/this._granularityCellSize),Ke=Math.ceil(ne/this._granularityCellSize),je=Math.floor(q/this._granularityCellSize),Ve=Math.ceil(ae/this._granularityCellSize);if(ye!==Ke||je!==Ve)for(let et=je;et<Ve;et++){const ut=this._scanlineGenerateVertexRingForCellRow(et,P,k);Ud(this._vertexBuffer,ut,u)}else u.push(...k)}return u}_scanlineGenerateVertexRingForCellRow(A,u,g){const x=A*this._granularityCellSize,k=x+this._granularityCellSize,P=[];for(let N=0;N<3;N++){const q=u[2*N],ne=u[2*N+1],ae=u[2*(N+1)%6],ye=u[(2*(N+1)+1)%6],Ke=u[2*(N+2)%6],je=u[(2*(N+2)+1)%6],Ve=ae-q,et=ye-ne,ut=Ve===0,Mt=et===0,Vt=(x-ne)/et,Pt=(k-ne)/et,Ut=Math.min(Vt,Pt),an=Math.max(Vt,Pt);if(!Mt&&(Ut>=1||an<=0)||Mt&&(ne<x||ne>k)){ye>=x&&ye<=k&&P.push(g[(N+1)%3]);continue}!Mt&&Ut>0&&P.push(this._vertexToIndex(q+Ve*Ut,ne+et*Ut));const vn=q+Ve*Math.max(Ut,0),Rn=q+Ve*Math.min(an,1);ut||this._generateIntraEdgeVertices(P,q,ne,ae,ye,vn,Rn),!Mt&&an<1&&P.push(this._vertexToIndex(q+Ve*an,ne+et*an)),(Mt||ye>=x&&ye<=k)&&P.push(g[(N+1)%3]),!Mt&&(ye<=x||ye>=k)&&this._generateInterEdgeVertices(P,q,ne,ae,ye,Ke,je,Rn,x,k)}return P}_generateIntraEdgeVertices(A,u,g,x,k,P,N){const q=x-u,ne=k-g,ae=ne===0,ye=ae?Math.min(u,x):Math.min(P,N),Ke=ae?Math.max(u,x):Math.max(P,N),je=Math.floor(ye/this._granularityCellSize)+1,Ve=Math.ceil(Ke/this._granularityCellSize)-1;if(ae?u<x:P<N)for(let et=je;et<=Ve;et++){const ut=et*this._granularityCellSize;A.push(this._vertexToIndex(ut,g+ne*(ut-u)/q))}else for(let et=Ve;et>=je;et--){const ut=et*this._granularityCellSize;A.push(this._vertexToIndex(ut,g+ne*(ut-u)/q))}}_generateInterEdgeVertices(A,u,g,x,k,P,N,q,ne,ae){const ye=k-g,Ke=P-x,je=N-k,Ve=(ne-k)/je,et=(ae-k)/je,ut=Math.min(Ve,et),Mt=Math.max(Ve,et),Vt=x+Ke*ut;let Pt=Math.floor(Math.min(Vt,q)/this._granularityCellSize)+1,Ut=Math.ceil(Math.max(Vt,q)/this._granularityCellSize)-1,an=q<Vt;const vn=je===0;if(vn&&(N===ne||N===ae))return;if(vn||ut>=1||Mt<=0){const yr=g-N,ur=P+(u-P)*Math.min((ne-N)/yr,(ae-N)/yr);Pt=Math.floor(Math.min(ur,q)/this._granularityCellSize)+1,Ut=Math.ceil(Math.max(ur,q)/this._granularityCellSize)-1,an=q<ur}const Rn=ye>0?ae:ne;if(an)for(let yr=Pt;yr<=Ut;yr++)A.push(this._vertexToIndex(yr*this._granularityCellSize,Rn));else for(let yr=Ut;yr>=Pt;yr--)A.push(this._vertexToIndex(yr*this._granularityCellSize,Rn))}_generateOutline(A){const u=[];for(const g of A){const x=ao(g,this._granularity,!0),k=this._pointArrayToIndices(x),P=[];for(let N=1;N<k.length;N++)P.push(k[N-1]),P.push(k[N]);u.push(P)}return u}_handlePoles(A){let u=!1,g=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(g=!0)),(u||g)&&this._fillPoles(A,u,g)}_ensureNoPoleVertices(){const A=this._vertexBuffer;for(let u=0;u<A.length;u+=2){const g=A[u+1];g===Ss&&(A[u+1]=-32767),g===Ks&&(A[u+1]=32766)}}_generatePoleQuad(A,u,g,x,k,P){x>k!=(P===Ss)?(A.push(u),A.push(g),A.push(this._vertexToIndex(x,P)),A.push(g),A.push(this._vertexToIndex(k,P)),A.push(this._vertexToIndex(x,P))):(A.push(g),A.push(u),A.push(this._vertexToIndex(x,P)),A.push(this._vertexToIndex(k,P)),A.push(g),A.push(this._vertexToIndex(x,P)))}_fillPoles(A,u,g){const x=this._vertexBuffer,k=Je,P=A.length;for(let N=2;N<P;N+=3){const q=A[N-2],ne=A[N-1],ae=A[N],ye=x[2*q],Ke=x[2*q+1],je=x[2*ne],Ve=x[2*ne+1],et=x[2*ae],ut=x[2*ae+1];u&&(Ke===0&&Ve===0&&this._generatePoleQuad(A,q,ne,ye,je,Ss),Ve===0&&ut===0&&this._generatePoleQuad(A,ne,ae,je,et,Ss),ut===0&&Ke===0&&this._generatePoleQuad(A,ae,q,et,ye,Ss)),g&&(Ke===k&&Ve===k&&this._generatePoleQuad(A,q,ne,ye,je,Ks),Ve===k&&ut===k&&this._generatePoleQuad(A,ne,ae,je,et,Ks),ut===k&&Ke===k&&this._generatePoleQuad(A,ae,q,et,ye,Ks))}}_initializeVertices(A){for(let u=0;u<A.length;u+=2)this._vertexToIndex(A[u],A[u+1])}subdividePolygonInternal(A,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:g,holeIndices:x}=function(N){const q=[],ne=[];for(const ae of N)if(ae.length!==0){ae!==N[0]&&q.push(ne.length/2);for(let ye=0;ye<ae.length;ye++)ne.push(ae[ye].x),ne.push(ae[ye].y)}return{flattened:ne,holeIndices:q}}(A);let k;this._initializeVertices(g);try{const N=function(ne,ae,ye=2){const Ke=ae&&ae.length,je=Ke?ae[0]*ye:ne.length;let Ve=Ue(ne,0,je,ye,!0);const et=[];if(!Ve||Ve.next===Ve.prev)return et;let ut,Mt,Vt;if(Ke&&(Ve=function(Pt,Ut,an,vn){const Rn=[];for(let yr=0,ur=Ut.length;yr<ur;yr++){const pr=Ue(Pt,Ut[yr]*vn,yr<ur-1?Ut[yr+1]*vn:Pt.length,vn,!1);pr===pr.next&&(pr.steiner=!0),Rn.push(Tr(pr))}Rn.sort(nr);for(let yr=0;yr<Rn.length;yr++)an=Jn(Rn[yr],an);return an}(ne,ae,Ve,ye)),ne.length>80*ye){ut=ne[0],Mt=ne[1];let Pt=ut,Ut=Mt;for(let an=ye;an<je;an+=ye){const vn=ne[an],Rn=ne[an+1];vn<ut&&(ut=vn),Rn<Mt&&(Mt=Rn),vn>Pt&&(Pt=vn),Rn>Ut&&(Ut=Rn)}Vt=Math.max(Pt-ut,Ut-Mt),Vt=Vt!==0?32767/Vt:0}return Ot(Ve,et,ye,ut,Mt,Vt,0),et}(g,x),q=this._convertIndices(g,N);k=this._subdivideTrianglesScanline(q)}catch(N){console.error(N)}let P=[];return u&&(P=this._generateOutline(A)),this._ensureNoPoleVertices(),this._handlePoles(k),{verticesFlattened:this._vertexBuffer,indicesTriangles:k,indicesLineList:P}}_convertIndices(A,u){const g=[];for(let x=0;x<u.length;x++)g.push(this._vertexToIndex(A[2*u[x]],A[2*u[x]+1]));return g}_pointArrayToIndices(A){const u=[];for(let g=0;g<A.length;g++){const x=A[g];u.push(this._vertexToIndex(x.x,x.y))}return u}}function RA(c,A,u,g=!0){return new Ts(u,A).subdividePolygonInternal(c,g)}function ao(c,A,u=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const g=c[0],x=c[c.length-1],k=u&&(g.x!==x.x||g.y!==x.y);if(A<2)return k?[...c,c[0]]:[...c];const P=Math.floor(Je/A),N=[];N.push(new f(c[0].x,c[0].y));const q=c.length,ne=k?q:q-1;for(let ae=0;ae<ne;ae++){const ye=c[ae],Ke=ae<q-1?c[ae+1]:c[0],je=ye.x,Ve=ye.y,et=Ke.x,ut=Ke.y,Mt=je!==et,Vt=Ve!==ut;if(!Mt&&!Vt)continue;const Pt=et-je,Ut=ut-Ve,an=Math.abs(Pt),vn=Math.abs(Ut);let Rn=je,yr=Ve;for(;;){const pr=Pt>0?(Math.floor(Rn/P)+1)*P:(Math.ceil(Rn/P)-1)*P,oi=Ut>0?(Math.floor(yr/P)+1)*P:(Math.ceil(yr/P)-1)*P,cr=Math.abs(Rn-pr),mr=Math.abs(yr-oi),Bn=Math.abs(Rn-et),Ti=Math.abs(yr-ut),Fi=Mt?cr/an:Number.POSITIVE_INFINITY,pi=Vt?mr/vn:Number.POSITIVE_INFINITY;if((Bn<=cr||!Mt)&&(Ti<=mr||!Vt))break;if(Fi<pi&&Mt||!Vt){Rn=pr,yr+=Ut*Fi;const Yr=new f(Rn,Math.round(yr));N[N.length-1].x===Yr.x&&N[N.length-1].y===Yr.y||N.push(Yr)}else{Rn+=Pt*pi,yr=oi;const Yr=new f(Math.round(Rn),yr);N[N.length-1].x===Yr.x&&N[N.length-1].y===Yr.y||N.push(Yr)}}const ur=new f(et,ut);N[N.length-1].x===ur.x&&N[N.length-1].y===ur.y||N.push(ur)}return N}function Ud(c,A,u){if(A.length===0)throw new Error("Subdivision vertex ring is empty.");let g=0,x=c[2*A[0]];for(let q=1;q<A.length;q++){const ne=c[2*A[q]];ne<x&&(x=ne,g=q)}const k=A.length;let P=g,N=(P+1)%k;for(;;){const q=P-1>=0?P-1:k-1,ne=(N+1)%k,ae=c[2*A[q]],ye=c[2*A[ne]],Ke=c[2*A[P]],je=c[2*A[P]+1],Ve=c[2*A[N]+1];let et=!1;if(ae<ye)et=!0;else if(ae>ye)et=!1;else{const ut=Ve-je,Mt=-(c[2*A[N]]-Ke),Vt=je<Ve?1:-1;((ae-Ke)*ut+(c[2*A[q]+1]-je)*Mt)*Vt>((ye-Ke)*ut+(c[2*A[ne]+1]-je)*Mt)*Vt&&(et=!0)}if(et){const ut=A[q],Mt=A[P],Vt=A[N];ut!==Mt&&ut!==Vt&&Mt!==Vt&&u.push(Vt,Mt,ut),P--,P<0&&(P=k-1)}else{const ut=A[ne],Mt=A[P],Vt=A[N];ut!==Mt&&ut!==Vt&&Mt!==Vt&&u.push(Vt,Mt,ut),N++,N>=k&&(N=0)}if(q===ne)break}}function AA(c,A,u,g,x,k,P,N,q){const ne=x.length/2,ae=P&&N&&q;if(ne<wi.MAX_VERTEX_ARRAY_LENGTH){const ye=A.prepareSegment(ne,u,g),Ke=ye.vertexLength;for(let et=0;et<k.length;et+=3)g.emplaceBack(Ke+k[et],Ke+k[et+1],Ke+k[et+2]);let je,Ve;ye.vertexLength+=ne,ye.primitiveLength+=k.length/3,ae&&(Ve=P.prepareSegment(ne,u,N),je=Ve.vertexLength,Ve.vertexLength+=ne);for(let et=0;et<x.length;et+=2)c(x[et],x[et+1]);if(ae)for(let et=0;et<q.length;et++){const ut=q[et];for(let Mt=1;Mt<ut.length;Mt+=2)N.emplaceBack(je+ut[Mt-1],je+ut[Mt]);Ve.primitiveLength+=ut.length/2}}else(function(ye,Ke,je,Ve,et,ut){const Mt=[];for(let vn=0;vn<Ve.length/2;vn++)Mt.push(-1);const Vt={count:0};let Pt=0,Ut=ye.getOrCreateLatestSegment(Ke,je),an=Ut.vertexLength;for(let vn=2;vn<et.length;vn+=3){const Rn=et[vn-2],yr=et[vn-1],ur=et[vn];let pr=Mt[Rn]<Pt,oi=Mt[yr]<Pt,cr=Mt[ur]<Pt;Ut.vertexLength+((pr?1:0)+(oi?1:0)+(cr?1:0))>wi.MAX_VERTEX_ARRAY_LENGTH&&(Ut=ye.createNewSegment(Ke,je),Pt=Vt.count,pr=!0,oi=!0,cr=!0,an=0);const mr=iu(Mt,Ve,ut,Vt,Rn,pr,Ut),Bn=iu(Mt,Ve,ut,Vt,yr,oi,Ut),Ti=iu(Mt,Ve,ut,Vt,ur,cr,Ut);je.emplaceBack(an+mr-Pt,an+Bn-Pt,an+Ti-Pt),Ut.primitiveLength++}})(A,u,g,x,k,c),ae&&function(ye,Ke,je,Ve,et,ut){const Mt=[];for(let vn=0;vn<Ve.length/2;vn++)Mt.push(-1);const Vt={count:0};let Pt=0,Ut=ye.getOrCreateLatestSegment(Ke,je),an=Ut.vertexLength;for(let vn=0;vn<et.length;vn++){const Rn=et[vn];for(let yr=1;yr<et[vn].length;yr+=2){const ur=Rn[yr-1],pr=Rn[yr];let oi=Mt[ur]<Pt,cr=Mt[pr]<Pt;Ut.vertexLength+((oi?1:0)+(cr?1:0))>wi.MAX_VERTEX_ARRAY_LENGTH&&(Ut=ye.createNewSegment(Ke,je),Pt=Vt.count,oi=!0,cr=!0,an=0);const mr=iu(Mt,Ve,ut,Vt,ur,oi,Ut),Bn=iu(Mt,Ve,ut,Vt,pr,cr,Ut);je.emplaceBack(an+mr-Pt,an+Bn-Pt),Ut.primitiveLength++}}}(P,u,N,x,q,c),A.forceNewSegmentOnNextPrepare(),P?.forceNewSegmentOnNextPrepare()}function iu(c,A,u,g,x,k,P){if(k){const N=g.count;return u(A[2*x],A[2*x+1]),c[x]=g.count,g.count++,P.vertexLength++,N}return c[x]}class pc{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(u=>u.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rn,this.indexArray=new Zo,this.indexArray2=new Fo,this.programConfigurations=new Xa(A.layers,A.zoom),this.segments=new wi,this.segments2=new wi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(A,u,g){this.hasPattern=_e("fill",this.layers,u);const x=this.layers[0].layout.get("fill-sort-key"),k=!x.isConstant(),P=[];for(const{feature:N,id:q,index:ne,sourceLayerIndex:ae}of A){const ye=this.layers[0]._featureFilter.needGeometry,Ke=qu(N,ye);if(!this.layers[0]._featureFilter.filter(new bo(this.zoom,{globalState:this.globalState}),Ke,g))continue;const je=k?x.evaluate(Ke,{},g,u.availableImages):void 0,Ve={id:q,properties:N.properties,type:N.type,sourceLayerIndex:ae,index:ne,geometry:ye?Ke.geometry:ru(N),patterns:{},sortKey:je};P.push(Ve)}k&&P.sort((N,q)=>N.sortKey-q.sortKey);for(const N of P){const{geometry:q,index:ne,sourceLayerIndex:ae}=N;if(this.hasPattern){const ye=Re("fill",this.layers,N,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(ye)}else this.addFeature(N,q,ne,g,{},u.subdivisionGranularity);u.featureIndex.insert(A[ne].feature,q,ne,ae,this.index)}}update(A,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,u,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(A,u,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,u,g,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,de),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(A,u,g,x,k,P){for(const N of Oc(u,500)){const q=RA(N,x,P.fill.getGranularityForZoomLevel(x.z)),ne=this.layoutVertexArray;AA((ae,ye)=>{ne.emplaceBack(ae,ye)},this.segments,this.layoutVertexArray,this.indexArray,q.verticesFlattened,q.indicesTriangles,this.segments2,this.indexArray2,q.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,g,{imagePositions:k,canonical:x,globalState:this.globalState})}}let el,ml;Ar("FillBucket",pc,{omit:["layers","patternFeatures"]});var np={get paint(){return ml=ml||new Uo({"fill-antialias":new Ir(nt.paint_fill["fill-antialias"]),"fill-opacity":new Dr(nt.paint_fill["fill-opacity"]),"fill-color":new Dr(nt.paint_fill["fill-color"]),"fill-outline-color":new Dr(nt.paint_fill["fill-outline-color"]),"fill-translate":new Ir(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ir(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new bu(nt.paint_fill["fill-pattern"])})},get layout(){return el=el||new Uo({"fill-sort-key":new Dr(nt.layout_fill["fill-sort-key"])})}};class rp extends La{constructor(A){super(A,np)}recalculate(A,u){super.recalculate(A,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new pc(A)}queryRadius(){return Gh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:A,geometry:u,transform:g,pixelsToTileUnits:x}){return yf(Kd(A,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-g.bearingInRadians,x),u)}isTileClipped(){return!0}}const zd=Ms([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),t0=Ms([{name:"a_centroid",components:2,type:"Int16"}],4),{members:eg}=zd;class Lc{constructor(A,u,g,x,k){this.properties={},this.extent=g,this.type=0,this.id=void 0,this._pbf=A,this._geometry=-1,this._keys=x,this._values=k,A.readFields(n0,this,u)}loadGeometry(){const A=this._pbf;A.pos=this._geometry;const u=A.readVarint()+A.pos,g=[];let x,k=1,P=0,N=0,q=0;for(;A.pos<u;){if(P<=0){const ne=A.readVarint();k=7&ne,P=ne>>3}if(P--,k===1||k===2)N+=A.readSVarint(),q+=A.readSVarint(),k===1&&(x&&g.push(x),x=[]),x&&x.push(new f(N,q));else{if(k!==7)throw new Error(`unknown command ${k}`);x&&x.push(x[0].clone())}}return x&&g.push(x),g}bbox(){const A=this._pbf;A.pos=this._geometry;const u=A.readVarint()+A.pos;let g=1,x=0,k=0,P=0,N=1/0,q=-1/0,ne=1/0,ae=-1/0;for(;A.pos<u;){if(x<=0){const ye=A.readVarint();g=7&ye,x=ye>>3}if(x--,g===1||g===2)k+=A.readSVarint(),P+=A.readSVarint(),k<N&&(N=k),k>q&&(q=k),P<ne&&(ne=P),P>ae&&(ae=P);else if(g!==7)throw new Error(`unknown command ${g}`)}return[N,ne,q,ae]}toGeoJSON(A,u,g){const x=this.extent*Math.pow(2,g),k=this.extent*A,P=this.extent*u,N=this.loadGeometry();function q(Ke){return[360*(Ke.x+k)/x-180,360/Math.PI*Math.atan(Math.exp((1-2*(Ke.y+P)/x)*Math.PI))-90]}function ne(Ke){return Ke.map(q)}let ae;if(this.type===1){const Ke=[];for(const Ve of N)Ke.push(Ve[0]);const je=ne(Ke);ae=Ke.length===1?{type:"Point",coordinates:je[0]}:{type:"MultiPoint",coordinates:je}}else if(this.type===2){const Ke=N.map(ne);ae=Ke.length===1?{type:"LineString",coordinates:Ke[0]}:{type:"MultiLineString",coordinates:Ke}}else{if(this.type!==3)throw new Error("unknown feature type");{const Ke=function(Ve){const et=Ve.length;if(et<=1)return[Ve];const ut=[];let Mt,Vt;for(let Pt=0;Pt<et;Pt++){const Ut=xf(Ve[Pt]);Ut!==0&&(Vt===void 0&&(Vt=Ut<0),Vt===Ut<0?(Mt&&ut.push(Mt),Mt=[Ve[Pt]]):Mt&&Mt.push(Ve[Pt]))}return Mt&&ut.push(Mt),ut}(N),je=[];for(const Ve of Ke)je.push(Ve.map(ne));ae=je.length===1?{type:"Polygon",coordinates:je[0]}:{type:"MultiPolygon",coordinates:je}}}const ye={type:"Feature",geometry:ae,properties:this.properties};return this.id!=null&&(ye.id=this.id),ye}}function n0(c,A,u){c===1?A.id=u.readVarint():c===2?function(g,x){const k=g.readVarint()+g.pos;for(;g.pos<k;){const P=x._keys[g.readVarint()],N=x._values[g.readVarint()];x.properties[P]=N}}(u,A):c===3?A.type=u.readVarint():c===4&&(A._geometry=u.pos)}function xf(c){let A=0;for(let u,g,x=0,k=c.length,P=k-1;x<k;P=x++)u=c[x],g=c[P],A+=(g.x-u.x)*(u.y+g.y);return A}Lc.types=["Unknown","Point","LineString","Polygon"];class Eu{constructor(A,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Cm,this,u),this.length=this._features.length}feature(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];const u=this._pbf.readVarint()+this._pbf.pos;return new Lc(this._pbf,u,this.extent,this._keys,this._values)}}function Cm(c,A,u){c===15?A.version=u.readVarint():c===1?A.name=u.readString():c===5?A.extent=u.readVarint():c===2?A._features.push(u.pos):c===3?A._keys.push(u.readString()):c===4&&A._values.push(function(g){let x=null;const k=g.readVarint()+g.pos;for(;g.pos<k;){const P=g.readVarint()>>3;x=P===1?g.readString():P===2?g.readFloat():P===3?g.readDouble():P===4?g.readVarint64():P===5?g.readVarint():P===6?g.readSVarint():P===7?g.readBoolean():null}if(x==null)throw new Error("unknown feature value");return x}(u))}class r0{constructor(A,u){this.layers=A.readFields(i0,{},u)}}function i0(c,A,u){if(c===3){const g=new Eu(u,u.readVarint()+u.pos);g.length&&(A[g.name]=g)}}const ip=Math.pow(2,13);function uA(c,A,u,g,x,k,P,N){c.emplaceBack(A,u,2*Math.floor(g*ip)+P,x*ip*2,k*ip*2,Math.round(N))}class md{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(u=>u.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Ht,this.centroidVertexArray=new St,this.indexArray=new Zo,this.programConfigurations=new Xa(A.layers,A.zoom),this.segments=new wi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(A,u,g){this.features=[],this.hasPattern=_e("fill-extrusion",this.layers,u);for(const{feature:x,id:k,index:P,sourceLayerIndex:N}of A){const q=this.layers[0]._featureFilter.needGeometry,ne=qu(x,q);if(!this.layers[0]._featureFilter.filter(new bo(this.zoom,{globalState:this.globalState}),ne,g))continue;const ae={id:k,sourceLayerIndex:N,index:P,geometry:q?ne.geometry:ru(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(Re("fill-extrusion",this.layers,ae,{zoom:this.zoom,globalState:this.globalState},u)):this.addFeature(ae,ae.geometry,P,g,{},u.subdivisionGranularity),u.featureIndex.insert(x,ae.geometry,P,N,this.index,!0)}}addFeatures(A,u,g){for(const x of this.features){const{geometry:k}=x;this.addFeature(x,k,x.index,u,g,A.subdivisionGranularity)}}update(A,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,u,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,eg),this.centroidVertexBuffer=A.createVertexBuffer(this.centroidVertexArray,t0.members,!0),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(A,u,g,x,k,P){for(const N of Oc(u,500)){const q={x:0,y:0,sampleCount:0},ne=this.layoutVertexArray.length;this.processPolygon(q,x,A,N,P);const ae=this.layoutVertexArray.length-ne,ye=Math.floor(q.x/q.sampleCount),Ke=Math.floor(q.y/q.sampleCount);for(let je=0;je<ae;je++)this.centroidVertexArray.emplaceBack(ye,Ke)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,g,{imagePositions:k,canonical:x,globalState:this.globalState})}processPolygon(A,u,g,x,k){if(x.length<1||_m(x[0]))return;for(const ye of x)ye.length!==0&&jh(A,ye);const P={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},N=k.fill.getGranularityForZoomLevel(u.z),q=Lc.types[g.type]==="Polygon";for(const ye of x){if(ye.length===0||_m(ye))continue;const Ke=ao(ye,N,q);this._generateSideFaces(Ke,P)}if(!q)return;const ne=RA(x,u,N,!1),ae=this.layoutVertexArray;AA((ye,Ke)=>{uA(ae,ye,Ke,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ne.verticesFlattened,ne.indicesTriangles)}_generateSideFaces(A,u){let g=0;for(let x=1;x<A.length;x++){const k=A[x],P=A[x-1];if(mc(k,P))continue;u.segment.vertexLength+4>wi.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const N=k.sub(P)._perp()._unit(),q=P.dist(k);g+q>32768&&(g=0),uA(this.layoutVertexArray,k.x,k.y,N.x,N.y,0,0,g),uA(this.layoutVertexArray,k.x,k.y,N.x,N.y,0,1,g),g+=q,uA(this.layoutVertexArray,P.x,P.y,N.x,N.y,0,0,g),uA(this.layoutVertexArray,P.x,P.y,N.x,N.y,0,1,g);const ne=u.segment.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function jh(c,A){for(let u=0;u<A.length;u++){const g=A[u];u===A.length-1&&A[0].x===g.x&&A[0].y===g.y||(c.x+=g.x,c.y+=g.y,c.sampleCount++)}}function mc(c,A){return c.x===A.x&&(c.x<0||c.x>Je)||c.y===A.y&&(c.y<0||c.y>Je)}function _m(c){return c.every(A=>A.x<0)||c.every(A=>A.x>Je)||c.every(A=>A.y<0)||c.every(A=>A.y>Je)}let o0;Ar("FillExtrusionBucket",md,{omit:["layers","features"]});var tg={get paint(){return o0=o0||new Uo({"fill-extrusion-opacity":new Ir(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dr(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ir(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ir(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bu(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dr(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dr(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ir(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rv extends La{constructor(A){super(A,tg)}createBucket(A){return new md(A)}queryRadius(){return Gh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:A,feature:u,featureState:g,geometry:x,transform:k,pixelsToTileUnits:P,pixelPosMatrix:N}){const q=Kd(A,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-k.bearingInRadians,P),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),ae=this.paint.get("fill-extrusion-base").evaluate(u,g),ye=function(je,Ve){const et=[];for(const ut of je){const Mt=[ut.x,ut.y,0,1];We(Mt,Mt,Ve),et.push(new f(Mt[0]/Mt[3],Mt[1]/Mt[3]))}return et}(q,N),Ke=function(je,Ve,et,ut){const Mt=[],Vt=[],Pt=ut[8]*Ve,Ut=ut[9]*Ve,an=ut[10]*Ve,vn=ut[11]*Ve,Rn=ut[8]*et,yr=ut[9]*et,ur=ut[10]*et,pr=ut[11]*et;for(const oi of je){const cr=[],mr=[];for(const Bn of oi){const Ti=Bn.x,Fi=Bn.y,pi=ut[0]*Ti+ut[4]*Fi+ut[12],Yr=ut[1]*Ti+ut[5]*Fi+ut[13],To=ut[2]*Ti+ut[6]*Fi+ut[14],nl=ut[3]*Ti+ut[7]*Fi+ut[15],hA=To+an,Iu=nl+vn,Yh=pi+Rn,zc=Yr+yr,ou=To+ur,Ga=nl+pr,DA=new f((pi+Pt)/Iu,(Yr+Ut)/Iu);DA.z=hA/Iu,cr.push(DA);const su=new f(Yh/Ga,zc/Ga);su.z=ou/Ga,mr.push(su)}Mt.push(cr),Vt.push(mr)}return[Mt,Vt]}(x,ae,ne,N);return function(je,Ve,et){let ut=1/0;yf(et,Ve)&&(ut=ng(et,Ve[0]));for(let Mt=0;Mt<Ve.length;Mt++){const Vt=Ve[Mt],Pt=je[Mt];for(let Ut=0;Ut<Vt.length-1;Ut++){const an=Vt[Ut],vn=[an,Vt[Ut+1],Pt[Ut+1],Pt[Ut],an];jp(et,vn)&&(ut=Math.min(ut,ng(et,vn)))}}return ut!==1/0&&ut}(Ke[0],Ke[1],ye)}}function mh(c,A){return c.x*A.x+c.y*A.y}function ng(c,A){if(c.length===1){let u=0;const g=A[u++];let x;for(;!x||g.equals(x);)if(x=A[u++],!x)return 1/0;for(;u<A.length;u++){const k=A[u],P=c[0],N=x.sub(g),q=k.sub(g),ne=P.sub(g),ae=mh(N,N),ye=mh(N,q),Ke=mh(q,q),je=mh(ne,N),Ve=mh(ne,q),et=ae*Ke-ye*ye,ut=(Ke*je-ye*Ve)/et,Mt=(ae*Ve-ye*je)/et,Vt=g.z*(1-ut-Mt)+x.z*ut+k.z*Mt;if(isFinite(Vt))return Vt}return 1/0}{let u=1/0;for(const g of A)u=Math.min(u,g.z);return u}}const rg=Ms([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:op}=rg,ig=Ms([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:sp}=ig,a1=Math.cos(Math.PI/180*37.5),og=Math.pow(2,14)/.5;class bm{constructor(A){this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(u=>u.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new tn,this.layoutVertexArray2=new sn,this.indexArray=new Zo,this.programConfigurations=new Xa(A.layers,A.zoom),this.segments=new wi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(A,u,g){this.hasPattern=_e("line",this.layers,u);const x=this.layers[0].layout.get("line-sort-key"),k=!x.isConstant(),P=[];for(const{feature:N,id:q,index:ne,sourceLayerIndex:ae}of A){const ye=this.layers[0]._featureFilter.needGeometry,Ke=qu(N,ye);if(!this.layers[0]._featureFilter.filter(new bo(this.zoom,{globalState:this.globalState}),Ke,g))continue;const je=k?x.evaluate(Ke,{},g):void 0,Ve={id:q,properties:N.properties,type:N.type,sourceLayerIndex:ae,index:ne,geometry:ye?Ke.geometry:ru(N),patterns:{},sortKey:je};P.push(Ve)}k&&P.sort((N,q)=>N.sortKey-q.sortKey);for(const N of P){const{geometry:q,index:ne,sourceLayerIndex:ae}=N;if(this.hasPattern){const ye=Re("line",this.layers,N,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(ye)}else this.addFeature(N,q,ne,g,{},u.subdivisionGranularity);u.featureIndex.insert(A[ne].feature,q,ne,ae,this.index)}}update(A,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,u,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(A,u,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,u,g,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,sp)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,op),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(A){if(A.properties&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}}addFeature(A,u,g,x,k,P){const N=this.layers[0].layout,q=N.get("line-join").evaluate(A,{}),ne=N.get("line-cap"),ae=N.get("line-miter-limit"),ye=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(const Ke of u)this.addLine(Ke,A,q,ne,ae,ye,x,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,g,{imagePositions:k,canonical:x,globalState:this.globalState})}addLine(A,u,g,x,k,P,N,q){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,A=ao(A,N?q.line.getGranularityForZoomLevel(N.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pt=0;Pt<A.length-1;Pt++)this.totalDistance+=A[Pt].dist(A[Pt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ne=Lc.types[u.type]==="Polygon";let ae=A.length;for(;ae>=2&&A[ae-1].equals(A[ae-2]);)ae--;let ye=0;for(;ye<ae-1&&A[ye].equals(A[ye+1]);)ye++;if(ae<(ne?3:2))return;g==="bevel"&&(k=1.05);const Ke=this.overscaling<=16?122880/(512*this.overscaling):0,je=this.segments.prepareSegment(10*ae,this.layoutVertexArray,this.indexArray);let Ve,et,ut,Mt,Vt;this.e1=this.e2=-1,ne&&(Ve=A[ae-2],Vt=A[ye].sub(Ve)._unit()._perp());for(let Pt=ye;Pt<ae;Pt++){if(ut=Pt===ae-1?ne?A[ye+1]:void 0:A[Pt+1],ut&&A[Pt].equals(ut))continue;Vt&&(Mt=Vt),Ve&&(et=Ve),Ve=A[Pt],Vt=ut?ut.sub(Ve)._unit()._perp():Mt,Mt=Mt||Vt;let Ut=Mt.add(Vt);Ut.x===0&&Ut.y===0||Ut._unit();const an=Mt.x*Vt.x+Mt.y*Vt.y,vn=Ut.x*Vt.x+Ut.y*Vt.y,Rn=vn!==0?1/vn:1/0,yr=2*Math.sqrt(2-2*vn),ur=vn<a1&&et&&ut,pr=Mt.x*Vt.y-Mt.y*Vt.x>0;if(ur&&Pt>ye){const mr=Ve.dist(et);if(mr>2*Ke){const Bn=Ve.sub(Ve.sub(et)._mult(Ke/mr)._round());this.updateDistance(et,Bn),this.addCurrentVertex(Bn,Mt,0,0,je),et=Bn}}const oi=et&&ut;let cr=oi?g:ne?"butt":x;if(oi&&cr==="round"&&(Rn<P?cr="miter":Rn<=2&&(cr="fakeround")),cr==="miter"&&Rn>k&&(cr="bevel"),cr==="bevel"&&(Rn>2&&(cr="flipbevel"),Rn<k&&(cr="miter")),et&&this.updateDistance(et,Ve),cr==="miter")Ut._mult(Rn),this.addCurrentVertex(Ve,Ut,0,0,je);else if(cr==="flipbevel"){if(Rn>100)Ut=Vt.mult(-1);else{const mr=Rn*Mt.add(Vt).mag()/Mt.sub(Vt).mag();Ut._perp()._mult(mr*(pr?-1:1))}this.addCurrentVertex(Ve,Ut,0,0,je),this.addCurrentVertex(Ve,Ut.mult(-1),0,0,je)}else if(cr==="bevel"||cr==="fakeround"){const mr=-Math.sqrt(Rn*Rn-1),Bn=pr?mr:0,Ti=pr?0:mr;if(et&&this.addCurrentVertex(Ve,Mt,Bn,Ti,je),cr==="fakeround"){const Fi=Math.round(180*yr/Math.PI/20);for(let pi=1;pi<Fi;pi++){let Yr=pi/Fi;if(Yr!==.5){const nl=Yr-.5;Yr+=Yr*nl*(Yr-1)*((1.0904+an*(an*(3.55645-1.43519*an)-3.2452))*nl*nl+(.848013+an*(.215638*an-1.06021)))}const To=Vt.sub(Mt)._mult(Yr)._add(Mt)._unit()._mult(pr?-1:1);this.addHalfVertex(Ve,To.x,To.y,!1,pr,0,je)}}ut&&this.addCurrentVertex(Ve,Vt,-Bn,-Ti,je)}else if(cr==="butt")this.addCurrentVertex(Ve,Ut,0,0,je);else if(cr==="square"){const mr=et?1:-1;this.addCurrentVertex(Ve,Ut,mr,mr,je)}else cr==="round"&&(et&&(this.addCurrentVertex(Ve,Mt,0,0,je),this.addCurrentVertex(Ve,Mt,1,1,je,!0)),ut&&(this.addCurrentVertex(Ve,Vt,-1,-1,je,!0),this.addCurrentVertex(Ve,Vt,0,0,je)));if(ur&&Pt<ae-1){const mr=Ve.dist(ut);if(mr>2*Ke){const Bn=Ve.add(ut.sub(Ve)._mult(Ke/mr)._round());this.updateDistance(Ve,Bn),this.addCurrentVertex(Bn,Vt,0,0,je),Ve=Bn}}}}addCurrentVertex(A,u,g,x,k,P=!1){const N=u.y*x-u.x,q=-u.y-u.x*x;this.addHalfVertex(A,u.x+u.y*g,u.y-u.x*g,P,!1,g,k),this.addHalfVertex(A,N,q,P,!0,-x,k),this.distance>og/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(A,u,g,x,k,P))}addHalfVertex({x:A,y:u},g,x,k,P,N,q){const ne=.5*(this.lineClips?this.scaledDistance*(og-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((A<<1)+(k?1:0),(u<<1)+(P?1:0),Math.round(63*g)+128,Math.round(63*x)+128,1+(N===0?0:N<0?-1:1)|(63&ne)<<2,ne>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ae=q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ae,this.e2),q.primitiveLength++),P?this.e2=ae:this.e1=ae}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(A,u){this.distance+=A.dist(u),this.updateScaledDistance()}}let xm,l1;Ar("LineBucket",bm,{omit:["layers","patternFeatures"]});var A1={get paint(){return l1=l1||new Uo({"line-opacity":new Dr(nt.paint_line["line-opacity"]),"line-color":new Dr(nt.paint_line["line-color"]),"line-translate":new Ir(nt.paint_line["line-translate"]),"line-translate-anchor":new Ir(nt.paint_line["line-translate-anchor"]),"line-width":new Dr(nt.paint_line["line-width"]),"line-gap-width":new Dr(nt.paint_line["line-gap-width"]),"line-offset":new Dr(nt.paint_line["line-offset"]),"line-blur":new Dr(nt.paint_line["line-blur"]),"line-dasharray":new XA(nt.paint_line["line-dasharray"]),"line-pattern":new bu(nt.paint_line["line-pattern"]),"line-gradient":new JA(nt.paint_line["line-gradient"])})},get layout(){return xm=xm||new Uo({"line-cap":new Ir(nt.layout_line["line-cap"]),"line-join":new Dr(nt.layout_line["line-join"]),"line-miter-limit":new Ir(nt.layout_line["line-miter-limit"]),"line-round-limit":new Ir(nt.layout_line["line-round-limit"]),"line-sort-key":new Dr(nt.layout_line["line-sort-key"])})}};class u1 extends Dr{possiblyEvaluate(A,u){return u=new bo(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(A,u)}evaluate(A,u,g,x){return u=Le({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(A,u,g,x)}}let Mm;class ap extends La{constructor(A){super(A,A1),this.gradientVersion=0,Mm||(Mm=new u1(A1.paint.properties["line-width"].specification),Mm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(A){if(A==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Oi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(A,u){super.recalculate(A,u),this.paint._values["line-floorwidth"]=Mm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new bm(A)}queryRadius(A){const u=A,g=c1(sA("line-width",this,u),sA("line-gap-width",this,u)),x=sA("line-offset",this,u);return g/2+Math.abs(x)+Gh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:A,feature:u,featureState:g,geometry:x,transform:k,pixelsToTileUnits:P}){const N=Kd(A,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-k.bearingInRadians,P),q=P/2*c1(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(x=function(ae,ye){const Ke=[];for(let je=0;je<ae.length;je++){const Ve=ae[je],et=[];for(let ut=0;ut<Ve.length;ut++){const Mt=Ve[ut-1],Vt=Ve[ut],Pt=Ve[ut+1],Ut=ut===0?new f(0,0):Vt.sub(Mt)._unit()._perp(),an=ut===Ve.length-1?new f(0,0):Pt.sub(Vt)._unit()._perp(),vn=Ut._add(an)._unit(),Rn=vn.x*an.x+vn.y*an.y;Rn!==0&&vn._mult(1/Rn),et.push(vn._mult(ye)._add(Vt))}Ke.push(et)}return Ke}(x,ne*P)),function(ae,ye,Ke){for(let je=0;je<ye.length;je++){const Ve=ye[je];if(ae.length>=3){for(let et=0;et<Ve.length;et++)if(dh(ae,Ve[et]))return!0}if(Wl(ae,Ve,Ke))return!0}return!1}(N,x,q)}isTileClipped(){return!0}}function c1(c,A){return A>0?A+2*c:c}const Yp=Ms([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),s0=Ms([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ms([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tl=Ms([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ms([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const h1=Ms([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),d1=Ms([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function iv(c,A,u){return c.sections.forEach(g=>{g.text=function(x,k,P){const N=k.layout.get("text-transform").evaluate(P,{});return N==="uppercase"?x=x.toLocaleUpperCase():N==="lowercase"&&(x=x.toLocaleLowerCase()),ZA.applyArabicShaping&&(x=ZA.applyArabicShaping(x)),x}(g.text,A,u)}),c}Ms([{name:"triangle",components:3,type:"Uint16"}]),Ms([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ms([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ms([{type:"Float32",name:"offsetX"}]),Ms([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ms([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const wm={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ol=24;const a0=4294967296,f1=1/a0,Uc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class qp{constructor(A=new Uint8Array(16)){this.buf=ArrayBuffer.isView(A)?A:new Uint8Array(A),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(A,u,g=this.length){for(;this.pos<g;){const x=this.readVarint(),k=x>>3,P=this.pos;this.type=7&x,A(k,u,this),this.pos===P&&this.skip(x)}return u}readMessage(A,u){return this.readFields(A,u,this.readVarint()+this.pos)}readFixed32(){const A=this.dataView.getUint32(this.pos,!0);return this.pos+=4,A}readSFixed32(){const A=this.dataView.getInt32(this.pos,!0);return this.pos+=4,A}readFixed64(){const A=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*a0;return this.pos+=8,A}readSFixed64(){const A=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*a0;return this.pos+=8,A}readFloat(){const A=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,A}readDouble(){const A=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,A}readVarint(A){const u=this.buf;let g,x;return x=u[this.pos++],g=127&x,x<128?g:(x=u[this.pos++],g|=(127&x)<<7,x<128?g:(x=u[this.pos++],g|=(127&x)<<14,x<128?g:(x=u[this.pos++],g|=(127&x)<<21,x<128?g:(x=u[this.pos],g|=(15&x)<<28,function(k,P,N){const q=N.buf;let ne,ae;if(ae=q[N.pos++],ne=(112&ae)>>4,ae<128||(ae=q[N.pos++],ne|=(127&ae)<<3,ae<128)||(ae=q[N.pos++],ne|=(127&ae)<<10,ae<128)||(ae=q[N.pos++],ne|=(127&ae)<<17,ae<128)||(ae=q[N.pos++],ne|=(127&ae)<<24,ae<128)||(ae=q[N.pos++],ne|=(1&ae)<<31,ae<128))return $p(k,ne,P);throw new Error("Expected varint not more than 10 bytes")}(g,A,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const A=this.readVarint();return A%2==1?(A+1)/-2:A/2}readBoolean(){return!!this.readVarint()}readString(){const A=this.readVarint()+this.pos,u=this.pos;return this.pos=A,A-u>=12&&Uc?Uc.decode(this.buf.subarray(u,A)):function(g,x,k){let P="",N=x;for(;N<k;){const q=g[N];let ne,ae,ye,Ke=null,je=q>239?4:q>223?3:q>191?2:1;if(N+je>k)break;je===1?q<128&&(Ke=q):je===2?(ne=g[N+1],(192&ne)==128&&(Ke=(31&q)<<6|63&ne,Ke<=127&&(Ke=null))):je===3?(ne=g[N+1],ae=g[N+2],(192&ne)==128&&(192&ae)==128&&(Ke=(15&q)<<12|(63&ne)<<6|63&ae,(Ke<=2047||Ke>=55296&&Ke<=57343)&&(Ke=null))):je===4&&(ne=g[N+1],ae=g[N+2],ye=g[N+3],(192&ne)==128&&(192&ae)==128&&(192&ye)==128&&(Ke=(15&q)<<18|(63&ne)<<12|(63&ae)<<6|63&ye,(Ke<=65535||Ke>=1114112)&&(Ke=null))),Ke===null?(Ke=65533,je=1):Ke>65535&&(Ke-=65536,P+=String.fromCharCode(Ke>>>10&1023|55296),Ke=56320|1023&Ke),P+=String.fromCharCode(Ke),N+=je}return P}(this.buf,u,A)}readBytes(){const A=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,A);return this.pos=A,u}readPackedVarint(A=[],u){const g=this.readPackedEnd();for(;this.pos<g;)A.push(this.readVarint(u));return A}readPackedSVarint(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readSVarint());return A}readPackedBoolean(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readBoolean());return A}readPackedFloat(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readFloat());return A}readPackedDouble(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readDouble());return A}readPackedFixed32(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readFixed32());return A}readPackedSFixed32(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readSFixed32());return A}readPackedFixed64(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readFixed64());return A}readPackedSFixed64(A=[]){const u=this.readPackedEnd();for(;this.pos<u;)A.push(this.readSFixed64());return A}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(A){const u=7&A;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(A,u){this.writeVarint(A<<3|u)}realloc(A){let u=this.length||16;for(;u<this.pos+A;)u*=2;if(u!==this.length){const g=new Uint8Array(u);g.set(this.buf),this.buf=g,this.dataView=new DataView(g.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(A){this.realloc(4),this.dataView.setInt32(this.pos,A,!0),this.pos+=4}writeSFixed32(A){this.realloc(4),this.dataView.setInt32(this.pos,A,!0),this.pos+=4}writeFixed64(A){this.realloc(8),this.dataView.setInt32(this.pos,-1&A,!0),this.dataView.setInt32(this.pos+4,Math.floor(A*f1),!0),this.pos+=8}writeSFixed64(A){this.realloc(8),this.dataView.setInt32(this.pos,-1&A,!0),this.dataView.setInt32(this.pos+4,Math.floor(A*f1),!0),this.pos+=8}writeVarint(A){(A=+A||0)>268435455||A<0?function(u,g){let x,k;if(u>=0?(x=u%4294967296|0,k=u/4294967296|0):(x=~(-u%4294967296),k=~(-u/4294967296),4294967295^x?x=x+1|0:(x=0,k=k+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(P,N,q){q.buf[q.pos++]=127&P|128,P>>>=7,q.buf[q.pos++]=127&P|128,P>>>=7,q.buf[q.pos++]=127&P|128,P>>>=7,q.buf[q.pos++]=127&P|128,q.buf[q.pos]=127&(P>>>=7)}(x,0,g),function(P,N){const q=(7&P)<<4;N.buf[N.pos++]|=q|((P>>>=3)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P)))))}(k,g)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))}writeSVarint(A){this.writeVarint(A<0?2*-A-1:2*A)}writeBoolean(A){this.writeVarint(+A)}writeString(A){A=String(A),this.realloc(4*A.length),this.pos++;const u=this.pos;this.pos=function(x,k,P){for(let N,q,ne=0;ne<k.length;ne++){if(N=k.charCodeAt(ne),N>55295&&N<57344){if(!q){N>56319||ne+1===k.length?(x[P++]=239,x[P++]=191,x[P++]=189):q=N;continue}if(N<56320){x[P++]=239,x[P++]=191,x[P++]=189,q=N;continue}N=q-55296<<10|N-56320|65536,q=null}else q&&(x[P++]=239,x[P++]=191,x[P++]=189,q=null);N<128?x[P++]=N:(N<2048?x[P++]=N>>6|192:(N<65536?x[P++]=N>>12|224:(x[P++]=N>>18|240,x[P++]=N>>12&63|128),x[P++]=N>>6&63|128),x[P++]=63&N|128)}return P}(this.buf,A,this.pos);const g=this.pos-u;g>=128&&gh(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g}writeFloat(A){this.realloc(4),this.dataView.setFloat32(this.pos,A,!0),this.pos+=4}writeDouble(A){this.realloc(8),this.dataView.setFloat64(this.pos,A,!0),this.pos+=8}writeBytes(A){const u=A.length;this.writeVarint(u),this.realloc(u);for(let g=0;g<u;g++)this.buf[this.pos++]=A[g]}writeRawMessage(A,u){this.pos++;const g=this.pos;A(u,this);const x=this.pos-g;x>=128&&gh(g,x,this),this.pos=g-1,this.writeVarint(x),this.pos+=x}writeMessage(A,u,g){this.writeTag(A,2),this.writeRawMessage(u,g)}writePackedVarint(A,u){u.length&&this.writeMessage(A,l0,u)}writePackedSVarint(A,u){u.length&&this.writeMessage(A,lp,u)}writePackedBoolean(A,u){u.length&&this.writeMessage(A,ag,u)}writePackedFloat(A,u){u.length&&this.writeMessage(A,A0,u)}writePackedDouble(A,u){u.length&&this.writeMessage(A,sg,u)}writePackedFixed32(A,u){u.length&&this.writeMessage(A,ov,u)}writePackedSFixed32(A,u){u.length&&this.writeMessage(A,lg,u)}writePackedFixed64(A,u){u.length&&this.writeMessage(A,sv,u)}writePackedSFixed64(A,u){u.length&&this.writeMessage(A,p1,u)}writeBytesField(A,u){this.writeTag(A,2),this.writeBytes(u)}writeFixed32Field(A,u){this.writeTag(A,5),this.writeFixed32(u)}writeSFixed32Field(A,u){this.writeTag(A,5),this.writeSFixed32(u)}writeFixed64Field(A,u){this.writeTag(A,1),this.writeFixed64(u)}writeSFixed64Field(A,u){this.writeTag(A,1),this.writeSFixed64(u)}writeVarintField(A,u){this.writeTag(A,0),this.writeVarint(u)}writeSVarintField(A,u){this.writeTag(A,0),this.writeSVarint(u)}writeStringField(A,u){this.writeTag(A,2),this.writeString(u)}writeFloatField(A,u){this.writeTag(A,5),this.writeFloat(u)}writeDoubleField(A,u){this.writeTag(A,1),this.writeDouble(u)}writeBooleanField(A,u){this.writeVarintField(A,+u)}}function $p(c,A,u){return u?4294967296*A+(c>>>0):4294967296*(A>>>0)+(c>>>0)}function gh(c,A,u){const g=A<=16383?1:A<=2097151?2:A<=268435455?3:Math.floor(Math.log(A)/(7*Math.LN2));u.realloc(g);for(let x=u.pos-1;x>=c;x--)u.buf[x+g]=u.buf[x]}function l0(c,A){for(let u=0;u<c.length;u++)A.writeVarint(c[u])}function lp(c,A){for(let u=0;u<c.length;u++)A.writeSVarint(c[u])}function A0(c,A){for(let u=0;u<c.length;u++)A.writeFloat(c[u])}function sg(c,A){for(let u=0;u<c.length;u++)A.writeDouble(c[u])}function ag(c,A){for(let u=0;u<c.length;u++)A.writeBoolean(c[u])}function ov(c,A){for(let u=0;u<c.length;u++)A.writeFixed32(c[u])}function lg(c,A){for(let u=0;u<c.length;u++)A.writeSFixed32(c[u])}function sv(c,A){for(let u=0;u<c.length;u++)A.writeFixed64(c[u])}function p1(c,A){for(let u=0;u<c.length;u++)A.writeSFixed64(c[u])}function m1(c,A,u){c===1&&u.readMessage(u0,A)}function u0(c,A,u){if(c===3){const{id:g,bitmap:x,width:k,height:P,left:N,top:q,advance:ne}=u.readMessage(c0,{});A.push({id:g,bitmap:new pl({width:k+6,height:P+6},x),metrics:{width:k,height:P,left:N,top:q,advance:ne}})}}function c0(c,A,u){c===1?A.id=u.readVarint():c===2?A.bitmap=u.readBytes():c===3?A.width=u.readVarint():c===4?A.height=u.readVarint():c===5?A.left=u.readSVarint():c===6?A.top=u.readSVarint():c===7&&(A.advance=u.readVarint())}function Ag(c){let A=0,u=0;for(const P of c)A+=P.w*P.h,u=Math.max(u,P.w);c.sort((P,N)=>N.h-P.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),u),h:1/0}];let x=0,k=0;for(const P of c)for(let N=g.length-1;N>=0;N--){const q=g[N];if(!(P.w>q.w||P.h>q.h)){if(P.x=q.x,P.y=q.y,k=Math.max(k,P.y+P.h),x=Math.max(x,P.x+P.w),P.w===q.w&&P.h===q.h){const ne=g.pop();ne&&N<g.length&&(g[N]=ne)}else P.h===q.h?(q.x+=P.w,q.w-=P.w):P.w===q.w?(q.y+=P.h,q.h-=P.h):(g.push({x:q.x+P.w,y:q.y,w:q.w-P.w,h:P.h}),q.y+=P.h,q.h-=P.h);break}}return{w:x,h:k,fill:A/(x*k)||0}}class Sm{constructor(A,{pixelRatio:u,version:g,stretchX:x,stretchY:k,content:P,textFitWidth:N,textFitHeight:q}){this.paddedRect=A,this.pixelRatio=u,this.stretchX=x,this.stretchY=k,this.content=P,this.version=g,this.textFitWidth=N,this.textFitHeight=q}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class g1{constructor(A,u){const g={},x={};this.haveRenderCallbacks=[];const k=[];this.addImages(A,g,k),this.addImages(u,x,k);const{w:P,h:N}=Ag(k),q=new PA({width:P||1,height:N||1});for(const ne in A){const ae=A[ne],ye=g[ne].paddedRect;PA.copy(ae.data,q,{x:0,y:0},{x:ye.x+1,y:ye.y+1},ae.data)}for(const ne in u){const ae=u[ne],ye=x[ne].paddedRect,Ke=ye.x+1,je=ye.y+1,Ve=ae.data.width,et=ae.data.height;PA.copy(ae.data,q,{x:0,y:0},{x:Ke,y:je},ae.data),PA.copy(ae.data,q,{x:0,y:et-1},{x:Ke,y:je-1},{width:Ve,height:1}),PA.copy(ae.data,q,{x:0,y:0},{x:Ke,y:je+et},{width:Ve,height:1}),PA.copy(ae.data,q,{x:Ve-1,y:0},{x:Ke-1,y:je},{width:1,height:et}),PA.copy(ae.data,q,{x:0,y:0},{x:Ke+Ve,y:je},{width:1,height:et})}this.image=q,this.iconPositions=g,this.patternPositions=x}addImages(A,u,g){for(const x in A){const k=A[x],P={x:0,y:0,w:k.data.width+2,h:k.data.height+2};g.push(P),u[x]=new Sm(P,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(A,u){A.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in A.updatedImages)this.patchUpdatedImage(this.iconPositions[g],A.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],A.getImage(g),u)}patchUpdatedImage(A,u,g){if(!A||!u||A.version===u.version)return;A.version=u.version;const[x,k]=A.tl;g.update(u.data,void 0,{x,y:k})}}var Nd;Ar("ImagePosition",Sm),Ar("ImageAtlas",g1),l.ao=void 0,(Nd=l.ao||(l.ao={}))[Nd.none=0]="none",Nd[Nd.horizontal=1]="horizontal",Nd[Nd.vertical=2]="vertical",Nd[Nd.horizontalOnly=3]="horizontalOnly";class Mf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(A,u,g){const x=new Mf;return x.scale=A||1,x.fontStack=u,x.verticalAlign=g||"bottom",x}static forImage(A,u){const g=new Mf;return g.imageName=A,g.verticalAlign=u||"bottom",g}}class gd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(A,u){const g=new gd;for(let x=0;x<A.sections.length;x++){const k=A.sections[x];k.image?g.addImageSection(k):g.addTextSection(k,u)}return g}length(){return this.text.length}getSection(A){return this.sections[this.sectionIndex[A]]}getSectionIndex(A){return this.sectionIndex[A]}getCharCode(A){return this.text.charCodeAt(A)}verticalizePunctuation(){this.text=function(A){let u="";for(let g=0;g<A.length;g++){const x=A.charCodeAt(g+1)||null,k=A.charCodeAt(g-1)||null;u+=x&&uh(x)&&!wm[A[g+1]]||k&&uh(k)&&!wm[A[g-1]]||!wm[A[g]]?A[g]:wm[A[g]]}return u}(this.text)}trim(){let A=0;for(let g=0;g<this.text.length&&Ap[this.text.charCodeAt(g)];g++)A++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=A&&Ap[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(A,u),this.sectionIndex=this.sectionIndex.slice(A,u)}substring(A,u){const g=new gd;return g.text=this.text.substring(A,u),g.sectionIndex=this.sectionIndex.slice(A,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((A,u)=>Math.max(A,this.sections[u].scale),0)}getMaxImageSize(A){let u=0,g=0;for(let x=0;x<this.length();x++){const k=this.getSection(x);if(k.imageName){const P=A[k.imageName];if(!P)continue;const N=P.displaySize;u=Math.max(u,N[0]),g=Math.max(g,N[1])}}return{maxImageWidth:u,maxImageHeight:g}}addTextSection(A,u){this.text+=A.text,this.sections.push(Mf.forText(A.scale,A.fontStack||u,A.verticalAlign));const g=this.sections.length-1;for(let x=0;x<A.text.length;++x)this.sectionIndex.push(g)}addImageSection(A){const u=A.image?A.image.name:"";if(u.length===0)return void wt("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Mf.forImage(u,A.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):wt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vp(c,A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve){const et=gd.fromFeature(c,x);let ut;ye===l.ao.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Mt,processStyledBidirectionalText:Vt}=ZA;if(Mt&&et.sections.length===1){ut=[];const an=Mt(et.toString(),p(et,ne,k,A,g,je));for(const vn of an){const Rn=new gd;Rn.text=vn,Rn.sections=et.sections;for(let yr=0;yr<vn.length;yr++)Rn.sectionIndex.push(0);ut.push(Rn)}}else if(Vt){ut=[];const an=Vt(et.text,et.sectionIndex,p(et,ne,k,A,g,je));for(const vn of an){const Rn=new gd;Rn.text=vn[0],Rn.sectionIndex=vn[1],Rn.sections=et.sections,ut.push(Rn)}}else ut=function(an,vn){const Rn=[],yr=an.text;let ur=0;for(const pr of vn)Rn.push(an.substring(ur,pr)),ur=pr;return ur<yr.length&&Rn.push(an.substring(ur,yr.length)),Rn}(et,p(et,ne,k,A,g,je));const Pt=[],Ut={positionedLines:Pt,text:et.toString(),top:ae[1],bottom:ae[1],left:ae[0],right:ae[0],writingMode:ye,iconsInText:!1,verticalizable:!1};return function(an,vn,Rn,yr,ur,pr,oi,cr,mr,Bn,Ti,Fi){let pi=0,Yr=0,To=0,nl=0;const hA=cr==="right"?1:cr==="left"?0:.5,Iu=Ol/Fi;let Yh=0;for(const Ga of ur){Ga.trim();const DA=Ga.getMaxScale(),su={positionedGlyphs:[],lineOffset:0};an.positionedLines[Yh]=su;const au=su.positionedGlyphs;let vc=0;if(!Ga.length()){Yr+=pr,++Yh;continue}const qh=K(yr,Ga,Iu);for(let Nc=0;Nc<Ga.length();Nc++){const dA=Ga.getSection(Nc),KA=Ga.getSectionIndex(Nc),LA=Ga.getCharCode(Nc),Yl=Ae(mr,Ti,LA);let Ma;if(dA.imageName){if(an.iconsInText=!0,dA.scale=dA.scale*Iu,Ma=tt(dA,Yl,DA,qh,yr),!Ma)continue;vc=Math.max(vc,Ma.imageOffset)}else if(Ma=ve(dA,LA,Yl,qh,vn,Rn),!Ma)continue;const{rect:jd,metrics:g0,baselineOffset:Wd}=Ma;au.push({glyph:LA,imageName:dA.imageName,x:pi,y:Yr+Wd+-17,vertical:Yl,scale:dA.scale,fontStack:dA.fontStack,sectionIndex:KA,metrics:g0,rect:jd}),Yl?(an.verticalizable=!0,pi+=(dA.imageName?g0.advance:Ol)*dA.scale+Bn):pi+=g0.advance*dA.scale+Bn}au.length!==0&&(To=Math.max(pi-Bn,To),Rt(au,0,au.length-1,hA)),pi=0,su.lineOffset=Math.max(vc,(DA-1)*Ol);const FA=pr*DA+vc;Yr+=FA,nl=Math.max(FA,nl),++Yh}const{horizontalAlign:zc,verticalAlign:ou}=_(oi);(function(Ga,DA,su,au,vc,qh,FA,Nc,dA){const KA=(DA-su)*vc;let LA=0;LA=qh!==FA?-Nc*au- -17:-au*dA*FA+.5*FA;for(const Yl of Ga)for(const Ma of Yl.positionedGlyphs)Ma.x+=KA,Ma.y+=LA})(an.positionedLines,hA,zc,ou,To,nl,pr,Yr,ur.length),an.top+=-ou*Yr,an.bottom=an.top+Yr,an.left+=-zc*To,an.right=an.left+To}(Ut,A,u,g,ut,P,N,q,ye,ne,Ke,Ve),!function(an){for(const vn of an)if(vn.positionedGlyphs.length!==0)return!1;return!0}(Pt)&&Ut}const Ap={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},y1={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},av={40:!0};function wf(c,A,u,g,x,k){if(A.imageName){const P=g[A.imageName];return P?P.displaySize[0]*A.scale*Ol/k+x:0}{const P=u[A.fontStack],N=P&&P[c];return N?N.metrics.advance*A.scale+x:0}}function v1(c,A,u,g){const x=Math.pow(c-A,2);return g?c<A?x/2:2*x:x+Math.abs(u)*u}function Em(c,A,u){let g=0;return c===10&&(g-=1e4),u&&(g+=150),c!==40&&c!==65288||(g+=50),A!==41&&A!==65289||(g+=50),g}function C1(c,A,u,g,x,k){let P=null,N=v1(A,u,x,k);for(const q of g){const ne=v1(A-q.x,u,x,k)+q.badness;ne<=N&&(P=q,N=ne)}return{index:c,x:A,priorBreak:P,badness:N}}function Bm(c){return c?Bm(c.priorBreak).concat(c.index):[]}function p(c,A,u,g,x,k){if(!c)return[];const P=[],N=function(ye,Ke,je,Ve,et,ut){let Mt=0;for(let Vt=0;Vt<ye.length();Vt++){const Pt=ye.getSection(Vt);Mt+=wf(ye.getCharCode(Vt),Pt,Ve,et,Ke,ut)}return Mt/Math.max(1,Math.ceil(Mt/je))}(c,A,u,g,x,k),q=c.text.indexOf("")>=0;let ne=0;for(let ye=0;ye<c.length();ye++){const Ke=c.getSection(ye),je=c.getCharCode(ye);if(Ap[je]||(ne+=wf(je,Ke,g,x,A,k)),ye<c.length()-1){const Ve=!((ae=je)<11904)&&(!!eo["CJK Compatibility Forms"](ae)||!!eo["CJK Compatibility"](ae)||!!eo["CJK Strokes"](ae)||!!eo["CJK Symbols and Punctuation"](ae)||!!eo["Enclosed CJK Letters and Months"](ae)||!!eo["Halfwidth and Fullwidth Forms"](ae)||!!eo["Ideographic Description Characters"](ae)||!!eo["Vertical Forms"](ae)||IA.test(String.fromCodePoint(ae)));(y1[je]||Ve||Ke.imageName||ye!==c.length()-2&&av[c.getCharCode(ye+1)])&&P.push(C1(ye+1,ne,N,P,Em(je,c.getCharCode(ye+1),Ve&&q),!1))}}var ae;return Bm(C1(c.length(),ne,N,P,0,!0))}function _(c){let A=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":A=1;break;case"left":case"top-left":case"bottom-left":A=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:A,verticalAlign:u}}function K(c,A,u){const g=A.getMaxScale()*Ol,{maxImageWidth:x,maxImageHeight:k}=A.getMaxImageSize(c),P=Math.max(g,k*u);return{verticalLineContentWidth:Math.max(g,x*u),horizontalLineContentHeight:P}}function Q(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function Ae(c,A,u){return!(c===l.ao.horizontal||!A&&!Cu(u)||A&&(Ap[u]||(g=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(g)))));var g}function ve(c,A,u,g,x,k){const P=k[c.fontStack],N=function(ne,ae,ye,Ke){if(ne&&ne.rect)return ne;const je=ae[ye.fontStack],Ve=je&&je[Ke];return Ve?{rect:null,metrics:Ve.metrics}:null}(P&&P[A],x,c,A);if(N===null)return null;let q;if(u)q=g.verticalLineContentWidth-c.scale*Ol;else{const ne=Q(c.verticalAlign);q=(g.horizontalLineContentHeight-c.scale*Ol)*ne}return{rect:N.rect,metrics:N.metrics,baselineOffset:q}}function tt(c,A,u,g,x){const k=x[c.imageName];if(!k)return null;const P=k.paddedRect,N=k.displaySize,q={width:N[0],height:N[1],left:1,top:-3,advance:A?N[1]:N[0]};let ne;if(A)ne=g.verticalLineContentWidth-N[1]*c.scale;else{const ae=Q(c.verticalAlign);ne=(g.horizontalLineContentHeight-N[1]*c.scale)*ae}return{rect:P,metrics:q,baselineOffset:ne,imageOffset:(A?N[0]:N[1])*c.scale-Ol*u}}function Rt(c,A,u,g){if(g===0)return;const x=c[u],k=(c[u].x+x.metrics.advance*x.scale)*g;for(let P=A;P<=u;P++)c[P].x-=k}function Wt(c,A,u){const{horizontalAlign:g,verticalAlign:x}=_(u),k=A[0]-c.displaySize[0]*g,P=A[1]-c.displaySize[1]*x;return{image:c,top:P,bottom:P+c.displaySize[1],left:k,right:k+c.displaySize[0]}}function Cn(c){var A,u;let g=c.left,x=c.top,k=c.right-g,P=c.bottom-x;const N=(A=c.image.textFitWidth)!==null&&A!==void 0?A:"stretchOrShrink",q=(u=c.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",ne=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(q==="proportional"){if(N==="stretchOnly"&&k/P<ne||N==="proportional"){const ae=Math.ceil(P*ne);g*=ae/k,k=ae}}else if(N==="proportional"&&q==="stretchOnly"&&ne!==0&&k/P>ne){const ae=Math.ceil(k/ne);x*=ae/P,P=ae}return{x1:g,y1:x,x2:g+k,y2:x+P}}function rr(c,A,u,g,x,k){const P=c.image;let N;if(P.content){const ut=P.content,Mt=P.pixelRatio||1;N=[ut[0]/Mt,ut[1]/Mt,P.displaySize[0]-ut[2]/Mt,P.displaySize[1]-ut[3]/Mt]}const q=A.left*k,ne=A.right*k;let ae,ye,Ke,je;u==="width"||u==="both"?(je=x[0]+q-g[3],ye=x[0]+ne+g[1]):(je=x[0]+(q+ne-P.displaySize[0])/2,ye=je+P.displaySize[0]);const Ve=A.top*k,et=A.bottom*k;return u==="height"||u==="both"?(ae=x[1]+Ve-g[0],Ke=x[1]+et+g[2]):(ae=x[1]+(Ve+et-P.displaySize[1])/2,Ke=ae+P.displaySize[1]),{image:P,top:ae,right:ye,bottom:Ke,left:je,collisionPadding:N}}const Xn=128,jn=32640;function Nr(c,A){const{expression:u}=A;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new bo(c+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:x}=u;let k=0;for(;k<g.length&&g[k]<=c;)k++;k=Math.max(0,k-1);let P=k;for(;P<g.length&&g[P]<c+1;)P++;P=Math.min(g.length-1,P);const N=g[k],q=g[P];return u.kind==="composite"?{kind:"composite",minZoom:N,maxZoom:q,interpolationType:x}:{kind:"camera",minZoom:N,maxZoom:q,minSize:u.evaluate(new bo(N)),maxSize:u.evaluate(new bo(q)),interpolationType:x}}}function Jr(c,A,u){let g="never";const x=c.get(A);return x?g=x:c.get(u)&&(g="always"),g}const li=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Na(c,A,u,g,x,k,P,N,q,ne,ae,ye,Ke){const je=N?Math.min(jn,Math.round(N[0])):0,Ve=N?Math.min(jn,Math.round(N[1])):0;c.emplaceBack(A,u,Math.round(32*g),Math.round(32*x),k,P,(je<<1)+(q?1:0),Ve,16*ne,16*ae,256*ye,256*Ke)}function An(c,A,u){c.emplaceBack(A.x,A.y,u),c.emplaceBack(A.x,A.y,u),c.emplaceBack(A.x,A.y,u),c.emplaceBack(A.x,A.y,u)}function Zt(c){for(const A of c.sections)if(Kh(A.text))return!0;return!1}class dn{constructor(A){this.layoutVertexArray=new Gn,this.indexArray=new Zo,this.programConfigurations=A,this.segments=new wi,this.dynamicLayoutVertexArray=new On,this.opacityVertexArray=new _r,this.hasVisibleVertices=!1,this.placedSymbolArray=new qe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(A,u,g,x){this.isEmpty()||(g&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Yp.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,s0.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,li,!0),this.opacityVertexBuffer.itemSize=1),(g||x)&&this.programConfigurations.upload(A))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ar("SymbolBuffers",dn);class hr{constructor(A,u,g){this.layoutVertexArray=new A,this.layoutAttributes=u,this.indexArray=new g,this.segments=new wi,this.collisionVertexArray=new xo}upload(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,tl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ar("CollisionBuffers",hr);class ii{constructor(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.globalState=A.globalState,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(P=>P.id),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nr(this.zoom,u["text-size"]),this.iconSizeData=Nr(this.zoom,u["icon-size"]);const g=this.layers[0].layout,x=g.get("symbol-sort-key"),k=g.get("symbol-z-order");this.canOverlap=Jr(g,"text-overlap","text-allow-overlap")!=="never"||Jr(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(P=>l.ao[P])),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.sourceID=A.sourceID}createArrays(){this.text=new dn(new Xa(this.layers,this.zoom,A=>/^text/.test(A))),this.icon=new dn(new Xa(this.layers,this.zoom,A=>/^icon/.test(A))),this.glyphOffsetArray=new ht,this.lineVertexArray=new bt,this.symbolInstances=new lt,this.textAnchorOffsets=new xt}calculateGlyphDependencies(A,u,g,x,k){for(let P=0;P<A.length;P++)if(u[A.charCodeAt(P)]=!0,(g||x)&&k){const N=wm[A.charAt(P)];N&&(u[N.charCodeAt(0)]=!0)}}populate(A,u,g){const x=this.layers[0],k=x.layout,P=k.get("text-font"),N=k.get("text-field"),q=k.get("icon-image"),ne=(N.value.kind!=="constant"||N.value.value instanceof go&&!N.value.value.isEmpty()||N.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),ae=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,ye=k.get("symbol-sort-key");if(this.features=[],!ne&&!ae)return;const Ke=u.iconDependencies,je=u.glyphDependencies,Ve=u.availableImages,et=new bo(this.zoom,{globalState:this.globalState});for(const{feature:ut,id:Mt,index:Vt,sourceLayerIndex:Pt}of A){const Ut=x._featureFilter.needGeometry,an=qu(ut,Ut);if(!x._featureFilter.filter(et,an,g))continue;let vn,Rn;if(Ut||(an.geometry=ru(ut)),ne){const ur=x.getValueAndResolveTokens("text-field",an,g,Ve),pr=go.factory(ur),oi=this.hasRTLText=this.hasRTLText||Zt(pr);(!oi||ZA.getRTLTextPluginStatus()==="unavailable"||oi&&ZA.isParsed())&&(vn=iv(pr,x,an))}if(ae){const ur=x.getValueAndResolveTokens("icon-image",an,g,Ve);Rn=ur instanceof ba?ur:ba.fromString(ur)}if(!vn&&!Rn)continue;const yr=this.sortFeaturesByKey?ye.evaluate(an,{},g):void 0;if(this.features.push({id:Mt,text:vn,icon:Rn,index:Vt,sourceLayerIndex:Pt,geometry:an.geometry,properties:ut.properties,type:Lc.types[ut.type],sortKey:yr}),Rn&&(Ke[Rn.name]=!0),vn){const ur=P.evaluate(an,{},g).join(","),pr=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ao.vertical)>=0;for(const oi of vn.sections)if(oi.image)Ke[oi.image.name]=!0;else{const cr=vu(vn.toString()),mr=oi.fontStack||ur,Bn=je[mr]=je[mr]||{};this.calculateGlyphDependencies(oi.text,Bn,pr,this.allowVerticalPlacement,cr)}}}k.get("symbol-placement")==="line"&&(this.features=function(ut){const Mt={},Vt={},Pt=[];let Ut=0;function an(ur){Pt.push(ut[ur]),Ut++}function vn(ur,pr,oi){const cr=Vt[ur];return delete Vt[ur],Vt[pr]=cr,Pt[cr].geometry[0].pop(),Pt[cr].geometry[0]=Pt[cr].geometry[0].concat(oi[0]),cr}function Rn(ur,pr,oi){const cr=Mt[pr];return delete Mt[pr],Mt[ur]=cr,Pt[cr].geometry[0].shift(),Pt[cr].geometry[0]=oi[0].concat(Pt[cr].geometry[0]),cr}function yr(ur,pr,oi){const cr=oi?pr[0][pr[0].length-1]:pr[0][0];return`${ur}:${cr.x}:${cr.y}`}for(let ur=0;ur<ut.length;ur++){const pr=ut[ur],oi=pr.geometry,cr=pr.text?pr.text.toString():null;if(!cr){an(ur);continue}const mr=yr(cr,oi),Bn=yr(cr,oi,!0);if(mr in Vt&&Bn in Mt&&Vt[mr]!==Mt[Bn]){const Ti=Rn(mr,Bn,oi),Fi=vn(mr,Bn,Pt[Ti].geometry);delete Mt[mr],delete Vt[Bn],Vt[yr(cr,Pt[Fi].geometry,!0)]=Fi,Pt[Ti].geometry=null}else mr in Vt?vn(mr,Bn,oi):Bn in Mt?Rn(mr,Bn,oi):(an(ur),Mt[mr]=Ut-1,Vt[Bn]=Ut-1)}return Pt.filter(ur=>ur.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ut,Mt)=>ut.sortKey-Mt.sortKey)}update(A,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,u,this.layers,{imagePositions:g,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(A,u,this.layers,{imagePositions:g,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(A,u){const g=this.lineVertexArray.length;if(A.segment!==void 0){let x=A.dist(u[A.segment+1]),k=A.dist(u[A.segment]);const P={};for(let N=A.segment+1;N<u.length;N++)P[N]={x:u[N].x,y:u[N].y,tileUnitDistanceFromAnchor:x},N<u.length-1&&(x+=u[N+1].dist(u[N]));for(let N=A.segment||0;N>=0;N--)P[N]={x:u[N].x,y:u[N].y,tileUnitDistanceFromAnchor:k},N>0&&(k+=u[N-1].dist(u[N]));for(let N=0;N<u.length;N++){const q=P[N];this.lineVertexArray.emplaceBack(q.x,q.y,q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(A,u,g,x,k,P,N,q,ne,ae,ye,Ke){const je=A.indexArray,Ve=A.layoutVertexArray,et=A.segments.prepareSegment(4*u.length,Ve,je,this.canOverlap?P.sortKey:void 0),ut=this.glyphOffsetArray.length,Mt=et.vertexLength,Vt=this.allowVerticalPlacement&&N===l.ao.vertical?Math.PI/2:0,Pt=P.text&&P.text.sections;for(let Ut=0;Ut<u.length;Ut++){const{tl:an,tr:vn,bl:Rn,br:yr,tex:ur,pixelOffsetTL:pr,pixelOffsetBR:oi,minFontScaleX:cr,minFontScaleY:mr,glyphOffset:Bn,isSDF:Ti,sectionIndex:Fi}=u[Ut],pi=et.vertexLength,Yr=Bn[1];Na(Ve,q.x,q.y,an.x,Yr+an.y,ur.x,ur.y,g,Ti,pr.x,pr.y,cr,mr),Na(Ve,q.x,q.y,vn.x,Yr+vn.y,ur.x+ur.w,ur.y,g,Ti,oi.x,pr.y,cr,mr),Na(Ve,q.x,q.y,Rn.x,Yr+Rn.y,ur.x,ur.y+ur.h,g,Ti,pr.x,oi.y,cr,mr),Na(Ve,q.x,q.y,yr.x,Yr+yr.y,ur.x+ur.w,ur.y+ur.h,g,Ti,oi.x,oi.y,cr,mr),An(A.dynamicLayoutVertexArray,q,Vt),je.emplaceBack(pi,pi+2,pi+1),je.emplaceBack(pi+1,pi+2,pi+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bn[0]),Ut!==u.length-1&&Fi===u[Ut+1].sectionIndex||A.programConfigurations.populatePaintArrays(Ve.length,P,P.index,{imagePositions:{},canonical:Ke,formattedSection:Pt&&Pt[Fi],globalState:this.globalState})}A.placedSymbolArray.emplaceBack(q.x,q.y,ut,this.glyphOffsetArray.length-ut,Mt,ne,ae,q.segment,g?g[0]:0,g?g[1]:0,x[0],x[1],N,0,!1,0,ye)}_addCollisionDebugVertex(A,u,g,x,k,P){return u.emplaceBack(0,0),A.emplaceBack(g.x,g.y,x,k,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(A,u,g,x,k,P,N){const q=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),ne=q.vertexLength,ae=k.layoutVertexArray,ye=k.collisionVertexArray,Ke=N.anchorX,je=N.anchorY;this._addCollisionDebugVertex(ae,ye,P,Ke,je,new f(A,u)),this._addCollisionDebugVertex(ae,ye,P,Ke,je,new f(g,u)),this._addCollisionDebugVertex(ae,ye,P,Ke,je,new f(g,x)),this._addCollisionDebugVertex(ae,ye,P,Ke,je,new f(A,x)),q.vertexLength+=4;const Ve=k.indexArray;Ve.emplaceBack(ne,ne+1),Ve.emplaceBack(ne+1,ne+2),Ve.emplaceBack(ne+2,ne+3),Ve.emplaceBack(ne+3,ne),q.primitiveLength+=4}addDebugCollisionBoxes(A,u,g,x){for(let k=A;k<u;k++){const P=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,x?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hr(ui,h1.members,Fo),this.iconCollisionBox=new hr(ui,h1.members,Fo);for(let A=0;A<this.symbolInstances.length;A++){const u=this.symbolInstances.get(A);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(A,u,g,x,k,P,N,q,ne){const ae={};for(let ye=u;ye<g;ye++){const Ke=A.get(ye);ae.textBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},ae.textFeatureIndex=Ke.featureIndex;break}for(let ye=x;ye<k;ye++){const Ke=A.get(ye);ae.verticalTextBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},ae.verticalTextFeatureIndex=Ke.featureIndex;break}for(let ye=P;ye<N;ye++){const Ke=A.get(ye);ae.iconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},ae.iconFeatureIndex=Ke.featureIndex;break}for(let ye=q;ye<ne;ye++){const Ke=A.get(ye);ae.verticalIconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},ae.verticalIconFeatureIndex=Ke.featureIndex;break}return ae}deserializeCollisionBoxes(A){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(A,u){const g=A.placedSymbolArray.get(u),x=g.vertexStartIndex+4*g.numGlyphs;for(let k=g.vertexStartIndex;k<x;k+=4)A.indexArray.emplaceBack(k,k+2,k+1),A.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(A),g=Math.cos(A),x=[],k=[],P=[];for(let N=0;N<this.symbolInstances.length;++N){P.push(N);const q=this.symbolInstances.get(N);x.push(0|Math.round(u*q.anchorX+g*q.anchorY)),k.push(q.featureIndex)}return P.sort((N,q)=>x[N]-x[q]||k[q]-k[N]),P}addToSortKeyRanges(A,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:A,symbolInstanceEnd:A+1})}sortFeatures(A){if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((x,k,P)=>{x>=0&&P.indexOf(x)===k&&this.addIndicesForPlacedSymbol(this.text,x)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Pi,Ii;Ar("SymbolBucket",ii,{omit:["layers","collisionBoxArray","features","compareText"]}),ii.MAX_GLYPHS=65535,ii.addDynamicAttributes=An;var Ni={get paint(){return Ii=Ii||new Uo({"icon-opacity":new Dr(nt.paint_symbol["icon-opacity"]),"icon-color":new Dr(nt.paint_symbol["icon-color"]),"icon-halo-color":new Dr(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dr(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dr(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ir(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ir(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dr(nt.paint_symbol["text-opacity"]),"text-color":new Dr(nt.paint_symbol["text-color"],{runtimeType:ki,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Dr(nt.paint_symbol["text-halo-color"]),"text-halo-width":new Dr(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new Dr(nt.paint_symbol["text-halo-blur"]),"text-translate":new Ir(nt.paint_symbol["text-translate"]),"text-translate-anchor":new Ir(nt.paint_symbol["text-translate-anchor"])})},get layout(){return Pi=Pi||new Uo({"symbol-placement":new Ir(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ir(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ir(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dr(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ir(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ir(nt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ir(nt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ir(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ir(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ir(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dr(nt.layout_symbol["icon-size"]),"icon-text-fit":new Ir(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ir(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dr(nt.layout_symbol["icon-image"]),"icon-rotate":new Dr(nt.layout_symbol["icon-rotate"]),"icon-padding":new Dr(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ir(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new Dr(nt.layout_symbol["icon-offset"]),"icon-anchor":new Dr(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ir(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ir(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ir(nt.layout_symbol["text-rotation-alignment"]),"text-field":new Dr(nt.layout_symbol["text-field"]),"text-font":new Dr(nt.layout_symbol["text-font"]),"text-size":new Dr(nt.layout_symbol["text-size"]),"text-max-width":new Dr(nt.layout_symbol["text-max-width"]),"text-line-height":new Ir(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new Dr(nt.layout_symbol["text-letter-spacing"]),"text-justify":new Dr(nt.layout_symbol["text-justify"]),"text-radial-offset":new Dr(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ir(nt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Dr(nt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Dr(nt.layout_symbol["text-anchor"]),"text-max-angle":new Ir(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ir(nt.layout_symbol["text-writing-mode"]),"text-rotate":new Dr(nt.layout_symbol["text-rotate"]),"text-padding":new Ir(nt.layout_symbol["text-padding"]),"text-keep-upright":new Ir(nt.layout_symbol["text-keep-upright"]),"text-transform":new Dr(nt.layout_symbol["text-transform"]),"text-offset":new Dr(nt.layout_symbol["text-offset"]),"text-allow-overlap":new Ir(nt.layout_symbol["text-allow-overlap"]),"text-overlap":new Ir(nt.layout_symbol["text-overlap"]),"text-ignore-placement":new Ir(nt.layout_symbol["text-ignore-placement"]),"text-optional":new Ir(nt.layout_symbol["text-optional"])})}};class cA{constructor(A){if(A.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=A.property.overrides?A.property.overrides.runtimeType:is,this.defaultValue=A}evaluate(A){if(A.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(A.formattedSection))return u.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default}eachChild(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ar("FormatSectionOverride",cA,{omit:["defaultValue"]});class us extends La{constructor(A){super(A,Ni)}recalculate(A,u){if(super.recalculate(A,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const x=[];for(const k of g)x.indexOf(k)<0&&x.push(k);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(A,u,g,x){const k=this.layout.get(A).evaluate(u,{},g,x),P=this._unevaluatedLayout._values[A];return P.isDataDriven()||wA(P.value)||!k?k:function(N,q){return q.replace(/{([^{}]+)}/g,(ne,ae)=>N&&ae in N?String(N[ae]):"")}(u.properties,k)}createBucket(A){return new ii(A)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const A of Ni.paint.overridableProperties){if(!us.hasPaintOverride(this.layout,A))continue;const u=this.paint.get(A),g=new cA(u),x=new ic(g,u.property.specification);let k=null;k=u.value.kind==="constant"||u.value.kind==="source"?new Th("source",x):new ih("composite",x,u.value.zoomStops),this.paint._values[A]=new Wo(u.property,k,u.parameters)}}_handleOverridablePaintPropertyUpdate(A,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&us.hasPaintOverride(this.layout,A)}static hasPaintOverride(A,u){const g=A.get("text-field"),x=Ni.paint.properties[u];let k=!1;const P=N=>{for(const q of N)if(x.overrides&&x.overrides.hasOverride(q))return void(k=!0)};if(g.value.kind==="constant"&&g.value.value instanceof go)P(g.value.value.sections);else if(g.value.kind==="source"||g.value.kind==="composite"){const N=ne=>{k||(ne instanceof Wi&&Zr(ne.value)===sa?P(ne.value.sections):ne instanceof bA?P(ne.sections):ne.eachChild(N))},q=g.value;q._styleExpression&&N(q._styleExpression.expression)}return k}}let Gd;var lv={get paint(){return Gd=Gd||new Uo({"background-color":new Ir(nt.paint_background["background-color"]),"background-pattern":new XA(nt.paint_background["background-pattern"]),"background-opacity":new Ir(nt.paint_background["background-opacity"])})}};class z3 extends La{constructor(A){super(A,lv)}}let Q_;var N3={get paint(){return Q_=Q_||new Uo({"raster-opacity":new Ir(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ir(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ir(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ir(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ir(nt.paint_raster["raster-saturation"]),"raster-contrast":new Ir(nt.paint_raster["raster-contrast"]),"raster-resampling":new Ir(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ir(nt.paint_raster["raster-fade-duration"])})}};class G3 extends La{constructor(A){super(A,N3)}}class j3 extends La{constructor(A){super(A,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=A}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class W3{constructor(A){this._methodToThrottle=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Q3={once:!0},Av=63710088e-1;class Bu{constructor(A,u){if(isNaN(A)||isNaN(u))throw new Error(`Invalid LngLat object: (${A}, ${u})`);if(this.lng=+A,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Bu(Tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(A){const u=Math.PI/180,g=this.lat*u,x=A.lat*u,k=Math.sin(g)*Math.sin(x)+Math.cos(g)*Math.cos(x)*Math.cos((A.lng-this.lng)*u);return Av*Math.acos(Math.min(k,1))}static convert(A){if(A instanceof Bu)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Bu(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Bu(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Y_=2*Math.PI*Av;function q_(c){return Y_*Math.cos(c*Math.PI/180)}function Hp(c){return(180+c)/360}function vo(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function $_(c,A){return c/q_(A)}function gc(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Ql(c,A){return c*q_(gc(A))}class ug{constructor(A,u,g=0){this.x=+A,this.y=+u,this.z=+g}static fromLngLat(A,u=0){const g=Bu.convert(A);return new ug(Hp(g.lng),vo(g.lat),$_(u,g.lat))}toLngLat(){return new Bu(360*this.x-180,gc(this.y))}toAltitude(){return Ql(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Y_*(A=gc(this.y),1/Math.cos(A*Math.PI/180));var A}}function up(c,A,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[c*g-2*Math.PI*6378137/2,A*g-2*Math.PI*6378137/2]}class uv{constructor(A,u,g){if(!function(x,k,P){return!(x<0||x>25||P<0||P>=Math.pow(2,x)||k<0||k>=Math.pow(2,x))}(A,u,g))throw new Error(`x=${u}, y=${g}, z=${A} outside of bounds. 0<=x<${Math.pow(2,A)}, 0<=y<${Math.pow(2,A)} 0<=z<=25 `);this.z=A,this.x=u,this.y=g,this.key=h0(0,A,A,u,g)}equals(A){return this.z===A.z&&this.x===A.x&&this.y===A.y}url(A,u,g){const x=(P=this.y,N=this.z,q=up(256*(k=this.x),256*(P=Math.pow(2,N)-P-1),N),ne=up(256*(k+1),256*(P+1),N),q[0]+","+q[1]+","+ne[0]+","+ne[1]);var k,P,N,q,ne;const ae=function(ye,Ke,je){let Ve,et="";for(let ut=ye;ut>0;ut--)Ve=1<<ut-1,et+=(Ke&Ve?1:0)+(je&Ve?2:0);return et}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ae).replace(/{bbox-epsg-3857}/g,x)}isChildOf(A){const u=this.z-A.z;return u>0&&A.x===this.x>>u&&A.y===this.y>>u}getTilePoint(A){const u=Math.pow(2,this.z);return new f((A.x*u-this.x)*Je,(A.y*u-this.y)*Je)}toString(){return`${this.z}/${this.x}/${this.y}`}}class V_{constructor(A,u){this.wrap=A,this.canonical=u,this.key=h0(A,u.z,u.z,u.x,u.y)}}class Wh{constructor(A,u,g,x,k){if(this.terrainRttPosMatrix32f=null,A<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${A}; z = ${g}`);this.overscaledZ=A,this.wrap=u,this.canonical=new uv(g,+x,+k),this.key=h0(u,A,g,x,k)}clone(){return new Wh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)}scaledTo(A){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-A;return A>this.canonical.z?new Wh(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wh(A,this.wrap,A,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(A,u){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-A;return A>this.canonical.z?h0(this.wrap*+u,A,this.canonical.z,this.canonical.x,this.canonical.y):h0(this.wrap*+u,A,A,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(A){if(A.wrap!==this.wrap)return!1;const u=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>u&&A.canonical.y===this.canonical.y>>u}children(A){if(this.overscaledZ>=A)return[new Wh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,x=2*this.canonical.y;return[new Wh(u,this.wrap,u,g,x),new Wh(u,this.wrap,u,g+1,x),new Wh(u,this.wrap,u,g,x+1),new Wh(u,this.wrap,u,g+1,x+1)]}isLessThan(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))}wrapped(){return new Wh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(A){return new Wh(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new V_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(A){return this.canonical.getTilePoint(new ug(A.x-this.wrap,A.y))}}function h0(c,A,u,g,x){(c*=2)<0&&(c=-1*c-1);const k=1<<u;return(k*k*c+k*x+g).toString(36)+u.toString(36)+A.toString(36)}function cg(c,A){return A?c.properties[A]:c.id}Ar("CanonicalTileID",uv),Ar("OverscaledTileID",Wh,{omit:["terrainRttPosMatrix32f"]});class cp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(A){return this.minX=Math.min(this.minX,A.x),this.minY=Math.min(this.minY,A.y),this.maxX=Math.max(this.maxX,A.x),this.maxY=Math.max(this.maxY,A.y),this}expandBy(A){return this.minX-=A,this.minY-=A,this.maxX+=A,this.maxY+=A,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(A){return this.expandBy(-A)}map(A){const u=new cp;return u.extend(A(new f(this.minX,this.minY))),u.extend(A(new f(this.maxX,this.minY))),u.extend(A(new f(this.minX,this.maxY))),u.extend(A(new f(this.maxX,this.maxY))),u}static fromPoints(A){const u=new cp;for(const g of A)u.extend(g);return u}contains(A){return A.x>=this.minX&&A.x<=this.maxX&&A.y>=this.minY&&A.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(A){return!this.empty()&&!A.empty()&&A.minX>=this.minX&&A.maxX<=this.maxX&&A.minY>=this.minY&&A.maxY<=this.maxY}intersects(A){return!this.empty()&&!A.empty()&&A.minX<=this.maxX&&A.maxX>=this.minX&&A.minY<=this.maxY&&A.maxY>=this.minY}}class H_{constructor(A){this._stringToNumber={},this._numberToString=[];for(let u=0;u<A.length;u++){const g=A[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(A){return this._stringToNumber[A]}decode(A){if(A>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${A} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[A]}}class Sf{constructor(A,u,g,x,k){this.type="Feature",this._vectorTileFeature=A,A._z=u,A._x=g,A._y=x,this.properties=A.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(A){this._geometry=A}toJSON(){const A={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(A[u]=this[u]);return A}}class cv{constructor(A,u){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new Ho(Je,16,0),this.grid3D=new Ho(Je,16,0),this.featureIndexArray=new Lt,this.promoteId=u}insert(A,u,g,x,k,P){const N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,x,k);const q=P?this.grid3D:this.grid;for(let ne=0;ne<u.length;ne++){const ae=u[ne],ye=[1/0,1/0,-1/0,-1/0];for(let Ke=0;Ke<ae.length;Ke++){const je=ae[Ke];ye[0]=Math.min(ye[0],je.x),ye[1]=Math.min(ye[1],je.y),ye[2]=Math.max(ye[2],je.x),ye[3]=Math.max(ye[3],je.y)}ye[0]<Je&&ye[1]<Je&&ye[2]>=0&&ye[3]>=0&&q.insert(N,ye[0],ye[1],ye[2],ye[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new r0(new qp(this.rawTileData)).layers,this.sourceLayerCoder=new H_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(A,u,g,x){this.loadVTLayers();const k=A.params,P=Je/A.tileSize/A.scale,N=gu(k.filter),q=A.queryGeometry,ne=A.queryPadding*P,ae=cp.fromPoints(q),ye=this.grid.query(ae.minX-ne,ae.minY-ne,ae.maxX+ne,ae.maxY+ne),Ke=cp.fromPoints(A.cameraQueryGeometry).expandBy(ne),je=this.grid3D.query(Ke.minX,Ke.minY,Ke.maxX,Ke.maxY,(ut,Mt,Vt,Pt)=>function(Ut,an,vn,Rn,yr){for(const pr of Ut)if(an<=pr.x&&vn<=pr.y&&Rn>=pr.x&&yr>=pr.y)return!0;const ur=[new f(an,vn),new f(an,yr),new f(Rn,yr),new f(Rn,vn)];if(Ut.length>2){for(const pr of ur)if(dh(Ut,pr))return!0}for(let pr=0;pr<Ut.length-1;pr++)if(Fd(Ut[pr],Ut[pr+1],ur))return!0;return!1}(A.cameraQueryGeometry,ut-ne,Mt-ne,Vt+ne,Pt+ne));for(const ut of je)ye.push(ut);ye.sort(Il);const Ve={};let et;for(let ut=0;ut<ye.length;ut++){const Mt=ye[ut];if(Mt===et)continue;et=Mt;const Vt=this.featureIndexArray.get(Mt);let Pt=null;this.loadMatchingFeature(Ve,Vt.bucketIndex,Vt.sourceLayerIndex,Vt.featureIndex,N,k.layers,k.availableImages,u,g,x,(Ut,an,vn)=>(Pt||(Pt=ru(Ut)),an.queryIntersectsFeature({queryGeometry:q,feature:Ut,featureState:vn,geometry:Pt,zoom:this.z,transform:A.transform,pixelsToTileUnits:P,pixelPosMatrix:A.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:A.getElevation})))}return Ve}loadMatchingFeature(A,u,g,x,k,P,N,q,ne,ae,ye){const Ke=this.bucketLayerIDs[u];if(P&&!Ke.some(ut=>P.has(ut)))return;const je=this.sourceLayerCoder.decode(g),Ve=this.vtLayers[je].feature(x);if(k.needGeometry){const ut=qu(Ve,!0);if(!k.filter(new bo(this.tileID.overscaledZ),ut,this.tileID.canonical))return}else if(!k.filter(new bo(this.tileID.overscaledZ),Ve))return;const et=this.getId(Ve,je);for(let ut=0;ut<Ke.length;ut++){const Mt=Ke[ut];if(P&&!P.has(Mt))continue;const Vt=q[Mt];if(!Vt)continue;let Pt={};et&&ae&&(Pt=ae.getState(Vt.sourceLayer||"_geojsonTileLayer",et));const Ut=Le({},ne[Mt]);Ut.paint=hg(Ut.paint,Vt.paint,Ve,Pt,N),Ut.layout=hg(Ut.layout,Vt.layout,Ve,Pt,N);const an=!ye||ye(Ve,Vt,Pt);if(!an)continue;const vn=new Sf(Ve,this.z,this.x,this.y,et);vn.layer=Ut;let Rn=A[Mt];Rn===void 0&&(Rn=A[Mt]=[]),Rn.push({featureIndex:x,feature:vn,intersectionZ:an})}}lookupSymbolFeatures(A,u,g,x,k,P,N,q){const ne={};this.loadVTLayers();const ae=gu(k);for(const ye of A)this.loadMatchingFeature(ne,g,x,ye,ae,P,N,q,u);return ne}hasLayer(A){for(const u of this.bucketLayerIDs)for(const g of u)if(A===g)return!0;return!1}getId(A,u){var g;let x=A.id;return this.promoteId&&(x=A.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof x=="boolean"&&(x=Number(x)),x===void 0&&(!((g=A.properties)===null||g===void 0)&&g.cluster)&&this.promoteId&&(x=Number(A.properties.cluster_id))),x}}function hg(c,A,u,g,x){return ke(c,(k,P)=>{const N=A instanceof uc?A.get(P):null;return N&&N.evaluate?N.evaluate(u,g,x):N})}function Il(c,A){return A-c}function Tl(c,A,u,g,x){const k=[];for(let P=0;P<c.length;P++){const N=c[P];let q;for(let ne=0;ne<N.length-1;ne++){let ae=N[ne],ye=N[ne+1];ae.x<A&&ye.x<A||(ae.x<A?ae=new f(A,ae.y+(A-ae.x)/(ye.x-ae.x)*(ye.y-ae.y))._round():ye.x<A&&(ye=new f(A,ae.y+(A-ae.x)/(ye.x-ae.x)*(ye.y-ae.y))._round()),ae.y<u&&ye.y<u||(ae.y<u?ae=new f(ae.x+(u-ae.y)/(ye.y-ae.y)*(ye.x-ae.x),u)._round():ye.y<u&&(ye=new f(ae.x+(u-ae.y)/(ye.y-ae.y)*(ye.x-ae.x),u)._round()),ae.x>=g&&ye.x>=g||(ae.x>=g?ae=new f(g,ae.y+(g-ae.x)/(ye.x-ae.x)*(ye.y-ae.y))._round():ye.x>=g&&(ye=new f(g,ae.y+(g-ae.x)/(ye.x-ae.x)*(ye.y-ae.y))._round()),ae.y>=x&&ye.y>=x||(ae.y>=x?ae=new f(ae.x+(x-ae.y)/(ye.y-ae.y)*(ye.x-ae.x),x)._round():ye.y>=x&&(ye=new f(ae.x+(x-ae.y)/(ye.y-ae.y)*(ye.x-ae.x),x)._round()),q&&ae.equals(q[q.length-1])||(q=[ae],k.push(q)),q.push(ye)))))}}return k}Ar("FeatureIndex",cv,{omit:["rawTileData","sourceLayerCoder"]});class hp extends f{constructor(A,u,g,x){super(A,u),this.angle=g,x!==void 0&&(this.segment=x)}clone(){return new hp(this.x,this.y,this.angle,this.segment)}}function Z_(c,A,u,g,x){if(A.segment===void 0||u===0)return!0;let k=A,P=A.segment+1,N=0;for(;N>-u/2;){if(P--,P<0)return!1;N-=c[P].dist(k),k=c[P]}N+=c[P].dist(c[P+1]),P++;const q=[];let ne=0;for(;N<u/2;){const ae=c[P],ye=c[P+1];if(!ye)return!1;let Ke=c[P-1].angleTo(ae)-ae.angleTo(ye);for(Ke=Math.abs((Ke+3*Math.PI)%(2*Math.PI)-Math.PI),q.push({distance:N,angleDelta:Ke}),ne+=Ke;N-q[0].distance>g;)ne-=q.shift().angleDelta;if(ne>x)return!1;P++,N+=ae.dist(ye)}return!0}function X_(c){let A=0;for(let u=0;u<c.length-1;u++)A+=c[u].dist(c[u+1]);return A}function J_(c,A,u){return c?.6*A*u:0}function eb(c,A){return Math.max(c?c.right-c.left:0,A?A.right-A.left:0)}function Y3(c,A,u,g,x,k){const P=J_(u,x,k),N=eb(u,g)*k;let q=0;const ne=X_(c)/2;for(let ae=0;ae<c.length-1;ae++){const ye=c[ae],Ke=c[ae+1],je=ye.dist(Ke);if(q+je>ne){const Ve=(ne-q)/je,et=jA.number(ye.x,Ke.x,Ve),ut=jA.number(ye.y,Ke.y,Ve),Mt=new hp(et,ut,Ke.angleTo(ye),ae);return Mt._round(),!P||Z_(c,Mt,N,P,A)?Mt:void 0}q+=je}}function q3(c,A,u,g,x,k,P,N,q){const ne=J_(g,k,P),ae=eb(g,x),ye=ae*P,Ke=c[0].x===0||c[0].x===q||c[0].y===0||c[0].y===q;return A-ye<A/4&&(A=ye+A/4),hv(c,Ke?A/2*N%A:(ae/2+2*k)*P*N%A,A,ne,u,ye,Ke,!1,q)}function hv(c,A,u,g,x,k,P,N,q){const ne=k/2,ae=X_(c);let ye=0,Ke=A-u,je=[];for(let Ve=0;Ve<c.length-1;Ve++){const et=c[Ve],ut=c[Ve+1],Mt=et.dist(ut),Vt=ut.angleTo(et);for(;Ke+u<ye+Mt;){Ke+=u;const Pt=(Ke-ye)/Mt,Ut=jA.number(et.x,ut.x,Pt),an=jA.number(et.y,ut.y,Pt);if(Ut>=0&&Ut<q&&an>=0&&an<q&&Ke-ne>=0&&Ke+ne<=ae){const vn=new hp(Ut,an,Vt,Ve);vn._round(),g&&!Z_(c,vn,k,g,x)||je.push(vn)}}ye+=Mt}return N||je.length||P||(je=hv(c,ye/2,u,g,x,k,P,!0,q)),je}function d0(c,A,u,g){const x=[],k=c.image,P=k.pixelRatio,N=k.paddedRect.w-2,q=k.paddedRect.h-2;let ne={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const ae=k.stretchX||[[0,N]],ye=k.stretchY||[[0,q]],Ke=(Bn,Ti)=>Bn+Ti[1]-Ti[0],je=ae.reduce(Ke,0),Ve=ye.reduce(Ke,0),et=N-je,ut=q-Ve;let Mt=0,Vt=je,Pt=0,Ut=Ve,an=0,vn=et,Rn=0,yr=ut;if(k.content&&g){const Bn=k.content,Ti=Bn[2]-Bn[0],Fi=Bn[3]-Bn[1];(k.textFitWidth||k.textFitHeight)&&(ne=Cn(c)),Mt=f0(ae,0,Bn[0]),Pt=f0(ye,0,Bn[1]),Vt=f0(ae,Bn[0],Bn[2]),Ut=f0(ye,Bn[1],Bn[3]),an=Bn[0]-Mt,Rn=Bn[1]-Pt,vn=Ti-Vt,yr=Fi-Ut}const ur=ne.x1,pr=ne.y1,oi=ne.x2-ur,cr=ne.y2-pr,mr=(Bn,Ti,Fi,pi)=>{const Yr=dg(Bn.stretch-Mt,Vt,oi,ur),To=Om(Bn.fixed-an,vn,Bn.stretch,je),nl=dg(Ti.stretch-Pt,Ut,cr,pr),hA=Om(Ti.fixed-Rn,yr,Ti.stretch,Ve),Iu=dg(Fi.stretch-Mt,Vt,oi,ur),Yh=Om(Fi.fixed-an,vn,Fi.stretch,je),zc=dg(pi.stretch-Pt,Ut,cr,pr),ou=Om(pi.fixed-Rn,yr,pi.stretch,Ve),Ga=new f(Yr,nl),DA=new f(Iu,nl),su=new f(Iu,zc),au=new f(Yr,zc),vc=new f(To/P,hA/P),qh=new f(Yh/P,ou/P),FA=A*Math.PI/180;if(FA){const KA=Math.sin(FA),LA=Math.cos(FA),Yl=[LA,-KA,KA,LA];Ga._matMult(Yl),DA._matMult(Yl),au._matMult(Yl),su._matMult(Yl)}const Nc=Bn.stretch+Bn.fixed,dA=Ti.stretch+Ti.fixed;return{tl:Ga,tr:DA,bl:au,br:su,tex:{x:k.paddedRect.x+1+Nc,y:k.paddedRect.y+1+dA,w:Fi.stretch+Fi.fixed-Nc,h:pi.stretch+pi.fixed-dA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vc,pixelOffsetBR:qh,minFontScaleX:vn/P/oi,minFontScaleY:yr/P/cr,isSDF:u}};if(g&&(k.stretchX||k.stretchY)){const Bn=tb(ae,et,je),Ti=tb(ye,ut,Ve);for(let Fi=0;Fi<Bn.length-1;Fi++){const pi=Bn[Fi],Yr=Bn[Fi+1];for(let To=0;To<Ti.length-1;To++)x.push(mr(pi,Ti[To],Yr,Ti[To+1]))}}else x.push(mr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:q+1}));return x}function f0(c,A,u){let g=0;for(const x of c)g+=Math.max(A,Math.min(u,x[1]))-Math.max(A,Math.min(u,x[0]));return g}function tb(c,A,u){const g=[{fixed:-1,stretch:0}];for(const[x,k]of c){const P=g[g.length-1];g.push({fixed:x-P.stretch,stretch:P.stretch}),g.push({fixed:x-P.stretch,stretch:P.stretch+(k-x)})}return g.push({fixed:A+1,stretch:u}),g}function dg(c,A,u,g){return c/A*u+g}function Om(c,A,u,g){return c-A*u/g}Ar("Anchor",hp);class yc{constructor(A,u,g,x,k,P,N,q,ne,ae){var ye;if(this.boxStartIndex=A.length,ne){let Ke=P.top,je=P.bottom;const Ve=P.collisionPadding;Ve&&(Ke-=Ve[1],je+=Ve[3]);let et=je-Ke;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Ke=!((ye=P.image)===null||ye===void 0)&&ye.content&&(P.image.textFitWidth||P.image.textFitHeight)?Cn(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Ke.y1=Ke.y1*N-q[0],Ke.y2=Ke.y2*N+q[2],Ke.x1=Ke.x1*N-q[3],Ke.x2=Ke.x2*N+q[1];const je=P.collisionPadding;if(je&&(Ke.x1-=je[0]*N,Ke.y1-=je[1]*N,Ke.x2+=je[2]*N,Ke.y2+=je[3]*N),ae){const Ve=new f(Ke.x1,Ke.y1),et=new f(Ke.x2,Ke.y1),ut=new f(Ke.x1,Ke.y2),Mt=new f(Ke.x2,Ke.y2),Vt=ae*Math.PI/180;Ve._rotate(Vt),et._rotate(Vt),ut._rotate(Vt),Mt._rotate(Vt),Ke.x1=Math.min(Ve.x,et.x,ut.x,Mt.x),Ke.x2=Math.max(Ve.x,et.x,ut.x,Mt.x),Ke.y1=Math.min(Ve.y,et.y,ut.y,Mt.y),Ke.y2=Math.max(Ve.y,et.y,ut.y,Mt.y)}A.emplaceBack(u.x,u.y,Ke.x1,Ke.y1,Ke.x2,Ke.y2,g,x,k)}this.boxEndIndex=A.length}}class p0{constructor(A=[],u=(g,x)=>g<x?-1:g>x?1:0){if(this.data=A,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:u,compare:g}=this,x=u[A];for(;A>0;){const k=A-1>>1,P=u[k];if(g(x,P)>=0)break;u[A]=P,A=k}u[A]=x}_down(A){const{data:u,compare:g}=this,x=this.length>>1,k=u[A];for(;A<x;){let P=1+(A<<1);const N=P+1;if(N<this.length&&g(u[N],u[P])<0&&(P=N),g(u[P],k)>=0)break;u[A]=u[P],A=P}u[A]=k}}function $3(c,A=1,u=!1){const g=cp.fromPoints(c[0]),x=Math.min(g.width(),g.height());let k=x/2;const P=new p0([],V3),{minX:N,minY:q,maxX:ne,maxY:ae}=g;if(x===0)return new f(N,q);for(let je=N;je<ne;je+=x)for(let Ve=q;Ve<ae;Ve+=x)P.push(new m0(je+k,Ve+k,k,c));let ye=function(je){let Ve=0,et=0,ut=0;const Mt=je[0];for(let Vt=0,Pt=Mt.length,Ut=Pt-1;Vt<Pt;Ut=Vt++){const an=Mt[Vt],vn=Mt[Ut],Rn=an.x*vn.y-vn.x*an.y;et+=(an.x+vn.x)*Rn,ut+=(an.y+vn.y)*Rn,Ve+=3*Rn}return new m0(et/Ve,ut/Ve,0,je)}(c),Ke=P.length;for(;P.length;){const je=P.pop();(je.d>ye.d||!ye.d)&&(ye=je,u&&console.log("found best %d after %d probes",Math.round(1e4*je.d)/1e4,Ke)),je.max-ye.d<=A||(k=je.h/2,P.push(new m0(je.p.x-k,je.p.y-k,k,c)),P.push(new m0(je.p.x+k,je.p.y-k,k,c)),P.push(new m0(je.p.x-k,je.p.y+k,k,c)),P.push(new m0(je.p.x+k,je.p.y+k,k,c)),Ke+=4)}return u&&(console.log(`num probes: ${Ke}`),console.log(`best distance: ${ye.d}`)),ye.p}function V3(c,A){return A.max-c.max}function m0(c,A,u,g){this.p=new f(c,A),this.h=u,this.d=function(x,k){let P=!1,N=1/0;for(let q=0;q<k.length;q++){const ne=k[q];for(let ae=0,ye=ne.length,Ke=ye-1;ae<ye;Ke=ae++){const je=ne[ae],Ve=ne[Ke];je.y>x.y!=Ve.y>x.y&&x.x<(Ve.x-je.x)*(x.y-je.y)/(Ve.y-je.y)+je.x&&(P=!P),N=Math.min(N,Qo(x,je,Ve))}}return(P?1:-1)*Math.sqrt(N)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var Ou;l.aE=void 0,(Ou=l.aE||(l.aE={}))[Ou.center=1]="center",Ou[Ou.left=2]="left",Ou[Ou.right=3]="right",Ou[Ou.top=4]="top",Ou[Ou.bottom=5]="bottom",Ou[Ou["top-left"]=6]="top-left",Ou[Ou["top-right"]=7]="top-right",Ou[Ou["bottom-left"]=8]="bottom-left",Ou[Ou["bottom-right"]=9]="bottom-right";const dv=Number.POSITIVE_INFINITY;function fv(c,A){return A[1]!==dv?function(u,g,x){let k=0,P=0;switch(g=Math.abs(g),x=Math.abs(x),u){case"top-right":case"top-left":case"top":P=x-7;break;case"bottom-right":case"bottom-left":case"bottom":P=7-x}switch(u){case"top-right":case"bottom-right":case"right":k=-g;break;case"top-left":case"bottom-left":case"left":k=g}return[k,P]}(c,A[0],A[1]):function(u,g){let x=0,k=0;g<0&&(g=0);const P=g/Math.SQRT2;switch(u){case"top-right":case"top-left":k=P-7;break;case"bottom-right":case"bottom-left":k=7-P;break;case"bottom":k=7-g;break;case"top":k=g-7}switch(u){case"top-right":case"bottom-right":x=-P;break;case"top-left":case"bottom-left":x=P;break;case"left":x=g;break;case"right":x=-g}return[x,k]}(c,A[0])}function Ef(c,A,u){var g;const x=c.layout,k=(g=x.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(A,{},u);if(k){const N=k.values,q=[];for(let ne=0;ne<N.length;ne+=2){const ae=q[ne]=N[ne],ye=N[ne+1].map(Ke=>Ke*Ol);ae.startsWith("top")?ye[1]-=7:ae.startsWith("bottom")&&(ye[1]+=7),q[ne+1]=ye}return new Cs(q)}const P=x.get("text-variable-anchor");if(P){let N;N=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(A,{},u)*Ol,dv]:x.get("text-offset").evaluate(A,{},u).map(ne=>ne*Ol);const q=[];for(const ne of P)q.push(ne,fv(ne,N));return new Cs(q)}return null}function Mo(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nb(c,A,u,g,x,k,P,N,q,ne,ae,ye){let Ke=k.textMaxSize.evaluate(A,{});Ke===void 0&&(Ke=P);const je=c.layers[0].layout,Ve=je.get("icon-offset").evaluate(A,{},ae),et=pv(u.horizontal),ut=P/24,Mt=c.tilePixelRatio*ut,Vt=c.tilePixelRatio*Ke/24,Pt=c.tilePixelRatio*N,Ut=c.tilePixelRatio*je.get("symbol-spacing"),an=je.get("text-padding")*c.tilePixelRatio,vn=function(Fi,pi,Yr,To=1){const nl=Fi.get("icon-padding").evaluate(pi,{},Yr),hA=nl&&nl.values;return[hA[0]*To,hA[1]*To,hA[2]*To,hA[3]*To]}(je,A,ae,c.tilePixelRatio),Rn=je.get("text-max-angle")/180*Math.PI,yr=je.get("text-rotation-alignment")!=="viewport"&&je.get("symbol-placement")!=="point",ur=je.get("icon-rotation-alignment")==="map"&&je.get("symbol-placement")!=="point",pr=je.get("symbol-placement"),oi=Ut/2,cr=je.get("icon-text-fit");let mr;g&&cr!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(mr=rr(g,u.vertical,cr,je.get("icon-text-fit-padding"),Ve,ut)),et&&(g=rr(g,et,cr,je.get("icon-text-fit-padding"),Ve,ut)));const Bn=ae?ye.line.getGranularityForZoomLevel(ae.z):1,Ti=(Fi,pi)=>{pi.x<0||pi.x>=Je||pi.y<0||pi.y>=Je||function(Yr,To,nl,hA,Iu,Yh,zc,ou,Ga,DA,su,au,vc,qh,FA,Nc,dA,KA,LA,Yl,Ma,jd,g0,Wd,X3){const y0=Yr.addToLineVertexArray(To,nl);let Im,Zp,Tm,km,ib=0,ob=0,sb=0,x1=0,bv=-1,xv=-1;const dp={};let Gc=Uh("");if(Yr.allowVerticalPlacement&&hA.vertical){const $u=ou.layout.get("text-rotate").evaluate(Ma,{},Wd)+90;Tm=new yc(Ga,To,DA,su,au,hA.vertical,vc,qh,FA,$u),zc&&(km=new yc(Ga,To,DA,su,au,zc,dA,KA,FA,$u))}if(Iu){const $u=ou.layout.get("icon-rotate").evaluate(Ma,{}),jc=ou.layout.get("icon-text-fit")!=="none",fp=d0(Iu,$u,g0,jc),Yd=zc?d0(zc,$u,g0,jc):void 0;Zp=new yc(Ga,To,DA,su,au,Iu,dA,KA,!1,$u),ib=4*fp.length;const Pm=Yr.iconSizeData;let Bf=null;Pm.kind==="source"?(Bf=[Xn*ou.layout.get("icon-size").evaluate(Ma,{})],Bf[0]>jn&&wt(`${Yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Pm.kind==="composite"&&(Bf=[Xn*jd.compositeIconSizes[0].evaluate(Ma,{},Wd),Xn*jd.compositeIconSizes[1].evaluate(Ma,{},Wd)],(Bf[0]>jn||Bf[1]>jn)&&wt(`${Yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Yr.addSymbols(Yr.icon,fp,Bf,Yl,LA,Ma,l.ao.none,To,y0.lineStartIndex,y0.lineLength,-1,Wd),bv=Yr.icon.placedSymbolArray.length-1,Yd&&(ob=4*Yd.length,Yr.addSymbols(Yr.icon,Yd,Bf,Yl,LA,Ma,l.ao.vertical,To,y0.lineStartIndex,y0.lineLength,-1,Wd),xv=Yr.icon.placedSymbolArray.length-1)}const M1=Object.keys(hA.horizontal);for(const $u of M1){const jc=hA.horizontal[$u];if(!Im){Gc=Uh(jc.text);const Yd=ou.layout.get("text-rotate").evaluate(Ma,{},Wd);Im=new yc(Ga,To,DA,su,au,jc,vc,qh,FA,Yd)}const fp=jc.positionedLines.length===1;if(sb+=Qh(Yr,To,jc,Yh,ou,FA,Ma,Nc,y0,hA.vertical?l.ao.horizontal:l.ao.horizontalOnly,fp?M1:[$u],dp,bv,jd,Wd),fp)break}hA.vertical&&(x1+=Qh(Yr,To,hA.vertical,Yh,ou,FA,Ma,Nc,y0,l.ao.vertical,["vertical"],dp,xv,jd,Wd));const J3=Im?Im.boxStartIndex:Yr.collisionBoxArray.length,e4=Im?Im.boxEndIndex:Yr.collisionBoxArray.length,t4=Tm?Tm.boxStartIndex:Yr.collisionBoxArray.length,n4=Tm?Tm.boxEndIndex:Yr.collisionBoxArray.length,Mv=Zp?Zp.boxStartIndex:Yr.collisionBoxArray.length,r4=Zp?Zp.boxEndIndex:Yr.collisionBoxArray.length,wv=km?km.boxStartIndex:Yr.collisionBoxArray.length,i4=km?km.boxEndIndex:Yr.collisionBoxArray.length;let Qd=-1;const w1=($u,jc)=>$u&&$u.circleDiameter?Math.max($u.circleDiameter,jc):jc;Qd=w1(Im,Qd),Qd=w1(Tm,Qd),Qd=w1(Zp,Qd),Qd=w1(km,Qd);const ab=Qd>-1?1:0;ab&&(Qd*=X3/Ol),Yr.glyphOffsetArray.length>=ii.MAX_GLYPHS&&wt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ma.sortKey!==void 0&&Yr.addToSortKeyRanges(Yr.symbolInstances.length,Ma.sortKey);const lb=Ef(ou,Ma,Wd),[o4,s4]=function($u,jc){const fp=$u.length,Yd=jc?.values;if(Yd?.length>0)for(let Pm=0;Pm<Yd.length;Pm+=2){const Bf=Yd[Pm+1];$u.emplaceBack(l.aE[Yd[Pm]],Bf[0],Bf[1])}return[fp,$u.length]}(Yr.textAnchorOffsets,lb);Yr.symbolInstances.emplaceBack(To.x,To.y,dp.right>=0?dp.right:-1,dp.center>=0?dp.center:-1,dp.left>=0?dp.left:-1,dp.vertical||-1,bv,xv,Gc,J3,e4,t4,n4,Mv,r4,wv,i4,DA,sb,x1,ib,ob,ab,0,vc,Qd,o4,s4)}(c,pi,Fi,u,g,x,mr,c.layers[0],c.collisionBoxArray,A.index,A.sourceLayerIndex,c.index,Mt,[an,an,an,an],yr,q,Pt,vn,ur,Ve,A,k,ne,ae,P)};if(pr==="line")for(const Fi of Tl(A.geometry,0,0,Je,Je)){const pi=ao(Fi,Bn),Yr=q3(pi,Ut,Rn,u.vertical||et,g,24,Vt,c.overscaling,Je);for(const To of Yr)et&&H3(c,et.text,oi,To)||Ti(pi,To)}else if(pr==="line-center"){for(const Fi of A.geometry)if(Fi.length>1){const pi=ao(Fi,Bn),Yr=Y3(pi,Rn,u.vertical||et,g,24,Vt);Yr&&Ti(pi,Yr)}}else if(A.type==="Polygon")for(const Fi of Oc(A.geometry,0)){const pi=$3(Fi,16);Ti(ao(Fi[0],Bn,!0),new hp(pi.x,pi.y,0))}else if(A.type==="LineString")for(const Fi of A.geometry){const pi=ao(Fi,Bn);Ti(pi,new hp(pi[0].x,pi[0].y,0))}else if(A.type==="Point")for(const Fi of A.geometry)for(const pi of Fi)Ti([pi],new hp(pi.x,pi.y,0))}function Qh(c,A,u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve){const et=function(Vt,Pt,Ut,an,vn,Rn,yr,ur){const pr=an.layout.get("text-rotate").evaluate(Rn,{})*Math.PI/180,oi=[];for(const cr of Pt.positionedLines)for(const mr of cr.positionedGlyphs){if(!mr.rect)continue;const Bn=mr.rect||{};let Ti=4,Fi=!0,pi=1,Yr=0;const To=(vn||ur)&&mr.vertical,nl=mr.metrics.advance*mr.scale/2;if(ur&&Pt.verticalizable&&(Yr=cr.lineOffset/2-(mr.imageName?-(Ol-mr.metrics.width*mr.scale)/2:(mr.scale-1)*Ol)),mr.imageName){const KA=yr[mr.imageName];Fi=KA.sdf,pi=KA.pixelRatio,Ti=1/pi}const hA=vn?[mr.x+nl,mr.y]:[0,0];let Iu=vn?[0,0]:[mr.x+nl+Ut[0],mr.y+Ut[1]-Yr],Yh=[0,0];To&&(Yh=Iu,Iu=[0,0]);const zc=mr.metrics.isDoubleResolution?2:1,ou=(mr.metrics.left-Ti)*mr.scale-nl+Iu[0],Ga=(-mr.metrics.top-Ti)*mr.scale+Iu[1],DA=ou+Bn.w/zc*mr.scale/pi,su=Ga+Bn.h/zc*mr.scale/pi,au=new f(ou,Ga),vc=new f(DA,Ga),qh=new f(ou,su),FA=new f(DA,su);if(To){const KA=new f(-nl,nl- -17),LA=-Math.PI/2,Yl=12-nl,Ma=new f(22-Yl,-(mr.imageName?Yl:0)),jd=new f(...Yh);au._rotateAround(LA,KA)._add(Ma)._add(jd),vc._rotateAround(LA,KA)._add(Ma)._add(jd),qh._rotateAround(LA,KA)._add(Ma)._add(jd),FA._rotateAround(LA,KA)._add(Ma)._add(jd)}if(pr){const KA=Math.sin(pr),LA=Math.cos(pr),Yl=[LA,-KA,KA,LA];au._matMult(Yl),vc._matMult(Yl),qh._matMult(Yl),FA._matMult(Yl)}const Nc=new f(0,0),dA=new f(0,0);oi.push({tl:au,tr:vc,bl:qh,br:FA,tex:Bn,writingMode:Pt.writingMode,glyphOffset:hA,sectionIndex:mr.sectionIndex,isSDF:Fi,pixelOffsetTL:Nc,pixelOffsetBR:dA,minFontScaleX:0,minFontScaleY:0})}return oi}(0,u,N,x,k,P,g,c.allowVerticalPlacement),ut=c.textSizeData;let Mt=null;ut.kind==="source"?(Mt=[Xn*x.layout.get("text-size").evaluate(P,{})],Mt[0]>jn&&wt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ut.kind==="composite"&&(Mt=[Xn*je.compositeTextSizes[0].evaluate(P,{},Ve),Xn*je.compositeTextSizes[1].evaluate(P,{},Ve)],(Mt[0]>jn||Mt[1]>jn)&&wt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,et,Mt,N,k,P,ne,A,q.lineStartIndex,q.lineLength,Ke,Ve);for(const Vt of ae)ye[Vt]=c.text.placedSymbolArray.length-1;return 4*et.length}function pv(c){for(const A in c)return c[A];return null}function H3(c,A,u,g){const x=c.compareText;if(A in x){const k=x[A];for(let P=k.length-1;P>=0;P--)if(g.dist(k[P])<u)return!0}else x[A]=[];return x[A].push(g),!1}const $s=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class mv{static from(A){if(!(A instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(A,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=g>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const k=$s[15&g];if(!k)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(A,2,1),[N]=new Uint32Array(A,4,1);return new mv(N,P,k,A)}constructor(A,u=64,g=Float64Array,x){if(isNaN(A)||A<0)throw new Error(`Unpexpected numItems value: ${A}.`);this.numItems=+A,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=A<65536?Uint16Array:Uint32Array;const k=$s.indexOf(this.ArrayType),P=2*A*this.ArrayType.BYTES_PER_ELEMENT,N=A*this.IndexArrayType.BYTES_PER_ELEMENT,q=(8-N%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${g}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+N+q,2*A),this._pos=2*A,this._finished=!0):(this.data=new ArrayBuffer(8+P+N+q),this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+N+q,2*A),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=A)}add(A,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=A,this.coords[this._pos++]=u,g}finish(){const A=this._pos>>1;if(A!==this.numItems)throw new Error(`Added ${A} items when expected ${this.numItems}.`);return _1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(A,u,g,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:P,nodeSize:N}=this,q=[0,k.length-1,0],ne=[];for(;q.length;){const ae=q.pop()||0,ye=q.pop()||0,Ke=q.pop()||0;if(ye-Ke<=N){for(let ut=Ke;ut<=ye;ut++){const Mt=P[2*ut],Vt=P[2*ut+1];Mt>=A&&Mt<=g&&Vt>=u&&Vt<=x&&ne.push(k[ut])}continue}const je=Ke+ye>>1,Ve=P[2*je],et=P[2*je+1];Ve>=A&&Ve<=g&&et>=u&&et<=x&&ne.push(k[je]),(ae===0?A<=Ve:u<=et)&&(q.push(Ke),q.push(je-1),q.push(1-ae)),(ae===0?g>=Ve:x>=et)&&(q.push(je+1),q.push(ye),q.push(1-ae))}return ne}within(A,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:k,nodeSize:P}=this,N=[0,x.length-1,0],q=[],ne=g*g;for(;N.length;){const ae=N.pop()||0,ye=N.pop()||0,Ke=N.pop()||0;if(ye-Ke<=P){for(let ut=Ke;ut<=ye;ut++)rb(k[2*ut],k[2*ut+1],A,u)<=ne&&q.push(x[ut]);continue}const je=Ke+ye>>1,Ve=k[2*je],et=k[2*je+1];rb(Ve,et,A,u)<=ne&&q.push(x[je]),(ae===0?A-g<=Ve:u-g<=et)&&(N.push(Ke),N.push(je-1),N.push(1-ae)),(ae===0?A+g>=Ve:u+g>=et)&&(N.push(je+1),N.push(ye),N.push(1-ae))}return q}}function _1(c,A,u,g,x,k){if(x-g<=u)return;const P=g+x>>1;fg(c,A,P,g,x,k),_1(c,A,u,g,P-1,1-k),_1(c,A,u,P+1,x,1-k)}function fg(c,A,u,g,x,k){for(;x>g;){if(x-g>600){const ne=x-g+1,ae=u-g+1,ye=Math.log(ne),Ke=.5*Math.exp(2*ye/3),je=.5*Math.sqrt(ye*Ke*(ne-Ke)/ne)*(ae-ne/2<0?-1:1);fg(c,A,u,Math.max(g,Math.floor(u-ae*Ke/ne+je)),Math.min(x,Math.floor(u+(ne-ae)*Ke/ne+je)),k)}const P=A[2*u+k];let N=g,q=x;for(pg(c,A,g,u),A[2*x+k]>P&&pg(c,A,g,x);N<q;){for(pg(c,A,N,q),N++,q--;A[2*N+k]<P;)N++;for(;A[2*q+k]>P;)q--}A[2*g+k]===P?pg(c,A,g,q):(q++,pg(c,A,q,x)),q<=u&&(g=q+1),u<=q&&(x=q-1)}}function pg(c,A,u,g){gv(c,u,g),gv(A,2*u,2*g),gv(A,2*u+1,2*g+1)}function gv(c,A,u){const g=c[A];c[A]=c[u],c[u]=g}function rb(c,A,u,g){const x=c-u,k=A-g;return x*x+k*k}var yv;l.cx=void 0,(yv=l.cx||(l.cx={})).create="create",yv.load="load",yv.fullLoad="fullLoad";let b1=null,mg=[];const vv=1e3/60,Cv="loadTime",_v="fullLoadTime",Z3={mark(c){performance.mark(c)},frame(c){const A=c;b1!=null&&mg.push(A-b1),b1=A},clearMetrics(){b1=null,mg=[],performance.clearMeasures(Cv),performance.clearMeasures(_v);for(const c in l.cx)performance.clearMarks(l.cx[c])},getPerformanceMetrics(){performance.measure(Cv,l.cx.create,l.cx.load),performance.measure(_v,l.cx.create,l.cx.fullLoad);const c=performance.getEntriesByName(Cv)[0].duration,A=performance.getEntriesByName(_v)[0].duration,u=mg.length,g=1/(mg.reduce((k,P)=>k+P,0)/u/1e3),x=mg.filter(k=>k>vv).reduce((k,P)=>k+(P-vv)/vv,0);return{loadTime:c,fullLoadTime:A,fps:g,percentDroppedFrames:x/(u+x)*100,totalFrames:u}}};l.$=Je,l.A=oe,l.B=function([c,A,u]){return A+=90,A*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(A)*Math.sin(u),y:c*Math.sin(A)*Math.sin(u),z:c*Math.cos(u)}},l.C=jA,l.D=Ir,l.E=It,l.F=bo,l.G=OA,l.H=function(c){if(ln==null){const A=c.navigator?c.navigator.userAgent:null;ln=!!c.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return ln},l.I=Sm,l.J=class{constructor(c,A){this.target=c,this.mapId=A,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new W3(()=>this.process()),this.subscription=En(this.target,"message",u=>this.receive(u),!1),this.globalScope=Ft(self)?c:window}registerMessageHandler(c,A){this.messageHandlers[c]=A}sendAsync(c,A){return new Promise((u,g)=>{const x=Math.round(1e18*Math.random()).toString(36).substring(0,10),k=A?En(A.signal,"abort",()=>{k?.unsubscribe(),delete this.resolveRejects[x];const q={id:x,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(q)},Q3):null;this.resolveRejects[x]={resolve:q=>{k?.unsubscribe(),u(q)},reject:q=>{k?.unsubscribe(),g(q)}};const P=[],N=Object.assign(Object.assign({},c),{id:x,sourceMapId:this.mapId,origin:location.origin,data:Ml(c.data,P)});this.target.postMessage(N,{transfer:P})})}receive(c){const A=c.data,u=A.id;if(!(A.origin!=="file://"&&location.origin!=="file://"&&A.origin!=="resource://android"&&location.origin!=="resource://android"&&A.origin!==location.origin||A.targetMapId&&this.mapId!==A.targetMapId)){if(A.type==="<cancel>"){delete this.tasks[u];const g=this.abortControllers[u];return delete this.abortControllers[u],void(g&&g.abort())}if(Ft(self)||A.mustQueue)return this.tasks[u]=A,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,A)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),A=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),A&&this.processTask(c,A)}processTask(c,A){return o(this,void 0,void 0,function*(){if(A.type==="<response>"){const x=this.resolveRejects[c];return delete this.resolveRejects[c],x?void(A.error?x.reject(wl(A.error)):x.resolve(wl(A.data))):void 0}if(!this.messageHandlers[A.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${A.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=wl(A.data),g=new AbortController;this.abortControllers[c]=g;try{const x=yield this.messageHandlers[A.type](A.sourceMapId,u,g);this.completeTask(c,null,x)}catch(x){this.completeTask(c,x)}})}completeTask(c,A,u){const g=[];delete this.abortControllers[c];const x={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:A?Ml(A):null,data:Ml(u,g)};this.target.postMessage(x,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.K=Oe,l.L=function(){var c=new oe(16);return oe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},l.M=function(c,A,u){var g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et=u[0],ut=u[1],Mt=u[2];return A===c?(c[12]=A[0]*et+A[4]*ut+A[8]*Mt+A[12],c[13]=A[1]*et+A[5]*ut+A[9]*Mt+A[13],c[14]=A[2]*et+A[6]*ut+A[10]*Mt+A[14],c[15]=A[3]*et+A[7]*ut+A[11]*Mt+A[15]):(x=A[1],k=A[2],P=A[3],N=A[4],q=A[5],ne=A[6],ae=A[7],ye=A[8],Ke=A[9],je=A[10],Ve=A[11],c[0]=g=A[0],c[1]=x,c[2]=k,c[3]=P,c[4]=N,c[5]=q,c[6]=ne,c[7]=ae,c[8]=ye,c[9]=Ke,c[10]=je,c[11]=Ve,c[12]=g*et+N*ut+ye*Mt+A[12],c[13]=x*et+q*ut+Ke*Mt+A[13],c[14]=k*et+ne*ut+je*Mt+A[14],c[15]=P*et+ae*ut+Ve*Mt+A[15]),c},l.N=function(c,A,u){var g=u[0],x=u[1],k=u[2];return c[0]=A[0]*g,c[1]=A[1]*g,c[2]=A[2]*g,c[3]=A[3]*g,c[4]=A[4]*x,c[5]=A[5]*x,c[6]=A[6]*x,c[7]=A[7]*x,c[8]=A[8]*k,c[9]=A[9]*k,c[10]=A[10]*k,c[11]=A[11]*k,c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c},l.O=function(c,A,u){var g=A[0],x=A[1],k=A[2],P=A[3],N=A[4],q=A[5],ne=A[6],ae=A[7],ye=A[8],Ke=A[9],je=A[10],Ve=A[11],et=A[12],ut=A[13],Mt=A[14],Vt=A[15],Pt=u[0],Ut=u[1],an=u[2],vn=u[3];return c[0]=Pt*g+Ut*N+an*ye+vn*et,c[1]=Pt*x+Ut*q+an*Ke+vn*ut,c[2]=Pt*k+Ut*ne+an*je+vn*Mt,c[3]=Pt*P+Ut*ae+an*Ve+vn*Vt,c[4]=(Pt=u[4])*g+(Ut=u[5])*N+(an=u[6])*ye+(vn=u[7])*et,c[5]=Pt*x+Ut*q+an*Ke+vn*ut,c[6]=Pt*k+Ut*ne+an*je+vn*Mt,c[7]=Pt*P+Ut*ae+an*Ve+vn*Vt,c[8]=(Pt=u[8])*g+(Ut=u[9])*N+(an=u[10])*ye+(vn=u[11])*et,c[9]=Pt*x+Ut*q+an*Ke+vn*ut,c[10]=Pt*k+Ut*ne+an*je+vn*Mt,c[11]=Pt*P+Ut*ae+an*Ve+vn*Vt,c[12]=(Pt=u[12])*g+(Ut=u[13])*N+(an=u[14])*ye+(vn=u[15])*et,c[13]=Pt*x+Ut*q+an*Ke+vn*ut,c[14]=Pt*k+Ut*ne+an*je+vn*Mt,c[15]=Pt*P+Ut*ae+an*Ve+vn*Vt,c},l.P=f,l.Q=function(c,A){const u={};for(let g=0;g<A.length;g++){const x=A[g];x in c&&(u[x]=c[x])}return u},l.R=PA,l.S=Bu,l.T=y,l.U=vo,l.V=Hp,l.W=W,l.X=J,l.Y=Un,l.Z=Wh,l._=o,l.a=se,l.a$=xe,l.a0=function(c,A){var u,g,x,k,P;if(!c)return A??{};if(!A)return c;let N=Object.assign({},c);if(A.removeAll&&(N={removeAll:!0}),A.remove){const q=new Set(A.remove);N.add&&(N.add=N.add.filter(ae=>!q.has(ae.id))),N.update&&(N.update=N.update.filter(ae=>!q.has(ae.id)));const ne=new Set(((u=c.add)!==null&&u!==void 0?u:[]).map(ae=>ae.id));A.remove=A.remove.filter(ae=>!ne.has(ae))}if(A.remove){const q=new Set(N.remove?N.remove.concat(A.remove):A.remove);N.remove=Array.from(q.values())}if(A.add){const q=N.add?N.add.concat(A.add):A.add,ne=new Map(q.map(ae=>[ae.id,ae]));N.add=Array.from(ne.values())}if(A.update){const q=new Map((g=N.update)===null||g===void 0?void 0:g.map(ne=>[ne.id,ne]));for(const ne of A.update){const ae=(x=q.get(ne.id))!==null&&x!==void 0?x:{id:ne.id};ne.newGeometry&&(ae.newGeometry=ne.newGeometry),ne.addOrUpdateProperties&&(ae.addOrUpdateProperties=((k=ae.addOrUpdateProperties)!==null&&k!==void 0?k:[]).concat(ne.addOrUpdateProperties)),ne.removeProperties&&(ae.removeProperties=((P=ae.removeProperties)!==null&&P!==void 0?P:[]).concat(ne.removeProperties)),ne.removeAllProperties&&(ae.removeAllProperties=!0),q.set(ne.id,ae)}N.update=Array.from(q.values())}return N.remove&&N.add&&(N.remove=N.remove.filter(q=>N.add.findIndex(ne=>ne.id===q)===-1)),N},l.a1=ug,l.a2=cp,l.a3=25,l.a4=uv,l.a5=c=>{const A=window.document.createElement("video");return A.muted=!0,new Promise(u=>{A.onloadstart=()=>{u(A)};for(const g of c){const x=window.document.createElement("source");De(g)||(A.crossOrigin="Anonymous"),x.src=g,A.appendChild(x)}})},l.a6=bn,l.a7=function(){return Pe++},l.a8=Me,l.a9=ii,l.aA=function(c){let A=1/0,u=1/0,g=-1/0,x=-1/0;for(const k of c)A=Math.min(A,k.x),u=Math.min(u,k.y),g=Math.max(g,k.x),x=Math.max(x,k.y);return[A,u,g,x]},l.aB=Ol,l.aC=ze,l.aD=function(c,A,u,g,x=!1){if(!u[0]&&!u[1])return[0,0];const k=x?g==="map"?-c.bearingInRadians:0:g==="viewport"?c.bearingInRadians:0;if(k){const P=Math.sin(k),N=Math.cos(k);u=[u[0]*N-u[1]*P,u[0]*P+u[1]*N]}return[x?u[0]:ze(A,u[0],c.zoom),x?u[1]:ze(A,u[1],c.zoom)]},l.aF=Jr,l.aG=Mo,l.aH=_,l.aI=mv,l.aJ=Ms,l.aK=Yo,l.aL=St,l.aM=wi,l.aN=Zo,l.aO=Tt,l.aP=Hn,l.aQ=Ql,l.aR=ge,l.aS=me,l.aT=function(c){var A=new oe(3);return A[0]=c[0],A[1]=c[1],A[2]=c[2],A},l.aU=function(c,A,u){return c[0]=A[0]-u[0],c[1]=A[1]-u[1],c[2]=A[2]-u[2],c},l.aV=function(c,A){var u=A[0],g=A[1],x=A[2],k=u*u+g*g+x*x;return k>0&&(k=1/Math.sqrt(k)),c[0]=A[0]*k,c[1]=A[1]*k,c[2]=A[2]*k,c},l.aW=we,l.aX=function(c,A){return c[0]*A[0]+c[1]*A[1]+c[2]*A[2]},l.aY=function(c,A,u){return c[0]=A[0]*u[0],c[1]=A[1]*u[1],c[2]=A[2]*u[2],c[3]=A[3]*u[3],c},l.aZ=j,l.a_=function(c,A,u){const g=A[0]*u[0]+A[1]*u[1]+A[2]*u[2];return g===0?null:(-(c[0]*u[0]+c[1]*u[1]+c[2]*u[2])-u[3])/g},l.aa=gu,l.ab=qu,l.ac=Sf,l.ad=function(c){const A={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,x,k)=>{const P=x||k;return A[g]=!P||P.toLowerCase(),""}),A["max-age"]){const u=parseInt(A["max-age"],10);isNaN(u)?delete A["max-age"]:A["max-age"]=u}return A},l.ae=Mr,l.af=function(c){return Math.pow(2,c)},l.ag=H,l.ah=Bt,l.ai=85.051129,l.aj=$_,l.ak=function(c){return Math.log(c)/Math.LN2},l.al=function(c){var A=c[0],u=c[1];return A*A+u*u},l.am=function(c,A){const u=[];for(const g in c)g in A||u.push(g);return u},l.an=function(c,A){let u=0,g=0;if(c.kind==="constant")g=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:x,minZoom:k,maxZoom:P}=c,N=x?Bt(Vo.interpolationFactor(x,A,k,P),0,1):0;c.kind==="camera"?g=jA.number(c.minSize,c.maxSize,N):u=N}return{uSizeT:u,uSize:g}},l.ap=function(c,{uSize:A,uSizeT:u},{lowerSize:g,upperSize:x}){return c.kind==="source"?g/Xn:c.kind==="composite"?jA.number(g/Xn,x/Xn,u):A},l.aq=function(c,A){var u=A[0],g=A[1],x=A[2],k=A[3],P=A[4],N=A[5],q=A[6],ne=A[7],ae=A[8],ye=A[9],Ke=A[10],je=A[11],Ve=A[12],et=A[13],ut=A[14],Mt=A[15],Vt=u*N-g*P,Pt=u*q-x*P,Ut=u*ne-k*P,an=g*q-x*N,vn=g*ne-k*N,Rn=x*ne-k*q,yr=ae*et-ye*Ve,ur=ae*ut-Ke*Ve,pr=ae*Mt-je*Ve,oi=ye*ut-Ke*et,cr=ye*Mt-je*et,mr=Ke*Mt-je*ut,Bn=Vt*mr-Pt*cr+Ut*oi+an*pr-vn*ur+Rn*yr;return Bn?(c[0]=(N*mr-q*cr+ne*oi)*(Bn=1/Bn),c[1]=(x*cr-g*mr-k*oi)*Bn,c[2]=(et*Rn-ut*vn+Mt*an)*Bn,c[3]=(Ke*vn-ye*Rn-je*an)*Bn,c[4]=(q*pr-P*mr-ne*ur)*Bn,c[5]=(u*mr-x*pr+k*ur)*Bn,c[6]=(ut*Ut-Ve*Rn-Mt*Pt)*Bn,c[7]=(ae*Rn-Ke*Ut+je*Pt)*Bn,c[8]=(P*cr-N*pr+ne*yr)*Bn,c[9]=(g*pr-u*cr-k*yr)*Bn,c[10]=(Ve*vn-et*Ut+Mt*Vt)*Bn,c[11]=(ye*Ut-ae*vn-je*Vt)*Bn,c[12]=(N*ur-P*oi-q*yr)*Bn,c[13]=(u*oi-g*ur+x*yr)*Bn,c[14]=(et*Pt-Ve*an-ut*Vt)*Bn,c[15]=(ae*an-ye*Pt+Ke*Vt)*Bn,c):null},l.ar=Ct,l.as=function(c){var A=c[0],u=c[1];return Math.sqrt(A*A+u*u)},l.at=function(c){return c[0]=0,c[1]=0,c},l.au=function(c,A,u){return c[0]=A[0]*u,c[1]=A[1]*u,c},l.av=An,l.aw=We,l.ax=function(c,A,u,g){const x=A.y-c.y,k=A.x-c.x,P=g.y-u.y,N=g.x-u.x,q=P*k-N*x;if(q===0)return null;const ne=(N*(c.y-u.y)-P*(c.x-u.x))/q;return new f(c.x+ne*k,c.y+ne*x)},l.ay=Tl,l.az=jp,l.b=Vn,l.b$=class extends O{},l.b0=function(c,A,u){return c[0]=A[0]*u,c[1]=A[1]*u,c[2]=A[2]*u,c[3]=A[3]*u,c},l.b1=function(c,A){return c[0]*A[0]+c[1]*A[1]+c[2]*A[2]+c[3]},l.b2=V_,l.b3=h0,l.b4=function(c,A,u,g,x){var k=1/Math.tan(A/2);if(c[0]=k/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,x!=null&&x!==1/0){var P=1/(g-x);c[10]=(x+g)*P,c[14]=2*x*g*P}else c[10]=-1,c[14]=-2*g;return c},l.b5=function(c){var A=new oe(16);return A[0]=c[0],A[1]=c[1],A[2]=c[2],A[3]=c[3],A[4]=c[4],A[5]=c[5],A[6]=c[6],A[7]=c[7],A[8]=c[8],A[9]=c[9],A[10]=c[10],A[11]=c[11],A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15],A},l.b6=function(c,A,u){var g=Math.sin(u),x=Math.cos(u),k=A[0],P=A[1],N=A[2],q=A[3],ne=A[4],ae=A[5],ye=A[6],Ke=A[7];return A!==c&&(c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[0]=k*x+ne*g,c[1]=P*x+ae*g,c[2]=N*x+ye*g,c[3]=q*x+Ke*g,c[4]=ne*x-k*g,c[5]=ae*x-P*g,c[6]=ye*x-N*g,c[7]=Ke*x-q*g,c},l.b7=function(c,A,u){var g=Math.sin(u),x=Math.cos(u),k=A[4],P=A[5],N=A[6],q=A[7],ne=A[8],ae=A[9],ye=A[10],Ke=A[11];return A!==c&&(c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[4]=k*x+ne*g,c[5]=P*x+ae*g,c[6]=N*x+ye*g,c[7]=q*x+Ke*g,c[8]=ne*x-k*g,c[9]=ae*x-P*g,c[10]=ye*x-N*g,c[11]=Ke*x-q*g,c},l.b8=function(){const c=new Float32Array(16);return H(c),c},l.b9=function(){const c=new Float64Array(16);return H(c),c},l.bA=function(c,A){const u=Te(c,360),g=Te(A,360),x=g-u,k=g>u?x-360:x+360;return Math.abs(x)<Math.abs(k)?x:k},l.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},l.bC=function(c,A,u,g){const x=Math.sqrt(c*c+A*A),k=Math.sqrt(u*u+g*g);c/=x,A/=x,u/=k,g/=k;const P=Math.acos(c*u+A*g);return-A*u+c*g>0?P:-P},l.bD=function(c,A){const u=Te(c,2*Math.PI),g=Te(A,2*Math.PI);return Math.min(Math.abs(u-g),Math.abs(u-g+2*Math.PI),Math.abs(u-g-2*Math.PI))},l.bE=function(){const c={},A=nt.$version;for(const u in nt.$root){const g=nt.$root[u];if(g.required){let x=null;x=u==="version"?A:g.type==="array"?[]:{},x!=null&&(c[u]=x)}}return c},l.bF=Ac,l.bG=ct,l.bH=function c(A,u){if(Array.isArray(A)){if(!Array.isArray(u)||A.length!==u.length)return!1;for(let g=0;g<A.length;g++)if(!c(A[g],u[g]))return!1;return!0}if(typeof A=="object"&&A!==null&&u!==null){if(typeof u!="object"||Object.keys(A).length!==Object.keys(u).length)return!1;for(const g in A)if(!c(A[g],u[g]))return!1;return!0}return A===u},l.bI=function(c){c=c.slice();const A=Object.create(null);for(let u=0;u<c.length;u++)A[c[u].id]=c[u];for(let u=0;u<c.length;u++)"ref"in c[u]&&(c[u]=Tn(c[u],A[c[u].ref]));return c},l.bJ=function(c){if(c.type==="custom")return new j3(c);switch(c.type){case"background":return new z3(c);case"circle":return new Cf(c);case"color-relief":return new F(c);case"fill":return new rp(c);case"fill-extrusion":return new rv(c);case"heatmap":return new Pa(c);case"hillshade":return new aA(c);case"line":return new ap(c);case"raster":return new G3(c);case"symbol":return new us(c)}},l.bK=_t,l.bL=function(c,A){if(!c)return[{command:"setStyle",args:[A]}];let u=[];try{if(!xn(c.version,A.version))return[{command:"setStyle",args:[A]}];xn(c.center,A.center)||u.push({command:"setCenter",args:[A.center]}),xn(c.state,A.state)||u.push({command:"setGlobalState",args:[A.state]}),xn(c.centerAltitude,A.centerAltitude)||u.push({command:"setCenterAltitude",args:[A.centerAltitude]}),xn(c.zoom,A.zoom)||u.push({command:"setZoom",args:[A.zoom]}),xn(c.bearing,A.bearing)||u.push({command:"setBearing",args:[A.bearing]}),xn(c.pitch,A.pitch)||u.push({command:"setPitch",args:[A.pitch]}),xn(c.roll,A.roll)||u.push({command:"setRoll",args:[A.roll]}),xn(c.sprite,A.sprite)||u.push({command:"setSprite",args:[A.sprite]}),xn(c.glyphs,A.glyphs)||u.push({command:"setGlyphs",args:[A.glyphs]}),xn(c.transition,A.transition)||u.push({command:"setTransition",args:[A.transition]}),xn(c.light,A.light)||u.push({command:"setLight",args:[A.light]}),xn(c.terrain,A.terrain)||u.push({command:"setTerrain",args:[A.terrain]}),xn(c.sky,A.sky)||u.push({command:"setSky",args:[A.sky]}),xn(c.projection,A.projection)||u.push({command:"setProjection",args:[A.projection]});const g={},x=[];(function(P,N,q,ne){let ae;for(ae in N=N||{},P=P||{})Object.prototype.hasOwnProperty.call(P,ae)&&(Object.prototype.hasOwnProperty.call(N,ae)||Qr(ae,q,ne));for(ae in N)Object.prototype.hasOwnProperty.call(N,ae)&&(Object.prototype.hasOwnProperty.call(P,ae)?xn(P[ae],N[ae])||(P[ae].type==="geojson"&&N[ae].type==="geojson"&&Br(P,N,ae)?er(q,{command:"setGeoJSONSourceData",args:[ae,N[ae].data]}):$r(ae,N,q,ne)):Qn(ae,N,q))})(c.sources,A.sources,x,g);const k=[];c.layers&&c.layers.forEach(P=>{"source"in P&&g[P.source]?u.push({command:"removeLayer",args:[P.id]}):k.push(P)}),u=u.concat(x),function(P,N,q){N=N||[];const ne=(P=P||[]).map(or),ae=N.map(or),ye=P.reduce(ti,{}),Ke=N.reduce(ti,{}),je=ne.slice(),Ve=Object.create(null);let et,ut,Mt,Vt,Pt;for(let Ut=0,an=0;Ut<ne.length;Ut++)et=ne[Ut],Object.prototype.hasOwnProperty.call(Ke,et)?an++:(er(q,{command:"removeLayer",args:[et]}),je.splice(je.indexOf(et,an),1));for(let Ut=0,an=0;Ut<ae.length;Ut++)et=ae[ae.length-1-Ut],je[je.length-1-Ut]!==et&&(Object.prototype.hasOwnProperty.call(ye,et)?(er(q,{command:"removeLayer",args:[et]}),je.splice(je.lastIndexOf(et,je.length-an),1)):an++,Vt=je[je.length-Ut],er(q,{command:"addLayer",args:[Ke[et],Vt]}),je.splice(je.length-Ut,0,et),Ve[et]=!0);for(let Ut=0;Ut<ae.length;Ut++)if(et=ae[Ut],ut=ye[et],Mt=Ke[et],!Ve[et]&&!xn(ut,Mt))if(xn(ut.source,Mt.source)&&xn(ut["source-layer"],Mt["source-layer"])&&xn(ut.type,Mt.type)){for(Pt in br(ut.layout,Mt.layout,q,et,null,"setLayoutProperty"),br(ut.paint,Mt.paint,q,et,null,"setPaintProperty"),xn(ut.filter,Mt.filter)||er(q,{command:"setFilter",args:[et,Mt.filter]}),xn(ut.minzoom,Mt.minzoom)&&xn(ut.maxzoom,Mt.maxzoom)||er(q,{command:"setLayerZoomRange",args:[et,Mt.minzoom,Mt.maxzoom]}),ut)Object.prototype.hasOwnProperty.call(ut,Pt)&&Pt!=="layout"&&Pt!=="paint"&&Pt!=="filter"&&Pt!=="metadata"&&Pt!=="minzoom"&&Pt!=="maxzoom"&&(Pt.indexOf("paint.")===0?br(ut[Pt],Mt[Pt],q,et,Pt.slice(6),"setPaintProperty"):xn(ut[Pt],Mt[Pt])||er(q,{command:"setLayerProperty",args:[et,Pt,Mt[Pt]]}));for(Pt in Mt)Object.prototype.hasOwnProperty.call(Mt,Pt)&&!Object.prototype.hasOwnProperty.call(ut,Pt)&&Pt!=="layout"&&Pt!=="paint"&&Pt!=="filter"&&Pt!=="metadata"&&Pt!=="minzoom"&&Pt!=="maxzoom"&&(Pt.indexOf("paint.")===0?br(ut[Pt],Mt[Pt],q,et,Pt.slice(6),"setPaintProperty"):xn(ut[Pt],Mt[Pt])||er(q,{command:"setLayerProperty",args:[et,Pt,Mt[Pt]]}))}else er(q,{command:"removeLayer",args:[et]}),Vt=je[je.lastIndexOf(et)+1],er(q,{command:"addLayer",args:[Mt,Vt]})}(k,A.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:"setStyle",args:[A]}]}return u},l.bM=function(c){const A=[],u=c.id;return u===void 0&&A.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&A.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&A.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),A},l.bN=ke,l.bO=Qe,l.bP=class extends fl{constructor(c,A){super(c,A),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},l.bQ=ms,l.bR=class extends fl{constructor(c,A){super(c,A),this.current=jl}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let A=1;A<16;A++)if(c[A]!==this.current[A]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},l.bS=zo,l.bT=class extends fl{constructor(c,A){super(c,A),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},l.bU=class extends fl{constructor(c,A){super(c,A),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},l.bV=te,l.bW=function(c,A){var u=Math.sin(A),g=Math.cos(A);return c[0]=g,c[1]=u,c[2]=0,c[3]=-u,c[4]=g,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},l.bX=function(c,A,u){var g=A[0],x=A[1],k=A[2];return c[0]=g*u[0]+x*u[3]+k*u[6],c[1]=g*u[1]+x*u[4]+k*u[7],c[2]=g*u[2]+x*u[5]+k*u[8],c},l.bY=function(c,A,u,g,x,k,P){var N=1/(A-u),q=1/(g-x),ne=1/(k-P);return c[0]=-2*N,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*q,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*ne,c[11]=0,c[12]=(A+u)*N,c[13]=(x+g)*q,c[14]=(P+k)*ne,c[15]=1,c},l.bZ=class extends fl{constructor(c,A){super(c,A),this.current=new Array}set(c){if(c!=this.current){this.current=c;const A=new Float32Array(4*c.length);for(let u=0;u<c.length;u++)A[4*u]=c[u].r,A[4*u+1]=c[u].g,A[4*u+2]=c[u].b,A[4*u+3]=c[u].a;this.gl.uniform4fv(this.location,A)}}},l.b_=class extends fl{constructor(c,A){super(c,A),this.current=new Array}set(c){if(c!=this.current){this.current=c;const A=new Float32Array(c);this.gl.uniform1fv(this.location,A)}}},l.ba=function(){return new Float64Array(16)},l.bb=function(c,A,u){const g=new Float64Array(4);return rt(g,c,A-90,u),g},l.bc=function(c,A,u,g){var x,k,P,N,q,ne=A[0],ae=A[1],ye=A[2],Ke=A[3],je=u[0],Ve=u[1],et=u[2],ut=u[3];return(k=ne*je+ae*Ve+ye*et+Ke*ut)<0&&(k=-k,je=-je,Ve=-Ve,et=-et,ut=-ut),1-k>$?(x=Math.acos(k),P=Math.sin(x),N=Math.sin((1-g)*x)/P,q=Math.sin(g*x)/P):(N=1-g,q=g),c[0]=N*ne+q*je,c[1]=N*ae+q*Ve,c[2]=N*ye+q*et,c[3]=N*Ke+q*ut,c},l.bd=function(c){const A=new Float64Array(9);var u,g,x,k,P,N,q,ne,ae,ye,Ke,je,Ve,et,ut,Mt,Vt,Pt;ye=(x=(g=c)[0])*(q=x+x),Ke=(k=g[1])*q,Ve=(P=g[2])*q,et=P*(ne=k+k),Mt=(N=g[3])*q,Vt=N*ne,Pt=N*(ae=P+P),(u=A)[0]=1-(je=k*ne)-(ut=P*ae),u[3]=Ke-Pt,u[6]=Ve+Vt,u[1]=Ke+Pt,u[4]=1-ye-ut,u[7]=et-Mt,u[2]=Ve-Vt,u[5]=et+Mt,u[8]=1-ye-je;const Ut=Hn(-Math.asin(Bt(A[2],-1,1)));let an,vn;return Math.hypot(A[5],A[8])<.001?(an=0,vn=-Hn(Math.atan2(A[3],A[4]))):(an=Hn(A[5]===0&&A[8]===0?0:Math.atan2(A[5],A[8])),vn=Hn(A[1]===0&&A[0]===0?0:Math.atan2(A[1],A[0]))),{roll:an,pitch:Ut+90,bearing:vn}},l.be=function(c,A){return c.roll==A.roll&&c.pitch==A.pitch&&c.bearing==A.bearing},l.bf=Bi,l.bg=Qu,l.bh=Ss,l.bi=Ks,l.bj=hi,l.bk=He,l.bl=pt,l.bm=Ns,l.bn=function(c,A,u,g,x){return He(g,x,Bt((c-A)/(u-A),0,1))},l.bo=Te,l.bp=function(){return new Float64Array(3)},l.bq=function(c,A,u,g){return c[0]=A[0]+u[0]*g,c[1]=A[1]+u[1]*g,c[2]=A[2]+u[2]*g,c},l.br=rt,l.bs=function(c,A,u){var g=u[0],x=u[1],k=u[2],P=u[3],N=A[0],q=A[1],ne=A[2],ae=x*ne-k*q,ye=k*N-g*ne,Ke=g*q-x*N;return c[0]=N+P*(ae+=ae)+x*(Ke+=Ke)-k*(ye+=ye),c[1]=q+P*ye+k*ae-g*Ke,c[2]=ne+P*Ke+g*ye-x*ae,c},l.bt=function(c,A,u){const g=(x=[c[0],c[1],c[2],A[0],A[1],A[2],u[0],u[1],u[2]])[0]*((ae=x[8])*(P=x[4])-(N=x[5])*(ne=x[7]))+x[1]*(-ae*(k=x[3])+N*(q=x[6]))+x[2]*(ne*k-P*q);var x,k,P,N,q,ne,ae;if(g===0)return null;const ye=we([],[A[0],A[1],A[2]],[u[0],u[1],u[2]]),Ke=we([],[u[0],u[1],u[2]],[c[0],c[1],c[2]]),je=we([],[c[0],c[1],c[2]],[A[0],A[1],A[2]]),Ve=ge([],ye,-c[3]);return me(Ve,Ve,ge([],Ke,-A[3])),me(Ve,Ve,ge([],je,-u[3])),ge(Ve,Ve,1/g),Ve},l.bu=Av,l.bv=function(){return new Float64Array(4)},l.bw=function(c,A,u,g){var x=[],k=[];return x[0]=A[0]-u[0],x[1]=A[1]-u[1],x[2]=A[2]-u[2],k[0]=x[0]*Math.cos(g)-x[1]*Math.sin(g),k[1]=x[0]*Math.sin(g)+x[1]*Math.cos(g),k[2]=x[2],c[0]=k[0]+u[0],c[1]=k[1]+u[1],c[2]=k[2]+u[2],c},l.bx=function(c,A,u,g){var x=[],k=[];return x[0]=A[0]-u[0],x[1]=A[1]-u[1],x[2]=A[2]-u[2],k[0]=x[0],k[1]=x[1]*Math.cos(g)-x[2]*Math.sin(g),k[2]=x[1]*Math.sin(g)+x[2]*Math.cos(g),c[0]=k[0]+u[0],c[1]=k[1]+u[1],c[2]=k[2]+u[2],c},l.by=function(c,A,u,g){var x=[],k=[];return x[0]=A[0]-u[0],x[1]=A[1]-u[1],x[2]=A[2]-u[2],k[0]=x[2]*Math.sin(g)+x[0]*Math.cos(g),k[1]=x[1],k[2]=x[2]*Math.cos(g)-x[0]*Math.sin(g),c[0]=k[0]+u[0],c[1]=k[1]+u[1],c[2]=k[2]+u[2],c},l.bz=function(c,A,u){var g=Math.sin(u),x=Math.cos(u),k=A[0],P=A[1],N=A[2],q=A[3],ne=A[8],ae=A[9],ye=A[10],Ke=A[11];return A!==c&&(c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[0]=k*x-ne*g,c[1]=P*x-ae*g,c[2]=N*x-ye*g,c[3]=q*x-Ke*g,c[8]=k*g+ne*x,c[9]=P*g+ae*x,c[10]=N*g+ye*x,c[11]=q*g+Ke*x,c},l.c=ie,l.c0=d1,l.c1=class extends d{},l.c2=Jf,l.c3=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},l.c4=Ja,l.c5=function(c,A,u){var g=A[0],x=A[1],k=A[2],P=u[3]*g+u[7]*x+u[11]*k+u[15];return c[0]=(u[0]*g+u[4]*x+u[8]*k+u[12])/(P=P||1),c[1]=(u[1]*g+u[5]*x+u[9]*k+u[13])/P,c[2]=(u[2]*g+u[6]*x+u[10]*k+u[14])/P,c},l.c6=class extends Rc{},l.c7=class extends ce{},l.c8=function(c,A){return c[0]===A[0]&&c[1]===A[1]&&c[2]===A[2]&&c[3]===A[3]&&c[4]===A[4]&&c[5]===A[5]&&c[6]===A[6]&&c[7]===A[7]&&c[8]===A[8]&&c[9]===A[9]&&c[10]===A[10]&&c[11]===A[11]&&c[12]===A[12]&&c[13]===A[13]&&c[14]===A[14]&&c[15]===A[15]},l.c9=function(c,A){var u=c[0],g=c[1],x=c[2],k=c[3],P=c[4],N=c[5],q=c[6],ne=c[7],ae=c[8],ye=c[9],Ke=c[10],je=c[11],Ve=c[12],et=c[13],ut=c[14],Mt=c[15],Vt=A[0],Pt=A[1],Ut=A[2],an=A[3],vn=A[4],Rn=A[5],yr=A[6],ur=A[7],pr=A[8],oi=A[9],cr=A[10],mr=A[11],Bn=A[12],Ti=A[13],Fi=A[14],pi=A[15];return Math.abs(u-Vt)<=$*Math.max(1,Math.abs(u),Math.abs(Vt))&&Math.abs(g-Pt)<=$*Math.max(1,Math.abs(g),Math.abs(Pt))&&Math.abs(x-Ut)<=$*Math.max(1,Math.abs(x),Math.abs(Ut))&&Math.abs(k-an)<=$*Math.max(1,Math.abs(k),Math.abs(an))&&Math.abs(P-vn)<=$*Math.max(1,Math.abs(P),Math.abs(vn))&&Math.abs(N-Rn)<=$*Math.max(1,Math.abs(N),Math.abs(Rn))&&Math.abs(q-yr)<=$*Math.max(1,Math.abs(q),Math.abs(yr))&&Math.abs(ne-ur)<=$*Math.max(1,Math.abs(ne),Math.abs(ur))&&Math.abs(ae-pr)<=$*Math.max(1,Math.abs(ae),Math.abs(pr))&&Math.abs(ye-oi)<=$*Math.max(1,Math.abs(ye),Math.abs(oi))&&Math.abs(Ke-cr)<=$*Math.max(1,Math.abs(Ke),Math.abs(cr))&&Math.abs(je-mr)<=$*Math.max(1,Math.abs(je),Math.abs(mr))&&Math.abs(Ve-Bn)<=$*Math.max(1,Math.abs(Ve),Math.abs(Bn))&&Math.abs(et-Ti)<=$*Math.max(1,Math.abs(et),Math.abs(Ti))&&Math.abs(ut-Fi)<=$*Math.max(1,Math.abs(ut),Math.abs(Fi))&&Math.abs(Mt-pi)<=$*Math.max(1,Math.abs(Mt),Math.abs(pi))},l.cA=function(c,A){se.REGISTERED_PROTOCOLS[c]=A},l.cB=function(c){delete se.REGISTERED_PROTOCOLS[c]},l.cC=function(c,A){const u={};for(let x=0;x<c.length;x++){const k=A&&A[c[x].id]||Dh(c[x]);A&&(A[c[x].id]=k);let P=u[k];P||(P=u[k]=[]),P.push(c[x])}const g=[];for(const x in u)g.push(u[x]);return g},l.cD=Ar,l.cE=H_,l.cF=cv,l.cG=g1,l.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Je/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const A=c.bucket.layers[0],u=A.layout,g=A._unevaluatedLayout._values,x={layoutIconSize:g["icon-size"].possiblyEvaluate(new bo(c.bucket.zoom+1),c.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new bo(c.bucket.zoom+1),c.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new bo(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ae}=c.bucket.textSizeData;x.compositeTextSizes=[g["text-size"].possiblyEvaluate(new bo(ne),c.canonical),g["text-size"].possiblyEvaluate(new bo(ae),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ae}=c.bucket.iconSizeData;x.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new bo(ne),c.canonical),g["icon-size"].possiblyEvaluate(new bo(ae),c.canonical)]}const k=u.get("text-line-height")*Ol,P=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",N=u.get("text-keep-upright"),q=u.get("text-size");for(const ne of c.bucket.features){const ae=u.get("text-font").evaluate(ne,{},c.canonical).join(","),ye=q.evaluate(ne,{},c.canonical),Ke=x.layoutTextSize.evaluate(ne,{},c.canonical),je=x.layoutIconSize.evaluate(ne,{},c.canonical),Ve={horizontal:{},vertical:void 0},et=ne.text;let ut,Mt=[0,0];if(et){const Ut=et.toString(),an=u.get("text-letter-spacing").evaluate(ne,{},c.canonical)*Ol,vn=Ah(Ut)?an:0,Rn=u.get("text-anchor").evaluate(ne,{},c.canonical),yr=Ef(A,ne,c.canonical);if(!yr){const cr=u.get("text-radial-offset").evaluate(ne,{},c.canonical);Mt=cr?fv(Rn,[cr*Ol,dv]):u.get("text-offset").evaluate(ne,{},c.canonical).map(mr=>mr*Ol)}let ur=P?"center":u.get("text-justify").evaluate(ne,{},c.canonical);const pr=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(ne,{},c.canonical)*Ol:1/0,oi=()=>{c.bucket.allowVerticalPlacement&&vu(Ut)&&(Ve.vertical=Vp(et,c.glyphMap,c.glyphPositions,c.imagePositions,ae,pr,k,Rn,"left",vn,Mt,l.ao.vertical,!0,Ke,ye))};if(!P&&yr){const cr=new Set;if(ur==="auto")for(let Bn=0;Bn<yr.values.length;Bn+=2)cr.add(Mo(yr.values[Bn]));else cr.add(ur);let mr=!1;for(const Bn of cr)if(!Ve.horizontal[Bn])if(mr)Ve.horizontal[Bn]=Ve.horizontal[0];else{const Ti=Vp(et,c.glyphMap,c.glyphPositions,c.imagePositions,ae,pr,k,"center",Bn,vn,Mt,l.ao.horizontal,!1,Ke,ye);Ti&&(Ve.horizontal[Bn]=Ti,mr=Ti.positionedLines.length===1)}oi()}else{ur==="auto"&&(ur=Mo(Rn));const cr=Vp(et,c.glyphMap,c.glyphPositions,c.imagePositions,ae,pr,k,Rn,ur,vn,Mt,l.ao.horizontal,!1,Ke,ye);cr&&(Ve.horizontal[ur]=cr),oi(),vu(Ut)&&P&&N&&(Ve.vertical=Vp(et,c.glyphMap,c.glyphPositions,c.imagePositions,ae,pr,k,Rn,ur,vn,Mt,l.ao.vertical,!1,Ke,ye))}}let Vt=!1;if(ne.icon&&ne.icon.name){const Ut=c.imageMap[ne.icon.name];Ut&&(ut=Wt(c.imagePositions[ne.icon.name],u.get("icon-offset").evaluate(ne,{},c.canonical),u.get("icon-anchor").evaluate(ne,{},c.canonical)),Vt=!!Ut.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Vt:c.bucket.sdfIcons!==Vt&&wt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ut.pixelRatio!==c.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Pt=pv(Ve.horizontal)||Ve.vertical;c.bucket.iconsInText=!!Pt&&Pt.iconsInText,(Pt||ut)&&nb(c.bucket,ne,Ve,ut,c.imageMap,x,Ke,je,Mt,Vt,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},l.cI=bm,l.cJ=pc,l.cK=md,l.cL=r0,l.cM=qp,l.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},l.cO=function(c,A,u,g,x){return o(this,void 0,void 0,function*(){if(J())try{return yield Un(c,A,u,g,x)}catch{}return function(k,P,N,q,ne){const ae=k.width,ye=k.height;wn&&Mn||(wn=new OffscreenCanvas(ae,ye),Mn=wn.getContext("2d",{willReadFrequently:!0})),wn.width=ae,wn.height=ye,Mn.drawImage(k,0,0,ae,ye);const Ke=Mn.getImageData(P,N,q,ne);return Mn.clearRect(0,0,ae,ye),Ke.data}(c,A,u,g,x)})},l.cP=E,l.cQ=C,l.cR=Eu,l.cS=Lc,l.cT=rh,l.cU=function(c,A){const u=new Map;if(c!=null)if(c.type==="Feature")u.set(cg(c,A),c);else for(const g of c.features)u.set(cg(g,A),g);return u},l.cV=function(c,A){if(c==null)return!0;if(c.type==="Feature")return cg(c,A)!=null;if(c.type==="FeatureCollection"){const u=new Set;for(const g of c.features){const x=cg(g,A);if(x==null||u.has(x))return!1;u.add(x)}return!0}return!1},l.cW=function(c,A,u){var g,x,k,P;if(A.removeAll&&c.clear(),A.remove)for(const N of A.remove)c.delete(N);if(A.add)for(const N of A.add){const q=cg(N,u);q!=null&&c.set(q,N)}if(A.update)for(const N of A.update){let q=c.get(N.id);if(q==null)continue;const ne=!N.removeAllProperties&&(((g=N.removeProperties)===null||g===void 0?void 0:g.length)>0||((x=N.addOrUpdateProperties)===null||x===void 0?void 0:x.length)>0);if((N.newGeometry||N.removeAllProperties||ne)&&(q=Object.assign({},q),c.set(N.id,q),ne&&(q.properties=Object.assign({},q.properties))),N.newGeometry&&(q.geometry=N.newGeometry),N.removeAllProperties)q.properties={};else if(((k=N.removeProperties)===null||k===void 0?void 0:k.length)>0)for(const ae of N.removeProperties)Object.prototype.hasOwnProperty.call(q.properties,ae)&&delete q.properties[ae];if(((P=N.addOrUpdateProperties)===null||P===void 0?void 0:P.length)>0)for(const{key:ae,value:ye}of N.addOrUpdateProperties)q.properties[ae]=ye}},l.cX=ZA,l.ca=function(c,A){return c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c},l.cb=c=>c.type==="symbol",l.cc=c=>c.type==="circle",l.cd=c=>c.type==="heatmap",l.ce=c=>c.type==="line",l.cf=c=>c.type==="fill",l.cg=c=>c.type==="fill-extrusion",l.ch=c=>c.type==="hillshade",l.ci=c=>c.type==="color-relief",l.cj=c=>c.type==="raster",l.ck=c=>c.type==="background",l.cl=c=>c.type==="custom",l.cm=kt,l.cn=function(c,A,u){const g=at(A.x-u.x,A.y-u.y),x=at(c.x-u.x,c.y-u.y);var k,P;return Hn(Math.atan2(g[0]*x[1]-g[1]*x[0],(k=g)[0]*(P=x)[0]+k[1]*P[1]))},l.co=ft,l.cp=function(c,A){return Ne[A]&&(c instanceof MouseEvent||c instanceof WheelEvent)},l.cq=function(c,A){return Pn[A]&&"touches"in c},l.cr=function(c){return Pn[c]||Ne[c]},l.cs=function(c,A,u){var g=A[0],x=A[1];return c[0]=u[0]*g+u[4]*x+u[12],c[1]=u[1]*g+u[5]*x+u[13],c},l.ct=function(c,A){const{x:u,y:g}=ug.fromLngLat(A);return!(c<0||c>25||g<0||g>=1||u<0||u>=1)},l.cu=function(c,A){return c[0]=A[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=A[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=A[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},l.cv=class extends cc{},l.cw=Z3,l.cy=function(c){return c.message===he},l.cz=Ge,l.d=De,l.e=Le,l.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const A=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(A)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=fe,l.h=c=>new Promise((A,u)=>{const g=new Image;g.onload=()=>{A(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame(()=>{g.src=jt})},g.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(c)],{type:"image/png"});g.src=c.byteLength?URL.createObjectURL(x):jt}),l.i=Ft,l.j=(c,A)=>$e(Le(c,{type:"json"}),A),l.k=At,l.l=mt,l.m=$e,l.n=(c,A)=>$e(Le(c,{type:"arrayBuffer"}),A),l.o=function(c){return new qp(c).readFields(m1,[])},l.p=Ag,l.q=pl,l.r=Uo,l.s=En,l.t=hd,l.u=eo,l.v=nt,l.w=wt,l.x=cd,l.y=Gu,l.z=Tc}),i("worker",["./shared"],function(l){class o{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,fe){for(const Ge of se){this._layerConfigs[Ge.id]=Ge;const ct=this._layers[Ge.id]=l.bJ(Ge);ct._featureFilter=l.aa(ct.filter),this.keyCache[Ge.id]&&delete this.keyCache[Ge.id]}for(const Ge of fe)delete this.keyCache[Ge],delete this._layerConfigs[Ge],delete this._layers[Ge];this.familiesBySource={};const Oe=l.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ge of Oe){const ct=Ge.map(At=>this._layers[At.id]),$e=ct[0];if($e.visibility==="none")continue;const De=$e.source||"";let Ze=this.familiesBySource[De];Ze||(Ze=this.familiesBySource[De]={});const m=$e.sourceLayer||"_geojsonTileLayer";let mt=Ze[m];mt||(mt=Ze[m]=[]),mt.push(ct)}}}class f{constructor(se){const fe={},Oe=[];for(const De in se){const Ze=se[De],m=fe[De]={};for(const mt in Ze){const At=Ze[+mt];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const It={x:0,y:0,w:At.bitmap.width+2,h:At.bitmap.height+2};Oe.push(It),m[mt]={rect:It,metrics:At.metrics}}}const{w:Ge,h:ct}=l.p(Oe),$e=new l.q({width:Ge||1,height:ct||1});for(const De in se){const Ze=se[De];for(const m in Ze){const mt=Ze[+m];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const At=fe[De][m].rect;l.q.copy(mt.bitmap,$e,{x:0,y:0},{x:At.x+1,y:At.y+1},mt.bitmap)}}this.image=$e,this.positions=fe}}l.cD("GlyphAtlas",f);class C{constructor(se){this.tileID=new l.Z(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[],this.globalState=se.globalState}parse(se,fe,Oe,Ge,ct){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new l.a8;const $e=new l.cE(Object.keys(se.layers).sort()),De=new l.cF(this.tileID,this.promoteId);De.bucketLayerIDs=[];const Ze={},m={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Oe,subdivisionGranularity:ct},mt=fe.familiesBySource[this.source];for(const br in mt){const or=se.layers[br];if(!or)continue;or.version===1&&l.w(`Vector tile source "${this.source}" layer "${br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ti=$e.encode(br),bn=[];for(let Vi=0;Vi<or.length;Vi++){const zr=or.feature(Vi),$o=De.getId(zr,br);bn.push({feature:zr,id:$o,index:Vi,sourceLayerIndex:ti})}for(const Vi of mt[br]){const zr=Vi[0];zr.source!==this.source&&l.w(`layer.source = ${zr.source} does not equal this.source = ${this.source}`),zr.minzoom&&this.zoom<Math.floor(zr.minzoom)||zr.maxzoom&&this.zoom>=zr.maxzoom||zr.visibility!=="none"&&(M(Vi,this.zoom,Oe,this.globalState),(Ze[zr.id]=zr.createBucket({index:De.bucketLayerIDs.length,layers:Vi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ti,sourceID:this.source,globalState:this.globalState})).populate(bn,m,this.tileID.canonical),De.bucketLayerIDs.push(Vi.map($o=>$o.id)))}}const At=l.bN(m.glyphDependencies,br=>Object.keys(br).map(Number));this.inFlightDependencies.forEach(br=>br?.abort()),this.inFlightDependencies=[];let It=Promise.resolve({});if(Object.keys(At).length){const br=new AbortController;this.inFlightDependencies.push(br),It=Ge.sendAsync({type:"GG",data:{stacks:At,source:this.source,tileID:this.tileID,type:"glyphs"}},br)}const nt=Object.keys(m.iconDependencies);let en=Promise.resolve({});if(nt.length){const br=new AbortController;this.inFlightDependencies.push(br),en=Ge.sendAsync({type:"GI",data:{icons:nt,source:this.source,tileID:this.tileID,type:"icons"}},br)}const Tn=Object.keys(m.patternDependencies);let xn=Promise.resolve({});if(Tn.length){const br=new AbortController;this.inFlightDependencies.push(br),xn=Ge.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"patterns"}},br)}const[er,Qn,Qr]=yield Promise.all([It,en,xn]),$r=new f(er),Br=new l.cG(Qn,Qr);for(const br in Ze){const or=Ze[br];or instanceof l.a9?(M(or.layers,this.zoom,Oe,this.globalState),l.cH({bucket:or,glyphMap:er,glyphPositions:$r.positions,imageMap:Qn,imagePositions:Br.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:m.subdivisionGranularity})):or.hasPattern&&(or instanceof l.cI||or instanceof l.cJ||or instanceof l.cK)&&(M(or.layers,this.zoom,Oe,this.globalState),or.addFeatures(m,this.tileID.canonical,Br.patternPositions))}return this.status="done",{buckets:Object.values(Ze).filter(br=>!br.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$r.image,imageAtlas:Br,glyphMap:this.returnDependencies?er:null,iconMap:this.returnDependencies?Qn:null,glyphPositions:this.returnDependencies?$r.positions:null}})}}function M(ie,se,fe,Oe){const Ge=new l.F(se);for(const ct of ie)ct.setGlobalState(Oe),ct.recalculate(Ge,fe)}class B{constructor(se,fe,Oe){this.actor=se,this.layerIndex=fe,this.availableImages=Oe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,fe){return l._(this,void 0,void 0,function*(){const Oe=yield l.n(se.request,fe);try{return{vectorTile:new l.cL(new l.cM(Oe.data)),rawData:Oe.data,cacheControl:Oe.cacheControl,expires:Oe.expires}}catch(Ge){const ct=new Uint8Array(Oe.data);let $e=`Unable to parse the tile at ${se.request.url}, `;throw $e+=ct[0]===31&&ct[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ge.message}`,new Error($e)}})}loadTile(se){return l._(this,void 0,void 0,function*(){const fe=se.uid,Oe=!!(se&&se.request&&se.request.collectResourceTiming)&&new l.cN(se.request),Ge=new C(se);this.loading[fe]=Ge;const ct=new AbortController;Ge.abort=ct;try{const $e=yield this.loadVectorTile(se,ct);if(delete this.loading[fe],!$e)return null;const De=$e.rawData,Ze={};$e.expires&&(Ze.expires=$e.expires),$e.cacheControl&&(Ze.cacheControl=$e.cacheControl);const m={};if(Oe){const At=Oe.finish();At&&(m.resourceTiming=JSON.parse(JSON.stringify(At)))}Ge.vectorTile=$e.vectorTile;const mt=Ge.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[fe]=Ge,this.fetching[fe]={rawTileData:De,cacheControl:Ze,resourceTiming:m};try{const At=yield mt;return l.e({rawTileData:De.slice(0)},At,Ze,m)}finally{delete this.fetching[fe]}}catch($e){throw delete this.loading[fe],Ge.status="done",this.loaded[fe]=Ge,$e}})}reloadTile(se){return l._(this,void 0,void 0,function*(){const fe=se.uid;if(!this.loaded||!this.loaded[fe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Oe=this.loaded[fe];if(Oe.showCollisionBoxes=se.showCollisionBoxes,Oe.globalState=se.globalState,Oe.status==="parsing"){const Ge=yield Oe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let ct;if(this.fetching[fe]){const{rawTileData:$e,cacheControl:De,resourceTiming:Ze}=this.fetching[fe];delete this.fetching[fe],ct=l.e({rawTileData:$e.slice(0)},Ge,De,Ze)}else ct=Ge;return ct}if(Oe.status==="done"&&Oe.vectorTile)return Oe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return l._(this,void 0,void 0,function*(){const fe=this.loading,Oe=se.uid;fe&&fe[Oe]&&fe[Oe].abort&&(fe[Oe].abort.abort(),delete fe[Oe])})}removeTile(se){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class D{constructor(){this.loaded={}}loadTile(se){return l._(this,void 0,void 0,function*(){const{uid:fe,encoding:Oe,rawImageData:Ge,redFactor:ct,greenFactor:$e,blueFactor:De,baseShift:Ze}=se,m=Ge.width+2,mt=Ge.height+2,At=l.b(Ge)?new l.R({width:m,height:mt},yield l.cO(Ge,-1,-1,m,mt)):Ge,It=new l.cP(fe,At,Oe,ct,$e,De,Ze);return this.loaded=this.loaded||{},this.loaded[fe]=It,It})}removeTile(se){const fe=this.loaded,Oe=se.uid;fe&&fe[Oe]&&delete fe[Oe]}}var R,U,G=function(){if(U)return R;function ie(fe,Oe){if(fe.length!==0){se(fe[0],Oe);for(var Ge=1;Ge<fe.length;Ge++)se(fe[Ge],!Oe)}}function se(fe,Oe){for(var Ge=0,ct=0,$e=0,De=fe.length,Ze=De-1;$e<De;Ze=$e++){var m=(fe[$e][0]-fe[Ze][0])*(fe[Ze][1]+fe[$e][1]),mt=Ge+m;ct+=Math.abs(Ge)>=Math.abs(m)?Ge-mt+m:m-mt+Ge,Ge=mt}Ge+ct>=0!=!!Oe&&fe.reverse()}return U=1,R=function fe(Oe,Ge){var ct,$e=Oe&&Oe.type;if($e==="FeatureCollection")for(ct=0;ct<Oe.features.length;ct++)fe(Oe.features[ct],Ge);else if($e==="GeometryCollection")for(ct=0;ct<Oe.geometries.length;ct++)fe(Oe.geometries[ct],Ge);else if($e==="Feature")fe(Oe.geometry,Ge);else if($e==="Polygon")ie(Oe.coordinates,Ge);else if($e==="MultiPolygon")for(ct=0;ct<Oe.coordinates.length;ct++)ie(Oe.coordinates[ct],Ge);return Oe}}(),W=l.cQ(G);class J extends l.cS{constructor(se,fe){super(new l.cM,0,fe,[],[]),this.feature=se,this.type=se.type,this.properties=se.tags?se.tags:{},"id"in se&&(typeof se.id=="string"?this.id=parseInt(se.id,10):typeof se.id!="number"||isNaN(se.id)||(this.id=se.id))}loadGeometry(){const se=[],fe=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Oe of fe){const Ge=[];for(const ct of Oe)Ge.push(new l.P(ct[0],ct[1]));se.push(Ge)}return se}}class $ extends l.cR{constructor(se,fe){super(new l.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=fe?fe.version:1,this.extent=fe?fe.extent:4096,this.length=se.length,this.features=se}feature(se){return new J(this.features[se],this.extent)}}function oe(ie,se){se.writeVarintField(15,ie.version||1),se.writeStringField(1,ie.name||""),se.writeVarintField(5,ie.extent||4096);const fe={keys:[],values:[],keycache:{},valuecache:{}};for(let ct=0;ct<ie.length;ct++)fe.feature=ie.feature(ct),se.writeMessage(2,te,fe);const Oe=fe.keys;for(const ct of Oe)se.writeStringField(3,ct);const Ge=fe.values;for(const ct of Ge)se.writeMessage(4,me,ct)}function te(ie,se){if(!ie.feature)return;const fe=ie.feature;fe.id!==void 0&&se.writeVarintField(1,fe.id),se.writeMessage(2,H,ie),se.writeVarintField(3,fe.type),se.writeMessage(4,ue,fe)}function H(ie,se){for(const fe in ie.feature?.properties){let Oe=ie.feature.properties[fe],Ge=ie.keycache[fe];if(Oe===null)continue;Ge===void 0&&(ie.keys.push(fe),Ge=ie.keys.length-1,ie.keycache[fe]=Ge),se.writeVarint(Ge),typeof Oe!="string"&&typeof Oe!="boolean"&&typeof Oe!="number"&&(Oe=JSON.stringify(Oe));const ct=typeof Oe+":"+Oe;let $e=ie.valuecache[ct];$e===void 0&&(ie.values.push(Oe),$e=ie.values.length-1,ie.valuecache[ct]=$e),se.writeVarint($e)}}function re(ie,se){return(se<<3)+(7&ie)}function j(ie){return ie<<1^ie>>31}function ue(ie,se){const fe=ie.loadGeometry(),Oe=ie.type;let Ge=0,ct=0;for(const $e of fe){let De=1;Oe===1&&(De=$e.length),se.writeVarint(re(1,De));const Ze=Oe===3?$e.length-1:$e.length;for(let m=0;m<Ze;m++){m===1&&Oe!==1&&se.writeVarint(re(2,Ze-1));const mt=$e[m].x-Ge,At=$e[m].y-ct;se.writeVarint(j(mt)),se.writeVarint(j(At)),Ge+=mt,ct+=At}ie.type===3&&se.writeVarint(re(7,1))}}function me(ie,se){const fe=typeof ie;fe==="string"?se.writeStringField(1,ie):fe==="boolean"?se.writeBooleanField(7,ie):fe==="number"&&(ie%1!=0?se.writeDoubleField(3,ie):ie<0?se.writeSVarintField(6,ie):se.writeVarintField(5,ie))}const ge={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},we=Math.fround||(Ee=new Float32Array(1),ie=>(Ee[0]=+ie,Ee[0]));var Ee;class xe{constructor(se){this.options=Object.assign(Object.create(ge),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:fe,minZoom:Oe,maxZoom:Ge}=this.options;fe&&console.time("total time");const ct=`prepare ${se.length} points`;fe&&console.time(ct),this.points=se;const $e=[];for(let Ze=0;Ze<se.length;Ze++){const m=se[Ze];if(!m.geometry)continue;const[mt,At]=m.geometry.coordinates,It=we(rt(mt)),nt=we(Ct(At));$e.push(It,nt,1/0,Ze,-1,1),this.options.reduce&&$e.push(0)}let De=this.trees[Ge+1]=this._createTree($e);fe&&console.timeEnd(ct);for(let Ze=Ge;Ze>=Oe;Ze--){const m=+Date.now();De=this.trees[Ze]=this._createTree(this._cluster(De,Ze)),fe&&console.log("z%d: %d clusters in %dms",Ze,De.numItems,+Date.now()-m)}return fe&&console.timeEnd("total time"),this}getClusters(se,fe){let Oe=((se[0]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,se[1]));let ct=se[2]===180?180:((se[2]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)Oe=-180,ct=180;else if(Oe>ct){const At=this.getClusters([Oe,Ge,180,$e],fe),It=this.getClusters([-180,Ge,ct,$e],fe);return At.concat(It)}const De=this.trees[this._limitZoom(fe)],Ze=De.range(rt(Oe),Ct($e),rt(ct),Ct(Ge)),m=De.data,mt=[];for(const At of Ze){const It=this.stride*At;mt.push(m[It+5]>1?We(m,It,this.clusterProps):this.points[m[It+3]])}return mt}getChildren(se){const fe=this._getOriginId(se),Oe=this._getOriginZoom(se),Ge="No cluster with the specified id.",ct=this.trees[Oe];if(!ct)throw new Error(Ge);const $e=ct.data;if(fe*this.stride>=$e.length)throw new Error(Ge);const De=this.options.radius/(this.options.extent*Math.pow(2,Oe-1)),Ze=ct.within($e[fe*this.stride],$e[fe*this.stride+1],De),m=[];for(const mt of Ze){const At=mt*this.stride;$e[At+4]===se&&m.push($e[At+5]>1?We($e,At,this.clusterProps):this.points[$e[At+3]])}if(m.length===0)throw new Error(Ge);return m}getLeaves(se,fe,Oe){const Ge=[];return this._appendLeaves(Ge,se,fe=fe||10,Oe=Oe||0,0),Ge}getTile(se,fe,Oe){const Ge=this.trees[this._limitZoom(se)],ct=Math.pow(2,se),{extent:$e,radius:De}=this.options,Ze=De/$e,m=(Oe-Ze)/ct,mt=(Oe+1+Ze)/ct,At={features:[]};return this._addTileFeatures(Ge.range((fe-Ze)/ct,m,(fe+1+Ze)/ct,mt),Ge.data,fe,Oe,ct,At),fe===0&&this._addTileFeatures(Ge.range(1-Ze/ct,m,1,mt),Ge.data,ct,Oe,ct,At),fe===ct-1&&this._addTileFeatures(Ge.range(0,m,Ze/ct,mt),Ge.data,-1,Oe,ct,At),At.features.length?At:null}getClusterExpansionZoom(se){let fe=this._getOriginZoom(se)-1;for(;fe<=this.options.maxZoom;){const Oe=this.getChildren(se);if(fe++,Oe.length!==1)break;se=Oe[0].properties.cluster_id}return fe}_appendLeaves(se,fe,Oe,Ge,ct){const $e=this.getChildren(fe);for(const De of $e){const Ze=De.properties;if(Ze&&Ze.cluster?ct+Ze.point_count<=Ge?ct+=Ze.point_count:ct=this._appendLeaves(se,Ze.cluster_id,Oe,Ge,ct):ct<Ge?ct++:se.push(De),se.length===Oe)break}return ct}_createTree(se){const fe=new l.aI(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Oe=0;Oe<se.length;Oe+=this.stride)fe.add(se[Oe],se[Oe+1]);return fe.finish(),fe.data=se,fe}_addTileFeatures(se,fe,Oe,Ge,ct,$e){for(const De of se){const Ze=De*this.stride,m=fe[Ze+5]>1;let mt,At,It;if(m)mt=be(fe,Ze,this.clusterProps),At=fe[Ze],It=fe[Ze+1];else{const Tn=this.points[fe[Ze+3]];mt=Tn.properties;const[xn,er]=Tn.geometry.coordinates;At=rt(xn),It=Ct(er)}const nt={type:1,geometry:[[Math.round(this.options.extent*(At*ct-Oe)),Math.round(this.options.extent*(It*ct-Ge))]],tags:mt};let en;en=m||this.options.generateId?fe[Ze+3]:this.points[fe[Ze+3]].id,en!==void 0&&(nt.id=en),$e.features.push(nt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,fe){const{radius:Oe,extent:Ge,reduce:ct,minPoints:$e}=this.options,De=Oe/(Ge*Math.pow(2,fe)),Ze=se.data,m=[],mt=this.stride;for(let At=0;At<Ze.length;At+=mt){if(Ze[At+2]<=fe)continue;Ze[At+2]=fe;const It=Ze[At],nt=Ze[At+1],en=se.within(Ze[At],Ze[At+1],De),Tn=Ze[At+5];let xn=Tn;for(const er of en){const Qn=er*mt;Ze[Qn+2]>fe&&(xn+=Ze[Qn+5])}if(xn>Tn&&xn>=$e){let er,Qn=It*Tn,Qr=nt*Tn,$r=-1;const Br=(At/mt<<5)+(fe+1)+this.points.length;for(const br of en){const or=br*mt;if(Ze[or+2]<=fe)continue;Ze[or+2]=fe;const ti=Ze[or+5];Qn+=Ze[or]*ti,Qr+=Ze[or+1]*ti,Ze[or+4]=Br,ct&&(er||(er=this._map(Ze,At,!0),$r=this.clusterProps.length,this.clusterProps.push(er)),ct(er,this._map(Ze,or)))}Ze[At+4]=Br,m.push(Qn/xn,Qr/xn,1/0,Br,-1,xn),ct&&m.push($r)}else{for(let er=0;er<mt;er++)m.push(Ze[At+er]);if(xn>1)for(const er of en){const Qn=er*mt;if(!(Ze[Qn+2]<=fe)){Ze[Qn+2]=fe;for(let Qr=0;Qr<mt;Qr++)m.push(Ze[Qn+Qr])}}}}return m}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,fe,Oe){if(se[fe+5]>1){const $e=this.clusterProps[se[fe+6]];return Oe?Object.assign({},$e):$e}const Ge=this.points[se[fe+3]].properties,ct=this.options.map(Ge);return Oe&&ct===Ge?Object.assign({},ct):ct}}function We(ie,se,fe){return{type:"Feature",id:ie[se+3],properties:be(ie,se,fe),geometry:{type:"Point",coordinates:[(Oe=ie[se],360*(Oe-.5)),at(ie[se+1])]}};var Oe}function be(ie,se,fe){const Oe=ie[se+5],Ge=Oe>=1e4?`${Math.round(Oe/1e3)}k`:Oe>=1e3?Math.round(Oe/100)/10+"k":Oe,ct=ie[se+6],$e=ct===-1?{}:Object.assign({},fe[ct]);return Object.assign($e,{cluster:!0,cluster_id:ie[se+3],point_count:Oe,point_count_abbreviated:Ge})}function rt(ie){return ie/360+.5}function Ct(ie){const se=Math.sin(ie*Math.PI/180),fe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return fe<0?0:fe>1?1:fe}function at(ie){const se=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function Je(ie,se,fe,Oe){let Ge=Oe;const ct=se+(fe-se>>1);let $e,De=fe-se;const Ze=ie[se],m=ie[se+1],mt=ie[fe],At=ie[fe+1];for(let It=se+3;It<fe;It+=3){const nt=ze(ie[It],ie[It+1],Ze,m,mt,At);if(nt>Ge)$e=It,Ge=nt;else if(nt===Ge){const en=Math.abs(It-ct);en<De&&($e=It,De=en)}}Ge>Oe&&($e-se>3&&Je(ie,se,$e,Oe),ie[$e+2]=Ge,fe-$e>3&&Je(ie,$e,fe,Oe))}function ze(ie,se,fe,Oe,Ge,ct){let $e=Ge-fe,De=ct-Oe;if($e!==0||De!==0){const Ze=((ie-fe)*$e+(se-Oe)*De)/($e*$e+De*De);Ze>1?(fe=Ge,Oe=ct):Ze>0&&(fe+=$e*Ze,Oe+=De*Ze)}return $e=ie-fe,De=se-Oe,$e*$e+De*De}function Te(ie,se,fe,Oe){const Ge={id:ie??null,type:se,geometry:fe,tags:Oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")He(Ge,fe);else if(se==="Polygon")He(Ge,fe[0]);else if(se==="MultiLineString")for(const ct of fe)He(Ge,ct);else if(se==="MultiPolygon")for(const ct of fe)He(Ge,ct[0]);return Ge}function He(ie,se){for(let fe=0;fe<se.length;fe+=3)ie.minX=Math.min(ie.minX,se[fe]),ie.minY=Math.min(ie.minY,se[fe+1]),ie.maxX=Math.max(ie.maxX,se[fe]),ie.maxY=Math.max(ie.maxY,se[fe+1])}function pt(ie,se,fe,Oe){if(!se.geometry)return;const Ge=se.geometry.coordinates;if(Ge&&Ge.length===0)return;const ct=se.geometry.type,$e=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2);let De=[],Ze=se.id;if(fe.promoteId?Ze=se.properties[fe.promoteId]:fe.generateId&&(Ze=Oe||0),ct==="Point")kt(Ge,De);else if(ct==="MultiPoint")for(const m of Ge)kt(m,De);else if(ct==="LineString")ft(Ge,De,$e,!1);else if(ct==="MultiLineString"){if(fe.lineMetrics){for(const m of Ge)De=[],ft(m,De,$e,!1),ie.push(Te(Ze,"LineString",De,se.properties));return}Bt(Ge,De,$e,!1)}else if(ct==="Polygon")Bt(Ge,De,$e,!0);else{if(ct!=="MultiPolygon"){if(ct==="GeometryCollection"){for(const m of se.geometry.geometries)pt(ie,{id:Ze,geometry:m,properties:se.properties},fe,Oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const m of Ge){const mt=[];Bt(m,mt,$e,!0),De.push(mt)}}ie.push(Te(Ze,ct,De,se.properties))}function kt(ie,se){se.push(Tt(ie[0]),Le(ie[1]),0)}function ft(ie,se,fe,Oe){let Ge,ct,$e=0;for(let Ze=0;Ze<ie.length;Ze++){const m=Tt(ie[Ze][0]),mt=Le(ie[Ze][1]);se.push(m,mt,0),Ze>0&&($e+=Oe?(Ge*mt-m*ct)/2:Math.sqrt(Math.pow(m-Ge,2)+Math.pow(mt-ct,2))),Ge=m,ct=mt}const De=se.length-3;se[2]=1,Je(se,0,De,fe),se[De+2]=1,se.size=Math.abs($e),se.start=0,se.end=se.size}function Bt(ie,se,fe,Oe){for(let Ge=0;Ge<ie.length;Ge++){const ct=[];ft(ie[Ge],ct,fe,Oe),se.push(ct)}}function Tt(ie){return ie/360+.5}function Le(ie){const se=Math.sin(ie*Math.PI/180),fe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return fe<0?0:fe>1?1:fe}function Pe(ie,se,fe,Oe,Ge,ct,$e,De){if(Oe/=se,ct>=(fe/=se)&&$e<Oe)return ie;if($e<fe||ct>=Oe)return null;const Ze=[];for(const m of ie){const mt=m.geometry;let At=m.type;const It=Ge===0?m.minX:m.minY,nt=Ge===0?m.maxX:m.maxY;if(It>=fe&&nt<Oe){Ze.push(m);continue}if(nt<fe||It>=Oe)continue;let en=[];if(At==="Point"||At==="MultiPoint")ke(mt,en,fe,Oe,Ge);else if(At==="LineString")Qe(mt,en,fe,Oe,Ge,!1,De.lineMetrics);else if(At==="MultiLineString")gt(mt,en,fe,Oe,Ge,!1);else if(At==="Polygon")gt(mt,en,fe,Oe,Ge,!0);else if(At==="MultiPolygon")for(const Tn of mt){const xn=[];gt(Tn,xn,fe,Oe,Ge,!0),xn.length&&en.push(xn)}if(en.length){if(De.lineMetrics&&At==="LineString"){for(const Tn of en)Ze.push(Te(m.id,At,Tn,m.tags));continue}At!=="LineString"&&At!=="MultiLineString"||(en.length===1?(At="LineString",en=en[0]):At="MultiLineString"),At!=="Point"&&At!=="MultiPoint"||(At=en.length===3?"Point":"MultiPoint"),Ze.push(Te(m.id,At,en,m.tags))}}return Ze.length?Ze:null}function ke(ie,se,fe,Oe,Ge){for(let ct=0;ct<ie.length;ct+=3){const $e=ie[ct+Ge];$e>=fe&&$e<=Oe&&wt(se,ie[ct],ie[ct+1],ie[ct+2])}}function Qe(ie,se,fe,Oe,Ge,ct,$e){let De=_t(ie);const Ze=Ge===0?Qt:Ft;let m,mt,At=ie.start;for(let xn=0;xn<ie.length-3;xn+=3){const er=ie[xn],Qn=ie[xn+1],Qr=ie[xn+2],$r=ie[xn+3],Br=ie[xn+4],br=Ge===0?er:Qn,or=Ge===0?$r:Br;let ti=!1;$e&&(m=Math.sqrt(Math.pow(er-$r,2)+Math.pow(Qn-Br,2))),br<fe?or>fe&&(mt=Ze(De,er,Qn,$r,Br,fe),$e&&(De.start=At+m*mt)):br>Oe?or<Oe&&(mt=Ze(De,er,Qn,$r,Br,Oe),$e&&(De.start=At+m*mt)):wt(De,er,Qn,Qr),or<fe&&br>=fe&&(mt=Ze(De,er,Qn,$r,Br,fe),ti=!0),or>Oe&&br<=Oe&&(mt=Ze(De,er,Qn,$r,Br,Oe),ti=!0),!ct&&ti&&($e&&(De.end=At+m*mt),se.push(De),De=_t(ie)),$e&&(At+=m)}let It=ie.length-3;const nt=ie[It],en=ie[It+1],Tn=Ge===0?nt:en;Tn>=fe&&Tn<=Oe&&wt(De,nt,en,ie[It+2]),It=De.length-3,ct&&It>=3&&(De[It]!==De[0]||De[It+1]!==De[1])&&wt(De,De[0],De[1],De[2]),De.length&&se.push(De)}function _t(ie){const se=[];return se.size=ie.size,se.start=ie.start,se.end=ie.end,se}function gt(ie,se,fe,Oe,Ge,ct){for(const $e of ie)Qe($e,se,fe,Oe,Ge,ct,!1)}function wt(ie,se,fe,Oe){ie.push(se,fe,Oe)}function Qt(ie,se,fe,Oe,Ge,ct){const $e=(ct-se)/(Oe-se);return wt(ie,ct,fe+(Ge-fe)*$e,1),$e}function Ft(ie,se,fe,Oe,Ge,ct){const $e=(ct-fe)/(Ge-fe);return wt(ie,se+(Oe-se)*$e,ct,1),$e}function ln(ie,se){const fe=[];for(let Oe=0;Oe<ie.length;Oe++){const Ge=ie[Oe],ct=Ge.type;let $e;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")$e=Vn(Ge.geometry,se);else if(ct==="MultiLineString"||ct==="Polygon"){$e=[];for(const De of Ge.geometry)$e.push(Vn(De,se))}else if(ct==="MultiPolygon"){$e=[];for(const De of Ge.geometry){const Ze=[];for(const m of De)Ze.push(Vn(m,se));$e.push(Ze)}}fe.push(Te(Ge.id,ct,$e,Ge.tags))}return fe}function Vn(ie,se){const fe=[];fe.size=ie.size,ie.start!==void 0&&(fe.start=ie.start,fe.end=ie.end);for(let Oe=0;Oe<ie.length;Oe+=3)fe.push(ie[Oe]+se,ie[Oe+1],ie[Oe+2]);return fe}function jt(ie,se){if(ie.transformed)return ie;const fe=1<<ie.z,Oe=ie.x,Ge=ie.y;for(const ct of ie.features){const $e=ct.geometry,De=ct.type;if(ct.geometry=[],De===1)for(let Ze=0;Ze<$e.length;Ze+=2)ct.geometry.push(Un($e[Ze],$e[Ze+1],se,fe,Oe,Ge));else for(let Ze=0;Ze<$e.length;Ze++){const m=[];for(let mt=0;mt<$e[Ze].length;mt+=2)m.push(Un($e[Ze][mt],$e[Ze][mt+1],se,fe,Oe,Ge));ct.geometry.push(m)}}return ie.transformed=!0,ie}function Un(ie,se,fe,Oe,Ge,ct){return[Math.round(fe*(ie*Oe-Ge)),Math.round(fe*(se*Oe-ct))]}function wn(ie,se,fe,Oe,Ge){const ct=se===Ge.maxZoom?0:Ge.tolerance/((1<<se)*Ge.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:ie.length,source:null,x:fe,y:Oe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const De of ie)Mn($e,De,ct,Ge);return $e}function Mn(ie,se,fe,Oe){const Ge=se.geometry,ct=se.type,$e=[];if(ie.minX=Math.min(ie.minX,se.minX),ie.minY=Math.min(ie.minY,se.minY),ie.maxX=Math.max(ie.maxX,se.maxX),ie.maxY=Math.max(ie.maxY,se.maxY),ct==="Point"||ct==="MultiPoint")for(let De=0;De<Ge.length;De+=3)$e.push(Ge[De],Ge[De+1]),ie.numPoints++,ie.numSimplified++;else if(ct==="LineString")En($e,Ge,ie,fe,!1,!1);else if(ct==="MultiLineString"||ct==="Polygon")for(let De=0;De<Ge.length;De++)En($e,Ge[De],ie,fe,ct==="Polygon",De===0);else if(ct==="MultiPolygon")for(let De=0;De<Ge.length;De++){const Ze=Ge[De];for(let m=0;m<Ze.length;m++)En($e,Ze[m],ie,fe,!0,m===0)}if($e.length){let De=se.tags||null;if(ct==="LineString"&&Oe.lineMetrics){De={};for(const m in se.tags)De[m]=se.tags[m];De.mapbox_clip_start=Ge.start/Ge.size,De.mapbox_clip_end=Ge.end/Ge.size}const Ze={geometry:$e,type:ct==="Polygon"||ct==="MultiPolygon"?3:ct==="LineString"||ct==="MultiLineString"?2:1,tags:De};se.id!==null&&(Ze.id=se.id),ie.features.push(Ze)}}function En(ie,se,fe,Oe,Ge,ct){const $e=Oe*Oe;if(Oe>0&&se.size<(Ge?$e:Oe))return void(fe.numPoints+=se.length/3);const De=[];for(let Ze=0;Ze<se.length;Ze+=3)(Oe===0||se[Ze+2]>$e)&&(fe.numSimplified++,De.push(se[Ze],se[Ze+1])),fe.numPoints++;Ge&&function(Ze,m){let mt=0;for(let At=0,It=Ze.length,nt=It-2;At<It;nt=At,At+=2)mt+=(Ze[At]-Ze[nt])*(Ze[At+1]+Ze[nt+1]);if(mt>0===m)for(let At=0,It=Ze.length;At<It/2;At+=2){const nt=Ze[At],en=Ze[At+1];Ze[At]=Ze[It-2-At],Ze[At+1]=Ze[It-1-At],Ze[It-2-At]=nt,Ze[It-1-At]=en}}(De,ct),ie.push(De)}const Mr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Hn{constructor(se,fe){const Oe=(fe=this.options=function(ct,$e){for(const De in $e)ct[De]=$e[De];return ct}(Object.create(Mr),fe)).debug;if(Oe&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ge=function(ct,$e){const De=[];if(ct.type==="FeatureCollection")for(let Ze=0;Ze<ct.features.length;Ze++)pt(De,ct.features[Ze],$e,Ze);else pt(De,ct.type==="Feature"?ct:{geometry:ct},$e);return De}(se,fe);this.tiles={},this.tileCoords=[],Oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ge=function(ct,$e){const De=$e.buffer/$e.extent;let Ze=ct;const m=Pe(ct,1,-1-De,De,0,-1,2,$e),mt=Pe(ct,1,1-De,2+De,0,-1,2,$e);return(m||mt)&&(Ze=Pe(ct,1,-De,1+De,0,-1,2,$e)||[],m&&(Ze=ln(m,1).concat(Ze)),mt&&(Ze=Ze.concat(ln(mt,-1)))),Ze}(Ge,fe),Ge.length&&this.splitTile(Ge,0,0,0),Oe&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,fe,Oe,Ge,ct,$e,De){const Ze=[se,fe,Oe,Ge],m=this.options,mt=m.debug;for(;Ze.length;){Ge=Ze.pop(),Oe=Ze.pop(),fe=Ze.pop(),se=Ze.pop();const At=1<<fe,It=Pn(fe,Oe,Ge);let nt=this.tiles[It];if(!nt&&(mt>1&&console.time("creation"),nt=this.tiles[It]=wn(se,fe,Oe,Ge,m),this.tileCoords.push({z:fe,x:Oe,y:Ge}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,Oe,Ge,nt.numFeatures,nt.numPoints,nt.numSimplified),console.timeEnd("creation"));const ti=`z${fe}`;this.stats[ti]=(this.stats[ti]||0)+1,this.total++}if(nt.source=se,ct==null){if(fe===m.indexMaxZoom||nt.numPoints<=m.indexMaxPoints)continue}else{if(fe===m.maxZoom||fe===ct)continue;if(ct!=null){const ti=ct-fe;if(Oe!==$e>>ti||Ge!==De>>ti)continue}}if(nt.source=null,se.length===0)continue;mt>1&&console.time("clipping");const en=.5*m.buffer/m.extent,Tn=.5-en,xn=.5+en,er=1+en;let Qn=null,Qr=null,$r=null,Br=null,br=Pe(se,At,Oe-en,Oe+xn,0,nt.minX,nt.maxX,m),or=Pe(se,At,Oe+Tn,Oe+er,0,nt.minX,nt.maxX,m);se=null,br&&(Qn=Pe(br,At,Ge-en,Ge+xn,1,nt.minY,nt.maxY,m),Qr=Pe(br,At,Ge+Tn,Ge+er,1,nt.minY,nt.maxY,m),br=null),or&&($r=Pe(or,At,Ge-en,Ge+xn,1,nt.minY,nt.maxY,m),Br=Pe(or,At,Ge+Tn,Ge+er,1,nt.minY,nt.maxY,m),or=null),mt>1&&console.timeEnd("clipping"),Ze.push(Qn||[],fe+1,2*Oe,2*Ge),Ze.push(Qr||[],fe+1,2*Oe,2*Ge+1),Ze.push($r||[],fe+1,2*Oe+1,2*Ge),Ze.push(Br||[],fe+1,2*Oe+1,2*Ge+1)}}getTile(se,fe,Oe){se=+se,fe=+fe,Oe=+Oe;const Ge=this.options,{extent:ct,debug:$e}=Ge;if(se<0||se>24)return null;const De=1<<se,Ze=Pn(se,fe=fe+De&De-1,Oe);if(this.tiles[Ze])return jt(this.tiles[Ze],ct);$e>1&&console.log("drilling down to z%d-%d-%d",se,fe,Oe);let m,mt=se,At=fe,It=Oe;for(;!m&&mt>0;)mt--,At>>=1,It>>=1,m=this.tiles[Pn(mt,At,It)];return m&&m.source?($e>1&&(console.log("found parent tile z%d-%d-%d",mt,At,It),console.time("drilling down")),this.splitTile(m.source,mt,At,It,se,fe,Oe),$e>1&&console.timeEnd("drilling down"),this.tiles[Ze]?jt(this.tiles[Ze],ct):null):null}}function Pn(ie,se,fe){return 32*((1<<ie)*fe+se)+ie}class Ne extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,fe){return l._(this,void 0,void 0,function*(){const Oe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ge=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!Ge)return null;const ct=new $(Ge.features,{version:2,extent:l.$});let $e=function(De){const Ze=new l.cM;return function(m,mt){for(const At in m.layers)mt.writeMessage(3,oe,m.layers[At])}(De,Ze),Ze.finish()}(ct);return $e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),{vectorTile:ct,rawData:$e.buffer}})}loadData(se){return l._(this,void 0,void 0,function*(){var fe;(fe=this._pendingRequest)===null||fe===void 0||fe.abort();const Oe=!!(se&&se.request&&se.request.collectResourceTiming)&&new l.cN(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest);const Ge=yield this._pendingData;this._geoJSONIndex=se.cluster?new xe(function({superclusterOptions:$e,clusterProperties:De}){if(!De||!$e)return $e;const Ze={},m={},mt={accumulated:null,zoom:0},At={properties:null},It=Object.keys(De);for(const nt of It){const[en,Tn]=De[nt],xn=l.cT(Tn),er=l.cT(typeof en=="string"?[en,["accumulated"],["get",nt]]:en);Ze[nt]=xn.value,m[nt]=er.value}return $e.map=nt=>{At.properties=nt;const en={};for(const Tn of It)en[Tn]=Ze[Tn].evaluate(mt,At);return en},$e.reduce=(nt,en)=>{At.properties=en;for(const Tn of It)mt.accumulated=nt[Tn],nt[Tn]=m[Tn].evaluate(mt,At)},$e}(se)).load(Ge.features):function($e,De){return new Hn($e,De)}(Ge,se.geojsonVtOptions),this.loaded={};const ct={data:Ge};if(Oe){const $e=Oe.finish();$e&&(ct.resourceTiming={},ct.resourceTiming[se.source]=JSON.parse(JSON.stringify($e)))}return ct}catch(Ge){if(delete this._pendingRequest,l.cy(Ge))return{abandoned:!0};throw Ge}})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const fe=this.loaded;return fe&&fe[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,fe){return l._(this,void 0,void 0,function*(){let Oe=yield this.loadGeoJSON(se,fe);if(delete this._pendingRequest,typeof Oe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(W(Oe,!0),se.filter){const Ge=l.cT(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ge.result==="error")throw new Error(Ge.value.map($e=>`${$e.key}: ${$e.message}`).join(", "));Oe={type:"FeatureCollection",features:Oe.features.filter($e=>Ge.value.evaluate({zoom:0},$e))}}return Oe})}loadGeoJSON(se,fe){return l._(this,void 0,void 0,function*(){const{promoteId:Oe}=se;if(se.request){const Ge=yield l.j(se.request,fe);return this._dataUpdateable=l.cV(Ge.data,Oe)?l.cU(Ge.data,Oe):void 0,Ge.data}if(typeof se.data=="string")try{const Ge=JSON.parse(se.data);return this._dataUpdateable=l.cV(Ge,Oe)?l.cU(Ge,Oe):void 0,Ge}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return l.cW(this._dataUpdateable,se.dataDiff,Oe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class he{constructor(se){this.self=se,this.actor=new l.J(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(fe,Oe)=>{if(this.externalWorkerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.externalWorkerSourceTypes[fe]=Oe},this.self.addProtocol=l.cA,this.self.removeProtocol=l.cB,this.self.registerRTLTextPlugin=fe=>{l.cX.setMethods(fe)},this.actor.registerMessageHandler("LDT",(fe,Oe)=>this._getDEMWorkerSource(fe,Oe.source).loadTile(Oe)),this.actor.registerMessageHandler("RDT",(fe,Oe)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(fe,Oe.source).removeTile(Oe)})),this.actor.registerMessageHandler("GCEZ",(fe,Oe)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(fe,Oe.type,Oe.source).getClusterExpansionZoom(Oe)})),this.actor.registerMessageHandler("GCC",(fe,Oe)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(fe,Oe.type,Oe.source).getClusterChildren(Oe)})),this.actor.registerMessageHandler("GCL",(fe,Oe)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(fe,Oe.type,Oe.source).getClusterLeaves(Oe)})),this.actor.registerMessageHandler("LD",(fe,Oe)=>this._getWorkerSource(fe,Oe.type,Oe.source).loadData(Oe)),this.actor.registerMessageHandler("GD",(fe,Oe)=>this._getWorkerSource(fe,Oe.type,Oe.source).getData()),this.actor.registerMessageHandler("LT",(fe,Oe)=>this._getWorkerSource(fe,Oe.type,Oe.source).loadTile(Oe)),this.actor.registerMessageHandler("RT",(fe,Oe)=>this._getWorkerSource(fe,Oe.type,Oe.source).reloadTile(Oe)),this.actor.registerMessageHandler("AT",(fe,Oe)=>this._getWorkerSource(fe,Oe.type,Oe.source).abortTile(Oe)),this.actor.registerMessageHandler("RMT",(fe,Oe)=>this._getWorkerSource(fe,Oe.type,Oe.source).removeTile(Oe)),this.actor.registerMessageHandler("RS",(fe,Oe)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[fe]||!this.workerSources[fe][Oe.type]||!this.workerSources[fe][Oe.type][Oe.source])return;const Ge=this.workerSources[fe][Oe.type][Oe.source];delete this.workerSources[fe][Oe.type][Oe.source],Ge.removeSource!==void 0&&Ge.removeSource(Oe)})),this.actor.registerMessageHandler("RM",fe=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[fe],delete this.availableImages[fe],delete this.workerSources[fe],delete this.demWorkerSources[fe]})),this.actor.registerMessageHandler("SR",(fe,Oe)=>l._(this,void 0,void 0,function*(){this.referrer=Oe})),this.actor.registerMessageHandler("SRPS",(fe,Oe)=>this._syncRTLPluginState(fe,Oe)),this.actor.registerMessageHandler("IS",(fe,Oe)=>l._(this,void 0,void 0,function*(){this.self.importScripts(Oe)})),this.actor.registerMessageHandler("SI",(fe,Oe)=>this._setImages(fe,Oe)),this.actor.registerMessageHandler("UL",(fe,Oe)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(fe).update(Oe.layers,Oe.removedIds)})),this.actor.registerMessageHandler("SL",(fe,Oe)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(fe).replace(Oe)}))}_setImages(se,fe){return l._(this,void 0,void 0,function*(){this.availableImages[se]=fe;for(const Oe in this.workerSources[se]){const Ge=this.workerSources[se][Oe];for(const ct in Ge)Ge[ct].availableImages=fe}})}_syncRTLPluginState(se,fe){return l._(this,void 0,void 0,function*(){return yield l.cX.syncState(fe,this.self.importScripts)})}_getAvailableImages(se){let fe=this.availableImages[se];return fe||(fe=[]),fe}_getLayerIndex(se){let fe=this.layerIndexes[se];return fe||(fe=this.layerIndexes[se]=new o),fe}_getWorkerSource(se,fe,Oe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][fe]||(this.workerSources[se][fe]={}),!this.workerSources[se][fe][Oe]){const Ge={sendAsync:(ct,$e)=>(ct.targetMapId=se,this.actor.sendAsync(ct,$e))};switch(fe){case"vector":this.workerSources[se][fe][Oe]=new B(Ge,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][fe][Oe]=new Ne(Ge,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][fe][Oe]=new this.externalWorkerSourceTypes[fe](Ge,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][fe][Oe]}_getDEMWorkerSource(se,fe){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][fe]||(this.demWorkerSources[se][fe]=new D),this.demWorkerSources[se][fe]}}return l.i(self)&&(self.worker=new he(self)),he}),i("index",["exports","./shared"],function(l,o){var f="5.7.1";function C(){var O=new o.A(4);return o.A!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O}let M,B;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(O,a,d){const v=requestAnimationFrame(I=>{w(),a(I)}),{unsubscribe:w}=o.s(O.signal,"abort",()=>{w(),cancelAnimationFrame(v),d(o.c())},!1)},frameAsync(O){return new Promise((a,d)=>{this.frame(O,a,d)})},getImageData(O,a=0){return this.getImageCanvasContext(O).getImageData(-a,-a,O.width+2*a,O.height+2*a)},getImageCanvasContext(O){const a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=O.width,a.height=O.height,d.drawImage(O,0,0,O.width,O.height),d},resolveURL:O=>(M||(M=document.createElement("a")),M.href=O,M.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class R{static testProp(a){if(!R.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in R.docStyle)return a[d];return a[0]}static create(a,d,v){const w=window.document.createElement(a);return d!==void 0&&(w.className=d),v&&v.appendChild(w),w}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(a,d){a.style[R.transformProp]=d}static addEventListener(a,d,v,w={}){a.addEventListener(d,v,"passive"in w?w:w.capture)}static removeEventListener(a,d,v,w={}){a.removeEventListener(d,v,"passive"in w?w:w.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",R.suppressClickInternal,!0)},0)}static getScale(a){const d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,v){const w=d.boundingClientRect;return new o.P((v.clientX-w.left)/d.x-a.clientLeft,(v.clientY-w.top)/d.y-a.clientTop)}static mousePos(a,d){const v=R.getScale(a);return R.getPoint(a,v,d)}static touchPos(a,d){const v=[],w=R.getScale(a);for(let I=0;I<d.length;I++)v.push(R.getPoint(a,w,d[I]));return v}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){const d=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),v=d.querySelectorAll("script");for(const w of v)w.remove();return R.clean(d),d.innerHTML}static isPossiblyDangerous(a,d){const v=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!v.includes("javascript:")&&!v.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){const d=a.children;for(const v of d)R.removeAttributes(v),R.clean(v)}static removeAttributes(a){for(const{name:d,value:v}of a.attributes)R.isPossiblyDangerous(d,v)&&a.removeAttribute(d)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(O){!J&&W&&($?oe(O):G=O)}};let G,W,J=!1,$=!1;function oe(O){const a=O.createTexture();O.bindTexture(O.TEXTURE_2D,a);try{if(O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,W),O.isContextLost())return;U.supported=!0}catch{}O.deleteTexture(a),J=!0}var te;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{G&&oe(G),G=null,$=!0},W.onerror=()=>{J=!0,G=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(O){let a,d,v,w;O.resetRequestQueue=()=>{a=[],d=0,v=0,w={}},O.addThrottleControl=X=>{const ce=v++;return w[ce]=X,ce},O.removeThrottleControl=X=>{delete w[X],z()},O.getImage=(X,ce,pe=!0)=>new Promise((Se,Me)=>{U.supported&&(X.headers||(X.headers={}),X.headers.accept="image/webp,*/*"),o.e(X,{type:"image"}),a.push({abortController:ce,requestParameters:X,supportImageRefresh:pe,state:"queued",onError:Fe=>{Me(Fe)},onSuccess:Fe=>{Se(Fe)}}),z()});const I=X=>o._(this,void 0,void 0,function*(){X.state="running";const{requestParameters:ce,supportImageRefresh:pe,onError:Se,onSuccess:Me,abortController:Fe}=X,qe=pe===!1&&!o.i(self)&&!o.g(ce.url)&&(!ce.headers||Object.keys(ce.headers).reduce((ht,bt)=>ht&&bt==="accept",!0));d++;const it=qe?Y(ce,Fe):o.m(ce,Fe);try{const ht=yield it;delete X.abortController,X.state="completed",ht.data instanceof HTMLImageElement||o.b(ht.data)?Me(ht):ht.data&&Me({data:yield(lt=ht.data,typeof createImageBitmap=="function"?o.f(lt):o.h(lt)),cacheControl:ht.cacheControl,expires:ht.expires})}catch(ht){delete X.abortController,Se(ht)}finally{d--,z()}var lt}),z=()=>{const X=(()=>{for(const ce of Object.keys(w))if(w[ce]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ce=d;ce<X&&a.length>0;ce++){const pe=a.shift();pe.abortController.signal.aborted?ce--:I(pe)}},Y=(X,ce)=>new Promise((pe,Se)=>{const Me=new Image,Fe=X.url,qe=X.credentials;qe&&qe==="include"?Me.crossOrigin="use-credentials":(qe&&qe==="same-origin"||!o.d(Fe))&&(Me.crossOrigin="anonymous"),ce.signal.addEventListener("abort",()=>{Me.src="",Se(o.c())}),Me.fetchPriority="high",Me.onload=()=>{Me.onerror=Me.onload=null,pe({data:Me})},Me.onerror=()=>{Me.onerror=Me.onload=null,ce.signal.aborted||Se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Me.src=Fe})}(te||(te={})),te.resetRequestQueue();class H{constructor(a){this._transformRequestFn=a??null}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function re(O){const a=[];if(typeof O=="string")a.push({id:"default",url:O});else if(O&&O.length>0){const d=[];for(const{id:v,url:w}of O){const I=`${v}${w}`;d.indexOf(I)===-1&&(d.push(I),a.push({id:v,url:w}))}}return a}function j(O,a,d){try{const v=new URL(O);return v.pathname+=`${a}${d}`,v.toString()}catch{throw new Error(`Invalid sprite URL "${O}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ue(O){const{userImage:a}=O;return!!(a&&a.render&&a.render())&&(O.data.replace(new Uint8Array(a.data.buffer)),!0)}class me extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const v=d.spriteData;d.data=new o.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let v=!0;const w=d.data||d.spriteData;return this._validateStretch(d.stretchX,w&&w.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,w&&w.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),v=!1),v}_validateStretch(a,d){if(!a)return!0;let v=0;for(const w of a){if(w[0]<v||w[1]<w[0]||d<w[1])return!1;v=w[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const v=d.spriteData,w=v&&v.width||d.data.width,I=v&&v.height||d.data.height;return!(a[0]<0||w<a[0]||a[1]<0||I<a[1]||a[2]<0||w<a[2]||a[3]<0||I<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,v=!0){const w=this.getImage(a);if(v&&(w.data.width!==d.data.width||w.data.height!==d.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=w.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((d,v)=>{let w=!0;if(!this.isLoaded())for(const I of a)this.images[I]||(w=!1);this.isLoaded()||w?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})})}_getImagesForIds(a){const d={};for(const v of a){let w=this.getImage(v);w||(this.fire(new o.l("styleimagemissing",{id:v})),w=this.getImage(v)),w?d[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],v=this.getImage(a);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{const w={w:v.data.width+2,h:v.data.height+2,x:0,y:0},I=new o.I(w,v);this.patterns[a]={bin:w,position:I}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const I in this.patterns)a.push(this.patterns[I].bin);const{w:d,h:v}=o.p(a),w=this.atlasImage;w.resize({width:d||1,height:v||1});for(const I in this.patterns){const{bin:z}=this.patterns[I],Y=z.x+1,X=z.y+1,ce=this.getImage(I).data,pe=ce.width,Se=ce.height;o.R.copy(ce,w,{x:0,y:0},{x:Y,y:X},{width:pe,height:Se}),o.R.copy(ce,w,{x:0,y:Se-1},{x:Y,y:X-1},{width:pe,height:1}),o.R.copy(ce,w,{x:0,y:0},{x:Y,y:X+Se},{width:pe,height:1}),o.R.copy(ce,w,{x:pe-1,y:0},{x:Y-1,y:X},{width:1,height:Se}),o.R.copy(ce,w,{x:0,y:0},{x:Y+pe,y:X},{width:1,height:Se})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const v=this.getImage(d);v||o.w(`Image with ID: "${d}" was not found`),ue(v)&&this.updateImage(d,v)}}}const ge=1e20;function we(O,a,d,v,w,I,z,Y,X){for(let ce=a;ce<a+v;ce++)Ee(O,d*I+ce,I,w,z,Y,X);for(let ce=d;ce<d+w;ce++)Ee(O,ce*I+a,1,v,z,Y,X)}function Ee(O,a,d,v,w,I,z){I[0]=0,z[0]=-ge,z[1]=ge,w[0]=O[a];for(let Y=1,X=0,ce=0;Y<v;Y++){w[Y]=O[a+Y*d];const pe=Y*Y;do{const Se=I[X];ce=(w[Y]-w[Se]+pe-Se*Se)/(Y-Se)/2}while(ce<=z[X]&&--X>-1);X++,I[X]=Y,z[X]=ce,z[X+1]=ge}for(let Y=0,X=0;Y<v;Y++){for(;z[X+1]<Y;)X++;const ce=I[X],pe=Y-ce;O[a+Y*d]=w[ce]+pe*pe}}class xe{constructor(a,d,v){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={},this.lang=v}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){const d=[];for(const I in a)for(const z of a[I])d.push(this._getAndCacheGlyphsPromise(I,z));const v=yield Promise.all(d),w={};for(const{stack:I,id:z,glyph:Y}of v)w[I]||(w[I]={}),w[I][z]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};return w})}_getAndCacheGlyphsPromise(a,d){return o._(this,void 0,void 0,function*(){let v=this.entries[a];v||(v=this.entries[a]={glyphs:{},requests:{},ranges:{}});let w=v.glyphs[d];if(w!==void 0)return{stack:a,id:d,glyph:w};if(w=this._tinySDF(v,a,d),w)return v.glyphs[d]=w,{stack:a,id:d,glyph:w};const I=Math.floor(d/256);if(256*I>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[I])return{stack:a,id:d,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[I]){const Y=xe.loadGlyphRange(a,I,this.url,this.requestManager);v.requests[I]=Y}const z=yield v.requests[I];for(const Y in z)this._doesCharSupportLocalGlyph(+Y)||(v.glyphs[+Y]=z[+Y]);return v.ranges[I]=!0,{stack:a,id:d,glyph:z[d]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,d,v){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(v))return;let I=a.tinySDF;if(!I){let Y="400";/bold/i.test(d)?Y="900":/medium/i.test(d)?Y="500":/light/i.test(d)&&(Y="200"),I=a.tinySDF=new xe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:Y})}const z=I.draw(String.fromCharCode(v));return{id:v,bitmap:new o.q({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}xe.loadGlyphRange=function(O,a,d,v){return o._(this,void 0,void 0,function*(){const w=256*a,I=w+255,z=v.transformRequest(d.replace("{fontstack}",O).replace("{range}",`${w}-${I}`),"Glyphs"),Y=yield o.n(z,new AbortController);if(!Y||!Y.data)throw new Error(`Could not load glyph range. range: ${a}, ${w}-${I}`);const X={};for(const ce of o.o(Y.data))X[ce.id]=ce;return X})},xe.TinySDF=class{constructor({fontSize:O=24,buffer:a=3,radius:d=8,cutoff:v=.25,fontFamily:w="sans-serif",fontWeight:I="normal",fontStyle:z="normal",lang:Y=null}={}){this.buffer=a,this.cutoff=v,this.radius=d,this.lang=Y;const X=this.size=O+4*a,ce=this._createCanvas(X),pe=this.ctx=ce.getContext("2d",{willReadFrequently:!0});pe.font=`${z} ${I} ${O}px ${w}`,pe.textBaseline="alphabetic",pe.textAlign="left",pe.fillStyle="black",this.gridOuter=new Float64Array(X*X),this.gridInner=new Float64Array(X*X),this.f=new Float64Array(X),this.z=new Float64Array(X+1),this.v=new Uint16Array(X)}_createCanvas(O){const a=document.createElement("canvas");return a.width=a.height=O,a}draw(O){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:w,actualBoundingBoxRight:I}=this.ctx.measureText(O),z=Math.ceil(d),Y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-w))),X=Math.min(this.size-this.buffer,z+Math.ceil(v)),ce=Y+2*this.buffer,pe=X+2*this.buffer,Se=Math.max(ce*pe,0),Me=new Uint8ClampedArray(Se),Fe={data:Me,width:ce,height:pe,glyphWidth:Y,glyphHeight:X,glyphTop:z,glyphLeft:0,glyphAdvance:a};if(Y===0||X===0)return Fe;const{ctx:qe,buffer:it,gridInner:lt,gridOuter:ht}=this;this.lang&&(qe.lang=this.lang),qe.clearRect(it,it,Y,X),qe.fillText(O,it,it+z);const bt=qe.getImageData(it,it,Y,X);ht.fill(ge,0,Se),lt.fill(0,0,Se);for(let vt=0;vt<X;vt++)for(let xt=0;xt<Y;xt++){const Dt=bt.data[4*(vt*Y+xt)+3]/255;if(Dt===0)continue;const Lt=(vt+it)*ce+xt+it;if(Dt===1)ht[Lt]=0,lt[Lt]=ge;else{const St=.5-Dt;ht[Lt]=St>0?St*St:0,lt[Lt]=St<0?St*St:0}}we(ht,0,0,ce,pe,ce,this.f,this.v,this.z),we(lt,it,it,Y,X,ce,this.f,this.v,this.z);for(let vt=0;vt<Se;vt++){const xt=Math.sqrt(ht[vt])-Math.sqrt(lt[vt]);Me[vt]=Math.round(255-255*(xt/this.radius+this.cutoff))}return Fe}};class We{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,d){return o.B(a.expression.evaluate(d))}interpolate(a,d,v){return{x:o.C.number(a.x,d.x,v),y:o.C.number(a.y,d.y,v),z:o.C.number(a.z,d.z,v)}}}let be;class rt extends o.E{constructor(a){super(),be=be||new o.r({anchor:new o.D(o.v.light.anchor),position:new We,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(be),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(o.x,a,d))for(const v in a){const w=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),w):this._transitionable.setValue(v,w)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v){return(!v||v.validate!==!1)&&o.y(this,a.call(o.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Ct=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class at extends o.E{constructor(a){super(),this._transitionable=new o.t(Ct),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(a,d={}){if(!this._validate(o.G,a,d)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const v in a){const w=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),w):this._transitionable.setValue(v,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v={}){return v?.validate!==!1&&o.y(this,a.call(o.z,o.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Je{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const v=a.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(a,d)),this.dashEntry[v]}getDashRanges(a,d,v){const w=[];let I=a.length%2==1?-a[a.length-1]*v:0,z=a[0]*v,Y=!0;w.push({left:I,right:z,isDash:Y,zeroLength:a[0]===0});let X=a[0];for(let ce=1;ce<a.length;ce++){Y=!Y;const pe=a[ce];I=X*v,X+=pe,z=X*v,w.push({left:I,right:z,isDash:Y,zeroLength:pe===0})}return w}addRoundDash(a,d,v){const w=d/2;for(let I=-v;I<=v;I++){const z=this.width*(this.nextRow+v+I);let Y=0,X=a[Y];for(let ce=0;ce<this.width;ce++){ce/X.right>1&&(X=a[++Y]);const pe=Math.abs(ce-X.left),Se=Math.abs(ce-X.right),Me=Math.min(pe,Se);let Fe;const qe=I/v*(w+1);if(X.isDash){const it=w-Math.abs(qe);Fe=Math.sqrt(Me*Me+it*it)}else Fe=w-Math.sqrt(Me*Me+qe*qe);this.data[z+ce]=Math.max(0,Math.min(255,Fe+128))}}}addRegularDash(a){for(let Y=a.length-1;Y>=0;--Y){const X=a[Y],ce=a[Y+1];X.zeroLength?a.splice(Y,1):ce&&ce.isDash===X.isDash&&(ce.left=X.left,a.splice(Y,1))}const d=a[0],v=a[a.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);const w=this.width*this.nextRow;let I=0,z=a[I];for(let Y=0;Y<this.width;Y++){Y/z.right>1&&(z=a[++I]);const X=Math.abs(Y-z.left),ce=Math.abs(Y-z.right),pe=Math.min(X,ce);this.data[w+Y]=Math.max(0,Math.min(255,(z.isDash?pe:-pe)+128))}}addDash(a,d){const v=d?7:0,w=2*v+1;if(this.nextRow+w>this.height)return o.w("LineAtlas out of space"),null;let I=0;for(let Y=0;Y<a.length;Y++)I+=a[Y];if(I!==0){const Y=this.width/I,X=this.getDashRanges(a,this.width,Y);d?this.addRoundDash(X,Y,v):this.addRegularDash(X)}const z={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:I};return this.nextRow+=w,this.dirty=!0,z}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const ze="maplibre_preloaded_worker_pool";class Te{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Te.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}const He=Math.floor(D.hardwareConcurrency/2);let pt,kt;function ft(){return pt||(pt=new Te),pt}Te.workerCount=o.H(globalThis)?Math.max(Math.min(He,3),1):1;class Bt{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;const v=this.workerPool.acquire(d);for(let w=0;w<v.length;w++){const I=new o.J(v[w],d);I.name=`Worker ${w}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){const v=[];for(const w of this.actors)v.push(w.sendAsync({type:a,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(const v of this.actors)v.registerMessageHandler(a,d)}}function Tt(){return kt||(kt=new Bt(ft(),o.K),kt.registerMessageHandler("GR",(O,a,d)=>o.m(a,d))),kt}function Le(O,a){const d=o.L();return o.M(d,d,[1,1,0]),o.N(d,d,[.5*O.width,.5*O.height,1]),O.calculatePosMatrix?o.O(d,d,O.calculatePosMatrix(a.toUnwrapped())):d}function Pe(O,a,d,v,w,I,z){var Y;const X=function(Me,Fe,qe){if(Me)for(const it of Me){const lt=Fe[it];if(lt&&lt.source===qe&&lt.type==="fill-extrusion")return!0}else for(const it in Fe){const lt=Fe[it];if(lt.source===qe&&lt.type==="fill-extrusion")return!0}return!1}((Y=w?.layers)!==null&&Y!==void 0?Y:null,a,O.id),ce=I.maxPitchScaleFactor(),pe=O.tilesIn(v,ce,X);pe.sort(ke);const Se=[];for(const Me of pe)Se.push({wrappedTileID:Me.tileID.wrapped().key,queryResults:Me.tile.queryRenderedFeatures(a,d,O._state,Me.queryGeometry,Me.cameraQueryGeometry,Me.scale,w,I,ce,Le(O.transform,Me.tileID),z?(Fe,qe)=>z(Me.tileID,Fe,qe):void 0)});return function(Me,Fe){for(const qe in Me)for(const it of Me[qe])Qe(it,Fe);return Me}(function(Me){const Fe={},qe={};for(const it of Me){const lt=it.queryResults,ht=it.wrappedTileID,bt=qe[ht]=qe[ht]||{};for(const vt in lt){const xt=lt[vt],Dt=bt[vt]=bt[vt]||{},Lt=Fe[vt]=Fe[vt]||[];for(const St of xt)Dt[St.featureIndex]||(Dt[St.featureIndex]=!0,Lt.push(St))}}return Fe}(Se),O)}function ke(O,a){const d=O.tileID,v=a.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Qe(O,a){const d=O.feature,v=a.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=v}function _t(O,a,d){return o._(this,void 0,void 0,function*(){let v=O;if(O.url?v=(yield o.j(a.transformRequest(O.url,"Source"),d)).data:yield D.frameAsync(d),!v)return null;const w=o.Q(o.e(v,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(w.vectorLayerIds=v.vector_layers.map(I=>I.id)),w})}class gt{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}extend(a){const d=this._sw,v=this._ne;let w,I;if(a instanceof o.S)w=a,I=a;else{if(!(a instanceof gt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(gt.convert(a)):this.extend(o.S.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.S.convert(a)):this;if(w=a._sw,I=a._ne,!w||!I)return this}return d||v?(d.lng=Math.min(w.lng,d.lng),d.lat=Math.min(w.lat,d.lat),v.lng=Math.max(I.lng,v.lng),v.lat=Math.max(I.lat,v.lat)):(this._sw=new o.S(w.lng,w.lat),this._ne=new o.S(I.lng,I.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:v}=o.S.convert(a);let w=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&w}static convert(a){return a instanceof gt?a:a&&new gt(a)}static fromLngLat(a,d=0){const v=360*d/40075017,w=v/Math.cos(Math.PI/180*a.lat);return new gt(new o.S(a.lng-w,a.lat-v),new o.S(a.lng+w,a.lat+v))}adjustAntiMeridian(){const a=new o.S(this._sw.lng,this._sw.lat),d=new o.S(this._ne.lng,this._ne.lat);return new gt(a,a.lng>d.lng?new o.S(d.lng+360,d.lat):d)}}class wt{constructor(a,d,v){this.bounds=gt.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),v=Math.floor(o.V(this.bounds.getWest())*d),w=Math.floor(o.U(this.bounds.getNorth())*d),I=Math.ceil(o.V(this.bounds.getEast())*d),z=Math.ceil(o.U(this.bounds.getSouth())*d);return a.x>=v&&a.x<I&&a.y>=w&&a.y<z}}class Qt extends o.E{constructor(a,d,v,w){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(d,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new wt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};v.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((I,z)=>{a.reloadPromise={resolve:I,reject:z}})}else a.actor=this.dispatcher.getActor(),w="LT";a.abortController=new AbortController;try{const I=yield a.actor.sendAsync({type:w,data:v},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,I)}catch(I){if(delete a.abortController,a.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){const v=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(v.resolve).catch(v.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ft extends o.E{constructor(a,d,v,w){super(),this.id=a,this.dispatcher=v,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},d),o.e(this,o.Q(d,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield _t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(o.e(this,d),d.bounds&&(this.tileBounds=new wt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(d){this._tileJSONRequest=null,this.fire(new o.k(d))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const v=yield te.getImage(this.map._requestManager.transformRequest(d,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&a.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const w=this.map.painter.context,I=w.gl,z=v.data;a.texture=this.map.painter.getTileTexture(z.width),a.texture?a.texture.update(z,{useMipmap:!0}):(a.texture=new o.T(w,z,I.RGBA,{useMipmap:!0}),a.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(v){if(delete a.abortController,a.aborted)a.state="unloaded";else if(v)throw a.state="errored",v}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class ln extends Ft{constructor(a,d,v,w){super(a,d,v,w),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const w=yield te.getImage(v,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(w&&w.data){const I=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&a.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const z=o.b(I)&&o.W()?I:yield this.readImageNow(I),Y={type:this.type,uid:a.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const X=yield a.actor.sendAsync({type:"LDT",data:Y});a.dem=X,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(w){if(delete a.abortController,a.aborted)a.state="unloaded";else if(w)throw a.state="errored",w}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const d=a.width+2,v=a.height+2;try{return new o.R({width:d,height:v},yield o.Y(a,-1,-1,d,v))}catch{}}return D.getImageData(a,1)})}_getNeighboringTiles(a){const d=a.canonical,v=Math.pow(2,d.z),w=(d.x-1+v)%v,I=d.x===0?a.wrap-1:a.wrap,z=(d.x+1+v)%v,Y=d.x+1===v?a.wrap+1:a.wrap,X={};return X[new o.Z(a.overscaledZ,I,d.z,w,d.y).key]={backfilled:!1},X[new o.Z(a.overscaledZ,Y,d.z,z,d.y).key]={backfilled:!1},d.y>0&&(X[new o.Z(a.overscaledZ,I,d.z,w,d.y-1).key]={backfilled:!1},X[new o.Z(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},X[new o.Z(a.overscaledZ,Y,d.z,z,d.y-1).key]={backfilled:!1}),d.y+1<v&&(X[new o.Z(a.overscaledZ,I,d.z,w,d.y+1).key]={backfilled:!1},X[new o.Z(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},X[new o.Z(a.overscaledZ,Y,d.z,z,d.y+1).key]={backfilled:!1}),X}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Vn extends o.E{constructor(a,d,v,w){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=v.getActor(),this.setEventedParent(w),this._data=d.data,this._options=o.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.$/this.tileSize)}_getClusterMaxZoom(a){const d=a?Math.round(a):this.maxzoom-1;return Number.isInteger(a)||a===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${a}" rounded to "${d}"`),d}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._pendingWorkerUpdate={data:a},this._updateWorkerData(),this}updateData(a){return this._pendingWorkerUpdate.diff=o.a0(this._pendingWorkerUpdate.diff,a),this._updateWorkerData(),this}getData(){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(d=>d.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const a=new gt,d=yield this.getData();let v;switch(d.type){case"FeatureCollection":v=d.features.map(w=>this.getCoordinatesFromGeometry(w.geometry)).flat(1/0);break;case"Feature":v=this.getCoordinatesFromGeometry(d.geometry);break;default:v=this.getCoordinatesFromGeometry(d)}if(v.length==0)return a;for(let w=0;w<v.length-1;w+=2)a.extend([v[w],v[w+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(a.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:v}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:a,diff:d}=this._pendingWorkerUpdate;if(!a&&!d)return void o.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const v=o.e({type:this.type},this.workerOptions);a?(typeof a=="string"?(v.request=this.map._requestManager.transformRequest(D.resolveURL(a),"Source"),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(a),this._pendingWorkerUpdate.data=void 0):d&&(v.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:v});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));this._data=w.data;let I=null;w.resourceTiming&&w.resourceTiming[this.id]&&(I=w.resourceTiming[this.id].slice(0));const z={dataType:"source"};this._collectResourceTiming&&I&&I.length>0&&o.e(z,{resourceTiming:I}),this.fire(new o.l("data",Object.assign(Object.assign({},z),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},z),{sourceDataType:"content"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.actor?"RT":"LT";a.actor=this.actor;const v={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};a.abortController=new AbortController;const w=yield this.actor.sendAsync({type:d,data:v},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(w,this.map.painter,d==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class jt extends o.E{constructor(a,d,v,w){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield te.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new o.k(d))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(o.a1.fromLngLat);var v;return this.tileID=function(w){const I=o.a2.fromPoints(w),z=I.width(),Y=I.height(),X=Math.max(z,Y),ce=Math.max(0,Math.floor(-Math.log(X)/Math.LN2)),pe=Math.pow(2,ce);return new o.a4(ce,Math.floor((I.minX+I.maxX)/2*pe),Math.floor((I.minY+I.maxY)/2*pe))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((v=this.tileCoords)[1].x-v[0].x)*(v[2].y-v[0].y)-(v[1].y-v[0].y)*(v[2].x-v[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,d=a.gl;this.texture||(this.texture=new o.T(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const w in this.tiles){const I=this.tiles[w];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){const{minX:d,minY:v,maxX:w,maxY:I}=o.a2.fromPoints(a),z={};for(let Y=0;Y<=o.a3;Y++){const X=Math.pow(2,Y),ce=Math.floor(d*X),pe=Math.floor(v*X),Se=Math.floor(w*X),Me=Math.floor(I*X);z[Y]={minTileX:ce,minTileY:pe,maxTileX:Se,maxTileY:Me}}return z}}class Un extends jt{constructor(a,d,v,w){super(a,d,v,w),this.roundZoom=!0,this.type="video",this.options=d}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield o.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new o.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new o.k(new o.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,d=a.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const w in this.tiles){const I=this.tiles[w];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class wn extends jt{constructor(a,d,v,w){super(a,d,v,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(I=>!Array.isArray(I)||I.length!==2||I.some(z=>typeof z!="number"))||this.fire(new o.k(new o.a6(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a6(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.k(new o.a6(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a6(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a6(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,v=d.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(d,this.canvas,v.RGBA,{premultiply:!0});let w=!1;for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,w=!0)}w&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Mn={},En=O=>{switch(O){case"geojson":return Vn;case"image":return jt;case"raster":return Ft;case"raster-dem":return ln;case"vector":return Qt;case"video":return Un;case"canvas":return wn}return Mn[O]},Mr="RTLPluginLoaded";class Hn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Tt()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Mr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Pn=null;function Ne(){return Pn||(Pn=new Hn),Pn}class he{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(w,I){const z={};if(!I)return z;for(const Y of w){const X=Y.layerIds.map(ce=>I.getLayer(ce)).filter(Boolean);if(X.length!==0){Y.layers=X,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(ce=>X.filter(pe=>pe.id===ce)[0]));for(const ce of X)z[ce.id]=Y}}return z}(a.buckets,d?.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const I=this.buckets[w];if(I instanceof o.a9){if(this.hasSymbolBuckets=!0,!v)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const I=this.buckets[w];if(I instanceof o.a9&&I.hasRTLText){this.hasRTLText=!0,Ne().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const I=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(w).queryRadius(I))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a8}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const v in this.buckets){const w=this.buckets[v];w.uploadPending()&&w.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,v,w,I,z,Y,X,ce,pe,Se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:I,scale:z,tileSize:this.tileSize,pixelPosMatrix:pe,transform:X,params:Y,queryPadding:this.queryPadding*ce,getElevation:Se},a,d,v):{}}querySourceFeatures(a,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const w=v.loadVTLayers(),I=d&&d.sourceLayer?d.sourceLayer:"",z=w._geojsonTileLayer||w[I];if(!z)return;const Y=o.aa(d&&d.filter),{z:X,x:ce,y:pe}=this.tileID.canonical,Se={z:X,x:ce,y:pe};for(let Me=0;Me<z.length;Me++){const Fe=z.feature(Me);if(Y.needGeometry){const lt=o.ab(Fe,!0);if(!Y.filter(new o.F(this.tileID.overscaledZ),lt,this.tileID.canonical))continue}else if(!Y.filter(new o.F(this.tileID.overscaledZ),Fe))continue;const qe=v.getId(Fe,I),it=new o.ac(Fe,X,ce,pe,qe);it.tile=Se,a.push(it)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const v=o.ad(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let w=!1;if(this.expirationTime>v)w=!1;else if(d)if(this.expirationTime<d)w=!0;else{const I=this.expirationTime-d;I?this.expirationTime=v+Math.max(I,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!d.style.hasLayer(w))continue;const I=this.buckets[w],z=I.layers[0].sourceLayer||"_geojsonTileLayer",Y=v[z],X=a[z];if(!Y||!X||Object.keys(X).length===0)continue;I.update(X,Y,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ce=d&&d.style&&d.style.getLayer(w);ce&&(this.queryPadding=Math.max(this.queryPadding,ce.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=D.now()+a}setDependencies(a,d){const v={};for(const w of d)v[w]=!0;this.dependencies[a]=v}hasDependency(a,d){for(const v of a){const w=this.dependencies[v];if(w){for(const I of d)if(w[I])return!0}}return!1}}class ie{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,v){const w=a.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const I={value:d,timeout:void 0};if(v!==void 0&&(I.timeout=setTimeout(()=>{this.remove(a,I)},v)),this.data[w].push(I),this.order.push(w),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const v=a.wrapped().key,w=d===void 0?0:this.data[v].indexOf(d),I=this.data[v][w];return this.data[v].splice(w,1),I.timeout&&clearTimeout(I.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(I.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const v in this.data)for(const w of this.data[v])a(w.value)||d.push(w);for(const v of d)this.remove(v.value.tileID,v)}}class se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,v){const w=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][w]=this.stateChanges[a][w]||{},o.e(this.stateChanges[a][w],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const I in this.state[a])I!==w&&(this.deletedStates[a][I]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][w]===null){this.deletedStates[a][w]={};for(const I in this.state[a][w])v[I]||(this.deletedStates[a][w][I]=null)}else for(const I in v)this.deletedStates[a]&&this.deletedStates[a][w]&&this.deletedStates[a][w][I]===null&&delete this.deletedStates[a][w][I]}removeFeatureState(a,d,v){if(this.deletedStates[a]===null)return;const w=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&d!==void 0)this.deletedStates[a][w]!==null&&(this.deletedStates[a][w]=this.deletedStates[a][w]||{},this.deletedStates[a][w][v]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][w])for(v in this.deletedStates[a][w]={},this.stateChanges[a][w])this.deletedStates[a][w][v]=null;else this.deletedStates[a][w]=null;else this.deletedStates[a]=null}getState(a,d){const v=String(d),w=o.e({},(this.state[a]||{})[v],(this.stateChanges[a]||{})[v]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const I=this.deletedStates[a][d];if(I===null)return{};for(const z in I)delete w[z]}return w}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const v={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const I={};for(const z in this.stateChanges[w])this.state[w][z]||(this.state[w][z]={}),o.e(this.state[w][z],this.stateChanges[w][z]),I[z]=this.state[w][z];v[w]=I}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const I={};if(this.deletedStates[w]===null)for(const z in this.state[w])I[z]={},this.state[w][z]={};else for(const z in this.deletedStates[w]){if(this.deletedStates[w][z]===null)this.state[w][z]={};else for(const Y of Object.keys(this.deletedStates[w][z]))delete this.state[w][z][Y];I[z]=this.state[w][z]}v[w]=v[w]||{},o.e(v[w],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const w in a)a[w].setFeatureState(v,d)}}const fe=89.25;function Oe(O,a){const d=o.ah(a.lat,-o.ai,o.ai);return new o.P(o.V(a.lng)*O,o.U(d)*O)}function Ge(O,a){return new o.a1(a.x/O,a.y/O).toLngLat()}function ct(O){return O.cameraToCenterDistance*Math.min(.85*Math.tan(o.ae(90-O.pitch)),Math.tan(o.ae(fe-O.pitch)))}function $e(O,a){const d=O.canonical,v=a/o.af(d.z),w=d.x+Math.pow(2,d.z)*O.wrap,I=o.ag(new Float64Array(16));return o.M(I,I,[w*v,d.y*v,0]),o.N(I,I,[v/o.$,v/o.$,1]),I}function De(O,a,d,v,w){const I=o.a1.fromLngLat(O,a),z=w*o.aj(1,O.lat),Y=z*Math.cos(o.ae(d)),X=Math.sqrt(z*z-Y*Y),ce=X*Math.sin(o.ae(-v)),pe=X*Math.cos(o.ae(-v));return new o.a1(I.x+ce,I.y+pe,I.z+Y)}function Ze(O,a,d){const v=a.intersectsFrustum(O);if(!d||v===0)return v;const w=a.intersectsPlane(d);return w===0?0:v===2&&w===2?2:1}function m(O,a,d){let v=0;const w=(d-a)/10;for(let I=0;I<10;I++)v+=w*Math.pow(Math.cos(a+(I+.5)/10*(d-a)),O);return v}function mt(O,a){return function(d,v,w,I,z){const Y=2*((O-1)/o.ak(Math.cos(o.ae(fe-z))/Math.cos(o.ae(fe)))-1),X=Math.acos(w/I),ce=2*m(Y-1,0,o.ae(z/2)),pe=Math.min(o.ae(fe),X+o.ae(z/2)),Se=m(Y-1,Math.min(pe,X-o.ae(z/2)),pe),Me=Math.atan(v/w),Fe=Math.hypot(v,w);let qe=d;return qe+=o.ak(I/Fe/Math.max(.5,Math.cos(o.ae(z/2)))),qe+=Y*o.ak(Math.cos(Me))/2,qe-=o.ak(Math.max(1,Se/ce/a))/2,qe}}const At=mt(9.314,3);function It(O,a){const d=(a.roundZoom?Math.round:Math.floor)(O.zoom+o.ak(O.tileSize/a.tileSize));return Math.max(0,d)}function nt(O,a){const d=O.getCameraFrustum(),v=O.getClippingPlane(),w=O.screenPointToMercatorCoordinate(O.getCameraPoint()),I=o.a1.fromLngLat(O.center,O.elevation);w.z=I.z+Math.cos(O.pitchInRadians)*O.cameraToCenterDistance/O.worldSize;const z=O.getCoveringTilesDetailsProvider(),Y=z.allowVariableZoom(O,a),X=It(O,a),ce=a.minzoom||0,pe=a.maxzoom!==void 0?a.maxzoom:O.maxZoom,Se=Math.min(Math.max(0,X),pe),Me=Math.pow(2,Se),Fe=[Me*w.x,Me*w.y,0],qe=[Me*I.x,Me*I.y,0],it=Math.hypot(I.x-w.x,I.y-w.y),lt=Math.abs(I.z-w.z),ht=Math.hypot(it,lt),bt=Dt=>({zoom:0,x:0,y:0,wrap:Dt,fullyVisible:!1}),vt=[],xt=[];if(O.renderWorldCopies&&z.allowWorldCopies())for(let Dt=1;Dt<=3;Dt++)vt.push(bt(-Dt)),vt.push(bt(Dt));for(vt.push(bt(0));vt.length>0;){const Dt=vt.pop(),Lt=Dt.x,St=Dt.y;let Gt=Dt.fullyVisible;const rn={x:Lt,y:St,z:Dt.zoom},Ht=z.getTileBoundingVolume(rn,Dt.wrap,O.elevation,a);if(!Gt){const Gn=Ze(d,Ht,v);if(Gn===0)continue;Gt=Gn===2}const tn=z.distanceToTile2d(w.x,w.y,rn,Ht);let sn=X;Y&&(sn=(a.calculateTileZoom||At)(O.zoom+o.ak(O.tileSize/a.tileSize),tn,lt,ht,O.fov)),sn=(a.roundZoom?Math.round:Math.floor)(sn),sn=Math.max(0,sn);const Yn=Math.min(sn,pe);if(Dt.wrap=z.getWrap(I,rn,Dt.wrap),Dt.zoom>=Yn){if(Dt.zoom<ce)continue;const Gn=Se-Dt.zoom,On=Fe[0]-.5-(Lt<<Gn),_r=Fe[1]-.5-(St<<Gn),ui=a.reparseOverscaled?Math.max(Dt.zoom,sn):Dt.zoom;xt.push({tileID:new o.Z(Dt.zoom===pe?ui:Dt.zoom,Dt.wrap,Dt.zoom,Lt,St),distanceSq:o.al([qe[0]-.5-Lt,qe[1]-.5-St]),tileDistanceToCamera:Math.sqrt(On*On+_r*_r)})}else for(let Gn=0;Gn<4;Gn++)vt.push({zoom:Dt.zoom+1,x:(Lt<<1)+Gn%2,y:(St<<1)+(Gn>>1),wrap:Dt.wrap,fullyVisible:Gt})}return xt.sort((Dt,Lt)=>Dt.distanceSq-Lt.distanceSq).map(Dt=>Dt.tileID)}const en=o.a2.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class Tn extends o.E{constructor(a,d,v){super(),this.id=a,this.dispatcher=v,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,I,z,Y)=>{const X=new(En(I.type))(w,I,z,Y);if(X.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${X.id}`);return X})(a,d,v,this),this._tiles={},this._cache=new ie(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new se,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,v){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,v)}catch(w){a.state="errored",w.status!==404?this._source.fire(new o.k(w,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(a),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(xn).map(a=>a.key)}getRenderableIds(a){const d=[];for(const v in this._tiles)this._isIdRenderable(v,a)&&d.push(this._tiles[v]);return a?d.sort((v,w)=>{const I=v.tileID,z=w.tileID,Y=new o.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians),X=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return I.overscaledZ-z.overscaledZ||X.y-Y.y||X.x-Y.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(xn).map(v=>v.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)a?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(a,d){return o._(this,void 0,void 0,function*(){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,a,d))})}_tileLoaded(a,d,v){a.timeAdded=D.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let w=0;w<d.length;w++){const I=d[w];if(a.neighboringTiles&&a.neighboringTiles[I]){const z=this.getTileByID(I);v(a,z),v(z,a)}}function v(w,I){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let z=I.tileID.canonical.x-w.tileID.canonical.x;const Y=I.tileID.canonical.y-w.tileID.canonical.y,X=Math.pow(2,w.tileID.canonical.z),ce=I.tileID.key;z===0&&Y===0||Math.abs(Y)>1||(Math.abs(z)>1&&(Math.abs(z+X)===1?z+=X:Math.abs(z-X)===1&&(z-=X)),I.dem&&w.dem&&(w.dem.backfillBorder(I.dem,z,Y),w.neighboringTiles&&w.neighboringTiles[ce]&&(w.neighboringTiles[ce].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,v,w){for(const I in this._tiles){let z=this._tiles[I];if(w[I]||!z.hasData()||z.tileID.overscaledZ<=d||z.tileID.overscaledZ>v)continue;let Y=z.tileID;for(;z&&z.tileID.overscaledZ>d+1;){const ce=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[ce.key],z&&z.hasData()&&(Y=ce)}let X=Y;for(;X.overscaledZ>d;)if(X=X.scaledTo(X.overscaledZ-1),a[X.key]||a[X.canonical.key]){w[Y.key]=Y;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=a.overscaledZ-1;v>=d;v--){const w=a.scaledTo(v),I=this._getLoadedTile(w);if(I)return I}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,v=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(I)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const v={};for(const w in this._tiles){const I=this._tiles[w];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+d),v[I.tileID.key]=I}this._tiles=v;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}_updateCoveredAndRetainedTiles(a,d,v,w,I,z){const Y={},X={},ce=Object.keys(a),pe=D.now();for(const Se of ce){const Me=a[Se],Fe=this._tiles[Se];if(!Fe||Fe.fadeEndTime!==0&&Fe.fadeEndTime<=pe)continue;const qe=this.findLoadedParent(Me,d),it=this.findLoadedSibling(Me),lt=qe||it||null;lt&&(this._addTile(lt.tileID),Y[lt.tileID.key]=lt.tileID),X[Se]=Me}this._retainLoadedChildren(X,w,v,a);for(const Se in Y)a[Se]||(this._coveredTiles[Se]=!0,a[Se]=Y[Se]);if(z){const Se={},Me={};for(const Fe of I)this._tiles[Fe.key].hasData()?Se[Fe.key]=Fe:Me[Fe.key]=Fe;for(const Fe in Me){const qe=Me[Fe].children(this._source.maxzoom);this._tiles[qe[0].key]&&this._tiles[qe[1].key]&&this._tiles[qe[2].key]&&this._tiles[qe[3].key]&&(Se[qe[0].key]=a[qe[0].key]=qe[0],Se[qe[1].key]=a[qe[1].key]=qe[1],Se[qe[2].key]=a[qe[2].key]=qe[2],Se[qe[3].key]=a[qe[3].key]=qe[3],delete Me[Fe])}for(const Fe in Me){const qe=Me[Fe],it=this.findLoadedParent(qe,this._source.minzoom),lt=this.findLoadedSibling(qe),ht=it||lt||null;if(ht){Se[ht.tileID.key]=a[ht.tileID.key]=ht.tileID;for(const bt in Se)Se[bt].isChildOf(ht.tileID)&&delete Se[bt]}}for(const Fe in this._tiles)Se[Fe]||(this._coveredTiles[Fe]=!0)}}update(a,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=a,this.terrain=d,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(pe=>new o.Z(pe.canonical.z,pe.wrap,pe.canonical.z,pe.canonical.x,pe.canonical.y)):(v=nt(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(v=v.filter(pe=>this._source.hasTile(pe)))):v=[];const w=It(a,this._source),I=Math.max(w-Tn.maxOverzooming,this._source.minzoom),z=Math.max(w+Tn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const pe={};for(const Se of v)if(Se.canonical.z>this._source.minzoom){const Me=Se.scaledTo(Se.canonical.z-1);pe[Me.key]=Me;const Fe=Se.scaledTo(Math.max(this._source.minzoom,Math.min(Se.canonical.z,5)));pe[Fe.key]=Fe}v=v.concat(Object.values(pe))}const Y=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,Y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const X=this._updateRetainedTiles(v,w);er(this._source.type)&&this._updateCoveredAndRetainedTiles(X,I,z,w,v,d);for(const pe in X)this._tiles[pe].clearFadeHold();const ce=o.am(this._tiles,X);for(const pe of ce){const Se=this._tiles[pe];Se.hasSymbolBuckets&&!Se.holdingForFade()?Se.setHoldDuration(this.map._fadeDuration):Se.hasSymbolBuckets&&!Se.symbolFadeFinished()||this._removeTile(pe)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){var v;const w={},I={},z=Math.max(d-Tn.maxOverzooming,this._source.minzoom),Y=Math.max(d+Tn.maxUnderzooming,this._source.minzoom),X={};for(const ce of a){const pe=this._addTile(ce);w[ce.key]=ce,pe.hasData()||d<this._source.maxzoom&&(X[ce.key]=ce)}this._retainLoadedChildren(X,d,Y,w);for(const ce of a){let pe=this._tiles[ce.key];if(pe.hasData())continue;if(d+1>this._source.maxzoom){const Me=ce.children(this._source.maxzoom)[0],Fe=this.getTile(Me);if(Fe&&Fe.hasData()){w[Me.key]=Me;continue}}else{const Me=ce.children(this._source.maxzoom);if(w[Me[0].key]&&w[Me[1].key]&&w[Me[2].key]&&w[Me[3].key])continue}let Se=pe.wasRequested();for(let Me=ce.overscaledZ-1;Me>=z;--Me){const Fe=ce.scaledTo(Me);if(I[Fe.key])break;if(I[Fe.key]=!0,pe=this.getTile(Fe),!pe&&Se&&(pe=this._addTile(Fe)),pe){const qe=pe.hasData();if((qe||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||Se)&&(w[Fe.key]=Fe),Se=pe.wasRequested(),qe)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let v,w=this._tiles[a].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){v=this._loadedParentTiles[w.key];break}d.push(w.key);const I=w.scaledTo(w.overscaledZ-1);if(v=this._getLoadedTile(I),v)break;w=I}for(const I of d)this._loadedParentTiles[I]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const d=this._tiles[a].tileID,v=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=v}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const v=d;return d||(d=new he(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,v||this._source.fire(new o.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=d.getExpiryTimeout();v&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},v))}refreshTiles(a){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&a.some(v=>v.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(a){const d=a.sourceDataType;a.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&d==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,v){const w=[],I=this.transform;if(!I)return w;const z=I.getCoveringTilesDetailsProvider().allowWorldCopies(),Y=v?I.getCameraQueryGeometry(a):a,X=Fe=>I.screenPointToMercatorCoordinate(Fe,this.terrain),ce=this.transformBbox(a,X,!z),pe=this.transformBbox(Y,X,!z),Se=this.getIds(),Me=o.a2.fromPoints(pe);for(let Fe=0;Fe<Se.length;Fe++){const qe=this._tiles[Se[Fe]];if(qe.holdingForFade())continue;const it=z?[qe.tileID]:[qe.tileID.unwrapTo(-1),qe.tileID.unwrapTo(0)],lt=Math.pow(2,I.zoom-qe.tileID.overscaledZ),ht=d*qe.queryPadding*o.$/qe.tileSize/lt;for(const bt of it){const vt=Me.map(xt=>bt.getTilePoint(new o.a1(xt.x,xt.y)));if(vt.expandBy(ht),vt.intersects(en)){const xt=ce.map(Lt=>bt.getTilePoint(Lt)),Dt=pe.map(Lt=>bt.getTilePoint(Lt));w.push({tile:qe,tileID:z?bt:bt.unwrapTo(0),queryGeometry:xt,cameraQueryGeometry:Dt,scale:lt})}}}return w}transformBbox(a,d,v){let w=a.map(d);if(v){const I=o.a2.fromPoints(a);I.shrinkBy(.001*Math.min(I.width(),I.height()));const z=I.map(d);o.a2.fromPoints(w).covers(z)||(w=w.map(Y=>Y.x>.5?new o.a1(Y.x-1,Y.y,Y.z):Y))}return w}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(v=>this._tiles[v].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(er(this._source.type)){const a=D.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,v){this._state.updateState(a=a||"_geojsonTileLayer",d,v)}removeFeatureState(a,d,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,v)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,v){const w=this._tiles[a];w&&w.setDependencies(d,v)}reloadTilesForDependencies(a,d){for(const v in this._tiles)this._tiles[v].hasDependency(a,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(a,d))}}function xn(O,a){const d=Math.abs(2*O.wrap)-+(O.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return O.overscaledZ-a.overscaledZ||v-d||a.canonical.y-O.canonical.y||a.canonical.x-O.canonical.x}function er(O){return O==="raster"||O==="image"||O==="video"}Tn.maxOverzooming=10,Tn.maxUnderzooming=3;class Qn{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ah(a,0,1);let d=1,v=this._distances[d];const w=a*this.paddedLength+this.padding;for(;v<w&&d<this._distances.length;)v=this._distances[++d];const I=d-1,z=this._distances[I],Y=v-z,X=Y>0?(w-z)/Y:0;return this.points[I].mult(1-X).add(this.points[d].mult(X))}}function Qr(O,a){let d=!0;return O==="always"||O!=="never"&&a!=="never"||(d=!1),d}class $r{constructor(a,d,v){const w=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(d/v);for(let z=0;z<this.xCellCount*this.yCellCount;z++)w.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,v,w,I){this._forEachCell(d,v,w,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(I)}insertCircle(a,d,v,w){this._forEachCell(d-w,v-w,d+w,v+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(v),this.circles.push(w)}_insertBoxCell(a,d,v,w,I,z){this.boxCells[I].push(z)}_insertCircleCell(a,d,v,w,I,z){this.circleCells[I].push(z)}_query(a,d,v,w,I,z,Y){if(v<0||a>this.width||w<0||d>this.height)return[];const X=[];if(a<=0&&d<=0&&this.width<=v&&this.height<=w){if(I)return[{key:null,x1:a,y1:d,x2:v,y2:w}];for(let ce=0;ce<this.boxKeys.length;ce++)X.push({key:this.boxKeys[ce],x1:this.bboxes[4*ce],y1:this.bboxes[4*ce+1],x2:this.bboxes[4*ce+2],y2:this.bboxes[4*ce+3]});for(let ce=0;ce<this.circleKeys.length;ce++){const pe=this.circles[3*ce],Se=this.circles[3*ce+1],Me=this.circles[3*ce+2];X.push({key:this.circleKeys[ce],x1:pe-Me,y1:Se-Me,x2:pe+Me,y2:Se+Me})}}else this._forEachCell(a,d,v,w,this._queryCell,X,{hitTest:I,overlapMode:z,seenUids:{box:{},circle:{}}},Y);return X}query(a,d,v,w){return this._query(a,d,v,w,!1,null)}hitTest(a,d,v,w,I,z){return this._query(a,d,v,w,!0,I,z).length>0}hitTestCircle(a,d,v,w,I){const z=a-v,Y=a+v,X=d-v,ce=d+v;if(Y<0||z>this.width||ce<0||X>this.height)return!1;const pe=[];return this._forEachCell(z,X,Y,ce,this._queryCellCircle,pe,{hitTest:!0,overlapMode:w,circle:{x:a,y:d,radius:v},seenUids:{box:{},circle:{}}},I),pe.length>0}_queryCell(a,d,v,w,I,z,Y,X){const{seenUids:ce,hitTest:pe,overlapMode:Se}=Y,Me=this.boxCells[I];if(Me!==null){const qe=this.bboxes;for(const it of Me)if(!ce.box[it]){ce.box[it]=!0;const lt=4*it,ht=this.boxKeys[it];if(a<=qe[lt+2]&&d<=qe[lt+3]&&v>=qe[lt+0]&&w>=qe[lt+1]&&(!X||X(ht))&&(!pe||!Qr(Se,ht.overlapMode))&&(z.push({key:ht,x1:qe[lt],y1:qe[lt+1],x2:qe[lt+2],y2:qe[lt+3]}),pe))return!0}}const Fe=this.circleCells[I];if(Fe!==null){const qe=this.circles;for(const it of Fe)if(!ce.circle[it]){ce.circle[it]=!0;const lt=3*it,ht=this.circleKeys[it];if(this._circleAndRectCollide(qe[lt],qe[lt+1],qe[lt+2],a,d,v,w)&&(!X||X(ht))&&(!pe||!Qr(Se,ht.overlapMode))){const bt=qe[lt],vt=qe[lt+1],xt=qe[lt+2];if(z.push({key:ht,x1:bt-xt,y1:vt-xt,x2:bt+xt,y2:vt+xt}),pe)return!0}}}return!1}_queryCellCircle(a,d,v,w,I,z,Y,X){const{circle:ce,seenUids:pe,overlapMode:Se}=Y,Me=this.boxCells[I];if(Me!==null){const qe=this.bboxes;for(const it of Me)if(!pe.box[it]){pe.box[it]=!0;const lt=4*it,ht=this.boxKeys[it];if(this._circleAndRectCollide(ce.x,ce.y,ce.radius,qe[lt+0],qe[lt+1],qe[lt+2],qe[lt+3])&&(!X||X(ht))&&!Qr(Se,ht.overlapMode))return z.push(!0),!0}}const Fe=this.circleCells[I];if(Fe!==null){const qe=this.circles;for(const it of Fe)if(!pe.circle[it]){pe.circle[it]=!0;const lt=3*it,ht=this.circleKeys[it];if(this._circlesCollide(qe[lt],qe[lt+1],qe[lt+2],ce.x,ce.y,ce.radius)&&(!X||X(ht))&&!Qr(Se,ht.overlapMode))return z.push(!0),!0}}}_forEachCell(a,d,v,w,I,z,Y,X){const ce=this._convertToXCellCoord(a),pe=this._convertToYCellCoord(d),Se=this._convertToXCellCoord(v),Me=this._convertToYCellCoord(w);for(let Fe=ce;Fe<=Se;Fe++)for(let qe=pe;qe<=Me;qe++)if(I.call(this,a,d,v,w,this.xCellCount*qe+Fe,z,Y,X))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,v,w,I,z){const Y=w-a,X=I-d,ce=v+z;return ce*ce>Y*Y+X*X}_circleAndRectCollide(a,d,v,w,I,z,Y){const X=(z-w)/2,ce=Math.abs(a-(w+X));if(ce>X+v)return!1;const pe=(Y-I)/2,Se=Math.abs(d-(I+pe));if(Se>pe+v)return!1;if(ce<=X||Se<=pe)return!0;const Me=ce-X,Fe=Se-pe;return Me*Me+Fe*Fe<=v*v}}function Br(O,a,d){const v=o.L();if(!O){const{vecSouth:Se,vecEast:Me}=or(a),Fe=C();Fe[0]=Me[0],Fe[1]=Me[1],Fe[2]=Se[0],Fe[3]=Se[1],w=Fe,(pe=(z=(I=Fe)[0])*(ce=I[3])-(X=I[2])*(Y=I[1]))&&(w[0]=ce*(pe=1/pe),w[1]=-Y*pe,w[2]=-X*pe,w[3]=z*pe),v[0]=Fe[0],v[1]=Fe[1],v[4]=Fe[2],v[5]=Fe[3]}var w,I,z,Y,X,ce,pe;return o.N(v,v,[1/d,1/d,1]),v}function br(O,a,d,v){if(O){const w=o.L();if(!a){const{vecSouth:I,vecEast:z}=or(d);w[0]=z[0],w[1]=z[1],w[4]=I[0],w[5]=I[1]}return o.N(w,w,[v,v,1]),w}return d.pixelsToClipSpaceMatrix}function or(O){const a=Math.cos(O.rollInRadians),d=Math.sin(O.rollInRadians),v=Math.cos(O.pitchInRadians),w=Math.cos(O.bearingInRadians),I=Math.sin(O.bearingInRadians),z=o.ar();z[0]=-w*v*d-I*a,z[1]=-I*v*d+w*a;const Y=o.as(z);Y<1e-9?o.at(z):o.au(z,z,1/Y);const X=o.ar();X[0]=w*v*a-I*d,X[1]=I*v*a+w*d;const ce=o.as(X);return ce<1e-9?o.at(X):o.au(X,X,1/ce),{vecEast:X,vecSouth:z}}function ti(O,a,d,v){let w;v?(w=[O,a,v(O,a),1],o.aw(w,w,d)):(w=[O,a,0,1],yl(w,w,d));const I=w[3];return{point:new o.P(w[0]/I,w[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function bn(O,a){return .5+O/a*.5}function Vi(O,a){return O.x>=-a[0]&&O.x<=a[0]&&O.y>=-a[1]&&O.y<=a[1]}function zr(O,a,d,v,w,I,z,Y,X,ce,pe,Se,Me){const Fe=d?O.textSizeData:O.iconSizeData,qe=o.an(Fe,a.transform.zoom),it=[256/a.width*2+1,256/a.height*2+1],lt=d?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;lt.clear();const ht=O.lineVertexArray,bt=d?O.text.placedSymbolArray:O.icon.placedSymbolArray,vt=a.transform.width/a.transform.height;let xt=!1;for(let Dt=0;Dt<bt.length;Dt++){const Lt=bt.get(Dt);if(Lt.hidden||Lt.writingMode===o.ao.vertical&&!xt){Ds(Lt.numGlyphs,lt);continue}xt=!1;const St=new o.P(Lt.anchorX,Lt.anchorY),Gt={getElevation:Me,pitchedLabelPlaneMatrix:v,lineVertexArray:ht,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:St,unwrappedTileID:X,width:ce,height:pe,translation:Se},rn=os(Lt.anchorX,Lt.anchorY,Gt);if(!Vi(rn.point,it)){Ds(Lt.numGlyphs,lt);continue}const Ht=bn(a.transform.cameraToCenterDistance,rn.signedDistanceFromCamera),tn=o.ap(Fe,qe,Lt),sn=I?tn*a.transform.getPitchedTextCorrection(Lt.anchorX,Lt.anchorY,X)/Ht:tn*Ht,Yn=Zn({projectionContext:Gt,pitchedLabelPlaneMatrixInverse:w,symbol:Lt,fontSize:sn,flip:!1,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:lt,aspectRatio:vt,rotateToLine:Y});xt=Yn.useVertical,(Yn.notEnoughRoom||xt||Yn.needsFlipping&&Zn({projectionContext:Gt,pitchedLabelPlaneMatrixInverse:w,symbol:Lt,fontSize:sn,flip:!0,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:lt,aspectRatio:vt,rotateToLine:Y}).notEnoughRoom)&&Ds(Lt.numGlyphs,lt)}d?O.text.dynamicLayoutVertexBuffer.updateData(lt):O.icon.dynamicLayoutVertexBuffer.updateData(lt)}function $o(O,a,d,v,w,I,z,Y){const X=I.glyphStartIndex+I.numGlyphs,ce=I.lineStartIndex,pe=I.lineStartIndex+I.lineLength,Se=a.getoffsetX(I.glyphStartIndex),Me=a.getoffsetX(X-1),Fe=sa(O*Se,d,v,w,I.segment,ce,pe,Y,z);if(!Fe)return null;const qe=sa(O*Me,d,v,w,I.segment,ce,pe,Y,z);return qe?Y.projectionCache.anyProjectionOccluded?null:{first:Fe,last:qe}:null}function is(O,a,d,v){return O===o.ao.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*v?{useVertical:!0}:(O===o.ao.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function Zn(O){const{projectionContext:a,pitchedLabelPlaneMatrixInverse:d,symbol:v,fontSize:w,flip:I,keepUpright:z,glyphOffsetArray:Y,dynamicLayoutVertexArray:X,aspectRatio:ce,rotateToLine:pe}=O,Se=w/24,Me=v.lineOffsetX*Se,Fe=v.lineOffsetY*Se;let qe;if(v.numGlyphs>1){const it=v.glyphStartIndex+v.numGlyphs,lt=v.lineStartIndex,ht=v.lineStartIndex+v.lineLength,bt=$o(Se,Y,Me,Fe,I,v,pe,a);if(!bt)return{notEnoughRoom:!0};const vt=oa(bt.first.point.x,bt.first.point.y,a,d),xt=oa(bt.last.point.x,bt.last.point.y,a,d);if(z&&!I){const Dt=is(v.writingMode,vt,xt,ce);if(Dt)return Dt}qe=[bt.first];for(let Dt=v.glyphStartIndex+1;Dt<it-1;Dt++){const Lt=sa(Se*Y.getoffsetX(Dt),Me,Fe,I,v.segment,lt,ht,a,pe);if(!Lt)return{notEnoughRoom:!0};qe.push(Lt)}qe.push(bt.last)}else{if(z&&!I){const lt=ki(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,ht=v.lineStartIndex+v.segment+1,bt=new o.P(a.lineVertexArray.getx(ht),a.lineVertexArray.gety(ht)),vt=ki(bt.x,bt.y,a),xt=vt.signedDistanceFromCamera>0?vt.point:_i(a.tileAnchorPoint,bt,lt,1,a),Dt=oa(lt.x,lt.y,a,d),Lt=oa(xt.x,xt.y,a,d),St=is(v.writingMode,Dt,Lt,ce);if(St)return St}const it=sa(Se*Y.getoffsetX(v.glyphStartIndex),Me,Fe,I,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,a,pe);if(!it||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};qe=[it]}for(const it of qe)o.av(X,it.point,it.angle);return{}}function _i(O,a,d,v,w){const I=O.add(O.sub(a)._unit()),z=ki(I.x,I.y,w).point,Y=d.sub(z);return d.add(Y._mult(v/Y.mag()))}function Kr(O,a,d){const v=a.projectionCache;if(v.projections[O])return v.projections[O];const w=new o.P(a.lineVertexArray.getx(O),a.lineVertexArray.gety(O)),I=ki(w.x,w.y,a);if(I.signedDistanceFromCamera>0)return v.projections[O]=I.point,v.anyProjectionOccluded=v.anyProjectionOccluded||I.isOccluded,I.point;const z=O-d.direction;return _i(d.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(z),a.lineVertexArray.gety(z)),w,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,a)}function ki(O,a,d){const v=O+d.translation[0],w=a+d.translation[1];let I;return d.pitchWithMap?(I=ti(v,w,d.pitchedLabelPlaneMatrix,d.getElevation),I.isOccluded=!1):(I=d.transform.projectTileCoordinates(v,w,d.unwrappedTileID,d.getElevation),I.point.x=(.5*I.point.x+.5)*d.width,I.point.y=(.5*-I.point.y+.5)*d.height),I}function oa(O,a,d,v){if(d.pitchWithMap){const w=[O,a,0,1];return o.aw(w,w,v),d.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],d.unwrappedTileID,d.getElevation).point}return{x:O/d.width*2-1,y:1-a/d.height*2}}function os(O,a,d){return d.transform.projectTileCoordinates(O,a,d.unwrappedTileID,d.getElevation)}function Gr(O,a,d){return O._unit()._perp()._mult(a*d)}function qa(O,a,d,v,w,I,z,Y,X){if(Y.projectionCache.offsets[O])return Y.projectionCache.offsets[O];const ce=d.add(a);if(O+X.direction<v||O+X.direction>=w)return Y.projectionCache.offsets[O]=ce,ce;const pe=Kr(O+X.direction,Y,X),Se=Gr(pe.sub(d),z,X.direction),Me=d.add(Se),Fe=pe.add(Se);return Y.projectionCache.offsets[O]=o.ax(I,ce,Me,Fe)||ce,Y.projectionCache.offsets[O]}function sa(O,a,d,v,w,I,z,Y,X){const ce=v?O-a:O+a;let pe=ce>0?1:-1,Se=0;v&&(pe*=-1,Se=Math.PI),pe<0&&(Se+=Math.PI);let Me,Fe=pe>0?I+w:I+w+1;Y.projectionCache.cachedAnchorPoint?Me=Y.projectionCache.cachedAnchorPoint:(Me=ki(Y.tileAnchorPoint.x,Y.tileAnchorPoint.y,Y).point,Y.projectionCache.cachedAnchorPoint=Me);let qe,it,lt=Me,ht=Me,bt=0,vt=0;const xt=Math.abs(ce),Dt=[];let Lt;for(;bt+vt<=xt;){if(Fe+=pe,Fe<I||Fe>=z)return null;bt+=vt,ht=lt,it=qe;const rn={absOffsetX:xt,direction:pe,distanceFromAnchor:bt,previousVertex:ht};if(lt=Kr(Fe,Y,rn),d===0)Dt.push(ht),Lt=lt.sub(ht);else{let Ht;const tn=lt.sub(ht);Ht=tn.mag()===0?Gr(Kr(Fe+pe,Y,rn).sub(lt),d,pe):Gr(tn,d,pe),it||(it=ht.add(Ht)),qe=qa(Fe,Ht,lt,I,z,it,d,Y,rn),Dt.push(it),Lt=qe.sub(it)}vt=Lt.mag()}const St=Lt._mult((xt-bt)/vt)._add(it||ht),Gt=Se+Math.atan2(lt.y-ht.y,lt.x-ht.x);return Dt.push(St),{point:St,angle:X?Gt:0,path:Dt}}const jo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ds(O,a){for(let d=0;d<O;d++){const v=a.length;a.resize(v+4),a.float32.set(jo,3*v)}}function yl(O,a,d){const v=a[0],w=a[1];return O[0]=d[0]*v+d[4]*w+d[12],O[1]=d[1]*v+d[5]*w+d[13],O[3]=d[3]*v+d[7]*w+d[15],O}const si=100;class vA{constructor(a,d=new $r(a.width+200,a.height+200,25),v=new $r(a.width+200,a.height+200,25)){this.transform=a,this.grid=d,this.ignoredGrid=v,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+si,this.screenBottomBoundary=a.height+si,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,v,w,I,z,Y,X,ce,pe,Se,Me){const Fe=this.projectAndGetPerspectiveRatio(a.anchorPointX+X[0],a.anchorPointY+X[1],I,pe,Me),qe=v*Fe.perspectiveRatio;let it;if(z||Y)it=this._projectCollisionBox(a,qe,w,I,z,Y,X,Fe,pe,Se,Me);else{const Lt=Fe.x+(Se?Se.x*qe:0),St=Fe.y+(Se?Se.y*qe:0);it={allPointsOccluded:!1,box:[Lt+a.x1*qe,St+a.y1*qe,Lt+a.x2*qe,St+a.y2*qe]}}const[lt,ht,bt,vt]=it.box,xt=z?it.allPointsOccluded:Fe.isOccluded;let Dt=xt;return Dt||(Dt=Fe.perspectiveRatio<this.perspectiveRatioCutoff),Dt||(Dt=!this.isInsideGrid(lt,ht,bt,vt)),Dt||d!=="always"&&this.grid.hitTest(lt,ht,bt,vt,d,ce)?{box:[lt,ht,bt,vt],placeable:!1,offscreen:!1,occluded:xt}:{box:[lt,ht,bt,vt],placeable:!0,offscreen:this.isOffscreen(lt,ht,bt,vt),occluded:xt}}placeCollisionCircles(a,d,v,w,I,z,Y,X,ce,pe,Se,Me,Fe,qe){const it=[],lt=new o.P(d.anchorX,d.anchorY),ht=this.getPerspectiveRatio(lt.x,lt.y,z,qe),bt=(ce?I*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,z)/ht:I*ht)/o.aB,vt={getElevation:qe,pitchedLabelPlaneMatrix:Y,lineVertexArray:v,pitchWithMap:ce,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:lt,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:Fe},xt=$o(bt,w,d.lineOffsetX*bt,d.lineOffsetY*bt,!1,d,!1,vt);let Dt=!1,Lt=!1,St=!0;if(xt){const Gt=.5*Se*ht+Me,rn=new o.P(-100,-100),Ht=new o.P(this.screenRightBoundary,this.screenBottomBoundary),tn=new Qn,sn=xt.first,Yn=xt.last;let Gn=[];for(let ui=sn.path.length-1;ui>=1;ui--)Gn.push(sn.path[ui]);for(let ui=1;ui<Yn.path.length;ui++)Gn.push(Yn.path[ui]);const On=2.5*Gt;if(ce){const ui=this.projectPathToScreenSpace(Gn,vt);Gn=ui.some(xo=>xo.signedDistanceFromCamera<=0)?[]:ui.map(xo=>xo.point)}let _r=[];if(Gn.length>0){const ui=Gn[0].clone(),xo=Gn[0].clone();for(let Zo=1;Zo<Gn.length;Zo++)ui.x=Math.min(ui.x,Gn[Zo].x),ui.y=Math.min(ui.y,Gn[Zo].y),xo.x=Math.max(xo.x,Gn[Zo].x),xo.y=Math.max(xo.y,Gn[Zo].y);_r=ui.x>=rn.x&&xo.x<=Ht.x&&ui.y>=rn.y&&xo.y<=Ht.y?[Gn]:xo.x<rn.x||ui.x>Ht.x||xo.y<rn.y||ui.y>Ht.y?[]:o.ay([Gn],rn.x,rn.y,Ht.x,Ht.y)}for(const ui of _r){tn.reset(ui,.25*Gt);let xo=0;xo=tn.length<=.5*Gt?1:Math.ceil(tn.paddedLength/On)+1;for(let Zo=0;Zo<xo;Zo++){const Fo=Zo/Math.max(xo-1,1),Xo=tn.lerp(Fo),As=Xo.x+si,wi=Xo.y+si;it.push(As,wi,Gt,0);const Io=As-Gt,Ws=wi-Gt,ws=As+Gt,ha=wi+Gt;if(St=St&&this.isOffscreen(Io,Ws,ws,ha),Lt=Lt||this.isInsideGrid(Io,Ws,ws,ha),a!=="always"&&this.grid.hitTestCircle(As,wi,Gt,a,pe)&&(Dt=!0,!X))return{circles:[],offscreen:!1,collisionDetected:Dt}}}}return{circles:!X&&Dt||!Lt||ht<this.perspectiveRatioCutoff?[]:it,offscreen:St,collisionDetected:Dt}}projectPathToScreenSpace(a,d){const v=function(w,I){const z=o.L();return o.aq(z,I.pitchedLabelPlaneMatrix),w.map(Y=>{const X=ti(Y.x,Y.y,z,I.getElevation),ce=I.transform.projectTileCoordinates(X.point.x,X.point.y,I.unwrappedTileID,I.getElevation);return ce.point.x=(.5*ce.point.x+.5)*I.width,ce.point.y=(.5*-ce.point.y+.5)*I.height,ce})}(a,d);return function(w){let I=0,z=0,Y=0,X=0;for(let ce=0;ce<w.length;ce++)w[ce].isOccluded?(Y=ce+1,X=0):(X++,X>z&&(z=X,I=Y));return w.slice(I,I+z)}(v)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],v=new o.a2;for(const Se of a){const Me=new o.P(Se.x+si,Se.y+si);v.extend(Me),d.push(Me)}const{minX:w,minY:I,maxX:z,maxY:Y}=v,X=this.grid.query(w,I,z,Y).concat(this.ignoredGrid.query(w,I,z,Y)),ce={},pe={};for(const Se of X){const Me=Se.key;if(ce[Me.bucketInstanceId]===void 0&&(ce[Me.bucketInstanceId]={}),ce[Me.bucketInstanceId][Me.featureIndex])continue;const Fe=[new o.P(Se.x1,Se.y1),new o.P(Se.x2,Se.y1),new o.P(Se.x2,Se.y2),new o.P(Se.x1,Se.y2)];o.az(d,Fe)&&(ce[Me.bucketInstanceId][Me.featureIndex]=!0,pe[Me.bucketInstanceId]===void 0&&(pe[Me.bucketInstanceId]=[]),pe[Me.bucketInstanceId].push(Me.featureIndex))}return pe}insertCollisionBox(a,d,v,w,I,z){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:I,collisionGroupID:z,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,v,w,I,z){const Y=v?this.ignoredGrid:this.grid,X={bucketInstanceId:w,featureIndex:I,collisionGroupID:z,overlapMode:d};for(let ce=0;ce<a.length;ce+=4)Y.insertCircle(X,a[ce],a[ce+1],a[ce+2])}projectAndGetPerspectiveRatio(a,d,v,w,I){if(I){let z;w?(z=[a,d,w(a,d),1],o.aw(z,z,I)):(z=[a,d,0,1],yl(z,z,I));const Y=z[3];return{x:(z[0]/Y+1)/2*this.transform.width+si,y:(-z[1]/Y+1)/2*this.transform.height+si,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y*.5,isOccluded:!1,signedDistanceFromCamera:Y}}{const z=this.transform.projectTileCoordinates(a,d,v,w);return{x:(z.point.x+1)/2*this.transform.width+si,y:(1-z.point.y)/2*this.transform.height+si,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(a,d,v,w){const I=this.transform.projectTileCoordinates(a,d,v,w);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(a,d,v,w){return v<si||a>=this.screenRightBoundary||w<si||d>this.screenBottomBoundary}isInsideGrid(a,d,v,w){return v>=0&&a<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=o.ag([]);return o.M(a,a,[-100,-100,0]),a}_projectCollisionBox(a,d,v,w,I,z,Y,X,ce,pe,Se){let Me=1,Fe=0,qe=0,it=1;const lt=a.anchorPointX+Y[0],ht=a.anchorPointY+Y[1];if(z&&!I){const Gn=this.projectAndGetPerspectiveRatio(lt+1,ht,w,ce,Se),On=Gn.x-X.x,_r=Math.atan((Gn.y-X.y)/On)+(On<0?Math.PI:0),ui=Math.sin(_r),xo=Math.cos(_r);Me=xo,Fe=ui,qe=-ui,it=xo}else if(!z&&I){const Gn=or(this.transform);Me=Gn.vecEast[0],Fe=Gn.vecEast[1],qe=Gn.vecSouth[0],it=Gn.vecSouth[1]}let bt=X.x,vt=X.y,xt=d;I&&(bt=lt,vt=ht,xt=Math.pow(2,-(this.transform.zoom-v.overscaledZ)),xt*=this.transform.getPitchedTextCorrection(lt,ht,w),pe||(xt*=o.ah(.5+X.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),pe&&(bt+=Me*pe.x*xt+qe*pe.y*xt,vt+=Fe*pe.x*xt+it*pe.y*xt);const Dt=a.x1*xt,Lt=a.x2*xt,St=(Dt+Lt)/2,Gt=a.y1*xt,rn=a.y2*xt,Ht=(Gt+rn)/2,tn=[{offsetX:Dt,offsetY:Gt},{offsetX:St,offsetY:Gt},{offsetX:Lt,offsetY:Gt},{offsetX:Lt,offsetY:Ht},{offsetX:Lt,offsetY:rn},{offsetX:St,offsetY:rn},{offsetX:Dt,offsetY:rn},{offsetX:Dt,offsetY:Ht}];let sn=[];for(const{offsetX:Gn,offsetY:On}of tn)sn.push(new o.P(bt+Me*Gn+qe*On,vt+Fe*Gn+it*On));let Yn=!1;if(I){const Gn=sn.map(On=>this.projectAndGetPerspectiveRatio(On.x,On.y,w,ce,Se));Yn=Gn.some(On=>!On.isOccluded),sn=Gn.map(On=>new o.P(On.x,On.y))}else Yn=!0;return{box:o.aA(sn),allPointsOccluded:!Yn}}}class Bs{constructor(a,d,v,w){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):w&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Hr{constructor(a,d,v,w,I){this.text=new Bs(a?a.text:null,d,v,I),this.icon=new Bs(a?a.icon:null,d,w,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sr{constructor(a,d,v){this.text=a,this.icon=d,this.skipFade=v}}class aa{constructor(a,d,v,w,I){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=w,this.tileID=I}}class vs{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[a]}}function ss(O,a,d,v,w){const{horizontalAlign:I,verticalAlign:z}=o.aH(O);return new o.P(-(I-.5)*a+v[0]*w,-(z-.5)*d+v[1]*w)}class Ye{constructor(a,d,v,w,I){this.transform=a.clone(),this.terrain=d,this.collisionIndex=new vA(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new vs(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const d=this.terrain;return d?(v,w)=>d.getElevation(a,v,w):null}getBucketParts(a,d,v,w){const I=v.getBucket(d),z=v.latestFeatureIndex;if(!I||!z||d.id!==I.layerIds[0])return;const Y=v.collisionBoxArray,X=I.layers[0].layout,ce=I.layers[0].paint,pe=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Se=v.tileSize/o.$,Me=v.tileID.toUnwrapped(),Fe=X.get("text-rotation-alignment")==="map",qe=o.aC(v,1,this.transform.zoom),it=o.aD(this.collisionIndex.transform,v,ce.get("text-translate"),ce.get("text-translate-anchor")),lt=o.aD(this.collisionIndex.transform,v,ce.get("icon-translate"),ce.get("icon-translate-anchor")),ht=Br(Fe,this.transform,qe);this.retainedQueryData[I.bucketInstanceId]=new aa(I.bucketInstanceId,z,I.sourceLayerIndex,I.index,v.tileID);const bt={bucket:I,layout:X,translationText:it,translationIcon:lt,unwrappedTileID:Me,pitchedLabelPlaneMatrix:ht,scale:pe,textPixelRatio:Se,holdingForFade:v.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:o.an(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(w)for(const vt of I.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:Dt,symbolInstanceEnd:Lt}=vt;a.push({sortKey:xt,symbolInstanceStart:Dt,symbolInstanceEnd:Lt,parameters:bt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:bt})}attemptAnchorPlacement(a,d,v,w,I,z,Y,X,ce,pe,Se,Me,Fe,qe,it,lt,ht,bt,vt,xt){const Dt=o.aE[a.textAnchor],Lt=[a.textOffset0,a.textOffset1],St=ss(Dt,v,w,Lt,I),Gt=this.collisionIndex.placeCollisionBox(d,Me,X,ce,pe,Y,z,lt,Se.predicate,vt,St,xt);if((!bt||this.collisionIndex.placeCollisionBox(bt,Me,X,ce,pe,Y,z,ht,Se.predicate,vt,St,xt).placeable)&&Gt.placeable){let rn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Fe.crossTileID]&&this.prevPlacement.placements[Fe.crossTileID]&&this.prevPlacement.placements[Fe.crossTileID].text&&(rn=this.prevPlacement.variableOffsets[Fe.crossTileID].anchor),Fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Fe.crossTileID]={textOffset:Lt,width:v,height:w,anchor:Dt,textBoxScale:I,prevAnchor:rn},this.markUsedJustification(qe,Dt,Fe,it),qe.allowVerticalPlacement&&(this.markUsedOrientation(qe,it,Fe),this.placedOrientations[Fe.crossTileID]=it),{shift:St,placedGlyphBoxes:Gt}}}placeLayerBucketPart(a,d,v){const{bucket:w,layout:I,translationText:z,translationIcon:Y,unwrappedTileID:X,pitchedLabelPlaneMatrix:ce,textPixelRatio:pe,holdingForFade:Se,collisionBoxArray:Me,partiallyEvaluatedTextSize:Fe,collisionGroup:qe}=a.parameters,it=I.get("text-optional"),lt=I.get("icon-optional"),ht=o.aF(I,"text-overlap","text-allow-overlap"),bt=ht==="always",vt=o.aF(I,"icon-overlap","icon-allow-overlap"),xt=vt==="always",Dt=I.get("text-rotation-alignment")==="map",Lt=I.get("text-pitch-alignment")==="map",St=I.get("icon-text-fit")!=="none",Gt=I.get("symbol-z-order")==="viewport-y",rn=bt&&(xt||!w.hasIconData()||lt),Ht=xt&&(bt||!w.hasTextData()||it);!w.collisionArrays&&Me&&w.deserializeCollisionBoxes(Me);const tn=this.retainedQueryData[w.bucketInstanceId].tileID,sn=this._getTerrainElevationFunc(tn),Yn=this.transform.getFastPathSimpleProjectionMatrix(tn),Gn=(On,_r,ui)=>{var xo,Zo;if(d[On.crossTileID])return;if(Se)return void(this.placements[On.crossTileID]=new Sr(!1,!1,!1));let Fo=!1,Xo=!1,As=!0,wi=null,Io={box:null,placeable:!1,offscreen:null,occluded:!1},Ws={placeable:!1},ws=null,ha=null,Js=null,nu=0,ju=0,iA=0;_r.textFeatureIndex?nu=_r.textFeatureIndex:On.useRuntimeCollisionCircles&&(nu=On.featureIndex),_r.verticalTextFeatureIndex&&(ju=_r.verticalTextFeatureIndex);const Lh=_r.textBox;if(Lh){const El=zo=>{let ms=o.ao.horizontal;if(w.allowVerticalPlacement&&!zo&&this.prevPlacement){const jl=this.prevPlacement.placedOrientations[On.crossTileID];jl&&(this.placedOrientations[On.crossTileID]=jl,ms=jl,this.markUsedOrientation(w,ms,On))}return ms},Wu=(zo,ms)=>{if(w.allowVerticalPlacement&&On.numVerticalGlyphVertices>0&&_r.verticalTextBox){for(const jl of w.writingModes)if(jl===o.ao.vertical?(Io=ms(),Ws=Io):Io=zo(),Io&&Io.placeable)break}else Io=zo()},fl=On.textAnchorOffsetStartIndex,Qu=On.textAnchorOffsetEndIndex;if(Qu===fl){const zo=(ms,jl)=>{const Ua=this.collisionIndex.placeCollisionBox(ms,ht,pe,tn,X,Lt,Dt,z,qe.predicate,sn,void 0,Yn);return Ua&&Ua.placeable&&(this.markUsedOrientation(w,jl,On),this.placedOrientations[On.crossTileID]=jl),Ua};Wu(()=>zo(Lh,o.ao.horizontal),()=>{const ms=_r.verticalTextBox;return w.allowVerticalPlacement&&On.numVerticalGlyphVertices>0&&ms?zo(ms,o.ao.vertical):{box:null,offscreen:null}}),El(Io&&Io.placeable)}else{let zo=o.aE[(Zo=(xo=this.prevPlacement)===null||xo===void 0?void 0:xo.variableOffsets[On.crossTileID])===null||Zo===void 0?void 0:Zo.anchor];const ms=(Ua,dc,oA)=>{const ea=Ua.x2-Ua.x1,kA=Ua.y2-Ua.y1,Su=On.textBoxScale,gf=St&&vt==="never"?dc:null;let Xa=null,zh=ht==="never"?1:2,Rd="never";zo&&zh++;for(let Yu=0;Yu<zh;Yu++){for(let Nh=fl;Nh<Qu;Nh++){const ru=w.textAnchorOffsets.get(Nh);if(zo&&ru.textAnchor!==zo)continue;const qu=this.attemptAnchorPlacement(ru,Ua,ea,kA,Su,Dt,Lt,pe,tn,X,qe,Rd,On,w,oA,z,Y,gf,sn);if(qu&&(Xa=qu.placedGlyphBoxes,Xa&&Xa.placeable))return Fo=!0,wi=qu.shift,Xa}zo?zo=null:Rd=ht}return v&&!Xa&&(Xa={box:this.collisionIndex.placeCollisionBox(Lh,"always",pe,tn,X,Lt,Dt,z,qe.predicate,sn,void 0,Yn).box,offscreen:!1,placeable:!1,occluded:!1}),Xa};Wu(()=>ms(Lh,_r.iconBox,o.ao.horizontal),()=>{const Ua=_r.verticalTextBox;return w.allowVerticalPlacement&&(!Io||!Io.placeable)&&On.numVerticalGlyphVertices>0&&Ua?ms(Ua,_r.verticalIconBox,o.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Io&&(Fo=Io.placeable,As=Io.offscreen);const jl=El(Io&&Io.placeable);if(!Fo&&this.prevPlacement){const Ua=this.prevPlacement.variableOffsets[On.crossTileID];Ua&&(this.variableOffsets[On.crossTileID]=Ua,this.markUsedJustification(w,Ua.anchor,On,jl))}}}if(ws=Io,Fo=ws&&ws.placeable,As=ws&&ws.offscreen,On.useRuntimeCollisionCircles){const El=w.text.placedSymbolArray.get(On.centerJustifiedTextSymbolIndex),Wu=o.ap(w.textSizeData,Fe,El),fl=I.get("text-padding");ha=this.collisionIndex.placeCollisionCircles(ht,El,w.lineVertexArray,w.glyphOffsetArray,Wu,X,ce,v,Lt,qe.predicate,On.collisionCircleDiameter,fl,z,sn),ha.circles.length&&ha.collisionDetected&&!v&&o.w("Collisions detected, but collision boxes are not shown"),Fo=bt||ha.circles.length>0&&!ha.collisionDetected,As=As&&ha.offscreen}if(_r.iconFeatureIndex&&(iA=_r.iconFeatureIndex),_r.iconBox){const El=Wu=>this.collisionIndex.placeCollisionBox(Wu,vt,pe,tn,X,Lt,Dt,Y,qe.predicate,sn,St&&wi?wi:void 0,Yn);Ws&&Ws.placeable&&_r.verticalIconBox?(Js=El(_r.verticalIconBox),Xo=Js.placeable):(Js=El(_r.iconBox),Xo=Js.placeable),As=As&&Js.offscreen}const Uh=it||On.numHorizontalGlyphVertices===0&&On.numVerticalGlyphVertices===0,wu=lt||On.numIconVertices===0;Uh||wu?wu?Uh||(Xo=Xo&&Fo):Fo=Xo&&Fo:Xo=Fo=Xo&&Fo;const Kc=Xo&&Js.placeable;if(Fo&&ws.placeable&&this.collisionIndex.insertCollisionBox(ws.box,ht,I.get("text-ignore-placement"),w.bucketInstanceId,Ws&&Ws.placeable&&ju?ju:nu,qe.ID),Kc&&this.collisionIndex.insertCollisionBox(Js.box,vt,I.get("icon-ignore-placement"),w.bucketInstanceId,iA,qe.ID),ha&&Fo&&this.collisionIndex.insertCollisionCircles(ha.circles,ht,I.get("text-ignore-placement"),w.bucketInstanceId,nu,qe.ID),v&&this.storeCollisionData(w.bucketInstanceId,ui,_r,ws,Js,ha),On.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[On.crossTileID]=new Sr((Fo||rn)&&!ws?.occluded,(Xo||Ht)&&!Js?.occluded,As||w.justReloaded),d[On.crossTileID]=!0};if(Gt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const On=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let _r=On.length-1;_r>=0;--_r){const ui=On[_r];Gn(w.symbolInstances.get(ui),w.collisionArrays[ui],ui)}}else for(let On=a.symbolInstanceStart;On<a.symbolInstanceEnd;On++)Gn(w.symbolInstances.get(On),w.collisionArrays[On],On);w.justReloaded=!1}storeCollisionData(a,d,v,w,I,z){if(v.textBox||v.iconBox){let Y,X;this.collisionBoxArrays.has(a)?Y=this.collisionBoxArrays.get(a):(Y=new Map,this.collisionBoxArrays.set(a,Y)),Y.has(d)?X=Y.get(d):(X={text:null,icon:null},Y.set(d,X)),v.textBox&&(X.text=w.box),v.iconBox&&(X.icon=I.box)}if(z){let Y=this.collisionCircleArrays[a];Y===void 0&&(Y=this.collisionCircleArrays[a]=[]);for(let X=0;X<z.circles.length;X+=4)Y.push(z.circles[X+0]-si),Y.push(z.circles[X+1]-si),Y.push(z.circles[X+2]),Y.push(z.collisionDetected?1:0)}}markUsedJustification(a,d,v,w){let I;I=w===o.ao.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[o.aG(d)];const z=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const Y of z)Y>=0&&(a.text.placedSymbolArray.get(Y).crossTileID=I>=0&&Y!==I?0:v.crossTileID)}markUsedOrientation(a,d,v){const w=d===o.ao.horizontal||d===o.ao.horizontalOnly?d:0,I=d===o.ao.vertical?d:0,z=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const Y of z)a.text.placedSymbolArray.get(Y).placedOrientation=w;v.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(a):1,I=d?d.opacities:{},z=d?d.variableOffsets:{},Y=d?d.placedOrientations:{};for(const X in this.placements){const ce=this.placements[X],pe=I[X];pe?(this.opacities[X]=new Hr(pe,w,ce.text,ce.icon),v=v||ce.text!==pe.text.placed||ce.icon!==pe.icon.placed):(this.opacities[X]=new Hr(null,w,ce.text,ce.icon,ce.skipFade),v=v||ce.text||ce.icon)}for(const X in I){const ce=I[X];if(!this.opacities[X]){const pe=new Hr(ce,w,!1,!1);pe.isHidden()||(this.opacities[X]=pe,v=v||ce.text.placed||ce.icon.placed)}}for(const X in z)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=z[X]);for(const X in Y)this.placedOrientations[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.placedOrientations[X]=Y[X]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const v={};for(const w of d){const I=w.getBucket(a);I&&w.latestFeatureIndex&&a.id===I.layerIds[0]&&this.updateBucketOpacities(I,w.tileID,v,w.collisionBoxArray)}}updateBucketOpacities(a,d,v,w){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const I=a.layers[0],z=I.layout,Y=new Hr(null,0,!1,!1,!0),X=z.get("text-allow-overlap"),ce=z.get("icon-allow-overlap"),pe=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Se=z.get("text-rotation-alignment")==="map",Me=z.get("text-pitch-alignment")==="map",Fe=z.get("icon-text-fit")!=="none",qe=new Hr(null,0,X&&(ce||!a.hasIconData()||z.get("icon-optional")),ce&&(X||!a.hasTextData()||z.get("text-optional")),!0);!a.collisionArrays&&w&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(w);const it=(ht,bt,vt)=>{for(let xt=0;xt<bt/4;xt++)ht.opacityVertexArray.emplaceBack(vt);ht.hasVisibleVertices=ht.hasVisibleVertices||vt!==CA},lt=this.collisionBoxArrays.get(a.bucketInstanceId);for(let ht=0;ht<a.symbolInstances.length;ht++){const bt=a.symbolInstances.get(ht),{numHorizontalGlyphVertices:vt,numVerticalGlyphVertices:xt,crossTileID:Dt}=bt;let Lt=this.opacities[Dt];v[Dt]?Lt=Y:Lt||(Lt=qe,this.opacities[Dt]=Lt),v[Dt]=!0;const St=bt.numIconVertices>0,Gt=this.placedOrientations[bt.crossTileID],rn=Gt===o.ao.vertical,Ht=Gt===o.ao.horizontal||Gt===o.ao.horizontalOnly;if(vt>0||xt>0){const sn=va(Lt.text);it(a.text,vt,rn?CA:sn),it(a.text,xt,Ht?CA:sn);const Yn=Lt.text.isHidden();[bt.rightJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.leftJustifiedTextSymbolIndex].forEach(_r=>{_r>=0&&(a.text.placedSymbolArray.get(_r).hidden=Yn||rn?1:0)}),bt.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(bt.verticalPlacedTextSymbolIndex).hidden=Yn||Ht?1:0);const Gn=this.variableOffsets[bt.crossTileID];Gn&&this.markUsedJustification(a,Gn.anchor,bt,Gt);const On=this.placedOrientations[bt.crossTileID];On&&(this.markUsedJustification(a,"left",bt,On),this.markUsedOrientation(a,On,bt))}if(St){const sn=va(Lt.icon),Yn=!(Fe&&bt.verticalPlacedIconSymbolIndex&&rn);bt.placedIconSymbolIndex>=0&&(it(a.icon,bt.numIconVertices,Yn?sn:CA),a.icon.placedSymbolArray.get(bt.placedIconSymbolIndex).hidden=Lt.icon.isHidden()),bt.verticalPlacedIconSymbolIndex>=0&&(it(a.icon,bt.numVerticalIconVertices,Yn?CA:sn),a.icon.placedSymbolArray.get(bt.verticalPlacedIconSymbolIndex).hidden=Lt.icon.isHidden())}const tn=lt&&lt.has(ht)?lt.get(ht):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const sn=a.collisionArrays[ht];if(sn){let Yn=new o.P(0,0);if(sn.textBox||sn.verticalTextBox){let Gn=!0;if(pe){const On=this.variableOffsets[Dt];On?(Yn=ss(On.anchor,On.width,On.height,On.textOffset,On.textBoxScale),Se&&Yn._rotate(Me?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Gn=!1}if(sn.textBox||sn.verticalTextBox){let On;sn.textBox&&(On=rn),sn.verticalTextBox&&(On=Ht),Et(a.textCollisionBox.collisionVertexArray,Lt.text.placed,!Gn||On,tn.text,Yn.x,Yn.y)}}if(sn.iconBox||sn.verticalIconBox){const Gn=!!(!Ht&&sn.verticalIconBox);let On;sn.iconBox&&(On=Gn),sn.verticalIconBox&&(On=!Gn),Et(a.iconCollisionBox.collisionVertexArray,Lt.icon.placed,On,tn.icon,Fe?Yn.x:0,Fe?Yn.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function Et(O,a,d,v,w,I){v&&v.length!==0||(v=[0,0,0,0]);const z=v[0]-si,Y=v[1]-si,X=v[2]-si,ce=v[3]-si;O.emplaceBack(a?1:0,d?1:0,w||0,I||0,z,Y),O.emplaceBack(a?1:0,d?1:0,w||0,I||0,X,Y),O.emplaceBack(a?1:0,d?1:0,w||0,I||0,X,ce),O.emplaceBack(a?1:0,d?1:0,w||0,I||0,z,ce)}const gn=Math.pow(2,25),Nn=Math.pow(2,24),cn=Math.pow(2,17),sr=Math.pow(2,16),ji=Math.pow(2,9),wo=Math.pow(2,8),xs=Math.pow(2,1);function va(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const a=O.placed?1:0,d=Math.floor(127*O.opacity);return d*gn+a*Nn+d*cn+a*sr+d*ji+a*wo+d*xs+a}const CA=0;class Ci{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,v,w,I){const z=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(z,w,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((Y,X)=>Y.sortKey-X.sortKey));this._currentPartIndex<z.length;)if(d.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,I())return!0;return!1}}class cu{constructor(a,d,v,w,I,z,Y,X){this.placement=new Ye(a,d,z,Y,X),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(a,d,v){const w=D.now(),I=()=>!this._forceFullPlacement&&D.now()-w>2;for(;this._currentPlacementIndex>=0;){const z=d[a[this._currentPlacementIndex]],Y=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=Y)&&(!z.maxzoom||z.maxzoom>Y)){if(this._inProgressLayer||(this._inProgressLayer=new Ci(z)),this._inProgressLayer.continuePlacement(v[z.source],this.placement,this._showCollisionBoxes,z,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Hl=512/o.$/2;class $a{constructor(a,d,v){this.tileID=a,this.bucketInstanceId=v,this._symbolsByKey={};const w=new Map;for(let I=0;I<d.length;I++){const z=d.get(I),Y=z.key,X=w.get(Y);X?X.push(z):w.set(Y,[z])}for(const[I,z]of w){const Y={positions:z.map(X=>({x:Math.floor(X.anchorX*Hl),y:Math.floor(X.anchorY*Hl)})),crossTileIDs:z.map(X=>X.crossTileID)};if(Y.positions.length>128){const X=new o.aI(Y.positions.length,16,Uint16Array);for(const{x:ce,y:pe}of Y.positions)X.add(ce,pe);X.finish(),delete Y.positions,Y.index=X}this._symbolsByKey[I]=Y}}getScaledCoordinates(a,d){const{x:v,y:w,z:I}=this.tileID.canonical,{x:z,y:Y,z:X}=d.canonical,ce=Hl/Math.pow(2,X-I),pe=(Y*o.$+a.anchorY)*ce,Se=w*o.$*Hl;return{x:Math.floor((z*o.$+a.anchorX)*ce-v*o.$*Hl),y:Math.floor(pe-Se)}}findMatches(a,d,v){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let I=0;I<a.length;I++){const z=a.get(I);if(z.crossTileID)continue;const Y=this._symbolsByKey[z.key];if(!Y)continue;const X=this.getScaledCoordinates(z,d);if(Y.index){const ce=Y.index.range(X.x-w,X.y-w,X.x+w,X.y+w).sort();for(const pe of ce){const Se=Y.crossTileIDs[pe];if(!v[Se]){v[Se]=!0,z.crossTileID=Se;break}}}else if(Y.positions)for(let ce=0;ce<Y.positions.length;ce++){const pe=Y.positions[ce],Se=Y.crossTileIDs[ce];if(Math.abs(pe.x-X.x)<=w&&Math.abs(pe.y-X.y)<=w&&!v[Se]){v[Se]=!0,z.crossTileID=Se;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Ca{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class wc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const v in this.indexes){const w=this.indexes[v],I={};for(const z in w){const Y=w[z];Y.tileID=Y.tileID.unwrapTo(Y.tileID.wrap+d),I[Y.tileID.key]=Y}this.indexes[v]=I}this.lng=a}addBucket(a,d,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let I=0;I<d.symbolInstances.length;I++)d.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const w=this.usedCrossTileIDs[a.overscaledZ];for(const I in this.indexes){const z=this.indexes[I];if(Number(I)>a.overscaledZ)for(const Y in z){const X=z[Y];X.tileID.isChildOf(a)&&X.findMatches(d.symbolInstances,a,w)}else{const Y=z[a.scaledTo(Number(I)).key];Y&&Y.findMatches(d.symbolInstances,a,w)}}for(let I=0;I<d.symbolInstances.length;I++){const z=d.symbolInstances.get(I);z.crossTileID||(z.crossTileID=v.generate(),w[z.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new $a(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const v of d.getCrossTileIDsLists())for(const w of v)delete this.usedCrossTileIDs[a][w]}removeStaleBuckets(a){let d=!1;for(const v in this.indexes){const w=this.indexes[v];for(const I in w)a[w[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,w[I]),delete w[I],d=!0)}return d}}class _a{constructor(){this.layerIndexes={},this.crossTileIDs=new Ca,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,v){let w=this.layerIndexes[a.id];w===void 0&&(w=this.layerIndexes[a.id]=new wc);let I=!1;const z={};w.handleWrapJump(v);for(const Y of d){const X=Y.getBucket(a);X&&a.id===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(Y.tileID,X,this.crossTileIDs)&&(I=!0),z[X.bucketInstanceId]=!0)}return w.removeStaleBuckets(z)&&(I=!0),I}pruneUnusedLayers(a){const d={};a.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}var gi="void main() {fragColor=vec4(1.0);}";const So={prelude:yi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:yi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:yi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:yi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:yi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:yi(gi,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:yi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:yi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:yi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:yi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:yi(gi,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:yi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:yi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:yi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:yi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:yi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:yi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:yi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:yi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:yi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:yi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:yi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:yi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:yi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:yi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:yi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:yi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:yi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:yi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:yi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yi(O,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=a.match(/in ([\w]+) ([\w]+)/g),w=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=I?I.concat(w):w,Y={};return{fragmentSource:O=O.replace(d,(X,ce,pe,Se,Me)=>(Y[Me]=!0,ce==="define"?`
#ifndef HAS_UNIFORM_u_${Me}
in ${pe} ${Se} ${Me};
#else
uniform ${pe} ${Se} u_${Me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Me}
    ${pe} ${Se} ${Me} = u_${Me};
#endif
`)),vertexSource:a=a.replace(d,(X,ce,pe,Se,Me)=>{const Fe=Se==="float"?"vec2":"vec4",qe=Me.match(/color/)?"color":Fe;return Y[Me]?ce==="define"?`
#ifndef HAS_UNIFORM_u_${Me}
uniform lowp float u_${Me}_t;
in ${pe} ${Fe} a_${Me};
out ${pe} ${Se} ${Me};
#else
uniform ${pe} ${Se} u_${Me};
#endif
`:qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Me}
    ${Me} = a_${Me};
#else
    ${pe} ${Se} ${Me} = u_${Me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Me}
    ${Me} = unpack_mix_${qe}(a_${Me}, u_${Me}_t);
#else
    ${pe} ${Se} ${Me} = u_${Me};
#endif
`:ce==="define"?`
#ifndef HAS_UNIFORM_u_${Me}
uniform lowp float u_${Me}_t;
in ${pe} ${Fe} a_${Me};
#else
uniform ${pe} ${Se} u_${Me};
#endif
`:qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Me}
    ${pe} ${Se} ${Me} = a_${Me};
#else
    ${pe} ${Se} ${Me} = u_${Me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Me}
    ${pe} ${Se} ${Me} = unpack_mix_${qe}(a_${Me}, u_${Me}_t);
#else
    ${pe} ${Se} ${Me} = u_${Me};
#endif
`}),staticAttributes:v,staticUniforms:z}}class ol{constructor(a,d,v){this.vertexBuffer=a,this.indexBuffer=d,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var cs=o.aJ([{name:"a_pos",type:"Int16",components:2}]);const sl="#define PROJECTION_MERCATOR",Fl="mercator";class Bi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Fl}get shaderDefine(){return sl}get shaderPreludeCode(){return So.projectionMercator}get vertexShaderPreludeCode(){return So.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,d,v,w,I){if(this._cachedMesh)return this._cachedMesh;const z=new o.aL;z.emplaceBack(0,0),z.emplaceBack(o.$,0),z.emplaceBack(0,o.$),z.emplaceBack(o.$,o.$);const Y=a.createVertexBuffer(z,cs.members),X=o.aM.simpleSegment(0,0,4,2),ce=new o.aN;ce.emplaceBack(1,0,2),ce.emplaceBack(1,2,3);const pe=a.createIndexBuffer(ce);return this._cachedMesh=new ol(Y,pe,X),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class vl{constructor(a=0,d=0,v=0,w=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=v,this.right=w}interpolate(a,d,v){return d.top!=null&&a.top!=null&&(this.top=o.C.number(a.top,d.top,v)),d.bottom!=null&&a.bottom!=null&&(this.bottom=o.C.number(a.bottom,d.bottom,v)),d.left!=null&&a.left!=null&&(this.left=o.C.number(a.left,d.left,v)),d.right!=null&&a.right!=null&&(this.right=o.C.number(a.right,d.right,v)),this}getCenter(a,d){const v=o.ah((this.left+a-this.right)/2,0,a),w=o.ah((this.top+d-this.bottom)/2,0,d);return new o.P(v,w)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new vl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function al(O,a){if(!O.renderWorldCopies||O.lngRange)return;const d=a.lng-O.center.lng;a.lng+=d>180?-360:d<-180?360:0}function Eo(O){return Math.max(0,Math.floor(O))}class go{constructor(a,d,v,w,I,z){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=d||0,this._maxZoom=v||22,this._minPitch=w??0,this._maxPitch=I??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Eo(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new vl,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,d,v){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Eo(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new vl(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!v&&a.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){const d=o.aO(a,-180,180)*Math.PI/180;var v,w,I,z,Y,X,ce,pe,Se;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=C(),v=this._rotationMatrix,I=-this._bearingInRadians,z=(w=this._rotationMatrix)[0],Y=w[1],X=w[2],ce=w[3],pe=Math.sin(I),Se=Math.cos(I),v[0]=z*Se+X*pe,v[1]=Y*Se+ce*pe,v[2]=z*-pe+X*Se,v[3]=Y*-pe+ce*Se)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){const d=o.ah(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){const d=a/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aP(this._fovInRadians)}setFov(a){a=o.ah(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ae(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){const d=this.getConstrained(this._center,a).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=o.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,d){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,v){this._unmodified=!1,this._edgeInsets.interpolate(a,d,v),this._constrain(),this._calcMatrices()}resize(a,d,v=!0){this._width=a,this._height=d,v&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new gt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ai,o.ai])}getConstrained(a,d){return this._callbacks.getConstrained(a,d)}getCameraQueryGeometry(a,d){if(d.length===1)return[d[0],a];{const{minX:v,minY:w,maxX:I,maxY:z}=o.a2.fromPoints(d).extend(a);return[new o.P(v,w),new o.P(I,w),new o.P(I,z),new o.P(v,z),new o.P(v,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(v),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ag(new Float64Array(16));o.N(a,a,[this._width/2,-this._height/2,1]),o.M(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ag(new Float64Array(16)),o.N(a,a,[1,-1,1]),o.M(a,a,[-1,-1,0]),o.N(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,d,v,w){const I=v!==void 0?v:this.bearing,z=w=w!==void 0?w:this.pitch,Y=o.a1.fromLngLat(a,d),X=-Math.cos(o.ae(z)),ce=Math.sin(o.ae(z)),pe=ce*Math.sin(o.ae(I)),Se=-ce*Math.cos(o.ae(I));let Me=this.elevation;const Fe=d-Me;let qe;X*Fe>=0||Math.abs(X)<.1?(qe=1e4,Me=d+qe*X):qe=-Fe/X;let it,lt,ht=o.aQ(1,Y.y),bt=0;do{if(bt+=1,bt>10)break;lt=qe/ht,it=new o.a1(Y.x+pe*lt,Y.y+Se*lt),ht=1/it.meterInMercatorCoordinateUnits()}while(Math.abs(qe-lt*ht)>1e-12);return{center:it.toLngLat(),elevation:Me,zoom:o.ak(this.height/2/Math.tan(this.fovInRadians/2)/lt/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;const d=o.aj(1,this.center.lat)*this.worldSize,v=this.cameraToCenterDistance/d,w=o.a1.fromLngLat(this.center,this.elevation),I=De(this.center,this.elevation,this.pitch,this.bearing,v);this._elevation=a;const z=this.calculateCenterFromCameraLngLatAlt(I.toLngLat(),o.aQ(I.z,w.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const a=o.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];const d=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/d,a.canonical.y/d,1/d/o.$,1/d/o.$]}}class hs{constructor(a,d){this.min=a,this.max=d,this.center=o.aR([],o.aS([],this.min,this.max),.5)}quadrant(a){const d=[a%2==0,a<2],v=o.aT(this.min),w=o.aT(this.max);for(let I=0;I<d.length;I++)v[I]=d[I]?this.min[I]:this.center[I],w[I]=d[I]?this.center[I]:this.max[I];return w[2]=this.max[2],new hs(v,w)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let d=!0;for(let v=0;v<a.planes.length;v++){const w=this.intersectsPlane(a.planes[v]);if(w===0)return 0;w===1&&(d=!1)}return d?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let d=a[3],v=a[3];for(let w=0;w<3;w++)a[w]>0?(d+=a[w]*this.min[w],v+=a[w]*this.max[w]):(v+=a[w]*this.min[w],d+=a[w]*this.max[w]);return d>=0?2:v<0?0:1}}class as{distanceToTile2d(a,d,v,w){const I=w.distanceX([a,d]),z=w.distanceY([a,d]);return Math.hypot(I,z)}getWrap(a,d,v){return v}getTileBoundingVolume(a,d,v,w){var I,z;let Y=0,X=0;if(w?.terrain){const pe=new o.Z(a.z,d,a.z,a.x,a.y),Se=w.terrain.getMinMaxElevation(pe);Y=(I=Se.minElevation)!==null&&I!==void 0?I:Math.min(0,v),X=(z=Se.maxElevation)!==null&&z!==void 0?z:Math.max(0,v)}const ce=1<<a.z;return new hs([d+a.x/ce,a.y/ce,Y],[d+(a.x+1)/ce,(a.y+1)/ce,X])}allowVariableZoom(a,d){const v=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,w=o.ah(78.5-v/2,0,60);return!!d.terrain||a.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class yo{constructor(a,d,v){this.points=a,this.planes=d,this.aabb=v}static fromInvProjectionMatrix(a,d=1,v=0,w,I){const z=I?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Y=Math.pow(2,v),X=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Me=>function(Fe,qe,it,lt){const ht=o.aw([],Fe,qe),bt=1/ht[3]/it*lt;return o.aY(ht,ht,[bt,bt,1/ht[3],bt])}(Me,a,d,Y));w&&function(Me,Fe,qe,it){const lt=it?4:0,ht=it?0:4;let bt=0;const vt=[],xt=[];for(let St=0;St<4;St++){const Gt=o.aU([],Me[St+ht],Me[St+lt]),rn=o.aZ(Gt);o.aR(Gt,Gt,1/rn),vt.push(rn),xt.push(Gt)}for(let St=0;St<4;St++){const Gt=o.a_(Me[St+lt],xt[St],qe);bt=Gt!==null&&Gt>=0?Math.max(bt,Gt):Math.max(bt,vt[St])}const Dt=function(St,Gt){const rn=o.aU([],St[Gt[0]],St[Gt[1]]),Ht=o.aU([],St[Gt[2]],St[Gt[1]]),tn=[0,0,0,0];return o.aV(tn,o.aW([],rn,Ht)),tn[3]=-o.aX(tn,St[Gt[0]]),tn}(Me,Fe),Lt=function(St,Gt){const rn=o.a$(St),Ht=o.b0([],St,1/rn),tn=o.aU([],Gt,o.aR([],Ht,o.aX(Gt,Ht))),sn=o.a$(tn);if(sn>0){const Yn=Math.sqrt(1-Ht[3]*Ht[3]),Gn=o.aR([],Ht,-Ht[3]),On=o.aS([],Gn,o.aR([],tn,Yn/sn));return o.b1(Gt,On)}return null}(qe,Dt);if(Lt!==null){const St=Lt/o.aX(xt[0],Dt);bt=Math.min(bt,St)}for(let St=0;St<4;St++){const Gt=Math.min(bt,vt[St]);Me[St+ht]=[Me[St+lt][0]+xt[St][0]*Gt,Me[St+lt][1]+xt[St][1]*Gt,Me[St+lt][2]+xt[St][2]*Gt,1]}}(X,z[0],w,I);const ce=z.map(Me=>{const Fe=o.aU([],X[Me[0]],X[Me[1]]),qe=o.aU([],X[Me[2]],X[Me[1]]),it=o.aV([],o.aW([],Fe,qe)),lt=-o.aX(it,X[Me[1]]);return it.concat(lt)}),pe=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Se=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Me of X)for(let Fe=0;Fe<3;Fe++)pe[Fe]=Math.min(pe[Fe],Me[Fe]),Se[Fe]=Math.max(Se[Fe],Me[Fe]);return new yo(X,ce,new hs(pe,Se))}}class Xi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,d,v){return this._helper.interpolatePadding(a,d,v)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,d,v=!0){this._helper.resize(a,d,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,d){this._helper.overrideNearFarZ(a,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,d){}constructor(a,d,v,w,I){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new go({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,Y)=>this.getConstrained(z,Y)},a,d,v,w,I),this._coveringTilesDetailsProvider=new as}clone(){const a=new Xi;return a.apply(this),a}apply(a,d,v){this._helper.apply(a,d,v)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){const d=[new o.b2(0,a)];if(this._helper._renderWorldCopies){const v=this.screenPointToMercatorCoordinate(new o.P(0,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),Y=Math.floor(Math.min(v.x,w.x,I.x,z.x)),X=Math.floor(Math.max(v.x,w.x,I.x,z.x)),ce=1;for(let pe=Y-ce;pe<=X+ce;pe++)pe!==0&&d.push(new o.b2(pe,a))}return d}getCameraFrustum(){return yo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){const d=this.screenPointToLocation(this.centerPoint,a),v=a?a.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(v)}setLocationAtPoint(a,d){const v=o.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(d,v),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,v),z=o.a1.fromLngLat(a),Y=new o.a1(z.x-(w.x-I.x),z.y-(w.y-I.y));this.setCenter(Y?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,d){return d?this.coordinatePoint(o.a1.fromLngLat(a),d.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a1.fromLngLat(a))}screenPointToLocation(a,d){var v;return(v=this.screenPointToMercatorCoordinate(a,d))===null||v===void 0?void 0:v.toLngLat()}screenPointToMercatorCoordinate(a,d){if(d){const v=d.pointCoordinate(a);if(v!=null)return v}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,d){const v=d||0,w=[a.x,a.y,0,1],I=[a.x,a.y,1,1];o.aw(w,w,this._pixelMatrixInverse),o.aw(I,I,this._pixelMatrixInverse);const z=w[3],Y=I[3],X=w[1]/z,ce=I[1]/Y,pe=w[2]/z,Se=I[2]/Y,Me=pe===Se?0:(v-pe)/(Se-pe);return new o.a1(o.C.number(w[0]/z,I[0]/Y,Me)/this.worldSize,o.C.number(X,ce,Me)/this.worldSize,v)}coordinatePoint(a,d=0,v=this._pixelMatrix){const w=[a.x*this.worldSize,a.y*this.worldSize,d,1];return o.aw(w,w,v),new o.P(w[0]/w[3],w[1]/w[3])}getBounds(){const a=Math.max(0,this._helper._height/2-ct(this));return new gt().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,d){return d?d.pointCoordinate(a)!=null:a.y>this.height/2-ct(this)}calculatePosMatrix(a,d=!1,v){var w;const I=(w=a.key)!==null&&w!==void 0?w:o.b3(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),z=d?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(I)){const ce=z.get(I);return v?ce.f32:ce.f64}const Y=$e(a,this.worldSize);o.O(Y,d?this._alignedProjMatrix:this._viewProjMatrix,Y);const X={f64:Y,f32:new Float32Array(Y)};return z.set(I,X),v?X.f32:X.f64}calculateFogMatrix(a){const d=a.key,v=this._fogMatrixCacheF32;if(v.has(d))return v.get(d);const w=$e(a,this.worldSize);return o.O(w,this._fogMatrix,w),v.set(d,new Float32Array(w)),v.get(d)}getConstrained(a,d){d=o.ah(+d,this.minZoom,this.maxZoom);const v={center:new o.S(a.lng,a.lat),zoom:d};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const vt=179.9999999999;w=[-vt,vt]}const I=this.tileSize*o.af(v.zoom);let z=0,Y=I,X=0,ce=I,pe=0,Se=0;const{x:Me,y:Fe}=this.size;if(this._helper._latRange){const vt=this._helper._latRange;z=o.U(vt[1])*I,Y=o.U(vt[0])*I,Y-z<Fe&&(pe=Fe/(Y-z))}w&&(X=o.aO(o.V(w[0])*I,0,I),ce=o.aO(o.V(w[1])*I,0,I),ce<X&&(ce+=I),ce-X<Me&&(Se=Me/(ce-X)));const{x:qe,y:it}=Oe(I,a);let lt,ht;const bt=Math.max(Se||0,pe||0);if(bt){const vt=new o.P(Se?(ce+X)/2:qe,pe?(Y+z)/2:it);return v.center=Ge(I,vt).wrap(),v.zoom+=o.ak(bt),v}if(this._helper._latRange){const vt=Fe/2;it-vt<z&&(ht=z+vt),it+vt>Y&&(ht=Y-vt)}if(w){const vt=(X+ce)/2;let xt=qe;this._helper._renderWorldCopies&&(xt=o.aO(qe,vt-I/2,vt+I/2));const Dt=Me/2;xt-Dt<X&&(lt=X+Dt),xt+Dt>ce&&(lt=ce-Dt)}if(lt!==void 0||ht!==void 0){const vt=new o.P(lt??qe,ht??it);v.center=Ge(I,vt).wrap()}return v}calculateCenterFromCameraLngLatAlt(a,d,v,w){return this._helper.calculateCenterFromCameraLngLatAlt(a,d,v,w)}_calculateNearFarZIfNeeded(a,d,v){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=a-w*this._helper._pixelPerMeter/Math.cos(d),z=w<0?I:a,Y=Math.PI/2+this.pitchInRadians,X=o.ae(this.fov)*(Math.abs(Math.cos(o.ae(this.roll)))*this.height+Math.abs(Math.sin(o.ae(this.roll)))*this.width)/this.height*(.5+v.y/this.height),ce=Math.sin(X)*z/Math.sin(o.ah(Math.PI-Y-X,.01,Math.PI-.01)),pe=ct(this),Se=Math.atan(pe/this._helper.cameraToCenterDistance),Me=o.ae(.75),Fe=Se>Me?2*Se*(.5+v.y/(2*pe)):Me,qe=Math.sin(Fe)*z/Math.sin(o.ah(Math.PI-Y-Fe,.01,Math.PI-.01)),it=Math.min(ce,qe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*it+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const a=this.centerOffset,d=Oe(this.worldSize,this.center),v=d.x,w=d.y;this._helper._pixelPerMeter=o.aj(1,this.center.lat)*this.worldSize;const I=o.ae(Math.min(this.pitch,fe)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let Y;this._calculateNearFarZIfNeeded(z,I,a),Y=new Float64Array(16),o.b4(Y,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aq(this._invProjMatrix,Y),Y[8]=2*-a.x/this._helper._width,Y[9]=2*a.y/this._helper._height,this._projectionMatrix=o.b5(Y),o.N(Y,Y,[1,-1,1]),o.M(Y,Y,[0,0,-this._helper.cameraToCenterDistance]),o.b6(Y,Y,-this.rollInRadians),o.b7(Y,Y,this.pitchInRadians),o.b6(Y,Y,-this.bearingInRadians),o.M(Y,Y,[-v,-w,0]),this._mercatorMatrix=o.N([],Y,[this.worldSize,this.worldSize,this.worldSize]),o.N(Y,Y,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y),o.M(Y,Y,[0,0,-this.elevation]),this._viewProjMatrix=Y,this._invViewProjMatrix=o.aq([],Y);const X=[0,0,-1,1];o.aw(X,X,this._invViewProjMatrix),this._cameraPosition=[X[0]/X[3],X[1]/X[3],X[2]/X[3]],this._fogMatrix=new Float64Array(16),o.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-v,-w,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y);const ce=this._helper._width%2/2,pe=this._helper._height%2/2,Se=Math.cos(this.bearingInRadians),Me=Math.sin(-this.bearingInRadians),Fe=v-Math.round(v)+Se*ce+Me*pe,qe=w-Math.round(w)+Se*pe+Me*ce,it=new Float64Array(Y);if(o.M(it,it,[Fe>.5?Fe-1:Fe,qe>.5?qe-1:qe,0]),this._alignedProjMatrix=it,Y=o.aq(new Float64Array(16),this._pixelMatrix),!Y)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Y,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const a=this.screenPointToMercatorCoordinate(new o.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const a=o.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,d){const v=o.a1.fromLngLat(a),w=[v.x*this.worldSize,v.y*this.worldSize,d,1];return o.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(a){const{overscaledTileID:d,aligned:v,applyTerrainMatrix:w}=a,I=this._helper.getMercatorTileCoordinates(d),z=d?this.calculatePosMatrix(d,v,!0):null;let Y;return Y=d&&d.terrainRttPosMatrix32f&&w?d.terrainRttPosMatrix32f:z||o.b8(),{mainMatrix:Y,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Y}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,d,v){return 1}transformLightDirection(a){return o.aT(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,d,v,w){const I=this.calculatePosMatrix(v);let z;w?(z=[a,d,w(a,d),1],o.aw(z,z,I)):(z=[a,d,0,1],yl(z,z,I));const Y=z[3];return{point:new o.P(z[0]/Y,z[1]/Y),signedDistanceFromCamera:Y,isOccluded:!1}}populateCache(a){for(const d of a)this.calculatePosMatrix(d)}getMatrixForModel(a,d){const v=o.a1.fromLngLat(a,d),w=v.meterInMercatorCoordinateUnits(),I=o.b9();return o.M(I,I,[v.x,v.y,v.z]),o.b6(I,I,Math.PI),o.b7(I,I,Math.PI/2),o.N(I,I,[-w,w,w]),I}getProjectionDataForCustomLayer(a=!0){const d=new o.Z(0,0,0,0,0),v=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:a}),w=$e(d,this.worldSize);o.O(w,this._viewProjMatrix,w),v.tileMercatorCoords=[0,0,1,1];const I=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],z=o.ba();return o.N(z,w,I),v.fallbackMatrix=z,v.mainMatrix=z,v}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function Sc(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Cs(O){if(O.useSlerp)if(O.k<1){const a=o.bb(O.startEulerAngles.roll,O.startEulerAngles.pitch,O.startEulerAngles.bearing),d=o.bb(O.endEulerAngles.roll,O.endEulerAngles.pitch,O.endEulerAngles.bearing),v=new Float64Array(4);o.bc(v,a,d,O.k);const w=o.bd(v);O.tr.setRoll(w.roll),O.tr.setPitch(w.pitch),O.tr.setBearing(w.bearing)}else O.tr.setRoll(O.endEulerAngles.roll),O.tr.setPitch(O.endEulerAngles.pitch),O.tr.setBearing(O.endEulerAngles.bearing);else O.tr.setRoll(o.C.number(O.startEulerAngles.roll,O.endEulerAngles.roll,O.k)),O.tr.setPitch(o.C.number(O.startEulerAngles.pitch,O.endEulerAngles.pitch,O.k)),O.tr.setBearing(o.C.number(O.startEulerAngles.bearing,O.endEulerAngles.bearing,O.k))}function ba(O,a,d,v,w){const I=w.padding,z=Oe(w.worldSize,d.getNorthWest()),Y=Oe(w.worldSize,d.getNorthEast()),X=Oe(w.worldSize,d.getSouthEast()),ce=Oe(w.worldSize,d.getSouthWest()),pe=o.ae(-v),Se=z.rotate(pe),Me=Y.rotate(pe),Fe=X.rotate(pe),qe=ce.rotate(pe),it=new o.P(Math.max(Se.x,Me.x,qe.x,Fe.x),Math.max(Se.y,Me.y,qe.y,Fe.y)),lt=new o.P(Math.min(Se.x,Me.x,qe.x,Fe.x),Math.min(Se.y,Me.y,qe.y,Fe.y)),ht=it.sub(lt),bt=(w.width-(I.left+I.right+a.left+a.right))/ht.x,vt=(w.height-(I.top+I.bottom+a.top+a.bottom))/ht.y;if(vt<0||bt<0)return void Sc();const xt=Math.min(o.ak(w.scale*Math.min(bt,vt)),O.maxZoom),Dt=o.P.convert(O.offset),Lt=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ae(v)),St=Dt.add(Lt).mult(w.scale/o.af(xt));return{center:Ge(w.worldSize,z.add(X).div(2).sub(St)),zoom:xt,bearing:v}}class Ns{get useGlobeControls(){return!1}handlePanInertia(a,d){const v=a.mag(),w=Math.abs(ct(d));return{easingOffset:a.mult(Math.min(.75*w/v,1)),easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(a,d){a.bearingDelta&&d.setBearing(d.bearing+a.bearingDelta),a.pitchDelta&&d.setPitch(d.pitch+a.pitchDelta),a.rollDelta&&d.setRoll(d.roll+a.rollDelta),a.zoomDelta&&d.setZoom(d.zoom+a.zoomDelta)}handleMapControlsPan(a,d,v){a.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(v,a.around)}cameraForBoxAndBearing(a,d,v,w,I){return ba(a,d,v,w,I)}handleJumpToCenterZoom(a,d){a.zoom!==(d.zoom!==void 0?+d.zoom:a.zoom)&&a.setZoom(+d.zoom),d.center!==void 0&&a.setCenter(o.S.convert(d.center))}handleEaseTo(a,d){const v=a.zoom,w=a.padding,I={roll:a.roll,pitch:a.pitch,bearing:a.bearing},z={roll:d.roll===void 0?a.roll:d.roll,pitch:d.pitch===void 0?a.pitch:d.pitch,bearing:d.bearing===void 0?a.bearing:d.bearing},Y=d.zoom!==void 0,X=!a.isPaddingEqual(d.padding);let ce=!1;const pe=Y?+d.zoom:a.zoom;let Se=a.centerPoint.add(d.offsetAsPoint);const Me=a.screenPointToLocation(Se),{center:Fe,zoom:qe}=a.getConstrained(o.S.convert(d.center||Me),pe??v);al(a,Fe);const it=Oe(a.worldSize,Me),lt=Oe(a.worldSize,Fe).sub(it),ht=o.af(qe-v);return ce=qe!==v,{easeFunc:bt=>{if(ce&&a.setZoom(o.C.number(v,qe,bt)),o.be(I,z)||Cs({startEulerAngles:I,endEulerAngles:z,tr:a,k:bt,useSlerp:I.roll!=z.roll}),X&&(a.interpolatePadding(w,d.padding,bt),Se=a.centerPoint.add(d.offsetAsPoint)),d.around)a.setLocationAtPoint(d.around,d.aroundPoint);else{const vt=o.af(a.zoom-v),xt=qe>v?Math.min(2,ht):Math.max(.5,ht),Dt=Math.pow(xt,1-bt),Lt=Ge(a.worldSize,it.add(lt.mult(bt*Dt)).mult(vt));a.setLocationAtPoint(a.renderWorldCopies?Lt.wrap():Lt,Se)}},isZooming:ce,elevationCenter:Fe}}handleFlyTo(a,d){const v=d.zoom!==void 0,w=a.zoom,I=a.getConstrained(o.S.convert(d.center||d.locationAtOffset),v?+d.zoom:w),z=I.center,Y=I.zoom;al(a,z);const X=Oe(a.worldSize,d.locationAtOffset),ce=Oe(a.worldSize,z).sub(X),pe=ce.mag(),Se=o.af(Y-w);let Me;if(d.minZoom!==void 0){const Fe=Math.min(+d.minZoom,w,Y),qe=a.getConstrained(z,Fe).zoom;Me=o.af(qe-w)}return{easeFunc:(Fe,qe,it,lt)=>{a.setZoom(Fe===1?Y:w+o.ak(qe));const ht=Fe===1?z:Ge(a.worldSize,X.add(ce.mult(it)).mult(qe));a.setLocationAtPoint(a.renderWorldCopies?ht.wrap():ht,lt)},scaleOfZoom:Se,targetCenter:z,scaleOfMinZoom:Me,pixelPathLength:pe}}}class Ri{constructor(a,d,v){this.blendFunction=a,this.blendColor=d,this.mask=v}}Ri.Replace=[1,0],Ri.disabled=new Ri(Ri.Replace,o.bf.transparent,[!1,!1,!1,!1]),Ri.unblended=new Ri(Ri.Replace,o.bf.transparent,[!0,!0,!0,!0]),Ri.alphaBlended=new Ri([1,771],o.bf.transparent,[!0,!0,!0,!0]);const Cl=2305;class Zr{constructor(a,d,v){this.enable=a,this.mode=d,this.frontFace=v}}Zr.disabled=new Zr(!1,1029,Cl),Zr.backCCW=new Zr(!0,1029,Cl),Zr.frontCCW=new Zr(!0,1028,Cl);class Cr{constructor(a,d,v){this.func=a,this.mask=d,this.range=v}}Cr.ReadOnly=!1,Cr.ReadWrite=!0,Cr.disabled=new Cr(519,Cr.ReadOnly,[0,1]);const Wi=7680;class ee{constructor(a,d,v,w,I,z){this.test=a,this.ref=d,this.mask=v,this.fail=w,this.depthFail=I,this.pass=z}}ee.disabled=new ee({func:519,mask:0},0,0,Wi,Wi,Wi);const Ie=new WeakMap;function st(O){var a;if(Ie.has(O))return Ie.get(O);{const d=(a=O.getParameter(O.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Ie.set(O,d),d}}class Yt{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;const d=a.context,v=d.gl;this._texFormat=v.RGBA,this._texType=v.UNSIGNED_BYTE;const w=new o.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const I=new o.aN;I.emplaceBack(0,1,2),this._fullscreenTriangle=new ol(d.createVertexBuffer(w,cs.members),d.createIndexBuffer(I),o.aM.simpleSegment(0,0,w.length,I.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(v.TEXTURE1);const z=v.createTexture();v.bindTexture(v.TEXTURE_2D,z),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texImage2D(v.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),st(v)&&(this._pbo=v.createBuffer(),v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.bufferData(v.PIXEL_PACK_BUFFER,4,v.STREAM_READ),v.bindBuffer(v.PIXEL_PACK_BUFFER,null))}destroy(){const a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,d){const v=this._updateCount;return this._readbackQueue?v>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():v>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const a=this._cachedRenderContext.context,d=a.gl;a.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,d){const v=this._cachedRenderContext.context,w=v.gl;if(this._bindFramebuffer(),v.viewport.set([0,0,this._texWidth,this._texHeight]),v.clear({color:o.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(v,w.TRIANGLES,Cr.disabled,ee.disabled,Ri.unblended,Zr.disabled,((I,z)=>({u_input:I,u_output_expected:z}))(a,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&st(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const I=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&st(a)){const d=a.clientWaitSync(this._readbackQueue.sync,0,0);if(d===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Yt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let d=0;return d+=a[0]/256,d+=a[1]/65536,d+=a[2]/16777216,a[3]<127&&(d=-d),d/128}}const wr=o.$/128;function zn(O,a){const d=O.granularity!==void 0?Math.max(O.granularity,1):1,v=d+(O.generateBorders?2:0),w=d+(O.extendToNorthPole||O.generateBorders?1:0)+(O.extendToSouthPole||O.generateBorders?1:0),I=v+1,z=w+1,Y=O.generateBorders?-1:0,X=O.generateBorders||O.extendToNorthPole?-1:0,ce=d+(O.generateBorders?1:0),pe=d+(O.generateBorders||O.extendToSouthPole?1:0),Se=I*z,Me=v*w*6,Fe=I*z>65536;if(Fe&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const qe=Fe||a==="32bit",it=new Int16Array(2*Se);let lt=0;for(let vt=X;vt<=pe;vt++)for(let xt=Y;xt<=ce;xt++){let Dt=xt/d*o.$;xt===-1&&(Dt=-wr),xt===d+1&&(Dt=o.$+wr);let Lt=vt/d*o.$;vt===-1&&(Lt=O.extendToNorthPole?o.bh:-wr),vt===d+1&&(Lt=O.extendToSouthPole?o.bi:o.$+wr),it[lt++]=Dt,it[lt++]=Lt}const ht=qe?new Uint32Array(Me):new Uint16Array(Me);let bt=0;for(let vt=0;vt<w;vt++)for(let xt=0;xt<v;xt++){const Dt=xt+1+vt*I,Lt=xt+(vt+1)*I,St=xt+1+(vt+1)*I;ht[bt++]=xt+vt*I,ht[bt++]=Lt,ht[bt++]=Dt,ht[bt++]=Dt,ht[bt++]=Lt,ht[bt++]=St}return{vertices:it.buffer.slice(0),indices:ht.buffer.slice(0),uses32bitIndices:qe}}const qr=new o.aK({fill:new o.bj(128,2),line:new o.bj(512,0),tile:new o.bj(128,32),stencil:new o.bj(128,1),circle:3});class ai{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return So.projectionGlobe}get vertexShaderPreludeCode(){return So.projectionMercator.vertexSource}get subdivisionGranularity(){return qr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Yt(a));const d=o.U(this._errorQueryLatitudeDegrees),v=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(d,v),I=D.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=I);const z=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bl(z))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,d,v,w,I){const z=(I==="stencil"?qr.stencil:qr.tile).getGranularityForZoomLevel(d.z);return this._getMesh(a,{granularity:z,generateBorders:v,extendToNorthPole:d.y===0&&w,extendToSouthPole:d.y===(1<<d.z)-1&&w})}_getMesh(a,d){const v=this._getMeshKey(d);if(v in this._tileMeshCache)return this._tileMeshCache[v];const w=function(I,z){const Y=zn(z,"16bit"),X=o.aL.deserialize({arrayBuffer:Y.vertices,length:Y.vertices.byteLength/2/2}),ce=o.aN.deserialize({arrayBuffer:Y.indices,length:Y.indices.byteLength/2/3});return new ol(I.createVertexBuffer(X,cs.members),I.createIndexBuffer(ce),o.aM.simpleSegment(0,0,X.length,ce.length))}(a,d);return this._tileMeshCache[v]=w,w}recalculate(a){}hasTransition(){const a=D.now();let d=!1;return d=d||(a-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}const Er=new o.r({type:new o.D(o.v.projection.type)});class Xr extends o.E{constructor(a){super(),this._transitionable=new o.t(Er),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new Bi,this._verticalPerspectiveProjection=new ai}get transitionState(){const a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.bm){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,d,v,w,I){return this.currentProjection.getMeshFromTileID(a,d,v,w,I)}setProjection(a){this._transitionable.setValue("type",a?.type||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function Hi(O){const a=di(O.worldSize,O.center.lat);return 2*Math.PI*a}function Ji(O,a,d,v,w){const I=1/(1<<w),z=a/o.$*I+v*I,Y=o.bo((O/o.$*I+d*I)*Math.PI*2+Math.PI,2*Math.PI),X=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,ce=Math.cos(X),pe=new Float64Array(3);return pe[0]=Math.sin(Y)*ce,pe[1]=Math.sin(X),pe[2]=Math.cos(Y)*ce,pe}function ni(O){return function(a,d){const v=Math.cos(d),w=new Float64Array(3);return w[0]=Math.sin(a)*v,w[1]=Math.sin(d),w[2]=Math.cos(a)*v,w}(O.lng*Math.PI/180,O.lat*Math.PI/180)}function di(O,a){return O/(2*Math.PI)/Math.cos(a*Math.PI/180)}function lo(O){const a=Math.asin(O[1])/Math.PI*180,d=Math.sqrt(O[0]*O[0]+O[2]*O[2]);if(d>1e-6){const v=O[0]/d,w=Math.acos(O[2]/d),I=(v>0?w:-w)/Math.PI*180;return new o.S(o.aO(I,-180,180),a)}return new o.S(0,a)}function zi(O){return Math.cos(O*Math.PI/180)}function Oi(O,a){const d=zi(O),v=zi(a);return o.ak(v/d)}function la(O,a){const d=O.rotate(a.bearingInRadians),v=a.zoom+Oi(a.center.lat,0),w=o.bk(1/zi(a.center.lat),1/zi(Math.min(Math.abs(a.center.lat),60)),o.bn(v,7,3,0,1)),I=360/Hi({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.S(a.center.lng-d.x*I*w,o.ah(a.center.lat+d.y*I,-o.ai,o.ai))}function Ea(O){const a=.5*O,d=Math.sin(a),v=Math.cos(a);return Math.log(d+v)-Math.log(v-d)}function _A(O,a,d,v){const w=O.lat+d*v;if(Math.abs(d)>1){const I=(Math.sign(O.lat+d)!==Math.sign(O.lat)?-Math.abs(O.lat):Math.abs(O.lat))*Math.PI/180,z=Math.abs(O.lat+d)*Math.PI/180,Y=Ea(I+v*(z-I)),X=Ea(I),ce=Ea(z);return new o.S(O.lng+a*((Y-X)/(ce-X)),w)}return new o.S(O.lng+a*v,w)}class Gs{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=a}swapBuffers(){if(!this._hadAnyChanges)return;const a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(a,d,v,w){const I=`${a.z}_${a.x}_${a.y}_${w?.terrain?"t":""}`,z=this._cache.get(I);if(z)return z;const Y=this._cachePrevious.get(I);if(Y)return this._cache.set(I,Y),Y;const X=this._boundingVolumeFactory(a,d,v,w);return this._cache.set(I,X),this._hadAnyChanges=!0,X}}class $c{constructor(a,d,v,w){this.min=v,this.max=w,this.points=a,this.planes=d}static fromAabb(a,d){const v=[];for(let w=0;w<8;w++)v.push([1&~w?a[0]:d[0],(w>>1&1)==1?d[1]:a[1],(w>>2&1)==1?d[2]:a[2]]);return new $c(v,[[-1,0,0,d[0]],[1,0,0,-a[0]],[0,-1,0,d[1]],[0,1,0,-a[1]],[0,0,-1,d[2]],[0,0,1,-a[2]]],a,d)}static fromCenterSizeAngles(a,d,v){const w=o.br([],v[0],v[1],v[2]),I=o.bs([],[d[0],0,0],w),z=o.bs([],[0,d[1],0],w),Y=o.bs([],[0,0,d[2]],w),X=[...a],ce=[...a];for(let Se=0;Se<8;Se++)for(let Me=0;Me<3;Me++){const Fe=a[Me]+I[Me]*(1&~Se?-1:1)+z[Me]*((Se>>1&1)==1?1:-1)+Y[Me]*((Se>>2&1)==1?1:-1);X[Me]=Math.min(X[Me],Fe),ce[Me]=Math.max(ce[Me],Fe)}const pe=[];for(let Se=0;Se<8;Se++){const Me=[...a];o.aS(Me,Me,o.aR([],I,1&~Se?-1:1)),o.aS(Me,Me,o.aR([],z,(Se>>1&1)==1?1:-1)),o.aS(Me,Me,o.aR([],Y,(Se>>2&1)==1?1:-1)),pe.push(Me)}return new $c(pe,[[...I,-o.aX(I,pe[0])],[...z,-o.aX(z,pe[0])],[...Y,-o.aX(Y,pe[0])],[-I[0],-I[1],-I[2],-o.aX(I,pe[7])],[-z[0],-z[1],-z[2],-o.aX(z,pe[7])],[-Y[0],-Y[1],-Y[2],-o.aX(Y,pe[7])]],X,ce)}intersectsFrustum(a){let d=!0;const v=this.points.length,w=this.planes.length,I=a.planes.length,z=a.points.length;for(let Y=0;Y<I;Y++){const X=a.planes[Y];let ce=0;for(let pe=0;pe<v;pe++){const Se=this.points[pe];X[0]*Se[0]+X[1]*Se[1]+X[2]*Se[2]+X[3]>=0&&ce++}if(ce===0)return 0;ce<v&&(d=!1)}if(d)return 2;for(let Y=0;Y<w;Y++){const X=this.planes[Y];let ce=0;for(let pe=0;pe<z;pe++){const Se=a.points[pe];X[0]*Se[0]+X[1]*Se[1]+X[2]*Se[2]+X[3]>=0&&ce++}if(ce===0)return 0}return 1}intersectsPlane(a){const d=this.points.length;let v=0;for(let w=0;w<d;w++){const I=this.points[w];a[0]*I[0]+a[1]*I[1]+a[2]*I[2]+a[3]>=0&&v++}return v===d?2:v===0?0:1}}function Vo(O,a,d){const v=O-a;return v<0?-v:Math.max(0,v-d)}function Ec(O,a,d,v,w){const I=O-d;let z;return z=I<0?Math.min(-I,1+I-w):I>1?Math.min(Math.max(I-w,0),1-I):0,Math.max(z,Vo(a,v,w))}class jA{constructor(){this._boundingVolumeCache=new Gs(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(a,d,v,w){const I=1<<v.z,z=1/I,Y=v.x/I,X=v.y/I;let ce=2;return ce=Math.min(ce,Ec(a,d,Y,X,z)),ce=Math.min(ce,Ec(a,d,Y+.5,-X-z,z)),ce=Math.min(ce,Ec(a,d,Y+.5,2-X-z,z)),ce}getWrap(a,d,v){const w=1<<d.z,I=1/w,z=d.x/w,Y=Vo(a.x,z,I),X=Vo(a.x,z-1,I),ce=Vo(a.x,z+1,I),pe=Math.min(Y,X,ce);return pe===ce?1:pe===X?-1:0}allowVariableZoom(a,d){return It(a,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(a,d,v,w){return this._boundingVolumeCache.getTileBoundingVolume(a,d,v,w)}_computeTileBoundingVolume(a,d,v,w){var I,z;let Y=0,X=0;if(w?.terrain){const ce=new o.Z(a.z,d,a.z,a.x,a.y),pe=w.terrain.getMinMaxElevation(ce);Y=(I=pe.minElevation)!==null&&I!==void 0?I:Math.min(0,v),X=(z=pe.maxElevation)!==null&&z!==void 0?z:Math.max(0,v)}if(Y/=o.bu,X/=o.bu,Y+=1,X+=1,a.z<=0)return $c.fromAabb([-X,-X,-X],[X,X,X]);if(a.z===1)return $c.fromAabb([a.x===0?-X:0,a.y===0?0:-X,-X],[a.x===0?0:X,a.y===0?X:0,X]);{const ce=[Ji(0,0,a.x,a.y,a.z),Ji(o.$,0,a.x,a.y,a.z),Ji(o.$,o.$,a.x,a.y,a.z),Ji(0,o.$,a.x,a.y,a.z)],pe=[];for(const tn of ce)pe.push(o.aR([],tn,X));if(X!==Y)for(const tn of ce)pe.push(o.aR([],tn,Y));a.y===0&&pe.push([0,1,0]),a.y===(1<<a.z)-1&&pe.push([0,-1,0]);const Se=[1,1,1],Me=[-1,-1,-1];for(const tn of pe)for(let sn=0;sn<3;sn++)Se[sn]=Math.min(Se[sn],tn[sn]),Me[sn]=Math.max(Me[sn],tn[sn]);const Fe=Ji(o.$/2,o.$/2,a.x,a.y,a.z),qe=o.aW([],[0,1,0],Fe);o.aV(qe,qe);const it=o.aW([],Fe,qe);o.aV(it,it);const lt=o.aW([],ce[2],ce[1]);o.aV(lt,lt);const ht=o.aW([],ce[0],ce[3]);o.aV(ht,ht),pe.push(o.aR([],Fe,X)),a.y>=(1<<a.z)/2&&pe.push(o.aR([],Ji(o.$/2,0,a.x,a.y,a.z),X)),a.y<(1<<a.z)/2&&pe.push(o.aR([],Ji(o.$/2,o.$,a.x,a.y,a.z),X));const bt=hu(Fe,pe),vt=hu(it,pe),xt=[-Fe[0],-Fe[1],-Fe[2],bt.max],Dt=[Fe[0],Fe[1],Fe[2],-bt.min],Lt=[-it[0],-it[1],-it[2],vt.max],St=[it[0],it[1],it[2],-vt.min],Gt=[...lt,0],rn=[...ht,0],Ht=[];return a.y===0?Ht.push(o.bt(rn,Gt,xt),o.bt(rn,Gt,Dt)):Ht.push(o.bt(Lt,Gt,xt),o.bt(Lt,Gt,Dt),o.bt(Lt,rn,xt),o.bt(Lt,rn,Dt)),a.y===(1<<a.z)-1?Ht.push(o.bt(rn,Gt,xt),o.bt(rn,Gt,Dt)):Ht.push(o.bt(St,Gt,xt),o.bt(St,Gt,Dt),o.bt(St,rn,xt),o.bt(St,rn,Dt)),new $c(Ht,[xt,Dt,Lt,St,Gt,rn],Se,Me)}}}function hu(O,a){let d=1/0,v=-1/0;for(const w of a){const I=o.aX(O,w);d=Math.min(d,I),v=Math.max(v,I)}return{min:d,max:v}}class Vc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,d,v){return this._helper.interpolatePadding(a,d,v)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,d){this._helper.resize(a,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,d){this._helper.overrideNearFarZ(a,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bv(),this._projectionMatrix=o.b9(),this._globeViewProjMatrix32f=o.b8(),this._globeViewProjMatrixNoCorrection=o.b9(),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),this._globeProjMatrixInverted=o.b9(),this._cameraPosition=o.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new go({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,d)=>this.getConstrained(a,d)}),this._coveringTilesDetailsProvider=new jA}clone(){const a=new Vc;return a.apply(this),a}apply(a,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const a=o.bp();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){const{overscaledTileID:d,applyGlobeMatrix:v}=a,w=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:v?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){const d=this.pitchInRadians,v=this.cameraToCenterDistance/a,w=Math.sin(d)*v,I=Math.cos(d)*v+1,z=1/Math.sqrt(w*w+I*I)*1;let Y=-w,X=I;const ce=Math.sqrt(Y*Y+X*X);Y/=ce,X/=ce;const pe=[0,Y,X];o.bw(pe,pe,[0,0,0],-this.bearingInRadians),o.bx(pe,pe,[0,0,0],-1*this.center.lat*Math.PI/180),o.by(pe,pe,[0,0,0],this.center.lng*Math.PI/180);const Se=1/o.aZ(pe);return o.aR(pe,pe,Se),[...pe,-z*Se]}isLocationOccluded(a){return!this.isSurfacePointVisible(ni(a))}transformLightDirection(a){const d=this._helper._center.lng*Math.PI/180,v=this._helper._center.lat*Math.PI/180,w=Math.cos(v),I=[Math.sin(d)*w,Math.sin(v),Math.cos(d)*w],z=[I[2],0,-I[0]],Y=[0,0,0];o.aW(Y,z,I),o.aV(z,z),o.aV(Y,Y);const X=[0,0,0];return o.aV(X,[z[0]*a[0]+Y[0]*a[1]+I[0]*a[2],z[1]*a[0]+Y[1]*a[1]+I[1]*a[2],z[2]*a[0]+Y[2]*a[1]+I[2]*a[2]]),X}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,d,v){const w=function(Y,X,ce){const pe=1/(1<<ce.z);return new o.a1(Y/o.$*pe+ce.x*pe,X/o.$*pe+ce.y*pe)}(a,d,v.canonical),I=(z=w.y,[o.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(a,d,v,w){const I=v.canonical,z=Ji(a,d,I.x,I.y,I.z),Y=1+(w?w(a,d):0)/o.bu,X=[z[0]*Y,z[1]*Y,z[2]*Y,1];o.aw(X,X,this._globeViewProjMatrixNoCorrection);const ce=this._cachedClippingPlane,pe=ce[0]*z[0]+ce[1]*z[1]+ce[2]*z[2]+ce[3]<0;return{point:new o.P(X[0]/X[3],X[1]/X[3]),signedDistanceFromCamera:X[3],isOccluded:pe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const a=di(this.worldSize,this.center.lat),d=o.ba(),v=o.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;d[8]=2*-w.x/this._helper._width,d[9]=2*w.y/this._helper._height,this._projectionMatrix=o.b5(d),this._globeProjMatrixInverted=o.ba(),o.aq(this._globeProjMatrixInverted,d),o.M(d,d,[0,0,-this.cameraToCenterDistance]),o.b6(d,d,this.rollInRadians),o.b7(d,d,-this.pitchInRadians),o.b6(d,d,this.bearingInRadians),o.M(d,d,[0,0,-a]);const I=o.bp();I[0]=a,I[1]=a,I[2]=a,o.b7(v,d,this.center.lat*Math.PI/180),o.bz(v,v,-this.center.lng*Math.PI/180),o.N(v,v,I),this._globeViewProjMatrixNoCorrection=v,o.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bz(d,d,-this.center.lng*Math.PI/180),o.N(d,d,I),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=o.ba(),o.aq(this._globeViewProjMatrixNoCorrectionInverted,v);const z=o.bp();this._cameraPosition=o.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bw(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bx(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bw(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bx(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.by(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);const Y=o.b5(this._globeViewProjMatrixNoCorrectionInverted);o.N(Y,Y,[1,1,-1]),this._cachedFrustum=yo.fromInvProjectionMatrix(Y,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");const d=o.ba();return o.ag(d),d}getVisibleUnwrappedCoordinates(a){return[new o.b2(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const v=ni(a);o.aR(v,v,1+d/o.bu);const w=o.bv();return o.aw(w,[v[0],v[1],v[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(a){}getBounds(){const a=.5*this.width,d=.5*this.height,v=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,d),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,d)],w=[];for(const Se of v)w.push(this.unprojectScreenPoint(Se));let I=0,z=0,Y=0,X=0;const ce=this.center;for(const Se of w){const Me=o.bA(ce.lng,Se.lng),Fe=o.bA(ce.lat,Se.lat);Me<z&&(z=Me),Me>I&&(I=Me),Fe<X&&(X=Fe),Fe>Y&&(Y=Fe)}const pe=[ce.lng+z,ce.lat+X,ce.lng+I,ce.lat+Y];return this.isSurfacePointOnScreen([0,1,0])&&(pe[3]=90,pe[0]=-180,pe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(pe[1]=-90,pe[0]=-180,pe[2]=180),new gt(pe)}getConstrained(a,d){const v=o.ah(a.lat,-o.ai,o.ai),w=o.ah(+d,this.minZoom+Oi(0,v),this.maxZoom);return{center:new o.S(a.lng,v),zoom:w}}calculateCenterFromCameraLngLatAlt(a,d,v,w){return this._helper.calculateCenterFromCameraLngLatAlt(a,d,v,w)}setLocationAtPoint(a,d){const v=ni(this.unprojectScreenPoint(d)),w=ni(a),I=o.bp();o.bB(I);const z=o.bp();o.by(z,v,I,-this.center.lng*Math.PI/180),o.bx(z,z,I,this.center.lat*Math.PI/180);const Y=w[0]*w[0]+w[2]*w[2],X=z[0]*z[0];if(Y<X)return;const ce=Math.sqrt(Y-X),pe=-ce,Se=o.bC(w[0],w[2],z[0],ce),Me=o.bC(w[0],w[2],z[0],pe),Fe=o.bp();o.by(Fe,w,I,-Se);const qe=o.bC(Fe[1],Fe[2],z[1],z[2]),it=o.bp();o.by(it,w,I,-Me);const lt=o.bC(it[1],it[2],z[1],z[2]),ht=.5*Math.PI,bt=qe>=-ht&&qe<=ht,vt=lt>=-ht&&lt<=ht;let xt,Dt;if(bt&&vt){const rn=this.center.lng*Math.PI/180,Ht=this.center.lat*Math.PI/180;o.bD(Se,rn)+o.bD(qe,Ht)<o.bD(Me,rn)+o.bD(lt,Ht)?(xt=Se,Dt=qe):(xt=Me,Dt=lt)}else if(bt)xt=Se,Dt=qe;else{if(!vt)return;xt=Me,Dt=lt}const Lt=xt/Math.PI*180,St=Dt/Math.PI*180,Gt=this.center.lat;this.setCenter(new o.S(Lt,o.ah(St,-90,90))),this.setZoom(this.zoom+Oi(Gt,this.center.lat))}locationToScreenPoint(a,d){const v=ni(a);if(d){const w=d.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aR(v,v,1+w/o.bu)}return this._projectSurfacePointToScreen(v)}_projectSurfacePointToScreen(a){const d=o.bv();return o.aw(d,[...a,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new o.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,d){if(d){const v=d.pointCoordinate(a);if(v)return v}return o.a1.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,d){var v;return(v=this.screenPointToMercatorCoordinate(a,d))===null||v===void 0?void 0:v.toLngLat()}isPointOnMapSurface(a,d){const v=this._cameraPosition,w=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(v,w)}getRayDirectionFromPixel(a){const d=o.bv();d[0]=a.x/this.width*2-1,d[1]=-1*(a.y/this.height*2-1),d[2]=1,d[3]=1,o.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const v=o.bp();v[0]=d[0]-this._cameraPosition[0],v[1]=d[1]-this._cameraPosition[1],v[2]=d[2]-this._cameraPosition[2];const w=o.bp();return o.aV(w,v),w}isSurfacePointVisible(a){const d=this._cachedClippingPlane;return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;const d=o.bv();return o.aw(d,[...a,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(a,d){const v=o.aX(a,d),w=o.bp(),I=o.bp();o.aR(I,d,v),o.aU(w,a,I);const z=1-o.aX(w,w);if(z<0)return null;const Y=o.aX(a,a)-1,X=-v+(v<0?1:-1)*Math.sqrt(z),ce=Y/X,pe=X;return{tMin:Math.min(ce,pe),tMax:Math.max(ce,pe)}}unprojectScreenPoint(a){const d=this._cameraPosition,v=this.getRayDirectionFromPixel(a),w=this.rayPlanetIntersection(d,v);if(w){const pe=o.bp();o.aS(pe,d,[v[0]*w.tMin,v[1]*w.tMin,v[2]*w.tMin]);const Se=o.bp();return o.aV(Se,pe),lo(Se)}const I=this._cachedClippingPlane,z=I[0]*v[0]+I[1]*v[1]+I[2]*v[2],Y=-o.b1(I,d)/z,X=o.bp();if(Y>0)o.aS(X,d,[v[0]*Y,v[1]*Y,v[2]*Y]);else{const pe=o.bp();o.aS(pe,d,[2*v[0],2*v[1],2*v[2]]);const Se=o.b1(this._cachedClippingPlane,pe);o.aU(X,pe,[this._cachedClippingPlane[0]*Se,this._cachedClippingPlane[1]*Se,this._cachedClippingPlane[2]*Se])}const ce=function(pe){const Se=o.bp();return Se[0]=pe[0]*-pe[3],Se[1]=pe[1]*-pe[3],Se[2]=pe[2]*-pe[3],{center:Se,radius:Math.sqrt(1-pe[3]*pe[3])}}(I);return lo(function(pe,Se,Me){const Fe=o.bp();o.aU(Fe,Me,pe);const qe=o.bp();return o.bq(qe,pe,Fe,Se/o.a$(Fe)),qe}(ce.center,ce.radius,X))}getMatrixForModel(a,d){const v=o.S.convert(a),w=1/o.bu,I=o.b9();return o.bz(I,I,v.lng/180*Math.PI),o.b7(I,I,-v.lat/180*Math.PI),o.M(I,I,[0,0,1+d/o.bu]),o.b7(I,I,.5*Math.PI),o.N(I,I,[w,w,w]),I}getProjectionDataForCustomLayer(a=!0){const d=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:a});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(a){}}class Mh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,d,v){return this._helper.interpolatePadding(a,d,v)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,d,v=!0){this._helper.resize(a,d,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,d){this._helper.overrideNearFarZ(a,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,d){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new go({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,d)=>this.getConstrained(a,d)}),this._globeness=1,this._mercatorTransform=new Xi,this._verticalPerspectiveTransform=new Vc}clone(){const a=new Mh;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){const d=this._mercatorTransform.getProjectionData(a),v=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?v.mainMatrix:d.mainMatrix,clippingPlane:v.clippingPlane,tileMercatorCoords:v.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,d,v){const w=this._mercatorTransform.getPitchedTextCorrection(a,d,v),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,d,v);return o.bk(w,I,this._globeness)}projectTileCoordinates(a,d,v,w){return this.currentTransform.projectTileCoordinates(a,d,v,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,d){return this.currentTransform.lngLatToCameraDepth(a,d)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,d){return this.currentTransform.getConstrained(a,d)}calculateCenterFromCameraLngLatAlt(a,d,v,w){return this._helper.calculateCenterFromCameraLngLatAlt(a,d,v,w)}setLocationAtPoint(a,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,d){return this.currentTransform.locationToScreenPoint(a,d)}screenPointToMercatorCoordinate(a,d){return this.currentTransform.screenPointToMercatorCoordinate(a,d)}screenPointToLocation(a,d){return this.currentTransform.screenPointToLocation(a,d)}isPointOnMapSurface(a,d){return this.currentTransform.isPointOnMapSurface(a,d)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,d){return this.currentTransform.getMatrixForModel(a,d)}getProjectionDataForCustomLayer(a=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return d;const v=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return v.fallbackMatrix=d.mainMatrix,v}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class so{get useGlobeControls(){return!0}handlePanInertia(a,d){const v=la(a,d);return Math.abs(v.lng-d.center.lng)>180&&(v.lng=d.center.lng+179.5*Math.sign(v.lng-d.center.lng)),{easingCenter:v,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,d){const v=a.around,w=d.screenPointToLocation(v);a.bearingDelta&&d.setBearing(d.bearing+a.bearingDelta),a.pitchDelta&&d.setPitch(d.pitch+a.pitchDelta),a.rollDelta&&d.setRoll(d.roll+a.rollDelta);const I=d.zoom;a.zoomDelta&&d.setZoom(d.zoom+a.zoomDelta);const z=d.zoom-I;if(z===0)return;const Y=o.bA(d.center.lng,w.lng),X=Y/(Math.abs(Y/180)+1),ce=o.bA(d.center.lat,w.lat),pe=d.getRayDirectionFromPixel(v),Se=d.cameraPosition,Me=-1*o.aX(Se,pe),Fe=o.bp();o.aS(Fe,Se,[pe[0]*Me,pe[1]*Me,pe[2]*Me]);const qe=o.aZ(Fe)-1,it=Math.exp(.5*-Math.max(qe-.3,0)),lt=di(d.worldSize,d.center.lat)/Math.min(d.width,d.height),ht=o.bn(lt,.9,.5,1,.25),bt=(1-o.af(-z))*Math.min(it,ht),vt=d.center.lat,xt=d.zoom,Dt=new o.S(d.center.lng+X*bt,o.ah(d.center.lat+ce*bt,-o.ai,o.ai));d.setLocationAtPoint(w,v);const Lt=d.center,St=o.bn(Math.abs(Y),45,85,0,1),Gt=o.bn(lt,.75,.35,0,1),rn=Math.pow(Math.max(St,Gt),.25),Ht=o.bA(Lt.lng,Dt.lng),tn=o.bA(Lt.lat,Dt.lat);d.setCenter(new o.S(Lt.lng+Ht*rn,Lt.lat+tn*rn).wrap()),d.setZoom(xt+Oi(vt,d.center.lat))}handleMapControlsPan(a,d,v){if(!a.panDelta)return;const w=d.center.lat,I=d.zoom;d.setCenter(la(a.panDelta,d).wrap()),d.setZoom(I+Oi(w,d.center.lat))}cameraForBoxAndBearing(a,d,v,w,I){const z=ba(a,d,v,w,I),Y=d.left/I.width*2-1,X=(I.width-d.right)/I.width*2-1,ce=d.top/I.height*-2+1,pe=(I.height-d.bottom)/I.height*-2+1,Se=o.bA(v.getWest(),v.getEast())<0,Me=Se?v.getEast():v.getWest(),Fe=Se?v.getWest():v.getEast(),qe=Math.max(v.getNorth(),v.getSouth()),it=Math.min(v.getNorth(),v.getSouth()),lt=Me+.5*o.bA(Me,Fe),ht=qe+.5*o.bA(qe,it),bt=I.clone();bt.setCenter(z.center),bt.setBearing(z.bearing),bt.setPitch(0),bt.setRoll(0),bt.setZoom(z.zoom);const vt=bt.modelViewProjectionMatrix,xt=[ni(v.getNorthWest()),ni(v.getNorthEast()),ni(v.getSouthWest()),ni(v.getSouthEast()),ni(new o.S(Fe,ht)),ni(new o.S(Me,ht)),ni(new o.S(lt,qe)),ni(new o.S(lt,it))],Dt=ni(z.center);let Lt=Number.POSITIVE_INFINITY;for(const St of xt)Y<0&&(Lt=so.getLesserNonNegativeNonNull(Lt,so.solveVectorScale(St,Dt,vt,"x",Y))),X>0&&(Lt=so.getLesserNonNegativeNonNull(Lt,so.solveVectorScale(St,Dt,vt,"x",X))),ce>0&&(Lt=so.getLesserNonNegativeNonNull(Lt,so.solveVectorScale(St,Dt,vt,"y",ce))),pe<0&&(Lt=so.getLesserNonNegativeNonNull(Lt,so.solveVectorScale(St,Dt,vt,"y",pe)));if(Number.isFinite(Lt)&&Lt!==0)return z.zoom=bt.zoom+o.ak(Lt),z;Sc()}handleJumpToCenterZoom(a,d){const v=a.center.lat,w=a.getConstrained(d.center?o.S.convert(d.center):a.center,a.zoom).center;a.setCenter(w.wrap());const I=d.zoom!==void 0?+d.zoom:a.zoom+Oi(v,w.lat);a.zoom!==I&&a.setZoom(I)}handleEaseTo(a,d){const v=a.zoom,w=a.center,I=a.padding,z={roll:a.roll,pitch:a.pitch,bearing:a.bearing},Y={roll:d.roll===void 0?a.roll:d.roll,pitch:d.pitch===void 0?a.pitch:d.pitch,bearing:d.bearing===void 0?a.bearing:d.bearing},X=d.zoom!==void 0,ce=!a.isPaddingEqual(d.padding);let pe=!1;const Se=d.center?o.S.convert(d.center):w,Me=a.getConstrained(Se,v).center;al(a,Me);const Fe=a.clone();Fe.setCenter(Me),Fe.setZoom(X?+d.zoom:v+Oi(w.lat,Se.lat)),Fe.setBearing(d.bearing);const qe=new o.P(o.ah(a.centerPoint.x+d.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+d.offsetAsPoint.y,0,a.height));Fe.setLocationAtPoint(Me,qe);const it=(d.offset&&d.offsetAsPoint.mag())>0?Fe.center:Me,lt=X?+d.zoom:v+Oi(w.lat,it.lat),ht=v+Oi(w.lat,0),bt=lt+Oi(it.lat,0),vt=o.bA(w.lng,it.lng),xt=o.bA(w.lat,it.lat),Dt=o.af(bt-ht);return pe=lt!==v,{easeFunc:Lt=>{if(o.be(z,Y)||Cs({startEulerAngles:z,endEulerAngles:Y,tr:a,k:Lt,useSlerp:z.roll!=Y.roll}),ce&&a.interpolatePadding(I,d.padding,Lt),d.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(d.around,d.aroundPoint);else{const St=bt>ht?Math.min(2,Dt):Math.max(.5,Dt),Gt=Math.pow(St,1-Lt),rn=_A(w,vt,xt,Lt*Gt);a.setCenter(rn.wrap())}if(pe){const St=o.C.number(ht,bt,Lt)+Oi(0,a.center.lat);a.setZoom(St)}},isZooming:pe,elevationCenter:it}}handleFlyTo(a,d){const v=d.zoom!==void 0,w=a.center,I=a.zoom,z=a.padding,Y=!a.isPaddingEqual(d.padding),X=a.getConstrained(o.S.convert(d.center||d.locationAtOffset),I).center,ce=v?+d.zoom:a.zoom+Oi(a.center.lat,X.lat),pe=a.clone();pe.setCenter(X),pe.setZoom(ce),pe.setBearing(d.bearing);const Se=new o.P(o.ah(a.centerPoint.x+d.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+d.offsetAsPoint.y,0,a.height));pe.setLocationAtPoint(X,Se);const Me=pe.center;al(a,Me);const Fe=function(xt,Dt,Lt){const St=ni(Dt),Gt=ni(Lt),rn=o.aX(St,Gt),Ht=Math.acos(rn),tn=Hi(xt);return Ht/(2*Math.PI)*tn}(a,w,Me),qe=I+Oi(w.lat,0),it=ce+Oi(Me.lat,0),lt=o.af(it-qe);let ht;if(typeof d.minZoom=="number"){const xt=+d.minZoom+Oi(Me.lat,0),Dt=Math.min(xt,qe,it)+Oi(0,Me.lat),Lt=a.getConstrained(Me,Dt).zoom+Oi(Me.lat,0);ht=o.af(Lt-qe)}const bt=o.bA(w.lng,Me.lng),vt=o.bA(w.lat,Me.lat);return{easeFunc:(xt,Dt,Lt,St)=>{const Gt=_A(w,bt,vt,Lt);Y&&a.interpolatePadding(z,d.padding,xt);const rn=xt===1?Me:Gt;a.setCenter(rn.wrap());const Ht=qe+o.ak(Dt);a.setZoom(xt===1?ce:Ht+Oi(0,rn.lat))},scaleOfZoom:lt,targetCenter:Me,scaleOfMinZoom:ht,pixelPathLength:Fe}}static solveVectorScale(a,d,v,w,I){const z=w==="x"?[v[0],v[4],v[8],v[12]]:[v[1],v[5],v[9],v[13]],Y=[v[3],v[7],v[11],v[15]],X=a[0]*z[0]+a[1]*z[1]+a[2]*z[2],ce=a[0]*Y[0]+a[1]*Y[1]+a[2]*Y[2],pe=d[0]*z[0]+d[1]*z[1]+d[2]*z[2],Se=d[0]*Y[0]+d[1]*Y[1]+d[2]*Y[2];return pe+I*ce===X+I*Se||Y[3]*(X-pe)+z[3]*(Se-ce)+X*Se==pe*ce?null:(pe+z[3]-I*Se-I*Y[3])/(pe-X-I*Se+I*ce)}static getLesserNonNegativeNonNull(a,d){return d!==null&&d>=0&&d<a?d:a}}class ec{constructor(a){this._globe=a,this._mercatorCameraHelper=new Ns,this._verticalPerspectiveCameraHelper=new so}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,d){return this.currentHelper.handlePanInertia(a,d)}handleMapControlsRollPitchBearingZoom(a,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,d)}handleMapControlsPan(a,d,v){this.currentHelper.handleMapControlsPan(a,d,v)}cameraForBoxAndBearing(a,d,v,w,I){return this.currentHelper.cameraForBoxAndBearing(a,d,v,w,I)}handleJumpToCenterZoom(a,d){this.currentHelper.handleJumpToCenterZoom(a,d)}handleEaseTo(a,d){return this.currentHelper.handleEaseTo(a,d)}handleFlyTo(a,d){return this.currentHelper.handleFlyTo(a,d)}}const td=(O,a)=>o.y(O,a&&a.filter(d=>d.identifier!=="source.canvas")),zp=o.bE();class Hc extends o.E{constructor(a,d={}){var v,w;super(),this._rtlPluginLoaded=()=>{for(const z in this.sourceCaches){const Y=this.sourceCaches[z].getSource().type;Y!=="vector"&&Y!=="geojson"||this.sourceCaches[z].reload()}},this.map=a,this.dispatcher=new Bt(ft(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(z,Y)=>this.getGlyphs(z,Y)),this.dispatcher.registerMessageHandler("GI",(z,Y)=>this.getImages(z,Y)),this.imageManager=new me,this.imageManager.setEventedParent(this);const I=((v=a._container)===null||v===void 0?void 0:v.lang)||typeof document<"u"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new xe(a._requestManager,d.localIdeographFontFamily,I),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new _a,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bG()),Ne().on(Mr,this._rtlPluginLoaded),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const Y=this.sourceCaches[z.sourceId];if(!Y)return;const X=Y.getSource();if(X&&X.vectorLayerIds)for(const ce in this._layers){const pe=this._layers[ce];pe.source===X.id&&this._validateLayer(pe)}})}setGlobalStateProperty(a,d){var v,w,I;this._checkLoaded();const z=d===null?(I=(w=(v=this.stylesheet.state)===null||v===void 0?void 0:v[a])===null||w===void 0?void 0:w.default)!==null&&I!==void 0?I:null:d;if(o.bH(z,this._globalState[a]))return this;this._globalState[a]=z,this._applyGlobalStateChanges([a])}getGlobalState(){return this._globalState}setGlobalState(a){this._checkLoaded();const d=[];for(const v in a)!o.bH(this._globalState[v],a[v].default)&&(d.push(v),this._globalState[v]=a[v].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(a){if(a.length===0)return;const d=new Set;for(const v in this._layers){const w=this._layers[v],I=w.getLayoutAffectingGlobalStateRefs(),z=w.getPaintAffectingGlobalStateRefs();for(const Y of a)if(I.has(Y)&&d.add(w.source),z.has(Y))for(const{name:X,value:ce}of z.get(Y))this._updatePaintProperty(w,X,ce)}for(const v in this.sourceCaches)d.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(a,d={},v){this.fire(new o.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const w=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;o.j(w,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,d,v)}).catch(z=>{this._loadStyleRequest=null,z&&!I.signal.aborted&&this.fire(new o.k(z))})}loadJSON(a,d={},v){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(a,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(zp,{validate:!1})}_load(a,d,v){var w,I;let z=d.transformStyle?d.transformStyle(v,a):a;if(!d.validate||!td(this,o.z(z))){z=Object.assign({},z),this._loaded=!0,this.stylesheet=z;for(const Y in z.sources)this.addSource(Y,z.sources[Y],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new rt(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new at(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var a;const d=o.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",d),this._order=d.map(v=>v.id),this._layers={},this.setGlobalState((a=this.stylesheet.state)!==null&&a!==void 0?a:null),this._serializedLayers=null;for(const v of d){const w=o.bJ(v);w.setEventedParent(this,{layer:{id:v.id}}),w.setGlobalState(this._globalState),this._layers[v.id]=w}}_loadSprite(a,d=!1,v=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(I,z,Y,X){return o._(this,void 0,void 0,function*(){const ce=re(I),pe=Y>1?"@2x":"",Se={},Me={};for(const{id:Fe,url:qe}of ce){const it=z.transformRequest(j(qe,pe,".json"),"SpriteJSON");Se[Fe]=o.j(it,X);const lt=z.transformRequest(j(qe,pe,".png"),"SpriteImage");Me[Fe]=te.getImage(lt,X)}return yield Promise.all([...Object.values(Se),...Object.values(Me)]),function(Fe,qe){return o._(this,void 0,void 0,function*(){const it={};for(const lt in Fe){it[lt]={};const ht=D.getImageCanvasContext((yield qe[lt]).data),bt=(yield Fe[lt]).data;for(const vt in bt){const{width:xt,height:Dt,x:Lt,y:St,sdf:Gt,pixelRatio:rn,stretchX:Ht,stretchY:tn,content:sn,textFitWidth:Yn,textFitHeight:Gn}=bt[vt];it[lt][vt]={data:null,pixelRatio:rn,sdf:Gt,stretchX:Ht,stretchY:tn,content:sn,textFitWidth:Yn,textFitHeight:Gn,spriteData:{width:xt,height:Dt,x:Lt,y:St,context:ht}}}}return it})}(Se,Me)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(I=>{if(this._spriteRequest=null,I)for(const z in I){this._spritesImagesIds[z]=[];const Y=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(X=>!(X in I)):[];for(const X of Y)this.imageManager.removeImage(X),this._changedImages[X]=!0;for(const X in I[z]){const ce=z==="default"?X:`${z}:${X}`;this._spritesImagesIds[z].push(ce),ce in this.imageManager.images?this.imageManager.updateImage(ce,I[z][X],!1):this.imageManager.addImage(ce,I[z][X]),d&&(this._changedImages[ce]=!0)}}}).catch(I=>{this._spriteRequest=null,w=I,this.fire(new o.k(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),v&&v(w)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const v=a.sourceLayer;if(!v)return;const w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(v)===-1)&&this.fire(new o.k(new Error(`Source layer "${v}" does not exist on source "${w.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,d=!1){const v=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d?o.bK(v):v);const w=[];for(const I of a)if(v[I]){const z=d?o.bK(v[I]):v[I];w.push(z)}return w}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const v of d){const w=this._layers[v];w.type!=="custom"&&(a[v]=w.serialize())}return a}hasTransitions(){var a,d,v;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((v=this.projection)===null||v===void 0)&&v.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(d){const w=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(w.length||I.length)&&this._updateWorkerLayers(w,I);for(const z in this._updatedSources){const Y=this._updatedSources[z];if(Y==="reload")this._reloadSource(z);else{if(Y!=="clear")throw new Error(`Invalid action ${Y}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const v={};for(const w in this.sourceCaches){const I=this.sourceCaches[w];v[w]=I.used,I.used=!1}for(const w of this._order){const I=this._layers[w];I.recalculate(a,this._availableImages),!I.isHidden(a.zoom)&&I.source&&(this.sourceCaches[I.source].used=!0)}for(const w in v){const I=this.sourceCaches[w];!!v[w]!=!!I.used&&I.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,d&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var v;this._checkLoaded();const w=this.serialize();if(a=d.transformStyle?d.transformStyle(w,a):a,((v=d.validate)===null||v===void 0||v)&&td(this,o.z(a)))return!1;(a=o.bK(a)).layers=o.bI(a.layers);const I=o.bL(w,a),z=this._getOperationsToPerform(I);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const Y of z.operations)Y();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const d=[],v=[];for(const w of a)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":d.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":d.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":d.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,w.args));break;case"setTransition":d.push(()=>{});break;default:v.push(w.command)}return{operations:d,unimplemented:v}}addImage(a,d){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,v={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.z.source,`sources.${a}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=this.sourceCaches[a]=new Tn(a,d,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:a})),w.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const v=this.sourceCaches[a].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,v={}){this._checkLoaded();const w=a.id;if(this.getLayer(w))return void this.fire(new o.k(new Error(`Layer "${w}" already exists on this map.`)));let I;if(a.type==="custom"){if(td(this,o.bM(a)))return;I=o.bJ(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(w,a.source),a=o.bK(a),a=o.e(a,{source:w})),this._validate(o.z.layer,`layers.${w}`,a,{arrayIndex:-1},v))return;I=o.bJ(a),this._validateLayer(I),I.setEventedParent(this,{layer:{id:w}})}const z=d?this._order.indexOf(d):this._order.length;if(d&&z===-1)this.fire(new o.k(new Error(`Cannot add layer "${w}" before non-existing layer "${d}".`)));else{if(this._order.splice(z,0,w),this._layerOrderChanged=!0,this._layers[w]=I,this._removedLayers[w]&&I.source&&I.type!=="custom"){const Y=this._removedLayers[w];delete this._removedLayers[w],Y.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const v=this._order.indexOf(a);this._order.splice(v,1);const w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,v){this._checkLoaded();const w=this.getLayer(a);w?w.minzoom===d&&w.maxzoom===v||(d!=null&&(w.minzoom=d),v!=null&&(w.maxzoom=v),this._updateLayer(w)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,v={}){this._checkLoaded();const w=this.getLayer(a);if(w){if(!o.bH(w.filter,d))return d==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(o.z.filter,`layers.${w.id}.filter`,d,null,v)||(w.setFilter(o.bK(d)),this._updateLayer(w)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bK(this.getLayer(a).filter)}setLayoutProperty(a,d,v,w={}){this._checkLoaded();const I=this.getLayer(a);I?o.bH(I.getLayoutProperty(d),v)||(I.setLayoutProperty(d,v,w),this._updateLayer(I)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const v=this.getLayer(a);if(v)return v.getLayoutProperty(d);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,v,w={}){this._checkLoaded();const I=this.getLayer(a);I?o.bH(I.getPaintProperty(d),v)||this._updatePaintProperty(I,d,v,w):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}_updatePaintProperty(a,d,v,w={}){a.setPaintProperty(d,v,w)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[a.id]=!0,this._serializedLayers=null}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const v=a.source,w=a.sourceLayer,I=this.sourceCaches[v];if(I===void 0)return void this.fire(new o.k(new Error(`The source '${v}' does not exist in the map's style.`)));const z=I.getSource().type;z==="geojson"&&w?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||w?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(w,a.id,d)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const v=a.source,w=this.sourceCaches[v];if(w===void 0)return void this.fire(new o.k(new Error(`The source '${v}' does not exist in the map's style.`)));const I=w.getSource().type,z=I==="vector"?a.sourceLayer:void 0;I!=="vector"||z?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(z,a.id,d):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,v=a.sourceLayer,w=this.sourceCaches[d];if(w!==void 0)return w.getSource().type!=="vector"||v?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),w.getFeatureState(v,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.bN(this.sourceCaches,I=>I.serialize()),d=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,w=this.stylesheet;return o.bO({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:a,layers:d,terrain:v},I=>I!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=z=>this._layers[z].type==="fill-extrusion",v={},w=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(d(Y)){v[Y]=z;for(const X of a){const ce=X[Y];if(ce)for(const pe of ce)w.push(pe)}}}w.sort((z,Y)=>Y.intersectionZ-z.intersectionZ);const I=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(d(Y))for(let X=w.length-1;X>=0;X--){const ce=w[X].feature;if(v[ce.layer.id]<z)break;I.push(ce),w.pop()}else for(const X of a){const ce=X[Y];if(ce)for(const pe of ce)I.push(pe.feature)}}return I}queryRenderedFeatures(a,d,v){d&&d.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ce of d.layers){const pe=this._layers[ce];if(!pe)return this.fire(new o.k(new Error(`The layer '${ce}' does not exist in the map's style and cannot be queried for features.`))),[];w[pe.source]=!0}}const I=[];d.availableImages=this._availableImages;const z=this._serializedAllLayers(),Y=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,X=Object.assign(Object.assign({},d),{layers:Y});for(const ce in this.sourceCaches)d.layers&&!w[ce]||I.push(Pe(this.sourceCaches[ce],this._layers,z,a,X,v,this.map.terrain?(pe,Se,Me)=>this.map.terrain.getElevation(pe,Se,Me):void 0));return this.placement&&I.push(function(ce,pe,Se,Me,Fe,qe,it){const lt={},ht=qe.queryRenderedSymbols(Me),bt=[];for(const vt of Object.keys(ht).map(Number))bt.push(it[vt]);bt.sort(ke);for(const vt of bt){const xt=vt.featureIndex.lookupSymbolFeatures(ht[vt.bucketInstanceId],pe,vt.bucketIndex,vt.sourceLayerIndex,Fe.filter,Fe.layers,Fe.availableImages,ce);for(const Dt in xt){const Lt=lt[Dt]=lt[Dt]||[],St=xt[Dt];St.sort((Gt,rn)=>{const Ht=vt.featureSortOrder;if(Ht){const tn=Ht.indexOf(Gt.featureIndex);return Ht.indexOf(rn.featureIndex)-tn}return rn.featureIndex-Gt.featureIndex});for(const Gt of St)Lt.push(Gt)}}return function(vt,xt,Dt){for(const Lt in vt)for(const St of vt[Lt])Qe(St,Dt[xt[Lt].source]);return vt}(lt,ce,Se)}(this._layers,z,this.sourceCaches,a,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(a,d){d&&d.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",d.filter,null,d);const v=this.sourceCaches[a];return v?function(w,I){const z=w.getRenderableIds().map(ce=>w.getTileByID(ce)),Y=[],X={};for(let ce=0;ce<z.length;ce++){const pe=z[ce],Se=pe.tileID.canonical.key;X[Se]||(X[Se]=!0,pe.querySourceFeatures(Y,I))}return Y}(v,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const v=this.light.getLight();let w=!1;for(const z in a)if(!o.bH(a[z],v[z])){w=!0;break}if(!w)return;const I={now:D.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(I)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,d={}){this._checkLoaded();const v=this.getSky();let w=!1;if(!a&&!v)return;if(a&&!v)w=!0;else if(!a&&v)w=!0;else for(const z in a)if(!o.bH(a[z],v[z])){w=!0;break}if(!w)return;const I={now:D.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,d),this.sky.updateTransitions(I)}_setProjectionInternal(a){const d=function(v){if(Array.isArray(v)){const w=new Xr({type:v});return{projection:w,transform:new Mh,cameraHelper:new ec(w)}}switch(v){case"mercator":return{projection:new Bi,transform:new Xi,cameraHelper:new Ns};case"globe":{const w=new Xr({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new Mh,cameraHelper:new ec(w)}}case"vertical-perspective":return{projection:new ai,transform:new Vc,cameraHelper:new so};default:return o.w(`Unknown projection name: ${v}. Falling back to mercator projection.`),{projection:new Bi,transform:new Xi,cameraHelper:new Ns}}}(a);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const v in this.sourceCaches)this.sourceCaches[v].reload()}_validate(a,d,v,w,I={}){return(!I||I.validate!==!1)&&td(this,a.call(o.z,o.e({key:d,style:this.serialize(),value:v,styleSpec:o.v},w)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ne().off(Mr,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,v,w,I=!1){let z=!1,Y=!1;const X={};for(const ce of this._order){const pe=this._layers[ce];if(pe.type!=="symbol")continue;if(!X[pe.source]){const Me=this.sourceCaches[pe.source];X[pe.source]=Me.getRenderableIds(!0).map(Fe=>Me.getTileByID(Fe)).sort((Fe,qe)=>qe.tileID.overscaledZ-Fe.tileID.overscaledZ||(Fe.tileID.isLessThan(qe.tileID)?-1:1))}const Se=this.crossTileSymbolIndex.addLayer(pe,X[pe.source],a.center.lng);z=z||Se}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),a.zoom))&&(this.pauseablePlacement=new cu(a,this.map.terrain,this._order,I,d,v,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,X),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),Y=!0),z&&this.pauseablePlacement.placement.setStale()),Y||z)for(const ce of this._order){const pe=this._layers[ce];pe.type==="symbol"&&this.placement.updateLayerOpacities(pe,X[pe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return o._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[d.source];return w&&w.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(a,d){return o._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(d.stacks),w=this.sourceCaches[d.source];return w&&w.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(o.z.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,v={},w){this._checkLoaded();const I=[{id:a,url:d}],z=[...re(this.stylesheet.sprite),...I];this._validate(o.z.sprite,"sprite",z,null,v)||(this.stylesheet.sprite=z,this._loadSprite(I,!0,w))}removeSprite(a){this._checkLoaded();const d=re(this.stylesheet.sprite);if(d.find(v=>v.id===a)){if(this._spritesImagesIds[a])for(const v of this._spritesImagesIds[a])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return re(this.stylesheet.sprite)}setSprite(a,d={},v){this._checkLoaded(),a&&this._validate(o.z.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,v):(this._unloadSprite(),v&&v(null)))}}var nd=o.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Np{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,v,w,I,z,Y,X,ce){this.context=a;let pe=this.boundPaintVertexBuffers.length!==w.length;for(let Se=0;!pe&&Se<w.length;Se++)this.boundPaintVertexBuffers[Se]!==w[Se]&&(pe=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||pe||this.boundIndexBuffer!==I||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==Y||this.boundDynamicVertexBuffer2!==X||this.boundDynamicVertexBuffer3!==ce?this.freshBind(d,v,w,I,z,Y,X,ce):(a.bindVertexArray.set(this.vao),Y&&Y.bind(),I&&I.dynamicDraw&&I.bind(),X&&X.bind(),ce&&ce.bind())}freshBind(a,d,v,w,I,z,Y,X){const ce=a.numAttributes,pe=this.context,Se=pe.gl;this.vao&&this.destroy(),this.vao=pe.createVertexArray(),pe.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=w,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=Y,this.boundDynamicVertexBuffer3=X,d.enableAttributes(Se,a);for(const Me of v)Me.enableAttributes(Se,a);z&&z.enableAttributes(Se,a),Y&&Y.enableAttributes(Se,a),X&&X.enableAttributes(Se,a),d.bind(),d.setVertexAttribPointers(Se,a,I);for(const Me of v)Me.bind(),Me.setVertexAttribPointers(Se,a,I);z&&(z.bind(),z.setVertexAttribPointers(Se,a,I)),w&&w.bind(),Y&&(Y.bind(),Y.setVertexAttribPointers(Se,a,I)),X&&(X.bind(),X.setVertexAttribPointers(Se,a,I)),pe.currentNumAttributes=ce}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Af=(O,a,d,v,w)=>({u_texture:0,u_ele_delta:O,u_fog_matrix:a,u_fog_color:d?d.properties.get("fog-color"):o.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:d?d.calculateFogBlendOpacity(v):0,u_horizon_color:d?d.properties.get("horizon-color"):o.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),uf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function bA(O){const a=[];for(let d=0;d<O.length;d++){if(O[d]===null)continue;const v=O[d].split(" ");a.push(v.pop())}return a}class Fs{constructor(a,d,v,w,I,z,Y,X,ce=[]){const pe=a.gl;this.program=pe.createProgram();const Se=bA(d.staticAttributes),Me=v?v.getBinderAttributes():[],Fe=Se.concat(Me),qe=So.prelude.staticUniforms?bA(So.prelude.staticUniforms):[],it=Y.staticUniforms?bA(Y.staticUniforms):[],lt=d.staticUniforms?bA(d.staticUniforms):[],ht=v?v.getBinderUniforms():[],bt=qe.concat(it).concat(lt).concat(ht),vt=[];for(const Ht of bt)vt.indexOf(Ht)<0&&vt.push(Ht);const xt=v?v.defines():[];st(pe)&&xt.unshift("#version 300 es"),I&&xt.push("#define OVERDRAW_INSPECTOR;"),z&&xt.push("#define TERRAIN3D;"),X&&xt.push(X),ce&&xt.push(...ce);let Dt=xt.concat(So.prelude.fragmentSource,Y.fragmentSource,d.fragmentSource).join(`
`),Lt=xt.concat(So.prelude.vertexSource,Y.vertexSource,d.vertexSource).join(`
`);st(pe)||(Dt=function(Ht){return Ht.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Dt),Lt=function(Ht){return Ht.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Lt));const St=pe.createShader(pe.FRAGMENT_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);if(pe.shaderSource(St,Dt),pe.compileShader(St),!pe.getShaderParameter(St,pe.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${pe.getShaderInfoLog(St)}`);pe.attachShader(this.program,St);const Gt=pe.createShader(pe.VERTEX_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);if(pe.shaderSource(Gt,Lt),pe.compileShader(Gt),!pe.getShaderParameter(Gt,pe.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${pe.getShaderInfoLog(Gt)}`);pe.attachShader(this.program,Gt),this.attributes={};const rn={};this.numAttributes=Fe.length;for(let Ht=0;Ht<this.numAttributes;Ht++)Fe[Ht]&&(pe.bindAttribLocation(this.program,Ht,Fe[Ht]),this.attributes[Fe[Ht]]=Ht);if(pe.linkProgram(this.program),!pe.getProgramParameter(this.program,pe.LINK_STATUS))throw new Error(`Program failed to link: ${pe.getProgramInfoLog(this.program)}`);pe.deleteShader(Gt),pe.deleteShader(St);for(let Ht=0;Ht<vt.length;Ht++){const tn=vt[Ht];if(tn&&!rn[tn]){const sn=pe.getUniformLocation(this.program,tn);sn&&(rn[tn]=sn)}}this.fixedUniforms=w(a,rn),this.terrainUniforms=((Ht,tn)=>({u_depth:new o.bP(Ht,tn.u_depth),u_terrain:new o.bP(Ht,tn.u_terrain),u_terrain_dim:new o.bg(Ht,tn.u_terrain_dim),u_terrain_matrix:new o.bR(Ht,tn.u_terrain_matrix),u_terrain_unpack:new o.bS(Ht,tn.u_terrain_unpack),u_terrain_exaggeration:new o.bg(Ht,tn.u_terrain_exaggeration)}))(a,rn),this.projectionUniforms=((Ht,tn)=>({u_projection_matrix:new o.bR(Ht,tn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bS(Ht,tn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bS(Ht,tn.u_projection_clipping_plane),u_projection_transition:new o.bg(Ht,tn.u_projection_transition),u_projection_fallback_matrix:new o.bR(Ht,tn.u_projection_fallback_matrix)}))(a,rn),this.binderUniforms=v?v.getUniforms(a,rn):[]}draw(a,d,v,w,I,z,Y,X,ce,pe,Se,Me,Fe,qe,it,lt,ht,bt,vt){const xt=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(v),a.setStencilMode(w),a.setColorMode(I),a.setCullFace(z),X){a.activeTexture.set(xt.TEXTURE2),xt.bindTexture(xt.TEXTURE_2D,X.depthTexture),a.activeTexture.set(xt.TEXTURE3),xt.bindTexture(xt.TEXTURE_2D,X.texture);for(const Lt in this.terrainUniforms)this.terrainUniforms[Lt].set(X[Lt])}if(ce)for(const Lt in ce)this.projectionUniforms[uf[Lt]].set(ce[Lt]);if(Y)for(const Lt in this.fixedUniforms)this.fixedUniforms[Lt].set(Y[Lt]);lt&&lt.setUniforms(a,this.binderUniforms,qe,{zoom:it});let Dt=0;switch(d){case xt.LINES:Dt=2;break;case xt.TRIANGLES:Dt=3;break;case xt.LINE_STRIP:Dt=1}for(const Lt of Fe.get()){const St=Lt.vaos||(Lt.vaos={});(St[pe]||(St[pe]=new Np)).bind(a,this,Se,lt?lt.getPaintVertexBuffers():[],Me,Lt.vertexOffset,ht,bt,vt),xt.drawElements(d,Lt.primitiveLength*Dt,xt.UNSIGNED_SHORT,Lt.primitiveOffset*Dt*2)}}}function rd(O,a,d){const v=1/o.aC(d,1,a.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),I=d.tileSize*Math.pow(2,a.transform.tileZoom)/w,z=I*(d.tileID.canonical.x+d.tileID.wrap*w),Y=I*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[z>>16,Y>>16],u_pixel_coord_lower:[65535&z,65535&Y]}}const WA=(O,a,d,v)=>{const w=O.style.light,I=w.properties.get("position"),z=[I.x,I.y,I.z],Y=o.bV();w.properties.get("anchor")==="viewport"&&o.bW(Y,O.transform.bearingInRadians),o.bX(z,z,Y);const X=O.transform.transformLightDirection(z),ce=w.properties.get("color");return{u_lightpos:z,u_lightpos_globe:X,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[ce.r,ce.g,ce.b],u_vertical_gradient:+a,u_opacity:d,u_fill_translate:v}},id=(O,a,d,v,w,I,z)=>o.e(WA(O,a,d,v),rd(I,O,z),{u_height_factor:-Math.pow(2,w.overscaledZ)/z.tileSize/8}),od=(O,a,d,v)=>o.e(rd(a,O,d),{u_fill_translate:v}),Bc=(O,a)=>({u_world:O,u_fill_translate:a}),sd=(O,a,d,v,w)=>o.e(od(O,a,d,w),{u_world:v}),Qf=(O,a,d,v,w)=>{const I=O.transform;let z,Y,X=0;if(d.paint.get("circle-pitch-alignment")==="map"){const ce=o.aC(a,1,I.zoom);z=!0,Y=[ce,ce],X=ce/(o.$*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*w}else z=!1,Y=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:Y,u_globe_extrude_scale:X,u_translate:v}},wh=O=>({u_pixel_extrude_scale:[1/O.width,1/O.height]}),Yf=O=>({u_viewport_size:[O.width,O.height]}),Sh=(O,a=1)=>({u_color:O,u_overlay:0,u_overlay_scale:a}),cf=(O,a,d,v)=>{const w=o.aC(O,1,a)/(o.$*Math.pow(2,O.tileID.overscaledZ))*2*Math.PI*v;return{u_extrude_scale:o.aC(O,1,a),u_intensity:d,u_globe_extrude_scale:w}},Kl=(O,a,d,v)=>{const w=o.L();o.bY(w,0,O.width,O.height,0,0,1);const I=O.context.gl;return{u_matrix:w,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:d,u_color_ramp:v,u_opacity:a.paint.get("heatmap-opacity")}},Od=(O,a,d)=>{const v=d.paint.get("hillshade-accent-color");let w;switch(d.paint.get("hillshade-method")){case"basic":w=4;break;case"combined":w=1;break;case"igor":w=2;break;case"multidirectional":w=3;break;default:w=0}const I=d.getIlluminationProperties();for(let z=0;z<I.directionRadians.length;z++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(I.directionRadians[z]+=O.transform.bearingInRadians);return{u_image:0,u_latrange:du(0,a.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:I.altitudeRadians,u_azimuths:I.directionRadians,u_accent:v,u_method:w,u_highlights:I.highlightColor,u_shadows:I.shadowColor}},xA=(O,a)=>{const d=a.stride,v=o.L();return o.bY(v,0,o.$,-o.$,0,0,1),o.M(v,v,[0,-o.$,0]),{u_matrix:v,u_image:1,u_dimension:[d,d],u_zoom:O.overscaledZ,u_unpack:a.getUnpackVector()}};function du(O,a){const d=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new o.a1(0,v/d).toLngLat().lat,new o.a1(0,(v+1)/d).toLngLat().lat]}const Eh=(O,a,d=0)=>({u_image:0,u_unpack:a.getUnpackVector(),u_dimension:[a.stride,a.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:O.paint.get("color-relief-opacity")}),Bh=(O,a,d,v)=>{const w=O.transform;return{u_translation:Zc(O,a,d),u_ratio:v/o.aC(a,1,w.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},hf=(O,a,d,v,w)=>o.e(Bh(O,a,d,v),{u_image:0,u_image_height:w}),fu=(O,a,d,v,w)=>{const I=O.transform,z=tc(a,I);return{u_translation:Zc(O,a,d),u_texsize:a.imageAtlasTexture.size,u_ratio:v/o.aC(a,1,I.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[z,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},MA=(O,a,d,v,w,I)=>{const z=O.lineAtlas,Y=tc(a,O.transform),X=d.layout.get("line-cap")==="round",ce=z.getDash(w.from,X),pe=z.getDash(w.to,X),Se=ce.width*I.fromScale,Me=pe.width*I.toScale;return o.e(Bh(O,a,d,v),{u_patternscale_a:[Y/Se,-ce.height/2],u_patternscale_b:[Y/Me,-pe.height/2],u_sdfgamma:z.width/(256*Math.min(Se,Me)*O.pixelRatio)/2,u_image:0,u_tex_y_a:ce.y,u_tex_y_b:pe.y,u_mix:I.t})};function tc(O,a){return 1/o.aC(O,1,a.tileZoom)}function Zc(O,a,d){return o.aD(O.transform,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const ad=(O,a,d,v,w)=>{return{u_tl_parent:O,u_scale_parent:a,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(z=v.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(I=v.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:vm(v.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var I,z};function vm(O){O*=Math.PI/180;const a=Math.sin(O),d=Math.cos(O);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const Oc=(O,a,d,v,w,I,z,Y,X,ce,pe,Se,Me)=>{const Fe=z.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Fe.cameraToCenterDistance,u_pitch:Fe.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:Fe.width/Fe.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:Y,u_coord_matrix:X,u_is_text:+pe,u_pitch_with_map:+v,u_is_along_line:w,u_is_variable_anchor:I,u_texsize:Se,u_texture:0,u_translation:ce,u_pitched_scale:Me}},ld=(O,a,d,v,w,I,z,Y,X,ce,pe,Se,Me,Fe)=>{const qe=z.transform;return o.e(Oc(O,a,d,v,w,I,z,Y,X,ce,pe,Se,Fe),{u_gamma_scale:v?Math.cos(qe.pitch*Math.PI/180)*qe.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},_l=(O,a,d,v,w,I,z,Y,X,ce,pe,Se,Me)=>o.e(ld(O,a,d,v,w,I,z,Y,X,ce,!0,pe,0,Me),{u_texsize_icon:Se,u_texture_icon:1}),ll=(O,a)=>({u_opacity:O,u_color:a}),qf=(O,a,d,v,w)=>o.e(function(I,z,Y,X){const ce=Y.imageManager.getPattern(I.from.toString()),pe=Y.imageManager.getPattern(I.to.toString()),{width:Se,height:Me}=Y.imageManager.getPixelSize(),Fe=Math.pow(2,X.tileID.overscaledZ),qe=X.tileSize*Math.pow(2,Y.transform.tileZoom)/Fe,it=qe*(X.tileID.canonical.x+X.tileID.wrap*Fe),lt=qe*X.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ce.tl,u_pattern_br_a:ce.br,u_pattern_tl_b:pe.tl,u_pattern_br_b:pe.br,u_texsize:[Se,Me],u_mix:z.t,u_pattern_size_a:ce.displaySize,u_pattern_size_b:pe.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.aC(X,1,Y.transform.tileZoom),u_pixel_coord_upper:[it>>16,lt>>16],u_pixel_coord_lower:[65535&it,65535&lt]}}(d,w,a,v),{u_opacity:O}),Oh=(O,a)=>{},$f={fillExtrusion:(O,a)=>({u_lightpos:new o.bT(O,a.u_lightpos),u_lightpos_globe:new o.bT(O,a.u_lightpos_globe),u_lightintensity:new o.bg(O,a.u_lightintensity),u_lightcolor:new o.bT(O,a.u_lightcolor),u_vertical_gradient:new o.bg(O,a.u_vertical_gradient),u_opacity:new o.bg(O,a.u_opacity),u_fill_translate:new o.bU(O,a.u_fill_translate)}),fillExtrusionPattern:(O,a)=>({u_lightpos:new o.bT(O,a.u_lightpos),u_lightpos_globe:new o.bT(O,a.u_lightpos_globe),u_lightintensity:new o.bg(O,a.u_lightintensity),u_lightcolor:new o.bT(O,a.u_lightcolor),u_vertical_gradient:new o.bg(O,a.u_vertical_gradient),u_height_factor:new o.bg(O,a.u_height_factor),u_opacity:new o.bg(O,a.u_opacity),u_fill_translate:new o.bU(O,a.u_fill_translate),u_image:new o.bP(O,a.u_image),u_texsize:new o.bU(O,a.u_texsize),u_pixel_coord_upper:new o.bU(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(O,a.u_pixel_coord_lower),u_scale:new o.bT(O,a.u_scale),u_fade:new o.bg(O,a.u_fade)}),fill:(O,a)=>({u_fill_translate:new o.bU(O,a.u_fill_translate)}),fillPattern:(O,a)=>({u_image:new o.bP(O,a.u_image),u_texsize:new o.bU(O,a.u_texsize),u_pixel_coord_upper:new o.bU(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(O,a.u_pixel_coord_lower),u_scale:new o.bT(O,a.u_scale),u_fade:new o.bg(O,a.u_fade),u_fill_translate:new o.bU(O,a.u_fill_translate)}),fillOutline:(O,a)=>({u_world:new o.bU(O,a.u_world),u_fill_translate:new o.bU(O,a.u_fill_translate)}),fillOutlinePattern:(O,a)=>({u_world:new o.bU(O,a.u_world),u_image:new o.bP(O,a.u_image),u_texsize:new o.bU(O,a.u_texsize),u_pixel_coord_upper:new o.bU(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(O,a.u_pixel_coord_lower),u_scale:new o.bT(O,a.u_scale),u_fade:new o.bg(O,a.u_fade),u_fill_translate:new o.bU(O,a.u_fill_translate)}),circle:(O,a)=>({u_camera_to_center_distance:new o.bg(O,a.u_camera_to_center_distance),u_scale_with_map:new o.bP(O,a.u_scale_with_map),u_pitch_with_map:new o.bP(O,a.u_pitch_with_map),u_extrude_scale:new o.bU(O,a.u_extrude_scale),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.bg(O,a.u_globe_extrude_scale),u_translate:new o.bU(O,a.u_translate)}),collisionBox:(O,a)=>({u_pixel_extrude_scale:new o.bU(O,a.u_pixel_extrude_scale)}),collisionCircle:(O,a)=>({u_viewport_size:new o.bU(O,a.u_viewport_size)}),debug:(O,a)=>({u_color:new o.bQ(O,a.u_color),u_overlay:new o.bP(O,a.u_overlay),u_overlay_scale:new o.bg(O,a.u_overlay_scale)}),depth:Oh,clippingMask:Oh,heatmap:(O,a)=>({u_extrude_scale:new o.bg(O,a.u_extrude_scale),u_intensity:new o.bg(O,a.u_intensity),u_globe_extrude_scale:new o.bg(O,a.u_globe_extrude_scale)}),heatmapTexture:(O,a)=>({u_matrix:new o.bR(O,a.u_matrix),u_world:new o.bU(O,a.u_world),u_image:new o.bP(O,a.u_image),u_color_ramp:new o.bP(O,a.u_color_ramp),u_opacity:new o.bg(O,a.u_opacity)}),hillshade:(O,a)=>({u_image:new o.bP(O,a.u_image),u_latrange:new o.bU(O,a.u_latrange),u_exaggeration:new o.bg(O,a.u_exaggeration),u_altitudes:new o.b_(O,a.u_altitudes),u_azimuths:new o.b_(O,a.u_azimuths),u_accent:new o.bQ(O,a.u_accent),u_method:new o.bP(O,a.u_method),u_shadows:new o.bZ(O,a.u_shadows),u_highlights:new o.bZ(O,a.u_highlights)}),hillshadePrepare:(O,a)=>({u_matrix:new o.bR(O,a.u_matrix),u_image:new o.bP(O,a.u_image),u_dimension:new o.bU(O,a.u_dimension),u_zoom:new o.bg(O,a.u_zoom),u_unpack:new o.bS(O,a.u_unpack)}),colorRelief:(O,a)=>({u_image:new o.bP(O,a.u_image),u_unpack:new o.bS(O,a.u_unpack),u_dimension:new o.bU(O,a.u_dimension),u_elevation_stops:new o.bP(O,a.u_elevation_stops),u_color_stops:new o.bP(O,a.u_color_stops),u_color_ramp_size:new o.bP(O,a.u_color_ramp_size),u_opacity:new o.bg(O,a.u_opacity)}),line:(O,a)=>({u_translation:new o.bU(O,a.u_translation),u_ratio:new o.bg(O,a.u_ratio),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(O,a.u_units_to_pixels)}),lineGradient:(O,a)=>({u_translation:new o.bU(O,a.u_translation),u_ratio:new o.bg(O,a.u_ratio),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(O,a.u_units_to_pixels),u_image:new o.bP(O,a.u_image),u_image_height:new o.bg(O,a.u_image_height)}),linePattern:(O,a)=>({u_translation:new o.bU(O,a.u_translation),u_texsize:new o.bU(O,a.u_texsize),u_ratio:new o.bg(O,a.u_ratio),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_image:new o.bP(O,a.u_image),u_units_to_pixels:new o.bU(O,a.u_units_to_pixels),u_scale:new o.bT(O,a.u_scale),u_fade:new o.bg(O,a.u_fade)}),lineSDF:(O,a)=>({u_translation:new o.bU(O,a.u_translation),u_ratio:new o.bg(O,a.u_ratio),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(O,a.u_units_to_pixels),u_patternscale_a:new o.bU(O,a.u_patternscale_a),u_patternscale_b:new o.bU(O,a.u_patternscale_b),u_sdfgamma:new o.bg(O,a.u_sdfgamma),u_image:new o.bP(O,a.u_image),u_tex_y_a:new o.bg(O,a.u_tex_y_a),u_tex_y_b:new o.bg(O,a.u_tex_y_b),u_mix:new o.bg(O,a.u_mix)}),raster:(O,a)=>({u_tl_parent:new o.bU(O,a.u_tl_parent),u_scale_parent:new o.bg(O,a.u_scale_parent),u_buffer_scale:new o.bg(O,a.u_buffer_scale),u_fade_t:new o.bg(O,a.u_fade_t),u_opacity:new o.bg(O,a.u_opacity),u_image0:new o.bP(O,a.u_image0),u_image1:new o.bP(O,a.u_image1),u_brightness_low:new o.bg(O,a.u_brightness_low),u_brightness_high:new o.bg(O,a.u_brightness_high),u_saturation_factor:new o.bg(O,a.u_saturation_factor),u_contrast_factor:new o.bg(O,a.u_contrast_factor),u_spin_weights:new o.bT(O,a.u_spin_weights),u_coords_top:new o.bS(O,a.u_coords_top),u_coords_bottom:new o.bS(O,a.u_coords_bottom)}),symbolIcon:(O,a)=>({u_is_size_zoom_constant:new o.bP(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(O,a.u_is_size_feature_constant),u_size_t:new o.bg(O,a.u_size_t),u_size:new o.bg(O,a.u_size),u_camera_to_center_distance:new o.bg(O,a.u_camera_to_center_distance),u_pitch:new o.bg(O,a.u_pitch),u_rotate_symbol:new o.bP(O,a.u_rotate_symbol),u_aspect_ratio:new o.bg(O,a.u_aspect_ratio),u_fade_change:new o.bg(O,a.u_fade_change),u_label_plane_matrix:new o.bR(O,a.u_label_plane_matrix),u_coord_matrix:new o.bR(O,a.u_coord_matrix),u_is_text:new o.bP(O,a.u_is_text),u_pitch_with_map:new o.bP(O,a.u_pitch_with_map),u_is_along_line:new o.bP(O,a.u_is_along_line),u_is_variable_anchor:new o.bP(O,a.u_is_variable_anchor),u_texsize:new o.bU(O,a.u_texsize),u_texture:new o.bP(O,a.u_texture),u_translation:new o.bU(O,a.u_translation),u_pitched_scale:new o.bg(O,a.u_pitched_scale)}),symbolSDF:(O,a)=>({u_is_size_zoom_constant:new o.bP(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(O,a.u_is_size_feature_constant),u_size_t:new o.bg(O,a.u_size_t),u_size:new o.bg(O,a.u_size),u_camera_to_center_distance:new o.bg(O,a.u_camera_to_center_distance),u_pitch:new o.bg(O,a.u_pitch),u_rotate_symbol:new o.bP(O,a.u_rotate_symbol),u_aspect_ratio:new o.bg(O,a.u_aspect_ratio),u_fade_change:new o.bg(O,a.u_fade_change),u_label_plane_matrix:new o.bR(O,a.u_label_plane_matrix),u_coord_matrix:new o.bR(O,a.u_coord_matrix),u_is_text:new o.bP(O,a.u_is_text),u_pitch_with_map:new o.bP(O,a.u_pitch_with_map),u_is_along_line:new o.bP(O,a.u_is_along_line),u_is_variable_anchor:new o.bP(O,a.u_is_variable_anchor),u_texsize:new o.bU(O,a.u_texsize),u_texture:new o.bP(O,a.u_texture),u_gamma_scale:new o.bg(O,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_is_halo:new o.bP(O,a.u_is_halo),u_translation:new o.bU(O,a.u_translation),u_pitched_scale:new o.bg(O,a.u_pitched_scale)}),symbolTextAndIcon:(O,a)=>({u_is_size_zoom_constant:new o.bP(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(O,a.u_is_size_feature_constant),u_size_t:new o.bg(O,a.u_size_t),u_size:new o.bg(O,a.u_size),u_camera_to_center_distance:new o.bg(O,a.u_camera_to_center_distance),u_pitch:new o.bg(O,a.u_pitch),u_rotate_symbol:new o.bP(O,a.u_rotate_symbol),u_aspect_ratio:new o.bg(O,a.u_aspect_ratio),u_fade_change:new o.bg(O,a.u_fade_change),u_label_plane_matrix:new o.bR(O,a.u_label_plane_matrix),u_coord_matrix:new o.bR(O,a.u_coord_matrix),u_is_text:new o.bP(O,a.u_is_text),u_pitch_with_map:new o.bP(O,a.u_pitch_with_map),u_is_along_line:new o.bP(O,a.u_is_along_line),u_is_variable_anchor:new o.bP(O,a.u_is_variable_anchor),u_texsize:new o.bU(O,a.u_texsize),u_texsize_icon:new o.bU(O,a.u_texsize_icon),u_texture:new o.bP(O,a.u_texture),u_texture_icon:new o.bP(O,a.u_texture_icon),u_gamma_scale:new o.bg(O,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(O,a.u_device_pixel_ratio),u_is_halo:new o.bP(O,a.u_is_halo),u_translation:new o.bU(O,a.u_translation),u_pitched_scale:new o.bg(O,a.u_pitched_scale)}),background:(O,a)=>({u_opacity:new o.bg(O,a.u_opacity),u_color:new o.bQ(O,a.u_color)}),backgroundPattern:(O,a)=>({u_opacity:new o.bg(O,a.u_opacity),u_image:new o.bP(O,a.u_image),u_pattern_tl_a:new o.bU(O,a.u_pattern_tl_a),u_pattern_br_a:new o.bU(O,a.u_pattern_br_a),u_pattern_tl_b:new o.bU(O,a.u_pattern_tl_b),u_pattern_br_b:new o.bU(O,a.u_pattern_br_b),u_texsize:new o.bU(O,a.u_texsize),u_mix:new o.bg(O,a.u_mix),u_pattern_size_a:new o.bU(O,a.u_pattern_size_a),u_pattern_size_b:new o.bU(O,a.u_pattern_size_b),u_scale_a:new o.bg(O,a.u_scale_a),u_scale_b:new o.bg(O,a.u_scale_b),u_pixel_coord_upper:new o.bU(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(O,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bg(O,a.u_tile_units_to_pixels)}),terrain:(O,a)=>({u_texture:new o.bP(O,a.u_texture),u_ele_delta:new o.bg(O,a.u_ele_delta),u_fog_matrix:new o.bR(O,a.u_fog_matrix),u_fog_color:new o.bQ(O,a.u_fog_color),u_fog_ground_blend:new o.bg(O,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bg(O,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bQ(O,a.u_horizon_color),u_horizon_fog_blend:new o.bg(O,a.u_horizon_fog_blend),u_is_globe_mode:new o.bg(O,a.u_is_globe_mode)}),terrainDepth:(O,a)=>({u_ele_delta:new o.bg(O,a.u_ele_delta)}),terrainCoords:(O,a)=>({u_texture:new o.bP(O,a.u_texture),u_terrain_coords_id:new o.bg(O,a.u_terrain_coords_id),u_ele_delta:new o.bg(O,a.u_ele_delta)}),projectionErrorMeasurement:(O,a)=>({u_input:new o.bg(O,a.u_input),u_output_expected:new o.bg(O,a.u_output_expected)}),atmosphere:(O,a)=>({u_sun_pos:new o.bT(O,a.u_sun_pos),u_atmosphere_blend:new o.bg(O,a.u_atmosphere_blend),u_globe_position:new o.bT(O,a.u_globe_position),u_globe_radius:new o.bg(O,a.u_globe_radius),u_inv_proj_matrix:new o.bR(O,a.u_inv_proj_matrix)}),sky:(O,a)=>({u_sky_color:new o.bQ(O,a.u_sky_color),u_horizon_color:new o.bQ(O,a.u_horizon_color),u_horizon:new o.bU(O,a.u_horizon),u_horizon_normal:new o.bU(O,a.u_horizon_normal),u_sky_horizon_blend:new o.bg(O,a.u_sky_horizon_blend),u_sky_blend:new o.bg(O,a.u_sky_blend)})};class Xc{constructor(a,d,v){this.context=a;const w=a.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ll={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class QA{constructor(a,d,v,w){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=a;const I=a.gl;this.buffer=I.createBuffer(),a.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let v=0;v<this.attributes.length;v++){const w=d.attributes[this.attributes[v].name];w!==void 0&&a.enableVertexAttribArray(w)}}setVertexAttribPointers(a,d,v){for(let w=0;w<this.attributes.length;w++){const I=this.attributes[w],z=d.attributes[I.name];z!==void 0&&a.vertexAttribPointer(z,I.components,a[Ll[I.type]],!1,this.itemSize,I.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bo{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jc extends Bo{getDefault(){return o.bf.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Id extends Bo{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Vf extends Bo{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Td extends Bo{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Zl extends Bo{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Xt extends Bo{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Sn extends Bo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class hn extends Bo{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Pr extends Bo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class Di extends Bo{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Po extends Bo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class Ba extends Bo{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class ds extends Bo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class nc extends Bo{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class df extends Bo{getDefault(){return o.bf.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Xl extends Bo{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Fu extends Bo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Jl extends Bo{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Va extends Bo{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Ul extends Bo{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Al extends Bo{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Ro extends Bo{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class eh extends Bo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class th extends Bo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class bl extends Bo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class YA extends Bo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ha extends Bo{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class qA extends Bo{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const v=this.gl;st(v)?v.bindVertexArray(a):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class eA extends Bo{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class $A extends Bo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class rc extends Bo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Ku extends Bo{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class zl extends Ku{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Ih extends Ku{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Qi extends Ku{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}const Lu="Framebuffer is not complete";class Gp{constructor(a,d,v,w,I){this.context=a,this.width=d,this.height=v;const z=a.gl,Y=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new zl(a,Y),w)this.depthAttachment=I?new Qi(a,Y):new Ih(a,Y);else if(I)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(Lu)}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const v=this.depthAttachment.get();v&&a.deleteRenderbuffer(v)}a.deleteFramebuffer(this.framebuffer)}}class pu{constructor(a){var d,v;if(this.gl=a,this.clearColor=new Jc(this),this.clearDepth=new Id(this),this.clearStencil=new Vf(this),this.colorMask=new Td(this),this.depthMask=new Zl(this),this.stencilMask=new Xt(this),this.stencilFunc=new Sn(this),this.stencilOp=new hn(this),this.stencilTest=new Pr(this),this.depthRange=new Di(this),this.depthTest=new Po(this),this.depthFunc=new Ba(this),this.blend=new ds(this),this.blendFunc=new nc(this),this.blendColor=new df(this),this.blendEquation=new Xl(this),this.cullFace=new Fu(this),this.cullFaceSide=new Jl(this),this.frontFace=new Va(this),this.program=new Ul(this),this.activeTexture=new Al(this),this.viewport=new Ro(this),this.bindFramebuffer=new eh(this),this.bindRenderbuffer=new th(this),this.bindTexture=new bl(this),this.bindVertexBuffer=new YA(this),this.bindElementBuffer=new Ha(this),this.bindVertexArray=new qA(this),this.pixelStoreUnpack=new eA(this),this.pixelStoreUnpackPremultiplyAlpha=new $A(this),this.pixelStoreUnpackFlipY=new rc(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),st(a)){this.HALF_FLOAT=a.HALF_FLOAT;const w=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:w?.RGBA16F_EXT,this.RGB16F=(v=a.RGB16F)!==null&&v!==void 0?v:w?.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const w=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=w?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new Xc(this,a,d)}createVertexBuffer(a,d,v){return new QA(this,a,d,v)}createRenderbuffer(a,d,v){const w=this.gl,I=w.createRenderbuffer();return this.bindRenderbuffer.set(I),w.renderbufferStorage(w.RENDERBUFFER,a,d,v),this.bindRenderbuffer.set(null),I}createFramebuffer(a,d,v,w){return new Gp(this,a,d,v,w)}clear({color:a,depth:d,stencil:v}){const w=this.gl;let I=0;a&&(I|=w.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(I|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(I|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),w.clear(I)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bH(a.blendFunction,Ri.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return st(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return st(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let tA;function nh(O,a,d,v,w){const I=O.context,z=O.transform,Y=I.gl,X=O.useProgram("collisionBox"),ce=[];let pe=0,Se=0;for(let ht=0;ht<v.length;ht++){const bt=v[ht],vt=a.getTile(bt).getBucket(d);if(!vt)continue;const xt=w?vt.textCollisionBox:vt.iconCollisionBox,Dt=vt.collisionCircleArray;Dt.length>0&&(ce.push({circleArray:Dt,circleOffset:Se,coord:bt}),pe+=Dt.length/4,Se=pe),xt&&X.draw(I,Y.LINES,Cr.disabled,ee.disabled,O.colorModeForRenderPass(),Zr.disabled,wh(O.transform),O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),z.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,null,O.transform.zoom,null,null,xt.collisionVertexBuffer)}if(!w||!ce.length)return;const Me=O.useProgram("collisionCircle"),Fe=new o.b$;Fe.resize(4*pe),Fe._trim();let qe=0;for(const ht of ce)for(let bt=0;bt<ht.circleArray.length/4;bt++){const vt=4*bt,xt=ht.circleArray[vt+0],Dt=ht.circleArray[vt+1],Lt=ht.circleArray[vt+2],St=ht.circleArray[vt+3];Fe.emplace(qe++,xt,Dt,Lt,St,0),Fe.emplace(qe++,xt,Dt,Lt,St,1),Fe.emplace(qe++,xt,Dt,Lt,St,2),Fe.emplace(qe++,xt,Dt,Lt,St,3)}(!tA||tA.length<2*pe)&&(tA=function(ht){const bt=2*ht,vt=new o.c1;vt.resize(bt),vt._trim();for(let xt=0;xt<bt;xt++){const Dt=6*xt;vt.uint16[Dt+0]=4*xt+0,vt.uint16[Dt+1]=4*xt+1,vt.uint16[Dt+2]=4*xt+2,vt.uint16[Dt+3]=4*xt+2,vt.uint16[Dt+4]=4*xt+3,vt.uint16[Dt+5]=4*xt+0}return vt}(pe));const it=I.createIndexBuffer(tA,!0),lt=I.createVertexBuffer(Fe,o.c0.members,!0);for(const ht of ce){const bt=Yf(O.transform);Me.draw(I,Y.TRIANGLES,Cr.disabled,ee.disabled,O.colorModeForRenderPass(),Zr.disabled,bt,O.style.map.terrain&&O.style.map.terrain.getTerrainData(ht.coord),null,d.id,lt,it,o.aM.simpleSegment(0,2*ht.circleOffset,ht.circleArray.length,ht.circleArray.length/2),null,O.transform.zoom,null,null,null)}lt.destroy(),it.destroy()}const ff=o.ag(new Float32Array(16));function ls(O,a,d,v,w,I){const{horizontalAlign:z,verticalAlign:Y}=o.aH(O);return new o.P((-(z-.5)*a/w+v[0])*I,(-(Y-.5)*d/w+v[1])*I)}function Ad(O,a,d,v,w,I){const z=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let Y=v.mult(I);d||(Y=Y.rotate(-w));const X=z.add(Y);return ti(X.x,X.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(d){const Y=ki(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(O),X=Math.atan(Y.y/Y.x)+(Y.x<0?Math.PI:0);return O.add(v.rotate(X))}return O.add(v)}function ic(O,a,d,v,w,I,z,Y,X,ce,pe,Se){const Me=O.text.placedSymbolArray,Fe=O.text.dynamicLayoutVertexArray,qe=O.icon.dynamicLayoutVertexArray,it={};Fe.clear();for(let lt=0;lt<Me.length;lt++){const ht=Me.get(lt),bt=ht.hidden||!ht.crossTileID||O.allowVerticalPlacement&&!ht.placedOrientation?null:v[ht.crossTileID];if(bt){const vt=new o.P(ht.anchorX,ht.anchorY),xt={getElevation:Se,width:w.width,height:w.height,pitchedLabelPlaneMatrix:I,pitchWithMap:d,transform:w,tileAnchorPoint:vt,translation:ce,unwrappedTileID:pe},Dt=d?os(vt.x,vt.y,xt):ki(vt.x,vt.y,xt),Lt=bn(w.cameraToCenterDistance,Dt.signedDistanceFromCamera);let St=o.ap(O.textSizeData,Y,ht)*Lt/o.aB;d&&(St*=O.tilePixelRatio/z);const{width:Gt,height:rn,anchor:Ht,textOffset:tn,textBoxScale:sn}=bt,Yn=ls(Ht,Gt,rn,tn,sn,St),Gn=w.getPitchedTextCorrection(vt.x+ce[0],vt.y+ce[1],pe),On=Ad(Dt.point,xt,a,Yn,-w.bearingInRadians,Gn),_r=O.allowVerticalPlacement&&ht.placedOrientation===o.ao.vertical?Math.PI/2:0;for(let ui=0;ui<ht.numGlyphs;ui++)o.av(Fe,On,_r);X&&ht.associatedIconIndex>=0&&(it[ht.associatedIconIndex]={shiftedAnchor:On,angle:_r})}else Ds(ht.numGlyphs,Fe)}if(X){qe.clear();const lt=O.icon.placedSymbolArray;for(let ht=0;ht<lt.length;ht++){const bt=lt.get(ht);if(bt.hidden)Ds(bt.numGlyphs,qe);else{const vt=it[ht];if(vt)for(let xt=0;xt<bt.numGlyphs;xt++)o.av(qe,vt.shiftedAnchor,vt.angle);else Ds(bt.numGlyphs,qe)}}O.icon.dynamicLayoutVertexBuffer.updateData(qe)}O.text.dynamicLayoutVertexBuffer.updateData(Fe)}function wA(O,a,d){return d.iconsInText&&a?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function rh(O,a,d,v,w,I,z,Y,X,ce,pe,Se,Me){const Fe=O.context,qe=Fe.gl,it=O.transform,lt=Y==="map",ht=X==="map",bt=Y!=="viewport"&&d.layout.get("symbol-placement")!=="point",vt=lt&&!ht&&!bt,xt=!d.layout.get("symbol-sort-key").isConstant();let Dt=!1;const Lt=O.getDepthModeForSublayer(0,Cr.ReadOnly),St=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Gt=[],rn=it.getCircleRadiusCorrection();for(const Ht of v){const tn=a.getTile(Ht),sn=tn.getBucket(d);if(!sn)continue;const Yn=w?sn.text:sn.icon;if(!Yn||!Yn.segments.get().length||!Yn.hasVisibleVertices)continue;const Gn=Yn.programConfigurations.get(d.id),On=w||sn.sdfIcons,_r=w?sn.textSizeData:sn.iconSizeData,ui=ht||it.pitch!==0,xo=O.useProgram(wA(On,w,sn),Gn),Zo=o.an(_r,it.zoom),Fo=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Ht);let Xo,As,wi,Io,Ws=[0,0],ws=null;if(w)As=tn.glyphAtlasTexture,wi=qe.LINEAR,Xo=tn.glyphAtlasTexture.size,sn.iconsInText&&(Ws=tn.imageAtlasTexture.size,ws=tn.imageAtlasTexture,Io=ui||O.options.rotating||O.options.zooming||_r.kind==="composite"||_r.kind==="camera"?qe.LINEAR:qe.NEAREST);else{const zo=d.layout.get("icon-size").constantOr(0)!==1||sn.iconsNeedLinear;As=tn.imageAtlasTexture,wi=On||O.options.rotating||O.options.zooming||zo||ui?qe.LINEAR:qe.NEAREST,Xo=tn.imageAtlasTexture.size}const ha=o.aC(tn,1,O.transform.zoom),Js=Br(lt,O.transform,ha),nu=o.L();o.aq(nu,Js);const ju=br(ht,lt,O.transform,ha),iA=o.aD(it,tn,I,z),Lh=it.getProjectionData({overscaledTileID:Ht,applyGlobeMatrix:!Me,applyTerrainMatrix:!0}),Uh=St&&sn.hasTextData(),wu=d.layout.get("icon-text-fit")!=="none"&&Uh&&sn.hasIconData();if(bt){const zo=O.style.map.terrain?(jl,Ua)=>O.style.map.terrain.getElevation(Ht,jl,Ua):null,ms=d.layout.get("text-rotation-alignment")==="map";zr(sn,O,w,Js,nu,ht,ce,ms,Ht.toUnwrapped(),it.width,it.height,iA,zo)}const Kc=w&&St||wu,El=bt||Kc?ff:ht?Js:O.transform.clipSpaceToPixelsMatrix,Wu=On&&d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let fl;fl=On?sn.iconsInText?_l(_r.kind,Zo,vt,ht,bt,Kc,O,El,ju,iA,Xo,Ws,rn):ld(_r.kind,Zo,vt,ht,bt,Kc,O,El,ju,iA,w,Xo,0,rn):Oc(_r.kind,Zo,vt,ht,bt,Kc,O,El,ju,iA,w,Xo,rn);const Qu={program:xo,buffers:Yn,uniformValues:fl,projectionData:Lh,atlasTexture:As,atlasTextureIcon:ws,atlasInterpolation:wi,atlasInterpolationIcon:Io,isSDF:On,hasHalo:Wu};if(xt&&sn.canOverlap){Dt=!0;const zo=Yn.segments.get();for(const ms of zo)Gt.push({segments:new o.aM([ms]),sortKey:ms.sortKey,state:Qu,terrainData:Fo})}else Gt.push({segments:Yn.segments,sortKey:0,state:Qu,terrainData:Fo})}Dt&&Gt.sort((Ht,tn)=>Ht.sortKey-tn.sortKey);for(const Ht of Gt){const tn=Ht.state;if(Fe.activeTexture.set(qe.TEXTURE0),tn.atlasTexture.bind(tn.atlasInterpolation,qe.CLAMP_TO_EDGE),tn.atlasTextureIcon&&(Fe.activeTexture.set(qe.TEXTURE1),tn.atlasTextureIcon&&tn.atlasTextureIcon.bind(tn.atlasInterpolationIcon,qe.CLAMP_TO_EDGE)),tn.isSDF){const sn=tn.uniformValues;tn.hasHalo&&(sn.u_is_halo=1,Th(tn.buffers,Ht.segments,d,O,tn.program,Lt,pe,Se,sn,tn.projectionData,Ht.terrainData)),sn.u_is_halo=0}Th(tn.buffers,Ht.segments,d,O,tn.program,Lt,pe,Se,tn.uniformValues,tn.projectionData,Ht.terrainData)}}function Th(O,a,d,v,w,I,z,Y,X,ce,pe){const Se=v.context;w.draw(Se,Se.gl.TRIANGLES,I,z,Y,Zr.backCCW,X,pe,ce,d.id,O.layoutVertexBuffer,O.indexBuffer,a,d.paint,v.transform.zoom,O.programConfigurations.get(d.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function ih(O,a,d,v,w){const I=O.context,z=I.gl,Y=ee.disabled,X=new Ri([z.ONE,z.ONE],o.bf.transparent,[!0,!0,!0,!0]),ce=a.getBucket(d);if(!ce)return;const pe=v.key;let Se=d.heatmapFbos.get(pe);Se||(Se=mu(I,a.tileSize,a.tileSize),d.heatmapFbos.set(pe,Se)),I.bindFramebuffer.set(Se.framebuffer),I.viewport.set([0,0,a.tileSize,a.tileSize]),I.clear({color:o.bf.transparent});const Me=ce.programConfigurations.get(d.id),Fe=O.useProgram("heatmap",Me,!w),qe=O.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),it=O.style.map.terrain.getTerrainData(v);Fe.draw(I,z.TRIANGLES,Cr.disabled,Y,X,Zr.disabled,cf(a,O.transform.zoom,d.paint.get("heatmap-intensity"),1),it,qe,d.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,d.paint,O.transform.zoom,Me)}function kh(O,a,d,v,w){const I=O.context,z=I.gl,Y=O.transform;I.setColorMode(O.colorModeForRenderPass());const X=_s(I,a),ce=d.key,pe=a.heatmapFbos.get(ce);if(!pe)return;I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,pe.colorAttachment.get()),I.activeTexture.set(z.TEXTURE1),X.bind(z.LINEAR,z.CLAMP_TO_EDGE);const Se=Y.getProjectionData({overscaledTileID:d,applyTerrainMatrix:w,applyGlobeMatrix:!v});O.useProgram("heatmapTexture").draw(I,z.TRIANGLES,Cr.disabled,ee.disabled,O.colorModeForRenderPass(),Zr.disabled,Kl(O,a,0,1),null,Se,a.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments,a.paint,Y.zoom),pe.destroy(),a.heatmapFbos.delete(ce)}function mu(O,a,d){var v,w;const I=O.gl,z=I.createTexture();I.bindTexture(I.TEXTURE_2D,z),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const Y=(v=O.HALF_FLOAT)!==null&&v!==void 0?v:I.UNSIGNED_BYTE,X=(w=O.RGBA16F)!==null&&w!==void 0?w:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,X,a,d,0,I.RGBA,Y,null);const ce=O.createFramebuffer(a,d,!1,!1);return ce.colorAttachment.set(z),ce}function _s(O,a){return a.colorRampTexture||(a.colorRampTexture=new o.T(O,a.colorRamp,O.gl.RGBA)),a.colorRampTexture}function Zs(O,a,d,v,w){if(!d||!v||!v.imageAtlas)return;const I=v.imageAtlas.patternPositions;let z=I[d.to.toString()],Y=I[d.from.toString()];if(!z&&Y&&(z=Y),!Y&&z&&(Y=z),!z||!Y){const X=w.getPaintProperty(a);z=I[X],Y=I[X]}z&&Y&&O.setConstantPatternPositions(z,Y)}function pf(O,a,d,v,w,I,z,Y){const X=O.context.gl,ce="fill-pattern",pe=d.paint.get(ce),Se=pe&&pe.constantOr(1),Me=d.getCrossfadeParameters();let Fe,qe,it,lt,ht;const bt=O.transform,vt=d.paint.get("fill-translate"),xt=d.paint.get("fill-translate-anchor");z?(qe=Se&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Fe=X.LINES):(qe=Se?"fillPattern":"fill",Fe=X.TRIANGLES);const Dt=pe.constantOr(null);for(const Lt of v){const St=a.getTile(Lt);if(Se&&!St.patternsLoaded())continue;const Gt=St.getBucket(d);if(!Gt)continue;const rn=Gt.programConfigurations.get(d.id),Ht=O.useProgram(qe,rn),tn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Lt);Se&&(O.context.activeTexture.set(X.TEXTURE0),St.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),rn.updatePaintBuffers(Me)),Zs(rn,ce,Dt,St,d);const sn=bt.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Yn=o.aD(bt,St,vt,xt);if(z){lt=Gt.indexBuffer2,ht=Gt.segments2;const On=[X.drawingBufferWidth,X.drawingBufferHeight];it=qe==="fillOutlinePattern"&&Se?sd(O,Me,St,On,Yn):Bc(On,Yn)}else lt=Gt.indexBuffer,ht=Gt.segments,it=Se?od(O,Me,St,Yn):{u_fill_translate:Yn};const Gn=O.stencilModeForClipping(Lt);Ht.draw(O.context,Fe,w,Gn,I,Zr.backCCW,it,tn,sn,d.id,Gt.layoutVertexBuffer,lt,ht,d.paint,O.transform.zoom,rn)}}function Ph(O,a,d,v,w,I,z,Y){const X=O.context,ce=X.gl,pe="fill-extrusion-pattern",Se=d.paint.get(pe),Me=Se.constantOr(1),Fe=d.getCrossfadeParameters(),qe=d.paint.get("fill-extrusion-opacity"),it=Se.constantOr(null),lt=O.transform;for(const ht of v){const bt=a.getTile(ht),vt=bt.getBucket(d);if(!vt)continue;const xt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(ht),Dt=vt.programConfigurations.get(d.id),Lt=O.useProgram(Me?"fillExtrusionPattern":"fillExtrusion",Dt);Me&&(O.context.activeTexture.set(ce.TEXTURE0),bt.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Fe));const St=lt.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});Zs(Dt,pe,it,bt,d);const Gt=o.aD(lt,bt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),rn=d.paint.get("fill-extrusion-vertical-gradient"),Ht=Me?id(O,rn,qe,Gt,ht,Fe,bt):WA(O,rn,qe,Gt);Lt.draw(X,X.gl.TRIANGLES,w,I,z,Zr.backCCW,Ht,xt,St,d.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,d.paint,O.transform.zoom,Dt,O.style.map.terrain&&vt.centroidVertexBuffer)}}function gu(O,a,d,v,w,I,z,Y,X){var ce;const pe=O.style.projection,Se=O.context,Me=O.transform,Fe=Se.gl,qe=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],it=O.useProgram("hillshade",null,!1,qe),lt=!O.options.moving;for(const ht of v){const bt=a.getTile(ht),vt=bt.fbo;if(!vt)continue;const xt=pe.getMeshFromTileID(Se,ht.canonical,Y,!0,"raster"),Dt=(ce=O.style.map.terrain)===null||ce===void 0?void 0:ce.getTerrainData(ht);Se.activeTexture.set(Fe.TEXTURE0),Fe.bindTexture(Fe.TEXTURE_2D,vt.colorAttachment.get());const Lt=Me.getProjectionData({overscaledTileID:ht,aligned:lt,applyGlobeMatrix:!X,applyTerrainMatrix:!0});it.draw(Se,Fe.TRIANGLES,I,w[ht.overscaledZ],z,Zr.backCCW,Od(O,bt,d),Dt,Lt,d.id,xt.vertexBuffer,xt.indexBuffer,xt.segments)}}function oc(O,a,d,v,w,I,z,Y,X){var ce;const pe=O.style.projection,Se=O.context,Me=O.transform,Fe=Se.gl,qe=O.useProgram("colorRelief"),it=!O.options.moving;let lt=!0,ht=0;for(const bt of v){const vt=a.getTile(bt),xt=vt.dem;if(lt){const Ht=Fe.getParameter(Fe.MAX_TEXTURE_SIZE),{elevationTexture:tn,colorTexture:sn}=d.getColorRampTextures(Se,Ht,xt.getUnpackVector());Se.activeTexture.set(Fe.TEXTURE1),tn.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE),Se.activeTexture.set(Fe.TEXTURE4),sn.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),lt=!1,ht=tn.size[0]}if(!xt||!xt.data)continue;const Dt=xt.stride,Lt=xt.getPixels();if(Se.activeTexture.set(Fe.TEXTURE0),Se.pixelStoreUnpackPremultiplyAlpha.set(!1),vt.demTexture=vt.demTexture||O.getTileTexture(Dt),vt.demTexture){const Ht=vt.demTexture;Ht.update(Lt,{premultiply:!1}),Ht.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}else vt.demTexture=new o.T(Se,Lt,Fe.RGBA,{premultiply:!1}),vt.demTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE);const St=pe.getMeshFromTileID(Se,bt.canonical,Y,!0,"raster"),Gt=(ce=O.style.map.terrain)===null||ce===void 0?void 0:ce.getTerrainData(bt),rn=Me.getProjectionData({overscaledTileID:bt,aligned:it,applyGlobeMatrix:!X,applyTerrainMatrix:!0});qe.draw(Se,Fe.TRIANGLES,I,w[bt.overscaledZ],z,Zr.backCCW,Eh(d,vt.dem,ht),Gt,rn,d.id,St.vertexBuffer,St.indexBuffer,St.segments)}}const Ic=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function Za(O,a,d,v,w,I,z,Y,X=!1,ce=!1){const pe=v[v.length-1].overscaledZ,Se=O.context,Me=Se.gl,Fe=O.useProgram("raster"),qe=O.transform,it=O.style.projection,lt=O.colorModeForRenderPass(),ht=!O.options.moving;for(const bt of v){const vt=O.getDepthModeForSublayer(bt.overscaledZ-pe,d.paint.get("raster-opacity")===1?Cr.ReadWrite:Cr.ReadOnly,Me.LESS),xt=a.getTile(bt);xt.registerFadeDuration(d.paint.get("raster-fade-duration"));const Dt=a.findLoadedParent(bt,0),Lt=a.findLoadedSibling(bt),St=Uu(xt,Dt||Lt||null,a,d,O.transform,O.style.map.terrain);let Gt,rn;const Ht=d.paint.get("raster-resampling")==="nearest"?Me.NEAREST:Me.LINEAR;Se.activeTexture.set(Me.TEXTURE0),xt.texture.bind(Ht,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),Se.activeTexture.set(Me.TEXTURE1),Dt?(Dt.texture.bind(Ht,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),Gt=Math.pow(2,Dt.tileID.overscaledZ-xt.tileID.overscaledZ),rn=[xt.tileID.canonical.x*Gt%1,xt.tileID.canonical.y*Gt%1]):xt.texture.bind(Ht,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),xt.texture.useMipmap&&Se.extTextureFilterAnisotropic&&O.transform.pitch>20&&Me.texParameterf(Me.TEXTURE_2D,Se.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Se.extTextureFilterAnisotropicMax);const tn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),sn=qe.getProjectionData({overscaledTileID:bt,aligned:ht,applyGlobeMatrix:!ce,applyTerrainMatrix:!0}),Yn=ad(rn||[0,0],Gt||1,St,d,Y),Gn=it.getMeshFromTileID(Se,bt.canonical,I,z,"raster");Fe.draw(Se,Me.TRIANGLES,vt,w?w[bt.overscaledZ]:ee.disabled,lt,X?Zr.frontCCW:Zr.backCCW,Yn,tn,sn,d.id,Gn.vertexBuffer,Gn.indexBuffer,Gn.segments)}}function Uu(O,a,d,v,w,I){const z=v.paint.get("raster-fade-duration");if(!I&&z>0){const Y=D.now(),X=(Y-O.timeAdded)/z,ce=a?(Y-a.timeAdded)/z:-1,pe=d.getSource(),Se=It(w,{tileSize:pe.tileSize,roundZoom:pe.roundZoom}),Me=!a||Math.abs(a.tileID.overscaledZ-Se)>Math.abs(O.tileID.overscaledZ-Se),Fe=Me&&O.refreshedUponExpiration?1:o.ah(Me?X:1-ce,0,1);return O.refreshedUponExpiration&&X>=1&&(O.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Fe}:{opacity:Fe,mix:0}}return{opacity:1,mix:0}}const nA=new o.bf(1,0,0,1),sc=new o.bf(0,1,0,1),SA=new o.bf(0,0,1,1),Rh=new o.bf(1,0,1,1),Dh=new o.bf(0,1,1,1);function ud(O,a,d,v){xl(O,0,a+d/2,O.transform.width,d,v)}function fs(O,a,d,v){xl(O,a-d/2,0,d,O.transform.height,v)}function xl(O,a,d,v,w,I){const z=O.context,Y=z.gl;Y.enable(Y.SCISSOR_TEST),Y.scissor(a*O.pixelRatio,d*O.pixelRatio,v*O.pixelRatio,w*O.pixelRatio),z.clear({color:I}),Y.disable(Y.SCISSOR_TEST)}function Aa(O,a,d){const v=O.context,w=v.gl,I=O.useProgram("debug"),z=Cr.disabled,Y=ee.disabled,X=O.colorModeForRenderPass(),ce="$debug",pe=O.style.map.terrain&&O.style.map.terrain.getTerrainData(d);v.activeTexture.set(w.TEXTURE0);const Se=a.getTileByID(d.key).latestRawTileData,Me=Math.floor((Se&&Se.byteLength||0)/1024),Fe=a.getTile(d).tileSize,qe=512/Math.min(Fe,512)*(d.overscaledZ/O.transform.zoom)*.5;let it=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(it+=` => ${d.overscaledZ}`),function(ht,bt){ht.initDebugOverlayCanvas();const vt=ht.debugOverlayCanvas,xt=ht.context.gl,Dt=ht.debugOverlayCanvas.getContext("2d");Dt.clearRect(0,0,vt.width,vt.height),Dt.shadowColor="white",Dt.shadowBlur=2,Dt.lineWidth=1.5,Dt.strokeStyle="white",Dt.textBaseline="top",Dt.font="bold 36px Open Sans, sans-serif",Dt.fillText(bt,5,5),Dt.strokeText(bt,5,5),ht.debugOverlayTexture.update(vt),ht.debugOverlayTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)}(O,`${it} ${Me}kB`);const lt=O.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(v,w.TRIANGLES,z,Y,Ri.alphaBlended,Zr.disabled,Sh(o.bf.transparent,qe),null,lt,ce,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),I.draw(v,w.LINE_STRIP,z,Y,X,Zr.disabled,Sh(o.bf.red),pe,lt,ce,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function VA(O,a,d,v){const{isRenderingGlobe:w}=v,I=O.context,z=I.gl,Y=O.transform,X=O.colorModeForRenderPass(),ce=O.getDepthModeFor3D(),pe=O.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,O.width,O.height]);for(const Se of d){const Me=a.getTerrainMesh(Se.tileID),Fe=O.renderToTexture.getTexture(Se),qe=a.getTerrainData(Se.tileID);I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Fe.texture);const it=a.getMeshFrameDelta(Y.zoom),lt=Y.calculateFogMatrix(Se.tileID.toUnwrapped()),ht=Af(it,lt,O.style.sky,Y.pitch,w),bt=Y.getProjectionData({overscaledTileID:Se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});pe.draw(I,z.TRIANGLES,ce,ee.disabled,X,Zr.backCCW,ht,qe,bt,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments)}}function yu(O,a){if(!a.mesh){const d=new o.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const v=new o.aN;v.emplaceBack(0,1,2),v.emplaceBack(0,2,3),a.mesh=new ol(O.createVertexBuffer(d,cs.members),O.createIndexBuffer(v),o.aM.simpleSegment(0,0,d.length,v.length))}return a.mesh}class EA{constructor(a,d){this.context=new pu(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Tn.maxUnderzooming+Tn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _a}resize(a,d,v){if(this.width=Math.floor(a*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const a=this.context,d=new o.aL;d.emplaceBack(0,0),d.emplaceBack(o.$,0),d.emplaceBack(0,o.$),d.emplaceBack(o.$,o.$),this.tileExtentBuffer=a.createVertexBuffer(d,cs.members),this.tileExtentSegments=o.aM.simpleSegment(0,0,4,2);const v=new o.aL;v.emplaceBack(0,0),v.emplaceBack(o.$,0),v.emplaceBack(0,o.$),v.emplaceBack(o.$,o.$),this.debugBuffer=a.createVertexBuffer(v,cs.members),this.debugSegments=o.aM.simpleSegment(0,0,4,5);const w=new o.c6;w.emplaceBack(0,0,0,0),w.emplaceBack(o.$,0,o.$,0),w.emplaceBack(0,o.$,0,o.$),w.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=a.createVertexBuffer(w,nd.members),this.rasterBoundsSegments=o.aM.simpleSegment(0,0,4,2);const I=new o.aL;I.emplaceBack(0,0),I.emplaceBack(o.$,0),I.emplaceBack(0,o.$),I.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(I,cs.members),this.rasterBoundsSegmentsPosOnly=o.aM.simpleSegment(0,0,4,5);const z=new o.aL;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(z,cs.members),this.viewportSegments=o.aM.simpleSegment(0,0,4,2);const Y=new o.c7;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(Y);const X=new o.aN;X.emplaceBack(1,0,2),X.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(X);const ce=this.context.gl;this.stencilClearMode=new ee({func:ce.ALWAYS,mask:0},0,255,ce.ZERO,ce.ZERO,ce.ZERO),this.tileExtentMesh=new ol(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=o.L();o.bY(v,0,this.width,this.height,0,0,1),o.N(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const w={mainMatrix:v,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:v};this.useProgram("clippingMask",null,!0).draw(a,d.TRIANGLES,Cr.disabled,this.stencilClearMode,Ri.disabled,Zr.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d,v){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source,this.nextStencilID+d.length>256&&this.clearStencil();const w=this.context;w.setColorMode(Ri.disabled),w.setDepthMode(Cr.disabled);const I={};for(const z of d)I[z.key]=this.nextStencilID++;this._renderTileMasks(I,d,v,!0),this._renderTileMasks(I,d,v,!1),this._tileClippingMaskIDs=I}_renderTileMasks(a,d,v,w){const I=this.context,z=I.gl,Y=this.style.projection,X=this.transform,ce=this.useProgram("clippingMask");for(const pe of d){const Se=a[pe.key],Me=this.style.map.terrain&&this.style.map.terrain.getTerrainData(pe),Fe=Y.getMeshFromTileID(this.context,pe.canonical,w,!0,"stencil"),qe=X.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!v,applyTerrainMatrix:!0});ce.draw(I,z.TRIANGLES,Cr.disabled,new ee({func:z.ALWAYS,mask:0},Se,255,z.KEEP,z.KEEP,z.REPLACE),Ri.disabled,v?Zr.disabled:Zr.backCCW,null,Me,qe,"$clipping",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}_renderTilesDepthBuffer(){const a=this.context,d=a.gl,v=this.style.projection,w=this.transform,I=this.useProgram("depth"),z=this.getDepthModeFor3D(),Y=nt(w,{tileSize:w.tileSize});for(const X of Y){const ce=this.style.map.terrain&&this.style.map.terrain.getTerrainData(X),pe=v.getMeshFromTileID(this.context,X.canonical,!0,!0,"raster"),Se=w.getProjectionData({overscaledTileID:X,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(a,d.TRIANGLES,z,ee.disabled,Ri.disabled,Zr.backCCW,null,ce,Se,"$clipping",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new ee({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new ee({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){const d=this.context.gl,v=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),w=v[v.length-1].overscaledZ,I=v[0].overscaledZ-w+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const z={};for(let Y=0;Y<I;Y++)z[Y+w]=new ee({func:d.GEQUAL,mask:255},Y+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=I,[z,v]}return[{[w]:ee.disabled},v]}stencilConfigForOverlapTwoPass(a){const d=this.context.gl,v=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),w=v[v.length-1].overscaledZ,I=v[0].overscaledZ-w+1;if(this.clearStencil(),I>1){const z={},Y={};for(let X=0;X<I;X++)z[X+w]=new ee({func:d.GREATER,mask:255},I+1+X,255,d.KEEP,d.KEEP,d.REPLACE),Y[X+w]=new ee({func:d.GREATER,mask:255},1+X,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*I+1,[z,Y,v]}return this.nextStencilID=3,[{[w]:new ee({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[w]:new ee({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Ri([a.CONSTANT_COLOR,a.ONE],new o.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ri.unblended:Ri.alphaBlended}getDepthModeForSublayer(a,d,v){if(!this.opaquePassEnabledForLayer())return Cr.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Cr(v||this.context.gl.LEQUAL,d,[w,w])}getDepthModeFor3D(){return new Cr(this.context.gl.LEQUAL,Cr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){var v,w;this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const I=this.style._order,z=this.style.sourceCaches,Y={},X={},ce={},pe={isRenderingToTexture:!1,isRenderingGlobe:((v=a.projection)===null||v===void 0?void 0:v.transitionState)>0};for(const Me in z){const Fe=z[Me];Fe.used&&Fe.prepare(this.context),Y[Me]=Fe.getVisibleCoordinates(!1),X[Me]=Y[Me].slice().reverse(),ce[Me]=Fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Me=0;Me<I.length;Me++)if(this.style._layers[I[Me]].is3D()){this.opaquePassCutoff=Me;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Me of I){const Fe=this.style._layers[Me];if(!Fe.hasOffscreenPass()||Fe.isHidden(this.transform.zoom))continue;const qe=X[Fe.source];(Fe.type==="custom"||qe.length)&&this.renderLayer(this,z[Fe.source],Fe,qe,pe)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:Me=>this.useProgram(Me)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?o.bf.black:o.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Me,Fe){const qe=Me.context,it=qe.gl,lt=((Lt,St,Gt)=>{const rn=Math.cos(St.rollInRadians),Ht=Math.sin(St.rollInRadians),tn=ct(St),sn=St.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Lt.properties.get("sky-color"),u_horizon_color:Lt.properties.get("horizon-color"),u_horizon:[(St.width/2-tn*Ht)*Gt,(St.height/2+tn*rn)*Gt],u_horizon_normal:[-Ht,rn],u_sky_horizon_blend:Lt.properties.get("sky-horizon-blend")*St.height/2*Gt,u_sky_blend:sn}})(Fe,Me.style.map.transform,Me.pixelRatio),ht=new Cr(it.LEQUAL,Cr.ReadWrite,[0,1]),bt=ee.disabled,vt=Me.colorModeForRenderPass(),xt=Me.useProgram("sky"),Dt=yu(qe,Fe);xt.draw(qe,it.TRIANGLES,ht,bt,vt,Zr.disabled,lt,null,void 0,"sky",Dt.vertexBuffer,Dt.indexBuffer,Dt.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const Me=this.style._layers[I[this.currentLayer]],Fe=z[Me.source],qe=Y[Me.source];this._renderTileClippingMasks(Me,qe,!1),this.renderLayer(this,Fe,Me,qe,pe)}this.renderPass="translucent";let Se=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const Me=this.style._layers[I[this.currentLayer]],Fe=z[Me.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Me,pe))continue;this.opaquePassEnabledForLayer()||Se||(Se=!0,pe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const qe=(Me.type==="symbol"?ce:X)[Me.source];this._renderTileClippingMasks(Me,Y[Me.source],!!this.renderToTexture),this.renderLayer(this,Fe,Me,qe,pe)}if(pe.isRenderingGlobe&&function(Me,Fe,qe){const it=Me.context,lt=it.gl,ht=Me.useProgram("atmosphere"),bt=new Cr(lt.LEQUAL,Cr.ReadOnly,[0,1]),vt=Me.transform,xt=function(sn,Yn){const Gn=sn.properties.get("position"),On=[-Gn.x,-Gn.y,-Gn.z],_r=o.ag(new Float64Array(16));return sn.properties.get("anchor")==="map"&&(o.b6(_r,_r,Yn.rollInRadians),o.b7(_r,_r,-Yn.pitchInRadians),o.b6(_r,_r,Yn.bearingInRadians),o.b7(_r,_r,Yn.center.lat*Math.PI/180),o.bz(_r,_r,-Yn.center.lng*Math.PI/180)),o.c5(On,On,_r),On}(qe,Me.transform),Dt=vt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Lt=Fe.properties.get("atmosphere-blend")*Dt.projectionTransition;if(Lt===0)return;const St=di(vt.worldSize,vt.center.lat),Gt=vt.inverseProjectionMatrix,rn=new Float64Array(4);rn[3]=1,o.aw(rn,rn,vt.modelViewProjectionMatrix),rn[0]/=rn[3],rn[1]/=rn[3],rn[2]/=rn[3],rn[3]=1,o.aw(rn,rn,Gt),rn[0]/=rn[3],rn[1]/=rn[3],rn[2]/=rn[3],rn[3]=1;const Ht=((sn,Yn,Gn,On,_r)=>({u_sun_pos:sn,u_atmosphere_blend:Yn,u_globe_position:Gn,u_globe_radius:On,u_inv_proj_matrix:_r}))(xt,Lt,[rn[0],rn[1],rn[2]],St,Gt),tn=yu(it,Fe);ht.draw(it,lt.TRIANGLES,bt,ee.disabled,Ri.alphaBlended,Zr.disabled,Ht,null,null,"atmosphere",tn.vertexBuffer,tn.indexBuffer,tn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Me=function(Fe,qe){let it=null;const lt=Object.values(Fe._layers).flatMap(xt=>xt.source&&!xt.isHidden(qe)?[Fe.sourceCaches[xt.source]]:[]),ht=lt.filter(xt=>xt.getSource().type==="vector"),bt=lt.filter(xt=>xt.getSource().type!=="vector"),vt=xt=>{(!it||it.getSource().maxzoom<xt.getSource().maxzoom)&&(it=xt)};return ht.forEach(xt=>vt(xt)),it||bt.forEach(xt=>vt(xt)),it}(this.style,this.transform.zoom);Me&&function(Fe,qe,it){for(let lt=0;lt<it.length;lt++)Aa(Fe,qe,it[lt])}(this,Me,Me.getVisibleCoordinates())}this.options.showPadding&&function(Me){const Fe=Me.transform.padding;ud(Me,Me.transform.height-(Fe.top||0),3,nA),ud(Me,Fe.bottom||0,3,sc),fs(Me,Fe.left||0,3,SA),fs(Me,Me.transform.width-(Fe.right||0),3,Rh);const qe=Me.transform.centerPoint;(function(it,lt,ht,bt){xl(it,lt-1,ht-10,2,20,bt),xl(it,lt-10,ht-1,20,2,bt)})(Me,qe.x,Me.transform.height-qe.y,Dh)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=a?!o.c8(d,v):!o.c9(d,v)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(o.ca(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(I,z){const Y=I.context,X=Y.gl,ce=I.transform,pe=Ri.unblended,Se=new Cr(X.LEQUAL,Cr.ReadWrite,[0,1]),Me=z.sourceCache.getRenderableTiles(),Fe=I.useProgram("terrainDepth");Y.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),Y.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),Y.clear({color:o.bf.transparent,depth:1});for(const qe of Me){const it=z.getTerrainMesh(qe.tileID),lt=z.getTerrainData(qe.tileID),ht=ce.getProjectionData({overscaledTileID:qe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),bt={u_ele_delta:z.getMeshFrameDelta(ce.zoom)};Fe.draw(Y,X.TRIANGLES,Se,ee.disabled,pe,Zr.backCCW,bt,lt,ht,"terrain",it.vertexBuffer,it.indexBuffer,it.segments)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain),function(I,z){const Y=I.context,X=Y.gl,ce=I.transform,pe=Ri.unblended,Se=new Cr(X.LEQUAL,Cr.ReadWrite,[0,1]),Me=z.getCoordsTexture(),Fe=z.sourceCache.getRenderableTiles(),qe=I.useProgram("terrainCoords");Y.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),Y.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),Y.clear({color:o.bf.transparent,depth:1}),z.coordsIndex=[];for(const it of Fe){const lt=z.getTerrainMesh(it.tileID),ht=z.getTerrainData(it.tileID);Y.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Me.texture);const bt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(ce.zoom)},vt=ce.getProjectionData({overscaledTileID:it.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});qe.draw(Y,X.TRIANGLES,Se,ee.disabled,pe,Zr.backCCW,bt,ht,vt,"terrain",lt.vertexBuffer,lt.indexBuffer,lt.segments),z.coordsIndex.push(it.tileID.key)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain))}renderLayer(a,d,v,w,I){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(w||[]).length)&&(this.id=v.id,o.cb(v)?function(z,Y,X,ce,pe,Se){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Me}=Se,Fe=ee.disabled,qe=z.colorModeForRenderPass();(X._unevaluatedLayout.hasValue("text-variable-anchor")||X._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(it,lt,ht,bt,vt,xt,Dt,Lt,St){const Gt=lt.transform,rn=lt.style.map.terrain,Ht=vt==="map",tn=xt==="map";for(const sn of it){const Yn=bt.getTile(sn),Gn=Yn.getBucket(ht);if(!Gn||!Gn.text||!Gn.text.segments.get().length)continue;const On=o.an(Gn.textSizeData,Gt.zoom),_r=o.aC(Yn,1,lt.transform.zoom),ui=Br(Ht,lt.transform,_r),xo=ht.layout.get("icon-text-fit")!=="none"&&Gn.hasIconData();if(On){const Zo=Math.pow(2,Gt.zoom-Yn.tileID.overscaledZ),Fo=rn?(Xo,As)=>rn.getElevation(sn,Xo,As):null;ic(Gn,Ht,tn,St,Gt,ui,Zo,On,xo,o.aD(Gt,Yn,Dt,Lt),sn.toUnwrapped(),Fo)}}}(ce,z,X,Y,X.layout.get("text-rotation-alignment"),X.layout.get("text-pitch-alignment"),X.paint.get("text-translate"),X.paint.get("text-translate-anchor"),pe),X.paint.get("icon-opacity").constantOr(1)!==0&&rh(z,Y,X,ce,!1,X.paint.get("icon-translate"),X.paint.get("icon-translate-anchor"),X.layout.get("icon-rotation-alignment"),X.layout.get("icon-pitch-alignment"),X.layout.get("icon-keep-upright"),Fe,qe,Me),X.paint.get("text-opacity").constantOr(1)!==0&&rh(z,Y,X,ce,!0,X.paint.get("text-translate"),X.paint.get("text-translate-anchor"),X.layout.get("text-rotation-alignment"),X.layout.get("text-pitch-alignment"),X.layout.get("text-keep-upright"),Fe,qe,Me),Y.map.showCollisionBoxes&&(nh(z,Y,X,ce,!0),nh(z,Y,X,ce,!1))}(a,d,v,w,this.style.placement.variableOffsets,I):o.cc(v)?function(z,Y,X,ce,pe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Se}=pe,Me=X.paint.get("circle-opacity"),Fe=X.paint.get("circle-stroke-width"),qe=X.paint.get("circle-stroke-opacity"),it=!X.layout.get("circle-sort-key").isConstant();if(Me.constantOr(1)===0&&(Fe.constantOr(1)===0||qe.constantOr(1)===0))return;const lt=z.context,ht=lt.gl,bt=z.transform,vt=z.getDepthModeForSublayer(0,Cr.ReadOnly),xt=ee.disabled,Dt=z.colorModeForRenderPass(),Lt=[],St=bt.getCircleRadiusCorrection();for(let Gt=0;Gt<ce.length;Gt++){const rn=ce[Gt],Ht=Y.getTile(rn),tn=Ht.getBucket(X);if(!tn)continue;const sn=X.paint.get("circle-translate"),Yn=X.paint.get("circle-translate-anchor"),Gn=o.aD(bt,Ht,sn,Yn),On=tn.programConfigurations.get(X.id),_r=z.useProgram("circle",On),ui=tn.layoutVertexBuffer,xo=tn.indexBuffer,Zo=z.style.map.terrain&&z.style.map.terrain.getTerrainData(rn),Fo={programConfiguration:On,program:_r,layoutVertexBuffer:ui,indexBuffer:xo,uniformValues:Qf(z,Ht,X,Gn,St),terrainData:Zo,projectionData:bt.getProjectionData({overscaledTileID:rn,applyGlobeMatrix:!Se,applyTerrainMatrix:!0})};if(it){const Xo=tn.segments.get();for(const As of Xo)Lt.push({segments:new o.aM([As]),sortKey:As.sortKey,state:Fo})}else Lt.push({segments:tn.segments,sortKey:0,state:Fo})}it&&Lt.sort((Gt,rn)=>Gt.sortKey-rn.sortKey);for(const Gt of Lt){const{programConfiguration:rn,program:Ht,layoutVertexBuffer:tn,indexBuffer:sn,uniformValues:Yn,terrainData:Gn,projectionData:On}=Gt.state;Ht.draw(lt,ht.TRIANGLES,vt,xt,Dt,Zr.backCCW,Yn,Gn,On,X.id,tn,sn,Gt.segments,X.paint,z.transform.zoom,rn)}}(a,d,v,w,I):o.cd(v)?function(z,Y,X,ce,pe){if(X.paint.get("heatmap-opacity")===0)return;const Se=z.context,{isRenderingToTexture:Me,isRenderingGlobe:Fe}=pe;if(z.style.map.terrain){for(const qe of ce){const it=Y.getTile(qe);Y.hasRenderableParent(qe)||(z.renderPass==="offscreen"?ih(z,it,X,qe,Fe):z.renderPass==="translucent"&&kh(z,X,qe,Me,Fe))}Se.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(qe,it,lt,ht){const bt=qe.context,vt=bt.gl,xt=qe.transform,Dt=ee.disabled,Lt=new Ri([vt.ONE,vt.ONE],o.bf.transparent,[!0,!0,!0,!0]);(function(St,Gt,rn){const Ht=St.gl;St.activeTexture.set(Ht.TEXTURE1),St.viewport.set([0,0,Gt.width/4,Gt.height/4]);let tn=rn.heatmapFbos.get(o.c2);tn?(Ht.bindTexture(Ht.TEXTURE_2D,tn.colorAttachment.get()),St.bindFramebuffer.set(tn.framebuffer)):(tn=mu(St,Gt.width/4,Gt.height/4),rn.heatmapFbos.set(o.c2,tn))})(bt,qe,lt),bt.clear({color:o.bf.transparent});for(let St=0;St<ht.length;St++){const Gt=ht[St];if(it.hasRenderableParent(Gt))continue;const rn=it.getTile(Gt),Ht=rn.getBucket(lt);if(!Ht)continue;const tn=Ht.programConfigurations.get(lt.id),sn=qe.useProgram("heatmap",tn),Yn=xt.getProjectionData({overscaledTileID:Gt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Gn=xt.getCircleRadiusCorrection();sn.draw(bt,vt.TRIANGLES,Cr.disabled,Dt,Lt,Zr.backCCW,cf(rn,xt.zoom,lt.paint.get("heatmap-intensity"),Gn),null,Yn,lt.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,lt.paint,xt.zoom,tn)}bt.viewport.set([0,0,qe.width,qe.height])}(z,Y,X,ce):z.renderPass==="translucent"&&function(qe,it){const lt=qe.context,ht=lt.gl;lt.setColorMode(qe.colorModeForRenderPass());const bt=it.heatmapFbos.get(o.c2);bt&&(lt.activeTexture.set(ht.TEXTURE0),ht.bindTexture(ht.TEXTURE_2D,bt.colorAttachment.get()),lt.activeTexture.set(ht.TEXTURE1),_s(lt,it).bind(ht.LINEAR,ht.CLAMP_TO_EDGE),qe.useProgram("heatmapTexture").draw(lt,ht.TRIANGLES,Cr.disabled,ee.disabled,qe.colorModeForRenderPass(),Zr.disabled,Kl(qe,it,0,1),null,null,it.id,qe.viewportBuffer,qe.quadTriangleIndexBuffer,qe.viewportSegments,it.paint,qe.transform.zoom))}(z,X)}(a,d,v,w,I):o.ce(v)?function(z,Y,X,ce,pe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Se}=pe,Me=X.paint.get("line-opacity"),Fe=X.paint.get("line-width");if(Me.constantOr(1)===0||Fe.constantOr(1)===0)return;const qe=z.getDepthModeForSublayer(0,Cr.ReadOnly),it=z.colorModeForRenderPass(),lt=X.paint.get("line-dasharray"),ht=X.paint.get("line-pattern"),bt=ht.constantOr(1),vt=X.paint.get("line-gradient"),xt=X.getCrossfadeParameters(),Dt=bt?"linePattern":lt?"lineSDF":vt?"lineGradient":"line",Lt=z.context,St=Lt.gl,Gt=z.transform;let rn=!0;for(const Ht of ce){const tn=Y.getTile(Ht);if(bt&&!tn.patternsLoaded())continue;const sn=tn.getBucket(X);if(!sn)continue;const Yn=sn.programConfigurations.get(X.id),Gn=z.context.program.get(),On=z.useProgram(Dt,Yn),_r=rn||On.program!==Gn,ui=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Ht),xo=ht.constantOr(null);if(xo&&tn.imageAtlas){const wi=tn.imageAtlas,Io=wi.patternPositions[xo.to.toString()],Ws=wi.patternPositions[xo.from.toString()];Io&&Ws&&Yn.setConstantPatternPositions(Io,Ws)}const Zo=Gt.getProjectionData({overscaledTileID:Ht,applyGlobeMatrix:!Se,applyTerrainMatrix:!0}),Fo=Gt.getPixelScale(),Xo=bt?fu(z,tn,X,Fo,xt):lt?MA(z,tn,X,Fo,lt,xt):vt?hf(z,tn,X,Fo,sn.lineClipsArray.length):Bh(z,tn,X,Fo);if(bt)Lt.activeTexture.set(St.TEXTURE0),tn.imageAtlasTexture.bind(St.LINEAR,St.CLAMP_TO_EDGE),Yn.updatePaintBuffers(xt);else if(lt&&(_r||z.lineAtlas.dirty))Lt.activeTexture.set(St.TEXTURE0),z.lineAtlas.bind(Lt);else if(vt){const wi=sn.gradients[X.id];let Io=wi.texture;if(X.gradientVersion!==wi.version){let Ws=256;if(X.stepInterpolant){const ws=Y.getSource().maxzoom,ha=Ht.canonical.z===ws?Math.ceil(1<<z.transform.maxZoom-Ht.canonical.z):1;Ws=o.ah(o.c3(sn.maxLineLength/o.$*1024*ha),256,Lt.maxTextureSize)}wi.gradient=o.c4({expression:X.gradientExpression(),evaluationKey:"lineProgress",resolution:Ws,image:wi.gradient||void 0,clips:sn.lineClipsArray}),wi.texture?wi.texture.update(wi.gradient):wi.texture=new o.T(Lt,wi.gradient,St.RGBA),wi.version=X.gradientVersion,Io=wi.texture}Lt.activeTexture.set(St.TEXTURE0),Io.bind(X.stepInterpolant?St.NEAREST:St.LINEAR,St.CLAMP_TO_EDGE)}const As=z.stencilModeForClipping(Ht);On.draw(Lt,St.TRIANGLES,qe,As,it,Zr.disabled,Xo,ui,Zo,X.id,sn.layoutVertexBuffer,sn.indexBuffer,sn.segments,X.paint,z.transform.zoom,Yn,sn.layoutVertexBuffer2),rn=!1}}(a,d,v,w,I):o.cf(v)?function(z,Y,X,ce,pe){const Se=X.paint.get("fill-color"),Me=X.paint.get("fill-opacity");if(Me.constantOr(1)===0)return;const{isRenderingToTexture:Fe}=pe,qe=z.colorModeForRenderPass(),it=X.paint.get("fill-pattern"),lt=z.opaquePassEnabledForLayer()&&!it.constantOr(1)&&Se.constantOr(o.bf.transparent).a===1&&Me.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===lt){const ht=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Cr.ReadWrite:Cr.ReadOnly);pf(z,Y,X,ce,ht,qe,!1,Fe)}if(z.renderPass==="translucent"&&X.paint.get("fill-antialias")){const ht=z.getDepthModeForSublayer(X.getPaintProperty("fill-outline-color")?2:0,Cr.ReadOnly);pf(z,Y,X,ce,ht,qe,!0,Fe)}}(a,d,v,w,I):o.cg(v)?function(z,Y,X,ce,pe){const Se=X.paint.get("fill-extrusion-opacity");if(Se===0)return;const{isRenderingToTexture:Me}=pe;if(z.renderPass==="translucent"){const Fe=new Cr(z.context.gl.LEQUAL,Cr.ReadWrite,z.depthRangeFor3D);if(Se!==1||X.paint.get("fill-extrusion-pattern").constantOr(1))Ph(z,Y,X,ce,Fe,ee.disabled,Ri.disabled,Me),Ph(z,Y,X,ce,Fe,z.stencilModeFor3D(),z.colorModeForRenderPass(),Me);else{const qe=z.colorModeForRenderPass();Ph(z,Y,X,ce,Fe,ee.disabled,qe,Me)}}}(a,d,v,w,I):o.ch(v)?function(z,Y,X,ce,pe){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:Se}=pe,Me=z.context,Fe=z.style.projection.useSubdivision,qe=z.getDepthModeForSublayer(0,Cr.ReadOnly),it=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(lt,ht,bt,vt,xt,Dt,Lt){const St=lt.context,Gt=St.gl;for(const rn of bt){const Ht=ht.getTile(rn),tn=Ht.dem;if(!tn||!tn.data||!Ht.needsHillshadePrepare)continue;const sn=tn.dim,Yn=tn.stride,Gn=tn.getPixels();if(St.activeTexture.set(Gt.TEXTURE1),St.pixelStoreUnpackPremultiplyAlpha.set(!1),Ht.demTexture=Ht.demTexture||lt.getTileTexture(Yn),Ht.demTexture){const _r=Ht.demTexture;_r.update(Gn,{premultiply:!1}),_r.bind(Gt.NEAREST,Gt.CLAMP_TO_EDGE)}else Ht.demTexture=new o.T(St,Gn,Gt.RGBA,{premultiply:!1}),Ht.demTexture.bind(Gt.NEAREST,Gt.CLAMP_TO_EDGE);St.activeTexture.set(Gt.TEXTURE0);let On=Ht.fbo;if(!On){const _r=new o.T(St,{width:sn,height:sn,data:null},Gt.RGBA);_r.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),On=Ht.fbo=St.createFramebuffer(sn,sn,!0,!1),On.colorAttachment.set(_r.texture)}St.bindFramebuffer.set(On.framebuffer),St.viewport.set([0,0,sn,sn]),lt.useProgram("hillshadePrepare").draw(St,Gt.TRIANGLES,xt,Dt,Lt,Zr.disabled,xA(Ht.tileID,tn),null,null,vt.id,lt.rasterBoundsBuffer,lt.quadTriangleIndexBuffer,lt.rasterBoundsSegments),Ht.needsHillshadePrepare=!1}})(z,Y,ce,X,qe,ee.disabled,it),Me.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(Fe){const[lt,ht,bt]=z.stencilConfigForOverlapTwoPass(ce);gu(z,Y,X,bt,lt,qe,it,!1,Se),gu(z,Y,X,bt,ht,qe,it,!0,Se)}else{const[lt,ht]=z.getStencilConfigForOverlapAndUpdateStencilID(ce);gu(z,Y,X,ht,lt,qe,it,!1,Se)}}(a,d,v,w,I):o.ci(v)?function(z,Y,X,ce,pe){if(z.renderPass!=="translucent"||!ce.length)return;const{isRenderingToTexture:Se}=pe,Me=z.style.projection.useSubdivision,Fe=z.getDepthModeForSublayer(0,Cr.ReadOnly),qe=z.colorModeForRenderPass();if(Me){const[it,lt,ht]=z.stencilConfigForOverlapTwoPass(ce);oc(z,Y,X,ht,it,Fe,qe,!1,Se),oc(z,Y,X,ht,lt,Fe,qe,!0,Se)}else{const[it,lt]=z.getStencilConfigForOverlapAndUpdateStencilID(ce);oc(z,Y,X,lt,it,Fe,qe,!1,Se)}}(a,d,v,w,I):o.cj(v)?function(z,Y,X,ce,pe){if(z.renderPass!=="translucent"||X.paint.get("raster-opacity")===0||!ce.length)return;const{isRenderingToTexture:Se}=pe,Me=Y.getSource(),Fe=z.style.projection.useSubdivision;if(Me instanceof jt)Za(z,Y,X,ce,null,!1,!1,Me.tileCoords,Me.flippedWindingOrder,Se);else if(Fe){const[qe,it,lt]=z.stencilConfigForOverlapTwoPass(ce);Za(z,Y,X,lt,qe,!1,!0,Ic,!1,Se),Za(z,Y,X,lt,it,!0,!0,Ic,!1,Se)}else{const[qe,it]=z.getStencilConfigForOverlapAndUpdateStencilID(ce);Za(z,Y,X,it,qe,!1,!0,Ic,!1,Se)}}(a,d,v,w,I):o.ck(v)?function(z,Y,X,ce,pe){const Se=X.paint.get("background-color"),Me=X.paint.get("background-opacity");if(Me===0)return;const{isRenderingToTexture:Fe}=pe,qe=z.context,it=qe.gl,lt=z.style.projection,ht=z.transform,bt=ht.tileSize,vt=X.paint.get("background-pattern");if(z.isPatternMissing(vt))return;const xt=!vt&&Se.a===1&&Me===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==xt)return;const Dt=ee.disabled,Lt=z.getDepthModeForSublayer(0,xt==="opaque"?Cr.ReadWrite:Cr.ReadOnly),St=z.colorModeForRenderPass(),Gt=z.useProgram(vt?"backgroundPattern":"background"),rn=ce||nt(ht,{tileSize:bt,terrain:z.style.map.terrain});vt&&(qe.activeTexture.set(it.TEXTURE0),z.imageManager.bind(z.context));const Ht=X.getCrossfadeParameters();for(const tn of rn){const sn=ht.getProjectionData({overscaledTileID:tn,applyGlobeMatrix:!Fe,applyTerrainMatrix:!0}),Yn=vt?qf(Me,z,vt,{tileID:tn,tileSize:bt},Ht):ll(Me,Se),Gn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(tn),On=lt.getMeshFromTileID(qe,tn.canonical,!1,!0,"raster");Gt.draw(qe,it.TRIANGLES,Lt,Dt,St,Zr.backCCW,Yn,Gn,sn,X.id,On.vertexBuffer,On.indexBuffer,On.segments)}}(a,0,v,w,I):o.cl(v)&&function(z,Y,X,ce){const{isRenderingGlobe:pe}=ce,Se=z.context,Me=X.implementation,Fe=z.style.projection,qe=z.transform,it=qe.getProjectionDataForCustomLayer(pe),lt={farZ:qe.farZ,nearZ:qe.nearZ,fov:qe.fov*Math.PI/180,modelViewProjectionMatrix:qe.modelViewProjectionMatrix,projectionMatrix:qe.projectionMatrix,shaderData:{variantName:Fe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Fe.shaderPreludeCode.vertexSource}`,define:Fe.shaderDefine},defaultProjectionData:it},ht=Me.renderingMode?Me.renderingMode:"2d";if(z.renderPass==="offscreen"){const bt=Me.prerender;bt&&(z.setCustomLayerDefaults(),Se.setColorMode(z.colorModeForRenderPass()),bt.call(Me,Se.gl,lt),Se.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),Se.setColorMode(z.colorModeForRenderPass()),Se.setStencilMode(ee.disabled);const bt=ht==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Cr.ReadOnly);Se.setDepthMode(bt),Me.render(Se.gl,lt),Se.setDirty(),z.setBaseState(),Se.bindFramebuffer.set(null)}}(a,0,v,I))}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),v=this.imageManager.getPattern(a.to.toString());return!d||!v}useProgram(a,d,v=!1,w=[]){this.cache=this.cache||{};const I=!!this.style.map.terrain,z=this.style.projection,Y=v?So.projectionMercator:z.shaderPreludeCode,X=v?sl:z.shaderDefine,ce=a+(d?d.cacheKey:"")+`/${v?Fl:z.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(I?"/terrain":"")+(w?`/${w.join("/")}`:"");return this.cache[ce]||(this.cache[ce]=new Fs(this.context,So[a],d,$f[a],this._showOverdrawInspector,I,Y,X,w)),this.cache[ce]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}function ac(O,a){let d,v=!1,w=null,I=null;const z=()=>{w=null,v&&(O.apply(I,d),w=setTimeout(z,a),v=!1)};return(...Y)=>(v=!0,I=this,d=Y,w||z(),w)}class ot{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(v=w)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const v=d.join("/");let w=v;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${v}`);let I=window.location.hash.replace(w,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let z=window.location.href.replace(/(#.+)?$/,I);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=ac(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,w=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,w),z=Math.round(d.lng*I)/I,Y=Math.round(d.lat*I)/I,X=this._map.getBearing(),ce=this._map.getPitch();let pe="";if(pe+=a?`/${z}/${Y}/${v}`:`${v}/${Y}/${z}`,(X||ce)&&(pe+="/"+Math.round(10*X)/10),ce&&(pe+=`/${Math.round(ce)}`),this._hashName){const Se=this._hashName;let Me=!1;const Fe=window.location.hash.slice(1).split("&").map(qe=>{const it=qe.split("=")[0];return it===Se?(Me=!0,`${it}=${pe}`):qe}).filter(qe=>qe);return Me||Fe.push(`${Se}=${pe}`),`#${Fe.join("&")}`}return`#${pe}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.S(+a[2],+a[1])}catch{return!1}const d=+a[0],v=+(a[3]||0),w=+(a[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&v>=-180&&v<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const BA={linearity:.3,easing:o.cm(0,0,.3,1)},js=o.e({deceleration:2500,maxSpeed:1400},BA),Do=o.e({deceleration:20,maxSpeed:1400},BA),fi=o.e({deceleration:1e3,maxSpeed:360},BA),ua=o.e({deceleration:1e3,maxSpeed:90},BA),oh=o.e({deceleration:1e3,maxSpeed:360},BA);class Fh{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=D.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)d.zoom+=I.zoomDelta||0,d.bearing+=I.bearingDelta||0,d.pitch+=I.pitchDelta||0,d.roll+=I.rollDelta||0,I.panDelta&&d.pan._add(I.panDelta),I.around&&(d.around=I.around),I.pinchAround&&(d.pinchAround=I.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const I=ps(d.pan.mag(),v,o.e({},js,a||{})),z=d.pan.mult(I.amount/d.pan.mag()),Y=this._map.cameraHelper.handlePanInertia(z,this._map.transform);w.center=Y.easingCenter,w.offset=Y.easingOffset,Os(w,I)}if(d.zoom){const I=ps(d.zoom,v,Do);w.zoom=this._map.transform.zoom+I.amount,Os(w,I)}if(d.bearing){const I=ps(d.bearing,v,fi);w.bearing=this._map.transform.bearing+o.ah(I.amount,-179,179),Os(w,I)}if(d.pitch){const I=ps(d.pitch,v,ua);w.pitch=this._map.transform.pitch+I.amount,Os(w,I)}if(d.roll){const I=ps(d.roll,v,oh);w.roll=this._map.transform.roll+o.ah(I.amount,-179,179),Os(w,I)}if(w.zoom||w.bearing){const I=d.pinchAround===void 0?d.around:d.pinchAround;w.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),o.e(w,{noMoveStart:!0})}}function Os(O,a){(!O.duration||O.duration<a.duration)&&(O.duration=a.duration,O.easing=a.easing)}function ps(O,a,d){const{maxSpeed:v,linearity:w,deceleration:I}=d,z=o.ah(O*w/(a/1e3),-v,v),Y=Math.abs(z)/(I*w);return{easing:d.easing,duration:1e3*Y,amount:z*(Y/2)}}class ho extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v,w={}){v=v instanceof MouseEvent?v:new MouseEvent(a,v);const I=R.mousePos(d.getCanvas(),v),z=d.unproject(I);super(a,o.e({point:I,lngLat:z,originalEvent:v},w)),this._defaultPrevented=!1,this.target=d}}class HA extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){const w=a==="touchend"?v.changedTouches:v.touches,I=R.touchPos(d.getCanvasContainer(),w),z=I.map(X=>d.unproject(X)),Y=I.reduce((X,ce,pe,Se)=>X.add(ce.div(Se.length)),new o.P(0,0));super(a,{points:I,point:Y,lngLats:z,lngLat:d.unproject(Y),originalEvent:v}),this._defaultPrevented=!1}}class Fa extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){super(a,{originalEvent:v}),this._defaultPrevented=!1}}class Nl{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Fa(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new ho(a.type,this._map,a))}mouseup(a){this._map.fire(new ho(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new ho(a.type,this._map,a))}dblclick(a){return this._firePreventable(new ho(a.type,this._map,a))}mouseover(a){this._map.fire(new ho(a.type,this._map,a))}mouseout(a){this._map.fire(new ho(a.type,this._map,a))}touchstart(a){return this._firePreventable(new HA(a.type,this._map,a))}touchmove(a){this._map.fire(new HA(a.type,this._map,a))}touchend(a){this._map.fire(new HA(a.type,this._map,a))}touchcancel(a){this._map.fire(new HA(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ul{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new ho(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ho("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new ho(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zu{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class cl{constructor(a,d){this._map=a,this._tr=new zu(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(R.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=v,this._box||(this._box=R.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const I=Math.min(w.x,v.x),z=Math.max(w.x,v.x),Y=Math.min(w.y,v.y),X=Math.max(w.y,v.y);R.setTransform(this._box,`translate(${I}px,${Y}px)`),this._box.style.width=z-I+"px",this._box.style.height=X-Y+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const v=this._startPos,w=d;if(this.reset(),R.suppressClick(),v.x!==w.x||v.y!==w.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:I=>I.fitScreenCoordinates(v,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new o.l(a,{originalEvent:d}))}}function Nu(O,a){if(O.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${a.length}`);const d={};for(let v=0;v<O.length;v++)d[O[v].identifier]=a[v];return d}class mf{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=function(w){const I=new o.P(0,0);for(const z of w)I._add(z);return I.div(w.length)}(d),this.touches=Nu(v,d)))}touchmove(a,d,v){if(this.aborted||!this.centroid)return;const w=Nu(v,d);for(const I in this.touches){const z=w[I];(!z||z.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(a,d,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Gl{constructor(a){this.singleTap=new mf(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,v){this.singleTap.touchstart(a,d,v)}touchmove(a,d,v){this.singleTap.touchmove(a,d,v)}touchend(a,d,v){const w=this.singleTap.touchend(a,d,v);if(w){const I=a.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(w)<30;if(I&&z||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Xs{constructor(a){this._tr=new zu(a),this._zoomIn=new Gl({numTouches:1,numTaps:2}),this._zoomOut=new Gl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,v){this._zoomIn.touchstart(a,d,v),this._zoomOut.touchstart(a,d,v)}touchmove(a,d,v){this._zoomIn.touchmove(a,d,v),this._zoomOut.touchmove(a,d,v)}touchend(a,d,v){const w=this._zoomIn.touchend(a,d,v),I=this._zoomOut.touchend(a,d,v),z=this._tr;return w?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(w)},{originalEvent:a})}):I?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(I)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sh{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const w=Array.isArray(d)?d[0]:d;return!this._moved&&w.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(v,w))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&R.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ca=0,Tc=2,cd={[ca]:1,[Tc]:2};class OA{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=R.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,v){const w=cd[v];return d.buttons===void 0||(d.buttons&w)!==w}(a,this._eventButton)}isValidEndEvent(a){return R.mouseButton(a)===this._eventButton}}class ah{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class lh{constructor(a=new OA({checkCorrectEvent:()=>!0}),d=new ah){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(a,d,v){return a instanceof MouseEvent?d(a):typeof TouchEvent<"u"&&a instanceof TouchEvent?v(a):void 0}startMove(a){this._executeRelevantHandler(a,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(a){this._executeRelevantHandler(a,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(a){return this._executeRelevantHandler(a,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(a){return this._executeRelevantHandler(a,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(a){return this._executeRelevantHandler(a,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const Gu=O=>{O.mousedown=O.dragStart,O.mousemoveWindow=O.dragMove,O.mouseup=O.dragEnd,O.contextmenu=a=>{a.preventDefault()}};class Ho{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,d,v){return this._calculateTransform(a,d,v)}touchmove(a,d,v){if(this._active){if(!this._shouldBePrevented(v.length))return a.preventDefault(),this._calculateTransform(a,d,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,d,v){this._calculateTransform(a,d,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,v){v.length>0&&(this._active=!0);const w=Nu(v,d),I=new o.P(0,0),z=new o.P(0,0);let Y=0;for(const ce in w){const pe=w[ce],Se=this._touches[ce];Se&&(I._add(pe),z._add(pe.sub(Se)),Y++,w[ce]=pe)}if(this._touches=w,this._shouldBePrevented(Y)||!z.mag())return;const X=z.div(Y);return this._sum._add(X),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(Y),panDelta:X}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,v){if(!this._firstTwoTouches)return;a.preventDefault();const[w,I]=this._firstTwoTouches,z=Ar(v,d,w),Y=Ar(v,d,I);if(!z||!Y)return;const X=this._aroundCenter?null:z.add(Y).div(2);return this._move([z,Y],X,a)}touchend(a,d,v){if(!this._firstTwoTouches)return;const[w,I]=this._firstTwoTouches,z=Ar(v,d,w),Y=Ar(v,d,I);z&&Y||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ar(O,a,d){for(let v=0;v<O.length;v++)if(O[v].identifier===d)return a[v]}function Oa(O,a){return Math.log(O/a)/Math.LN2}class xa extends Yi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Oa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Oa(this._distance,v),pinchAround:d}}}function lc(O,a){return 180*O.angleWith(a)/Math.PI}class Ml extends Yi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,v){const w=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:lc(this._vector,w),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,v=lc(a,this._startVector);return Math.abs(v)<d}}function wl(O){return Math.abs(O.y)>Math.abs(O.x)}class Ac extends Yi{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,v){super.touchstart(a,d,v),this._currentTouchCount=v.length}_start(a){this._lastPoints=a,wl(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=a[0].sub(this._lastPoints[0]),I=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,I,v.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,v){if(this._valid!==void 0)return this._valid;const w=a.mag()>=2,I=d.mag()>=2;if(!w&&!I)return;if(!w||!I)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const z=a.y>0==d.y>0;return wl(a)&&wl(d)&&z}}const eo={panStep:100,bearingStep:15,pitchStep:10};class vu{constructor(a){this._tr=new zu(a);const d=eo;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,v=0,w=0,I=0,z=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),I=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),I=1);break;case 38:a.shiftKey?w=1:(a.preventDefault(),z=-1);break;case 40:a.shiftKey?w=-1:(a.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(v=0,w=0),{cameraAnimation:Y=>{const X=this._tr;Y.easeTo({duration:300,easeId:"keyboardHandler",easing:Ah,zoom:d?Math.round(X.zoom)+d*(a.shiftKey?2:1):X.zoom,bearing:X.bearing+v*this._bearingStep,pitch:X.pitch+w*this._pitchStep,offset:[-I*this._panStep,-z*this._panStep],center:X.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ah(O){return O*(2-O)}const Ia=4.000244140625,Ka=1/450;class Is{constructor(a,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=a,this._tr=new zu(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ka}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=D.now(),w=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Ia==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=R.mousePos(this._map.getCanvas(),a),v=this._tr;this._aroundPoint=this._aroundCenter?v.transform.locationToScreenPoint(o.S.convert(v.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Y=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Y),typeof this._targetZoom=="number"&&(this._targetZoom+=Y)}if(this._delta!==0){const Y=this._type==="wheel"&&Math.abs(this._delta)>Ia?this._wheelZoomRate:this._defaultZoomRate;let X=2/(1+Math.exp(-Math.abs(this._delta*Y)));this._delta<0&&X!==0&&(X=1/X);const ce=typeof this._targetZoom!="number"?a.scale:o.af(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ak(ce*X)).zoom,this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,v=this._startZoom,w=this._easing;let I,z=!1;if(this._type==="wheel"&&v&&w){const Y=D.now()-this._lastWheelEventTime,X=Math.min((Y+5)/200,1),ce=w(X);I=o.C.number(v,d,ce),X<1?this._frameId||(this._frameId=!0):z=!0}else I=d,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!z,zoomDelta:I-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=o.co;if(this._prevEase){const v=this._prevEase,w=(D.now()-v.start)/v.duration,I=v.easing(w+.01)-v.easing(w),z=.27/Math.sqrt(I*I+1e-4)*.01,Y=Math.sqrt(.0729-z*z);d=o.cm(z,Y,.25,1)}return this._prevEase={start:D.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class IA{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Cu{constructor(a){this._tr=new zu(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uh{constructor(){this._tap=new Gl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,v){if(!this._swipePoint)if(this._tapTime){const w=d[0],I=a.timeStamp-this._tapTime<500,z=this._tapPoint.dist(w)<30;I&&z?v.length>0&&(this._swipePoint=w,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(a,d,v)}touchmove(a,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const w=d[0],I=w.y-this._swipePoint.y;return this._swipePoint=w,a.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(a,d,v)}touchend(a,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const w=this._tap.touchend(a,d,v);w&&(this._tapTime=a.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _u{constructor(a,d,v){this._el=a,this._mousePan=d,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Sl{constructor(a,d,v,w){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=d,this._mousePitch=v,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Hf{constructor(a,d,v,w){this._el=a,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Kh{constructor(a,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=R.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=d,this._container.appendChild(w);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=v,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(R.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,d){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ZA=O=>O.zoom||O.drag||O.roll||O.pitch||O.rotate;class bo extends o.l{}function hl(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta||O.rollDelta}class kd{constructor(a,d){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,I)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=w.type==="renderFrame"?void 0:w,Y={needsRenderFrame:!1},X={},ce={};for(const{handlerName:Me,handler:Fe,allowed:qe}of this._handlers){if(!Fe.isEnabled())continue;let it;if(this._blockedByActive(ce,qe,Me))Fe.reset();else if(Fe[I||w.type]){if(o.cp(w,I||w.type)){const lt=R.mousePos(this._map.getCanvas(),w);it=Fe[I||w.type](w,lt)}else if(o.cq(w,I||w.type)){const lt=this._getMapTouches(w.touches),ht=R.touchPos(this._map.getCanvas(),lt);it=Fe[I||w.type](w,ht,lt)}else o.cr(I||w.type)||(it=Fe[I||w.type](w));this.mergeHandlerResult(Y,X,it,Me,z),it&&it.needsRenderFrame&&this._triggerRenderFrame()}(it||Fe.isActive())&&(ce[Me]=Fe)}const pe={};for(const Me in this._previousActiveHandlers)ce[Me]||(pe[Me]=z);this._previousActiveHandlers=ce,(Object.keys(pe).length||hl(Y))&&(this._changes.push([Y,X,pe]),this._triggerRenderFrame()),(Object.keys(ce).length||hl(Y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Se}=Y;Se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Se(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fh(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,I,z]of this._listeners)R.addEventListener(w,I,w===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[a,d,v]of this._listeners)R.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(a){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new Nl(d,a));const w=d.boxZoom=new cl(d,a);this._add("boxZoom",w),a.interactive&&a.boxZoom&&w.enable();const I=d.cooperativeGestures=new Kh(d,a.cooperativeGestures);this._add("cooperativeGestures",I),a.cooperativeGestures&&I.enable();const z=new Xs(d),Y=new Cu(d);d.doubleClickZoom=new IA(Y,z),this._add("tapZoom",z),this._add("clickZoom",Y),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const X=new uh;this._add("tapDragZoom",X);const ce=d.touchPitch=new Ac(d);this._add("touchPitch",ce),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const pe=()=>d.project(d.getCenter()),Se=function({enable:xt,clickTolerance:Dt,aroundCenter:Lt=!0,minPixelCenterThreshold:St=100,rotateDegreesPerPixelMoved:Gt=.8},rn){const Ht=new OA({checkCorrectEvent:tn=>R.mouseButton(tn)===0&&tn.ctrlKey||R.mouseButton(tn)===2&&!tn.ctrlKey});return new sh({clickTolerance:Dt,move:(tn,sn)=>{const Yn=rn();if(Lt&&Math.abs(Yn.y-tn.y)>St)return{bearingDelta:o.cn(new o.P(tn.x,sn.y),sn,Yn)};let Gn=(sn.x-tn.x)*Gt;return Lt&&sn.y<Yn.y&&(Gn=-Gn),{bearingDelta:Gn}},moveStateManager:Ht,enable:xt,assignEvents:Gu})}(a,pe),Me=function({enable:xt,clickTolerance:Dt,pitchDegreesPerPixelMoved:Lt=-.5}){const St=new OA({checkCorrectEvent:Gt=>R.mouseButton(Gt)===0&&Gt.ctrlKey||R.mouseButton(Gt)===2});return new sh({clickTolerance:Dt,move:(Gt,rn)=>({pitchDelta:(rn.y-Gt.y)*Lt}),moveStateManager:St,enable:xt,assignEvents:Gu})}(a),Fe=function({enable:xt,clickTolerance:Dt,rollDegreesPerPixelMoved:Lt=.3},St){const Gt=new OA({checkCorrectEvent:rn=>R.mouseButton(rn)===2&&rn.ctrlKey});return new sh({clickTolerance:Dt,move:(rn,Ht)=>{const tn=St();let sn=(Ht.x-rn.x)*Lt;return Ht.y<tn.y&&(sn=-sn),{rollDelta:sn}},moveStateManager:Gt,enable:xt,assignEvents:Gu})}(a,pe);d.dragRotate=new Sl(a,Se,Me,Fe),this._add("mouseRotate",Se,["mousePitch"]),this._add("mousePitch",Me,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Fe,["mousePitch"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const qe=function({enable:xt,clickTolerance:Dt}){const Lt=new OA({checkCorrectEvent:St=>R.mouseButton(St)===0&&!St.ctrlKey});return new sh({clickTolerance:Dt,move:(St,Gt)=>({around:Gt,panDelta:Gt.sub(St)}),activateOnStart:!0,moveStateManager:Lt,enable:xt,assignEvents:Gu})}(a),it=new Ho(a,d);d.dragPan=new _u(v,qe,it),this._add("mousePan",qe),this._add("touchPan",it,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const lt=new Ml,ht=new xa;d.touchZoomRotate=new Hf(v,ht,lt,X),this._add("touchRotate",lt,["touchPan","touchZoom"]),this._add("touchZoom",ht,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const bt=d.scrollZoom=new Is(d,()=>this._triggerRenderFrame());this._add("scrollZoom",bt,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const vt=d.keyboard=new vu(d);this._add("keyboard",vt),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new ul(d))}_add(a,d,v){this._handlers.push({handlerName:a,handler:d,allowed:v}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ZA(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,v){for(const w in a)if(w!==v&&(!d||d.indexOf(w)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const v of a)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(a,d,v,w,I){if(!v)return;o.e(a,v);const z={handlerName:w,originalEvent:v.originalEvent||I};v.zoomDelta!==void 0&&(d.zoom=z),v.panDelta!==void 0&&(d.drag=z),v.rollDelta!==void 0&&(d.roll=z),v.pitchDelta!==void 0&&(d.pitch=z),v.bearingDelta!==void 0&&(d.rotate=z)}_applyChanges(){const a={},d={},v={};for(const[w,I,z]of this._changes)w.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(w.panDelta)),w.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(a.rollDelta=(a.rollDelta||0)+w.rollDelta),w.around!==void 0&&(a.around=w.around),w.pinchAround!==void 0&&(a.pinchAround=w.pinchAround),w.noInertia&&(a.noInertia=w.noInertia),o.e(d,I),o.e(v,z);this._updateMapTransform(a,d,v),this._changes=[]}_updateMapTransform(a,d,v){const w=this._map,I=w._getTransformForUpdate(),z=w.terrain;if(!(hl(a)||z&&this._terrainMovement))return this._fireEvents(d,v,!0);w._stop(!0);let{panDelta:Y,zoomDelta:X,bearingDelta:ce,pitchDelta:pe,rollDelta:Se,around:Me,pinchAround:Fe}=a;Fe!==void 0&&(Me=Fe),Me=Me||w.transform.centerPoint,z&&!I.isPointOnMapSurface(Me)&&(Me=I.centerPoint);const qe={panDelta:Y,zoomDelta:X,rollDelta:Se,pitchDelta:pe,bearingDelta:ce,around:Me};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(Me)&&(Me=I.centerPoint);const it=Me.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(Y?Me.sub(Y):Me);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(qe,I),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?I.setCenter(I.screenPointToLocation(I.centerPoint.sub(Y))):this._map.cameraHelper.handleMapControlsPan(qe,I,it):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(qe,I,it))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(qe,I),this._map.cameraHelper.handleMapControlsPan(qe,I,it)),w._applyUpdatedTransform(I),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,v,!0)}_fireEvents(a,d,v){const w=ZA(this._eventsInProgress),I=ZA(a),z={};for(const Se in a){const{originalEvent:Me}=a[Se];this._eventsInProgress[Se]||(z[`${Se}start`]=Me),this._eventsInProgress[Se]=a[Se]}!w&&I&&this._fireEvent("movestart",I.originalEvent);for(const Se in z)this._fireEvent(Se,z[Se]);I&&this._fireEvent("move",I.originalEvent);for(const Se in a){const{originalEvent:Me}=a[Se];this._fireEvent(Se,Me)}const Y={};let X;for(const Se in this._eventsInProgress){const{handlerName:Me,originalEvent:Fe}=this._eventsInProgress[Se];this._handlersById[Me].isActive()||(delete this._eventsInProgress[Se],X=d[Me]||Fe,Y[`${Se}end`]=X)}for(const Se in Y)this._fireEvent(Se,Y[Se]);const ce=ZA(this._eventsInProgress),pe=(w||I)&&!ce;if(pe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Se=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Se.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Se)}if(v&&pe){this._updatingCamera=!0;const Se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Me=Fe=>Fe!==0&&-this._bearingSnap<Fe&&Fe<this._bearingSnap;!Se||!Se.essential&&D.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:X})),Me(this._map.getBearing())&&this._map.resetNorth()):(Me(Se.bearing||this._map.getBearing())&&(Se.bearing=0),Se.freezeElevation=!0,this._map.easeTo(Se,{originalEvent:X})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new o.l(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new bo("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class hd extends o.E{constructor(a,d,v){super(),this._renderFrameCallback=()=>{const w=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=v.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,d){a.apply(this.transform),this.transform=a,this.cameraHelper=d}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,d){return this.jumpTo({elevation:a},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,d,v){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},d),v)}panTo(a,d,v){return this.easeTo(o.e({center:a},d),v)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,v){return this.easeTo(o.e({zoom:a},d),v)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,d){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",d)).fire(new o.l("move",d)).fire(new o.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,v){return this.easeTo(o.e({bearing:a},d),v)}resetNorth(a,d){return this.rotateTo(0,o.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}getRoll(){return this.transform.roll}setRoll(a,d){return this.jumpTo({roll:a},d),this}cameraForBounds(a,d){a=gt.convert(a).adjustAntiMeridian();const v=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),v,d)}_cameraForBoxAndBearing(a,d,v,w){const I={top:0,bottom:0,right:0,left:0};if(typeof(w=o.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const ce=w.padding;w.padding={top:ce,bottom:ce,right:ce,left:ce}}const z=o.e(I,w.padding);w.padding=z;const Y=this.transform,X=new gt(a,d);return this.cameraHelper.cameraForBoxAndBearing(w,z,X,v,Y)}fitBounds(a,d,v){return this._fitInternal(this.cameraForBounds(a,d),d,v)}fitScreenCoordinates(a,d,v,w,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(d)),v,w),w,I)}_fitInternal(a,d,v){return a?(delete(d=o.e(a,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(a,d){this.stop();const v=this._getTransformForUpdate();let w=!1,I=!1,z=!1;const Y=v.zoom;this.cameraHelper.handleJumpToCenterZoom(v,a);const X=v.zoom!==Y;return"elevation"in a&&v.elevation!==+a.elevation&&v.setElevation(+a.elevation),"bearing"in a&&v.bearing!==+a.bearing&&(w=!0,v.setBearing(+a.bearing)),"pitch"in a&&v.pitch!==+a.pitch&&(I=!0,v.setPitch(+a.pitch)),"roll"in a&&v.roll!==+a.roll&&(z=!0,v.setRoll(+a.roll)),a.padding==null||v.isPaddingEqual(a.padding)||v.setPadding(a.padding),this._applyUpdatedTransform(v),this.fire(new o.l("movestart",d)).fire(new o.l("move",d)),X&&this.fire(new o.l("zoomstart",d)).fire(new o.l("zoom",d)).fire(new o.l("zoomend",d)),w&&this.fire(new o.l("rotatestart",d)).fire(new o.l("rotate",d)).fire(new o.l("rotateend",d)),I&&this.fire(new o.l("pitchstart",d)).fire(new o.l("pitch",d)).fire(new o.l("pitchend",d)),z&&this.fire(new o.l("rollstart",d)).fire(new o.l("roll",d)).fire(new o.l("rollend",d)),this.fire(new o.l("moveend",d))}calculateCameraOptionsFromTo(a,d,v,w=0){const I=o.a1.fromLngLat(a,d),z=o.a1.fromLngLat(v,w),Y=z.x-I.x,X=z.y-I.y,ce=z.z-I.z,pe=Math.hypot(Y,X,ce);if(pe===0)throw new Error("Can't calculate camera options with same From and To");const Se=Math.hypot(Y,X),Me=o.ak(this.transform.cameraToCenterDistance/pe/this.transform.tileSize),Fe=180*Math.atan2(Y,-X)/Math.PI;let qe=180*Math.acos(Se/pe)/Math.PI;return qe=ce<0?90-qe:90+qe,{center:z.toLngLat(),elevation:w,zoom:Me,pitch:qe,bearing:Fe}}calculateCameraOptionsFromCameraLngLatAltRotation(a,d,v,w,I){const z=this.transform.calculateCenterFromCameraLngLatAlt(a,d,v,w);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:v,pitch:w,roll:I}}easeTo(a,d){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.co},a)).animate===!1||!a.essential&&D.prefersReducedMotion)&&(a.duration=0);const v=this._getTransformForUpdate(),w=this.getBearing(),I=v.pitch,z=v.roll,Y="bearing"in a?this._normalizeBearing(a.bearing,w):w,X="pitch"in a?+a.pitch:I,ce="roll"in a?this._normalizeBearing(a.roll,z):z,pe="padding"in a?a.padding:v.padding,Se=o.P.convert(a.offset);let Me,Fe;a.around&&(Me=o.S.convert(a.around),Fe=v.locationToScreenPoint(Me));const qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},it=this.cameraHelper.handleEaseTo(v,{bearing:Y,pitch:X,roll:ce,padding:pe,around:Me,aroundPoint:Fe,offsetAsPoint:Se,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||w!==Y,this._pitching=this._pitching||X!==I,this._rolling=this._rolling||ce!==z,this._padding=!v.isPaddingEqual(pe),this._zooming=this._zooming||it.isZooming,this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,qe),this.terrain&&this._prepareElevation(it.elevationCenter),this._ease(lt=>{it.easeFunc(lt),this.terrain&&!a.freezeElevation&&this._updateElevation(lt),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},lt=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d,lt)},a),this}_prepareEase(a,d,v={}){this._moving=!0,d||v.moving||this.fire(new o.l("movestart",a)),this._zooming&&!v.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!v.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(v-(d-(v*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};const d=a.getCameraLngLat(),v=a.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(d,a.zoom):0;if(v<w){const I=this.calculateCameraOptionsFromTo(d,w,a.center,a.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(a){const d=[];if(d.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&d.push(w=>this.transformCameraUpdate(w)),!d.length)return;const v=a.clone();for(const w of d){const I=v.clone(),{center:z,zoom:Y,roll:X,pitch:ce,bearing:pe,elevation:Se}=w(I);z&&I.setCenter(z),Se!==void 0&&I.setElevation(Se),Y!==void 0&&I.setZoom(Y),X!==void 0&&I.setRoll(X),ce!==void 0&&I.setPitch(ce),pe!==void 0&&I.setBearing(pe),v.apply(I)}this.transform.apply(v)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const v=this._zooming,w=this._rotating,I=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,v&&this.fire(new o.l("zoomend",a)),w&&this.fire(new o.l("rotateend",a)),I&&this.fire(new o.l("pitchend",a)),z&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,d){if(!a.essential&&D.prefersReducedMotion){const sn=o.Q(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(sn,d)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.co},a);const v=this._getTransformForUpdate(),w=v.bearing,I=v.pitch,z=v.roll,Y=v.padding,X="bearing"in a?this._normalizeBearing(a.bearing,w):w,ce="pitch"in a?+a.pitch:I,pe="roll"in a?this._normalizeBearing(a.roll,z):z,Se="padding"in a?a.padding:v.padding,Me=o.P.convert(a.offset);let Fe=v.centerPoint.add(Me);const qe=v.screenPointToLocation(Fe),it=this.cameraHelper.handleFlyTo(v,{bearing:X,pitch:ce,roll:pe,padding:Se,locationAtOffset:qe,offsetAsPoint:Me,center:a.center,minZoom:a.minZoom,zoom:a.zoom});let lt=a.curve;const ht=Math.max(v.width,v.height),bt=ht/it.scaleOfZoom,vt=it.pixelPathLength;typeof it.scaleOfMinZoom=="number"&&(lt=Math.sqrt(ht/it.scaleOfMinZoom/vt*2));const xt=lt*lt;function Dt(sn){const Yn=(bt*bt-ht*ht+(sn?-1:1)*xt*xt*vt*vt)/(2*(sn?bt:ht)*xt*vt);return Math.log(Math.sqrt(Yn*Yn+1)-Yn)}function Lt(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function St(sn){return(Math.exp(sn)+Math.exp(-sn))/2}const Gt=Dt(!1);let rn=function(sn){return St(Gt)/St(Gt+lt*sn)},Ht=function(sn){return ht*((St(Gt)*(Lt(Yn=Gt+lt*sn)/St(Yn))-Lt(Gt))/xt)/vt;var Yn},tn=(Dt(!0)-Gt)/lt;if(Math.abs(vt)<2e-6||!isFinite(tn)){if(Math.abs(ht-bt)<1e-6)return this.easeTo(a,d);const sn=bt<ht?-1:1;tn=Math.abs(Math.log(bt/ht))/lt,Ht=()=>0,rn=Yn=>Math.exp(sn*lt*Yn)}return a.duration="duration"in a?+a.duration:1e3*tn/("screenSpeed"in a?+a.screenSpeed/lt:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=w!==X,this._pitching=ce!==I,this._rolling=pe!==z,this._padding=!v.isPaddingEqual(Se),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(it.targetCenter),this._ease(sn=>{const Yn=sn*tn,Gn=1/rn(Yn),On=Ht(Yn);this._rotating&&v.setBearing(o.C.number(w,X,sn)),this._pitching&&v.setPitch(o.C.number(I,ce,sn)),this._rolling&&v.setRoll(o.C.number(z,pe,sn)),this._padding&&(v.interpolatePadding(Y,Se,sn),Fe=v.centerPoint.add(Me)),it.easeFunc(sn,Gn,On,Fe),this.terrain&&!a.freezeElevation&&this._updateElevation(sn),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,d)}return a||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(a,d,v){v.animate===!1||v.duration===0?(a(1),d()):(this._easeStart=D.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=o.aO(a,-180,180);const v=Math.abs(a-d);return Math.abs(a-360-d)<v&&(a-=360),Math.abs(a+360-d)<v&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(a),this.transform.tileZoom):null}}const kc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Pd{constructor(a=kc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const v=this._map._getUIString(`AttributionControl.${d}`);a.title=v,a.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style.sourceCaches;for(const w in d){const I=d[w];if(I.used||I.usedForTerrain){const z=I.getSource();z.attribution&&a.indexOf(z.attribution)<0&&a.push(z.attribution)}}a=a.filter(w=>String(w).trim()),a.sort((w,I)=>w.length-I.length),a=a.filter((w,I)=>{for(let z=I+1;z<a.length;z++)if(a[z].indexOf(w)>=0)return!1;return!0});const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=R.sanitize(v),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pc{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl");const d=R.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Wo{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const w of v)if(w.id===a)return void(w.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var uc=o.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Ir extends o.E{constructor(a){super(),this._lastTilesetChange=D.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const v={};for(const w of nt(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))v[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),o.bY(w.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[w.key]=new he(w,this.tileSize),this._lastTilesetChange=D.now());for(const w in this._tiles)v[w]||delete this._tiles[w]}freeRtt(a){for(const d in this._tiles){const v=this._tiles[d];(!a||v.tileID.equals(a)||v.tileID.isChildOf(a)||a.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,d){return d?this._getTerrainCoordsForTileRanges(a,d):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){const d={};for(const v of this._renderableTilesKeys){const w=this._tiles[v].tileID,I=a.clone(),z=o.ba();if(w.canonical.equals(a.canonical))o.bY(z,0,o.$,o.$,0,0,1);else if(w.canonical.isChildOf(a.canonical)){const Y=w.canonical.z-a.canonical.z,X=w.canonical.x-(w.canonical.x>>Y<<Y),ce=w.canonical.y-(w.canonical.y>>Y<<Y),pe=o.$>>Y;o.bY(z,0,pe,pe,0,0,1),o.M(z,z,[-X*pe,-ce*pe,0])}else{if(!a.canonical.isChildOf(w.canonical))continue;{const Y=a.canonical.z-w.canonical.z,X=a.canonical.x-(a.canonical.x>>Y<<Y),ce=a.canonical.y-(a.canonical.y>>Y<<Y),pe=o.$>>Y;o.bY(z,0,o.$,o.$,0,0,1),o.M(z,z,[X*pe,ce*pe,0]),o.N(z,z,[1/2**Y,1/2**Y,0])}}I.terrainRttPosMatrix32f=new Float32Array(z),d[v]=I}return d}_getTerrainCoordsForTileRanges(a,d){const v={};for(const w of this._renderableTilesKeys){const I=this._tiles[w].tileID;if(!this._isWithinTileRanges(I,d))continue;const z=a.clone(),Y=o.ba();if(I.canonical.z===a.canonical.z){const X=a.canonical.x-I.canonical.x,ce=a.canonical.y-I.canonical.y;o.bY(Y,0,o.$,o.$,0,0,1),o.M(Y,Y,[X*o.$,ce*o.$,0])}else if(I.canonical.z>a.canonical.z){const X=I.canonical.z-a.canonical.z,ce=I.canonical.x-(I.canonical.x>>X<<X),pe=I.canonical.y-(I.canonical.y>>X<<X),Se=a.canonical.x-(I.canonical.x>>X),Me=a.canonical.y-(I.canonical.y>>X),Fe=o.$>>X;o.bY(Y,0,Fe,Fe,0,0,1),o.M(Y,Y,[-ce*Fe+Se*o.$,-pe*Fe+Me*o.$,0])}else{const X=a.canonical.z-I.canonical.z,ce=a.canonical.x-(a.canonical.x>>X<<X),pe=a.canonical.y-(a.canonical.y>>X<<X),Se=(a.canonical.x>>X)-I.canonical.x,Me=(a.canonical.y>>X)-I.canonical.y,Fe=o.$<<X;o.bY(Y,0,Fe,Fe,0,0,1),o.M(Y,Y,[ce*o.$+Se*Fe,pe*o.$+Me*Fe,0])}z.terrainRttPosMatrix32f=new Float32Array(Y),v[w]=z}return v}getSourceTile(a,d){const v=this.sourceCache._source;let w=a.overscaledZ-this.deltaZoom;if(w>v.maxzoom&&(w=v.maxzoom),w<v.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(w).key);let I=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!I||!I.dem)&&d)for(;w>=v.minzoom&&(!I||!I.dem);)I=this.sourceCache.getTileByID(a.scaledTo(w--).key);return I}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,d){return d[a.canonical.z]&&a.canonical.x>=d[a.canonical.z].minTileX&&a.canonical.x<=d[a.canonical.z].maxTileX&&a.canonical.y>=d[a.canonical.z].minTileY&&a.canonical.y<=d[a.canonical.z].maxTileY}}class Dr{constructor(a,d,v){this._meshCache={},this.painter=a,this.sourceCache=new Ir(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,v,w=o.$){var I;if(!(d>=0&&d<w&&v>=0&&v<w))return 0;const z=this.getTerrainData(a),Y=(I=z.tile)===null||I===void 0?void 0:I.dem;if(!Y)return 0;const X=o.cs([],[d/w*o.$,v/w*o.$],z.u_terrain_matrix),ce=[X[0]*Y.dim,X[1]*Y.dim],pe=Math.floor(ce[0]),Se=Math.floor(ce[1]),Me=ce[0]-pe,Fe=ce[1]-Se;return Y.get(pe,Se)*(1-Me)*(1-Fe)+Y.get(pe+1,Se)*Me*(1-Fe)+Y.get(pe,Se+1)*(1-Me)*Fe+Y.get(pe+1,Se+1)*Me*Fe}getElevationForLngLatZoom(a,d){if(!o.ct(d,a.wrap()))return 0;const{tileID:v,mercatorX:w,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(v,w%o.$,I%o.$,o.$)}getElevation(a,d,v,w=o.$){return this.getDEMElevation(a,d,v,w)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const w=this.painter.context,I=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(w,I,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(w,new o.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ag([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const w=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new o.T(w,d.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),d.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const v=d&&d+d.tileID.key+a.key;if(v&&!this._demMatrixCache[v]){const w=this.sourceCache.sourceCache._source.maxzoom;let I=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=w?I=a.canonical.z-w:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=a.canonical.x-(a.canonical.x>>I<<I),Y=a.canonical.y-(a.canonical.y>>I<<I),X=o.cu(new Float64Array(16),[1/(o.$<<I),1/(o.$<<I),0]);o.M(X,X,[z*o.$,Y*o.$,0]),this._demMatrixCache[a.key]={matrix:X,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,v=d.width/devicePixelRatio,w=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(d.context,{width:v,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(d.context,{width:v,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,w,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,w))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,z=0;I<this._coordsTextureSize;I++)for(let Y=0;Y<this._coordsTextureSize;Y++,z+=4)d[z+0]=255&Y,d[z+1]=255&I,d[z+2]=Y>>8<<4|I>>8,d[z+3]=0;const v=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),w=new o.T(a,v,a.gl.RGBA,{premultiply:!1});return w.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),v=this.painter.context,w=v.gl,I=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),Y=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(I,Y-z-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);const X=d[0]+(d[2]>>4<<8),ce=d[1]+((15&d[2])<<8),pe=this.coordsIndex[255-d[3]],Se=pe&&this.sourceCache.getTileByID(pe);if(!Se)return null;const Me=this._coordsTextureSize,Fe=(1<<Se.tileID.canonical.z)*Me;return new o.a1((Se.tileID.canonical.x*Me+X)/Fe+Se.tileID.wrap,(Se.tileID.canonical.y*Me+ce)/Fe,this.getElevation(Se.tileID,X,ce,Me))}depthAtPoint(a){const d=new Uint8Array(4),v=this.painter.context,w=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(a){var d;const v=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,w=v&&a.canonical.y===0,I=v&&a.canonical.y===(1<<a.canonical.z)-1,z=`m_${w?"n":""}_${I?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const Y=this.painter.context,X=new o.cv,ce=new o.aN,pe=this.meshSize,Se=o.$/pe,Me=pe*pe;for(let St=0;St<=pe;St++)for(let Gt=0;Gt<=pe;Gt++)X.emplaceBack(Gt*Se,St*Se,0);for(let St=0;St<Me;St+=pe+1)for(let Gt=0;Gt<pe;Gt++)ce.emplaceBack(Gt+St,pe+Gt+St+1,pe+Gt+St+2),ce.emplaceBack(Gt+St,pe+Gt+St+2,Gt+St+1);const Fe=X.length,qe=Fe+(pe+1),it=(pe+1)*pe,lt=w?o.bh:0,ht=w?0:1,bt=I?o.bi:o.$,vt=I?0:1;for(let St=0;St<=pe;St++)X.emplaceBack(St*Se,lt,ht);for(let St=0;St<=pe;St++)X.emplaceBack(St*Se,bt,vt);for(let St=0;St<pe;St++)ce.emplaceBack(it+St,qe+St,qe+St+1),ce.emplaceBack(it+St,qe+St+1,it+St+1),ce.emplaceBack(0+St,Fe+St+1,Fe+St),ce.emplaceBack(0+St,0+St+1,Fe+St+1);const xt=X.length,Dt=xt+2*(pe+1);for(const St of[0,1])for(let Gt=0;Gt<=pe;Gt++)for(const rn of[0,1])X.emplaceBack(St*o.$,Gt*Se,rn);for(let St=0;St<2*pe;St+=2)ce.emplaceBack(xt+St,xt+St+1,xt+St+3),ce.emplaceBack(xt+St,xt+St+3,xt+St+2),ce.emplaceBack(Dt+St,Dt+St+3,Dt+St+1),ce.emplaceBack(Dt+St,Dt+St+2,Dt+St+3);const Lt=new ol(Y.createVertexBuffer(X,uc.members),Y.createIndexBuffer(ce),o.aM.simpleSegment(0,0,X.length,ce.length));return this._meshCache[z]=Lt,Lt}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,d){var v;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(v=this.getMinMaxElevation(w).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(a,d){const v=o.a1.fromLngLat(a.wrap()),w=(1<<d)*o.$,I=v.x*w,z=v.y*w,Y=Math.floor(I/o.$),X=Math.floor(z/o.$);return{tileID:new o.Z(d,0,d,Y,X),mercatorX:I,mercatorY:z}}}class bu{constructor(a,d,v){this._context=a,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:a,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const XA={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class JA{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new bu(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(v=>!a._layers[v].isHidden(d)),this._coordsAscending={};for(const v in a.sourceCaches){this._coordsAscending[v]={};const w=a.sourceCaches[v].getVisibleCoordinates(),I=a.sourceCaches[v].getSource(),z=I instanceof jt?I.terrainTileRanges:null;for(const Y of w){const X=this.terrain.sourceCache.getTerrainCoords(Y,z);for(const ce in X)this._coordsAscending[v][ce]||(this._coordsAscending[v][ce]=[]),this._coordsAscending[v][ce].push(X[ce])}}this._coordsAscendingStr={};for(const v of a._order){const w=a._layers[v],I=w.source;if(XA[w.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const z in this._coordsAscending[I])this._coordsAscendingStr[I][z]=this._coordsAscending[I][z].map(Y=>Y.key).sort().join()}}for(const v of this._renderableTiles)for(const w in this._coordsAscendingStr){const I=this._coordsAscendingStr[w][v.tileID.key];I&&I!==v.rttCoords[w]&&(v.rtt=[])}}renderLayer(a,d){if(a.isHidden(this.painter.transform.zoom))return!1;const v=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),w=a.type,I=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(XA[w]&&(this._prevType&&XA[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(a.id),!z))return!0;if(XA[this._prevType]||XA[w]&&z){this._prevType=w;const Y=this._stacks.length-1,X=this._stacks[Y]||[];for(const ce of this._renderableTiles){if(this.pool.isFull()&&(VA(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ce),ce.rtt[Y]){const Se=this.pool.getObjectForId(ce.rtt[Y].id);if(Se.stamp===ce.rtt[Y].stamp){this.pool.useObject(Se);continue}}const pe=this.pool.getOrCreateFreeObject();this.pool.useObject(pe),this.pool.stampObject(pe),ce.rtt[Y]={id:pe.id,stamp:pe.stamp},I.context.bindFramebuffer.set(pe.fbo.framebuffer),I.context.clear({color:o.bf.transparent,stencil:0}),I.currentStencilSource=void 0;for(let Se=0;Se<X.length;Se++){const Me=I.style._layers[X[Se]],Fe=Me.source?this._coordsAscending[Me.source][ce.tileID.key]:[ce.tileID];I.context.viewport.set([0,0,pe.fbo.width,pe.fbo.height]),I._renderTileClippingMasks(Me,Fe,!0),I.renderLayer(I,I.style.sourceCaches[Me.source],Me,Fe,v),Me.source&&(ce.rttCoords[Me.source]=this._coordsAscendingStr[Me.source][ce.tileID.key])}}return VA(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects(),XA[w]}return!1}}const Uo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ta=f,La={hash:!1,interactive:!0,bearingSnap:7,attributionControl:kc,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},eu={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class xu{constructor(a,d,v=!1){this.mousedown=I=>{this.startMove(I,R.mousePos(this.element,I)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,R.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHandler.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),R.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const w=new lh;this._rotatePitchHandler=new sh({clickTolerance:3,move:(I,z)=>{const Y=d.getBoundingClientRect(),X=new o.P((Y.bottom-Y.top)/2,(Y.right-Y.left)/2);return{bearingDelta:o.cn(new o.P(I.x,z.y),z,X),pitchDelta:v?-.5*(z.y-I.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=a,R.addEventListener(d,"mousedown",this.mousedown),R.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(d,"touchcancel",this.reset)}startMove(a,d){this._rotatePitchHandler.dragStart(a,d),R.disableDrag()}move(a,d){const v=this.map,{bearingDelta:w,pitchDelta:I}=this._rotatePitchHandler.dragMove(a,d)||{};w&&v.setBearing(v.getBearing()+w),I&&v.setPitch(v.getPitch()+I)}off(){const a=this.element;R.removeEventListener(a,"mousedown",this.mousedown),R.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend),R.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend)}}let Oo;function Ms(O,a,d,v=!1){if(v||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return O?.wrap();const w=new o.S(O.lng,O.lat);if(O=new o.S(O.lng,O.lat),a){const I=new o.S(O.lng-360,O.lat),z=new o.S(O.lng+360,O.lat),Y=d.locationToScreenPoint(O).distSqr(a);d.locationToScreenPoint(I).distSqr(a)<Y?O=I:d.locationToScreenPoint(z).distSqr(a)<Y&&(O=z)}for(;Math.abs(O.lng-d.center.lng)>180;){const I=d.locationToScreenPoint(O);if(I.x>=0&&I.y>=0&&I.x<=d.width&&I.y<=d.height)break;O.lng>d.center.lng?O.lng-=360:O.lng+=360}return O.lng!==w.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(O))?O:w}const tu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function dl(O,a,d){const v=O.classList;for(const w in tu)v.remove(`maplibregl-${d}-anchor-${w}`);v.add(`maplibregl-${d}-anchor-${a}`)}class cc extends o.E{constructor(a){if(super(),this._onKeyPress=d=>{const v=d.code,w=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=d=>{const v=d.originalEvent.target,w=this._element;this._popup&&(v===w||w.contains(v))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=Ms(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${tu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${w}`),D.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div");const d=R.createNS("http://www.w3.org/2000/svg","svg"),v=41,w=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${w}px`),d.setAttributeNS(null,"viewBox",`0 0 ${w} ${v}`);const I=R.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const z=R.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const Y=R.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const X=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ht of X){const bt=R.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",ht.rx),bt.setAttributeNS(null,"ry",ht.ry),Y.appendChild(bt)}const ce=R.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"fill",this._color);const pe=R.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ce.appendChild(pe);const Se=R.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"fill","#000000");const Me=R.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Se.appendChild(Me);const Fe=R.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Fe.setAttributeNS(null,"fill","#FFFFFF");const qe=R.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const it=R.createNS("http://www.w3.org/2000/svg","circle");it.setAttributeNS(null,"fill","#000000"),it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"cx","5.5"),it.setAttributeNS(null,"cy","5.5"),it.setAttributeNS(null,"r","5.4999962");const lt=R.createNS("http://www.w3.org/2000/svg","circle");lt.setAttributeNS(null,"fill","#FFFFFF"),lt.setAttributeNS(null,"cx","5.5"),lt.setAttributeNS(null,"cy","5.5"),lt.setAttributeNS(null,"r","5.4999962"),qe.appendChild(it),qe.appendChild(lt),z.appendChild(Y),z.appendChild(ce),z.appendChild(Se),z.appendChild(Fe),z.appendChild(qe),d.appendChild(z),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(d),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),dl(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.S.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const w=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,v;const w=(d=this._map)===null||d===void 0?void 0:d.terrain,I=this._map.transform.isLocationOccluded(this._lngLat);if(!w||I){const Fe=I?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Fe&&(this._element.style.opacity=Fe))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const z=this._map,Y=z.terrain.depthAtPoint(this._pos),X=z.terrain.getElevationForLngLatZoom(this._lngLat,z.transform.tileZoom);if(z.transform.lngLatToCameraDepth(this._lngLat,X)-Y<.006)return void(this._element.style.opacity=this._opacity);const ce=-this._offset.y/z.transform.pixelsPerMeter,pe=Math.sin(z.getPitch()*Math.PI/180)*ce,Se=z.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Me=z.transform.lngLatToCameraDepth(this._lngLat,X+pe)-Se>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&Me&&this._popup.remove(),this._element.style.opacity=Me?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return(this._opacity===void 0||a===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Rc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let rA=0,ka=!1;const Dc={maxWidth:100,unit:"metric"};function Fc(O,a,d){const v=d&&d.maxWidth||100,w=O._container.clientHeight/2,I=O._container.clientWidth/2,z=O.unproject([I-v/2,w]),Y=O.unproject([I+v/2,w]),X=Math.round(O.project(Y).x-O.project(z).x),ce=Math.min(v,X,O._container.clientWidth),pe=z.distanceTo(Y);if(d&&d.unit==="imperial"){const Se=3.2808*pe;Se>5280?Mu(a,ce,Se/5280,O._getUIString("ScaleControl.Miles")):Mu(a,ce,Se,O._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Mu(a,ce,pe/1852,O._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?Mu(a,ce,pe/1e3,O._getUIString("ScaleControl.Kilometers")):Mu(a,ce,pe,O._getUIString("ScaleControl.Meters"))}function Mu(O,a,d,v){const w=function(I){const z=Math.pow(10,`${Math.floor(I)}`.length-1);let Y=I/z;return Y=Y>=10?10:Y>=5?5:Y>=3?3:Y>=2?2:Y>=1?1:function(X){const ce=Math.pow(10,Math.ceil(-Math.log(X)/Math.LN10));return Math.round(X*ce)/ce}(Y),z*Y}(d);O.style.width=a*(w/d)+"px",O.innerHTML=`${w}&nbsp;${v}`}const hc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ch=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function TA(O){if(O){if(typeof O=="number"){const a=Math.round(Math.abs(O)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,O),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-O),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(O,0),right:new o.P(-O,0)}}if(O instanceof o.P||Array.isArray(O)){const a=o.P.convert(O);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(O.center||[0,0]),top:o.P.convert(O.top||[0,0]),"top-left":o.P.convert(O["top-left"]||[0,0]),"top-right":o.P.convert(O["top-right"]||[0,0]),bottom:o.P.convert(O.bottom||[0,0]),"bottom-left":o.P.convert(O["bottom-left"]||[0,0]),"bottom-right":o.P.convert(O["bottom-right"]||[0,0]),left:o.P.convert(O.left||[0,0]),right:o.P.convert(O.right||[0,0])}}return TA(new o.P(0,0))}const hh=f;l.AJAXError=o.cz,l.Event=o.l,l.Evented=o.E,l.LngLat=o.S,l.MercatorCoordinate=o.a1,l.Point=o.P,l.addProtocol=o.cA,l.config=o.a,l.removeProtocol=o.cB,l.AttributionControl=Pd,l.BoxZoomHandler=cl,l.CanvasSource=wn,l.CooperativeGesturesHandler=Kh,l.DoubleClickZoomHandler=IA,l.DragPanHandler=_u,l.DragRotateHandler=Sl,l.EdgeInsets=vl,l.FullscreenControl=class extends o.E{constructor(O={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=d?.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const O=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Vn,l.GeolocateControl=class extends o.E{constructor(O){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new o.S(a.coords.longitude,a.coords.latitude),v=a.coords.accuracy,w=this._map.getBearing(),I=o.e({bearing:w},this.options.fitBoundsOptions),z=gt.fromLngLat(d,v);this._map.fitBounds(z,I,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new o.S(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&ka)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new cc({element:this._dotElement}),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{const v=d?.[0]instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||v||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Rc,O)}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(Oo!==void 0&&!a)return Oo;if(window.navigator.permissions===void 0)return Oo=!!window.navigator.geolocation,Oo;try{Oo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Oo=!!window.navigator.geolocation}return Oo})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,rA=0,ka=!1}_isOutOfMapMaxBounds(O){const a=this._map.getMaxBounds(),d=O.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const O=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&O))return;const a=this._map.project(O),d=this._map.unproject([a.x+100,a.y]),v=O.distanceTo(d)/100,w=2*this._accuracy/v;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rA--,ka=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rA++,rA>1?(O={maximumAge:6e5,timeout:0},ka=!0):(O=this.options.positionOptions,ka=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var O;const a=(O=this._map.getProjection())===null||O===void 0?void 0:O.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var O;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((O=this._map.getProjection())===null||O===void 0?void 0:O.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=R.create("button","maplibregl-ctrl-globe",this._container),R.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=ot,l.ImageSource=jt,l.KeyboardHandler=vu,l.LngLatBounds=gt,l.LogoControl=Pc,l.Map=class extends hd{constructor(O){var a,d;o.cw.mark(o.cx.create);const v=Object.assign(Object.assign(Object.assign({},La),O),{canvasContextAttributes:Object.assign(Object.assign({},La.canvasContextAttributes),O.canvasContextAttributes)});if(v.minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new Xi,I=new Ns;if(v.minZoom!==void 0&&w.setMinZoom(v.minZoom),v.maxZoom!==void 0&&w.setMaxZoom(v.maxZoom),v.minPitch!==void 0&&w.setMinPitch(v.minPitch),v.maxPitch!==void 0&&w.setMaxPitch(v.maxPitch),v.renderWorldCopies!==void 0&&w.setRenderWorldCopies(v.renderWorldCopies),super(w,I,{bearingSnap:v.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Wo,this._controls=[],this._mapId=o.a7(),this._contextLost=Y=>{Y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:Y}))},this._contextRestored=Y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:Y}))},this._onMapScroll=Y=>{if(Y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},v.canvasContextAttributes),this._trackResize=v.trackResize===!0,this._bearingSnap=v.bearingSnap,this._centerClampedToGround=v.centerClampedToGround,this._refreshExpiredTiles=v.refreshExpiredTiles===!0,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions===!0,this._collectResourceTiming=v.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Uo),v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=v.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=te.addThrottleControl(()=>this.isMoving()),this._requestManager=new H(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let Y=!1;const X=ac(ce=>{this._trackResize&&!this._removed&&(this.resize(ce),this.redraw())},50);this._resizeObserver=new ResizeObserver(ce=>{Y?X(ce):Y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new kd(this,v),this._hash=v.hash&&new ot(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,roll:v.roll}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,o.e({},v.fitBoundsOptions,{duration:0}))));const z=typeof v.style=="string"||((d=(a=v.style)===null||a===void 0?void 0:a.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Pd(typeof v.attributionControl=="boolean"?void 0:v.attributionControl)),v.maplibreLogo&&this.addControl(new Pc,v.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const Y=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Y)}}),this.on("data",Y=>{this._update(Y.dataType==="style"),this.fire(new o.l(`${Y.dataType}data`,Y))}),this.on("dataloading",Y=>{this.fire(new o.l(`${Y.dataType}dataloading`,Y))}),this.on("dataabort",Y=>{this.fire(new o.l("sourcedataabort",Y))})}_getMapId(){return this._mapId}setGlobalStateProperty(O,a){return this.style.setGlobalStateProperty(O,a),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(O,a){if(a===void 0&&(a=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=O.onAdd(this);this._controls.push(O);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(O);return a>-1&&this._controls.splice(a,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}coveringTiles(O){return nt(this.transform,O)}calculateCameraOptionsFromTo(O,a,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(O,a,d,v)}resize(O,a=!0){const[d,v]=this._containerDimensions(),w=this._getClampedPixelRatio(d,v);if(this._resizeCanvas(d,v,w),this.painter.resize(d,v,w),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const Y=this._getClampedPixelRatio(d,v);this._resizeCanvas(d,v,Y),this.painter.resize(d,v,Y)}this._resizeTransform(a);const I=!this._moving;return I&&(this.stop(),this.fire(new o.l("movestart",O)).fire(new o.l("move",O))),this.fire(new o.l("resize",O)),I&&this.fire(new o.l("moveend",O)),this}_resizeTransform(O=!0){var a;const[d,v]=this._containerDimensions();this.transform.resize(d,v,O),(a=this._requestedCameraState)===null||a===void 0||a.resize(d,v,O)}_getClampedPixelRatio(O,a){const{0:d,1:v}=this._maxCanvasSize,w=this.getPixelRatio(),I=O*w,z=a*w;return Math.min(I>d?d/I:1,z>v?v/z:1)*w}getPixelRatio(){var O;return(O=this._overridePixelRatio)!==null&&O!==void 0?O:devicePixelRatio}setPixelRatio(O){this._overridePixelRatio=O,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(gt.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.setMinZoom(O),this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.setMaxZoom(O),this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.setMinPitch(O),this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(O>=this.transform.minPitch)return this.transform.setMaxPitch(O),this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.setRenderWorldCopies(O),this._update()}project(O){return this.transform.locationToScreenPoint(o.S.convert(O),this.style&&this.terrain)}unproject(O){return this.transform.screenPointToLocation(o.P.convert(O),this.terrain)}isMoving(){var O;return this._moving||((O=this.handlers)===null||O===void 0?void 0:O.isMoving())}isZooming(){var O;return this._zooming||((O=this.handlers)===null||O===void 0?void 0:O.isZooming())}isRotating(){var O;return this._rotating||((O=this.handlers)===null||O===void 0?void 0:O.isRotating())}_createDelegatedListener(O,a,d){if(O==="mouseenter"||O==="mouseover"){let v=!1;return{layers:a,listener:d,delegates:{mousemove:I=>{const z=a.filter(X=>this.getLayer(X)),Y=z.length!==0?this.queryRenderedFeatures(I.point,{layers:z}):[];Y.length?v||(v=!0,d.call(this,new ho(O,this,I.originalEvent,{features:Y}))):v=!1},mouseout:()=>{v=!1}}}}if(O==="mouseleave"||O==="mouseout"){let v=!1;return{layers:a,listener:d,delegates:{mousemove:z=>{const Y=a.filter(X=>this.getLayer(X));(Y.length!==0?this.queryRenderedFeatures(z.point,{layers:Y}):[]).length?v=!0:v&&(v=!1,d.call(this,new ho(O,this,z.originalEvent)))},mouseout:z=>{v&&(v=!1,d.call(this,new ho(O,this,z.originalEvent)))}}}}{const v=w=>{const I=a.filter(Y=>this.getLayer(Y)),z=I.length!==0?this.queryRenderedFeatures(w.point,{layers:I}):[];z.length&&(w.features=z,d.call(this,w),delete w.features)};return{layers:a,listener:d,delegates:{[O]:v}}}}_saveDelegatedListener(O,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(a)}_removeDelegatedListener(O,a,d){if(!this._delegatedListeners||!this._delegatedListeners[O])return;const v=this._delegatedListeners[O];for(let w=0;w<v.length;w++){const I=v[w];if(I.listener===d&&I.layers.length===a.length&&I.layers.every(z=>a.includes(z))){for(const z in I.delegates)this.off(z,I.delegates[z]);return void v.splice(w,1)}}}on(O,a,d){if(d===void 0)return super.on(O,a);const v=typeof a=="string"?[a]:a,w=this._createDelegatedListener(O,v,d);this._saveDelegatedListener(O,w);for(const I in w.delegates)this.on(I,w.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(O,v,d)}}}once(O,a,d){if(d===void 0)return super.once(O,a);const v=typeof a=="string"?[a]:a,w=this._createDelegatedListener(O,v,d);for(const I in w.delegates){const z=w.delegates[I];w.delegates[I]=(...Y)=>{this._removeDelegatedListener(O,v,d),z(...Y)}}this._saveDelegatedListener(O,w);for(const I in w.delegates)this.once(I,w.delegates[I]);return this}off(O,a,d){return d===void 0?super.off(O,a):(this._removeDelegatedListener(O,typeof a=="string"?[a]:a,d),this)}queryRenderedFeatures(O,a){if(!this.style)return[];let d;const v=O instanceof o.P||Array.isArray(O),w=v?O:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(v?{}:O)||{},w instanceof o.P||typeof w[0]=="number")d=[o.P.convert(w)];else{const I=o.P.convert(w[0]),z=o.P.convert(w[1]);d=[I,new o.P(z.x,I.y),z,new o.P(I.x,z.y),I]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(O,a){return this.style.querySourceFeatures(O,a)}setStyle(O,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(O,a))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const a=this._locale[O];if(a==null)throw new Error(`Missing UI string '${O}'`);return a}_updateStyle(O,a){var d,v;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(O,a));const w=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!O)),O?(this.style=new Hc(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O,a,w):this.style.loadJSON(O,a,w),this):((v=(d=this.style)===null||d===void 0?void 0:d.projection)===null||v===void 0||v.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Hc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,a){if(typeof O=="string"){const d=this._requestManager.transformRequest(O,"Style");o.j(d,new AbortController).then(v=>{this._updateDiff(v.data,a)}).catch(v=>{v&&this.fire(new o.k(v))})}else typeof O=="object"&&this._updateDiff(O,a)}_updateDiff(O,a){try{this.style.setState(O,a)&&this._update(!0)}catch(d){o.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(O,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(O,a){return this._lazyInitEmptyStyle(),this.style.addSource(O,a),this._update(!0)}isSourceLoaded(O){const a=this.style&&this.style.sourceCaches[O];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),O){const a=this.style.sourceCaches[O.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${O.source}`);this.terrain===null&&a.reload();for(const d in this.style._layers){const v=this.style._layers[d];v.type==="hillshade"&&v.source===O.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),v.type==="color-relief"&&v.source===O.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Dr(this.painter,a,O),this.painter.renderToTexture=new JA(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var v;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==O.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((v=d.source)===null||v===void 0?void 0:v.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:O})),this}getTerrain(){var O,a;return(a=(O=this.terrain)===null||O===void 0?void 0:O.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const a in O){const d=O[a]._tiles;for(const v in d){const w=d[v];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}setSourceTileLodParams(O,a,d){if(d){const v=this.getSource(d);if(!v)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);v.calculateTileZoom=mt(Math.max(1,O),Math.max(1,a))}else for(const v in this.style.sourceCaches)this.style.sourceCaches[v].getSource().calculateTileZoom=mt(Math.max(1,O),Math.max(1,a));return this._update(!0),this}refreshTiles(O,a){const d=this.style.sourceCaches[O];if(!d)throw new Error(`There is no source cache with ID "${O}", cannot refresh tile`);a===void 0?d.reload(!0):d.refreshTiles(a.map(v=>new o.a4(v.z,v.x,v.y)))}addImage(O,a,d={}){const{pixelRatio:v=1,sdf:w=!1,stretchX:I,stretchY:z,content:Y,textFitWidth:X,textFitHeight:ce}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:Se,data:Me}=a,Fe=a;return this.style.addImage(O,{data:new o.R({width:pe,height:Se},new Uint8Array(Me)),pixelRatio:v,stretchX:I,stretchY:z,content:Y,textFitWidth:X,textFitHeight:ce,sdf:w,version:0,userImage:Fe}),Fe.onAdd&&Fe.onAdd(this,O),this}}{const{width:pe,height:Se,data:Me}=D.getImageData(a);this.style.addImage(O,{data:new o.R({width:pe,height:Se},Me),pixelRatio:v,stretchX:I,stretchY:z,content:Y,textFitWidth:X,textFitHeight:ce,sdf:w,version:0})}}updateImage(O,a){const d=this.style.getImage(O);if(!d)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=a instanceof HTMLImageElement||o.b(a)?D.getImageData(a):a,{width:w,height:I,data:z}=v;if(w===void 0||I===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==d.data.width||I!==d.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Y=!(a instanceof HTMLImageElement||o.b(a));return d.data.replace(z,Y),this.style.updateImage(O,d),this}getImage(O){return this.style.getImage(O)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O){return te.getImage(this._requestManager.transformRequest(O,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(O,a){return this._lazyInitEmptyStyle(),this.style.addLayer(O,a),this._update(!0)}moveLayer(O,a){return this.style.moveLayer(O,a),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(O,a,d){return this.style.setLayerZoomRange(O,a,d),this._update(!0)}setFilter(O,a,d={}){return this.style.setFilter(O,a,d),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,a,d,v={}){return this.style.setPaintProperty(O,a,d,v),this._update(!0)}getPaintProperty(O,a){return this.style.getPaintProperty(O,a)}setLayoutProperty(O,a,d,v={}){return this.style.setLayoutProperty(O,a,d,v),this._update(!0)}getLayoutProperty(O,a){return this.style.getLayoutProperty(O,a)}setGlyphs(O,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(O,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(O,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(O,a,d,v=>{v||this._update(!0)}),this}removeSprite(O){return this._lazyInitEmptyStyle(),this.style.removeSprite(O),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(O,a,d=>{d||this._update(!0)}),this}setLight(O,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(O,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(O,a){return this.style.setFeatureState(O,a),this._update()}removeFeatureState(O,a){return this.style.removeFeatureState(O,a),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,a=0;return this._container&&(O=this._container.clientWidth||400,a=this._container.clientHeight||300),[O,a]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map");const a=this._canvasContainer=R.create("div","maplibregl-canvas-container",O);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);const w=this._controlContainer=R.create("div","maplibregl-control-container",O),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{I[z]=R.create("div",`maplibregl-ctrl-${z} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(O,a,d){this._canvas.width=Math.floor(d*O),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${O}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const O=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let a=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{a={requestedAttributes:O},v&&(a.statusMessage=v.statusMessage,a.type=v.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,O):this._canvas.getContext("webgl2",O)||this._canvas.getContext("webgl",O),!d){const v="Failed to initialize WebGL";throw a?(a.message=v,new Error(JSON.stringify(a))):new Error(v)}this.painter=new EA(d,this.transform),U.testSupport(d)}migrateProjection(O,a){super.migrateProjection(O,a),this.painter.transform=O,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){var a,d,v,w,I;const z=this._idleTriggered?this._fadeDuration:0,Y=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let X=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Se=this.transform.zoom,Me=D.now();this.style.zoomHistory.update(Se,Me);const Fe=new o.F(Se,{now:Me,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),qe=Fe.crossFadingFactor();qe===1&&qe===this._crossFadingFactor||(X=!0,this._crossFadingFactor=qe),this.style.update(Fe)}const ce=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==Y;(v=this.style.projection)===null||v===void 0||v.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ce)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,ce),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cw.mark(o.cx.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||X)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const pe=this._sourcesDirty||this._styleDirty||this._placementDirty;return pe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||pe||(this._fullyLoaded=!0,o.cw.mark(o.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var O;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),te.removeThrottleControl(this._imageQueueHandle),(O=this._resizeObserver)===null||O===void 0||O.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a?.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cw.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frame(this._frameRequest,O=>{o.cw.frame(O),this._frameRequest=null;try{this._render(O)}catch(a){if(!o.cy(a)&&!function(d){return d.message===Lu}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}get version(){return Ta}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(O){return this._lazyInitEmptyStyle(),this.style.setProjection(O),this._update(!0)}},l.MapMouseEvent=ho,l.MapTouchEvent=HA,l.MapWheelEvent=Fa,l.Marker=cc,l.NavigationControl=class{constructor(O){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),v=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,d)=>{const v=this._map._getUIString(`NavigationControl.${d}`);a.title=v,a.setAttribute("aria-label",v)},this.options=o.e({},eu,O),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),R.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),R.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=R.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,a){const d=R.create("button",O,this._container);return d.type="button",d.addEventListener("click",a),d}},l.Popup=class extends o.E{constructor(O){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=R.create("div","maplibregl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ms(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;const d=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let v=this.options.anchor;const w=TA(this.options.offset);if(!v){const z=this._container.offsetWidth,Y=this._container.offsetHeight;let X;X=d.y+w.bottom.y<Y?["top"]:d.y>this._map.transform.height-Y?["bottom"]:[],d.x<z/2?X.push("left"):d.x>this._map.transform.width-z/2&&X.push("right"),v=X.length===0?"bottom":X.join("-")}let I=d.add(w[v]);this.options.subpixelPositioning||(I=I.round()),R.setTransform(this._container,`${tu[v]} translate(${I.x}px,${I.y}px)`),dl(this._container,v,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(hc),O)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=o.S.convert(O),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const a=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=O;v=d.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){var O;return(O=this._container)===null||O===void 0?void 0:O.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){return this._container&&this._container.classList.add(O),this}removeClassName(O){return this._container&&this._container.classList.remove(O),this}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}setSubpixelPositioning(O){this.options.subpixelPositioning=O}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(ch);O&&O.focus()}},l.RasterDEMTileSource=ln,l.RasterTileSource=Ft,l.ScaleControl=class{constructor(O){this._onMove=()=>{Fc(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Fc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Dc),O)}getDefaultPosition(){return"bottom-left"}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Is,l.Style=Hc,l.TerrainControl=class{constructor(O){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=O}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=Ac,l.TwoFingersTouchRotateHandler=Ml,l.TwoFingersTouchZoomHandler=xa,l.TwoFingersTouchZoomRotateHandler=Hf,l.VectorTileSource=Qt,l.VideoSource=Un,l.addSourceType=(O,a)=>o._(void 0,void 0,void 0,function*(){if(En(O))throw new Error(`A source type called "${O}" already exists.`);((d,v)=>{Mn[d]=v})(O,a)}),l.clearPrewarmedResources=function(){const O=pt;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(ze),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=zn,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return Ne().getRTLTextPluginStatus()},l.getVersion=function(){return hh},l.getWorkerCount=function(){return Te.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(O){return Tt().broadcast("IS",O)},l.prewarm=function(){ft().acquire(ze)},l.setMaxParallelImageRequests=function(O){o.a.MAX_PARALLEL_IMAGE_REQUESTS=O},l.setRTLTextPlugin=function(O,a){return Ne().setRTLTextPlugin(O,a)},l.setWorkerCount=function(O){Te.workerCount=O},l.setWorkerUrl=function(O){o.a.WORKER_URL=O}});var s=t;return s})}(r2)),r2.exports}var wV=MV();const sy=yA(wV);var gb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function aU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jv={exports:{}};jv.exports;var I7;function SV(){return I7||(I7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",f="[object Array]",C="[object AsyncFunction]",M="[object Boolean]",B="[object Date]",D="[object Error]",R="[object Function]",U="[object GeneratorFunction]",G="[object Map]",W="[object Number]",J="[object Null]",$="[object Object]",oe="[object Promise]",te="[object Proxy]",H="[object RegExp]",re="[object Set]",j="[object String]",ue="[object Symbol]",me="[object Undefined]",ge="[object WeakMap]",we="[object ArrayBuffer]",Ee="[object DataView]",xe="[object Float32Array]",We="[object Float64Array]",be="[object Int8Array]",rt="[object Int16Array]",Ct="[object Int32Array]",at="[object Uint8Array]",Je="[object Uint8ClampedArray]",ze="[object Uint16Array]",Te="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,ft={};ft[xe]=ft[We]=ft[be]=ft[rt]=ft[Ct]=ft[at]=ft[Je]=ft[ze]=ft[Te]=!0,ft[o]=ft[f]=ft[we]=ft[M]=ft[Ee]=ft[B]=ft[D]=ft[R]=ft[G]=ft[W]=ft[$]=ft[H]=ft[re]=ft[j]=ft[ge]=!1;var Bt=typeof gb=="object"&&gb&&gb.Object===Object&&gb,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Le=Bt||Tt||Function("return this")(),Pe=e&&!e.nodeType&&e,ke=Pe&&!0&&n&&!n.nodeType&&n,Qe=ke&&ke.exports===Pe,_t=Qe&&Bt.process,gt=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),wt=gt&&gt.isTypedArray;function Qt(ee,Ie){for(var st=-1,Yt=ee==null?0:ee.length,wr=0,zn=[];++st<Yt;){var qr=ee[st];Ie(qr,st,ee)&&(zn[wr++]=qr)}return zn}function Ft(ee,Ie){for(var st=-1,Yt=Ie.length,wr=ee.length;++st<Yt;)ee[wr+st]=Ie[st];return ee}function ln(ee,Ie){for(var st=-1,Yt=ee==null?0:ee.length;++st<Yt;)if(Ie(ee[st],st,ee))return!0;return!1}function Vn(ee,Ie){for(var st=-1,Yt=Array(ee);++st<ee;)Yt[st]=Ie(st);return Yt}function jt(ee){return function(Ie){return ee(Ie)}}function Un(ee,Ie){return ee.has(Ie)}function wn(ee,Ie){return ee?.[Ie]}function Mn(ee){var Ie=-1,st=Array(ee.size);return ee.forEach(function(Yt,wr){st[++Ie]=[wr,Yt]}),st}function En(ee,Ie){return function(st){return ee(Ie(st))}}function Mr(ee){var Ie=-1,st=Array(ee.size);return ee.forEach(function(Yt){st[++Ie]=Yt}),st}var Hn=Array.prototype,Pn=Function.prototype,Ne=Object.prototype,he=Le["__core-js_shared__"],ie=Pn.toString,se=Ne.hasOwnProperty,fe=function(){var ee=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Oe=Ne.toString,Ge=RegExp("^"+ie.call(se).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=Qe?Le.Buffer:void 0,$e=Le.Symbol,De=Le.Uint8Array,Ze=Ne.propertyIsEnumerable,m=Hn.splice,mt=$e?$e.toStringTag:void 0,At=Object.getOwnPropertySymbols,It=ct?ct.isBuffer:void 0,nt=En(Object.keys,Object),en=So(Le,"DataView"),Tn=So(Le,"Map"),xn=So(Le,"Promise"),er=So(Le,"Set"),Qn=So(Le,"WeakMap"),Qr=So(Object,"create"),$r=Eo(en),Br=Eo(Tn),br=Eo(xn),or=Eo(er),ti=Eo(Qn),bn=$e?$e.prototype:void 0,Vi=bn?bn.valueOf:void 0;function zr(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function $o(){this.__data__=Qr?Qr(null):{},this.size=0}function is(ee){var Ie=this.has(ee)&&delete this.__data__[ee];return this.size-=Ie?1:0,Ie}function Zn(ee){var Ie=this.__data__;if(Qr){var st=Ie[ee];return st===r?void 0:st}return se.call(Ie,ee)?Ie[ee]:void 0}function _i(ee){var Ie=this.__data__;return Qr?Ie[ee]!==void 0:se.call(Ie,ee)}function Kr(ee,Ie){var st=this.__data__;return this.size+=this.has(ee)?0:1,st[ee]=Qr&&Ie===void 0?r:Ie,this}zr.prototype.clear=$o,zr.prototype.delete=is,zr.prototype.get=Zn,zr.prototype.has=_i,zr.prototype.set=Kr;function ki(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function oa(){this.__data__=[],this.size=0}function os(ee){var Ie=this.__data__,st=sr(Ie,ee);if(st<0)return!1;var Yt=Ie.length-1;return st==Yt?Ie.pop():m.call(Ie,st,1),--this.size,!0}function Gr(ee){var Ie=this.__data__,st=sr(Ie,ee);return st<0?void 0:Ie[st][1]}function qa(ee){return sr(this.__data__,ee)>-1}function sa(ee,Ie){var st=this.__data__,Yt=sr(st,ee);return Yt<0?(++this.size,st.push([ee,Ie])):st[Yt][1]=Ie,this}ki.prototype.clear=oa,ki.prototype.delete=os,ki.prototype.get=Gr,ki.prototype.has=qa,ki.prototype.set=sa;function jo(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function Ds(){this.size=0,this.__data__={hash:new zr,map:new(Tn||ki),string:new zr}}function yl(ee){var Ie=gi(this,ee).delete(ee);return this.size-=Ie?1:0,Ie}function si(ee){return gi(this,ee).get(ee)}function vA(ee){return gi(this,ee).has(ee)}function Bs(ee,Ie){var st=gi(this,ee),Yt=st.size;return st.set(ee,Ie),this.size+=st.size==Yt?0:1,this}jo.prototype.clear=Ds,jo.prototype.delete=yl,jo.prototype.get=si,jo.prototype.has=vA,jo.prototype.set=Bs;function Hr(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.__data__=new jo;++Ie<st;)this.add(ee[Ie])}function Sr(ee){return this.__data__.set(ee,r),this}function aa(ee){return this.__data__.has(ee)}Hr.prototype.add=Hr.prototype.push=Sr,Hr.prototype.has=aa;function vs(ee){var Ie=this.__data__=new ki(ee);this.size=Ie.size}function ss(){this.__data__=new ki,this.size=0}function Ye(ee){var Ie=this.__data__,st=Ie.delete(ee);return this.size=Ie.size,st}function Et(ee){return this.__data__.get(ee)}function gn(ee){return this.__data__.has(ee)}function Nn(ee,Ie){var st=this.__data__;if(st instanceof ki){var Yt=st.__data__;if(!Tn||Yt.length<t-1)return Yt.push([ee,Ie]),this.size=++st.size,this;st=this.__data__=new jo(Yt)}return st.set(ee,Ie),this.size=st.size,this}vs.prototype.clear=ss,vs.prototype.delete=Ye,vs.prototype.get=Et,vs.prototype.has=gn,vs.prototype.set=Nn;function cn(ee,Ie){var st=as(ee),Yt=!st&&hs(ee),wr=!st&&!Yt&&Xi(ee),zn=!st&&!Yt&&!wr&&Cl(ee),qr=st||Yt||wr||zn,ai=qr?Vn(ee.length,String):[],Er=ai.length;for(var Xr in ee)se.call(ee,Xr)&&!(qr&&(Xr=="length"||wr&&(Xr=="offset"||Xr=="parent")||zn&&(Xr=="buffer"||Xr=="byteLength"||Xr=="byteOffset")||sl(Xr,Er)))&&ai.push(Xr);return ai}function sr(ee,Ie){for(var st=ee.length;st--;)if(go(ee[st][0],Ie))return st;return-1}function ji(ee,Ie,st){var Yt=Ie(ee);return as(ee)?Yt:Ft(Yt,st(ee))}function wo(ee){return ee==null?ee===void 0?me:J:mt&&mt in Object(ee)?yi(ee):al(ee)}function xs(ee){return Ri(ee)&&wo(ee)==o}function va(ee,Ie,st,Yt,wr){return ee===Ie?!0:ee==null||Ie==null||!Ri(ee)&&!Ri(Ie)?ee!==ee&&Ie!==Ie:CA(ee,Ie,st,Yt,va,wr)}function CA(ee,Ie,st,Yt,wr,zn){var qr=as(ee),ai=as(Ie),Er=qr?f:cs(ee),Xr=ai?f:cs(Ie);Er=Er==o?$:Er,Xr=Xr==o?$:Xr;var Hi=Er==$,Ji=Xr==$,ni=Er==Xr;if(ni&&Xi(ee)){if(!Xi(Ie))return!1;qr=!0,Hi=!1}if(ni&&!Hi)return zn||(zn=new vs),qr||Cl(ee)?$a(ee,Ie,st,Yt,wr,zn):Ca(ee,Ie,Er,st,Yt,wr,zn);if(!(st&i)){var di=Hi&&se.call(ee,"__wrapped__"),lo=Ji&&se.call(Ie,"__wrapped__");if(di||lo){var zi=di?ee.value():ee,Oi=lo?Ie.value():Ie;return zn||(zn=new vs),wr(zi,Oi,st,Yt,zn)}}return ni?(zn||(zn=new vs),wc(ee,Ie,st,Yt,wr,zn)):!1}function Ci(ee){if(!Ns(ee)||Bi(ee))return!1;var Ie=Cs(ee)?Ge:pt;return Ie.test(Eo(ee))}function cu(ee){return Ri(ee)&&ba(ee.length)&&!!ft[wo(ee)]}function Hl(ee){if(!vl(ee))return nt(ee);var Ie=[];for(var st in Object(ee))se.call(ee,st)&&st!="constructor"&&Ie.push(st);return Ie}function $a(ee,Ie,st,Yt,wr,zn){var qr=st&i,ai=ee.length,Er=Ie.length;if(ai!=Er&&!(qr&&Er>ai))return!1;var Xr=zn.get(ee);if(Xr&&zn.get(Ie))return Xr==Ie;var Hi=-1,Ji=!0,ni=st&s?new Hr:void 0;for(zn.set(ee,Ie),zn.set(Ie,ee);++Hi<ai;){var di=ee[Hi],lo=Ie[Hi];if(Yt)var zi=qr?Yt(lo,di,Hi,Ie,ee,zn):Yt(di,lo,Hi,ee,Ie,zn);if(zi!==void 0){if(zi)continue;Ji=!1;break}if(ni){if(!ln(Ie,function(Oi,la){if(!Un(ni,la)&&(di===Oi||wr(di,Oi,st,Yt,zn)))return ni.push(la)})){Ji=!1;break}}else if(!(di===lo||wr(di,lo,st,Yt,zn))){Ji=!1;break}}return zn.delete(ee),zn.delete(Ie),Ji}function Ca(ee,Ie,st,Yt,wr,zn,qr){switch(st){case Ee:if(ee.byteLength!=Ie.byteLength||ee.byteOffset!=Ie.byteOffset)return!1;ee=ee.buffer,Ie=Ie.buffer;case we:return!(ee.byteLength!=Ie.byteLength||!zn(new De(ee),new De(Ie)));case M:case B:case W:return go(+ee,+Ie);case D:return ee.name==Ie.name&&ee.message==Ie.message;case H:case j:return ee==Ie+"";case G:var ai=Mn;case re:var Er=Yt&i;if(ai||(ai=Mr),ee.size!=Ie.size&&!Er)return!1;var Xr=qr.get(ee);if(Xr)return Xr==Ie;Yt|=s,qr.set(ee,Ie);var Hi=$a(ai(ee),ai(Ie),Yt,wr,zn,qr);return qr.delete(ee),Hi;case ue:if(Vi)return Vi.call(ee)==Vi.call(Ie)}return!1}function wc(ee,Ie,st,Yt,wr,zn){var qr=st&i,ai=_a(ee),Er=ai.length,Xr=_a(Ie),Hi=Xr.length;if(Er!=Hi&&!qr)return!1;for(var Ji=Er;Ji--;){var ni=ai[Ji];if(!(qr?ni in Ie:se.call(Ie,ni)))return!1}var di=zn.get(ee);if(di&&zn.get(Ie))return di==Ie;var lo=!0;zn.set(ee,Ie),zn.set(Ie,ee);for(var zi=qr;++Ji<Er;){ni=ai[Ji];var Oi=ee[ni],la=Ie[ni];if(Yt)var Ea=qr?Yt(la,Oi,ni,Ie,ee,zn):Yt(Oi,la,ni,ee,Ie,zn);if(!(Ea===void 0?Oi===la||wr(Oi,la,st,Yt,zn):Ea)){lo=!1;break}zi||(zi=ni=="constructor")}if(lo&&!zi){var _A=ee.constructor,Gs=Ie.constructor;_A!=Gs&&"constructor"in ee&&"constructor"in Ie&&!(typeof _A=="function"&&_A instanceof _A&&typeof Gs=="function"&&Gs instanceof Gs)&&(lo=!1)}return zn.delete(ee),zn.delete(Ie),lo}function _a(ee){return ji(ee,Zr,ol)}function gi(ee,Ie){var st=ee.__data__;return Fl(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function So(ee,Ie){var st=wn(ee,Ie);return Ci(st)?st:void 0}function yi(ee){var Ie=se.call(ee,mt),st=ee[mt];try{ee[mt]=void 0;var Yt=!0}catch{}var wr=Oe.call(ee);return Yt&&(Ie?ee[mt]=st:delete ee[mt]),wr}var ol=At?function(ee){return ee==null?[]:(ee=Object(ee),Qt(At(ee),function(Ie){return Ze.call(ee,Ie)}))}:Cr,cs=wo;(en&&cs(new en(new ArrayBuffer(1)))!=Ee||Tn&&cs(new Tn)!=G||xn&&cs(xn.resolve())!=oe||er&&cs(new er)!=re||Qn&&cs(new Qn)!=ge)&&(cs=function(ee){var Ie=wo(ee),st=Ie==$?ee.constructor:void 0,Yt=st?Eo(st):"";if(Yt)switch(Yt){case $r:return Ee;case Br:return G;case br:return oe;case or:return re;case ti:return ge}return Ie});function sl(ee,Ie){return Ie=Ie??l,!!Ie&&(typeof ee=="number"||kt.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function Fl(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function Bi(ee){return!!fe&&fe in ee}function vl(ee){var Ie=ee&&ee.constructor,st=typeof Ie=="function"&&Ie.prototype||Ne;return ee===st}function al(ee){return Oe.call(ee)}function Eo(ee){if(ee!=null){try{return ie.call(ee)}catch{}try{return ee+""}catch{}}return""}function go(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}var hs=xs(function(){return arguments}())?xs:function(ee){return Ri(ee)&&se.call(ee,"callee")&&!Ze.call(ee,"callee")},as=Array.isArray;function yo(ee){return ee!=null&&ba(ee.length)&&!Cs(ee)}var Xi=It||Wi;function Sc(ee,Ie){return va(ee,Ie)}function Cs(ee){if(!Ns(ee))return!1;var Ie=wo(ee);return Ie==R||Ie==U||Ie==C||Ie==te}function ba(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function Ns(ee){var Ie=typeof ee;return ee!=null&&(Ie=="object"||Ie=="function")}function Ri(ee){return ee!=null&&typeof ee=="object"}var Cl=wt?jt(wt):cu;function Zr(ee){return yo(ee)?cn(ee):Hl(ee)}function Cr(){return[]}function Wi(){return!1}n.exports=Sc}(jv,jv.exports)),jv.exports}var EV=SV(),BV=aU(EV);function T6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function k6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function P6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function OV(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const f=s(l);r.push(T6(f.circle,l)),i.push(P6(f.line,l)),t.push(k6(f.polygon,f.polygonOutline,l))}else o.forEach(f=>{const C=s(f);r.push(T6(C.circle,l,f)),i.push(P6(C.line,l,f)),t.push(k6(C.polygon,C.polygonOutline,l,f))})}),t.concat(i).concat(r)}function IV(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var T7={polygonLayer:k6,lineLayer:P6,circleLayer:T6,generateInspectStyle:IV,generateColoredLayers:OV};class TV{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function kV(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function k4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${kV(e)}</div></div>`}function PV(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function RV(n){const e=PV(n.layer["source-layer"]||n.layer.source),t=k4("$id",n.id),r=k4("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>k4(s,n.properties[s]));return[e,t,r].concat(i).join("")}function DV(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${RV(e)}</div>`).join("")}function FV(n){return`<div class="maplibregl-inspect_popup">${DV(n)}</div>`}var Wv={exports:{}},KV=Wv.exports,k7;function LV(){return k7||(k7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(KV,function(){var t=null,r={};J();var i=[],s=function(j){if(j=j||{},j.seed!==void 0&&j.seed!==null&&j.seed===parseInt(j.seed,10))t=j.seed;else if(typeof j.seed=="string")t=H(j.seed);else{if(j.seed!==void 0&&j.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ue,me,ge;if(j.count!==null&&j.count!==void 0){for(var we=j.count,Ee=[],xe=0;xe<j.count;xe++)i.push(!1);for(j.count=null;we>Ee.length;){var We=s(j);t!==null&&(j.seed=t),Ee.push(We)}return j.count=we,Ee}return ue=l(j),me=o(ue,j),ge=f(ue,me,j),C([ue,me,ge],j)};function l(j){if(i.length>0){var ue=re(j.hue),me=U(ue),ge=(ue[1]-ue[0])/i.length,we=parseInt((me-ue[0])/ge);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var Ee=(ue[0]+we*ge)%359,xe=(ue[0]+(we+1)*ge)%359;return ue=[Ee,xe],me=U(ue),me<0&&(me=360+me),me}else{var ue=B(j.hue);return me=U(ue),me<0&&(me=360+me),me}}function o(j,ue){if(ue.hue==="monochrome")return 0;if(ue.luminosity==="random")return U([0,100]);var me=D(j),ge=me[0],we=me[1];switch(ue.luminosity){case"bright":ge=55;break;case"dark":ge=we-10;break;case"light":we=55;break}return U([ge,we])}function f(j,ue,me){var ge=M(j,ue),we=100;switch(me.luminosity){case"dark":we=ge+20;break;case"light":ge=(we+ge)/2;break;case"random":ge=0,we=100;break}return U([ge,we])}function C(j,ue){switch(ue.format){case"hsvArray":return j;case"hslArray":return te(j);case"hsl":var me=te(j);return"hsl("+me[0]+", "+me[1]+"%, "+me[2]+"%)";case"hsla":var ge=te(j),xe=ue.alpha||Math.random();return"hsla("+ge[0]+", "+ge[1]+"%, "+ge[2]+"%, "+xe+")";case"rgbArray":return $(j);case"rgb":var we=$(j);return"rgb("+we.join(", ")+")";case"rgba":var Ee=$(j),xe=ue.alpha||Math.random();return"rgba("+Ee.join(", ")+", "+xe+")";default:return G(j)}}function M(j,ue){for(var me=R(j).lowerBounds,ge=0;ge<me.length-1;ge++){var we=me[ge][0],Ee=me[ge][1],xe=me[ge+1][0],We=me[ge+1][1];if(ue>=we&&ue<=xe){var be=(We-Ee)/(xe-we),rt=Ee-be*we;return be*ue+rt}}return 0}function B(j){if(typeof parseInt(j)=="number"){var ue=parseInt(j);if(ue<360&&ue>0)return[ue,ue]}if(typeof j=="string"){if(r[j]){var me=r[j];if(me.hueRange)return me.hueRange}else if(j.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ge=oe(j)[0];return[ge,ge]}}return[0,360]}function D(j){return R(j).saturationRange}function R(j){j>=334&&j<=360&&(j-=360);for(var ue in r){var me=r[ue];if(me.hueRange&&j>=me.hueRange[0]&&j<=me.hueRange[1])return r[ue]}return"Color not found"}function U(j){if(t===null){var ue=.618033988749895,me=Math.random();return me+=ue,me%=1,Math.floor(j[0]+me*(j[1]+1-j[0]))}else{var ge=j[1]||1,we=j[0]||0;t=(t*9301+49297)%233280;var Ee=t/233280;return Math.floor(we+Ee*(ge-we))}}function G(j){var ue=$(j);function me(we){var Ee=we.toString(16);return Ee.length==1?"0"+Ee:Ee}var ge="#"+me(ue[0])+me(ue[1])+me(ue[2]);return ge}function W(j,ue,me){var ge=me[0][0],we=me[me.length-1][0],Ee=me[me.length-1][1],xe=me[0][1];r[j]={hueRange:ue,lowerBounds:me,saturationRange:[ge,we],brightnessRange:[Ee,xe]}}function J(){W("monochrome",null,[[0,0],[100,0]]),W("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),W("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),W("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),W("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),W("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),W("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),W("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function $(j){var ue=j[0];ue===0&&(ue=1),ue===360&&(ue=359),ue=ue/360;var me=j[1]/100,ge=j[2]/100,we=Math.floor(ue*6),Ee=ue*6-we,xe=ge*(1-me),We=ge*(1-Ee*me),be=ge*(1-(1-Ee)*me),rt=256,Ct=256,at=256;switch(we){case 0:rt=ge,Ct=be,at=xe;break;case 1:rt=We,Ct=ge,at=xe;break;case 2:rt=xe,Ct=ge,at=be;break;case 3:rt=xe,Ct=We,at=ge;break;case 4:rt=be,Ct=xe,at=ge;break;case 5:rt=ge,Ct=xe,at=We;break}var Je=[Math.floor(rt*255),Math.floor(Ct*255),Math.floor(at*255)];return Je}function oe(j){j=j.replace(/^#/,""),j=j.length===3?j.replace(/(.)/g,"$1$1"):j;var ue=parseInt(j.substr(0,2),16)/255,me=parseInt(j.substr(2,2),16)/255,ge=parseInt(j.substr(4,2),16)/255,we=Math.max(ue,me,ge),Ee=we-Math.min(ue,me,ge),xe=we?Ee/we:0;switch(we){case ue:return[60*((me-ge)/Ee%6)||0,xe,we];case me:return[60*((ge-ue)/Ee+2)||0,xe,we];case ge:return[60*((ue-me)/Ee+4)||0,xe,we]}}function te(j){var ue=j[0],me=j[1]/100,ge=j[2]/100,we=(2-me)*ge;return[ue,Math.round(me*ge/(we<1?we:2-we)*1e4)/100,we/2*100]}function H(j){for(var ue=0,me=0;me!==j.length&&!(ue>=Number.MAX_SAFE_INTEGER);me++)ue+=j.charCodeAt(me);return ue}function re(j){if(isNaN(j)){if(typeof j=="string"){if(r[j]){var me=r[j];if(me.hueRange)return me.hueRange}else if(j.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ge=oe(j)[0];return R(ge).hueRange}}}else{var ue=parseInt(j);if(ue<360&&ue>0)return R(j).hueRange}return[0,360]}return s})}(Wv,Wv.exports)),Wv.exports}var UV=LV(),zV=aU(UV);function NV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${zV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var GV={brightColor:NV};function jV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function WV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class cO{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!BV(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();jV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const l=this.options.renderPopup(s);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof cO))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:GV.brightColor,buildInspectStyle:T7.generateInspectStyle,renderPopup:FV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new TV({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=T7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(WV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var Qv={exports:{}},QV=Qv.exports,P7;function YV(){return P7||(P7=1,function(n,e){(function(t,r){{var i=r();n&&n.exports&&(e=n.exports=i),e.randomColor=i}})(QV,function(){var t=null,r={};J();var i=[],s=function(j){if(j=j||{},j.seed!==void 0&&j.seed!==null&&j.seed===parseInt(j.seed,10))t=j.seed;else if(typeof j.seed=="string")t=H(j.seed);else{if(j.seed!==void 0&&j.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ue,me,ge;if(j.count!==null&&j.count!==void 0){for(var we=j.count,Ee=[],xe=0;xe<j.count;xe++)i.push(!1);for(j.count=null;we>Ee.length;){var We=s(j);t!==null&&(j.seed=t),Ee.push(We)}return j.count=we,Ee}return ue=l(j),me=o(ue,j),ge=f(ue,me,j),C([ue,me,ge],j)};function l(j){if(i.length>0){var ue=re(j.hue),me=U(ue),ge=(ue[1]-ue[0])/i.length,we=parseInt((me-ue[0])/ge);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var Ee=(ue[0]+we*ge)%359,xe=(ue[0]+(we+1)*ge)%359;return ue=[Ee,xe],me=U(ue),me<0&&(me=360+me),me}else{var ue=B(j.hue);return me=U(ue),me<0&&(me=360+me),me}}function o(j,ue){if(ue.hue==="monochrome")return 0;if(ue.luminosity==="random")return U([0,100]);var me=D(j),ge=me[0],we=me[1];switch(ue.luminosity){case"bright":ge=55;break;case"dark":ge=we-10;break;case"light":we=55;break}return U([ge,we])}function f(j,ue,me){var ge=M(j,ue),we=100;switch(me.luminosity){case"dark":we=ge+20;break;case"light":ge=(we+ge)/2;break;case"random":ge=0,we=100;break}return U([ge,we])}function C(j,ue){switch(ue.format){case"hsvArray":return j;case"hslArray":return te(j);case"hsl":var me=te(j);return"hsl("+me[0]+", "+me[1]+"%, "+me[2]+"%)";case"hsla":var ge=te(j),xe=ue.alpha||Math.random();return"hsla("+ge[0]+", "+ge[1]+"%, "+ge[2]+"%, "+xe+")";case"rgbArray":return $(j);case"rgb":var we=$(j);return"rgb("+we.join(", ")+")";case"rgba":var Ee=$(j),xe=ue.alpha||Math.random();return"rgba("+Ee.join(", ")+", "+xe+")";default:return G(j)}}function M(j,ue){for(var me=R(j).lowerBounds,ge=0;ge<me.length-1;ge++){var we=me[ge][0],Ee=me[ge][1],xe=me[ge+1][0],We=me[ge+1][1];if(ue>=we&&ue<=xe){var be=(We-Ee)/(xe-we),rt=Ee-be*we;return be*ue+rt}}return 0}function B(j){if(typeof parseInt(j)=="number"){var ue=parseInt(j);if(ue<360&&ue>0)return[ue,ue]}if(typeof j=="string"){if(r[j]){var me=r[j];if(me.hueRange)return me.hueRange}else if(j.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ge=oe(j)[0];return[ge,ge]}}return[0,360]}function D(j){return R(j).saturationRange}function R(j){j>=334&&j<=360&&(j-=360);for(var ue in r){var me=r[ue];if(me.hueRange&&j>=me.hueRange[0]&&j<=me.hueRange[1])return r[ue]}return"Color not found"}function U(j){if(t===null){var ue=.618033988749895,me=Math.random();return me+=ue,me%=1,Math.floor(j[0]+me*(j[1]+1-j[0]))}else{var ge=j[1]||1,we=j[0]||0;t=(t*9301+49297)%233280;var Ee=t/233280;return Math.floor(we+Ee*(ge-we))}}function G(j){var ue=$(j);function me(we){var Ee=we.toString(16);return Ee.length==1?"0"+Ee:Ee}var ge="#"+me(ue[0])+me(ue[1])+me(ue[2]);return ge}function W(j,ue,me){var ge=me[0][0],we=me[me.length-1][0],Ee=me[me.length-1][1],xe=me[0][1];r[j]={hueRange:ue,lowerBounds:me,saturationRange:[ge,we],brightnessRange:[Ee,xe]}}function J(){W("monochrome",null,[[0,0],[100,0]]),W("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),W("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),W("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),W("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),W("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),W("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),W("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function $(j){var ue=j[0];ue===0&&(ue=1),ue===360&&(ue=359),ue=ue/360;var me=j[1]/100,ge=j[2]/100,we=Math.floor(ue*6),Ee=ue*6-we,xe=ge*(1-me),We=ge*(1-Ee*me),be=ge*(1-(1-Ee)*me),rt=256,Ct=256,at=256;switch(we){case 0:rt=ge,Ct=be,at=xe;break;case 1:rt=We,Ct=ge,at=xe;break;case 2:rt=xe,Ct=ge,at=be;break;case 3:rt=xe,Ct=We,at=ge;break;case 4:rt=be,Ct=xe,at=ge;break;case 5:rt=ge,Ct=xe,at=We;break}var Je=[Math.floor(rt*255),Math.floor(Ct*255),Math.floor(at*255)];return Je}function oe(j){j=j.replace(/^#/,""),j=j.length===3?j.replace(/(.)/g,"$1$1"):j;var ue=parseInt(j.substr(0,2),16)/255,me=parseInt(j.substr(2,2),16)/255,ge=parseInt(j.substr(4,2),16)/255,we=Math.max(ue,me,ge),Ee=we-Math.min(ue,me,ge),xe=we?Ee/we:0;switch(we){case ue:return[60*((me-ge)/Ee%6)||0,xe,we];case me:return[60*((ge-ue)/Ee+2)||0,xe,we];case ge:return[60*((ue-me)/Ee+4)||0,xe,we]}}function te(j){var ue=j[0],me=j[1]/100,ge=j[2]/100,we=(2-me)*ge;return[ue,Math.round(me*ge/(we<1?we:2-we)*1e4)/100,we/2*100]}function H(j){for(var ue=0,me=0;me!==j.length&&!(ue>=Number.MAX_SAFE_INTEGER);me++)ue+=j.charCodeAt(me);return ue}function re(j){if(isNaN(j)){if(typeof j=="string"){if(r[j]){var me=r[j];if(me.hueRange)return me.hueRange}else if(j.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ge=oe(j)[0];return R(ge).hueRange}}}else{var ue=parseInt(j);if(ue<360&&ue>0)return R(j).hueRange}return[0,360]}return s})}(Qv,Qv.exports)),Qv.exports}var qV=YV();const $V=yA(qV);function VV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${$V({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const lU={brightColor:VV};var P4={exports:{}},R4,R7;function HV(){if(R7)return R4;R7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return R4=n,R4}var D4,D7;function ZV(){if(D7)return D4;D7=1;var n=HV();function e(){}function t(){}return t.resetWarningCache=e,D4=function(){function r(l,o,f,C,M,B){if(B!==n){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},D4}var F7;function gm(){return F7||(F7=1,P4.exports=ZV()()),P4.exports}var XV=gm();const vi=yA(XV);var K7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function JV(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var V0=function(e,t){var r=e.children,i=e.color,s=e.size,l=e.style,o=e.width,f=e.height,C=JV(e,["children","color","size","style","width","height"]),M=t.reactIconBase,B=M===void 0?{}:M,D=s||B.size||"1em";return Fn.createElement("svg",K7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:f||D,width:o||D},B,C,{style:K7({verticalAlign:"middle",color:i||B.color},B.style||{},l)}))};V0.propTypes={color:vi.string,size:vi.oneOfType([vi.string,vi.number]),width:vi.oneOfType([vi.string,vi.number]),height:vi.oneOfType([vi.string,vi.number]),style:vi.object};V0.contextTypes={reactIconBase:vi.shape(V0.propTypes)};function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return O2=function(){return l},l}O2();class eH extends Fn.Component{render(){return O2().f[0]++,O2().s[0]++,le.jsx(V0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function I2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return I2=function(){return l},l}I2();class yb extends Fn.Component{render(){return I2().f[0]++,I2().s[0]++,le.jsx(V0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function T2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return T2=function(){return l},l}T2();class tH extends Fn.Component{render(){return T2().f[0]++,T2().s[0]++,le.jsx(V0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:le.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function k2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return k2=function(){return l},l}k2();class L7 extends Fn.Component{render(){return k2().f[0]++,k2().s[0]++,le.jsx(V0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function P2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return P2=function(){return l},l}P2();class nH extends Fn.Component{render(){return P2().f[0]++,P2().s[0]++,le.jsx(V0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function Yy(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function rH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function iH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function oH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function sH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function aH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function lH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function AH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function uH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function cH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function AU(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function hH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function R6(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function dH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function fH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function pH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function U7(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function mH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function gH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function yH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function vH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function CH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function _H(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function bH(n){return Vl({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function R2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return R2=function(){return l},l}R2();class xH extends Fn.Component{render(){return R2().f[0]++,R2().s[0]++,le.jsx(bH,{...this.props})}}function kl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return kl=function(){return l},l}kl();class uU extends Fn.Component{render(){kl().f[0]++;const e=(kl().s[0]++,{style:this.props.style});switch(kl().s[1]++,this.props.type){case"fill-extrusion":return kl().b[0][0]++,kl().s[2]++,le.jsx(L7,{...e});case"raster":return kl().b[0][1]++,kl().s[3]++,le.jsx(yb,{...e});case"hillshade":return kl().b[0][2]++,kl().s[4]++,le.jsx(yb,{...e});case"heatmap":return kl().b[0][3]++,kl().s[5]++,le.jsx(yb,{...e});case"fill":return kl().b[0][4]++,kl().s[6]++,le.jsx(yb,{...e});case"background":return kl().b[0][5]++,kl().s[7]++,le.jsx(L7,{...e});case"line":return kl().b[0][6]++,kl().s[8]++,le.jsx(eH,{...e});case"symbol":return kl().b[0][7]++,kl().s[9]++,le.jsx(tH,{...e});case"circle":return kl().b[0][8]++,kl().s[10]++,le.jsx(nH,{...e});default:return kl().b[0][9]++,kl().s[11]++,le.jsx(xH,{...e})}}}function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vr=function(){return l},l}Vr();function MH(n){Vr().f[0]++;const e=(Vr().s[0]++,{}),t=(Vr().s[1]++,{});return Vr().s[2]++,n.forEach(r=>{Vr().f[1]++;const i=(Vr().s[3]++,r.layer["source-layer"]);if(Vr().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){Vr().b[0][0]++,Vr().s[5]++,t[r.layer.id]++;const s=(Vr().s[6]++,e[i].find(l=>(Vr().f[2]++,Vr().s[7]++,l.layer.id===r.layer.id)));Vr().s[8]++,s.counter=t[r.layer.id]}else Vr().b[0][1]++,Vr().s[9]++,e[i]=(Vr().b[1][0]++,e[i]||(Vr().b[1][1]++,[])),Vr().s[10]++,e[i].push(r),Vr().s[11]++,t[r.layer.id]=1}),Vr().s[12]++,e}class cU extends Fn.Component{_getFeatureColor(e,t){if(Vr().f[3]++,Vr().s[13]++,e.layer.paint)Vr().b[2][1]++;else{Vr().b[2][0]++,Vr().s[14]++;return}Vr().s[15]++;try{const r=(Vr().s[16]++,e.layer.paint);return Vr().s[17]++,Vr().b[4][0]++,"text-color"in r&&(Vr().b[4][1]++,r["text-color"])?(Vr().b[3][0]++,Vr().s[18]++,String(r["text-color"])):(Vr().b[3][1]++,Vr().s[19]++,Vr().b[6][0]++,"fill-color"in r&&(Vr().b[6][1]++,r["fill-color"])?(Vr().b[5][0]++,Vr().s[20]++,String(r["fill-color"])):(Vr().b[5][1]++,Vr().s[21]++,Vr().b[8][0]++,"line-color"in r&&(Vr().b[8][1]++,r["line-color"])?(Vr().b[7][0]++,Vr().s[22]++,String(r["line-color"])):(Vr().b[7][1]++,Vr().s[23]++,Vr().b[10][0]++,"fill-extrusion-color"in r&&(Vr().b[10][1]++,r["fill-extrusion-color"])?(Vr().b[9][0]++,Vr().s[24]++,String(r["fill-extrusion-color"])):(Vr().b[9][1]++,Vr().s[25]++,"black"))))}catch(r){return Vr().s[26]++,console.warn("Unable to get feature color, error:",r),Vr().s[27]++,"black"}}render(){Vr().f[4]++;const e=(Vr().s[28]++,MH(this.props.features)),t=(Vr().s[29]++,Object.keys(e).map(r=>{Vr().f[5]++;const i=(Vr().s[30]++,e[r].map((s,l)=>{Vr().f[6]++;const o=(Vr().s[31]++,this._getFeatureColor(s,this.props.zoom));return Vr().s[32]++,le.jsxs("div",{className:"maputnik-popup-layer",children:[le.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),le.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Vr().f[7]++,Vr().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(Vr().b[11][0]++,s.layer.type&&(Vr().b[11][1]++,le.jsx(uU,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(Vr().b[12][0]++,s.counter&&(Vr().b[12][1]++,le.jsxs("span",{children:["  ",s.counter]})))]})]},l)}));return Vr().s[34]++,le.jsxs("div",{children:[le.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return Vr().s[35]++,le.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Zi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zi=function(){return l},l}Zi();function z7(n){return Zi().f[0]++,Zi().s[0]++,Zi().b[1][0]++,typeof n>"u"||(Zi().b[1][1]++,n===null)?(Zi().b[0][0]++,Zi().s[1]++,n):(Zi().b[0][1]++,Zi().s[2]++,n instanceof Date?(Zi().b[2][0]++,Zi().s[3]++,n.toLocaleString()):(Zi().b[2][1]++,Zi().s[4]++,Zi().b[4][0]++,typeof n=="object"||(Zi().b[4][1]++,typeof n=="number")||(Zi().b[4][2]++,typeof n=="string")?(Zi().b[3][0]++,Zi().s[5]++,n.toString()):(Zi().b[3][1]++,Zi().s[6]++,n)))}function F4(n,e){return Zi().f[1]++,Zi().s[7]++,le.jsxs("tr",{children:[le.jsx("td",{className:"maputnik-popup-table-cell",children:n}),le.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function wH(n,e){return Zi().f[2]++,Zi().s[8]++,le.jsxs(Fn.Fragment,{children:[le.jsx("tr",{children:le.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Zi().b[5][0]++,n.inspectModeCounter&&(Zi().b[5][1]++,le.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),F4("$type",n.geometry.type),F4("$id",z7(n.id)),Object.keys(n.properties).map(t=>{Zi().f[3]++;const r=(Zi().s[9]++,n.properties[t]);return Zi().s[10]++,F4(t,z7(r))})]},e)}function SH(n){Zi().f[4]++;const e=(Zi().s[11]++,[]);return Zi().s[12]++,n.forEach(t=>{Zi().f[5]++;const r=(Zi().s[13]++,e.findIndex(i=>(Zi().f[6]++,Zi().s[14]++,Zi().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Zi().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Zi().s[15]++,r===-1?(Zi().b[7][0]++,Zi().s[16]++,e.push(t)):(Zi().b[7][1]++,Zi().s[17]++,"inspectModeCounter"in e[r]?(Zi().b[8][0]++,Zi().s[18]++,e[r].inspectModeCounter++):(Zi().b[8][1]++,Zi().s[19]++,e[r].inspectModeCounter=2))}),Zi().s[20]++,e}class EH extends Fn.Component{render(){Zi().f[7]++;const e=(Zi().s[21]++,SH(this.props.features));return Zi().s[22]++,le.jsx("div",{className:"maputnik-feature-property-popup",children:le.jsx("table",{className:"maputnik-popup-table",children:le.jsx("tbody",{children:e.map(wH)})})})}}const dC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},hU=Object.create(null);for(const n in dC)Object.hasOwn(dC,n)&&(hU[dC[n]]=n);const Ju={to:{},get:{}};Ju.get=function(n){const e=n.slice(0,3).toLowerCase();let t,r;switch(e){case"hsl":{t=Ju.get.hsl(n),r="hsl";break}case"hwb":{t=Ju.get.hwb(n),r="hwb";break}default:{t=Ju.get.rgb(n),r="rgb";break}}return t?{model:r,value:t}:null};Ju.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/;let l=[0,0,0,1],o,f,C;if(o=n.match(t)){for(C=o[2],o=o[1],f=0;f<3;f++){const M=f*2;l[f]=Number.parseInt(o.slice(M,M+2),16)}C&&(l[3]=Number.parseInt(C,16)/255)}else if(o=n.match(e)){for(o=o[1],C=o[3],f=0;f<3;f++)l[f]=Number.parseInt(o[f]+o[f],16);C&&(l[3]=Number.parseInt(C+C,16)/255)}else if(o=n.match(r)){for(f=0;f<3;f++)l[f]=Number.parseInt(o[f+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(i)){for(f=0;f<3;f++)l[f]=Math.round(Number.parseFloat(o[f+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(s))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(dC,o[1])?(l=dC[o[1]],l[3]=1,l):null:null;for(f=0;f<3;f++)l[f]=j0(l[f],0,255);return l[3]=j0(l[3],0,1),l};Ju.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=j0(Number.parseFloat(t[2]),0,100),l=j0(Number.parseFloat(t[3]),0,100),o=j0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};Ju.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=j0(Number.parseFloat(t[2]),0,100),l=j0(Number.parseFloat(t[3]),0,100),o=j0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};Ju.to.hex=function(...n){return"#"+vb(n[0])+vb(n[1])+vb(n[2])+(n[3]<1?vb(Math.round(n[3]*255)):"")};Ju.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};Ju.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};Ju.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};Ju.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};Ju.to.keyword=function(...n){return hU[n.slice(0,3)]};function j0(n,e,t){return Math.min(Math.max(e,n),t)}function vb(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const DC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},dU={};for(const n of Object.keys(DC))dU[DC[n]]=n;const Ai={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},jm=(6/29)**3;for(const n of Object.keys(Ai)){if(!("channels"in Ai[n]))throw new Error("missing channels property: "+n);if(!("labels"in Ai[n]))throw new Error("missing channel labels property: "+n);if(Ai[n].labels.length!==Ai[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=Ai[n];delete Ai[n].channels,delete Ai[n].labels,Object.defineProperty(Ai[n],"channels",{value:e}),Object.defineProperty(Ai[n],"labels",{value:t})}Ai.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),l=s-i;let o,f;switch(s){case i:{o=0;break}case e:{o=(t-r)/l;break}case t:{o=2+(r-e)/l;break}case r:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const C=(i+s)/2;return s===i?f=0:C<=.5?f=l/(s+i):f=l/(2-s-i),[o,f*100,C*100]};Ai.rgb.hsv=function(n){let e,t,r,i,s;const l=n[0]/255,o=n[1]/255,f=n[2]/255,C=Math.max(l,o,f),M=C-Math.min(l,o,f),B=function(D){return(C-D)/6/M+1/2};if(M===0)i=0,s=0;else{switch(s=M/C,e=B(l),t=B(o),r=B(f),C){case l:{i=r-t;break}case o:{i=1/3+e-r;break}case f:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,C*100]};Ai.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=Ai.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};Ai.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,l=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0;return[s*100,l*100,o*100,i*100]};function BH(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}Ai.rgb.keyword=function(n){const e=dU[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(DC)){const s=DC[i],l=BH(n,s);l<t&&(t=l,r=i)}return r};Ai.keyword.rgb=function(n){return DC[n]};Ai.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,l=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,l*100]};Ai.rgb.lab=function(n){const e=Ai.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>jm?t**(1/3):7.787*t+16/116,r=r>jm?r**(1/3):7.787*r+16/116,i=i>jm?i**(1/3):7.787*i+16/116;const s=116*r-16,l=500*(t-r),o=200*(r-i);return[s,l,o]};Ai.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const l=r<.5?r*(1+t):r+t-r*t,o=2*r-l,f=[0,0,0];for(let C=0;C<3;C++)i=e+1/3*-(C-1),i<0&&i++,i>1&&i--,6*i<1?s=o+(l-o)*6*i:2*i<1?s=l:3*i<2?s=o+(l-o)*(2/3-i)*6:s=o,f[C]=s*255;return f};Ai.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const l=(r+t)/2,o=r===0?2*i/(s+i):2*t/(r+t);return[e,o*100,l*100]};Ai.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),l=255*r*(1-t),o=255*r*(1-t*s),f=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,f,l];case 1:return[o,r,l];case 2:return[l,r,f];case 3:return[l,o,r];case 4:return[f,l,r];case 5:return[r,l,o]}};Ai.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,l;l=(2-t)*r;const o=(2-t)*i;return s=t*i,s/=o<=1?o:2-o,s=s||0,l/=2,[e,s*100,l*100]};Ai.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const l=Math.floor(6*e),o=1-r;s=6*e-l,(l&1)!==0&&(s=1-s);const f=t+s*(o-t);let C,M,B;switch(l){default:case 6:case 0:{C=o,M=f,B=t;break}case 1:{C=f,M=o,B=t;break}case 2:{C=t,M=o,B=f;break}case 3:{C=t,M=f,B=o;break}case 4:{C=f,M=t,B=o;break}case 5:{C=o,M=t,B=f;break}}return[C*255,M*255,B*255]};Ai.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),l=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i);return[s*255,l*255,o*255]};Ai.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,l;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,l=e*.0556434+t*-.2040259+r*1.0572252,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),[i*255,s*255,l*255]};Ai.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>jm?e**(1/3):7.787*e+16/116,t=t>jm?t**(1/3):7.787*t+16/116,r=r>jm?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),l=200*(t-r);return[i,s,l]};Ai.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,l;s=(e+16)/116,i=t/500+s,l=s-r/200;const o=s**3,f=i**3,C=l**3;return s=o>jm?o:(s-16/116)/7.787,i=f>jm?f:(i-16/116)/7.787,l=C>jm?C:(l-16/116)/7.787,i*=95.047,s*=100,l*=108.883,[i,s,l]};Ai.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const l=Math.sqrt(t*t+r*r);return[e,l,i]};Ai.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),l=t*Math.sin(i);return[e,s,l]};Ai.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?Ai.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let l=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(l+=60),l};Ai.hsv.ansi16=function(n){return Ai.rgb.ansi16(Ai.hsv.rgb(n),n[2])};Ai.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};Ai.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};Ai.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};Ai.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};Ai.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,l=r&255;return[i,s,l]};Ai.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),l=i-s;let o;const f=l<1?s/(1-l):0;return l<=0?o=0:i===e?o=(t-r)/l%6:i===t?o=2+(r-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,f*100]};Ai.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};Ai.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};Ai.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,l=s%1,o=1-l;let f=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=l,i[2]=0;break}case 1:{i[0]=o,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=l;break}case 3:{i[0]=0,i[1]=o,i[2]=1;break}case 4:{i[0]=l,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=o}return f=(1-t)*r,[(t*i[0]+f)*255,(t*i[1]+f)*255,(t*i[2]+f)*255]};Ai.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};Ai.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};Ai.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};Ai.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};Ai.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};Ai.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};Ai.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};Ai.gray.hsl=function(n){return[0,0,n[0]]};Ai.gray.hsv=Ai.gray.hsl;Ai.gray.hwb=function(n){return[0,100,n[0]]};Ai.gray.cmyk=function(n){return[0,0,0,n[0]]};Ai.gray.lab=function(n){return[n[0],0,0]};Ai.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};Ai.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function OH(){const n={},e=Object.keys(Ai);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function IH(n){const e=OH(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(Ai[r]);for(let{length:s}=i,l=0;l<s;l++){const o=i[l],f=e[o];f.distance===-1&&(f.distance=e[r].distance+1,f.parent=r,t.unshift(o))}}return e}function TH(n,e){return function(t){return e(n(t))}}function kH(n,e){const t=[e[n].parent,n];let r=Ai[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=TH(Ai[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function PH(n){const e=IH(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const l=r[s];e[l].parent!==null&&(t[l]=kH(l,e))}return t}const Mc={},RH=Object.keys(Ai);function DH(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function FH(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,l=0;l<s;l++)i[l]=Math.round(i[l]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of RH){Mc[n]={},Object.defineProperty(Mc[n],"channels",{value:Ai[n].channels}),Object.defineProperty(Mc[n],"labels",{value:Ai[n].labels});const e=PH(n),t=Object.keys(e);for(const r of t){const i=e[r];Mc[n][r]=FH(i),Mc[n][r].raw=DH(i)}}const fU=["keyword","gray","hex"],D6={};for(const n of Object.keys(Mc))D6[[...Mc[n].labels].sort().join("")]=n;const F6={};function ku(n,e){if(!(this instanceof ku))return new ku(n,e);if(e&&e in fU&&(e=null),e&&!(e in Mc))throw new Error("Unknown model: "+e);let t,r;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof ku)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const i=Ju.get(n);if(i===null)throw new Error("Unable to parse color from string: "+n);this.model=i.model,r=Mc[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(n.length>0){this.model=e||"rgb",r=Mc[this.model].channels;const i=Array.prototype.slice.call(n,0,r);this.color=K6(i,r),this.valpha=typeof n[r]=="number"?n[r]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(n);"alpha"in n&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const s=i.sort().join("");if(!(s in D6))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=D6[s];const{labels:l}=Mc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=K6(o)}if(F6[this.model])for(r=Mc[this.model].channels,t=0;t<r;t++){const i=F6[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ku.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in Ju.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return Ju.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return Ju.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Mc[this.model],{labels:t}=Mc[this.model];for(let r=0;r<e;r++)n[t[r]]=this.color[r];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new ku([...this.color.map(LH(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new ku([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:UA("rgb",0,Vu(255)),green:UA("rgb",1,Vu(255)),blue:UA("rgb",2,Vu(255)),hue:UA(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:UA("hsl",1,Vu(100)),lightness:UA("hsl",2,Vu(100)),saturationv:UA("hsv",1,Vu(100)),value:UA("hsv",2,Vu(100)),chroma:UA("hcg",1,Vu(100)),gray:UA("hcg",2,Vu(100)),white:UA("hwb",1,Vu(100)),wblack:UA("hwb",2,Vu(100)),cyan:UA("cmyk",0,Vu(100)),magenta:UA("cmyk",1,Vu(100)),yellow:UA("cmyk",2,Vu(100)),black:UA("cmyk",3,Vu(100)),x:UA("xyz",0,Vu(95.047)),y:UA("xyz",1,Vu(100)),z:UA("xyz",2,Vu(108.833)),l:UA("lab",0,Vu(100)),a:UA("lab",1),b:UA("lab",2),keyword(n){return n!==void 0?new ku(n):Mc[this.model].keyword(this.color)},hex(n){return n!==void 0?new ku(n):Ju.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new ku(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),Ju.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,r]of n.entries()){const i=r/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return ku.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,l=t.alpha()-r.alpha(),o=((s*l===-1?s:(s+l)/(1+s*l))+1)/2,f=1-o;return ku.rgb(o*t.red()+f*r.red(),o*t.green()+f*r.green(),o*t.blue()+f*r.blue(),t.alpha()*i+r.alpha()*(1-i))}};for(const n of Object.keys(Mc)){if(fU.includes(n))continue;const{channels:e}=Mc[n];ku.prototype[n]=function(...t){return this.model===n?new ku(this):t.length>0?new ku(t,n):new ku([...UH(Mc[this.model][n].raw(this.color)),this.valpha],n)},ku[n]=function(...t){let r=t[0];return typeof r=="number"&&(r=K6(t,e)),new ku(r,n)}}function KH(n,e){return Number(n.toFixed(e))}function LH(n){return function(e){return KH(e,n)}}function UA(n,e,t){n=Array.isArray(n)?n:[n];for(const r of n)(F6[r]||=[])[e]=t;return n=n[0],function(r){let i;return r!==void 0?(t&&(r=t(r)),i=this[n](),i.color[e]=r,i):(i=this[n]().color[e],t&&(i=t(i)),i)}}function Vu(n){return function(e){return Math.max(0,Math.min(n,e))}}function UH(n){return Array.isArray(n)?n:[n]}function K6(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function Vs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vs=function(){return l},l}Vs();class zH{_map=(Vs().s[0]++,void 0);_container=(Vs().s[1]++,void 0);_textEl=(Vs().s[2]++,null);constructor(){Vs().f[0]++}onAdd(e){return Vs().f[1]++,Vs().s[3]++,this._map=e,Vs().s[4]++,this._container=document.createElement("div"),Vs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Vs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Vs().s[7]++,this.setLabel("Zoom:"),Vs().s[8]++,this.addEventListeners(),Vs().s[9]++,this._container}updateZoomLevel(){Vs().f[2]++,Vs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Vs().f[3]++,Vs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Vs().s[12]++,this._textEl=this._container.querySelector("span"),Vs().s[13]++,this.updateZoomLevel()}addEventListeners(){Vs().f[4]++,Vs().s[14]++,this._map.on("render",()=>(Vs().f[5]++,Vs().s[15]++,this.updateZoomLevel())),Vs().s[16]++,this._map.on("zoomIn",()=>(Vs().f[6]++,Vs().s[17]++,this.updateZoomLevel())),Vs().s[18]++,this._map.on("zoomOut",()=>(Vs().f[7]++,Vs().s[19]++,this.updateZoomLevel()))}onRemove(){Vs().f[8]++,Vs().s[20]++,this._container.parentNode.removeChild(this._container),Vs().s[21]++,this._map=void 0}}function L6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function U6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function z6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function NH(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const f=s(l);r.push(L6(f.circle,l)),i.push(z6(f.line,l)),t.push(U6(f.polygon,f.polygonOutline,l))}else o.forEach(f=>{const C=s(f);r.push(L6(C.circle,l,f)),i.push(z6(C.line,l,f)),t.push(U6(C.polygon,C.polygonOutline,l,f))})}),t.concat(i).concat(r)}function GH(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const K4={polygonLayer:U6,lineLayer:z6,circleLayer:L6,generateInspectStyle:GH,generateColoredLayers:NH};function po(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return po=function(){return l},l}po();function L4(n,e){return po().f[0]++,po().s[0]++,n.type==="circle"?(po().b[0][0]++,po().s[1]++,n.paint["circle-radius"]=3):(po().b[0][1]++,po().s[2]++,n.type==="line"?(po().b[1][0]++,po().s[3]++,n.paint["line-width"]=2):po().b[1][1]++),po().s[4]++,"filter"in e?(po().b[2][0]++,po().s[5]++,n.filter=e.filter):(po().b[2][1]++,po().s[6]++,delete n.filter),po().s[7]++,n.id=n.id+"_highlight",po().s[8]++,n}function jH(n){if(po().f[1]++,po().s[9]++,po().b[4][0]++,!n||(po().b[4][1]++,n.type==="background")||(po().b[4][2]++,n.type==="raster"))return po().b[3][0]++,po().s[10]++,null;po().b[3][1]++;const e=(po().s[11]++,po().b[5][0]++,n["source-layer"]||(po().b[5][1]++,"")),t=(po().s[12]++,lU.brightColor(e,1));return po().s[13]++,po().b[7][0]++,n.type==="fill"||(po().b[7][1]++,n.type==="fill-extrusion")?(po().b[6][0]++,po().s[14]++,L4(K4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(po().b[6][1]++,po().s[15]++,po().b[9][0]++,n.type==="symbol"||(po().b[9][1]++,n.type==="circle")?(po().b[8][0]++,po().s[16]++,L4(K4.circleLayer(t,n.source,n["source-layer"]),n)):(po().b[8][1]++,po().s[17]++,n.type==="line"?(po().b[10][0]++,po().s[18]++,L4(K4.lineLayer(t,n.source,n["source-layer"]),n)):(po().b[10][1]++,po().s[19]++,null)))}function hO(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hO=function(){return l},l}hO();hO().s[0]++;sy.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function U4(n,e,t,r){function i(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function o(M){try{C(r.next(M))}catch(B){l(B)}}function f(M){try{C(r.throw(M))}catch(B){l(B)}}function C(M){M.done?s(M.value):i(M.value).then(o,f)}C((r=r.apply(n,e||[])).next())})}var Cb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function zx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var z4,N7;function pU(){if(N7)return z4;N7=1,z4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return z4}var N4={exports:{}},G7;function WH(){return G7||(G7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var l=0,o=[],f=i.length,C=0,M=0,B=s.pre||"",D=s.post||"",R=s.caseSensitive&&i||i.toLowerCase(),U;r=s.caseSensitive&&r||r.toLowerCase();for(var G=0;G<f;G++)U=i[G],R[G]===r[l]?(U=B+U+D,l+=1,M+=1+M):M=0,C+=M,o[o.length]=U;return l===r.length?(C=R===r?1/0:C,{rendered:o.join(""),score:C}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(l,o,f,C){var M=o;s.extract&&(M=s.extract(o));var B=t.match(r,M,s);return B!=null&&(l[l.length]={string:B.rendered,score:B.score,index:f,original:o}),l},[]).sort(function(l,o){var f=o.score-l.score;return f||l.index-o.index}))}})()}(N4)),N4.exports}var G4,j7;function QH(){if(j7)return G4;j7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},G4=n,G4}var j4,W7;function YH(){if(W7)return j4;W7=1;var n=pU(),e=WH(),t=QH(),r=function(i,s,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var l=0;l<s.length&&(this.list.add(s[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,s),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var f=this.render(o);return{original:o,string:f}}).bind(this)),i(l)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var l=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(l),f=o.lastIndexOf(this.query);f>-1;){var C=f+this.query.length;l=l.slice(0,f)+"<strong>"+l.slice(f,C)+"</strong>"+l.slice(C),f=o.slice(0,f).lastIndexOf(this.query)}return l},r.prototype.renderError=function(i){this.list.drawError(i)},j4=r,j4}var W4,Q7;function qH(){if(Q7)return W4;Q7=1;var n=YH();return W4=n,typeof window<"u"&&(window.Suggestions=n),W4}var $H=qH(),VH=zx($H),i2={exports:{}},HH=i2.exports,Y7;function ZH(){return Y7||(Y7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(HH,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(f){return f.match(t)||[]}function i(f){return r(f).filter(function(C,M){return C&&M})}function s(f){return f=r(f),{language:f[1]||e,extlang:f[2]||e,script:f[3]||e,region:f[4]||e}}function l(f,C,M){Object.defineProperty(f,C,{value:M,enumerable:!0})}function o(f,C,M){function B(D){return r(D)[f]||e}l(B,"pattern",C),l(s,M,B)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(s,"split",i),s})}(i2)),i2.exports}var XH=ZH(),JH=zx(XH),Q4,q7;function eZ(){if(q7)return Q4;q7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,f=typeof Cb=="object"&&Cb&&Cb.Object===Object&&Cb,C=typeof self=="object"&&self&&self.Object===Object&&self,M=f||C||Function("return this")(),B=Object.prototype,D=B.toString,R=Math.max,U=Math.min,G=function(){return M.Date.now()};function W(H,re,j){var ue,me,ge,we,Ee,xe,We=0,be=!1,rt=!1,Ct=!0;if(typeof H!="function")throw new TypeError(n);re=te(re)||0,J(j)&&(be=!!j.leading,rt="maxWait"in j,ge=rt?R(te(j.maxWait)||0,re):ge,Ct="trailing"in j?!!j.trailing:Ct);function at(Tt){var Le=ue,Pe=me;return ue=me=void 0,We=Tt,we=H.apply(Pe,Le),we}function Je(Tt){return We=Tt,Ee=setTimeout(He,re),be?at(Tt):we}function ze(Tt){var Le=Tt-xe,Pe=Tt-We,ke=re-Le;return rt?U(ke,ge-Pe):ke}function Te(Tt){var Le=Tt-xe,Pe=Tt-We;return xe===void 0||Le>=re||Le<0||rt&&Pe>=ge}function He(){var Tt=G();if(Te(Tt))return pt(Tt);Ee=setTimeout(He,ze(Tt))}function pt(Tt){return Ee=void 0,Ct&&ue?at(Tt):(ue=me=void 0,we)}function kt(){Ee!==void 0&&clearTimeout(Ee),We=0,ue=xe=me=Ee=void 0}function ft(){return Ee===void 0?we:pt(G())}function Bt(){var Tt=G(),Le=Te(Tt);if(ue=arguments,me=this,xe=Tt,Le){if(Ee===void 0)return Je(xe);if(rt)return Ee=setTimeout(He,re),at(xe)}return Ee===void 0&&(Ee=setTimeout(He,re)),we}return Bt.cancel=kt,Bt.flush=ft,Bt}function J(H){var re=typeof H;return!!H&&(re=="object"||re=="function")}function $(H){return!!H&&typeof H=="object"}function oe(H){return typeof H=="symbol"||$(H)&&D.call(H)==t}function te(H){if(typeof H=="number")return H;if(oe(H))return e;if(J(H)){var re=typeof H.valueOf=="function"?H.valueOf():H;H=J(re)?re+"":re}if(typeof H!="string")return H===0?H:+H;H=H.replace(r,"");var j=s.test(H);return j||l.test(H)?o(H.slice(2),j?2:8):i.test(H)?e:+H}return Q4=W,Q4}var tZ=eZ(),nZ=zx(tZ),rZ=pU(),gp=zx(rZ),_b={exports:{}},$7;function iZ(){if($7)return _b.exports;$7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(H,re,j){return Function.prototype.apply.call(H,re,j)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:t=function(H){return Object.getOwnPropertyNames(H)};function r(te){console&&console.warn&&console.warn(te)}var i=Number.isNaN||function(H){return H!==H};function s(){s.init.call(this)}_b.exports=s,_b.exports.once=J,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function o(te){if(typeof te!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof te)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(te){if(typeof te!="number"||te<0||i(te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+te+".");l=te}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||i(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function f(te){return te._maxListeners===void 0?s.defaultMaxListeners:te._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(H){for(var re=[],j=1;j<arguments.length;j++)re.push(arguments[j]);var ue=H==="error",me=this._events;if(me!==void 0)ue=ue&&me.error===void 0;else if(!ue)return!1;if(ue){var ge;if(re.length>0&&(ge=re[0]),ge instanceof Error)throw ge;var we=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw we.context=ge,we}var Ee=me[H];if(Ee===void 0)return!1;if(typeof Ee=="function")e(Ee,this,re);else for(var xe=Ee.length,We=U(Ee,xe),j=0;j<xe;++j)e(We[j],this,re);return!0};function C(te,H,re,j){var ue,me,ge;if(o(re),me=te._events,me===void 0?(me=te._events=Object.create(null),te._eventsCount=0):(me.newListener!==void 0&&(te.emit("newListener",H,re.listener?re.listener:re),me=te._events),ge=me[H]),ge===void 0)ge=me[H]=re,++te._eventsCount;else if(typeof ge=="function"?ge=me[H]=j?[re,ge]:[ge,re]:j?ge.unshift(re):ge.push(re),ue=f(te),ue>0&&ge.length>ue&&!ge.warned){ge.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+ge.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=te,we.type=H,we.count=ge.length,r(we)}return te}s.prototype.addListener=function(H,re){return C(this,H,re,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(H,re){return C(this,H,re,!0)};function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(te,H,re){var j={fired:!1,wrapFn:void 0,target:te,type:H,listener:re},ue=M.bind(j);return ue.listener=re,j.wrapFn=ue,ue}s.prototype.once=function(H,re){return o(re),this.on(H,B(this,H,re)),this},s.prototype.prependOnceListener=function(H,re){return o(re),this.prependListener(H,B(this,H,re)),this},s.prototype.removeListener=function(H,re){var j,ue,me,ge,we;if(o(re),ue=this._events,ue===void 0)return this;if(j=ue[H],j===void 0)return this;if(j===re||j.listener===re)--this._eventsCount===0?this._events=Object.create(null):(delete ue[H],ue.removeListener&&this.emit("removeListener",H,j.listener||re));else if(typeof j!="function"){for(me=-1,ge=j.length-1;ge>=0;ge--)if(j[ge]===re||j[ge].listener===re){we=j[ge].listener,me=ge;break}if(me<0)return this;me===0?j.shift():G(j,me),j.length===1&&(ue[H]=j[0]),ue.removeListener!==void 0&&this.emit("removeListener",H,we||re)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(H){var re,j,ue;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[H]),this;if(arguments.length===0){var me=Object.keys(j),ge;for(ue=0;ue<me.length;++ue)ge=me[ue],ge!=="removeListener"&&this.removeAllListeners(ge);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(re=j[H],typeof re=="function")this.removeListener(H,re);else if(re!==void 0)for(ue=re.length-1;ue>=0;ue--)this.removeListener(H,re[ue]);return this};function D(te,H,re){var j=te._events;if(j===void 0)return[];var ue=j[H];return ue===void 0?[]:typeof ue=="function"?re?[ue.listener||ue]:[ue]:re?W(ue):U(ue,ue.length)}s.prototype.listeners=function(H){return D(this,H,!0)},s.prototype.rawListeners=function(H){return D(this,H,!1)},s.listenerCount=function(te,H){return typeof te.listenerCount=="function"?te.listenerCount(H):R.call(te,H)},s.prototype.listenerCount=R;function R(te){var H=this._events;if(H!==void 0){var re=H[te];if(typeof re=="function")return 1;if(re!==void 0)return re.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function U(te,H){for(var re=new Array(H),j=0;j<H;++j)re[j]=te[j];return re}function G(te,H){for(;H+1<te.length;H++)te[H]=te[H+1];te.pop()}function W(te){for(var H=new Array(te.length),re=0;re<H.length;++re)H[re]=te[re].listener||te[re];return H}function J(te,H){return new Promise(function(re,j){function ue(ge){te.removeListener(H,me),j(ge)}function me(){typeof te.removeListener=="function"&&te.removeListener("error",ue),re([].slice.call(arguments))}oe(te,H,me,{once:!0}),H!=="error"&&$(te,ue,{once:!0})})}function $(te,H,re){typeof te.on=="function"&&oe(te,"error",H,re)}function oe(te,H,re,j){if(typeof te.on=="function")j.once?te.once(H,re):te.on(H,re);else if(typeof te.addEventListener=="function")te.addEventListener(H,function ue(me){j.once&&te.removeEventListener(H,ue),re(me)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof te)}return _b.exports}var oZ=iZ();const V7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},sZ={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},aZ={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados"},lZ={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor"};var Iv={placeholder:sZ,errorNoResults:aZ,errorConnectionFailed:lZ};const AZ=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class uZ{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,l=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,f=s.substring(0,l),C=s.substring(l,l+o),M=s.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+f+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+C+"</span>"+M+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new oZ.EventEmitter,this.options=gp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",nZ(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new VH(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,l=s.firstChild;r.appendChild(l)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=this._inputEl.value;if(!s)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&V7[e.properties.short_code])t=gp({},this.options.flyTo),this._map&&this._map.fitBounds(V7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=gp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=gp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return U4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),l=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const f=yield l;yield this._handleGeocodeResponse(f,s,t,r,o)}catch(f){this._handleGeocodeErrorResponse(f,o)}return l})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&AZ.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return U4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?s.concat(l.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const C=yield o;l.features=l.features?C.concat(l.features):C}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let f=[];"suggestions"in l?f=l.suggestions:"place"in l?f=[l.place]:f=l.features,f.length?(this._clearEl.style.display="block",this._typeahead.update(f),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return U4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=JH.language(this.options.language.split(",")[0]);return this.options.language&&Iv?.[e][t]?Iv[e][t]:Iv[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=gp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=gp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const l=gp({},{},this.options.popup);i=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=gp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=gp(r,{element:s}));const l=new this._maplibregl.Marker(gp({},r,{element:s}));let o;if(this.options.popup){const C=gp({},{},this.options.popup);o=new this._maplibregl.Popup(C).setHTML(this.options.popupRender(i))}i.center?(l.setLngLat(i.center).addTo(this._map),this.options.popup&&l.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(l.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="89c9406ff85b3388897c258ca0d95831105e5e92",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:15},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:44}},2:{start:{line:22,column:28},end:{line:22,column:42}},3:{start:{line:23,column:2},end:{line:23,column:28}},4:{start:{line:24,column:2},end:{line:24,column:19}},5:{start:{line:27,column:26},end:{line:33,column:3}},6:{start:{line:34,column:16},end:{line:34,column:55}},7:{start:{line:35,column:2},end:{line:37,column:3}},8:{start:{line:36,column:4},end:{line:36,column:30}},9:{start:{line:38,column:18},end:{line:38,column:20}},10:{start:{line:39,column:2},end:{line:44,column:5}},11:{start:{line:40,column:19},end:{line:40,column:53}},12:{start:{line:41,column:4},end:{line:43,column:5}},13:{start:{line:42,column:6},end:{line:42,column:33}},14:{start:{line:45,column:23},end:{line:49,column:3}},15:{start:{line:50,column:2},end:{line:50,column:22}},16:{start:{line:53,column:24},end:{line:63,column:3}},17:{start:{line:64,column:14},end:{line:64,column:18}},18:{start:{line:66,column:4},end:{line:66,column:17}},19:{start:{line:67,column:4},end:{line:72,column:6}},20:{start:{line:73,column:4},end:{line:75,column:7}},21:{start:{line:74,column:6},end:{line:74,column:25}},22:{start:{line:78,column:17},end:{line:78,column:22}},23:{start:{line:79,column:4},end:{line:82,column:5}},24:{start:{line:80,column:6},end:{line:80,column:132}},25:{start:{line:83,column:4},end:{line:83,column:18}},26:{start:{line:86,column:16},end:{line:86,column:30}},27:{start:{line:87,column:28},end:{line:87,column:79}},28:{start:{line:88,column:4},end:{line:93,column:5}},29:{start:{line:89,column:6},end:{line:89,column:52}},30:{start:{line:90,column:6},end:{line:90,column:70}},31:{start:{line:91,column:6},end:{line:91,column:70}},32:{start:{line:92,column:6},end:{line:92,column:76}},33:{start:{line:94,column:4},end:{line:96,column:5}},34:{start:{line:95,column:6},end:{line:95,column:43}},35:{start:{line:97,column:4},end:{line:102,column:5}},36:{start:{line:98,column:6},end:{line:98,column:59}},37:{start:{line:99,column:6},end:{line:101,column:14}},38:{start:{line:100,column:8},end:{line:100,column:36}},39:{start:{line:105,column:20},end:{line:114,column:5}},40:{start:{line:115,column:21},end:{line:115,column:53}},41:{start:{line:116,column:4},end:{line:116,column:53}},42:{start:{line:117,column:16},end:{line:117,column:43}},43:{start:{line:118,column:26},end:{line:122,column:5}},44:{start:{line:119,column:21},end:{line:119,column:36}},45:{start:{line:120,column:19},end:{line:120,column:32}},46:{start:{line:121,column:6},end:{line:121,column:44}},47:{start:{line:123,column:4},end:{line:123,column:20}},48:{start:{line:124,column:4},end:{line:124,column:56}},49:{start:{line:125,column:4},end:{line:125,column:56}},50:{start:{line:126,column:4},end:{line:126,column:62}},51:{start:{line:127,column:21},end:{line:127,column:43}},52:{start:{line:128,column:24},end:{line:128,column:41}},53:{start:{line:129,column:4},end:{line:129,column:45}},54:{start:{line:130,column:16},end:{line:130,column:74}},55:{start:{line:131,column:4},end:{line:131,column:37}},56:{start:{line:132,column:20},end:{line:132,column:49}},57:{start:{line:133,column:25},end:{line:135,column:6}},58:{start:{line:136,column:20},end:{line:169,column:6}},59:{start:{line:144,column:8},end:{line:144,column:82}},60:{start:{line:146,column:62},end:{line:146,column:141}},61:{start:{line:148,column:8},end:{line:167,column:9}},62:{start:{line:149,column:10},end:{line:153,column:12}},63:{start:{line:155,column:10},end:{line:166,column:12}},64:{start:{line:170,column:4},end:{line:170,column:28}},65:{start:{line:171,column:4},end:{line:179,column:7}},66:{start:{line:172,column:6},end:{line:178,column:9}},67:{start:{line:180,column:4},end:{line:185,column:7}},68:{start:{line:181,column:6},end:{line:181,column:40}},69:{start:{line:181,column:33},end:{line:181,column:40}},70:{start:{line:182,column:6},end:{line:184,column:9}},71:{start:{line:186,column:4},end:{line:188,column:7}},72:{start:{line:187,column:6},end:{line:187,column:30}},73:{start:{line:189,column:4},end:{line:193,column:7}},74:{start:{line:190,column:6},end:{line:192,column:9}},75:{start:{line:194,column:4},end:{line:194,column:37}},76:{start:{line:195,column:4},end:{line:195,column:37}},77:{start:{line:197,column:22},end:{line:200,column:3}},78:{start:{line:198,column:18},end:{line:198,column:82}},79:{start:{line:198,column:66},end:{line:198,column:81}},80:{start:{line:199,column:4},end:{line:199,column:36}},81:{start:{line:202,column:27},end:{line:235,column:5}},82:{start:{line:204,column:25},end:{line:204,column:27}},83:{start:{line:205,column:8},end:{line:230,column:9}},84:{start:{line:206,column:26},end:{line:206,column:138}},85:{start:{line:207,column:27},end:{line:207,column:47}},86:{start:{line:208,column:26},end:{line:208,column:47}},87:{start:{line:209,column:10},end:{line:227,column:11}},88:{start:{line:210,column:27},end:{line:213,column:13}},89:{start:{line:214,column:26},end:{line:225,column:13}},90:{start:{line:226,column:12},end:{line:226,column:33}},91:{start:{line:229,column:10},end:{line:229,column:69}},92:{start:{line:231,column:8},end:{line:233,column:10}},93:{start:{line:236,column:21},end:{line:239,column:6}},94:{start:{line:240,column:4},end:{line:240,column:41}},95:{start:{line:241,column:4},end:{line:241,column:20}},96:{start:{line:244,column:14},end:{line:244,column:26}},97:{start:{line:245,column:4},end:{line:245,column:53}},98:{start:{line:246,column:4},end:{line:246,column:49}},99:{start:{line:247,column:4},end:{line:256,column:6}},100:{start:{line:253,column:20},end:{line:253,column:38}},101:{start:{line:259,column:22},end:{line:259,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:53},end:{line:25,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:22,column:22},end:{line:22,column:23}},loc:{start:{line:22,column:28},end:{line:22,column:42}},line:22},2:{name:"buildInspectStyle",decl:{start:{line:26,column:9},end:{line:26,column:26}},loc:{start:{line:26,column:78},end:{line:51,column:1}},line:26},3:{name:"(anonymous_3)",decl:{start:{line:39,column:48},end:{line:39,column:49}},loc:{start:{line:39,column:62},end:{line:44,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:54,column:17},end:{line:54,column:18}},loc:{start:{line:54,column:23},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:19},end:{line:58,column:20}},loc:{start:{line:58,column:25},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:60,column:14},end:{line:60,column:15}},loc:{start:{line:60,column:20},end:{line:61,column:5}},line:60},8:{name:"(anonymous_8)",decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:21},end:{line:76,column:3}},line:65},9:{name:"(anonymous_9)",decl:{start:{line:73,column:34},end:{line:73,column:35}},loc:{start:{line:73,column:40},end:{line:75,column:5}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:46},end:{line:84,column:3}},line:77},11:{name:"(anonymous_11)",decl:{start:{line:85,column:2},end:{line:85,column:3}},loc:{start:{line:85,column:23},end:{line:103,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:99,column:17},end:{line:99,column:18}},loc:{start:{line:99,column:23},end:{line:101,column:7}},line:99},13:{name:"(anonymous_13)",decl:{start:{line:104,column:2},end:{line:104,column:3}},loc:{start:{line:104,column:22},end:{line:196,column:3}},line:104},14:{name:"(anonymous_14)",decl:{start:{line:118,column:26},end:{line:118,column:27}},loc:{start:{line:118,column:32},end:{line:122,column:5}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:44},end:{line:145,column:7}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:146,column:25},end:{line:146,column:26}},loc:{start:{line:146,column:62},end:{line:146,column:141}},line:146},17:{name:"(anonymous_17)",decl:{start:{line:147,column:19},end:{line:147,column:20}},loc:{start:{line:147,column:33},end:{line:168,column:7}},line:147},18:{name:"(anonymous_18)",decl:{start:{line:171,column:25},end:{line:171,column:26}},loc:{start:{line:171,column:31},end:{line:179,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:180,column:19},end:{line:180,column:20}},loc:{start:{line:180,column:26},end:{line:185,column:5}},line:180},20:{name:"(anonymous_20)",decl:{start:{line:186,column:20},end:{line:186,column:21}},loc:{start:{line:186,column:27},end:{line:188,column:5}},line:186},21:{name:"(anonymous_21)",decl:{start:{line:189,column:19},end:{line:189,column:20}},loc:{start:{line:189,column:27},end:{line:193,column:5}},line:189},22:{name:"(anonymous_22)",decl:{start:{line:197,column:22},end:{line:197,column:23}},loc:{start:{line:197,column:30},end:{line:200,column:3}},line:197},23:{name:"(anonymous_23)",decl:{start:{line:198,column:55},end:{line:198,column:56}},loc:{start:{line:198,column:66},end:{line:198,column:81}},line:198},24:{name:"(anonymous_24)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:20},end:{line:242,column:3}},line:201},25:{name:"(anonymous_25)",decl:{start:{line:203,column:22},end:{line:203,column:23}},loc:{start:{line:203,column:40},end:{line:234,column:7}},line:203},26:{name:"(anonymous_26)",decl:{start:{line:243,column:2},end:{line:243,column:3}},loc:{start:{line:243,column:11},end:{line:257,column:3}},line:243},27:{name:"(anonymous_27)",decl:{start:{line:253,column:13},end:{line:253,column:14}},loc:{start:{line:253,column:20},end:{line:253,column:38}},line:253}},branchMap:{0:{loc:{start:{line:35,column:2},end:{line:37,column:3}},type:"if",locations:[{start:{line:35,column:2},end:{line:37,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},1:{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},2:{loc:{start:{line:41,column:8},end:{line:41,column:64}},type:"binary-expr",locations:[{start:{line:41,column:8},end:{line:41,column:32}},{start:{line:41,column:36},end:{line:41,column:64}}],line:41},3:{loc:{start:{line:80,column:15},end:{line:80,column:131}},type:"binary-expr",locations:[{start:{line:80,column:15},end:{line:80,column:71}},{start:{line:80,column:75},end:{line:80,column:131}}],line:80},4:{loc:{start:{line:88,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:93,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},5:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},6:{loc:{start:{line:94,column:8},end:{line:94,column:98}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:26}},{start:{line:94,column:30},end:{line:94,column:98}}],line:94},7:{loc:{start:{line:97,column:4},end:{line:102,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:102,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},8:{loc:{start:{line:97,column:8},end:{line:97,column:59}},type:"binary-expr",locations:[{start:{line:97,column:8},end:{line:97,column:26}},{start:{line:97,column:30},end:{line:97,column:59}}],line:97},9:{loc:{start:{line:148,column:8},end:{line:167,column:9}},type:"if",locations:[{start:{line:148,column:8},end:{line:167,column:9}},{start:{line:154,column:15},end:{line:167,column:9}}],line:148},10:{loc:{start:{line:181,column:6},end:{line:181,column:40}},type:"if",locations:[{start:{line:181,column:6},end:{line:181,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AAwMY;AAxMZ,OAAO,WAAuB;AAC9B,SAAQ,kBAAiB;AACzB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YACP,cACA,WACA,OACa;AACb,QAAM,OAAO,WAAW,SAAS;AACjC,QAAM,KAAK,SAAS,MAAM,KAAK,QAAQ,CAAC;AACxC,OAAK,OAAO,YAAY;AACxB,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO;AAAA,YACL,oBAAC,qCAAkC,UAAoB;AAAA,YACvD;AAAA,YACA;AAAA,UACF;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YACL;AAAA,cAAC;AAAA;AAAA,gBACC;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c9406ff85b3388897c258ca0d95831105e5e92"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yn=function(){return l},l}yn();function H7(n,e,t){yn().f[0]++;const r=(yn().s[0]++,NK.createRoot(e));return yn().s[1]++,t.once("close",()=>(yn().f[1]++,yn().s[2]++,r.unmount())),yn().s[3]++,r.render(n),yn().s[4]++,e}function cZ(n,e,t){yn().f[2]++;const r=(yn().s[5]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(yn().s[6]++,jH(t));yn().s[7]++,i?(yn().b[0][0]++,yn().s[8]++,e.push(i)):yn().b[0][1]++;const s=(yn().s[9]++,{});yn().s[10]++,Object.keys(n.sources).forEach(o=>{yn().f[3]++;const f=(yn().s[11]++,n.sources[o]);yn().s[12]++,yn().b[2][0]++,f.type!=="raster"&&(yn().b[2][1]++,f.type!=="raster-dem")?(yn().b[1][0]++,yn().s[13]++,s[o]=f):yn().b[1][1]++});const l=(yn().s[14]++,{...n,sources:s,layers:[r].concat(e)});return yn().s[15]++,l}class hZ extends Fn.Component{static defaultProps=(yn().s[16]++,{onMapLoaded:()=>{yn().f[4]++},onDataChange:()=>{yn().f[5]++},onLayerSelect:()=>{yn().f[6]++},onChange:()=>{yn().f[7]++},options:{}});container=(yn().s[17]++,null);constructor(e){yn().f[8]++,yn().s[18]++,super(e),yn().s[19]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},yn().s[20]++,qc.on("languageChanged",()=>{yn().f[9]++,yn().s[21]++,this.forceUpdate()})}shouldComponentUpdate(e,t){yn().f[10]++;let r=(yn().s[22]++,!1);yn().s[23]++;try{yn().s[24]++,r=(yn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(yn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return yn().s[25]++,r}componentDidUpdate(){yn().f[11]++;const e=(yn().s[26]++,this.state.map),t=(yn().s[27]++,this.props.replaceAccessTokens(this.props.mapStyle));yn().s[28]++,e?(yn().b[4][0]++,yn().s[29]++,e.setStyle(t,{diff:!0}),yn().s[30]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,yn().s[31]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,yn().s[32]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):yn().b[4][1]++,yn().s[33]++,yn().b[6][0]++,this.state.inspect&&(yn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(yn().b[5][0]++,yn().s[34]++,this.state.inspect.toggleInspector()):yn().b[5][1]++,yn().s[35]++,yn().b[8][0]++,this.state.inspect&&(yn().b[8][1]++,this.props.inspectModeEnabled)?(yn().b[7][0]++,yn().s[36]++,this.state.inspect.setOriginalStyle(t),yn().s[37]++,setTimeout(()=>{yn().f[12]++,yn().s[38]++,this.state.inspect.render()},500)):yn().b[7][1]++}componentDidMount(){yn().f[13]++;const e=(yn().s[39]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(yn().s[40]++,new mY({metadata:!0}));yn().s[41]++,sy.addProtocol("pmtiles",t.tile);const r=(yn().s[42]++,new sy.Map(e));yn().s[43]++;const i=()=>{yn().f[14]++;const B=(yn().s[44]++,r.getCenter()),D=(yn().s[45]++,r.getZoom());yn().s[46]++,this.props.onChange({center:B,zoom:D})};yn().s[47]++,i(),yn().s[48]++,r.showTileBoundaries=e.showTileBoundaries,yn().s[49]++,r.showCollisionBoxes=e.showCollisionBoxes,yn().s[50]++,r.showOverdrawInspector=e.showOverdrawInspector;const s=(yn().s[51]++,this.initGeocoder(r)),l=(yn().s[52]++,new zH);yn().s[53]++,r.addControl(l,"top-right");const o=(yn().s[54]++,new sy.NavigationControl({visualizePitch:!0}));yn().s[55]++,r.addControl(o,"top-right");const f=(yn().s[56]++,document.createElement("div")),C=(yn().s[57]++,new sy.Popup({closeOnClick:!1})),M=(yn().s[58]++,new cO({popup:C,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(B,D)=>(yn().f[15]++,yn().s[59]++,ku(lU.brightColor(B,D)).desaturate(.5).string()),buildInspectStyle:(B,D)=>(yn().f[16]++,yn().s[60]++,cZ(B,D,this.props.highlightedLayer)),renderPopup:B=>(yn().f[17]++,yn().s[61]++,this.props.inspectModeEnabled?(yn().b[9][0]++,yn().s[62]++,H7(le.jsx(EH,{features:B}),f,C)):(yn().b[9][1]++,yn().s[63]++,H7(le.jsx(cU,{features:B,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),f,C)))}));yn().s[64]++,r.addControl(M),yn().s[65]++,r.on("style.load",()=>{yn().f[18]++,yn().s[66]++,this.setState({map:r,inspect:M,geocoder:s,zoomControl:l,zoom:r.getZoom()})}),yn().s[67]++,r.on("data",B=>{if(yn().f[19]++,yn().s[68]++,B.dataType!=="tile"){yn().b[10][0]++,yn().s[69]++;return}else yn().b[10][1]++;yn().s[70]++,this.props.onDataChange({map:this.state.map})}),yn().s[71]++,r.on("error",B=>{yn().f[20]++,yn().s[72]++,console.log("ERROR",B)}),yn().s[73]++,r.on("zoom",B=>{yn().f[21]++,yn().s[74]++,this.setState({zoom:r.getZoom()})}),yn().s[75]++,r.on("dragend",i),yn().s[76]++,r.on("zoomend",i)}onLayerSelectById=(yn().s[77]++,e=>{yn().f[22]++;const t=(yn().s[78]++,this.props.mapStyle.layers.findIndex(r=>(yn().f[23]++,yn().s[79]++,r.id===e)));yn().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){yn().f[24]++;const t=(yn().s[81]++,{forwardGeocode:async i=>{yn().f[25]++;const s=(yn().s[82]++,[]);yn().s[83]++;try{const l=(yn().s[84]++,`https://nominatim.openstreetmap.org/search?q=${i.query}&format=geojson&polygon_geojson=1&addressdetails=1`),o=(yn().s[85]++,await fetch(l)),f=(yn().s[86]++,await o.json());yn().s[87]++;for(const C of f.features){const M=(yn().s[88]++,[C.bbox[0]+(C.bbox[2]-C.bbox[0])/2,C.bbox[1]+(C.bbox[3]-C.bbox[1])/2]),B=(yn().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:M},place_name:C.properties.display_name,properties:C.properties,text:C.properties.display_name,place_type:["place"],center:M});yn().s[90]++,s.push(B)}}catch(l){yn().s[91]++,console.error(`Failed to forwardGeocode with error: ${l}`)}return yn().s[92]++,{features:s}}}),r=(yn().s[93]++,new uZ(t,{placeholder:this.props.t("Search"),maplibregl:sy}));return yn().s[94]++,e.addControl(r,"top-left"),yn().s[95]++,r}render(){yn().f[26]++;const e=(yn().s[96]++,this.props.t);return yn().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),yn().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),yn().s[99]++,le.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>(yn().f[27]++,yn().s[100]++,this.container=t),"data-wd-key":"maplibre:map"})}}const dZ=(yn().s[101]++,zs()(hZ));var Z7={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Tv=" ",X7=/(italic|oblique)$/i,J7={};function N6(n,e,t){var r=J7[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",l=[],o,f,C=0,M=n.length;C<M;++C){var B=n[C],D=B.split(" "),R=D[D.length-1].toLowerCase();R=="normal"||R=="italic"||R=="oblique"?(s=f?s:R,f=!0,D.pop(),R=D[D.length-1].toLowerCase()):X7.test(R)&&(R=R.replace(X7,""),s=f?s:D[D.length-1].replace(R,""),f=!0);for(var U in Z7){var G=D.length>1?D[D.length-2].toLowerCase():"";if(R==U||R==U.replace("-","")||G+"-"+R==U){i=o?i:Z7[U],D.pop(),G&&U.startsWith(G)&&D.pop();break}}!o&&typeof R=="number"&&(i=R,o=!0);var W=D.join(Tv).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");W.indexOf(Tv)!==-1&&(W='"'+W+'"'),l.push(W)}r=J7[n]=[s,i,l]}return r[0]+Tv+r[1]+Tv+e+"px"+(t?"/"+t:"")+Tv+r[2]}const bd={ADD:"add",REMOVE:"remove"},ky={PROPERTYCHANGE:"propertychange"},co={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class __{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function fZ(n,e,t){let r,i;t=t||um;let s=0,l=n.length,o=!1;for(;s<l;)r=s+(l-s>>1),i=+t(n[r],e),i<0?s=r+1:(l=r,o=!i);return o?s:~s}function um(n,e){return n>e?1:n<e?-1:0}function pZ(n,e){return n<e?1:n>e?-1:0}function Nx(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function mZ(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function cm(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function X0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function gZ(n,e,t){const r=e||um;return n.every(function(i,s){if(s===0)return!0;const l=r(n[s-1],i);return!(l>0||l===0)})}function FC(){return!0}function Gx(){return!1}function KC(){}function mU(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!X0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function Py(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function b_(n){for(const e in n)delete n[e]}function H0(n){let e;for(e in n)return!1;return!e}class Fp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class x_ extends __{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Fp(e):e;s.target||(s.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,o[r]=0),++l[r];let f;for(let C=0,M=i.length;C<M;++C)if("handleEvent"in i[C]?f=i[C].handleEvent(s):f=i[C].call(this,s),f===!1||s.propagationStopped){f=!1;break}if(--l[r]===0){let C=o[r];for(delete o[r];C--;)this.removeEventListener(r,KC);delete l[r]}return f}disposeInternal(){this.listeners_&&b_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=KC,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Rs(n,e,t,r,i){if(i){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function D2(n,e,t,r){return Rs(n,e,t,r,!0)}function il(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),b_(n))}class M_ extends x_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(co.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Rs(this,e[s],t);return i}return Rs(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=D2(this,e[s],t)}else r=D2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)yZ(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}M_.prototype.on;M_.prototype.once;M_.prototype.un;function yZ(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)il(n[e]);else il(n)}function mo(){throw new Error("Unimplemented abstract method.")}let vZ=0;function ko(n){return n.ol_uid||(n.ol_uid=String(++vZ))}class e9 extends Fp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Kp extends M_{constructor(e){super(),this.on,this.once,this.un,ko(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new e9(r,e,t)),r=ky.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new e9(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],H0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const t9={LENGTH:"length"};class bb extends Fp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class rm extends Kp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(t9.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new bb(bd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new bb(bd.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new bb(bd.REMOVE,i,e)),this.dispatchEvent(new bb(bd.ADD,t,e))}updateLength_(){this.set(t9.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class ay extends Fp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class E0 extends ay{constructor(e,t,r,i,s,l){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const zA={SINGLECLICK:"singleclick",CLICK:co.CLICK,DBLCLICK:co.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},qg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",CZ=qg.includes("safari")&&!qg.includes("chrom");CZ&&(qg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(qg));const _Z=qg.includes("webkit")&&!qg.includes("edge"),gU=qg.includes("macintosh"),bZ=typeof devicePixelRatio<"u"?devicePixelRatio:1,dO=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,yU=typeof Image<"u"&&Image.prototype.decode,xZ=typeof createImageBitmap=="function",vU=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),G6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MZ extends x_{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Rs(r,G6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Rs(r,G6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(co.TOUCHMOVE,this.boundHandleTouchMove_,vU?{passive:!1}:!1)}emulateClick_(e){let t=new E0(zA.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new E0(zA.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new E0(zA.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==zA.POINTERUP||t.type==zA.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==zA.POINTERDOWN||t.type==zA.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new E0(zA.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(il),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new E0(zA.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Rs(r,zA.POINTERMOVE,this.handlePointerMove_,this),Rs(r,zA.POINTERUP,this.handlePointerUp_,this),Rs(this.element_,zA.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Rs(this.element_.getRootNode(),zA.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new E0(zA.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new E0(zA.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(il(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(co.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(il(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(il),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const zm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},vh={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Rr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ia(n,e){if(!n)throw new Error(e)}const F2=1/0;class wZ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,b_(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ia(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=F2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],l=r[e],o=e;for(;e<i>>1;){const f=this.getLeftChildIndex_(e),C=this.getRightChildIndex_(e),M=C<i&&r[C]<r[f]?C:f;t[e]=t[M],r[e]=r[M],e=M}t[e]=s,r[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],l=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>l)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let l,o,f;for(o=0;o<s;++o)l=t[o],f=e(l),f==F2?delete this.queuedElements_[this.keyFunction_(l)]:(r[i]=f,t[i++]=l);t.length=i,r.length=i,this.heapify_()}}class CU extends wZ{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(co.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Rr.LOADED||r===Rr.ERROR||r===Rr.EMPTY){r!==Rr.ERROR&&t.removeEventListener(co.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Rr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function SZ(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return F2;const s=n.viewState.center,l=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(l*l+o*o)/i}const ql={ANIMATING:0,INTERACTING:1},yp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function mA(n,e,t){return Math.min(Math.max(n,e),t)}function EZ(n,e,t,r,i,s){const l=i-t,o=s-r;if(l!==0||o!==0){const f=((n-t)*l+(e-r)*o)/(l*l+o*o);f>1?(t=i,r=s):f>0&&(t+=l*f,r+=o*f)}return zg(n,e,t,r)}function zg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function BZ(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const f=Math.abs(n[o][r]);f>s&&(s=f,i=o)}if(s===0)return null;const l=n[i];n[i]=n[r],n[r]=l;for(let o=r+1;o<e;o++){const f=-n[o][r]/n[r][r];for(let C=r;C<e+1;C++)r==C?n[o][C]=0:n[o][C]+=f*n[r][C]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function n9(n){return n*180/Math.PI}function W0(n){return n*Math.PI/180}function Ng(n,e){const t=n%e;return t*e<0?t+e:t}function Hd(n,e,t){return n+t*(e-n)}function jx(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function xb(n,e){return Math.floor(jx(n,e))}function D0(n,e){return Math.ceil(jx(n,e))}function j6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function r9(n,e,t){return function(r,i,s,l,o){if(!r)return;if(!i&&!e)return r;const f=e?0:s[0]*i,C=e?0:s[1]*i,M=o?o[0]:0,B=o?o[1]:0;let D=n[0]+f/2+M,R=n[2]-f/2+M,U=n[1]+C/2+B,G=n[3]-C/2+B;D>R&&(D=(R+D)/2,R=D),U>G&&(U=(G+U)/2,G=U);let W=mA(r[0],D,R),J=mA(r[1],U,G);if(l&&t&&i){const $=30*i;W+=-$*Math.log(1+Math.max(0,D-r[0])/$)+$*Math.log(1+Math.max(0,r[0]-R)/$),J+=-$*Math.log(1+Math.max(0,U-r[1])/$)+$*Math.log(1+Math.max(0,r[1]-G)/$)}return[W,J]}}function OZ(n){return n}const _c={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function W6(n){const e=jf();for(let t=0,r=n.length;t<r;++t)fC(e,n[t]);return e}function IZ(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),l=Math.max.apply(null,e);return qm(r,i,s,l,t)}function Q0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function _U(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Jg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function $g(n,e){return fO(n,e[0],e[1])}function im(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function fO(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Q6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=e[0],o=e[1];let f=_c.UNKNOWN;return l<t?f=f|_c.LEFT:l>i&&(f=f|_c.RIGHT),o<r?f=f|_c.BELOW:o>s&&(f=f|_c.ABOVE),f===_c.UNKNOWN&&(f=_c.INTERSECTING),f}function jf(){return[1/0,1/0,-1/0,-1/0]}function qm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function qy(n){return qm(1/0,1/0,-1/0,-1/0,n)}function bU(n,e){const t=n[0],r=n[1];return qm(t,r,t,r,e)}function pO(n,e,t,r,i){const s=qy(i);return MU(s,n,e,t,r)}function $m(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function xU(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function fC(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function MU(n,e,t,r,i){for(;t<r;t+=i)TZ(n,e[t],e[t+1]);return n}function TZ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function wU(n,e){let t;return t=e(Wx(n)),t||(t=e(Qx(n)),t)||(t=e(Yx(n)),t)||(t=e(Xm(n)),t)?t:!1}function Y6(n){let e=0;return e1(n)||(e=Us(n)*Du(n)),e}function Wx(n){return[n[0],n[1]]}function Qx(n){return[n[2],n[1]]}function sf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function kZ(n,e){let t;if(e==="bottom-left")t=Wx(n);else if(e==="bottom-right")t=Qx(n);else if(e==="top-left")t=Xm(n);else if(e==="top-right")t=Yx(n);else throw new Error("Invalid corner");return t}function K2(n,e,t,r,i){const[s,l,o,f,C,M,B,D]=SU(n,e,t,r);return qm(Math.min(s,o,C,B),Math.min(l,f,M,D),Math.max(s,o,C,B),Math.max(l,f,M,D),i)}function SU(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,l=Math.cos(t),o=Math.sin(t),f=i*l,C=i*o,M=s*l,B=s*o,D=n[0],R=n[1];return[D-f+B,R-C-M,D-f-B,R-C+M,D+f-B,R+C+M,D+f+B,R+C-M,D-f+B,R-C-M]}function Du(n){return n[3]-n[1]}function Ip(n,e,t){const r=t||jf();return GA(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):qy(r),r}function Xm(n){return[n[0],n[3]]}function Yx(n){return[n[2],n[3]]}function Us(n){return n[2]-n[0]}function GA(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function e1(n){return n[2]<n[0]||n[3]<n[1]}function PZ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function RZ(n,e,t){let r=!1;const i=Q6(n,e),s=Q6(n,t);if(i===_c.INTERSECTING||s===_c.INTERSECTING)r=!0;else{const l=n[0],o=n[1],f=n[2],C=n[3],M=e[0],B=e[1],D=t[0],R=t[1],U=(R-B)/(D-M);let G,W;s&_c.ABOVE&&!(i&_c.ABOVE)&&(G=D-(R-C)/U,r=G>=l&&G<=f),!r&&s&_c.RIGHT&&!(i&_c.RIGHT)&&(W=R-(D-f)*U,r=W>=o&&W<=C),!r&&s&_c.BELOW&&!(i&_c.BELOW)&&(G=D-(R-o)/U,r=G>=l&&G<=f),!r&&s&_c.LEFT&&!(i&_c.LEFT)&&(W=R-(D-l)*U,r=W>=o&&W<=C)}return r}function DZ(n,e,t,r){if(e1(n))return qy(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],l=[];for(let o=0,f=i.length;o<f;o+=2)s.push(i[o]),l.push(i[o+1]);return IZ(s,l,t)}function EU(n,e){const t=e.getExtent(),r=sf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Us(t),l=Math.floor((r[0]-t[0])/i)*i;n[0]-=l,n[2]-=l}return n}function BU(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];EU(n,e);const i=Us(r);if(Us(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function FZ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function L2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function mO(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function KZ(n,e){return n[0]*=e,n[1]*=e,n}function LZ(n,e){const t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r}function UZ(n,e){return Math.sqrt(LZ(n,e))}function gO(n,e){if(e.canWrapX()){const t=Us(e.getExtent()),r=zZ(n,e,t);r&&(n[0]-=r*t)}return n}function zZ(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Us(r),i=Math.floor((n[0]-r[0])/t)),i}function OU(n){return Math.pow(n,3)}function $y(n){return 1-OU(1-n)}function NZ(n){return 3*n*n-2*n*n*n}function GZ(n){return n}const jZ=63710088e-1;function i9(n,e,t){t=t||jZ;const r=W0(n[1]),i=W0(e[1]),s=(i-r)/2,l=W0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function IU(...n){console.warn(...n)}const Z0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class qx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Z0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const w_=6378137,hy=Math.PI*w_,WZ=[-hy,-hy,hy,hy],QZ=[-180,-85,180,85],Mb=w_*Math.log(Math.tan(Math.PI/2));class I1 extends qx{constructor(e){super({code:e,units:"m",extent:WZ,global:!0,worldExtent:QZ,getPointResolution:function(t,r){return t/Math.cosh(r[1]/w_)}})}}const o9=[new I1("EPSG:3857"),new I1("EPSG:102100"),new I1("EPSG:102113"),new I1("EPSG:900913"),new I1("http://www.opengis.net/def/crs/EPSG/0/3857"),new I1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function YZ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=hy*n[s]/180;let l=w_*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));l>Mb?l=Mb:l<-Mb&&(l=-Mb),e[s+1]=l}return e}function qZ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/hy,e[s+1]=360*Math.atan(Math.exp(n[s+1]/w_))/Math.PI-90;return e}const $Z=6378137,s9=[-180,-90,180,90],VZ=Math.PI*$Z/180;class yg extends qx{constructor(e,t){super({code:e,units:"degrees",extent:s9,axisOrientation:t,global:!0,metersPerUnit:VZ,worldExtent:s9})}}const a9=[new yg("CRS:84"),new yg("EPSG:4326","neu"),new yg("urn:ogc:def:crs:OGC:1.3:CRS84"),new yg("urn:ogc:def:crs:OGC:2:84"),new yg("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new yg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new yg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let q6={};function HZ(n){return q6[n]||q6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function ZZ(n,e){q6[n]=e}let vy={};function LC(n,e,t){const r=n.getCode(),i=e.getCode();r in vy||(vy[r]={}),vy[r][i]=t}function Y4(n,e){return n in vy&&e in vy[n]?vy[n][e]:null}const U2=.9996,Gf=.00669438,$x=Gf*Gf,Vx=$x*Gf,Tg=Gf/(1-Gf),l9=Math.sqrt(1-Gf),Ry=(1-l9)/(1+l9),TU=Ry*Ry,yO=TU*Ry,vO=yO*Ry,kU=vO*Ry,PU=1-Gf/4-3*$x/64-5*Vx/256,XZ=3*Gf/8+3*$x/32+45*Vx/1024,JZ=15*$x/256+45*Vx/1024,eX=35*Vx/3072,tX=3/2*Ry-27/32*yO+269/512*kU,nX=21/16*TU-55/32*vO,rX=151/96*yO-417/128*kU,iX=1097/512*vO,z2=6378137;function oX(n,e,t){const r=n-5e5,l=(t.north?e:e-1e7)/U2/(z2*PU),o=l+tX*Math.sin(2*l)+nX*Math.sin(4*l)+rX*Math.sin(6*l)+iX*Math.sin(8*l),f=Math.sin(o),C=f*f,M=Math.cos(o),B=f/M,D=B*B,R=D*D,U=1-Gf*C,G=Math.sqrt(1-Gf*C),W=z2/G,J=(1-Gf)/U,$=Tg*M**2,oe=$*$,te=r/(W*U2),H=te*te,re=H*te,j=re*te,ue=j*te,me=ue*te,ge=o-B/J*(H/2-j/24*(5+3*D+10*$-4*oe-9*Tg))+me/720*(61+90*D+298*$+45*R-252*Tg-3*oe);let we=(te-re/6*(1+2*D+$)+ue/120*(5-2*$+28*D-3*oe+8*Tg+24*R))/M;return we=j6(we+W0(RU(t.number)),-Math.PI,Math.PI),[n9(we),n9(ge)]}const A9=-80,u9=84,sX=-180,aX=180;function lX(n,e,t){n=j6(n,sX,aX),e<A9?e=A9:e>u9&&(e=u9);const r=W0(e),i=Math.sin(r),s=Math.cos(r),l=i/s,o=l*l,f=o*o,C=W0(n),M=RU(t.number),B=W0(M),D=z2/Math.sqrt(1-Gf*i**2),R=Tg*s**2,U=s*j6(C-B,-Math.PI,Math.PI),G=U*U,W=G*U,J=W*U,$=J*U,oe=$*U,te=z2*(PU*r-XZ*Math.sin(2*r)+JZ*Math.sin(4*r)-eX*Math.sin(6*r)),H=U2*D*(U+W/6*(1-o+R)+$/120*(5-18*o+f+72*R-58*Tg))+5e5;let re=U2*(te+D*l*(G/2+J/24*(5-o+9*R+4*R**2)+oe/720*(61-58*o+f+600*R-330*Tg)));return t.north||(re+=1e7),[H,re]}function RU(n){return(n-1)*6-180+3}const AX=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function DU(n){let e=0;for(const i of AX){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function c9(n,e){return function(t,r,i,s){const l=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(l));for(let o=0;o<l;o+=s){const f=t[o],C=t[o+1],M=n(f,C,e);r[o]=M[0],r[o+1]=M[1]}return r}}function uX(n){return DU(n)?new qx({code:n,units:"m"}):null}function cX(n){const e=DU(n.getCode());return e?{forward:c9(lX,e),inverse:c9(oX,e)}:null}const hX=[cX],dX=[uX];let $6=!0;function FU(n){$6=!1}function CO(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function V6(n){ZZ(n.getCode(),n),LC(n,n,CO)}function fX(n){n.forEach(V6)}function Sa(n){if(typeof n!="string")return n;const e=HZ(n);if(e)return e;for(const t of dX){const r=t(n);if(r)return r}return null}function H6(n,e,t,r){n=Sa(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const l=n.getMetersPerUnit();l&&(i=i*l/Z0[r])}}else{const l=n.getUnits();if(l=="degrees"&&!r||r=="degrees")i=e;else{const o=S_(n,Sa("EPSG:4326"));if(!o&&l!=="degrees")i=e*n.getMetersPerUnit();else{let C=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];C=o(C,C,2);const M=i9(C.slice(0,2),C.slice(2,4)),B=i9(C.slice(4,6),C.slice(6,8));i=(M+B)/2}const f=r?Z0[r]:n.getMetersPerUnit();f!==void 0&&(i/=f)}}return i}function h9(n){fX(n),n.forEach(function(e){n.forEach(function(t){e!==t&&LC(e,t,CO)})})}function pX(n,e,t,r){n.forEach(function(i){e.forEach(function(s){LC(i,s,t),LC(s,i,r)})})}function _O(n,e){return n?typeof n=="string"?Sa(n):n:Sa(e)}function mX(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let l=0;l<s;l+=i){const o=n(e.slice(l,l+r)),f=o.length;for(let C=0,M=i;C<M;++C)t[l+C]=C>=f?e[l+C]:o[C]}return t}}function Z6(n,e){return FU(),Hx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function q4(n,e){const t=Hx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Ng(r+180,360)-180),t}function Y0(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||S_(n,e)===CO)&&t}function S_(n,e){const t=n.getCode(),r=e.getCode();let i=Y4(t,r);if(i)return i;let s=null,l=null;for(const f of hX)s||(s=f(n)),l||(l=f(e));if(!s&&!l)return null;const o="EPSG:4326";if(l)if(s)i=$4(s.inverse,l.forward);else{const f=Y4(t,o);f&&(i=$4(f,l.forward))}else{const f=Y4(o,r);f&&(i=$4(s.inverse,f))}return i&&(V6(n),V6(e),LC(n,e,i)),i}function $4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function UC(n,e){const t=Sa(n),r=Sa(e);return S_(t,r)}function Hx(n,e,t){const r=UC(e,t);if(!r){const i=Sa(e).getCode(),s=Sa(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let gX=null;function yX(){return gX}function X6(n,e){return n}function Um(n,e){return $6&&!L2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&($6=!1,IU("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function bO(n,e){return n}function om(n,e){return n}function vX(){h9(o9),h9(a9),pX(a9,o9,YZ,qZ)}vX();const KU=new Array(6);function Sd(){return[1,0,0,1,0,0]}function d9(n){return MO(n,1,0,0,1,0,0)}function xO(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=n[4],o=n[5],f=e[0],C=e[1],M=e[2],B=e[3],D=e[4],R=e[5];return n[0]=t*f+i*C,n[1]=r*f+s*C,n[2]=t*M+i*B,n[3]=r*M+s*B,n[4]=t*D+i*R+l,n[5]=r*D+s*R+o,n}function MO(n,e,t,r,i,s,l){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=l,n}function CX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Pu(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function V4(n,e,t){return xO(n,MO(KU,e,0,0,t,0,0))}function _X(n,e,t){return xO(n,MO(KU,1,0,0,1,e,t))}function dm(n,e,t,r,i,s,l,o){const f=Math.sin(s),C=Math.cos(s);return n[0]=r*C,n[1]=i*f,n[2]=-r*f,n[3]=i*C,n[4]=l*r*C-o*r*f+e,n[5]=l*i*f+o*i*C+t,n}function LU(n,e){const t=bX(e);ia(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],l=e[3],o=e[4],f=e[5];return n[0]=l/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*f-l*o)/t,n[5]=-(r*f-i*o)/t,n}function bX(n){return n[0]*n[3]-n[1]*n[2]}const xX=[1e5,1e5,1e5,1e5,2,2];function MX(n){return"matrix("+n.join(", ")+")"}function f9(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function wX(n,e){const t=f9(n),r=f9(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*xX[i])!==0)return!1;return!0}function q0(n,e,t,r,i,s,l){s=s||[],l=l||2;let o=0;for(let f=e;f<t;f+=r){const C=n[f],M=n[f+1];s[o++]=i[0]*C+i[2]*M+i[4],s[o++]=i[1]*C+i[3]*M+i[5];for(let B=2;B<l;B++)s[o++]=n[f+B]}return s&&s.length!=o&&(s.length=o),s}function UU(n,e,t,r,i,s,l){l=l||[];const o=Math.cos(i),f=Math.sin(i),C=s[0],M=s[1];let B=0;for(let D=e;D<t;D+=r){const R=n[D]-C,U=n[D+1]-M;l[B++]=C+R*o-U*f,l[B++]=M+R*f+U*o;for(let G=D+2;G<D+r;++G)l[B++]=n[G]}return l&&l.length!=B&&(l.length=B),l}function SX(n,e,t,r,i,s,l,o){o=o||[];const f=l[0],C=l[1];let M=0;for(let B=e;B<t;B+=r){const D=n[B]-f,R=n[B+1]-C;o[M++]=f+i*D,o[M++]=C+s*R;for(let U=B+2;U<B+r;++U)o[M++]=n[U]}return o&&o.length!=M&&(o.length=M),o}function EX(n,e,t,r,i,s,l){l=l||[];let o=0;for(let f=e;f<t;f+=r){l[o++]=n[f]+i,l[o++]=n[f+1]+s;for(let C=f+2;C<f+r;++C)l[o++]=n[C]}return l&&l.length!=o&&(l.length=o),l}const p9=Sd(),BX=[NaN,NaN];class zU extends Kp{constructor(){super(),this.extent_=jf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=mU((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return mo()}closestPointXY(e,t,r,i){return mo()}containsXY(e,t){return this.closestPointXY(e,t,BX,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return mo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&qy(t),this.extentRevision_=this.getRevision()}return PZ(this.extent_,e)}rotate(e,t){mo()}scale(e,t,r){mo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return mo()}getType(){return mo()}applyTransform(e){mo()}intersectsExtent(e){return mo()}translate(e,t){mo()}transform(e,t){const r=Sa(e),i=r.getUnits()=="tile-pixels"?function(s,l,o){const f=r.getExtent(),C=r.getWorldExtent(),M=Du(C)/Du(f);dm(p9,C[0],C[3],M,-M,0,0,0);const B=q0(s,0,s.length,o,p9,l),D=UC(r,t);return D?D(B,B,o):B}:UC(r,t);return this.applyTransform(i),this}}class t1 extends zU{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return pO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return mo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=m9(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){mo()}setLayout(e,t,r){let i;if(e)i=m9(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=n1(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();UU(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=sf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();SX(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();EX(r,0,r.length,i,e,t,r),this.changed()}}}function n1(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function m9(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function OX(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return q0(r,0,r.length,i,e,t)}function NU(n,e,t,r){let i=0;const s=n[t-r],l=n[t-r+1];let o=0,f=0;for(;e<t;e+=r){const C=n[e]-s,M=n[e+1]-l;i+=f*C-o*M,o=C,f=M}return i/2}function GU(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=NU(n,e,o,r),e=o}return i}function IX(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=GU(n,e,o,r),e=o[o.length-1]}return i}function g9(n,e,t,r,i,s,l){const o=n[e],f=n[e+1],C=n[t]-o,M=n[t+1]-f;let B;if(C===0&&M===0)B=e;else{const D=((i-o)*C+(s-f)*M)/(C*C+M*M);if(D>1)B=t;else if(D>0){for(let R=0;R<r;++R)l[R]=Hd(n[e+R],n[t+R],D);l.length=r;return}else B=e}for(let D=0;D<r;++D)l[D]=n[B+D];l.length=r}function wO(n,e,t,r,i){let s=n[e],l=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],f=n[e+1],C=zg(s,l,o,f);C>i&&(i=C),s=o,l=f}return i}function SO(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=wO(n,e,o,r,i),e=o}return i}function TX(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=SO(n,e,o,r,i),e=o[o.length-1]}return i}function EO(n,e,t,r,i,s,l,o,f,C,M){if(e==t)return C;let B,D;if(i===0){if(D=zg(l,o,n[e],n[e+1]),D<C){for(B=0;B<r;++B)f[B]=n[e+B];return f.length=r,D}return C}M=M||[NaN,NaN];let R=e+r;for(;R<t;)if(g9(n,R-r,R,r,l,o,M),D=zg(l,o,M[0],M[1]),D<C){for(C=D,B=0;B<r;++B)f[B]=M[B];f.length=r,R+=r}else R+=r*Math.max((Math.sqrt(D)-Math.sqrt(C))/i|0,1);if(s&&(g9(n,t-r,e,r,l,o,M),D=zg(l,o,M[0],M[1]),D<C)){for(C=D,B=0;B<r;++B)f[B]=M[B];f.length=r}return C}function BO(n,e,t,r,i,s,l,o,f,C,M){M=M||[NaN,NaN];for(let B=0,D=t.length;B<D;++B){const R=t[B];C=EO(n,e,R,r,i,s,l,o,f,C,M),e=R}return C}function kX(n,e,t,r,i,s,l,o,f,C,M){M=M||[NaN,NaN];for(let B=0,D=t.length;B<D;++B){const R=t[B];C=BO(n,e,R,r,i,s,l,o,f,C,M),e=R[R.length-1]}return C}function PX(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Zx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const l=t[i];for(let o=0;o<r;++o)n[e++]=l[o]}return e}function E_(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=Zx(n,e,t[l],r);i[s++]=f,e=f}return i.length=s,i}function jU(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=E_(n,e,t[l],r,i[s]);f.length===0&&(f[0]=e),i[s++]=f,e=f[f.length-1]}return i.length=s,i}function F0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=e;l<t;l+=r)i[s++]=n.slice(l,l+r);return i.length=s,i}function zC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l];i[s++]=F0(n,e,f,r,i[s]),e=f}return i.length=s,i}function J6(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l];i[s++]=f.length===1&&f[0]===e?[]:zC(n,e,f,r,i[s]),e=f[f.length-1]}return i.length=s,i}function Xx(n,e,t,r,i,s,l){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[l++]=n[e],s[l++]=n[e+1];return l}const f=new Array(o);f[0]=1,f[o-1]=1;const C=[e,t-r];let M=0;for(;C.length>0;){const B=C.pop(),D=C.pop();let R=0;const U=n[D],G=n[D+1],W=n[B],J=n[B+1];for(let $=D+r;$<B;$+=r){const oe=n[$],te=n[$+1],H=EZ(oe,te,U,G,W,J);H>R&&(M=$,R=H)}R>i&&(f[(M-e)/r]=1,D+r<M&&C.push(D,M),M+r<B&&C.push(M,B))}for(let B=0;B<o;++B)f[B]&&(s[l++]=n[e+B*r],s[l++]=n[e+B*r+1]);return l}function WU(n,e,t,r,i,s,l,o){for(let f=0,C=t.length;f<C;++f){const M=t[f];l=Xx(n,e,M,r,i,s,l),o.push(l),e=M}return l}function wg(n,e){return e*Math.round(n/e)}function RX(n,e,t,r,i,s,l){if(e==t)return l;let o=wg(n[e],i),f=wg(n[e+1],i);e+=r,s[l++]=o,s[l++]=f;let C,M;do if(C=wg(n[e],i),M=wg(n[e+1],i),e+=r,e==t)return s[l++]=C,s[l++]=M,l;while(C==o&&M==f);for(;e<t;){const B=wg(n[e],i),D=wg(n[e+1],i);if(e+=r,B==C&&D==M)continue;const R=C-o,U=M-f,G=B-o,W=D-f;if(R*W==U*G&&(R<0&&G<R||R==G||R>0&&G>R)&&(U<0&&W<U||U==W||U>0&&W>U)){C=B,M=D;continue}s[l++]=C,s[l++]=M,o=C,f=M,C=B,M=D}return s[l++]=C,s[l++]=M,l}function OO(n,e,t,r,i,s,l,o){for(let f=0,C=t.length;f<C;++f){const M=t[f];l=RX(n,e,M,r,i,s,l),o.push(l),e=M}return l}function DX(n,e,t,r,i,s,l,o){for(let f=0,C=t.length;f<C;++f){const M=t[f],B=[];l=OO(n,e,M,r,i,s,l,B),o.push(B),e=M[M.length-1]}return l}class NC extends t1{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new NC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Jg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),EO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return NU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return F0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Xx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new NC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zx(this.flatCoordinates,0,e,this.stride),this.changed()}}class Vg extends t1{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Vg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,l=zg(e,t,s[0],s[1]);if(l<i){const o=this.stride;for(let f=0;f<o;++f)r[f]=s[f];return r.length=o,l}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return bU(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return fO(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=PX(this.flatCoordinates,0,e,this.stride),this.changed()}}function FX(n,e,t,r,i){return!wU(i,function(l){return!kg(n,e,t,r,l[0],l[1])})}function kg(n,e,t,r,i,s){let l=0,o=n[t-r],f=n[t-r+1];for(;e<t;e+=r){const C=n[e],M=n[e+1];f<=s?M>s&&(C-o)*(s-f)-(i-o)*(M-f)>0&&l++:M<=s&&(C-o)*(s-f)-(i-o)*(M-f)<0&&l--,o=C,f=M}return l!==0}function IO(n,e,t,r,i,s){if(t.length===0||!kg(n,e,t[0],r,i,s))return!1;for(let l=1,o=t.length;l<o;++l)if(kg(n,t[l-1],t[l],r,i,s))return!1;return!0}function KX(n,e,t,r,i,s){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const f=t[l];if(IO(n,e,f,r,i,s))return!0;e=f[f.length-1]}return!1}function TO(n,e,t,r,i,s,l){let o,f,C,M,B,D,R;const U=i[s+1],G=[];for(let $=0,oe=t.length;$<oe;++$){const te=t[$];for(M=n[te-r],D=n[te-r+1],o=e;o<te;o+=r)B=n[o],R=n[o+1],(U<=D&&R<=U||D<=U&&U<=R)&&(C=(U-D)/(R-D)*(B-M)+M,G.push(C)),M=B,D=R}let W=NaN,J=-1/0;for(G.sort(um),M=G[0],o=1,f=G.length;o<f;++o){B=G[o];const $=Math.abs(B-M);$>J&&(C=(M+B)/2,IO(n,e,t,r,C,U)&&(W=C,J=$)),M=B}return isNaN(W)&&(W=i[s]),l?(l.push(W,U,J),l):[W,U,J]}function QU(n,e,t,r,i){let s=[];for(let l=0,o=t.length;l<o;++l){const f=t[l];s=TO(n,e,f,r,i,2*l,s),e=f[f.length-1]}return s}function YU(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Jx(n,e,t,r,i,s){return s=s??MU(jf(),n,e,t,r),GA(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:YU(n,e,t,r,function(l,o){return RZ(i,l,o)}):!1}function LX(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){if(Jx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function qU(n,e,t,r,i){return!!(Jx(n,e,t,r,i)||kg(n,e,t,r,i[0],i[1])||kg(n,e,t,r,i[0],i[3])||kg(n,e,t,r,i[2],i[1])||kg(n,e,t,r,i[2],i[3]))}function $U(n,e,t,r,i){if(!qU(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,l=t.length;s<l;++s)if(FX(n,t[s-1],t[s],r,i)&&!Jx(n,t[s-1],t[s],r,i))return!1;return!0}function UX(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if($U(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function zX(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function kO(n,e,t,r){let i=0,s=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const o=n[e],f=n[e+1];i+=(o-s)*(f+l),s=o,l=f}return i===0?void 0:i>0}function PO(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],f=kO(n,e,o,r);if(s===0){if(i&&f||!i&&!f)return!1}else if(i&&!f||!i&&f)return!1;e=o}return!0}function VU(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(!PO(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function N2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],f=kO(n,e,o,r);(s===0?i&&f||!i&&!f:i&&!f||!i&&f)&&zX(n,e,o,r),e=o}return e}function eB(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s)e=N2(n,e,t[s],r,i);return e}function HU(n,e){const t=[];let r=0,i=0,s;for(let l=0,o=e.length;l<o;++l){const f=e[l],C=kO(n,r,f,2);if(s===void 0&&(s=C),C===s)t.push(e.slice(i,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=l+1,r=f}return t}class Vm extends t1{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?cm(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Vm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Jg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(SO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),BO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return IO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return GU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),N2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,zC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=sf(this.getExtent());this.flatInteriorPoint_=TO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Vg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new NC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const f=r[l],C=new NC(t.slice(s,f),e);i.push(C),s=f}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;PO(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=N2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=OO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Vm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return $U(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=E_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function y9(n){if(e1(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Vm(s,"XY",[s.length])}function RO(n,e,t,r){const i=Us(e)/t[0],s=Du(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function DO(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),mA(r,t/2,e*2)}function NX(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,l,o){if(i!==void 0){const f=n[0],C=n[n.length-1],M=t?RO(f,t,l,r):f;if(o)return e?DO(i,M,C):mA(i,C,M);const B=Math.min(M,i),D=Math.floor(Nx(n,B,s));return n[D]>M&&D<n.length-1?n[D+1]:n[D]}}}function GX(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(l,o,f,C){if(l!==void 0){const M=i?RO(e,i,f,s):e;if(C)return r?DO(l,M,t):mA(l,t,M);const B=1e-9,D=Math.ceil(Math.log(e/M)/Math.log(n)-B),R=-o*(.5-B)+.5,U=Math.min(M,l),G=Math.floor(Math.log(e/U)/Math.log(n)+R),W=Math.max(D,G),J=e/Math.pow(n,W);return mA(J,t,M)}}}function v9(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,l,o,f){if(s!==void 0){const C=r?RO(n,r,o,i):n;return!t||!f?mA(s,e,C):DO(s,C,e)}}}function FO(n){if(n!==void 0)return 0}function C9(n){if(n!==void 0)return n}function jX(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function WX(n){const e=W0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const ZU=42,KO=256,H4=0;class wp extends Kp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=_O(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&FU(),e.center&&(e.center=Um(e.center,this.projection_)),e.extent&&(e.extent=om(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in yp)delete t[o];this.setProperties(t,!0);const r=YX(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=QX(e),s=r.constraint,l=qX(e);this.constraints_={center:i,resolution:s,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),l=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+l,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Um(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Um(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const M=arguments[i];M.center&&this.setCenterInternal(M.center),M.zoom!==void 0?this.setZoom(M.zoom):M.resolution&&this.setResolution(M.resolution),M.rotation!==void 0&&this.setRotation(M.rotation)}if(i===t){r&&wb(r,!0);return}let s=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,f=this.targetRotation_;const C=[];for(;i<t;++i){const M=arguments[i],B={start:s,complete:!1,anchor:M.anchor,duration:M.duration!==void 0?M.duration:1e3,easing:M.easing||NZ,callback:r};if(M.center&&(B.sourceCenter=l,B.targetCenter=M.center.slice(),l=B.targetCenter),M.zoom!==void 0?(B.sourceResolution=o,B.targetResolution=this.getResolutionForZoom(M.zoom),o=B.targetResolution):M.resolution&&(B.sourceResolution=o,B.targetResolution=M.resolution,o=B.targetResolution),M.rotation!==void 0){B.sourceRotation=f;const D=Ng(M.rotation-f+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=f+D,f=B.targetRotation}$X(B)?B.complete=!0:s+=B.duration,C.push(B)}this.animations_.push(C),this.setHint(ql.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ql.ANIMATING]>0}getInteracting(){return this.hints_[ql.INTERACTING]>0}cancelAnimations(){this.setHint(ql.ANIMATING,-this.hints_[ql.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&wb(i[0].callback,!1),!e)for(let s=0,l=i.length;s<l;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let l=0,o=i.length;l<o;++l){const f=i[l];if(f.complete)continue;const C=e-f.start;let M=f.duration>0?C/f.duration:1;M>=1?(f.complete=!0,M=1):s=!1;const B=f.easing(M);if(f.sourceCenter){const D=f.sourceCenter[0],R=f.sourceCenter[1],U=f.targetCenter[0],G=f.targetCenter[1];this.nextCenter_=f.targetCenter;const W=D+B*(U-D),J=R+B*(G-R);this.targetCenter_=[W,J]}if(f.sourceResolution&&f.targetResolution){const D=B===1?f.targetResolution:f.sourceResolution+B*(f.targetResolution-f.sourceResolution);if(f.anchor){const R=this.getViewportSize_(this.getRotation()),U=this.constraints_.resolution(D,0,R,!0);this.targetCenter_=this.calculateCenterZoom(U,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=D,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const D=B===1?Ng(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+B*(f.targetRotation-f.sourceRotation);if(f.anchor){const R=this.constraints_.rotation(D,!0);this.targetCenter_=this.calculateCenterRotate(R,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=D}if(this.applyTargetState_(!0),t=!0,!f.complete)break}if(s){this.animations_[r]=null,this.setHint(ql.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=i[0].callback;l&&wb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],mO(r,e-this.getRotation()),FZ(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const l=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[l,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&X6(e,this.getProjection())}getCenterInternal(){return this.get(yp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return bO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ia(t,"The view center is not defined");const r=this.getResolution();ia(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ia(i!==void 0,"The view rotation is not defined"),K2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(yp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(om(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Us(e)/t[0],i=Du(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(yp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(l){return Math.log(r/l)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const l=this.getViewportSizeMinusPadding_();i=Z4(i,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Nx(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=mA(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,mA(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(ia(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ia(!e1(e),"Cannot fit empty extent provided as `geometry`");const i=om(e,this.getProjection());r=y9(i)}else if(e.getType()==="Circle"){const i=om(e.getExtent(),this.getProjection());r=y9(i),r.rotate(this.getRotation(),sf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),l=e.getStride();let o=1/0,f=1/0,C=-1/0,M=-1/0;for(let B=0,D=s.length;B<D;B+=l){const R=s[B]*r-s[B+1]*i,U=s[B]*i+s[B+1]*r;o=Math.min(o,R),f=Math.min(f,U),C=Math.max(C,R),M=Math.max(M,U)}return[o,f,C,M]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let f=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);f=isNaN(f)?l:Math.max(f,l),f=this.getConstrainedResolution(f,s?0:1);const C=this.getRotation(),M=Math.sin(C),B=Math.cos(C),D=sf(o);D[0]+=(i[1]-i[3])/2*f,D[1]+=(i[0]-i[2])/2*f;const R=D[0]*B-D[1]*M,U=D[1]*B+D[0]*M,G=this.getConstrainedCenter([R,U],f),W=t.callback?t.callback:KC;t.duration!==void 0?this.animateInternal({resolution:f,center:G,duration:t.duration,easing:t.easing},W):(this.targetResolution_=f,this.targetCenter_=G,this.applyTargetState_(!1,!0),wb(W,!0))}centerOn(e,t,r){this.centerOnInternal(Um(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(Z4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-r),f=Z4(e,i,[o[0]/2+l[3],o[1]/2+l[0]],t,r);s=[e[0]-f[0],e[1]-f[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=X6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Um(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Um(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Um(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),l=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,l,s,r,this.calculateCenterShift(this.targetCenter_,l,i,s));this.get(yp.ROTATION)!==i&&this.set(yp.ROTATION,i),this.get(yp.RESOLUTION)!==l&&(this.set(yp.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(yp.CENTER)||!L2(this.get(yp.CENTER),o))&&this.set(yp.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,l),f=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,s,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=f,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!L2(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:f,resolution:o,duration:e,easing:$y,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ql.INTERACTING,1)}endInteraction(e,t,r){r=r&&Um(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ql.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function wb(n,e){setTimeout(function(){n(e)},0)}function QX(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return r9(n.extent,n.constrainOnlyCenter,t)}const e=_O(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,r9(t,!1,!1)}return OZ}function YX(n){let e,t,r,l=n.minZoom!==void 0?n.minZoom:H4,o=n.maxZoom!==void 0?n.maxZoom:28;const f=n.zoomFactor!==void 0?n.zoomFactor:2,C=n.multiWorld!==void 0?n.multiWorld:!1,M=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,D=_O(n.projection,"EPSG:3857"),R=D.getExtent();let U=n.constrainOnlyCenter,G=n.extent;if(!C&&!G&&D.isGlobal()&&(U=!1,G=R),n.resolutions!==void 0){const W=n.resolutions;t=W[l],r=W[o]!==void 0?W[o]:W[W.length-1],n.constrainResolution?e=NX(W,M,!U&&G,B):e=v9(t,r,M,!U&&G,B)}else{const J=(R?Math.max(Us(R),Du(R)):360*Z0.degrees/D.getMetersPerUnit())/KO/Math.pow(2,H4),$=J/Math.pow(2,28-H4);t=n.maxResolution,t!==void 0?l=0:t=J/Math.pow(f,l),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(f,o):r=J/Math.pow(f,o):r=$),o=l+Math.floor(Math.log(t/r)/Math.log(f)),r=t/Math.pow(f,o-l),n.constrainResolution?e=GX(f,t,r,M,!U&&G,B):e=v9(t,r,M,!U&&G,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:l,zoomFactor:f}}function qX(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?WX():t===!1?C9:typeof t=="number"?jX(t):C9}return FO}function $X(n){return!(n.sourceCenter&&n.targetCenter&&!L2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Z4(n,e,t,r,i){const s=Math.cos(-i);let l=Math.sin(-i),o=n[0]*s-n[1]*l,f=n[1]*s+n[0]*l;o+=(e[0]/2-t[0])*r,f+=(t[1]-e[1]/2)*r,l=-l;const C=o*s-f*l,M=f*s+o*l;return[C,M]}const Sb="ol-hidden",VX="ol-selectable",e3="ol-unselectable",LO="ol-control",_9="ol-collapsed",HX=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),b9=["style","variant","weight","size","lineHeight","family"],tB={normal:400,bold:700},nB=function(n){const e=n.match(HX);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=b9.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[b9[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in tB&&(t.weight=tB[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t};function gA(n,e,t,r){let i;return t&&t.length?i=t.shift():dO?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let X4;function G2(){return X4||(X4=gA(1,1)),X4}function B_(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function ZX(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function XX(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function x9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function XU(n){for(;n.lastChild;)n.lastChild.remove()}function JX(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}class UO extends Kp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)il(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==KC&&this.listenerKeys.push(Rs(e,zm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class eJ extends UO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=l):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(co.CLICK,this.handleClick_.bind(this),!1);const C=t+" "+e3+" "+LO+(this.collapsed_&&this.collapsible_?" "+_9:"")+(this.collapsible_?"":" ol-uncollapsible"),M=this.element;M.className=C,M.appendChild(this.toggleButton_),M.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>Py(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!X0(t,this.renderedAttributions_)){XU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const l=document.createElement("li");l.innerHTML=t[i],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(_9),this.collapsed_?x9(this.collapseLabel_,this.label_):x9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class tJ extends UO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(this.label_),l.addEventListener(co.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+e3+" "+LO,f=this.element;f.className=o,f.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Sb)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:$y}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Sb);!s&&r===0?this.element.classList.add(Sb):s&&r!==0&&this.element.classList.remove(Sb)}this.label_.style.transform=i}this.rotation_=r}}class nJ extends UO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",f=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",C=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",M=document.createElement("button");M.className=i,M.setAttribute("type","button"),M.title=f,M.appendChild(typeof l=="string"?document.createTextNode(l):l),M.addEventListener(co.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=s,B.setAttribute("type","button"),B.title=C,B.appendChild(typeof o=="string"?document.createTextNode(o):o),B.addEventListener(co.CLICK,this.handleClick_.bind(this,-r),!1);const D=t+" "+e3+" "+LO,R=this.element;R.className=D,R.appendChild(M),R.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:$y})):r.setZoom(s)}}}function rJ(n){n=n||{};const e=new rm;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new nJ(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new tJ(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new eJ(n.attributionOptions)),e}class iJ{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],l=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(l,s),this.initialVelocity_=Math.sqrt(s*s+l*l)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const M9={ACTIVE:"active"};class O_ extends Kp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(M9.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(M9.ACTIVE,e)}setMap(e){this.map_=e}}function oJ(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:GZ,center:n.getConstrainedCenter(i)})}}function zO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),l=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:r!==void 0?r:250,easing:$y})}class sJ extends O_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==zA.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,l=r.shiftKey?-this.delta_:this.delta_,o=i.getView();zO(o,l,s,this.duration_),r.preventDefault(),t=!0}return!t}}function rB(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const aJ=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},lJ=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},JU=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?lJ(n):!0},AJ=FC,ez=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(_Z&&gU&&e.ctrlKey)},tz=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},uJ=function(n){const e=n.originalEvent;return gU?e.metaKey:e.ctrlKey},cJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},nz=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},J4=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},hJ=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class I_ extends O_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==zA.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==zA.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==zA.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==zA.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function NO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class dJ extends I_{constructor(e){super({stopDown:Gx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:rB(tz,hJ);this.condition_=e.onFocusOnly?rB(JU,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(NO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();KZ(s,o.getResolution()),mO(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),f=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(f),duration:500,easing:$y})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class fJ extends I_{constructor(e){e=e||{},super({stopDown:Gx}),this.condition_=e.condition?e.condition:aJ,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!J4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===FO)return;const i=t.getSize(),s=e.pixel,l=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return J4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return J4(e)&&ez(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class pJ extends __{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Vm([i])}getGeometry(){return this.geometry_}}const T1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class kv extends Fp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class mJ extends I_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new pJ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??ez,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new kv(T1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new kv(t?T1.BOXEND:T1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kv(T1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new kv(T1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new kv(T1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class gJ extends mJ{constructor(e){e=e||{};const t=e.condition?e.condition:cJ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),l=r.getResolutionForExtentInternal(s),o=r.getResolution()/l;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:$y})}}const vg={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class yJ extends O_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return tz(t)&&nz(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==co.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==vg.DOWN||i==vg.LEFT||i==vg.RIGHT||i==vg.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let f=0,C=0;i==vg.DOWN?C=-o:i==vg.LEFT?f=-o:i==vg.RIGHT?f=o:C=o;const M=[f,C];mO(M,l.getRotation()),oJ(l,M,this.duration_),r.preventDefault(),t=!0}}return!t}}class vJ extends O_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!uJ(t)&&nz(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==co.KEYDOWN||e.type==co.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,l=i==="+"?this.delta_:-this.delta_,o=s.getView();zO(o,l,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const CJ=40,_J=300;class bJ extends O_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:AJ;this.condition_=e.onFocusOnly?rB(JU,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==co.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=CJ;break;case WheelEvent.DOM_DELTA_PAGE:s*=_J;break}if(s===0)return!1;this.lastDelta_=s;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=s;const f=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),f),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-mA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),zO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class xJ extends I_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Gx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const f=s-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=f}this.lastAngle_=s;const l=e.map,o=l.getView();o.getConstraints().rotation!==FO&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(NO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class MJ extends I_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Gx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,l=r.clientY-i.clientY,o=Math.sqrt(s*s+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const f=e.map,C=f.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(NO(this.targetPointers))),f.render(),C.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function wJ(n){n=n||{};const e=new rm,t=new iJ(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new fJ),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new sJ({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new dJ({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new xJ),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new MJ({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new yJ),e.push(new vJ({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new bJ({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new gJ({duration:n.zoomDuration})),e}const Ra={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class rz extends Kp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ra.OPACITY]=e.opacity!==void 0?e.opacity:1,ia(typeof t[Ra.OPACITY]=="number","Layer opacity must be a number"),t[Ra.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ra.Z_INDEX]=e.zIndex,t[Ra.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ra.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ra.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ra.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=mA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return mo()}getLayerStatesArray(e){return mo()}getExtent(){return this.get(Ra.EXTENT)}getMaxResolution(){return this.get(Ra.MAX_RESOLUTION)}getMinResolution(){return this.get(Ra.MIN_RESOLUTION)}getMinZoom(){return this.get(Ra.MIN_ZOOM)}getMaxZoom(){return this.get(Ra.MAX_ZOOM)}getOpacity(){return this.get(Ra.OPACITY)}getSourceState(){return mo()}getVisible(){return this.get(Ra.VISIBLE)}getZIndex(){return this.get(Ra.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ra.EXTENT,e)}setMaxResolution(e){this.set(Ra.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ra.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ra.MAX_ZOOM,e)}setMinZoom(e){this.set(Ra.MIN_ZOOM,e)}setOpacity(e){ia(typeof e=="number","Layer opacity must be a number"),this.set(Ra.OPACITY,e)}setVisible(e){this.set(Ra.VISIBLE,e)}setZIndex(e){this.set(Ra.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class O0 extends Fp{constructor(e,t){super(e),this.layer=t}}const eM={LAYERS:"layers"};class Vy extends rz{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(eM.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new rm(r.slice(),{unique:!0}):ia(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new rm(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(il),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Rs(e,bd.ADD,this.handleLayersAdd_,this),Rs(e,bd.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(il);b_(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new O0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Rs(e,ky.PROPERTYCHANGE,this.handleLayerChange_,this),Rs(e,co.CHANGE,this.handleLayerChange_,this)];e instanceof Vy&&t.push(Rs(e,"addlayer",this.handleLayerGroupAdd_,this),Rs(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ko(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new O0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new O0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new O0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=ko(t);this.listenerKeys_[r].forEach(il),delete this.listenerKeys_[r],this.dispatchEvent(new O0("removelayer",t)),this.changed()}getLayers(){return this.get(eM.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new O0("removelayer",r[i]))}this.set(eM.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let l=r,o=t.length;l<o;l++){const f=t[l];f.opacity*=i.opacity,f.visible=f.visible&&i.visible,f.maxResolution=Math.min(f.maxResolution,i.maxResolution),f.minResolution=Math.max(f.minResolution,i.minResolution),f.minZoom=Math.max(f.minZoom,i.minZoom),f.maxZoom=Math.min(f.maxZoom,i.maxZoom),i.extent!==void 0&&(f.extent!==void 0?f.extent=Ip(f.extent,i.extent):f.extent=i.extent),f.zIndex===void 0&&(f.zIndex=s)}return t}getSourceState(){return"ready"}}const Lf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Hy extends rz{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ra.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ra.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(il(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Rs(e,co.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof wp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(l=>l.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return GO(i,t.viewState)&&(!s||GA(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof wp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ra.MAP,e)}getMapInternal(){return this.get(Ra.MAP)}setMap(e){this.mapPrecomposeKey_&&(il(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(il(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Rs(e,Lf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Rs(this,co.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);ia(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Ra.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function GO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function iz(n,e,t=0,r=n.length-1,i=SJ){for(;r>t;){if(r-t>600){const f=r-t+1,C=e-t+1,M=Math.log(f),B=.5*Math.exp(2*M/3),D=.5*Math.sqrt(M*B*(f-B)/f)*(C-f/2<0?-1:1),R=Math.max(t,Math.floor(e-C*B/f+D)),U=Math.min(r,Math.floor(e+(f-C)*B/f+D));iz(n,e,R,U,i)}const s=n[e];let l=t,o=r;for(Pv(n,t,e),i(n[r],s)>0&&Pv(n,t,r);l<o;){for(Pv(n,l,o),l++,o--;i(n[l],s)<0;)l++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Pv(n,t,o):(o++,Pv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Pv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function SJ(n,e){return n<e?-1:n>e?1:0}let oz=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Bb(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],f=t.leaf?i(o):o;Bb(e,f)&&(t.leaf?r.push(o):nM(e,f)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!Bb(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],l=t.leaf?this.toBBox(s):s;if(Bb(e,l)){if(t.leaf||nM(e,l))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ly([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],l=[];let o,f,C;for(;r||s.length;){if(r||(r=s.pop(),f=s[s.length-1],o=l.pop(),C=!0),r.leaf){const M=EJ(e,r.children,t);if(M!==-1)return r.children.splice(M,1),s.push(r),this._condense(s),this}!C&&!r.leaf&&nM(r,i)?(s.push(r),l.push(o),o=0,f=r,r=r.children[0]):f?(o++,r=f.children[o],C=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let l=this._maxEntries,o;if(s<=l)return o=ly(e.slice(t,r+1)),k1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(l)),l=Math.ceil(s/Math.pow(l,i-1))),o=ly([]),o.leaf=!1,o.height=i;const f=Math.ceil(s/l),C=f*Math.ceil(Math.sqrt(l));w9(e,t,r,C,this.compareMinX);for(let M=t;M<=r;M+=C){const B=Math.min(M+C-1,r);w9(e,M,B,f,this.compareMinY);for(let D=M;D<=B;D+=f){const R=Math.min(D+f-1,B);o.children.push(this._build(e,D,R,i-1))}}return k1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,l=1/0,o;for(let f=0;f<t.children.length;f++){const C=t.children[f],M=tM(C),B=IJ(e,C)-M;B<l?(l=B,s=M<s?M:s,o=C):B===l&&M<s&&(s=M,o=C)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],l=this._chooseSubtree(i,this.data,t,s);for(l.children.push(e),qv(l,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const l=this._chooseSplitIndex(r,s,i),o=ly(r.children.splice(l,r.children.length-l));o.height=r.height,o.leaf=r.leaf,k1(r,this.toBBox),k1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=ly([e,t]),this.data.height=e.height+1,this.data.leaf=!1,k1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,l=1/0;for(let o=t;o<=r-t;o++){const f=Yv(e,0,o,this.toBBox),C=Yv(e,o,r,this.toBBox),M=TJ(f,C),B=tM(f)+tM(C);M<s?(s=M,i=o,l=B<l?B:l):M===s&&B<l&&(l=B,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:BJ,s=e.leaf?this.compareMinY:OJ,l=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);l<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,l=Yv(e,0,t,s),o=Yv(e,r-t,r,s);let f=Eb(l)+Eb(o);for(let C=t;C<r-t;C++){const M=e.children[C];qv(l,e.leaf?s(M):M),f+=Eb(l)}for(let C=r-t-1;C>=t;C--){const M=e.children[C];qv(o,e.leaf?s(M):M),f+=Eb(o)}return f}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)qv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():k1(e[t],this.toBBox)}};function EJ(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function k1(n,e){Yv(n,0,n.children.length,e,n)}function Yv(n,e,t,r,i){i||(i=ly(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const l=n.children[s];qv(i,n.leaf?r(l):l)}return i}function qv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function BJ(n,e){return n.minX-e.minX}function OJ(n,e){return n.minY-e.minY}function tM(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Eb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function IJ(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function TJ(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function nM(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Bb(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function ly(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w9(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const l=e+Math.ceil((t-e)/r/2)*r;iz(n,l,e,t,i),s.push(e,l,l,t)}}const jO=[NaN,NaN,NaN,0];let rM;function kJ(){return rM||(rM=gA(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),rM}const PJ=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,RJ=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,DJ=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,FJ=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ob(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function pC(n){throw new Error('failed to parse "'+n+'" as color')}function sz(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(RJ)||n.match(PJ)||n.match(DJ);if(s){const l=s[4],o=100/255;return[mA(Ob(s[1],o)+.5|0,0,255),mA(Ob(s[2],o)+.5|0,0,255),mA(Ob(s[3],o)+.5|0,0,255),l!==void 0?mA(Ob(l,100),0,1):1]}pC(n)}if(n.startsWith("#")){if(FJ.test(n)){const s=n.substring(1),l=s.length<=4?1:2,o=[0,0,0,255];for(let f=0,C=s.length;f<C;f+=l){let M=parseInt(s.substring(f,f+l),16);l===1&&(M+=M<<4),o[f/l]=M}return o[3]=o[3]/255,o}pC(n)}const e=kJ();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&pC(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return sz(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=jx(i[3]/255,3),i}function KJ(n){return typeof n=="string"?n:QO(n)}const LJ=1024,Rv={};let iM=0;function UJ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function oM(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function sM(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function aM(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function lM(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function S9(n){const e=aM(n[0]),t=aM(n[1]),r=aM(n[2]),i=lM(e*.222488403+t*.716873169+r*.06060791),s=500*(lM(e*.452247074+t*.399439023+r*.148375274)-i),l=200*(i-lM(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(l,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+l*l),o<0?o+360:o,n[3]]}function zJ(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=sM(e),s=sM(e+t/500*Math.cos(r)),l=sM(e-t/200*Math.sin(r)),o=oM(s*3.021973625-i*1.617392459-l*.404875592),f=oM(s*-.943766287+i*1.916279586+l*.027607165),C=oM(s*.069407491-i*.22898585+l*1.159737864);return[mA(o+.5|0,0,255),mA(f+.5|0,0,255),mA(C+.5|0,0,255),n[3]]}function WO(n){if(n==="none")return jO;if(Rv.hasOwnProperty(n))return Rv[n];if(iM>=LJ){let t=0;for(const r in Rv)(t++&3)===0&&(delete Rv[r],--iM)}const e=sz(n);e.length!==4&&pC(n);for(const t of e)isNaN(t)&&pC(n);return Rv[n]=e,++iM,e}function Dy(n){return Array.isArray(n)?n:WO(n)}function QO(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function E9(n){return n[0]>0&&n[1]>0}function NJ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function xh(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let r1=0;const Zh=1<<r1++,Ps=1<<r1++,xd=1<<r1++,Sp=1<<r1++,Hg=1<<r1++,$v=1<<r1++,Ib=Math.pow(2,r1)-1,YO={[Zh]:"boolean",[Ps]:"number",[xd]:"string",[Sp]:"color",[Hg]:"number[]",[$v]:"size"},GJ=Object.keys(YO).map(Number).sort(um);function jJ(n){return n in YO}function Vv(n){const e=[];for(const t of GJ)Hv(n,t)&&e.push(YO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Hv(n,e){return(n&e)===e}function _0(n,e){return n===e}class Hu{constructor(e,t){if(!jJ(e))throw new Error(`literal expressions must have a specific type, got ${Vv(e)}`);this.type=e,this.value=t}}class WJ{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function az(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Yc(n,e,t){switch(typeof n){case"boolean":{if(_0(e,xd))return new Hu(xd,n?"true":"false");if(!Hv(e,Zh))throw new Error(`got a boolean, but expected ${Vv(e)}`);return new Hu(Zh,n)}case"number":{if(_0(e,$v))return new Hu($v,xh(n));if(_0(e,Zh))return new Hu(Zh,!!n);if(_0(e,xd))return new Hu(xd,n.toString());if(!Hv(e,Ps))throw new Error(`got a number, but expected ${Vv(e)}`);return new Hu(Ps,n)}case"string":{if(_0(e,Sp))return new Hu(Sp,WO(n));if(_0(e,Zh))return new Hu(Zh,!!n);if(!Hv(e,xd))throw new Error(`got a string, but expected ${Vv(e)}`);return new Hu(xd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return tee(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(_0(e,$v)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Hu($v,n)}if(_0(e,Sp)){if(n.length===3)return new Hu(Sp,[...n,1]);if(n.length===4)return new Hu(Sp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Hv(e,Hg))throw new Error(`got an array of numbers, but expected ${Vv(e)}`);return new Hu(Hg,n)}const Dn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},QJ={[Dn.Get]:fo(qo(1,1/0),B9),[Dn.Var]:fo(qo(1,1),YJ),[Dn.Has]:fo(qo(1,1/0),B9),[Dn.Id]:fo(qJ,P1),[Dn.Concat]:fo(qo(2,1/0),fa(xd)),[Dn.GeometryType]:fo($J,P1),[Dn.LineMetric]:fo(P1),[Dn.Resolution]:fo(AM,P1),[Dn.Zoom]:fo(AM,P1),[Dn.Time]:fo(AM,P1),[Dn.Any]:fo(qo(2,1/0),fa(Zh)),[Dn.All]:fo(qo(2,1/0),fa(Zh)),[Dn.Not]:fo(qo(1,1),fa(Zh)),[Dn.Equal]:fo(qo(2,2),fa(Ib)),[Dn.NotEqual]:fo(qo(2,2),fa(Ib)),[Dn.GreaterThan]:fo(qo(2,2),fa(Ps)),[Dn.GreaterThanOrEqualTo]:fo(qo(2,2),fa(Ps)),[Dn.LessThan]:fo(qo(2,2),fa(Ps)),[Dn.LessThanOrEqualTo]:fo(qo(2,2),fa(Ps)),[Dn.Multiply]:fo(qo(2,1/0),O9),[Dn.Coalesce]:fo(qo(2,1/0),O9),[Dn.Divide]:fo(qo(2,2),fa(Ps)),[Dn.Add]:fo(qo(2,1/0),fa(Ps)),[Dn.Subtract]:fo(qo(2,2),fa(Ps)),[Dn.Clamp]:fo(qo(3,3),fa(Ps)),[Dn.Mod]:fo(qo(2,2),fa(Ps)),[Dn.Pow]:fo(qo(2,2),fa(Ps)),[Dn.Abs]:fo(qo(1,1),fa(Ps)),[Dn.Floor]:fo(qo(1,1),fa(Ps)),[Dn.Ceil]:fo(qo(1,1),fa(Ps)),[Dn.Round]:fo(qo(1,1),fa(Ps)),[Dn.Sin]:fo(qo(1,1),fa(Ps)),[Dn.Cos]:fo(qo(1,1),fa(Ps)),[Dn.Atan]:fo(qo(1,2),fa(Ps)),[Dn.Sqrt]:fo(qo(1,1),fa(Ps)),[Dn.Match]:fo(qo(4,1/0),I9,HJ),[Dn.Between]:fo(qo(3,3),fa(Ps)),[Dn.Interpolate]:fo(qo(6,1/0),I9,ZJ),[Dn.Case]:fo(qo(3,1/0),VJ,XJ),[Dn.In]:fo(qo(2,2),JJ),[Dn.Number]:fo(qo(1,1/0),fa(Ib)),[Dn.String]:fo(qo(1,1/0),fa(Ib)),[Dn.Array]:fo(qo(1,1/0),fa(Ps)),[Dn.Color]:fo(qo(1,4),fa(Ps)),[Dn.Band]:fo(qo(1,3),fa(Ps)),[Dn.Palette]:fo(qo(2,2),eee),[Dn.ToString]:fo(qo(1,1),fa(Zh|Ps|xd|Sp))};function B9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=n[s+1];switch(typeof l){case"number":{i[s]=new Hu(Ps,l);break}case"string":{i[s]=new Hu(xd,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}s===0&&t.properties.add(String(l))}return i}function YJ(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Hu(xd,r)]}function qJ(n,e,t){t.featureId=!0}function $J(n,e,t){t.geometryType=!0}function AM(n,e,t){t.mapState=!0}function P1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function qo(n,e){return function(t,r,i){const s=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${l}`)}}}function O9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=Yc(n[s+1],e,t);i[s]=l}return i}function fa(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let l=0;l<i;++l){const o=Yc(e[l+1],n,r);s[l]=o}return s}}function VJ(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function I9(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function HJ(n,e,t){const r=n.length-1,i=xd|Ps|Zh,s=Yc(n[1],i,t),l=Yc(n[n.length-1],e,t),o=new Array(r-2);for(let f=0;f<r-2;f+=2){try{const C=Yc(n[f+2],s.type,t);o[f]=C}catch(C){throw new Error(`failed to parse argument ${f+1} of match expression: ${C.message}`)}try{const C=Yc(n[f+3],l.type,t);o[f+1]=C}catch(C){throw new Error(`failed to parse argument ${f+2} of match expression: ${C.message}`)}}return[s,...o,l]}function ZJ(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const f=r[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);i=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Hu(Ps,i);let l;try{l=Yc(n[2],Ps,t)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const o=new Array(n.length-3);for(let f=0;f<o.length;f+=2){try{const C=Yc(n[f+3],Ps,t);o[f]=C}catch(C){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${C.message}`)}try{const C=Yc(n[f+4],e,t);o[f+1]=C}catch(C){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${C.message}`)}}return[s,l,...o]}function XJ(n,e,t){const r=Yc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const l=Yc(n[s+1],Zh,t);i[s]=l}catch(l){throw new Error(`failed to parse argument ${s} of case expression: ${l.message}`)}try{const l=Yc(n[s+2],r.type,t);i[s+1]=l}catch(l){throw new Error(`failed to parse argument ${s+1} of case expression: ${l.message}`)}}return i[i.length-1]=r,i}function JJ(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=xd}else i=Ps;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const f=Yc(r[o],i,t);s[o]=f}catch(f){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${f.message}`)}return[Yc(n[1],i,t),...s]}function eee(n,e,t){let r;try{r=Yc(n[1],Ps,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let l=0;l<s.length;l++){let o;try{o=Yc(i[l],Sp,t)}catch(f){throw new Error(`failed to parse color at index ${l} in palette expression: ${f.message}`)}if(!(o instanceof Hu))throw new Error(`the palette color at index ${l} must be a literal value`);s[l]=o}return[r,...s]}function fo(...n){return function(e,t,r){const i=e[0];let s;for(let l=0;l<n.length;l++){const o=n[l](e,t,r);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new WJ(t,i,...s)}}function tee(n,e,t){const r=n[0],i=QJ[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function lz(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return lz(n.getGeometries()[0]);default:return""}}function Az(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Jm(n,e,t){const r=Yc(n,e,t);return Tp(r)}function Tp(n,e){if(n instanceof Hu){if(n.type===Sp&&typeof n.value=="string"){const r=WO(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Dn.Number:case Dn.String:case Dn.Coalesce:return nee(n);case Dn.Get:case Dn.Var:case Dn.Has:return ree(n);case Dn.Id:return r=>r.featureId;case Dn.GeometryType:return r=>r.geometryType;case Dn.Concat:{const r=n.args.map(i=>Tp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Dn.Resolution:return r=>r.resolution;case Dn.Any:case Dn.All:case Dn.Between:case Dn.In:case Dn.Not:return oee(n);case Dn.Equal:case Dn.NotEqual:case Dn.LessThan:case Dn.LessThanOrEqualTo:case Dn.GreaterThan:case Dn.GreaterThanOrEqualTo:return iee(n);case Dn.Multiply:case Dn.Divide:case Dn.Add:case Dn.Subtract:case Dn.Clamp:case Dn.Mod:case Dn.Pow:case Dn.Abs:case Dn.Floor:case Dn.Ceil:case Dn.Round:case Dn.Sin:case Dn.Cos:case Dn.Atan:case Dn.Sqrt:return see(n);case Dn.Case:return aee(n);case Dn.Match:return lee(n);case Dn.Interpolate:return Aee(n);case Dn.ToString:return uee(n);default:throw new Error(`Unsupported operator ${t}`)}}function nee(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Tp(n.args[s]);switch(t){case Dn.Coalesce:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Dn.Number:case Dn.String:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function ree(n,e){const r=n.args[0].value;switch(n.operator){case Dn.Get:return i=>{const s=n.args;let l=i.properties[r];for(let o=1,f=s.length;o<f;++o){const M=s[o].value;l=l[M]}return l};case Dn.Var:return i=>i.variables[r];case Dn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let l=i.properties[r];for(let o=1,f=s.length;o<f;++o){const M=s[o].value;if(!l||!Object.hasOwn(l,M))return!1;l=l[M]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function iee(n,e){const t=n.operator,r=Tp(n.args[0]),i=Tp(n.args[1]);switch(t){case Dn.Equal:return s=>r(s)===i(s);case Dn.NotEqual:return s=>r(s)!==i(s);case Dn.LessThan:return s=>r(s)<i(s);case Dn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Dn.GreaterThan:return s=>r(s)>i(s);case Dn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function oee(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Tp(n.args[s]);switch(t){case Dn.Any:return s=>{for(let l=0;l<r;++l)if(i[l](s))return!0;return!1};case Dn.All:return s=>{for(let l=0;l<r;++l)if(!i[l](s))return!1;return!0};case Dn.Between:return s=>{const l=i[0](s),o=i[1](s),f=i[2](s);return l>=o&&l<=f};case Dn.In:return s=>{const l=i[0](s);for(let o=1;o<r;++o)if(l===i[o](s))return!0;return!1};case Dn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function see(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Tp(n.args[s]);switch(t){case Dn.Multiply:return s=>{let l=1;for(let o=0;o<r;++o)l*=i[o](s);return l};case Dn.Divide:return s=>i[0](s)/i[1](s);case Dn.Add:return s=>{let l=0;for(let o=0;o<r;++o)l+=i[o](s);return l};case Dn.Subtract:return s=>i[0](s)-i[1](s);case Dn.Clamp:return s=>{const l=i[0](s),o=i[1](s);if(l<o)return o;const f=i[2](s);return l>f?f:l};case Dn.Mod:return s=>i[0](s)%i[1](s);case Dn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Dn.Abs:return s=>Math.abs(i[0](s));case Dn.Floor:return s=>Math.floor(i[0](s));case Dn.Ceil:return s=>Math.ceil(i[0](s));case Dn.Round:return s=>Math.round(i[0](s));case Dn.Sin:return s=>Math.sin(i[0](s));case Dn.Cos:return s=>Math.cos(i[0](s));case Dn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Dn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function aee(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Tp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function lee(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Tp(n.args[i]);return i=>{const s=r[0](i);for(let l=1;l<t-1;l+=2)if(s===r[l](i))return r[l+1](i);return r[t-1](i)}}function Aee(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Tp(n.args[i]);return i=>{const s=r[0](i),l=r[1](i);let o,f;for(let C=2;C<t;C+=2){const M=r[C](i);let B=r[C+1](i);const D=Array.isArray(B);if(D&&(B=UJ(B)),M>=l)return C===2?B:D?cee(s,l,o,f,M,B):Zv(s,l,o,f,M,B);o=M,f=B}return f}}function uee(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Tp(n.args[s]);switch(t){case Dn.ToString:return s=>{const l=i[0](s);return n.args[0].type===Sp?QO(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Zv(n,e,t,r,i,s){const l=i-t;if(l===0)return r;const o=e-t,f=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return r+f*(s-r)}function cee(n,e,t,r,i,s){if(i-t===0)return r;const o=S9(r),f=S9(s);let C=f[2]-o[2];C>180?C-=360:C<-180&&(C+=360);const M=[Zv(n,e,t,o[0],i,f[0]),Zv(n,e,t,o[1],i,f[1]),o[2]+Zv(n,e,t,0,i,C),Zv(n,e,t,r[3],i,s[3])];return zJ(M)}const mi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class qO extends x_{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?mi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(co.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==mi.IDLE&&this.loader){this.state=mi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Py(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||xZ&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=mi.LOADED}).catch(r=>{this.state=mi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function hee(n,e,t){const r=n;let i=!0,s=!1,l=!1;const o=[D2(r,co.LOAD,function(){l=!0,s||e()})];return r.src&&yU?(s=!0,r.decode().then(function(){i&&e()}).catch(function(f){i&&(l?e():t())})):o.push(D2(r,co.ERROR,t)),function(){i=!1,o.forEach(il)}}function dee(n,e){return new Promise((t,r)=>{function i(){l(),t(n)}function s(){l(),r(new Error("Image load error"))}function l(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function fee(n,e){return e&&(n.src=e),n.src&&yU?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):dee(n)}class pee{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=uM(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=uM(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const l=uM(e,t,r),o=l in this.cache_;this.cache_[l]=i,s&&(i.getImageState()===mi.IDLE&&i.load(),i.getImageState()===mi.LOADING?i.ready().then(()=>{this.patternCache_[l]=G2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[l]=G2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function uM(n,e,t){const r=t?Dy(t):"null";return e+":"+n+":"+r}const Uf=new pee;let Dv=null;class uz extends x_{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?mi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===mi.LOADED){Dv||(Dv=gA(1,1,void 0,{willReadFrequently:!0})),Dv.drawImage(this.image_,0,0);try{Dv.getImageData(0,0,1,1),this.tainted_=!1}catch{Dv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(co.CHANGE)}handleImageError_(){this.imageState_=mi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=mi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=gA(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===mi.IDLE){this.image_||this.initializeImage_(),this.imageState_=mi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&fee(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==mi.LOADED)return;const t=this.image_,r=gA(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=KJ(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===mi.LOADED||this.imageState_===mi.ERROR)e();else{const t=()=>{(this.imageState_===mi.LOADED||this.imageState_===mi.ERROR)&&(this.removeEventListener(co.CHANGE,t),e())};this.addEventListener(co.CHANGE,t)}})),this.ready_}}function $O(n,e,t,r,i,s){let l=e===void 0?void 0:Uf.get(e,t,i);return l||(l=new uz(n,n&&"src"in n?n.src||void 0:e,t,r,i),Uf.set(e,t,i,l,s)),s&&l&&!Uf.getPattern(e,t,i)&&Uf.set(e,t,i,l,s),l}function sm(n){return n?Array.isArray(n)?QO(n):typeof n=="object"&&"src"in n?mee(n):n:null}function mee(n){if(!n.offset||!n.size)return Uf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Uf.getPattern(e,void 0,n.color);if(t)return t;const r=Uf.get(n.src,"anonymous",null);if(r.getImageState()!==mi.LOADED)return null;const i=gA(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),$O(i.canvas,e,void 0,mi.LOADED,n.color,!0),Uf.getPattern(e,void 0,n.color)}const cz="10px sans-serif",Md="#000",Fy="round",Wm=[],Qm=0,Ky="round",GC=10,jC="#000",WC="center",j2="middle",Pg=[0,0,0,0],QC=1,Eg=new Kp;let Fv=null,T9;const iB={},gee=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function yee(n,e,t){return`${n} ${e} 16px "${t}"`}const vee=function(){let e,t;async function r(s){await t.ready;const l=await t.load(s);if(l.length===0)return!1;const o=nB(s),f=o.families[0].toLowerCase(),C=o.weight;return l.some(M=>{const B=M.family.replace(/^['"]|['"]$/g,"").toLowerCase(),D=tB[M.weight]||M.weight;return B===f&&M.style===o.style&&D==C})}async function i(){await t.ready;let s=!0;const l=Eg.getProperties(),o=Object.keys(l).filter(f=>l[f]<100);for(let f=o.length-1;f>=0;--f){const C=o[f];let M=l[C];M<100&&(await r(C)?(b_(iB),Eg.set(C,100)):(M+=10,Eg.set(C,M,!0),M<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=dO?self.fonts:document.fonts);const l=nB(s);if(!l)return;const o=l.families;let f=!1;for(const C of o){if(gee.has(C))continue;const M=yee(l.style,l.weight,C);Eg.get(M)===void 0&&(Eg.set(M,0,!0),f=!0)}f&&(clearTimeout(e),e=setTimeout(i,100))}}(),Cee=function(){let n;return function(e){let t=iB[e];if(t==null){if(dO){const r=nB(e),i=hz(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);iB[e]=t}return t}}();function hz(n,e){return Fv||(Fv=gA(1,1)),n!=T9&&(Fv.font=n,T9=Fv.font),Fv.measureText(e)}function dz(n,e){return hz(n,e).width}function k9(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,dz(n,s)),0);return t[e]=r,r}function _ee(n,e){const t=[],r=[],i=[];let s=0,l=0,o=0,f=0;for(let C=0,M=e.length;C<=M;C+=2){const B=e[C];if(B===`
`||C===M){s=Math.max(s,l),i.push(l),l=0,o+=f,f=0;continue}const D=e[C+1]||n.font,R=dz(D,B);t.push(R),l+=R;const U=Cee(D);r.push(U),f=Math.max(f,U)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function bee(n,e,t,r,i,s,l,o,f,C,M){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(f,C),n.scale(M[0],M[1]),xee(r,n)):M[0]<0||M[1]<0?(n.translate(f,C),n.scale(M[0],M[1]),n.drawImage(r,i,s,l,o,0,0,l,o)):n.drawImage(r,i,s,l,o,f,C,l*M[0],o*M[1]),n.restore()}function xee(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class t3{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=xh(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new t3({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return mo()}getImage(e){return mo()}getHitDetectionImage(){return mo()}getPixelRatio(e){return 1}getImageState(){return mo()}getImageSize(){return mo()}getOrigin(){return mo()}getSize(){return mo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=xh(e)}listenImageChange(e){mo()}load(){mo()}unlistenImageChange(e){mo()}ready(){return Promise.resolve()}}class n3 extends t3{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?mi.LOADING:mi.LOADED,this.imageState_===mi.LOADING&&this.ready().then(()=>this.imageState_=mi.LOADED),this.render()}clone(){const e=this.getScale(),t=new n3({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=Uf.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,l=Math.ceil(s.size*e),o=gA(l,l);this.draw_(s,o,e),i=o.canvas,Uf.set(r,null,null,new uz(i,void 0,null,mi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const re=i;i=s,s=re}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,f=s*Math.sin(o),C=Math.sqrt(s*s-f*f),M=i-C,B=Math.sqrt(f*f+M*M),D=B/f;if(e==="miter"&&D<=r)return D*t;const R=t/2/D,U=t/2*(M/B),W=Math.sqrt((i+R)*(i+R)+U*U)-i;if(this.radius2_===void 0||e==="bevel")return W*2;const J=i*Math.sin(o),$=Math.sqrt(i*i-J*J),oe=s-$,H=Math.sqrt(J*J+oe*oe)/J;if(H<=r){const re=H*t/2-s-i;return 2*Math.max(W,re)}return W*2}createRenderOptions(){let e=Fy,t=Ky,r=0,i=null,s=0,l,o=0;this.stroke_&&(l=sm(this.stroke_.getColor()??jC),o=this.stroke_.getWidth()??QC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ky,e=this.stroke_.getLineCap()??Fy,r=this.stroke_.getMiterLimit()??GC);const f=this.calculateLineJoinSize_(t,o,r),C=Math.max(this.radius,this.radius2_||0),M=Math.ceil(2*C+f);return{strokeStyle:l,strokeWidth:o,size:M,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=Md),t.fillStyle=sm(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Dy(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=gA(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const f=s+o*l,C=o%2===0?r:i;e.lineTo(C*Math.cos(f),C*Math.sin(f))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Md,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class T_ extends n3{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new T_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Gm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Gm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=$O(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===mi.IDLE&&t.load(),t.getImageState()===mi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?ko(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Dy(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function P9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let W2=class fz extends t3{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;ia(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||ko(l)),ia(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),ia(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(e.src!==void 0?f=mi.IDLE:l!==void 0&&("complete"in l?l.complete?f=l.src?mi.LOADED:mi.IDLE:f=mi.LOADING:f=mi.LOADED),this.color_=e.color!==void 0?Dy(e.color):null,this.iconImage_=$O(l,o,this.crossOrigin_,f,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let C,M;if(e.size)[C,M]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)C=B.width,M=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const D=()=>{if(this.unlistenImageChange(D),!this.initialOptions_)return;const R=this.iconImage_.getSize();this.setScale(P9(R[0],R[1],e.width,e.height))};this.listenImageChange(D);return}}C!==void 0&&this.setScale(P9(C,M,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new fz({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==mi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==mi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(co.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(co.CHANGE,e)}ready(){return this.iconImage_.ready()}};class K0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new K0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Zd{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=R9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Zd({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=R9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Mee(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ia(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let cM=null;function pz(n,e){if(!cM){const t=new Gm({color:"rgba(255,255,255,0.4)"}),r=new K0({color:"#3399CC",width:1.25});cM=[new Zd({image:new T_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return cM}function R9(n){return n.getGeometry()}const wee="#333";class r3{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=xh(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Gm({color:wee}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new r3({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=xh(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function See(n){return!0}function Eee(n){const e=az(),t=Bee(n,e),r=Az();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const l=i.getId();l!==void 0?r.featureId=l:r.featureId=null}return e.geometryType&&(r.geometryType=lz(i.getGeometry())),t(r)}}function D9(n){const e=az(),t=n.length,r=new Array(t);for(let l=0;l<t;++l)r[l]=oB(n[l],e);const i=Az(),s=new Array(t);return function(l,o){if(i.properties=l.getPropertiesInternal(),i.resolution=o,e.featureId){const C=l.getId();C!==void 0?i.featureId=C:i.featureId=null}let f=0;for(let C=0;C<t;++C){const M=r[C](i);M&&(s[f]=M,f+=1)}return s.length=f,s}}function Bee(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],l="filter"in s?Jm(s.filter,Zh,e):See;let o;if(Array.isArray(s.style)){const f=s.style.length;o=new Array(f);for(let C=0;C<f;++C)o[C]=oB(s.style[C],e)}else o=[oB(s.style,e)];r[i]={filter:l,styles:o}}return function(i){const s=[];let l=!1;for(let o=0;o<t;++o){const f=r[o].filter;if(f(i)&&!(n[o].else&&l)){l=!0;for(const C of r[o].styles){const M=C(i);M&&s.push(M)}}}return s}}function oB(n,e){const t=YC(n,"",e),r=qC(n,"",e),i=Oee(n,e),s=Iee(n,e),l=wd(n,"z-index",e);if(!t&&!r&&!i&&!s&&!H0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Zd;return function(f){let C=!0;if(t){const M=t(f);M&&(C=!1),o.setFill(M)}if(r){const M=r(f);M&&(C=!1),o.setStroke(M)}if(i){const M=i(f);M&&(C=!1),o.setText(M)}if(s){const M=s(f);M&&(C=!1),o.setImage(M)}return l&&o.setZIndex(l(f)),C?null:o}}function YC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=Ree(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=VO(n,e+"fill-color",t)}if(!r)return null;const i=new Gm;return function(s){const l=r(s);return l===jO?null:(i.setColor(l),i)}}function qC(n,e,t){const r=wd(n,e+"stroke-width",t),i=VO(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Nm(n,e+"stroke-line-cap",t),l=Nm(n,e+"stroke-line-join",t),o=mz(n,e+"stroke-line-dash",t),f=wd(n,e+"stroke-line-dash-offset",t),C=wd(n,e+"stroke-miter-limit",t),M=new K0;return function(B){if(i){const D=i(B);if(D===jO)return null;M.setColor(D)}if(r&&M.setWidth(r(B)),s){const D=s(B);if(D!=="butt"&&D!=="round"&&D!=="square")throw new Error("Expected butt, round, or square line cap");M.setLineCap(D)}if(l){const D=l(B);if(D!=="bevel"&&D!=="round"&&D!=="miter")throw new Error("Expected bevel, round, or miter line join");M.setLineJoin(D)}return o&&M.setLineDash(o(B)),f&&M.setLineDashOffset(f(B)),C&&M.setMiterLimit(C(B)),M}}function Oee(n,e){const t="text-",r=Nm(n,t+"value",e);if(!r)return null;const i=YC(n,t,e),s=YC(n,t+"background-",e),l=qC(n,t,e),o=qC(n,t+"background-",e),f=Nm(n,t+"font",e),C=wd(n,t+"max-angle",e),M=wd(n,t+"offset-x",e),B=wd(n,t+"offset-y",e),D=Cy(n,t+"overflow",e),R=Nm(n,t+"placement",e),U=wd(n,t+"repeat",e),G=i3(n,t+"scale",e),W=Cy(n,t+"rotate-with-view",e),J=wd(n,t+"rotation",e),$=Nm(n,t+"align",e),oe=Nm(n,t+"justify",e),te=Nm(n,t+"baseline",e),H=Cy(n,t+"keep-upright",e),re=mz(n,t+"padding",e),j=o3(n,t+"declutter-mode"),ue=new r3({declutterMode:j});return function(me){if(ue.setText(r(me)),i&&ue.setFill(i(me)),s&&ue.setBackgroundFill(s(me)),l&&ue.setStroke(l(me)),o&&ue.setBackgroundStroke(o(me)),f&&ue.setFont(f(me)),C&&ue.setMaxAngle(C(me)),M&&ue.setOffsetX(M(me)),B&&ue.setOffsetY(B(me)),D&&ue.setOverflow(D(me)),R){const ge=R(me);if(ge!=="point"&&ge!=="line")throw new Error("Expected point or line for text-placement");ue.setPlacement(ge)}if(U&&ue.setRepeat(U(me)),G&&ue.setScale(G(me)),W&&ue.setRotateWithView(W(me)),J&&ue.setRotation(J(me)),$){const ge=$(me);if(ge!=="left"&&ge!=="center"&&ge!=="right"&&ge!=="end"&&ge!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ue.setTextAlign(ge)}if(oe){const ge=oe(me);if(ge!=="left"&&ge!=="right"&&ge!=="center")throw new Error("Expected left, right, or center for text-justify");ue.setJustify(ge)}if(te){const ge=te(me);if(ge!=="bottom"&&ge!=="top"&&ge!=="middle"&&ge!=="alphabetic"&&ge!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ue.setTextBaseline(ge)}return re&&ue.setPadding(re(me)),H&&ue.setKeepUpright(H(me)),ue}}function Iee(n,e){return"icon-src"in n?Tee(n,e):"shape-points"in n?kee(n,e):"circle-radius"in n?Pee(n,e):null}function Tee(n,e){const t="icon-",r=t+"src",i=gz(n[r],r),s=Q2(n,t+"anchor",e),l=i3(n,t+"scale",e),o=wd(n,t+"opacity",e),f=Q2(n,t+"displacement",e),C=wd(n,t+"rotation",e),M=Cy(n,t+"rotate-with-view",e),B=K9(n,t+"anchor-origin"),D=L9(n,t+"anchor-x-units"),R=L9(n,t+"anchor-y-units"),U=Lee(n,t+"color"),G=Fee(n,t+"cross-origin"),W=Kee(n,t+"offset"),J=K9(n,t+"offset-origin"),$=Y2(n,t+"width"),oe=Y2(n,t+"height"),te=Dee(n,t+"size"),H=o3(n,t+"declutter-mode"),re=new W2({src:i,anchorOrigin:B,anchorXUnits:D,anchorYUnits:R,color:U,crossOrigin:G,offset:W,offsetOrigin:J,height:oe,width:$,size:te,declutterMode:H});return function(j){return o&&re.setOpacity(o(j)),f&&re.setDisplacement(f(j)),C&&re.setRotation(C(j)),M&&re.setRotateWithView(M(j)),l&&re.setScale(l(j)),s&&re.setAnchor(s(j)),re}}function kee(n,e){const t="shape-",r=t+"points",i=t+"radius",s=sB(n[r],r),l=sB(n[i],i),o=YC(n,t,e),f=qC(n,t,e),C=i3(n,t+"scale",e),M=Q2(n,t+"displacement",e),B=wd(n,t+"rotation",e),D=Cy(n,t+"rotate-with-view",e),R=Y2(n,t+"radius2"),U=Y2(n,t+"angle"),G=o3(n,t+"declutter-mode"),W=new n3({points:s,radius:l,radius2:R,angle:U,declutterMode:G});return function(J){return o&&W.setFill(o(J)),f&&W.setStroke(f(J)),M&&W.setDisplacement(M(J)),B&&W.setRotation(B(J)),D&&W.setRotateWithView(D(J)),C&&W.setScale(C(J)),W}}function Pee(n,e){const t="circle-",r=YC(n,t,e),i=qC(n,t,e),s=wd(n,t+"radius",e),l=i3(n,t+"scale",e),o=Q2(n,t+"displacement",e),f=wd(n,t+"rotation",e),C=Cy(n,t+"rotate-with-view",e),M=o3(n,t+"declutter-mode"),B=new T_({radius:5,declutterMode:M});return function(D){return s&&B.setRadius(s(D)),r&&B.setFill(r(D)),i&&B.setStroke(i(D)),o&&B.setDisplacement(o(D)),f&&B.setRotation(f(D)),C&&B.setRotateWithView(C(D)),l&&B.setScale(l(D)),B}}function wd(n,e,t){if(!(e in n))return;const r=Jm(n[e],Ps,t);return function(i){return sB(r(i),e)}}function Nm(n,e,t){if(!(e in n))return null;const r=Jm(n[e],xd,t);return function(i){return gz(r(i),e)}}function Ree(n,e,t){const r=Nm(n,e+"pattern-src",t),i=F9(n,e+"pattern-offset",t),s=F9(n,e+"pattern-size",t),l=VO(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:l&&l(o)}}}function Cy(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Zh,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function VO(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Sp,t);return function(i){return yz(r(i),e)}}function mz(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Hg,t);return function(i){return k_(r(i),e)}}function Q2(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Hg,t);return function(i){const s=k_(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function F9(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Hg,t);return function(i){return vz(r(i),e)}}function i3(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Hg|Ps,t);return function(i){return Uee(r(i),e)}}function Y2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Dee(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return xh(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Fee(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function K9(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function L9(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Kee(n,e){const t=n[e];if(t!==void 0)return k_(t,e)}function o3(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Lee(n,e){const t=n[e];if(t!==void 0)return yz(t,e)}function k_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function gz(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function sB(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function yz(n,e){if(typeof n=="string")return n;const t=k_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function vz(n,e){const t=k_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Uee(n,e){return typeof n=="number"?n:vz(n,e)}const U9={RENDER_ORDER:"renderOrder"};class HO extends Hy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(U9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new oz(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(U9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?pz:e;const t=zee(e);this.styleFunction_=e===null?void 0:Mee(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function zee(n){if(n===void 0)return pz;if(!n)return null;if(typeof n=="function"||n instanceof Zd)return n;if(!Array.isArray(n))return D9([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Zd){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!(l instanceof Zd))throw new Error("Expected a list of style instances");i[s]=l}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");i[s]=l}return Eee(i)}return D9(n)}class Cz extends Fp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class Nee extends __{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){mo()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;dm(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),LU(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,l,o,f){let C;const M=t.viewState;function B(te,H,re,j){return s.call(l,H,te?re:null,j)}const D=M.projection,R=gO(e.slice(),D),U=[[0,0]];if(D.canWrapX()&&i){const te=D.getExtent(),H=Us(te);U.push([-H,0],[H,0])}const G=t.layerStatesArray,W=G.length,J=[],$=[];for(let te=0;te<U.length;te++)for(let H=W-1;H>=0;--H){const re=G[H],j=re.layer;if(j.hasRenderer()&&GO(re,M)&&o.call(f,j)){const ue=j.getRenderer(),me=j.getSource();if(ue&&me){const ge=me.getWrapX()?R:e,we=B.bind(null,re.managed);$[0]=ge[0]+U[te][0],$[1]=ge[1]+U[te][1],C=ue.forEachFeatureAtCoordinate($,t,r,we,J)}if(C)return C}}if(J.length===0)return;const oe=1/J.length;return J.forEach((te,H)=>te.distanceSq+=H*oe),J.sort((te,H)=>te.distanceSq-H.distanceSq),J.some(te=>C=te.callback(te.feature,te.layer,te.geometry)),C}hasFeatureAtCoordinate(e,t,r,i,s,l){return this.forEachFeatureAtCoordinate(e,t,r,i,FC,this,s,l)!==void 0}getMap(){return this.map_}renderFrame(e){mo()}scheduleExpireIconCache(e){Uf.canExpireCache()&&e.postRenderFunctions.push(Gee)}}function Gee(n,e){Uf.expire()}class jee extends Nee{constructor(e){super(e),this.fontChangeListenerKey_=Rs(Eg,ky.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=e3+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new Cz(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){il(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Lf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,f)=>o.zIndex-f.zIndex);t.some(o=>o.layer instanceof HO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let l=null;for(let o=0,f=t.length;o<f;++o){const C=t[o];e.layerIndex=o;const M=C.layer,B=M.getSourceState();if(!GO(C,i)||B!="ready"&&B!="undefined"){M.unrender();continue}const D=M.render(e,l);D&&(D!==l&&(this.children_.push(D),l=D),s.push(C))}this.declutter(e,s),JX(this.element_,this.children_),this.dispatchRenderEvent(Lf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function _z(n){if(n instanceof Hy){n.setMapInternal(null);return}n instanceof Vy&&n.getLayers().forEach(_z)}function bz(n,e){if(n instanceof Hy){n.setMapInternal(e);return}if(n instanceof Vy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)bz(t[r],e)}}let s3=class extends Kp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Wee(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:bZ,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Sd(),this.pixelToCoordinateTransform_=Sd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||rJ(),this.interactions=t.interactions||wJ({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new CU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(vh.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(vh.VIEW,this.handleViewChanged_),this.addChangeListener(vh.SIZE,this.handleSizeChanged_),this.addChangeListener(vh.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof wp)&&e.view.then(function(i){r.setView(new wp(i))}),this.controls.addEventListener(bd.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(bd.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(bd.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(bd.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(bd.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(bd.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){bz(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,l=r.layerFilter!==void 0?r.layerFilter:FC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,l,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Vy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:FC,s=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,l,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],l=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/l]}getTarget(){return this.get(vh.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return X6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Pu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(vh.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof rm){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const l=i.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Um(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Pu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(vh.SIZE)}getView(){return this.get(vh.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return SZ(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new E0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===G6.POINTERDOWN||r===co.WHEEL||r===co.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,l=t.target,o=s instanceof ShadowRoot?s.host===l?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const l=i[s];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const l=e.viewHints;if(l[ql.ANIMATING]||l[ql.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Lf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Lf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ay(zm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ay(zm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)il(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(co.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(co.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new jee(this)),this.mapBrowserEventHandler_=new MZ(this,this.moveTolerance_);for(const s in zA)this.mapBrowserEventHandler_.addEventListener(zA[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(co.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(co.WHEEL,this.boundHandleBrowserEvent_,vU?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Rs(r,co.KEYDOWN,this.handleBrowserEvent,this),Rs(r,co.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(il(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(il(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Rs(e,ky.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Rs(e,co.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(il),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new O0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Rs(e,ky.PROPERTYCHANGE,this.render,this),Rs(e,co.CHANGE,this.render,this),Rs(e,"addlayer",this.handleLayerAdd_,this),Rs(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){_z(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&E9(t)&&r&&r.isDef()){const l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:K2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:ko(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const f=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=K2(o.nextCenter,o.nextResolution,f,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!e1(this.previousExtent_)&&!$m(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ay(zm.MOVESTART,this,i)),this.previousExtent_=qy(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ql.ANIMATING]&&!s.viewHints[ql.INTERACTING]&&!$m(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ay(zm.MOVEEND,this,s)),_U(s.extent,this.previousExtent_))),this.dispatchEvent(new ay(zm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(zm.LOADSTART)||this.hasListener(zm.LOADEND)||this.hasListener(Lf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new O0("removelayer",t)),this.set(vh.LAYERGROUP,e)}setSize(e){this.set(vh.SIZE,e)}setTarget(e){this.set(vh.TARGET,e)}setView(e){if(!e||e instanceof wp){this.set(vh.VIEW,e);return}this.set(vh.VIEW,new wp);const t=this;e.then(function(r){t.setView(new wp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(l)&&(t=[Math.max(0,s),Math.max(0,l)],!E9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&IU("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!X0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Wee(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Vy({layers:n.layers});t[vh.LAYERGROUP]=r,t[vh.TARGET]=n.target,t[vh.VIEW]=n.view instanceof wp?n.view:new wp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new rm(n.controls.slice()):(ia(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new rm(n.interactions.slice()):(ia(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new rm(n.overlays.slice()):(ia(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new rm,{controls:i,interactions:s,keyboardEventTarget:e,overlays:l,values:t}}class a3 extends Kp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new a3(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(il(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Rs(e,co.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Qee(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Qee(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ia(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function xz(n,e,t,r){const i=[];let s=jf();for(let l=0,o=t.length;l<o;++l){const f=t[l];s=pO(n,e,f[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=f[f.length-1]}return i}function q2(n,e,t,r,i,s,l){let o,f;const C=(t-e)/r;if(C===1)o=e;else if(C===2)o=e,f=i;else if(C!==0){let M=n[e],B=n[e+1],D=0;const R=[0];for(let W=e+r;W<t;W+=r){const J=n[W],$=n[W+1];D+=Math.sqrt((J-M)*(J-M)+($-B)*($-B)),R.push(D),M=J,B=$}const U=i*D,G=fZ(R,U);G<0?(f=(U-R[-G-2])/(R[-G-1]-R[-G-2]),o=e+(-G-2)*r):o=e+G*r}l=l>1?l:2,s=s||new Array(l);for(let M=0;M<l;++M)s[M]=o===void 0?NaN:f===void 0?n[o+M]:Hd(n[o+M],n[o+r+M],f);return s}function aB(n,e,t,r,i,s){if(t==e)return null;let l;if(i<n[e+r-1])return s?(l=n.slice(e,e+r),l[r-1]=i,l):null;if(n[t-1]<i)return s?(l=n.slice(t-r,t),l[r-1]=i,l):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,f=t/r;for(;o<f;){const D=o+f>>1;i<n[(D+1)*r-1]?f=D:o=D+1}const C=n[o*r-1];if(i==C)return n.slice((o-1)*r,(o-1)*r+r);const M=n[(o+1)*r-1],B=(i-C)/(M-C);l=[];for(let D=0;D<r-1;++D)l.push(Hd(n[(o-1)*r+D],n[o*r+D],B));return l.push(i),l}function Yee(n,e,t,r,i,s,l){if(l)return aB(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let f=0,C=t.length;f<C;++f){const M=t[f];if(e!=M){if(i<n[e+r-1])return null;if(i<=n[M-1])return aB(n,e,M,r,i,!1);e=M}}return null}class $2 extends zU{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(il),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Rs(e[t],co.CHANGE,this.changed,this))}clone(){const e=new $2(hM(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Jg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let l=0,o=s.length;l<o;++l)i=s[l].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){qy(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)xU(e,t[r].getExtent());return e}getGeometries(){return hM(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,l=r.length;s<l;++s){const o=r[s],f=o.getSimplifiedGeometry(e);t.push(f),f!==o&&(i=!0)}return i?new $2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=sf(this.getExtent()));const i=this.geometries_;for(let s=0,l=i.length;s<l;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(hM(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function hM(n){return n.map(e=>e.clone())}function ZO(n,e,t,r){let i=n[e],s=n[e+1],l=0;for(let o=e+r;o<t;o+=r){const f=n[o],C=n[o+1];l+=Math.sqrt((f-i)*(f-i)+(C-s)*(C-s)),i=f,s=C}return l}class Zg extends t1{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){cm(this.flatCoordinates,e),this.changed()}clone(){const e=new Zg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Jg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),EO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return YU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,aB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return F0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return q2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return ZO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Xx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Zg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zx(this.flatCoordinates,0,e,this.stride),this.changed()}}class $C extends t1{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],l=[];for(let f=0,C=i.length;f<C;++f){const M=i[f];cm(s,M.getFlatCoordinates()),l.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=l}}appendLineString(e){cm(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new $C(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Jg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(SO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),BO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,Yee(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return zC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Zg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l],C=new Zg(e.slice(s,f),r);i.push(C),s=f}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=ZO(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let l=0,o=i.length;l<o;++l){const f=i[l],C=q2(t,r,f,s,.5);cm(e,C),r=f}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=WU(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new $C(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return LX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=E_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class P_ extends t1{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){cm(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new P_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Jg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,l=this.stride;for(let o=0,f=s.length;o<f;o+=l){const C=zg(e,t,s[o],s[o+1]);if(C<i){i=C;for(let M=0;M<l;++M)r[M]=s[o+M];r.length=l}}return i}getCoordinates(){return F0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Vg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,l=e.length;s<l;s+=r){const o=new Vg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const l=t[i],o=t[i+1];if(fO(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zx(this.flatCoordinates,0,e,this.stride),this.changed()}}class VC extends t1{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],l=[];for(let o=0,f=i.length;o<f;++o){const C=i[o],M=s.length,B=C.getEnds();for(let D=0,R=B.length;D<R;++D)B[D]+=M;cm(s,C.getFlatCoordinates()),l.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=l}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;cm(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new VC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Jg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TX(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return KX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return IX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),eB(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,J6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=xz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=QU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new P_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;VU(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=eB(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=DX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new VC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,l=r.length;s<l;++s)r[s]-=t;return new Vm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const f=r[l].slice(),C=f[f.length-1];if(s!==0)for(let B=0,D=f.length;B<D;++B)f[B]-=s;const M=new Vm(t.slice(s,C),e,f);i.push(M),s=C}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return UX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=jU(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const z9=Sd();class bh{constructor(e,t,r,i,s,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?bU(this.flatCoordinates_):pO(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=sf(this.getExtent());this.flatInteriorPoints_=TO(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=HU(this.flatCoordinates_,this.ends_),t=xz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=QU(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=q2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const l=r[i],o=q2(e,t,l,2,.5);cm(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Sa(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Du(r)/Du(t);dm(z9,r[0],r[3],i,-i,0,0,0),q0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,z9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new bh(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=mU((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Xx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=WU(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=OO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new bh(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}bh.prototype.getFlatCoordinates=bh.prototype.getOrientedFlatCoordinates;class Mz{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class qee extends Mz{constructor(e,t,r,i,s,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?jx(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Sd()}drawImages_(e,t,r,i){if(!this.image_)return;const s=q0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,f=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=f*this.imageOpacity_);let C=this.imageRotation_;this.transformRotation_===0&&(C-=this.viewRotation_),this.imageRotateWithView_&&(C+=this.viewRotation_);for(let M=0,B=s.length;M<B;M+=2){const D=s[M]-this.imageAnchorX_,R=s[M+1]-this.imageAnchorY_;if(C!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const U=D+this.imageAnchorX_,G=R+this.imageAnchorY_;dm(o,U,G,1,1,C,-U,-G),l.save(),l.transform.apply(l,o),l.translate(U,G),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,D,R,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=f)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=q0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const f=s[t]+this.textOffsetX_,C=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(f-this.textOffsetX_,C-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,f,C),this.textFillState_&&l.fillText(this.text_,f,C))}}moveToLineTo_(e,t,r,i,s){const l=this.context_,o=q0(e,t,r,i,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let f=o.length;s&&(f-=2);for(let C=2;C<f;C+=2)l.lineTo(o[C],o[C+1]);return s&&l.closePath(),r}drawRings_(e,t,r,i){for(let s=0,l=r.length;s<l;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!GA(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=OX(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),l=this.context_;l.beginPath(),l.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!GA(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(GA(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const l=e.getEnds(),o=e.getStride();r.beginPath();for(let f=0,C=l.length;f<C;++f)s=this.moveToLineTo_(i,s,l[f],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!GA(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!GA(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,f=s.length;o<f;++o){const C=s[o];i=this.drawRings_(r,i,C,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),X0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:WC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:sm(r||Md)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),f=t.getWidth(),C=t.getMiterLimit(),M=s||Wm;this.strokeState_={lineCap:i!==void 0?i:Fy,lineDash:this.pixelRatio_===1?M:M.map(B=>B*this.pixelRatio_),lineDashOffset:(l||Qm)*this.pixelRatio_,lineJoin:o!==void 0?o:Ky,lineWidth:(f!==void 0?f:QC)*this.pixelRatio_,miterLimit:C!==void 0?C:GC,strokeStyle:sm(r||jC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/r,l[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const R=t.getColor();this.textFillState_={fillStyle:sm(R||Md)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const R=r.getColor(),U=r.getLineCap(),G=r.getLineDash(),W=r.getLineDashOffset(),J=r.getLineJoin(),$=r.getWidth(),oe=r.getMiterLimit();this.textStrokeState_={lineCap:U!==void 0?U:Fy,lineDash:G||Wm,lineDashOffset:W||Qm,lineJoin:J!==void 0?J:Ky,lineWidth:$!==void 0?$:QC,miterLimit:oe!==void 0?oe:GC,strokeStyle:sm(R||jC)}}const i=e.getFont(),s=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),f=e.getRotation(),C=e.getScaleArray(),M=e.getText(),B=e.getTextAlign(),D=e.getTextBaseline();this.textState_={font:i!==void 0?i:cz,textAlign:B!==void 0?B:WC,textBaseline:D!==void 0?D:j2},this.text_=M!==void 0?Array.isArray(M)?M.reduce((R,U,G)=>R+=G%2?" ":U,""):M:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*C[0],this.pixelRatio_*C[1]]}}}const $ee=.5,wz={Point:nte,LineString:Jee,Polygon:ite,MultiPoint:rte,MultiLineString:ete,MultiPolygon:tte,GeometryCollection:Xee,Circle:Hee};function Vee(n,e){return parseInt(ko(n),10)-parseInt(ko(e),10)}function lB(n,e){const t=Sz(n,e);return t*t}function Sz(n,e){return $ee*n/e}function Hee(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const f=n.getBuilder(t.getZIndex(),"Circle");f.setFillStrokeStyle(s,l),f.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r)}}function V2(n,e,t,r,i,s,l,o){const f=[],C=t.getImage();if(C){let D=!0;const R=C.getImageState();R==mi.LOADED||R==mi.ERROR?D=!1:R==mi.IDLE&&C.load(),D&&f.push(C.ready())}const M=t.getFill();M&&M.loading()&&f.push(M.ready());const B=f.length>0;return B&&Promise.all(f).then(()=>i(null)),Zee(n,e,t,r,s,l,o),B}function Zee(n,e,t,r,i,s,l){const o=t.getGeometryFunction()(e);if(!o)return;const f=o.simplifyTransformed(r,i);if(t.getRenderer())Ez(n,f,t,e,l);else{const M=wz[f.getType()];M(n,f,t,e,l,s)}}function Ez(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,f=l.length;o<f;++o)Ez(n,l[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function Xee(n,e,t,r,i,s){const l=e.getGeometriesArray();let o,f;for(o=0,f=l.length;o<f;++o){const C=wz[l[o].getType()];C(n,l[o],t,r,i,s)}}function Jee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function ete(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function tte(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(l||s){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,l),f.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}function nte(n,e,t,r,i,s){const l=t.getImage(),o=t.getText(),f=o&&o.getText(),C=s&&l&&f?{}:void 0;if(l){if(l.getImageState()!=mi.LOADED)return;const M=n.getBuilder(t.getZIndex(),"Image");M.setImageStyle(l,C),M.drawPoint(e,r,i)}if(f){const M=n.getBuilder(t.getZIndex(),"Text");M.setTextStyle(o,C),M.drawText(e,r,i)}}function rte(n,e,t,r,i,s){const l=t.getImage(),o=l&&l.getOpacity()!==0,f=t.getText(),C=f&&f.getText(),M=s&&o&&C?{}:void 0;if(o){if(l.getImageState()!=mi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(l,M),B.drawMultiPoint(e,r,i)}if(C){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(f,M),B.drawText(e,r,i)}}function ite(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,l),f.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}let ote=!1;function Bz(n,e,t,r,i,s,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=ote,o.onload=function(f){if(!o.status||o.status>=200&&o.status<300){const C=e.getType();try{let M;C=="text"||C=="json"?M=o.responseText:C=="xml"?M=o.responseXML||o.responseText:C=="arraybuffer"&&(M=o.response),M?s(e.readFeatures(M,{extent:t,featureProjection:i}),e.readProjection(M)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function N9(n,e){return function(t,r,i,s,l){Bz(n,e,t,r,i,(o,f)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),l!==void 0&&l()})}}function ste(n,e){return[[-1/0,-1/0,1/0,1/0]]}function ate(n,e){return[n]}class G9{constructor(e){this.rbush_=new oz(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[ko(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const l=e[i],o=t[i],f={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};r[i]=f,this.items_[ko(o)]=f}this.rbush_.load(r)}remove(e){const t=ko(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[ko(t)],i=[r.minX,r.minY,r.maxX,r.maxY];$m(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return H0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return qm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Zy extends Kp{constructor(e){super(),this.projection=Sa(e.projection),this.attributions_=j9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=j9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function j9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Of={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class b0 extends Fp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class o2 extends Zy{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=KC,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ia(this.format_,"`format` must be set when `url` is set"),this.loader_=N9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:ste;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new G9:null,this.loadedExtentsRtree_=new G9,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new rm(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ko(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new b0(Of.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof bh||(this.featureChangeKeys_[e]=[Rs(t,co.CHANGE,this.handleFeatureChange_,this),Rs(t,ky.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof bh){const s=this.idIndex_[i];s instanceof bh?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(ia(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,l=e.length;s<l;s++){const o=e[s],f=ko(o);this.addToIndex_(f,o)&&r.push(o)}for(let s=0,l=r.length;s<l;s++){const o=r[s],f=ko(o);this.setupChangeEvents_(f,o);const C=o.getGeometry();if(C){const M=C.getExtent();t.push(M),i.push(o)}else this.nullGeometryFeatures_[f]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(Of.ADDFEATURE))for(let s=0,l=r.length;s<l;s++)this.dispatchEvent(new b0(Of.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Of.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Of.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(bd.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(bd.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(il);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new b0(Of.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof bh||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof bh||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),H0(this.nullGeometryFeatures_)||cm(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=BU(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const l=[NaN,NaN];let o=1/0;const f=[-1/0,-1/0,1/0,1/0];return t=t||FC,this.featuresRtree_.forEachInExtent(f,function(C){if(t(C)){const M=C.getGeometry(),B=o;if(o=M instanceof bh?0:M.closestPointXY(r,i,l,o),o<B){s=C;const D=Math.sqrt(o);f[0]=r-D,f[1]=i-D,f[2]=r+D,f[3]=i+D}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=ko(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const l=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const s=t.getId();if(s!==void 0){const l=s.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new b0(Of.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ko(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&H0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let l=0,o=s.length;l<o;++l){const f=s[l];i.forEachInExtent(f,function(M){return im(M.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new b0(Of.FEATURESLOADSTART)),this.loader_.call(this,f,t,r,M=>{--this.loadingExtentsCount_,this.dispatchEvent(new b0(Of.FEATURESLOADEND,void 0,M))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new b0(Of.FEATURESLOADERROR))}),i.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if($m(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ko(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(il),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),l=this.idIndex_[s];l===e?delete this.idIndex_[s]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[s]=l[0]))}return delete this.uidIndex_[t],this.hasListener(Of.REMOVEFEATURE)&&this.dispatchEvent(new b0(Of.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ia(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(N9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const $i={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Tb=[$i.FILL],L0=[$i.STROKE],Rg=[$i.BEGIN_PATH],W9=[$i.CLOSE_PATH];class R_ extends Mz{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let l=s.length;for(let o=0,f=e.length;o<f;o+=t)i[0]=e[o],i[1]=e[o+1],$g(r,i)&&(s[l++]=i[0],s[l++]=i[1]);return l}appendFlatLineCoordinates(e,t,r,i,s,l){const o=this.coordinates;let f=o.length;const C=this.getBufferedMaxExtent();l&&(t+=i);let M=e[t],B=e[t+1];const D=this.tmpCoordinate_;let R=!0,U,G,W;for(U=t+i;U<r;U+=i)D[0]=e[U],D[1]=e[U+1],W=Q6(C,D),W!==G?(R&&(o[f++]=M,o[f++]=B,R=!1),o[f++]=D[0],o[f++]=D[1]):W===_c.INTERSECTING?(o[f++]=D[0],o[f++]=D[1],R=!1):R=!0,M=D[0],B=D[1],G=W;return(s&&R||U===t+i)&&(o[f++]=M,o[f++]=B),f}drawCustomCoordinates_(e,t,r,i,s){for(let l=0,o=r.length;l<o;++l){const f=r[l],C=this.appendFlatLineCoordinates(e,t,f,i,!1,!1);s.push(C),t=f}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const l=e.getType(),o=e.getStride(),f=this.coordinates.length;let C,M,B,D,R;switch(l){case"MultiPolygon":C=e.getOrientedFlatCoordinates(),D=[];const U=e.getEndss();R=0;for(let G=0,W=U.length;G<W;++G){const J=[];R=this.drawCustomCoordinates_(C,R,U[G],o,J),D.push(J)}this.instructions.push([$i.CUSTOM,f,D,e,r,J6,s]),this.hitDetectionInstructions.push([$i.CUSTOM,f,D,e,i||r,J6,s]);break;case"Polygon":case"MultiLineString":B=[],C=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),R=this.drawCustomCoordinates_(C,0,e.getEnds(),o,B),this.instructions.push([$i.CUSTOM,f,B,e,r,zC,s]),this.hitDetectionInstructions.push([$i.CUSTOM,f,B,e,i||r,zC,s]);break;case"LineString":case"Circle":C=e.getFlatCoordinates(),M=this.appendFlatLineCoordinates(C,0,C.length,o,!1,!1),this.instructions.push([$i.CUSTOM,f,M,e,r,F0,s]),this.hitDetectionInstructions.push([$i.CUSTOM,f,M,e,i||r,F0,s]);break;case"MultiPoint":C=e.getFlatCoordinates(),M=this.appendFlatPointCoordinates(C,o),M>f&&(this.instructions.push([$i.CUSTOM,f,M,e,r,F0,s]),this.hitDetectionInstructions.push([$i.CUSTOM,f,M,e,i||r,F0,s]));break;case"Point":C=e.getFlatCoordinates(),this.coordinates.push(C[0],C[1]),M=this.coordinates.length,this.instructions.push([$i.CUSTOM,f,M,e,r,void 0,s]),this.hitDetectionInstructions.push([$i.CUSTOM,f,M,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[$i.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[$i.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,l=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==$i.END_GEOMETRY?l=t:s==$i.BEGIN_GEOMETRY&&(i[2]=t,mZ(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=sm(r||Md)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=sm(r||jC);const i=e.getLineCap();t.lineCap=i!==void 0?i:Fy;const s=e.getLineDash();t.lineDash=s?s.slice():Wm;const l=e.getLineDashOffset();t.lineDashOffset=l||Qm;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Ky;const f=e.getWidth();t.lineWidth=f!==void 0?f:QC;const C=e.getMiterLimit();t.miterLimit=C!==void 0?C:GC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[$i.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[$i.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,f=e.lineWidth,C=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!X0(e.currentLineDash,s)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=f||e.currentMiterLimit!=C)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=f,e.currentMiterLimit=C)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[$i.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=_U(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Q0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class lte extends R_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!$g(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([$i.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([$i.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let f=0,C=i.length;f<C;f+=e.getStride())(!this.maxExtent||$g(this.maxExtent,i.slice(f,f+2)))&&s.push(i[f],i[f+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([$i.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([$i.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Ate extends R_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[$i.MOVE_TO_LINE_TO,s,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([$i.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wm,Qm],Rg);const o=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(o,0,o.length,f),this.hitDetectionInstructions.push(L0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([$i.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wm,Qm],Rg);const o=e.getEnds(),f=e.getFlatCoordinates(),C=e.getStride();let M=0;for(let B=0,D=o.length;B<D;++B)M=this.drawFlatCoordinates_(f,M,o[B],C);this.hitDetectionInstructions.push(L0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(L0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(L0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Rg)}}class Q9 extends R_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,l=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,f=r.length;this.instructions.push(Rg),this.hitDetectionInstructions.push(Rg);for(let C=0;C<f;++C){const M=r[C],B=this.coordinates.length,D=this.appendFlatLineCoordinates(e,t,M,i,!0,!o),R=[$i.MOVE_TO_LINE_TO,B,D];this.instructions.push(R),this.hitDetectionInstructions.push(R),o&&(this.instructions.push(W9),this.hitDetectionInstructions.push(W9)),t=M}return l&&(this.instructions.push(Tb),this.hitDetectionInstructions.push(Tb)),o&&(this.instructions.push(L0),this.hitDetectionInstructions.push(L0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([$i.SET_FILL_STYLE,Md]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([$i.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wm,Qm]);const o=e.getFlatCoordinates(),f=e.getStride(),C=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,f,!1,!1);const M=[$i.CIRCLE,C];this.instructions.push(Rg,M),this.hitDetectionInstructions.push(Rg,M),i.fillStyle!==void 0&&(this.instructions.push(Tb),this.hitDetectionInstructions.push(Tb)),i.strokeStyle!==void 0&&(this.instructions.push(L0),this.hitDetectionInstructions.push(L0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([$i.SET_FILL_STYLE,Md]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([$i.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wm,Qm]);const o=e.getEnds(),f=e.getOrientedFlatCoordinates(),C=e.getStride();this.drawFlatCoordinatess_(f,0,o,C),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([$i.SET_FILL_STYLE,Md]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([$i.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wm,Qm]);const o=e.getEndss(),f=e.getOrientedFlatCoordinates(),C=e.getStride();let M=0;for(let B=0,D=o.length;B<D;++B)M=this.drawFlatCoordinatess_(f,M,o[B],C);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=wg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function ute(n,e,t,r,i){const s=[];let l=t,o=0,f=e.slice(t,2);for(;o<n&&l+i<r;){const[C,M]=f.slice(-2),B=e[l+i],D=e[l+i+1],R=Math.sqrt((B-C)*(B-C)+(D-M)*(D-M));if(o+=R,o>=n){const U=(n-o+R)/R,G=Hd(C,B,U),W=Hd(M,D,U);f.push(G,W),s.push(f),f=[G,W],o==n&&(l+=i),o=0}else if(o<n)f.push(e[l+i],e[l+i+1]),l+=i;else{const U=R-o,G=Hd(C,B,U/R),W=Hd(M,D,U/R);f.push(G,W),s.push(f),f=[G,W],o=0,l+=i}}return o>0&&s.push(f),s}function cte(n,e,t,r,i){let s=t,l=t,o=0,f=0,C=t,M,B,D,R,U,G,W,J,$,oe;for(B=t;B<r;B+=i){const te=e[B],H=e[B+1];U!==void 0&&($=te-U,oe=H-G,R=Math.sqrt($*$+oe*oe),W!==void 0&&(f+=D,M=Math.acos((W*$+J*oe)/(D*R)),M>n&&(f>o&&(o=f,s=C,l=B),f=0,C=B-i)),D=R,W=$,J=oe),U=te,G=H}return f+=R,f>o?[C,B]:[s,l]}const H2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class hte extends R_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Md]={fillStyle:Md},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!i&&!s)return;const o=this.coordinates;let f=o.length;const C=e.getType();let M=null,B=e.getStride();if(l.placement==="line"&&(C=="LineString"||C=="MultiLineString"||C=="Polygon"||C=="MultiPolygon")){if(!GA(this.maxExtent,e.getExtent()))return;let D;if(M=e.getFlatCoordinates(),C=="LineString")D=[M.length];else if(C=="MultiLineString")D=e.getEnds();else if(C=="Polygon")D=e.getEnds().slice(0,1);else if(C=="MultiPolygon"){const W=e.getEndss();D=[];for(let J=0,$=W.length;J<$;++J)D.push(W[J][0])}this.beginGeometry(e,t,r);const R=l.repeat,U=R?void 0:l.textAlign;let G=0;for(let W=0,J=D.length;W<J;++W){let $;R?$=ute(R*this.resolution,M,G,D[W],B):$=[M.slice(G,D[W])];for(let oe=0,te=$.length;oe<te;++oe){const H=$[oe];let re=0,j=H.length;if(U==null){const me=cte(l.maxAngle,H,0,H.length,2);re=me[0],j=me[1]}for(let me=re;me<j;me+=B)o.push(H[me],H[me+1]);const ue=o.length;G=D[W],this.drawChars_(f,ue),f=ue}}this.endGeometry(t)}else{let D=l.overflow?null:[];switch(C){case"Point":case"MultiPoint":M=e.getFlatCoordinates();break;case"LineString":M=e.getFlatMidpoint();break;case"Circle":M=e.getCenter();break;case"MultiLineString":M=e.getFlatMidpoints(),B=2;break;case"Polygon":M=e.getFlatInteriorPoint(),l.overflow||D.push(M[2]/this.resolution),B=3;break;case"MultiPolygon":const te=e.getFlatInteriorPoints();M=[];for(let H=0,re=te.length;H<re;H+=3)l.overflow||D.push(te[H+2]/this.resolution),M.push(te[H],te[H+1]);if(M.length===0)return;B=2;break}const R=this.appendFlatPointCoordinates(M,B);if(R===f)return;if(D&&(R-f)/2!==M.length/B){let te=f/2;D=D.filter((H,re)=>{const j=o[(te+re)*2]===M[re*B]&&o[(te+re)*2+1]===M[re*B+1];return j||--te,j})}this.saveTextStates_();const U=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,G=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,r);let W=l.padding;if(W!=Pg&&(l.scale[0]<0||l.scale[1]<0)){let te=l.padding[0],H=l.padding[1],re=l.padding[2],j=l.padding[3];l.scale[0]<0&&(H=-H,j=-j),l.scale[1]<0&&(te=-te,re=-re),W=[te,H,re,j]}const J=this.pixelRatio;this.instructions.push([$i.DRAW_IMAGE,f,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,W==Pg?Pg:W.map(function(te){return te*J}),U,G,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,D]);const $=1/J,oe=U?U.slice(0):null;oe&&(oe[1]=Md),this.hitDetectionInstructions.push([$i.DRAW_IMAGE,f,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[$,$],NaN,this.declutterMode_,this.declutterImageWithText_,W,oe,G,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Md:this.fillKey_,this.textOffsetX_,this.textOffsetY_,D]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||WC,justify:t.justify,textBaseline:t.textBaseline||j2,scale:t.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,C=H2[i.textBaseline],M=this.textOffsetY_*f,B=this.text_,D=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([$i.DRAW_CHARS,e,t,C,i.overflow,o,i.maxAngle,f,M,s,D*f,B,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([$i.DRAW_CHARS,e,t,C,i.overflow,o&&Md,i.maxAngle,f,M,s,D*f,B,l,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const l=e.getFill();l?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=sm(l.getColor()||Md)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const G=o.getLineDash(),W=o.getLineDashOffset(),J=o.getWidth(),$=o.getMiterLimit();s.lineCap=o.getLineCap()||Fy,s.lineDash=G?G.slice():Wm,s.lineDashOffset=W===void 0?Qm:W,s.lineJoin=o.getLineJoin()||Ky,s.lineWidth=J===void 0?QC:J,s.miterLimit=$===void 0?GC:$,s.strokeStyle=sm(o.getColor()||jC)}r=this.textState_;const f=e.getFont()||cz;vee(f);const C=e.getScaleArray();r.overflow=e.getOverflow(),r.font=f,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||j2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Pg,r.scale=C===void 0?[1,1]:C;const M=e.getOffsetX(),B=e.getOffsetY(),D=e.getRotateWithView(),R=e.getKeepUpright(),U=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=M===void 0?0:M,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=D===void 0?!1:D,this.textKeepUpright_=R===void 0?!0:R,this.textRotation_=U===void 0?0:U,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ko(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+ko(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const dte={Circle:Q9,Default:R_,Image:lte,LineString:Ate,Polygon:Q9,Text:hte};class Oz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const l=dte[t];s=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function fte(n,e,t,r,i,s,l,o,f,C,M,B,D=!0){let R=n[e],U=n[e+1],G=0,W=0,J=0,$=0;function oe(){G=R,W=U,e+=r,R=n[e],U=n[e+1],$+=J,J=Math.sqrt((R-G)*(R-G)+(U-W)*(U-W))}do oe();while(e<t-r&&$+J<s);let te=J===0?0:(s-$)/J;const H=Hd(G,R,te),re=Hd(W,U,te),j=e-r,ue=$,me=s+o*f(C,i,M);for(;e<t-r&&$+J<me;)oe();te=J===0?0:(me-$)/J;const ge=Hd(G,R,te),we=Hd(W,U,te);let Ee=!1;if(D)if(B){const Ct=[H,re,ge,we];UU(Ct,0,4,2,B,Ct,Ct),Ee=Ct[0]>Ct[2]}else Ee=H>ge;const xe=Math.PI,We=[],be=j+r===e;e=j,J=0,$=ue,R=n[e],U=n[e+1];let rt;if(be){oe(),rt=Math.atan2(U-W,R-G),Ee&&(rt+=rt>0?-xe:xe);const Ct=(ge+H)/2,at=(we+re)/2;return We[0]=[Ct,at,(me-s)/2,rt,i],We}i=i.replace(/\n/g," ");for(let Ct=0,at=i.length;Ct<at;){oe();let Je=Math.atan2(U-W,R-G);if(Ee&&(Je+=Je>0?-xe:xe),rt!==void 0){let ft=Je-rt;if(ft+=ft>xe?-2*xe:ft<-xe?2*xe:0,Math.abs(ft)>l)return null}rt=Je;const ze=Ct;let Te=0;for(;Ct<at;++Ct){const ft=Ee?at-Ct-1:Ct,Bt=o*f(C,i[ft],M);if(e+r<t&&$+J<s+Te+Bt/2)break;Te+=Bt}if(Ct===ze)continue;const He=Ee?i.substring(at-ze,at-Ct):i.substring(ze,Ct);te=J===0?0:(s+Te/2-$)/J;const pt=Hd(G,R,te),kt=Hd(W,U,te);We.push([pt,kt,Te/2,Je,He]),s+=Te}return We}class XO{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(G2(),{get:(e,t)=>{if(typeof G2()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const l=t[++r];if(typeof e[s]=="function")e[s](...l);else{if(typeof l=="function"){e[s]=l(e);continue}e[s]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const R1=jf(),x0=[],Dm=[],Fm=[],M0=[];function Y9(n){return n[3].declutterBox}const q9=new RegExp("[-----]");function dM(n,e){return e==="start"?e=q9.test(n)?"right":"left":e==="end"&&(e=q9.test(n)?"left":"right"),H2[e]}function pte(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function mte(n,e,t){return t%2===0&&(n+=e),n}class gte{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Sd(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new XO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const l=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,f=this.textStates[t],C=this.pixelRatio,M=[f.scale[0]*C,f.scale[1]*C],B=f.justify?H2[f.justify]:dM(Array.isArray(e)?e[0]:e,f.textAlign||WC),D=i&&l.lineWidth?l.lineWidth:0,R=Array.isArray(e)?e:String(e).split(`
`).reduce(pte,[]),{width:U,height:G,widths:W,heights:J,lineWidths:$}=_ee(f,R),oe=U+D,te=[],H=(oe+2)*M[0],re=(G+D)*M[1],j={width:H<0?Math.floor(H):Math.ceil(H),height:re<0?Math.floor(re):Math.ceil(re),contextInstructions:te};(M[0]!=1||M[1]!=1)&&te.push("scale",M),i&&(te.push("strokeStyle",l.strokeStyle),te.push("lineWidth",D),te.push("lineCap",l.lineCap),te.push("lineJoin",l.lineJoin),te.push("miterLimit",l.miterLimit),te.push("setLineDash",[l.lineDash]),te.push("lineDashOffset",l.lineDashOffset)),r&&te.push("fillStyle",o.fillStyle),te.push("textBaseline","middle"),te.push("textAlign","center");const ue=.5-B;let me=B*oe+ue*D;const ge=[],we=[];let Ee=0,xe=0,We=0,be=0,rt;for(let Ct=0,at=R.length;Ct<at;Ct+=2){const Je=R[Ct];if(Je===`
`){xe+=Ee,Ee=0,me=B*oe+ue*D,++be;continue}const ze=R[Ct+1]||f.font;ze!==rt&&(i&&ge.push("font",ze),r&&we.push("font",ze),rt=ze),Ee=Math.max(Ee,J[We]);const Te=[Je,me+ue*W[We]+B*(W[We]-$[be]),.5*(D+Ee)+xe];me+=W[We],i&&ge.push("strokeText",Te),r&&we.push("fillText",Te),++We}return Array.prototype.push.apply(te,ge),Array.prototype.push.apply(te,we),this.labels_[s]=j,j}replayTextBackground_(e,t,r,i,s,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,l,o,f,C,M,B,D,R,U,G,W){o*=D[0],f*=D[1];let J=r-o,$=i-f;const oe=s+C>e?e-C:s,te=l+M>t?t-M:l,H=U[3]+oe*D[0]+U[1],re=U[0]+te*D[1]+U[2],j=J-U[3],ue=$-U[0];(G||B!==0)&&(x0[0]=j,M0[0]=j,x0[1]=ue,Dm[1]=ue,Dm[0]=j+H,Fm[0]=Dm[0],Fm[1]=ue+re,M0[1]=Fm[1]);let me;return B!==0?(me=dm(Sd(),r,i,1,1,B,-r,-i),Pu(me,x0),Pu(me,Dm),Pu(me,Fm),Pu(me,M0),qm(Math.min(x0[0],Dm[0],Fm[0],M0[0]),Math.min(x0[1],Dm[1],Fm[1],M0[1]),Math.max(x0[0],Dm[0],Fm[0],M0[0]),Math.max(x0[1],Dm[1],Fm[1],M0[1]),R1)):qm(Math.min(j,j+H),Math.min(ue,ue+re),Math.max(j,j+H),Math.max(ue,ue+re),R1),R&&(J=Math.round(J),$=Math.round($)),{drawImageX:J,drawImageY:$,drawImageW:oe,drawImageH:te,originX:C,originY:M,declutterBox:{minX:R1[0],minY:R1[1],maxX:R1[2],maxY:R1[3],value:W},canvasTransform:me,scale:D}}replayImageOrLabel_(e,t,r,i,s,l,o){const f=!!(l||o),C=i.declutterBox,M=o?o[2]*i.scale[0]/2:0;return C.minX-M<=t[0]&&C.maxX+M>=0&&C.minY-M<=t[1]&&C.maxY+M>=0&&(f&&this.replayTextBackground_(e,x0,Dm,Fm,M0,l,o),bee(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Pu(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],l=this.createLabel(e,t,i,r),o=this.strokeStates[r],f=this.pixelRatio,C=dM(Array.isArray(e)?e[0]:e,s.textAlign||WC),M=H2[s.textBaseline||j2],B=o&&o.lineWidth?o.lineWidth:0,D=l.width/f-2*s.scale[0],R=C*D+2*(.5-C)*B,U=M*l.height/f+2*(.5-M)*B;return{label:l,anchorX:R,anchorY:U}}execute_(e,t,r,i,s,l,o,f){const C=this.zIndexContext_;let M;this.pixelCoordinates_&&X0(r,this.renderedTransform_)?M=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),M=q0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),CX(this.renderedTransform_,r));let B=0;const D=i.length;let R=0,U,G,W,J,$,oe,te,H,re,j,ue,me,ge,we=0,Ee=0;const xe=this.coordinateCache_,We=this.viewRotation_,be=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,rt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:We},Ct=this.instructions!=i||this.overlaps?0:200;let at,Je,ze,Te;for(;B<D;){const He=i[B];switch(He[0]){case $i.BEGIN_GEOMETRY:at=He[1],Te=He[3],at.getGeometry()?o!==void 0&&!GA(o,Te.getExtent())?B=He[2]+1:++B:B=He[2],C&&(C.zIndex=He[4]);break;case $i.BEGIN_PATH:we>Ct&&(this.fill_(e),we=0),Ee>Ct&&(e.stroke(),Ee=0),!we&&!Ee&&(e.beginPath(),$=NaN,oe=NaN),++B;break;case $i.CIRCLE:R=He[1];const kt=M[R],ft=M[R+1],Bt=M[R+2],Tt=M[R+3],Le=Bt-kt,Pe=Tt-ft,ke=Math.sqrt(Le*Le+Pe*Pe);e.moveTo(kt+ke,ft),e.arc(kt,ft,ke,0,2*Math.PI,!0),++B;break;case $i.CLOSE_PATH:e.closePath(),++B;break;case $i.CUSTOM:R=He[1],U=He[2];const Qe=He[3],_t=He[4],gt=He[5];rt.geometry=Qe,rt.feature=at,B in xe||(xe[B]=[]);const wt=xe[B];gt?gt(M,R,U,2,wt):(wt[0]=M[R],wt[1]=M[R+1],wt.length=2),C&&(C.zIndex=He[6]),_t(wt,rt),++B;break;case $i.DRAW_IMAGE:R=He[1],U=He[2],re=He[3],G=He[4],W=He[5];let Qt=He[6];const Ft=He[7],ln=He[8],Vn=He[9],jt=He[10];let Un=He[11];const wn=He[12];let Mn=He[13];J=He[14]||"declutter";const En=He[15];if(!re&&He.length>=20){j=He[19],ue=He[20],me=He[21],ge=He[22];const xn=this.drawLabelWithPointPlacement_(j,ue,me,ge);re=xn.label,He[3]=re;const er=He[23];G=(xn.anchorX-er)*this.pixelRatio,He[4]=G;const Qn=He[24];W=(xn.anchorY-Qn)*this.pixelRatio,He[5]=W,Qt=re.height,He[6]=Qt,Mn=re.width,He[13]=Mn}let Mr;He.length>25&&(Mr=He[25]);let Hn,Pn,Ne;He.length>17?(Hn=He[16],Pn=He[17],Ne=He[18]):(Hn=Pg,Pn=null,Ne=null),jt&&be?Un+=We:!jt&&!be&&(Un-=We);let he=0;for(;R<U;R+=2){if(Mr&&Mr[he++]<Mn/this.pixelRatio)continue;const xn=this.calculateImageOrLabelDimensions_(re.width,re.height,M[R],M[R+1],Mn,Qt,G,W,ln,Vn,Un,wn,s,Hn,!!Pn||!!Ne,at),er=[e,t,re,xn,Ft,Pn,Ne];if(f){let Qn,Qr,$r;if(En){const or=U-R;if(!En[or]){En[or]={args:er,declutterMode:J};continue}const ti=En[or];Qn=ti.args,Qr=ti.declutterMode,delete En[or],$r=Y9(Qn)}let Br,br;if(Qn&&(Qr!=="declutter"||!f.collides($r))&&(Br=!0),(J!=="declutter"||!f.collides(xn.declutterBox))&&(br=!0),Qr==="declutter"&&J==="declutter"){const or=Br&&br;Br=or,br=or}Br&&(Qr!=="none"&&f.insert($r),this.replayImageOrLabel_.apply(this,Qn)),br&&(J!=="none"&&f.insert(xn.declutterBox),this.replayImageOrLabel_.apply(this,er))}else this.replayImageOrLabel_.apply(this,er)}++B;break;case $i.DRAW_CHARS:const ie=He[1],se=He[2],fe=He[3],Oe=He[4];ge=He[5];const Ge=He[6],ct=He[7],$e=He[8];me=He[9];const De=He[10];j=He[11],Array.isArray(j)&&(j=j.reduce(mte,"")),ue=He[12];const Ze=[He[13],He[13]];J=He[14]||"declutter";const m=He[15],mt=this.textStates[ue],At=mt.font,It=[mt.scale[0]*ct,mt.scale[1]*ct];let nt;At in this.widths_?nt=this.widths_[At]:(nt={},this.widths_[At]=nt);const en=ZO(M,ie,se,2),Tn=Math.abs(It[0])*k9(At,j,nt);if(Oe||Tn<=en){const xn=this.textStates[ue].textAlign,er=(en-Tn)*dM(j,xn),Qn=fte(M,ie,se,2,j,er,Ge,Math.abs(It[0]),k9,At,nt,be?0:this.viewRotation_,m);e:if(Qn){const Qr=[];let $r,Br,br,or,ti;if(me)for($r=0,Br=Qn.length;$r<Br;++$r){ti=Qn[$r],br=ti[4],or=this.createLabel(br,ue,"",me),G=ti[2]+(It[0]<0?-De:De),W=fe*or.height+(.5-fe)*2*De*It[1]/It[0]-$e;const bn=this.calculateImageOrLabelDimensions_(or.width,or.height,ti[0],ti[1],or.width,or.height,G,W,0,0,ti[3],Ze,!1,Pg,!1,at);if(f&&J==="declutter"&&f.collides(bn.declutterBox))break e;Qr.push([e,t,or,bn,1,null,null])}if(ge)for($r=0,Br=Qn.length;$r<Br;++$r){ti=Qn[$r],br=ti[4],or=this.createLabel(br,ue,ge,""),G=ti[2],W=fe*or.height-$e;const bn=this.calculateImageOrLabelDimensions_(or.width,or.height,ti[0],ti[1],or.width,or.height,G,W,0,0,ti[3],Ze,!1,Pg,!1,at);if(f&&J==="declutter"&&f.collides(bn.declutterBox))break e;Qr.push([e,t,or,bn,1,null,null])}f&&J!=="none"&&f.load(Qr.map(Y9));for(let bn=0,Vi=Qr.length;bn<Vi;++bn)this.replayImageOrLabel_.apply(this,Qr[bn])}}++B;break;case $i.END_GEOMETRY:if(l!==void 0){at=He[1];const xn=l(at,Te,J);if(xn)return xn}++B;break;case $i.FILL:Ct?we++:this.fill_(e),++B;break;case $i.MOVE_TO_LINE_TO:for(R=He[1],U=He[2],Je=M[R],ze=M[R+1],e.moveTo(Je,ze),$=Je+.5|0,oe=ze+.5|0,R+=2;R<U;R+=2)Je=M[R],ze=M[R+1],te=Je+.5|0,H=ze+.5|0,(R==U-2||te!==$||H!==oe)&&(e.lineTo(Je,ze),$=te,oe=H);++B;break;case $i.SET_FILL_STYLE:this.alignAndScaleFill_=He[2],we&&(this.fill_(e),we=0,Ee&&(e.stroke(),Ee=0)),e.fillStyle=He[1],++B;break;case $i.SET_STROKE_STYLE:Ee&&(e.stroke(),Ee=0),this.setStrokeStyle_(e,He),++B;break;case $i.STROKE:Ct?Ee++:e.stroke(),++B;break;default:++B;break}}we&&this.fill_(e),Ee&&e.stroke()}execute(e,t,r,i,s,l){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,l)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const Bg=["Polygon","Circle","LineString","Image","Text","Default"],Z2=["Image","Text"],yte=Bg.filter(n=>!Z2.includes(n));class Iz{constructor(e,t,r,i,s,l,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Sd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const l in s){const o=s[l];i[l]=new gte(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,l){i=Math.round(i);const o=i*2+1,f=dm(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),C=!this.hitDetectionContext_;C&&(this.hitDetectionContext_=gA(o,o));const M=this.hitDetectionContext_;M.canvas.width!==o||M.canvas.height!==o?(M.canvas.width=o,M.canvas.height=o):C||M.clearRect(0,0,o,o);let B;this.renderBuffer_!==void 0&&(B=jf(),fC(B,e),Q0(B,t*(this.renderBuffer_+i),B));const D=vte(i);let R;function U(H,re,j){const ue=M.getImageData(0,0,o,o).data;for(let me=0,ge=D.length;me<ge;me++)if(ue[D[me]]>0){if(!l||j==="none"||R!=="Image"&&R!=="Text"||l.includes(H)){const we=(D[me]-3)/4,Ee=i-we%o,xe=i-(we/o|0),We=s(H,re,Ee*Ee+xe*xe);if(We)return We}M.clearRect(0,0,o,o);break}}const G=Object.keys(this.executorsByZIndex_).map(Number);G.sort(um);let W,J,$,oe,te;for(W=G.length-1;W>=0;--W){const H=G[W].toString();for($=this.executorsByZIndex_[H],J=Bg.length-1;J>=0;--J)if(R=Bg[J],oe=$[R],oe!==void 0&&(te=oe.executeHitDetection(M,f,r,U,B),te))return te}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],l=t[3],o=[r,i,r,l,s,l,s,i];return q0(o,0,8,2,e,o),o}isEmpty(){return H0(this.executorsByZIndex_)}execute(e,t,r,i,s,l,o){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(o?pZ:um),l=l||Bg;const C=Bg.length;for(let M=0,B=f.length;M<B;++M){const D=f[M].toString(),R=this.executorsByZIndex_[D];for(let U=0,G=l.length;U<G;++U){const W=l[U],J=R[W];if(J!==void 0){const $=o===null?void 0:J.getZIndexContext(),oe=$?$.getContext():e,te=this.maxExtent_&&W!=="Image"&&W!=="Text";if(te&&(oe.save(),this.clip(oe,r)),!$||W==="Text"||W==="Image"?J.execute(oe,t,r,i,s,o):$.pushFunction(H=>J.execute(H,t,r,i,s,o)),te&&oe.restore(),$){$.offset();const H=f[M]*C+Bg.indexOf(W);this.deferredZIndexContexts_[H]||(this.deferredZIndexContexts_[H]=[]),this.deferredZIndexContexts_[H].push($)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(um);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const fM={};function vte(n){if(fM[n]!==void 0)return fM[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let l=0;l<=n;++l){const o=s*s+l*l;if(o>t)break;let f=r[o];f||(f=[],r[o]=f),f.push(((n+s)*e+(n+l))*4+3),s>0&&f.push(((n-s)*e+(n+l))*4+3),l>0&&(f.push(((n+s)*e+(n-l))*4+3),s>0&&f.push(((n-s)*e+(n-l))*4+3))}const i=[];for(let s=0,l=r.length;s<l;++s)r[s]&&i.push(...r[s]);return fM[n]=i,i}const tf=.5;function Tz(n,e,t,r,i,s,l,o,f){const C=f?bO(i):i,M=n[0]*tf,B=n[1]*tf,D=gA(M,B);D.imageSmoothingEnabled=!1;const R=D.canvas,U=new qee(D,tf,i,null,l,o,f?S_(yX(),f):null),G=t.length,W=Math.floor((256*256*256-1)/G),J={};for(let oe=1;oe<=G;++oe){const te=t[oe-1],H=te.getStyleFunction()||r;if(!H)continue;let re=H(te,s);if(!re)continue;Array.isArray(re)||(re=[re]);const ue=(oe*W).toString(16).padStart(7,"#00000");for(let me=0,ge=re.length;me<ge;++me){const we=re[me],Ee=we.getGeometryFunction()(te);if(!Ee||!GA(C,Ee.getExtent()))continue;const xe=we.clone(),We=xe.getFill();We&&We.setColor(ue);const be=xe.getStroke();be&&(be.setColor(ue),be.setLineDash(null)),xe.setText(void 0);const rt=we.getImage();if(rt){const ze=rt.getImageSize();if(!ze)continue;const Te=gA(ze[0],ze[1],void 0,{alpha:!1}),He=Te.canvas;Te.fillStyle=ue,Te.fillRect(0,0,He.width,He.height),xe.setImage(new W2({img:He,anchor:rt.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:rt.getOrigin(),opacity:1,size:rt.getSize(),scale:rt.getScale(),rotation:rt.getRotation(),rotateWithView:rt.getRotateWithView()}))}const Ct=xe.getZIndex()||0;let at=J[Ct];at||(at={},J[Ct]=at,at.Polygon=[],at.Circle=[],at.LineString=[],at.Point=[]);const Je=Ee.getType();if(Je==="GeometryCollection"){const ze=Ee.getGeometriesArrayRecursive();for(let Te=0,He=ze.length;Te<He;++Te){const pt=ze[Te];at[pt.getType().replace("Multi","")].push(pt,xe)}}else at[Je.replace("Multi","")].push(Ee,xe)}}const $=Object.keys(J).map(Number).sort(um);for(let oe=0,te=$.length;oe<te;++oe){const H=J[$[oe]];for(const re in H){const j=H[re];for(let ue=0,me=j.length;ue<me;ue+=2){U.setStyle(j[ue+1]);for(let ge=0,we=e.length;ge<we;++ge)U.setTransform(e[ge]),U.drawGeometry(j[ue])}}}return D.getImageData(0,0,R.width,R.height)}function kz(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*tf),s=Math.floor(Math.round(n[1])*tf),l=(mA(i,0,t.width-1)+mA(s,0,t.height-1)*t.width)*4,o=t.data[l],f=t.data[l+1],M=t.data[l+2]+256*(f+256*o),B=Math.floor((256*256*256-1)/e.length);M&&M%B===0&&r.push(e[M/B-1])}return r}const Cte=5;class _te extends M_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Cte}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return mo()}getData(e){return null}prepareFrame(e){return mo()}renderFrame(e,t){return mo()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===mi.LOADED||t.getState()===mi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=mi.LOADED&&t!=mi.ERROR&&e.addEventListener(co.CHANGE,this.boundHandleImageChange_),t==mi.IDLE&&(e.load(),t=e.getState()),t==mi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const $9=[];let Ay=null;function bte(){Ay=gA(1,1,void 0,{willReadFrequently:!0})}class JO extends _te{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Sd(),this.pixelTransform=Sd(),this.inversePixelTransform=Sd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){Ay||bte(),Ay.clearRect(0,0,1,1);let i;try{Ay.drawImage(e,t,r,1,1,0,0,1,1),i=Ay.getImageData(0,0,1,1).data}catch{return Ay=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,l;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&X0(Dy(e.style.backgroundColor),Dy(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&wX(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",l=gA();const f=l.canvas;s.appendChild(f),o=f.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=l}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Xm(r),s=Yx(r),l=Qx(r),o=Wx(r);Pu(t.coordinateToPixelTransform,i),Pu(t.coordinateToPixelTransform,s),Pu(t.coordinateToPixelTransform,l),Pu(t.coordinateToPixelTransform,o);const f=this.inversePixelTransform;Pu(f,i),Pu(f,s),Pu(f,l),Pu(f,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,l=e.pixelRatio,o=Math.round(Us(r)/i*l),f=Math.round(Du(r)/i*l);dm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,s,-o/2,-f/2),LU(this.inversePixelTransform,this.pixelTransform);const C=MX(this.pixelTransform);if(this.useContainer(t,C,this.getBackground(e)),!this.containerReused){const M=this.context.canvas;M.width!=o||M.height!=f?(M.width=o,M.height=f):this.context.clearRect(0,0,o,f),C!==M.style.transform&&(M.style.transform=C)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new Cz(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Lf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Lf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new XO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Lf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Lf.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,l,o){const f=s/2,C=l/2,M=i/t,B=-M,D=-e[0]+o,R=-e[1];return dm(this.tempTransform,f,C,M,B,-r,D,R)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class xte extends JO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=jf(),this.wrappedRenderedExtent_=jf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,l=s.center,o=s.resolution,f=s.projection,C=s.rotation,M=f.getExtent(),B=this.getLayer().getSource(),D=this.getLayer().getDeclutter(),R=t.pixelRatio,U=t.viewHints,G=!(U[ql.ANIMATING]||U[ql.INTERACTING]),W=this.context,J=Math.round(Us(i)/o*R),$=Math.round(Du(i)/o*R),oe=B.getWrapX()&&f.canWrapX(),te=oe?Us(M):null,H=oe?Math.ceil((i[2]-M[2])/te)+1:1;let re=oe?Math.floor((i[0]-M[0])/te):0;do{let j=this.getRenderTransform(l,o,0,R,J,$,re*te);t.declutter&&(j=j.slice(0)),e.execute(W,[W.canvas.width,W.canvas.height],j,C,G,r===void 0?Bg:r?Z2:yte,r?D&&t.declutter[D]:void 0)}while(++re<H)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=gA(this.context.canvas.width,this.context.canvas.height,$9))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,B_(this.context),$9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(Lf.PRERENDER)||this.getLayer().hasListener(Lf.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const f=om(r.extent);o=GA(f,e.extent),this.clipped_=o&&!im(f,e.extent),this.clipped_&&this.clipUnrotated(s,e,f)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,f=this.wrappedRenderedExtent_,C=this.getLayer(),M=[],B=r[0]*tf,D=r[1]*tf;M.push(this.getRenderTransform(i,s,l,tf,B,D,0).slice());const R=C.getSource(),U=o.getExtent();if(R.getWrapX()&&o.canWrapX()&&!im(U,f)){let G=f[0];const W=Us(U);let J=0,$;for(;G<U[0];)--J,$=W*J,M.push(this.getRenderTransform(i,s,l,tf,B,D,$).slice()),G+=W;for(J=0,G=f[2];G>U[2];)++J,$=W*J,M.push(this.getRenderTransform(i,s,l,tf,B,D,$).slice()),G-=W}this.hitDetectionImageData_=Tz(r,M,this.renderedFeatures_,C.getStyleFunction(),f,s,l,lB(s,this.renderedPixelRatio_),null)}t(kz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,f=this.getLayer(),C={},M=function(D,R,U){const G=ko(D),W=C[G];if(W){if(W!==!0&&U<W.distanceSq){if(U===0)return C[G]=!0,s.splice(s.lastIndexOf(W),1),i(D,f,R);W.geometry=R,W.distanceSq=U}}else{if(U===0)return C[G]=!0,i(D,f,R);s.push(C[G]={feature:D,layer:f,geometry:R,distanceSq:U,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,r,M,B?t.declutter?.[B]?.all().map(D=>D.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[ql.ANIMATING],s=e.viewHints[ql.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,C=e.viewState,M=C.projection,B=C.resolution,D=e.pixelRatio,R=t.getRevision(),U=t.getRenderBuffer();let G=t.getRenderOrder();G===void 0&&(G=Vee);const W=C.center.slice(),J=Q0(f,U*B),$=J.slice(),oe=[J.slice()],te=M.getExtent();if(r.getWrapX()&&M.canWrapX()&&!im(te,e.extent)){const We=Us(te),be=Math.max(Us(J)/2,We);J[0]=te[0]-be,J[2]=te[2]+be,gO(W,M);const rt=EU(oe[0],M);rt[0]<te[0]&&rt[2]<te[2]?oe.push([rt[0]+We,rt[1],rt[2]+We,rt[3]]):rt[0]>te[0]&&rt[2]>te[2]&&oe.push([rt[0]-We,rt[1],rt[2]-We,rt[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==R&&this.renderedRenderOrder_==G&&this.renderedFrameDeclutter_===!!e.declutter&&im(this.wrappedRenderedExtent_,J))return X0(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=W,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const H=new Oz(Sz(B,D),J,B,D);let re;for(let We=0,be=oe.length;We<be;++We)r.loadFeatures(oe[We],B,M);const j=lB(B,D);let ue=!0;const me=(We,be)=>{let rt;const Ct=We.getStyleFunction()||t.getStyleFunction();if(Ct&&(rt=Ct(We,B)),rt){const at=this.renderFeature(We,j,rt,H,re,this.getLayer().getDeclutter(),be);ue=ue&&!at}},ge=bO(J),we=r.getFeaturesInExtent(ge);G&&we.sort(G);for(let We=0,be=we.length;We<be;++We)me(we[We],We);this.renderedFeatures_=we,this.ready=ue;const Ee=H.finish(),xe=new Iz(J,B,D,r.getOverlaps(),Ee,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=R,this.renderedRenderOrder_=G,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=$,this.wrappedRenderedExtent_=J,this.renderedCenter_=W,this.renderedProjection_=M,this.renderedPixelRatio_=D,this.replayGroup_=xe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,l,o){if(!r)return!1;let f=!1;if(Array.isArray(r))for(let C=0,M=r.length;C<M;++C)f=V2(i,e,r[C],t,this.boundHandleStyleImageChange_,s,l,o)||f;else f=V2(i,e,r,t,this.boundHandleStyleImageChange_,s,l,o);return f}}class eI extends HO{constructor(e){super(e)}createRenderer(){return new xte(this)}}class Mte extends qO{constructor(e,t,r,i,s){const l=s!==void 0?mi.IDLE:mi.LOADED;super(e,t,r,l),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=mi.ERROR):this.state=mi.LOADED,this.changed()}load(){this.state==mi.IDLE&&(this.state=mi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class D_ extends x_{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(co.CHANGE)}release(){this.setState(Rr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Rr.EMPTY){if(this.state!==Rr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){mo()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:OU(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Pz extends D_{constructor(e,t,r,i,s,l){super(e,t,l),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Rr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Rr.ERROR,this.unlistenImage_(),this.image_=wte(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Rr.LOADED:this.state=Rr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Rr.ERROR&&(this.state=Rr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Rr.IDLE&&(this.state=Rr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=hee(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function wte(){const n=gA(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const yh={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Ste extends Kp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+VX,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(yh.ELEMENT,this.handleElementChanged),this.addChangeListener(yh.MAP,this.handleMapChanged),this.addChangeListener(yh.OFFSET,this.handleOffsetChanged),this.addChangeListener(yh.POSITION,this.handlePositionChanged),this.addChangeListener(yh.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(yh.ELEMENT)}getId(){return this.id}getMap(){return this.get(yh.MAP)||null}getOffset(){return this.get(yh.OFFSET)}getPosition(){return this.get(yh.POSITION)}getPositioning(){return this.get(yh.POSITIONING)}handleElementChanged(){XU(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),il(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Rs(e,zm.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(yh.ELEMENT,e)}setMap(e){this.set(yh.MAP,e)}setOffset(e){this.set(yh.OFFSET,e)}setPosition(e){this.set(yh.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(yh.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[ZX(i),XX(i)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!im(r,s)){const o=s[0]-r[0],f=r[2]-s[2],C=s[1]-r[1],M=r[3]-s[3],B=[0,0];if(o<0?B[0]=o-l:f<0&&(B[0]=Math.abs(f)+l),C<0?B[1]=C-l:M<0&&(B[1]=Math.abs(M)+l),B[0]!==0||B[1]!==0){const D=t.getView().getCenterInternal(),R=t.getPixelFromCoordinateInternal(D);if(!R)return;const U=[R[0]+B[0],R[1]+B[1]],G=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(U),duration:G.duration,easing:G.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(yh.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=`${e[0]+i[0]}px`,o=`${e[1]+i[1]}px`;let f="0%",C="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?f="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(f="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?C="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(C="-50%");const M=`translate(${f}, ${C}) translate(${l}, ${o})`;this.rendered.transform_!=M&&(this.rendered.transform_=M,r.transform=M)}getOptions(){return this.options}}class tI{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function D1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new tI(n,e,t,r)}const V9=[];class Ete extends D_{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=gA(1,1,V9)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=ko(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(B_(this.context_),V9.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Rz=class extends D_{constructor(e,t,r,i,s,l){super(e,t,l),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Rr.IDLE&&(this.setState(Rr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Rr.ERROR)}setFeatures(e){this.features_=e,this.setState(Rr.LOADED)}setLoader(e){this.loader_=e}};const Dz="https://api.mapbox.com";function nI(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Bte(n,e,t){if(typeof n=="string")return[{id:"default",url:H9(n,e,t)}];for(const r of n)r.url=H9(r.url,e,t);return n}function H9(n,e,t){const r=nI(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${Dz}/styles/v1/${s}/sprite?access_token=${e}`}function X2(n,e){const t=nI(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${Dz}/styles/v1/${i}?&access_token=${e}`}const Ote=["a","b","c","d"];function s2(n,e,t,r){const i=new URL(n,r||location.href),s=nI(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return Ote.map(l=>`https://${l}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Ep=Object.freeze({}),Z9={},X9={};let Ite=0;function rI(n){return n.id||(n.id=Ite++),n.id}function Tte(n,e){return rI(n)+"."+ko(e)}function Fz(n){let e=Z9[n.id];return e||(e={},Z9[rI(n)]=e),e}function kte(n){let e=X9[n.id];return e||(e={},X9[rI(n)]=e),e}function pM(n){return n*Math.PI/180}const hm=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function l3(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function iI(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Xv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const F1={};function Ly(n,e,t={},r){if(e in F1)return r&&(r.url=F1[e][0].url),F1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=function(f){return delete F1[e],Promise.reject(new Error("Error fetching source "+e))},l=function(f){return delete F1[e],f.ok?f.json():Promise.reject(new Error("Error fetching source "+e))},o=Py(()=>i).then(f=>f instanceof Response?(r&&(r.url=f.url),l(f)):(f instanceof Request||(f=new Request(f)),f.headers.get("Accept")||f.headers.set("Accept","application/json"),r&&(r.url=f.url),fetch(f).then(l).catch(s))).catch(s);return F1[e]=[i,o],o}function Kz(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=X2(n,e.accessToken),Ly("Style",n,e);else return Promise.resolve(n)}const J9={};function Lz(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=J9[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,f)=>{const C=t.transformRequest&&t.transformRequest(f,"Tiles")||f;if(o instanceof Rz)o.setLoader((M,B,D)=>{const R=function(U){U.arrayBuffer().then(G=>{const J=o.getFormat().readFeatures(G,{extent:M,featureProjection:D});o.setFeatures(J)})};Py(()=>C).then(U=>{if(U instanceof Response)return R(U);fetch(U).then(R).catch(G=>o.setState(Rr.ERROR))}).catch(U=>o.setState(Rr.ERROR))});else{const M=o.getImage();Py(()=>C).then(B=>{if(typeof B=="string"){M.src=B;return}const D=R=>R.blob().then(U=>{const G=URL.createObjectURL(U);M.addEventListener("load",()=>URL.revokeObjectURL(G)),M.addEventListener("error",()=>URL.revokeObjectURL(G)),M.src=G});if(B instanceof Response)return D(B);fetch(B).then(D).catch(R=>o.setState(Rr.ERROR))}).catch(B=>o.setState(Rr.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=s2(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const f={};i=Ly("Source",o[0],t,f).then(function(C){return C.tiles=C.tiles.map(function(M){return C.scheme==="tms"&&(M=M.replace("{y}","{-y}")),s2(M,t.accessToken,t.accessTokenParam||"access_token",f.url)[0]}),Promise.resolve({tileJson:C,tileLoadFunction:s})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),s2(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s})):i=Promise.reject(new Error("source has no `tiles` nor `url`"));J9[r]=i}return i}function eT(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=l3(i[0],i[1]),l=s.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,i[0],i[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const f=o.data;for(let C=0,M=o.width;C<M;++C)for(let B=0,D=o.height;B<D;++B){const R=(B*M+C)*4;f[R+3]>0&&l.arc(C,B,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),s}function Pte(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function tT(n,e,t){const r=l3(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),l=s.data;for(let o=0,f=s.width;o<f;++o)for(let C=0,M=s.height;C<M;++C){const B=(C*f+o)*4,D=l[B+3]/255,R=.75,U=.1,G=Pte(R-U,R+U,D);G>0?(l[B+0]=Math.round(255*t.r*G),l[B+1]=Math.round(255*t.g*G),l[B+2]=Math.round(255*t.b*G),l[B+3]=Math.round(255*G)):l[B+3]=0}return i.putImageData(s,0,0),r}const Rte=Array(256).join("");function AB(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=Rte.slice(0,Math.round(e/.1));for(let s=0,l=r.length;s<l;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let mM;function Uz(){return mM||(mM=l3(1,1).getContext("2d")),mM}function Cg(n,e){return Uz().measureText(n).width+(n.length-1)*e}const J2={};Eg.on("propertychange",()=>{for(const n in J2)delete J2[n]});function uB(n,e,t,r){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let f=0,C=l.length;f<C;++f)o.push(uB(l[f],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=J2[i];if(!s){const l=n.split(" ");if(l.length>1){const o=Uz();o.font=e;const C=o.measureText("M").width*t;let M="";const B=[];for(let D=0,R=l.length;D<R;++D){const U=l[D],G=M+(M?" ":"")+U;Cg(G,r)<=C?M=G:(M&&B.push(M),M=U)}M&&B.push(M);for(let D=0,R=B.length;D<R&&R>1;++D){const U=B[D];if(Cg(U,r)<C*.35){const G=D>0?Cg(B[D-1],r):1/0,W=D<R-1?Cg(B[D+1],r):1/0;B.splice(D,1),R-=1,G<W?(B[D-1]+=" "+U,D-=1):B[D]=U+" "+B[D]}}for(let D=0,R=B.length-1;D<R;++D){const U=B[D],G=B[D+1];if(Cg(U,r)>C*.7&&Cg(G,r)<C*.6){const W=U.split(" "),J=W.pop();Cg(J,r)<C*.2&&(B[D]=W.join(" "),B[D+1]=J+" "+G),R-=1}}s=B.join(`
`)}else s=n;s=AB(s,r),J2[i]=s}return s}const Dte=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],nT={};function Fte(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let r=0,i=n.length;r<i;++r){const s=n[r];if(s in nT)continue;nT[s]=!0;const o=N6(s,16).split(" ");t||(t=[]),t.push([o.slice(3).join(" ").replace(/"/g,""),o[1],o[0]])}return t&&(async()=>{await document.fonts.ready;for(let r=0,i=t.length;r<i;++r){const s=t[r],l=s[0];if(Dte.includes(l))continue;const o=s[1],f=s[2];if(!(await document.fonts.load(`${f} ${o} 16px "${l}"`)).some(M=>M.family.replace(/^['"]|['"]$/g,"").toLowerCase()===l.toLowerCase()&&M.weight==o&&M.style===f)){const M=e.replace("{font-family}",l.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",l.replace(/ /g,"+")).replace("{fontweight}",o).replace("{-fontstyle}",f.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",f);if(!document.querySelector('link[href="'+M+'"]')){const B=document.createElement("link");B.href=M,B.rel="stylesheet",document.head.appendChild(B)}}}})(),n}const Kte={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Lte={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Ute=function(n,e){const t=Fx(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},of={zoom:0,distanceFromCenter:0};nf.register(kx,{...nf.definitions,pitch:[{kind:"number"},[],n=>of.pitch||90],"distance-from-center":[{kind:"number"},[],n=>of.distanceFromCenter||0]});let kb,gM;function xi(n,e,t,r,i,s){const l=n.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[l]||(i[l]={});const o=i[l];if(!o[t]){let f=(n[e]||Ep)[t];const C=ef[`${e}_${n.type}`][t];f===void 0&&(f=C.default);let M=Qy(f);if(!M&&Wy(f)&&(f=iO(f,C),M=!0),M){const B=Ute(f,C);o[t]=B.evaluate.bind(B)}else C.type=="color"&&(f=Da.parse(f)),o[t]=function(){return f}}return o[t](of,r,s)}function rT(n,e,t,r){return xi(n,"layout",`${t}-allow-overlap`,e,r)?xi(n,"layout",`${t}-ignore-placement`,e,r)?"none":"obstacle":"declutter"}function zte(n,e,t,r){if(r||console.warn("No filterCache provided to evaluateFilter()"),!(n in r))try{r[n]=N$(e).filter}catch(i){console.warn("Filter will evaluate to false: "+i.message),r[n]=function(){return!1}}return r[n](of,t)}function B0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Nte=/\{[^{}}]*\}/g;function yM(n,e){return n.replace(Nte,function(t){return e[t.slice(1,-1)]||""})}function iT(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Gte={};function jte(n,e,t,r=hm,i=void 0,s=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Gte[Tte(e,n)]=Array.from(arguments);const f={};(typeof s=="string"||s instanceof Request||s instanceof Response||s instanceof Promise)&&(s={default:s});for(const H in s){const re=s[H];Py(()=>re).then(async j=>{let ue;if(typeof Image<"u"){const me=new Image;if(typeof j=="string")me.crossOrigin="anonymous",me.src=j;else{let ge;j instanceof Request?ge=await fetch(j):j instanceof Response&&(ge=j);const we=await ge.blob();ue=URL.createObjectURL(we),me.src=ue}me.addEventListener("load",function ge(){me.removeEventListener("load",ge),f[H]={image:me,size:[me.width,me.height]},n.changed(),ue&&URL.revokeObjectURL(ue)}),me.addEventListener("error",function ge(){URL.revokeObjectURL(ue),me.removeEventListener("error",ge)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const me=self;me.postMessage({action:"loadImage",src:j}),me.addEventListener("message",function(we){we.data.action==="imageLoaded"&&we.data.src===j&&(f[H]={image:we.data.image,size:[we.data.image.width,we.data.image.height]})})}})}const C=UB(e.layers),M={},B=[],D={},R={},U=Fz(e),G=kte(e);let W;for(let H=0,re=C.length;H<re;++H){const j=C[H],ue=j.id;if(typeof t=="string"&&j.source==t||Array.isArray(t)&&t.indexOf(ue)!==-1){const me=j["source-layer"];if(W){if(j.source!==W)throw new Error(`Layer "${ue}" does not use source "${W}`)}else{W=j.source;const we=e.sources[W];if(!we)throw new Error(`Source "${W}" is not defined`);const Ee=we.type;if(Ee!=="vector"&&Ee!=="geojson")throw new Error(`Source "${W}" is not of type "vector" or "geojson", but "${Ee}"`)}let ge=M[me];ge||(ge=[],M[me]=ge),ge.push({layer:j,index:H}),B.push(ue)}}const J=new K0,$=new Gm,oe=[],te=function(H,re,j){const ue=n.getSource?.()?.format_?.layerName_??"mvt:layer",me=H.getProperties(),ge=M[me[ue]];if(!ge)return;let we=r.indexOf(re);we==-1&&(we=iI(re,r)),of.zoom=we,of.distanceFromCenter=0;const Ee=H.getGeometry(),xe=Kte[Ee.getType()],We=n.get("map");if(We&&We instanceof s3&&xe===1){const at=We.getSize();if(at){const Je=We.getView().getCenter(),ze=sf(Ee.getExtent());of.distanceFromCenter=UZ(Je,ze)/re/at[1]}}const be={id:H.getId(),properties:me,type:xe},rt=n.get("mapbox-featurestate")[H.getId()];let Ct=-1;for(let at=0,Je=ge.length;at<Je;++at){const ze=ge[at],Te=ze.layer,He=Te.id;if(j!==void 0&&j!==He)continue;const pt=Te.layout||Ep,kt=Te.paint||Ep;if(pt.visibility==="none"||"minzoom"in Te&&we<Te.minzoom||"maxzoom"in Te&&we>=Te.maxzoom)continue;const ft=Te.filter;if(!ft||zte(He,ft,be,G)){let Bt,Tt,Le,Pe,ke,Qe;const _t=ze.index;if(xe==3&&(Te.type=="fill"||Te.type=="fill-extrusion"))if(Tt=xi(Te,"paint",Te.type+"-opacity",be,U,rt),Te.type+"-pattern"in kt){const Hn=xi(Te,"paint",Te.type+"-pattern",be,U,rt);if(Hn){const Pn=typeof Hn=="string"?yM(Hn,me):Hn.toString(),Ne=iT(Pn,f);if(i&&i[Pn]&&Ne){++Ct,Qe=oe[Ct],(!Qe||!Qe.getFill()||Qe.getStroke()||Qe.getText())&&(Qe=new Zd({fill:new Gm}),oe[Ct]=Qe),Le=Qe.getFill(),Qe.setZIndex(_t);const he=Pn+"."+Tt;let ie=R[he];if(!ie){const se=i[Pn],fe=l3(se.width,se.height),Oe=fe.getContext("2d");Oe.globalAlpha=Tt,Oe.drawImage(Ne.image,se.x,se.y,se.width,se.height,0,0,se.width,se.height),ie=Oe.createPattern(fe,"repeat"),R[he]=ie}Le.setColor(ie)}}}else Bt=B0(xi(Te,"paint",Te.type+"-color",be,U,rt),Tt),Te.type+"-outline-color"in kt&&(ke=B0(xi(Te,"paint",Te.type+"-outline-color",be,U,rt),Tt)),ke||(ke=Bt),(Bt||ke)&&(++Ct,Qe=oe[Ct],(!Qe||Bt&&!Qe.getFill()||!Bt&&Qe.getFill()||ke&&!Qe.getStroke()||!ke&&Qe.getStroke()||Qe.getText())&&(Qe=new Zd({fill:Bt?new Gm:void 0,stroke:ke?new K0:void 0}),oe[Ct]=Qe),Bt&&(Le=Qe.getFill(),Le.setColor(Bt)),ke&&(Pe=Qe.getStroke(),Pe.setColor(ke),Pe.setWidth(.5)),Qe.setZIndex(_t));if(xe!=1&&Te.type=="line"){"line-pattern"in kt?Bt=void 0:Bt=B0(xi(Te,"paint","line-color",be,U,rt),xi(Te,"paint","line-opacity",be,U,rt));const Hn=xi(Te,"paint","line-width",be,U,rt);Bt&&Hn>0&&(++Ct,Qe=oe[Ct],(!Qe||!Qe.getStroke()||Qe.getFill()||Qe.getText())&&(Qe=new Zd({stroke:new K0}),oe[Ct]=Qe),Pe=Qe.getStroke(),Pe.setLineCap(xi(Te,"layout","line-cap",be,U,rt)),Pe.setLineJoin(xi(Te,"layout","line-join",be,U,rt)),Pe.setMiterLimit(xi(Te,"layout","line-miter-limit",be,U,rt)),Pe.setColor(Bt),Pe.setWidth(Hn),Pe.setLineDash(kt["line-dasharray"]?xi(Te,"paint","line-dasharray",be,U,rt).map(function(Pn){return Pn*Hn}):null),Qe.setZIndex(_t))}let gt=!1,wt=null,Qt=0,Ft,ln,Vn;if((xe==1||xe==2)&&"icon-image"in pt){const Hn=xi(Te,"layout","icon-image",be,U,rt);if(Hn){Ft=typeof Hn=="string"?yM(Hn,me):Hn.toString();let Pn;const Ne=o?o(n,Ft):void 0,he=iT(Ft,f);if(i&&i[Ft]&&he||Ne){const ie=xi(Te,"layout","icon-rotation-alignment",be,U,rt);if(xe==2){const se=H.getGeometry();if(se.getFlatMidpoint||se.getFlatMidpoints){const fe=se.getExtent();if(Math.sqrt(Math.max(Math.pow((fe[2]-fe[0])/re,2),Math.pow((fe[3]-fe[1])/re,2)))>150){const Ge=se.getType()==="MultiLineString"?se.getFlatMidpoints():se.getFlatMidpoint();if(gM||(kb=[NaN,NaN],gM=new bh("Point",kb,[],2,{},void 0)),Pn=gM,kb[0]=Ge[0],kb[1]=Ge[1],xi(Te,"layout","symbol-placement",be,U,rt)==="line"&&ie==="map"){const $e=se.getStride(),De=se.getFlatCoordinates();for(let Ze=0,m=De.length-$e;Ze<m;Ze+=$e){const mt=De[Ze],At=De[Ze+1],It=De[Ze+$e],nt=De[Ze+$e+1],en=Math.min(mt,It),Tn=Math.max(mt,It),xn=Ge[0],er=Ge[1],Qn=(nt-At)*(xn-mt)-(It-mt)*(er-At);if(Math.abs(Qn)<.001&&xn<=Tn&&xn>=en){Qt=Math.atan2(At-nt,It-mt);break}}}}}}if(xe!==2||Pn){const se=xi(Te,"layout","icon-size",be,U,rt),fe=kt["icon-color"]!==void 0?xi(Te,"paint","icon-color",be,U,rt):null;if(!fe||fe.a!==0){const Oe=xi(Te,"paint","icon-halo-color",be,U,rt),Ge=xi(Te,"paint","icon-halo-width",be,U,rt);let ct=`${Ft}.${se}.${Ge}.${Oe}`;if(fe!==null&&(ct+=`.${fe}`),ln=D[ct],!ln){const $e=rT(Te,be,"icon",U);let De;"icon-offset"in pt&&(De=xi(Te,"layout","icon-offset",be,U,rt).slice(0),De[0]*=se,De[1]*=-se);let Ze=fe?[fe.r*255,fe.g*255,fe.b*255,fe.a]:void 0;if(Ne){const m={color:Ze,rotateWithView:ie==="map",displacement:De,declutterMode:$e,scale:se};typeof Ne=="string"?m.src=Ne:(m.img=Ne,m.imgSize=[Ne.width,Ne.height]),ln=new W2(m)}else{const m=i[Ft];let mt,At,It;if(Ge)m.sdf?(mt=eT(tT(he.image,m,fe||[0,0,0,1]),{x:0,y:0,width:m.width,height:m.height,pixelRatio:m.pixelRatio},Ge,Oe),Ze=void 0):mt=eT(he.image,m,Ge,Oe);else{if(m.sdf&&!he.unSDFed){const nt=tT(he.image,{x:0,y:0,width:he.size[0],height:he.size[1]},{r:1,g:1,b:1});he.image=nt,he.unSDFed=!0}mt=he.image,At=[m.width,m.height],It=[m.x,m.y]}ln=new W2({color:Ze,img:mt,imgSize:he.size,size:At,offset:It,rotateWithView:ie==="map",scale:se/m.pixelRatio,displacement:De,declutterMode:$e})}D[ct]=ln}}ln&&(++Ct,Qe=oe[Ct],(!Qe||!Qe.getImage()||Qe.getFill()||Qe.getStroke())&&(Qe=new Zd,oe[Ct]=Qe),Qe.setGeometry(Pn),ln.setRotation(Qt+pM(xi(Te,"layout","icon-rotate",be,U,rt))),ln.setOpacity(xi(Te,"paint","icon-opacity",be,U,rt)),ln.setAnchor(Lte[xi(Te,"layout","icon-anchor",be,U,rt)]),Qe.setImage(ln),wt=Qe.getText(),Qe.setText(void 0),Qe.setZIndex(_t),gt=!0,Vn=!1)}else Vn=!0}}}if(xe==1&&Te.type==="circle"){++Ct,Qe=oe[Ct],(!Qe||!Qe.getImage()||Qe.getFill()||Qe.getStroke())&&(Qe=new Zd,oe[Ct]=Qe);const Hn="circle-radius"in kt?xi(Te,"paint","circle-radius",be,U,rt):5,Pn=B0(xi(Te,"paint","circle-stroke-color",be,U,rt),xi(Te,"paint","circle-stroke-opacity",be,U,rt)),Ne=xi(Te,"paint","circle-translate",be,U,rt),he=B0(xi(Te,"paint","circle-color",be,U,rt),xi(Te,"paint","circle-opacity",be,U,rt)),ie=xi(Te,"paint","circle-stroke-width",be,U,rt),se=Hn+"."+Pn+"."+he+"."+ie+"."+Ne[0]+"."+Ne[1];ln=D[se],ln||(ln=new T_({radius:Hn,displacement:[Ne[0],-Ne[1]],stroke:Pn&&ie>0?new K0({width:ie,color:Pn}):void 0,fill:he?new Gm({color:he}):void 0,declutterMode:"none"}),D[se]=ln),Qe.setImage(ln),wt=Qe.getText(),Qe.setText(void 0),Qe.setGeometry(void 0),Qe.setZIndex(_t),gt=!0}let jt,Un,wn,Mn,En,Mr;if("text-field"in pt){Mn=Math.round(xi(Te,"layout","text-size",be,U,rt));const Hn=xi(Te,"layout","text-font",be,U,rt);wn=xi(Te,"layout","text-line-height",be,U,rt),Un=N6(l?l(Hn,e.metadata?e.metadata["ol:webfonts"]:void 0):Hn,Mn,wn),Un.includes("sans-serif")||(Un+=",sans-serif"),En=xi(Te,"layout","text-letter-spacing",be,U,rt),Mr=xi(Te,"layout","text-max-width",be,U,rt);const Pn=xi(Te,"layout","text-field",be,U,rt);typeof Pn=="object"&&Pn.sections?Pn.sections.length===1?jt=Pn.toString():jt=Pn.sections.reduce((Ne,he,ie)=>{const se=he.fontStack?he.fontStack.split(","):Hn,fe=N6(l?l(se):se,Mn*(he.scale||1),wn);let Oe=he.text;if(Oe===`
`)return Ne.push(`
`,""),Ne;if(xe==2)return Ne.push(AB(Oe,En),fe),Ne;Oe=uB(Oe,fe,Mr,En).split(`
`);for(let Ge=0,ct=Oe.length;Ge<ct;++Ge)Ge>0&&Ne.push(`
`,""),Ne.push(Oe[Ge],fe);return Ne},[]):jt=yM(Pn,me).trim(),Tt=xi(Te,"paint","text-opacity",be,U,rt)}if(jt&&Tt&&!Vn){gt||(++Ct,Qe=oe[Ct],(!Qe||!Qe.getText()||Qe.getFill()||Qe.getStroke())&&(Qe=new Zd,oe[Ct]=Qe),Qe.setImage(void 0),Qe.setGeometry(void 0));const Hn=rT(Te,be,"text",U);Qe.getText()||Qe.setText(wt),wt=Qe.getText(),(!wt||"getDeclutterMode"in wt&&wt.getDeclutterMode()!==Hn)&&(wt=new r3({padding:[2,2,2,2],declutterMode:Hn}),Qe.setText(wt));const Pn=xi(Te,"layout","text-transform",be,U,rt);Pn=="uppercase"?jt=Array.isArray(jt)?jt.map((It,nt)=>nt%2?It:It.toUpperCase()):jt.toUpperCase():Pn=="lowercase"&&(jt=Array.isArray(jt)?jt.map((It,nt)=>nt%2?It:It.toLowerCase()):jt.toLowerCase());const Ne=Array.isArray(jt)?jt:xe==2?AB(jt,En):uB(jt,Un,Mr,En);if(wt.setText(Ne),wt.setFont(Un),wt.setRotation(pM(xi(Te,"layout","text-rotate",be,U,rt))),typeof wt.setKeepUpright=="function"){const It=xi(Te,"layout","text-keep-upright",be,U,rt);wt.setKeepUpright(It)}const he=xi(Te,"layout","text-anchor",be,U,rt),ie=gt||xe==1?"point":xi(Te,"layout","symbol-placement",be,U,rt);let se;if(ie==="line-center"?(wt.setPlacement("line"),se="center"):wt.setPlacement(ie),ie==="line"&&typeof wt.setRepeat=="function"){const It=xi(Te,"layout","symbol-spacing",be,U,rt);wt.setRepeat(It*2)}wt.setOverflow(ie==="point");let fe=xi(Te,"paint","text-halo-width",be,U,rt);const Oe=xi(Te,"layout","text-offset",be,U,rt),Ge=xi(Te,"paint","text-translate",be,U,rt);let ct=0,$e=0;if(ie=="point"){se="center",he.indexOf("left")!==-1?(se="left",$e=fe):he.indexOf("right")!==-1&&(se="right",$e=-fe);const It=xi(Te,"layout","text-rotation-alignment",be,U,rt);wt.setRotateWithView(It=="map")}else wt.setMaxAngle(pM(xi(Te,"layout","text-max-angle",be,U,rt))*jt.length/Ne.length),wt.setRotateWithView(!1);wt.setTextAlign(se);let De="middle";he.indexOf("bottom")==0?(De="bottom",ct=-fe-.5*(wn-1)*Mn):he.indexOf("top")==0&&(De="top",ct=fe+.5*(wn-1)*Mn),wt.setTextBaseline(De);const Ze=xi(Te,"layout","text-justify",be,U,rt);wt.setJustify(Ze==="auto"?void 0:Ze),wt.setOffsetX(Oe[0]*Mn+$e+Ge[0]),wt.setOffsetY(Oe[1]*Mn+ct+Ge[1]),$.setColor(B0(xi(Te,"paint","text-color",be,U,rt),Tt)),wt.setFill($);const m=B0(xi(Te,"paint","text-halo-color",be,U,rt),Tt);if(m&&fe>0){J.setColor(m),fe*=2;const It=.5*Mn;J.setWidth(fe<=It?fe:It),wt.setStroke(J)}else wt.setStroke(void 0);const mt=xi(Te,"layout","text-padding",be,U,rt),At=wt.getPadding();mt!==At[0]&&(At[0]=mt,At[1]=mt,At[2]=mt,At[3]=mt),Qe.setZIndex(_t)}}}if(Ct>-1)return oe.length=Ct+1,oe};return n.setStyle(te),n.set("mapbox-layers",B),n.set("mapbox-source",W),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),te}class zz{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=a3,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Sa(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Sa(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return mo()}readFeature(e,t){return mo()}readFeatures(e,t){return mo()}readGeometry(e,t){return mo()}readProjection(e){return mo()}writeFeature(e,t){return mo()}writeFeatures(e,t){return mo()}writeGeometry(e,t){return mo()}}function A3(n,e,t){const r=t?Sa(t.featureProjection):null,i=t?Sa(t.dataProjection):null;let s=n;if(r&&i&&!Y0(r,i)){e&&(s=n.clone());const l=e?r:i,o=e?i:r;l.getUnits()==="tile-pixels"?s.transform(l,o):s.applyTransform(UC(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(f){for(let C=0,M=f.length;C<M;++C)f[C]=Math.round(f[C]*l)/l;return f};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Wte={Point:Vg,LineString:Zg,Polygon:Vm,MultiPoint:P_,MultiLineString:$C,MultiPolygon:VC};function Qte(n,e,t){return Array.isArray(e[0])?(VU(n,0,e,t)||(n=n.slice(),eB(n,0,e,t)),n):(PO(n,0,e,t)||(n=n.slice(),N2(n,0,e,t)),n)}function Nz(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>Nz({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return A3(new bh(r,r==="Polygon"?Qte(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function oI(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>oI(i,e));return new $2(r)}const t=Wte[n.type];return A3(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Yte extends zz{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Pb(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Pb(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return mo()}readFeaturesFromObject(e,t){return mo()}readGeometry(e,t){return this.readGeometryFromObject(Pb(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return mo()}readProjection(e){return this.readProjectionFromObject(Pb(e))}readProjectionFromObject(e){return mo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return mo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return mo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return mo()}}function Pb(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class oT extends Yte{constructor(e){e=e||{},super(),this.dataProjection=Sa(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Sa(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=sI(r.geometry);if(this.featureClass===bh)return Nz({geometry:i,id:r.id,properties:r.properties},t);const s=new a3;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(oI(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const l=s.features;for(let o=0,f=l.length;o<f;++o){const C=this.readFeatureFromObject(l[o],t);C&&i.push(C)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return qte(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Sa(t.properties.name);else if(t.type==="EPSG")r=Sa("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),l=e.getGeometry();return l&&(r.geometry=cB(l,t),delete s[e.getGeometryName()]),H0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return cB(e,this.adaptOptions(t))}}function sI(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Vte(n);break}case"LineString":{t=Hte(n);break}case"Polygon":{t=ene(n);break}case"MultiPoint":{t=Xte(n);break}case"MultiLineString":{t=Zte(n);break}case"MultiPolygon":{t=Jte(n);break}case"GeometryCollection":{t=$te(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function qte(n,e){const t=sI(n);return oI(t,e)}function $te(n,e){return n.geometries.map(function(r){return sI(r)})}function Vte(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:n1(e.length)}}function Hte(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:n1(e[0]?.length||2)}}function Zte(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=E_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:n1(t)}}function Xte(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:n1(e[0]?.length||2)}}function Jte(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=jU(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:n1(r)}}function ene(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=E_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:n1(r)}}function cB(n,e){n=A3(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=sne(n);break}case"LineString":{r=nne(n);break}case"Polygon":{r=ane(n,e);break}case"MultiPoint":{r=ine(n);break}case"MultiLineString":{r=rne(n);break}case"MultiPolygon":{r=one(n,e);break}case"GeometryCollection":{r=tne(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function tne(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return cB(r,e)})}}function nne(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function rne(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function ine(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function one(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function sne(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function ane(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const hB=65536*65536,sT=1/hB,lne=12,aT=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),vM=0,Rb=1,Kv=2,Db=5;class Ane{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,l=this.pos;this.type=i&7,e(s,t,this),this.pos===l&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*hB;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*hB;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,une(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=lne&&aT?aT.decode(this.buf.subarray(t,e)):xne(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Kv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===vM)for(;this.buf[this.pos++]>127;);else if(t===Kv)this.pos=this.readVarint()+this.pos;else if(t===Db)this.pos+=4;else if(t===Rb)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*sT),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*sT),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){cne(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Mne(this.buf,e,this.pos);const r=this.pos-t;r>=128&&lT(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&lT(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Kv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,fne,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,pne,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,yne,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,mne,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,gne,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,vne,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Cne,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,_ne,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,bne,t)}writeBytesField(e,t){this.writeTag(e,Kv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,Db),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,Db),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Rb),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Rb),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,vM),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,vM),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Kv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,Db),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Rb),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function une(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return K1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function K1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function cne(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),hne(t,r,e),dne(r,e)}function hne(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function dne(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function lT(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function fne(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function pne(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function mne(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function gne(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function yne(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function vne(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Cne(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function _ne(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function bne(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function xne(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let l=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let f,C,M;o===1?s<128&&(l=s):o===2?(f=n[i+1],(f&192)===128&&(l=(s&31)<<6|f&63,l<=127&&(l=null))):o===3?(f=n[i+1],C=n[i+2],(f&192)===128&&(C&192)===128&&(l=(s&15)<<12|(f&63)<<6|C&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(f=n[i+1],C=n[i+2],M=n[i+3],(f&192)===128&&(C&192)===128&&(M&192)===128&&(l=(s&15)<<18|(f&63)<<12|(C&63)<<6|M&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),r+=String.fromCharCode(l),i+=o}return r}function Mne(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class Gz extends zz{constructor(e){super(),e=e||{},this.dataProjection=new qx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:bh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let l=1,o=0,f=0,C=0,M=0,B=0;for(;e.pos<s;){if(!o){const D=e.readVarint();l=D&7,o=D>>3}if(o--,l===1||l===2)f+=e.readSVarint(),C+=e.readSVarint(),l===1&&M>B&&(i.push(M),B=M),r.push(f,C),M+=2;else if(l===7)M>B&&(r.push(r[B],r[B+1]),M+=2);else throw new Error("Invalid command found in the PBF")}M>B&&(i.push(M),B=M)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const f=[],C=[];this.readRawGeometry_(e,t,f,C);const M=One(i,C.length);if(this.featureClass===bh)s=new this.featureClass(M,f,C,2,l,o),s.transform(r.dataProjection);else{let B;if(M=="Polygon"){const U=HU(f,C);B=U.length>1?new VC(f,"XY",U):new Vm(f,"XY",C)}else B=M==="Point"?new Vg(f,"XY"):M==="LineString"?new Zg(f,"XY"):M==="MultiPoint"?new P_(f,"XY"):M==="MultiLineString"?new $C(f,"XY",C):null;const D=this.featureClass;s=new D,this.geometryName_&&s.setGeometryName(this.geometryName_);const R=A3(B,!1,r);s.setGeometry(R),o!==void 0&&s.setId(o),s.setProperties(l,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Sa(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new Ane(e),l=s.readFields(wne,{}),o=[];for(const f in l){if(r&&!r.includes(f))continue;const C=l[f],M=C?[0,0,C.extent,C.extent]:null;i.setExtent(M);for(let B=0,D=C.length;B<D;++B){const R=Bne(s,C,B),U=this.createFeature_(s,R,t);U!==null&&o.push(U)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function wne(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Sne,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Sne(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function Ene(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Bne(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(Ene,i,r),i}function One(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Ine extends JO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,l=this.getLayer().getSource(),o=e.viewHints;let f=e.extent;if(t.extent!==void 0&&(f=Ip(f,om(t.extent,i.projection))),!o[ql.ANIMATING]&&!o[ql.INTERACTING]&&!e1(f))if(l){const C=i.projection,M=l.getImage(f,s,r,C);M&&(this.loadImage(M)?this.image=M:M.getState()===mi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Pu(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!$g(s,i))return null;const l=this.image.getExtent(),o=this.image.getImage(),f=Us(l),C=Math.floor(o.width*((i[0]-l[0])/f));if(C<0||C>=o.width)return null;const M=Du(l),B=Math.floor(o.height*((l[3]-i[1])/M));return B<0||B>=o.height?null:this.getImageData(o,C,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[l,o]=Array.isArray(s)?s:[s,s],f=r.getPixelRatio(),C=e.layerStatesArray[e.layerIndex],M=e.pixelRatio,B=e.viewState,D=B.center,R=B.resolution,U=M*l/(R*f),G=M*o/(R*f);this.prepareContainer(e,t);const W=this.context.canvas.width,J=this.context.canvas.height,$=this.getRenderContext(e);let oe=!1,te=!0;if(C.extent){const me=om(C.extent,B.projection);te=GA(me,e.extent),oe=te&&!im(me,e.extent),oe&&this.clipUnrotated($,e,me)}const H=r.getImage(),re=dm(this.tempTransform,W/2,J/2,U,G,0,f*(i[0]-D[0])/l,f*(D[1]-i[3])/o);this.renderedResolution=o*M/f;const j=H.width*re[0],ue=H.height*re[3];if(this.getLayer().getSource().getInterpolate()||($.imageSmoothingEnabled=!1),this.preRender($,e),te&&j>=.5&&ue>=.5){const me=re[4],ge=re[5],we=C.opacity;we!==1&&($.save(),$.globalAlpha=we),$.drawImage(H,0,0,+H.width,+H.height,me,ge,j,ue),we!==1&&$.restore()}return this.postRender(this.context,e),oe&&$.restore(),$.imageSmoothingEnabled=!0,this.container}}class Tne extends Hy{constructor(e){e=e||{},super(e)}}class jz extends Tne{constructor(e){super(e)}createRenderer(){return new Ine(this)}getData(e){return super.getData(e)}}function dB(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const kne=new Error("disposed"),Pne=[256,256];class AT extends D_{constructor(e){const t=Rr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=dB(this.data_);return e?[e.width,e.height]:Pne}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Rr.IDLE&&this.state!==Rr.ERROR)return;this.state=Rr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Rr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Rr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(kne),this.controller_=null),super.disposeInternal()}}let CM;const _y=[];function uT(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function _M(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Rne(){if(CM===void 0){const n=gA(6,6,_y);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",uT(n,4,5,4,0),uT(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;CM=_M(e,0)||_M(e,4)||_M(e,8),B_(n),_y.push(n.canvas)}return CM}function fB(n,e,t,r){const i=Hx(t,e,n);let s=H6(e,r,t);const l=e.getMetersPerUnit();l!==void 0&&(s*=l);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const f=n.getExtent();if(!f||$g(f,i)){const C=H6(n,s,i)/s;isFinite(C)&&C>0&&(s/=C)}return s}function Dne(n,e,t,r){const i=sf(t);let s=fB(n,e,i,r);return(!isFinite(s)||s<=0)&&wU(t,function(l){return s=fB(n,e,l,r),isFinite(s)&&s>0}),s}function Wz(n,e,t,r,i,s,l,o,f,C,M,B,D,R){const U=gA(Math.round(t*n),Math.round(t*e),_y);if(B||(U.imageSmoothingEnabled=!1),f.length===0)return U.canvas;U.scale(t,t);function G(H){return Math.round(H*t)/t}U.globalCompositeOperation="lighter";const W=jf();f.forEach(function(H,re,j){xU(W,H.extent)});let J;const $=t/r,oe=(B?1:1+Math.pow(2,-24))/$;(!D||f.length!==1||C!==0)&&(J=gA(Math.round(Us(W)*$),Math.round(Du(W)*$),_y),B||(J.imageSmoothingEnabled=!1),f.forEach(function(H,re,j){if(H.image.width>0&&H.image.height>0){if(H.clipExtent){J.save();const Ee=(H.clipExtent[0]-W[0])*$,xe=-(H.clipExtent[3]-W[3])*$,We=Us(H.clipExtent)*$,be=Du(H.clipExtent)*$;J.rect(B?Ee:Math.round(Ee),B?xe:Math.round(xe),B?We:Math.round(Ee+We)-Math.round(Ee),B?be:Math.round(xe+be)-Math.round(xe)),J.clip()}const ue=(H.extent[0]-W[0])*$,me=-(H.extent[3]-W[3])*$,ge=Us(H.extent)*$,we=Du(H.extent)*$;J.drawImage(H.image,C,C,H.image.width-2*C,H.image.height-2*C,B?ue:Math.round(ue),B?me:Math.round(me),B?ge:Math.round(ue+ge)-Math.round(ue),B?we:Math.round(me+we)-Math.round(me)),H.clipExtent&&J.restore()}}));const te=Xm(l);return o.getTriangles().forEach(function(H,re,j){const ue=H.source,me=H.target;let ge=ue[0][0],we=ue[0][1],Ee=ue[1][0],xe=ue[1][1],We=ue[2][0],be=ue[2][1];const rt=G((me[0][0]-te[0])/s),Ct=G(-(me[0][1]-te[1])/s),at=G((me[1][0]-te[0])/s),Je=G(-(me[1][1]-te[1])/s),ze=G((me[2][0]-te[0])/s),Te=G(-(me[2][1]-te[1])/s),He=ge,pt=we;ge=0,we=0,Ee-=He,xe-=pt,We-=He,be-=pt;const kt=[[Ee,xe,0,0,at-rt],[We,be,0,0,ze-rt],[0,0,Ee,xe,Je-Ct],[0,0,We,be,Te-Ct]],ft=BZ(kt);if(!ft)return;if(U.save(),U.beginPath(),Rne()||!B){U.moveTo(at,Je);const Tt=4,Le=rt-at,Pe=Ct-Je;for(let ke=0;ke<Tt;ke++)U.lineTo(at+G((ke+1)*Le/Tt),Je+G(ke*Pe/(Tt-1))),ke!=Tt-1&&U.lineTo(at+G((ke+1)*Le/Tt),Je+G((ke+1)*Pe/(Tt-1)));U.lineTo(ze,Te)}else U.moveTo(at,Je),U.lineTo(rt,Ct),U.lineTo(ze,Te);U.clip(),U.transform(ft[0],ft[2],ft[1],ft[3],rt,Ct),U.translate(W[0]-He,W[3]-pt);let Bt;if(J)Bt=J.canvas,U.scale(oe,-oe);else{const Tt=f[0],Le=Tt.extent;Bt=Tt.image,U.scale(Us(Le)/Bt.width,-Du(Le)/Bt.height)}U.drawImage(Bt,0,0),U.restore()}),J&&(B_(J),_y.push(J.canvas)),M&&(U.save(),U.globalCompositeOperation="source-over",U.strokeStyle="black",U.lineWidth=1,o.getTriangles().forEach(function(H,re,j){const ue=H.target,me=(ue[0][0]-te[0])/s,ge=-(ue[0][1]-te[1])/s,we=(ue[1][0]-te[0])/s,Ee=-(ue[1][1]-te[1])/s,xe=(ue[2][0]-te[0])/s,We=-(ue[2][1]-te[1])/s;U.beginPath(),U.moveTo(we,Ee),U.lineTo(me,ge),U.lineTo(xe,We),U.closePath(),U.stroke()}),U.restore()),U.canvas}const Fne=10,cT=.25;class Qz{constructor(e,t,r,i,s,l,o){this.sourceProj_=e,this.targetProj_=t;let f={};const C=o?mX(oe=>Pu(o,Hx(oe,this.targetProj_,this.sourceProj_))):UC(this.targetProj_,this.sourceProj_);this.transformInv_=function(oe){const te=oe[0]+"/"+oe[1];return f[te]||(f[te]=C(oe)),f[te]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Us(i)>=Us(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Us(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Us(this.targetProj_.getExtent()):null;const M=Xm(r),B=Yx(r),D=Qx(r),R=Wx(r),U=this.transformInv_(M),G=this.transformInv_(B),W=this.transformInv_(D),J=this.transformInv_(R),$=Fne+(l?Math.max(0,Math.ceil(Math.log2(Y6(r)/(l*l*256*256)))):0);if(this.addQuad_(M,B,D,R,U,G,W,J,$),this.wrapsXInSource_){let oe=1/0;this.triangles_.forEach(function(te,H,re){oe=Math.min(oe,te.source[0][0],te.source[1][0],te.source[2][0])}),this.triangles_.forEach(te=>{if(Math.max(te.source[0][0],te.source[1][0],te.source[2][0])-oe>this.sourceWorldWidth_/2){const H=[[te.source[0][0],te.source[0][1]],[te.source[1][0],te.source[1][1]],[te.source[2][0],te.source[2][1]]];H[0][0]-oe>this.sourceWorldWidth_/2&&(H[0][0]-=this.sourceWorldWidth_),H[1][0]-oe>this.sourceWorldWidth_/2&&(H[1][0]-=this.sourceWorldWidth_),H[2][0]-oe>this.sourceWorldWidth_/2&&(H[2][0]-=this.sourceWorldWidth_);const re=Math.min(H[0][0],H[1][0],H[2][0]);Math.max(H[0][0],H[1][0],H[2][0])-re<this.sourceWorldWidth_/2&&(te.source=H)}})}f={}}addTriangle_(e,t,r,i,s,l){this.triangles_.push({source:[i,s,l],target:[e,t,r]})}addQuad_(e,t,r,i,s,l,o,f,C){const M=W6([s,l,o,f]),B=this.sourceWorldWidth_?Us(M)/this.sourceWorldWidth_:null,D=this.sourceWorldWidth_,R=this.sourceProj_.canWrapX()&&B>.5&&B<1;let U=!1;if(C>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const W=W6([e,t,r,i]);U=Us(W)/this.targetWorldWidth_>cT||U}!R&&this.sourceProj_.isGlobal()&&B&&(U=B>cT||U)}if(!U&&this.maxSourceExtent_&&isFinite(M[0])&&isFinite(M[1])&&isFinite(M[2])&&isFinite(M[3])&&!GA(M,this.maxSourceExtent_))return;let G=0;if(!U&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(f[0])||!isFinite(f[1]))){if(C>0)U=!0;else if(G=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),G!=1&&G!=2&&G!=4&&G!=8)return}if(C>0){if(!U){const W=[(e[0]+r[0])/2,(e[1]+r[1])/2],J=this.transformInv_(W);let $;R?$=(Ng(s[0],D)+Ng(o[0],D))/2-Ng(J[0],D):$=(s[0]+o[0])/2-J[0];const oe=(s[1]+o[1])/2-J[1];U=$*$+oe*oe>this.errorThresholdSquared_}if(U){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const W=[(t[0]+r[0])/2,(t[1]+r[1])/2],J=this.transformInv_(W),$=[(i[0]+e[0])/2,(i[1]+e[1])/2],oe=this.transformInv_($);this.addQuad_(e,t,W,$,s,l,J,oe,C-1),this.addQuad_($,W,r,i,oe,J,o,f,C-1)}else{const W=[(e[0]+t[0])/2,(e[1]+t[1])/2],J=this.transformInv_(W),$=[(r[0]+i[0])/2,(r[1]+i[1])/2],oe=this.transformInv_($);this.addQuad_(e,W,$,i,s,J,oe,f,C-1),this.addQuad_(W,t,r,$,J,l,o,oe,C-1)}return}}if(R){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(G&11)==0&&this.addTriangle_(e,r,i,s,o,f),(G&14)==0&&this.addTriangle_(e,r,t,s,o,l),G&&((G&13)==0&&this.addTriangle_(t,i,e,l,f,s),(G&7)==0&&this.addTriangle_(t,i,r,l,f,o))}calculateSourceExtent(){const e=jf();return this.triangles_.forEach(function(t,r,i){const s=t.source;fC(e,s[0]),fC(e,s[1]),fC(e,s[2])}),e}getTriangles(){return this.triangles_}}const Yz=.5;class qz extends D_{constructor(e,t,r,i,s,l,o,f,C,M,B,D){super(s,Rr.IDLE,D),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=o,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const R=i.getTileCoordExtent(this.wrappedTileCoord_),U=this.targetTileGrid_.getExtent();let G=this.sourceTileGrid_.getExtent();const W=U?Ip(R,U):R;if(Y6(W)===0){this.state=Rr.EMPTY;return}const J=e.getExtent();J&&(G?G=Ip(G,J):G=J);const $=i.getResolution(this.wrappedTileCoord_[0]),oe=Dne(e,r,W,$);if(!isFinite(oe)||oe<=0){this.state=Rr.EMPTY;return}const te=M!==void 0?M:Yz;if(this.triangulation_=new Qz(e,r,W,G,oe*te,$),this.triangulation_.getTriangles().length===0){this.state=Rr.EMPTY;return}this.sourceZ_=t.getZForResolution(oe);let H=this.triangulation_.calculateSourceExtent();if(G&&(e.canWrapX()?(H[1]=mA(H[1],G[1],G[3]),H[3]=mA(H[3],G[1],G[3])):H=Ip(H,G)),!Y6(H))this.state=Rr.EMPTY;else{let re=0,j=0;e.canWrapX()&&(re=Us(J),j=Math.floor((H[0]-J[0])/re)),BU(H.slice(),e,!0).forEach(me=>{const ge=t.getTileRangeForExtentAndZ(me,this.sourceZ_);for(let we=ge.minX;we<=ge.maxX;we++)for(let Ee=ge.minY;Ee<=ge.maxY;Ee++){const xe=C(this.sourceZ_,we,Ee,o);if(xe){const We=j*re;this.sourceTiles_.push({tile:xe,offset:We})}}++j}),this.sourceTiles_.length===0&&(this.state=Rr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==Rr.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Rr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Wz(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Rr.LOADED}this.changed()}load(){if(this.state==Rr.IDLE){this.state=Rr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Rr.IDLE||r==Rr.LOADING){e++;const i=Rs(t,co.CHANGE,s=>{const l=t.getState();(l==Rr.LOADED||l==Rr.ERROR||l==Rr.EMPTY)&&(il(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Rr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(il),this.sourcesListenerKeys_=null}release(){this.canvas_&&(B_(this.canvas_.getContext("2d")),_y.push(this.canvas_),this.canvas_=null),super.release()}}class Kne{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof __&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return ia(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return ia(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ia(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function ex(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function Lne(n,e,t){return n+"/"+e+"/"+t}function Une(n){return zne(n[0],n[1],n[2])}function zne(n,e,t){return(e<<n)+t}function Nne(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function bM(n,e,t,r,i){return`${ko(n)},${e},${Lne(t,r,i)}`}function xM(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function Gne(n,e,t){const r=n[t];return r?r.delete(e):!1}function hT(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Ip(e,om(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Ip(e,i))}return e}class $z extends JO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=jf(),this.tempTileRange_=new tI(0,0,0,0),this.tempTileCoord_=ex(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Kne(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),f=bM(o,o.getKey(),e,t,r);let C;if(s.containsKey(f))C=s.get(f);else{if(C=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!C)return null;s.set(f,C)}return C}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Pu(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!$g(s,i))return null;const l=t.viewState,o=r.getRenderSource(),f=o.getTileGridForProjection(l.projection),C=o.getTilePixelRatio(t.pixelRatio);for(let M=f.getZForResolution(l.resolution);M>=f.getMinZoom();--M){const B=f.getTileCoordForCoordAndZ(i,M),D=this.getTile(M,B[1],B[2],t);if(!D||D.getState()!==Rr.LOADED)continue;const R=f.getOrigin(M),U=xh(f.getTileSize(M)),G=f.getResolution(M);let W;if(D instanceof Pz||D instanceof qz)W=D.getImage();else if(D instanceof AT){if(W=dB(D.getData()),!W)continue}else continue;const J=Math.floor(C*((i[0]-R[0])/G-B[1]*U[0])),$=Math.floor(C*((R[1]-i[1])/G-B[2]*U[1])),oe=Math.round(C*o.getGutterForProjection(l.projection));return this.getImageData(W,J+oe,$+oe)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=r,!0}enqueueTiles(e,t,r,i,s){const l=e.viewState,o=this.getLayer(),f=o.getRenderSource(),C=f.getTileGridForProjection(l.projection),M=ko(f);M in e.wantedTiles||(e.wantedTiles[M]={});const B=e.wantedTiles[M],D=o.getMapInternal(),R=Math.max(r-s,C.getMinZoom(),C.getZForResolution(Math.min(o.getMaxResolution(),D?D.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):C.getResolution(0)),f.zDirection)),U=l.rotation,G=U?SU(l.center,l.resolution,U,e.size):void 0;for(let W=r;W>=R;--W){const J=C.getTileRangeForExtentAndZ(t,W,this.tempTileRange_),$=C.getResolution(W);for(let oe=J.minX;oe<=J.maxX;++oe)for(let te=J.minY;te<=J.maxY;++te){if(U&&!C.tileCoordIntersectsViewport([W,oe,te],G))continue;const H=this.getTile(W,oe,te,e);if(!H||!xM(i,H,W))continue;const j=H.getKey();if(B[j]=!0,H.getState()===Rr.IDLE&&!e.tileQueue.isKeyQueued(j)){const ue=ex(W,oe,te,this.tempTileCoord_);e.tileQueue.enqueue([H,M,C.getTileCoordCenter(ue),$])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],l=e[2],o=this.getStaleKeys();for(let f=0;f<o.length;++f){const C=bM(this.getLayer().getSource(),o[f],i,s,l);if(r.containsKey(C)){const M=r.peek(C);if(M.getState()===Rr.LOADED)return M.endTransition(ko(this)),xM(t,M,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let l=!0;const o=this.tileCache_,f=this.getLayer().getRenderSource(),C=f.getKey();for(let M=s.minX;M<=s.maxX;++M)for(let B=s.minY;B<=s.maxY;++B){const D=bM(f,C,r,M,B);let R=!1;if(o.containsKey(D)){const U=o.peek(D);U.getState()===Rr.LOADED&&(xM(i,U,r),R=!0)}R||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,l=i.resolution,o=i.center,f=e.pixelRatio,C=this.getLayer(),M=C.getSource(),B=M.getTileGridForProjection(s),D=B.getZForResolution(l,M.zDirection),R=B.getResolution(D),U=M.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==U&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=U):this.renderedSourceKey_=U;let G=e.extent;const W=M.getTilePixelRatio(f);this.prepareContainer(e,t);const J=this.context.canvas.width,$=this.context.canvas.height,oe=r.extent&&om(r.extent);oe&&(G=Ip(G,om(r.extent)));const te=R*J/2/W,H=R*$/2/W,re=[o[0]-te,o[1]-H,o[0]+te,o[1]+H],j={};this.renderedTiles.length=0;const ue=C.getPreload();if(e.nextExtent){const at=B.getZForResolution(i.nextResolution,M.zDirection),Je=hT(e,e.nextExtent);this.enqueueTiles(e,Je,at,j,ue)}const me=hT(e,G);if(this.enqueueTiles(e,me,D,j,0),ue>0&&setTimeout(()=>{this.enqueueTiles(e,me,D-1,j,ue-1)},0),!(D in j))return this.container;const ge=ko(this),we=e.time;for(const at of j[D]){const Je=at.getState();if(Je===Rr.EMPTY)continue;const ze=at.tileCoord;if(Je===Rr.LOADED&&at.getAlpha(ge,we)===1){at.endTransition(ge);continue}if(Je!==Rr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ze,j)){Gne(j,at,D),e.animate=!0;continue}if(this.findAltTiles_(B,ze,D+1,j))continue;const pt=B.getMinZoom();for(let kt=D-1;kt>=pt&&!this.findAltTiles_(B,ze,kt,j);--kt);}const Ee=R/l*f/W,xe=this.getRenderContext(e);dm(this.tempTransform,J/2,$/2,Ee,Ee,0,-J/2,-$/2),r.extent&&this.clipUnrotated(xe,e,oe),M.getInterpolate()||(xe.imageSmoothingEnabled=!1),this.preRender(xe,e);const We=Object.keys(j).map(Number);We.sort(um);let be;const rt=[],Ct=[];for(let at=We.length-1;at>=0;--at){const Je=We[at],ze=M.getTilePixelSize(Je,f,s),He=B.getResolution(Je)/R,pt=ze[0]*He*Ee,kt=ze[1]*He*Ee,ft=B.getTileCoordForCoordAndZ(Xm(re),Je),Bt=B.getTileCoordExtent(ft),Tt=Pu(this.tempTransform,[W*(Bt[0]-re[0])/R,W*(re[3]-Bt[3])/R]),Le=W*M.getGutterForProjection(s);for(const Pe of j[Je]){if(Pe.getState()!==Rr.LOADED)continue;const ke=Pe.tileCoord,Qe=ft[1]-ke[1],_t=Math.round(Tt[0]-(Qe-1)*pt),gt=ft[2]-ke[2],wt=Math.round(Tt[1]-(gt-1)*kt),Qt=Math.round(Tt[0]-Qe*pt),Ft=Math.round(Tt[1]-gt*kt),ln=_t-Qt,Vn=wt-Ft,jt=We.length===1;let Un=!1;be=[Qt,Ft,Qt+ln,Ft,Qt+ln,Ft+Vn,Qt,Ft+Vn];for(let wn=0,Mn=rt.length;wn<Mn;++wn)if(!jt&&Je<Ct[wn]){const En=rt[wn];GA([Qt,Ft,Qt+ln,Ft+Vn],[En[0],En[3],En[4],En[7]])&&(Un||(xe.save(),Un=!0),xe.beginPath(),xe.moveTo(be[0],be[1]),xe.lineTo(be[2],be[3]),xe.lineTo(be[4],be[5]),xe.lineTo(be[6],be[7]),xe.moveTo(En[6],En[7]),xe.lineTo(En[4],En[5]),xe.lineTo(En[2],En[3]),xe.lineTo(En[0],En[1]),xe.clip())}rt.push(be),Ct.push(Je),this.drawTile(Pe,e,Qt,Ft,ln,Vn,Le,jt),Un&&xe.restore(),this.renderedTiles.unshift(Pe),this.updateUsedTiles(e.usedTiles,M,Pe)}}if(this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!$m(this.renderedExtent_,re),this.renderedExtent_=re,this.renderedPixelRatio=f,this.postRender(this.context,e),r.extent&&xe.restore(),xe.imageSmoothingEnabled=!0,this.renderComplete){const at=(Je,ze)=>{const Te=ko(M),He=ze.wantedTiles[Te],pt=He?Object.keys(He).length:0;this.updateCacheSize(pt),this.tileCache_.expireCache()};e.postRenderFunctions.push(at)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,l,o,f){let C;if(e instanceof AT){if(C=dB(e.getData()),!C)throw new Error("Rendering array data is not yet supported")}else C=this.getTileImage(e);if(!C)return;const M=this.getRenderContext(t),B=ko(this),D=t.layerStatesArray[t.layerIndex],R=D.opacity*(f?e.getAlpha(B,t.time):1),U=R!==M.globalAlpha;U&&(M.save(),M.globalAlpha=R),M.drawImage(C,o,o,C.width-2*o,C.height-2*o,r,i,s,l),U&&M.restore(),R!==D.opacity?t.animate=!0:f&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=ko(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const U0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class jne extends Hy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(U0.PRELOAD)}setPreload(e){this.set(U0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(U0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(U0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Vz extends jne{constructor(e){super(e)}createRenderer(){return new $z(this,{cacheSize:this.getCacheSize()})}}const Wne={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},dT={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Qne extends $z{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Sd(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,l,o,f){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,l,o,f)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,f=i.viewHints;return(!(f[ql.ANIMATING]||f[ql.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),l=i.getRenderOrder()||null,o=e.wantedResolution,f=e.getReplayState(i);if(!f.dirty&&f.renderedResolution===o&&f.renderedRevision==s&&f.renderedRenderOrder==l)return;const C=i.getSource(),M=!!i.getDeclutter(),B=C.getTileGrid(),R=C.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),U=C.getSourceTiles(t,r,e),G=ko(i);delete e.hitDetectionImageData[G],e.executorGroups[G]=[],f.dirty=!1;for(let W=0,J=U.length;W<J;++W){const $=U[W];if($.getState()!=Rr.LOADED)continue;const oe=$.tileCoord,te=B.getTileCoordExtent(oe),H=Ip(R,te),re=Q0(H,i.getRenderBuffer()*o,this.tempExtent),j=$m(te,H)?null:re,ue=new Oz(0,H,o,t),me=lB(o,t),ge=function(be,rt){let Ct;const at=be.getStyleFunction()||i.getStyleFunction();if(at&&(Ct=at(be,o)),Ct){const Je=this.renderFeature(be,me,Ct,ue,M,rt);f.dirty=f.dirty||Je}},we=$.getFeatures();l&&l!==f.renderedRenderOrder&&we.sort(l);for(let be=0,rt=we.length;be<rt;++be){const Ct=we[be];(!j||GA(j,Ct.getGeometry().getExtent()))&&ge.call(this,Ct,be)}const Ee=ue.finish(),xe=i.getRenderMode()!=="vector"&&M&&U.length===1?null:H,We=new Iz(xe,o,t,C.getOverlaps(),Ee,i.getRenderBuffer(),!0);e.executorGroups[G].push(We)}f.renderedRevision=s,f.renderedRenderOrder=l,f.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){const l=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const f=this.getLayer(),M=f.getSource().getTileGridForProjection(t.viewState.projection),B=W6([e]);Q0(B,l*r,B);const D={},R=function(oe,te,H){let re=oe.getId();re===void 0&&(re=ko(oe));const j=D[re];if(j){if(j!==!0&&H<j.distanceSq){if(H===0)return D[re]=!0,s.splice(s.lastIndexOf(j),1),i(oe,f,te);j.geometry=te,j.distanceSq=H}}else{if(H===0)return D[re]=!0,i(oe,f,te);s.push(D[re]={feature:oe,layer:f,geometry:te,distanceSq:H,callback:i})}},U=this.renderedTiles,G=ko(f),W=f.getDeclutter(),J=W?t.declutter?.[W]?.all().map(oe=>oe.value):null;let $;e:for(let oe=0,te=U.length;oe<te;++oe){const H=U[oe],re=M.getTileCoordExtent(H.wrappedTileCoord);if(!GA(re,B))continue;const j=H.executorGroups[G];for(let ue=0,me=j.length;ue<me;++ue)if($=j[ue].forEachFeatureAtCoordinate(e,l,o,r,R,J),$)break e}return $}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),l=this.renderedProjection,o=l.getExtent(),f=this.renderedResolution,C=s.getTileGridForProjection(l),M=Pu(this.renderedPixelToCoordinateTransform_,e.slice()),B=C.getTileCoordForCoordAndResolution(M,f).toString(),D=this.renderedTiles.find(oe=>oe.tileCoord.toString()===B&&oe.getState()===Rr.LOADED);if(!D||D.loadingSourceTiles>0){t([]);return}s.getWrapX()&&l.canWrapX()&&!im(o,C.getTileCoordExtent(D.tileCoord))&&gO(M,l);const R=ko(i),U=C.getTileCoordExtent(D.wrappedTileCoord),G=Xm(U),W=[(M[0]-G[0])/f,(G[1]-M[1])/f],J=D.getSourceTiles().reduce((oe,te)=>oe.concat(te.getFeatures()),[]);let $=D.hitDetectionImageData[R];if(!$){const oe=xh(C.getTileSize(C.getZForResolution(f,s.zDirection))),te=this.renderedRotation_,H=[this.getRenderTransform(C.getTileCoordCenter(D.wrappedTileCoord),f,0,tf,oe[0]*tf,oe[1]*tf,0)];$=Tz(oe,H,J,i.getStyleFunction(),C.getTileCoordExtent(D.wrappedTileCoord),D.getReplayState(i).renderedResolution,te),D.hitDetectionImageData[R]=$}t(kz(W,J,$))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=s.getZForResolution(this.renderedResolution),o={};return r.forEach(f=>{if(f.tileCoord[0]!==l||f.getState()!==Rr.LOADED)return;const C=f.getSourceTiles();for(let M=0,B=C.length;M<B;++M){const D=C[M],R=D.getKey();if(R in o)continue;o[R]=!0;const U=D.tileCoord;if(GA(e,s.getTileCoordExtent(U))){const G=D.getFeatures();if(G)for(let W=0,J=G.length;W<J;++W){const $=G[W],oe=$.getGeometry();GA(e,oe.getExtent())&&t.push($)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,l=!(s[ql.ANIMATING]||s[ql.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],f=this.getLayer().getDeclutter(),C=f?e.declutter?.[f]:void 0,M=ko(this.getLayer()),B=this.renderedTiles;for(let D=0,R=B.length;D<R;++D){const U=B[D],G=U.executorGroups[M];if(G)for(let W=G.length-1;W>=0;--W)G[W].execute(this.context,o,this.getTileRenderTransform(U,e),e.viewState.rotation,l,Z2,C)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=ko(this.getLayer()),i=t.reduce((f,C,M)=>(C.executorGroups[r].forEach(B=>f.push({executorGroup:B,index:M})),f),[]),s=i.map(({executorGroup:f})=>f.getDeferredZIndexContexts()),l={};for(let f=0,C=i.length;f<C;++f){const M=i[f].executorGroup.getDeferredZIndexContexts();for(const B in M)l[B]=!0}Object.keys(l).map(Number).sort(um).forEach(f=>{s.forEach((C,M)=>{C[f]&&(C[f].forEach(B=>{const{executorGroup:D,index:R}=i[M],U=D.getRenderedContext(),G=U.globalAlpha;U.globalAlpha=this.renderedOpacity_;const W=this.tileClipContexts_[R];W&&W.draw(U),B.draw(U),W&&U.restore(),U.globalAlpha=G,B.clear()}),C[f].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,l=i.resolution,o=i.rotation,f=t.size,C=Math.round(f[0]*r),M=Math.round(f[1]*r),D=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),R=e.tileCoord,U=D.getTileCoordExtent(e.wrappedTileCoord),G=D.getTileCoordExtent(R,this.tempExtent)[0]-U[0];return xO(V4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,l,o,r,C,M,G))}postRender(e,t){const r=t.viewHints,i=!(r[ql.ANIMATING]||r[ql.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),l=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const f=s.getDeclutter(),C=f?dT[l].filter(H=>!Z2.includes(H)):dT[l],M=t.viewState,B=M.rotation,D=s.getSource(),U=D.getTileGridForProjection(M.projection).getZForResolution(M.resolution,D.zDirection),G=this.renderedTiles,W=[],J=[],$=[],oe=ko(s);let te=!0;for(let H=G.length-1;H>=0;--H){const re=G[H];te=te&&!re.getReplayState(s).dirty;const j=re.executorGroups[oe].filter(We=>We.hasExecutors(C));if(j.length===0)continue;const ue=this.getTileRenderTransform(re,t),me=re.tileCoord[0];let ge=!1;const we=j[0].getClipCoords(ue);let Ee=e,xe;if(we){xe=new XO,Ee=xe.getContext();for(let We=0,be=W.length;We<be;++We)if(U!==me&&me<J[We]){const rt=W[We];GA([we[0],we[3],we[4],we[7]],[rt[0],rt[3],rt[4],rt[7]])&&(ge||(Ee.save(),ge=!0),Ee.beginPath(),Ee.moveTo(we[0],we[1]),Ee.lineTo(we[2],we[3]),Ee.lineTo(we[4],we[5]),Ee.lineTo(we[6],we[7]),Ee.moveTo(rt[6],rt[7]),Ee.lineTo(rt[4],rt[5]),Ee.lineTo(rt[2],rt[3]),Ee.lineTo(rt[0],rt[1]),Ee.clip())}W.push(we),J.push(me)}for(let We=0,be=j.length;We<be;++We)j[We].execute(e,[e.canvas.width,e.canvas.height],ue,B,i,C,t.declutter?.[f]);ge&&(Ee===e?Ee.restore():$[H]=xe)}e.globalAlpha=o,this.ready=te,this.tileClipContexts_=$,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,l){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let f=0,C=r.length;f<C;++f)o=V2(i,e,r[f],t,this.boundHandleStyleImageChange_,void 0,s,l)||o;else o=V2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),l=e.executorGroups[ko(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,f=o[0],C=r.getSource();let M=t.pixelRatio;const D=t.viewState.projection,R=C.getTileGridForProjection(D),U=R.getResolution(e.tileCoord[0]),G=t.pixelRatio/e.wantedResolution*U,W=R.getResolution(f),J=e.getContext();M=Math.round(Math.max(M,G/M));const $=C.getTilePixelSize(f,M,D);J.canvas.width=$[0],J.canvas.height=$[1];const oe=M/G;if(oe!==1){const j=d9(this.tmpTransform_);V4(j,oe,oe),J.setTransform.apply(J,j)}const te=R.getTileCoordExtent(o,this.tempExtent),H=G/W,re=d9(this.tmpTransform_);V4(re,H,-H),_X(re,-te[0],-te[3]);for(let j=0,ue=l.length;j<ue;++j)l[j].execute(J,[J.canvas.width*oe,J.canvas.height*oe],re,0,!0,Wne[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class mC extends HO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";ia(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Qne(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(U0.PRELOAD)}getUseInterimTilesOnError(){return this.get(U0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(U0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(U0.USE_INTERIM_TILES_ON_ERROR,e)}}function pB(n){return Array.isArray(n)?Math.min(...n):n}class Yne extends qO{constructor(e,t,r,i,s,l,o){let f=e.getExtent();f&&e.canWrapX()&&(f=f.slice(),f[0]=-1/0,f[2]=1/0);let C=t.getExtent();C&&t.canWrapX()&&(C=C.slice(),C[0]=-1/0,C[2]=1/0);const M=C?Ip(r,C):r,B=sf(M),D=fB(e,t,B,i),R=Yz,U=new Qz(e,t,M,f,D*R,i),G=U.calculateSourceExtent(),W=e1(G)?null:l(G,D,s),J=W?mi.IDLE:mi.EMPTY,$=W?W.getPixelRatio():1;super(r,i,$,J),this.targetProj_=t,this.maxSourceExtent_=f,this.triangulation_=U,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=W,this.sourcePixelRatio_=$,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==mi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==mi.LOADED){const t=Us(this.targetExtent_)/this.targetResolution_,r=Du(this.targetExtent_)/this.targetResolution_;this.canvas_=Wz(t,r,this.sourcePixelRatio_,pB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==mi.IDLE){this.state=mi.LOADING,this.changed();const e=this.sourceImage_.getState();e==mi.LOADED||e==mi.ERROR?this.reproject_():(this.sourceListenerKey_=Rs(this.sourceImage_,co.CHANGE,t=>{const r=this.sourceImage_.getState();(r==mi.LOADED||r==mi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){il(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Fb=4,MM={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class qne extends Fp{constructor(e,t){super(e),this.image=t}}class Hz extends Zy{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Nx(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Y0(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Y0(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&$m(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Yne(s,i,e,t,r,(l,o,f)=>this.getImageInternal(l,o,f,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=$ne(e,t,r,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&im(this.wantedExtent_,s)||im(this.image.getExtent(),s))&&(this.wantedResolution_&&pB(this.wantedResolution_)===l||pB(this.image.getResolution())===l)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=l,this.image=new qO(s,l,r,this.loader),this.image.addEventListener(co.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case mi.LOADING:this.loading=!0,r=MM.IMAGELOADSTART;break;case mi.LOADED:this.loading=!1,r=MM.IMAGELOADEND;break;case mi.ERROR:this.loading=!1,r=MM.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new qne(r,t))}}function $ne(n,e,t,r){const i=e/t,s=sf(n),l=D0(Us(n)/i,Fb),o=D0(Du(n)/i,Fb),f=D0((r-1)*l/2,Fb),C=l+2*f,M=D0((r-1)*o/2,Fb),B=o+2*M;return K2(s,i,0,[C,B])}const L1=[0,0,0],w0=5;class u3{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ia(gZ(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ia(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xm(r)),ia(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ia(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:KO,ia(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const l=new tI(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,l=i.maxX;s<=l;++s)for(let o=i.minY,f=i.maxY;o<=f;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,l,o,f=null,C=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):f=this.getTileCoordExtent(e,i);C>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),s=D1(l,l,o,o,r)):s=this.getTileRangeForExtentAndZ(f,C,r),t(C,s))return!0;--C}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,l=e[2]*2;return D1(s,s+1,l,l+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],l=e[2];if(t===i)return D1(s,l,s,l,r);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,t-i),C=Math.floor(s*f),M=Math.floor(l*f);if(t<i)return D1(C,C,M,M,r);const B=Math.floor(f*(s+1))-1,D=Math.floor(f*(l+1))-1;return D1(C,B,M,D,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,L1);const i=L1[1],s=L1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,L1);const l=L1[1],o=L1[2];return D1(i,l,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=xh(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=xh(this.getTileSize(e[0]),this.tmpSize_),l=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,f=l+s[0]*i,C=o+s[1]*i;return qm(l,o,f,C,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const l=this.getZForResolution(r),o=r/this.getResolution(l),f=this.getOrigin(l),C=xh(this.getTileSize(l),this.tmpSize_);let M=o*(e-f[0])/r/C[0],B=o*(f[1]-t)/r/C[1];return i?(M=D0(M,w0)-1,B=D0(B,w0)-1):(M=xb(M,w0),B=xb(B,w0)),ex(l,M,B,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const l=this.getOrigin(r),o=this.getResolution(r),f=xh(this.getTileSize(r),this.tmpSize_);let C=(e-l[0])/o/f[0],M=(l[1]-t)/o/f[1];return i?(C=D0(C,w0)-1,M=D0(M,w0)-1):(C=xb(C,w0),M=xb(M,w0)),ex(r,C,M,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Nx(this.resolutions_,e,t||0);return mA(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return qU(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Zz(n){let e=n.getDefaultTileGrid();return e||(e=Zne(n),n.setDefaultTileGrid(e)),e}function Vne(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=c3(t);if(!$g(s,i)){const l=Us(s),o=Math.ceil((s[0]-i[0])/l);return i[0]+=l*o,n.getTileCoordForCoordAndZ(i,r)}return e}function Hne(n,e,t,r){r=r!==void 0?r:"top-left";const i=Xz(n,e,t);return new u3({extent:n,origin:kZ(n,r),resolutions:i,tileSize:t})}function aI(n){const e=n||{},t=e.extent||Sa("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Xz(t,e.maxZoom,e.tileSize,e.maxResolution)};return new u3(r)}function Xz(n,e,t,r){e=e!==void 0?e:ZU,t=xh(t!==void 0?t:KO);const i=Du(n),s=Us(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const l=e+1,o=new Array(l);for(let f=0;f<l;++f)o[f]=r/Math.pow(2,f);return o}function Zne(n,e,t,r){const i=c3(n);return Hne(i,e,t,r)}function c3(n){n=Sa(n);let e=n.getExtent();if(!e){const t=180*Z0.degrees/n.getMetersPerUnit();e=qm(-t,-t,t,t)}return e}class Jz extends Zy{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&xh(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||ko(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return mo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Zz(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),l=xh(i.getTileSize(e),this.tmpSize);return s==1?l:NJ(l,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Vne(i,e,r)),Nne(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Xne extends Fp{constructor(e,t){super(e),this.tile=t}}function eN(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,l=e.height,o=t.length,f=t[0].byteLength;if(i){const D=new Array(o);for(let U=0;U<o;++U)D[U]=new ImageData(new Uint8ClampedArray(t[U]),s,l);return n(D,r).data.buffer}const C=new Uint8ClampedArray(f),M=new Array(o),B=new Array(o);for(let D=0;D<o;++D)M[D]=new Uint8ClampedArray(t[D]),B[D]=[0,0,0,0];for(let D=0;D<f;D+=4){for(let U=0;U<o;++U){const G=M[U];B[U][0]=G[D],B[U][1]=G[D+1],B[U][2]=G[D+2],B[U][3]=G[D+3]}const R=n(B,r);C[D]=R[0],C[D+1]=R[1],C[D+2]=R[2],C[D+3]=R[3]}return C.buffer}}function Jne(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+eN.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function ere(n,e){const t=eN(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class tre extends __{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=Jne(e,this.onWorkerMessage_.bind(this,i));else r[0]=ere(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(f){return f.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/s);for(let f=0;f<s;++f){const C=f*o,M=[];for(let B=0,D=i.length;B<D;++B)M.push(i[B].slice(C,C+o));this.workers_[f].postMessage({buffers:M,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},M)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const l=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const f=this.dataLookup_[o].buffer,C=o*l;r.set(new Uint8ClampedArray(f),C),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const fT={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class pT extends Fp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class tN extends Hz{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=ire(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(co.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new CU(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Sd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:rre(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Sd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:ko(this),renderTargets:{}},this.setAttributions(function(r){const i=[];for(let s=0,l=e.sources.length;s<l;++s){const o=e.sources[s],f=o instanceof Zy?o:o.getSource();if(!f)continue;const C=f.getAttributions()?.(r);typeof C=="string"?i.push(C):C!==void 0&&i.push(...C)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new tre({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=sf(e);i.size[0]=Math.ceil(Us(e)/t),i.size[1]=Math.ceil(Du(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const l=i.viewState;return l.center=s,l.projection=r,l.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!$m(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const l=nre(this.layers_[s],e);if(l)r[s]=l;else return}const i={};this.dispatchEvent(new pT(fT.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!$m(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const f=Math.round(Us(s)/l),C=Math.round(Du(s)/l);o=gA(f,C),this.renderedImageCanvas_=new Mte(s,l,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new pT(fT.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}tN.prototype.dispose;let _g=null;function nre(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let l;if(s instanceof HTMLCanvasElement)l=s;else{if(s&&(l=s.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===r&&l.height===i)return l.getContext("2d").getImageData(0,0,r,i)}if(!_g)_g=gA(r,i,void 0,{willReadFrequently:!0});else{const o=_g.canvas;o.width!==r||o.height!==i?_g=gA(r,i,void 0,{willReadFrequently:!0}):_g.clearRect(0,0,r,i)}return _g.drawImage(l,0,0,r,i),_g.getImageData(0,0,r,i)}function rre(n){return n.map(function(e){return e.getLayerState()})}function ire(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=ore(n[r]);return t}function ore(n){let e;return n instanceof Zy?n instanceof Jz?e=new Vz({source:n}):n instanceof Hz&&(e=new jz({source:n})):e=n,e}function sre(n,e,t,r){const i=document.createElement("script"),s="olc_"+ko(e);function l(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){l(),t&&t()},1e4);window[s]=function(f){clearTimeout(o),l(),e(f)},document.head.appendChild(i)}const are=/\{z\}/g,lre=/\{x\}/g,Are=/\{y\}/g,ure=/\{-y\}/g;function cre(n,e,t,r,i){return n.replace(are,e.toString()).replace(lre,t.toString()).replace(Are,r.toString()).replace(ure,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function hre(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function dre(n,e){return function(t,r,i){if(!t)return;let s;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(s=o.getHeight()-1)}return cre(n,l,t[1],t[2],s)}}function nN(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=dre(n[i],e);return fre(r)}function fre(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=Une(e),s=Ng(i,n.length);return n[s](e,t,r)}}const wM={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class h3 extends Jz{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===h3.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=ko(t),i=t.getState();let s;i==Rr.LOADING?(this.tileLoadingKeys_[r]=!0,s=wM.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Rr.ERROR?wM.TILELOADERROR:i==Rr.LOADED?wM.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Xne(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=hre(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(nN(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class pre extends h3{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:mre,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Pz,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Y0(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Y0(t,e)))return this.tileGrid;const r=ko(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Zz(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,l){const o=[e,t,r],f=this.getTileCoordForTileUrlFunction(o,s),C=f?this.tileUrlFunction(f,i,s):void 0,M=new this.tileClass(o,C!==void 0?Rr.IDLE:Rr.EMPTY,C!==void 0?C:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return M.key=l,M.addEventListener(co.CHANGE,this.handleTileChange.bind(this)),M}getTile(e,t,r,i,s){const l=this.getProjection();if(!l||!s||Y0(l,s))return this.getTileInternal(e,t,r,i,l||s);const o=[e,t,r],f=this.getKey(),C=this.getTileGridForProjection(l),M=this.getTileGridForProjection(s),B=this.getTileCoordForTileUrlFunction(o,s),D=new qz(l,C,s,M,o,B,this.getTilePixelRatio(i),this.getGutter(),(R,U,G,W)=>this.getTileInternal(R,U,G,W,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return D.key=f,D}getTileInternal(e,t,r,i,s){const l=this.getKey();return this.createTile_(e,t,r,i,s,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Sa(e);if(r){const i=ko(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function mre(n,e){n.getImage().src=e}class rN extends pre{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Sa("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)sre(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Sa("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const C=S_(t,r);i=DZ(e.bounds,C)}const s=c3(r),l=e.minzoom||0,o=e.maxzoom||22,f=aI({extent:s,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=f,this.tileUrlFunction=nN(e.tiles,f),e.attribution&&!this.getAttributions()){const C=i!==void 0?i:s;this.setAttributions(function(M){return GA(C,M.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class lI extends h3{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||c3(t),i=e.tileGrid||aI({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:iN,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Rz,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Rr.IDLE){r.setState(Rr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(i),o=i[0],f=s.getResolution(o);Q0(l,-f,l);const C=this.tileGrid,M=C.getExtent();M&&Ip(l,M,l);const B=C.getZForResolution(f,this.zDirection);C.forEachTileCoord(l,B,D=>{const R=this.tileUrlFunction(D,e,t);this.sourceTiles_[R]||(this.sourceTiles_[R]=new this.tileClass(D,R?Rr.IDLE:Rr.EMPTY,R,this.format_,this.tileLoadFunction));const U=this.sourceTiles_[R];r.sourceTiles.push(U),this.tileKeysBySourceTileUrl_[R]||(this.tileKeysBySourceTileUrl_[R]=[]),this.tileKeysBySourceTileUrl_[R].push(r.getKey());const G=U.getState();if(G<Rr.LOADED){const W=J=>{this.handleTileChange(J);const $=U.getState();if($===Rr.LOADED||$===Rr.ERROR){const oe=U.getKey();oe in r.errorTileKeys?U.getState()===Rr.LOADED&&delete r.errorTileKeys[oe]:r.loadingSourceTiles--,$===Rr.ERROR?r.errorTileKeys[oe]=!0:U.removeEventListener(co.CHANGE,W),r.loadingSourceTiles===0&&r.setState(H0(r.errorTileKeys)?Rr.LOADED:Rr.ERROR)}};U.addEventListener(co.CHANGE,W),r.loadingSourceTiles++}G===Rr.IDLE&&(U.extent=C.getTileCoordExtent(D),U.projection=t,U.resolution=C.getResolution(D[0]),U.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(D=>D.getState()===Rr.ERROR)?Rr.ERROR:Rr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const l=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,r,i,s){const l=[e,t,r];let o=this.getTileCoordForTileUrlFunction(l,s);const f=this.getTileGrid().getExtent(),C=this.getTileGridForProjection(s);if(o&&f){const D=C.getTileCoordExtent(o);Q0(D,-C.getResolution(e),D),GA(f,D)||(o=null)}let M=!0;if(o!==null){const D=this.tileGrid,R=C.getResolution(e),U=D.getZForResolution(R,1),G=C.getTileCoordExtent(o);Q0(G,-R,G),D.forEachTileCoord(G,U,W=>{M=M&&!this.tileUrlFunction(W,i,s)})}const B=new Ete(l,M?Rr.EMPTY:Rr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.getProjection();ia(i===null||Y0(i,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const s=this.tileGrid,l=s.getResolutions().slice(),o=l.map(function(M,B){return s.getOrigin(B)}),f=l.map(function(M,B){return s.getTileSize(B)}),C=ZU+1;for(let M=l.length;M<C;++M)l.push(l[M-1]/2),o.push(o[M-1]),f.push(f[M-1]);r=new u3({extent:s.getExtent(),origins:o,resolutions:l,tileSizes:f}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=xh(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function iN(n,e){n.setLoader(function(t,r,i){Bz(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function gre(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,l=new Uint8ClampedArray(s.length),o=e.resolution*2,f=r-1,C=i-1,M=[0,0,0,0],B=2*Math.PI,D=Math.PI/2,R=Math.PI*e.sunEl/180,U=Math.PI*e.sunAz/180,G=Math.cos(R),W=Math.sin(R),J=e.highlightColor,$=e.shadowColor,oe=e.accentColor,te=e.encoding;let H,re,j,ue,me,ge,we,Ee,xe,We,be,rt,Ct,at,Je,ze,Te,He,pt,kt,ft,Bt;function Tt(Le,Pe="mapbox"){if(Pe==="mapbox")return(Le[0]*256*256+Le[1]*256+Le[2])*.1-1e4;if(Pe==="terrarium")return Le[0]*256+Le[1]+Le[2]/256-32768}for(re=0;re<=C;++re)for(me=re===0?0:re-1,ge=re===C?C:re+1,H=0;H<=f;++H)j=H===0?0:H-1,ue=H===f?f:H+1,we=(re*r+j)*4,M[0]=s[we],M[1]=s[we+1],M[2]=s[we+2],M[3]=s[we+3],Ee=e.vert*Tt(M,te),we=(re*r+ue)*4,M[0]=s[we],M[1]=s[we+1],M[2]=s[we+2],M[3]=s[we+3],xe=e.vert*Tt(M,te),We=(xe-Ee)/o,we=(me*r+H)*4,M[0]=s[we],M[1]=s[we+1],M[2]=s[we+2],M[3]=s[we+3],Ee=e.vert*Tt(M,te),we=(ge*r+H)*4,M[0]=s[we],M[1]=s[we+1],M[2]=s[we+2],M[3]=s[we+3],xe=e.vert*Tt(M,te),be=(xe-Ee)/o,Ct=Math.atan2(be,-We),Ct<0?Ct=D-Ct:Ct>D?Ct=B-Ct+D:Ct=D-Ct,rt=Math.atan(Math.sqrt(We*We+be*be)),Bt=W*Math.cos(rt)+G*Math.sin(rt)*Math.cos(U-Ct),at=Math.cos(rt),Je=255*Bt,pt=Math.min(Math.max(2*e.sunEl,0),1),kt=1.875-e.opacity*1.75,ft=e.opacity!==.5?D*((Math.pow(kt,rt)-1)/(Math.pow(kt,D)-1)):rt,Te={r:(1-at)*oe.r*pt*255,g:(1-at)*oe.g*pt*255,b:(1-at)*oe.b*pt*255,a:(1-at)*oe.a*pt*255},ze=Math.abs(((Ct+U)/Math.PI+.5)%2-1),He={r:(J.r*(1-ze)+$.r*ze)*Je,g:(J.g*(1-ze)+$.g*ze)*Je,b:(J.b*(1-ze)+$.b*ze)*Je,a:(J.a*(1-ze)+$.a*ze)*Je},we=(re*r+H)*4,l[we]=Te.r*(1-ze)+He.r,l[we+1]=Te.g*(1-ze)+He.g,l[we+2]=Te.b*(1-ze)+He.b,l[we+3]=s[we+3]*e.opacity*pt*Math.sin(ft);return new ImageData(l,r,i)}function yre(n,e=512){return n.getExtent()?aI({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():hm}function oN(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function vre(n,e,t="",r={},i=void 0){let s,l,o,f,C=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,f=o.source||o.layers,r=o):f=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(C=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:X2(s,o.accessToken),o=oN(s,o)),new Promise(function(M,B){Kz(e,o).then(function(D){if(D.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof eI||n instanceof mC))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const R=n instanceof mC?"vector":"geojson";if(f?Array.isArray(f)?l=D.layers.find(function(te){return te.id===f[0]}).source:l=f:(l=D.layers.find(function(te){return te.source&&D.sources[te.source].type===R}).source,f=l),!l)return B(new Error(`No ${R} source found in the glStyle.`));function U(){if(!C)return Promise.resolve();if(n instanceof mC)return lN(D.sources[l],s,o).then(function(j){const ue=n.getSource();ue?j!==ue&&(ue.setTileUrlFunction(j.getTileUrlFunction()),typeof ue.setUrls=="function"&&typeof j.getUrls=="function"&&ue.setUrls(j.getUrls()),ue.format_||(ue.format_=j.format_),ue.getAttributions()||ue.setAttributions(j.getAttributions()),ue.getTileLoadFunction()===iN&&ue.setTileLoadFunction(j.getTileLoadFunction()),Y0(ue.getProjection(),j.getProjection())&&(ue.tileGrid=j.getTileGrid())):n.setSource(j);const me=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&me.getMinZoom()>0&&n.setMaxResolution(Xv(Math.max(0,me.getMinZoom()-1e-12),me.getResolutions()))});const te=D.sources[l];let H=n.getSource();(!H||H.get("mapbox-source")!==te)&&(H=cN(te,s,o));const re=n.getSource();return re?H!==re&&(re.getAttributions()||re.setAttributions(H.getAttributions()),re.format_||(re.format_=H.getFormat()),re.url_=H.getUrl()):n.setSource(H),Promise.resolve()}let G,W;const J={},$={};function oe(){if(!W&&(!D.sprite||J)){if(o.projection&&!i){const j=Sa(o.projection).getUnits();j!=="m"&&(i=hm.map(ue=>ue/Z0[j]))}let te;const H=n.getSource();H instanceof lI&&H.format_ instanceof Gz&&(te=H.format_.layerName_),W=jte(n,D,f,i,J,$,(re,j=o.webfonts)=>Fte(re,j),o.getImage,te),n.getStyle()?U().then(M).catch(B):B(new Error(`Nothing to show for source [${l}]`))}else W?(n.setStyle(W),U().then(M).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(D.sprite){const te=Bte(D.sprite,o.accessToken,s||location.href);G=window.devicePixelRatio>=1.5?.5:1;const H=G==.5?"@2x":"";Promise.all(te.map(function(re){const j=new URL(re.url);let ue=j.origin+j.pathname+H+".json"+j.search;return new Promise(function(me,ge){Ly("Sprite",ue,o).then(me).catch(function(we){ue=j.origin+j.pathname+".json"+j.search,Ly("Sprite",ue,o).then(me).catch(ge)})}).then(function(me){me===void 0&&B(new Error("No sprites found."));let ge;if(ge=j.origin+j.pathname+H+".png"+j.search,o.transformRequest){const we=o.transformRequest(ge,"SpriteImage")||ge;(we instanceof Request||we instanceof Promise)&&(ge=we)}$[re.id]=ge;for(const we in me){const Ee=re.id=="default"?we:`${re.id}:${we}`;J[Ee]=me[we]}}).catch(function(me){B(new Error(`Sprites cannot be loaded: ${ue}: ${me.message}`))})})).then(oe).catch(B)}else oe()}).catch(B)})}function sN(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function Cre(n,e){const t=n.bounds;if(t){const r=Z6([t[0],t[1]],e),i=Z6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Sa(e).getExtent()}function aN(n,e,t){const r=new rN({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),l=Sa(t.projection||"EPSG:3857"),o=Cre(i,l),f=l.getExtent(),C=i.minzoom||0,M=i.maxzoom||22,B={attributions:r.getAttributions(),projection:l,tileGrid:new u3({origin:f?Xm(f):s.getOrigin(0),extent:o||s.getExtent(),minZoom:C,resolutions:yre(l,e.tileSize).slice(0,M+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function _re(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},l=n.paint||{};i.paint=l,of.zoom=iI(e,t.resolutions||hm),of.distanceFromCenter=0;let o;const f=xi(i,"paint","background-color",Ep,r);return l["background-opacity"]!==void 0&&(o=xi(i,"paint","background-opacity",Ep,r)),s.visibility=="none"?void 0:B0(f,o)}function bre(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Hy({source:new Zy({}),render(i){const s=_re(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function lN(n,e,t){return new Promise(function(r,i){Lz(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=aN(n,s,t);o.tileLoadFunction=l,o.format=new Gz({layerName:"mvt:layer"});const f=new lI(o);f.set("mapbox-source",n),r(f)}).catch(i)})}function xre(n,e,t){const r=new mC({declutter:!0,visible:!1});return lN(n,e,t).then(function(i){r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function AN(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Mre(n,e,t){return new Promise(function(r,i){Lz(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=new rN({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=aN(n,s,t).tileGrid,t.projection&&(o.projection=Sa(t.projection));const f=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(C,M,B){const D=AN(B);let R=f(C,M,B);if(R.indexOf(D)!=-1){const U=o.getTileGrid().getTileCoordExtent(C);R=R.replace(D,U.toString())}return R}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function uN(n,e,t){const r=new Vz;return Mre(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function wre(n,e,t){const r=uN(n,e,t);return new jz({source:new tN({operationType:"image",operation:gre,sources:[r]})})}function cN(n,e,t){const r=t.projection?new oT({dataProjection:t.projection}):new oT,i=n.data,s={};if(typeof i=="string"){const[o]=s2(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const C=(B,D,R)=>{const U=AN(R);return o.replace(U,`${B.join(",")}`)},M=new o2({attributions:n.attribution,format:r,loader:(B,D,R,U,G)=>{const W=typeof C=="function"?C(B,D,R):C;Ly("GeoJSON",W,t).then(J=>{const $=M.getFormat().readFeatures(J,{featureProjection:R});M.addFeatures($),U($)}).catch(J=>{M.removeLoadedExtent(B),G()})},strategy:ate});return M.set("mapbox-source",n),M}const f=new o2({attributions:n.attribution,format:r,url:o,loader:(C,M,B,D,R)=>{Ly("GeoJSON",o,t).then(U=>{const G=f.getFormat().readFeatures(U,{featureProjection:B});f.addFeatures(G),D(G)}).catch(U=>{f.removeLoadedExtent(C),R()})}});return f}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const l=new o2(Object.assign({attributions:n.attribution,format:r},s));return l.set("mapbox-source",n),l}function Sre(n,e,t){return new eI({declutter:!0,source:cN(n,e,t),visible:!1})}function Ere(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],Bre(n,e,r,t))}}function Bre(n,e,t,r){of.zoom=t,of.distanceFromCenter=0;const i=xi(n,"paint","raster-opacity",Ep,r);e.setOpacity(i)}function Ore(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=UB(r.layers),s=n.get("mapbox-layers"),l=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function Ire(n,e,t,r){const i=Fz(n),s=n.layers,l=t.type,o=t.source||sN(s,t.ref),f=n.sources[o];let C;if(l=="background")C=bre(t,r,i);else if(f.type=="vector")C=xre(f,e,r);else if(f.type=="raster")C=uN(f,e,r),C.setVisible(t.layout?t.layout.visibility!=="none":!0),C.on("prerender",Ere(t,C,i));else if(f.type=="geojson")C=Sre(f,e,r);else if(f.type=="raster-dem"&&t.type=="hillshade"){const B=wre(f,e,r);C=B,B.getSource().on("beforeoperations",function(D){const R=D.data;R.resolution=H6(r.projection||"EPSG:3857",D.resolution,sf(D.extent),"m"),of.zoom=iI(D.resolution,r.resolutions||hm),of.distanceFromCenter=0,R.encoding=f.encoding,R.vert=5*xi(t,"paint","hillshade-exaggeration",Ep,i),R.sunAz=xi(t,"paint","hillshade-illumination-direction",Ep,i),R.sunEl=35,R.opacity=.3,R.highlightColor=xi(t,"paint","hillshade-highlight-color",Ep,i),R.shadowColor=xi(t,"paint","hillshade-shadow-color",Ep,i),R.accentColor=xi(t,"paint","hillshade-accent-color",Ep,i)}),C.setVisible(t.layout?t.layout.visibility!=="none":!0)}const M=o;return C&&C.set("mapbox-source",M),C}function mT(n,e,t,r){const i=[];let s=null;if(e instanceof s3){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const B=r.projection?Sa(r.projection):s.getProjection();s=new wp(Object.assign(s.getProperties(),{maxResolution:hm[0]/Z0[B.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(Z6(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(hm[0]/Z0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const l=n.layers;let o=[],f,C,M;for(let B=0,D=l.length;B<D;++B){const R=l[B],U=R.type;if(U=="heatmap"){console.debug(`layers[${B}].type "${U}" not supported`);continue}else M=R.source||sN(l,R.ref),(!M||M!=C)&&(o.length&&(i.push(gT(f,o,n,t,e,r)),o=[]),f=Ire(n,t,R,r),f instanceof eI||f instanceof mC||(o=[]),C=f.get("mapbox-source")),o.push(R.id)}return i.push(gT(f,o,n,t,e,r)),Promise.all(i)}function Tre(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new s3({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:X2(e,t.accessToken);t=oN(s,t),r=new Promise(function(l,o){Kz(e,t).then(function(f){mT(f,i,s,t).then(function(){l(i)}).catch(o)}).catch(function(f){o(new Error(`Could not load ${e}: ${f.message}`))})})}else r=new Promise(function(s,l){mT(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:X2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(l)});return r}function gT(n,e,t,r,i,s={}){let l=24,o=0;const f=t.layers;for(let C=0,M=f.length;C<M;++C){const B=f[C];e.indexOf(B.id)!==-1&&(l=Math.min("minzoom"in B?B.minzoom:0,l),o=Math.max("maxzoom"in B?B.maxzoom:24,o))}return new Promise(function(C,M){const B=function(){const R=n.getSource();if(!R||R.getState()==="error"){M(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in R){const U=R.getTileGrid();if(U){const G=U.getMinZoom();(l>0||G>0)&&n.setMaxResolution(Math.min(Xv(Math.max(0,l-1e-12),hm),Xv(Math.max(0,G-1e-12),U.getResolutions()))),o<24&&n.setMinResolution(Xv(o,hm))}}else l>0&&n.setMaxResolution(Xv(Math.max(0,l-1e-12),hm));R instanceof o2||R instanceof lI?vre(n,t,e,Object.assign({styleUrl:r},s)).then(function(){Ore(n,i),C()}).catch(M):C()};n.set("mapbox-layers",e);const D=i.getLayers();D.getArray().indexOf(n)===-1&&D.push(n),n.getSource()?B():n.once("change:source",B)})}function ei(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ei=function(){return l},l}ei();function yT(n){return ei().f[0]++,ei().s[0]++,ei().b[1][0]++,!n||(ei().b[1][1]++,n.length<2)?(ei().b[0][0]++,ei().s[1]++,null):(ei().b[0][1]++,ei().s[2]++,le.jsx("span",{className:"maputnik-coords",children:n.map(e=>(ei().f[1]++,ei().s[3]++,String(e).padStart(7,""))).join(", ")}))}class kre extends Fn.Component{static defaultProps=(ei().s[4]++,{onMapLoaded:()=>{ei().f[2]++},onDataChange:()=>{ei().f[3]++},onLayerSelect:()=>{ei().f[4]++}});updateStyle;map;container=(ei().s[5]++,null);overlay;popupContainer=(ei().s[6]++,null);constructor(e){ei().f[5]++,ei().s[7]++,super(e),ei().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},ei().s[9]++,this.updateStyle=f_.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(ei().f[6]++,ei().s[10]++,this.map)ei().b[2][1]++;else{ei().b[2][0]++,ei().s[11]++;return}ei().s[12]++,this.map.getLayers().clear(),ei().s[13]++,Tre(this.map,e)}componentDidUpdate(e){ei().f[7]++,ei().s[14]++,this.props.mapStyle!==e.mapStyle?(ei().b[3][0]++,ei().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):ei().b[3][1]++}componentDidMount(){ei().f[8]++,ei().s[16]++,this.overlay=new Ste({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(ei().s[17]++,new s3({target:this.container,overlays:[this.overlay],view:new wp({zoom:1,center:[180,-90]})}));ei().s[18]++,e.on("pointermove",r=>{ei().f[9]++;const i=(ei().s[19]++,q4(r.coordinate));ei().s[20]++,this.setState({cursor:[i[0].toFixed(2),i[1].toFixed(2)]})}),ei().s[21]++;const t=()=>{ei().f[10]++;const r=(ei().s[22]++,e.getView().getZoom()),i=(ei().s[23]++,q4(e.getView().getCenter()));ei().s[24]++,this.props.onChange({zoom:r,center:{lng:i[0],lat:i[1]}})};ei().s[25]++,t(),ei().s[26]++,e.on("moveend",t),ei().s[27]++,e.on("postrender",r=>{ei().f[11]++;const i=(ei().s[28]++,q4(e.getView().getCenter()));ei().s[29]++,this.setState({center:[i[0].toFixed(2),i[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),ei().s[30]++,this.map=e,ei().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(ei().s[32]++,e=>{ei().f[12]++,ei().s[33]++,e.target.blur(),ei().s[34]++,this.overlay.setPosition(void 0)});render(){ei().f[13]++;const e=(ei().s[35]++,this.props.t);return ei().s[36]++,le.jsxs("div",{className:"maputnik-ol-container",children:[le.jsxs("div",{ref:t=>(ei().f[14]++,ei().s[37]++,this.popupContainer=t),style:{background:"black"},className:"maputnik-popup",children:[le.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),le.jsx(cU,{features:(ei().b[4][0]++,this.state.selectedFeatures||(ei().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),le.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(ei().b[5][0]++,this.props.debugToolbox&&(ei().b[5][1]++,le.jsxs("div",{className:"maputnik-ol-debug",children:[le.jsxs("div",{children:[le.jsxs("label",{children:[e("cursor:")," "]}),le.jsx("span",{children:yT(this.state.cursor)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[e("center:")," "]}),le.jsx("span",{children:yT(this.state.center)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[e("rotation:")," "]}),le.jsx("span",{children:this.state.rotation})]})]}))),le.jsx("div",{className:"maputnik-ol",ref:t=>(ei().f[15]++,ei().s[38]++,this.container=t),role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const Pre=(ei().s[39]++,zs()(kre));var SM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var vT;function Rre(){return vT||(vT=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var o in s)e.call(s,o)&&s[o]&&(l=i(l,o));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(SM)),SM.exports}var Dre=Rre();const fm=yA(Dre);var Jv=px();function Fre(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Nt.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const d3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xy(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function AI(n){return"nodeType"in n}function Bd(n){var e,t;return n?Xy(n)?n:AI(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function uI(n){const{Document:e}=Bd(n);return n instanceof e}function F_(n){return Xy(n)?!1:n instanceof Bd(n).HTMLElement}function hN(n){return n instanceof Bd(n).SVGElement}function Jy(n){return n?Xy(n)?n.document:AI(n)?uI(n)?n:F_(n)||hN(n)?n.ownerDocument:document:document:document}const pm=d3?Nt.useLayoutEffect:Nt.useEffect;function cI(n){const e=Nt.useRef(n);return pm(()=>{e.current=n}),Nt.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Kre(){const n=Nt.useRef(null),e=Nt.useCallback((r,i)=>{n.current=setInterval(r,i)},[]),t=Nt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function HC(n,e){e===void 0&&(e=[n]);const t=Nt.useRef(n);return pm(()=>{t.current!==n&&(t.current=n)},e),t}function K_(n,e){const t=Nt.useRef();return Nt.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function tx(n){const e=cI(n),t=Nt.useRef(null),r=Nt.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,r]}function mB(n){const e=Nt.useRef();return Nt.useEffect(()=>{e.current=n},[n]),e.current}let EM={};function L_(n,e){return Nt.useMemo(()=>{if(e)return e;const t=EM[n]==null?0:EM[n]+1;return EM[n]=t,n+"-"+t},[n,e])}function dN(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.reduce((s,l)=>{const o=Object.entries(l);for(const[f,C]of o){const M=s[f];M!=null&&(s[f]=M+n*C)}return s},{...e})}}const by=dN(1),nx=dN(-1);function Lre(n){return"clientX"in n&&"clientY"in n}function hI(n){if(!n)return!1;const{KeyboardEvent:e}=Bd(n.target);return e&&n instanceof e}function Ure(n){if(!n)return!1;const{TouchEvent:e}=Bd(n.target);return e&&n instanceof e}function gB(n){if(Ure(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Lre(n)?{x:n.clientX,y:n.clientY}:null}const ZC=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[ZC.Translate.toString(n),ZC.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),CT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function zre(n){return n.matches(CT)?n:n.querySelector(CT)}const Nre={display:"none"};function Gre(n){let{id:e,value:t}=n;return Fn.createElement("div",{id:e,style:Nre},t)}function jre(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Fn.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},t)}function Wre(){const[n,e]=Nt.useState("");return{announce:Nt.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const fN=Nt.createContext(null);function Qre(n){const e=Nt.useContext(fN);Nt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Yre(){const[n]=Nt.useState(()=>new Set),e=Nt.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[Nt.useCallback(r=>{let{type:i,event:s}=r;n.forEach(l=>{var o;return(o=l[i])==null?void 0:o.call(l,s)})},[n]),e]}const qre={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$re={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Vre(n){let{announcements:e=$re,container:t,hiddenTextDescribedById:r,screenReaderInstructions:i=qre}=n;const{announce:s,announcement:l}=Wre(),o=L_("DndLiveRegion"),[f,C]=Nt.useState(!1);if(Nt.useEffect(()=>{C(!0)},[]),Qre(Nt.useMemo(()=>({onDragStart(B){let{active:D}=B;s(e.onDragStart({active:D}))},onDragMove(B){let{active:D,over:R}=B;e.onDragMove&&s(e.onDragMove({active:D,over:R}))},onDragOver(B){let{active:D,over:R}=B;s(e.onDragOver({active:D,over:R}))},onDragEnd(B){let{active:D,over:R}=B;s(e.onDragEnd({active:D,over:R}))},onDragCancel(B){let{active:D,over:R}=B;s(e.onDragCancel({active:D,over:R}))}}),[s,e])),!f)return null;const M=Fn.createElement(Fn.Fragment,null,Fn.createElement(Gre,{id:r,value:i.draggable}),Fn.createElement(jre,{id:o,announcement:l}));return t?Jv.createPortal(M,t):M}var Xu;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Xu||(Xu={}));function rx(){}function Hre(n,e){return Nt.useMemo(()=>({sensor:n,options:{}}),[n,e])}function Zre(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Nt.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const kp=Object.freeze({x:0,y:0});function Xre(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Jre(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function eie(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function tie(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function _T(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const nie=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const i=_T(e,e.left,e.top),s=[];for(const l of r){const{id:o}=l,f=t.get(o);if(f){const C=Xre(_T(f),i);s.push({id:o,data:{droppableContainer:l,value:C}})}}return s.sort(Jre)};function rie(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),i=Math.min(e.left+e.width,n.left+n.width),s=Math.min(e.top+e.height,n.top+n.height),l=i-r,o=s-t;if(r<i&&t<s){const f=e.width*e.height,C=n.width*n.height,M=l*o,B=M/(f+C-M);return Number(B.toFixed(4))}return 0}const iie=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const i=[];for(const s of r){const{id:l}=s,o=t.get(l);if(o){const f=rie(o,e);f>0&&i.push({id:l,data:{droppableContainer:s,value:f}})}}return i.sort(eie)};function oie(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function pN(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:kp}function sie(n){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((l,o)=>({...l,top:l.top+n*o.y,bottom:l.bottom+n*o.y,left:l.left+n*o.x,right:l.right+n*o.x}),{...t})}}const aie=sie(1);function lie(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Aie(n,e,t){const r=lie(e);if(!r)return n;const{scaleX:i,scaleY:s,x:l,y:o}=r,f=n.left-l-(1-i)*parseFloat(t),C=n.top-o-(1-s)*parseFloat(t.slice(t.indexOf(" ")+1)),M=i?n.width/i:n.width,B=s?n.height/s:n.height;return{width:M,height:B,top:C,right:f+M,bottom:C+B,left:f}}const uie={ignoreTransform:!1};function ev(n,e){e===void 0&&(e=uie);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:C,transformOrigin:M}=Bd(n).getComputedStyle(n);C&&(t=Aie(t,C,M))}const{top:r,left:i,width:s,height:l,bottom:o,right:f}=t;return{top:r,left:i,width:s,height:l,bottom:o,right:f}}function bT(n){return ev(n,{ignoreTransform:!0})}function cie(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function hie(n,e){return e===void 0&&(e=Bd(n).getComputedStyle(n)),e.position==="fixed"}function die(n,e){e===void 0&&(e=Bd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?t.test(s):!1})}function dI(n,e){const t=[];function r(i){if(e!=null&&t.length>=e||!i)return t;if(uI(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!F_(i)||hN(i)||t.includes(i))return t;const s=Bd(n).getComputedStyle(i);return i!==n&&die(i,s)&&t.push(i),hie(i,s)?t:r(i.parentNode)}return n?r(n):t}function mN(n){const[e]=dI(n,1);return e??null}function BM(n){return!d3||!n?null:Xy(n)?n:AI(n)?uI(n)||n===Jy(n).scrollingElement?window:F_(n)?n:null:null}function gN(n){return Xy(n)?n.scrollX:n.scrollLeft}function yN(n){return Xy(n)?n.scrollY:n.scrollTop}function yB(n){return{x:gN(n),y:yN(n)}}var bc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(bc||(bc={}));function vN(n){return!d3||!n?!1:n===document.scrollingElement}function CN(n){const e={x:0,y:0},t=vN(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},i=n.scrollTop<=e.y,s=n.scrollLeft<=e.x,l=n.scrollTop>=r.y,o=n.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:l,isRight:o,maxScroll:r,minScroll:e}}const fie={x:.2,y:.2};function pie(n,e,t,r,i){let{top:s,left:l,right:o,bottom:f}=t;r===void 0&&(r=10),i===void 0&&(i=fie);const{isTop:C,isBottom:M,isLeft:B,isRight:D}=CN(n),R={x:0,y:0},U={x:0,y:0},G={height:e.height*i.y,width:e.width*i.x};return!C&&s<=e.top+G.height?(R.y=bc.Backward,U.y=r*Math.abs((e.top+G.height-s)/G.height)):!M&&f>=e.bottom-G.height&&(R.y=bc.Forward,U.y=r*Math.abs((e.bottom-G.height-f)/G.height)),!D&&o>=e.right-G.width?(R.x=bc.Forward,U.x=r*Math.abs((e.right-G.width-o)/G.width)):!B&&l<=e.left+G.width&&(R.x=bc.Backward,U.x=r*Math.abs((e.left+G.width-l)/G.width)),{direction:R,speed:U}}function mie(n){if(n===document.scrollingElement){const{innerWidth:s,innerHeight:l}=window;return{top:0,left:0,right:s,bottom:l,width:s,height:l}}const{top:e,left:t,right:r,bottom:i}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:i,width:n.clientWidth,height:n.clientHeight}}function _N(n){return n.reduce((e,t)=>by(e,yB(t)),kp)}function gie(n){return n.reduce((e,t)=>e+gN(t),0)}function yie(n){return n.reduce((e,t)=>e+yN(t),0)}function vie(n,e){if(e===void 0&&(e=ev),!n)return;const{top:t,left:r,bottom:i,right:s}=e(n);mN(n)&&(i<=0||s<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Cie=[["x",["left","right"],gie],["y",["top","bottom"],yie]];class fI{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=dI(t),i=_N(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,l,o]of Cie)for(const f of l)Object.defineProperty(this,f,{get:()=>{const C=o(r),M=i[s]-C;return this.rect[f]+M},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gC{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var i;(i=this.target)==null||i.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function _ie(n){const{EventTarget:e}=Bd(n);return n instanceof e?n:Jy(n)}function OM(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Rf;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Rf||(Rf={}));function xT(n){n.preventDefault()}function bie(n){n.stopPropagation()}var ga;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(ga||(ga={}));const bN={start:[ga.Space,ga.Enter],cancel:[ga.Esc],end:[ga.Space,ga.Enter,ga.Tab]},xie=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case ga.Right:return{...t,x:t.x+25};case ga.Left:return{...t,x:t.x-25};case ga.Down:return{...t,y:t.y+25};case ga.Up:return{...t,y:t.y-25}}};class xN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new gC(Jy(t)),this.windowListeners=new gC(Bd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rf.Resize,this.handleCancel),this.windowListeners.add(Rf.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rf.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&vie(r),t(kp)}handleKeyDown(e){if(hI(e)){const{active:t,context:r,options:i}=this.props,{keyboardCodes:s=bN,coordinateGetter:l=xie,scrollBehavior:o="smooth"}=i,{code:f}=e;if(s.end.includes(f)){this.handleEnd(e);return}if(s.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:C}=r.current,M=C?{x:C.left,y:C.top}:kp;this.referenceCoordinates||(this.referenceCoordinates=M);const B=l(e,{active:t,context:r.current,currentCoordinates:M});if(B){const D=nx(B,M),R={x:0,y:0},{scrollableAncestors:U}=r.current;for(const G of U){const W=e.code,{isTop:J,isRight:$,isLeft:oe,isBottom:te,maxScroll:H,minScroll:re}=CN(G),j=mie(G),ue={x:Math.min(W===ga.Right?j.right-j.width/2:j.right,Math.max(W===ga.Right?j.left:j.left+j.width/2,B.x)),y:Math.min(W===ga.Down?j.bottom-j.height/2:j.bottom,Math.max(W===ga.Down?j.top:j.top+j.height/2,B.y))},me=W===ga.Right&&!$||W===ga.Left&&!oe,ge=W===ga.Down&&!te||W===ga.Up&&!J;if(me&&ue.x!==B.x){const we=G.scrollLeft+D.x,Ee=W===ga.Right&&we<=H.x||W===ga.Left&&we>=re.x;if(Ee&&!D.y){G.scrollTo({left:we,behavior:o});return}Ee?R.x=G.scrollLeft-we:R.x=W===ga.Right?G.scrollLeft-H.x:G.scrollLeft-re.x,R.x&&G.scrollBy({left:-R.x,behavior:o});break}else if(ge&&ue.y!==B.y){const we=G.scrollTop+D.y,Ee=W===ga.Down&&we<=H.y||W===ga.Up&&we>=re.y;if(Ee&&!D.x){G.scrollTo({top:we,behavior:o});return}Ee?R.y=G.scrollTop-we:R.y=W===ga.Down?G.scrollTop-H.y:G.scrollTop-re.y,R.y&&G.scrollBy({top:-R.y,behavior:o});break}}this.handleMove(e,by(nx(B,this.referenceCoordinates),R))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xN.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=bN,onActivation:i}=e,{active:s}=t;const{code:l}=n.nativeEvent;if(r.start.includes(l)){const o=s.activatorNode.current;return o&&n.target!==o?!1:(n.preventDefault(),i?.({event:n.nativeEvent}),!0)}return!1}}];function MT(n){return!!(n&&"distance"in n)}function wT(n){return!!(n&&"delay"in n)}class pI{constructor(e,t,r){var i;r===void 0&&(r=_ie(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:l}=s;this.props=e,this.events=t,this.document=Jy(l),this.documentListeners=new gC(this.document),this.listeners=new gC(r),this.windowListeners=new gC(Bd(l)),this.initialCoordinates=(i=gB(s))!=null?i:kp,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Rf.Resize,this.handleCancel),this.windowListeners.add(Rf.DragStart,xT),this.windowListeners.add(Rf.VisibilityChange,this.handleCancel),this.windowListeners.add(Rf.ContextMenu,xT),this.documentListeners.add(Rf.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(wT(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(MT(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Rf.Click,bie,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rf.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:l,options:{activationConstraint:o}}=s;if(!i)return;const f=(t=gB(e))!=null?t:kp,C=nx(i,f);if(!r&&o){if(MT(o)){if(o.tolerance!=null&&OM(C,o.tolerance))return this.handleCancel();if(OM(C,o.distance))return this.handleStart()}if(wT(o)&&OM(C,o.tolerance))return this.handleCancel();this.handlePending(o,C);return}e.cancelable&&e.preventDefault(),l(f)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ga.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Mie={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class mI extends pI{constructor(e){const{event:t}=e,r=Jy(t.target);super(e,Mie,r)}}mI.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const wie={move:{name:"mousemove"},end:{name:"mouseup"}};var vB;(function(n){n[n.RightClick=2]="RightClick"})(vB||(vB={}));class Sie extends pI{constructor(e){super(e,wie,Jy(e.event.target))}}Sie.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===vB.RightClick?!1:(r?.({event:t}),!0)}}];const IM={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Eie extends pI{constructor(e){super(e,IM)}static setup(){return window.addEventListener(IM.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(IM.move.name,e)};function e(){}}}Eie.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:i}=t;return i.length>1?!1:(r?.({event:t}),!0)}}];var yC;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(yC||(yC={}));var ix;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(ix||(ix={}));function Bie(n){let{acceleration:e,activator:t=yC.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:l=5,order:o=ix.TreeOrder,pointerCoordinates:f,scrollableAncestors:C,scrollableAncestorRects:M,delta:B,threshold:D}=n;const R=Iie({delta:B,disabled:!s}),[U,G]=Kre(),W=Nt.useRef({x:0,y:0}),J=Nt.useRef({x:0,y:0}),$=Nt.useMemo(()=>{switch(t){case yC.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case yC.DraggableRect:return i}},[t,i,f]),oe=Nt.useRef(null),te=Nt.useCallback(()=>{const re=oe.current;if(!re)return;const j=W.current.x*J.current.x,ue=W.current.y*J.current.y;re.scrollBy(j,ue)},[]),H=Nt.useMemo(()=>o===ix.TreeOrder?[...C].reverse():C,[o,C]);Nt.useEffect(()=>{if(!s||!C.length||!$){G();return}for(const re of H){if(r?.(re)===!1)continue;const j=C.indexOf(re),ue=M[j];if(!ue)continue;const{direction:me,speed:ge}=pie(re,ue,$,e,D);for(const we of["x","y"])R[we][me[we]]||(ge[we]=0,me[we]=0);if(ge.x>0||ge.y>0){G(),oe.current=re,U(te,l),W.current=ge,J.current=me;return}}W.current={x:0,y:0},J.current={x:0,y:0},G()},[e,te,r,G,s,l,JSON.stringify($),JSON.stringify(R),U,C,H,M,JSON.stringify(D)])}const Oie={x:{[bc.Backward]:!1,[bc.Forward]:!1},y:{[bc.Backward]:!1,[bc.Forward]:!1}};function Iie(n){let{delta:e,disabled:t}=n;const r=mB(e);return K_(i=>{if(t||!r||!i)return Oie;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[bc.Backward]:i.x[bc.Backward]||s.x===-1,[bc.Forward]:i.x[bc.Forward]||s.x===1},y:{[bc.Backward]:i.y[bc.Backward]||s.y===-1,[bc.Forward]:i.y[bc.Forward]||s.y===1}}},[t,e,r])}function Tie(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return K_(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function kie(n,e){return Nt.useMemo(()=>n.reduce((t,r)=>{const{sensor:i}=r,s=i.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...t,...s]},[]),[n,e])}var XC;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(XC||(XC={}));var CB;(function(n){n.Optimized="optimized"})(CB||(CB={}));const ST=new Map;function Pie(n,e){let{dragging:t,dependencies:r,config:i}=e;const[s,l]=Nt.useState(null),{frequency:o,measure:f,strategy:C}=i,M=Nt.useRef(n),B=W(),D=HC(B),R=Nt.useCallback(function(J){J===void 0&&(J=[]),!D.current&&l($=>$===null?J:$.concat(J.filter(oe=>!$.includes(oe))))},[D]),U=Nt.useRef(null),G=K_(J=>{if(B&&!t)return ST;if(!J||J===ST||M.current!==n||s!=null){const $=new Map;for(let oe of n){if(!oe)continue;if(s&&s.length>0&&!s.includes(oe.id)&&oe.rect.current){$.set(oe.id,oe.rect.current);continue}const te=oe.node.current,H=te?new fI(f(te),te):null;oe.rect.current=H,H&&$.set(oe.id,H)}return $}return J},[n,s,t,B,f]);return Nt.useEffect(()=>{M.current=n},[n]),Nt.useEffect(()=>{B||R()},[t,B]),Nt.useEffect(()=>{s&&s.length>0&&l(null)},[JSON.stringify(s)]),Nt.useEffect(()=>{B||typeof o!="number"||U.current!==null||(U.current=setTimeout(()=>{R(),U.current=null},o))},[o,B,R,...r]),{droppableRects:G,measureDroppableContainers:R,measuringScheduled:s!=null};function W(){switch(C){case XC.Always:return!1;case XC.BeforeDragging:return t;default:return!t}}}function MN(n,e){return K_(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Rie(n,e){return MN(n,e)}function Die(n){let{callback:e,disabled:t}=n;const r=cI(e),i=Nt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,t]);return Nt.useEffect(()=>()=>i?.disconnect(),[i]),i}function f3(n){let{callback:e,disabled:t}=n;const r=cI(e),i=Nt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[t]);return Nt.useEffect(()=>()=>i?.disconnect(),[i]),i}function Fie(n){return new fI(ev(n),n)}function ET(n,e,t){e===void 0&&(e=Fie);const[r,i]=Nt.useState(null);function s(){i(f=>{if(!n)return null;if(n.isConnected===!1){var C;return(C=f??t)!=null?C:null}const M=e(n);return JSON.stringify(f)===JSON.stringify(M)?f:M})}const l=Die({callback(f){if(n)for(const C of f){const{type:M,target:B}=C;if(M==="childList"&&B instanceof HTMLElement&&B.contains(n)){s();break}}}}),o=f3({callback:s});return pm(()=>{s(),n?(o?.observe(n),l?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),l?.disconnect())},[n]),r}function Kie(n){const e=MN(n);return pN(n,e)}const BT=[];function Lie(n){const e=Nt.useRef(n),t=K_(r=>n?r&&r!==BT&&n&&e.current&&n.parentNode===e.current.parentNode?r:dI(n):BT,[n]);return Nt.useEffect(()=>{e.current=n},[n]),t}function Uie(n){const[e,t]=Nt.useState(null),r=Nt.useRef(n),i=Nt.useCallback(s=>{const l=BM(s.target);l&&t(o=>o?(o.set(l,yB(l)),new Map(o)):null)},[]);return Nt.useEffect(()=>{const s=r.current;if(n!==s){l(s);const o=n.map(f=>{const C=BM(f);return C?(C.addEventListener("scroll",i,{passive:!0}),[C,yB(C)]):null}).filter(f=>f!=null);t(o.length?new Map(o):null),r.current=n}return()=>{l(n),l(s)};function l(o){o.forEach(f=>{const C=BM(f);C?.removeEventListener("scroll",i)})}},[i,n]),Nt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((s,l)=>by(s,l),kp):_N(n):kp,[n,e])}function OT(n,e){e===void 0&&(e=[]);const t=Nt.useRef(null);return Nt.useEffect(()=>{t.current=null},e),Nt.useEffect(()=>{const r=n!==kp;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?nx(n,t.current):kp}function zie(n){Nt.useEffect(()=>{if(!d3)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function Nie(n,e){return Nt.useMemo(()=>n.reduce((t,r)=>{let{eventName:i,handler:s}=r;return t[i]=l=>{s(l,e)},t},{}),[n,e])}function wN(n){return Nt.useMemo(()=>n?cie(n):null,[n])}const IT=[];function Gie(n,e){e===void 0&&(e=ev);const[t]=n,r=wN(t?Bd(t):null),[i,s]=Nt.useState(IT);function l(){s(()=>n.length?n.map(f=>vN(f)?r:new fI(e(f),f)):IT)}const o=f3({callback:l});return pm(()=>{o?.disconnect(),l(),n.forEach(f=>o?.observe(f))},[n]),i}function jie(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return F_(e)?e:n}function Wie(n){let{measure:e}=n;const[t,r]=Nt.useState(null),i=Nt.useCallback(C=>{for(const{target:M}of C)if(F_(M)){r(B=>{const D=e(M);return B?{...B,width:D.width,height:D.height}:D});break}},[e]),s=f3({callback:i}),l=Nt.useCallback(C=>{const M=jie(C);s?.disconnect(),M&&s?.observe(M),r(M?e(M):null)},[e,s]),[o,f]=tx(l);return Nt.useMemo(()=>({nodeRef:o,rect:t,setRef:f}),[t,o,f])}const Qie=[{sensor:mI,options:{}},{sensor:xN,options:{}}],Yie={current:{}},a2={draggable:{measure:bT},droppable:{measure:bT,strategy:XC.WhileDragging,frequency:CB.Optimized},dragOverlay:{measure:ev}};class vC extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const qie={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vC,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:a2,measureDroppableContainers:rx,windowRect:null,measuringScheduled:!1},$ie={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rx,draggableNodes:new Map,over:null,measureDroppableContainers:rx},p3=Nt.createContext($ie),SN=Nt.createContext(qie);function Vie(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vC}}}function Hie(n,e){switch(e.type){case Xu.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Xu.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Xu.DragEnd:case Xu.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Xu.RegisterDroppable:{const{element:t}=e,{id:r}=t,i=new vC(n.droppable.containers);return i.set(r,t),{...n,droppable:{...n.droppable,containers:i}}}case Xu.SetDroppableDisabled:{const{id:t,key:r,disabled:i}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new vC(n.droppable.containers);return l.set(t,{...s,disabled:i}),{...n,droppable:{...n.droppable,containers:l}}}case Xu.UnregisterDroppable:{const{id:t,key:r}=e,i=n.droppable.containers.get(t);if(!i||r!==i.key)return n;const s=new vC(n.droppable.containers);return s.delete(t),{...n,droppable:{...n.droppable,containers:s}}}default:return n}}function Zie(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:i}=Nt.useContext(p3),s=mB(r),l=mB(t?.id);return Nt.useEffect(()=>{if(!e&&!r&&s&&l!=null){if(!hI(s)||document.activeElement===s.target)return;const o=i.get(l);if(!o)return;const{activatorNode:f,node:C}=o;if(!f.current&&!C.current)return;requestAnimationFrame(()=>{for(const M of[f.current,C.current]){if(!M)continue;const B=zre(M);if(B){B.focus();break}}})}},[r,e,i,l,s]),null}function Xie(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((i,s)=>s({transform:i,...r}),t):t}function Jie(n){return Nt.useMemo(()=>({draggable:{...a2.draggable,...n?.draggable},droppable:{...a2.droppable,...n?.droppable},dragOverlay:{...a2.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function eoe(n){let{activeNode:e,measure:t,initialRect:r,config:i=!0}=n;const s=Nt.useRef(!1),{x:l,y:o}=typeof i=="boolean"?{x:i,y:i}:i;pm(()=>{if(!l&&!o||!e){s.current=!1;return}if(s.current||!r)return;const C=e?.node.current;if(!C||C.isConnected===!1)return;const M=t(C),B=pN(M,r);if(l||(B.x=0),o||(B.y=0),s.current=!0,Math.abs(B.x)>0||Math.abs(B.y)>0){const D=mN(C);D&&D.scrollBy({top:B.y,left:B.x})}},[e,l,o,r,t])}const EN=Nt.createContext({...kp,scaleX:1,scaleY:1});var I0;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(I0||(I0={}));const toe=Nt.memo(function(e){var t,r,i,s;let{id:l,accessibility:o,autoScroll:f=!0,children:C,sensors:M=Qie,collisionDetection:B=iie,measuring:D,modifiers:R,...U}=e;const G=Nt.useReducer(Hie,void 0,Vie),[W,J]=G,[$,oe]=Yre(),[te,H]=Nt.useState(I0.Uninitialized),re=te===I0.Initialized,{draggable:{active:j,nodes:ue,translate:me},droppable:{containers:ge}}=W,we=j!=null?ue.get(j):null,Ee=Nt.useRef({initial:null,translated:null}),xe=Nt.useMemo(()=>{var nt;return j!=null?{id:j,data:(nt=we?.data)!=null?nt:Yie,rect:Ee}:null},[j,we]),We=Nt.useRef(null),[be,rt]=Nt.useState(null),[Ct,at]=Nt.useState(null),Je=HC(U,Object.values(U)),ze=L_("DndDescribedBy",l),Te=Nt.useMemo(()=>ge.getEnabled(),[ge]),He=Jie(D),{droppableRects:pt,measureDroppableContainers:kt,measuringScheduled:ft}=Pie(Te,{dragging:re,dependencies:[me.x,me.y],config:He.droppable}),Bt=Tie(ue,j),Tt=Nt.useMemo(()=>Ct?gB(Ct):null,[Ct]),Le=It(),Pe=Rie(Bt,He.draggable.measure);eoe({activeNode:j!=null?ue.get(j):null,config:Le.layoutShiftCompensation,initialRect:Pe,measure:He.draggable.measure});const ke=ET(Bt,He.draggable.measure,Pe),Qe=ET(Bt?Bt.parentElement:null),_t=Nt.useRef({activatorEvent:null,active:null,activeNode:Bt,collisionRect:null,collisions:null,droppableRects:pt,draggableNodes:ue,draggingNode:null,draggingNodeRect:null,droppableContainers:ge,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),gt=ge.getNodeFor((t=_t.current.over)==null?void 0:t.id),wt=Wie({measure:He.dragOverlay.measure}),Qt=(r=wt.nodeRef.current)!=null?r:Bt,Ft=re?(i=wt.rect)!=null?i:ke:null,ln=!!(wt.nodeRef.current&&wt.rect),Vn=Kie(ln?null:ke),jt=wN(Qt?Bd(Qt):null),Un=Lie(re?gt??Bt:null),wn=Gie(Un),Mn=Xie(R,{transform:{x:me.x-Vn.x,y:me.y-Vn.y,scaleX:1,scaleY:1},activatorEvent:Ct,active:xe,activeNodeRect:ke,containerNodeRect:Qe,draggingNodeRect:Ft,over:_t.current.over,overlayNodeRect:wt.rect,scrollableAncestors:Un,scrollableAncestorRects:wn,windowRect:jt}),En=Tt?by(Tt,me):null,Mr=Uie(Un),Hn=OT(Mr),Pn=OT(Mr,[ke]),Ne=by(Mn,Hn),he=Ft?aie(Ft,Mn):null,ie=xe&&he?B({active:xe,collisionRect:he,droppableRects:pt,droppableContainers:Te,pointerCoordinates:En}):null,se=tie(ie,"id"),[fe,Oe]=Nt.useState(null),Ge=ln?Mn:by(Mn,Pn),ct=oie(Ge,(s=fe?.rect)!=null?s:null,ke),$e=Nt.useRef(null),De=Nt.useCallback((nt,en)=>{let{sensor:Tn,options:xn}=en;if(We.current==null)return;const er=ue.get(We.current);if(!er)return;const Qn=nt.nativeEvent,Qr=new Tn({active:We.current,activeNode:er,event:Qn,options:xn,context:_t,onAbort(Br){if(!ue.get(Br))return;const{onDragAbort:or}=Je.current,ti={id:Br};or?.(ti),$({type:"onDragAbort",event:ti})},onPending(Br,br,or,ti){if(!ue.get(Br))return;const{onDragPending:Vi}=Je.current,zr={id:Br,constraint:br,initialCoordinates:or,offset:ti};Vi?.(zr),$({type:"onDragPending",event:zr})},onStart(Br){const br=We.current;if(br==null)return;const or=ue.get(br);if(!or)return;const{onDragStart:ti}=Je.current,bn={activatorEvent:Qn,active:{id:br,data:or.data,rect:Ee}};Jv.unstable_batchedUpdates(()=>{ti?.(bn),H(I0.Initializing),J({type:Xu.DragStart,initialCoordinates:Br,active:br}),$({type:"onDragStart",event:bn}),rt($e.current),at(Qn)})},onMove(Br){J({type:Xu.DragMove,coordinates:Br})},onEnd:$r(Xu.DragEnd),onCancel:$r(Xu.DragCancel)});$e.current=Qr;function $r(Br){return async function(){const{active:or,collisions:ti,over:bn,scrollAdjustedTranslate:Vi}=_t.current;let zr=null;if(or&&Vi){const{cancelDrop:$o}=Je.current;zr={activatorEvent:Qn,active:or,collisions:ti,delta:Vi,over:bn},Br===Xu.DragEnd&&typeof $o=="function"&&await Promise.resolve($o(zr))&&(Br=Xu.DragCancel)}We.current=null,Jv.unstable_batchedUpdates(()=>{J({type:Br}),H(I0.Uninitialized),Oe(null),rt(null),at(null),$e.current=null;const $o=Br===Xu.DragEnd?"onDragEnd":"onDragCancel";if(zr){const is=Je.current[$o];is?.(zr),$({type:$o,event:zr})}})}}},[ue]),Ze=Nt.useCallback((nt,en)=>(Tn,xn)=>{const er=Tn.nativeEvent,Qn=ue.get(xn);if(We.current!==null||!Qn||er.dndKit||er.defaultPrevented)return;const Qr={active:Qn};nt(Tn,en.options,Qr)===!0&&(er.dndKit={capturedBy:en.sensor},We.current=xn,De(Tn,en))},[ue,De]),m=kie(M,Ze);zie(M),pm(()=>{ke&&te===I0.Initializing&&H(I0.Initialized)},[ke,te]),Nt.useEffect(()=>{const{onDragMove:nt}=Je.current,{active:en,activatorEvent:Tn,collisions:xn,over:er}=_t.current;if(!en||!Tn)return;const Qn={active:en,activatorEvent:Tn,collisions:xn,delta:{x:Ne.x,y:Ne.y},over:er};Jv.unstable_batchedUpdates(()=>{nt?.(Qn),$({type:"onDragMove",event:Qn})})},[Ne.x,Ne.y]),Nt.useEffect(()=>{const{active:nt,activatorEvent:en,collisions:Tn,droppableContainers:xn,scrollAdjustedTranslate:er}=_t.current;if(!nt||We.current==null||!en||!er)return;const{onDragOver:Qn}=Je.current,Qr=xn.get(se),$r=Qr&&Qr.rect.current?{id:Qr.id,rect:Qr.rect.current,data:Qr.data,disabled:Qr.disabled}:null,Br={active:nt,activatorEvent:en,collisions:Tn,delta:{x:er.x,y:er.y},over:$r};Jv.unstable_batchedUpdates(()=>{Oe($r),Qn?.(Br),$({type:"onDragOver",event:Br})})},[se]),pm(()=>{_t.current={activatorEvent:Ct,active:xe,activeNode:Bt,collisionRect:he,collisions:ie,droppableRects:pt,draggableNodes:ue,draggingNode:Qt,draggingNodeRect:Ft,droppableContainers:ge,over:fe,scrollableAncestors:Un,scrollAdjustedTranslate:Ne},Ee.current={initial:Ft,translated:he}},[xe,Bt,ie,he,ue,Qt,Ft,pt,ge,fe,Un,Ne]),Bie({...Le,delta:me,draggingRect:he,pointerCoordinates:En,scrollableAncestors:Un,scrollableAncestorRects:wn});const mt=Nt.useMemo(()=>({active:xe,activeNode:Bt,activeNodeRect:ke,activatorEvent:Ct,collisions:ie,containerNodeRect:Qe,dragOverlay:wt,draggableNodes:ue,droppableContainers:ge,droppableRects:pt,over:fe,measureDroppableContainers:kt,scrollableAncestors:Un,scrollableAncestorRects:wn,measuringConfiguration:He,measuringScheduled:ft,windowRect:jt}),[xe,Bt,ke,Ct,ie,Qe,wt,ue,ge,pt,fe,kt,Un,wn,He,ft,jt]),At=Nt.useMemo(()=>({activatorEvent:Ct,activators:m,active:xe,activeNodeRect:ke,ariaDescribedById:{draggable:ze},dispatch:J,draggableNodes:ue,over:fe,measureDroppableContainers:kt}),[Ct,m,xe,ke,J,ze,ue,fe,kt]);return Fn.createElement(fN.Provider,{value:oe},Fn.createElement(p3.Provider,{value:At},Fn.createElement(SN.Provider,{value:mt},Fn.createElement(EN.Provider,{value:ct},C)),Fn.createElement(Zie,{disabled:o?.restoreFocus===!1})),Fn.createElement(Vre,{...o,hiddenTextDescribedById:ze}));function It(){const nt=be?.autoScrollEnabled===!1,en=typeof f=="object"?f.enabled===!1:f===!1,Tn=re&&!nt&&!en;return typeof f=="object"?{...f,enabled:Tn}:{enabled:Tn}}}),noe=Nt.createContext(null),TT="button",roe="Draggable";function ioe(n){let{id:e,data:t,disabled:r=!1,attributes:i}=n;const s=L_(roe),{activators:l,activatorEvent:o,active:f,activeNodeRect:C,ariaDescribedById:M,draggableNodes:B,over:D}=Nt.useContext(p3),{role:R=TT,roleDescription:U="draggable",tabIndex:G=0}=i??{},W=f?.id===e,J=Nt.useContext(W?EN:noe),[$,oe]=tx(),[te,H]=tx(),re=Nie(l,e),j=HC(t);pm(()=>(B.set(e,{id:e,key:s,node:$,activatorNode:te,data:j}),()=>{const me=B.get(e);me&&me.key===s&&B.delete(e)}),[B,e]);const ue=Nt.useMemo(()=>({role:R,tabIndex:G,"aria-disabled":r,"aria-pressed":W&&R===TT?!0:void 0,"aria-roledescription":U,"aria-describedby":M.draggable}),[r,R,G,W,U,M.draggable]);return{active:f,activatorEvent:o,activeNodeRect:C,attributes:ue,isDragging:W,listeners:r?void 0:re,node:$,over:D,setNodeRef:oe,setActivatorNodeRef:H,transform:J}}function ooe(){return Nt.useContext(SN)}const soe="Droppable",aoe={timeout:25};function loe(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:i}=n;const s=L_(soe),{active:l,dispatch:o,over:f,measureDroppableContainers:C}=Nt.useContext(p3),M=Nt.useRef({disabled:t}),B=Nt.useRef(!1),D=Nt.useRef(null),R=Nt.useRef(null),{disabled:U,updateMeasurementsFor:G,timeout:W}={...aoe,...i},J=HC(G??r),$=Nt.useCallback(()=>{if(!B.current){B.current=!0;return}R.current!=null&&clearTimeout(R.current),R.current=setTimeout(()=>{C(Array.isArray(J.current)?J.current:[J.current]),R.current=null},W)},[W]),oe=f3({callback:$,disabled:U||!l}),te=Nt.useCallback((ue,me)=>{oe&&(me&&(oe.unobserve(me),B.current=!1),ue&&oe.observe(ue))},[oe]),[H,re]=tx(te),j=HC(e);return Nt.useEffect(()=>{!oe||!H.current||(oe.disconnect(),B.current=!1,oe.observe(H.current))},[H,oe]),Nt.useEffect(()=>(o({type:Xu.RegisterDroppable,element:{id:r,key:s,disabled:t,node:H,rect:D,data:j}}),()=>o({type:Xu.UnregisterDroppable,key:s,id:r})),[r]),Nt.useEffect(()=>{t!==M.current.disabled&&(o({type:Xu.SetDroppableDisabled,id:r,key:s,disabled:t}),M.current.disabled=t)},[r,s,t,o]),{active:l,rect:D,isOver:f?.id===r,node:H,over:f,setNodeRef:re}}function BN(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function Aoe(n,e){return n.reduce((t,r,i)=>{const s=e.get(r);return s&&(t[i]=s),t},Array(n.length))}function Kb(n){return n!==null&&n>=0}function uoe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function coe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const ON=n=>{let{rects:e,activeIndex:t,overIndex:r,index:i}=n;const s=BN(e,r,t),l=e[i],o=s[i];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},Lb={scaleX:1,scaleY:1},hoe=n=>{var e;let{activeIndex:t,activeNodeRect:r,index:i,rects:s,overIndex:l}=n;const o=(e=s[t])!=null?e:r;if(!o)return null;if(i===t){const C=s[l];return C?{x:0,y:t<l?C.top+C.height-(o.top+o.height):C.top-o.top,...Lb}:null}const f=doe(s,i,t);return i>t&&i<=l?{x:0,y:-o.height-f,...Lb}:i<t&&i>=l?{x:0,y:o.height+f,...Lb}:{x:0,y:0,...Lb}};function doe(n,e,t){const r=n[e],i=n[e-1],s=n[e+1];return r?t<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const IN="Sortable",TN=Fn.createContext({activeIndex:-1,containerId:IN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ON,disabled:{draggable:!1,droppable:!1}});function foe(n){let{children:e,id:t,items:r,strategy:i=ON,disabled:s=!1}=n;const{active:l,dragOverlay:o,droppableRects:f,over:C,measureDroppableContainers:M}=ooe(),B=L_(IN,t),D=o.rect!==null,R=Nt.useMemo(()=>r.map(re=>typeof re=="object"&&"id"in re?re.id:re),[r]),U=l!=null,G=l?R.indexOf(l.id):-1,W=C?R.indexOf(C.id):-1,J=Nt.useRef(R),$=!uoe(R,J.current),oe=W!==-1&&G===-1||$,te=coe(s);pm(()=>{$&&U&&M(R)},[$,R,U,M]),Nt.useEffect(()=>{J.current=R},[R]);const H=Nt.useMemo(()=>({activeIndex:G,containerId:B,disabled:te,disableTransforms:oe,items:R,overIndex:W,useDragOverlay:D,sortedRects:Aoe(R,f),strategy:i}),[G,B,te.draggable,te.droppable,oe,R,W,f,D,i]);return Fn.createElement(TN.Provider,{value:H},e)}const poe=n=>{let{id:e,items:t,activeIndex:r,overIndex:i}=n;return BN(t,r,i).indexOf(e)},moe=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:i,items:s,newIndex:l,previousItems:o,previousContainerId:f,transition:C}=n;return!C||!r||o!==s&&i===l?!1:t?!0:l!==i&&e===f},goe={duration:200,easing:"ease"},kN="transform",yoe=ZC.Transition.toString({property:kN,duration:0,easing:"linear"}),voe={roleDescription:"sortable"};function Coe(n){let{disabled:e,index:t,node:r,rect:i}=n;const[s,l]=Nt.useState(null),o=Nt.useRef(t);return pm(()=>{if(!e&&t!==o.current&&r.current){const f=i.current;if(f){const C=ev(r.current,{ignoreTransform:!0}),M={x:f.left-C.left,y:f.top-C.top,scaleX:f.width/C.width,scaleY:f.height/C.height};(M.x||M.y)&&l(M)}}t!==o.current&&(o.current=t)},[e,t,r,i]),Nt.useEffect(()=>{s&&l(null)},[s]),s}function _oe(n){let{animateLayoutChanges:e=moe,attributes:t,disabled:r,data:i,getNewIndex:s=poe,id:l,strategy:o,resizeObserverConfig:f,transition:C=goe}=n;const{items:M,containerId:B,activeIndex:D,disabled:R,disableTransforms:U,sortedRects:G,overIndex:W,useDragOverlay:J,strategy:$}=Nt.useContext(TN),oe=boe(r,R),te=M.indexOf(l),H=Nt.useMemo(()=>({sortable:{containerId:B,index:te,items:M},...i}),[B,i,te,M]),re=Nt.useMemo(()=>M.slice(M.indexOf(l)),[M,l]),{rect:j,node:ue,isOver:me,setNodeRef:ge}=loe({id:l,data:H,disabled:oe.droppable,resizeObserverConfig:{updateMeasurementsFor:re,...f}}),{active:we,activatorEvent:Ee,activeNodeRect:xe,attributes:We,setNodeRef:be,listeners:rt,isDragging:Ct,over:at,setActivatorNodeRef:Je,transform:ze}=ioe({id:l,data:H,attributes:{...voe,...t},disabled:oe.draggable}),Te=Fre(ge,be),He=!!we,pt=He&&!U&&Kb(D)&&Kb(W),kt=!J&&Ct,ft=kt&&pt?ze:null,Tt=pt?ft??(o??$)({rects:G,activeNodeRect:xe,activeIndex:D,overIndex:W,index:te}):null,Le=Kb(D)&&Kb(W)?s({id:l,items:M,activeIndex:D,overIndex:W}):te,Pe=we?.id,ke=Nt.useRef({activeId:Pe,items:M,newIndex:Le,containerId:B}),Qe=M!==ke.current.items,_t=e({active:we,containerId:B,isDragging:Ct,isSorting:He,id:l,index:te,items:M,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:C,wasDragging:ke.current.activeId!=null}),gt=Coe({disabled:!_t,index:te,node:ue,rect:j});return Nt.useEffect(()=>{He&&ke.current.newIndex!==Le&&(ke.current.newIndex=Le),B!==ke.current.containerId&&(ke.current.containerId=B),M!==ke.current.items&&(ke.current.items=M)},[He,Le,B,M]),Nt.useEffect(()=>{if(Pe===ke.current.activeId)return;if(Pe!=null&&ke.current.activeId==null){ke.current.activeId=Pe;return}const Qt=setTimeout(()=>{ke.current.activeId=Pe},50);return()=>clearTimeout(Qt)},[Pe]),{active:we,activeIndex:D,attributes:We,data:H,rect:j,index:te,newIndex:Le,items:M,isOver:me,isSorting:He,isDragging:Ct,listeners:rt,node:ue,overIndex:W,over:at,setNodeRef:Te,setActivatorNodeRef:Je,setDroppableNodeRef:ge,setDraggableNodeRef:be,transform:gt??Tt,transition:wt()};function wt(){if(gt||Qe&&ke.current.newIndex===te)return yoe;if(!(kt&&!hI(Ee)||!C)&&(He||_t))return ZC.Transition.toString({...C,property:kN})}}function boe(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(r=n?.droppable)!=null?r:e.droppable}}ga.Down,ga.Right,ga.Up,ga.Left;function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Og=function(){return l},l}Og();class xoe extends Fn.Component{render(){Og().f[0]++;const e=(Og().s[0]++,{width:20,height:20,...this.props.style});return Og().s[1]++,this.props.isCollapsed?(Og().b[0][0]++,le.jsx(vH,{style:e})):(Og().b[0][1]++,le.jsx(yH,{style:e}))}}function dy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dy=function(){return l},l}dy();class Moe extends Fn.Component{render(){return dy().f[0]++,dy().s[0]++,le.jsx("li",{className:"maputnik-layer-list-group",children:le.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(dy().f[1]++,dy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[le.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(xoe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function bi(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="e2af1ee9e12cb018858478ff7f79336a273df2d5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:21,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:20,column:7}},3:{start:{line:24,column:4},end:{line:33,column:5}},4:{start:{line:26,column:8},end:{line:26,column:54}},5:{start:{line:28,column:8},end:{line:28,column:53}},6:{start:{line:30,column:8},end:{line:30,column:56}},7:{start:{line:32,column:8},end:{line:32,column:49}},8:{start:{line:36,column:51},end:{line:36,column:61}},9:{start:{line:37,column:25},end:{line:37,column:27}},10:{start:{line:38,column:4},end:{line:43,column:5}},11:{start:{line:39,column:6},end:{line:39,column:76}},12:{start:{line:40,column:6},end:{line:42,column:7}},13:{start:{line:41,column:8},end:{line:41,column:103}},14:{start:{line:44,column:4},end:{line:55,column:6}},15:{start:{line:58,column:22},end:{line:144,column:2}},16:{start:{line:68,column:6},end:{line:68,column:11}},17:{start:{line:76,column:6},end:{line:76,column:40}},18:{start:{line:77,column:16},end:{line:81,column:3}},19:{start:{line:82,column:27},end:{line:82,column:69}},20:{start:{line:83,column:20},end:{line:83,column:23}},21:{start:{line:84,column:2},end:{line:143,column:7}},22:{start:{line:88,column:8},end:{line:88,column:25}},23:{start:{line:89,column:8},end:{line:91,column:9}},24:{start:{line:90,column:10},end:{line:90,column:35}},25:{start:{line:95,column:23},end:{line:95,column:60}},26:{start:{line:119,column:29},end:{line:119,column:61}},27:{start:{line:128,column:29},end:{line:128,column:58}},28:{start:{line:138,column:29},end:{line:138,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:21,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:15},end:{line:34,column:3}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:11},end:{line:56,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:58,column:39},end:{line:58,column:40}},loc:{start:{line:58,column:55},end:{line:144,column:1}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:24},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:21},end:{line:64,column:22}},loc:{start:{line:64,column:27},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:36},end:{line:67,column:5}},line:66},7:{name:"(anonymous_7)",decl:{start:{line:87,column:11},end:{line:87,column:12}},loc:{start:{line:87,column:21},end:{line:92,column:7}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:95,column:15},end:{line:95,column:16}},loc:{start:{line:95,column:23},end:{line:95,column:60}},line:95},9:{name:"(anonymous_9)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:29},end:{line:119,column:61}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:128,column:21},end:{line:128,column:22}},loc:{start:{line:128,column:29},end:{line:128,column:58}},line:128},11:{name:"(anonymous_11)",decl:{start:{line:138,column:21},end:{line:138,column:22}},loc:{start:{line:138,column:29},end:{line:138,column:70}},line:138}},branchMap:{0:{loc:{start:{line:24,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:25,column:6},end:{line:26,column:54}},{start:{line:27,column:6},end:{line:28,column:53}},{start:{line:29,column:6},end:{line:30,column:56}},{start:{line:31,column:6},end:{line:32,column:49}}],line:24},1:{loc:{start:{line:38,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:43,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:40,column:6},end:{line:42,column:7}},type:"if",locations:[{start:{line:40,column:6},end:{line:42,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:60,column:4},end:{line:60,column:22}},type:"default-arg",locations:[{start:{line:60,column:17},end:{line:60,column:22}}],line:60},4:{loc:{start:{line:61,column:4},end:{line:61,column:26}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:26}}],line:61},5:{loc:{start:{line:62,column:4},end:{line:63,column:5}},type:"default-arg",locations:[{start:{line:62,column:18},end:{line:63,column:5}}],line:62},6:{loc:{start:{line:64,column:4},end:{line:65,column:5}},type:"default-arg",locations:[{start:{line:64,column:21},end:{line:65,column:5}}],line:64},7:{loc:{start:{line:66,column:4},end:{line:67,column:5}},type:"default-arg",locations:[{start:{line:66,column:30},end:{line:67,column:5}}],line:66},8:{loc:{start:{line:80,column:13},end:{line:80,column:33}},type:"cond-expr",locations:[{start:{line:80,column:26},end:{line:80,column:29}},{start:{line:80,column:32},end:{line:80,column:33}}],line:80},9:{loc:{start:{line:82,column:27},end:{line:82,column:69}},type:"cond-expr",locations:[{start:{line:82,column:54},end:{line:82,column:60}},{start:{line:82,column:63},end:{line:82,column:69}}],line:82},10:{loc:{start:{line:89,column:8},end:{line:91,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:91,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e2af1ee9e12cb018858478ff7f79336a273df2d5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return bi=function(){return l},l}bi();bi().s[0]++;const woe=n=>{bi().f[0]++;const{dragAttributes:e,dragListeners:t}=(bi().s[1]++,n);return bi().s[2]++,le.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[le.jsx(uU,{className:"layer-handle__icon",type:n.layerType}),le.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class TM extends Fn.Component{renderIcon(){switch(bi().f[1]++,bi().s[3]++,this.props.action){case"duplicate":return bi().b[0][0]++,bi().s[4]++,le.jsx(hH,{});case"show":return bi().b[0][1]++,bi().s[5]++,le.jsx(cH,{});case"hide":return bi().b[0][2]++,bi().s[6]++,le.jsx(uH,{});case"delete":return bi().b[0][3]++,bi().s[7]++,le.jsx(Yy,{})}}render(){bi().f[2]++;const{classBlockName:e,classBlockModifier:t}=(bi().s[8]++,this.props);let r=(bi().s[9]++,"");return bi().s[10]++,e?(bi().b[1][0]++,bi().s[11]++,r=`maputnik-layer-list-icon-action__${e}`,bi().s[12]++,t?(bi().b[2][0]++,bi().s[13]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):bi().b[2][1]++):bi().b[1][1]++,bi().s[14]++,le.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const Soe=(bi().s[15]++,Fn.forwardRef((n,e)=>{bi().f[3]++;const{isSelected:t=(bi().b[3][0]++,!1),visibility:r=(bi().b[4][0]++,"visible"),onLayerCopy:i=(bi().b[5][0]++,()=>{bi().f[4]++}),onLayerDestroy:s=(bi().b[6][0]++,()=>{bi().f[5]++}),onLayerVisibilityToggle:l=(bi().b[7][0]++,()=>{bi().f[6]++})}=(bi().s[16]++,n),{attributes:o,listeners:f,setNodeRef:C,transform:M,transition:B,isDragging:D}=(bi().s[17]++,_oe({id:n.layerId})),R=(bi().s[18]++,{transform:ZC.Transform.toString(M),transition:B,opacity:D?(bi().b[8][0]++,.5):(bi().b[8][1]++,1)}),U=(bi().s[19]++,r==="visible"?(bi().b[9][0]++,"show"):(bi().b[9][1]++,"hide")),G=(bi().s[20]++,e);return bi().s[21]++,le.jsx(Ey.Provider,{value:{size:"14px"},children:le.jsxs("li",{ref:W=>{bi().f[7]++,bi().s[22]++,C(W),bi().s[23]++,G?(bi().b[10][0]++,bi().s[24]++,G.current=W):bi().b[10][1]++},style:R,id:n.id,onClick:W=>(bi().f[8]++,bi().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:fm({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[le.jsx(woe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:o,dragListeners:f}),le.jsx("span",{style:{flexGrow:1}}),le.jsx(TM,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:W=>(bi().f[9]++,bi().s[26]++,s(n.layerIndex))}),le.jsx(TM,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:W=>(bi().f[10]++,bi().s[27]++,i(n.layerIndex))}),le.jsx(TM,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:U,classBlockName:"visibility",classBlockModifier:U,onClick:W=>(bi().f[11]++,bi().s[28]++,l(n.layerIndex))})]})})}));function ox(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ox=function(){return l},l}ox();class Qa extends Fn.Component{render(){return ox().f[0]++,ox().s[0]++,le.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:fm("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var PN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],sx=PN.join(","),RN=typeof Element>"u",Xg=RN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ax=!RN&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},lx=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",l=s||t&&e&&n(e.parentNode);return l},Eoe=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},DN=function(e,t,r){if(lx(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(sx));return t&&Xg.call(e,sx)&&i.unshift(e),i=i.filter(r),i},FN=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var l=s.shift();if(!lx(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),f=o.length?o:l.children,C=n(f,!0,r);r.flatten?i.push.apply(i,C):i.push({scopeParent:l,candidates:C})}else{var M=Xg.call(l,sx);M&&r.filter(l)&&(t||!e.includes(l))&&i.push(l);var B=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),D=!lx(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(B&&D){var R=n(B===!0?l.children:B.children,!0,r);r.flatten?i.push.apply(i,R):i.push({scopeParent:l,candidates:R})}else s.unshift.apply(s,l.children)}}return i},KN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},T0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Eoe(e))&&!KN(e)?0:e.tabIndex},Boe=function(e,t){var r=T0(e);return r<0&&t&&!KN(e)?0:r},Ooe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},LN=function(e){return e.tagName==="INPUT"},Ioe=function(e){return LN(e)&&e.type==="hidden"},Toe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},koe=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Poe=function(e){if(!e.name)return!0;var t=e.form||ax(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=koe(i,e.form);return!s||s===e},Roe=function(e){return LN(e)&&e.type==="radio"},Doe=function(e){return Roe(e)&&!Poe(e)},Foe=function(e){var t,r=e&&ax(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var l,o,f;for(s=!!((l=i)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!s&&i;){var C,M,B;r=ax(i),i=(C=r)===null||C===void 0?void 0:C.host,s=!!((M=i)!==null&&M!==void 0&&(B=M.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return s},kT=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Koe=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Xg.call(e,"details>summary:first-of-type"),l=s?e.parentElement:e;if(Xg.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var f=e.parentElement,C=ax(e);if(f&&!f.shadowRoot&&i(f)===!0)return kT(e);e.assignedSlot?e=e.assignedSlot:!f&&C!==e.ownerDocument?e=C.host:e=f}e=o}if(Foe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return kT(e);return!1},Loe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Xg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Ax=function(e,t){return!(t.disabled||lx(t)||Ioe(t)||Koe(t,e)||Toe(t)||Loe(t))},_B=function(e,t){return!(Doe(t)||T0(t)<0||!Ax(e,t))},Uoe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},zoe=function n(e){var t=[],r=[];return e.forEach(function(i,s){var l=!!i.scopeParent,o=l?i.scopeParent:i,f=Boe(o,l),C=l?n(i.candidates):o;f===0?l?t.push.apply(t,C):t.push(o):r.push({documentOrder:s,tabIndex:f,item:i,isScope:l,content:C})}),r.sort(Ooe).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},UN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=FN([e],t.includeContainer,{filter:_B.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Uoe}):r=DN(e,t.includeContainer,_B.bind(null,t)),zoe(r)},zN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=FN([e],t.includeContainer,{filter:Ax.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=DN(e,t.includeContainer,Ax.bind(null,t)),r},Sg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Xg.call(e,sx)===!1?!1:_B(t,e)},Noe=PN.concat("iframe").join(","),l2=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Xg.call(e,Noe)===!1?!1:Ax(t,e)};const Goe=Object.freeze(Object.defineProperty({__proto__:null,focusable:zN,getTabIndex:T0,isFocusable:l2,isTabbable:Sg,tabbable:UN},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function PT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function RT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PT(Object(t),!0).forEach(function(r){joe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function joe(n,e,t){return e=Qoe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Woe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qoe(n){var e=Woe(n,"string");return typeof e=="symbol"?e:String(e)}var DT={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Yoe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},qoe=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},CC=function(e){return e?.key==="Tab"||e?.keyCode===9},$oe=function(e){return CC(e)&&!e.shiftKey},Voe=function(e){return CC(e)&&e.shiftKey},FT=function(e){return setTimeout(e,0)},KT=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},Lv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Ub=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Hoe=[],Zoe=function(e,t){var r=t?.document||document,i=t?.trapStack||Hoe,s=RT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:$oe,isKeyBackward:Voe},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,f=function(Ee,xe,We){return Ee&&Ee[xe]!==void 0?Ee[xe]:s[We||xe]},C=function(Ee,xe){var We=typeof xe?.composedPath=="function"?xe.composedPath():void 0;return l.containerGroups.findIndex(function(be){var rt=be.container,Ct=be.tabbableNodes;return rt.contains(Ee)||We?.includes(rt)||Ct.find(function(at){return at===Ee})})},M=function(Ee){var xe=s[Ee];if(typeof xe=="function"){for(var We=arguments.length,be=new Array(We>1?We-1:0),rt=1;rt<We;rt++)be[rt-1]=arguments[rt];xe=xe.apply(void 0,be)}if(xe===!0&&(xe=void 0),!xe){if(xe===void 0||xe===!1)return xe;throw new Error("`".concat(Ee,"` was specified but was not a node, or did not return a node"))}var Ct=xe;if(typeof xe=="string"&&(Ct=r.querySelector(xe),!Ct))throw new Error("`".concat(Ee,"` as selector refers to no known node"));return Ct},B=function(){var Ee=M("initialFocus");if(Ee===!1)return!1;if(Ee===void 0||!l2(Ee,s.tabbableOptions))if(C(r.activeElement)>=0)Ee=r.activeElement;else{var xe=l.tabbableGroups[0],We=xe&&xe.firstTabbableNode;Ee=We||M("fallbackFocus")}if(!Ee)throw new Error("Your focus-trap needs to have at least one focusable element");return Ee},D=function(){if(l.containerGroups=l.containers.map(function(Ee){var xe=UN(Ee,s.tabbableOptions),We=zN(Ee,s.tabbableOptions),be=xe.length>0?xe[0]:void 0,rt=xe.length>0?xe[xe.length-1]:void 0,Ct=We.find(function(ze){return Sg(ze)}),at=We.slice().reverse().find(function(ze){return Sg(ze)}),Je=!!xe.find(function(ze){return T0(ze)>0});return{container:Ee,tabbableNodes:xe,focusableNodes:We,posTabIndexesFound:Je,firstTabbableNode:be,lastTabbableNode:rt,firstDomTabbableNode:Ct,lastDomTabbableNode:at,nextTabbableNode:function(Te){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,pt=xe.indexOf(Te);return pt<0?He?We.slice(We.indexOf(Te)+1).find(function(kt){return Sg(kt)}):We.slice(0,We.indexOf(Te)).reverse().find(function(kt){return Sg(kt)}):xe[pt+(He?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(Ee){return Ee.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!M("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(Ee){return Ee.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},R=function we(Ee){var xe=Ee.activeElement;if(xe)return xe.shadowRoot&&xe.shadowRoot.activeElement!==null?we(xe.shadowRoot):xe},U=function we(Ee){if(Ee!==!1&&Ee!==R(document)){if(!Ee||!Ee.focus){we(B());return}Ee.focus({preventScroll:!!s.preventScroll}),l.mostRecentlyFocusedNode=Ee,Yoe(Ee)&&Ee.select()}},G=function(Ee){var xe=M("setReturnFocus",Ee);return xe||(xe===!1?!1:Ee)},W=function(Ee){var xe=Ee.target,We=Ee.event,be=Ee.isBackward,rt=be===void 0?!1:be;xe=xe||Ub(We),D();var Ct=null;if(l.tabbableGroups.length>0){var at=C(xe,We),Je=at>=0?l.containerGroups[at]:void 0;if(at<0)rt?Ct=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:Ct=l.tabbableGroups[0].firstTabbableNode;else if(rt){var ze=KT(l.tabbableGroups,function(Bt){var Tt=Bt.firstTabbableNode;return xe===Tt});if(ze<0&&(Je.container===xe||l2(xe,s.tabbableOptions)&&!Sg(xe,s.tabbableOptions)&&!Je.nextTabbableNode(xe,!1))&&(ze=at),ze>=0){var Te=ze===0?l.tabbableGroups.length-1:ze-1,He=l.tabbableGroups[Te];Ct=T0(xe)>=0?He.lastTabbableNode:He.lastDomTabbableNode}else CC(We)||(Ct=Je.nextTabbableNode(xe,!1))}else{var pt=KT(l.tabbableGroups,function(Bt){var Tt=Bt.lastTabbableNode;return xe===Tt});if(pt<0&&(Je.container===xe||l2(xe,s.tabbableOptions)&&!Sg(xe,s.tabbableOptions)&&!Je.nextTabbableNode(xe))&&(pt=at),pt>=0){var kt=pt===l.tabbableGroups.length-1?0:pt+1,ft=l.tabbableGroups[kt];Ct=T0(xe)>=0?ft.firstTabbableNode:ft.firstDomTabbableNode}else CC(We)||(Ct=Je.nextTabbableNode(xe))}}else Ct=M("fallbackFocus");return Ct},J=function(Ee){var xe=Ub(Ee);if(!(C(xe,Ee)>=0)){if(Lv(s.clickOutsideDeactivates,Ee)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Lv(s.allowOutsideClick,Ee)||Ee.preventDefault()}},$=function(Ee){var xe=Ub(Ee),We=C(xe,Ee)>=0;if(We||xe instanceof Document)We&&(l.mostRecentlyFocusedNode=xe);else{Ee.stopImmediatePropagation();var be,rt=!0;if(l.mostRecentlyFocusedNode)if(T0(l.mostRecentlyFocusedNode)>0){var Ct=C(l.mostRecentlyFocusedNode),at=l.containerGroups[Ct].tabbableNodes;if(at.length>0){var Je=at.findIndex(function(ze){return ze===l.mostRecentlyFocusedNode});Je>=0&&(s.isKeyForward(l.recentNavEvent)?Je+1<at.length&&(be=at[Je+1],rt=!1):Je-1>=0&&(be=at[Je-1],rt=!1))}}else l.containerGroups.some(function(ze){return ze.tabbableNodes.some(function(Te){return T0(Te)>0})})||(rt=!1);else rt=!1;rt&&(be=W({target:l.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(l.recentNavEvent)})),U(be||l.mostRecentlyFocusedNode||B())}l.recentNavEvent=void 0},oe=function(Ee){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=Ee;var We=W({event:Ee,isBackward:xe});We&&(CC(Ee)&&Ee.preventDefault(),U(We))},te=function(Ee){if(qoe(Ee)&&Lv(s.escapeDeactivates,Ee)!==!1){Ee.preventDefault(),o.deactivate();return}(s.isKeyForward(Ee)||s.isKeyBackward(Ee))&&oe(Ee,s.isKeyBackward(Ee))},H=function(Ee){var xe=Ub(Ee);C(xe,Ee)>=0||Lv(s.clickOutsideDeactivates,Ee)||Lv(s.allowOutsideClick,Ee)||(Ee.preventDefault(),Ee.stopImmediatePropagation())},re=function(){if(l.active)return DT.activateTrap(i,o),l.delayInitialFocusTimer=s.delayInitialFocus?FT(function(){U(B())}):U(B()),r.addEventListener("focusin",$,!0),r.addEventListener("mousedown",J,{capture:!0,passive:!1}),r.addEventListener("touchstart",J,{capture:!0,passive:!1}),r.addEventListener("click",H,{capture:!0,passive:!1}),r.addEventListener("keydown",te,{capture:!0,passive:!1}),o},j=function(){if(l.active)return r.removeEventListener("focusin",$,!0),r.removeEventListener("mousedown",J,!0),r.removeEventListener("touchstart",J,!0),r.removeEventListener("click",H,!0),r.removeEventListener("keydown",te,!0),o},ue=function(Ee){var xe=Ee.some(function(We){var be=Array.from(We.removedNodes);return be.some(function(rt){return rt===l.mostRecentlyFocusedNode})});xe&&U(B())},me=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,ge=function(){me&&(me.disconnect(),l.active&&!l.paused&&l.containers.map(function(Ee){me.observe(Ee,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(Ee){if(l.active)return this;var xe=f(Ee,"onActivate"),We=f(Ee,"onPostActivate"),be=f(Ee,"checkCanFocusTrap");be||D(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,xe?.();var rt=function(){be&&D(),re(),ge(),We?.()};return be?(be(l.containers.concat()).then(rt,rt),this):(rt(),this)},deactivate:function(Ee){if(!l.active)return this;var xe=RT({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},Ee);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,j(),l.active=!1,l.paused=!1,ge(),DT.deactivateTrap(i,o);var We=f(xe,"onDeactivate"),be=f(xe,"onPostDeactivate"),rt=f(xe,"checkCanReturnFocus"),Ct=f(xe,"returnFocus","returnFocusOnDeactivate");We?.();var at=function(){FT(function(){Ct&&U(G(l.nodeFocusedBeforeActivation)),be?.()})};return Ct&&rt?(rt(G(l.nodeFocusedBeforeActivation)).then(at,at),this):(at(),this)},pause:function(Ee){if(l.paused||!l.active)return this;var xe=f(Ee,"onPause"),We=f(Ee,"onPostPause");return l.paused=!0,xe?.(),j(),ge(),We?.(),this},unpause:function(Ee){if(!l.paused||!l.active)return this;var xe=f(Ee,"onUnpause"),We=f(Ee,"onPostUnpause");return l.paused=!1,xe?.(),D(),re(),ge(),We?.(),this},updateContainerElements:function(Ee){var xe=[].concat(Ee).filter(Boolean);return l.containers=xe.map(function(We){return typeof We=="string"?r.querySelector(We):We}),l.active&&D(),ge(),this}},o.updateContainerElements(e),o};const Xoe=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Zoe},Symbol.toStringTag,{value:"Module"})),Joe=kB(Xoe),ese=kB(Goe);var kM,LT;function tse(){if(LT)return kM;LT=1;function n(re){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},n(re)}function e(re,j){if(!(re instanceof j))throw new TypeError("Cannot call a class as a function")}function t(re,j){for(var ue=0;ue<j.length;ue++){var me=j[ue];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(re,D(me.key),me)}}function r(re,j,ue){return j&&t(re.prototype,j),Object.defineProperty(re,"prototype",{writable:!1}),re}function i(re,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(j&&j.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),Object.defineProperty(re,"prototype",{writable:!1}),j&&s(re,j)}function s(re,j){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(me,ge){return me.__proto__=ge,me},s(re,j)}function l(re){var j=C();return function(){var me=M(re),ge;if(j){var we=M(this).constructor;ge=Reflect.construct(me,arguments,we)}else ge=me.apply(this,arguments);return o(this,ge)}}function o(re,j){if(j&&(n(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(re)}function f(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(re){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},M(re)}function B(re,j,ue){return j=D(j),j in re?Object.defineProperty(re,j,{value:ue,enumerable:!0,configurable:!0,writable:!0}):re[j]=ue,re}function D(re){var j=R(re,"string");return n(j)==="symbol"?j:String(j)}function R(re,j){if(n(re)!=="object"||re===null)return re;var ue=re[Symbol.toPrimitive];if(ue!==void 0){var me=ue.call(re,j);if(n(me)!=="object")return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(re)}var U=Ya(),G=gm(),W=Joe,J=W.createFocusTrap,$=ese,oe=$.isFocusable,te=function(re){i(ue,re);var j=l(ue);function ue(me){var ge;e(this,ue),ge=j.call(this,me),B(f(ge),"getNodeForOption",function(xe){var We,be=(We=this.internalOptions[xe])!==null&&We!==void 0?We:this.originalOptions[xe];if(typeof be=="function"){for(var rt=arguments.length,Ct=new Array(rt>1?rt-1:0),at=1;at<rt;at++)Ct[at-1]=arguments[at];be=be.apply(void 0,Ct)}if(be===!0&&(be=void 0),!be){if(be===void 0||be===!1)return be;throw new Error("`".concat(xe,"` was specified but was not a node, or did not return a node"))}var Je=be;if(typeof be=="string"){var ze;if(Je=(ze=this.getDocument())===null||ze===void 0?void 0:ze.querySelector(be),!Je)throw new Error("`".concat(xe,"` as selector refers to no known node"))}return Je}),ge.handleDeactivate=ge.handleDeactivate.bind(f(ge)),ge.handlePostDeactivate=ge.handlePostDeactivate.bind(f(ge)),ge.handleClickOutsideDeactivates=ge.handleClickOutsideDeactivates.bind(f(ge)),ge.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ge.handleDeactivate,onPostDeactivate:ge.handlePostDeactivate,clickOutsideDeactivates:ge.handleClickOutsideDeactivates},ge.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var we=me.focusTrapOptions;for(var Ee in we)if(Object.prototype.hasOwnProperty.call(we,Ee)){if(Ee==="returnFocusOnDeactivate"||Ee==="onDeactivate"||Ee==="onPostDeactivate"||Ee==="checkCanReturnFocus"||Ee==="clickOutsideDeactivates"){ge.originalOptions[Ee]=we[Ee];continue}ge.internalOptions[Ee]=we[Ee]}return ge.outsideClick=null,ge.focusTrapElements=me.containerElements||[],ge.updatePreviousElement(),ge}return r(ue,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ge=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ge||(ge===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ge=this.getDocument();ge&&(this.previouslyFocusedElement=ge.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ge){var we=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ge):this.originalOptions.clickOutsideDeactivates;return we&&(this.outsideClick={target:ge.target,allowDeactivation:we}),we}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ge=this,we=function(){var xe=ge.getReturnFocusNode(),We=!!(ge.originalOptions.returnFocusOnDeactivate&&xe!==null&&xe!==void 0&&xe.focus&&(!ge.outsideClick||ge.outsideClick.allowDeactivation&&!oe(ge.outsideClick.target,ge.internalOptions.tabbableOptions))),be=ge.internalOptions.preventScroll,rt=be===void 0?!1:be;We&&xe.focus({preventScroll:rt}),ge.originalOptions.onPostDeactivate&&ge.originalOptions.onPostDeactivate.call(null),ge.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(we,we):we()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ge=this.focusTrapElements.some(Boolean);ge&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ge){if(this.focusTrap){ge.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var we=!ge.active&&this.props.active,Ee=ge.active&&!this.props.active,xe=!ge.paused&&this.props.paused,We=ge.paused&&!this.props.paused;if(we&&(this.updatePreviousElement(),this.focusTrap.activate()),Ee){this.deactivateTrap();return}xe&&this.focusTrap.pause(),We&&this.focusTrap.unpause()}else ge.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ge=this,we=this.props.children?U.Children.only(this.props.children):void 0;if(we){if(we.type&&we.type===U.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var Ee=function(be){var rt=ge.props.containerElements;we&&(typeof we.ref=="function"?we.ref(be):we.ref&&(we.ref.current=be)),ge.focusTrapElements=rt||[be]},xe=U.cloneElement(we,{ref:Ee});return xe}return null}}]),ue}(U.Component),H=typeof Element>"u"?Function:Element;return te.propTypes={active:G.bool,paused:G.bool,focusTrapOptions:G.shape({document:G.object,onActivate:G.func,onPostActivate:G.func,checkCanFocusTrap:G.func,onPause:G.func,onPostPause:G.func,onUnpause:G.func,onPostUnpause:G.func,onDeactivate:G.func,onPostDeactivate:G.func,checkCanReturnFocus:G.func,initialFocus:G.oneOfType([G.instanceOf(H),G.string,G.bool,G.func]),fallbackFocus:G.oneOfType([G.instanceOf(H),G.string,G.func]),escapeDeactivates:G.oneOfType([G.bool,G.func]),clickOutsideDeactivates:G.oneOfType([G.bool,G.func]),returnFocusOnDeactivate:G.bool,setReturnFocus:G.oneOfType([G.instanceOf(H),G.string,G.bool,G.func]),allowOutsideClick:G.oneOfType([G.bool,G.func]),preventScroll:G.bool,tabbableOptions:G.shape({displayCheck:G.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:G.oneOfType([G.bool,G.func])}),trapStack:G.array,isKeyForward:G.func,isKeyBackward:G.func}),containerElements:G.arrayOf(G.instanceOf(H)),children:G.oneOfType([G.element,G.instanceOf(H)])},te.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:J},kM=te,kM}var PM={exports:{}},UT;function nse(){return UT||(UT=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var B=document.documentElement,D=document.createElement("div");return D.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(D),r=D.offsetWidth-D.clientWidth,B.removeChild(D),r}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(B){if(!(typeof document>"u"||t)){var D=document.documentElement;i=window.pageYOffset,l()?D.style.width="calc(100% - "+s()+"px)":D.style.width="100%",D.style.position="fixed",D.style.top=-i+"px",D.style.overflow="hidden",t=!0}}function f(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function C(){if(t){f();return}o()}var M={on:o,off:f,toggle:C};n.exports=M})()}(PM)),PM.exports}var RM,zT;function rse(){if(zT)return RM;zT=1;function n(oe){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},n(oe)}function e(oe,te){if(!(oe instanceof te))throw new TypeError("Cannot call a class as a function")}function t(oe,te){for(var H=0;H<te.length;H++){var re=te[H];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function r(oe,te,H){return te&&t(oe.prototype,te),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function i(oe,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(te&&te.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),te&&s(oe,te)}function s(oe,te){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,j){return re.__proto__=j,re},s(oe,te)}function l(oe){var te=C();return function(){var re=M(oe),j;if(te){var ue=M(this).constructor;j=Reflect.construct(re,arguments,ue)}else j=re.apply(this,arguments);return o(this,j)}}function o(oe,te){if(te&&(n(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(oe)}function f(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(oe){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},M(oe)}function B(oe,te,H){return te in oe?Object.defineProperty(oe,te,{value:H,enumerable:!0,configurable:!0,writable:!0}):oe[te]=H,oe}var D=Ya(),R=px(),U=tse(),G=nse(),W=function(oe){i(H,oe);var te=l(H);function H(re){var j;if(e(this,H),j=te.call(this,re),B(f(j),"getApplicationNode",function(){return j.props.getApplicationNode?j.props.getApplicationNode():j.props.applicationNode}),B(f(j),"checkUnderlayClick",function(ue){j.dialogNode&&j.dialogNode.contains(ue.target)||ue.pageX>ue.target.ownerDocument.documentElement.offsetWidth||ue.pageY>ue.target.ownerDocument.documentElement.offsetHeight||j.exit(ue)}),B(f(j),"checkDocumentKeyDown",function(ue){j.props.escapeExits&&(ue.key==="Escape"||ue.key==="Esc"||ue.keyCode===27)&&j.exit(ue)}),B(f(j),"exit",function(ue){j.props.onExit&&j.props.onExit(ue)}),!re.titleText&&!re.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return j}return r(H,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var j=this.getApplicationNode();setTimeout(function(){j&&j.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&G.on()}},{key:"componentDidUpdate",value:function(j){j.scrollDisabled&&!this.props.scrollDisabled?G.off():!j.scrollDisabled&&this.props.scrollDisabled&&G.on(),this.props.escapeExits&&!j.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&j.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&G.off();var j=this.getApplicationNode();j&&j.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var j=this;setTimeout(function(){document.addEventListener("keydown",j.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var j=this;setTimeout(function(){document.removeEventListener("keydown",j.checkDocumentKeyDown)})}},{key:"render",value:function(){var j=this.props,ue={};if(j.includeDefaultStyles&&(ue={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},j.underlayColor&&(ue.background=j.underlayColor),j.underlayClickExits&&(ue.cursor="pointer")),j.underlayStyle)for(var me in j.underlayStyle)j.underlayStyle.hasOwnProperty(me)&&(ue[me]=j.underlayStyle[me]);var ge={className:j.underlayClass,style:ue};j.underlayClickExits&&(ge.onMouseDown=this.checkUnderlayClick);for(var we in this.props.underlayProps)ge[we]=this.props.underlayProps[we];var Ee={};j.includeDefaultStyles&&(Ee={display:"inline-block",height:"100%",verticalAlign:"middle"});var xe={key:"a",style:Ee},We={};if(j.includeDefaultStyles&&(We={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:j.focusDialog?0:null},j.verticallyCenter&&(We.verticalAlign="middle",We.top=0)),j.dialogStyle)for(var be in j.dialogStyle)j.dialogStyle.hasOwnProperty(be)&&(We[be]=j.dialogStyle[be]);var rt={key:"b",ref:(function(ze){this.dialogNode=ze}).bind(this),role:j.alert?"alertdialog":"dialog",id:j.dialogId,className:j.dialogClass,style:We};j.titleId?rt["aria-labelledby"]=j.titleId:j.titleText&&(rt["aria-label"]=j.titleText),j.focusDialog&&(rt.tabIndex="-1");for(var Ct in j)/^(data-|aria-)/.test(Ct)&&(rt[Ct]=j[Ct]);var at=[D.createElement("div",rt,j.children)];j.verticallyCenter&&at.unshift(D.createElement("div",xe));var Je=j.focusTrapOptions||{};return(j.focusDialog||j.initialFocus)&&(Je.initialFocus=j.focusDialog?"#".concat(this.props.dialogId):j.initialFocus),Je.escapeDeactivates=j.escapeExits,D.createElement(U,{focusTrapOptions:Je,paused:j.focusTrapPaused},D.createElement("div",ge,at))}}]),H}(D.Component);B(W,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function J(oe,te){if(!window.document)return function(){return null};te=te||{};var H=function(re){i(ue,re);var j=l(ue);function ue(){var me;e(this,ue);for(var ge=arguments.length,we=new Array(ge),Ee=0;Ee<ge;Ee++)we[Ee]=arguments[Ee];return me=j.call.apply(j,[this].concat(we)),B(f(me),"container",null),me}return r(ue,[{key:"componentDidMount",value:function(){te.renderTo?this.container=typeof te.renderTo=="string"?document.querySelector(te.renderTo):te.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){te.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:R.createPortal(D.createElement(oe,this.props,this.props.children),this.container)}}]),ue}(D.Component);return B(H,"defaultProps",{mounted:!0}),H}var $=J(W);return $.renderTo=function(oe){return J(W,{renderTo:oe})},RM=$,RM}var ise=rse();const ose=yA(ise);function Tu(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Tu=function(){return l},l}Tu();class sse extends Fn.Component{static defaultProps=(Tu().s[0]++,{underlayClickExits:!0});onClose=(Tu().s[1]++,()=>{Tu().f[0]++,Tu().s[2]++,document.activeElement?(Tu().b[0][0]++,Tu().s[3]++,document.activeElement.blur()):Tu().b[0][1]++,Tu().s[4]++,setTimeout(()=>{Tu().f[1]++,Tu().s[5]++,this.props.onOpenToggle(!1)},0)});render(){Tu().f[2]++;const e=(Tu().s[6]++,this.props.t);return Tu().s[7]++,this.props.isOpen?(Tu().b[1][0]++,Tu().s[8]++,le.jsx(ose,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:le.jsxs("div",{className:fm("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[le.jsxs("header",{className:"maputnik-modal-header",children:[le.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),le.jsx("span",{className:"maputnik-modal-header-space"}),le.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:le.jsx(CH,{})})]}),le.jsx("div",{className:"maputnik-modal-scroller",children:le.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Tu().b[1][1]++,Tu().s[9]++,!1)}}const J0=(Tu().s[10]++,zs()(sse));function Hs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="610b207a65b24ba4dac1ed37ea7bae7606e0d3d5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"610b207a65b24ba4dac1ed37ea7bae7606e0d3d5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hs=function(){return l},l}Hs();Hs().s[0]++;const gI=n=>{Hs().f[0]++;const[e,t]=(Hs().s[1]++,Fn.useState(!1));Hs().s[2]++;const r=o=>{Hs().f[1]++,Hs().s[3]++,t(o),Hs().s[4]++,n.onToggleDoc?(Hs().b[0][0]++,Hs().s[5]++,n.onToggleDoc(o)):Hs().b[0][1]++},{label:i,fieldSpec:s}=(Hs().s[6]++,n),{doc:l}=(Hs().s[7]++,Hs().b[1][0]++,s||(Hs().b[1][1]++,{}));return Hs().s[8]++,l?(Hs().b[2][0]++,Hs().s[9]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsxs("div",{className:"maputnik-doc-target",children:[i,"",le.jsx("button",{"aria-label":e?(Hs().b[3][0]++,"close property documentation"):(Hs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(Hs().b[4][0]++,"open"):(Hs().b[4][1]++,"closed")}`,onClick:()=>(Hs().f[2]++,Hs().s[10]++,r(!e)),"data-wd-key":"field-doc-button-"+i,children:e?(Hs().b[5][0]++,le.jsx(oH,{})):(Hs().b[5][1]++,le.jsx(sH,{}))})]})})):(Hs().b[2][1]++,Hs().s[11]++,i?(Hs().b[6][0]++,Hs().s[12]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsx("div",{className:"maputnik-doc-target",children:i})})):(Hs().b[6][1]++,Hs().s[13]++,le.jsx("div",{})))};function ra(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ra=function(){return l},l}ra();const NT=(ra().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class yI extends Fn.Component{render(){ra().f[0]++;const{fieldSpec:e}=(ra().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(ra().s[2]++,e),l=(ra().s[3]++,e["sdk-support"]),o=(ra().s[4]++,ra().b[0][0]++,!!r&&(ra().b[0][1]++,!Array.isArray(r)));return ra().s[5]++,le.jsxs(le.Fragment,{children:[(ra().b[1][0]++,t&&(ra().b[1][1]++,le.jsxs("div",{className:"SpecDoc",children:[le.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(ra().b[2][0]++,o&&(ra().b[2][1]++,le.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([f,C])=>(ra().f[1]++,ra().s[6]++,le.jsxs("li",{children:[le.jsx("code",{children:JSON.stringify(f)}),le.jsx("div",{children:C.doc})]},f)))})))]}))),(ra().b[3][0]++,l&&(ra().b[3][1]++,le.jsx("div",{className:"SpecDoc__sdk-support",children:le.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{}),Object.values(NT).map(f=>(ra().f[2]++,ra().s[7]++,le.jsx("th",{children:f},f)))]})}),le.jsx("tbody",{children:Object.entries(l).map(([f,C])=>(ra().f[3]++,ra().s[8]++,le.jsxs("tr",{children:[le.jsx("td",{children:f}),Object.keys(NT).map(M=>(ra().f[4]++,ra().s[9]++,Object.prototype.hasOwnProperty.call(C,M)?(ra().b[4][0]++,ra().s[10]++,le.jsx("td",{children:C[M]},M)):(ra().b[4][1]++,ra().s[11]++,le.jsx("td",{children:"no"},M))))]},f)))})]})}))),(ra().b[5][0]++,i&&(ra().b[5][1]++,s)&&(ra().b[5][2]++,le.jsx("div",{className:"SpecDoc__learn-more",children:le.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Ko(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ko=function(){return l},l}Ko();class ya extends Fn.Component{_blockEl=(Ko().s[0]++,null);constructor(e){Ko().f[0]++,Ko().s[1]++,super(e),Ko().s[2]++,this.state={showDoc:!1}}onChange(e){Ko().f[1]++;const t=(Ko().s[3]++,e.target.value);if(Ko().s[4]++,this.props.onChange)return Ko().b[0][0]++,Ko().s[5]++,this.props.onChange(t===""?(Ko().b[1][0]++,void 0):(Ko().b[1][1]++,t));Ko().b[0][1]++}onToggleDoc=(Ko().s[6]++,e=>{Ko().f[2]++,Ko().s[7]++,this.setState({showDoc:e})});onLabelClick=(Ko().s[8]++,e=>{Ko().f[3]++;const t=(Ko().s[9]++,e.nativeEvent.target),r=(Ko().s[10]++,this._blockEl?.contains(t));Ko().s[11]++,Ko().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Ko().b[3][1]++,!r)?(Ko().b[2][0]++,Ko().s[12]++,e.stopPropagation()):Ko().b[2][1]++,Ko().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Ko().b[4][0]++,Ko().s[14]++,e.preventDefault()):Ko().b[4][1]++});render(){return Ko().f[4]++,Ko().s[15]++,le.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:fm({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Ko().b[5][0]++,this.props.fieldSpec&&(Ko().b[5][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(gI,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Ko().b[6][0]++,!this.props.fieldSpec&&(Ko().b[6][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",ref:e=>(Ko().f[5]++,Ko().s[16]++,this._blockEl=e),children:this.props.children}),(Ko().b[7][0]++,this.props.fieldSpec&&(Ko().b[7][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Ko().b[8][0]++,""):(Ko().b[8][1]++,"none")},children:le.jsx(yI,{fieldSpec:this.props.fieldSpec})})))]})}}function Wc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wc=function(){return l},l}Wc();class i1 extends Fn.Component{render(){Wc().f[0]++;let e=(Wc().s[0]++,this.props.options);return Wc().s[1]++,Wc().b[1][0]++,e.length>0&&(Wc().b[1][1]++,!Array.isArray(e[0]))?(Wc().b[0][0]++,Wc().s[2]++,e=e.map(t=>(Wc().f[1]++,Wc().s[3]++,[t,t]))):Wc().b[0][1]++,Wc().s[4]++,le.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Wc().f[2]++,Wc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Wc().f[3]++,Wc().s[6]++,le.jsx("option",{value:t,children:r},t)))})}}function Ki(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ki=function(){return l},l}Ki();class Pp extends Fn.Component{static defaultProps=(Ki().s[0]++,{onInput:()=>{Ki().f[0]++}});constructor(e){Ki().f[1]++,Ki().s[1]++,super(e),Ki().s[2]++,this.state={editing:!1,value:(Ki().b[0][0]++,e.value||(Ki().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Ki().f[2]++,Ki().s[3]++,t.editing)Ki().b[1][1]++;else return Ki().b[1][0]++,Ki().s[4]++,{value:e.value};return Ki().s[5]++,{}}render(){Ki().f[3]++;let e,t;return Ki().s[6]++,this.props.multi?(Ki().b[2][0]++,Ki().s[7]++,e="textarea",Ki().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Ki().b[2][1]++,Ki().s[9]++,e="input",Ki().s[10]++,t=["maputnik-string"]),Ki().s[11]++,this.props.disabled?(Ki().b[3][0]++,Ki().s[12]++,t.push("maputnik-string--disabled")):Ki().b[3][1]++,Ki().s[13]++,Fn.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Ki().b[4][0]++,this.props.spellCheck):(Ki().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Ki().b[5][0]++,""):(Ki().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Ki().f[4]++,Ki().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Ki().f[5]++,Ki().s[15]++,this.props.onInput?(Ki().b[6][0]++,Ki().s[16]++,this.props.onInput(this.state.value)):Ki().b[6][1]++})},onBlur:()=>{Ki().f[6]++,Ki().s[17]++,this.state.value!==this.props.value?(Ki().b[7][0]++,Ki().s[18]++,this.setState({editing:!1}),Ki().s[19]++,this.props.onChange?(Ki().b[8][0]++,Ki().s[20]++,this.props.onChange(this.state.value)):Ki().b[8][1]++):Ki().b[7][1]++},onKeyDown:r=>{Ki().f[7]++,Ki().s[21]++,Ki().b[10][0]++,r.keyCode===13&&(Ki().b[10][1]++,this.props.onChange)?(Ki().b[9][0]++,Ki().s[22]++,this.props.onChange(this.state.value)):Ki().b[9][1]++},required:this.props.required})}}function _h(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="219843c61e18178f85fa2a15ff8a5d376d473684",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AACjD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"219843c61e18178f85fa2a15ff8a5d376d473684"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _h=function(){return l},l}_h();_h().s[0]++;const ase=({t:n,value:e,wdKey:t,onChange:r,error:i,disabled:s=(_h().b[0][0]++,!1)})=>{_h().f[0]++;const l=(_h().s[1]++,Object.keys((_h().b[1][0]++,ef.layer.type.values||(_h().b[1][1]++,{}))).map(o=>(_h().f[1]++,_h().s[2]++,[o,f_.startCase(o.replace(/-/g," "))])));return _h().s[3]++,le.jsxs(ya,{label:n("Type"),fieldSpec:ef.layer.type,"data-wd-key":t,error:i,children:[(_h().b[2][0]++,s&&(_h().b[2][1]++,le.jsx(Pp,{value:e,disabled:!0}))),(_h().b[3][0]++,!s&&(_h().b[3][1]++,le.jsx(i1,{options:l,onChange:r,value:e,"data-wd-key":t+".select"})))]})},NN=(_h().s[4]++,zs()(ase)),lse={name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format.\n\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\n\nThe URL must include:\n\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \n\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\n\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{js:"0.0.16",android:"0.1.1",ios:"0.1.0"},"omit to use local fonts":{js:"https://github.com/maplibre/maplibre-gl-js/issues/3302",android:"https://github.com/maplibre/maplibre-native/issues/165",ios:"https://github.com/maplibre/maplibre-native/issues/165"}}}},Ase={type:{doc:"The type of the source."}},use={id:{type:"string",doc:"Unique layer name.",required:!0},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."}},cse={values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}}},hse={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},dse={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},fse={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},ts={$root:lse,source_vector:Ase,layer:use,filter_operator:cse,function:{base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."}},light:hse,terrain:dse,transition:fse};function JC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return JC=function(){return l},l}JC();JC().s[0]++;const GN=n=>(JC().f[0]++,JC().s[1]++,le.jsx(ya,{label:"ID",fieldSpec:ts.layer.id,"data-wd-key":n.wdKey,error:n.error,children:le.jsx(Pp,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function zb(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function fA(){return fA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fA.apply(null,arguments)}var DM={exports:{}},wa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function pse(){if(GT)return wa;GT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),U;U=Symbol.for("react.module.reference");function G(W){if(typeof W=="object"&&W!==null){var J=W.$$typeof;switch(J){case n:switch(W=W.type,W){case t:case i:case r:case C:case M:return W;default:switch(W=W&&W.$$typeof,W){case o:case l:case f:case D:case B:case s:return W;default:return J}}case e:return J}}}return wa.ContextConsumer=l,wa.ContextProvider=s,wa.Element=n,wa.ForwardRef=f,wa.Fragment=t,wa.Lazy=D,wa.Memo=B,wa.Portal=e,wa.Profiler=i,wa.StrictMode=r,wa.Suspense=C,wa.SuspenseList=M,wa.isAsyncMode=function(){return!1},wa.isConcurrentMode=function(){return!1},wa.isContextConsumer=function(W){return G(W)===l},wa.isContextProvider=function(W){return G(W)===s},wa.isElement=function(W){return typeof W=="object"&&W!==null&&W.$$typeof===n},wa.isForwardRef=function(W){return G(W)===f},wa.isFragment=function(W){return G(W)===t},wa.isLazy=function(W){return G(W)===D},wa.isMemo=function(W){return G(W)===B},wa.isPortal=function(W){return G(W)===e},wa.isProfiler=function(W){return G(W)===i},wa.isStrictMode=function(W){return G(W)===r},wa.isSuspense=function(W){return G(W)===C},wa.isSuspenseList=function(W){return G(W)===M},wa.isValidElementType=function(W){return typeof W=="string"||typeof W=="function"||W===t||W===i||W===r||W===C||W===M||W===R||typeof W=="object"&&W!==null&&(W.$$typeof===D||W.$$typeof===B||W.$$typeof===s||W.$$typeof===l||W.$$typeof===f||W.$$typeof===U||W.getModuleId!==void 0)},wa.typeOf=G,wa}var jT;function mse(){return jT||(jT=1,DM.exports=pse()),DM.exports}mse();const WT=n=>typeof n=="object"&&n!=null&&n.nodeType===1,QT=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",Nb=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return QT(t.overflowY,e)||QT(t.overflowX,e)||(r=>{const i=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(n)}return!1},Gb=(n,e,t,r,i,s,l,o)=>s<n&&l>e||s>n&&l<e?0:s<=n&&o<=t||l>=e&&o>=t?s-n-r:l>e&&o<t||s<n&&o>t?l-e+i:0,gse=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},yse=(n,e)=>{var t,r,i,s;if(typeof document>"u")return[];const{inline:l,boundary:o,skipOverflowHiddenElements:f}=e,C=typeof o=="function"?o:xe=>xe!==o;if(!WT(n))throw new TypeError("Invalid target");const M=document.scrollingElement||document.documentElement,B=[];let D=n;for(;WT(D)&&C(D);){if(D=gse(D),D===M){B.push(D);break}D!=null&&D===document.body&&Nb(D)&&!Nb(document.documentElement)||D!=null&&Nb(D,f)&&B.push(D)}const R=(r=(t=window.visualViewport)==null?void 0:t.width)!=null?r:innerWidth,U=(s=(i=window.visualViewport)==null?void 0:i.height)!=null?s:innerHeight,{scrollX:G,scrollY:W}=window,{height:J,width:$,top:oe,right:te,bottom:H,left:re}=n.getBoundingClientRect(),{top:j,right:ue,left:me}=(xe=>{const We=window.getComputedStyle(xe);return{top:parseFloat(We.scrollMarginTop)||0,right:parseFloat(We.scrollMarginRight)||0,bottom:parseFloat(We.scrollMarginBottom)||0,left:parseFloat(We.scrollMarginLeft)||0}})(n);let ge=oe-j,we=l==="center"?re+$/2-me+ue:l==="end"?te+ue:re-me;const Ee=[];for(let xe=0;xe<B.length;xe++){const We=B[xe],{height:be,width:rt,top:Ct,right:at,bottom:Je,left:ze}=We.getBoundingClientRect();if(oe>=0&&re>=0&&H<=U&&te<=R&&(We===M&&!Nb(We)||oe>=Ct&&H<=Je&&re>=ze&&te<=at))return Ee;const Te=getComputedStyle(We),He=parseInt(Te.borderLeftWidth,10),pt=parseInt(Te.borderTopWidth,10),kt=parseInt(Te.borderRightWidth,10),ft=parseInt(Te.borderBottomWidth,10);let Bt=0,Tt=0;const Le="offsetWidth"in We?We.offsetWidth-We.clientWidth-He-kt:0,Pe="offsetHeight"in We?We.offsetHeight-We.clientHeight-pt-ft:0,ke="offsetWidth"in We?We.offsetWidth===0?0:rt/We.offsetWidth:0,Qe="offsetHeight"in We?We.offsetHeight===0?0:be/We.offsetHeight:0;if(M===We)Bt=Gb(W,W+U,U,pt,ft,W+ge,W+ge+J,J),Tt=l==="start"?we:l==="center"?we-R/2:l==="end"?we-R:Gb(G,G+R,R,He,kt,G+we,G+we+$,$),Bt=Math.max(0,Bt+W),Tt=Math.max(0,Tt+G);else{Bt=Gb(Ct,Je,be,pt,ft+Pe,ge,ge+J,J),Tt=l==="start"?we-ze-He:l==="center"?we-(ze+rt/2)+Le/2:l==="end"?we-at+kt+Le:Gb(ze,at,rt,He,kt+Le,we,we+$,$);const{scrollLeft:_t,scrollTop:gt}=We;Bt=Qe===0?0:Math.max(0,Math.min(gt+Bt/Qe,We.scrollHeight-be/Qe+Pe)),Tt=ke===0?0:Math.max(0,Math.min(_t+Tt/ke,We.scrollWidth-rt/ke+Le)),ge+=gt-Bt,we+=_t-Tt}Ee.push({el:We,top:Bt,left:Tt})}return Ee};var Uy=function(){return Uy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Uy.apply(this,arguments)};var vse=0;function jN(){}function Cse(n,e){if(n){var t=yse(n,{boundary:e});t.forEach(function(r){var i=r.el,s=r.top,l=r.left;i.scrollTop=s,i.scrollLeft=l})}}function YT(n,e,t){var r=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return r}function WN(n,e){var t;function r(){t&&clearTimeout(t)}function i(){for(var s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];r(),t=setTimeout(function(){t=null,n.apply(void 0,l)},e)}return i.cancel=r,i}function Km(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];return e.some(function(o){return o&&o.apply(void 0,[r].concat(s)),r.preventDownshiftDefault||r.hasOwnProperty("nativeEvent")&&r.nativeEvent.preventDownshiftDefault})}}function jb(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){e.forEach(function(i){typeof i=="function"?i(r):i&&(i.current=r)})}}function _se(){return String(vse++)}function bB(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,r){return t[r]=QN(e,r)?e[r]:n[r],t},{})}function QN(n,e){return n[e]!==void 0}function bse(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function Wb(n,e,t,r,i){var s=t.length;if(s===0)return-1;var l=s-1;(typeof n!="number"||n<0||n>l)&&(n=e>0?-1:l+1);var o=n+e;o<0?o=l:o>l&&(o=0);var f=ux(o,e<0,t,r,i);return f===-1?n>=s?-1:n:f}function ux(n,e,t,r,i){i===void 0&&(i=!1);var s=t.length;if(e){for(var l=n;l>=0;l--)if(!r(t[l],l))return l}else for(var o=n;o<s;o++)if(!r(t[o],o))return o;return i?ux(e?s-1:0,e,t,r):-1}function qT(n,e,t,r){return r===void 0&&(r=!0),t&&e.some(function(i){return i&&(YT(i,n,t)||r&&YT(i,t.document.activeElement,t))})}var xse=WN(function(n){YN(n).textContent=""},500);function YN(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function Mse(n,e){if(!(!n||!e)){var t=YN(e);t.textContent=n,xse(e)}}function wse(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var qN={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Sse(n,e,t){var r=n.props,i=n.type,s={};Object.keys(e).forEach(function(l){Ese(l,n,e,t),t[l]!==e[l]&&(s[l]=t[l])}),r.onStateChange&&Object.keys(s).length&&r.onStateChange(fA({type:i},s))}function Ese(n,e,t,r){var i=e.props,s=e.type,l="on"+vI(n)+"Change";i[l]&&r[n]!==void 0&&r[n]!==t[n]&&i[l](fA({type:s},r))}function Bse(n,e){return e.changes}var $T=WN(function(n,e){Mse(n,e)},200),Ose=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Nt.useLayoutEffect:Nt.useEffect,Ise="useId"in Fn?function(e){var t=e.id,r=e.labelId,i=e.menuId,s=e.getItemId,l=e.toggleButtonId,o=e.inputId,f="downshift-"+Fn.useId();t||(t=f);var C=Nt.useRef({labelId:r||t+"-label",menuId:i||t+"-menu",getItemId:s||function(M){return t+"-item-"+M},toggleButtonId:l||t+"-toggle-button",inputId:o||t+"-input"});return C.current}:function(e){var t=e.id,r=t===void 0?"downshift-"+_se():t,i=e.labelId,s=e.menuId,l=e.getItemId,o=e.toggleButtonId,f=e.inputId,C=Nt.useRef({labelId:i||r+"-label",menuId:s||r+"-menu",getItemId:l||function(M){return r+"-item-"+M},toggleButtonId:o||r+"-toggle-button",inputId:f||r+"-input"});return C.current};function Tse(n,e,t,r){var i,s;if(n===void 0){if(e===void 0)throw new Error(r);i=t[e],s=e}else s=e===void 0?t.indexOf(n):e,i=n;return[i,s]}function vI(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function $N(n){var e=Nt.useRef(n);return e.current=n,e}function kse(n,e,t,r){var i=Nt.useRef(),s=Nt.useRef(),l=Nt.useCallback(function(R,U){s.current=U,R=bB(R,U.props);var G=n(R,U),W=U.props.stateReducer(R,fA({},U,{changes:G}));return W},[n]),o=Nt.useReducer(l,e,t),f=o[0],C=o[1],M=$N(e),B=Nt.useCallback(function(R){return C(fA({props:M.current},R))},[M]),D=s.current;return Nt.useEffect(function(){var R=bB(i.current,D?.props),U=D&&i.current&&!r(R,f);U&&Sse(D,R,f),i.current=f},[f,D,r]),[f,B]}var _C={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:Bse,scrollIntoView:Cse,environment:typeof window>"u"?void 0:window};function $0(n,e,t){t===void 0&&(t=qN);var r=n["default"+vI(e)];return r!==void 0?r:t[e]}function bC(n,e,t){t===void 0&&(t=qN);var r=n[e];if(r!==void 0)return r;var i=n["initial"+vI(e)];return i!==void 0?i:$0(n,e,t)}function Pse(n){var e=bC(n,"selectedItem"),t=bC(n,"isOpen"),r=Use(n),i=bC(n,"inputValue");return{highlightedIndex:r<0&&e&&t?n.items.findIndex(function(s){return n.itemToKey(s)===n.itemToKey(e)}):r,isOpen:t,selectedItem:e,inputValue:i}}function xC(n,e,t){var r=n.items,i=n.initialHighlightedIndex,s=n.defaultHighlightedIndex,l=n.isItemDisabled,o=n.itemToKey,f=e.selectedItem,C=e.highlightedIndex;return r.length===0?-1:i!==void 0&&C===i&&!l(r[i],i)?i:s!==void 0&&!l(r[s],s)?s:f?r.findIndex(function(M){return o(f)===o(M)}):t<0&&!l(r[r.length-1],r.length-1)?r.length-1:t>0&&!l(r[0],0)?0:-1}function Rse(n,e,t){var r=Nt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return Nt.useEffect(function(){if(!n)return jN;var i=t.map(function(M){return M.current});function s(){r.current.isTouchEnd=!1,r.current.isMouseDown=!0}function l(M){r.current.isMouseDown=!1,qT(M.target,i,n)||e()}function o(){r.current.isTouchEnd=!1,r.current.isTouchMove=!1}function f(){r.current.isTouchMove=!0}function C(M){r.current.isTouchEnd=!0,!r.current.isTouchMove&&!qT(M.target,i,n,!1)&&e()}return n.addEventListener("mousedown",s),n.addEventListener("mouseup",l),n.addEventListener("touchstart",o),n.addEventListener("touchmove",f),n.addEventListener("touchend",C),function(){n.removeEventListener("mousedown",s),n.removeEventListener("mouseup",l),n.removeEventListener("touchstart",o),n.removeEventListener("touchmove",f),n.removeEventListener("touchend",C)}},[t,n,e]),r.current}var Dse=function(){return jN};function Fse(n,e,t,r){r===void 0&&(r={});var i=r.document,s=CI();Nt.useEffect(function(){if(!(!n||s||!i)){var l=n(e);$T(l,i)}},t),Nt.useEffect(function(){return function(){$T.cancel(),wse(i)}},[i])}function Kse(n){var e=n.highlightedIndex,t=n.isOpen,r=n.itemRefs,i=n.getItemNodeFromIndex,s=n.menuElement,l=n.scrollIntoView,o=Nt.useRef(!0);return Ose(function(){e<0||!t||!Object.keys(r.current).length||(o.current===!1?o.current=!0:l(i(e),s))},[e]),o}function VT(n,e,t){var r;t===void 0&&(t=!0);var i=((r=n.items)==null?void 0:r.length)&&e>=0;return fA({isOpen:!1,highlightedIndex:-1},i&&fA({selectedItem:n.items[e],isOpen:$0(n,"isOpen"),highlightedIndex:$0(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function Lse(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function CI(){var n=Fn.useRef(!0);return Fn.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function xB(n){var e=$0(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function Use(n){var e=bC(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var A2={environment:vi.shape({addEventListener:vi.func.isRequired,removeEventListener:vi.func.isRequired,document:vi.shape({createElement:vi.func.isRequired,getElementById:vi.func.isRequired,activeElement:vi.any.isRequired,body:vi.any.isRequired}).isRequired,Node:vi.func.isRequired}),itemToString:vi.func,itemToKey:vi.func,stateReducer:vi.func},VN=fA({},A2,{getA11yStatusMessage:vi.func,highlightedIndex:vi.number,defaultHighlightedIndex:vi.number,initialHighlightedIndex:vi.number,isOpen:vi.bool,defaultIsOpen:vi.bool,initialIsOpen:vi.bool,selectedItem:vi.any,initialSelectedItem:vi.any,defaultSelectedItem:vi.any,id:vi.string,labelId:vi.string,menuId:vi.string,getItemId:vi.func,toggleButtonId:vi.string,onSelectedItemChange:vi.func,onHighlightedIndexChange:vi.func,onStateChange:vi.func,onIsOpenChange:vi.func,scrollIntoView:vi.func});function zse(n,e,t){var r=e.type,i=e.props,s;switch(r){case t.ItemMouseMove:s={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:s={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:xC(i,n,0)};break;case t.FunctionOpenMenu:s={isOpen:!0,highlightedIndex:xC(i,n,0)};break;case t.FunctionCloseMenu:s={isOpen:!1};break;case t.FunctionSetHighlightedIndex:s={highlightedIndex:i.isItemDisabled(i.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:s={inputValue:e.inputValue};break;case t.FunctionReset:s={highlightedIndex:xB(i),isOpen:$0(i,"isOpen"),selectedItem:$0(i,"selectedItem"),inputValue:$0(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return fA({},n,s)}Uy(Uy({},VN),{items:vi.array.isRequired,isItemDisabled:vi.func});Uy(Uy({},_C),{isItemDisabled:function(){return!1}});var _I=0,bI=1,xI=2,MI=3,wI=4,SI=5,EI=6,BI=7,OI=8,cx=9,II=10,HN=11,ZN=12,TI=13,XN=14,JN=15,eG=16,tG=17,nG=18,kI=19,rG=20,iG=21,PI=22,oG=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:PI,FunctionCloseMenu:tG,FunctionOpenMenu:eG,FunctionReset:iG,FunctionSelectItem:kI,FunctionSetHighlightedIndex:nG,FunctionSetInputValue:rG,FunctionToggleMenu:JN,InputBlur:cx,InputChange:OI,InputClick:II,InputKeyDownArrowDown:_I,InputKeyDownArrowUp:bI,InputKeyDownEnd:wI,InputKeyDownEnter:BI,InputKeyDownEscape:xI,InputKeyDownHome:MI,InputKeyDownPageDown:EI,InputKeyDownPageUp:SI,ItemClick:TI,ItemMouseMove:ZN,MenuMouseLeave:HN,ToggleButtonClick:XN});function Nse(n){var e=Pse(n),t=e.selectedItem,r=e.inputValue;return r===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(r=n.itemToString(t)),fA({},e,{inputValue:r})}fA({},VN,{items:vi.array.isRequired,isItemDisabled:vi.func,inputValue:vi.string,defaultInputValue:vi.string,initialInputValue:vi.string,inputId:vi.string,onInputValueChange:vi.func});function Gse(n,e,t,r){var i=Nt.useRef(),s=kse(n,e,t,r),l=s[0],o=s[1],f=CI();return Nt.useEffect(function(){if(QN(e,"selectedItem")){if(!f){var C=e.itemToKey(e.selectedItem)!==e.itemToKey(i.current);C&&o({type:PI,inputValue:e.itemToString(e.selectedItem)})}i.current=l.selectedItem===i.current?e.selectedItem:l.selectedItem}},[l.selectedItem,e.selectedItem]),[bB(l,e),o]}var jse=fA({},_C,{isItemDisabled:function(){return!1}});function Wse(n,e){var t,r=e.type,i=e.props,s=e.altKey,l;switch(r){case TI:l={isOpen:$0(i,"isOpen"),highlightedIndex:xB(i),selectedItem:i.items[e.index],inputValue:i.itemToString(i.items[e.index])};break;case _I:n.isOpen?l={highlightedIndex:Wb(n.highlightedIndex,1,i.items,i.isItemDisabled,!0)}:l={highlightedIndex:s&&n.selectedItem==null?-1:xC(i,n,1),isOpen:i.items.length>=0};break;case bI:n.isOpen?s?l=VT(i,n.highlightedIndex):l={highlightedIndex:Wb(n.highlightedIndex,-1,i.items,i.isItemDisabled,!0)}:l={highlightedIndex:xC(i,n,-1),isOpen:i.items.length>=0};break;case BI:l=VT(i,n.highlightedIndex);break;case xI:l=fA({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case SI:l={highlightedIndex:Wb(n.highlightedIndex,-10,i.items,i.isItemDisabled,!0)};break;case EI:l={highlightedIndex:Wb(n.highlightedIndex,10,i.items,i.isItemDisabled,!0)};break;case MI:l={highlightedIndex:ux(0,!1,i.items,i.isItemDisabled)};break;case wI:l={highlightedIndex:ux(i.items.length-1,!0,i.items,i.isItemDisabled)};break;case cx:l=fA({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=i.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:i.items[n.highlightedIndex],inputValue:i.itemToString(i.items[n.highlightedIndex])});break;case OI:l={isOpen:!0,highlightedIndex:xB(i),inputValue:e.inputValue};break;case II:l={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:xC(i,n,0)};break;case kI:l={selectedItem:e.selectedItem,inputValue:i.itemToString(e.selectedItem)};break;case PI:l={inputValue:e.inputValue};break;default:return zse(n,e,oG)}return fA({},n,l)}var Qse=["onMouseLeave","refKey","ref"],Yse=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],qse=["onClick","onPress","refKey","ref"],$se=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];MB.stateChangeTypes=oG;function MB(n){n===void 0&&(n={});var e=fA({},jse,n),t=e.items,r=e.scrollIntoView,i=e.environment,s=e.getA11yStatusMessage,l=Gse(Wse,e,Nse,Lse),o=l[0],f=l[1],C=o.isOpen,M=o.highlightedIndex,B=o.selectedItem,D=o.inputValue,R=Nt.useRef(null),U=Nt.useRef({}),G=Nt.useRef(null),W=Nt.useRef(null),J=CI(),$=Ise(e),oe=Nt.useRef(),te=$N({state:o,props:e}),H=Nt.useCallback(function(He){return U.current[$.getItemId(He)]},[$]);Fse(s,o,[C,M,B,D],i);var re=Kse({menuElement:R.current,highlightedIndex:M,isOpen:C,itemRefs:U,scrollIntoView:r,getItemNodeFromIndex:H});Nt.useEffect(function(){var He=bC(e,"isOpen");He&&G.current&&G.current.focus()},[]),Nt.useEffect(function(){J||(oe.current=t.length)});var j=Rse(i,Nt.useCallback(function(){te.current.state.isOpen&&f({type:cx,selectItem:!1})},[f,te]),Nt.useMemo(function(){return[R,W,G]},[R.current,W.current,G.current])),ue=Dse();Nt.useEffect(function(){C||(U.current={})},[C]),Nt.useEffect(function(){var He;!C||!(i!=null&&i.document)||!(G!=null&&(He=G.current)!=null&&He.focus)||i.document.activeElement!==G.current&&G.current.focus()},[C,i]);var me=Nt.useMemo(function(){return{ArrowDown:function(pt){pt.preventDefault(),f({type:_I,altKey:pt.altKey})},ArrowUp:function(pt){pt.preventDefault(),f({type:bI,altKey:pt.altKey})},Home:function(pt){te.current.state.isOpen&&(pt.preventDefault(),f({type:MI}))},End:function(pt){te.current.state.isOpen&&(pt.preventDefault(),f({type:wI}))},Escape:function(pt){var kt=te.current.state;(kt.isOpen||kt.inputValue||kt.selectedItem||kt.highlightedIndex>-1)&&(pt.preventDefault(),f({type:xI}))},Enter:function(pt){var kt=te.current.state;!kt.isOpen||pt.which===229||(pt.preventDefault(),f({type:BI}))},PageUp:function(pt){te.current.state.isOpen&&(pt.preventDefault(),f({type:SI}))},PageDown:function(pt){te.current.state.isOpen&&(pt.preventDefault(),f({type:EI}))}}},[f,te]),ge=Nt.useCallback(function(He){return fA({id:$.labelId,htmlFor:$.inputId},He)},[$]),we=Nt.useCallback(function(He,pt){var kt,ft=He===void 0?{}:He,Bt=ft.onMouseLeave,Tt=ft.refKey,Le=Tt===void 0?"ref":Tt,Pe=ft.ref,ke=zb(ft,Qse),Qe=pt===void 0?{}:pt;return Qe.suppressRefError,fA((kt={},kt[Le]=jb(Pe,function(_t){R.current=_t}),kt.id=$.menuId,kt.role="listbox",kt["aria-labelledby"]=ke&&ke["aria-label"]?void 0:""+$.labelId,kt.onMouseLeave=Km(Bt,function(){f({type:HN})}),kt),ke)},[f,ue,$]),Ee=Nt.useCallback(function(He){var pt,kt,ft=He===void 0?{}:He,Bt=ft.item,Tt=ft.index,Le=ft.refKey,Pe=Le===void 0?"ref":Le,ke=ft.ref,Qe=ft.onMouseMove,_t=ft.onMouseDown,gt=ft.onClick;ft.onPress;var wt=ft.disabled,Qt=zb(ft,Yse);wt!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Ft=te.current,ln=Ft.props,Vn=Ft.state,jt=Tse(Bt,Tt,ln.items,"Pass either item or index to getItemProps!"),Un=jt[0],wn=jt[1],Mn=ln.isItemDisabled(Un,wn),En="onClick",Mr=gt,Hn=function(){j.isTouchEnd||wn===Vn.highlightedIndex||(re.current=!1,f({type:ZN,index:wn,disabled:Mn}))},Pn=function(){f({type:TI,index:wn})},Ne=function(ie){return ie.preventDefault()};return fA((pt={},pt[Pe]=jb(ke,function(he){he&&(U.current[$.getItemId(wn)]=he)}),pt["aria-disabled"]=Mn,pt["aria-selected"]=wn===Vn.highlightedIndex,pt.id=$.getItemId(wn),pt.role="option",pt),!Mn&&(kt={},kt[En]=Km(Mr,Pn),kt),{onMouseMove:Km(Qe,Hn),onMouseDown:Km(_t,Ne)},Qt)},[f,$,te,j,re]),xe=Nt.useCallback(function(He){var pt,kt=He===void 0?{}:He,ft=kt.onClick;kt.onPress;var Bt=kt.refKey,Tt=Bt===void 0?"ref":Bt,Le=kt.ref,Pe=zb(kt,qse),ke=te.current.state,Qe=function(){f({type:XN})};return fA((pt={},pt[Tt]=jb(Le,function(_t){W.current=_t}),pt["aria-controls"]=$.menuId,pt["aria-expanded"]=ke.isOpen,pt.id=$.toggleButtonId,pt.tabIndex=-1,pt),!Pe.disabled&&fA({},{onClick:Km(ft,Qe)}),Pe)},[f,te,$]),We=Nt.useCallback(function(He,pt){var kt,ft=He===void 0?{}:He,Bt=ft.onKeyDown,Tt=ft.onChange,Le=ft.onInput,Pe=ft.onBlur;ft.onChangeText;var ke=ft.onClick,Qe=ft.refKey,_t=Qe===void 0?"ref":Qe,gt=ft.ref,wt=zb(ft,$se),Qt=pt===void 0?{}:pt;Qt.suppressRefError;var Ft=te.current.state,ln=function(Hn){var Pn=bse(Hn);Pn&&me[Pn]&&me[Pn](Hn)},Vn=function(Hn){f({type:OI,inputValue:Hn.target.value})},jt=function(Hn){if(i!=null&&i.document&&Ft.isOpen&&!j.isMouseDown){var Pn=Hn.relatedTarget===null&&i.document.activeElement!==i.document.body;f({type:cx,selectItem:!Pn})}},Un=function(){f({type:II})},wn="onChange",Mn={};if(!wt.disabled){var En;Mn=(En={},En[wn]=Km(Tt,Le,Vn),En.onKeyDown=Km(Bt,ln),En.onBlur=Km(Pe,jt),En.onClick=Km(ke,Un),En)}return fA((kt={},kt[_t]=jb(gt,function(Mr){G.current=Mr}),kt["aria-activedescendant"]=Ft.isOpen&&Ft.highlightedIndex>-1?$.getItemId(Ft.highlightedIndex):"",kt["aria-autocomplete"]="list",kt["aria-controls"]=$.menuId,kt["aria-expanded"]=Ft.isOpen,kt["aria-labelledby"]=wt&&wt["aria-label"]?void 0:$.labelId,kt.autoComplete="off",kt.id=$.inputId,kt.role="combobox",kt.value=Ft.inputValue,kt),Mn,wt)},[f,$,i,me,te,j,ue]),be=Nt.useCallback(function(){f({type:JN})},[f]),rt=Nt.useCallback(function(){f({type:tG})},[f]),Ct=Nt.useCallback(function(){f({type:eG})},[f]),at=Nt.useCallback(function(He){f({type:nG,highlightedIndex:He})},[f]),Je=Nt.useCallback(function(He){f({type:kI,selectedItem:He})},[f]),ze=Nt.useCallback(function(He){f({type:rG,inputValue:He})},[f]),Te=Nt.useCallback(function(){f({type:iG})},[f]);return{getItemProps:Ee,getLabelProps:ge,getMenuProps:we,getInputProps:We,getToggleButtonProps:xe,toggleMenu:be,openMenu:Ct,closeMenu:rt,setHighlightedIndex:at,setInputValue:ze,selectItem:Je,reset:Te,highlightedIndex:M,isOpen:C,selectedItem:B,inputValue:D}}A2.stateReducer,A2.itemToKey,A2.environment,vi.array,vi.array,vi.array,vi.func,vi.number,vi.number,vi.number,vi.func,vi.func,vi.string,vi.string;_C.itemToKey,_C.stateReducer,_C.environment;function Lr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Lr=function(){return l},l}Lr();const HT=(Lr().s[0]++,140);function U_({value:n,options:e=(Lr().b[0][0]++,[]),onChange:t=(Lr().b[1][0]++,()=>{Lr().f[1]++}),"aria-label":r}){Lr().f[0]++;const[i,s]=(Lr().s[1]++,Fn.useState((Lr().b[2][0]++,n||(Lr().b[2][1]++,"")))),l=(Lr().s[2]++,Fn.useRef(null)),[o,f]=(Lr().s[3]++,Fn.useState(HT)),C=(Lr().s[4]++,Fn.useMemo(()=>{Lr().f[2]++;const J=(Lr().s[5]++,i.toLowerCase());return Lr().s[6]++,e.filter($=>(Lr().f[3]++,Lr().s[7]++,$[0].toLowerCase().includes(J)))},[e,i])),M=(Lr().s[8]++,Fn.useCallback(()=>{if(Lr().f[4]++,Lr().s[9]++,l.current){Lr().b[3][0]++;const J=(Lr().s[10]++,window.innerHeight-l.current.getBoundingClientRect().top);Lr().s[11]++,f(Math.min(J,HT))}else Lr().b[3][1]++},[])),{isOpen:B,getMenuProps:D,getInputProps:R,getItemProps:U,highlightedIndex:G,openMenu:W}=(Lr().s[12]++,MB({items:C,inputValue:i,itemToString:J=>(Lr().f[5]++,Lr().s[13]++,J?(Lr().b[4][0]++,J[0]):(Lr().b[4][1]++,"")),stateReducer:(J,$)=>(Lr().f[6]++,Lr().s[14]++,$.type===MB.stateChangeTypes.InputClick?(Lr().b[5][0]++,Lr().s[15]++,{...$.changes,isOpen:!0}):(Lr().b[5][1]++,Lr().s[16]++,$.changes)),onSelectedItemChange:({selectedItem:J})=>{Lr().f[7]++;const $=(Lr().s[17]++,J?(Lr().b[6][0]++,J[0]):(Lr().b[6][1]++,""));Lr().s[18]++,s($),Lr().s[19]++,t(J?(Lr().b[7][0]++,J[0]):(Lr().b[7][1]++,void 0))},onInputValueChange:({inputValue:J})=>{Lr().f[8]++,Lr().s[20]++,typeof J=="string"?(Lr().b[8][0]++,Lr().s[21]++,s(J),Lr().s[22]++,t(J===""?(Lr().b[9][0]++,void 0):(Lr().b[9][1]++,J)),Lr().s[23]++,W()):Lr().b[8][1]++}}));return Lr().s[24]++,Fn.useEffect(()=>{Lr().f[9]++,Lr().s[25]++,B?(Lr().b[10][0]++,Lr().s[26]++,M()):Lr().b[10][1]++},[B,M]),Lr().s[27]++,Fn.useEffect(()=>(Lr().f[10]++,Lr().s[28]++,window.addEventListener("resize",M),Lr().s[29]++,()=>(Lr().f[11]++,Lr().s[30]++,window.removeEventListener("resize",M))),[M]),Lr().s[31]++,Fn.useEffect(()=>{Lr().f[12]++,Lr().s[32]++,s((Lr().b[11][0]++,n||(Lr().b[11][1]++,"")))},[n]),Lr().s[33]++,le.jsxs("div",{className:"maputnik-autocomplete",children:[le.jsx("input",{...R({"aria-label":r,className:"maputnik-string",spellCheck:!1,onFocus:()=>(Lr().f[13]++,Lr().s[34]++,W())})}),le.jsx("div",{...D({},{suppressRefError:!0}),ref:l,style:{position:"fixed",overflow:"auto",maxHeight:o,zIndex:998},className:"maputnik-autocomplete-menu",children:(Lr().b[12][0]++,B&&(Lr().b[12][1]++,C.map((J,$)=>(Lr().f[14]++,Lr().s[35]++,le.jsx("div",{...U({item:J,index:$,className:fm("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":G===$})}),children:J[1]},J[0])))))})]})}function Cp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="79286c20a2938f727d139d23187ec9741fcf123f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79286c20a2938f727d139d23187ec9741fcf123f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cp=function(){return l},l}Cp();Cp().s[0]++;const Vse=({onChange:n=(Cp().b[0][0]++,()=>{Cp().f[1]++}),sourceIds:e=(Cp().b[1][0]++,[]),wdKey:t,value:r,error:i,t:s})=>(Cp().f[0]++,Cp().s[1]++,le.jsx(ya,{label:s("Source"),fieldSpec:ts.layer.source,error:i,"data-wd-key":t,children:le.jsx(U_,{value:r,onChange:n,options:e?.map(l=>(Cp().f[2]++,Cp().s[2]++,[l,l]))})})),sG=(Cp().s[3]++,zs()(Vse));function _p(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d13cb986cb9a59433c45c264943b350376b901e4",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AASjD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d13cb986cb9a59433c45c264943b350376b901e4"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _p=function(){return l},l}_p();_p().s[0]++;const Hse=({onChange:n=(_p().b[0][0]++,()=>{_p().f[1]++}),sourceLayerIds:e=(_p().b[1][0]++,[]),value:t,error:r,t:i})=>(_p().f[0]++,_p().s[1]++,le.jsx(ya,{label:i("Source Layer"),fieldSpec:Es.layer["source-layer"],"data-wd-key":"layer-source-layer",error:r,children:le.jsx(U_,{value:t,onChange:n,options:e?.map(s=>(_p().f[2]++,_p().s[2]++,[s,s]))})})),aG=(_p().s[3]++,zs()(Hse));function RI(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return RI=function(){return l},l}RI();const wB=(RI().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="23f45c124faef7ca7244351096414fb5929155ff",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:37}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AACjD,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACb,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACV;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"23f45c124faef7ca7244351096414fb5929155ff"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Kn=function(){return l},l}Kn();class Zse extends Fn.Component{addLayer=(Kn().s[0]++,()=>{if(Kn().f[0]++,Kn().s[1]++,this.props.layers.some(r=>(Kn().f[1]++,Kn().s[2]++,r.id===this.state.id))){Kn().b[0][0]++,Kn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),Kn().s[4]++;return}else Kn().b[0][1]++;const e=(Kn().s[5]++,this.props.layers.slice(0)),t=(Kn().s[6]++,{id:this.state.id,type:this.state.type});Kn().s[7]++,this.state.type!=="background"?(Kn().b[1][0]++,Kn().s[8]++,t.source=this.state.source,Kn().s[9]++,Kn().b[3][0]++,!wB.includes(this.state.type)&&(Kn().b[3][1]++,this.state["source-layer"])?(Kn().b[2][0]++,Kn().s[10]++,t["source-layer"]=this.state["source-layer"]):Kn().b[2][1]++):Kn().b[1][1]++,Kn().s[11]++,e.push(t),Kn().s[12]++,this.setState({error:null},()=>{Kn().f[2]++,Kn().s[13]++,this.props.onLayersChange(e),Kn().s[14]++,this.props.onOpenToggle(!1)})});constructor(e){Kn().f[3]++,Kn().s[15]++,super(e);const t=(Kn().s[16]++,{type:"fill",id:"",error:null});if(Kn().s[17]++,Object.keys(e.sources).length>0){Kn().b[4][0]++,Kn().s[18]++,t.source=Object.keys(this.props.sources)[0];const r=(Kn().s[19]++,Kn().b[5][0]++,this.props.sources[t.source].layers||(Kn().b[5][1]++,[]));Kn().s[20]++,r.length>0?(Kn().b[6][0]++,Kn().s[21]++,t["source-layer"]=r[0]):Kn().b[6][1]++}else Kn().b[4][1]++;Kn().s[22]++,this.state=t}componentDidUpdate(e,t){Kn().f[4]++;const r=(Kn().s[23]++,t.type),i=(Kn().s[24]++,this.state.type),s=(Kn().s[25]++,this.getSources(r)),l=(Kn().s[26]++,this.getSources(i));Kn().s[27]++,Kn().b[8][0]++,r!==i&&(Kn().b[8][1]++,t.source!=="")&&(Kn().b[8][2]++,s.indexOf(t.source)>-1)&&(Kn().b[8][3]++,l.indexOf(this.state.source)<0)?(Kn().b[7][0]++,Kn().s[28]++,this.setState({source:""})):Kn().b[7][1]++}getLayersForSource(e){Kn().f[5]++;const t=(Kn().s[29]++,Kn().b[9][0]++,this.props.sources[e]||(Kn().b[9][1]++,{}));return Kn().s[30]++,Kn().b[10][0]++,t.layers||(Kn().b[10][1]++,[])}getSources(e){switch(Kn().f[6]++,Kn().s[31]++,e){case"background":return Kn().b[11][0]++,Kn().s[32]++,[];case"hillshade":Kn().b[11][1]++;case"color-relief":return Kn().b[11][2]++,Kn().s[33]++,Object.entries(this.props.sources).filter(([t,r])=>(Kn().f[7]++,Kn().s[34]++,r.type==="raster-dem")).map(([t,r])=>(Kn().f[8]++,Kn().s[35]++,t));case"raster":return Kn().b[11][3]++,Kn().s[36]++,Object.entries(this.props.sources).filter(([t,r])=>(Kn().f[9]++,Kn().s[37]++,r.type==="raster")).map(([t,r])=>(Kn().f[10]++,Kn().s[38]++,t));case"heatmap":Kn().b[11][4]++;case"circle":Kn().b[11][5]++;case"fill":Kn().b[11][6]++;case"fill-extrusion":Kn().b[11][7]++;case"line":Kn().b[11][8]++;case"symbol":return Kn().b[11][9]++,Kn().s[39]++,Object.entries(this.props.sources).filter(([t,r])=>(Kn().f[11]++,Kn().s[40]++,Kn().b[12][0]++,r.type==="vector"||(Kn().b[12][1]++,r.type==="geojson"))).map(([t,r])=>(Kn().f[12]++,Kn().s[41]++,t));default:return Kn().b[11][10]++,Kn().s[42]++,[]}}render(){Kn().f[13]++;const e=(Kn().s[43]++,this.props.t),t=(Kn().s[44]++,this.getSources(this.state.type)),r=(Kn().s[45]++,this.getLayersForSource(this.state.source));let i;return Kn().s[46]++,this.state.error?(Kn().b[13][0]++,Kn().s[47]++,i=le.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,le.jsx("a",{href:"#",onClick:()=>(Kn().f[14]++,Kn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):Kn().b[13][1]++,Kn().s[49]++,le.jsxs(J0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[i,le.jsxs("div",{className:"maputnik-add-layer",children:[le.jsx(GN,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Kn().f[15]++,Kn().s[50]++,this.setState({id:s,error:null})}}),le.jsx(NN,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Kn().f[16]++,Kn().s[51]++,this.setState({type:s}))}),(Kn().b[14][0]++,this.state.type!=="background"&&(Kn().b[14][1]++,le.jsx(sG,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Kn().f[17]++,Kn().s[52]++,this.setState({source:s}))}))),(Kn().b[15][0]++,!wB.includes(this.state.type)&&(Kn().b[15][1]++,le.jsx(aG,{sourceLayerIds:r,value:this.state["source-layer"],onChange:s=>(Kn().f[18]++,Kn().s[53]++,this.setState({"source-layer":s}))}))),le.jsx(Qa,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const Xse=(Kn().s[54]++,zs()(Zse));function Dg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dg=function(){return l},l}Dg();let ZT=(Dg().s[0]++,0);function zy(n=(Dg().b[0][0]++,"")){return Dg().f[0]++,Dg().s[1]++,ZT++,Dg().s[2]++,n+ZT}function Gi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gi=function(){return l},l}Gi();function Jse(n,e){Gi().f[0]++;const t=(Gi().s[0]++,{...n.paint});Gi().s[1]++,Object.keys(t).forEach(i=>{Gi().f[1]++,Gi().s[2]++,i in Es["paint_"+e]?Gi().b[0][1]++:(Gi().b[0][0]++,Gi().s[3]++,delete t[i])});const r=(Gi().s[4]++,{...n.layout});return Gi().s[5]++,Object.keys(r).forEach(i=>{Gi().f[2]++,Gi().s[6]++,i in Es["layout_"+e]?Gi().b[1][1]++:(Gi().b[1][0]++,Gi().s[7]++,delete r[i])}),Gi().s[8]++,{...n,paint:t,layout:r,type:e}}function eae(n,e,t,r){if(Gi().f[3]++,Gi().s[9]++,r===void 0)if(Gi().b[2][0]++,Gi().s[10]++,e){Gi().b[3][0]++;const i=(Gi().s[11]++,{...n,[e]:{...n[e]}});return Gi().s[12]++,delete i[e][t],Gi().s[13]++,Object.keys(i[e]).length<1?(Gi().b[4][0]++,Gi().s[14]++,delete i[e]):Gi().b[4][1]++,Gi().s[15]++,i}else{Gi().b[3][1]++;const i=(Gi().s[16]++,{...n});return Gi().s[17]++,delete i[t],Gi().s[18]++,i}else return Gi().b[2][1]++,Gi().s[19]++,e?(Gi().b[5][0]++,Gi().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Gi().b[5][1]++,Gi().s[21]++,{...n,[t]:r})}function fy(n){return Gi().f[4]++,Gi().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function tae(n,e){Gi().f[5]++;const t=(Gi().s[23]++,fy(n[e].id));let r=(Gi().s[24]++,e);Gi().s[25]++;for(let i=(Gi().s[26]++,e);i>0;i--){const s=(Gi().s[27]++,fy(n[i-1].id));if(Gi().s[28]++,s===t)Gi().b[6][0]++,Gi().s[29]++,r=i-1;else return Gi().b[6][1]++,Gi().s[30]++,r}return Gi().s[31]++,r}function nn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="cbcb860795ef76f874b3139539c46d7e6ab63f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:273,column:6}},82:{start:{line:276,column:27},end:{line:276,column:72}},83:{start:{line:277,column:18},end:{line:290,column:1}},84:{start:{line:278,column:18},end:{line:278,column:54}},85:{start:{line:279,column:24},end:{line:287,column:3}},86:{start:{line:280,column:29},end:{line:280,column:34}},87:{start:{line:281,column:4},end:{line:281,column:22}},88:{start:{line:281,column:15},end:{line:281,column:22}},89:{start:{line:282,column:21},end:{line:282,column:78}},90:{start:{line:282,column:55},end:{line:282,column:77}},91:{start:{line:283,column:21},end:{line:283,column:76}},92:{start:{line:283,column:55},end:{line:283,column:75}},93:{start:{line:284,column:4},end:{line:286,column:5}},94:{start:{line:285,column:6},end:{line:285,column:48}},95:{start:{line:288,column:19},end:{line:288,column:56}},96:{start:{line:288,column:47},end:{line:288,column:55}},97:{start:{line:289,column:2},end:{line:289,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:274,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:277,column:18},end:{line:277,column:19}},loc:{start:{line:277,column:29},end:{line:290,column:1}},line:277},20:{name:"(anonymous_20)",decl:{start:{line:279,column:24},end:{line:279,column:25}},loc:{start:{line:279,column:35},end:{line:287,column:3}},line:279},21:{name:"(anonymous_21)",decl:{start:{line:282,column:44},end:{line:282,column:45}},loc:{start:{line:282,column:55},end:{line:282,column:77}},line:282},22:{name:"(anonymous_22)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:75}},line:283},23:{name:"(anonymous_23)",decl:{start:{line:288,column:36},end:{line:288,column:37}},loc:{start:{line:288,column:47},end:{line:288,column:55}},line:288}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:250,column:26},end:{line:250,column:96}},type:"cond-expr",locations:[{start:{line:250,column:69},end:{line:250,column:82}},{start:{line:250,column:85},end:{line:250,column:96}}],line:250},22:{loc:{start:{line:281,column:4},end:{line:281,column:22}},type:"if",locations:[{start:{line:281,column:4},end:{line:281,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:281},23:{loc:{start:{line:284,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:284,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:284},24:{loc:{start:{line:284,column:8},end:{line:284,column:67}},type:"binary-expr",locations:[{start:{line:284,column:8},end:{line:284,column:23}},{start:{line:284,column:27},end:{line:284,column:42}},{start:{line:284,column:46},end:{line:284,column:67}}],line:284}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAmEd,YAnEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAwBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,aAAa,CAAC;AAEnD,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cbcb860795ef76f874b3139539c46d7e6ab63f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return nn=function(){return l},l}nn();class nae extends Fn.Component{static defaultProps=(nn().s[0]++,{onLayerSelect:()=>{nn().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){nn().f[1]++,nn().s[1]++,super(e),nn().s[2]++,this.selectedItemRef=Fn.createRef(),nn().s[3]++,this.scrollContainerRef=Fn.createRef(),nn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+zy()},isOpen:{add:!1}}}toggleModal(e){nn().f[2]++,nn().s[5]++,this.setState({keys:{...this.state.keys,[e]:+zy()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(nn().s[6]++,()=>{nn().f[3]++;let e=(nn().s[7]++,0);const t=(nn().s[8]++,{});nn().s[9]++,this.groupedLayers().forEach(r=>{nn().f[4]++;const i=(nn().s[10]++,fy(r[0].id)),s=(nn().s[11]++,[i,e].join("-"));nn().s[12]++,r.length>1?(nn().b[0][0]++,nn().s[13]++,t[s]=this.state.areAllGroupsExpanded):nn().b[0][1]++,nn().s[14]++,r.forEach(l=>{nn().f[5]++,nn().s[15]++,e+=1})}),nn().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){nn().f[6]++;const e=(nn().s[17]++,[]),t=(nn().s[18]++,new Map);nn().s[19]++;for(let r=(nn().s[20]++,0);r<this.props.layers.length;r++){const i=(nn().s[21]++,this.props.layers[r]),s=(nn().s[22]++,this.props.layers[r-1]);nn().s[23]++,t.set(i.id,t.has(i.id)?(nn().b[1][0]++,t.get(i.id)+1):(nn().b[1][1]++,0));const l=(nn().s[24]++,{...i,key:`layers-list-${i.id}-${t.get(i.id)}`});if(nn().s[25]++,nn().b[3][0]++,s&&(nn().b[3][1]++,fy(s.id)==fy(l.id))){nn().b[2][0]++;const o=(nn().s[26]++,e[e.length-1]);nn().s[27]++,o.push(l)}else nn().b[2][1]++,nn().s[28]++,e.push([l])}return nn().s[29]++,e}toggleLayerGroup(e,t){nn().f[7]++;const r=(nn().s[30]++,[e,t].join("-")),i=(nn().s[31]++,{...this.state.collapsedGroups});nn().s[32]++,r in this.state.collapsedGroups?(nn().b[4][0]++,nn().s[33]++,i[r]=!this.state.collapsedGroups[r]):(nn().b[4][1]++,nn().s[34]++,i[r]=!1),nn().s[35]++,this.setState({collapsedGroups:i})}isCollapsed(e,t){nn().f[8]++;const r=(nn().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return nn().s[37]++,r===void 0?(nn().b[5][0]++,!0):(nn().b[5][1]++,r)}shouldComponentUpdate(e,t){if(nn().f[9]++,nn().s[38]++,this.state!==t)return nn().b[6][0]++,nn().s[39]++,!0;nn().b[6][1]++;function r(f){nn().f[10]++;const C=(nn().s[40]++,{id:f.id});return nn().s[41]++,f.layout?(nn().b[7][0]++,nn().s[42]++,C.layout={visibility:f.layout.visibility}):nn().b[7][1]++,nn().s[43]++,C}const i=(nn().s[44]++,p6.isEqual(e.layers.map(r),this.props.layers.map(r)));function s(f){nn().f[11]++;const C=(nn().s[45]++,{...f});return nn().s[46]++,delete C.layers,nn().s[47]++,C}const l=(nn().s[48]++,p6.isEqual(s(this.props),s(e))),o=(nn().s[49]++,nn().b[8][0]++,!(i&&(nn().b[8][1]++,l)));return nn().s[50]++,o}componentDidUpdate(e){if(nn().f[12]++,nn().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){nn().b[9][0]++;const t=(nn().s[52]++,this.selectedItemRef.current);if(nn().s[53]++,nn().b[11][0]++,t&&(nn().b[11][1]++,t.node)){nn().b[10][0]++;const r=(nn().s[54]++,t.node),i=(nn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),s=(nn().s[56]++,new IntersectionObserver(l=>{nn().f[13]++,nn().s[57]++,s.unobserve(r),nn().s[58]++,nn().b[13][0]++,l.length>0&&(nn().b[13][1]++,l[0].intersectionRatio<1)?(nn().b[12][0]++,nn().s[59]++,r.scrollIntoView()):nn().b[12][1]++},i));nn().s[60]++,s.observe(r)}else nn().b[10][1]++}else nn().b[9][1]++}render(){nn().f[14]++;const e=(nn().s[61]++,[]);let t=(nn().s[62]++,0);const r=(nn().s[63]++,this.groupedLayers());nn().s[64]++,r.forEach(s=>{nn().f[15]++;const l=(nn().s[65]++,fy(s[0].id));if(nn().s[66]++,s.length>1){nn().b[14][0]++;const o=(nn().s[67]++,le.jsx(Moe,{"data-wd-key":[l,t].join("-"),"aria-controls":s.map(f=>(nn().f[16]++,nn().s[68]++,f.key)).join(" "),title:l,isActive:(nn().b[15][0]++,!this.isCollapsed(l,t)||(nn().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,l,t)},`group-${l}-${t}`));nn().s[69]++,e.push(o)}else nn().b[14][1]++;nn().s[70]++,s.forEach((o,f)=>{nn().f[17]++;const C=(nn().s[71]++,tae(this.props.layers,t)),M=(nn().s[72]++,this.props.errors.find(R=>(nn().f[18]++,nn().s[73]++,nn().b[16][0]++,R.parsed&&(nn().b[16][1]++,R.parsed.type==="layer")&&(nn().b[16][2]++,R.parsed.data.index==t)))),B=(nn().s[74]++,{});nn().s[75]++,t===this.props.selectedLayerIndex?(nn().b[17][0]++,nn().s[76]++,B.ref=this.selectedItemRef):nn().b[17][1]++;const D=(nn().s[77]++,le.jsx(Soe,{className:fm({"maputnik-layer-list-item-collapsed":(nn().b[18][0]++,s.length>1&&(nn().b[18][1]++,this.isCollapsed(l,C))&&(nn().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(nn().b[19][0]++,f==s.length-1&&(nn().b[19][1]++,s.length>1)),"maputnik-layer-list-item--error":!!M}),id:o.key,layerId:o.id,layerIndex:t,layerType:o.type,visibility:(nn().b[20][0]++,o.layout||(nn().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...B},o.key));nn().s[78]++,e.push(D),nn().s[79]++,t+=1})});const i=(nn().s[80]++,this.props.t);return nn().s[81]++,le.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":i("Layers list"),ref:this.scrollContainerRef,children:[le.jsx(Xse,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),le.jsxs("header",{className:"maputnik-layer-list-header",children:[le.jsx("span",{className:"maputnik-layer-list-header-title",children:i("Layers")}),le.jsx("span",{className:"maputnik-space"}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(nn().b[21][0]++,i("Collapse")):(nn().b[21][1]++,i("Expand"))})})}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:i("Add Layer")})})})]}),le.jsx("div",{role:"navigation","aria-label":i("Layers list"),children:le.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const rae=(nn().s[82]++,zs()(nae));nn().s[83]++;const iae=n=>{nn().f[19]++;const e=(nn().s[84]++,Zre(Hre(mI)));nn().s[85]++;const t=i=>{nn().f[20]++;const{active:s,over:l}=(nn().s[86]++,i);if(nn().s[87]++,l)nn().b[22][1]++;else{nn().b[22][0]++,nn().s[88]++;return}const o=(nn().s[89]++,n.layers.findIndex(C=>(nn().f[21]++,nn().s[90]++,C.id===s.id))),f=(nn().s[91]++,n.layers.findIndex(C=>(nn().f[22]++,nn().s[92]++,C.id===l.id)));nn().s[93]++,nn().b[24][0]++,o!==-1&&(nn().b[24][1]++,f!==-1)&&(nn().b[24][2]++,o!==f)?(nn().b[23][0]++,nn().s[94]++,n.onMoveLayer({oldIndex:o,newIndex:f})):nn().b[23][1]++},r=(nn().s[95]++,n.layers.map(i=>(nn().f[23]++,nn().s[96]++,i.id)));return nn().s[97]++,le.jsx(toe,{sensors:e,collisionDetection:nie,onDragEnd:t,children:le.jsx(foe,{items:r,strategy:hoe,children:le.jsx(rae,{...n})})})};var FM,XT;function lG(){if(XT)return FM;XT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function r(l){delete n[l]}function i(l,o){var f=n[l];if(!f)throw new Error("Cannot open "+e);f.openMenu(o)}function s(l,o){var f=n[l];if(!f)throw new Error("Cannot close "+e);f.closeMenu(o)}return FM={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},FM}var KM,JT;function oae(){if(JT)return KM;JT=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(f){f.metaKey=f.metaKey||!1,f.ctrlKey=f.ctrlKey||!1,f.altKey=f.altKey||!1,f.shiftKey=f.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:f})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(l=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,l=0,o=this._members.length;l<o;l++)if(s=this._members[l],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,l=this._members.length;s<l;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var l=i.node||i,o=i.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var f=o.replace(/[\W_]/g,"").toLowerCase(),C={node:l,text:f};return s!=null?this._members.splice(s,0,C):this._members.push(C),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,l=i.length;s<l;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var l in i)if(s[l]!==void 0&&i[l]!==s[l])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return KM=function(s){return new n(s)},KM}var LM,ek;function sae(){if(ek)return LM;ek=1;var n=oae(),e=lG(),t={wrap:!0,stringSearch:!0},r={init:function(f){this.updateOptions(f),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(f){var C=this.options;this.options=f||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),C&&C.id&&C.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(f){this.focusGroup.focusNodeAtIndex(f)},addItem:function(f){this.focusGroup.addMember(f)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(f){this.focusGroup._handleUnboundKey(f)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(f){if(!this.isOpen&&(f=f||{},f.focusMenu===void 0&&(f.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),f.focusMenu)){var C=this;this.moveFocusTimer=setTimeout(function(){C.focusItem(0)},0)}},closeMenu:function(f){this.isOpen&&(f=f||{},this.isOpen=!1,this.update(),f.focusButton&&this.button.ref.current.focus())},toggleMenu:function(f,C){f=f||{},C=C||{},this.isOpen?this.closeMenu(f):this.openMenu(C)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var f=o.button.ref.current;if(f){var C=f.ownerDocument.activeElement;if(!(f&&C===f)){var M=o.menu.ref.current;if(M===C){o.focusItem(0);return}M&&M.contains(C)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,f){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,f)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return LM=function(o){var f=Object.create(r);return f.init(o),f},LM}var UM,tk;function m3(){if(tk)return UM;tk=1;var n=Ya(),e=n.createContext();return UM=e,UM}var zM,nk;function g3(){if(nk)return zM;nk=1;var n=gm();return zM={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},zM}var NM,rk;function y3(){return rk||(rk=1,NM=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),NM}var GM,ik;function aae(){if(ik)return GM;ik=1;function n(R,U){if(!(R instanceof U))throw new TypeError("Cannot call a class as a function")}function e(R,U){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:R}function t(R,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);R.prototype=Object.create(U&&U.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(R,U):R.__proto__=U)}var r=Ya(),i=gm(),s=sae(),l=m3(),o=g3(),f=o.refType,C=y3(),M={children:i.node.isRequired,forwardedRef:f,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(U){return{onMenuToggle:U.onMenuToggle,onSelection:U.onSelection,closeOnSelection:U.closeOnSelection,closeOnBlur:U.closeOnBlur,id:U.id}},D=function(R){t(U,R);function U(G){n(this,U);var W=e(this,R.call(this,G));return W.manager=s(B(G)),W}return U.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},U.prototype.render=function(){var W={};return C(W,this.props,M),r.createElement(l.Provider,{value:this.manager},r.createElement(this.props.tag,W,this.props.children))},U}(r.Component);return D.propTypes=M,D.defaultProps={tag:"div"},GM=r.forwardRef(function(R,U){var G={forwardedRef:U};return C(G,R,{children:M.children,forwardedRef:M.forwardedRef}),C(G,{forwardedRef:U}),r.createElement(D,G,R.children)}),GM}var jM,ok;function lae(){if(ok)return jM;ok=1;function n(D,R){if(!(D instanceof R))throw new TypeError("Cannot call a class as a function")}function e(D,R){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:D}function t(D,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);D.prototype=Object.create(R&&R.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(D,R):D.__proto__=R)}var r=Ya(),i=gm(),s=m3(),l=g3(),o=l.refType,f=y3(),C={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},M=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(D){t(R,D);function R(){var U,G,W;n(this,R);for(var J=arguments.length,$=Array(J),oe=0;oe<J;oe++)$[oe]=arguments[oe];return W=(U=(G=e(this,D.call.apply(D,[this].concat($))),G),G.ref=r.createRef(),G.handleKeyDown=function(te){if(!G.props.disabled){var H=G.props.ambManager;switch(te.key){case"ArrowDown":te.preventDefault(),H.isOpen?H.focusItem(0):H.openMenu();break;case"Enter":case" ":te.preventDefault(),H.toggleMenu();break;case"Escape":H.handleMenuKey(te);break;default:H.handleButtonNonArrowKey(te)}}},G.handleClick=function(){G.props.disabled||G.props.ambManager.toggleMenu({},{focusMenu:!1})},G.setRef=function(te){G.ref.current=te,typeof G.props.forwardedRef=="function"?G.props.forwardedRef(te):G.props.forwardedRef&&(G.props.forwardedRef.current=te)},U),e(G,W)}return R.prototype.componentDidMount=function(){this.props.ambManager.button=this},R.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},R.prototype.render=function(){var G=this.props,W=this.props.ambManager,J={role:"button",tabIndex:G.disabled?"":"0","aria-haspopup":!0,"aria-expanded":W.isOpen,"aria-disabled":G.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},$={};return f($,C),M().indexOf(G.tag)>=0&&delete $.disabled,W.options.closeOnBlur&&(J.onBlur=W.handleBlur),f(J,G,$),f(J,{ref:this.setRef}),r.createElement(G.tag,J,G.children)},R}(r.Component);return B.propTypes=C,B.defaultProps={tag:"span"},jM=r.forwardRef(function(D,R){return r.createElement(s.Consumer,null,function(U){var G={ambManager:U,forwardedRef:R};return f(G,D,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),r.createElement(B,G,D.children)})}),jM}var WM,sk;function Aae(){return sk||(sk=1,WM=function(e,t,r){var i=0,s=0,l=!1,o=!1,f=!1;e.addEventListener("click",C,r),e.addEventListener("touchstart",M,r);function C(W){f||t(W)}function M(W){f=!0,!l&&(l=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",D,r),e.addEventListener("touchcancel",R,r),o=!1,i=W.touches[0].clientX,s=W.touches[0].clientY)}function B(W){o||Math.abs(W.touches[0].clientX-i)<=10&&Math.abs(W.touches[0].clientY-s)<=10||(o=!0)}function D(W){l=!1,U(),o||t(W)}function R(){l=!1,o=!1,i=0,s=0}function U(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",D,r),e.removeEventListener("touchcancel",R,r)}function G(){e.removeEventListener("click",C,r),e.removeEventListener("touchstart",M,r),U()}return{remove:G}}),WM}var QM,ak;function uae(){if(ak)return QM;ak=1;function n(D,R){if(!(D instanceof R))throw new TypeError("Cannot call a class as a function")}function e(D,R){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:D}function t(D,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);D.prototype=Object.create(R&&R.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(D,R):D.__proto__=R)}var r=Ya(),i=gm(),s=Aae(),l=m3(),o=g3(),f=o.refType,C=y3(),M={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:f,tag:i.string},B=function(D){t(R,D);function R(){var U,G,W;n(this,R);for(var J=arguments.length,$=Array(J),oe=0;oe<J;oe++)$[oe]=arguments[oe];return W=(U=(G=e(this,D.call.apply(D,[this].concat($))),G),G.ref=r.createRef(),G.addTapListener=function(){var te=G.ref.current;if(te){var H=te.ownerDocument;H&&(G.tapListener=s(H.documentElement,G.handleTap))}},G.handleTap=function(te){G.ref.current.contains(te.target)||G.props.ambManager.button.ref.current.contains(te.target)||G.props.ambManager.closeMenu()},G.setRef=function(te){G.ref.current=te,typeof G.props.forwardedRef=="function"?G.props.forwardedRef(te):G.props.forwardedRef&&(G.props.forwardedRef.current=te)},U),e(G,W)}return R.prototype.componentDidMount=function(){this.props.ambManager.menu=this},R.prototype.componentDidUpdate=function(){var G=this.props.ambManager;G.options.closeOnBlur&&(G.isOpen&&!this.tapListener?this.addTapListener():!G.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),G.isOpen||G.clearItems())},R.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},R.prototype.render=function(){var G=this.props,W=this.props.ambManager,J=function(){return typeof G.children=="function"?G.children({isOpen:W.isOpen}):W.isOpen?G.children:!1}();if(!J)return!1;var $={onKeyDown:W.handleMenuKey,role:"menu",tabIndex:-1};return W.options.closeOnBlur&&($.onBlur=W.handleBlur),C($,G,M),C($,{ref:this.setRef}),r.createElement(G.tag,$,J)},R}(r.Component);return B.propTypes=M,B.defaultProps={tag:"div"},QM=r.forwardRef(function(D,R){return r.createElement(l.Consumer,null,function(U){var G={ambManager:U,forwardedRef:R};return C(G,D,{ambManager:M.ambManager,children:M.children,forwardedRef:M.forwardedRef}),r.createElement(B,G,D.children)})}),QM}var YM,lk;function cae(){if(lk)return YM;lk=1;function n(B,D){if(!(B instanceof D))throw new TypeError("Cannot call a class as a function")}function e(B,D){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:B}function t(B,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);B.prototype=Object.create(D&&D.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(B,D):B.__proto__=D)}var r=Ya(),i=gm(),s=m3(),l=g3(),o=l.refType,f=y3(),C={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},M=function(B){t(D,B);function D(){var R,U,G;n(this,D);for(var W=arguments.length,J=Array(W),$=0;$<W;$++)J[$]=arguments[$];return G=(R=(U=e(this,B.call.apply(B,[this].concat(J))),U),U.ref=r.createRef(),U.handleKeyDown=function(oe){oe.key!=="Enter"&&oe.key!==" "||U.props.tag==="a"&&U.props.href||(oe.preventDefault(),U.selectItem(oe))},U.selectItem=function(oe){var te=typeof U.props.value<"u"?U.props.value:U.props.children;U.props.ambManager.handleSelection(te,oe)},U.setRef=function(oe){U.ref.current=oe,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(oe):U.props.forwardedRef&&(U.props.forwardedRef.current=oe)},R),e(U,G)}return D.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},D.prototype.render=function(){var U={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return f(U,this.props,C),r.createElement(this.props.tag,U,this.props.children)},D}(r.Component);return M.propTypes=C,M.defaultProps={tag:"div"},YM=r.forwardRef(function(B,D){return r.createElement(s.Consumer,null,function(R){var U={ambManager:R,forwardedRef:D};return f(U,B,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),r.createElement(M,U,B.children)})}),YM}var qM,Ak;function hae(){if(Ak)return qM;Ak=1;var n=lG();return qM={Wrapper:aae(),Button:lae(),Menu:uae(),MenuItem:cae(),openMenu:n.openMenu,closeMenu:n.closeMenu},qM}var Qb=hae();function uk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function SB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(t),!0).forEach(function(r){Rl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function v3(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ck(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function C3(n,e,t){return e&&ck(n.prototype,e),t&&ck(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mm(){return mm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mm.apply(this,arguments)}function DI(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&EB(n,e)}function hx(n){return hx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hx(n)}function EB(n,e){return EB=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},EB(n,e)}function dae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fae(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function _3(n,e){if(n==null)return{};var t=fae(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pae(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bp(n)}function FI(n){var e=dae();return function(){var r=hx(n),i;if(e){var s=hx(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return pae(this,i)}}function mae(n,e){return vae(n)||_ae(n,e)||AG(n,e)||xae()}function gae(n){return yae(n)||Cae(n)||AG(n)||bae()}function yae(n){if(Array.isArray(n))return BB(n)}function vae(n){if(Array.isArray(n))return n}function Cae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _ae(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,l,o;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(f){s=!0,o=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function AG(n,e){if(n){if(typeof n=="string")return BB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BB(n,e)}}function BB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function bae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mae=C3(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,l=s===void 0?!1:s,o=e.allowZeroExpanded,f=o===void 0?!1:o;v3(this,n),Rl(this,"expanded",void 0),Rl(this,"allowMultipleExpanded",void 0),Rl(this,"allowZeroExpanded",void 0),Rl(this,"toggleExpanded",function(C){if(t.isItemDisabled(C))return t;var M=t.isItemExpanded(C);return M?t.augment({expanded:t.expanded.filter(function(B){return B!==C})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(gae(t.expanded),[C]):[C]})}),Rl(this,"isItemDisabled",function(C){var M=t.isItemExpanded(C),B=t.expanded.length===1;return!!(M&&!t.allowZeroExpanded&&B)}),Rl(this,"isItemExpanded",function(C){return t.expanded.indexOf(C)!==-1}),Rl(this,"getPanelAttributes",function(C,M){var B=M??t.isItemExpanded(C);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(C),id:t.getPanelId(C),hidden:B?void 0:!0}}),Rl(this,"getHeadingAttributes",function(){return{role:"heading"}}),Rl(this,"getButtonAttributes",function(C,M){var B=M??t.isItemExpanded(C),D=t.isItemDisabled(C);return{id:t.getButtonId(C),"aria-disabled":D,"aria-expanded":B,"aria-controls":t.getPanelId(C),role:"button",tabIndex:0}}),Rl(this,"getPanelId",function(C){return"accordion__panel-".concat(C)}),Rl(this,"getButtonId",function(C){return"accordion__heading-".concat(C)}),Rl(this,"augment",function(C){return new n(SB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},C))}),this.expanded=i,this.allowMultipleExpanded=l,this.allowZeroExpanded=f}),uG=Nt.createContext(null),cG=function(n){DI(t,n);var e=FI(t);function t(){var r;v3(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Rl(bp(r),"state",new Mae({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Rl(bp(r),"toggleExpanded",function(o){r.setState(function(f){return f.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Rl(bp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Rl(bp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Rl(bp(r),"getPanelAttributes",function(o,f){return r.state.getPanelAttributes(o,f)}),Rl(bp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Rl(bp(r),"getButtonAttributes",function(o,f){return r.state.getButtonAttributes(o,f)}),r}return C3(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,l=i.allowMultipleExpanded;return Nt.createElement(uG.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Nt.PureComponent);Rl(cG,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var hG=function(n){DI(t,n);var e=FI(t);function t(){var r;v3(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Rl(bp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return C3(t,[{key:"render",value:function(){return Nt.createElement(uG.Consumer,null,this.renderChildren)}}]),t}(Nt.PureComponent),wae=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Sae=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,f=_3(e,wae);return Nt.createElement(cG,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:l},Nt.createElement("div",mm({"data-accordion-component":"Accordion",className:r},f)))},OB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(OB||(OB={}));var dG=OB,$M=0;function Eae(){var n=$M;return $M=$M+1,"raa-".concat(n)}var Bae=Nt.useId||Eae,Oae=/[\u0009\u000a\u000c\u000d\u0020]/g;function e_(n){return n===""||Oae.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var fG=Nt.createContext(null),Iae=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,l=function(){i.toggleExpanded(r)},o=function(C){var M=s??C.isItemExpanded(r),B=C.isItemDisabled(r),D=C.getPanelAttributes(r,s),R=C.getHeadingAttributes(r),U=C.getButtonAttributes(r,s);return Nt.createElement(fG.Provider,{value:{uuid:r,expanded:M,disabled:B,toggleExpanded:l,panelAttributes:D,headingAttributes:R,buttonAttributes:U}},t)};return Nt.createElement(hG,null,o)},Tae=function(e){return Nt.createElement(hG,null,function(t){return Nt.createElement(Iae,mm({},e,{accordionContext:t}))})},b3=function(e){var t=e.children,r=function(s){return s?t(s):null};return Nt.createElement(fG.Consumer,null,r)},kae=["uuid","dangerouslySetExpanded","className","activeClassName"],pG=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,l=e.activeClassName,o=_3(e,kae),f=Nt.useState(Bae()),C=mae(f,1),M=C[0],B=t??M,D=function(U){var G=U.expanded,W=G&&l?l:s;return Nt.createElement("div",mm({"data-accordion-component":"AccordionItem",className:W},o))};return e_(B.toString()),o.id&&e_(o.id),Nt.createElement(Tae,{uuid:B,dangerouslySetExpanded:r},Nt.createElement(b3,null,D))};pG.displayName=dG.AccordionItem;function mG(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:mG(n.parentElement))}function x3(n){var e=mG(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Pae(n){var e=x3(n)||[],t=e[0];t&&t.focus()}function Rae(n){var e=x3(n)||[],t=e[e.length-1];t&&t.focus()}function Dae(n){var e=x3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function Fae(n){var e=x3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Lm={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Kae=["toggleExpanded","className"],Lae=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=_3(e,Kae),l=function(f){var C=f.key;if((C===Lm.ENTER||C===Lm.SPACE||C===Lm.SPACE_DEPRECATED)&&(f.preventDefault(),t()),f.target instanceof HTMLElement)switch(C){case Lm.HOME:{f.preventDefault(),Pae(f.target);break}case Lm.END:{f.preventDefault(),Rae(f.target);break}case Lm.LEFT:case Lm.UP:{f.preventDefault(),Fae(f.target);break}case Lm.RIGHT:case Lm.DOWN:{f.preventDefault(),Dae(f.target);break}}};return s.id&&e_(s.id),Nt.createElement("div",mm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},Uae=function(e){return Nt.createElement(b3,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return Nt.createElement(Lae,mm({toggleExpanded:r},e,i))})},zae={className:"accordion__heading","aria-level":3},Nae=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,gG=function(n){DI(t,n);var e=FI(t);function t(){var r;v3(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Rl(bp(r),"ref",void 0),Rl(bp(r),"setRef",function(o){r.ref=o}),r}return C3(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Nt.createElement("div",mm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Nae)}}]),t}(Nt.PureComponent);Rl(gG,"defaultProps",zae);var yG=function(e){return Nt.createElement(b3,null,function(t){var r=t.headingAttributes;return e.id&&e_(e.id),Nt.createElement(gG,mm({},e,r))})};yG.displayName=dG.AccordionItemHeading;var Gae=["className","region","id"],jae=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,l=_3(e,Gae),o=function(C){var M=C.panelAttributes;s&&e_(s);var B=SB(SB({},M),{},{"aria-labelledby":i?M["aria-labelledby"]:void 0});return Nt.createElement("div",mm({"data-accordion-component":"AccordionItemPanel",className:r},l,B,{role:i?"region":void 0}))};return Nt.createElement(b3,null,o)},u2={exports:{}},Wae=u2.exports,hk;function M3(){return hk||(hk=1,function(n,e){(function(t,r){n.exports=r()})(Wae,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),f=s||l||o,C=f&&(s?document.documentMode||6:+(o||l)[1]),M=!o&&/WebKit\//.test(t),B=M&&/Qt\/\d+\.\d+/.test(t),D=!o&&/Chrome\/(\d+)/.exec(t),R=D&&+D[1],U=/Opera\//.test(t),G=/Apple Computer/.test(navigator.vendor),W=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),J=/PhantomJS/.test(t),$=G&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),oe=/Android/.test(t),te=$||oe||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),H=$||/Mac/.test(r),re=/\bCrOS\b/.test(t),j=/win/i.test(r),ue=U&&t.match(/Version\/(\d*\.\d*)/);ue&&(ue=Number(ue[1])),ue&&ue>=15&&(U=!1,M=!0);var me=H&&(B||U&&(ue==null||ue<12.11)),ge=i||f&&C>=9;function we(h){return new RegExp("(^|\\s)"+h+"(?:$|\\s)\\s*")}var Ee=function(h,y){var E=h.className,S=we(y).exec(E);if(S){var F=E.slice(S.index+S[0].length);h.className=E.slice(0,S.index)+(F?S[1]+F:"")}};function xe(h){for(var y=h.childNodes.length;y>0;--y)h.removeChild(h.firstChild);return h}function We(h,y){return xe(h).appendChild(y)}function be(h,y,E,S){var F=document.createElement(h);if(E&&(F.className=E),S&&(F.style.cssText=S),typeof y=="string")F.appendChild(document.createTextNode(y));else if(y)for(var Z=0;Z<y.length;++Z)F.appendChild(y[Z]);return F}function rt(h,y,E,S){var F=be(h,y,E,S);return F.setAttribute("role","presentation"),F}var Ct;document.createRange?Ct=function(h,y,E,S){var F=document.createRange();return F.setEnd(S||h,E),F.setStart(h,y),F}:Ct=function(h,y,E){var S=document.body.createTextRange();try{S.moveToElementText(h.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",E),S.moveStart("character",y),S};function at(h,y){if(y.nodeType==3&&(y=y.parentNode),h.contains)return h.contains(y);do if(y.nodeType==11&&(y=y.host),y==h)return!0;while(y=y.parentNode)}function Je(h){var y=h.ownerDocument||h,E;try{E=h.activeElement}catch{E=y.body||null}for(;E&&E.shadowRoot&&E.shadowRoot.activeElement;)E=E.shadowRoot.activeElement;return E}function ze(h,y){var E=h.className;we(y).test(E)||(h.className+=(E?" ":"")+y)}function Te(h,y){for(var E=h.split(" "),S=0;S<E.length;S++)E[S]&&!we(E[S]).test(y)&&(y+=" "+E[S]);return y}var He=function(h){h.select()};$?He=function(h){h.selectionStart=0,h.selectionEnd=h.value.length}:f&&(He=function(h){try{h.select()}catch{}});function pt(h){return h.display.wrapper.ownerDocument}function kt(h){return ft(h.display.wrapper)}function ft(h){return h.getRootNode?h.getRootNode():h.ownerDocument}function Bt(h){return pt(h).defaultView}function Tt(h){var y=Array.prototype.slice.call(arguments,1);return function(){return h.apply(null,y)}}function Le(h,y,E){y||(y={});for(var S in h)h.hasOwnProperty(S)&&(E!==!1||!y.hasOwnProperty(S))&&(y[S]=h[S]);return y}function Pe(h,y,E,S,F){y==null&&(y=h.search(/[^\s\u00a0]/),y==-1&&(y=h.length));for(var Z=S||0,de=F||0;;){var _e=h.indexOf("	",Z);if(_e<0||_e>=y)return de+(y-Z);de+=_e-Z,de+=E-de%E,Z=_e+1}}var ke=function(){this.id=null,this.f=null,this.time=0,this.handler=Tt(this.onTimeout,this)};ke.prototype.onTimeout=function(h){h.id=0,h.time<=+new Date?h.f():setTimeout(h.handler,h.time-+new Date)},ke.prototype.set=function(h,y){this.f=y;var E=+new Date+h;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,h),this.time=E)};function Qe(h,y){for(var E=0;E<h.length;++E)if(h[E]==y)return E;return-1}var _t=50,gt={toString:function(){return"CodeMirror.Pass"}},wt={scroll:!1},Qt={origin:"*mouse"},Ft={origin:"+move"};function ln(h,y,E){for(var S=0,F=0;;){var Z=h.indexOf("	",S);Z==-1&&(Z=h.length);var de=Z-S;if(Z==h.length||F+de>=y)return S+Math.min(de,y-F);if(F+=Z-S,F+=E-F%E,S=Z+1,F>=y)return S}}var Vn=[""];function jt(h){for(;Vn.length<=h;)Vn.push(Un(Vn)+" ");return Vn[h]}function Un(h){return h[h.length-1]}function wn(h,y){for(var E=[],S=0;S<h.length;S++)E[S]=y(h[S],S);return E}function Mn(h,y,E){for(var S=0,F=E(y);S<h.length&&E(h[S])<=F;)S++;h.splice(S,0,y)}function En(){}function Mr(h,y){var E;return Object.create?E=Object.create(h):(En.prototype=h,E=new En),y&&Le(y,E),E}var Hn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Pn(h){return/\w/.test(h)||h>""&&(h.toUpperCase()!=h.toLowerCase()||Hn.test(h))}function Ne(h,y){return y?y.source.indexOf("\\w")>-1&&Pn(h)?!0:y.test(h):Pn(h)}function he(h){for(var y in h)if(h.hasOwnProperty(y)&&h[y])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function se(h){return h.charCodeAt(0)>=768&&ie.test(h)}function fe(h,y,E){for(;(E<0?y>0:y<h.length)&&se(h.charAt(y));)y+=E;return y}function Oe(h,y,E){for(var S=y>E?-1:1;;){if(y==E)return y;var F=(y+E)/2,Z=S<0?Math.ceil(F):Math.floor(F);if(Z==y)return h(Z)?y:E;h(Z)?E=Z:y=Z+S}}function Ge(h,y,E,S){if(!h)return S(y,E,"ltr",0);for(var F=!1,Z=0;Z<h.length;++Z){var de=h[Z];(de.from<E&&de.to>y||y==E&&de.to==y)&&(S(Math.max(de.from,y),Math.min(de.to,E),de.level==1?"rtl":"ltr",Z),F=!0)}F||S(y,E,"ltr")}var ct=null;function $e(h,y,E){var S;ct=null;for(var F=0;F<h.length;++F){var Z=h[F];if(Z.from<y&&Z.to>y)return F;Z.to==y&&(Z.from!=Z.to&&E=="before"?S=F:ct=F),Z.from==y&&(Z.from!=Z.to&&E!="before"?S=F:ct=F)}return S??ct}var De=function(){var h="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",y="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(Ue){return Ue<=247?h.charAt(Ue):1424<=Ue&&Ue<=1524?"R":1536<=Ue&&Ue<=1785?y.charAt(Ue-1536):1774<=Ue&&Ue<=2220?"r":8192<=Ue&&Ue<=8203?"w":Ue==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,F=/[stwN]/,Z=/[LRr]/,de=/[Lb1n]/,_e=/[1n]/;function Re(Ue,yt,Ot){this.level=Ue,this.from=yt,this.to=Ot}return function(Ue,yt){var Ot=yt=="ltr"?"L":"R";if(Ue.length==0||yt=="ltr"&&!S.test(Ue))return!1;for(var Jt=Ue.length,qt=[],_n=0;_n<Jt;++_n)qt.push(E(Ue.charCodeAt(_n)));for(var In=0,nr=Ot;In<Jt;++In){var Jn=qt[In];Jn=="m"?qt[In]=nr:nr=Jn}for(var fr=0,ar=Ot;fr<Jt;++fr){var Tr=qt[fr];Tr=="1"&&ar=="r"?qt[fr]="n":Z.test(Tr)&&(ar=Tr,Tr=="r"&&(qt[fr]="R"))}for(var ri=1,Or=qt[0];ri<Jt-1;++ri){var to=qt[ri];to=="+"&&Or=="1"&&qt[ri+1]=="1"?qt[ri]="1":to==","&&Or==qt[ri+1]&&(Or=="1"||Or=="n")&&(qt[ri]=Or),Or=to}for(var ci=0;ci<Jt;++ci){var Qs=qt[ci];if(Qs==",")qt[ci]="N";else if(Qs=="%"){var Ys=void 0;for(Ys=ci+1;Ys<Jt&&qt[Ys]=="%";++Ys);for(var qs=ci&&qt[ci-1]=="!"||Ys<Jt&&qt[Ys]=="1"?"1":"N",da=ci;da<Ys;++da)qt[da]=qs;ci=Ys-1}}for(var ta=0,lA=Ot;ta<Jt;++ta){var za=qt[ta];lA=="L"&&za=="1"?qt[ta]="L":Z.test(za)&&(lA=za)}for(var na=0;na<Jt;++na)if(F.test(qt[na])){var Jo=void 0;for(Jo=na+1;Jo<Jt&&F.test(qt[Jo]);++Jo);for(var hi=(na?qt[na-1]:Ot)=="L",Yo=(Jo<Jt?qt[Jo]:Ot)=="L",Ss=hi==Yo?hi?"L":"R":Ot,Ks=na;Ks<Jo;++Ks)qt[Ks]=Ss;na=Jo-1}for(var Ts=[],RA,ao=0;ao<Jt;)if(de.test(qt[ao])){var Ud=ao;for(++ao;ao<Jt&&de.test(qt[ao]);++ao);Ts.push(new Re(0,Ud,ao))}else{var AA=ao,iu=Ts.length,pc=yt=="rtl"?1:0;for(++ao;ao<Jt&&qt[ao]!="L";++ao);for(var el=AA;el<ao;)if(_e.test(qt[el])){AA<el&&(Ts.splice(iu,0,new Re(1,AA,el)),iu+=pc);var ml=el;for(++el;el<ao&&_e.test(qt[el]);++el);Ts.splice(iu,0,new Re(2,ml,el)),iu+=pc,AA=el}else++el;AA<ao&&Ts.splice(iu,0,new Re(1,AA,ao))}return yt=="ltr"&&(Ts[0].level==1&&(RA=Ue.match(/^\s+/))&&(Ts[0].from=RA[0].length,Ts.unshift(new Re(0,0,RA[0].length))),Un(Ts).level==1&&(RA=Ue.match(/\s+$/))&&(Un(Ts).to-=RA[0].length,Ts.push(new Re(0,Jt-RA[0].length,Jt)))),yt=="rtl"?Ts.reverse():Ts}}();function Ze(h,y){var E=h.order;return E==null&&(E=h.order=De(h.text,y)),E}var m=[],mt=function(h,y,E){if(h.addEventListener)h.addEventListener(y,E,!1);else if(h.attachEvent)h.attachEvent("on"+y,E);else{var S=h._handlers||(h._handlers={});S[y]=(S[y]||m).concat(E)}};function At(h,y){return h._handlers&&h._handlers[y]||m}function It(h,y,E){if(h.removeEventListener)h.removeEventListener(y,E,!1);else if(h.detachEvent)h.detachEvent("on"+y,E);else{var S=h._handlers,F=S&&S[y];if(F){var Z=Qe(F,E);Z>-1&&(S[y]=F.slice(0,Z).concat(F.slice(Z+1)))}}}function nt(h,y){var E=At(h,y);if(E.length)for(var S=Array.prototype.slice.call(arguments,2),F=0;F<E.length;++F)E[F].apply(null,S)}function en(h,y,E){return typeof y=="string"&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),nt(h,E||y.type,h,y),$r(y)||y.codemirrorIgnore}function Tn(h){var y=h._handlers&&h._handlers.cursorActivity;if(y)for(var E=h.curOp.cursorActivityHandlers||(h.curOp.cursorActivityHandlers=[]),S=0;S<y.length;++S)Qe(E,y[S])==-1&&E.push(y[S])}function xn(h,y){return At(h,y).length>0}function er(h){h.prototype.on=function(y,E){mt(this,y,E)},h.prototype.off=function(y,E){It(this,y,E)}}function Qn(h){h.preventDefault?h.preventDefault():h.returnValue=!1}function Qr(h){h.stopPropagation?h.stopPropagation():h.cancelBubble=!0}function $r(h){return h.defaultPrevented!=null?h.defaultPrevented:h.returnValue==!1}function Br(h){Qn(h),Qr(h)}function br(h){return h.target||h.srcElement}function or(h){var y=h.which;return y==null&&(h.button&1?y=1:h.button&2?y=3:h.button&4&&(y=2)),H&&h.ctrlKey&&y==1&&(y=3),y}var ti=function(){if(f&&C<9)return!1;var h=be("div");return"draggable"in h||"dragDrop"in h}(),bn;function Vi(h){if(bn==null){var y=be("span","");We(h,be("span",[y,document.createTextNode("x")])),h.firstChild.offsetHeight!=0&&(bn=y.offsetWidth<=1&&y.offsetHeight>2&&!(f&&C<8))}var E=bn?be("span",""):be("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var zr;function $o(h){if(zr!=null)return zr;var y=We(h,document.createTextNode("AA")),E=Ct(y,0,1).getBoundingClientRect(),S=Ct(y,1,2).getBoundingClientRect();return xe(h),!E||E.left==E.right?!1:zr=S.right-E.right<3}var is=`

b`.split(/\n/).length!=3?function(h){for(var y=0,E=[],S=h.length;y<=S;){var F=h.indexOf(`
`,y);F==-1&&(F=h.length);var Z=h.slice(y,h.charAt(F-1)=="\r"?F-1:F),de=Z.indexOf("\r");de!=-1?(E.push(Z.slice(0,de)),y+=de+1):(E.push(Z),y=F+1)}return E}:function(h){return h.split(/\r\n?|\n/)},Zn=window.getSelection?function(h){try{return h.selectionStart!=h.selectionEnd}catch{return!1}}:function(h){var y;try{y=h.ownerDocument.selection.createRange()}catch{}return!y||y.parentElement()!=h?!1:y.compareEndPoints("StartToEnd",y)!=0},_i=function(){var h=be("div");return"oncopy"in h?!0:(h.setAttribute("oncopy","return;"),typeof h.oncopy=="function")}(),Kr=null;function ki(h){if(Kr!=null)return Kr;var y=We(h,be("span","x")),E=y.getBoundingClientRect(),S=Ct(y,0,1).getBoundingClientRect();return Kr=Math.abs(E.left-S.left)>1}var oa={},os={};function Gr(h,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),oa[h]=y}function qa(h,y){os[h]=y}function sa(h){if(typeof h=="string"&&os.hasOwnProperty(h))h=os[h];else if(h&&typeof h.name=="string"&&os.hasOwnProperty(h.name)){var y=os[h.name];typeof y=="string"&&(y={name:y}),h=Mr(y,h),h.name=y.name}else{if(typeof h=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(h))return sa("application/xml");if(typeof h=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(h))return sa("application/json")}return typeof h=="string"?{name:h}:h||{name:"null"}}function jo(h,y){y=sa(y);var E=oa[y.name];if(!E)return jo(h,"text/plain");var S=E(h,y);if(Ds.hasOwnProperty(y.name)){var F=Ds[y.name];for(var Z in F)F.hasOwnProperty(Z)&&(S.hasOwnProperty(Z)&&(S["_"+Z]=S[Z]),S[Z]=F[Z])}if(S.name=y.name,y.helperType&&(S.helperType=y.helperType),y.modeProps)for(var de in y.modeProps)S[de]=y.modeProps[de];return S}var Ds={};function yl(h,y){var E=Ds.hasOwnProperty(h)?Ds[h]:Ds[h]={};Le(y,E)}function si(h,y){if(y===!0)return y;if(h.copyState)return h.copyState(y);var E={};for(var S in y){var F=y[S];F instanceof Array&&(F=F.concat([])),E[S]=F}return E}function vA(h,y){for(var E;h.innerMode&&(E=h.innerMode(y),!(!E||E.mode==h));)y=E.state,h=E.mode;return E||{mode:h,state:y}}function Bs(h,y,E){return h.startState?h.startState(y,E):!0}var Hr=function(h,y,E){this.pos=this.start=0,this.string=h,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};Hr.prototype.eol=function(){return this.pos>=this.string.length},Hr.prototype.sol=function(){return this.pos==this.lineStart},Hr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Hr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Hr.prototype.eat=function(h){var y=this.string.charAt(this.pos),E;if(typeof h=="string"?E=y==h:E=y&&(h.test?h.test(y):h(y)),E)return++this.pos,y},Hr.prototype.eatWhile=function(h){for(var y=this.pos;this.eat(h););return this.pos>y},Hr.prototype.eatSpace=function(){for(var h=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>h},Hr.prototype.skipToEnd=function(){this.pos=this.string.length},Hr.prototype.skipTo=function(h){var y=this.string.indexOf(h,this.pos);if(y>-1)return this.pos=y,!0},Hr.prototype.backUp=function(h){this.pos-=h},Hr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},Hr.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},Hr.prototype.match=function(h,y,E){if(typeof h=="string"){var S=function(de){return E?de.toLowerCase():de},F=this.string.substr(this.pos,h.length);if(S(F)==S(h))return y!==!1&&(this.pos+=h.length),!0}else{var Z=this.string.slice(this.pos).match(h);return Z&&Z.index>0?null:(Z&&y!==!1&&(this.pos+=Z[0].length),Z)}},Hr.prototype.current=function(){return this.string.slice(this.start,this.pos)},Hr.prototype.hideFirstChars=function(h,y){this.lineStart+=h;try{return y()}finally{this.lineStart-=h}},Hr.prototype.lookAhead=function(h){var y=this.lineOracle;return y&&y.lookAhead(h)},Hr.prototype.baseToken=function(){var h=this.lineOracle;return h&&h.baseToken(this.pos)};function Sr(h,y){if(y-=h.first,y<0||y>=h.size)throw new Error("There is no line "+(y+h.first)+" in the document.");for(var E=h;!E.lines;)for(var S=0;;++S){var F=E.children[S],Z=F.chunkSize();if(y<Z){E=F;break}y-=Z}return E.lines[y]}function aa(h,y,E){var S=[],F=y.line;return h.iter(y.line,E.line+1,function(Z){var de=Z.text;F==E.line&&(de=de.slice(0,E.ch)),F==y.line&&(de=de.slice(y.ch)),S.push(de),++F}),S}function vs(h,y,E){var S=[];return h.iter(y,E,function(F){S.push(F.text)}),S}function ss(h,y){var E=y-h.height;if(E)for(var S=h;S;S=S.parent)S.height+=E}function Ye(h){if(h.parent==null)return null;for(var y=h.parent,E=Qe(y.lines,h),S=y.parent;S;y=S,S=S.parent)for(var F=0;S.children[F]!=y;++F)E+=S.children[F].chunkSize();return E+y.first}function Et(h,y){var E=h.first;e:do{for(var S=0;S<h.children.length;++S){var F=h.children[S],Z=F.height;if(y<Z){h=F;continue e}y-=Z,E+=F.chunkSize()}return E}while(!h.lines);for(var de=0;de<h.lines.length;++de){var _e=h.lines[de],Re=_e.height;if(y<Re)break;y-=Re}return E+de}function gn(h,y){return y>=h.first&&y<h.first+h.size}function Nn(h,y){return String(h.lineNumberFormatter(y+h.firstLineNumber))}function cn(h,y,E){if(E===void 0&&(E=null),!(this instanceof cn))return new cn(h,y,E);this.line=h,this.ch=y,this.sticky=E}function sr(h,y){return h.line-y.line||h.ch-y.ch}function ji(h,y){return h.sticky==y.sticky&&sr(h,y)==0}function wo(h){return cn(h.line,h.ch)}function xs(h,y){return sr(h,y)<0?y:h}function va(h,y){return sr(h,y)<0?h:y}function CA(h,y){return Math.max(h.first,Math.min(y,h.first+h.size-1))}function Ci(h,y){if(y.line<h.first)return cn(h.first,0);var E=h.first+h.size-1;return y.line>E?cn(E,Sr(h,E).text.length):cu(y,Sr(h,y.line).text.length)}function cu(h,y){var E=h.ch;return E==null||E>y?cn(h.line,y):E<0?cn(h.line,0):h}function Hl(h,y){for(var E=[],S=0;S<y.length;S++)E[S]=Ci(h,y[S]);return E}var $a=function(h,y){this.state=h,this.lookAhead=y},Ca=function(h,y,E,S){this.state=y,this.doc=h,this.line=E,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};Ca.prototype.lookAhead=function(h){var y=this.doc.getLine(this.line+h);return y!=null&&h>this.maxLookAhead&&(this.maxLookAhead=h),y},Ca.prototype.baseToken=function(h){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=h;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-h}},Ca.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ca.fromSaved=function(h,y,E){return y instanceof $a?new Ca(h,si(h.mode,y.state),E,y.lookAhead):new Ca(h,si(h.mode,y),E)},Ca.prototype.save=function(h){var y=h!==!1?si(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new $a(y,this.maxLookAhead):y};function wc(h,y,E,S){var F=[h.state.modeGen],Z={};Bi(h,y.text,h.doc.mode,E,function(Ue,yt){return F.push(Ue,yt)},Z,S);for(var de=E.state,_e=function(Ue){E.baseTokens=F;var yt=h.state.overlays[Ue],Ot=1,Jt=0;E.state=!0,Bi(h,y.text,yt.mode,E,function(qt,_n){for(var In=Ot;Jt<qt;){var nr=F[Ot];nr>qt&&F.splice(Ot,1,qt,F[Ot+1],nr),Ot+=2,Jt=Math.min(qt,nr)}if(_n)if(yt.opaque)F.splice(In,Ot-In,qt,"overlay "+_n),Ot=In+2;else for(;In<Ot;In+=2){var Jn=F[In+1];F[In+1]=(Jn?Jn+" ":"")+"overlay "+_n}},Z),E.state=de,E.baseTokens=null,E.baseTokenPos=1},Re=0;Re<h.state.overlays.length;++Re)_e(Re);return{styles:F,classes:Z.bgClass||Z.textClass?Z:null}}function _a(h,y,E){if(!y.styles||y.styles[0]!=h.state.modeGen){var S=gi(h,Ye(y)),F=y.text.length>h.options.maxHighlightLength&&si(h.doc.mode,S.state),Z=wc(h,y,S);F&&(S.state=F),y.stateAfter=S.save(!F),y.styles=Z.styles,Z.classes?y.styleClasses=Z.classes:y.styleClasses&&(y.styleClasses=null),E===h.doc.highlightFrontier&&(h.doc.modeFrontier=Math.max(h.doc.modeFrontier,++h.doc.highlightFrontier))}return y.styles}function gi(h,y,E){var S=h.doc,F=h.display;if(!S.mode.startState)return new Ca(S,!0,y);var Z=vl(h,y,E),de=Z>S.first&&Sr(S,Z-1).stateAfter,_e=de?Ca.fromSaved(S,de,Z):new Ca(S,Bs(S.mode),Z);return S.iter(Z,y,function(Re){So(h,Re.text,_e);var Ue=_e.line;Re.stateAfter=Ue==y-1||Ue%5==0||Ue>=F.viewFrom&&Ue<F.viewTo?_e.save():null,_e.nextLine()}),E&&(S.modeFrontier=_e.line),_e}function So(h,y,E,S){var F=h.doc.mode,Z=new Hr(y,h.options.tabSize,E);for(Z.start=Z.pos=S||0,y==""&&yi(F,E.state);!Z.eol();)ol(F,Z,E.state),Z.start=Z.pos}function yi(h,y){if(h.blankLine)return h.blankLine(y);if(h.innerMode){var E=vA(h,y);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function ol(h,y,E,S){for(var F=0;F<10;F++){S&&(S[0]=vA(h,E).mode);var Z=h.token(y,E);if(y.pos>y.start)return Z}throw new Error("Mode "+h.name+" failed to advance stream.")}var cs=function(h,y,E){this.start=h.start,this.end=h.pos,this.string=h.current(),this.type=y||null,this.state=E};function sl(h,y,E,S){var F=h.doc,Z=F.mode,de;y=Ci(F,y);var _e=Sr(F,y.line),Re=gi(h,y.line,E),Ue=new Hr(_e.text,h.options.tabSize,Re),yt;for(S&&(yt=[]);(S||Ue.pos<y.ch)&&!Ue.eol();)Ue.start=Ue.pos,de=ol(Z,Ue,Re.state),S&&yt.push(new cs(Ue,de,si(F.mode,Re.state)));return S?yt:new cs(Ue,de,Re.state)}function Fl(h,y){if(h)for(;;){var E=h.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;h=h.slice(0,E.index)+h.slice(E.index+E[0].length);var S=E[1]?"bgClass":"textClass";y[S]==null?y[S]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(y[S])||(y[S]+=" "+E[2])}return h}function Bi(h,y,E,S,F,Z,de){var _e=E.flattenSpans;_e==null&&(_e=h.options.flattenSpans);var Re=0,Ue=null,yt=new Hr(y,h.options.tabSize,S),Ot,Jt=h.options.addModeClass&&[null];for(y==""&&Fl(yi(E,S.state),Z);!yt.eol();){if(yt.pos>h.options.maxHighlightLength?(_e=!1,de&&So(h,y,S,yt.pos),yt.pos=y.length,Ot=null):Ot=Fl(ol(E,yt,S.state,Jt),Z),Jt){var qt=Jt[0].name;qt&&(Ot="m-"+(Ot?qt+" "+Ot:qt))}if(!_e||Ue!=Ot){for(;Re<yt.start;)Re=Math.min(yt.start,Re+5e3),F(Re,Ue);Ue=Ot}yt.start=yt.pos}for(;Re<yt.pos;){var _n=Math.min(yt.pos,Re+5e3);F(_n,Ue),Re=_n}}function vl(h,y,E){for(var S,F,Z=h.doc,de=E?-1:y-(h.doc.mode.innerMode?1e3:100),_e=y;_e>de;--_e){if(_e<=Z.first)return Z.first;var Re=Sr(Z,_e-1),Ue=Re.stateAfter;if(Ue&&(!E||_e+(Ue instanceof $a?Ue.lookAhead:0)<=Z.modeFrontier))return _e;var yt=Pe(Re.text,null,h.options.tabSize);(F==null||S>yt)&&(F=_e-1,S=yt)}return F}function al(h,y){if(h.modeFrontier=Math.min(h.modeFrontier,y),!(h.highlightFrontier<y-10)){for(var E=h.first,S=y-1;S>E;S--){var F=Sr(h,S).stateAfter;if(F&&(!(F instanceof $a)||S+F.lookAhead<y)){E=S+1;break}}h.highlightFrontier=Math.min(h.highlightFrontier,E)}}var Eo=!1,go=!1;function hs(){Eo=!0}function as(){go=!0}function yo(h,y,E){this.marker=h,this.from=y,this.to=E}function Xi(h,y){if(h)for(var E=0;E<h.length;++E){var S=h[E];if(S.marker==y)return S}}function Sc(h,y){for(var E,S=0;S<h.length;++S)h[S]!=y&&(E||(E=[])).push(h[S]);return E}function Cs(h,y,E){var S=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));S&&h.markedSpans&&S.has(h.markedSpans)?h.markedSpans.push(y):(h.markedSpans=h.markedSpans?h.markedSpans.concat([y]):[y],S&&S.add(h.markedSpans)),y.marker.attachLine(h)}function ba(h,y,E){var S;if(h)for(var F=0;F<h.length;++F){var Z=h[F],de=Z.marker,_e=Z.from==null||(de.inclusiveLeft?Z.from<=y:Z.from<y);if(_e||Z.from==y&&de.type=="bookmark"&&(!E||!Z.marker.insertLeft)){var Re=Z.to==null||(de.inclusiveRight?Z.to>=y:Z.to>y);(S||(S=[])).push(new yo(de,Z.from,Re?null:Z.to))}}return S}function Ns(h,y,E){var S;if(h)for(var F=0;F<h.length;++F){var Z=h[F],de=Z.marker,_e=Z.to==null||(de.inclusiveRight?Z.to>=y:Z.to>y);if(_e||Z.from==y&&de.type=="bookmark"&&(!E||Z.marker.insertLeft)){var Re=Z.from==null||(de.inclusiveLeft?Z.from<=y:Z.from<y);(S||(S=[])).push(new yo(de,Re?null:Z.from-y,Z.to==null?null:Z.to-y))}}return S}function Ri(h,y){if(y.full)return null;var E=gn(h,y.from.line)&&Sr(h,y.from.line).markedSpans,S=gn(h,y.to.line)&&Sr(h,y.to.line).markedSpans;if(!E&&!S)return null;var F=y.from.ch,Z=y.to.ch,de=sr(y.from,y.to)==0,_e=ba(E,F,de),Re=Ns(S,Z,de),Ue=y.text.length==1,yt=Un(y.text).length+(Ue?F:0);if(_e)for(var Ot=0;Ot<_e.length;++Ot){var Jt=_e[Ot];if(Jt.to==null){var qt=Xi(Re,Jt.marker);qt?Ue&&(Jt.to=qt.to==null?null:qt.to+yt):Jt.to=F}}if(Re)for(var _n=0;_n<Re.length;++_n){var In=Re[_n];if(In.to!=null&&(In.to+=yt),In.from==null){var nr=Xi(_e,In.marker);nr||(In.from=yt,Ue&&(_e||(_e=[])).push(In))}else In.from+=yt,Ue&&(_e||(_e=[])).push(In)}_e&&(_e=Cl(_e)),Re&&Re!=_e&&(Re=Cl(Re));var Jn=[_e];if(!Ue){var fr=y.text.length-2,ar;if(fr>0&&_e)for(var Tr=0;Tr<_e.length;++Tr)_e[Tr].to==null&&(ar||(ar=[])).push(new yo(_e[Tr].marker,null,null));for(var ri=0;ri<fr;++ri)Jn.push(ar);Jn.push(Re)}return Jn}function Cl(h){for(var y=0;y<h.length;++y){var E=h[y];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&h.splice(y--,1)}return h.length?h:null}function Zr(h,y,E){var S=null;if(h.iter(y.line,E.line+1,function(qt){if(qt.markedSpans)for(var _n=0;_n<qt.markedSpans.length;++_n){var In=qt.markedSpans[_n].marker;In.readOnly&&(!S||Qe(S,In)==-1)&&(S||(S=[])).push(In)}}),!S)return null;for(var F=[{from:y,to:E}],Z=0;Z<S.length;++Z)for(var de=S[Z],_e=de.find(0),Re=0;Re<F.length;++Re){var Ue=F[Re];if(!(sr(Ue.to,_e.from)<0||sr(Ue.from,_e.to)>0)){var yt=[Re,1],Ot=sr(Ue.from,_e.from),Jt=sr(Ue.to,_e.to);(Ot<0||!de.inclusiveLeft&&!Ot)&&yt.push({from:Ue.from,to:_e.from}),(Jt>0||!de.inclusiveRight&&!Jt)&&yt.push({from:_e.to,to:Ue.to}),F.splice.apply(F,yt),Re+=yt.length-3}}return F}function Cr(h){var y=h.markedSpans;if(y){for(var E=0;E<y.length;++E)y[E].marker.detachLine(h);h.markedSpans=null}}function Wi(h,y){if(y){for(var E=0;E<y.length;++E)y[E].marker.attachLine(h);h.markedSpans=y}}function ee(h){return h.inclusiveLeft?-1:0}function Ie(h){return h.inclusiveRight?1:0}function st(h,y){var E=h.lines.length-y.lines.length;if(E!=0)return E;var S=h.find(),F=y.find(),Z=sr(S.from,F.from)||ee(h)-ee(y);if(Z)return-Z;var de=sr(S.to,F.to)||Ie(h)-Ie(y);return de||y.id-h.id}function Yt(h,y){var E=go&&h.markedSpans,S;if(E)for(var F=void 0,Z=0;Z<E.length;++Z)F=E[Z],F.marker.collapsed&&(y?F.from:F.to)==null&&(!S||st(S,F.marker)<0)&&(S=F.marker);return S}function wr(h){return Yt(h,!0)}function zn(h){return Yt(h,!1)}function qr(h,y){var E=go&&h.markedSpans,S;if(E)for(var F=0;F<E.length;++F){var Z=E[F];Z.marker.collapsed&&(Z.from==null||Z.from<y)&&(Z.to==null||Z.to>y)&&(!S||st(S,Z.marker)<0)&&(S=Z.marker)}return S}function ai(h,y,E,S,F){var Z=Sr(h,y),de=go&&Z.markedSpans;if(de)for(var _e=0;_e<de.length;++_e){var Re=de[_e];if(Re.marker.collapsed){var Ue=Re.marker.find(0),yt=sr(Ue.from,E)||ee(Re.marker)-ee(F),Ot=sr(Ue.to,S)||Ie(Re.marker)-Ie(F);if(!(yt>=0&&Ot<=0||yt<=0&&Ot>=0)&&(yt<=0&&(Re.marker.inclusiveRight&&F.inclusiveLeft?sr(Ue.to,E)>=0:sr(Ue.to,E)>0)||yt>=0&&(Re.marker.inclusiveRight&&F.inclusiveLeft?sr(Ue.from,S)<=0:sr(Ue.from,S)<0)))return!0}}}function Er(h){for(var y;y=wr(h);)h=y.find(-1,!0).line;return h}function Xr(h){for(var y;y=zn(h);)h=y.find(1,!0).line;return h}function Hi(h){for(var y,E;y=zn(h);)h=y.find(1,!0).line,(E||(E=[])).push(h);return E}function Ji(h,y){var E=Sr(h,y),S=Er(E);return E==S?y:Ye(S)}function ni(h,y){if(y>h.lastLine())return y;var E=Sr(h,y),S;if(!di(h,E))return y;for(;S=zn(E);)E=S.find(1,!0).line;return Ye(E)+1}function di(h,y){var E=go&&y.markedSpans;if(E){for(var S=void 0,F=0;F<E.length;++F)if(S=E[F],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&lo(h,y,S))return!0}}}function lo(h,y,E){if(E.to==null){var S=E.marker.find(1,!0);return lo(h,S.line,Xi(S.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==y.text.length)return!0;for(var F=void 0,Z=0;Z<y.markedSpans.length;++Z)if(F=y.markedSpans[Z],F.marker.collapsed&&!F.marker.widgetNode&&F.from==E.to&&(F.to==null||F.to!=E.from)&&(F.marker.inclusiveLeft||E.marker.inclusiveRight)&&lo(h,y,F))return!0}function zi(h){h=Er(h);for(var y=0,E=h.parent,S=0;S<E.lines.length;++S){var F=E.lines[S];if(F==h)break;y+=F.height}for(var Z=E.parent;Z;E=Z,Z=E.parent)for(var de=0;de<Z.children.length;++de){var _e=Z.children[de];if(_e==E)break;y+=_e.height}return y}function Oi(h){if(h.height==0)return 0;for(var y=h.text.length,E,S=h;E=wr(S);){var F=E.find(0,!0);S=F.from.line,y+=F.from.ch-F.to.ch}for(S=h;E=zn(S);){var Z=E.find(0,!0);y-=S.text.length-Z.from.ch,S=Z.to.line,y+=S.text.length-Z.to.ch}return y}function la(h){var y=h.display,E=h.doc;y.maxLine=Sr(E,E.first),y.maxLineLength=Oi(y.maxLine),y.maxLineChanged=!0,E.iter(function(S){var F=Oi(S);F>y.maxLineLength&&(y.maxLineLength=F,y.maxLine=S)})}var Ea=function(h,y,E){this.text=h,Wi(this,y),this.height=E?E(this):1};Ea.prototype.lineNo=function(){return Ye(this)},er(Ea);function _A(h,y,E,S){h.text=y,h.stateAfter&&(h.stateAfter=null),h.styles&&(h.styles=null),h.order!=null&&(h.order=null),Cr(h),Wi(h,E);var F=S?S(h):1;F!=h.height&&ss(h,F)}function Gs(h){h.parent=null,Cr(h)}var $c={},Vo={};function Ec(h,y){if(!h||/^\s*$/.test(h))return null;var E=y.addModeClass?Vo:$c;return E[h]||(E[h]=h.replace(/\S+/g,"cm-$&"))}function jA(h,y){var E=rt("span",null,null,M?"padding-right: .1px":null),S={pre:rt("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:h,trailingSpace:!1,splitSpaces:h.getOption("lineWrapping")};y.measure={};for(var F=0;F<=(y.rest?y.rest.length:0);F++){var Z=F?y.rest[F-1]:y.line,de=void 0;S.pos=0,S.addToken=Vc,$o(h.display.measure)&&(de=Ze(Z,h.doc.direction))&&(S.addToken=so(S.addToken,de)),S.map=[];var _e=y!=h.display.externalMeasured&&Ye(Z);td(Z,S,_a(h,Z,_e)),Z.styleClasses&&(Z.styleClasses.bgClass&&(S.bgClass=Te(Z.styleClasses.bgClass,S.bgClass||"")),Z.styleClasses.textClass&&(S.textClass=Te(Z.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(Vi(h.display.measure))),F==0?(y.measure.map=S.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(S.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(M){var Re=S.content.lastChild;(/\bcm-tab\b/.test(Re.className)||Re.querySelector&&Re.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return nt(h,"renderLine",h,y.line,S.pre),S.pre.className&&(S.textClass=Te(S.pre.className,S.textClass||"")),S}function hu(h){var y=be("span","","cm-invalidchar");return y.title="\\u"+h.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function Vc(h,y,E,S,F,Z,de){if(y){var _e=h.splitSpaces?Mh(y,h.trailingSpace):y,Re=h.cm.state.specialChars,Ue=!1,yt;if(!Re.test(y))h.col+=y.length,yt=document.createTextNode(_e),h.map.push(h.pos,h.pos+y.length,yt),f&&C<9&&(Ue=!0),h.pos+=y.length;else{yt=document.createDocumentFragment();for(var Ot=0;;){Re.lastIndex=Ot;var Jt=Re.exec(y),qt=Jt?Jt.index-Ot:y.length-Ot;if(qt){var _n=document.createTextNode(_e.slice(Ot,Ot+qt));f&&C<9?yt.appendChild(be("span",[_n])):yt.appendChild(_n),h.map.push(h.pos,h.pos+qt,_n),h.col+=qt,h.pos+=qt}if(!Jt)break;Ot+=qt+1;var In=void 0;if(Jt[0]=="	"){var nr=h.cm.options.tabSize,Jn=nr-h.col%nr;In=yt.appendChild(be("span",jt(Jn),"cm-tab")),In.setAttribute("role","presentation"),In.setAttribute("cm-text","	"),h.col+=Jn}else Jt[0]=="\r"||Jt[0]==`
`?(In=yt.appendChild(be("span",Jt[0]=="\r"?"":"","cm-invalidchar")),In.setAttribute("cm-text",Jt[0]),h.col+=1):(In=h.cm.options.specialCharPlaceholder(Jt[0]),In.setAttribute("cm-text",Jt[0]),f&&C<9?yt.appendChild(be("span",[In])):yt.appendChild(In),h.col+=1);h.map.push(h.pos,h.pos+1,In),h.pos++}}if(h.trailingSpace=_e.charCodeAt(y.length-1)==32,E||S||F||Ue||Z||de){var fr=E||"";S&&(fr+=S),F&&(fr+=F);var ar=be("span",[yt],fr,Z);if(de)for(var Tr in de)de.hasOwnProperty(Tr)&&Tr!="style"&&Tr!="class"&&ar.setAttribute(Tr,de[Tr]);return h.content.appendChild(ar)}h.content.appendChild(yt)}}function Mh(h,y){if(h.length>1&&!/  /.test(h))return h;for(var E=y,S="",F=0;F<h.length;F++){var Z=h.charAt(F);Z==" "&&E&&(F==h.length-1||h.charCodeAt(F+1)==32)&&(Z=""),S+=Z,E=Z==" "}return S}function so(h,y){return function(E,S,F,Z,de,_e,Re){F=F?F+" cm-force-border":"cm-force-border";for(var Ue=E.pos,yt=Ue+S.length;;){for(var Ot=void 0,Jt=0;Jt<y.length&&(Ot=y[Jt],!(Ot.to>Ue&&Ot.from<=Ue));Jt++);if(Ot.to>=yt)return h(E,S,F,Z,de,_e,Re);h(E,S.slice(0,Ot.to-Ue),F,Z,null,_e,Re),Z=null,S=S.slice(Ot.to-Ue),Ue=Ot.to}}}function ec(h,y,E,S){var F=!S&&E.widgetNode;F&&h.map.push(h.pos,h.pos+y,F),!S&&h.cm.display.input.needsContentAttribute&&(F||(F=h.content.appendChild(document.createElement("span"))),F.setAttribute("cm-marker",E.id)),F&&(h.cm.display.input.setUneditable(F),h.content.appendChild(F)),h.pos+=y,h.trailingSpace=!1}function td(h,y,E){var S=h.markedSpans,F=h.text,Z=0;if(!S){for(var de=1;de<E.length;de+=2)y.addToken(y,F.slice(Z,Z=E[de]),Ec(E[de+1],y.cm.options));return}for(var _e=F.length,Re=0,Ue=1,yt="",Ot,Jt,qt=0,_n,In,nr,Jn,fr;;){if(qt==Re){_n=In=nr=Jt="",fr=null,Jn=null,qt=1/0;for(var ar=[],Tr=void 0,ri=0;ri<S.length;++ri){var Or=S[ri],to=Or.marker;if(to.type=="bookmark"&&Or.from==Re&&to.widgetNode)ar.push(to);else if(Or.from<=Re&&(Or.to==null||Or.to>Re||to.collapsed&&Or.to==Re&&Or.from==Re)){if(Or.to!=null&&Or.to!=Re&&qt>Or.to&&(qt=Or.to,In=""),to.className&&(_n+=" "+to.className),to.css&&(Jt=(Jt?Jt+";":"")+to.css),to.startStyle&&Or.from==Re&&(nr+=" "+to.startStyle),to.endStyle&&Or.to==qt&&(Tr||(Tr=[])).push(to.endStyle,Or.to),to.title&&((fr||(fr={})).title=to.title),to.attributes)for(var ci in to.attributes)(fr||(fr={}))[ci]=to.attributes[ci];to.collapsed&&(!Jn||st(Jn.marker,to)<0)&&(Jn=Or)}else Or.from>Re&&qt>Or.from&&(qt=Or.from)}if(Tr)for(var Qs=0;Qs<Tr.length;Qs+=2)Tr[Qs+1]==qt&&(In+=" "+Tr[Qs]);if(!Jn||Jn.from==Re)for(var Ys=0;Ys<ar.length;++Ys)ec(y,0,ar[Ys]);if(Jn&&(Jn.from||0)==Re){if(ec(y,(Jn.to==null?_e+1:Jn.to)-Re,Jn.marker,Jn.from==null),Jn.to==null)return;Jn.to==Re&&(Jn=!1)}}if(Re>=_e)break;for(var qs=Math.min(_e,qt);;){if(yt){var da=Re+yt.length;if(!Jn){var ta=da>qs?yt.slice(0,qs-Re):yt;y.addToken(y,ta,Ot?Ot+_n:_n,nr,Re+ta.length==qt?In:"",Jt,fr)}if(da>=qs){yt=yt.slice(qs-Re),Re=qs;break}Re=da,nr=""}yt=F.slice(Z,Z=E[Ue++]),Ot=Ec(E[Ue++],y.cm.options)}}}function zp(h,y,E){this.line=y,this.rest=Hi(y),this.size=this.rest?Ye(Un(this.rest))-E+1:1,this.node=this.text=null,this.hidden=di(h,y)}function Hc(h,y,E){for(var S=[],F,Z=y;Z<E;Z=F){var de=new zp(h.doc,Sr(h.doc,Z),Z);F=Z+de.size,S.push(de)}return S}var nd=null;function Np(h){nd?nd.ops.push(h):h.ownsGroup=nd={ops:[h],delayedCallbacks:[]}}function Af(h){var y=h.delayedCallbacks,E=0;do{for(;E<y.length;E++)y[E].call(null);for(var S=0;S<h.ops.length;S++){var F=h.ops[S];if(F.cursorActivityHandlers)for(;F.cursorActivityCalled<F.cursorActivityHandlers.length;)F.cursorActivityHandlers[F.cursorActivityCalled++].call(null,F.cm)}}while(E<y.length)}function uf(h,y){var E=h.ownsGroup;if(E)try{Af(E)}finally{nd=null,y(E)}}var bA=null;function Fs(h,y){var E=At(h,y);if(E.length){var S=Array.prototype.slice.call(arguments,2),F;nd?F=nd.delayedCallbacks:bA?F=bA:(F=bA=[],setTimeout(rd,0));for(var Z=function(_e){F.push(function(){return E[_e].apply(null,S)})},de=0;de<E.length;++de)Z(de)}}function rd(){var h=bA;bA=null;for(var y=0;y<h.length;++y)h[y]()}function WA(h,y,E,S){for(var F=0;F<y.changes.length;F++){var Z=y.changes[F];Z=="text"?sd(h,y):Z=="gutter"?wh(h,y,E,S):Z=="class"?Qf(h,y):Z=="widget"&&Yf(h,y,S)}y.changes=null}function id(h){return h.node==h.text&&(h.node=be("div",null,null,"position: relative"),h.text.parentNode&&h.text.parentNode.replaceChild(h.node,h.text),h.node.appendChild(h.text),f&&C<8&&(h.node.style.zIndex=2)),h.node}function od(h,y){var E=y.bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),y.background)E?y.background.className=E:(y.background.parentNode.removeChild(y.background),y.background=null);else if(E){var S=id(y);y.background=S.insertBefore(be("div",null,E),S.firstChild),h.display.input.setUneditable(y.background)}}function Bc(h,y){var E=h.display.externalMeasured;return E&&E.line==y.line?(h.display.externalMeasured=null,y.measure=E.measure,E.built):jA(h,y)}function sd(h,y){var E=y.text.className,S=Bc(h,y);y.text==y.node&&(y.node=S.pre),y.text.parentNode.replaceChild(S.pre,y.text),y.text=S.pre,S.bgClass!=y.bgClass||S.textClass!=y.textClass?(y.bgClass=S.bgClass,y.textClass=S.textClass,Qf(h,y)):E&&(y.text.className=E)}function Qf(h,y){od(h,y),y.line.wrapClass?id(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className="");var E=y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass;y.text.className=E||""}function wh(h,y,E,S){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var F=id(y);y.gutterBackground=be("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(h.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),h.display.input.setUneditable(y.gutterBackground),F.insertBefore(y.gutterBackground,y.text)}var Z=y.line.gutterMarkers;if(h.options.lineNumbers||Z){var de=id(y),_e=y.gutter=be("div",null,"CodeMirror-gutter-wrapper","left: "+(h.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(_e.setAttribute("aria-hidden","true"),h.display.input.setUneditable(_e),de.insertBefore(_e,y.text),y.line.gutterClass&&(_e.className+=" "+y.line.gutterClass),h.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(y.lineNumber=_e.appendChild(be("div",Nn(h.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+h.display.lineNumInnerWidth+"px"))),Z)for(var Re=0;Re<h.display.gutterSpecs.length;++Re){var Ue=h.display.gutterSpecs[Re].className,yt=Z.hasOwnProperty(Ue)&&Z[Ue];yt&&_e.appendChild(be("div",[yt],"CodeMirror-gutter-elt","left: "+S.gutterLeft[Ue]+"px; width: "+S.gutterWidth[Ue]+"px"))}}}function Yf(h,y,E){y.alignable&&(y.alignable=null);for(var S=we("CodeMirror-linewidget"),F=y.node.firstChild,Z=void 0;F;F=Z)Z=F.nextSibling,S.test(F.className)&&y.node.removeChild(F);cf(h,y,E)}function Sh(h,y,E,S){var F=Bc(h,y);return y.text=y.node=F.pre,F.bgClass&&(y.bgClass=F.bgClass),F.textClass&&(y.textClass=F.textClass),Qf(h,y),wh(h,y,E,S),cf(h,y,S),y.node}function cf(h,y,E){if(Kl(h,y.line,y,E,!0),y.rest)for(var S=0;S<y.rest.length;S++)Kl(h,y.rest[S],y,E,!1)}function Kl(h,y,E,S,F){if(y.widgets)for(var Z=id(E),de=0,_e=y.widgets;de<_e.length;++de){var Re=_e[de],Ue=be("div",[Re.node],"CodeMirror-linewidget"+(Re.className?" "+Re.className:""));Re.handleMouseEvents||Ue.setAttribute("cm-ignore-events","true"),Od(Re,Ue,E,S),h.display.input.setUneditable(Ue),F&&Re.above?Z.insertBefore(Ue,E.gutter||E.text):Z.appendChild(Ue),Fs(Re,"redraw")}}function Od(h,y,E,S){if(h.noHScroll){(E.alignable||(E.alignable=[])).push(y);var F=S.wrapperWidth;y.style.left=S.fixedPos+"px",h.coverGutter||(F-=S.gutterTotalWidth,y.style.paddingLeft=S.gutterTotalWidth+"px"),y.style.width=F+"px"}h.coverGutter&&(y.style.zIndex=5,y.style.position="relative",h.noHScroll||(y.style.marginLeft=-S.gutterTotalWidth+"px"))}function xA(h){if(h.height!=null)return h.height;var y=h.doc.cm;if(!y)return 0;if(!at(document.body,h.node)){var E="position: relative;";h.coverGutter&&(E+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),h.noHScroll&&(E+="width: "+y.display.wrapper.clientWidth+"px;"),We(y.display.measure,be("div",[h.node],null,E))}return h.height=h.node.parentNode.offsetHeight}function du(h,y){for(var E=br(y);E!=h.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==h.sizer&&E!=h.mover)return!0}function Eh(h){return h.lineSpace.offsetTop}function Bh(h){return h.mover.offsetHeight-h.lineSpace.offsetHeight}function hf(h){if(h.cachedPaddingH)return h.cachedPaddingH;var y=We(h.measure,be("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,S={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(h.cachedPaddingH=S),S}function fu(h){return _t-h.display.nativeBarWidth}function MA(h){return h.display.scroller.clientWidth-fu(h)-h.display.barWidth}function tc(h){return h.display.scroller.clientHeight-fu(h)-h.display.barHeight}function Zc(h,y,E){var S=h.options.lineWrapping,F=S&&MA(h);if(!y.measure.heights||S&&y.measure.width!=F){var Z=y.measure.heights=[];if(S){y.measure.width=F;for(var de=y.text.firstChild.getClientRects(),_e=0;_e<de.length-1;_e++){var Re=de[_e],Ue=de[_e+1];Math.abs(Re.bottom-Ue.bottom)>2&&Z.push((Re.bottom+Ue.top)/2-E.top)}}Z.push(E.bottom-E.top)}}function ad(h,y,E){if(h.line==y)return{map:h.measure.map,cache:h.measure.cache};if(h.rest){for(var S=0;S<h.rest.length;S++)if(h.rest[S]==y)return{map:h.measure.maps[S],cache:h.measure.caches[S]};for(var F=0;F<h.rest.length;F++)if(Ye(h.rest[F])>E)return{map:h.measure.maps[F],cache:h.measure.caches[F],before:!0}}}function vm(h,y){y=Er(y);var E=Ye(y),S=h.display.externalMeasured=new zp(h.doc,y,E);S.lineN=E;var F=S.built=jA(h,S);return S.text=F.pre,We(h.display.lineMeasure,F.pre),S}function Oc(h,y,E,S){return ll(h,_l(h,y),E,S)}function ld(h,y){if(y>=h.display.viewFrom&&y<h.display.viewTo)return h.display.view[YA(h,y)];var E=h.display.externalMeasured;if(E&&y>=E.lineN&&y<E.lineN+E.size)return E}function _l(h,y){var E=Ye(y),S=ld(h,E);S&&!S.text?S=null:S&&S.changes&&(WA(h,S,E,Al(h)),h.curOp.forceUpdate=!0),S||(S=vm(h,y));var F=ad(S,y,E);return{line:y,view:S,rect:null,map:F.map,cache:F.cache,before:F.before,hasHeights:!1}}function ll(h,y,E,S,F){y.before&&(E=-1);var Z=E+(S||""),de;return y.cache.hasOwnProperty(Z)?de=y.cache[Z]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(Zc(h,y.view,y.rect),y.hasHeights=!0),de=Xc(h,y,E,S),de.bogus||(y.cache[Z]=de)),{left:de.left,right:de.right,top:F?de.rtop:de.top,bottom:F?de.rbottom:de.bottom}}var qf={left:0,right:0,top:0,bottom:0};function Oh(h,y,E){for(var S,F,Z,de,_e,Re,Ue=0;Ue<h.length;Ue+=3)if(_e=h[Ue],Re=h[Ue+1],y<_e?(F=0,Z=1,de="left"):y<Re?(F=y-_e,Z=F+1):(Ue==h.length-3||y==Re&&h[Ue+3]>y)&&(Z=Re-_e,F=Z-1,y>=Re&&(de="right")),F!=null){if(S=h[Ue+2],_e==Re&&E==(S.insertLeft?"left":"right")&&(de=E),E=="left"&&F==0)for(;Ue&&h[Ue-2]==h[Ue-3]&&h[Ue-1].insertLeft;)S=h[(Ue-=3)+2],de="left";if(E=="right"&&F==Re-_e)for(;Ue<h.length-3&&h[Ue+3]==h[Ue+4]&&!h[Ue+5].insertLeft;)S=h[(Ue+=3)+2],de="right";break}return{node:S,start:F,end:Z,collapse:de,coverStart:_e,coverEnd:Re}}function $f(h,y){var E=qf;if(y=="left")for(var S=0;S<h.length&&(E=h[S]).left==E.right;S++);else for(var F=h.length-1;F>=0&&(E=h[F]).left==E.right;F--);return E}function Xc(h,y,E,S){var F=Oh(y.map,E,S),Z=F.node,de=F.start,_e=F.end,Re=F.collapse,Ue;if(Z.nodeType==3){for(var yt=0;yt<4;yt++){for(;de&&se(y.line.text.charAt(F.coverStart+de));)--de;for(;F.coverStart+_e<F.coverEnd&&se(y.line.text.charAt(F.coverStart+_e));)++_e;if(f&&C<9&&de==0&&_e==F.coverEnd-F.coverStart?Ue=Z.parentNode.getBoundingClientRect():Ue=$f(Ct(Z,de,_e).getClientRects(),S),Ue.left||Ue.right||de==0)break;_e=de,de=de-1,Re="right"}f&&C<11&&(Ue=Ll(h.display.measure,Ue))}else{de>0&&(Re=S="right");var Ot;h.options.lineWrapping&&(Ot=Z.getClientRects()).length>1?Ue=Ot[S=="right"?Ot.length-1:0]:Ue=Z.getBoundingClientRect()}if(f&&C<9&&!de&&(!Ue||!Ue.left&&!Ue.right)){var Jt=Z.parentNode.getClientRects()[0];Jt?Ue={left:Jt.left,right:Jt.left+Ul(h.display),top:Jt.top,bottom:Jt.bottom}:Ue=qf}for(var qt=Ue.top-y.rect.top,_n=Ue.bottom-y.rect.top,In=(qt+_n)/2,nr=y.view.measure.heights,Jn=0;Jn<nr.length-1&&!(In<nr[Jn]);Jn++);var fr=Jn?nr[Jn-1]:0,ar=nr[Jn],Tr={left:(Re=="right"?Ue.right:Ue.left)-y.rect.left,right:(Re=="left"?Ue.left:Ue.right)-y.rect.left,top:fr,bottom:ar};return!Ue.left&&!Ue.right&&(Tr.bogus=!0),h.options.singleCursorHeightPerLine||(Tr.rtop=qt,Tr.rbottom=_n),Tr}function Ll(h,y){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ki(h))return y;var E=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:y.left*E,right:y.right*E,top:y.top*S,bottom:y.bottom*S}}function QA(h){if(h.measure&&(h.measure.cache={},h.measure.heights=null,h.rest))for(var y=0;y<h.rest.length;y++)h.measure.caches[y]={}}function Bo(h){h.display.externalMeasure=null,xe(h.display.lineMeasure);for(var y=0;y<h.display.view.length;y++)QA(h.display.view[y])}function Jc(h){Bo(h),h.display.cachedCharWidth=h.display.cachedTextHeight=h.display.cachedPaddingH=null,h.options.lineWrapping||(h.display.maxLineChanged=!0),h.display.lineNumChars=null}function Id(h){return D&&oe?-(h.body.getBoundingClientRect().left-parseInt(getComputedStyle(h.body).marginLeft)):h.defaultView.pageXOffset||(h.documentElement||h.body).scrollLeft}function Vf(h){return D&&oe?-(h.body.getBoundingClientRect().top-parseInt(getComputedStyle(h.body).marginTop)):h.defaultView.pageYOffset||(h.documentElement||h.body).scrollTop}function Td(h){var y=Er(h),E=y.widgets,S=0;if(E)for(var F=0;F<E.length;++F)E[F].above&&(S+=xA(E[F]));return S}function Zl(h,y,E,S,F){if(!F){var Z=Td(y);E.top+=Z,E.bottom+=Z}if(S=="line")return E;S||(S="local");var de=zi(y);if(S=="local"?de+=Eh(h.display):de-=h.display.viewOffset,S=="page"||S=="window"){var _e=h.display.lineSpace.getBoundingClientRect();de+=_e.top+(S=="window"?0:Vf(pt(h)));var Re=_e.left+(S=="window"?0:Id(pt(h)));E.left+=Re,E.right+=Re}return E.top+=de,E.bottom+=de,E}function Xt(h,y,E){if(E=="div")return y;var S=y.left,F=y.top;if(E=="page")S-=Id(pt(h)),F-=Vf(pt(h));else if(E=="local"||!E){var Z=h.display.sizer.getBoundingClientRect();S+=Z.left,F+=Z.top}var de=h.display.lineSpace.getBoundingClientRect();return{left:S-de.left,top:F-de.top}}function Sn(h,y,E,S,F){return S||(S=Sr(h.doc,y.line)),Zl(h,S,Oc(h,S,y.ch,F),E)}function hn(h,y,E,S,F,Z){S=S||Sr(h.doc,y.line),F||(F=_l(h,S));function de(_n,In){var nr=ll(h,F,_n,In?"right":"left",Z);return In?nr.left=nr.right:nr.right=nr.left,Zl(h,S,nr,E)}var _e=Ze(S,h.doc.direction),Re=y.ch,Ue=y.sticky;if(Re>=S.text.length?(Re=S.text.length,Ue="before"):Re<=0&&(Re=0,Ue="after"),!_e)return de(Ue=="before"?Re-1:Re,Ue=="before");function yt(_n,In,nr){var Jn=_e[In],fr=Jn.level==1;return de(nr?_n-1:_n,fr!=nr)}var Ot=$e(_e,Re,Ue),Jt=ct,qt=yt(Re,Ot,Ue=="before");return Jt!=null&&(qt.other=yt(Re,Jt,Ue!="before")),qt}function Pr(h,y){var E=0;y=Ci(h.doc,y),h.options.lineWrapping||(E=Ul(h.display)*y.ch);var S=Sr(h.doc,y.line),F=zi(S)+Eh(h.display);return{left:E,right:E,top:F,bottom:F+S.height}}function Di(h,y,E,S,F){var Z=cn(h,y,E);return Z.xRel=F,S&&(Z.outside=S),Z}function Po(h,y,E){var S=h.doc;if(E+=h.display.viewOffset,E<0)return Di(S.first,0,null,-1,-1);var F=Et(S,E),Z=S.first+S.size-1;if(F>Z)return Di(S.first+S.size-1,Sr(S,Z).text.length,null,1,1);y<0&&(y=0);for(var de=Sr(S,F);;){var _e=df(h,de,F,y,E),Re=qr(de,_e.ch+(_e.xRel>0||_e.outside>0?1:0));if(!Re)return _e;var Ue=Re.find(1);if(Ue.line==F)return Ue;de=Sr(S,F=Ue.line)}}function Ba(h,y,E,S){S-=Td(y);var F=y.text.length,Z=Oe(function(de){return ll(h,E,de-1).bottom<=S},F,0);return F=Oe(function(de){return ll(h,E,de).top>S},Z,F),{begin:Z,end:F}}function ds(h,y,E,S){E||(E=_l(h,y));var F=Zl(h,y,ll(h,E,S),"line").top;return Ba(h,y,E,F)}function nc(h,y,E,S){return h.bottom<=E?!1:h.top>E?!0:(S?h.left:h.right)>y}function df(h,y,E,S,F){F-=zi(y);var Z=_l(h,y),de=Td(y),_e=0,Re=y.text.length,Ue=!0,yt=Ze(y,h.doc.direction);if(yt){var Ot=(h.options.lineWrapping?Fu:Xl)(h,y,E,Z,yt,S,F);Ue=Ot.level!=1,_e=Ue?Ot.from:Ot.to-1,Re=Ue?Ot.to:Ot.from-1}var Jt=null,qt=null,_n=Oe(function(ri){var Or=ll(h,Z,ri);return Or.top+=de,Or.bottom+=de,nc(Or,S,F,!1)?(Or.top<=F&&Or.left<=S&&(Jt=ri,qt=Or),!0):!1},_e,Re),In,nr,Jn=!1;if(qt){var fr=S-qt.left<qt.right-S,ar=fr==Ue;_n=Jt+(ar?0:1),nr=ar?"after":"before",In=fr?qt.left:qt.right}else{!Ue&&(_n==Re||_n==_e)&&_n++,nr=_n==0?"after":_n==y.text.length?"before":ll(h,Z,_n-(Ue?1:0)).bottom+de<=F==Ue?"after":"before";var Tr=hn(h,cn(E,_n,nr),"line",y,Z);In=Tr.left,Jn=F<Tr.top?-1:F>=Tr.bottom?1:0}return _n=fe(y.text,_n,1),Di(E,_n,nr,Jn,S-In)}function Xl(h,y,E,S,F,Z,de){var _e=Oe(function(Ot){var Jt=F[Ot],qt=Jt.level!=1;return nc(hn(h,cn(E,qt?Jt.to:Jt.from,qt?"before":"after"),"line",y,S),Z,de,!0)},0,F.length-1),Re=F[_e];if(_e>0){var Ue=Re.level!=1,yt=hn(h,cn(E,Ue?Re.from:Re.to,Ue?"after":"before"),"line",y,S);nc(yt,Z,de,!0)&&yt.top>de&&(Re=F[_e-1])}return Re}function Fu(h,y,E,S,F,Z,de){var _e=Ba(h,y,S,de),Re=_e.begin,Ue=_e.end;/\s/.test(y.text.charAt(Ue-1))&&Ue--;for(var yt=null,Ot=null,Jt=0;Jt<F.length;Jt++){var qt=F[Jt];if(!(qt.from>=Ue||qt.to<=Re)){var _n=qt.level!=1,In=ll(h,S,_n?Math.min(Ue,qt.to)-1:Math.max(Re,qt.from)).right,nr=In<Z?Z-In+1e9:In-Z;(!yt||Ot>nr)&&(yt=qt,Ot=nr)}}return yt||(yt=F[F.length-1]),yt.from<Re&&(yt={from:Re,to:yt.to,level:yt.level}),yt.to>Ue&&(yt={from:yt.from,to:Ue,level:yt.level}),yt}var Jl;function Va(h){if(h.cachedTextHeight!=null)return h.cachedTextHeight;if(Jl==null){Jl=be("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)Jl.appendChild(document.createTextNode("x")),Jl.appendChild(be("br"));Jl.appendChild(document.createTextNode("x"))}We(h.measure,Jl);var E=Jl.offsetHeight/50;return E>3&&(h.cachedTextHeight=E),xe(h.measure),E||1}function Ul(h){if(h.cachedCharWidth!=null)return h.cachedCharWidth;var y=be("span","xxxxxxxxxx"),E=be("pre",[y],"CodeMirror-line-like");We(h.measure,E);var S=y.getBoundingClientRect(),F=(S.right-S.left)/10;return F>2&&(h.cachedCharWidth=F),F||10}function Al(h){for(var y=h.display,E={},S={},F=y.gutters.clientLeft,Z=y.gutters.firstChild,de=0;Z;Z=Z.nextSibling,++de){var _e=h.display.gutterSpecs[de].className;E[_e]=Z.offsetLeft+Z.clientLeft+F,S[_e]=Z.clientWidth}return{fixedPos:Ro(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:E,gutterWidth:S,wrapperWidth:y.wrapper.clientWidth}}function Ro(h){return h.scroller.getBoundingClientRect().left-h.sizer.getBoundingClientRect().left}function eh(h){var y=Va(h.display),E=h.options.lineWrapping,S=E&&Math.max(5,h.display.scroller.clientWidth/Ul(h.display)-3);return function(F){if(di(h.doc,F))return 0;var Z=0;if(F.widgets)for(var de=0;de<F.widgets.length;de++)F.widgets[de].height&&(Z+=F.widgets[de].height);return E?Z+(Math.ceil(F.text.length/S)||1)*y:Z+y}}function th(h){var y=h.doc,E=eh(h);y.iter(function(S){var F=E(S);F!=S.height&&ss(S,F)})}function bl(h,y,E,S){var F=h.display;if(!E&&br(y).getAttribute("cm-not-content")=="true")return null;var Z,de,_e=F.lineSpace.getBoundingClientRect();try{Z=y.clientX-_e.left,de=y.clientY-_e.top}catch{return null}var Re=Po(h,Z,de),Ue;if(S&&Re.xRel>0&&(Ue=Sr(h.doc,Re.line).text).length==Re.ch){var yt=Pe(Ue,Ue.length,h.options.tabSize)-Ue.length;Re=cn(Re.line,Math.max(0,Math.round((Z-hf(h.display).left)/Ul(h.display))-yt))}return Re}function YA(h,y){if(y>=h.display.viewTo||(y-=h.display.viewFrom,y<0))return null;for(var E=h.display.view,S=0;S<E.length;S++)if(y-=E[S].size,y<0)return S}function Ha(h,y,E,S){y==null&&(y=h.doc.first),E==null&&(E=h.doc.first+h.doc.size),S||(S=0);var F=h.display;if(S&&E<F.viewTo&&(F.updateLineNumbers==null||F.updateLineNumbers>y)&&(F.updateLineNumbers=y),h.curOp.viewChanged=!0,y>=F.viewTo)go&&Ji(h.doc,y)<F.viewTo&&eA(h);else if(E<=F.viewFrom)go&&ni(h.doc,E+S)>F.viewFrom?eA(h):(F.viewFrom+=S,F.viewTo+=S);else if(y<=F.viewFrom&&E>=F.viewTo)eA(h);else if(y<=F.viewFrom){var Z=$A(h,E,E+S,1);Z?(F.view=F.view.slice(Z.index),F.viewFrom=Z.lineN,F.viewTo+=S):eA(h)}else if(E>=F.viewTo){var de=$A(h,y,y,-1);de?(F.view=F.view.slice(0,de.index),F.viewTo=de.lineN):eA(h)}else{var _e=$A(h,y,y,-1),Re=$A(h,E,E+S,1);_e&&Re?(F.view=F.view.slice(0,_e.index).concat(Hc(h,_e.lineN,Re.lineN)).concat(F.view.slice(Re.index)),F.viewTo+=S):eA(h)}var Ue=F.externalMeasured;Ue&&(E<Ue.lineN?Ue.lineN+=S:y<Ue.lineN+Ue.size&&(F.externalMeasured=null))}function qA(h,y,E){h.curOp.viewChanged=!0;var S=h.display,F=h.display.externalMeasured;if(F&&y>=F.lineN&&y<F.lineN+F.size&&(S.externalMeasured=null),!(y<S.viewFrom||y>=S.viewTo)){var Z=S.view[YA(h,y)];if(Z.node!=null){var de=Z.changes||(Z.changes=[]);Qe(de,E)==-1&&de.push(E)}}}function eA(h){h.display.viewFrom=h.display.viewTo=h.doc.first,h.display.view=[],h.display.viewOffset=0}function $A(h,y,E,S){var F=YA(h,y),Z,de=h.display.view;if(!go||E==h.doc.first+h.doc.size)return{index:F,lineN:E};for(var _e=h.display.viewFrom,Re=0;Re<F;Re++)_e+=de[Re].size;if(_e!=y){if(S>0){if(F==de.length-1)return null;Z=_e+de[F].size-y,F++}else Z=_e-y;y+=Z,E+=Z}for(;Ji(h.doc,E)!=E;){if(F==(S<0?0:de.length-1))return null;E+=S*de[F-(S<0?1:0)].size,F+=S}return{index:F,lineN:E}}function rc(h,y,E){var S=h.display,F=S.view;F.length==0||y>=S.viewTo||E<=S.viewFrom?(S.view=Hc(h,y,E),S.viewFrom=y):(S.viewFrom>y?S.view=Hc(h,y,S.viewFrom).concat(S.view):S.viewFrom<y&&(S.view=S.view.slice(YA(h,y))),S.viewFrom=y,S.viewTo<E?S.view=S.view.concat(Hc(h,S.viewTo,E)):S.viewTo>E&&(S.view=S.view.slice(0,YA(h,E)))),S.viewTo=E}function Ku(h){for(var y=h.display.view,E=0,S=0;S<y.length;S++){var F=y[S];!F.hidden&&(!F.node||F.changes)&&++E}return E}function zl(h){h.display.input.showSelection(h.display.input.prepareSelection())}function Ih(h,y){y===void 0&&(y=!0);var E=h.doc,S={},F=S.cursors=document.createDocumentFragment(),Z=S.selection=document.createDocumentFragment(),de=h.options.$customCursor;de&&(y=!0);for(var _e=0;_e<E.sel.ranges.length;_e++)if(!(!y&&_e==E.sel.primIndex)){var Re=E.sel.ranges[_e];if(!(Re.from().line>=h.display.viewTo||Re.to().line<h.display.viewFrom)){var Ue=Re.empty();if(de){var yt=de(h,Re);yt&&Qi(h,yt,F)}else(Ue||h.options.showCursorWhenSelecting)&&Qi(h,Re.head,F);Ue||Gp(h,Re,Z)}}return S}function Qi(h,y,E){var S=hn(h,y,"div",null,null,!h.options.singleCursorHeightPerLine),F=E.appendChild(be("div","","CodeMirror-cursor"));if(F.style.left=S.left+"px",F.style.top=S.top+"px",F.style.height=Math.max(0,S.bottom-S.top)*h.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(h.getWrapperElement().className)){var Z=Sn(h,y,"div",null,null),de=Z.right-Z.left;F.style.width=(de>0?de:h.defaultCharWidth())+"px"}if(S.other){var _e=E.appendChild(be("div","","CodeMirror-cursor CodeMirror-secondarycursor"));_e.style.display="",_e.style.left=S.other.left+"px",_e.style.top=S.other.top+"px",_e.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function Lu(h,y){return h.top-y.top||h.left-y.left}function Gp(h,y,E){var S=h.display,F=h.doc,Z=document.createDocumentFragment(),de=hf(h.display),_e=de.left,Re=Math.max(S.sizerWidth,MA(h)-S.sizer.offsetLeft)-de.right,Ue=F.direction=="ltr";function yt(ar,Tr,ri,Or){Tr<0&&(Tr=0),Tr=Math.round(Tr),Or=Math.round(Or),Z.appendChild(be("div",null,"CodeMirror-selected","position: absolute; left: "+ar+`px;
                             top: `+Tr+"px; width: "+(ri??Re-ar)+`px;
                             height: `+(Or-Tr)+"px"))}function Ot(ar,Tr,ri){var Or=Sr(F,ar),to=Or.text.length,ci,Qs;function Ys(ta,lA){return Sn(h,cn(ar,ta),"div",Or,lA)}function qs(ta,lA,za){var na=ds(h,Or,null,ta),Jo=lA=="ltr"==(za=="after")?"left":"right",hi=za=="after"?na.begin:na.end-(/\s/.test(Or.text.charAt(na.end-1))?2:1);return Ys(hi,Jo)[Jo]}var da=Ze(Or,F.direction);return Ge(da,Tr||0,ri??to,function(ta,lA,za,na){var Jo=za=="ltr",hi=Ys(ta,Jo?"left":"right"),Yo=Ys(lA-1,Jo?"right":"left"),Ss=Tr==null&&ta==0,Ks=ri==null&&lA==to,Ts=na==0,RA=!da||na==da.length-1;if(Yo.top-hi.top<=3){var ao=(Ue?Ss:Ks)&&Ts,Ud=(Ue?Ks:Ss)&&RA,AA=ao?_e:(Jo?hi:Yo).left,iu=Ud?Re:(Jo?Yo:hi).right;yt(AA,hi.top,iu-AA,hi.bottom)}else{var pc,el,ml,np;Jo?(pc=Ue&&Ss&&Ts?_e:hi.left,el=Ue?Re:qs(ta,za,"before"),ml=Ue?_e:qs(lA,za,"after"),np=Ue&&Ks&&RA?Re:Yo.right):(pc=Ue?qs(ta,za,"before"):_e,el=!Ue&&Ss&&Ts?Re:hi.right,ml=!Ue&&Ks&&RA?_e:Yo.left,np=Ue?qs(lA,za,"after"):Re),yt(pc,hi.top,el-pc,hi.bottom),hi.bottom<Yo.top&&yt(_e,hi.bottom,null,Yo.top),yt(ml,Yo.top,np-ml,Yo.bottom)}(!ci||Lu(hi,ci)<0)&&(ci=hi),Lu(Yo,ci)<0&&(ci=Yo),(!Qs||Lu(hi,Qs)<0)&&(Qs=hi),Lu(Yo,Qs)<0&&(Qs=Yo)}),{start:ci,end:Qs}}var Jt=y.from(),qt=y.to();if(Jt.line==qt.line)Ot(Jt.line,Jt.ch,qt.ch);else{var _n=Sr(F,Jt.line),In=Sr(F,qt.line),nr=Er(_n)==Er(In),Jn=Ot(Jt.line,Jt.ch,nr?_n.text.length+1:null).end,fr=Ot(qt.line,nr?0:null,qt.ch).start;nr&&(Jn.top<fr.top-2?(yt(Jn.right,Jn.top,null,Jn.bottom),yt(_e,fr.top,fr.left,fr.bottom)):yt(Jn.right,Jn.top,fr.left-Jn.right,Jn.bottom)),Jn.bottom<fr.top&&yt(_e,Jn.bottom,null,fr.top)}E.appendChild(Z)}function pu(h){if(h.state.focused){var y=h.display;clearInterval(y.blinker);var E=!0;y.cursorDiv.style.visibility="",h.options.cursorBlinkRate>0?y.blinker=setInterval(function(){h.hasFocus()||ls(h),y.cursorDiv.style.visibility=(E=!E)?"":"hidden"},h.options.cursorBlinkRate):h.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function tA(h){h.hasFocus()||(h.display.input.focus(),h.state.focused||ff(h))}function nh(h){h.state.delayingBlurEvent=!0,setTimeout(function(){h.state.delayingBlurEvent&&(h.state.delayingBlurEvent=!1,h.state.focused&&ls(h))},100)}function ff(h,y){h.state.delayingBlurEvent&&!h.state.draggingText&&(h.state.delayingBlurEvent=!1),h.options.readOnly!="nocursor"&&(h.state.focused||(nt(h,"focus",h,y),h.state.focused=!0,ze(h.display.wrapper,"CodeMirror-focused"),!h.curOp&&h.display.selForContextMenu!=h.doc.sel&&(h.display.input.reset(),M&&setTimeout(function(){return h.display.input.reset(!0)},20)),h.display.input.receivedFocus()),pu(h))}function ls(h,y){h.state.delayingBlurEvent||(h.state.focused&&(nt(h,"blur",h,y),h.state.focused=!1,Ee(h.display.wrapper,"CodeMirror-focused")),clearInterval(h.display.blinker),setTimeout(function(){h.state.focused||(h.display.shift=!1)},150))}function Ad(h){for(var y=h.display,E=y.lineDiv.offsetTop,S=Math.max(0,y.scroller.getBoundingClientRect().top),F=y.lineDiv.getBoundingClientRect().top,Z=0,de=0;de<y.view.length;de++){var _e=y.view[de],Re=h.options.lineWrapping,Ue=void 0,yt=0;if(!_e.hidden){if(F+=_e.line.height,f&&C<8){var Ot=_e.node.offsetTop+_e.node.offsetHeight;Ue=Ot-E,E=Ot}else{var Jt=_e.node.getBoundingClientRect();Ue=Jt.bottom-Jt.top,!Re&&_e.text.firstChild&&(yt=_e.text.firstChild.getBoundingClientRect().right-Jt.left-1)}var qt=_e.line.height-Ue;if((qt>.005||qt<-.005)&&(F<S&&(Z-=qt),ss(_e.line,Ue),ic(_e.line),_e.rest))for(var _n=0;_n<_e.rest.length;_n++)ic(_e.rest[_n]);if(yt>h.display.sizerWidth){var In=Math.ceil(yt/Ul(h.display));In>h.display.maxLineLength&&(h.display.maxLineLength=In,h.display.maxLine=_e.line,h.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(y.scroller.scrollTop+=Z)}function ic(h){if(h.widgets)for(var y=0;y<h.widgets.length;++y){var E=h.widgets[y],S=E.node.parentNode;S&&(E.height=S.offsetHeight)}}function wA(h,y,E){var S=E&&E.top!=null?Math.max(0,E.top):h.scroller.scrollTop;S=Math.floor(S-Eh(h));var F=E&&E.bottom!=null?E.bottom:S+h.wrapper.clientHeight,Z=Et(y,S),de=Et(y,F);if(E&&E.ensure){var _e=E.ensure.from.line,Re=E.ensure.to.line;_e<Z?(Z=_e,de=Et(y,zi(Sr(y,_e))+h.wrapper.clientHeight)):Math.min(Re,y.lastLine())>=de&&(Z=Et(y,zi(Sr(y,Re))-h.wrapper.clientHeight),de=Re)}return{from:Z,to:Math.max(de,Z+1)}}function rh(h,y){if(!en(h,"scrollCursorIntoView")){var E=h.display,S=E.sizer.getBoundingClientRect(),F=null,Z=E.wrapper.ownerDocument;if(y.top+S.top<0?F=!0:y.bottom+S.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(F=!1),F!=null&&!J){var de=be("div","",null,`position: absolute;
                         top: `+(y.top-E.viewOffset-Eh(h.display))+`px;
                         height: `+(y.bottom-y.top+fu(h)+E.barHeight)+`px;
                         left: `+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;");h.display.lineSpace.appendChild(de),de.scrollIntoView(F),h.display.lineSpace.removeChild(de)}}}function Th(h,y,E,S){S==null&&(S=0);var F;!h.options.lineWrapping&&y==E&&(E=y.sticky=="before"?cn(y.line,y.ch+1,"before"):y,y=y.ch?cn(y.line,y.sticky=="before"?y.ch-1:y.ch,"after"):y);for(var Z=0;Z<5;Z++){var de=!1,_e=hn(h,y),Re=!E||E==y?_e:hn(h,E);F={left:Math.min(_e.left,Re.left),top:Math.min(_e.top,Re.top)-S,right:Math.max(_e.left,Re.left),bottom:Math.max(_e.bottom,Re.bottom)+S};var Ue=kh(h,F),yt=h.doc.scrollTop,Ot=h.doc.scrollLeft;if(Ue.scrollTop!=null&&(oc(h,Ue.scrollTop),Math.abs(h.doc.scrollTop-yt)>1&&(de=!0)),Ue.scrollLeft!=null&&(Za(h,Ue.scrollLeft),Math.abs(h.doc.scrollLeft-Ot)>1&&(de=!0)),!de)break}return F}function ih(h,y){var E=kh(h,y);E.scrollTop!=null&&oc(h,E.scrollTop),E.scrollLeft!=null&&Za(h,E.scrollLeft)}function kh(h,y){var E=h.display,S=Va(h.display);y.top<0&&(y.top=0);var F=h.curOp&&h.curOp.scrollTop!=null?h.curOp.scrollTop:E.scroller.scrollTop,Z=tc(h),de={};y.bottom-y.top>Z&&(y.bottom=y.top+Z);var _e=h.doc.height+Bh(E),Re=y.top<S,Ue=y.bottom>_e-S;if(y.top<F)de.scrollTop=Re?0:y.top;else if(y.bottom>F+Z){var yt=Math.min(y.top,(Ue?_e:y.bottom)-Z);yt!=F&&(de.scrollTop=yt)}var Ot=h.options.fixedGutter?0:E.gutters.offsetWidth,Jt=h.curOp&&h.curOp.scrollLeft!=null?h.curOp.scrollLeft:E.scroller.scrollLeft-Ot,qt=MA(h)-E.gutters.offsetWidth,_n=y.right-y.left>qt;return _n&&(y.right=y.left+qt),y.left<10?de.scrollLeft=0:y.left<Jt?de.scrollLeft=Math.max(0,y.left+Ot-(_n?0:10)):y.right>qt+Jt-3&&(de.scrollLeft=y.right+(_n?0:10)-qt),de}function mu(h,y){y!=null&&(Ph(h),h.curOp.scrollTop=(h.curOp.scrollTop==null?h.doc.scrollTop:h.curOp.scrollTop)+y)}function _s(h){Ph(h);var y=h.getCursor();h.curOp.scrollToPos={from:y,to:y,margin:h.options.cursorScrollMargin}}function Zs(h,y,E){(y!=null||E!=null)&&Ph(h),y!=null&&(h.curOp.scrollLeft=y),E!=null&&(h.curOp.scrollTop=E)}function pf(h,y){Ph(h),h.curOp.scrollToPos=y}function Ph(h){var y=h.curOp.scrollToPos;if(y){h.curOp.scrollToPos=null;var E=Pr(h,y.from),S=Pr(h,y.to);gu(h,E,S,y.margin)}}function gu(h,y,E,S){var F=kh(h,{left:Math.min(y.left,E.left),top:Math.min(y.top,E.top)-S,right:Math.max(y.right,E.right),bottom:Math.max(y.bottom,E.bottom)+S});Zs(h,F.scrollLeft,F.scrollTop)}function oc(h,y){Math.abs(h.doc.scrollTop-y)<2||(i||ul(h,{top:y}),Ic(h,y,!0),i&&ul(h),oh(h,100))}function Ic(h,y,E){y=Math.max(0,Math.min(h.display.scroller.scrollHeight-h.display.scroller.clientHeight,y)),!(h.display.scroller.scrollTop==y&&!E)&&(h.doc.scrollTop=y,h.display.scrollbars.setScrollTop(y),h.display.scroller.scrollTop!=y&&(h.display.scroller.scrollTop=y))}function Za(h,y,E,S){y=Math.max(0,Math.min(y,h.display.scroller.scrollWidth-h.display.scroller.clientWidth)),!((E?y==h.doc.scrollLeft:Math.abs(h.doc.scrollLeft-y)<2)&&!S)&&(h.doc.scrollLeft=y,mf(h),h.display.scroller.scrollLeft!=y&&(h.display.scroller.scrollLeft=y),h.display.scrollbars.setScrollLeft(y))}function Uu(h){var y=h.display,E=y.gutters.offsetWidth,S=Math.round(h.doc.height+Bh(h.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:h.options.fixedGutter?E:0,docHeight:S,scrollHeight:S+fu(h)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:E}}var nA=function(h,y,E){this.cm=E;var S=this.vert=be("div",[be("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),F=this.horiz=be("div",[be("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=F.tabIndex=-1,h(S),h(F),mt(S,"scroll",function(){S.clientHeight&&y(S.scrollTop,"vertical")}),mt(F,"scroll",function(){F.clientWidth&&y(F.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};nA.prototype.update=function(h){var y=h.scrollWidth>h.clientWidth+1,E=h.scrollHeight>h.clientHeight+1,S=h.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=y?S+"px":"0";var F=h.viewHeight-(y?S:0);this.vert.firstChild.style.height=Math.max(0,h.scrollHeight-h.clientHeight+F)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(y){this.horiz.style.display="block",this.horiz.style.right=E?S+"px":"0",this.horiz.style.left=h.barLeft+"px";var Z=h.viewWidth-h.barLeft-(E?S:0);this.horiz.firstChild.style.width=Math.max(0,h.scrollWidth-h.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&h.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?S:0,bottom:y?S:0}},nA.prototype.setScrollLeft=function(h){this.horiz.scrollLeft!=h&&(this.horiz.scrollLeft=h),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},nA.prototype.setScrollTop=function(h){this.vert.scrollTop!=h&&(this.vert.scrollTop=h),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},nA.prototype.zeroWidthHack=function(){var h=H&&!W?"12px":"18px";this.horiz.style.height=this.vert.style.width=h,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new ke,this.disableVert=new ke},nA.prototype.enableZeroWidthBar=function(h,y,E){h.style.visibility="";function S(){var F=h.getBoundingClientRect(),Z=E=="vert"?document.elementFromPoint(F.right-1,(F.top+F.bottom)/2):document.elementFromPoint((F.right+F.left)/2,F.bottom-1);Z!=h?h.style.visibility="hidden":y.set(1e3,S)}y.set(1e3,S)},nA.prototype.clear=function(){var h=this.horiz.parentNode;h.removeChild(this.horiz),h.removeChild(this.vert)};var sc=function(){};sc.prototype.update=function(){return{bottom:0,right:0}},sc.prototype.setScrollLeft=function(){},sc.prototype.setScrollTop=function(){},sc.prototype.clear=function(){};function SA(h,y){y||(y=Uu(h));var E=h.display.barWidth,S=h.display.barHeight;Rh(h,y);for(var F=0;F<4&&E!=h.display.barWidth||S!=h.display.barHeight;F++)E!=h.display.barWidth&&h.options.lineWrapping&&Ad(h),Rh(h,Uu(h)),E=h.display.barWidth,S=h.display.barHeight}function Rh(h,y){var E=h.display,S=E.scrollbars.update(y);E.sizer.style.paddingRight=(E.barWidth=S.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=S.bottom)+"px",E.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=S.bottom+"px",E.scrollbarFiller.style.width=S.right+"px"):E.scrollbarFiller.style.display="",S.bottom&&h.options.coverGutterNextToScrollbar&&h.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=S.bottom+"px",E.gutterFiller.style.width=y.gutterWidth+"px"):E.gutterFiller.style.display=""}var Dh={native:nA,null:sc};function ud(h){h.display.scrollbars&&(h.display.scrollbars.clear(),h.display.scrollbars.addClass&&Ee(h.display.wrapper,h.display.scrollbars.addClass)),h.display.scrollbars=new Dh[h.options.scrollbarStyle](function(y){h.display.wrapper.insertBefore(y,h.display.scrollbarFiller),mt(y,"mousedown",function(){h.state.focused&&setTimeout(function(){return h.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,E){E=="horizontal"?Za(h,y):oc(h,y)},h),h.display.scrollbars.addClass&&ze(h.display.wrapper,h.display.scrollbars.addClass)}var fs=0;function xl(h){h.curOp={cm:h,viewChanged:!1,startHeight:h.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++fs,markArrays:null},Np(h.curOp)}function Aa(h){var y=h.curOp;y&&uf(y,function(E){for(var S=0;S<E.ops.length;S++)E.ops[S].cm.curOp=null;VA(E)})}function VA(h){for(var y=h.ops,E=0;E<y.length;E++)yu(y[E]);for(var S=0;S<y.length;S++)EA(y[S]);for(var F=0;F<y.length;F++)ac(y[F]);for(var Z=0;Z<y.length;Z++)ot(y[Z]);for(var de=0;de<y.length;de++)BA(y[de])}function yu(h){var y=h.cm,E=y.display;ps(y),h.updateMaxLine&&la(y),h.mustUpdate=h.viewChanged||h.forceUpdate||h.scrollTop!=null||h.scrollToPos&&(h.scrollToPos.from.line<E.viewFrom||h.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&y.options.lineWrapping,h.update=h.mustUpdate&&new Os(y,h.mustUpdate&&{top:h.scrollTop,ensure:h.scrollToPos},h.forceUpdate)}function EA(h){h.updatedDisplay=h.mustUpdate&&Fa(h.cm,h.update)}function ac(h){var y=h.cm,E=y.display;h.updatedDisplay&&Ad(y),h.barMeasure=Uu(y),E.maxLineChanged&&!y.options.lineWrapping&&(h.adjustWidthTo=Oc(y,E.maxLine,E.maxLine.text.length).left+3,y.display.sizerWidth=h.adjustWidthTo,h.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+h.adjustWidthTo+fu(y)+y.display.barWidth),h.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+h.adjustWidthTo-MA(y))),(h.updatedDisplay||h.selectionChanged)&&(h.preparedSelection=E.input.prepareSelection())}function ot(h){var y=h.cm;h.adjustWidthTo!=null&&(y.display.sizer.style.minWidth=h.adjustWidthTo+"px",h.maxScrollLeft<y.doc.scrollLeft&&Za(y,Math.min(y.display.scroller.scrollLeft,h.maxScrollLeft),!0),y.display.maxLineChanged=!1);var E=h.focus&&h.focus==Je(kt(y));h.preparedSelection&&y.display.input.showSelection(h.preparedSelection,E),(h.updatedDisplay||h.startHeight!=y.doc.height)&&SA(y,h.barMeasure),h.updatedDisplay&&Nu(y,h.barMeasure),h.selectionChanged&&pu(y),y.state.focused&&h.updateInput&&y.display.input.reset(h.typing),E&&tA(h.cm)}function BA(h){var y=h.cm,E=y.display,S=y.doc;if(h.updatedDisplay&&Nl(y,h.update),E.wheelStartX!=null&&(h.scrollTop!=null||h.scrollLeft!=null||h.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),h.scrollTop!=null&&Ic(y,h.scrollTop,h.forceScroll),h.scrollLeft!=null&&Za(y,h.scrollLeft,!0,!0),h.scrollToPos){var F=Th(y,Ci(S,h.scrollToPos.from),Ci(S,h.scrollToPos.to),h.scrollToPos.margin);rh(y,F)}var Z=h.maybeHiddenMarkers,de=h.maybeUnhiddenMarkers;if(Z)for(var _e=0;_e<Z.length;++_e)Z[_e].lines.length||nt(Z[_e],"hide");if(de)for(var Re=0;Re<de.length;++Re)de[Re].lines.length&&nt(de[Re],"unhide");E.wrapper.offsetHeight&&(S.scrollTop=y.display.scroller.scrollTop),h.changeObjs&&nt(y,"changes",y,h.changeObjs),h.update&&h.update.finish()}function js(h,y){if(h.curOp)return y();xl(h);try{return y()}finally{Aa(h)}}function Do(h,y){return function(){if(h.curOp)return y.apply(h,arguments);xl(h);try{return y.apply(h,arguments)}finally{Aa(h)}}}function fi(h){return function(){if(this.curOp)return h.apply(this,arguments);xl(this);try{return h.apply(this,arguments)}finally{Aa(this)}}}function ua(h){return function(){var y=this.cm;if(!y||y.curOp)return h.apply(this,arguments);xl(y);try{return h.apply(this,arguments)}finally{Aa(y)}}}function oh(h,y){h.doc.highlightFrontier<h.display.viewTo&&h.state.highlight.set(y,Tt(Fh,h))}function Fh(h){var y=h.doc;if(!(y.highlightFrontier>=h.display.viewTo)){var E=+new Date+h.options.workTime,S=gi(h,y.highlightFrontier),F=[];y.iter(S.line,Math.min(y.first+y.size,h.display.viewTo+500),function(Z){if(S.line>=h.display.viewFrom){var de=Z.styles,_e=Z.text.length>h.options.maxHighlightLength?si(y.mode,S.state):null,Re=wc(h,Z,S,!0);_e&&(S.state=_e),Z.styles=Re.styles;var Ue=Z.styleClasses,yt=Re.classes;yt?Z.styleClasses=yt:Ue&&(Z.styleClasses=null);for(var Ot=!de||de.length!=Z.styles.length||Ue!=yt&&(!Ue||!yt||Ue.bgClass!=yt.bgClass||Ue.textClass!=yt.textClass),Jt=0;!Ot&&Jt<de.length;++Jt)Ot=de[Jt]!=Z.styles[Jt];Ot&&F.push(S.line),Z.stateAfter=S.save(),S.nextLine()}else Z.text.length<=h.options.maxHighlightLength&&So(h,Z.text,S),Z.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>E)return oh(h,h.options.workDelay),!0}),y.highlightFrontier=S.line,y.modeFrontier=Math.max(y.modeFrontier,S.line),F.length&&js(h,function(){for(var Z=0;Z<F.length;Z++)qA(h,F[Z],"text")})}}var Os=function(h,y,E){var S=h.display;this.viewport=y,this.visible=wA(S,h.doc,y),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=MA(h),this.force=E,this.dims=Al(h),this.events=[]};Os.prototype.signal=function(h,y){xn(h,y)&&this.events.push(arguments)},Os.prototype.finish=function(){for(var h=0;h<this.events.length;h++)nt.apply(null,this.events[h])};function ps(h){var y=h.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=fu(h)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=fu(h)+"px",y.scrollbarsClipped=!0)}function ho(h){if(h.hasFocus())return null;var y=Je(kt(h));if(!y||!at(h.display.lineDiv,y))return null;var E={activeElt:y};if(window.getSelection){var S=Bt(h).getSelection();S.anchorNode&&S.extend&&at(h.display.lineDiv,S.anchorNode)&&(E.anchorNode=S.anchorNode,E.anchorOffset=S.anchorOffset,E.focusNode=S.focusNode,E.focusOffset=S.focusOffset)}return E}function HA(h){if(!(!h||!h.activeElt||h.activeElt==Je(ft(h.activeElt)))&&(h.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(h.activeElt.nodeName)&&h.anchorNode&&at(document.body,h.anchorNode)&&at(document.body,h.focusNode))){var y=h.activeElt.ownerDocument,E=y.defaultView.getSelection(),S=y.createRange();S.setEnd(h.anchorNode,h.anchorOffset),S.collapse(!1),E.removeAllRanges(),E.addRange(S),E.extend(h.focusNode,h.focusOffset)}}function Fa(h,y){var E=h.display,S=h.doc;if(y.editorIsHidden)return eA(h),!1;if(!y.force&&y.visible.from>=E.viewFrom&&y.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&Ku(h)==0)return!1;Gl(h)&&(eA(h),y.dims=Al(h));var F=S.first+S.size,Z=Math.max(y.visible.from-h.options.viewportMargin,S.first),de=Math.min(F,y.visible.to+h.options.viewportMargin);E.viewFrom<Z&&Z-E.viewFrom<20&&(Z=Math.max(S.first,E.viewFrom)),E.viewTo>de&&E.viewTo-de<20&&(de=Math.min(F,E.viewTo)),go&&(Z=Ji(h.doc,Z),de=ni(h.doc,de));var _e=Z!=E.viewFrom||de!=E.viewTo||E.lastWrapHeight!=y.wrapperHeight||E.lastWrapWidth!=y.wrapperWidth;rc(h,Z,de),E.viewOffset=zi(Sr(h.doc,E.viewFrom)),h.display.mover.style.top=E.viewOffset+"px";var Re=Ku(h);if(!_e&&Re==0&&!y.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var Ue=ho(h);return Re>4&&(E.lineDiv.style.display="none"),zu(h,E.updateLineNumbers,y.dims),Re>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,HA(Ue),xe(E.cursorDiv),xe(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,_e&&(E.lastWrapHeight=y.wrapperHeight,E.lastWrapWidth=y.wrapperWidth,oh(h,400)),E.updateLineNumbers=null,!0}function Nl(h,y){for(var E=y.viewport,S=!0;;S=!1){if(!S||!h.options.lineWrapping||y.oldDisplayWidth==MA(h)){if(E&&E.top!=null&&(E={top:Math.min(h.doc.height+Bh(h.display)-tc(h),E.top)}),y.visible=wA(h.display,h.doc,E),y.visible.from>=h.display.viewFrom&&y.visible.to<=h.display.viewTo)break}else S&&(y.visible=wA(h.display,h.doc,E));if(!Fa(h,y))break;Ad(h);var F=Uu(h);zl(h),SA(h,F),Nu(h,F),y.force=!1}y.signal(h,"update",h),(h.display.viewFrom!=h.display.reportedViewFrom||h.display.viewTo!=h.display.reportedViewTo)&&(y.signal(h,"viewportChange",h,h.display.viewFrom,h.display.viewTo),h.display.reportedViewFrom=h.display.viewFrom,h.display.reportedViewTo=h.display.viewTo)}function ul(h,y){var E=new Os(h,y);if(Fa(h,E)){Ad(h),Nl(h,E);var S=Uu(h);zl(h),SA(h,S),Nu(h,S),E.finish()}}function zu(h,y,E){var S=h.display,F=h.options.lineNumbers,Z=S.lineDiv,de=Z.firstChild;function _e(_n){var In=_n.nextSibling;return M&&H&&h.display.currentWheelTarget==_n?_n.style.display="none":_n.parentNode.removeChild(_n),In}for(var Re=S.view,Ue=S.viewFrom,yt=0;yt<Re.length;yt++){var Ot=Re[yt];if(!Ot.hidden)if(!Ot.node||Ot.node.parentNode!=Z){var Jt=Sh(h,Ot,Ue,E);Z.insertBefore(Jt,de)}else{for(;de!=Ot.node;)de=_e(de);var qt=F&&y!=null&&y<=Ue&&Ot.lineNumber;Ot.changes&&(Qe(Ot.changes,"gutter")>-1&&(qt=!1),WA(h,Ot,Ue,E)),qt&&(xe(Ot.lineNumber),Ot.lineNumber.appendChild(document.createTextNode(Nn(h.options,Ue)))),de=Ot.node.nextSibling}Ue+=Ot.size}for(;de;)de=_e(de)}function cl(h){var y=h.gutters.offsetWidth;h.sizer.style.marginLeft=y+"px",Fs(h,"gutterChanged",h)}function Nu(h,y){h.display.sizer.style.minHeight=y.docHeight+"px",h.display.heightForcer.style.top=y.docHeight+"px",h.display.gutters.style.height=y.docHeight+h.display.barHeight+fu(h)+"px"}function mf(h){var y=h.display,E=y.view;if(!(!y.alignWidgets&&(!y.gutters.firstChild||!h.options.fixedGutter))){for(var S=Ro(y)-y.scroller.scrollLeft+h.doc.scrollLeft,F=y.gutters.offsetWidth,Z=S+"px",de=0;de<E.length;de++)if(!E[de].hidden){h.options.fixedGutter&&(E[de].gutter&&(E[de].gutter.style.left=Z),E[de].gutterBackground&&(E[de].gutterBackground.style.left=Z));var _e=E[de].alignable;if(_e)for(var Re=0;Re<_e.length;Re++)_e[Re].style.left=Z}h.options.fixedGutter&&(y.gutters.style.left=S+F+"px")}}function Gl(h){if(!h.options.lineNumbers)return!1;var y=h.doc,E=Nn(h.options,y.first+y.size-1),S=h.display;if(E.length!=S.lineNumChars){var F=S.measure.appendChild(be("div",[be("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=F.firstChild.offsetWidth,de=F.offsetWidth-Z;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(Z,S.lineGutter.offsetWidth-de)+1,S.lineNumWidth=S.lineNumInnerWidth+de,S.lineNumChars=S.lineNumInnerWidth?E.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",cl(h.display),!0}return!1}function Xs(h,y){for(var E=[],S=!1,F=0;F<h.length;F++){var Z=h[F],de=null;if(typeof Z!="string"&&(de=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(y)S=!0;else continue;E.push({className:Z,style:de})}return y&&!S&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function sh(h){var y=h.gutters,E=h.gutterSpecs;xe(y),h.lineGutter=null;for(var S=0;S<E.length;++S){var F=E[S],Z=F.className,de=F.style,_e=y.appendChild(be("div",null,"CodeMirror-gutter "+Z));de&&(_e.style.cssText=de),Z=="CodeMirror-linenumbers"&&(h.lineGutter=_e,_e.style.width=(h.lineNumWidth||1)+"px")}y.style.display=E.length?"":"none",cl(h)}function ca(h){sh(h.display),Ha(h),mf(h)}function Tc(h,y,E,S){var F=this;this.input=E,F.scrollbarFiller=be("div",null,"CodeMirror-scrollbar-filler"),F.scrollbarFiller.setAttribute("cm-not-content","true"),F.gutterFiller=be("div",null,"CodeMirror-gutter-filler"),F.gutterFiller.setAttribute("cm-not-content","true"),F.lineDiv=rt("div",null,"CodeMirror-code"),F.selectionDiv=be("div",null,null,"position: relative; z-index: 1"),F.cursorDiv=be("div",null,"CodeMirror-cursors"),F.measure=be("div",null,"CodeMirror-measure"),F.lineMeasure=be("div",null,"CodeMirror-measure"),F.lineSpace=rt("div",[F.measure,F.lineMeasure,F.selectionDiv,F.cursorDiv,F.lineDiv],null,"position: relative; outline: none");var Z=rt("div",[F.lineSpace],"CodeMirror-lines");F.mover=be("div",[Z],null,"position: relative"),F.sizer=be("div",[F.mover],"CodeMirror-sizer"),F.sizerWidth=null,F.heightForcer=be("div",null,null,"position: absolute; height: "+_t+"px; width: 1px;"),F.gutters=be("div",null,"CodeMirror-gutters"),F.lineGutter=null,F.scroller=be("div",[F.sizer,F.heightForcer,F.gutters],"CodeMirror-scroll"),F.scroller.setAttribute("tabIndex","-1"),F.wrapper=be("div",[F.scrollbarFiller,F.gutterFiller,F.scroller],"CodeMirror"),D&&R===105&&(F.wrapper.style.clipPath="inset(0px)"),F.wrapper.setAttribute("translate","no"),f&&C<8&&(F.gutters.style.zIndex=-1,F.scroller.style.paddingRight=0),!M&&!(i&&te)&&(F.scroller.draggable=!0),h&&(h.appendChild?h.appendChild(F.wrapper):h(F.wrapper)),F.viewFrom=F.viewTo=y.first,F.reportedViewFrom=F.reportedViewTo=y.first,F.view=[],F.renderedView=null,F.externalMeasured=null,F.viewOffset=0,F.lastWrapHeight=F.lastWrapWidth=0,F.updateLineNumbers=null,F.nativeBarWidth=F.barHeight=F.barWidth=0,F.scrollbarsClipped=!1,F.lineNumWidth=F.lineNumInnerWidth=F.lineNumChars=null,F.alignWidgets=!1,F.cachedCharWidth=F.cachedTextHeight=F.cachedPaddingH=null,F.maxLine=null,F.maxLineLength=0,F.maxLineChanged=!1,F.wheelDX=F.wheelDY=F.wheelStartX=F.wheelStartY=null,F.shift=!1,F.selForContextMenu=null,F.activeTouch=null,F.gutterSpecs=Xs(S.gutters,S.lineNumbers),sh(F),E.init(F)}var cd=0,OA=null;f?OA=-.53:i?OA=15:D?OA=-.7:G&&(OA=-1/3);function ah(h){var y=h.wheelDeltaX,E=h.wheelDeltaY;return y==null&&h.detail&&h.axis==h.HORIZONTAL_AXIS&&(y=h.detail),E==null&&h.detail&&h.axis==h.VERTICAL_AXIS?E=h.detail:E==null&&(E=h.wheelDelta),{x:y,y:E}}function lh(h){var y=ah(h);return y.x*=OA,y.y*=OA,y}function Gu(h,y){D&&R==102&&(h.display.chromeScrollHack==null?h.display.sizer.style.pointerEvents="none":clearTimeout(h.display.chromeScrollHack),h.display.chromeScrollHack=setTimeout(function(){h.display.chromeScrollHack=null,h.display.sizer.style.pointerEvents=""},100));var E=ah(y),S=E.x,F=E.y,Z=OA;y.deltaMode===0&&(S=y.deltaX,F=y.deltaY,Z=1);var de=h.display,_e=de.scroller,Re=_e.scrollWidth>_e.clientWidth,Ue=_e.scrollHeight>_e.clientHeight;if(S&&Re||F&&Ue){if(F&&H&&M){e:for(var yt=y.target,Ot=de.view;yt!=_e;yt=yt.parentNode)for(var Jt=0;Jt<Ot.length;Jt++)if(Ot[Jt].node==yt){h.display.currentWheelTarget=yt;break e}}if(S&&!i&&!U&&Z!=null){F&&Ue&&oc(h,Math.max(0,_e.scrollTop+F*Z)),Za(h,Math.max(0,_e.scrollLeft+S*Z)),(!F||F&&Ue)&&Qn(y),de.wheelStartX=null;return}if(F&&Z!=null){var qt=F*Z,_n=h.doc.scrollTop,In=_n+de.wrapper.clientHeight;qt<0?_n=Math.max(0,_n+qt-50):In=Math.min(h.doc.height,In+qt+50),ul(h,{top:_n,bottom:In})}cd<20&&y.deltaMode!==0&&(de.wheelStartX==null?(de.wheelStartX=_e.scrollLeft,de.wheelStartY=_e.scrollTop,de.wheelDX=S,de.wheelDY=F,setTimeout(function(){if(de.wheelStartX!=null){var nr=_e.scrollLeft-de.wheelStartX,Jn=_e.scrollTop-de.wheelStartY,fr=Jn&&de.wheelDY&&Jn/de.wheelDY||nr&&de.wheelDX&&nr/de.wheelDX;de.wheelStartX=de.wheelStartY=null,fr&&(OA=(OA*cd+fr)/(cd+1),++cd)}},200)):(de.wheelDX+=S,de.wheelDY+=F))}}var Ho=function(h,y){this.ranges=h,this.primIndex=y};Ho.prototype.primary=function(){return this.ranges[this.primIndex]},Ho.prototype.equals=function(h){if(h==this)return!0;if(h.primIndex!=this.primIndex||h.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var E=this.ranges[y],S=h.ranges[y];if(!ji(E.anchor,S.anchor)||!ji(E.head,S.head))return!1}return!0},Ho.prototype.deepCopy=function(){for(var h=[],y=0;y<this.ranges.length;y++)h[y]=new Yi(wo(this.ranges[y].anchor),wo(this.ranges[y].head));return new Ho(h,this.primIndex)},Ho.prototype.somethingSelected=function(){for(var h=0;h<this.ranges.length;h++)if(!this.ranges[h].empty())return!0;return!1},Ho.prototype.contains=function(h,y){y||(y=h);for(var E=0;E<this.ranges.length;E++){var S=this.ranges[E];if(sr(y,S.from())>=0&&sr(h,S.to())<=0)return E}return-1};var Yi=function(h,y){this.anchor=h,this.head=y};Yi.prototype.from=function(){return va(this.anchor,this.head)},Yi.prototype.to=function(){return xs(this.anchor,this.head)},Yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Ar(h,y,E){var S=h&&h.options.selectionsMayTouch,F=y[E];y.sort(function(Jt,qt){return sr(Jt.from(),qt.from())}),E=Qe(y,F);for(var Z=1;Z<y.length;Z++){var de=y[Z],_e=y[Z-1],Re=sr(_e.to(),de.from());if(S&&!de.empty()?Re>0:Re>=0){var Ue=va(_e.from(),de.from()),yt=xs(_e.to(),de.to()),Ot=_e.empty()?de.from()==de.head:_e.from()==_e.head;Z<=E&&--E,y.splice(--Z,2,new Yi(Ot?yt:Ue,Ot?Ue:yt))}}return new Ho(y,E)}function Oa(h,y){return new Ho([new Yi(h,y||h)],0)}function xa(h){return h.text?cn(h.from.line+h.text.length-1,Un(h.text).length+(h.text.length==1?h.from.ch:0)):h.to}function lc(h,y){if(sr(h,y.from)<0)return h;if(sr(h,y.to)<=0)return xa(y);var E=h.line+y.text.length-(y.to.line-y.from.line)-1,S=h.ch;return h.line==y.to.line&&(S+=xa(y).ch-y.to.ch),cn(E,S)}function Ml(h,y){for(var E=[],S=0;S<h.sel.ranges.length;S++){var F=h.sel.ranges[S];E.push(new Yi(lc(F.anchor,y),lc(F.head,y)))}return Ar(h.cm,E,h.sel.primIndex)}function wl(h,y,E){return h.line==y.line?cn(E.line,h.ch-y.ch+E.ch):cn(E.line+(h.line-y.line),h.ch)}function Ac(h,y,E){for(var S=[],F=cn(h.first,0),Z=F,de=0;de<y.length;de++){var _e=y[de],Re=wl(_e.from,F,Z),Ue=wl(xa(_e),F,Z);if(F=_e.to,Z=Ue,E=="around"){var yt=h.sel.ranges[de],Ot=sr(yt.head,yt.anchor)<0;S[de]=new Yi(Ot?Ue:Re,Ot?Re:Ue)}else S[de]=new Yi(Re,Re)}return new Ho(S,h.sel.primIndex)}function eo(h){h.doc.mode=jo(h.options,h.doc.modeOption),vu(h)}function vu(h){h.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),h.doc.modeFrontier=h.doc.highlightFrontier=h.doc.first,oh(h,100),h.state.modeGen++,h.curOp&&Ha(h)}function Ah(h,y){return y.from.ch==0&&y.to.ch==0&&Un(y.text)==""&&(!h.cm||h.cm.options.wholeLineUpdateBefore)}function Ia(h,y,E,S){function F(fr){return E?E[fr]:null}function Z(fr,ar,Tr){_A(fr,ar,Tr,S),Fs(fr,"change",fr,y)}function de(fr,ar){for(var Tr=[],ri=fr;ri<ar;++ri)Tr.push(new Ea(Ue[ri],F(ri),S));return Tr}var _e=y.from,Re=y.to,Ue=y.text,yt=Sr(h,_e.line),Ot=Sr(h,Re.line),Jt=Un(Ue),qt=F(Ue.length-1),_n=Re.line-_e.line;if(y.full)h.insert(0,de(0,Ue.length)),h.remove(Ue.length,h.size-Ue.length);else if(Ah(h,y)){var In=de(0,Ue.length-1);Z(Ot,Ot.text,qt),_n&&h.remove(_e.line,_n),In.length&&h.insert(_e.line,In)}else if(yt==Ot)if(Ue.length==1)Z(yt,yt.text.slice(0,_e.ch)+Jt+yt.text.slice(Re.ch),qt);else{var nr=de(1,Ue.length-1);nr.push(new Ea(Jt+yt.text.slice(Re.ch),qt,S)),Z(yt,yt.text.slice(0,_e.ch)+Ue[0],F(0)),h.insert(_e.line+1,nr)}else if(Ue.length==1)Z(yt,yt.text.slice(0,_e.ch)+Ue[0]+Ot.text.slice(Re.ch),F(0)),h.remove(_e.line+1,_n);else{Z(yt,yt.text.slice(0,_e.ch)+Ue[0],F(0)),Z(Ot,Jt+Ot.text.slice(Re.ch),qt);var Jn=de(1,Ue.length-1);_n>1&&h.remove(_e.line+1,_n-1),h.insert(_e.line+1,Jn)}Fs(h,"change",h,y)}function Ka(h,y,E){function S(F,Z,de){if(F.linked)for(var _e=0;_e<F.linked.length;++_e){var Re=F.linked[_e];if(Re.doc!=Z){var Ue=de&&Re.sharedHist;E&&!Ue||(y(Re.doc,Ue),S(Re.doc,F,Ue))}}}S(h,null,!0)}function Is(h,y){if(y.cm)throw new Error("This document is already in use.");h.doc=y,y.cm=h,th(h),eo(h),IA(h),h.options.direction=y.direction,h.options.lineWrapping||la(h),h.options.mode=y.modeOption,Ha(h)}function IA(h){(h.doc.direction=="rtl"?ze:Ee)(h.display.lineDiv,"CodeMirror-rtl")}function Cu(h){js(h,function(){IA(h),Ha(h)})}function uh(h){this.done=[],this.undone=[],this.undoDepth=h?h.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=h?h.maxGeneration:1}function _u(h,y){var E={from:wo(y.from),to:xa(y),text:aa(h,y.from,y.to)};return kd(h,E,y.from.line,y.to.line+1),Ka(h,function(S){return kd(S,E,y.from.line,y.to.line+1)},!0),E}function Sl(h){for(;h.length;){var y=Un(h);if(y.ranges)h.pop();else break}}function Hf(h,y){if(y)return Sl(h.done),Un(h.done);if(h.done.length&&!Un(h.done).ranges)return Un(h.done);if(h.done.length>1&&!h.done[h.done.length-2].ranges)return h.done.pop(),Un(h.done)}function Kh(h,y,E,S){var F=h.history;F.undone.length=0;var Z=+new Date,de,_e;if((F.lastOp==S||F.lastOrigin==y.origin&&y.origin&&(y.origin.charAt(0)=="+"&&F.lastModTime>Z-(h.cm?h.cm.options.historyEventDelay:500)||y.origin.charAt(0)=="*"))&&(de=Hf(F,F.lastOp==S)))_e=Un(de.changes),sr(y.from,y.to)==0&&sr(y.from,_e.to)==0?_e.to=xa(y):de.changes.push(_u(h,y));else{var Re=Un(F.done);for((!Re||!Re.ranges)&&hl(h.sel,F.done),de={changes:[_u(h,y)],generation:F.generation},F.done.push(de);F.done.length>F.undoDepth;)F.done.shift(),F.done[0].ranges||F.done.shift()}F.done.push(E),F.generation=++F.maxGeneration,F.lastModTime=F.lastSelTime=Z,F.lastOp=F.lastSelOp=S,F.lastOrigin=F.lastSelOrigin=y.origin,_e||nt(h,"historyAdded")}function ZA(h,y,E,S){var F=y.charAt(0);return F=="*"||F=="+"&&E.ranges.length==S.ranges.length&&E.somethingSelected()==S.somethingSelected()&&new Date-h.history.lastSelTime<=(h.cm?h.cm.options.historyEventDelay:500)}function bo(h,y,E,S){var F=h.history,Z=S&&S.origin;E==F.lastSelOp||Z&&F.lastSelOrigin==Z&&(F.lastModTime==F.lastSelTime&&F.lastOrigin==Z||ZA(h,Z,Un(F.done),y))?F.done[F.done.length-1]=y:hl(y,F.done),F.lastSelTime=+new Date,F.lastSelOrigin=Z,F.lastSelOp=E,S&&S.clearRedo!==!1&&Sl(F.undone)}function hl(h,y){var E=Un(y);E&&E.ranges&&E.equals(h)||y.push(h)}function kd(h,y,E,S){var F=y["spans_"+h.id],Z=0;h.iter(Math.max(h.first,E),Math.min(h.first+h.size,S),function(de){de.markedSpans&&((F||(F=y["spans_"+h.id]={}))[Z]=de.markedSpans),++Z})}function hd(h){if(!h)return null;for(var y,E=0;E<h.length;++E)h[E].marker.explicitlyCleared?y||(y=h.slice(0,E)):y&&y.push(h[E]);return y?y.length?y:null:h}function kc(h,y){var E=y["spans_"+h.id];if(!E)return null;for(var S=[],F=0;F<y.text.length;++F)S.push(hd(E[F]));return S}function Pd(h,y){var E=kc(h,y),S=Ri(h,y);if(!E)return S;if(!S)return E;for(var F=0;F<E.length;++F){var Z=E[F],de=S[F];if(Z&&de)e:for(var _e=0;_e<de.length;++_e){for(var Re=de[_e],Ue=0;Ue<Z.length;++Ue)if(Z[Ue].marker==Re.marker)continue e;Z.push(Re)}else de&&(E[F]=de)}return E}function Pc(h,y,E){for(var S=[],F=0;F<h.length;++F){var Z=h[F];if(Z.ranges){S.push(E?Ho.prototype.deepCopy.call(Z):Z);continue}var de=Z.changes,_e=[];S.push({changes:_e});for(var Re=0;Re<de.length;++Re){var Ue=de[Re],yt=void 0;if(_e.push({from:Ue.from,to:Ue.to,text:Ue.text}),y)for(var Ot in Ue)(yt=Ot.match(/^spans_(\d+)$/))&&Qe(y,Number(yt[1]))>-1&&(Un(_e)[Ot]=Ue[Ot],delete Ue[Ot])}}return S}function Wo(h,y,E,S){if(S){var F=h.anchor;if(E){var Z=sr(y,F)<0;Z!=sr(E,F)<0?(F=y,y=E):Z!=sr(y,E)<0&&(y=E)}return new Yi(F,y)}else return new Yi(E||y,y)}function uc(h,y,E,S,F){F==null&&(F=h.cm&&(h.cm.display.shift||h.extend)),Uo(h,new Ho([Wo(h.sel.primary(),y,E,F)],0),S)}function Ir(h,y,E){for(var S=[],F=h.cm&&(h.cm.display.shift||h.extend),Z=0;Z<h.sel.ranges.length;Z++)S[Z]=Wo(h.sel.ranges[Z],y[Z],null,F);var de=Ar(h.cm,S,h.sel.primIndex);Uo(h,de,E)}function Dr(h,y,E,S){var F=h.sel.ranges.slice(0);F[y]=E,Uo(h,Ar(h.cm,F,h.sel.primIndex),S)}function bu(h,y,E,S){Uo(h,Oa(y,E),S)}function XA(h,y,E){var S={ranges:y.ranges,update:function(F){this.ranges=[];for(var Z=0;Z<F.length;Z++)this.ranges[Z]=new Yi(Ci(h,F[Z].anchor),Ci(h,F[Z].head))},origin:E&&E.origin};return nt(h,"beforeSelectionChange",h,S),h.cm&&nt(h.cm,"beforeSelectionChange",h.cm,S),S.ranges!=y.ranges?Ar(h.cm,S.ranges,S.ranges.length-1):y}function JA(h,y,E){var S=h.history.done,F=Un(S);F&&F.ranges?(S[S.length-1]=y,Ta(h,y,E)):Uo(h,y,E)}function Uo(h,y,E){Ta(h,y,E),bo(h,h.sel,h.cm?h.cm.curOp.id:NaN,E)}function Ta(h,y,E){(xn(h,"beforeSelectionChange")||h.cm&&xn(h.cm,"beforeSelectionChange"))&&(y=XA(h,y,E));var S=E&&E.bias||(sr(y.primary().head,h.sel.primary().head)<0?-1:1);La(h,xu(h,y,S,!0)),!(E&&E.scroll===!1)&&h.cm&&h.cm.getOption("readOnly")!="nocursor"&&_s(h.cm)}function La(h,y){y.equals(h.sel)||(h.sel=y,h.cm&&(h.cm.curOp.updateInput=1,h.cm.curOp.selectionChanged=!0,Tn(h.cm)),Fs(h,"cursorActivity",h))}function eu(h){La(h,xu(h,h.sel,null,!1))}function xu(h,y,E,S){for(var F,Z=0;Z<y.ranges.length;Z++){var de=y.ranges[Z],_e=y.ranges.length==h.sel.ranges.length&&h.sel.ranges[Z],Re=Ms(h,de.anchor,_e&&_e.anchor,E,S),Ue=de.head==de.anchor?Re:Ms(h,de.head,_e&&_e.head,E,S);(F||Re!=de.anchor||Ue!=de.head)&&(F||(F=y.ranges.slice(0,Z)),F[Z]=new Yi(Re,Ue))}return F?Ar(h.cm,F,y.primIndex):y}function Oo(h,y,E,S,F){var Z=Sr(h,y.line);if(Z.markedSpans)for(var de=0;de<Z.markedSpans.length;++de){var _e=Z.markedSpans[de],Re=_e.marker,Ue="selectLeft"in Re?!Re.selectLeft:Re.inclusiveLeft,yt="selectRight"in Re?!Re.selectRight:Re.inclusiveRight;if((_e.from==null||(Ue?_e.from<=y.ch:_e.from<y.ch))&&(_e.to==null||(yt?_e.to>=y.ch:_e.to>y.ch))){if(F&&(nt(Re,"beforeCursorEnter"),Re.explicitlyCleared))if(Z.markedSpans){--de;continue}else break;if(!Re.atomic)continue;if(E){var Ot=Re.find(S<0?1:-1),Jt=void 0;if((S<0?yt:Ue)&&(Ot=tu(h,Ot,-S,Ot&&Ot.line==y.line?Z:null)),Ot&&Ot.line==y.line&&(Jt=sr(Ot,E))&&(S<0?Jt<0:Jt>0))return Oo(h,Ot,y,S,F)}var qt=Re.find(S<0?-1:1);return(S<0?Ue:yt)&&(qt=tu(h,qt,S,qt.line==y.line?Z:null)),qt?Oo(h,qt,y,S,F):null}}return y}function Ms(h,y,E,S,F){var Z=S||1,de=Oo(h,y,E,Z,F)||!F&&Oo(h,y,E,Z,!0)||Oo(h,y,E,-Z,F)||!F&&Oo(h,y,E,-Z,!0);return de||(h.cantEdit=!0,cn(h.first,0))}function tu(h,y,E,S){return E<0&&y.ch==0?y.line>h.first?Ci(h,cn(y.line-1)):null:E>0&&y.ch==(S||Sr(h,y.line)).text.length?y.line<h.first+h.size-1?cn(y.line+1,0):null:new cn(y.line,y.ch+E)}function dl(h){h.setSelection(cn(h.firstLine(),0),cn(h.lastLine()),wt)}function cc(h,y,E){var S={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return S.canceled=!0}};return E&&(S.update=function(F,Z,de,_e){F&&(S.from=Ci(h,F)),Z&&(S.to=Ci(h,Z)),de&&(S.text=de),_e!==void 0&&(S.origin=_e)}),nt(h,"beforeChange",h,S),h.cm&&nt(h.cm,"beforeChange",h.cm,S),S.canceled?(h.cm&&(h.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function Rc(h,y,E){if(h.cm){if(!h.cm.curOp)return Do(h.cm,Rc)(h,y,E);if(h.cm.state.suppressEdits)return}if(!((xn(h,"beforeChange")||h.cm&&xn(h.cm,"beforeChange"))&&(y=cc(h,y,!0),!y))){var S=Eo&&!E&&Zr(h,y.from,y.to);if(S)for(var F=S.length-1;F>=0;--F)rA(h,{from:S[F].from,to:S[F].to,text:F?[""]:y.text,origin:y.origin});else rA(h,y)}}function rA(h,y){if(!(y.text.length==1&&y.text[0]==""&&sr(y.from,y.to)==0)){var E=Ml(h,y);Kh(h,y,E,h.cm?h.cm.curOp.id:NaN),Fc(h,y,E,Ri(h,y));var S=[];Ka(h,function(F,Z){!Z&&Qe(S,F.history)==-1&&(hh(F.history,y),S.push(F.history)),Fc(F,y,null,Ri(F,y))})}}function ka(h,y,E){var S=h.cm&&h.cm.state.suppressEdits;if(!(S&&!E)){for(var F=h.history,Z,de=h.sel,_e=y=="undo"?F.done:F.undone,Re=y=="undo"?F.undone:F.done,Ue=0;Ue<_e.length&&(Z=_e[Ue],!(E?Z.ranges&&!Z.equals(h.sel):!Z.ranges));Ue++);if(Ue!=_e.length){for(F.lastOrigin=F.lastSelOrigin=null;;)if(Z=_e.pop(),Z.ranges){if(hl(Z,Re),E&&!Z.equals(h.sel)){Uo(h,Z,{clearRedo:!1});return}de=Z}else if(S){_e.push(Z);return}else break;var yt=[];hl(de,Re),Re.push({changes:yt,generation:F.generation}),F.generation=Z.generation||++F.maxGeneration;for(var Ot=xn(h,"beforeChange")||h.cm&&xn(h.cm,"beforeChange"),Jt=function(In){var nr=Z.changes[In];if(nr.origin=y,Ot&&!cc(h,nr,!1))return _e.length=0,{};yt.push(_u(h,nr));var Jn=In?Ml(h,nr):Un(_e);Fc(h,nr,Jn,Pd(h,nr)),!In&&h.cm&&h.cm.scrollIntoView({from:nr.from,to:xa(nr)});var fr=[];Ka(h,function(ar,Tr){!Tr&&Qe(fr,ar.history)==-1&&(hh(ar.history,nr),fr.push(ar.history)),Fc(ar,nr,null,Pd(ar,nr))})},qt=Z.changes.length-1;qt>=0;--qt){var _n=Jt(qt);if(_n)return _n.v}}}}function Dc(h,y){if(y!=0&&(h.first+=y,h.sel=new Ho(wn(h.sel.ranges,function(F){return new Yi(cn(F.anchor.line+y,F.anchor.ch),cn(F.head.line+y,F.head.ch))}),h.sel.primIndex),h.cm)){Ha(h.cm,h.first,h.first-y,y);for(var E=h.cm.display,S=E.viewFrom;S<E.viewTo;S++)qA(h.cm,S,"gutter")}}function Fc(h,y,E,S){if(h.cm&&!h.cm.curOp)return Do(h.cm,Fc)(h,y,E,S);if(y.to.line<h.first){Dc(h,y.text.length-1-(y.to.line-y.from.line));return}if(!(y.from.line>h.lastLine())){if(y.from.line<h.first){var F=y.text.length-1-(h.first-y.from.line);Dc(h,F),y={from:cn(h.first,0),to:cn(y.to.line+F,y.to.ch),text:[Un(y.text)],origin:y.origin}}var Z=h.lastLine();y.to.line>Z&&(y={from:y.from,to:cn(Z,Sr(h,Z).text.length),text:[y.text[0]],origin:y.origin}),y.removed=aa(h,y.from,y.to),E||(E=Ml(h,y)),h.cm?Mu(h.cm,y,S):Ia(h,y,S),Ta(h,E,wt),h.cantEdit&&Ms(h,cn(h.firstLine(),0))&&(h.cantEdit=!1)}}function Mu(h,y,E){var S=h.doc,F=h.display,Z=y.from,de=y.to,_e=!1,Re=Z.line;h.options.lineWrapping||(Re=Ye(Er(Sr(S,Z.line))),S.iter(Re,de.line+1,function(qt){if(qt==F.maxLine)return _e=!0,!0})),S.sel.contains(y.from,y.to)>-1&&Tn(h),Ia(S,y,E,eh(h)),h.options.lineWrapping||(S.iter(Re,Z.line+y.text.length,function(qt){var _n=Oi(qt);_n>F.maxLineLength&&(F.maxLine=qt,F.maxLineLength=_n,F.maxLineChanged=!0,_e=!1)}),_e&&(h.curOp.updateMaxLine=!0)),al(S,Z.line),oh(h,400);var Ue=y.text.length-(de.line-Z.line)-1;y.full?Ha(h):Z.line==de.line&&y.text.length==1&&!Ah(h.doc,y)?qA(h,Z.line,"text"):Ha(h,Z.line,de.line+1,Ue);var yt=xn(h,"changes"),Ot=xn(h,"change");if(Ot||yt){var Jt={from:Z,to:de,text:y.text,removed:y.removed,origin:y.origin};Ot&&Fs(h,"change",h,Jt),yt&&(h.curOp.changeObjs||(h.curOp.changeObjs=[])).push(Jt)}h.display.selForContextMenu=null}function hc(h,y,E,S,F){var Z;S||(S=E),sr(S,E)<0&&(Z=[S,E],E=Z[0],S=Z[1]),typeof y=="string"&&(y=h.splitLines(y)),Rc(h,{from:E,to:S,text:y,origin:F})}function ch(h,y,E,S){E<h.line?h.line+=S:y<h.line&&(h.line=y,h.ch=0)}function TA(h,y,E,S){for(var F=0;F<h.length;++F){var Z=h[F],de=!0;if(Z.ranges){Z.copied||(Z=h[F]=Z.deepCopy(),Z.copied=!0);for(var _e=0;_e<Z.ranges.length;_e++)ch(Z.ranges[_e].anchor,y,E,S),ch(Z.ranges[_e].head,y,E,S);continue}for(var Re=0;Re<Z.changes.length;++Re){var Ue=Z.changes[Re];if(E<Ue.from.line)Ue.from=cn(Ue.from.line+S,Ue.from.ch),Ue.to=cn(Ue.to.line+S,Ue.to.ch);else if(y<=Ue.to.line){de=!1;break}}de||(h.splice(0,F+1),F=0)}}function hh(h,y){var E=y.from.line,S=y.to.line,F=y.text.length-(S-E)-1;TA(h.done,E,S,F),TA(h.undone,E,S,F)}function O(h,y,E,S){var F=y,Z=y;return typeof y=="number"?Z=Sr(h,CA(h,y)):F=Ye(y),F==null?null:(S(Z,F)&&h.cm&&qA(h.cm,F,E),Z)}function a(h){this.lines=h,this.parent=null;for(var y=0,E=0;E<h.length;++E)h[E].parent=this,y+=h[E].height;this.height=y}a.prototype={chunkSize:function(){return this.lines.length},removeInner:function(h,y){for(var E=h,S=h+y;E<S;++E){var F=this.lines[E];this.height-=F.height,Gs(F),Fs(F,"delete")}this.lines.splice(h,y)},collapse:function(h){h.push.apply(h,this.lines)},insertInner:function(h,y,E){this.height+=E,this.lines=this.lines.slice(0,h).concat(y).concat(this.lines.slice(h));for(var S=0;S<y.length;++S)y[S].parent=this},iterN:function(h,y,E){for(var S=h+y;h<S;++h)if(E(this.lines[h]))return!0}};function d(h){this.children=h;for(var y=0,E=0,S=0;S<h.length;++S){var F=h[S];y+=F.chunkSize(),E+=F.height,F.parent=this}this.size=y,this.height=E,this.parent=null}d.prototype={chunkSize:function(){return this.size},removeInner:function(h,y){this.size-=y;for(var E=0;E<this.children.length;++E){var S=this.children[E],F=S.chunkSize();if(h<F){var Z=Math.min(y,F-h),de=S.height;if(S.removeInner(h,Z),this.height-=de-S.height,F==Z&&(this.children.splice(E--,1),S.parent=null),(y-=Z)==0)break;h=0}else h-=F}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof a))){var _e=[];this.collapse(_e),this.children=[new a(_e)],this.children[0].parent=this}},collapse:function(h){for(var y=0;y<this.children.length;++y)this.children[y].collapse(h)},insertInner:function(h,y,E){this.size+=y.length,this.height+=E;for(var S=0;S<this.children.length;++S){var F=this.children[S],Z=F.chunkSize();if(h<=Z){if(F.insertInner(h,y,E),F.lines&&F.lines.length>50){for(var de=F.lines.length%25+25,_e=de;_e<F.lines.length;){var Re=new a(F.lines.slice(_e,_e+=25));F.height-=Re.height,this.children.splice(++S,0,Re),Re.parent=this}F.lines=F.lines.slice(0,de),this.maybeSpill()}break}h-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var h=this;do{var y=h.children.splice(h.children.length-5,5),E=new d(y);if(h.parent){h.size-=E.size,h.height-=E.height;var F=Qe(h.parent.children,h);h.parent.children.splice(F+1,0,E)}else{var S=new d(h.children);S.parent=h,h.children=[S,E],h=S}E.parent=h.parent}while(h.children.length>10);h.parent.maybeSpill()}},iterN:function(h,y,E){for(var S=0;S<this.children.length;++S){var F=this.children[S],Z=F.chunkSize();if(h<Z){var de=Math.min(y,Z-h);if(F.iterN(h,de,E))return!0;if((y-=de)==0)break;h=0}else h-=Z}}};var v=function(h,y,E){if(E)for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);this.doc=h,this.node=y};v.prototype.clear=function(){var h=this.doc.cm,y=this.line.widgets,E=this.line,S=Ye(E);if(!(S==null||!y)){for(var F=0;F<y.length;++F)y[F]==this&&y.splice(F--,1);y.length||(E.widgets=null);var Z=xA(this);ss(E,Math.max(0,E.height-Z)),h&&(js(h,function(){w(h,E,-Z),qA(h,S,"widget")}),Fs(h,"lineWidgetCleared",h,this,S))}},v.prototype.changed=function(){var h=this,y=this.height,E=this.doc.cm,S=this.line;this.height=null;var F=xA(this)-y;F&&(di(this.doc,S)||ss(S,S.height+F),E&&js(E,function(){E.curOp.forceUpdate=!0,w(E,S,F),Fs(E,"lineWidgetChanged",E,h,Ye(S))}))},er(v);function w(h,y,E){zi(y)<(h.curOp&&h.curOp.scrollTop||h.doc.scrollTop)&&mu(h,E)}function I(h,y,E,S){var F=new v(h,E,S),Z=h.cm;return Z&&F.noHScroll&&(Z.display.alignWidgets=!0),O(h,y,"widget",function(de){var _e=de.widgets||(de.widgets=[]);if(F.insertAt==null?_e.push(F):_e.splice(Math.min(_e.length,Math.max(0,F.insertAt)),0,F),F.line=de,Z&&!di(h,de)){var Re=zi(de)<h.scrollTop;ss(de,de.height+xA(F)),Re&&mu(Z,F.height),Z.curOp.forceUpdate=!0}return!0}),Z&&Fs(Z,"lineWidgetAdded",Z,F,typeof y=="number"?y:Ye(y)),F}var z=0,Y=function(h,y){this.lines=[],this.type=y,this.doc=h,this.id=++z};Y.prototype.clear=function(){if(!this.explicitlyCleared){var h=this.doc.cm,y=h&&!h.curOp;if(y&&xl(h),xn(this,"clear")){var E=this.find();E&&Fs(this,"clear",E.from,E.to)}for(var S=null,F=null,Z=0;Z<this.lines.length;++Z){var de=this.lines[Z],_e=Xi(de.markedSpans,this);h&&!this.collapsed?qA(h,Ye(de),"text"):h&&(_e.to!=null&&(F=Ye(de)),_e.from!=null&&(S=Ye(de))),de.markedSpans=Sc(de.markedSpans,_e),_e.from==null&&this.collapsed&&!di(this.doc,de)&&h&&ss(de,Va(h.display))}if(h&&this.collapsed&&!h.options.lineWrapping)for(var Re=0;Re<this.lines.length;++Re){var Ue=Er(this.lines[Re]),yt=Oi(Ue);yt>h.display.maxLineLength&&(h.display.maxLine=Ue,h.display.maxLineLength=yt,h.display.maxLineChanged=!0)}S!=null&&h&&this.collapsed&&Ha(h,S,F+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,h&&eu(h.doc)),h&&Fs(h,"markerCleared",h,this,S,F),y&&Aa(h),this.parent&&this.parent.clear()}},Y.prototype.find=function(h,y){h==null&&this.type=="bookmark"&&(h=1);for(var E,S,F=0;F<this.lines.length;++F){var Z=this.lines[F],de=Xi(Z.markedSpans,this);if(de.from!=null&&(E=cn(y?Z:Ye(Z),de.from),h==-1))return E;if(de.to!=null&&(S=cn(y?Z:Ye(Z),de.to),h==1))return S}return E&&{from:E,to:S}},Y.prototype.changed=function(){var h=this,y=this.find(-1,!0),E=this,S=this.doc.cm;!y||!S||js(S,function(){var F=y.line,Z=Ye(y.line),de=ld(S,Z);if(de&&(QA(de),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!di(E.doc,F)&&E.height!=null){var _e=E.height;E.height=null;var Re=xA(E)-_e;Re&&ss(F,F.height+Re)}Fs(S,"markerChanged",S,h)})},Y.prototype.attachLine=function(h){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(!y.maybeHiddenMarkers||Qe(y.maybeHiddenMarkers,this)==-1)&&(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(h)},Y.prototype.detachLine=function(h){if(this.lines.splice(Qe(this.lines,h),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},er(Y);function X(h,y,E,S,F){if(S&&S.shared)return pe(h,y,E,S,F);if(h.cm&&!h.cm.curOp)return Do(h.cm,X)(h,y,E,S,F);var Z=new Y(h,F),de=sr(y,E);if(S&&Le(S,Z,!1),de>0||de==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=rt("span",[Z.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(ai(h,y.line,y,E,Z)||y.line!=E.line&&ai(h,E.line,y,E,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");as()}Z.addToHistory&&Kh(h,{from:y,to:E,origin:"markText"},h.sel,NaN);var _e=y.line,Re=h.cm,Ue;if(h.iter(_e,E.line+1,function(Ot){Re&&Z.collapsed&&!Re.options.lineWrapping&&Er(Ot)==Re.display.maxLine&&(Ue=!0),Z.collapsed&&_e!=y.line&&ss(Ot,0),Cs(Ot,new yo(Z,_e==y.line?y.ch:null,_e==E.line?E.ch:null),h.cm&&h.cm.curOp),++_e}),Z.collapsed&&h.iter(y.line,E.line+1,function(Ot){di(h,Ot)&&ss(Ot,0)}),Z.clearOnEnter&&mt(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(hs(),(h.history.done.length||h.history.undone.length)&&h.clearHistory()),Z.collapsed&&(Z.id=++z,Z.atomic=!0),Re){if(Ue&&(Re.curOp.updateMaxLine=!0),Z.collapsed)Ha(Re,y.line,E.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var yt=y.line;yt<=E.line;yt++)qA(Re,yt,"text");Z.atomic&&eu(Re.doc),Fs(Re,"markerAdded",Re,Z)}return Z}var ce=function(h,y){this.markers=h,this.primary=y;for(var E=0;E<h.length;++E)h[E].parent=this};ce.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var h=0;h<this.markers.length;++h)this.markers[h].clear();Fs(this,"clear")}},ce.prototype.find=function(h,y){return this.primary.find(h,y)},er(ce);function pe(h,y,E,S,F){S=Le(S),S.shared=!1;var Z=[X(h,y,E,S,F)],de=Z[0],_e=S.widgetNode;return Ka(h,function(Re){_e&&(S.widgetNode=_e.cloneNode(!0)),Z.push(X(Re,Ci(Re,y),Ci(Re,E),S,F));for(var Ue=0;Ue<Re.linked.length;++Ue)if(Re.linked[Ue].isParent)return;de=Un(Z)}),new ce(Z,de)}function Se(h){return h.findMarks(cn(h.first,0),h.clipPos(cn(h.lastLine())),function(y){return y.parent})}function Me(h,y){for(var E=0;E<y.length;E++){var S=y[E],F=S.find(),Z=h.clipPos(F.from),de=h.clipPos(F.to);if(sr(Z,de)){var _e=X(h,Z,de,S.primary,S.primary.type);S.markers.push(_e),_e.parent=S}}}function Fe(h){for(var y=function(S){var F=h[S],Z=[F.primary.doc];Ka(F.primary.doc,function(Re){return Z.push(Re)});for(var de=0;de<F.markers.length;de++){var _e=F.markers[de];Qe(Z,_e.doc)==-1&&(_e.parent=null,F.markers.splice(de--,1))}},E=0;E<h.length;E++)y(E)}var qe=0,it=function(h,y,E,S,F){if(!(this instanceof it))return new it(h,y,E,S,F);E==null&&(E=0),d.call(this,[new a([new Ea("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var Z=cn(E,0);this.sel=Oa(Z),this.history=new uh(null),this.id=++qe,this.modeOption=y,this.lineSep=S,this.direction=F=="rtl"?"rtl":"ltr",this.extend=!1,typeof h=="string"&&(h=this.splitLines(h)),Ia(this,{from:Z,to:Z,text:h}),Uo(this,Oa(Z),wt)};it.prototype=Mr(d.prototype,{constructor:it,iter:function(h,y,E){E?this.iterN(h-this.first,y-h,E):this.iterN(this.first,this.first+this.size,h)},insert:function(h,y){for(var E=0,S=0;S<y.length;++S)E+=y[S].height;this.insertInner(h-this.first,y,E)},remove:function(h,y){this.removeInner(h-this.first,y)},getValue:function(h){var y=vs(this,this.first,this.first+this.size);return h===!1?y:y.join(h||this.lineSeparator())},setValue:ua(function(h){var y=cn(this.first,0),E=this.first+this.size-1;Rc(this,{from:y,to:cn(E,Sr(this,E).text.length),text:this.splitLines(h),origin:"setValue",full:!0},!0),this.cm&&Zs(this.cm,0,0),Uo(this,Oa(y),wt)}),replaceRange:function(h,y,E,S){y=Ci(this,y),E=E?Ci(this,E):y,hc(this,h,y,E,S)},getRange:function(h,y,E){var S=aa(this,Ci(this,h),Ci(this,y));return E===!1?S:E===""?S.join(""):S.join(E||this.lineSeparator())},getLine:function(h){var y=this.getLineHandle(h);return y&&y.text},getLineHandle:function(h){if(gn(this,h))return Sr(this,h)},getLineNumber:function(h){return Ye(h)},getLineHandleVisualStart:function(h){return typeof h=="number"&&(h=Sr(this,h)),Er(h)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(h){return Ci(this,h)},getCursor:function(h){var y=this.sel.primary(),E;return h==null||h=="head"?E=y.head:h=="anchor"?E=y.anchor:h=="end"||h=="to"||h===!1?E=y.to():E=y.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ua(function(h,y,E){bu(this,Ci(this,typeof h=="number"?cn(h,y||0):h),null,E)}),setSelection:ua(function(h,y,E){bu(this,Ci(this,h),Ci(this,y||h),E)}),extendSelection:ua(function(h,y,E){uc(this,Ci(this,h),y&&Ci(this,y),E)}),extendSelections:ua(function(h,y){Ir(this,Hl(this,h),y)}),extendSelectionsBy:ua(function(h,y){var E=wn(this.sel.ranges,h);Ir(this,Hl(this,E),y)}),setSelections:ua(function(h,y,E){if(h.length){for(var S=[],F=0;F<h.length;F++)S[F]=new Yi(Ci(this,h[F].anchor),Ci(this,h[F].head||h[F].anchor));y==null&&(y=Math.min(h.length-1,this.sel.primIndex)),Uo(this,Ar(this.cm,S,y),E)}}),addSelection:ua(function(h,y,E){var S=this.sel.ranges.slice(0);S.push(new Yi(Ci(this,h),Ci(this,y||h))),Uo(this,Ar(this.cm,S,S.length-1),E)}),getSelection:function(h){for(var y=this.sel.ranges,E,S=0;S<y.length;S++){var F=aa(this,y[S].from(),y[S].to());E=E?E.concat(F):F}return h===!1?E:E.join(h||this.lineSeparator())},getSelections:function(h){for(var y=[],E=this.sel.ranges,S=0;S<E.length;S++){var F=aa(this,E[S].from(),E[S].to());h!==!1&&(F=F.join(h||this.lineSeparator())),y[S]=F}return y},replaceSelection:function(h,y,E){for(var S=[],F=0;F<this.sel.ranges.length;F++)S[F]=h;this.replaceSelections(S,y,E||"+input")},replaceSelections:ua(function(h,y,E){for(var S=[],F=this.sel,Z=0;Z<F.ranges.length;Z++){var de=F.ranges[Z];S[Z]={from:de.from(),to:de.to(),text:this.splitLines(h[Z]),origin:E}}for(var _e=y&&y!="end"&&Ac(this,S,y),Re=S.length-1;Re>=0;Re--)Rc(this,S[Re]);_e?JA(this,_e):this.cm&&_s(this.cm)}),undo:ua(function(){ka(this,"undo")}),redo:ua(function(){ka(this,"redo")}),undoSelection:ua(function(){ka(this,"undo",!0)}),redoSelection:ua(function(){ka(this,"redo",!0)}),setExtending:function(h){this.extend=h},getExtending:function(){return this.extend},historySize:function(){for(var h=this.history,y=0,E=0,S=0;S<h.done.length;S++)h.done[S].ranges||++y;for(var F=0;F<h.undone.length;F++)h.undone[F].ranges||++E;return{undo:y,redo:E}},clearHistory:function(){var h=this;this.history=new uh(this.history),Ka(this,function(y){return y.history=h.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(h){return h&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(h){return this.history.generation==(h||this.cleanGeneration)},getHistory:function(){return{done:Pc(this.history.done),undone:Pc(this.history.undone)}},setHistory:function(h){var y=this.history=new uh(this.history);y.done=Pc(h.done.slice(0),null,!0),y.undone=Pc(h.undone.slice(0),null,!0)},setGutterMarker:ua(function(h,y,E){return O(this,h,"gutter",function(S){var F=S.gutterMarkers||(S.gutterMarkers={});return F[y]=E,!E&&he(F)&&(S.gutterMarkers=null),!0})}),clearGutter:ua(function(h){var y=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[h]&&O(y,E,"gutter",function(){return E.gutterMarkers[h]=null,he(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(h){var y;if(typeof h=="number"){if(!gn(this,h)||(y=h,h=Sr(this,h),!h))return null}else if(y=Ye(h),y==null)return null;return{line:y,handle:h,text:h.text,gutterMarkers:h.gutterMarkers,textClass:h.textClass,bgClass:h.bgClass,wrapClass:h.wrapClass,widgets:h.widgets}},addLineClass:ua(function(h,y,E){return O(this,h,y=="gutter"?"gutter":"class",function(S){var F=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass";if(!S[F])S[F]=E;else{if(we(E).test(S[F]))return!1;S[F]+=" "+E}return!0})}),removeLineClass:ua(function(h,y,E){return O(this,h,y=="gutter"?"gutter":"class",function(S){var F=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass",Z=S[F];if(Z)if(E==null)S[F]=null;else{var de=Z.match(we(E));if(!de)return!1;var _e=de.index+de[0].length;S[F]=Z.slice(0,de.index)+(!de.index||_e==Z.length?"":" ")+Z.slice(_e)||null}else return!1;return!0})}),addLineWidget:ua(function(h,y,E){return I(this,h,y,E)}),removeLineWidget:function(h){h.clear()},markText:function(h,y,E){return X(this,Ci(this,h),Ci(this,y),E,E&&E.type||"range")},setBookmark:function(h,y){var E={replacedWith:y&&(y.nodeType==null?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return h=Ci(this,h),X(this,h,h,E,"bookmark")},findMarksAt:function(h){h=Ci(this,h);var y=[],E=Sr(this,h.line).markedSpans;if(E)for(var S=0;S<E.length;++S){var F=E[S];(F.from==null||F.from<=h.ch)&&(F.to==null||F.to>=h.ch)&&y.push(F.marker.parent||F.marker)}return y},findMarks:function(h,y,E){h=Ci(this,h),y=Ci(this,y);var S=[],F=h.line;return this.iter(h.line,y.line+1,function(Z){var de=Z.markedSpans;if(de)for(var _e=0;_e<de.length;_e++){var Re=de[_e];!(Re.to!=null&&F==h.line&&h.ch>=Re.to||Re.from==null&&F!=h.line||Re.from!=null&&F==y.line&&Re.from>=y.ch)&&(!E||E(Re.marker))&&S.push(Re.marker.parent||Re.marker)}++F}),S},getAllMarks:function(){var h=[];return this.iter(function(y){var E=y.markedSpans;if(E)for(var S=0;S<E.length;++S)E[S].from!=null&&h.push(E[S].marker)}),h},posFromIndex:function(h){var y,E=this.first,S=this.lineSeparator().length;return this.iter(function(F){var Z=F.text.length+S;if(Z>h)return y=h,!0;h-=Z,++E}),Ci(this,cn(E,y))},indexFromPos:function(h){h=Ci(this,h);var y=h.ch;if(h.line<this.first||h.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,h.line,function(S){y+=S.text.length+E}),y},copy:function(h){var y=new it(vs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,h&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(h){h||(h={});var y=this.first,E=this.first+this.size;h.from!=null&&h.from>y&&(y=h.from),h.to!=null&&h.to<E&&(E=h.to);var S=new it(vs(this,y,E),h.mode||this.modeOption,y,this.lineSep,this.direction);return h.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:h.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:h.sharedHist}],Me(S,Se(this)),S},unlinkDoc:function(h){if(h instanceof Qo&&(h=h.doc),this.linked)for(var y=0;y<this.linked.length;++y){var E=this.linked[y];if(E.doc==h){this.linked.splice(y,1),h.unlinkDoc(this),Fe(Se(this));break}}if(h.history==this.history){var S=[h.id];Ka(h,function(F){return S.push(F.id)},!0),h.history=new uh(null),h.history.done=Pc(this.history.done,S),h.history.undone=Pc(this.history.undone,S)}},iterLinkedDocs:function(h){Ka(this,h)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(h){return this.lineSep?h.split(this.lineSep):is(h)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ua(function(h){h!="rtl"&&(h="ltr"),h!=this.direction&&(this.direction=h,this.iter(function(y){return y.order=null}),this.cm&&Cu(this.cm))})}),it.prototype.eachLine=it.prototype.iter;var lt=0;function ht(h){var y=this;if(xt(y),!(en(y,h)||du(y.display,h))){Qn(h),f&&(lt=+new Date);var E=bl(y,h,!0),S=h.dataTransfer.files;if(!(!E||y.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var F=S.length,Z=Array(F),de=0,_e=function(){++de==F&&Do(y,function(){E=Ci(y.doc,E);var qt={from:E,to:E,text:y.doc.splitLines(Z.filter(function(_n){return _n!=null}).join(y.doc.lineSeparator())),origin:"paste"};Rc(y.doc,qt),JA(y.doc,Oa(Ci(y.doc,E),Ci(y.doc,xa(qt))))})()},Re=function(qt,_n){if(y.options.allowDropFileTypes&&Qe(y.options.allowDropFileTypes,qt.type)==-1){_e();return}var In=new FileReader;In.onerror=function(){return _e()},In.onload=function(){var nr=In.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(nr)){_e();return}Z[_n]=nr,_e()},In.readAsText(qt)},Ue=0;Ue<S.length;Ue++)Re(S[Ue],Ue);else{if(y.state.draggingText&&y.doc.sel.contains(E)>-1){y.state.draggingText(h),setTimeout(function(){return y.display.input.focus()},20);return}try{var yt=h.dataTransfer.getData("Text");if(yt){var Ot;if(y.state.draggingText&&!y.state.draggingText.copy&&(Ot=y.listSelections()),Ta(y.doc,Oa(E,E)),Ot)for(var Jt=0;Jt<Ot.length;++Jt)hc(y.doc,"",Ot[Jt].anchor,Ot[Jt].head,"drag");y.replaceSelection(yt,"around","paste"),y.display.input.focus()}}catch{}}}}function bt(h,y){if(f&&(!h.state.draggingText||+new Date-lt<100)){Br(y);return}if(!(en(h,y)||du(h.display,y))&&(y.dataTransfer.setData("Text",h.getSelection()),y.dataTransfer.effectAllowed="copyMove",y.dataTransfer.setDragImage&&!G)){var E=be("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",U&&(E.width=E.height=1,h.display.wrapper.appendChild(E),E._top=E.offsetTop),y.dataTransfer.setDragImage(E,0,0),U&&E.parentNode.removeChild(E)}}function vt(h,y){var E=bl(h,y);if(E){var S=document.createDocumentFragment();Qi(h,E,S),h.display.dragCursor||(h.display.dragCursor=be("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),h.display.lineSpace.insertBefore(h.display.dragCursor,h.display.cursorDiv)),We(h.display.dragCursor,S)}}function xt(h){h.display.dragCursor&&(h.display.lineSpace.removeChild(h.display.dragCursor),h.display.dragCursor=null)}function Dt(h){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),E=[],S=0;S<y.length;S++){var F=y[S].CodeMirror;F&&E.push(F)}E.length&&E[0].operation(function(){for(var Z=0;Z<E.length;Z++)h(E[Z])})}}var Lt=!1;function St(){Lt||(Gt(),Lt=!0)}function Gt(){var h;mt(window,"resize",function(){h==null&&(h=setTimeout(function(){h=null,Dt(rn)},100))}),mt(window,"blur",function(){return Dt(ls)})}function rn(h){var y=h.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,h.setSize()}for(var Ht={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},tn=0;tn<10;tn++)Ht[tn+48]=Ht[tn+96]=String(tn);for(var sn=65;sn<=90;sn++)Ht[sn]=String.fromCharCode(sn);for(var Yn=1;Yn<=12;Yn++)Ht[Yn+111]=Ht[Yn+63235]="F"+Yn;var Gn={};Gn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Gn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Gn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Gn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Gn.default=H?Gn.macDefault:Gn.pcDefault;function On(h){var y=h.split(/-(?!$)/);h=y[y.length-1];for(var E,S,F,Z,de=0;de<y.length-1;de++){var _e=y[de];if(/^(cmd|meta|m)$/i.test(_e))Z=!0;else if(/^a(lt)?$/i.test(_e))E=!0;else if(/^(c|ctrl|control)$/i.test(_e))S=!0;else if(/^s(hift)?$/i.test(_e))F=!0;else throw new Error("Unrecognized modifier name: "+_e)}return E&&(h="Alt-"+h),S&&(h="Ctrl-"+h),Z&&(h="Cmd-"+h),F&&(h="Shift-"+h),h}function _r(h){var y={};for(var E in h)if(h.hasOwnProperty(E)){var S=h[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(S=="..."){delete h[E];continue}for(var F=wn(E.split(" "),On),Z=0;Z<F.length;Z++){var de=void 0,_e=void 0;Z==F.length-1?(_e=F.join(" "),de=S):(_e=F.slice(0,Z+1).join(" "),de="...");var Re=y[_e];if(!Re)y[_e]=de;else if(Re!=de)throw new Error("Inconsistent bindings for "+_e)}delete h[E]}for(var Ue in y)h[Ue]=y[Ue];return h}function ui(h,y,E,S){y=Xo(y);var F=y.call?y.call(h,S):y[h];if(F===!1)return"nothing";if(F==="...")return"multi";if(F!=null&&E(F))return"handled";if(y.fallthrough){if(Object.prototype.toString.call(y.fallthrough)!="[object Array]")return ui(h,y.fallthrough,E,S);for(var Z=0;Z<y.fallthrough.length;Z++){var de=ui(h,y.fallthrough[Z],E,S);if(de)return de}}}function xo(h){var y=typeof h=="string"?h:Ht[h.keyCode];return y=="Ctrl"||y=="Alt"||y=="Shift"||y=="Mod"}function Zo(h,y,E){var S=h;return y.altKey&&S!="Alt"&&(h="Alt-"+h),(me?y.metaKey:y.ctrlKey)&&S!="Ctrl"&&(h="Ctrl-"+h),(me?y.ctrlKey:y.metaKey)&&S!="Mod"&&(h="Cmd-"+h),!E&&y.shiftKey&&S!="Shift"&&(h="Shift-"+h),h}function Fo(h,y){if(U&&h.keyCode==34&&h.char)return!1;var E=Ht[h.keyCode];return E==null||h.altGraphKey?!1:(h.keyCode==3&&h.code&&(E=h.code),Zo(E,h,y))}function Xo(h){return typeof h=="string"?Gn[h]:h}function As(h,y){for(var E=h.doc.sel.ranges,S=[],F=0;F<E.length;F++){for(var Z=y(E[F]);S.length&&sr(Z.from,Un(S).to)<=0;){var de=S.pop();if(sr(de.from,Z.from)<0){Z.from=de.from;break}}S.push(Z)}js(h,function(){for(var _e=S.length-1;_e>=0;_e--)hc(h.doc,"",S[_e].from,S[_e].to,"+delete");_s(h)})}function wi(h,y,E){var S=fe(h.text,y+E,E);return S<0||S>h.text.length?null:S}function Io(h,y,E){var S=wi(h,y.ch,E);return S==null?null:new cn(y.line,S,E<0?"after":"before")}function Ws(h,y,E,S,F){if(h){y.doc.direction=="rtl"&&(F=-F);var Z=Ze(E,y.doc.direction);if(Z){var de=F<0?Un(Z):Z[0],_e=F<0==(de.level==1),Re=_e?"after":"before",Ue;if(de.level>0||y.doc.direction=="rtl"){var yt=_l(y,E);Ue=F<0?E.text.length-1:0;var Ot=ll(y,yt,Ue).top;Ue=Oe(function(Jt){return ll(y,yt,Jt).top==Ot},F<0==(de.level==1)?de.from:de.to-1,Ue),Re=="before"&&(Ue=wi(E,Ue,1))}else Ue=F<0?de.to:de.from;return new cn(S,Ue,Re)}}return new cn(S,F<0?E.text.length:0,F<0?"before":"after")}function ws(h,y,E,S){var F=Ze(y,h.doc.direction);if(!F)return Io(y,E,S);E.ch>=y.text.length?(E.ch=y.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var Z=$e(F,E.ch,E.sticky),de=F[Z];if(h.doc.direction=="ltr"&&de.level%2==0&&(S>0?de.to>E.ch:de.from<E.ch))return Io(y,E,S);var _e=function(Jn,fr){return wi(y,Jn instanceof cn?Jn.ch:Jn,fr)},Re,Ue=function(Jn){return h.options.lineWrapping?(Re=Re||_l(h,y),ds(h,y,Re,Jn)):{begin:0,end:y.text.length}},yt=Ue(E.sticky=="before"?_e(E,-1):E.ch);if(h.doc.direction=="rtl"||de.level==1){var Ot=de.level==1==S<0,Jt=_e(E,Ot?1:-1);if(Jt!=null&&(Ot?Jt<=de.to&&Jt<=yt.end:Jt>=de.from&&Jt>=yt.begin)){var qt=Ot?"before":"after";return new cn(E.line,Jt,qt)}}var _n=function(Jn,fr,ar){for(var Tr=function(ci,Qs){return Qs?new cn(E.line,_e(ci,1),"before"):new cn(E.line,ci,"after")};Jn>=0&&Jn<F.length;Jn+=fr){var ri=F[Jn],Or=fr>0==(ri.level!=1),to=Or?ar.begin:_e(ar.end,-1);if(ri.from<=to&&to<ri.to||(to=Or?ri.from:_e(ri.to,-1),ar.begin<=to&&to<ar.end))return Tr(to,Or)}},In=_n(Z+S,S,yt);if(In)return In;var nr=S>0?yt.end:_e(yt.begin,-1);return nr!=null&&!(S>0&&nr==y.text.length)&&(In=_n(S>0?0:F.length-1,S,Ue(nr)),In)?In:null}var ha={selectAll:dl,singleSelection:function(h){return h.setSelection(h.getCursor("anchor"),h.getCursor("head"),wt)},killLine:function(h){return As(h,function(y){if(y.empty()){var E=Sr(h.doc,y.head.line).text.length;return y.head.ch==E&&y.head.line<h.lastLine()?{from:y.head,to:cn(y.head.line+1,0)}:{from:y.head,to:cn(y.head.line,E)}}else return{from:y.from(),to:y.to()}})},deleteLine:function(h){return As(h,function(y){return{from:cn(y.from().line,0),to:Ci(h.doc,cn(y.to().line+1,0))}})},delLineLeft:function(h){return As(h,function(y){return{from:cn(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(h){return As(h,function(y){var E=h.charCoords(y.head,"div").top+5,S=h.coordsChar({left:0,top:E},"div");return{from:S,to:y.from()}})},delWrappedLineRight:function(h){return As(h,function(y){var E=h.charCoords(y.head,"div").top+5,S=h.coordsChar({left:h.display.lineDiv.offsetWidth+100,top:E},"div");return{from:y.from(),to:S}})},undo:function(h){return h.undo()},redo:function(h){return h.redo()},undoSelection:function(h){return h.undoSelection()},redoSelection:function(h){return h.redoSelection()},goDocStart:function(h){return h.extendSelection(cn(h.firstLine(),0))},goDocEnd:function(h){return h.extendSelection(cn(h.lastLine()))},goLineStart:function(h){return h.extendSelectionsBy(function(y){return Js(h,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(h){return h.extendSelectionsBy(function(y){return ju(h,y.head)},{origin:"+move",bias:1})},goLineEnd:function(h){return h.extendSelectionsBy(function(y){return nu(h,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(h){return h.extendSelectionsBy(function(y){var E=h.cursorCoords(y.head,"div").top+5;return h.coordsChar({left:h.display.lineDiv.offsetWidth+100,top:E},"div")},Ft)},goLineLeft:function(h){return h.extendSelectionsBy(function(y){var E=h.cursorCoords(y.head,"div").top+5;return h.coordsChar({left:0,top:E},"div")},Ft)},goLineLeftSmart:function(h){return h.extendSelectionsBy(function(y){var E=h.cursorCoords(y.head,"div").top+5,S=h.coordsChar({left:0,top:E},"div");return S.ch<h.getLine(S.line).search(/\S/)?ju(h,y.head):S},Ft)},goLineUp:function(h){return h.moveV(-1,"line")},goLineDown:function(h){return h.moveV(1,"line")},goPageUp:function(h){return h.moveV(-1,"page")},goPageDown:function(h){return h.moveV(1,"page")},goCharLeft:function(h){return h.moveH(-1,"char")},goCharRight:function(h){return h.moveH(1,"char")},goColumnLeft:function(h){return h.moveH(-1,"column")},goColumnRight:function(h){return h.moveH(1,"column")},goWordLeft:function(h){return h.moveH(-1,"word")},goGroupRight:function(h){return h.moveH(1,"group")},goGroupLeft:function(h){return h.moveH(-1,"group")},goWordRight:function(h){return h.moveH(1,"word")},delCharBefore:function(h){return h.deleteH(-1,"codepoint")},delCharAfter:function(h){return h.deleteH(1,"char")},delWordBefore:function(h){return h.deleteH(-1,"word")},delWordAfter:function(h){return h.deleteH(1,"word")},delGroupBefore:function(h){return h.deleteH(-1,"group")},delGroupAfter:function(h){return h.deleteH(1,"group")},indentAuto:function(h){return h.indentSelection("smart")},indentMore:function(h){return h.indentSelection("add")},indentLess:function(h){return h.indentSelection("subtract")},insertTab:function(h){return h.replaceSelection("	")},insertSoftTab:function(h){for(var y=[],E=h.listSelections(),S=h.options.tabSize,F=0;F<E.length;F++){var Z=E[F].from(),de=Pe(h.getLine(Z.line),Z.ch,S);y.push(jt(S-de%S))}h.replaceSelections(y)},defaultTab:function(h){h.somethingSelected()?h.indentSelection("add"):h.execCommand("insertTab")},transposeChars:function(h){return js(h,function(){for(var y=h.listSelections(),E=[],S=0;S<y.length;S++)if(y[S].empty()){var F=y[S].head,Z=Sr(h.doc,F.line).text;if(Z){if(F.ch==Z.length&&(F=new cn(F.line,F.ch-1)),F.ch>0)F=new cn(F.line,F.ch+1),h.replaceRange(Z.charAt(F.ch-1)+Z.charAt(F.ch-2),cn(F.line,F.ch-2),F,"+transpose");else if(F.line>h.doc.first){var de=Sr(h.doc,F.line-1).text;de&&(F=new cn(F.line,1),h.replaceRange(Z.charAt(0)+h.doc.lineSeparator()+de.charAt(de.length-1),cn(F.line-1,de.length-1),F,"+transpose"))}}E.push(new Yi(F,F))}h.setSelections(E)})},newlineAndIndent:function(h){return js(h,function(){for(var y=h.listSelections(),E=y.length-1;E>=0;E--)h.replaceRange(h.doc.lineSeparator(),y[E].anchor,y[E].head,"+input");y=h.listSelections();for(var S=0;S<y.length;S++)h.indentLine(y[S].from().line,null,!0);_s(h)})},openLine:function(h){return h.replaceSelection(`
`,"start")},toggleOverwrite:function(h){return h.toggleOverwrite()}};function Js(h,y){var E=Sr(h.doc,y),S=Er(E);return S!=E&&(y=Ye(S)),Ws(!0,h,S,y,1)}function nu(h,y){var E=Sr(h.doc,y),S=Xr(E);return S!=E&&(y=Ye(S)),Ws(!0,h,E,y,-1)}function ju(h,y){var E=Js(h,y.line),S=Sr(h.doc,E.line),F=Ze(S,h.doc.direction);if(!F||F[0].level==0){var Z=Math.max(E.ch,S.text.search(/\S/)),de=y.line==E.line&&y.ch<=Z&&y.ch;return cn(E.line,de?0:Z,E.sticky)}return E}function iA(h,y,E){if(typeof y=="string"&&(y=ha[y],!y))return!1;h.display.input.ensurePolled();var S=h.display.shift,F=!1;try{h.isReadOnly()&&(h.state.suppressEdits=!0),E&&(h.display.shift=!1),F=y(h)!=gt}finally{h.display.shift=S,h.state.suppressEdits=!1}return F}function Lh(h,y,E){for(var S=0;S<h.state.keyMaps.length;S++){var F=ui(y,h.state.keyMaps[S],E,h);if(F)return F}return h.options.extraKeys&&ui(y,h.options.extraKeys,E,h)||ui(y,h.options.keyMap,E,h)}var Uh=new ke;function wu(h,y,E,S){var F=h.state.keySeq;if(F){if(xo(y))return"handled";if(/\'$/.test(y)?h.state.keySeq=null:Uh.set(50,function(){h.state.keySeq==F&&(h.state.keySeq=null,h.display.input.reset())}),Kc(h,F+" "+y,E,S))return!0}return Kc(h,y,E,S)}function Kc(h,y,E,S){var F=Lh(h,y,S);return F=="multi"&&(h.state.keySeq=y),F=="handled"&&Fs(h,"keyHandled",h,y,E),(F=="handled"||F=="multi")&&(Qn(E),pu(h)),!!F}function El(h,y){var E=Fo(y,!0);return E?y.shiftKey&&!h.state.keySeq?wu(h,"Shift-"+E,y,function(S){return iA(h,S,!0)})||wu(h,E,y,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return iA(h,S)}):wu(h,E,y,function(S){return iA(h,S)}):!1}function Wu(h,y,E){return wu(h,"'"+E+"'",y,function(S){return iA(h,S,!0)})}var fl=null;function Qu(h){var y=this;if(!(h.target&&h.target!=y.display.input.getField())&&(y.curOp.focus=Je(kt(y)),!en(y,h))){f&&C<11&&h.keyCode==27&&(h.returnValue=!1);var E=h.keyCode;y.display.shift=E==16||h.shiftKey;var S=El(y,h);U&&(fl=S?E:null,!S&&E==88&&!_i&&(H?h.metaKey:h.ctrlKey)&&y.replaceSelection("",null,"cut")),i&&!H&&!S&&E==46&&h.shiftKey&&!h.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)&&zo(y)}}function zo(h){var y=h.display.lineDiv;ze(y,"CodeMirror-crosshair");function E(S){(S.keyCode==18||!S.altKey)&&(Ee(y,"CodeMirror-crosshair"),It(document,"keyup",E),It(document,"mouseover",E))}mt(document,"keyup",E),mt(document,"mouseover",E)}function ms(h){h.keyCode==16&&(this.doc.sel.shift=!1),en(this,h)}function jl(h){var y=this;if(!(h.target&&h.target!=y.display.input.getField())&&!(du(y.display,h)||en(y,h)||h.ctrlKey&&!h.altKey||H&&h.metaKey)){var E=h.keyCode,S=h.charCode;if(U&&E==fl){fl=null,Qn(h);return}if(!(U&&(!h.which||h.which<10)&&El(y,h))){var F=String.fromCharCode(S??E);F!="\b"&&(Wu(y,h,F)||y.display.input.onKeyPress(h))}}}var Ua=400,dc=function(h,y,E){this.time=h,this.pos=y,this.button=E};dc.prototype.compare=function(h,y,E){return this.time+Ua>h&&sr(y,this.pos)==0&&E==this.button};var oA,ea;function kA(h,y){var E=+new Date;return ea&&ea.compare(E,h,y)?(oA=ea=null,"triple"):oA&&oA.compare(E,h,y)?(ea=new dc(E,h,y),oA=null,"double"):(oA=new dc(E,h,y),ea=null,"single")}function Su(h){var y=this,E=y.display;if(!(en(y,h)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=h.shiftKey,du(E,h)){M||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!dd(y,h)){var S=bl(y,h),F=or(h),Z=S?kA(S,F):"single";Bt(y).focus(),F==1&&y.state.selectingText&&y.state.selectingText(h),!(S&&gf(y,F,S,Z,h))&&(F==1?S?zh(y,S,Z,h):br(h)==E.scroller&&Qn(h):F==2?(S&&uc(y.doc,S),setTimeout(function(){return E.input.focus()},20)):F==3&&(ge?y.display.input.onContextMenu(h):nh(y)))}}}function gf(h,y,E,S,F){var Z="Click";return S=="double"?Z="Double"+Z:S=="triple"&&(Z="Triple"+Z),Z=(y==1?"Left":y==2?"Middle":"Right")+Z,wu(h,Zo(Z,F),F,function(de){if(typeof de=="string"&&(de=ha[de]),!de)return!1;var _e=!1;try{h.isReadOnly()&&(h.state.suppressEdits=!0),_e=de(h,E)!=gt}finally{h.state.suppressEdits=!1}return _e})}function Xa(h,y,E){var S=h.getOption("configureMouse"),F=S?S(h,y,E):{};if(F.unit==null){var Z=re?E.shiftKey&&E.metaKey:E.altKey;F.unit=Z?"rectangle":y=="single"?"char":y=="double"?"word":"line"}return(F.extend==null||h.doc.extend)&&(F.extend=h.doc.extend||E.shiftKey),F.addNew==null&&(F.addNew=H?E.metaKey:E.ctrlKey),F.moveOnDrag==null&&(F.moveOnDrag=!(H?E.altKey:E.ctrlKey)),F}function zh(h,y,E,S){f?setTimeout(Tt(tA,h),0):h.curOp.focus=Je(kt(h));var F=Xa(h,E,S),Z=h.doc.sel,de;h.options.dragDrop&&ti&&!h.isReadOnly()&&E=="single"&&(de=Z.contains(y))>-1&&(sr((de=Z.ranges[de]).from(),y)<0||y.xRel>0)&&(sr(de.to(),y)>0||y.xRel<0)?Rd(h,S,y,F):Nh(h,S,y,F)}function Rd(h,y,E,S){var F=h.display,Z=!1,de=Do(h,function(Ue){M&&(F.scroller.draggable=!1),h.state.draggingText=!1,h.state.delayingBlurEvent&&(h.hasFocus()?h.state.delayingBlurEvent=!1:nh(h)),It(F.wrapper.ownerDocument,"mouseup",de),It(F.wrapper.ownerDocument,"mousemove",_e),It(F.scroller,"dragstart",Re),It(F.scroller,"drop",de),Z||(Qn(Ue),S.addNew||uc(h.doc,E,null,null,S.extend),M&&!G||f&&C==9?setTimeout(function(){F.wrapper.ownerDocument.body.focus({preventScroll:!0}),F.input.focus()},20):F.input.focus())}),_e=function(Ue){Z=Z||Math.abs(y.clientX-Ue.clientX)+Math.abs(y.clientY-Ue.clientY)>=10},Re=function(){return Z=!0};M&&(F.scroller.draggable=!0),h.state.draggingText=de,de.copy=!S.moveOnDrag,mt(F.wrapper.ownerDocument,"mouseup",de),mt(F.wrapper.ownerDocument,"mousemove",_e),mt(F.scroller,"dragstart",Re),mt(F.scroller,"drop",de),h.state.delayingBlurEvent=!0,setTimeout(function(){return F.input.focus()},20),F.scroller.dragDrop&&F.scroller.dragDrop()}function Yu(h,y,E){if(E=="char")return new Yi(y,y);if(E=="word")return h.findWordAt(y);if(E=="line")return new Yi(cn(y.line,0),Ci(h.doc,cn(y.line+1,0)));var S=E(h,y);return new Yi(S.from,S.to)}function Nh(h,y,E,S){f&&nh(h);var F=h.display,Z=h.doc;Qn(y);var de,_e,Re=Z.sel,Ue=Re.ranges;if(S.addNew&&!S.extend?(_e=Z.sel.contains(E),_e>-1?de=Ue[_e]:de=new Yi(E,E)):(de=Z.sel.primary(),_e=Z.sel.primIndex),S.unit=="rectangle")S.addNew||(de=new Yi(E,E)),E=bl(h,y,!0,!0),_e=-1;else{var yt=Yu(h,E,S.unit);S.extend?de=Wo(de,yt.anchor,yt.head,S.extend):de=yt}S.addNew?_e==-1?(_e=Ue.length,Uo(Z,Ar(h,Ue.concat([de]),_e),{scroll:!1,origin:"*mouse"})):Ue.length>1&&Ue[_e].empty()&&S.unit=="char"&&!S.extend?(Uo(Z,Ar(h,Ue.slice(0,_e).concat(Ue.slice(_e+1)),0),{scroll:!1,origin:"*mouse"}),Re=Z.sel):Dr(Z,_e,de,Qt):(_e=0,Uo(Z,new Ho([de],0),Qt),Re=Z.sel);var Ot=E;function Jt(ar){if(sr(Ot,ar)!=0)if(Ot=ar,S.unit=="rectangle"){for(var Tr=[],ri=h.options.tabSize,Or=Pe(Sr(Z,E.line).text,E.ch,ri),to=Pe(Sr(Z,ar.line).text,ar.ch,ri),ci=Math.min(Or,to),Qs=Math.max(Or,to),Ys=Math.min(E.line,ar.line),qs=Math.min(h.lastLine(),Math.max(E.line,ar.line));Ys<=qs;Ys++){var da=Sr(Z,Ys).text,ta=ln(da,ci,ri);ci==Qs?Tr.push(new Yi(cn(Ys,ta),cn(Ys,ta))):da.length>ta&&Tr.push(new Yi(cn(Ys,ta),cn(Ys,ln(da,Qs,ri))))}Tr.length||Tr.push(new Yi(E,E)),Uo(Z,Ar(h,Re.ranges.slice(0,_e).concat(Tr),_e),{origin:"*mouse",scroll:!1}),h.scrollIntoView(ar)}else{var lA=de,za=Yu(h,ar,S.unit),na=lA.anchor,Jo;sr(za.anchor,na)>0?(Jo=za.head,na=va(lA.from(),za.anchor)):(Jo=za.anchor,na=xs(lA.to(),za.head));var hi=Re.ranges.slice(0);hi[_e]=ru(h,new Yi(Ci(Z,na),Jo)),Uo(Z,Ar(h,hi,_e),Qt)}}var qt=F.wrapper.getBoundingClientRect(),_n=0;function In(ar){var Tr=++_n,ri=bl(h,ar,!0,S.unit=="rectangle");if(ri)if(sr(ri,Ot)!=0){h.curOp.focus=Je(kt(h)),Jt(ri);var Or=wA(F,Z);(ri.line>=Or.to||ri.line<Or.from)&&setTimeout(Do(h,function(){_n==Tr&&In(ar)}),150)}else{var to=ar.clientY<qt.top?-20:ar.clientY>qt.bottom?20:0;to&&setTimeout(Do(h,function(){_n==Tr&&(F.scroller.scrollTop+=to,In(ar))}),50)}}function nr(ar){h.state.selectingText=!1,_n=1/0,ar&&(Qn(ar),F.input.focus()),It(F.wrapper.ownerDocument,"mousemove",Jn),It(F.wrapper.ownerDocument,"mouseup",fr),Z.history.lastSelOrigin=null}var Jn=Do(h,function(ar){ar.buttons===0||!or(ar)?nr(ar):In(ar)}),fr=Do(h,nr);h.state.selectingText=fr,mt(F.wrapper.ownerDocument,"mousemove",Jn),mt(F.wrapper.ownerDocument,"mouseup",fr)}function ru(h,y){var E=y.anchor,S=y.head,F=Sr(h.doc,E.line);if(sr(E,S)==0&&E.sticky==S.sticky)return y;var Z=Ze(F);if(!Z)return y;var de=$e(Z,E.ch,E.sticky),_e=Z[de];if(_e.from!=E.ch&&_e.to!=E.ch)return y;var Re=de+(_e.from==E.ch==(_e.level!=1)?0:1);if(Re==0||Re==Z.length)return y;var Ue;if(S.line!=E.line)Ue=(S.line-E.line)*(h.doc.direction=="ltr"?1:-1)>0;else{var yt=$e(Z,S.ch,S.sticky),Ot=yt-de||(S.ch-E.ch)*(_e.level==1?-1:1);yt==Re-1||yt==Re?Ue=Ot<0:Ue=Ot>0}var Jt=Z[Re+(Ue?-1:0)],qt=Ue==(Jt.level==1),_n=qt?Jt.from:Jt.to,In=qt?"after":"before";return E.ch==_n&&E.sticky==In?y:new Yi(new cn(E.line,_n,In),S)}function qu(h,y,E,S){var F,Z;if(y.touches)F=y.touches[0].clientX,Z=y.touches[0].clientY;else try{F=y.clientX,Z=y.clientY}catch{return!1}if(F>=Math.floor(h.display.gutters.getBoundingClientRect().right))return!1;S&&Qn(y);var de=h.display,_e=de.lineDiv.getBoundingClientRect();if(Z>_e.bottom||!xn(h,E))return $r(y);Z-=_e.top-de.viewOffset;for(var Re=0;Re<h.display.gutterSpecs.length;++Re){var Ue=de.gutters.childNodes[Re];if(Ue&&Ue.getBoundingClientRect().right>=F){var yt=Et(h.doc,Z),Ot=h.display.gutterSpecs[Re];return nt(h,E,h,yt,Ot.className,y),$r(y)}}}function dd(h,y){return qu(h,y,"gutterClick",!0)}function Zf(h,y){du(h.display,y)||Dd(h,y)||en(h,y,"contextmenu")||ge||h.display.input.onContextMenu(y)}function Dd(h,y){return xn(h,"gutterContextMenu")?qu(h,y,"gutterContextMenu",!1):!1}function jp(h){h.display.wrapper.className=h.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+h.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Jc(h)}var fd={toString:function(){return"CodeMirror.Init"}},yf={},Wl={};function Bl(h){var y=h.optionHandlers;function E(S,F,Z,de){h.defaults[S]=F,Z&&(y[S]=de?function(_e,Re,Ue){Ue!=fd&&Z(_e,Re,Ue)}:Z)}h.defineOption=E,h.Init=fd,E("value","",function(S,F){return S.setValue(F)},!0),E("mode",null,function(S,F){S.doc.modeOption=F,eo(S)},!0),E("indentUnit",2,eo,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(S){vu(S),Jc(S),Ha(S)},!0),E("lineSeparator",null,function(S,F){if(S.doc.lineSep=F,!!F){var Z=[],de=S.doc.first;S.doc.iter(function(Re){for(var Ue=0;;){var yt=Re.text.indexOf(F,Ue);if(yt==-1)break;Ue=yt+F.length,Z.push(cn(de,yt))}de++});for(var _e=Z.length-1;_e>=0;_e--)hc(S.doc,F,Z[_e],cn(Z[_e].line,Z[_e].ch+F.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,F,Z){S.state.specialChars=new RegExp(F.source+(F.test("	")?"":"|	"),"g"),Z!=fd&&S.refresh()}),E("specialCharPlaceholder",hu,function(S){return S.refresh()},!0),E("electricChars",!0),E("inputStyle",te?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(S,F){return S.getInputField().spellcheck=F},!0),E("autocorrect",!1,function(S,F){return S.getInputField().autocorrect=F},!0),E("autocapitalize",!1,function(S,F){return S.getInputField().autocapitalize=F},!0),E("rtlMoveVisually",!j),E("wholeLineUpdateBefore",!0),E("theme","default",function(S){jp(S),ca(S)},!0),E("keyMap","default",function(S,F,Z){var de=Xo(F),_e=Z!=fd&&Xo(Z);_e&&_e.detach&&_e.detach(S,de),de.attach&&de.attach(S,_e||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Xf,!0),E("gutters",[],function(S,F){S.display.gutterSpecs=Xs(F,S.options.lineNumbers),ca(S)},!0),E("fixedGutter",!0,function(S,F){S.display.gutters.style.left=F?Ro(S.display)+"px":"0",S.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(S){return SA(S)},!0),E("scrollbarStyle","native",function(S){ud(S),SA(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),E("lineNumbers",!1,function(S,F){S.display.gutterSpecs=Xs(S.options.gutters,F),ca(S)},!0),E("firstLineNumber",1,ca,!0),E("lineNumberFormatter",function(S){return S},ca,!0),E("showCursorWhenSelecting",!1,zl,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(S,F){F=="nocursor"&&(ls(S),S.display.input.blur()),S.display.input.readOnlyChanged(F)}),E("screenReaderLabel",null,function(S,F){F=F===""?null:F,S.display.input.screenReaderLabelChanged(F)}),E("disableInput",!1,function(S,F){F||S.display.input.reset()},!0),E("dragDrop",!0,e0),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,zl,!0),E("singleCursorHeightPerLine",!0,zl,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,vu,!0),E("addModeClass",!1,vu,!0),E("pollInterval",100),E("undoDepth",200,function(S,F){return S.doc.history.undoDepth=F}),E("historyEventDelay",1250),E("viewportMargin",10,function(S){return S.refresh()},!0),E("maxHighlightLength",1e4,vu,!0),E("moveInputWithCursor",!0,function(S,F){F||S.display.input.resetPosition()}),E("tabindex",null,function(S,F){return S.display.input.getField().tabIndex=F||""}),E("autofocus",null),E("direction","ltr",function(S,F){return S.doc.setDirection(F)},!0),E("phrases",null)}function e0(h,y,E){var S=E&&E!=fd;if(!y!=!S){var F=h.display.dragFunctions,Z=y?mt:It;Z(h.display.scroller,"dragstart",F.start),Z(h.display.scroller,"dragenter",F.enter),Z(h.display.scroller,"dragover",F.over),Z(h.display.scroller,"dragleave",F.leave),Z(h.display.scroller,"drop",F.drop)}}function Xf(h){h.options.lineWrapping?(ze(h.display.wrapper,"CodeMirror-wrap"),h.display.sizer.style.minWidth="",h.display.sizerWidth=null):(Ee(h.display.wrapper,"CodeMirror-wrap"),la(h)),th(h),Ha(h),Jc(h),setTimeout(function(){return SA(h)},100)}function Qo(h,y){var E=this;if(!(this instanceof Qo))return new Qo(h,y);this.options=y=y?Le(y):{},Le(yf,y,!1);var S=y.value;typeof S=="string"?S=new it(S,y.mode,null,y.lineSeparator,y.direction):y.mode&&(S.modeOption=y.mode),this.doc=S;var F=new Qo.inputStyles[y.inputStyle](this),Z=this.display=new Tc(h,S,F,y);Z.wrapper.CodeMirror=this,jp(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ud(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ke,keySeq:null,specialChars:null},y.autofocus&&!te&&Z.input.focus(),f&&C<11&&setTimeout(function(){return E.display.input.reset(!0)},20),Wp(this),St(),xl(this),this.curOp.forceUpdate=!0,Is(this,S),y.autofocus&&!te||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&ff(E)},20):ls(this);for(var de in Wl)Wl.hasOwnProperty(de)&&Wl[de](this,y[de],fd);Gl(this),y.finishInit&&y.finishInit(this);for(var _e=0;_e<dh.length;++_e)dh[_e](this);Aa(this),M&&y.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}Qo.defaults=yf,Qo.optionHandlers=Wl;function Wp(h){var y=h.display;mt(y.scroller,"mousedown",Do(h,Su)),f&&C<11?mt(y.scroller,"dblclick",Do(h,function(Re){if(!en(h,Re)){var Ue=bl(h,Re);if(!(!Ue||dd(h,Re)||du(h.display,Re))){Qn(Re);var yt=h.findWordAt(Ue);uc(h.doc,yt.anchor,yt.head)}}})):mt(y.scroller,"dblclick",function(Re){return en(h,Re)||Qn(Re)}),mt(y.scroller,"contextmenu",function(Re){return Zf(h,Re)}),mt(y.input.getField(),"contextmenu",function(Re){y.scroller.contains(Re.target)||Zf(h,Re)});var E,S={end:0};function F(){y.activeTouch&&(E=setTimeout(function(){return y.activeTouch=null},1e3),S=y.activeTouch,S.end=+new Date)}function Z(Re){if(Re.touches.length!=1)return!1;var Ue=Re.touches[0];return Ue.radiusX<=1&&Ue.radiusY<=1}function de(Re,Ue){if(Ue.left==null)return!0;var yt=Ue.left-Re.left,Ot=Ue.top-Re.top;return yt*yt+Ot*Ot>20*20}mt(y.scroller,"touchstart",function(Re){if(!en(h,Re)&&!Z(Re)&&!dd(h,Re)){y.input.ensurePolled(),clearTimeout(E);var Ue=+new Date;y.activeTouch={start:Ue,moved:!1,prev:Ue-S.end<=300?S:null},Re.touches.length==1&&(y.activeTouch.left=Re.touches[0].pageX,y.activeTouch.top=Re.touches[0].pageY)}}),mt(y.scroller,"touchmove",function(){y.activeTouch&&(y.activeTouch.moved=!0)}),mt(y.scroller,"touchend",function(Re){var Ue=y.activeTouch;if(Ue&&!du(y,Re)&&Ue.left!=null&&!Ue.moved&&new Date-Ue.start<300){var yt=h.coordsChar(y.activeTouch,"page"),Ot;!Ue.prev||de(Ue,Ue.prev)?Ot=new Yi(yt,yt):!Ue.prev.prev||de(Ue,Ue.prev.prev)?Ot=h.findWordAt(yt):Ot=new Yi(cn(yt.line,0),Ci(h.doc,cn(yt.line+1,0))),h.setSelection(Ot.anchor,Ot.head),h.focus(),Qn(Re)}F()}),mt(y.scroller,"touchcancel",F),mt(y.scroller,"scroll",function(){y.scroller.clientHeight&&(oc(h,y.scroller.scrollTop),Za(h,y.scroller.scrollLeft,!0),nt(h,"scroll",h))}),mt(y.scroller,"mousewheel",function(Re){return Gu(h,Re)}),mt(y.scroller,"DOMMouseScroll",function(Re){return Gu(h,Re)}),mt(y.wrapper,"scroll",function(){return y.wrapper.scrollTop=y.wrapper.scrollLeft=0}),y.dragFunctions={enter:function(Re){en(h,Re)||Br(Re)},over:function(Re){en(h,Re)||(vt(h,Re),Br(Re))},start:function(Re){return bt(h,Re)},drop:Do(h,ht),leave:function(Re){en(h,Re)||xt(h)}};var _e=y.input.getField();mt(_e,"keyup",function(Re){return ms.call(h,Re)}),mt(_e,"keydown",Do(h,Qu)),mt(_e,"keypress",Do(h,jl)),mt(_e,"focus",function(Re){return ff(h,Re)}),mt(_e,"blur",function(Re){return ls(h,Re)})}var dh=[];Qo.defineInitHook=function(h){return dh.push(h)};function Fd(h,y,E,S){var F=h.doc,Z;E==null&&(E="add"),E=="smart"&&(F.mode.indent?Z=gi(h,y).state:E="prev");var de=h.options.tabSize,_e=Sr(F,y),Re=Pe(_e.text,null,de);_e.stateAfter&&(_e.stateAfter=null);var Ue=_e.text.match(/^\s*/)[0],yt;if(!S&&!/\S/.test(_e.text))yt=0,E="not";else if(E=="smart"&&(yt=F.mode.indent(Z,_e.text.slice(Ue.length),_e.text),yt==gt||yt>150)){if(!S)return;E="prev"}E=="prev"?y>F.first?yt=Pe(Sr(F,y-1).text,null,de):yt=0:E=="add"?yt=Re+h.options.indentUnit:E=="subtract"?yt=Re-h.options.indentUnit:typeof E=="number"&&(yt=Re+E),yt=Math.max(0,yt);var Ot="",Jt=0;if(h.options.indentWithTabs)for(var qt=Math.floor(yt/de);qt;--qt)Jt+=de,Ot+="	";if(Jt<yt&&(Ot+=jt(yt-Jt)),Ot!=Ue)return hc(F,Ot,cn(y,0),cn(y,Ue.length),"+input"),_e.stateAfter=null,!0;for(var _n=0;_n<F.sel.ranges.length;_n++){var In=F.sel.ranges[_n];if(In.head.line==y&&In.head.ch<Ue.length){var nr=cn(y,Ue.length);Dr(F,_n,new Yi(nr,nr));break}}}var sA=null;function Gh(h){sA=h}function Kd(h,y,E,S,F){var Z=h.doc;h.display.shift=!1,S||(S=Z.sel);var de=+new Date-200,_e=F=="paste"||h.state.pasteIncoming>de,Re=is(y),Ue=null;if(_e&&S.ranges.length>1)if(sA&&sA.text.join(`
`)==y){if(S.ranges.length%sA.text.length==0){Ue=[];for(var yt=0;yt<sA.text.length;yt++)Ue.push(Z.splitLines(sA.text[yt]))}}else Re.length==S.ranges.length&&h.options.pasteLinesPerSelection&&(Ue=wn(Re,function(Jn){return[Jn]}));for(var Ot=h.curOp.updateInput,Jt=S.ranges.length-1;Jt>=0;Jt--){var qt=S.ranges[Jt],_n=qt.from(),In=qt.to();qt.empty()&&(E&&E>0?_n=cn(_n.line,_n.ch-E):h.state.overwrite&&!_e?In=cn(In.line,Math.min(Sr(Z,In.line).text.length,In.ch+Un(Re).length)):_e&&sA&&sA.lineWise&&sA.text.join(`
`)==Re.join(`
`)&&(_n=In=cn(_n.line,0)));var nr={from:_n,to:In,text:Ue?Ue[Jt%Ue.length]:Re,origin:F||(_e?"paste":h.state.cutIncoming>de?"cut":"+input")};Rc(h.doc,nr),Fs(h,"inputRead",h,nr)}y&&!_e&&Ld(h,y),_s(h),h.curOp.updateInput<2&&(h.curOp.updateInput=Ot),h.curOp.typing=!0,h.state.pasteIncoming=h.state.cutIncoming=-1}function fc(h,y){var E=h.clipboardData&&h.clipboardData.getData("Text");if(E)return h.preventDefault(),!y.isReadOnly()&&!y.options.disableInput&&y.hasFocus()&&js(y,function(){return Kd(y,E,0,null,"paste")}),!0}function Ld(h,y){if(!(!h.options.electricChars||!h.options.smartIndent))for(var E=h.doc.sel,S=E.ranges.length-1;S>=0;S--){var F=E.ranges[S];if(!(F.head.ch>100||S&&E.ranges[S-1].head.line==F.head.line)){var Z=h.getModeAt(F.head),de=!1;if(Z.electricChars){for(var _e=0;_e<Z.electricChars.length;_e++)if(y.indexOf(Z.electricChars.charAt(_e))>-1){de=Fd(h,F.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(Sr(h.doc,F.head.line).text.slice(0,F.head.ch))&&(de=Fd(h,F.head.line,"smart"));de&&Fs(h,"electricInput",h,F.head.line)}}}function vf(h){for(var y=[],E=[],S=0;S<h.doc.sel.ranges.length;S++){var F=h.doc.sel.ranges[S].head.line,Z={anchor:cn(F,0),head:cn(F+1,0)};E.push(Z),y.push(h.getRange(Z.anchor,Z.head))}return{text:y,ranges:E}}function Cf(h,y,E,S){h.setAttribute("autocorrect",E?"on":"off"),h.setAttribute("autocapitalize",S?"on":"off"),h.setAttribute("spellcheck",!!y)}function pd(){var h=be("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=be("div",[h],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return M?h.style.width="1000px":h.setAttribute("wrap","off"),$&&(h.style.border="1px solid black"),y}function fh(h){var y=h.optionHandlers,E=h.helpers={};h.prototype={constructor:h,focus:function(){Bt(this).focus(),this.display.input.focus()},setOption:function(S,F){var Z=this.options,de=Z[S];Z[S]==F&&S!="mode"||(Z[S]=F,y.hasOwnProperty(S)&&Do(this,y[S])(this,F,de),nt(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,F){this.state.keyMaps[F?"push":"unshift"](Xo(S))},removeKeyMap:function(S){for(var F=this.state.keyMaps,Z=0;Z<F.length;++Z)if(F[Z]==S||F[Z].name==S)return F.splice(Z,1),!0},addOverlay:fi(function(S,F){var Z=S.token?S:h.getMode(this.options,S);if(Z.startState)throw new Error("Overlays may not be stateful.");Mn(this.state.overlays,{mode:Z,modeSpec:S,opaque:F&&F.opaque,priority:F&&F.priority||0},function(de){return de.priority}),this.state.modeGen++,Ha(this)}),removeOverlay:fi(function(S){for(var F=this.state.overlays,Z=0;Z<F.length;++Z){var de=F[Z].modeSpec;if(de==S||typeof S=="string"&&de.name==S){F.splice(Z,1),this.state.modeGen++,Ha(this);return}}}),indentLine:fi(function(S,F,Z){typeof F!="string"&&typeof F!="number"&&(F==null?F=this.options.smartIndent?"smart":"prev":F=F?"add":"subtract"),gn(this.doc,S)&&Fd(this,S,F,Z)}),indentSelection:fi(function(S){for(var F=this.doc.sel.ranges,Z=-1,de=0;de<F.length;de++){var _e=F[de];if(_e.empty())_e.head.line>Z&&(Fd(this,_e.head.line,S,!0),Z=_e.head.line,de==this.doc.sel.primIndex&&_s(this));else{var Re=_e.from(),Ue=_e.to(),yt=Math.max(Z,Re.line);Z=Math.min(this.lastLine(),Ue.line-(Ue.ch?0:1))+1;for(var Ot=yt;Ot<Z;++Ot)Fd(this,Ot,S);var Jt=this.doc.sel.ranges;Re.ch==0&&F.length==Jt.length&&Jt[de].from().ch>0&&Dr(this.doc,de,new Yi(Re,Jt[de].to()),wt)}}}),getTokenAt:function(S,F){return sl(this,S,F)},getLineTokens:function(S,F){return sl(this,cn(S),F,!0)},getTokenTypeAt:function(S){S=Ci(this.doc,S);var F=_a(this,Sr(this.doc,S.line)),Z=0,de=(F.length-1)/2,_e=S.ch,Re;if(_e==0)Re=F[2];else for(;;){var Ue=Z+de>>1;if((Ue?F[Ue*2-1]:0)>=_e)de=Ue;else if(F[Ue*2+1]<_e)Z=Ue+1;else{Re=F[Ue*2+2];break}}var yt=Re?Re.indexOf("overlay "):-1;return yt<0?Re:yt==0?null:Re.slice(0,yt-1)},getModeAt:function(S){var F=this.doc.mode;return F.innerMode?h.innerMode(F,this.getTokenAt(S).state).mode:F},getHelper:function(S,F){return this.getHelpers(S,F)[0]},getHelpers:function(S,F){var Z=[];if(!E.hasOwnProperty(F))return Z;var de=E[F],_e=this.getModeAt(S);if(typeof _e[F]=="string")de[_e[F]]&&Z.push(de[_e[F]]);else if(_e[F])for(var Re=0;Re<_e[F].length;Re++){var Ue=de[_e[F][Re]];Ue&&Z.push(Ue)}else _e.helperType&&de[_e.helperType]?Z.push(de[_e.helperType]):de[_e.name]&&Z.push(de[_e.name]);for(var yt=0;yt<de._global.length;yt++){var Ot=de._global[yt];Ot.pred(_e,this)&&Qe(Z,Ot.val)==-1&&Z.push(Ot.val)}return Z},getStateAfter:function(S,F){var Z=this.doc;return S=CA(Z,S??Z.first+Z.size-1),gi(this,S+1,F).state},cursorCoords:function(S,F){var Z,de=this.doc.sel.primary();return S==null?Z=de.head:typeof S=="object"?Z=Ci(this.doc,S):Z=S?de.from():de.to(),hn(this,Z,F||"page")},charCoords:function(S,F){return Sn(this,Ci(this.doc,S),F||"page")},coordsChar:function(S,F){return S=Xt(this,S,F||"page"),Po(this,S.left,S.top)},lineAtHeight:function(S,F){return S=Xt(this,{top:S,left:0},F||"page").top,Et(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,F,Z){var de=!1,_e;if(typeof S=="number"){var Re=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>Re&&(S=Re,de=!0),_e=Sr(this.doc,S)}else _e=S;return Zl(this,_e,{top:0,left:0},F||"page",Z||de).top+(de?this.doc.height-zi(_e):0)},defaultTextHeight:function(){return Va(this.display)},defaultCharWidth:function(){return Ul(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,F,Z,de,_e){var Re=this.display;S=hn(this,Ci(this.doc,S));var Ue=S.bottom,yt=S.left;if(F.style.position="absolute",F.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(F),Re.sizer.appendChild(F),de=="over")Ue=S.top;else if(de=="above"||de=="near"){var Ot=Math.max(Re.wrapper.clientHeight,this.doc.height),Jt=Math.max(Re.sizer.clientWidth,Re.lineSpace.clientWidth);(de=="above"||S.bottom+F.offsetHeight>Ot)&&S.top>F.offsetHeight?Ue=S.top-F.offsetHeight:S.bottom+F.offsetHeight<=Ot&&(Ue=S.bottom),yt+F.offsetWidth>Jt&&(yt=Jt-F.offsetWidth)}F.style.top=Ue+"px",F.style.left=F.style.right="",_e=="right"?(yt=Re.sizer.clientWidth-F.offsetWidth,F.style.right="0px"):(_e=="left"?yt=0:_e=="middle"&&(yt=(Re.sizer.clientWidth-F.offsetWidth)/2),F.style.left=yt+"px"),Z&&ih(this,{left:yt,top:Ue,right:yt+F.offsetWidth,bottom:Ue+F.offsetHeight})},triggerOnKeyDown:fi(Qu),triggerOnKeyPress:fi(jl),triggerOnKeyUp:ms,triggerOnMouseDown:fi(Su),execCommand:function(S){if(ha.hasOwnProperty(S))return ha[S].call(null,this)},triggerElectric:fi(function(S){Ld(this,S)}),findPosH:function(S,F,Z,de){var _e=1;F<0&&(_e=-1,F=-F);for(var Re=Ci(this.doc,S),Ue=0;Ue<F&&(Re=Si(this.doc,Re,_e,Z,de),!Re.hitSide);++Ue);return Re},moveH:fi(function(S,F){var Z=this;this.extendSelectionsBy(function(de){return Z.display.shift||Z.doc.extend||de.empty()?Si(Z.doc,de.head,S,F,Z.options.rtlMoveVisually):S<0?de.from():de.to()},Ft)}),deleteH:fi(function(S,F){var Z=this.doc.sel,de=this.doc;Z.somethingSelected()?de.replaceSelection("",null,"+delete"):As(this,function(_e){var Re=Si(de,_e.head,S,F,!1);return S<0?{from:Re,to:_e.head}:{from:_e.head,to:Re}})}),findPosV:function(S,F,Z,de){var _e=1,Re=de;F<0&&(_e=-1,F=-F);for(var Ue=Ci(this.doc,S),yt=0;yt<F;++yt){var Ot=hn(this,Ue,"div");if(Re==null?Re=Ot.left:Ot.left=Re,Ue=_f(this,Ot,_e,Z),Ue.hitSide)break}return Ue},moveV:fi(function(S,F){var Z=this,de=this.doc,_e=[],Re=!this.display.shift&&!de.extend&&de.sel.somethingSelected();if(de.extendSelectionsBy(function(yt){if(Re)return S<0?yt.from():yt.to();var Ot=hn(Z,yt.head,"div");yt.goalColumn!=null&&(Ot.left=yt.goalColumn),_e.push(Ot.left);var Jt=_f(Z,Ot,S,F);return F=="page"&&yt==de.sel.primary()&&mu(Z,Sn(Z,Jt,"div").top-Ot.top),Jt},Ft),_e.length)for(var Ue=0;Ue<de.sel.ranges.length;Ue++)de.sel.ranges[Ue].goalColumn=_e[Ue]}),findWordAt:function(S){var F=this.doc,Z=Sr(F,S.line).text,de=S.ch,_e=S.ch;if(Z){var Re=this.getHelper(S,"wordChars");(S.sticky=="before"||_e==Z.length)&&de?--de:++_e;for(var Ue=Z.charAt(de),yt=Ne(Ue,Re)?function(Ot){return Ne(Ot,Re)}:/\s/.test(Ue)?function(Ot){return/\s/.test(Ot)}:function(Ot){return!/\s/.test(Ot)&&!Ne(Ot)};de>0&&yt(Z.charAt(de-1));)--de;for(;_e<Z.length&&yt(Z.charAt(_e));)++_e}return new Yi(cn(S.line,de),cn(S.line,_e))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ze(this.display.cursorDiv,"CodeMirror-overwrite"):Ee(this.display.cursorDiv,"CodeMirror-overwrite"),nt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Je(kt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:fi(function(S,F){Zs(this,S,F)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-fu(this)-this.display.barHeight,width:S.scrollWidth-fu(this)-this.display.barWidth,clientHeight:tc(this),clientWidth:MA(this)}},scrollIntoView:fi(function(S,F){S==null?(S={from:this.doc.sel.primary().head,to:null},F==null&&(F=this.options.cursorScrollMargin)):typeof S=="number"?S={from:cn(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=F||0,S.from.line!=null?pf(this,S):gu(this,S.from,S.to,S.margin)}),setSize:fi(function(S,F){var Z=this,de=function(Re){return typeof Re=="number"||/^\d+$/.test(String(Re))?Re+"px":Re};S!=null&&(this.display.wrapper.style.width=de(S)),F!=null&&(this.display.wrapper.style.height=de(F)),this.options.lineWrapping&&Bo(this);var _e=this.display.viewFrom;this.doc.iter(_e,this.display.viewTo,function(Re){if(Re.widgets){for(var Ue=0;Ue<Re.widgets.length;Ue++)if(Re.widgets[Ue].noHScroll){qA(Z,_e,"widget");break}}++_e}),this.curOp.forceUpdate=!0,nt(this,"refresh",this)}),operation:function(S){return js(this,S)},startOperation:function(){return xl(this)},endOperation:function(){return Aa(this)},refresh:fi(function(){var S=this.display.cachedTextHeight;Ha(this),this.curOp.forceUpdate=!0,Jc(this),Zs(this,this.doc.scrollLeft,this.doc.scrollTop),cl(this.display),(S==null||Math.abs(S-Va(this.display))>.5||this.options.lineWrapping)&&th(this),nt(this,"refresh",this)}),swapDoc:fi(function(S){var F=this.doc;return F.cm=null,this.state.selectingText&&this.state.selectingText(),Is(this,S),Jc(this),this.display.input.reset(),Zs(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,Fs(this,"swapDoc",this,F),F}),phrase:function(S){var F=this.options.phrases;return F&&Object.prototype.hasOwnProperty.call(F,S)?F[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},er(h),h.registerHelper=function(S,F,Z){E.hasOwnProperty(S)||(E[S]=h[S]={_global:[]}),E[S][F]=Z},h.registerGlobalHelper=function(S,F,Z,de){h.registerHelper(S,F,de),E[S]._global.push({pred:Z,val:de})}}function Si(h,y,E,S,F){var Z=y,de=E,_e=Sr(h,y.line),Re=F&&h.direction=="rtl"?-E:E;function Ue(){var fr=y.line+Re;return fr<h.first||fr>=h.first+h.size?!1:(y=new cn(fr,y.ch,y.sticky),_e=Sr(h,fr))}function yt(fr){var ar;if(S=="codepoint"){var Tr=_e.text.charCodeAt(y.ch+(E>0?0:-1));if(isNaN(Tr))ar=null;else{var ri=E>0?Tr>=55296&&Tr<56320:Tr>=56320&&Tr<57343;ar=new cn(y.line,Math.max(0,Math.min(_e.text.length,y.ch+E*(ri?2:1))),-E)}}else F?ar=ws(h.cm,_e,y,E):ar=Io(_e,y,E);if(ar==null)if(!fr&&Ue())y=Ws(F,h.cm,_e,y.line,Re);else return!1;else y=ar;return!0}if(S=="char"||S=="codepoint")yt();else if(S=="column")yt(!0);else if(S=="word"||S=="group")for(var Ot=null,Jt=S=="group",qt=h.cm&&h.cm.getHelper(y,"wordChars"),_n=!0;!(E<0&&!yt(!_n));_n=!1){var In=_e.text.charAt(y.ch)||`
`,nr=Ne(In,qt)?"w":Jt&&In==`
`?"n":!Jt||/\s/.test(In)?null:"p";if(Jt&&!_n&&!nr&&(nr="s"),Ot&&Ot!=nr){E<0&&(E=1,yt(),y.sticky="after");break}if(nr&&(Ot=nr),E>0&&!yt(!_n))break}var Jn=Ms(h,y,Z,de,!0);return ji(Z,Jn)&&(Jn.hitSide=!0),Jn}function _f(h,y,E,S){var F=h.doc,Z=y.left,de;if(S=="page"){var _e=Math.min(h.display.wrapper.clientHeight,Bt(h).innerHeight||F(h).documentElement.clientHeight),Re=Math.max(_e-.5*Va(h.display),3);de=(E>0?y.bottom:y.top)+E*Re}else S=="line"&&(de=E>0?y.bottom+3:y.top-3);for(var Ue;Ue=Po(h,Z,de),!!Ue.outside;){if(E<0?de<=0:de>=F.height){Ue.hitSide=!0;break}de+=E*5}return Ue}var No=function(h){this.cm=h,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ke,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};No.prototype.init=function(h){var y=this,E=this,S=E.cm,F=E.div=h.lineDiv;F.contentEditable=!0,Cf(F,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function Z(_e){for(var Re=_e.target;Re;Re=Re.parentNode){if(Re==F)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Re.className))break}return!1}mt(F,"paste",function(_e){!Z(_e)||en(S,_e)||fc(_e,S)||C<=11&&setTimeout(Do(S,function(){return y.updateFromDOM()}),20)}),mt(F,"compositionstart",function(_e){y.composing={data:_e.data,done:!1}}),mt(F,"compositionupdate",function(_e){y.composing||(y.composing={data:_e.data,done:!1})}),mt(F,"compositionend",function(_e){y.composing&&(_e.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),mt(F,"touchstart",function(){return E.forceCompositionEnd()}),mt(F,"input",function(){y.composing||y.readFromDOMSoon()});function de(_e){if(!(!Z(_e)||en(S,_e))){if(S.somethingSelected())Gh({lineWise:!1,text:S.getSelections()}),_e.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var Re=vf(S);Gh({lineWise:!0,text:Re.text}),_e.type=="cut"&&S.operation(function(){S.setSelections(Re.ranges,0,wt),S.replaceSelection("",null,"cut")})}else return;if(_e.clipboardData){_e.clipboardData.clearData();var Ue=sA.text.join(`
`);if(_e.clipboardData.setData("Text",Ue),_e.clipboardData.getData("Text")==Ue){_e.preventDefault();return}}var yt=pd(),Ot=yt.firstChild;Cf(Ot),S.display.lineSpace.insertBefore(yt,S.display.lineSpace.firstChild),Ot.value=sA.text.join(`
`);var Jt=Je(ft(F));He(Ot),setTimeout(function(){S.display.lineSpace.removeChild(yt),Jt.focus(),Jt==F&&E.showPrimarySelection()},50)}}mt(F,"copy",de),mt(F,"cut",de)},No.prototype.screenReaderLabelChanged=function(h){h?this.div.setAttribute("aria-label",h):this.div.removeAttribute("aria-label")},No.prototype.prepareSelection=function(){var h=Ih(this.cm,!1);return h.focus=Je(ft(this.div))==this.div,h},No.prototype.showSelection=function(h,y){!h||!this.cm.display.view.length||((h.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(h))},No.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},No.prototype.showPrimarySelection=function(){var h=this.getSelection(),y=this.cm,E=y.doc.sel.primary(),S=E.from(),F=E.to();if(y.display.viewTo==y.display.viewFrom||S.line>=y.display.viewTo||F.line<y.display.viewFrom){h.removeAllRanges();return}var Z=Ja(y,h.anchorNode,h.anchorOffset),de=Ja(y,h.focusNode,h.focusOffset);if(!(Z&&!Z.bad&&de&&!de.bad&&sr(va(Z,de),S)==0&&sr(xs(Z,de),F)==0)){var _e=y.display.view,Re=S.line>=y.display.viewFrom&&ph(y,S)||{node:_e[0].measure.map[2],offset:0},Ue=F.line<y.display.viewTo&&ph(y,F);if(!Ue){var yt=_e[_e.length-1].measure,Ot=yt.maps?yt.maps[yt.maps.length-1]:yt.map;Ue={node:Ot[Ot.length-1],offset:Ot[Ot.length-2]-Ot[Ot.length-3]}}if(!Re||!Ue){h.removeAllRanges();return}var Jt=h.rangeCount&&h.getRangeAt(0),qt;try{qt=Ct(Re.node,Re.offset,Ue.offset,Ue.node)}catch{}qt&&(!i&&y.state.focused?(h.collapse(Re.node,Re.offset),qt.collapsed||(h.removeAllRanges(),h.addRange(qt))):(h.removeAllRanges(),h.addRange(qt)),Jt&&h.anchorNode==null?h.addRange(Jt):i&&this.startGracePeriod()),this.rememberSelection()}},No.prototype.startGracePeriod=function(){var h=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){h.gracePeriod=!1,h.selectionChanged()&&h.cm.operation(function(){return h.cm.curOp.selectionChanged=!0})},20)},No.prototype.showMultipleSelections=function(h){We(this.cm.display.cursorDiv,h.cursors),We(this.cm.display.selectionDiv,h.selection)},No.prototype.rememberSelection=function(){var h=this.getSelection();this.lastAnchorNode=h.anchorNode,this.lastAnchorOffset=h.anchorOffset,this.lastFocusNode=h.focusNode,this.lastFocusOffset=h.focusOffset},No.prototype.selectionInEditor=function(){var h=this.getSelection();if(!h.rangeCount)return!1;var y=h.getRangeAt(0).commonAncestorContainer;return at(this.div,y)},No.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Je(ft(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},No.prototype.blur=function(){this.div.blur()},No.prototype.getField=function(){return this.div},No.prototype.supportsTouch=function(){return!0},No.prototype.receivedFocus=function(){var h=this,y=this;this.selectionInEditor()?setTimeout(function(){return h.pollSelection()},20):js(this.cm,function(){return y.cm.curOp.selectionChanged=!0});function E(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},No.prototype.selectionChanged=function(){var h=this.getSelection();return h.anchorNode!=this.lastAnchorNode||h.anchorOffset!=this.lastAnchorOffset||h.focusNode!=this.lastFocusNode||h.focusOffset!=this.lastFocusOffset},No.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var h=this.getSelection(),y=this.cm;if(oe&&D&&this.cm.display.gutterSpecs.length&&bf(h.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=Ja(y,h.anchorNode,h.anchorOffset),S=Ja(y,h.focusNode,h.focusOffset);E&&S&&js(y,function(){Uo(y.doc,Oa(E,S),wt),(E.bad||S.bad)&&(y.curOp.selectionChanged=!0)})}}},No.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var h=this.cm,y=h.display,E=h.doc.sel.primary(),S=E.from(),F=E.to();if(S.ch==0&&S.line>h.firstLine()&&(S=cn(S.line-1,Sr(h.doc,S.line-1).length)),F.ch==Sr(h.doc,F.line).text.length&&F.line<h.lastLine()&&(F=cn(F.line+1,0)),S.line<y.viewFrom||F.line>y.viewTo-1)return!1;var Z,de,_e;S.line==y.viewFrom||(Z=YA(h,S.line))==0?(de=Ye(y.view[0].line),_e=y.view[0].node):(de=Ye(y.view[Z].line),_e=y.view[Z-1].node.nextSibling);var Re=YA(h,F.line),Ue,yt;if(Re==y.view.length-1?(Ue=y.viewTo-1,yt=y.lineDiv.lastChild):(Ue=Ye(y.view[Re+1].line)-1,yt=y.view[Re+1].node.previousSibling),!_e)return!1;for(var Ot=h.doc.splitLines(PA(h,_e,yt,de,Ue)),Jt=aa(h.doc,cn(de,0),cn(Ue,Sr(h.doc,Ue).text.length));Ot.length>1&&Jt.length>1;)if(Un(Ot)==Un(Jt))Ot.pop(),Jt.pop(),Ue--;else if(Ot[0]==Jt[0])Ot.shift(),Jt.shift(),de++;else break;for(var qt=0,_n=0,In=Ot[0],nr=Jt[0],Jn=Math.min(In.length,nr.length);qt<Jn&&In.charCodeAt(qt)==nr.charCodeAt(qt);)++qt;for(var fr=Un(Ot),ar=Un(Jt),Tr=Math.min(fr.length-(Ot.length==1?qt:0),ar.length-(Jt.length==1?qt:0));_n<Tr&&fr.charCodeAt(fr.length-_n-1)==ar.charCodeAt(ar.length-_n-1);)++_n;if(Ot.length==1&&Jt.length==1&&de==S.line)for(;qt&&qt>S.ch&&fr.charCodeAt(fr.length-_n-1)==ar.charCodeAt(ar.length-_n-1);)qt--,_n++;Ot[Ot.length-1]=fr.slice(0,fr.length-_n).replace(/^\u200b+/,""),Ot[0]=Ot[0].slice(qt).replace(/\u200b+$/,"");var ri=cn(de,qt),Or=cn(Ue,Jt.length?Un(Jt).length-_n:0);if(Ot.length>1||Ot[0]||sr(ri,Or))return hc(h.doc,Ot,ri,Or,"+input"),!0},No.prototype.ensurePolled=function(){this.forceCompositionEnd()},No.prototype.reset=function(){this.forceCompositionEnd()},No.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},No.prototype.readFromDOMSoon=function(){var h=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(h.readDOMTimeout=null,h.composing)if(h.composing.done)h.composing=null;else return;h.updateFromDOM()},80))},No.prototype.updateFromDOM=function(){var h=this;(this.cm.isReadOnly()||!this.pollContent())&&js(this.cm,function(){return Ha(h.cm)})},No.prototype.setUneditable=function(h){h.contentEditable="false"},No.prototype.onKeyPress=function(h){h.charCode==0||this.composing||(h.preventDefault(),this.cm.isReadOnly()||Do(this.cm,Kd)(this.cm,String.fromCharCode(h.charCode==null?h.keyCode:h.charCode),0))},No.prototype.readOnlyChanged=function(h){this.div.contentEditable=String(h!="nocursor")},No.prototype.onContextMenu=function(){},No.prototype.resetPosition=function(){},No.prototype.needsContentAttribute=!0;function ph(h,y){var E=ld(h,y.line);if(!E||E.hidden)return null;var S=Sr(h.doc,y.line),F=ad(E,S,y.line),Z=Ze(S,h.doc.direction),de="left";if(Z){var _e=$e(Z,y.ch);de=_e%2?"right":"left"}var Re=Oh(F.map,y.ch,de);return Re.offset=Re.collapse=="right"?Re.end:Re.start,Re}function bf(h){for(var y=h;y;y=y.parentNode)if(/CodeMirror-gutter-wrapper/.test(y.className))return!0;return!1}function pl(h,y){return y&&(h.bad=!0),h}function PA(h,y,E,S,F){var Z="",de=!1,_e=h.doc.lineSeparator(),Re=!1;function Ue(qt){return function(_n){return _n.id==qt}}function yt(){de&&(Z+=_e,Re&&(Z+=_e),de=Re=!1)}function Ot(qt){qt&&(yt(),Z+=qt)}function Jt(qt){if(qt.nodeType==1){var _n=qt.getAttribute("cm-text");if(_n){Ot(_n);return}var In=qt.getAttribute("cm-marker"),nr;if(In){var Jn=h.findMarks(cn(S,0),cn(F+1,0),Ue(+In));Jn.length&&(nr=Jn[0].find(0))&&Ot(aa(h.doc,nr.from,nr.to).join(_e));return}if(qt.getAttribute("contenteditable")=="false")return;var fr=/^(pre|div|p|li|table|br)$/i.test(qt.nodeName);if(!/^br$/i.test(qt.nodeName)&&qt.textContent.length==0)return;fr&&yt();for(var ar=0;ar<qt.childNodes.length;ar++)Jt(qt.childNodes[ar]);/^(pre|p)$/i.test(qt.nodeName)&&(Re=!0),fr&&(de=!0)}else qt.nodeType==3&&Ot(qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jt(y),y!=E;)y=y.nextSibling,Re=!1;return Z}function Ja(h,y,E){var S;if(y==h.display.lineDiv){if(S=h.display.lineDiv.childNodes[E],!S)return pl(h.clipPos(cn(h.display.viewTo-1)),!0);y=null,E=0}else for(S=y;;S=S.parentNode){if(!S||S==h.display.lineDiv)return null;if(S.parentNode&&S.parentNode==h.display.lineDiv)break}for(var F=0;F<h.display.view.length;F++){var Z=h.display.view[F];if(Z.node==S)return Jf(Z,y,E)}}function Jf(h,y,E){var S=h.text.firstChild,F=!1;if(!y||!at(S,y))return pl(cn(Ye(h.line),0),!0);if(y==S&&(F=!0,y=S.childNodes[E],E=0,!y)){var Z=h.rest?Un(h.rest):h.line;return pl(cn(Ye(Z),Z.text.length),F)}var de=y.nodeType==3?y:null,_e=y;for(!de&&y.childNodes.length==1&&y.firstChild.nodeType==3&&(de=y.firstChild,E&&(E=de.nodeValue.length));_e.parentNode!=S;)_e=_e.parentNode;var Re=h.measure,Ue=Re.maps;function yt(nr,Jn,fr){for(var ar=-1;ar<(Ue?Ue.length:0);ar++)for(var Tr=ar<0?Re.map:Ue[ar],ri=0;ri<Tr.length;ri+=3){var Or=Tr[ri+2];if(Or==nr||Or==Jn){var to=Ye(ar<0?h.line:h.rest[ar]),ci=Tr[ri]+fr;return(fr<0||Or!=nr)&&(ci=Tr[ri+(fr?1:0)]),cn(to,ci)}}}var Ot=yt(de,_e,E);if(Ot)return pl(Ot,F);for(var Jt=_e.nextSibling,qt=de?de.nodeValue.length-E:0;Jt;Jt=Jt.nextSibling){if(Ot=yt(Jt,Jt.firstChild,0),Ot)return pl(cn(Ot.line,Ot.ch-qt),F);qt+=Jt.textContent.length}for(var _n=_e.previousSibling,In=E;_n;_n=_n.previousSibling){if(Ot=yt(_n,_n.firstChild,-1),Ot)return pl(cn(Ot.line,Ot.ch+In),F);In+=_n.textContent.length}}var Pa=function(h){this.cm=h,this.prevInput="",this.pollingFast=!1,this.polling=new ke,this.hasSelection=!1,this.composing=null,this.resetting=!1};Pa.prototype.init=function(h){var y=this,E=this,S=this.cm;this.createField(h);var F=this.textarea;h.wrapper.insertBefore(this.wrapper,h.wrapper.firstChild),$&&(F.style.width="0px"),mt(F,"input",function(){f&&C>=9&&y.hasSelection&&(y.hasSelection=null),E.poll()}),mt(F,"paste",function(de){en(S,de)||fc(de,S)||(S.state.pasteIncoming=+new Date,E.fastPoll())});function Z(de){if(!en(S,de)){if(S.somethingSelected())Gh({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var _e=vf(S);Gh({lineWise:!0,text:_e.text}),de.type=="cut"?S.setSelections(_e.ranges,null,wt):(E.prevInput="",F.value=_e.text.join(`
`),He(F))}else return;de.type=="cut"&&(S.state.cutIncoming=+new Date)}}mt(F,"cut",Z),mt(F,"copy",Z),mt(h.scroller,"paste",function(de){if(!(du(h,de)||en(S,de))){if(!F.dispatchEvent){S.state.pasteIncoming=+new Date,E.focus();return}var _e=new Event("paste");_e.clipboardData=de.clipboardData,F.dispatchEvent(_e)}}),mt(h.lineSpace,"selectstart",function(de){du(h,de)||Qn(de)}),mt(F,"compositionstart",function(){var de=S.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:de,range:S.markText(de,S.getCursor("to"),{className:"CodeMirror-composing"})}}),mt(F,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},Pa.prototype.createField=function(h){this.wrapper=pd(),this.textarea=this.wrapper.firstChild;var y=this.cm.options;Cf(this.textarea,y.spellcheck,y.autocorrect,y.autocapitalize)},Pa.prototype.screenReaderLabelChanged=function(h){h?this.textarea.setAttribute("aria-label",h):this.textarea.removeAttribute("aria-label")},Pa.prototype.prepareSelection=function(){var h=this.cm,y=h.display,E=h.doc,S=Ih(h);if(h.options.moveInputWithCursor){var F=hn(h,E.sel.primary().head,"div"),Z=y.wrapper.getBoundingClientRect(),de=y.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,F.top+de.top-Z.top)),S.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,F.left+de.left-Z.left))}return S},Pa.prototype.showSelection=function(h){var y=this.cm,E=y.display;We(E.cursorDiv,h.cursors),We(E.selectionDiv,h.selection),h.teTop!=null&&(this.wrapper.style.top=h.teTop+"px",this.wrapper.style.left=h.teLeft+"px")},Pa.prototype.reset=function(h){if(!(this.contextMenuPending||this.composing&&h)){var y=this.cm;if(this.resetting=!0,y.somethingSelected()){this.prevInput="";var E=y.getSelection();this.textarea.value=E,y.state.focused&&He(this.textarea),f&&C>=9&&(this.hasSelection=E)}else h||(this.prevInput=this.textarea.value="",f&&C>=9&&(this.hasSelection=null));this.resetting=!1}},Pa.prototype.getField=function(){return this.textarea},Pa.prototype.supportsTouch=function(){return!1},Pa.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!te||Je(ft(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Pa.prototype.blur=function(){this.textarea.blur()},Pa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Pa.prototype.receivedFocus=function(){this.slowPoll()},Pa.prototype.slowPoll=function(){var h=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){h.poll(),h.cm.state.focused&&h.slowPoll()})},Pa.prototype.fastPoll=function(){var h=!1,y=this;y.pollingFast=!0;function E(){var S=y.poll();!S&&!h?(h=!0,y.polling.set(60,E)):(y.pollingFast=!1,y.slowPoll())}y.polling.set(20,E)},Pa.prototype.poll=function(){var h=this,y=this.cm,E=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!y.state.focused||Zn(E)&&!S&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var F=E.value;if(F==S&&!y.somethingSelected())return!1;if(f&&C>=9&&this.hasSelection===F||H&&/[\uf700-\uf7ff]/.test(F))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var Z=F.charCodeAt(0);if(Z==8203&&!S&&(S=""),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var de=0,_e=Math.min(S.length,F.length);de<_e&&S.charCodeAt(de)==F.charCodeAt(de);)++de;return js(y,function(){Kd(y,F.slice(de),S.length-de,null,h.composing?"*compose":null),F.length>1e3||F.indexOf(`
`)>-1?E.value=h.prevInput="":h.prevInput=F,h.composing&&(h.composing.range.clear(),h.composing.range=y.markText(h.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Pa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Pa.prototype.onKeyPress=function(){f&&C>=9&&(this.hasSelection=null),this.fastPoll()},Pa.prototype.onContextMenu=function(h){var y=this,E=y.cm,S=E.display,F=y.textarea;y.contextMenuPending&&y.contextMenuPending();var Z=bl(E,h),de=S.scroller.scrollTop;if(!Z||U)return;var _e=E.options.resetSelectionOnContextMenu;_e&&E.doc.sel.contains(Z)==-1&&Do(E,Uo)(E.doc,Oa(Z),wt);var Re=F.style.cssText,Ue=y.wrapper.style.cssText,yt=y.wrapper.offsetParent.getBoundingClientRect();y.wrapper.style.cssText="position: static",F.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(h.clientY-yt.top-5)+"px; left: "+(h.clientX-yt.left-5)+`px;
      z-index: 1000; background: `+(f?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Ot;M&&(Ot=F.ownerDocument.defaultView.scrollY),S.input.focus(),M&&F.ownerDocument.defaultView.scrollTo(null,Ot),S.input.reset(),E.somethingSelected()||(F.value=y.prevInput=" "),y.contextMenuPending=qt,S.selForContextMenu=E.doc.sel,clearTimeout(S.detectingSelectAll);function Jt(){if(F.selectionStart!=null){var In=E.somethingSelected(),nr=""+(In?F.value:"");F.value="",F.value=nr,y.prevInput=In?"":"",F.selectionStart=1,F.selectionEnd=nr.length,S.selForContextMenu=E.doc.sel}}function qt(){if(y.contextMenuPending==qt&&(y.contextMenuPending=!1,y.wrapper.style.cssText=Ue,F.style.cssText=Re,f&&C<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=de),F.selectionStart!=null)){(!f||f&&C<9)&&Jt();var In=0,nr=function(){S.selForContextMenu==E.doc.sel&&F.selectionStart==0&&F.selectionEnd>0&&y.prevInput==""?Do(E,dl)(E):In++<10?S.detectingSelectAll=setTimeout(nr,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(nr,200)}}if(f&&C>=9&&Jt(),ge){Br(h);var _n=function(){It(window,"mouseup",_n),setTimeout(qt,20)};mt(window,"mouseup",_n)}else setTimeout(qt,50)},Pa.prototype.readOnlyChanged=function(h){h||this.reset(),this.textarea.disabled=h=="nocursor",this.textarea.readOnly=!!h},Pa.prototype.setUneditable=function(){},Pa.prototype.needsContentAttribute=!1;function Qp(h,y){if(y=y?Le(y):{},y.value=h.value,!y.tabindex&&h.tabIndex&&(y.tabindex=h.tabIndex),!y.placeholder&&h.placeholder&&(y.placeholder=h.placeholder),y.autofocus==null){var E=Je(ft(h));y.autofocus=E==h||h.getAttribute("autofocus")!=null&&E==document.body}function S(){h.value=_e.getValue()}var F;if(h.form&&(mt(h.form,"submit",S),!y.leaveSubmitMethodAlone)){var Z=h.form;F=Z.submit;try{var de=Z.submit=function(){S(),Z.submit=F,Z.submit(),Z.submit=de}}catch{}}y.finishInit=function(Re){Re.save=S,Re.getTextArea=function(){return h},Re.toTextArea=function(){Re.toTextArea=isNaN,S(),h.parentNode.removeChild(Re.getWrapperElement()),h.style.display="",h.form&&(It(h.form,"submit",S),!y.leaveSubmitMethodAlone&&typeof h.form.submit=="function"&&(h.form.submit=F))}},h.style.display="none";var _e=Qo(function(Re){return h.parentNode.insertBefore(Re,h.nextSibling)},y);return _e}function ep(h){h.off=It,h.on=mt,h.wheelEventPixels=lh,h.Doc=it,h.splitLines=is,h.countColumn=Pe,h.findColumn=ln,h.isWordChar=Pn,h.Pass=gt,h.signal=nt,h.Line=Ea,h.changeEnd=xa,h.scrollbarModel=Dh,h.Pos=cn,h.cmpPos=sr,h.modes=oa,h.mimeModes=os,h.resolveMode=sa,h.getMode=jo,h.modeExtensions=Ds,h.extendMode=yl,h.copyState=si,h.startState=Bs,h.innerMode=vA,h.commands=ha,h.keyMap=Gn,h.keyName=Fo,h.isModifierKey=xo,h.lookupKey=ui,h.normalizeKeyMap=_r,h.StringStream=Hr,h.SharedTextMarker=ce,h.TextMarker=Y,h.LineWidget=v,h.e_preventDefault=Qn,h.e_stopPropagation=Qr,h.e_stop=Br,h.addClass=ze,h.contains=at,h.rmClass=Ee,h.keyNames=Ht}Bl(Qo),fh(Qo);var aA="iter insert remove copy getEditor constructor".split(" ");for(var tp in it.prototype)it.prototype.hasOwnProperty(tp)&&Qe(aA,tp)<0&&(Qo.prototype[tp]=function(h){return function(){return h.apply(this.doc,arguments)}}(it.prototype[tp]));return er(it),Qo.inputStyles={textarea:Pa,contenteditable:No},Qo.defineMode=function(h){!Qo.defaults.mode&&h!="null"&&(Qo.defaults.mode=h),Gr.apply(this,arguments)},Qo.defineMIME=qa,Qo.defineMode("null",function(){return{token:function(h){return h.skipToEnd()}}}),Qo.defineMIME("text/plain","null"),Qo.defineExtension=function(h,y){Qo.prototype[h]=y},Qo.defineDocExtension=function(h,y){it.prototype[h]=y},Qo.fromTextArea=Qp,ep(Qo),Qo.version="5.65.20",Qo})}(u2)),u2.exports}var Qae=M3();const Bp=yA(Qae);var dk={exports:{}},fk;function Yae(){return fk||(fk=1,function(n,e){(function(t){t(M3())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,l=i.statementIndent,o=i.jsonld,f=i.json||o,C=i.trackScope!==!1,M=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,D=function(){function Ye(wo){return{type:wo,style:"keyword"}}var Et=Ye("keyword a"),gn=Ye("keyword b"),Nn=Ye("keyword c"),cn=Ye("keyword d"),sr=Ye("operator"),ji={type:"atom",style:"atom"};return{if:Ye("if"),while:Et,with:Et,else:gn,do:gn,try:gn,finally:gn,return:cn,break:cn,continue:cn,new:Ye("new"),delete:Nn,void:Nn,throw:Nn,debugger:Ye("debugger"),var:Ye("var"),const:Ye("var"),let:Ye("var"),function:Ye("function"),catch:Ye("catch"),for:Ye("for"),switch:Ye("switch"),case:Ye("case"),default:Ye("default"),in:sr,typeof:sr,instanceof:sr,true:ji,false:ji,null:ji,undefined:ji,NaN:ji,Infinity:ji,this:Ye("this"),class:Ye("class"),super:Ye("atom"),yield:Nn,export:Ye("export"),import:Ye("import"),extends:Nn,await:Nn}}(),R=/[+\-*&%=<>!?|~^@]/,U=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function G(Ye){for(var Et=!1,gn,Nn=!1;(gn=Ye.next())!=null;){if(!Et){if(gn=="/"&&!Nn)return;gn=="["?Nn=!0:Nn&&gn=="]"&&(Nn=!1)}Et=!Et&&gn=="\\"}}var W,J;function $(Ye,Et,gn){return W=Ye,J=gn,Et}function oe(Ye,Et){var gn=Ye.next();if(gn=='"'||gn=="'")return Et.tokenize=te(gn),Et.tokenize(Ye,Et);if(gn=="."&&Ye.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return $("number","number");if(gn=="."&&Ye.match(".."))return $("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(gn))return $(gn);if(gn=="="&&Ye.eat(">"))return $("=>","operator");if(gn=="0"&&Ye.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return $("number","number");if(/\d/.test(gn))return Ye.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),$("number","number");if(gn=="/")return Ye.eat("*")?(Et.tokenize=H,H(Ye,Et)):Ye.eat("/")?(Ye.skipToEnd(),$("comment","comment")):ss(Ye,Et,1)?(G(Ye),Ye.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),$("regexp","string-2")):(Ye.eat("="),$("operator","operator",Ye.current()));if(gn=="`")return Et.tokenize=re,re(Ye,Et);if(gn=="#"&&Ye.peek()=="!")return Ye.skipToEnd(),$("meta","meta");if(gn=="#"&&Ye.eatWhile(B))return $("variable","property");if(gn=="<"&&Ye.match("!--")||gn=="-"&&Ye.match("->")&&!/\S/.test(Ye.string.slice(0,Ye.start)))return Ye.skipToEnd(),$("comment","comment");if(R.test(gn))return(gn!=">"||!Et.lexical||Et.lexical.type!=">")&&(Ye.eat("=")?(gn=="!"||gn=="=")&&Ye.eat("="):/[<>*+\-|&?]/.test(gn)&&(Ye.eat(gn),gn==">"&&Ye.eat(gn))),gn=="?"&&Ye.eat(".")?$("."):$("operator","operator",Ye.current());if(B.test(gn)){Ye.eatWhile(B);var Nn=Ye.current();if(Et.lastType!="."){if(D.propertyIsEnumerable(Nn)){var cn=D[Nn];return $(cn.type,cn.style,Nn)}if(Nn=="async"&&Ye.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return $("async","keyword",Nn)}return $("variable","variable",Nn)}}function te(Ye){return function(Et,gn){var Nn=!1,cn;if(o&&Et.peek()=="@"&&Et.match(U))return gn.tokenize=oe,$("jsonld-keyword","meta");for(;(cn=Et.next())!=null&&!(cn==Ye&&!Nn);)Nn=!Nn&&cn=="\\";return Nn||(gn.tokenize=oe),$("string","string")}}function H(Ye,Et){for(var gn=!1,Nn;Nn=Ye.next();){if(Nn=="/"&&gn){Et.tokenize=oe;break}gn=Nn=="*"}return $("comment","comment")}function re(Ye,Et){for(var gn=!1,Nn;(Nn=Ye.next())!=null;){if(!gn&&(Nn=="`"||Nn=="$"&&Ye.eat("{"))){Et.tokenize=oe;break}gn=!gn&&Nn=="\\"}return $("quasi","string-2",Ye.current())}var j="([{}])";function ue(Ye,Et){Et.fatArrowAt&&(Et.fatArrowAt=null);var gn=Ye.string.indexOf("=>",Ye.start);if(!(gn<0)){if(M){var Nn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ye.string.slice(Ye.start,gn));Nn&&(gn=Nn.index)}for(var cn=0,sr=!1,ji=gn-1;ji>=0;--ji){var wo=Ye.string.charAt(ji),xs=j.indexOf(wo);if(xs>=0&&xs<3){if(!cn){++ji;break}if(--cn==0){wo=="("&&(sr=!0);break}}else if(xs>=3&&xs<6)++cn;else if(B.test(wo))sr=!0;else if(/["'\/`]/.test(wo))for(;;--ji){if(ji==0)return;var va=Ye.string.charAt(ji-1);if(va==wo&&Ye.string.charAt(ji-2)!="\\"){ji--;break}}else if(sr&&!cn){++ji;break}}sr&&!cn&&(Et.fatArrowAt=ji)}}var me={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ge(Ye,Et,gn,Nn,cn,sr){this.indented=Ye,this.column=Et,this.type=gn,this.prev=cn,this.info=sr,Nn!=null&&(this.align=Nn)}function we(Ye,Et){if(!C)return!1;for(var gn=Ye.localVars;gn;gn=gn.next)if(gn.name==Et)return!0;for(var Nn=Ye.context;Nn;Nn=Nn.prev)for(var gn=Nn.vars;gn;gn=gn.next)if(gn.name==Et)return!0}function Ee(Ye,Et,gn,Nn,cn){var sr=Ye.cc;for(xe.state=Ye,xe.stream=cn,xe.marked=null,xe.cc=sr,xe.style=Et,Ye.lexical.hasOwnProperty("align")||(Ye.lexical.align=!0);;){var ji=sr.length?sr.pop():f?Qe:Pe;if(ji(gn,Nn)){for(;sr.length&&sr[sr.length-1].lex;)sr.pop()();return xe.marked?xe.marked:gn=="variable"&&we(Ye,Nn)?"variable-2":Et}}}var xe={state:null,marked:null,cc:null};function We(){for(var Ye=arguments.length-1;Ye>=0;Ye--)xe.cc.push(arguments[Ye])}function be(){return We.apply(null,arguments),!0}function rt(Ye,Et){for(var gn=Et;gn;gn=gn.next)if(gn.name==Ye)return!0;return!1}function Ct(Ye){var Et=xe.state;if(xe.marked="def",!!C){if(Et.context){if(Et.lexical.info=="var"&&Et.context&&Et.context.block){var gn=at(Ye,Et.context);if(gn!=null){Et.context=gn;return}}else if(!rt(Ye,Et.localVars)){Et.localVars=new Te(Ye,Et.localVars);return}}i.globalVars&&!rt(Ye,Et.globalVars)&&(Et.globalVars=new Te(Ye,Et.globalVars))}}function at(Ye,Et){if(Et)if(Et.block){var gn=at(Ye,Et.prev);return gn?gn==Et.prev?Et:new ze(gn,Et.vars,!0):null}else return rt(Ye,Et.vars)?Et:new ze(Et.prev,new Te(Ye,Et.vars),!1);else return null}function Je(Ye){return Ye=="public"||Ye=="private"||Ye=="protected"||Ye=="abstract"||Ye=="readonly"}function ze(Ye,Et,gn){this.prev=Ye,this.vars=Et,this.block=gn}function Te(Ye,Et){this.name=Ye,this.next=Et}var He=new Te("this",new Te("arguments",null));function pt(){xe.state.context=new ze(xe.state.context,xe.state.localVars,!1),xe.state.localVars=He}function kt(){xe.state.context=new ze(xe.state.context,xe.state.localVars,!0),xe.state.localVars=null}pt.lex=kt.lex=!0;function ft(){xe.state.localVars=xe.state.context.vars,xe.state.context=xe.state.context.prev}ft.lex=!0;function Bt(Ye,Et){var gn=function(){var Nn=xe.state,cn=Nn.indented;if(Nn.lexical.type=="stat")cn=Nn.lexical.indented;else for(var sr=Nn.lexical;sr&&sr.type==")"&&sr.align;sr=sr.prev)cn=sr.indented;Nn.lexical=new ge(cn,xe.stream.column(),Ye,null,Nn.lexical,Et)};return gn.lex=!0,gn}function Tt(){var Ye=xe.state;Ye.lexical.prev&&(Ye.lexical.type==")"&&(Ye.indented=Ye.lexical.indented),Ye.lexical=Ye.lexical.prev)}Tt.lex=!0;function Le(Ye){function Et(gn){return gn==Ye?be():Ye==";"||gn=="}"||gn==")"||gn=="]"?We():be(Et)}return Et}function Pe(Ye,Et){return Ye=="var"?be(Bt("vardef",Et),Qr,Le(";"),Tt):Ye=="keyword a"?be(Bt("form"),gt,Pe,Tt):Ye=="keyword b"?be(Bt("form"),Pe,Tt):Ye=="keyword d"?xe.stream.match(/^\s*$/,!1)?be():be(Bt("stat"),Qt,Le(";"),Tt):Ye=="debugger"?be(Le(";")):Ye=="{"?be(Bt("}"),kt,Oe,Tt,ft):Ye==";"?be():Ye=="if"?(xe.state.lexical.info=="else"&&xe.state.cc[xe.state.cc.length-1]==Tt&&xe.state.cc.pop()(),be(Bt("form"),gt,Pe,Tt,bn)):Ye=="function"?be(is):Ye=="for"?be(Bt("form"),kt,Vi,Pe,ft,Tt):Ye=="class"||M&&Et=="interface"?(xe.marked="keyword",be(Bt("form",Ye=="class"?Ye:Et),oa,Tt)):Ye=="variable"?M&&Et=="declare"?(xe.marked="keyword",be(Pe)):M&&(Et=="module"||Et=="enum"||Et=="type")&&xe.stream.match(/^\s*\w/,!1)?(xe.marked="keyword",Et=="enum"?be(Sr):Et=="type"?be(_i,Le("operator"),Ze,Le(";")):be(Bt("form"),$r,Le("{"),Bt("}"),Oe,Tt,Tt)):M&&Et=="namespace"?(xe.marked="keyword",be(Bt("form"),Qe,Pe,Tt)):M&&Et=="abstract"?(xe.marked="keyword",be(Pe)):be(Bt("stat"),Hn):Ye=="switch"?be(Bt("form"),gt,Le("{"),Bt("}","switch"),kt,Oe,Tt,Tt,ft):Ye=="case"?be(Qe,Le(":")):Ye=="default"?be(Le(":")):Ye=="catch"?be(Bt("form"),pt,ke,Pe,Tt,ft):Ye=="export"?be(Bt("stat"),sa,Tt):Ye=="import"?be(Bt("stat"),Ds,Tt):Ye=="async"?be(Pe):Et=="@"?be(Qe,Pe):We(Bt("stat"),Qe,Le(";"),Tt)}function ke(Ye){if(Ye=="(")return be(Kr,Le(")"))}function Qe(Ye,Et){return wt(Ye,Et,!1)}function _t(Ye,Et){return wt(Ye,Et,!0)}function gt(Ye){return Ye!="("?We():be(Bt(")"),Qt,Le(")"),Tt)}function wt(Ye,Et,gn){if(xe.state.fatArrowAt==xe.stream.start){var Nn=gn?wn:Un;if(Ye=="(")return be(pt,Bt(")"),se(Kr,")"),Tt,Le("=>"),Nn,ft);if(Ye=="variable")return We(pt,$r,Le("=>"),Nn,ft)}var cn=gn?ln:Ft;return me.hasOwnProperty(Ye)?be(cn):Ye=="function"?be(is,cn):Ye=="class"||M&&Et=="interface"?(xe.marked="keyword",be(Bt("form"),ki,Tt)):Ye=="keyword c"||Ye=="async"?be(gn?_t:Qe):Ye=="("?be(Bt(")"),Qt,Le(")"),Tt,cn):Ye=="operator"||Ye=="spread"?be(gn?_t:Qe):Ye=="["?be(Bt("]"),Hr,Tt,cn):Ye=="{"?fe(Ne,"}",null,cn):Ye=="quasi"?We(Vn,cn):Ye=="new"?be(Mn(gn)):be()}function Qt(Ye){return Ye.match(/[;\}\)\],]/)?We():We(Qe)}function Ft(Ye,Et){return Ye==","?be(Qt):ln(Ye,Et,!1)}function ln(Ye,Et,gn){var Nn=gn==!1?Ft:ln,cn=gn==!1?Qe:_t;if(Ye=="=>")return be(pt,gn?wn:Un,ft);if(Ye=="operator")return/\+\+|--/.test(Et)||M&&Et=="!"?be(Nn):M&&Et=="<"&&xe.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?be(Bt(">"),se(Ze,">"),Tt,Nn):Et=="?"?be(Qe,Le(":"),cn):be(cn);if(Ye=="quasi")return We(Vn,Nn);if(Ye!=";"){if(Ye=="(")return fe(_t,")","call",Nn);if(Ye==".")return be(Pn,Nn);if(Ye=="[")return be(Bt("]"),Qt,Le("]"),Tt,Nn);if(M&&Et=="as")return xe.marked="keyword",be(Ze,Nn);if(Ye=="regexp")return xe.state.lastType=xe.marked="operator",xe.stream.backUp(xe.stream.pos-xe.stream.start-1),be(cn)}}function Vn(Ye,Et){return Ye!="quasi"?We():Et.slice(Et.length-2)!="${"?be(Vn):be(Qt,jt)}function jt(Ye){if(Ye=="}")return xe.marked="string-2",xe.state.tokenize=re,be(Vn)}function Un(Ye){return ue(xe.stream,xe.state),We(Ye=="{"?Pe:Qe)}function wn(Ye){return ue(xe.stream,xe.state),We(Ye=="{"?Pe:_t)}function Mn(Ye){return function(Et){return Et=="."?be(Ye?Mr:En):Et=="variable"&&M?be(xn,Ye?ln:Ft):We(Ye?_t:Qe)}}function En(Ye,Et){if(Et=="target")return xe.marked="keyword",be(Ft)}function Mr(Ye,Et){if(Et=="target")return xe.marked="keyword",be(ln)}function Hn(Ye){return Ye==":"?be(Tt,Pe):We(Ft,Le(";"),Tt)}function Pn(Ye){if(Ye=="variable")return xe.marked="property",be()}function Ne(Ye,Et){if(Ye=="async")return xe.marked="property",be(Ne);if(Ye=="variable"||xe.style=="keyword"){if(xe.marked="property",Et=="get"||Et=="set")return be(he);var gn;return M&&xe.state.fatArrowAt==xe.stream.start&&(gn=xe.stream.match(/^\s*:\s*/,!1))&&(xe.state.fatArrowAt=xe.stream.pos+gn[0].length),be(ie)}else{if(Ye=="number"||Ye=="string")return xe.marked=o?"property":xe.style+" property",be(ie);if(Ye=="jsonld-keyword")return be(ie);if(M&&Je(Et))return xe.marked="keyword",be(Ne);if(Ye=="[")return be(Qe,Ge,Le("]"),ie);if(Ye=="spread")return be(_t,ie);if(Et=="*")return xe.marked="keyword",be(Ne);if(Ye==":")return We(ie)}}function he(Ye){return Ye!="variable"?We(ie):(xe.marked="property",be(is))}function ie(Ye){if(Ye==":")return be(_t);if(Ye=="(")return We(is)}function se(Ye,Et,gn){function Nn(cn,sr){if(gn?gn.indexOf(cn)>-1:cn==","){var ji=xe.state.lexical;return ji.info=="call"&&(ji.pos=(ji.pos||0)+1),be(function(wo,xs){return wo==Et||xs==Et?We():We(Ye)},Nn)}return cn==Et||sr==Et?be():gn&&gn.indexOf(";")>-1?We(Ye):be(Le(Et))}return function(cn,sr){return cn==Et||sr==Et?be():We(Ye,Nn)}}function fe(Ye,Et,gn){for(var Nn=3;Nn<arguments.length;Nn++)xe.cc.push(arguments[Nn]);return be(Bt(Et,gn),se(Ye,Et),Tt)}function Oe(Ye){return Ye=="}"?be():We(Pe,Oe)}function Ge(Ye,Et){if(M){if(Ye==":")return be(Ze);if(Et=="?")return be(Ge)}}function ct(Ye,Et){if(M&&(Ye==":"||Et=="in"))return be(Ze)}function $e(Ye){if(M&&Ye==":")return xe.stream.match(/^\s*\w+\s+is\b/,!1)?be(Qe,De,Ze):be(Ze)}function De(Ye,Et){if(Et=="is")return xe.marked="keyword",be()}function Ze(Ye,Et){if(Et=="keyof"||Et=="typeof"||Et=="infer"||Et=="readonly")return xe.marked="keyword",be(Et=="typeof"?_t:Ze);if(Ye=="variable"||Et=="void")return xe.marked="type",be(Tn);if(Et=="|"||Et=="&")return be(Ze);if(Ye=="string"||Ye=="number"||Ye=="atom")return be(Tn);if(Ye=="[")return be(Bt("]"),se(Ze,"]",","),Tt,Tn);if(Ye=="{")return be(Bt("}"),mt,Tt,Tn);if(Ye=="(")return be(se(en,")"),m,Tn);if(Ye=="<")return be(se(Ze,">"),Ze);if(Ye=="quasi")return We(It,Tn)}function m(Ye){if(Ye=="=>")return be(Ze)}function mt(Ye){return Ye.match(/[\}\)\]]/)?be():Ye==","||Ye==";"?be(mt):We(At,mt)}function At(Ye,Et){if(Ye=="variable"||xe.style=="keyword")return xe.marked="property",be(At);if(Et=="?"||Ye=="number"||Ye=="string")return be(At);if(Ye==":")return be(Ze);if(Ye=="[")return be(Le("variable"),ct,Le("]"),At);if(Ye=="(")return We(Zn,At);if(!Ye.match(/[;\}\)\],]/))return be()}function It(Ye,Et){return Ye!="quasi"?We():Et.slice(Et.length-2)!="${"?be(It):be(Ze,nt)}function nt(Ye){if(Ye=="}")return xe.marked="string-2",xe.state.tokenize=re,be(It)}function en(Ye,Et){return Ye=="variable"&&xe.stream.match(/^\s*[?:]/,!1)||Et=="?"?be(en):Ye==":"?be(Ze):Ye=="spread"?be(en):We(Ze)}function Tn(Ye,Et){if(Et=="<")return be(Bt(">"),se(Ze,">"),Tt,Tn);if(Et=="|"||Ye=="."||Et=="&")return be(Ze);if(Ye=="[")return be(Ze,Le("]"),Tn);if(Et=="extends"||Et=="implements")return xe.marked="keyword",be(Ze);if(Et=="?")return be(Ze,Le(":"),Ze)}function xn(Ye,Et){if(Et=="<")return be(Bt(">"),se(Ze,">"),Tt,Tn)}function er(){return We(Ze,Qn)}function Qn(Ye,Et){if(Et=="=")return be(Ze)}function Qr(Ye,Et){return Et=="enum"?(xe.marked="keyword",be(Sr)):We($r,Ge,or,ti)}function $r(Ye,Et){if(M&&Je(Et))return xe.marked="keyword",be($r);if(Ye=="variable")return Ct(Et),be();if(Ye=="spread")return be($r);if(Ye=="[")return fe(br,"]");if(Ye=="{")return fe(Br,"}")}function Br(Ye,Et){return Ye=="variable"&&!xe.stream.match(/^\s*:/,!1)?(Ct(Et),be(or)):(Ye=="variable"&&(xe.marked="property"),Ye=="spread"?be($r):Ye=="}"?We():Ye=="["?be(Qe,Le("]"),Le(":"),Br):be(Le(":"),$r,or))}function br(){return We($r,or)}function or(Ye,Et){if(Et=="=")return be(_t)}function ti(Ye){if(Ye==",")return be(Qr)}function bn(Ye,Et){if(Ye=="keyword b"&&Et=="else")return be(Bt("form","else"),Pe,Tt)}function Vi(Ye,Et){if(Et=="await")return be(Vi);if(Ye=="(")return be(Bt(")"),zr,Tt)}function zr(Ye){return Ye=="var"?be(Qr,$o):Ye=="variable"?be($o):We($o)}function $o(Ye,Et){return Ye==")"?be():Ye==";"?be($o):Et=="in"||Et=="of"?(xe.marked="keyword",be(Qe,$o)):We(Qe,$o)}function is(Ye,Et){if(Et=="*")return xe.marked="keyword",be(is);if(Ye=="variable")return Ct(Et),be(is);if(Ye=="(")return be(pt,Bt(")"),se(Kr,")"),Tt,$e,Pe,ft);if(M&&Et=="<")return be(Bt(">"),se(er,">"),Tt,is)}function Zn(Ye,Et){if(Et=="*")return xe.marked="keyword",be(Zn);if(Ye=="variable")return Ct(Et),be(Zn);if(Ye=="(")return be(pt,Bt(")"),se(Kr,")"),Tt,$e,ft);if(M&&Et=="<")return be(Bt(">"),se(er,">"),Tt,Zn)}function _i(Ye,Et){if(Ye=="keyword"||Ye=="variable")return xe.marked="type",be(_i);if(Et=="<")return be(Bt(">"),se(er,">"),Tt)}function Kr(Ye,Et){return Et=="@"&&be(Qe,Kr),Ye=="spread"?be(Kr):M&&Je(Et)?(xe.marked="keyword",be(Kr)):M&&Ye=="this"?be(Ge,or):We($r,Ge,or)}function ki(Ye,Et){return Ye=="variable"?oa(Ye,Et):os(Ye,Et)}function oa(Ye,Et){if(Ye=="variable")return Ct(Et),be(os)}function os(Ye,Et){if(Et=="<")return be(Bt(">"),se(er,">"),Tt,os);if(Et=="extends"||Et=="implements"||M&&Ye==",")return Et=="implements"&&(xe.marked="keyword"),be(M?Ze:Qe,os);if(Ye=="{")return be(Bt("}"),Gr,Tt)}function Gr(Ye,Et){if(Ye=="async"||Ye=="variable"&&(Et=="static"||Et=="get"||Et=="set"||M&&Je(Et))&&xe.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return xe.marked="keyword",be(Gr);if(Ye=="variable"||xe.style=="keyword")return xe.marked="property",be(qa,Gr);if(Ye=="number"||Ye=="string")return be(qa,Gr);if(Ye=="[")return be(Qe,Ge,Le("]"),qa,Gr);if(Et=="*")return xe.marked="keyword",be(Gr);if(M&&Ye=="(")return We(Zn,Gr);if(Ye==";"||Ye==",")return be(Gr);if(Ye=="}")return be();if(Et=="@")return be(Qe,Gr)}function qa(Ye,Et){if(Et=="!"||Et=="?")return be(qa);if(Ye==":")return be(Ze,or);if(Et=="=")return be(_t);var gn=xe.state.lexical.prev,Nn=gn&&gn.info=="interface";return We(Nn?Zn:is)}function sa(Ye,Et){return Et=="*"?(xe.marked="keyword",be(Bs,Le(";"))):Et=="default"?(xe.marked="keyword",be(Qe,Le(";"))):Ye=="{"?be(se(jo,"}"),Bs,Le(";")):We(Pe)}function jo(Ye,Et){if(Et=="as")return xe.marked="keyword",be(Le("variable"));if(Ye=="variable")return We(_t,jo)}function Ds(Ye){return Ye=="string"?be():Ye=="("?We(Qe):Ye=="."?We(Ft):We(yl,si,Bs)}function yl(Ye,Et){return Ye=="{"?fe(yl,"}"):(Ye=="variable"&&Ct(Et),Et=="*"&&(xe.marked="keyword"),be(vA))}function si(Ye){if(Ye==",")return be(yl,si)}function vA(Ye,Et){if(Et=="as")return xe.marked="keyword",be(yl)}function Bs(Ye,Et){if(Et=="from")return xe.marked="keyword",be(Qe)}function Hr(Ye){return Ye=="]"?be():We(se(_t,"]"))}function Sr(){return We(Bt("form"),$r,Le("{"),Bt("}"),se(aa,"}"),Tt,Tt)}function aa(){return We($r,or)}function vs(Ye,Et){return Ye.lastType=="operator"||Ye.lastType==","||R.test(Et.charAt(0))||/[,.]/.test(Et.charAt(0))}function ss(Ye,Et,gn){return Et.tokenize==oe&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Et.lastType)||Et.lastType=="quasi"&&/\{\s*$/.test(Ye.string.slice(0,Ye.pos-(gn||0)))}return{startState:function(Ye){var Et={tokenize:oe,lastType:"sof",cc:[],lexical:new ge((Ye||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new ze(null,null,!1),indented:Ye||0};return i.globalVars&&typeof i.globalVars=="object"&&(Et.globalVars=i.globalVars),Et},token:function(Ye,Et){if(Ye.sol()&&(Et.lexical.hasOwnProperty("align")||(Et.lexical.align=!1),Et.indented=Ye.indentation(),ue(Ye,Et)),Et.tokenize!=H&&Ye.eatSpace())return null;var gn=Et.tokenize(Ye,Et);return W=="comment"?gn:(Et.lastType=W=="operator"&&(J=="++"||J=="--")?"incdec":W,Ee(Et,gn,W,J,Ye))},indent:function(Ye,Et){if(Ye.tokenize==H||Ye.tokenize==re)return t.Pass;if(Ye.tokenize!=oe)return 0;var gn=Et&&Et.charAt(0),Nn=Ye.lexical,cn;if(!/^\s*else\b/.test(Et))for(var sr=Ye.cc.length-1;sr>=0;--sr){var ji=Ye.cc[sr];if(ji==Tt)Nn=Nn.prev;else if(ji!=bn&&ji!=ft)break}for(;(Nn.type=="stat"||Nn.type=="form")&&(gn=="}"||(cn=Ye.cc[Ye.cc.length-1])&&(cn==Ft||cn==ln)&&!/^[,\.=+\-*:?[\(]/.test(Et));)Nn=Nn.prev;l&&Nn.type==")"&&Nn.prev.type=="stat"&&(Nn=Nn.prev);var wo=Nn.type,xs=gn==wo;return wo=="vardef"?Nn.indented+(Ye.lastType=="operator"||Ye.lastType==","?Nn.info.length+1:0):wo=="form"&&gn=="{"?Nn.indented:wo=="form"?Nn.indented+s:wo=="stat"?Nn.indented+(vs(Ye,Et)?l||s:0):Nn.info=="switch"&&!xs&&i.doubleIndentSwitch!=!1?Nn.indented+(/^(?:case|default)\b/.test(Et)?s:2*s):Nn.align?Nn.column+(xs?0:1):Nn.indented+(xs?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:o,jsonMode:f,expressionAllowed:ss,skipExpression:function(Ye){Ee(Ye,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),dk.exports}Yae();var pk={exports:{}},mk;function qae(){return mk||(mk=1,function(n,e){(function(t){t(M3())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(j,ue,me){var ge=document.createElement("div");ge.className="CodeMirror-lint-tooltip cm-s-"+j.options.theme,ge.appendChild(me.cloneNode(!0)),j.state.lint.options.selfContain?j.getWrapperElement().appendChild(ge):document.body.appendChild(ge);function we(Ee){if(!ge.parentNode)return t.off(document,"mousemove",we);var xe=Math.max(0,Ee.clientY-ge.offsetHeight-5),We=Math.max(0,Math.min(Ee.clientX+5,ge.ownerDocument.defaultView.innerWidth-ge.offsetWidth));ge.style.top=xe+"px",ge.style.left=We+"px"}return t.on(document,"mousemove",we),we(ue),ge.style.opacity!=null&&(ge.style.opacity=1),ge}function l(j){j.parentNode&&j.parentNode.removeChild(j)}function o(j){j.parentNode&&(j.style.opacity==null&&l(j),j.style.opacity=0,setTimeout(function(){l(j)},600))}function f(j,ue,me,ge){var we=s(j,ue,me);function Ee(){t.off(ge,"mouseout",Ee),we&&(o(we),we=null)}var xe=setInterval(function(){if(we)for(var We=ge;;We=We.parentNode){if(We&&We.nodeType==11&&(We=We.host),We==document.body)return;if(!We){Ee();break}}if(!we)return clearInterval(xe)},400);t.on(ge,"mouseout",Ee)}function C(j,ue,me){this.marked=[],ue instanceof Function&&(ue={getAnnotations:ue}),(!ue||ue===!0)&&(ue={}),this.options={},this.linterOptions=ue.options||{};for(var ge in M)this.options[ge]=M[ge];for(var ge in ue)M.hasOwnProperty(ge)?ue[ge]!=null&&(this.options[ge]=ue[ge]):ue.options||(this.linterOptions[ge]=ue[ge]);this.timeout=null,this.hasGutter=me,this.onMouseOver=function(we){re(j,we)},this.waitingFor=0}var M={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(j){var ue=j.state.lint;ue.hasGutter&&j.clearGutter(r),ue.options.highlightLines&&D(j);for(var me=0;me<ue.marked.length;++me)ue.marked[me].clear();ue.marked.length=0}function D(j){j.eachLine(function(ue){var me=ue.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ue.wrapClass);me&&j.removeLineClass(ue,"wrap",me[0])})}function R(j,ue,me,ge,we){var Ee=document.createElement("div"),xe=Ee;return Ee.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+me,ge&&(xe=Ee.appendChild(document.createElement("div")),xe.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),we!=!1&&t.on(xe,"mouseover",function(We){f(j,We,ue,xe)}),Ee}function U(j,ue){return j=="error"?j:ue}function G(j){for(var ue=[],me=0;me<j.length;++me){var ge=j[me],we=ge.from.line;(ue[we]||(ue[we]=[])).push(ge)}return ue}function W(j){var ue=j.severity;ue||(ue="error");var me=document.createElement("div");return me.className="CodeMirror-lint-message CodeMirror-lint-message-"+ue,typeof j.messageHTML<"u"?me.innerHTML=j.messageHTML:me.appendChild(document.createTextNode(j.message)),me}function J(j,ue){var me=j.state.lint,ge=++me.waitingFor;function we(){ge=-1,j.off("change",we)}j.on("change",we),ue(j.getValue(),function(Ee,xe){j.off("change",we),me.waitingFor==ge&&(xe&&Ee instanceof t&&(Ee=xe),j.operation(function(){oe(j,Ee)}))},me.linterOptions,j)}function $(j){var ue=j.state.lint;if(ue){var me=ue.options,ge=me.getAnnotations||j.getHelper(t.Pos(0,0),"lint");if(ge)if(me.async||ge.async)J(j,ge);else{var we=ge(j.getValue(),ue.linterOptions,j);if(!we)return;we.then?we.then(function(Ee){j.operation(function(){oe(j,Ee)})}):j.operation(function(){oe(j,we)})}}}function oe(j,ue){var me=j.state.lint;if(me){var ge=me.options;B(j);for(var we=G(ue),Ee=0;Ee<we.length;++Ee){var xe=we[Ee];if(xe){for(var We=null,be=me.hasGutter&&document.createDocumentFragment(),rt=0;rt<xe.length;++rt){var Ct=xe[rt],at=Ct.severity;at||(at="error"),We=U(We,at),ge.formatAnnotation&&(Ct=ge.formatAnnotation(Ct)),me.hasGutter&&be.appendChild(W(Ct)),Ct.to&&me.marked.push(j.markText(Ct.from,Ct.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+at,__annotation:Ct}))}me.hasGutter&&j.setGutterMarker(Ee,r,R(j,be,We,xe.length>1,ge.tooltips)),ge.highlightLines&&j.addLineClass(Ee,"wrap",i+We)}}ge.onUpdateLinting&&ge.onUpdateLinting(ue,we,j)}}function te(j){var ue=j.state.lint;ue&&(clearTimeout(ue.timeout),ue.timeout=setTimeout(function(){$(j)},ue.options.delay))}function H(j,ue,me){for(var ge=me.target||me.srcElement,we=document.createDocumentFragment(),Ee=0;Ee<ue.length;Ee++){var xe=ue[Ee];we.appendChild(W(xe))}f(j,me,we,ge)}function re(j,ue){var me=ue.target||ue.srcElement;if(/\bCodeMirror-lint-mark-/.test(me.className)){for(var ge=me.getBoundingClientRect(),we=(ge.left+ge.right)/2,Ee=(ge.top+ge.bottom)/2,xe=j.findMarksAt(j.coordsChar({left:we,top:Ee},"client")),We=[],be=0;be<xe.length;++be){var rt=xe[be].__annotation;rt&&We.push(rt)}We.length&&H(j,We,ue)}}t.defineOption("lint",!1,function(j,ue,me){if(me&&me!=t.Init&&(B(j),j.state.lint.options.lintOnChange!==!1&&j.off("change",te),t.off(j.getWrapperElement(),"mouseover",j.state.lint.onMouseOver),clearTimeout(j.state.lint.timeout),delete j.state.lint),ue){for(var ge=j.getOption("gutters"),we=!1,Ee=0;Ee<ge.length;++Ee)ge[Ee]==r&&(we=!0);var xe=j.state.lint=new C(j,ue,we);xe.options.lintOnChange&&j.on("change",te),xe.options.tooltips!=!1&&xe.options.tooltips!="gutter"&&t.on(j.getWrapperElement(),"mouseover",xe.onMouseOver),$(j)}}),t.defineExtension("performLint",function(){$(this)})})}()),pk.exports}qae();var gk={exports:{}},yk;function $ae(){return yk||(yk=1,function(n,e){(function(t){t(M3())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(D){return D&&D.bracketRegex||/[(){}[\]]/}function o(D,R,U){var G=D.getLineHandle(R.line),W=R.ch-1,J=U&&U.afterCursor;J==null&&(J=/(^| )cm-fat-cursor($| )/.test(D.getWrapperElement().className));var $=l(U),oe=!J&&W>=0&&$.test(G.text.charAt(W))&&s[G.text.charAt(W)]||$.test(G.text.charAt(W+1))&&s[G.text.charAt(++W)];if(!oe)return null;var te=oe.charAt(1)==">"?1:-1;if(U&&U.strict&&te>0!=(W==R.ch))return null;var H=D.getTokenTypeAt(i(R.line,W+1)),re=f(D,i(R.line,W+(te>0?1:0)),te,H,U);return re==null?null:{from:i(R.line,W),to:re&&re.pos,match:re&&re.ch==oe.charAt(0),forward:te>0}}function f(D,R,U,G,W){for(var J=W&&W.maxScanLineLength||1e4,$=W&&W.maxScanLines||1e3,oe=[],te=l(W),H=U>0?Math.min(R.line+$,D.lastLine()+1):Math.max(D.firstLine()-1,R.line-$),re=R.line;re!=H;re+=U){var j=D.getLine(re);if(j){var ue=U>0?0:j.length-1,me=U>0?j.length:-1;if(!(j.length>J))for(re==R.line&&(ue=R.ch-(U<0?1:0));ue!=me;ue+=U){var ge=j.charAt(ue);if(te.test(ge)&&(G===void 0||(D.getTokenTypeAt(i(re,ue+1))||"")==(G||""))){var we=s[ge];if(we&&we.charAt(1)==">"==U>0)oe.push(ge);else if(oe.length)oe.pop();else return{pos:i(re,ue),ch:ge}}}}}return re-U==(U>0?D.lastLine():D.firstLine())?!1:null}function C(D,R,U){for(var G=D.state.matchBrackets.maxHighlightLineLength||1e3,W=U&&U.highlightNonMatching,J=[],$=D.listSelections(),oe=0;oe<$.length;oe++){var te=$[oe].empty()&&o(D,$[oe].head,U);if(te&&(te.match||W!==!1)&&D.getLine(te.from.line).length<=G){var H=te.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";J.push(D.markText(te.from,i(te.from.line,te.from.ch+1),{className:H})),te.to&&D.getLine(te.to.line).length<=G&&J.push(D.markText(te.to,i(te.to.line,te.to.ch+1),{className:H}))}}if(J.length){r&&D.state.focused&&D.focus();var re=function(){D.operation(function(){for(var j=0;j<J.length;j++)J[j].clear()})};if(R)setTimeout(re,800);else return re}}function M(D){D.operation(function(){D.state.matchBrackets.currentlyHighlighted&&(D.state.matchBrackets.currentlyHighlighted(),D.state.matchBrackets.currentlyHighlighted=null),D.state.matchBrackets.currentlyHighlighted=C(D,!1,D.state.matchBrackets)})}function B(D){D.state.matchBrackets&&D.state.matchBrackets.currentlyHighlighted&&(D.state.matchBrackets.currentlyHighlighted(),D.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(D,R,U){U&&U!=t.Init&&(D.off("cursorActivity",M),D.off("focus",M),D.off("blur",B),B(D)),R&&(D.state.matchBrackets=typeof R=="object"?R:{},D.on("cursorActivity",M),D.on("focus",M),D.on("blur",B))}),t.defineExtension("matchBrackets",function(){C(this,!0)}),t.defineExtension("findMatchingBracket",function(D,R,U){return(U||typeof R=="boolean")&&(U?(U.strict=R,R=U):R=R?{strict:!0}:null),o(this,D,R)}),t.defineExtension("scanForBracket",function(D,R,U,G){return f(this,D,R,U,G)})})}()),gk.exports}$ae();const Vae=/("(?:[^\\"]|\\.)*")|[:,]/g;function vG(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,f){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,i);if(C===void 0)return C;const M=r-o.length-f;if(C.length<=M){const B=C.replace(Vae,(D,R)=>R||`${D} `);if(B.length<=M)return B}if(i!=null&&(l=JSON.parse(C),i=void 0),typeof l=="object"&&l!==null){const B=o+t,D=[];let R=0,U,G;if(Array.isArray(l)){U="[",G="]";const{length:W}=l;for(;R<W;R++)D.push(s(l[R],B,R===W-1?0:1)||"null")}else{U="{",G="}";const W=Object.keys(l),{length:J}=W;for(;R<J;R++){const $=W[R],oe=`${JSON.stringify($)}: `,te=s(l[$],B,oe.length+(R===J-1?0:1));te!==void 0&&D.push(oe+te)}}if(D.length>0)return[U,t+D.join(`,
${B}`),G].join(`
${o}`)}return C}(n,"",0)}var eC={exports:{}},Hae=eC.exports,vk;function Zae(){return vk||(vk=1,function(n,e){(function(t,r){r(e)})(Hae,function(t){const r={isWhiteSpace:function(ze){return ze===" "||ze===""||ze==="\uFEFF"||ze>="	"&&ze<="\r"||ze===""||ze>=""&&ze<=""||ze==="\u2028"||ze==="\u2029"||ze===""||ze===""||ze===""},isWhiteSpaceJSON:function(ze){return ze===" "||ze==="	"||ze===`
`||ze==="\r"},isLineTerminator:function(ze){return ze===`
`||ze==="\r"||ze==="\u2028"||ze==="\u2029"},isLineTerminatorJSON:function(ze){return ze===`
`||ze==="\r"},isIdentifierStart:function(ze){return ze==="$"||ze==="_"||ze>="A"&&ze<="Z"||ze>="a"&&ze<="z"||ze>=""&&r.NonAsciiIdentifierStart.test(ze)},isIdentifierPart:function(ze){return ze==="$"||ze==="_"||ze>="A"&&ze<="Z"||ze>="a"&&ze<="z"||ze>="0"&&ze<="9"||ze>=""&&r.NonAsciiIdentifierPart.test(ze)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(Je){return Je>="0"&&Je<="9"||Je>="A"&&Je<="F"||Je>="a"&&Je<="f"}function s(Je){return Je>="0"&&Je<="7"}function l(Je){return Je>="0"&&Je<="9"}function o(Je){return Je.charCodeAt(0)===65279}const f={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},C=Object.hasOwn,M={};function B(Je,ze){(typeof Je!="string"||!(Je instanceof String))&&(Je=String(Je));const Te=ze.mode==="json5",He=ze.ignoreBOM,pt=ze.ignoreComments||ze.mode==="cjson"||Te,kt=ze.ignoreTrailingCommas||Te,ft=ze.ignoreProtoKey,Bt=ze.ignorePrototypeKeys,Tt=ze.allowSingleQuotedStrings||Te,Le=ze.allowDuplicateObjectKeys,Pe=ze.reviver,ke=ze.tokenize,Qe=ze.rawTokens,_t=ze.tokenLocations,gt=ze.tokenPaths,wt=Te?r.isLineTerminator:r.isLineTerminatorJSON,Qt=Te?r.isWhiteSpace:r.isWhiteSpaceJSON,Ft=Je.length;let ln=0,Vn=0,jt=0;const Un=[];let wn,Mn,En;if(ke){let At=null,It,nt;wn=function(){if(At!==null)throw Error("internal error, token overlap");It=ln+1,nt=jt-Vn+1,At=jt},Mn=function(en,Tn){if(At!==jt){const xn={type:en};Qe&&(xn.raw=Je.substr(At,jt-At)),Tn!==void 0&&(xn.value=Tn),_t&&(xn.location={start:{column:nt,line:It,offset:At}}),gt&&(xn.path=En.slice()),Un.push(xn)}return At=null,Tn},gt&&(En=[])}function Mr(){let At;return jt<Ft?At=`Unexpected token ${JSON.stringify(Je[jt])}`:At="Unexpected end of input",At}function Hn(At){const It=jt-Vn+1;++ln;const nt=we(At,Je,jt,ln,It),en=SyntaxError(nt.message);return en.reason=At,en.excerpt=nt.excerpt,en.pointer=nt.pointer,en.location={start:{column:It,line:ln,offset:jt}},en}function Pn(At){throw At||(At=Mr()),Hn(At)}function Ne(At){At==="\r"&&Je[jt]===`
`&&++jt,Vn=jt,++ln}function he(){if(jt<Ft){wn?.();const At=Je[jt++];if(At==='"'||At==="'"&&Tt){const It=m(At);return Mn?.("literal",It),It}if(At==="{")return Mn?.("symbol","{"),ct();if(At==="[")return Mn?.("symbol","["),$e();if(At==="-"||At==="."||l(At)||Te&&(At==="+"||At==="I"||At==="N")){const It=De();return Mn?.("literal",It),It}if(At==="n")return Ge("null"),Mn?.("literal",null),null;if(At==="t")return Ge("true"),Mn?.("literal",!0),!0;if(At==="f")return Ge("false"),Mn?.("literal",!1),!1;--jt,Mn?.();return}}function ie(){let At;if(jt<Ft){wn?.();const It=Je[jt++];if(It==='"'||It==="'"&&Tt){const nt=m(It);return Mn?.("literal",nt),nt}if(It==="{")return Mn?.("symbol","{"),ct();if(It==="[")return Mn?.("symbol","["),$e();if(It==="."||l(It)){const nt=De();return Mn?.("literal",nt),nt}if(Te&&r.isIdentifierStart(It)||It==="\\"&&Je[jt]==="u"){const nt=jt-1;if(At=Ze(),At===void 0){jt=nt,Mn?.();return}return Mn?.("literal",At),At}--jt,Mn?.();return}}function se(){o(Je)&&(wn?.(),++jt,Mn?.("bom"))}function fe(){let At;function It(){At||(At=!0,--jt,wn(),++jt)}function nt(){At&&(At=!1,Mn("whitespace"))}for(;jt<Ft;){const en=Je[jt++];if(wt(en))wn&&It(),Ne(en);else if(Qt(en))wn&&It();else if(en==="/"&&pt&&(Je[jt]==="/"||Je[jt]==="*"))wn&&(--jt,nt(),wn(),++jt),Oe(Je[jt++]==="*"),Mn?.("comment");else{--jt;break}}Mn&&nt()}function Oe(At){for(;jt<Ft;){const It=Je[jt++];if(wt(It)){if(!At){--jt;return}Ne(It)}else if(It==="*"&&At&&Je[jt]==="/"){++jt;return}}At&&Pn("Unclosed multiline comment")}function Ge(At){const It=jt;for(let nt=1,en=At.length;nt<en;++nt)(jt>=Ft||At[nt]!==Je[jt])&&(jt=It-1,Pn()),++jt}function ct(){let At={},It=!1;for(;jt<Ft;){fe();const nt=ie();Le===!1&&C(At,nt)&&Pn(`Duplicate key: "${nt}"`),fe(),wn?.();let en=Je[jt++];if(Mn?.("symbol",en),en==="}"&&nt===void 0)return!kt&&It&&(--jt,Pn("Trailing comma in object")),At;if(en===":"&&nt!==void 0){fe(),En?.push(nt);let Tn=he();if(En?.pop(),Tn===void 0&&Pn(`No value found for key "${nt}"`),typeof nt!="string"&&(!Te||typeof nt!="number")&&Pn(`Wrong key type: "${nt}"`),Bt&&(nt in M||M[nt]!=null)||ft&&nt==="__proto__"||(Pe&&(Tn=Pe(nt,Tn)),Tn!==void 0&&(It=!0,nt==="__proto__"?At=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(Tn)}}`),At):At[nt]=Tn)),fe(),wn?.(),en=Je[jt++],Mn?.("symbol",en),en!==","){if(en==="}")return At;Pn()}}else--jt,Pn()}Pn()}function $e(){const At=[];for(;jt<Ft;){fe(),En?.push(At.length);let It=he();En?.pop(),fe(),wn?.();const nt=Je[jt++];if(Mn?.("symbol",nt),It!==void 0&&(Pe&&(It=Pe(String(At.length),It)),It===void 0?(++At.length,It=!0):At.push(It)),nt===",")It===void 0&&Pn("Elisions are not supported");else{if(nt==="]")return!kt&&It===void 0&&At.length&&(--jt,Pn("Trailing comma in array")),At;--jt,Pn()}}}function De(){--jt;let At=jt,It=Je[jt++];const nt=function(en){const Tn=Je.substr(At,jt-At);let xn;if(en?xn=Number.parseInt(Tn.replace(/^0o?/,""),8):xn=Number(Tn),Number.isNaN(xn))--jt,Pn(`Bad numeric literal - "${Je.substr(At,jt-At+1)}"`);else if(!Te&&!Tn.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--jt,Pn(`Non-json numeric literal - "${Je.substr(At,jt-At+1)}"`);else return xn};if((It==="-"||It==="+"&&Te)&&(It=Je[jt++]),It==="N"&&Te)return Ge("NaN"),Number.NaN;if(It==="I"&&Te)return Ge("Infinity"),nt();if(It>="1"&&It<="9"){for(;jt<Ft&&l(Je[jt]);)++jt;It=Je[jt++]}if(It==="0"){It=Je[jt++];const en=It==="o"||It==="O"||s(It),Tn=It==="x"||It==="X";if(Te&&(en||Tn)){for(;jt<Ft&&(Tn?i:s)(Je[jt]);)++jt;let xn=1;return Je[At]==="-"?(xn=-1,++At):Je[At]==="+"&&++At,xn*nt(en)}}if(It==="."){for(;jt<Ft&&l(Je[jt]);)++jt;It=Je[jt++]}if(It==="e"||It==="E"){for(It=Je[jt++],(It==="-"||It==="+")&&++jt;jt<Ft&&l(Je[jt]);)++jt;It=Je[jt++]}return--jt,nt()}function Ze(){--jt;let At="";for(;jt<Ft;){let It=Je[jt++];if(It==="\\"&&Je[jt]==="u"&&i(Je[jt+1])&&i(Je[jt+2])&&i(Je[jt+3])&&i(Je[jt+4])&&(It=String.fromCharCode(Number.parseInt(Je.substr(jt+1,4),16)),jt+=5),At.length)if(r.isIdentifierPart(It))At+=It;else return--jt,At;else if(r.isIdentifierStart(It))At+=It;else return}Pn()}function m(At){let It="";for(;jt<Ft;){let nt=Je[jt++];if(nt===At)return It;if(nt==="\\")if(jt>=Ft&&Pn(),nt=Je[jt++],f[nt]&&(Te||nt!=="v"&&(nt!=="'"||Tt)))It+=f[nt];else if(Te&&wt(nt))Ne(nt);else if(nt==="u"||nt==="x"&&Te){const en=nt==="u"?4:2;for(let Tn=0;Tn<en;++Tn)jt>=Ft&&Pn(),i(Je[jt])||Pn("Bad escape sequence"),jt++;It+=String.fromCharCode(Number.parseInt(Je.substr(jt-en,en),16))}else if(Te&&s(nt)){let en;nt<"4"&&s(Je[jt])&&s(Je[jt+1])?en=3:s(Je[jt])?en=2:en=1,jt+=en-1,It+=String.fromCharCode(Number.parseInt(Je.substr(jt-en,en),8))}else Te?It+=nt:(--jt,Pn());else wt(nt)?Pn():(!Te&&nt.charCodeAt(0)<32&&(--jt,Pn("Unexpected control character")),It+=nt)}Pn()}He&&se(),fe();let mt=he();if(mt!==void 0||jt<Ft){if(fe(),jt>=Ft)return Pe&&(mt=Pe("",mt)),ke?Un:mt;Pn()}else Pn(jt?"No data, only a whitespace":"No data, empty input")}function D(Je,ze){return typeof ze=="function"?ze={reviver:ze}:ze||(ze={}),B(Je,ze)}function R(Je,ze){ze||(ze={});const Te=ze.tokenize;ze.tokenize=!0;const He=B(Je,ze);return ze.tokenize=Te,He}function U(Je){return Je.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function G(Je){return Je.length===0?"":`/${Je.map(U).join("/")}`}function W(Je){return Je.replace(/~1/g,"/").replace(/~0/g,"~")}function J(Je){if(Je==="")return[];if(Je[0]!=="/")throw new Error('Missing initial "/" in the reference');return Je.substr(1).split("/").map(W)}function $(Je,ze){const Te=Je.substr(0,ze).split(/\r?\n/),He=Te.length,pt=Te[He-1].length+1;return{line:He,column:pt}}function oe(Je,ze,Te){if(ze>1){const He=/\r?\n/g;let pt;for(;pt=He.exec(Je);)if(--ze===1)return pt.index+Te}return Te-1}function te(Je,ze){const Te=Math.max(0,ze-20),He=Je.substr(Te,ze-Te);return(ze>20?"...":"")+He.replace(/\r?\n/g,"")}function H(Je,ze){let Te=Math.max(0,ze-20);Te+=ze-Te;const He=Je.length-Te;return Je.substr(Te,Math.min(20,He)).replace(/\r?\n/g,"")+(He>20?"...":"")}function re(Je,ze){const Te=te(Je,ze),He=H(Je,ze),pt=`${new Array(Te.length+1).join("-")}^`;return{excerpt:Te+He,pointer:pt}}function j(Je){let ze=Je.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Te=ze.charAt(0);return Te>="a"&&(ze=Te.toUpperCase()+ze.substr(1)),ze}function ue(Je,ze){const Te=/ in JSON at position (\d+)$/.exec(ze);if(Te){const He=+Te[1],pt=$(Je,He);return{offset:He,line:pt.line,column:pt.column,reason:ze.substr(0,Te.index)}}}function me(Je,ze){const Te=/ end of JSON input$/.exec(ze);if(Te){const He=Je.length,pt=$(Je,He);return{offset:He,line:pt.line,column:pt.column,reason:ze.substr(0,Te.index+4)}}}function ge(Je,ze){const Te=/ at line (\d+) column (\d+) of the JSON data$/.exec(ze);if(Te){const He=+Te[1],pt=+Te[2];return{offset:oe(Je,He,pt),line:He,column:pt,reason:ze.substr(0,Te.index)}}}function we(Je,ze,Te,He,pt){const kt=re(ze,Te),ft=kt.excerpt;let Bt,Tt;return typeof He=="number"?(Tt=kt.pointer,Bt=`Parse error on line ${He}, column ${pt}:
${ft}
${Tt}
${Je}`):Bt=`Parse error in JSON input:
${ft}
${Je}`,{message:Bt,excerpt:ft,pointer:Tt}}function Ee(Je,ze){let Te=j(ze);const He=ue(Je,Te)||me(Je,Te)||ge(Je,Te);let pt,kt,ft;He?(pt=He.offset,kt=He.line,ft=He.column,Te=He.reason):pt=0,ze.reason=Te;const Bt=we(Te,Je,pt,kt,ft);return ze.message=Bt.message,ze.excerpt=Bt.excerpt,Bt.pointer&&(ze.pointer=Bt.pointer,ze.location={start:{column:ft,line:kt,offset:pt}}),ze}function xe(Je,ze){try{return JSON.parse(Je,ze)}catch(Te){const He=Ee(Je,Te);if(Te.location)throw He;return D(Je,ze)}}const We=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),be=typeof process<"u"&&process.version.startsWith("v4.");function rt(Je){return Je.ignoreBOM||Je.ignoreComments||Je.ignoreTrailingCommas||Je.allowSingleQuotedStrings||Je.allowDuplicateObjectKeys===!1||Je.ignoreProtoKey||Je.ignorePrototypeKeys||Je.mode==="cjson"||Je.mode==="json5"||We||be}function Ct(Je){if(typeof Je=="function")return Je;if(Je)return Je.reviver}function at(Je,ze){return ze||(ze={}),rt(ze)?D(Je,ze):xe(Je,Ct(ze))}t.parse=at,t.tokenize=R,t.pathToPointer=G,t.pointerToPath=J,t.parseNative=xe,t.parseCustom=D,t.getErrorTexts=we,Object.defineProperty(t,"__esModule",{value:!0})})}(eC,eC.exports)),eC.exports}var Xae=Zae(),c2={exports:{}},Jae=c2.exports,Ck;function ele(){return Ck||(Ck=1,function(n,e){(function(t,r){n.exports=r()})(Jae,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Pe,ke){return ke={exports:{}},Pe(ke,ke.exports),ke.exports}var i=r(function(Pe){function ke(){var Qe=0,_t=1,gt=2,wt=3,Qt=4,Ft=5,ln=6,Vn=7,jt=8,Un=9,wn=10,Mn=11,En=12,Mr=13,Hn=14,Pn=15,Ne=16,he=17,ie=0,se=1,fe=2,Oe=3,Ge=4;function ct(m,mt){return 55296<=m.charCodeAt(mt)&&m.charCodeAt(mt)<=56319&&56320<=m.charCodeAt(mt+1)&&m.charCodeAt(mt+1)<=57343}function $e(m,mt){mt===void 0&&(mt=0);var At=m.charCodeAt(mt);if(55296<=At&&At<=56319&&mt<m.length-1){var It=At,nt=m.charCodeAt(mt+1);return 56320<=nt&&nt<=57343?(It-55296)*1024+(nt-56320)+65536:It}if(56320<=At&&At<=57343&&mt>=1){var It=m.charCodeAt(mt-1),nt=At;return 55296<=It&&It<=56319?(It-55296)*1024+(nt-56320)+65536:nt}return At}function De(m,mt,At){var It=[m].concat(mt).concat([At]),nt=It[It.length-2],en=At,Tn=It.lastIndexOf(Hn);if(Tn>1&&It.slice(1,Tn).every(function(Qn){return Qn==wt})&&[wt,Mr,he].indexOf(m)==-1)return fe;var xn=It.lastIndexOf(Qt);if(xn>0&&It.slice(1,xn).every(function(Qn){return Qn==Qt})&&[En,Qt].indexOf(nt)==-1)return It.filter(function(Qn){return Qn==Qt}).length%2==1?Oe:Ge;if(nt==Qe&&en==_t)return ie;if(nt==gt||nt==Qe||nt==_t)return en==Hn&&mt.every(function(Qn){return Qn==wt})?fe:se;if(en==gt||en==Qe||en==_t)return se;if(nt==ln&&(en==ln||en==Vn||en==Un||en==wn))return ie;if((nt==Un||nt==Vn)&&(en==Vn||en==jt))return ie;if((nt==wn||nt==jt)&&en==jt)return ie;if(en==wt||en==Pn)return ie;if(en==Ft)return ie;if(nt==En)return ie;var er=It.indexOf(wt)!=-1?It.lastIndexOf(wt)-1:It.length-2;return[Mr,he].indexOf(It[er])!=-1&&It.slice(er+1,-1).every(function(Qn){return Qn==wt})&&en==Hn||nt==Pn&&[Ne,he].indexOf(en)!=-1?ie:mt.indexOf(Qt)!=-1?fe:nt==Qt&&en==Qt?ie:se}this.nextBreak=function(m,mt){if(mt===void 0&&(mt=0),mt<0)return 0;if(mt>=m.length-1)return m.length;for(var At=Ze($e(m,mt)),It=[],nt=mt+1;nt<m.length;nt++)if(!ct(m,nt-1)){var en=Ze($e(m,nt));if(De(At,It,en))return nt;It.push(en)}return m.length},this.splitGraphemes=function(m){for(var mt=[],At=0,It;(It=this.nextBreak(m,At))<m.length;)mt.push(m.slice(At,It)),At=It;return At<m.length&&mt.push(m.slice(At)),mt},this.iterateGraphemes=function(m){var mt=0,At={next:(function(){var It,nt;return(nt=this.nextBreak(m,mt))<m.length?(It=m.slice(mt,nt),mt=nt,{value:It,done:!1}):mt<m.length?(It=m.slice(mt),mt=m.length,{value:It,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(At[Symbol.iterator]=function(){return At}),At},this.countGraphemes=function(m){for(var mt=0,At=0,It;(It=this.nextBreak(m,At))<m.length;)At=It,mt++;return At<m.length&&mt++,mt};function Ze(m){return 1536<=m&&m<=1541||m==1757||m==1807||m==2274||m==3406||m==69821||70082<=m&&m<=70083||m==72250||72326<=m&&m<=72329||m==73030?En:m==13?Qe:m==10?_t:0<=m&&m<=9||11<=m&&m<=12||14<=m&&m<=31||127<=m&&m<=159||m==173||m==1564||m==6158||m==8203||8206<=m&&m<=8207||m==8232||m==8233||8234<=m&&m<=8238||8288<=m&&m<=8292||m==8293||8294<=m&&m<=8303||55296<=m&&m<=57343||m==65279||65520<=m&&m<=65528||65529<=m&&m<=65531||113824<=m&&m<=113827||119155<=m&&m<=119162||m==917504||m==917505||917506<=m&&m<=917535||917632<=m&&m<=917759||918e3<=m&&m<=921599?gt:768<=m&&m<=879||1155<=m&&m<=1159||1160<=m&&m<=1161||1425<=m&&m<=1469||m==1471||1473<=m&&m<=1474||1476<=m&&m<=1477||m==1479||1552<=m&&m<=1562||1611<=m&&m<=1631||m==1648||1750<=m&&m<=1756||1759<=m&&m<=1764||1767<=m&&m<=1768||1770<=m&&m<=1773||m==1809||1840<=m&&m<=1866||1958<=m&&m<=1968||2027<=m&&m<=2035||2070<=m&&m<=2073||2075<=m&&m<=2083||2085<=m&&m<=2087||2089<=m&&m<=2093||2137<=m&&m<=2139||2260<=m&&m<=2273||2275<=m&&m<=2306||m==2362||m==2364||2369<=m&&m<=2376||m==2381||2385<=m&&m<=2391||2402<=m&&m<=2403||m==2433||m==2492||m==2494||2497<=m&&m<=2500||m==2509||m==2519||2530<=m&&m<=2531||2561<=m&&m<=2562||m==2620||2625<=m&&m<=2626||2631<=m&&m<=2632||2635<=m&&m<=2637||m==2641||2672<=m&&m<=2673||m==2677||2689<=m&&m<=2690||m==2748||2753<=m&&m<=2757||2759<=m&&m<=2760||m==2765||2786<=m&&m<=2787||2810<=m&&m<=2815||m==2817||m==2876||m==2878||m==2879||2881<=m&&m<=2884||m==2893||m==2902||m==2903||2914<=m&&m<=2915||m==2946||m==3006||m==3008||m==3021||m==3031||m==3072||3134<=m&&m<=3136||3142<=m&&m<=3144||3146<=m&&m<=3149||3157<=m&&m<=3158||3170<=m&&m<=3171||m==3201||m==3260||m==3263||m==3266||m==3270||3276<=m&&m<=3277||3285<=m&&m<=3286||3298<=m&&m<=3299||3328<=m&&m<=3329||3387<=m&&m<=3388||m==3390||3393<=m&&m<=3396||m==3405||m==3415||3426<=m&&m<=3427||m==3530||m==3535||3538<=m&&m<=3540||m==3542||m==3551||m==3633||3636<=m&&m<=3642||3655<=m&&m<=3662||m==3761||3764<=m&&m<=3769||3771<=m&&m<=3772||3784<=m&&m<=3789||3864<=m&&m<=3865||m==3893||m==3895||m==3897||3953<=m&&m<=3966||3968<=m&&m<=3972||3974<=m&&m<=3975||3981<=m&&m<=3991||3993<=m&&m<=4028||m==4038||4141<=m&&m<=4144||4146<=m&&m<=4151||4153<=m&&m<=4154||4157<=m&&m<=4158||4184<=m&&m<=4185||4190<=m&&m<=4192||4209<=m&&m<=4212||m==4226||4229<=m&&m<=4230||m==4237||m==4253||4957<=m&&m<=4959||5906<=m&&m<=5908||5938<=m&&m<=5940||5970<=m&&m<=5971||6002<=m&&m<=6003||6068<=m&&m<=6069||6071<=m&&m<=6077||m==6086||6089<=m&&m<=6099||m==6109||6155<=m&&m<=6157||6277<=m&&m<=6278||m==6313||6432<=m&&m<=6434||6439<=m&&m<=6440||m==6450||6457<=m&&m<=6459||6679<=m&&m<=6680||m==6683||m==6742||6744<=m&&m<=6750||m==6752||m==6754||6757<=m&&m<=6764||6771<=m&&m<=6780||m==6783||6832<=m&&m<=6845||m==6846||6912<=m&&m<=6915||m==6964||6966<=m&&m<=6970||m==6972||m==6978||7019<=m&&m<=7027||7040<=m&&m<=7041||7074<=m&&m<=7077||7080<=m&&m<=7081||7083<=m&&m<=7085||m==7142||7144<=m&&m<=7145||m==7149||7151<=m&&m<=7153||7212<=m&&m<=7219||7222<=m&&m<=7223||7376<=m&&m<=7378||7380<=m&&m<=7392||7394<=m&&m<=7400||m==7405||m==7412||7416<=m&&m<=7417||7616<=m&&m<=7673||7675<=m&&m<=7679||m==8204||8400<=m&&m<=8412||8413<=m&&m<=8416||m==8417||8418<=m&&m<=8420||8421<=m&&m<=8432||11503<=m&&m<=11505||m==11647||11744<=m&&m<=11775||12330<=m&&m<=12333||12334<=m&&m<=12335||12441<=m&&m<=12442||m==42607||42608<=m&&m<=42610||42612<=m&&m<=42621||42654<=m&&m<=42655||42736<=m&&m<=42737||m==43010||m==43014||m==43019||43045<=m&&m<=43046||43204<=m&&m<=43205||43232<=m&&m<=43249||43302<=m&&m<=43309||43335<=m&&m<=43345||43392<=m&&m<=43394||m==43443||43446<=m&&m<=43449||m==43452||m==43493||43561<=m&&m<=43566||43569<=m&&m<=43570||43573<=m&&m<=43574||m==43587||m==43596||m==43644||m==43696||43698<=m&&m<=43700||43703<=m&&m<=43704||43710<=m&&m<=43711||m==43713||43756<=m&&m<=43757||m==43766||m==44005||m==44008||m==44013||m==64286||65024<=m&&m<=65039||65056<=m&&m<=65071||65438<=m&&m<=65439||m==66045||m==66272||66422<=m&&m<=66426||68097<=m&&m<=68099||68101<=m&&m<=68102||68108<=m&&m<=68111||68152<=m&&m<=68154||m==68159||68325<=m&&m<=68326||m==69633||69688<=m&&m<=69702||69759<=m&&m<=69761||69811<=m&&m<=69814||69817<=m&&m<=69818||69888<=m&&m<=69890||69927<=m&&m<=69931||69933<=m&&m<=69940||m==70003||70016<=m&&m<=70017||70070<=m&&m<=70078||70090<=m&&m<=70092||70191<=m&&m<=70193||m==70196||70198<=m&&m<=70199||m==70206||m==70367||70371<=m&&m<=70378||70400<=m&&m<=70401||m==70460||m==70462||m==70464||m==70487||70502<=m&&m<=70508||70512<=m&&m<=70516||70712<=m&&m<=70719||70722<=m&&m<=70724||m==70726||m==70832||70835<=m&&m<=70840||m==70842||m==70845||70847<=m&&m<=70848||70850<=m&&m<=70851||m==71087||71090<=m&&m<=71093||71100<=m&&m<=71101||71103<=m&&m<=71104||71132<=m&&m<=71133||71219<=m&&m<=71226||m==71229||71231<=m&&m<=71232||m==71339||m==71341||71344<=m&&m<=71349||m==71351||71453<=m&&m<=71455||71458<=m&&m<=71461||71463<=m&&m<=71467||72193<=m&&m<=72198||72201<=m&&m<=72202||72243<=m&&m<=72248||72251<=m&&m<=72254||m==72263||72273<=m&&m<=72278||72281<=m&&m<=72283||72330<=m&&m<=72342||72344<=m&&m<=72345||72752<=m&&m<=72758||72760<=m&&m<=72765||m==72767||72850<=m&&m<=72871||72874<=m&&m<=72880||72882<=m&&m<=72883||72885<=m&&m<=72886||73009<=m&&m<=73014||m==73018||73020<=m&&m<=73021||73023<=m&&m<=73029||m==73031||92912<=m&&m<=92916||92976<=m&&m<=92982||94095<=m&&m<=94098||113821<=m&&m<=113822||m==119141||119143<=m&&m<=119145||119150<=m&&m<=119154||119163<=m&&m<=119170||119173<=m&&m<=119179||119210<=m&&m<=119213||119362<=m&&m<=119364||121344<=m&&m<=121398||121403<=m&&m<=121452||m==121461||m==121476||121499<=m&&m<=121503||121505<=m&&m<=121519||122880<=m&&m<=122886||122888<=m&&m<=122904||122907<=m&&m<=122913||122915<=m&&m<=122916||122918<=m&&m<=122922||125136<=m&&m<=125142||125252<=m&&m<=125258||917536<=m&&m<=917631||917760<=m&&m<=917999?wt:127462<=m&&m<=127487?Qt:m==2307||m==2363||2366<=m&&m<=2368||2377<=m&&m<=2380||2382<=m&&m<=2383||2434<=m&&m<=2435||2495<=m&&m<=2496||2503<=m&&m<=2504||2507<=m&&m<=2508||m==2563||2622<=m&&m<=2624||m==2691||2750<=m&&m<=2752||m==2761||2763<=m&&m<=2764||2818<=m&&m<=2819||m==2880||2887<=m&&m<=2888||2891<=m&&m<=2892||m==3007||3009<=m&&m<=3010||3014<=m&&m<=3016||3018<=m&&m<=3020||3073<=m&&m<=3075||3137<=m&&m<=3140||3202<=m&&m<=3203||m==3262||3264<=m&&m<=3265||3267<=m&&m<=3268||3271<=m&&m<=3272||3274<=m&&m<=3275||3330<=m&&m<=3331||3391<=m&&m<=3392||3398<=m&&m<=3400||3402<=m&&m<=3404||3458<=m&&m<=3459||3536<=m&&m<=3537||3544<=m&&m<=3550||3570<=m&&m<=3571||m==3635||m==3763||3902<=m&&m<=3903||m==3967||m==4145||4155<=m&&m<=4156||4182<=m&&m<=4183||m==4228||m==6070||6078<=m&&m<=6085||6087<=m&&m<=6088||6435<=m&&m<=6438||6441<=m&&m<=6443||6448<=m&&m<=6449||6451<=m&&m<=6456||6681<=m&&m<=6682||m==6741||m==6743||6765<=m&&m<=6770||m==6916||m==6965||m==6971||6973<=m&&m<=6977||6979<=m&&m<=6980||m==7042||m==7073||7078<=m&&m<=7079||m==7082||m==7143||7146<=m&&m<=7148||m==7150||7154<=m&&m<=7155||7204<=m&&m<=7211||7220<=m&&m<=7221||m==7393||7410<=m&&m<=7411||m==7415||43043<=m&&m<=43044||m==43047||43136<=m&&m<=43137||43188<=m&&m<=43203||43346<=m&&m<=43347||m==43395||43444<=m&&m<=43445||43450<=m&&m<=43451||43453<=m&&m<=43456||43567<=m&&m<=43568||43571<=m&&m<=43572||m==43597||m==43755||43758<=m&&m<=43759||m==43765||44003<=m&&m<=44004||44006<=m&&m<=44007||44009<=m&&m<=44010||m==44012||m==69632||m==69634||m==69762||69808<=m&&m<=69810||69815<=m&&m<=69816||m==69932||m==70018||70067<=m&&m<=70069||70079<=m&&m<=70080||70188<=m&&m<=70190||70194<=m&&m<=70195||m==70197||70368<=m&&m<=70370||70402<=m&&m<=70403||m==70463||70465<=m&&m<=70468||70471<=m&&m<=70472||70475<=m&&m<=70477||70498<=m&&m<=70499||70709<=m&&m<=70711||70720<=m&&m<=70721||m==70725||70833<=m&&m<=70834||m==70841||70843<=m&&m<=70844||m==70846||m==70849||71088<=m&&m<=71089||71096<=m&&m<=71099||m==71102||71216<=m&&m<=71218||71227<=m&&m<=71228||m==71230||m==71340||71342<=m&&m<=71343||m==71350||71456<=m&&m<=71457||m==71462||72199<=m&&m<=72200||m==72249||72279<=m&&m<=72280||m==72343||m==72751||m==72766||m==72873||m==72881||m==72884||94033<=m&&m<=94078||m==119142||m==119149?Ft:4352<=m&&m<=4447||43360<=m&&m<=43388?ln:4448<=m&&m<=4519||55216<=m&&m<=55238?Vn:4520<=m&&m<=4607||55243<=m&&m<=55291?jt:m==44032||m==44060||m==44088||m==44116||m==44144||m==44172||m==44200||m==44228||m==44256||m==44284||m==44312||m==44340||m==44368||m==44396||m==44424||m==44452||m==44480||m==44508||m==44536||m==44564||m==44592||m==44620||m==44648||m==44676||m==44704||m==44732||m==44760||m==44788||m==44816||m==44844||m==44872||m==44900||m==44928||m==44956||m==44984||m==45012||m==45040||m==45068||m==45096||m==45124||m==45152||m==45180||m==45208||m==45236||m==45264||m==45292||m==45320||m==45348||m==45376||m==45404||m==45432||m==45460||m==45488||m==45516||m==45544||m==45572||m==45600||m==45628||m==45656||m==45684||m==45712||m==45740||m==45768||m==45796||m==45824||m==45852||m==45880||m==45908||m==45936||m==45964||m==45992||m==46020||m==46048||m==46076||m==46104||m==46132||m==46160||m==46188||m==46216||m==46244||m==46272||m==46300||m==46328||m==46356||m==46384||m==46412||m==46440||m==46468||m==46496||m==46524||m==46552||m==46580||m==46608||m==46636||m==46664||m==46692||m==46720||m==46748||m==46776||m==46804||m==46832||m==46860||m==46888||m==46916||m==46944||m==46972||m==47e3||m==47028||m==47056||m==47084||m==47112||m==47140||m==47168||m==47196||m==47224||m==47252||m==47280||m==47308||m==47336||m==47364||m==47392||m==47420||m==47448||m==47476||m==47504||m==47532||m==47560||m==47588||m==47616||m==47644||m==47672||m==47700||m==47728||m==47756||m==47784||m==47812||m==47840||m==47868||m==47896||m==47924||m==47952||m==47980||m==48008||m==48036||m==48064||m==48092||m==48120||m==48148||m==48176||m==48204||m==48232||m==48260||m==48288||m==48316||m==48344||m==48372||m==48400||m==48428||m==48456||m==48484||m==48512||m==48540||m==48568||m==48596||m==48624||m==48652||m==48680||m==48708||m==48736||m==48764||m==48792||m==48820||m==48848||m==48876||m==48904||m==48932||m==48960||m==48988||m==49016||m==49044||m==49072||m==49100||m==49128||m==49156||m==49184||m==49212||m==49240||m==49268||m==49296||m==49324||m==49352||m==49380||m==49408||m==49436||m==49464||m==49492||m==49520||m==49548||m==49576||m==49604||m==49632||m==49660||m==49688||m==49716||m==49744||m==49772||m==49800||m==49828||m==49856||m==49884||m==49912||m==49940||m==49968||m==49996||m==50024||m==50052||m==50080||m==50108||m==50136||m==50164||m==50192||m==50220||m==50248||m==50276||m==50304||m==50332||m==50360||m==50388||m==50416||m==50444||m==50472||m==50500||m==50528||m==50556||m==50584||m==50612||m==50640||m==50668||m==50696||m==50724||m==50752||m==50780||m==50808||m==50836||m==50864||m==50892||m==50920||m==50948||m==50976||m==51004||m==51032||m==51060||m==51088||m==51116||m==51144||m==51172||m==51200||m==51228||m==51256||m==51284||m==51312||m==51340||m==51368||m==51396||m==51424||m==51452||m==51480||m==51508||m==51536||m==51564||m==51592||m==51620||m==51648||m==51676||m==51704||m==51732||m==51760||m==51788||m==51816||m==51844||m==51872||m==51900||m==51928||m==51956||m==51984||m==52012||m==52040||m==52068||m==52096||m==52124||m==52152||m==52180||m==52208||m==52236||m==52264||m==52292||m==52320||m==52348||m==52376||m==52404||m==52432||m==52460||m==52488||m==52516||m==52544||m==52572||m==52600||m==52628||m==52656||m==52684||m==52712||m==52740||m==52768||m==52796||m==52824||m==52852||m==52880||m==52908||m==52936||m==52964||m==52992||m==53020||m==53048||m==53076||m==53104||m==53132||m==53160||m==53188||m==53216||m==53244||m==53272||m==53300||m==53328||m==53356||m==53384||m==53412||m==53440||m==53468||m==53496||m==53524||m==53552||m==53580||m==53608||m==53636||m==53664||m==53692||m==53720||m==53748||m==53776||m==53804||m==53832||m==53860||m==53888||m==53916||m==53944||m==53972||m==54e3||m==54028||m==54056||m==54084||m==54112||m==54140||m==54168||m==54196||m==54224||m==54252||m==54280||m==54308||m==54336||m==54364||m==54392||m==54420||m==54448||m==54476||m==54504||m==54532||m==54560||m==54588||m==54616||m==54644||m==54672||m==54700||m==54728||m==54756||m==54784||m==54812||m==54840||m==54868||m==54896||m==54924||m==54952||m==54980||m==55008||m==55036||m==55064||m==55092||m==55120||m==55148||m==55176?Un:44033<=m&&m<=44059||44061<=m&&m<=44087||44089<=m&&m<=44115||44117<=m&&m<=44143||44145<=m&&m<=44171||44173<=m&&m<=44199||44201<=m&&m<=44227||44229<=m&&m<=44255||44257<=m&&m<=44283||44285<=m&&m<=44311||44313<=m&&m<=44339||44341<=m&&m<=44367||44369<=m&&m<=44395||44397<=m&&m<=44423||44425<=m&&m<=44451||44453<=m&&m<=44479||44481<=m&&m<=44507||44509<=m&&m<=44535||44537<=m&&m<=44563||44565<=m&&m<=44591||44593<=m&&m<=44619||44621<=m&&m<=44647||44649<=m&&m<=44675||44677<=m&&m<=44703||44705<=m&&m<=44731||44733<=m&&m<=44759||44761<=m&&m<=44787||44789<=m&&m<=44815||44817<=m&&m<=44843||44845<=m&&m<=44871||44873<=m&&m<=44899||44901<=m&&m<=44927||44929<=m&&m<=44955||44957<=m&&m<=44983||44985<=m&&m<=45011||45013<=m&&m<=45039||45041<=m&&m<=45067||45069<=m&&m<=45095||45097<=m&&m<=45123||45125<=m&&m<=45151||45153<=m&&m<=45179||45181<=m&&m<=45207||45209<=m&&m<=45235||45237<=m&&m<=45263||45265<=m&&m<=45291||45293<=m&&m<=45319||45321<=m&&m<=45347||45349<=m&&m<=45375||45377<=m&&m<=45403||45405<=m&&m<=45431||45433<=m&&m<=45459||45461<=m&&m<=45487||45489<=m&&m<=45515||45517<=m&&m<=45543||45545<=m&&m<=45571||45573<=m&&m<=45599||45601<=m&&m<=45627||45629<=m&&m<=45655||45657<=m&&m<=45683||45685<=m&&m<=45711||45713<=m&&m<=45739||45741<=m&&m<=45767||45769<=m&&m<=45795||45797<=m&&m<=45823||45825<=m&&m<=45851||45853<=m&&m<=45879||45881<=m&&m<=45907||45909<=m&&m<=45935||45937<=m&&m<=45963||45965<=m&&m<=45991||45993<=m&&m<=46019||46021<=m&&m<=46047||46049<=m&&m<=46075||46077<=m&&m<=46103||46105<=m&&m<=46131||46133<=m&&m<=46159||46161<=m&&m<=46187||46189<=m&&m<=46215||46217<=m&&m<=46243||46245<=m&&m<=46271||46273<=m&&m<=46299||46301<=m&&m<=46327||46329<=m&&m<=46355||46357<=m&&m<=46383||46385<=m&&m<=46411||46413<=m&&m<=46439||46441<=m&&m<=46467||46469<=m&&m<=46495||46497<=m&&m<=46523||46525<=m&&m<=46551||46553<=m&&m<=46579||46581<=m&&m<=46607||46609<=m&&m<=46635||46637<=m&&m<=46663||46665<=m&&m<=46691||46693<=m&&m<=46719||46721<=m&&m<=46747||46749<=m&&m<=46775||46777<=m&&m<=46803||46805<=m&&m<=46831||46833<=m&&m<=46859||46861<=m&&m<=46887||46889<=m&&m<=46915||46917<=m&&m<=46943||46945<=m&&m<=46971||46973<=m&&m<=46999||47001<=m&&m<=47027||47029<=m&&m<=47055||47057<=m&&m<=47083||47085<=m&&m<=47111||47113<=m&&m<=47139||47141<=m&&m<=47167||47169<=m&&m<=47195||47197<=m&&m<=47223||47225<=m&&m<=47251||47253<=m&&m<=47279||47281<=m&&m<=47307||47309<=m&&m<=47335||47337<=m&&m<=47363||47365<=m&&m<=47391||47393<=m&&m<=47419||47421<=m&&m<=47447||47449<=m&&m<=47475||47477<=m&&m<=47503||47505<=m&&m<=47531||47533<=m&&m<=47559||47561<=m&&m<=47587||47589<=m&&m<=47615||47617<=m&&m<=47643||47645<=m&&m<=47671||47673<=m&&m<=47699||47701<=m&&m<=47727||47729<=m&&m<=47755||47757<=m&&m<=47783||47785<=m&&m<=47811||47813<=m&&m<=47839||47841<=m&&m<=47867||47869<=m&&m<=47895||47897<=m&&m<=47923||47925<=m&&m<=47951||47953<=m&&m<=47979||47981<=m&&m<=48007||48009<=m&&m<=48035||48037<=m&&m<=48063||48065<=m&&m<=48091||48093<=m&&m<=48119||48121<=m&&m<=48147||48149<=m&&m<=48175||48177<=m&&m<=48203||48205<=m&&m<=48231||48233<=m&&m<=48259||48261<=m&&m<=48287||48289<=m&&m<=48315||48317<=m&&m<=48343||48345<=m&&m<=48371||48373<=m&&m<=48399||48401<=m&&m<=48427||48429<=m&&m<=48455||48457<=m&&m<=48483||48485<=m&&m<=48511||48513<=m&&m<=48539||48541<=m&&m<=48567||48569<=m&&m<=48595||48597<=m&&m<=48623||48625<=m&&m<=48651||48653<=m&&m<=48679||48681<=m&&m<=48707||48709<=m&&m<=48735||48737<=m&&m<=48763||48765<=m&&m<=48791||48793<=m&&m<=48819||48821<=m&&m<=48847||48849<=m&&m<=48875||48877<=m&&m<=48903||48905<=m&&m<=48931||48933<=m&&m<=48959||48961<=m&&m<=48987||48989<=m&&m<=49015||49017<=m&&m<=49043||49045<=m&&m<=49071||49073<=m&&m<=49099||49101<=m&&m<=49127||49129<=m&&m<=49155||49157<=m&&m<=49183||49185<=m&&m<=49211||49213<=m&&m<=49239||49241<=m&&m<=49267||49269<=m&&m<=49295||49297<=m&&m<=49323||49325<=m&&m<=49351||49353<=m&&m<=49379||49381<=m&&m<=49407||49409<=m&&m<=49435||49437<=m&&m<=49463||49465<=m&&m<=49491||49493<=m&&m<=49519||49521<=m&&m<=49547||49549<=m&&m<=49575||49577<=m&&m<=49603||49605<=m&&m<=49631||49633<=m&&m<=49659||49661<=m&&m<=49687||49689<=m&&m<=49715||49717<=m&&m<=49743||49745<=m&&m<=49771||49773<=m&&m<=49799||49801<=m&&m<=49827||49829<=m&&m<=49855||49857<=m&&m<=49883||49885<=m&&m<=49911||49913<=m&&m<=49939||49941<=m&&m<=49967||49969<=m&&m<=49995||49997<=m&&m<=50023||50025<=m&&m<=50051||50053<=m&&m<=50079||50081<=m&&m<=50107||50109<=m&&m<=50135||50137<=m&&m<=50163||50165<=m&&m<=50191||50193<=m&&m<=50219||50221<=m&&m<=50247||50249<=m&&m<=50275||50277<=m&&m<=50303||50305<=m&&m<=50331||50333<=m&&m<=50359||50361<=m&&m<=50387||50389<=m&&m<=50415||50417<=m&&m<=50443||50445<=m&&m<=50471||50473<=m&&m<=50499||50501<=m&&m<=50527||50529<=m&&m<=50555||50557<=m&&m<=50583||50585<=m&&m<=50611||50613<=m&&m<=50639||50641<=m&&m<=50667||50669<=m&&m<=50695||50697<=m&&m<=50723||50725<=m&&m<=50751||50753<=m&&m<=50779||50781<=m&&m<=50807||50809<=m&&m<=50835||50837<=m&&m<=50863||50865<=m&&m<=50891||50893<=m&&m<=50919||50921<=m&&m<=50947||50949<=m&&m<=50975||50977<=m&&m<=51003||51005<=m&&m<=51031||51033<=m&&m<=51059||51061<=m&&m<=51087||51089<=m&&m<=51115||51117<=m&&m<=51143||51145<=m&&m<=51171||51173<=m&&m<=51199||51201<=m&&m<=51227||51229<=m&&m<=51255||51257<=m&&m<=51283||51285<=m&&m<=51311||51313<=m&&m<=51339||51341<=m&&m<=51367||51369<=m&&m<=51395||51397<=m&&m<=51423||51425<=m&&m<=51451||51453<=m&&m<=51479||51481<=m&&m<=51507||51509<=m&&m<=51535||51537<=m&&m<=51563||51565<=m&&m<=51591||51593<=m&&m<=51619||51621<=m&&m<=51647||51649<=m&&m<=51675||51677<=m&&m<=51703||51705<=m&&m<=51731||51733<=m&&m<=51759||51761<=m&&m<=51787||51789<=m&&m<=51815||51817<=m&&m<=51843||51845<=m&&m<=51871||51873<=m&&m<=51899||51901<=m&&m<=51927||51929<=m&&m<=51955||51957<=m&&m<=51983||51985<=m&&m<=52011||52013<=m&&m<=52039||52041<=m&&m<=52067||52069<=m&&m<=52095||52097<=m&&m<=52123||52125<=m&&m<=52151||52153<=m&&m<=52179||52181<=m&&m<=52207||52209<=m&&m<=52235||52237<=m&&m<=52263||52265<=m&&m<=52291||52293<=m&&m<=52319||52321<=m&&m<=52347||52349<=m&&m<=52375||52377<=m&&m<=52403||52405<=m&&m<=52431||52433<=m&&m<=52459||52461<=m&&m<=52487||52489<=m&&m<=52515||52517<=m&&m<=52543||52545<=m&&m<=52571||52573<=m&&m<=52599||52601<=m&&m<=52627||52629<=m&&m<=52655||52657<=m&&m<=52683||52685<=m&&m<=52711||52713<=m&&m<=52739||52741<=m&&m<=52767||52769<=m&&m<=52795||52797<=m&&m<=52823||52825<=m&&m<=52851||52853<=m&&m<=52879||52881<=m&&m<=52907||52909<=m&&m<=52935||52937<=m&&m<=52963||52965<=m&&m<=52991||52993<=m&&m<=53019||53021<=m&&m<=53047||53049<=m&&m<=53075||53077<=m&&m<=53103||53105<=m&&m<=53131||53133<=m&&m<=53159||53161<=m&&m<=53187||53189<=m&&m<=53215||53217<=m&&m<=53243||53245<=m&&m<=53271||53273<=m&&m<=53299||53301<=m&&m<=53327||53329<=m&&m<=53355||53357<=m&&m<=53383||53385<=m&&m<=53411||53413<=m&&m<=53439||53441<=m&&m<=53467||53469<=m&&m<=53495||53497<=m&&m<=53523||53525<=m&&m<=53551||53553<=m&&m<=53579||53581<=m&&m<=53607||53609<=m&&m<=53635||53637<=m&&m<=53663||53665<=m&&m<=53691||53693<=m&&m<=53719||53721<=m&&m<=53747||53749<=m&&m<=53775||53777<=m&&m<=53803||53805<=m&&m<=53831||53833<=m&&m<=53859||53861<=m&&m<=53887||53889<=m&&m<=53915||53917<=m&&m<=53943||53945<=m&&m<=53971||53973<=m&&m<=53999||54001<=m&&m<=54027||54029<=m&&m<=54055||54057<=m&&m<=54083||54085<=m&&m<=54111||54113<=m&&m<=54139||54141<=m&&m<=54167||54169<=m&&m<=54195||54197<=m&&m<=54223||54225<=m&&m<=54251||54253<=m&&m<=54279||54281<=m&&m<=54307||54309<=m&&m<=54335||54337<=m&&m<=54363||54365<=m&&m<=54391||54393<=m&&m<=54419||54421<=m&&m<=54447||54449<=m&&m<=54475||54477<=m&&m<=54503||54505<=m&&m<=54531||54533<=m&&m<=54559||54561<=m&&m<=54587||54589<=m&&m<=54615||54617<=m&&m<=54643||54645<=m&&m<=54671||54673<=m&&m<=54699||54701<=m&&m<=54727||54729<=m&&m<=54755||54757<=m&&m<=54783||54785<=m&&m<=54811||54813<=m&&m<=54839||54841<=m&&m<=54867||54869<=m&&m<=54895||54897<=m&&m<=54923||54925<=m&&m<=54951||54953<=m&&m<=54979||54981<=m&&m<=55007||55009<=m&&m<=55035||55037<=m&&m<=55063||55065<=m&&m<=55091||55093<=m&&m<=55119||55121<=m&&m<=55147||55149<=m&&m<=55175||55177<=m&&m<=55203?wn:m==9757||m==9977||9994<=m&&m<=9997||m==127877||127938<=m&&m<=127940||m==127943||127946<=m&&m<=127948||128066<=m&&m<=128067||128070<=m&&m<=128080||m==128110||128112<=m&&m<=128120||m==128124||128129<=m&&m<=128131||128133<=m&&m<=128135||m==128170||128372<=m&&m<=128373||m==128378||m==128400||128405<=m&&m<=128406||128581<=m&&m<=128583||128587<=m&&m<=128591||m==128675||128692<=m&&m<=128694||m==128704||m==128716||129304<=m&&m<=129308||129310<=m&&m<=129311||m==129318||129328<=m&&m<=129337||129341<=m&&m<=129342||129489<=m&&m<=129501?Mr:127995<=m&&m<=127999?Hn:m==8205?Pn:m==9792||m==9794||9877<=m&&m<=9878||m==9992||m==10084||m==127752||m==127806||m==127859||m==127891||m==127908||m==127912||m==127979||m==127981||m==128139||128187<=m&&m<=128188||m==128295||m==128300||m==128488||m==128640||m==128658?Ne:128102<=m&&m<=128105?he:Mn}return this}Pe.exports&&(Pe.exports=ke)}),s=new i,l=function(ke,Qe,_t){for(var gt=s.iterateGraphemes(ke.substring(Qe)),wt="",Qt=0;Qt<_t-Qe;Qt++){var Ft=gt.next();if(wt+=Ft.value,Ft.done)break}return wt},o=function(Pe,ke,Qe,_t,gt,wt,Qt){return{start:{line:Pe,column:ke,offset:Qe},end:{line:_t,column:gt,offset:wt},source:Qt||null}},f=r(function(Pe,ke){(function(Qe,_t){Pe.exports=_t()})(t,function(){var Qe="",_t,gt=wt;function wt(wn,Mn){if(typeof wn!="string")throw new TypeError("expected a string");if(Mn===1)return wn;if(Mn===2)return wn+wn;var En=wn.length*Mn;if(_t!==wn||typeof _t>"u")_t=wn,Qe="";else if(Qe.length>=En)return Qe.substr(0,En);for(;En>Qe.length&&Mn>1;)Mn&1&&(Qe+=wn),Mn>>=1,wn+=wn;return Qe+=wn,Qe=Qe.substr(0,En),Qe}var Qt=function(Mn,En,Mr){if(Mn==null||En==null)return Mn;var Hn=String(Mn),Pn=typeof En=="number"?En:parseInt(En,10);if(isNaN(Pn)||!isFinite(Pn))return Hn;var Ne=Hn.length;if(Ne>=Pn)return Hn;var he=String(Mr);he===""&&(he=" ");for(var ie=Pn-Ne;he.length<ie;)he+=he;var se=he.length>ie?he.substr(0,ie):he;return se+Hn},Ft=Object.assign||function(wn){for(var Mn=1;Mn<arguments.length;Mn++){var En=arguments[Mn];for(var Mr in En)Object.prototype.hasOwnProperty.call(En,Mr)&&(wn[Mr]=En[Mr])}return wn};function ln(wn,Mn,En,Mr){var Hn=String(Mn),Pn=Qt(Hn,En," "),Ne=gt(" ",Mr.tabSize);return Pn+" | "+wn.replace(/\t/g,Ne)}function Vn(wn,Mn,En,Mr,Hn){return wn.slice(Mn,En).map(function(Pn,Ne){return ln(Pn,Mn+Ne+1,Mr,Hn)}).join(`
`)}var jt={extraLines:2,tabSize:4},Un=function(Mn,En,Mr,Hn){Hn=Ft({},jt,Hn);var Pn=Mn.split(/\r\n?|\n|\f/),Ne=Math.max(1,En-Hn.extraLines)-1,he=Math.min(En+Hn.extraLines,Pn.length),ie=String(he).length,se=Vn(Pn,Ne,En,ie,Hn),fe=ln(Pn[En-1].substring(0,Mr-1),En,ie,Hn),Oe=gt(" ",fe.length)+"^",Ge=Vn(Pn,En,he,ie,Hn);return[se,Oe,Ge].filter(Boolean).join(`
`)};return Un})}),C=new Error().stack,M=function(Pe){var ke=Object.create(SyntaxError.prototype);return Object.assign(ke,Pe,{name:"SyntaxError"}),Object.defineProperty(ke,"stack",{get:function(){return C?C.replace(/^(.+\n){1,3}/,String(ke)+`
`):""}}),ke},B=function(Pe,ke,Qe,_t,gt){throw M({message:_t?Pe+`
`+f(ke,_t,gt):Pe,rawMessage:Pe,source:Qe,line:_t,column:gt})},D={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(ke){for(var Qe=arguments.length,_t=Array(Qe>1?Qe-1:0),gt=1;gt<Qe;gt++)_t[gt-1]=arguments[gt];return"Unexpected token <"+ke+"> at "+_t.filter(Boolean).join(":")}},R={unexpectedSymbol:function(ke){for(var Qe=arguments.length,_t=Array(Qe>1?Qe-1:0),gt=1;gt<Qe;gt++)_t[gt-1]=arguments[gt];return"Unexpected symbol <"+ke+"> at "+_t.filter(Boolean).join(":")}},U={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},G={"{":U.LEFT_BRACE,"}":U.RIGHT_BRACE,"[":U.LEFT_BRACKET,"]":U.RIGHT_BRACKET,":":U.COLON,",":U.COMMA},W={true:U.TRUE,false:U.FALSE,null:U.NULL},J={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},$={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},oe={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function te(Pe){return Pe>="1"&&Pe<="9"}function H(Pe){return Pe>="0"&&Pe<="9"}function re(Pe){return H(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function j(Pe){return Pe==="e"||Pe==="E"}function ue(Pe,ke,Qe,_t){var gt=Pe.charAt(ke);if(gt==="\r")ke++,Qe++,_t=1,Pe.charAt(ke)===`
`&&ke++;else if(gt===`
`)ke++,Qe++,_t=1;else if(gt==="	"||gt===" ")ke++,_t++;else return null;return{index:ke,line:Qe,column:_t}}function me(Pe,ke,Qe,_t){var gt=Pe.charAt(ke);return gt in G?{type:G[gt],line:Qe,column:_t+1,index:ke+1,value:null}:null}function ge(Pe,ke,Qe,_t){for(var gt in W)if(W.hasOwnProperty(gt)&&Pe.substr(ke,gt.length)===gt)return{type:W[gt],line:Qe,column:_t+gt.length,index:ke+gt.length,value:gt};return null}function we(Pe,ke,Qe,_t){for(var gt=ke,wt=J._START_;ke<Pe.length;){var Qt=Pe.charAt(ke);switch(wt){case J._START_:{if(Qt==='"')ke++,wt=J.START_QUOTE_OR_CHAR;else return null;break}case J.START_QUOTE_OR_CHAR:{if(Qt==="\\")ke++,wt=J.ESCAPE;else{if(Qt==='"')return ke++,{type:U.STRING,line:Qe,column:_t+ke-gt,index:ke,value:Pe.slice(gt,ke)};ke++}break}case J.ESCAPE:{if(Qt in $){if(ke++,Qt==="u")for(var Ft=0;Ft<4;Ft++){var ln=Pe.charAt(ke);if(ln&&re(ln))ke++;else return null}wt=J.START_QUOTE_OR_CHAR}else return null;break}}}}function Ee(Pe,ke,Qe,_t){var gt=ke,wt=ke,Qt=oe._START_;e:for(;ke<Pe.length;){var Ft=Pe.charAt(ke);switch(Qt){case oe._START_:{if(Ft==="-")Qt=oe.MINUS;else if(Ft==="0")wt=ke+1,Qt=oe.ZERO;else if(te(Ft))wt=ke+1,Qt=oe.DIGIT;else return null;break}case oe.MINUS:{if(Ft==="0")wt=ke+1,Qt=oe.ZERO;else if(te(Ft))wt=ke+1,Qt=oe.DIGIT;else return null;break}case oe.ZERO:{if(Ft===".")Qt=oe.POINT;else if(j(Ft))Qt=oe.EXP;else break e;break}case oe.DIGIT:{if(H(Ft))wt=ke+1;else if(Ft===".")Qt=oe.POINT;else if(j(Ft))Qt=oe.EXP;else break e;break}case oe.POINT:{if(H(Ft))wt=ke+1,Qt=oe.DIGIT_FRACTION;else break e;break}case oe.DIGIT_FRACTION:{if(H(Ft))wt=ke+1;else if(j(Ft))Qt=oe.EXP;else break e;break}case oe.EXP:{if(Ft==="+"||Ft==="-")Qt=oe.EXP_DIGIT_OR_SIGN;else if(H(Ft))wt=ke+1,Qt=oe.EXP_DIGIT_OR_SIGN;else break e;break}case oe.EXP_DIGIT_OR_SIGN:{if(H(Ft))wt=ke+1;else break e;break}}ke++}return wt>0?{type:U.NUMBER,line:Qe,column:_t+wt-gt,index:wt,value:Pe.slice(gt,wt)}:null}var xe=function(ke,Qe){for(var _t=1,gt=1,wt=0,Qt=[];wt<ke.length;){var Ft=[ke,wt,_t,gt],ln=ue.apply(void 0,Ft);if(ln){wt=ln.index,_t=ln.line,gt=ln.column;continue}var Vn=me.apply(void 0,Ft)||ge.apply(void 0,Ft)||we.apply(void 0,Ft)||Ee.apply(void 0,Ft);if(Vn){var jt={type:Vn.type,value:Vn.value,loc:o(_t,gt,wt,Vn.line,Vn.column,Vn.index,Qe.source)};Qt.push(jt),wt=Vn.index,_t=Vn.line,gt=Vn.column}else B(R.unexpectedSymbol(l(ke,wt,wt+1),Qe.source,_t,gt),ke,Qe.source,_t,gt)}return Qt},We={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},be={_START_:0,KEY:1,COLON:2},rt={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ct={loc:!0,source:null};function at(Pe,ke,Qe){var _t=ke.length>0?ke[ke.length-1].loc.end:{line:1,column:1};B(D.unexpectedEnd(),Pe,Qe.source,_t.line,_t.column)}function Je(Pe){for(var ke=0,Qe=0;Qe<4;Qe++)ke=ke*16+parseInt(Pe[Qe],16);return String.fromCharCode(ke)}var ze={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Te=['"',"\\","/"];function He(Pe){for(var ke="",Qe=0;Qe<Pe.length;Qe++){var _t=Pe.charAt(Qe);if(_t==="\\"){Qe++;var gt=Pe.charAt(Qe);if(gt==="u")ke+=Je(Pe.substr(Qe+1,4)),Qe+=4;else if(Te.indexOf(gt)!==-1)ke+=gt;else if(gt in ze)ke+=ze[gt];else break}else ke+=_t}return ke}function pt(Pe,ke,Qe,_t){for(var gt=void 0,wt={type:"Object",children:[]},Qt=We._START_;Qe<ke.length;){var Ft=ke[Qe];switch(Qt){case We._START_:{if(Ft.type===U.LEFT_BRACE)gt=Ft,Qt=We.OPEN_OBJECT,Qe++;else return null;break}case We.OPEN_OBJECT:{if(Ft.type===U.RIGHT_BRACE)return _t.loc&&(wt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Ft.loc.end.line,Ft.loc.end.column,Ft.loc.end.offset,_t.source)),{value:wt,index:Qe+1};var ln=kt(Pe,ke,Qe,_t);wt.children.push(ln.value),Qt=We.PROPERTY,Qe=ln.index;break}case We.PROPERTY:{if(Ft.type===U.RIGHT_BRACE)return _t.loc&&(wt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Ft.loc.end.line,Ft.loc.end.column,Ft.loc.end.offset,_t.source)),{value:wt,index:Qe+1};Ft.type===U.COMMA?(Qt=We.COMMA,Qe++):B(D.unexpectedToken(l(Pe,Ft.loc.start.offset,Ft.loc.end.offset),_t.source,Ft.loc.start.line,Ft.loc.start.column),Pe,_t.source,Ft.loc.start.line,Ft.loc.start.column);break}case We.COMMA:{var Vn=kt(Pe,ke,Qe,_t);Vn?(Qe=Vn.index,wt.children.push(Vn.value),Qt=We.PROPERTY):B(D.unexpectedToken(l(Pe,Ft.loc.start.offset,Ft.loc.end.offset),_t.source,Ft.loc.start.line,Ft.loc.start.column),Pe,_t.source,Ft.loc.start.line,Ft.loc.start.column);break}}}at(Pe,ke,_t)}function kt(Pe,ke,Qe,_t){for(var gt=void 0,wt={type:"Property",key:null,value:null},Qt=be._START_;Qe<ke.length;){var Ft=ke[Qe];switch(Qt){case be._START_:{if(Ft.type===U.STRING){var ln={type:"Identifier",value:He(Pe.slice(Ft.loc.start.offset+1,Ft.loc.end.offset-1)),raw:Ft.value};_t.loc&&(ln.loc=Ft.loc),gt=Ft,wt.key=ln,Qt=be.KEY,Qe++}else return null;break}case be.KEY:{Ft.type===U.COLON?(Qt=be.COLON,Qe++):B(D.unexpectedToken(l(Pe,Ft.loc.start.offset,Ft.loc.end.offset),_t.source,Ft.loc.start.line,Ft.loc.start.column),Pe,_t.source,Ft.loc.start.line,Ft.loc.start.column);break}case be.COLON:{var Vn=Tt(Pe,ke,Qe,_t);return wt.value=Vn.value,_t.loc&&(wt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Vn.value.loc.end.line,Vn.value.loc.end.column,Vn.value.loc.end.offset,_t.source)),{value:wt,index:Vn.index}}}}}function ft(Pe,ke,Qe,_t){for(var gt=void 0,wt={type:"Array",children:[]},Qt=rt._START_,Ft=void 0;Qe<ke.length;)switch(Ft=ke[Qe],Qt){case rt._START_:{if(Ft.type===U.LEFT_BRACKET)gt=Ft,Qt=rt.OPEN_ARRAY,Qe++;else return null;break}case rt.OPEN_ARRAY:{if(Ft.type===U.RIGHT_BRACKET)return _t.loc&&(wt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Ft.loc.end.line,Ft.loc.end.column,Ft.loc.end.offset,_t.source)),{value:wt,index:Qe+1};var ln=Tt(Pe,ke,Qe,_t);Qe=ln.index,wt.children.push(ln.value),Qt=rt.VALUE;break}case rt.VALUE:{if(Ft.type===U.RIGHT_BRACKET)return _t.loc&&(wt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Ft.loc.end.line,Ft.loc.end.column,Ft.loc.end.offset,_t.source)),{value:wt,index:Qe+1};Ft.type===U.COMMA?(Qt=rt.COMMA,Qe++):B(D.unexpectedToken(l(Pe,Ft.loc.start.offset,Ft.loc.end.offset),_t.source,Ft.loc.start.line,Ft.loc.start.column),Pe,_t.source,Ft.loc.start.line,Ft.loc.start.column);break}case rt.COMMA:{var Vn=Tt(Pe,ke,Qe,_t);Qe=Vn.index,wt.children.push(Vn.value),Qt=rt.VALUE;break}}at(Pe,ke,_t)}function Bt(Pe,ke,Qe,_t){var gt=ke[Qe],wt=null;switch(gt.type){case U.STRING:{wt=He(Pe.slice(gt.loc.start.offset+1,gt.loc.end.offset-1));break}case U.NUMBER:{wt=Number(gt.value);break}case U.TRUE:{wt=!0;break}case U.FALSE:{wt=!1;break}case U.NULL:{wt=null;break}default:return null}var Qt={type:"Literal",value:wt,raw:gt.value};return _t.loc&&(Qt.loc=gt.loc),{value:Qt,index:Qe+1}}function Tt(Pe,ke,Qe,_t){var gt=ke[Qe],wt=Bt.apply(void 0,arguments)||pt.apply(void 0,arguments)||ft.apply(void 0,arguments);if(wt)return wt;B(D.unexpectedToken(l(Pe,gt.loc.start.offset,gt.loc.end.offset),_t.source,gt.loc.start.line,gt.loc.start.column),Pe,_t.source,gt.loc.start.line,gt.loc.start.column)}var Le=function(Pe,ke){ke=Object.assign({},Ct,ke);var Qe=xe(Pe,ke);Qe.length===0&&at(Pe,Qe,ke);var _t=Tt(Pe,Qe,0,ke);if(_t.index===Qe.length)return _t.value;var gt=Qe[_t.index];B(D.unexpectedToken(l(Pe,gt.loc.start.offset,gt.loc.end.offset),ke.source,gt.loc.start.line,gt.loc.start.column),Pe,ke.source,gt.loc.start.line,gt.loc.start.column)};return Le})}(c2)),c2.exports}var tle=ele();const nle=yA(tle);function ir(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ir=function(){return l},l}ir();ir().s[0]++;Bp.defineMode("mgl",(n,e)=>(ir().f[0]++,ir().s[1]++,Bp.modes.javascript({...n,json:!0},e)));function CG(n){ir().f[1]++;const e=(ir().s[2]++,[]);ir().s[3]++;try{ir().s[4]++,Xae.parse(n)}catch(t){const r=(ir().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(ir().s[6]++,r){ir().b[0][0]++;const i=(ir().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});ir().s[8]++,e.push({from:Bp.Pos(i.first_line-1,i.first_column),to:Bp.Pos(i.last_line-1,i.last_column),message:t})}else ir().b[0][1]++}return ir().s[9]++,e}ir().s[10]++;Bp.registerHelper("lint","json",n=>(ir().f[2]++,ir().s[11]++,CG(n)));ir().s[12]++;Bp.registerHelper("lint","mgl",(n,e,t)=>{ir().f[3]++;const r=(ir().s[13]++,CG(n)),{context:i}=(ir().s[14]++,e);if(ir().s[15]++,r.length>0)return ir().b[1][0]++,ir().s[16]++,r;ir().b[1][1]++;const s=(ir().s[17]++,nle(n)),l=(ir().s[18]++,JSON.parse(n));function o(C,M){if(ir().f[4]++,ir().s[19]++,C){if(ir().b[2][1]++,ir().s[21]++,M.length<1)return ir().b[3][0]++,ir().s[22]++,C;if(ir().b[3][1]++,ir().s[23]++,C.children){ir().b[4][1]++;const B=(ir().s[25]++,M[0]);let D;return ir().s[26]++,B.match(/^[0-9]+$/)?(ir().b[5][0]++,ir().s[27]++,D=C.children[M[0]]):(ir().b[5][1]++,ir().s[28]++,D=C.children.find(R=>(ir().f[5]++,ir().s[29]++,ir().b[6][0]++,R.key&&(ir().b[6][1]++,R.key.type==="Identifier")&&(ir().b[6][2]++,R.key.value===B))),ir().s[30]++,D?(ir().b[7][0]++,ir().s[31]++,D=D.value):ir().b[7][1]++),ir().s[32]++,o(D,M.slice(1))}else{ir().b[4][0]++,ir().s[24]++;return}}else{ir().b[2][0]++,ir().s[20]++;return}}let f=(ir().s[33]++,null);if(ir().s[34]++,i==="layer"){ir().b[8][0]++;const C=(ir().s[35]++,af({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));ir().s[36]++,C?(ir().b[9][0]++,ir().s[37]++,f={result:"error",value:C.filter(M=>(ir().f[6]++,ir().s[38]++,!M.message.match(/^layers\[0\]: source ".*" not found$/))).map(M=>{ir().f[7]++;const B=(ir().s[39]++,M.message.replace(/^layers\[0\]./,"").split(":"));return ir().s[40]++,{name:"",key:B[0],message:B[1]}})}):ir().b[9][1]++}else if(ir().b[8][1]++,ir().s[41]++,i==="expression")ir().b[10][0]++,ir().s[42]++,f=_V.createExpression(l,e.spec);else throw ir().b[10][1]++,ir().s[43]++,new Error(`Invalid context ${i}`);if(ir().s[44]++,f?.result==="error"){ir().b[11][0]++;const C=(ir().s[45]++,f.value);ir().s[46]++,C.forEach(M=>{ir().f[8]++;const{key:B,message:D}=(ir().s[47]++,M);if(ir().s[48]++,B)if(ir().b[12][1]++,ir().s[52]++,B){ir().b[13][0]++;const R=(ir().s[53]++,B.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),U=(ir().s[54]++,o(s,R));if(ir().s[55]++,U)ir().b[14][1]++;else{ir().b[14][0]++,ir().s[56]++,console.warn("Something went wrong parsing error:",M),ir().s[57]++;return}const{loc:G}=(ir().s[58]++,U),{start:W,end:J}=(ir().s[59]++,G);ir().s[60]++,r.push({from:Bp.Pos(W.line-1,W.column),to:Bp.Pos(J.line-1,J.column),message:D})}else ir().b[13][1]++;else{ir().b[12][0]++;const R=(ir().s[49]++,t.getLineHandle(t.lastLine())),U=(ir().s[50]++,{from:Bp.Pos(t.firstLine(),0),to:Bp.Pos(t.lastLine(),R.text.length),message:D});ir().s[51]++,r.push(U)}})}else ir().b[11][1]++;return ir().s[61]++,r});function dr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dr=function(){return l},l}dr();class rle extends Fn.Component{static defaultProps=(dr().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:e=>(dr().f[0]++,dr().s[1]++,vG(e,{indent:2,maxLength:40})),onFocus:()=>{dr().f[1]++},onBlur:()=>{dr().f[2]++},onJSONInvalid:()=>{dr().f[3]++},onJSONValid:()=>{dr().f[4]++}});_keyEvent;_doc;_el=(dr().s[2]++,null);_cancelNextChange=(dr().s[3]++,!1);constructor(e){dr().f[5]++,dr().s[4]++,super(e),dr().s[5]++,this._keyEvent="keyboard",dr().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){dr().f[6]++,dr().s[7]++,this._doc=Bp(this._el,{value:this.props.getValue(this.props.layer),mode:(dr().b[0][0]++,this.props.mode||(dr().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(dr().b[1][0]++,this.props.lint||(dr().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),dr().s[8]++,this._doc.on("change",this.onChange),dr().s[9]++,this._doc.on("focus",this.onFocus),dr().s[10]++,this._doc.on("blur",this.onBlur)}onPointerDown=(dr().s[11]++,()=>{dr().f[7]++,dr().s[12]++,this._keyEvent="pointer"});onFocus=(dr().s[13]++,()=>{dr().f[8]++,dr().s[14]++,this.props.onFocus?(dr().b[2][0]++,dr().s[15]++,this.props.onFocus()):dr().b[2][1]++,dr().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})});onBlur=(dr().s[17]++,()=>{dr().f[9]++,dr().s[18]++,this._keyEvent="keyboard",dr().s[19]++,this.props.onBlur?(dr().b[3][0]++,dr().s[20]++,this.props.onBlur()):dr().b[3][1]++,dr().s[21]++,this.setState({isEditing:!1,showMessage:!1})});componentWillUnMount(){dr().f[10]++,dr().s[22]++,this._doc.off("change",this.onChange),dr().s[23]++,this._doc.off("focus",this.onFocus),dr().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(e){dr().f[11]++,dr().s[25]++,dr().b[5][0]++,!this.state.isEditing&&(dr().b[5][1]++,e.layer!==this.props.layer)?(dr().b[4][0]++,dr().s[26]++,this._cancelNextChange=!0,dr().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):dr().b[4][1]++}onChange=(dr().s[28]++,e=>{if(dr().f[12]++,dr().s[29]++,this._cancelNextChange){dr().b[6][0]++,dr().s[30]++,this._cancelNextChange=!1,dr().s[31]++,this.setState({prevValue:this._doc.getValue()}),dr().s[32]++;return}else dr().b[6][1]++;const t=(dr().s[33]++,this._doc.getValue());if(dr().s[34]++,this.state.prevValue!==t){dr().b[7][0]++;let r,i;dr().s[35]++;try{dr().s[36]++,r=JSON.parse(t)}catch(s){dr().s[37]++,i=s,dr().s[38]++,console.warn(s)}dr().s[39]++,dr().b[9][0]++,i&&(dr().b[9][1]++,this.props.onJSONInvalid)?(dr().b[8][0]++,dr().s[40]++,this.props.onJSONInvalid()):(dr().b[8][1]++,dr().s[41]++,this.props.onChange?(dr().b[10][0]++,dr().s[42]++,this.props.onChange(r)):dr().b[10][1]++,dr().s[43]++,this.props.onJSONValid?(dr().b[11][0]++,dr().s[44]++,this.props.onJSONValid()):dr().b[11][1]++)}else dr().b[7][1]++;dr().s[45]++,this.setState({prevValue:t})});render(){dr().f[13]++;const e=(dr().s[46]++,this.props.t),{showMessage:t}=(dr().s[47]++,this.state),r=(dr().s[48]++,{});return dr().s[49]++,this.props.maxHeight?(dr().b[12][0]++,dr().s[50]++,r.maxHeight=this.props.maxHeight):dr().b[12][1]++,dr().s[51]++,le.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[le.jsx("div",{className:fm("JSONEditor__message",{"JSONEditor__message--on":t}),children:le.jsxs(N0,{t:e,children:["Press ",le.jsx("kbd",{children:"ESC"})," to lose focus"]})}),le.jsx("div",{className:fm("codemirror-container",this.props.className),ref:i=>(dr().f[14]++,dr().s[52]++,this._el=i),style:r})]})}}const ile=(dr().s[53]++,zs()(rle));function t_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ba883449bc5c5bdef8990a340e3c3a506f463d35",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAiC;AAMxC,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ba883449bc5c5bdef8990a340e3c3a506f463d35"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return t_=function(){return l},l}t_();t_().s[0]++;const KI=n=>(t_().f[0]++,t_().s[1]++,le.jsx(ile,{...n}));var n_="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",ole="M7,10L12,15L17,10H7Z",sle="M7,15L12,10L17,15H7Z",LI="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Gg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gg=function(){return l},l}Gg();const UI=(Gg().s[0]++,["all","any","none"]);Gg().s[1]++;const ale=(Gg().s[2]++,Object.keys(ts.filter_operator.values).filter(n=>(Gg().f[0]++,Gg().s[3]++,UI.indexOf(n)<0)));function Mi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mi=function(){return l},l}Mi();function lle(n){return Mi().f[0]++,Mi().s[0]++,n===""?(Mi().b[0][0]++,Mi().s[1]++,n):(Mi().b[0][1]++,Mi().s[2]++,isNaN(n)?(Mi().b[1][0]++,Mi().s[3]++,n):(Mi().b[1][1]++,Mi().s[4]++,parseFloat(n)))}function Ale(n){Mi().f[1]++;const e=(Mi().s[5]++,typeof n=="string");if(Mi().s[6]++,e)Mi().b[2][1]++;else return Mi().b[2][0]++,Mi().s[7]++,n;return Mi().s[8]++,n.match(/^\s*true\s*$/)?(Mi().b[3][0]++,Mi().s[9]++,!0):(Mi().b[3][1]++,Mi().s[10]++,n.match(/^\s*false\s*$/)?(Mi().b[4][0]++,Mi().s[11]++,!1):(Mi().b[4][1]++,Mi().s[12]++,n))}function ule(n){return Mi().f[2]++,Mi().s[13]++,n=lle(n),Mi().s[14]++,n=Ale(n),Mi().s[15]++,n}class cle extends Fn.Component{static defaultProps=(Mi().s[16]++,{properties:{}});onFilterPartChanged(e,t,r){Mi().f[3]++;let i=(Mi().s[17]++,[e,t,...r.map(ule)]);Mi().s[18]++,Mi().b[6][0]++,e==="has"||(Mi().b[6][1]++,e==="!has")?(Mi().b[5][0]++,Mi().s[19]++,i=[e,t]):(Mi().b[5][1]++,Mi().s[20]++,r.length===0?(Mi().b[7][0]++,Mi().s[21]++,i=[e,t,""]):Mi().b[7][1]++),Mi().s[22]++,this.props.onChange(i)}render(){Mi().f[4]++;const e=(Mi().s[23]++,this.props.filter),t=(Mi().s[24]++,e[0]),r=(Mi().s[25]++,e[1]),i=(Mi().s[26]++,e.slice(2));return Mi().s[27]++,le.jsxs("div",{className:"maputnik-filter-editor-single",children:[le.jsx("div",{className:"maputnik-filter-editor-property",children:le.jsx(U_,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(Mi().f[5]++,Mi().s[28]++,[s,s])),onChange:s=>(Mi().f[6]++,Mi().s[29]++,this.onFilterPartChanged(t,s,i))})}),le.jsx("div",{className:"maputnik-filter-editor-operator",children:le.jsx(i1,{"aria-label":"function",value:t,onChange:s=>(Mi().f[7]++,Mi().s[30]++,this.onFilterPartChanged(s,r,i)),options:ale})}),(Mi().b[8][0]++,i.length>0&&(Mi().b[8][1]++,le.jsx("div",{className:"maputnik-filter-editor-args",children:le.jsx(Pp,{"aria-label":"value",value:i.join(","),onChange:s=>(Mi().f[8]++,Mi().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}function xy(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="13a2e2db8b749f303c3bce9d46fec729506d3ee2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"13a2e2db8b749f303c3bce9d46fec729506d3ee2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xy=function(){return l},l}xy();class hle extends Fn.Component{render(){xy().f[0]++;const e=(xy().s[0]++,this.props.t);return xy().s[1]++,le.jsxs("div",{className:"maputnik-filter-editor-block",children:[le.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),le.jsx("div",{className:"maputnik-filter-editor-block-action",children:le.jsx(Qa,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:le.jsx(Yy,{})})})]})}}const dle=(xy().s[2]++,zs()(hle));var VM,_k;function fle(){if(_k)return VM;_k=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",l="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+o+")",C="[^"+e+"]",M="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",D="\\u200d",R=f+"?",U="["+i+"]?",G="(?:"+D+"(?:"+[C,M,B].join("|")+")"+U+R+")*",W=U+R+G,J="(?:"+[C+l+"?",l,M,B,s].join("|")+")",$=RegExp(o+"(?="+o+")|"+J+W,"g"),oe=RegExp("["+D+e+t+r+i+"]"),te=typeof window=="object"&&window&&window.Object===Object&&window,H=typeof self=="object"&&self&&self.Object===Object&&self,re=te||H||Function("return this")();function j(ft){return ft.split("")}function ue(ft){return oe.test(ft)}function me(ft){return ue(ft)?ge(ft):j(ft)}function ge(ft){return ft.match($)||[]}var we=Object.prototype,Ee=we.toString,xe=re.Symbol,We=xe?xe.prototype:void 0,be=We?We.toString:void 0;function rt(ft,Bt,Tt){var Le=-1,Pe=ft.length;Bt<0&&(Bt=-Bt>Pe?0:Pe+Bt),Tt=Tt>Pe?Pe:Tt,Tt<0&&(Tt+=Pe),Pe=Bt>Tt?0:Tt-Bt>>>0,Bt>>>=0;for(var ke=Array(Pe);++Le<Pe;)ke[Le]=ft[Le+Bt];return ke}function Ct(ft){if(typeof ft=="string")return ft;if(Te(ft))return be?be.call(ft):"";var Bt=ft+"";return Bt=="0"&&1/ft==-1/0?"-0":Bt}function at(ft,Bt,Tt){var Le=ft.length;return Tt=Tt===void 0?Le:Tt,!Bt&&Tt>=Le?ft:rt(ft,Bt,Tt)}function Je(ft){return function(Bt){Bt=He(Bt);var Tt=ue(Bt)?me(Bt):void 0,Le=Tt?Tt[0]:Bt.charAt(0),Pe=Tt?at(Tt,1).join(""):Bt.slice(1);return Le[ft]()+Pe}}function ze(ft){return!!ft&&typeof ft=="object"}function Te(ft){return typeof ft=="symbol"||ze(ft)&&Ee.call(ft)==n}function He(ft){return ft==null?"":Ct(ft)}function pt(ft){return kt(He(ft).toLowerCase())}var kt=Je("toUpperCase");return VM=pt,VM}var ple=fle();const zI=yA(ple);function Xp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xp=function(){return l},l}Xp();function w3(n){Xp().f[0]++;let e;const t=(Xp().s[0]++,n.split("-"));return Xp().s[1]++,t.length>1?(Xp().b[0][0]++,Xp().s[2]++,e=n.split("-").slice(1).join(" ")):(Xp().b[0][1]++,Xp().s[3]++,e=n),Xp().s[4]++,zI(e)}function Co(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Co=function(){return l},l}Co();class mle extends Fn.Component{static defaultProps=(Co().s[0]++,{errors:{},onFocus:()=>{Co().f[0]++},onBlur:()=>{Co().f[1]++}});constructor(e){Co().f[2]++,Co().s[1]++,super(e),Co().s[2]++,this.state={jsonError:!1}}onJSONInvalid=(Co().s[3]++,e=>{Co().f[3]++,Co().s[4]++,this.setState({jsonError:!0})});onJSONValid=(Co().s[5]++,()=>{Co().f[4]++,Co().s[6]++,this.setState({jsonError:!1})});render(){Co().f[5]++;const{t:e,errors:t,fieldName:r,fieldType:i,value:s,canUndo:l}=(Co().s[7]++,this.props),{jsonError:o}=(Co().s[8]++,this.state),f=(Co().s[9]++,l?(Co().b[0][0]++,!l()):(Co().b[0][1]++,!0)),C=(Co().s[10]++,le.jsxs(le.Fragment,{children:[(Co().b[1][0]++,this.props.onUndo&&(Co().b[1][1]++,le.jsx(Qa,{onClick:this.props.onUndo,disabled:f,className:"maputnik-delete-stop",title:e("Revert from expression"),children:le.jsx(dH,{})},"undo_action"))),le.jsx(Qa,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:le.jsx(Yy,{})},"delete_action")]})),M=(Co().s[11]++,i===void 0?(Co().b[2][0]++,r):(Co().b[2][1]++,`${i}.${r}`)),B=(Co().s[12]++,t[M]),D=(Co().s[13]++,`${M}[`),R=(Co().s[14]++,[]);function U(G){return Co().f[6]++,Co().s[15]++,vG(G,{indent:2,maxLength:38})}return Co().s[16]++,o?(Co().b[3][0]++,Co().s[17]++,R.push({message:"Invalid JSON"})):(Co().b[3][1]++,Co().s[18]++,Object.entries(t).filter(([G,W])=>(Co().f[7]++,Co().s[19]++,G.startsWith(D))).forEach(([G,W])=>(Co().f[8]++,Co().s[20]++,R.push(W))),Co().s[21]++,B?(Co().b[4][0]++,Co().s[22]++,R.push(B)):Co().b[4][1]++),Co().s[23]++,le.jsx(ya,{error:R,fieldSpec:this.props.fieldSpec,label:e(w3(this.props.fieldName)),action:C,wideMode:!0,children:le.jsx(KI,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:s,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:U,onChange:this.props.onChange})})}}const _G=(Co().s[24]++,zs()(mle));function kn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="2450f82df6194fa7ce5a592b459b4ddcbdcc401f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAiMQ,SAsDA,UAtDA,KAGA,YAHA;AAjMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAIjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2450f82df6194fa7ce5a592b459b4ddcbdcc401f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return kn=function(){return l},l}kn();function S0(n){kn().f[0]++;const e=(kn().s[0]++,kn().b[0][0]++,n.filter||(kn().b[0][1]++,["all"]));if(kn().s[1]++,Array.isArray(e))kn().b[1][1]++;else return kn().b[1][0]++,kn().s[2]++,e;let t=(kn().s[3]++,e[0]),r=(kn().s[4]++,e.slice(1));return kn().s[5]++,UI.indexOf(t)<0?(kn().b[2][0]++,kn().s[6]++,t="all",kn().s[7]++,r=[e.slice(0)]):kn().b[2][1]++,kn().s[8]++,[t,...r]}function gle(n){return kn().f[1]++,kn().s[9]++,CV(yle(n)).layers[0].filter}function yle(n){return kn().f[2]++,kn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const vle=(kn().s[11]++,["all","any","none"]);function bk(n){if(kn().f[3]++,kn().s[12]++,kn().b[4][0]++,n.length===1&&(kn().b[4][1]++,vle.includes(n[0])))return kn().b[3][0]++,kn().s[13]++,!0;kn().b[3][1]++;const e=(kn().s[14]++,cC(n));return kn().s[15]++,!f_.isEqual(e,n)}function xk(n){return kn().f[4]++,kn().s[16]++,UI.indexOf(n[0])>=0}function Cle(n){return kn().f[5]++,kn().s[17]++,xk(n)?(kn().b[5][0]++,kn().s[18]++,n.slice(1).map(e=>(kn().f[6]++,kn().s[19]++,xk(e))).filter(e=>(kn().f[7]++,kn().s[20]++,e==!0)).length>0):(kn().b[5][1]++,kn().s[21]++,!1)}class _le extends Fn.Component{static defaultProps=(kn().s[22]++,{filter:["all"]});constructor(e){kn().f[8]++,kn().s[23]++,super(e),kn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:bk(S0(e))}}onFilterPartChanged(e,t){kn().f[9]++;const r=(kn().s[25]++,S0(this.props).slice(0));kn().s[26]++,r[e]=t,kn().s[27]++,this.props.onChange(r)}deleteFilterItem(e){kn().f[10]++;const t=(kn().s[28]++,S0(this.props).slice(0));kn().s[29]++,t.splice(e+1,1),kn().s[30]++,this.props.onChange(t)}addFilterItem=(kn().s[31]++,()=>{kn().f[11]++;const e=(kn().s[32]++,S0(this.props).slice(0));kn().s[33]++,e.push(["==","name",""]),kn().s[34]++,this.props.onChange(e)});onToggleDoc=(kn().s[35]++,e=>{kn().f[12]++,kn().s[36]++,this.setState({showDoc:e})});makeFilter=(kn().s[37]++,()=>{kn().f[13]++,kn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(kn().s[39]++,()=>{kn().f[14]++;const e=(kn().s[40]++,S0(this.props));kn().s[41]++,this.props.onChange(gle(e)),kn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){kn().f[15]++;const r=(kn().s[43]++,bk(S0(e)));return kn().s[44]++,kn().b[7][0]++,!r&&(kn().b[7][1]++,t.displaySimpleFilter===!0)?(kn().b[6][0]++,kn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(kn().b[6][1]++,kn().s[46]++,kn().b[9][0]++,r&&(kn().b[9][1]++,t.displaySimpleFilter===!1)?(kn().b[8][0]++,kn().s[47]++,{valueIsSimpleFilter:!0}):(kn().b[8][1]++,kn().s[48]++,{valueIsSimpleFilter:!1}))}render(){kn().f[16]++;const{errors:e,t}=(kn().s[49]++,this.props),{displaySimpleFilter:r}=(kn().s[50]++,this.state),i=(kn().s[51]++,{doc:Es.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),s=(kn().s[52]++,["all"]),l=(kn().s[53]++,kn().b[10][0]++,r&&(kn().b[10][1]++,Cle(S0(this.props))));if(kn().s[54]++,l)return kn().b[11][0]++,kn().s[55]++,le.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[le.jsx("p",{children:t("Nested filters are not supported.")}),le.jsxs(Qa,{onClick:this.makeExpression,title:t("Convert to expression"),children:[le.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:n_})}),t("Upgrade to expression")]})]});if(kn().b[11][1]++,kn().s[56]++,r){kn().b[12][0]++;const o=(kn().s[57]++,S0(this.props)),f=(kn().s[58]++,o[0]),C=(kn().s[59]++,o.slice(1)),M=(kn().s[60]++,le.jsx("div",{children:le.jsx(Qa,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:n_})})})})),B=(kn().s[61]++,C.map((D,R)=>{kn().f[17]++;const U=(kn().s[62]++,e[`filter[${R+1}]`]);return kn().s[63]++,le.jsxs("div",{children:[le.jsx(dle,{onDelete:this.deleteFilterItem.bind(this,R),children:le.jsx(cle,{properties:this.props.properties,filter:D,onChange:this.onFilterPartChanged.bind(this,R+1)})},R),(kn().b[13][0]++,U&&(kn().b[13][1]++,le.jsx("div",{className:"maputnik-inline-error",children:U.message},"error")))]},`block-${R}`)}));return kn().s[64]++,le.jsxs(le.Fragment,{children:[le.jsx(ya,{fieldSpec:i,label:t("Filter"),action:M,children:le.jsx(i1,{value:f,onChange:D=>(kn().f[18]++,kn().s[65]++,this.onFilterPartChanged(0,D)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),B,le.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:le.jsxs(Qa,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:LI})})," ",t("Add filter")]})},"buttons"),le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(kn().b[14][0]++,""):(kn().b[14][1]++,"none")},children:le.jsx(yI,{fieldSpec:i})},"doc")]})}else{kn().b[12][1]++;const{filter:o}=(kn().s[66]++,this.props);return kn().s[67]++,le.jsxs(le.Fragment,{children:[le.jsx(_G,{onDelete:()=>{kn().f[19]++,kn().s[68]++,this.setState({displaySimpleFilter:!0}),kn().s[69]++,this.props.onChange(s)},fieldName:"filter",fieldSpec:i,value:o,errors:e,onChange:this.props.onChange}),(kn().b[15][0]++,this.state.valueIsSimpleFilter&&(kn().b[15][1]++,le.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",le.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const ble=(kn().s[70]++,zs()(_le));var U1={},vd={},z1={},HM,Mk;function bG(){if(Mk)return HM;Mk=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return HM=n,HM}var ZM,wk;function Lp(){if(wk)return ZM;wk=1;var n=bG(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return ZM=t,ZM}var XM,Sk;function z_(){if(Sk)return XM;Sk=1;var n=Lp(),e=n.Symbol;return XM=e,XM}var JM,Ek;function xle(){if(Ek)return JM;Ek=1;var n=z_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(l){var o=t.call(l,i),f=l[i];try{l[i]=void 0;var C=!0}catch{}var M=r.call(l);return C&&(o?l[i]=f:delete l[i]),M}return JM=s,JM}var e5,Bk;function Mle(){if(Bk)return e5;Bk=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return e5=t,e5}var t5,Ok;function o1(){if(Ok)return t5;Ok=1;var n=z_(),e=xle(),t=Mle(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return t5=l,t5}var n5,Ik;function lf(){if(Ik)return n5;Ik=1;var n=Array.isArray;return n5=n,n5}var r5,Tk;function ym(){if(Tk)return r5;Tk=1;function n(e){return e!=null&&typeof e=="object"}return r5=n,r5}var i5,kk;function wle(){if(kk)return i5;kk=1;var n=o1(),e=lf(),t=ym(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return i5=i,i5}var o5,Pk;function Sle(){if(Pk)return o5;Pk=1;function n(e){return function(t,r,i){for(var s=-1,l=Object(t),o=i(t),f=o.length;f--;){var C=o[e?f:++s];if(r(l[C],C,l)===!1)break}return t}}return o5=n,o5}var s5,Rk;function xG(){if(Rk)return s5;Rk=1;var n=Sle(),e=n();return s5=e,s5}var a5,Dk;function Ele(){if(Dk)return a5;Dk=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return a5=n,a5}var l5,Fk;function Ble(){if(Fk)return l5;Fk=1;var n=o1(),e=ym(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return l5=r,l5}var A5,Kk;function NI(){if(Kk)return A5;Kk=1;var n=Ble(),e=ym(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return A5=s,A5}var tC={exports:{}},u5,Lk;function Ole(){if(Lk)return u5;Lk=1;function n(){return!1}return u5=n,u5}tC.exports;var Uk;function S3(){return Uk||(Uk=1,function(n,e){var t=Lp(),r=Ole(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,l=s&&s.exports===i,o=l?t.Buffer:void 0,f=o?o.isBuffer:void 0,C=f||r;n.exports=C}(tC,tC.exports)),tC.exports}var c5,zk;function GI(){if(zk)return c5;zk=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return c5=t,c5}var h5,Nk;function jI(){if(Nk)return h5;Nk=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return h5=e,h5}var d5,Gk;function Ile(){if(Gk)return d5;Gk=1;var n=o1(),e=jI(),t=ym(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",o="[object Error]",f="[object Function]",C="[object Map]",M="[object Number]",B="[object Object]",D="[object RegExp]",R="[object Set]",U="[object String]",G="[object WeakMap]",W="[object ArrayBuffer]",J="[object DataView]",$="[object Float32Array]",oe="[object Float64Array]",te="[object Int8Array]",H="[object Int16Array]",re="[object Int32Array]",j="[object Uint8Array]",ue="[object Uint8ClampedArray]",me="[object Uint16Array]",ge="[object Uint32Array]",we={};we[$]=we[oe]=we[te]=we[H]=we[re]=we[j]=we[ue]=we[me]=we[ge]=!0,we[r]=we[i]=we[W]=we[s]=we[J]=we[l]=we[o]=we[f]=we[C]=we[M]=we[B]=we[D]=we[R]=we[U]=we[G]=!1;function Ee(xe){return t(xe)&&e(xe.length)&&!!we[n(xe)]}return d5=Ee,d5}var f5,jk;function WI(){if(jk)return f5;jk=1;function n(e){return function(t){return e(t)}}return f5=n,f5}var nC={exports:{}};nC.exports;var Wk;function QI(){return Wk||(Wk=1,function(n,e){var t=bG(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s&&t.process,o=function(){try{var f=i&&i.require&&i.require("util").types;return f||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(nC,nC.exports)),nC.exports}var p5,Qk;function YI(){if(Qk)return p5;Qk=1;var n=Ile(),e=WI(),t=QI(),r=t&&t.isTypedArray,i=r?e(r):n;return p5=i,p5}var m5,Yk;function MG(){if(Yk)return m5;Yk=1;var n=Ele(),e=NI(),t=lf(),r=S3(),i=GI(),s=YI(),l=Object.prototype,o=l.hasOwnProperty;function f(C,M){var B=t(C),D=!B&&e(C),R=!B&&!D&&r(C),U=!B&&!D&&!R&&s(C),G=B||D||R||U,W=G?n(C.length,String):[],J=W.length;for(var $ in C)(M||o.call(C,$))&&!(G&&($=="length"||R&&($=="offset"||$=="parent")||U&&($=="buffer"||$=="byteLength"||$=="byteOffset")||i($,J)))&&W.push($);return W}return m5=f,m5}var g5,qk;function qI(){if(qk)return g5;qk=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return g5=e,g5}var y5,$k;function wG(){if($k)return y5;$k=1;function n(e,t){return function(r){return e(t(r))}}return y5=n,y5}var v5,Vk;function Tle(){if(Vk)return v5;Vk=1;var n=wG(),e=n(Object.keys,Object);return v5=e,v5}var C5,Hk;function kle(){if(Hk)return C5;Hk=1;var n=qI(),e=Tle(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var l=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&l.push(o);return l}return C5=i,C5}var _5,Zk;function Wf(){if(Zk)return _5;Zk=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return _5=n,_5}var b5,Xk;function $I(){if(Xk)return b5;Xk=1;var n=o1(),e=Wf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function l(o){if(!e(o))return!1;var f=n(o);return f==r||f==i||f==t||f==s}return b5=l,b5}var x5,Jk;function tv(){if(Jk)return x5;Jk=1;var n=$I(),e=jI();function t(r){return r!=null&&e(r.length)&&!n(r)}return x5=t,x5}var M5,eP;function N_(){if(eP)return M5;eP=1;var n=MG(),e=kle(),t=tv();function r(i){return t(i)?n(i):e(i)}return M5=r,M5}var w5,tP;function SG(){if(tP)return w5;tP=1;var n=xG(),e=N_();function t(r,i){return r&&n(r,i,e)}return w5=t,w5}var S5,nP;function E3(){if(nP)return S5;nP=1;function n(e){return e}return S5=n,S5}var E5,rP;function EG(){if(rP)return E5;rP=1;var n=E3();function e(t){return typeof t=="function"?t:n}return E5=e,E5}var B5,iP;function VI(){if(iP)return B5;iP=1;var n=SG(),e=EG();function t(r,i){return r&&n(r,e(i))}return B5=t,B5}var O5,oP;function HI(){if(oP)return O5;oP=1;var n=wG(),e=n(Object.getPrototypeOf,Object);return O5=e,O5}var I5,sP;function BG(){if(sP)return I5;sP=1;var n=o1(),e=HI(),t=ym(),r="[object Object]",i=Function.prototype,s=Object.prototype,l=i.toString,o=s.hasOwnProperty,f=l.call(Object);function C(M){if(!t(M)||n(M)!=r)return!1;var B=e(M);if(B===null)return!0;var D=o.call(B,"constructor")&&B.constructor;return typeof D=="function"&&D instanceof D&&l.call(D)==f}return I5=C,I5}var T5,aP;function OG(){if(aP)return T5;aP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return T5=n,T5}var k5,lP;function Ple(){if(lP)return k5;lP=1;function n(){this.__data__=[],this.size=0}return k5=n,k5}var P5,AP;function G_(){if(AP)return P5;AP=1;function n(e,t){return e===t||e!==e&&t!==t}return P5=n,P5}var R5,uP;function B3(){if(uP)return R5;uP=1;var n=G_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return R5=e,R5}var D5,cP;function Rle(){if(cP)return D5;cP=1;var n=B3(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,l=n(s,i);if(l<0)return!1;var o=s.length-1;return l==o?s.pop():t.call(s,l,1),--this.size,!0}return D5=r,D5}var F5,hP;function Dle(){if(hP)return F5;hP=1;var n=B3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return F5=e,F5}var K5,dP;function Fle(){if(dP)return K5;dP=1;var n=B3();function e(t){return n(this.__data__,t)>-1}return K5=e,K5}var L5,fP;function Kle(){if(fP)return L5;fP=1;var n=B3();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return L5=e,L5}var U5,pP;function O3(){if(pP)return U5;pP=1;var n=Ple(),e=Rle(),t=Dle(),r=Fle(),i=Kle();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var C=l[o];this.set(C[0],C[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,U5=s,U5}var z5,mP;function Lle(){if(mP)return z5;mP=1;var n=O3();function e(){this.__data__=new n,this.size=0}return z5=e,z5}var N5,gP;function Ule(){if(gP)return N5;gP=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return N5=n,N5}var G5,yP;function zle(){if(yP)return G5;yP=1;function n(e){return this.__data__.get(e)}return G5=n,G5}var j5,vP;function Nle(){if(vP)return j5;vP=1;function n(e){return this.__data__.has(e)}return j5=n,j5}var W5,CP;function Gle(){if(CP)return W5;CP=1;var n=Lp(),e=n["__core-js_shared__"];return W5=e,W5}var Q5,_P;function jle(){if(_P)return Q5;_P=1;var n=Gle(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Q5=t,Q5}var Y5,bP;function IG(){if(bP)return Y5;bP=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Y5=t,Y5}var q5,xP;function Wle(){if(xP)return q5;xP=1;var n=$I(),e=jle(),t=Wf(),r=IG(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,f=l.toString,C=o.hasOwnProperty,M=RegExp("^"+f.call(C).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(D){if(!t(D)||e(D))return!1;var R=n(D)?M:s;return R.test(r(D))}return q5=B,q5}var $5,MP;function Qle(){if(MP)return $5;MP=1;function n(e,t){return e?.[t]}return $5=n,$5}var V5,wP;function s1(){if(wP)return V5;wP=1;var n=Wle(),e=Qle();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return V5=t,V5}var H5,SP;function ZI(){if(SP)return H5;SP=1;var n=s1(),e=Lp(),t=n(e,"Map");return H5=t,H5}var Z5,EP;function I3(){if(EP)return Z5;EP=1;var n=s1(),e=n(Object,"create");return Z5=e,Z5}var X5,BP;function Yle(){if(BP)return X5;BP=1;var n=I3();function e(){this.__data__=n?n(null):{},this.size=0}return X5=e,X5}var J5,OP;function qle(){if(OP)return J5;OP=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return J5=n,J5}var ew,IP;function $le(){if(IP)return ew;IP=1;var n=I3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var l=this.__data__;if(n){var o=l[s];return o===e?void 0:o}return r.call(l,s)?l[s]:void 0}return ew=i,ew}var tw,TP;function Vle(){if(TP)return tw;TP=1;var n=I3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return tw=r,tw}var nw,kP;function Hle(){if(kP)return nw;kP=1;var n=I3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return nw=t,nw}var rw,PP;function Zle(){if(PP)return rw;PP=1;var n=Yle(),e=qle(),t=$le(),r=Vle(),i=Hle();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var C=l[o];this.set(C[0],C[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,rw=s,rw}var iw,RP;function Xle(){if(RP)return iw;RP=1;var n=Zle(),e=O3(),t=ZI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return iw=r,iw}var ow,DP;function Jle(){if(DP)return ow;DP=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return ow=n,ow}var sw,FP;function T3(){if(FP)return sw;FP=1;var n=Jle();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return sw=e,sw}var aw,KP;function eAe(){if(KP)return aw;KP=1;var n=T3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return aw=e,aw}var lw,LP;function tAe(){if(LP)return lw;LP=1;var n=T3();function e(t){return n(this,t).get(t)}return lw=e,lw}var Aw,UP;function nAe(){if(UP)return Aw;UP=1;var n=T3();function e(t){return n(this,t).has(t)}return Aw=e,Aw}var uw,zP;function rAe(){if(zP)return uw;zP=1;var n=T3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return uw=e,uw}var cw,NP;function XI(){if(NP)return cw;NP=1;var n=Xle(),e=eAe(),t=tAe(),r=nAe(),i=rAe();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var C=l[o];this.set(C[0],C[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,cw=s,cw}var hw,GP;function iAe(){if(GP)return hw;GP=1;var n=O3(),e=ZI(),t=XI(),r=200;function i(s,l){var o=this.__data__;if(o instanceof n){var f=o.__data__;if(!e||f.length<r-1)return f.push([s,l]),this.size=++o.size,this;o=this.__data__=new t(f)}return o.set(s,l),this.size=o.size,this}return hw=i,hw}var dw,jP;function k3(){if(jP)return dw;jP=1;var n=O3(),e=Lle(),t=Ule(),r=zle(),i=Nle(),s=iAe();function l(o){var f=this.__data__=new n(o);this.size=f.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=r,l.prototype.has=i,l.prototype.set=s,dw=l,dw}var fw,WP;function oAe(){if(WP)return fw;WP=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return fw=e,fw}var pw,QP;function sAe(){if(QP)return pw;QP=1;function n(e){return this.__data__.has(e)}return pw=n,pw}var mw,YP;function aAe(){if(YP)return mw;YP=1;var n=XI(),e=oAe(),t=sAe();function r(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new n;++s<l;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,mw=r,mw}var gw,qP;function lAe(){if(qP)return gw;qP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return gw=n,gw}var yw,$P;function AAe(){if($P)return yw;$P=1;function n(e,t){return e.has(t)}return yw=n,yw}var vw,VP;function TG(){if(VP)return vw;VP=1;var n=aAe(),e=lAe(),t=AAe(),r=1,i=2;function s(l,o,f,C,M,B){var D=f&r,R=l.length,U=o.length;if(R!=U&&!(D&&U>R))return!1;var G=B.get(l),W=B.get(o);if(G&&W)return G==o&&W==l;var J=-1,$=!0,oe=f&i?new n:void 0;for(B.set(l,o),B.set(o,l);++J<R;){var te=l[J],H=o[J];if(C)var re=D?C(H,te,J,o,l,B):C(te,H,J,l,o,B);if(re!==void 0){if(re)continue;$=!1;break}if(oe){if(!e(o,function(j,ue){if(!t(oe,ue)&&(te===j||M(te,j,f,C,B)))return oe.push(ue)})){$=!1;break}}else if(!(te===H||M(te,H,f,C,B))){$=!1;break}}return B.delete(l),B.delete(o),$}return vw=s,vw}var Cw,HP;function kG(){if(HP)return Cw;HP=1;var n=Lp(),e=n.Uint8Array;return Cw=e,Cw}var _w,ZP;function uAe(){if(ZP)return _w;ZP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return _w=n,_w}var bw,XP;function cAe(){if(XP)return bw;XP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return bw=n,bw}var xw,JP;function hAe(){if(JP)return xw;JP=1;var n=z_(),e=kG(),t=G_(),r=TG(),i=uAe(),s=cAe(),l=1,o=2,f="[object Boolean]",C="[object Date]",M="[object Error]",B="[object Map]",D="[object Number]",R="[object RegExp]",U="[object Set]",G="[object String]",W="[object Symbol]",J="[object ArrayBuffer]",$="[object DataView]",oe=n?n.prototype:void 0,te=oe?oe.valueOf:void 0;function H(re,j,ue,me,ge,we,Ee){switch(ue){case $:if(re.byteLength!=j.byteLength||re.byteOffset!=j.byteOffset)return!1;re=re.buffer,j=j.buffer;case J:return!(re.byteLength!=j.byteLength||!we(new e(re),new e(j)));case f:case C:case D:return t(+re,+j);case M:return re.name==j.name&&re.message==j.message;case R:case G:return re==j+"";case B:var xe=i;case U:var We=me&l;if(xe||(xe=s),re.size!=j.size&&!We)return!1;var be=Ee.get(re);if(be)return be==j;me|=o,Ee.set(re,j);var rt=r(xe(re),xe(j),me,ge,we,Ee);return Ee.delete(re),rt;case W:if(te)return te.call(re)==te.call(j)}return!1}return xw=H,xw}var Mw,eR;function PG(){if(eR)return Mw;eR=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return Mw=n,Mw}var ww,tR;function RG(){if(tR)return ww;tR=1;var n=PG(),e=lf();function t(r,i,s){var l=i(r);return e(r)?l:n(l,s(r))}return ww=t,ww}var Sw,nR;function dAe(){if(nR)return Sw;nR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,l=[];++r<i;){var o=e[r];t(o,r,e)&&(l[s++]=o)}return l}return Sw=n,Sw}var Ew,rR;function DG(){if(rR)return Ew;rR=1;function n(){return[]}return Ew=n,Ew}var Bw,iR;function JI(){if(iR)return Bw;iR=1;var n=dAe(),e=DG(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(l){return l==null?[]:(l=Object(l),n(i(l),function(o){return r.call(l,o)}))}:e;return Bw=s,Bw}var Ow,oR;function FG(){if(oR)return Ow;oR=1;var n=RG(),e=JI(),t=N_();function r(i){return n(i,t,e)}return Ow=r,Ow}var Iw,sR;function fAe(){if(sR)return Iw;sR=1;var n=FG(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o,f,C,M){var B=o&e,D=n(s),R=D.length,U=n(l),G=U.length;if(R!=G&&!B)return!1;for(var W=R;W--;){var J=D[W];if(!(B?J in l:r.call(l,J)))return!1}var $=M.get(s),oe=M.get(l);if($&&oe)return $==l&&oe==s;var te=!0;M.set(s,l),M.set(l,s);for(var H=B;++W<R;){J=D[W];var re=s[J],j=l[J];if(f)var ue=B?f(j,re,J,l,s,M):f(re,j,J,s,l,M);if(!(ue===void 0?re===j||C(re,j,o,f,M):ue)){te=!1;break}H||(H=J=="constructor")}if(te&&!H){var me=s.constructor,ge=l.constructor;me!=ge&&"constructor"in s&&"constructor"in l&&!(typeof me=="function"&&me instanceof me&&typeof ge=="function"&&ge instanceof ge)&&(te=!1)}return M.delete(s),M.delete(l),te}return Iw=i,Iw}var Tw,aR;function pAe(){if(aR)return Tw;aR=1;var n=s1(),e=Lp(),t=n(e,"DataView");return Tw=t,Tw}var kw,lR;function mAe(){if(lR)return kw;lR=1;var n=s1(),e=Lp(),t=n(e,"Promise");return kw=t,kw}var Pw,AR;function gAe(){if(AR)return Pw;AR=1;var n=s1(),e=Lp(),t=n(e,"Set");return Pw=t,Pw}var Rw,uR;function yAe(){if(uR)return Rw;uR=1;var n=s1(),e=Lp(),t=n(e,"WeakMap");return Rw=t,Rw}var Dw,cR;function P3(){if(cR)return Dw;cR=1;var n=pAe(),e=ZI(),t=mAe(),r=gAe(),i=yAe(),s=o1(),l=IG(),o="[object Map]",f="[object Object]",C="[object Promise]",M="[object Set]",B="[object WeakMap]",D="[object DataView]",R=l(n),U=l(e),G=l(t),W=l(r),J=l(i),$=s;return(n&&$(new n(new ArrayBuffer(1)))!=D||e&&$(new e)!=o||t&&$(t.resolve())!=C||r&&$(new r)!=M||i&&$(new i)!=B)&&($=function(oe){var te=s(oe),H=te==f?oe.constructor:void 0,re=H?l(H):"";if(re)switch(re){case R:return D;case U:return o;case G:return C;case W:return M;case J:return B}return te}),Dw=$,Dw}var Fw,hR;function vAe(){if(hR)return Fw;hR=1;var n=k3(),e=TG(),t=hAe(),r=fAe(),i=P3(),s=lf(),l=S3(),o=YI(),f=1,C="[object Arguments]",M="[object Array]",B="[object Object]",D=Object.prototype,R=D.hasOwnProperty;function U(G,W,J,$,oe,te){var H=s(G),re=s(W),j=H?M:i(G),ue=re?M:i(W);j=j==C?B:j,ue=ue==C?B:ue;var me=j==B,ge=ue==B,we=j==ue;if(we&&l(G)){if(!l(W))return!1;H=!0,me=!1}if(we&&!me)return te||(te=new n),H||o(G)?e(G,W,J,$,oe,te):t(G,W,j,J,$,oe,te);if(!(J&f)){var Ee=me&&R.call(G,"__wrapped__"),xe=ge&&R.call(W,"__wrapped__");if(Ee||xe){var We=Ee?G.value():G,be=xe?W.value():W;return te||(te=new n),oe(We,be,J,$,te)}}return we?(te||(te=new n),r(G,W,J,$,oe,te)):!1}return Fw=U,Fw}var Kw,dR;function KG(){if(dR)return Kw;dR=1;var n=vAe(),e=ym();function t(r,i,s,l,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,l,t,o)}return Kw=t,Kw}var Lw,fR;function CAe(){if(fR)return Lw;fR=1;var n=k3(),e=KG(),t=1,r=2;function i(s,l,o,f){var C=o.length,M=C,B=!f;if(s==null)return!M;for(s=Object(s);C--;){var D=o[C];if(B&&D[2]?D[1]!==s[D[0]]:!(D[0]in s))return!1}for(;++C<M;){D=o[C];var R=D[0],U=s[R],G=D[1];if(B&&D[2]){if(U===void 0&&!(R in s))return!1}else{var W=new n;if(f)var J=f(U,G,R,s,l,W);if(!(J===void 0?e(G,U,t|r,f,W):J))return!1}}return!0}return Lw=i,Lw}var Uw,pR;function LG(){if(pR)return Uw;pR=1;var n=Wf();function e(t){return t===t&&!n(t)}return Uw=e,Uw}var zw,mR;function _Ae(){if(mR)return zw;mR=1;var n=LG(),e=N_();function t(r){for(var i=e(r),s=i.length;s--;){var l=i[s],o=r[l];i[s]=[l,o,n(o)]}return i}return zw=t,zw}var Nw,gR;function UG(){if(gR)return Nw;gR=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return Nw=n,Nw}var Gw,yR;function bAe(){if(yR)return Gw;yR=1;var n=CAe(),e=_Ae(),t=UG();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(l){return l===i||n(l,i,s)}}return Gw=r,Gw}var jw,vR;function R3(){if(vR)return jw;vR=1;var n=o1(),e=ym(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return jw=r,jw}var Ww,CR;function e8(){if(CR)return Ww;CR=1;var n=lf(),e=R3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||l!=null&&s in Object(l)}return Ww=i,Ww}var Qw,_R;function xAe(){if(_R)return Qw;_R=1;var n=XI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var l=arguments,o=i?i.apply(this,l):l[0],f=s.cache;if(f.has(o))return f.get(o);var C=r.apply(this,l);return s.cache=f.set(o,C)||f,C};return s.cache=new(t.Cache||n),s}return t.Cache=n,Qw=t,Qw}var Yw,bR;function MAe(){if(bR)return Yw;bR=1;var n=xAe(),e=500;function t(r){var i=n(r,function(l){return s.size===e&&s.clear(),l}),s=i.cache;return i}return Yw=t,Yw}var qw,xR;function wAe(){if(xR)return qw;xR=1;var n=MAe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(l,o,f,C){s.push(f?C.replace(t,"$1"):o||l)}),s});return qw=r,qw}var $w,MR;function SAe(){if(MR)return $w;MR=1;var n=z_(),e=OG(),t=lf(),r=R3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(r(o))return s?s.call(o):"";var f=o+"";return f=="0"&&1/o==-1/0?"-0":f}return $w=l,$w}var Vw,wR;function EAe(){if(wR)return Vw;wR=1;var n=SAe();function e(t){return t==null?"":n(t)}return Vw=e,Vw}var Hw,SR;function zG(){if(SR)return Hw;SR=1;var n=lf(),e=e8(),t=wAe(),r=EAe();function i(s,l){return n(s)?s:e(s,l)?[s]:t(r(s))}return Hw=i,Hw}var Zw,ER;function D3(){if(ER)return Zw;ER=1;var n=R3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return Zw=e,Zw}var Xw,BR;function NG(){if(BR)return Xw;BR=1;var n=zG(),e=D3();function t(r,i){i=n(i,r);for(var s=0,l=i.length;r!=null&&s<l;)r=r[e(i[s++])];return s&&s==l?r:void 0}return Xw=t,Xw}var Jw,OR;function BAe(){if(OR)return Jw;OR=1;var n=NG();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return Jw=e,Jw}var eS,IR;function OAe(){if(IR)return eS;IR=1;function n(e,t){return e!=null&&t in Object(e)}return eS=n,eS}var tS,TR;function IAe(){if(TR)return tS;TR=1;var n=zG(),e=NI(),t=lf(),r=GI(),i=jI(),s=D3();function l(o,f,C){f=n(f,o);for(var M=-1,B=f.length,D=!1;++M<B;){var R=s(f[M]);if(!(D=o!=null&&C(o,R)))break;o=o[R]}return D||++M!=B?D:(B=o==null?0:o.length,!!B&&i(B)&&r(R,B)&&(t(o)||e(o)))}return tS=l,tS}var nS,kR;function TAe(){if(kR)return nS;kR=1;var n=OAe(),e=IAe();function t(r,i){return r!=null&&e(r,i,n)}return nS=t,nS}var rS,PR;function kAe(){if(PR)return rS;PR=1;var n=KG(),e=BAe(),t=TAe(),r=e8(),i=LG(),s=UG(),l=D3(),o=1,f=2;function C(M,B){return r(M)&&i(B)?s(l(M),B):function(D){var R=e(D,M);return R===void 0&&R===B?t(D,M):n(B,R,o|f)}}return rS=C,rS}var iS,RR;function PAe(){if(RR)return iS;RR=1;function n(e){return function(t){return t?.[e]}}return iS=n,iS}var oS,DR;function RAe(){if(DR)return oS;DR=1;var n=NG();function e(t){return function(r){return n(r,t)}}return oS=e,oS}var sS,FR;function DAe(){if(FR)return sS;FR=1;var n=PAe(),e=RAe(),t=e8(),r=D3();function i(s){return t(s)?n(r(s)):e(s)}return sS=i,sS}var aS,KR;function FAe(){if(KR)return aS;KR=1;var n=bAe(),e=kAe(),t=E3(),r=lf(),i=DAe();function s(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?r(l)?e(l[0],l[1]):n(l):i(l)}return aS=s,aS}var lS,LR;function KAe(){if(LR)return lS;LR=1;var n=tv();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var l=i.length,o=r?l:-1,f=Object(i);(r?o--:++o<l)&&s(f[o],o,f)!==!1;);return i}}return lS=e,lS}var AS,UR;function GG(){if(UR)return AS;UR=1;var n=SG(),e=KAe(),t=e(n);return AS=t,AS}var uS,zR;function LAe(){if(zR)return uS;zR=1;var n=GG(),e=tv();function t(r,i){var s=-1,l=e(r)?Array(r.length):[];return n(r,function(o,f,C){l[++s]=i(o,f,C)}),l}return uS=t,uS}var cS,NR;function UAe(){if(NR)return cS;NR=1;var n=OG(),e=FAe(),t=LAe(),r=lf();function i(s,l){var o=r(s)?n:t;return o(s,e(l,3))}return cS=i,cS}var GR;function zAe(){if(GR)return z1;GR=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.flattenNames=void 0;var n=wle(),e=f(n),t=VI(),r=f(t),i=BG(),s=f(i),l=UAe(),o=f(l);function f(M){return M&&M.__esModule?M:{default:M}}var C=z1.flattenNames=function M(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=[];return(0,o.default)(B,function(R){Array.isArray(R)?M(R).map(function(U){return D.push(U)}):(0,s.default)(R)?(0,r.default)(R,function(U,G){U===!0&&D.push(G),D.push(G+"-"+U)}):(0,e.default)(R)&&D.push(R)}),D};return z1.default=C,z1}var N1={},hS,jR;function jG(){if(jR)return hS;jR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return hS=n,hS}var dS,WR;function WG(){if(WR)return dS;WR=1;var n=s1(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return dS=e,dS}var fS,QR;function t8(){if(QR)return fS;QR=1;var n=WG();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return fS=e,fS}var pS,YR;function QG(){if(YR)return pS;YR=1;var n=t8(),e=G_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o){var f=s[l];(!(r.call(s,l)&&e(f,o))||o===void 0&&!(l in s))&&n(s,l,o)}return pS=i,pS}var mS,qR;function j_(){if(qR)return mS;qR=1;var n=QG(),e=t8();function t(r,i,s,l){var o=!s;s||(s={});for(var f=-1,C=i.length;++f<C;){var M=i[f],B=l?l(s[M],r[M],M,s,r):void 0;B===void 0&&(B=r[M]),o?e(s,M,B):n(s,M,B)}return s}return mS=t,mS}var gS,$R;function NAe(){if($R)return gS;$R=1;var n=j_(),e=N_();function t(r,i){return r&&n(i,e(i),r)}return gS=t,gS}var yS,VR;function GAe(){if(VR)return yS;VR=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return yS=n,yS}var vS,HR;function jAe(){if(HR)return vS;HR=1;var n=Wf(),e=qI(),t=GAe(),r=Object.prototype,i=r.hasOwnProperty;function s(l){if(!n(l))return t(l);var o=e(l),f=[];for(var C in l)C=="constructor"&&(o||!i.call(l,C))||f.push(C);return f}return vS=s,vS}var CS,ZR;function W_(){if(ZR)return CS;ZR=1;var n=MG(),e=jAe(),t=tv();function r(i){return t(i)?n(i,!0):e(i)}return CS=r,CS}var _S,XR;function WAe(){if(XR)return _S;XR=1;var n=j_(),e=W_();function t(r,i){return r&&n(i,e(i),r)}return _S=t,_S}var rC={exports:{}};rC.exports;var JR;function YG(){return JR||(JR=1,function(n,e){var t=Lp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function f(C,M){if(M)return C.slice();var B=C.length,D=o?o(B):new C.constructor(B);return C.copy(D),D}n.exports=f}(rC,rC.exports)),rC.exports}var bS,eD;function qG(){if(eD)return bS;eD=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return bS=n,bS}var xS,tD;function QAe(){if(tD)return xS;tD=1;var n=j_(),e=JI();function t(r,i){return n(r,e(r),i)}return xS=t,xS}var MS,nD;function $G(){if(nD)return MS;nD=1;var n=PG(),e=HI(),t=JI(),r=DG(),i=Object.getOwnPropertySymbols,s=i?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:r;return MS=s,MS}var wS,rD;function YAe(){if(rD)return wS;rD=1;var n=j_(),e=$G();function t(r,i){return n(r,e(r),i)}return wS=t,wS}var SS,iD;function qAe(){if(iD)return SS;iD=1;var n=RG(),e=$G(),t=W_();function r(i){return n(i,t,e)}return SS=r,SS}var ES,oD;function $Ae(){if(oD)return ES;oD=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return ES=t,ES}var BS,sD;function n8(){if(sD)return BS;sD=1;var n=kG();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return BS=e,BS}var OS,aD;function VAe(){if(aD)return OS;aD=1;var n=n8();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return OS=e,OS}var IS,lD;function HAe(){if(lD)return IS;lD=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return IS=e,IS}var TS,AD;function ZAe(){if(AD)return TS;AD=1;var n=z_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return TS=r,TS}var kS,uD;function VG(){if(uD)return kS;uD=1;var n=n8();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return kS=e,kS}var PS,cD;function XAe(){if(cD)return PS;cD=1;var n=n8(),e=VAe(),t=HAe(),r=ZAe(),i=VG(),s="[object Boolean]",l="[object Date]",o="[object Map]",f="[object Number]",C="[object RegExp]",M="[object Set]",B="[object String]",D="[object Symbol]",R="[object ArrayBuffer]",U="[object DataView]",G="[object Float32Array]",W="[object Float64Array]",J="[object Int8Array]",$="[object Int16Array]",oe="[object Int32Array]",te="[object Uint8Array]",H="[object Uint8ClampedArray]",re="[object Uint16Array]",j="[object Uint32Array]";function ue(me,ge,we){var Ee=me.constructor;switch(ge){case R:return n(me);case s:case l:return new Ee(+me);case U:return e(me,we);case G:case W:case J:case $:case oe:case te:case H:case re:case j:return i(me,we);case o:return new Ee;case f:case B:return new Ee(me);case C:return t(me);case M:return new Ee;case D:return r(me)}}return PS=ue,PS}var RS,hD;function JAe(){if(hD)return RS;hD=1;var n=Wf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return RS=t,RS}var DS,dD;function HG(){if(dD)return DS;dD=1;var n=JAe(),e=HI(),t=qI();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return DS=r,DS}var FS,fD;function eue(){if(fD)return FS;fD=1;var n=P3(),e=ym(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return FS=r,FS}var KS,pD;function tue(){if(pD)return KS;pD=1;var n=eue(),e=WI(),t=QI(),r=t&&t.isMap,i=r?e(r):n;return KS=i,KS}var LS,mD;function nue(){if(mD)return LS;mD=1;var n=P3(),e=ym(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return LS=r,LS}var US,gD;function rue(){if(gD)return US;gD=1;var n=nue(),e=WI(),t=QI(),r=t&&t.isSet,i=r?e(r):n;return US=i,US}var zS,yD;function iue(){if(yD)return zS;yD=1;var n=k3(),e=jG(),t=QG(),r=NAe(),i=WAe(),s=YG(),l=qG(),o=QAe(),f=YAe(),C=FG(),M=qAe(),B=P3(),D=$Ae(),R=XAe(),U=HG(),G=lf(),W=S3(),J=tue(),$=Wf(),oe=rue(),te=N_(),H=W_(),re=1,j=2,ue=4,me="[object Arguments]",ge="[object Array]",we="[object Boolean]",Ee="[object Date]",xe="[object Error]",We="[object Function]",be="[object GeneratorFunction]",rt="[object Map]",Ct="[object Number]",at="[object Object]",Je="[object RegExp]",ze="[object Set]",Te="[object String]",He="[object Symbol]",pt="[object WeakMap]",kt="[object ArrayBuffer]",ft="[object DataView]",Bt="[object Float32Array]",Tt="[object Float64Array]",Le="[object Int8Array]",Pe="[object Int16Array]",ke="[object Int32Array]",Qe="[object Uint8Array]",_t="[object Uint8ClampedArray]",gt="[object Uint16Array]",wt="[object Uint32Array]",Qt={};Qt[me]=Qt[ge]=Qt[kt]=Qt[ft]=Qt[we]=Qt[Ee]=Qt[Bt]=Qt[Tt]=Qt[Le]=Qt[Pe]=Qt[ke]=Qt[rt]=Qt[Ct]=Qt[at]=Qt[Je]=Qt[ze]=Qt[Te]=Qt[He]=Qt[Qe]=Qt[_t]=Qt[gt]=Qt[wt]=!0,Qt[xe]=Qt[We]=Qt[pt]=!1;function Ft(ln,Vn,jt,Un,wn,Mn){var En,Mr=Vn&re,Hn=Vn&j,Pn=Vn&ue;if(jt&&(En=wn?jt(ln,Un,wn,Mn):jt(ln)),En!==void 0)return En;if(!$(ln))return ln;var Ne=G(ln);if(Ne){if(En=D(ln),!Mr)return l(ln,En)}else{var he=B(ln),ie=he==We||he==be;if(W(ln))return s(ln,Mr);if(he==at||he==me||ie&&!wn){if(En=Hn||ie?{}:U(ln),!Mr)return Hn?f(ln,i(En,ln)):o(ln,r(En,ln))}else{if(!Qt[he])return wn?ln:{};En=R(ln,he,Mr)}}Mn||(Mn=new n);var se=Mn.get(ln);if(se)return se;Mn.set(ln,En),oe(ln)?ln.forEach(function(Ge){En.add(Ft(Ge,Vn,jt,Ge,ln,Mn))}):J(ln)&&ln.forEach(function(Ge,ct){En.set(ct,Ft(Ge,Vn,jt,ct,ln,Mn))});var fe=Pn?Hn?M:C:Hn?H:te,Oe=Ne?void 0:fe(ln);return e(Oe||ln,function(Ge,ct){Oe&&(ct=Ge,Ge=ln[ct]),t(En,ct,Ft(Ge,Vn,jt,ct,ln,Mn))}),En}return zS=Ft,zS}var NS,vD;function oue(){if(vD)return NS;vD=1;var n=iue(),e=1,t=4;function r(i){return n(i,e|t)}return NS=r,NS}var CD;function sue(){if(CD)return N1;CD=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.mergeClasses=void 0;var n=VI(),e=s(n),t=oue(),r=s(t),i=Object.assign||function(o){for(var f=1;f<arguments.length;f++){var C=arguments[f];for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&(o[M]=C[M])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var l=N1.mergeClasses=function(f){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=f.default&&(0,r.default)(f.default)||{};return C.map(function(B){var D=f[B];return D&&(0,e.default)(D,function(R,U){M[U]||(M[U]={}),M[U]=i({},M[U],D[U])}),B}),M};return N1.default=l,N1}var G1={},_D;function aue(){if(_D)return G1;_D=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.autoprefix=void 0;var n=VI(),e=r(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(l[C]=f[C])}return l};function r(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var f=o&&o.split(" ");return{position:"absolute",top:f&&f[0],right:f&&f[1],bottom:f&&f[2],left:f&&f[3]}},extend:function(o,f){var C=f[o];return C||{extend:o}}},s=G1.autoprefix=function(o){var f={};return(0,e.default)(o,function(C,M){var B={};(0,e.default)(C,function(D,R){var U=i[R];U?B=t({},B,U(D)):B[R]=D}),f[M]=B}),f};return G1.default=s,G1}var j1={},bD;function lue(){if(bD)return j1;bD=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.hover=void 0;var n=Object.assign||function(f){for(var C=1;C<arguments.length;C++){var M=arguments[C];for(var B in M)Object.prototype.hasOwnProperty.call(M,B)&&(f[B]=M[B])}return f},e=Ya(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function s(f,C){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:f}function l(f,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);f.prototype=Object.create(C&&C.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(f,C):f.__proto__=C)}var o=j1.hover=function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(D,B);function D(){var R,U,G,W;i(this,D);for(var J=arguments.length,$=Array(J),oe=0;oe<J;oe++)$[oe]=arguments[oe];return W=(U=(G=s(this,(R=D.__proto__||Object.getPrototypeOf(D)).call.apply(R,[this].concat($))),G),G.state={hover:!1},G.handleMouseOver=function(){return G.setState({hover:!0})},G.handleMouseOut=function(){return G.setState({hover:!1})},G.render=function(){return t.default.createElement(M,{onMouseOver:G.handleMouseOver,onMouseOut:G.handleMouseOut},t.default.createElement(C,n({},G.props,G.state)))},U),s(G,W)}return D}(t.default.Component)};return j1.default=o,j1}var W1={},xD;function Aue(){if(xD)return W1;xD=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.active=void 0;var n=Object.assign||function(f){for(var C=1;C<arguments.length;C++){var M=arguments[C];for(var B in M)Object.prototype.hasOwnProperty.call(M,B)&&(f[B]=M[B])}return f},e=Ya(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function s(f,C){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:f}function l(f,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);f.prototype=Object.create(C&&C.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(f,C):f.__proto__=C)}var o=W1.active=function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(D,B);function D(){var R,U,G,W;i(this,D);for(var J=arguments.length,$=Array(J),oe=0;oe<J;oe++)$[oe]=arguments[oe];return W=(U=(G=s(this,(R=D.__proto__||Object.getPrototypeOf(D)).call.apply(R,[this].concat($))),G),G.state={active:!1},G.handleMouseDown=function(){return G.setState({active:!0})},G.handleMouseUp=function(){return G.setState({active:!1})},G.render=function(){return t.default.createElement(M,{onMouseDown:G.handleMouseDown,onMouseUp:G.handleMouseUp},t.default.createElement(C,n({},G.props,G.state)))},U),s(G,W)}return D}(t.default.Component)};return W1.default=o,W1}var Yb={},MD;function uue(){if(MD)return Yb;MD=1,Object.defineProperty(Yb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=f};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return Yb.default=n,Yb}var wD;function Up(){if(wD)return vd;wD=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.ReactCSS=vd.loop=vd.handleActive=vd.handleHover=vd.hover=void 0;var n=zAe(),e=D(n),t=sue(),r=D(t),i=aue(),s=D(i),l=lue(),o=D(l),f=Aue(),C=D(f),M=uue(),B=D(M);function D(U){return U&&U.__esModule?U:{default:U}}vd.hover=o.default,vd.handleHover=o.default,vd.handleActive=C.default,vd.loop=B.default;var R=vd.ReactCSS=function(G){for(var W=arguments.length,J=Array(W>1?W-1:0),$=1;$<W;$++)J[$-1]=arguments[$];var oe=(0,e.default)(J),te=(0,r.default)(G,oe);return(0,s.default)(te)};return vd.default=R,vd}var GS,SD;function ZG(){if(SD)return GS;SD=1;var n=t8(),e=G_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return GS=t,GS}var jS,ED;function cue(){if(ED)return jS;ED=1;var n=tv(),e=ym();function t(r){return e(r)&&n(r)}return jS=t,jS}var WS,BD;function XG(){if(BD)return WS;BD=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return WS=n,WS}var QS,OD;function hue(){if(OD)return QS;OD=1;var n=j_(),e=W_();function t(r){return n(r,e(r))}return QS=t,QS}var YS,ID;function due(){if(ID)return YS;ID=1;var n=ZG(),e=YG(),t=VG(),r=qG(),i=HG(),s=NI(),l=lf(),o=cue(),f=S3(),C=$I(),M=Wf(),B=BG(),D=YI(),R=XG(),U=hue();function G(W,J,$,oe,te,H,re){var j=R(W,$),ue=R(J,$),me=re.get(ue);if(me){n(W,$,me);return}var ge=H?H(j,ue,$+"",W,J,re):void 0,we=ge===void 0;if(we){var Ee=l(ue),xe=!Ee&&f(ue),We=!Ee&&!xe&&D(ue);ge=ue,Ee||xe||We?l(j)?ge=j:o(j)?ge=r(j):xe?(we=!1,ge=e(ue,!0)):We?(we=!1,ge=t(ue,!0)):ge=[]:B(ue)||s(ue)?(ge=j,s(j)?ge=U(j):(!M(j)||C(j))&&(ge=i(ue))):we=!1}we&&(re.set(ue,ge),te(ge,ue,oe,H,re),re.delete(ue)),n(W,$,ge)}return YS=G,YS}var qS,TD;function fue(){if(TD)return qS;TD=1;var n=k3(),e=ZG(),t=xG(),r=due(),i=Wf(),s=W_(),l=XG();function o(f,C,M,B,D){f!==C&&t(C,function(R,U){if(D||(D=new n),i(R))r(f,C,U,M,o,B,D);else{var G=B?B(l(f,U),R,U+"",f,C,D):void 0;G===void 0&&(G=R),e(f,U,G)}},s)}return qS=o,qS}var $S,kD;function pue(){if(kD)return $S;kD=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return $S=n,$S}var VS,PD;function mue(){if(PD)return VS;PD=1;var n=pue(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var l=arguments,o=-1,f=e(l.length-i,0),C=Array(f);++o<f;)C[o]=l[i+o];o=-1;for(var M=Array(i+1);++o<i;)M[o]=l[o];return M[i]=s(C),n(r,this,M)}}return VS=t,VS}var HS,RD;function gue(){if(RD)return HS;RD=1;function n(e){return function(){return e}}return HS=n,HS}var ZS,DD;function yue(){if(DD)return ZS;DD=1;var n=gue(),e=WG(),t=E3(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return ZS=r,ZS}var XS,FD;function vue(){if(FD)return XS;FD=1;var n=800,e=16,t=Date.now;function r(i){var s=0,l=0;return function(){var o=t(),f=e-(o-l);if(l=o,f>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return XS=r,XS}var JS,KD;function Cue(){if(KD)return JS;KD=1;var n=yue(),e=vue(),t=e(n);return JS=t,JS}var eE,LD;function _ue(){if(LD)return eE;LD=1;var n=E3(),e=mue(),t=Cue();function r(i,s){return t(e(i,s,n),i+"")}return eE=r,eE}var tE,UD;function bue(){if(UD)return tE;UD=1;var n=G_(),e=tv(),t=GI(),r=Wf();function i(s,l,o){if(!r(o))return!1;var f=typeof l;return(f=="number"?e(o)&&t(l,o.length):f=="string"&&l in o)?n(o[l],s):!1}return tE=i,tE}var nE,zD;function xue(){if(zD)return nE;zD=1;var n=_ue(),e=bue();function t(r){return n(function(i,s){var l=-1,o=s.length,f=o>1?s[o-1]:void 0,C=o>2?s[2]:void 0;for(f=r.length>3&&typeof f=="function"?(o--,f):void 0,C&&e(s[0],s[1],C)&&(f=o<3?void 0:f,o=1),i=Object(i);++l<o;){var M=s[l];M&&r(i,M,l,f)}return i})}return nE=t,nE}var rE,ND;function JG(){if(ND)return rE;ND=1;var n=fue(),e=xue(),t=e(function(r,i,s){n(r,i,s)});return rE=t,rE}var iE={},Q1={},qb={},GD;function Mue(){return GD||(GD=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.calculateChange=function(e,t,r,i,s){var l=s.clientWidth,o=s.clientHeight,f=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,C=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,M=f-(s.getBoundingClientRect().left+window.pageXOffset),B=C-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var D=void 0;if(B<0?D=0:B>o?D=1:D=Math.round(B*100/o)/100,t.a!==D)return{h:t.h,s:t.s,l:t.l,a:D,source:"rgb"}}else{var R=void 0;if(M<0?R=0:M>l?R=1:R=Math.round(M*100/l)/100,i!==R)return{h:t.h,s:t.s,l:t.l,a:R,source:"rgb"}}return null}),qb}var Y1={},Uv={},jD;function wue(){if(jD)return Uv;jD=1,Object.defineProperty(Uv,"__esModule",{value:!0});var n={},e=Uv.render=function(r,i,s,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=s*2,o.height=s*2;var f=o.getContext("2d");return f?(f.fillStyle=r,f.fillRect(0,0,o.width,o.height),f.fillStyle=i,f.fillRect(0,0,s,s),f.translate(s,s),f.fillRect(0,0,s,s),o.toDataURL()):null};return Uv.get=function(r,i,s,l){var o=r+"-"+i+"-"+s+(l?"-server":"");if(n[o])return n[o];var f=e(r,i,s,l);return n[o]=f,f},Uv}var WD;function r8(){if(WD)return Y1;WD=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.Checkboard=void 0;var n=Object.assign||function(M){for(var B=1;B<arguments.length;B++){var D=arguments[B];for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&(M[R]=D[R])}return M},e=Ya(),t=f(e),r=Up(),i=f(r),s=wue(),l=o(s);function o(M){if(M&&M.__esModule)return M;var B={};if(M!=null)for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(B[D]=M[D]);return B.default=M,B}function f(M){return M&&M.__esModule?M:{default:M}}var C=Y1.Checkboard=function(B){var D=B.white,R=B.grey,U=B.size,G=B.renderers,W=B.borderRadius,J=B.boxShadow,$=B.children,oe=(0,i.default)({default:{grid:{borderRadius:W,boxShadow:J,absolute:"0px 0px 0px 0px",background:"url("+l.get(D,R,U,G.canvas)+") center left"}}});return(0,e.isValidElement)($)?t.default.cloneElement($,n({},$.props,{style:n({},$.props.style,oe.grid)})):t.default.createElement("div",{style:oe.grid})};return C.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},Y1.default=C,Y1}var QD;function Sue(){if(QD)return Q1;QD=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.Alpha=void 0;var n=Object.assign||function(W){for(var J=1;J<arguments.length;J++){var $=arguments[J];for(var oe in $)Object.prototype.hasOwnProperty.call($,oe)&&(W[oe]=$[oe])}return W},e=function(){function W(J,$){for(var oe=0;oe<$.length;oe++){var te=$[oe];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(J,te.key,te)}}return function(J,$,oe){return $&&W(J.prototype,$),oe&&W(J,oe),J}}(),t=Ya(),r=B(t),i=Up(),s=B(i),l=Mue(),o=M(l),f=r8(),C=B(f);function M(W){if(W&&W.__esModule)return W;var J={};if(W!=null)for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(J[$]=W[$]);return J.default=W,J}function B(W){return W&&W.__esModule?W:{default:W}}function D(W,J){if(!(W instanceof J))throw new TypeError("Cannot call a class as a function")}function R(W,J){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:W}function U(W,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);W.prototype=Object.create(J&&J.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(W,J):W.__proto__=J)}var G=Q1.Alpha=function(W){U(J,W);function J(){var $,oe,te,H;D(this,J);for(var re=arguments.length,j=Array(re),ue=0;ue<re;ue++)j[ue]=arguments[ue];return H=(oe=(te=R(this,($=J.__proto__||Object.getPrototypeOf(J)).call.apply($,[this].concat(j))),te),te.handleChange=function(me){var ge=o.calculateChange(me,te.props.hsl,te.props.direction,te.props.a,te.container);ge&&typeof te.props.onChange=="function"&&te.props.onChange(ge,me)},te.handleMouseDown=function(me){te.handleChange(me),window.addEventListener("mousemove",te.handleChange),window.addEventListener("mouseup",te.handleMouseUp)},te.handleMouseUp=function(){te.unbindEventListeners()},te.unbindEventListeners=function(){window.removeEventListener("mousemove",te.handleChange),window.removeEventListener("mouseup",te.handleMouseUp)},oe),R(te,H)}return e(J,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var oe=this,te=this.props.rgb,H=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:te.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)"},pointer:{left:0,top:te.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:H.alpha},r.default.createElement("div",{style:H.checkboard},r.default.createElement(C.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:H.gradient}),r.default.createElement("div",{style:H.container,ref:function(j){return oe.container=j},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:H.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:H.slider}))))}}]),J}(t.PureComponent||t.Component);return Q1.default=G,Q1}var q1={},YD;function Eue(){if(YD)return q1;YD=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.EditableInput=void 0;var n=function(){function $(oe,te){for(var H=0;H<te.length;H++){var re=te[H];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}return function(oe,te,H){return te&&$(oe.prototype,te),H&&$(oe,H),oe}}(),e=Ya(),t=s(e),r=Up(),i=s(r);function s($){return $&&$.__esModule?$:{default:$}}function l($,oe,te){return oe in $?Object.defineProperty($,oe,{value:te,enumerable:!0,configurable:!0,writable:!0}):$[oe]=te,$}function o($,oe){if(!($ instanceof oe))throw new TypeError("Cannot call a class as a function")}function f($,oe){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:$}function C($,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);$.prototype=Object.create(oe&&oe.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf($,oe):$.__proto__=oe)}var M=1,B=38,D=40,R=[B,D],U=function(oe){return R.indexOf(oe)>-1},G=function(oe){return Number(String(oe).replace(/%/g,""))},W=1,J=q1.EditableInput=function($){C(oe,$);function oe(te){o(this,oe);var H=f(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return H.handleBlur=function(){H.state.blurValue&&H.setState({value:H.state.blurValue,blurValue:null})},H.handleChange=function(re){H.setUpdatedValue(re.target.value,re)},H.handleKeyDown=function(re){var j=G(re.target.value);if(!isNaN(j)&&U(re.keyCode)){var ue=H.getArrowOffset(),me=re.keyCode===B?j+ue:j-ue;H.setUpdatedValue(me,re)}},H.handleDrag=function(re){if(H.props.dragLabel){var j=Math.round(H.props.value+re.movementX);j>=0&&j<=H.props.dragMax&&H.props.onChange&&H.props.onChange(H.getValueObjectWithLabel(j),re)}},H.handleMouseDown=function(re){H.props.dragLabel&&(re.preventDefault(),H.handleDrag(re),window.addEventListener("mousemove",H.handleDrag),window.addEventListener("mouseup",H.handleMouseUp))},H.handleMouseUp=function(){H.unbindEventListeners()},H.unbindEventListeners=function(){window.removeEventListener("mousemove",H.handleDrag),window.removeEventListener("mouseup",H.handleMouseUp)},H.state={value:String(te.value).toUpperCase(),blurValue:String(te.value).toUpperCase()},H.inputId="rc-editable-input-"+W++,H}return n(oe,[{key:"componentDidUpdate",value:function(H,re){this.props.value!==this.state.value&&(H.value!==this.props.value||re.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(H){return l({},this.props.label,H)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||M}},{key:"setUpdatedValue",value:function(H,re){var j=this.props.label?this.getValueObjectWithLabel(H):H;this.props.onChange&&this.props.onChange(j,re),this.setState({value:H})}},{key:"render",value:function(){var H=this,re=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:re.wrap},t.default.createElement("input",{id:this.inputId,style:re.input,ref:function(ue){return H.input=ue},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:re.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),oe}(e.PureComponent||e.Component);return q1.default=J,q1}var $1={},$b={},qD;function Bue(){return qD||(qD=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.calculateChange=function(e,t,r,i){var s=i.clientWidth,l=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(i.getBoundingClientRect().left+window.pageXOffset),M=f-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(M<0)B=359;else if(M>l)B=0;else{var D=-(M*100/l)+100;B=360*D/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var R=void 0;if(C<0)R=0;else if(C>s)R=359;else{var U=C*100/s;R=360*U/100}if(r.h!==R)return{h:R,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),$b}var $D;function Oue(){if($D)return $1;$D=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.Hue=void 0;var n=function(){function R(U,G){for(var W=0;W<G.length;W++){var J=G[W];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(U,J.key,J)}}return function(U,G,W){return G&&R(U.prototype,G),W&&R(U,W),U}}(),e=Ya(),t=f(e),r=Up(),i=f(r),s=Bue(),l=o(s);function o(R){if(R&&R.__esModule)return R;var U={};if(R!=null)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}function f(R){return R&&R.__esModule?R:{default:R}}function C(R,U){if(!(R instanceof U))throw new TypeError("Cannot call a class as a function")}function M(R,U){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:R}function B(R,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);R.prototype=Object.create(U&&U.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(R,U):R.__proto__=U)}var D=$1.Hue=function(R){B(U,R);function U(){var G,W,J,$;C(this,U);for(var oe=arguments.length,te=Array(oe),H=0;H<oe;H++)te[H]=arguments[H];return $=(W=(J=M(this,(G=U.__proto__||Object.getPrototypeOf(U)).call.apply(G,[this].concat(te))),J),J.handleChange=function(re){var j=l.calculateChange(re,J.props.direction,J.props.hsl,J.container);j&&typeof J.props.onChange=="function"&&J.props.onChange(j,re)},J.handleMouseDown=function(re){J.handleChange(re),window.addEventListener("mousemove",J.handleChange),window.addEventListener("mouseup",J.handleMouseUp)},J.handleMouseUp=function(){J.unbindEventListeners()},W),M(J,$)}return n(U,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var W=this,J=this.props.direction,$=J===void 0?"horizontal":J,oe=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:$==="vertical"});return t.default.createElement("div",{style:oe.hue},t.default.createElement("div",{className:"hue-"+$,style:oe.container,ref:function(H){return W.container=H},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:oe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:oe.slider}))))}}]),U}(e.PureComponent||e.Component);return $1.default=D,$1}var V1={},VD;function Iue(){if(VD)return V1;VD=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.Raised=void 0;var n=Ya(),e=f(n),t=gm(),r=f(t),i=Up(),s=f(i),l=JG(),o=f(l);function f(M){return M&&M.__esModule?M:{default:M}}var C=V1.Raised=function(B){var D=B.zDepth,R=B.radius,U=B.background,G=B.children,W=B.styles,J=W===void 0?{}:W,$=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+D+"px "+D*4+"px rgba(0,0,0,.24)",borderRadius:R,background:U}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},J),{"zDepth-1":D===1});return e.default.createElement("div",{style:$.wrap},e.default.createElement("div",{style:$.bg}),e.default.createElement("div",{style:$.content},G))};return C.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},C.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},V1.default=C,V1}var H1={},oE,HD;function Tue(){if(HD)return oE;HD=1;var n=Lp(),e=function(){return n.Date.now()};return oE=e,oE}var sE,ZD;function kue(){if(ZD)return sE;ZD=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return sE=e,sE}var aE,XD;function Pue(){if(XD)return aE;XD=1;var n=kue(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return aE=t,aE}var lE,JD;function Rue(){if(JD)return lE;JD=1;var n=Pue(),e=Wf(),t=R3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function f(C){if(typeof C=="number")return C;if(t(C))return r;if(e(C)){var M=typeof C.valueOf=="function"?C.valueOf():C;C=e(M)?M+"":M}if(typeof C!="string")return C===0?C:+C;C=n(C);var B=s.test(C);return B||l.test(C)?o(C.slice(2),B?2:8):i.test(C)?r:+C}return lE=f,lE}var AE,eF;function ej(){if(eF)return AE;eF=1;var n=Wf(),e=Tue(),t=Rue(),r="Expected a function",i=Math.max,s=Math.min;function l(o,f,C){var M,B,D,R,U,G,W=0,J=!1,$=!1,oe=!0;if(typeof o!="function")throw new TypeError(r);f=t(f)||0,n(C)&&(J=!!C.leading,$="maxWait"in C,D=$?i(t(C.maxWait)||0,f):D,oe="trailing"in C?!!C.trailing:oe);function te(xe){var We=M,be=B;return M=B=void 0,W=xe,R=o.apply(be,We),R}function H(xe){return W=xe,U=setTimeout(ue,f),J?te(xe):R}function re(xe){var We=xe-G,be=xe-W,rt=f-We;return $?s(rt,D-be):rt}function j(xe){var We=xe-G,be=xe-W;return G===void 0||We>=f||We<0||$&&be>=D}function ue(){var xe=e();if(j(xe))return me(xe);U=setTimeout(ue,re(xe))}function me(xe){return U=void 0,oe&&M?te(xe):(M=B=void 0,R)}function ge(){U!==void 0&&clearTimeout(U),W=0,M=G=B=U=void 0}function we(){return U===void 0?R:me(e())}function Ee(){var xe=e(),We=j(xe);if(M=arguments,B=this,G=xe,We){if(U===void 0)return H(G);if($)return clearTimeout(U),U=setTimeout(ue,f),te(G)}return U===void 0&&(U=setTimeout(ue,f)),R}return Ee.cancel=ge,Ee.flush=we,Ee}return AE=l,AE}var uE,tF;function Due(){if(tF)return uE;tF=1;var n=ej(),e=Wf(),t="Expected a function";function r(i,s,l){var o=!0,f=!0;if(typeof i!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,f="trailing"in l?!!l.trailing:f),n(i,s,{leading:o,maxWait:s,trailing:f})}return uE=r,uE}var Vb={},nF;function Fue(){return nF||(nF=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,l=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(r.getBoundingClientRect().left+window.pageXOffset),M=f-(r.getBoundingClientRect().top+window.pageYOffset);C<0?C=0:C>s&&(C=s),M<0?M=0:M>l&&(M=l);var B=C/s,D=1-M/l;return{h:t.h,s:B,v:D,a:t.a,source:"hsv"}}),Vb}var rF;function Kue(){if(rF)return H1;rF=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.Saturation=void 0;var n=function(){function G(W,J){for(var $=0;$<J.length;$++){var oe=J[$];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(W,oe.key,oe)}}return function(W,J,$){return J&&G(W.prototype,J),$&&G(W,$),W}}(),e=Ya(),t=M(e),r=Up(),i=M(r),s=Due(),l=M(s),o=Fue(),f=C(o);function C(G){if(G&&G.__esModule)return G;var W={};if(G!=null)for(var J in G)Object.prototype.hasOwnProperty.call(G,J)&&(W[J]=G[J]);return W.default=G,W}function M(G){return G&&G.__esModule?G:{default:G}}function B(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}function D(G,W){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:G}function R(G,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);G.prototype=Object.create(W&&W.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(G,W):G.__proto__=W)}var U=H1.Saturation=function(G){R(W,G);function W(J){B(this,W);var $=D(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,J));return $.handleChange=function(oe){typeof $.props.onChange=="function"&&$.throttle($.props.onChange,f.calculateChange(oe,$.props.hsl,$.container),oe)},$.handleMouseDown=function(oe){$.handleChange(oe);var te=$.getContainerRenderWindow();te.addEventListener("mousemove",$.handleChange),te.addEventListener("mouseup",$.handleMouseUp)},$.handleMouseUp=function(){$.unbindEventListeners()},$.throttle=(0,l.default)(function(oe,te,H){oe(te,H)},50),$}return n(W,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var $=this.container,oe=window;!oe.document.contains($)&&oe.parent!==oe;)oe=oe.parent;return oe}},{key:"unbindEventListeners",value:function(){var $=this.getContainerRenderWindow();$.removeEventListener("mousemove",this.handleChange),$.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var $=this,oe=this.props.style||{},te=oe.color,H=oe.white,re=oe.black,j=oe.pointer,ue=oe.circle,me=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:te,white:H,black:re,pointer:j,circle:ue}},{custom:!!this.props.style});return t.default.createElement("div",{style:me.color,ref:function(we){return $.container=we},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:me.white,className:"saturation-white"},t.default.createElement("div",{style:me.black,className:"saturation-black"}),t.default.createElement("div",{style:me.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:me.circle}))))}}]),W}(e.PureComponent||e.Component);return H1.default=U,H1}var Z1={},Vh={},cE,iF;function Lue(){if(iF)return cE;iF=1;var n=jG(),e=GG(),t=EG(),r=lf();function i(s,l){var o=r(s)?n:e;return o(s,t(l))}return cE=i,cE}var hE,oF;function Uue(){return oF||(oF=1,hE=Lue()),hE}var h2={exports:{}},zue=h2.exports,sF;function Nue(){return sF||(sF=1,function(n,e){(function(t,r){n.exports=r()})(zue,function(){function t(Le){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Le)}var r=/^\s+/,i=/\s+$/;function s(Le,Pe){if(Le=Le||"",Pe=Pe||{},Le instanceof s)return Le;if(!(this instanceof s))return new s(Le,Pe);var ke=l(Le);this._originalInput=Le,this._r=ke.r,this._g=ke.g,this._b=ke.b,this._a=ke.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||ke.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=ke.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),ke,Qe,_t,gt,wt,Qt;return ke=Pe.r/255,Qe=Pe.g/255,_t=Pe.b/255,ke<=.03928?gt=ke/12.92:gt=Math.pow((ke+.055)/1.055,2.4),Qe<=.03928?wt=Qe/12.92:wt=Math.pow((Qe+.055)/1.055,2.4),_t<=.03928?Qt=_t/12.92:Qt=Math.pow((_t+.055)/1.055,2.4),.2126*gt+.7152*wt+.0722*Qt},setAlpha:function(Pe){return this._a=We(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=M(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=M(this._r,this._g,this._b),ke=Math.round(Pe.h*360),Qe=Math.round(Pe.s*100),_t=Math.round(Pe.v*100);return this._a==1?"hsv("+ke+", "+Qe+"%, "+_t+"%)":"hsva("+ke+", "+Qe+"%, "+_t+"%, "+this._roundA+")"},toHsl:function(){var Pe=f(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=f(this._r,this._g,this._b),ke=Math.round(Pe.h*360),Qe=Math.round(Pe.s*100),_t=Math.round(Pe.l*100);return this._a==1?"hsl("+ke+", "+Qe+"%, "+_t+"%)":"hsla("+ke+", "+Qe+"%, "+_t+"%, "+this._roundA+")"},toHex:function(Pe){return D(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return R(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(be(this._r,255)*100)+"%",g:Math.round(be(this._g,255)*100)+"%",b:Math.round(be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%)":"rgba("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ee[D(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var ke="#"+U(this._r,this._g,this._b,this._a),Qe=ke,_t=this._gradientType?"GradientType = 1, ":"";if(Pe){var gt=s(Pe);Qe="#"+U(gt._r,gt._g,gt._b,gt._a)}return"progid:DXImageTransform.Microsoft.gradient("+_t+"startColorstr="+ke+",endColorstr="+Qe+")"},toString:function(Pe){var ke=!!Pe;Pe=Pe||this._format;var Qe=!1,_t=this._a<1&&this._a>=0,gt=!ke&&_t&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return gt?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(Qe=this.toRgbString()),Pe==="prgb"&&(Qe=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(Qe=this.toHexString()),Pe==="hex3"&&(Qe=this.toHexString(!0)),Pe==="hex4"&&(Qe=this.toHex8String(!0)),Pe==="hex8"&&(Qe=this.toHex8String()),Pe==="name"&&(Qe=this.toName()),Pe==="hsl"&&(Qe=this.toHslString()),Pe==="hsv"&&(Qe=this.toHsvString()),Qe||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Pe,ke){var Qe=Pe.apply(null,[this].concat([].slice.call(ke)));return this._r=Qe._r,this._g=Qe._g,this._b=Qe._b,this.setAlpha(Qe._a),this},lighten:function(){return this._applyModification($,arguments)},brighten:function(){return this._applyModification(oe,arguments)},darken:function(){return this._applyModification(te,arguments)},desaturate:function(){return this._applyModification(G,arguments)},saturate:function(){return this._applyModification(W,arguments)},greyscale:function(){return this._applyModification(J,arguments)},spin:function(){return this._applyModification(H,arguments)},_applyCombination:function(Pe,ke){return Pe.apply(null,[this].concat([].slice.call(ke)))},analogous:function(){return this._applyCombination(me,arguments)},complement:function(){return this._applyCombination(re,arguments)},monochromatic:function(){return this._applyCombination(ge,arguments)},splitcomplement:function(){return this._applyCombination(ue,arguments)},triad:function(){return this._applyCombination(j,[3])},tetrad:function(){return this._applyCombination(j,[4])}},s.fromRatio=function(Le,Pe){if(t(Le)=="object"){var ke={};for(var Qe in Le)Le.hasOwnProperty(Qe)&&(Qe==="a"?ke[Qe]=Le[Qe]:ke[Qe]=Te(Le[Qe]));Le=ke}return s(Le,Pe)};function l(Le){var Pe={r:0,g:0,b:0},ke=1,Qe=null,_t=null,gt=null,wt=!1,Qt=!1;return typeof Le=="string"&&(Le=Bt(Le)),t(Le)=="object"&&(ft(Le.r)&&ft(Le.g)&&ft(Le.b)?(Pe=o(Le.r,Le.g,Le.b),wt=!0,Qt=String(Le.r).substr(-1)==="%"?"prgb":"rgb"):ft(Le.h)&&ft(Le.s)&&ft(Le.v)?(Qe=Te(Le.s),_t=Te(Le.v),Pe=B(Le.h,Qe,_t),wt=!0,Qt="hsv"):ft(Le.h)&&ft(Le.s)&&ft(Le.l)&&(Qe=Te(Le.s),gt=Te(Le.l),Pe=C(Le.h,Qe,gt),wt=!0,Qt="hsl"),Le.hasOwnProperty("a")&&(ke=Le.a)),ke=We(ke),{ok:wt,format:Le.format||Qt,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:ke}}function o(Le,Pe,ke){return{r:be(Le,255)*255,g:be(Pe,255)*255,b:be(ke,255)*255}}function f(Le,Pe,ke){Le=be(Le,255),Pe=be(Pe,255),ke=be(ke,255);var Qe=Math.max(Le,Pe,ke),_t=Math.min(Le,Pe,ke),gt,wt,Qt=(Qe+_t)/2;if(Qe==_t)gt=wt=0;else{var Ft=Qe-_t;switch(wt=Qt>.5?Ft/(2-Qe-_t):Ft/(Qe+_t),Qe){case Le:gt=(Pe-ke)/Ft+(Pe<ke?6:0);break;case Pe:gt=(ke-Le)/Ft+2;break;case ke:gt=(Le-Pe)/Ft+4;break}gt/=6}return{h:gt,s:wt,l:Qt}}function C(Le,Pe,ke){var Qe,_t,gt;Le=be(Le,360),Pe=be(Pe,100),ke=be(ke,100);function wt(ln,Vn,jt){return jt<0&&(jt+=1),jt>1&&(jt-=1),jt<1/6?ln+(Vn-ln)*6*jt:jt<1/2?Vn:jt<2/3?ln+(Vn-ln)*(2/3-jt)*6:ln}if(Pe===0)Qe=_t=gt=ke;else{var Qt=ke<.5?ke*(1+Pe):ke+Pe-ke*Pe,Ft=2*ke-Qt;Qe=wt(Ft,Qt,Le+1/3),_t=wt(Ft,Qt,Le),gt=wt(Ft,Qt,Le-1/3)}return{r:Qe*255,g:_t*255,b:gt*255}}function M(Le,Pe,ke){Le=be(Le,255),Pe=be(Pe,255),ke=be(ke,255);var Qe=Math.max(Le,Pe,ke),_t=Math.min(Le,Pe,ke),gt,wt,Qt=Qe,Ft=Qe-_t;if(wt=Qe===0?0:Ft/Qe,Qe==_t)gt=0;else{switch(Qe){case Le:gt=(Pe-ke)/Ft+(Pe<ke?6:0);break;case Pe:gt=(ke-Le)/Ft+2;break;case ke:gt=(Le-Pe)/Ft+4;break}gt/=6}return{h:gt,s:wt,v:Qt}}function B(Le,Pe,ke){Le=be(Le,360)*6,Pe=be(Pe,100),ke=be(ke,100);var Qe=Math.floor(Le),_t=Le-Qe,gt=ke*(1-Pe),wt=ke*(1-_t*Pe),Qt=ke*(1-(1-_t)*Pe),Ft=Qe%6,ln=[ke,wt,gt,gt,Qt,ke][Ft],Vn=[Qt,ke,ke,wt,gt,gt][Ft],jt=[gt,gt,Qt,ke,ke,wt][Ft];return{r:ln*255,g:Vn*255,b:jt*255}}function D(Le,Pe,ke,Qe){var _t=[ze(Math.round(Le).toString(16)),ze(Math.round(Pe).toString(16)),ze(Math.round(ke).toString(16))];return Qe&&_t[0].charAt(0)==_t[0].charAt(1)&&_t[1].charAt(0)==_t[1].charAt(1)&&_t[2].charAt(0)==_t[2].charAt(1)?_t[0].charAt(0)+_t[1].charAt(0)+_t[2].charAt(0):_t.join("")}function R(Le,Pe,ke,Qe,_t){var gt=[ze(Math.round(Le).toString(16)),ze(Math.round(Pe).toString(16)),ze(Math.round(ke).toString(16)),ze(He(Qe))];return _t&&gt[0].charAt(0)==gt[0].charAt(1)&&gt[1].charAt(0)==gt[1].charAt(1)&&gt[2].charAt(0)==gt[2].charAt(1)&&gt[3].charAt(0)==gt[3].charAt(1)?gt[0].charAt(0)+gt[1].charAt(0)+gt[2].charAt(0)+gt[3].charAt(0):gt.join("")}function U(Le,Pe,ke,Qe){var _t=[ze(He(Qe)),ze(Math.round(Le).toString(16)),ze(Math.round(Pe).toString(16)),ze(Math.round(ke).toString(16))];return _t.join("")}s.equals=function(Le,Pe){return!Le||!Pe?!1:s(Le).toRgbString()==s(Pe).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function G(Le,Pe){Pe=Pe===0?0:Pe||10;var ke=s(Le).toHsl();return ke.s-=Pe/100,ke.s=rt(ke.s),s(ke)}function W(Le,Pe){Pe=Pe===0?0:Pe||10;var ke=s(Le).toHsl();return ke.s+=Pe/100,ke.s=rt(ke.s),s(ke)}function J(Le){return s(Le).desaturate(100)}function $(Le,Pe){Pe=Pe===0?0:Pe||10;var ke=s(Le).toHsl();return ke.l+=Pe/100,ke.l=rt(ke.l),s(ke)}function oe(Le,Pe){Pe=Pe===0?0:Pe||10;var ke=s(Le).toRgb();return ke.r=Math.max(0,Math.min(255,ke.r-Math.round(255*-(Pe/100)))),ke.g=Math.max(0,Math.min(255,ke.g-Math.round(255*-(Pe/100)))),ke.b=Math.max(0,Math.min(255,ke.b-Math.round(255*-(Pe/100)))),s(ke)}function te(Le,Pe){Pe=Pe===0?0:Pe||10;var ke=s(Le).toHsl();return ke.l-=Pe/100,ke.l=rt(ke.l),s(ke)}function H(Le,Pe){var ke=s(Le).toHsl(),Qe=(ke.h+Pe)%360;return ke.h=Qe<0?360+Qe:Qe,s(ke)}function re(Le){var Pe=s(Le).toHsl();return Pe.h=(Pe.h+180)%360,s(Pe)}function j(Le,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var ke=s(Le).toHsl(),Qe=[s(Le)],_t=360/Pe,gt=1;gt<Pe;gt++)Qe.push(s({h:(ke.h+gt*_t)%360,s:ke.s,l:ke.l}));return Qe}function ue(Le){var Pe=s(Le).toHsl(),ke=Pe.h;return[s(Le),s({h:(ke+72)%360,s:Pe.s,l:Pe.l}),s({h:(ke+216)%360,s:Pe.s,l:Pe.l})]}function me(Le,Pe,ke){Pe=Pe||6,ke=ke||30;var Qe=s(Le).toHsl(),_t=360/ke,gt=[s(Le)];for(Qe.h=(Qe.h-(_t*Pe>>1)+720)%360;--Pe;)Qe.h=(Qe.h+_t)%360,gt.push(s(Qe));return gt}function ge(Le,Pe){Pe=Pe||6;for(var ke=s(Le).toHsv(),Qe=ke.h,_t=ke.s,gt=ke.v,wt=[],Qt=1/Pe;Pe--;)wt.push(s({h:Qe,s:_t,v:gt})),gt=(gt+Qt)%1;return wt}s.mix=function(Le,Pe,ke){ke=ke===0?0:ke||50;var Qe=s(Le).toRgb(),_t=s(Pe).toRgb(),gt=ke/100,wt={r:(_t.r-Qe.r)*gt+Qe.r,g:(_t.g-Qe.g)*gt+Qe.g,b:(_t.b-Qe.b)*gt+Qe.b,a:(_t.a-Qe.a)*gt+Qe.a};return s(wt)},s.readability=function(Le,Pe){var ke=s(Le),Qe=s(Pe);return(Math.max(ke.getLuminance(),Qe.getLuminance())+.05)/(Math.min(ke.getLuminance(),Qe.getLuminance())+.05)},s.isReadable=function(Le,Pe,ke){var Qe=s.readability(Le,Pe),_t,gt;switch(gt=!1,_t=Tt(ke),_t.level+_t.size){case"AAsmall":case"AAAlarge":gt=Qe>=4.5;break;case"AAlarge":gt=Qe>=3;break;case"AAAsmall":gt=Qe>=7;break}return gt},s.mostReadable=function(Le,Pe,ke){var Qe=null,_t=0,gt,wt,Qt,Ft;ke=ke||{},wt=ke.includeFallbackColors,Qt=ke.level,Ft=ke.size;for(var ln=0;ln<Pe.length;ln++)gt=s.readability(Le,Pe[ln]),gt>_t&&(_t=gt,Qe=s(Pe[ln]));return s.isReadable(Le,Qe,{level:Qt,size:Ft})||!wt?Qe:(ke.includeFallbackColors=!1,s.mostReadable(Le,["#fff","#000"],ke))};var we=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ee=s.hexNames=xe(we);function xe(Le){var Pe={};for(var ke in Le)Le.hasOwnProperty(ke)&&(Pe[Le[ke]]=ke);return Pe}function We(Le){return Le=parseFloat(Le),(isNaN(Le)||Le<0||Le>1)&&(Le=1),Le}function be(Le,Pe){at(Le)&&(Le="100%");var ke=Je(Le);return Le=Math.min(Pe,Math.max(0,parseFloat(Le))),ke&&(Le=parseInt(Le*Pe,10)/100),Math.abs(Le-Pe)<1e-6?1:Le%Pe/parseFloat(Pe)}function rt(Le){return Math.min(1,Math.max(0,Le))}function Ct(Le){return parseInt(Le,16)}function at(Le){return typeof Le=="string"&&Le.indexOf(".")!=-1&&parseFloat(Le)===1}function Je(Le){return typeof Le=="string"&&Le.indexOf("%")!=-1}function ze(Le){return Le.length==1?"0"+Le:""+Le}function Te(Le){return Le<=1&&(Le=Le*100+"%"),Le}function He(Le){return Math.round(parseFloat(Le)*255).toString(16)}function pt(Le){return Ct(Le)/255}var kt=function(){var Le="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",ke="(?:"+Pe+")|(?:"+Le+")",Qe="[\\s|\\(]+("+ke+")[,|\\s]+("+ke+")[,|\\s]+("+ke+")\\s*\\)?",_t="[\\s|\\(]+("+ke+")[,|\\s]+("+ke+")[,|\\s]+("+ke+")[,|\\s]+("+ke+")\\s*\\)?";return{CSS_UNIT:new RegExp(ke),rgb:new RegExp("rgb"+Qe),rgba:new RegExp("rgba"+_t),hsl:new RegExp("hsl"+Qe),hsla:new RegExp("hsla"+_t),hsv:new RegExp("hsv"+Qe),hsva:new RegExp("hsva"+_t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ft(Le){return!!kt.CSS_UNIT.exec(Le)}function Bt(Le){Le=Le.replace(r,"").replace(i,"").toLowerCase();var Pe=!1;if(we[Le])Le=we[Le],Pe=!0;else if(Le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ke;return(ke=kt.rgb.exec(Le))?{r:ke[1],g:ke[2],b:ke[3]}:(ke=kt.rgba.exec(Le))?{r:ke[1],g:ke[2],b:ke[3],a:ke[4]}:(ke=kt.hsl.exec(Le))?{h:ke[1],s:ke[2],l:ke[3]}:(ke=kt.hsla.exec(Le))?{h:ke[1],s:ke[2],l:ke[3],a:ke[4]}:(ke=kt.hsv.exec(Le))?{h:ke[1],s:ke[2],v:ke[3]}:(ke=kt.hsva.exec(Le))?{h:ke[1],s:ke[2],v:ke[3],a:ke[4]}:(ke=kt.hex8.exec(Le))?{r:Ct(ke[1]),g:Ct(ke[2]),b:Ct(ke[3]),a:pt(ke[4]),format:Pe?"name":"hex8"}:(ke=kt.hex6.exec(Le))?{r:Ct(ke[1]),g:Ct(ke[2]),b:Ct(ke[3]),format:Pe?"name":"hex"}:(ke=kt.hex4.exec(Le))?{r:Ct(ke[1]+""+ke[1]),g:Ct(ke[2]+""+ke[2]),b:Ct(ke[3]+""+ke[3]),a:pt(ke[4]+""+ke[4]),format:Pe?"name":"hex8"}:(ke=kt.hex3.exec(Le))?{r:Ct(ke[1]+""+ke[1]),g:Ct(ke[2]+""+ke[2]),b:Ct(ke[3]+""+ke[3]),format:Pe?"name":"hex"}:!1}function Tt(Le){var Pe,ke;return Le=Le||{level:"AA",size:"small"},Pe=(Le.level||"AA").toUpperCase(),ke=(Le.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),ke!=="small"&&ke!=="large"&&(ke="small"),{level:Pe,size:ke}}return s})}(h2)),h2.exports}var aF;function tj(){if(aF)return Vh;aF=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.isvalidColorString=Vh.red=Vh.getContrastingColor=Vh.isValidHex=Vh.toState=Vh.simpleCheckForValidColor=void 0;var n=Uue(),e=i(n),t=Nue(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}Vh.simpleCheckForValidColor=function(o){var f=["r","g","b","a","h","s","l","v"],C=0,M=0;return(0,e.default)(f,function(B){if(o[B]&&(C+=1,isNaN(o[B])||(M+=1),B==="s"||B==="l")){var D=/^\d+%$/;D.test(o[B])&&(M+=1)}}),C===M?o:!1};var s=Vh.toState=function(o,f){var C=o.hex?(0,r.default)(o.hex):(0,r.default)(o),M=C.toHsl(),B=C.toHsv(),D=C.toRgb(),R=C.toHex();M.s===0&&(M.h=f||0,B.h=f||0);var U=R==="000000"&&D.a===0;return{hsl:M,hex:U?"transparent":"#"+R,rgb:D,hsv:B,oldHue:o.h||f||M.h,source:o.source}};return Vh.isValidHex=function(o){if(o==="transparent")return!0;var f=String(o).charAt(0)==="#"?1:0;return o.length!==4+f&&o.length<7+f&&(0,r.default)(o).isValid()},Vh.getContrastingColor=function(o){if(!o)return"#fff";var f=s(o);if(f.hex==="transparent")return"rgba(0,0,0,0.4)";var C=(f.rgb.r*299+f.rgb.g*587+f.rgb.b*114)/1e3;return C>=128?"#000":"#fff"},Vh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Vh.isvalidColorString=function(o,f){var C=o.replace("","");return(0,r.default)(f+" ("+C+")")._ok},Vh}var lF;function Gue(){if(lF)return Z1;lF=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.ColorWrap=void 0;var n=Object.assign||function(U){for(var G=1;G<arguments.length;G++){var W=arguments[G];for(var J in W)Object.prototype.hasOwnProperty.call(W,J)&&(U[J]=W[J])}return U},e=function(){function U(G,W){for(var J=0;J<W.length;J++){var $=W[J];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(G,$.key,$)}}return function(G,W,J){return W&&U(G.prototype,W),J&&U(G,J),G}}(),t=Ya(),r=C(t),i=ej(),s=C(i),l=tj(),o=f(l);function f(U){if(U&&U.__esModule)return U;var G={};if(U!=null)for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(G[W]=U[W]);return G.default=U,G}function C(U){return U&&U.__esModule?U:{default:U}}function M(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")}function B(U,G){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:U}function D(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(U,G):U.__proto__=G)}var R=Z1.ColorWrap=function(G){var W=function(J){D($,J);function $(oe){M(this,$);var te=B(this,($.__proto__||Object.getPrototypeOf($)).call(this));return te.handleChange=function(H,re){var j=o.simpleCheckForValidColor(H);if(j){var ue=o.toState(H,H.h||te.state.oldHue);te.setState(ue),te.props.onChangeComplete&&te.debounce(te.props.onChangeComplete,ue,re),te.props.onChange&&te.props.onChange(ue,re)}},te.handleSwatchHover=function(H,re){var j=o.simpleCheckForValidColor(H);if(j){var ue=o.toState(H,H.h||te.state.oldHue);te.props.onSwatchHover&&te.props.onSwatchHover(ue,re)}},te.state=n({},o.toState(oe.color,0)),te.debounce=(0,s.default)(function(H,re,j){H(re,j)},100),te}return e($,[{key:"render",value:function(){var te={};return this.props.onSwatchHover&&(te.onSwatchHover=this.handleSwatchHover),r.default.createElement(G,n({},this.props,this.state,{onChange:this.handleChange},te))}}],[{key:"getDerivedStateFromProps",value:function(te,H){return n({},o.toState(te.color,H.oldHue))}}]),$}(t.PureComponent||t.Component);return W.propTypes=n({},G.propTypes),W.defaultProps=n({},G.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),W};return Z1.default=R,Z1}var X1={},zv={},AF;function jue(){if(AF)return zv;AF=1,Object.defineProperty(zv,"__esModule",{value:!0}),zv.handleFocus=void 0;var n=Object.assign||function(f){for(var C=1;C<arguments.length;C++){var M=arguments[C];for(var B in M)Object.prototype.hasOwnProperty.call(M,B)&&(f[B]=M[B])}return f},e=function(){function f(C,M){for(var B=0;B<M.length;B++){var D=M[B];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}return function(C,M,B){return M&&f(C.prototype,M),B&&f(C,B),C}}(),t=Ya(),r=i(t);function i(f){return f&&f.__esModule?f:{default:f}}function s(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function l(f,C){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:f}function o(f,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);f.prototype=Object.create(C&&C.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(f,C):f.__proto__=C)}return zv.handleFocus=function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){o(D,B);function D(){var R,U,G,W;s(this,D);for(var J=arguments.length,$=Array(J),oe=0;oe<J;oe++)$[oe]=arguments[oe];return W=(U=(G=l(this,(R=D.__proto__||Object.getPrototypeOf(D)).call.apply(R,[this].concat($))),G),G.state={focus:!1},G.handleFocus=function(){return G.setState({focus:!0})},G.handleBlur=function(){return G.setState({focus:!1})},U),l(G,W)}return e(D,[{key:"render",value:function(){return r.default.createElement(M,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(C,n({},this.props,this.state)))}}]),D}(r.default.Component)},zv}var uF;function Wue(){if(uF)return X1;uF=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.Swatch=void 0;var n=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var R=arguments[D];for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(B[U]=R[U])}return B},e=Ya(),t=f(e),r=Up(),i=f(r),s=jue(),l=r8(),o=f(l);function f(B){return B&&B.__esModule?B:{default:B}}var C=13,M=X1.Swatch=function(D){var R=D.color,U=D.style,G=D.onClick,W=G===void 0?function(){}:G,J=D.onHover,$=D.title,oe=$===void 0?R:$,te=D.children,H=D.focus,re=D.focusStyle,j=re===void 0?{}:re,ue=R==="transparent",me=(0,i.default)({default:{swatch:n({background:R,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},U,H?j:{})}}),ge=function(be){return W(R,be)},we=function(be){return be.keyCode===C&&W(R,be)},Ee=function(be){return J(R,be)},xe={};return J&&(xe.onMouseOver=Ee),t.default.createElement("div",n({style:me.swatch,onClick:ge,title:oe,tabIndex:0,onKeyDown:we},xe),te,ue&&t.default.createElement(o.default,{borderRadius:me.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return X1.default=(0,s.handleFocus)(M),X1}var cF;function nj(){return cF||(cF=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Sue();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return C(e).default}});var t=r8();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return C(t).default}});var r=Eue();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return C(r).default}});var i=Oue();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return C(i).default}});var s=Iue();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return C(s).default}});var l=Kue();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return C(l).default}});var o=Gue();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return C(o).default}});var f=Wue();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return C(f).default}});function C(M){return M&&M.__esModule?M:{default:M}}}(iE)),iE}var J1={},dE,hF;function Que(){if(hF)return dE;hF=1;function n(e){return e===void 0}return dE=n,dE}var Hb={},dF;function Yue(){if(dF)return Hb;dF=1,Object.defineProperty(Hb,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(l[C]=f[C])}return l},e=Ya(),t=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,o){var f={};for(var C in l)o.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(l,C)&&(f[C]=l[C]);return f}var s=24;return Hb.default=function(l){var o=l.fill,f=o===void 0?"currentColor":o,C=l.width,M=C===void 0?s:C,B=l.height,D=B===void 0?s:B,R=l.style,U=R===void 0?{}:R,G=i(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:f,width:M,height:D},U)},G),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Hb}var fF;function que(){if(fF)return J1;fF=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.ChromeFields=void 0;var n=function(){function $(oe,te){for(var H=0;H<te.length;H++){var re=te[H];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}return function(oe,te,H){return te&&$(oe.prototype,te),H&&$(oe,H),oe}}(),e=Ya(),t=R(e),r=Up(),i=R(r),s=tj(),l=D(s),o=Que(),f=R(o),C=nj(),M=Yue(),B=R(M);function D($){if($&&$.__esModule)return $;var oe={};if($!=null)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(oe[te]=$[te]);return oe.default=$,oe}function R($){return $&&$.__esModule?$:{default:$}}function U($,oe){if(!($ instanceof oe))throw new TypeError("Cannot call a class as a function")}function G($,oe){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:$}function W($,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);$.prototype=Object.create(oe&&oe.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf($,oe):$.__proto__=oe)}var J=J1.ChromeFields=function($){W(oe,$);function oe(te){U(this,oe);var H=G(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return H.toggleViews=function(){H.state.view==="hex"?H.setState({view:"rgb"}):H.state.view==="rgb"?H.setState({view:"hsl"}):H.state.view==="hsl"&&(H.props.hsl.a===1?H.setState({view:"hex"}):H.setState({view:"rgb"}))},H.handleChange=function(re,j){re.hex?l.isValidHex(re.hex)&&H.props.onChange({hex:re.hex,source:"hex"},j):re.r||re.g||re.b?H.props.onChange({r:re.r||H.props.rgb.r,g:re.g||H.props.rgb.g,b:re.b||H.props.rgb.b,source:"rgb"},j):re.a?(re.a<0?re.a=0:re.a>1&&(re.a=1),H.props.onChange({h:H.props.hsl.h,s:H.props.hsl.s,l:H.props.hsl.l,a:Math.round(re.a*100)/100,source:"rgb"},j)):(re.h||re.s||re.l)&&(typeof re.s=="string"&&re.s.includes("%")&&(re.s=re.s.replace("%","")),typeof re.l=="string"&&re.l.includes("%")&&(re.l=re.l.replace("%","")),re.s==1?re.s=.01:re.l==1&&(re.l=.01),H.props.onChange({h:re.h||H.props.hsl.h,s:Number((0,f.default)(re.s)?H.props.hsl.s:re.s),l:Number((0,f.default)(re.l)?H.props.hsl.l:re.l),source:"hsl"},j))},H.showHighlight=function(re){re.currentTarget.style.background="#eee"},H.hideHighlight=function(re){re.currentTarget.style.background="transparent"},te.hsl.a!==1&&te.view==="hex"?H.state={view:"rgb"}:H.state={view:te.view},H}return n(oe,[{key:"render",value:function(){var H=this,re=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),j=void 0;return this.state.view==="hex"?j=t.default.createElement("div",{style:re.fields,className:"flexbox-fix"},t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?j=t.default.createElement("div",{style:re.fields,className:"flexbox-fix"},t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:re.alpha},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(j=t.default.createElement("div",{style:re.fields,className:"flexbox-fix"},t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:re.field},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:re.alpha},t.default.createElement(C.EditableInput,{style:{input:re.input,label:re.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:re.wrap,className:"flexbox-fix"},j,t.default.createElement("div",{style:re.toggle},t.default.createElement("div",{style:re.icon,onClick:this.toggleViews,ref:function(me){return H.icon=me}},t.default.createElement(B.default,{style:re.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(H,re){return H.hsl.a!==1&&re.view==="hex"?{view:"rgb"}:null}}]),oe}(t.default.Component);return J.defaultProps={view:"hex"},J1.default=J,J1}var ey={},pF;function $ue(){if(pF)return ey;pF=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.ChromePointer=void 0;var n=Ya(),e=i(n),t=Up(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=ey.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return ey.default=s,ey}var ty={},mF;function Vue(){if(mF)return ty;mF=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.ChromePointerCircle=void 0;var n=Ya(),e=i(n),t=Up(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=ty.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return ty.default=s,ty}var gF;function Hue(){if(gF)return U1;gF=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.Chrome=void 0;var n=Ya(),e=G(n),t=gm(),r=G(t),i=Up(),s=G(i),l=JG(),o=G(l),f=nj(),C=que(),M=G(C),B=$ue(),D=G(B),R=Vue(),U=G(R);function G(J){return J&&J.__esModule?J:{default:J}}var W=U1.Chrome=function($){var oe=$.width,te=$.onChange,H=$.disableAlpha,re=$.rgb,j=$.hsl,ue=$.hsv,me=$.hex,ge=$.renderers,we=$.styles,Ee=we===void 0?{}:we,xe=$.className,We=xe===void 0?"":xe,be=$.defaultView,rt=(0,s.default)((0,o.default)({default:{picker:{width:oe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+re.r+", "+re.g+", "+re.b+", "+re.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Ee),{disableAlpha:H});return e.default.createElement("div",{style:rt.picker,className:"chrome-picker "+We},e.default.createElement("div",{style:rt.saturation},e.default.createElement(f.Saturation,{style:rt.Saturation,hsl:j,hsv:ue,pointer:U.default,onChange:te})),e.default.createElement("div",{style:rt.body},e.default.createElement("div",{style:rt.controls,className:"flexbox-fix"},e.default.createElement("div",{style:rt.color},e.default.createElement("div",{style:rt.swatch},e.default.createElement("div",{style:rt.active}),e.default.createElement(f.Checkboard,{renderers:ge}))),e.default.createElement("div",{style:rt.toggles},e.default.createElement("div",{style:rt.hue},e.default.createElement(f.Hue,{style:rt.Hue,hsl:j,pointer:D.default,onChange:te})),e.default.createElement("div",{style:rt.alpha},e.default.createElement(f.Alpha,{style:rt.Alpha,rgb:re,hsl:j,pointer:D.default,renderers:ge,onChange:te})))),e.default.createElement(M.default,{rgb:re,hsl:j,hex:me,view:be,onChange:te,disableAlpha:H})))};return W.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},W.defaultProps={width:225,disableAlpha:!1,styles:{}},U1.default=(0,f.ColorWrap)(W),U1}var Zue=Hue();const Xue=yA(Zue);function io(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return io=function(){return l},l}io();function Jue(n){io().f[0]++;const e=(io().s[0]++,n.rgb);return io().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class rj extends Fn.Component{state=(io().s[2]++,{pickerOpened:!1});colorInput=(io().s[3]++,null);constructor(e){io().f[1]++,io().s[4]++,super(e),io().s[5]++,this.onChangeNoCheck=p6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){io().f[2]++,io().s[6]++,this.props.onChange(e)}calcPickerOffset=(io().s[7]++,()=>{io().f[3]++;const e=(io().s[8]++,this.colorInput);if(io().s[9]++,e){io().b[0][0]++;const t=(io().s[10]++,e.getBoundingClientRect());return io().s[11]++,{top:t.top,left:t.left+196}}else return io().b[0][1]++,io().s[12]++,{top:160,left:555}});togglePicker=(io().s[13]++,()=>{io().f[4]++,io().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){io().f[5]++,io().s[15]++;try{return io().s[16]++,ku(this.props.value).rgb()}catch(e){return io().s[17]++,console.warn("Error parsing color: ",e),io().s[18]++,ku("rgb(255,255,255)")}}onChange(e){io().f[6]++,io().s[19]++,this.props.onChange(e===""?(io().b[1][0]++,void 0):(io().b[1][1]++,e))}render(){io().f[7]++;const e=(io().s[20]++,this.calcPickerOffset()),t=(io().s[21]++,this.color.object()),r=(io().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),i=(io().s[23]++,le.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[le.jsx(Xue,{color:r,onChange:l=>(io().f[8]++,io().s[24]++,this.onChangeNoCheck(Jue(l)))}),le.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),s=(io().s[25]++,{backgroundColor:this.props.value});return io().s[26]++,le.jsxs("div",{className:"maputnik-color-wrapper",children:[(io().b[2][0]++,this.state.pickerOpened&&(io().b[2][1]++,i)),le.jsx("div",{className:"maputnik-color-swatch",style:s}),le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:l=>(io().f[9]++,io().s[27]++,this.colorInput=l),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(io().b[3][0]++,this.props.value):(io().b[3][1]++,""),onChange:l=>(io().f[10]++,io().s[28]++,this.onChange(l.target.value))})]})}}function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mn=function(){return l},l}mn();class Hm extends Fn.Component{static defaultProps=(mn().s[0]++,{rangeStep:1});_keyboardEvent=(mn().s[1]++,!1);constructor(e){mn().f[0]++,mn().s[2]++,super(e),mn().s[3]++,this.state={uuid:+zy(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return mn().f[1]++,mn().s[4]++,mn().b[1][0]++,!t.editing&&(mn().b[1][1]++,e.value!==t.value)?(mn().b[0][0]++,mn().s[5]++,{value:e.value,dirtyValue:e.value}):(mn().b[0][1]++,mn().s[6]++,null)}changeValue(e){mn().f[2]++;const t=(mn().s[7]++,mn().b[3][0]++,e===""||(mn().b[3][1]++,e===void 0)?(mn().b[2][0]++,void 0):(mn().b[2][1]++,+e)),r=(mn().s[8]++,this.props.value!==t);mn().s[9]++,mn().b[5][0]++,this.isValid(t)&&(mn().b[5][1]++,r)?(mn().b[4][0]++,mn().s[10]++,this.props.onChange?(mn().b[6][0]++,mn().s[11]++,this.props.onChange(t)):mn().b[6][1]++,mn().s[12]++,this.setState({value:t})):(mn().b[4][1]++,mn().s[13]++,mn().b[8][0]++,!this.isValid(t)&&(mn().b[8][1]++,r)?(mn().b[7][0]++,mn().s[14]++,this.setState({value:void 0})):mn().b[7][1]++),mn().s[15]++,this.setState({dirtyValue:e===""?(mn().b[9][0]++,void 0):(mn().b[9][1]++,e)})}isValid(e){if(mn().f[3]++,mn().s[16]++,e===void 0)return mn().b[10][0]++,mn().s[17]++,!0;mn().b[10][1]++;const t=(mn().s[18]++,+e);return mn().s[19]++,isNaN(t)?(mn().b[11][0]++,mn().s[20]++,!1):(mn().b[11][1]++,mn().s[21]++,mn().b[13][0]++,!isNaN(this.props.min)&&(mn().b[13][1]++,t<this.props.min)?(mn().b[12][0]++,mn().s[22]++,!1):(mn().b[12][1]++,mn().s[23]++,mn().b[15][0]++,!isNaN(this.props.max)&&(mn().b[15][1]++,t>this.props.max)?(mn().b[14][0]++,mn().s[24]++,!1):(mn().b[14][1]++,mn().s[25]++,!0)))}resetValue=(mn().s[26]++,()=>{if(mn().f[4]++,mn().s[27]++,this.setState({editing:!1}),mn().s[28]++,this.state.value)mn().b[16][1]++;else{mn().b[16][0]++,mn().s[29]++;return}mn().s[30]++,this.isValid(this.state.value)?mn().b[17][1]++:(mn().b[17][0]++,mn().s[31]++,this.isValid(this.props.value)?(mn().b[18][0]++,mn().s[32]++,this.changeValue(this.props.value),mn().s[33]++,this.setState({dirtyValue:this.props.value})):(mn().b[18][1]++,mn().s[34]++,this.changeValue(void 0),mn().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(mn().s[36]++,e=>{mn().f[5]++;let t=(mn().s[37]++,parseFloat(e.target.value));const r=(mn().s[38]++,this.props.rangeStep);let i=(mn().s[39]++,t);if(mn().s[40]++,r){mn().b[19][0]++;const s=(mn().s[41]++,t%r);mn().s[42]++,this._keyboardEvent?(mn().b[20][0]++,mn().s[43]++,t<+this.state.dirtyValue?(mn().b[21][0]++,mn().s[44]++,t=this.state.value-r):(mn().b[21][1]++,mn().s[45]++,t=this.state.value+r),mn().s[46]++,i=t):(mn().b[20][1]++,mn().s[47]++,s<r/2?(mn().b[22][0]++,mn().s[48]++,t=t-s):(mn().b[22][1]++,mn().s[49]++,t=t+(r-s)))}else mn().b[19][1]++;mn().s[50]++,this._keyboardEvent=!1,mn().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),mn().s[52]++,this.setState({value:t,dirtyValue:i}),mn().s[53]++,this.props.onChange?(mn().b[23][0]++,mn().s[54]++,this.props.onChange(t)):mn().b[23][1]++});render(){if(mn().f[6]++,mn().s[55]++,mn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(mn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(mn().b[25][2]++,this.props.min!==void 0)&&(mn().b[25][3]++,this.props.max!==void 0)&&(mn().b[25][4]++,this.props.allowRange)){mn().b[24][0]++;const e=(mn().s[56]++,this.state.editing?(mn().b[26][0]++,this.state.dirtyValue):(mn().b[26][1]++,this.state.value)),t=(mn().s[57]++,this.props.default===void 0?(mn().b[27][0]++,""):(mn().b[27][1]++,this.props.default));let r;return mn().s[58]++,this.state.editingRange?(mn().b[28][0]++,mn().s[59]++,r=this.state.value):(mn().b[28][1]++,mn().s[60]++,r=e),mn().s[61]++,le.jsxs("div",{className:"maputnik-number-container",children:[le.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(mn().b[29][0]++,t):(mn().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{mn().f[7]++,mn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{mn().f[8]++,mn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{mn().f[9]++,mn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{mn().f[10]++,mn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),le.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:r===void 0?(mn().b[30][0]++,""):(mn().b[30][1]++,r),onFocus:i=>{mn().f[11]++,mn().s[66]++,this.setState({editing:!0})},onChange:i=>{mn().f[12]++,mn().s[67]++,this.changeValue(i.target.value)},onBlur:i=>{mn().f[13]++,mn().s[68]++,this.setState({editing:!1}),mn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{mn().b[24][1]++;const e=(mn().s[70]++,this.state.editing?(mn().b[31][0]++,this.state.dirtyValue):(mn().b[31][1]++,this.state.value));return mn().s[71]++,le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(mn().b[32][0]++,""):(mn().b[32][1]++,e),onChange:t=>(mn().f[14]++,mn().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{mn().f[15]++,mn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Jp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Jp=function(){return l},l}Jp();class ij extends Fn.Component{static defaultProps=(Jp().s[0]++,{value:!1});onChange=(Jp().s[1]++,()=>{Jp().f[0]++,Jp().s[2]++,this.props.onChange(!this.props.value)});render(){return Jp().f[1]++,Jp().s[3]++,le.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[le.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),le.jsx("div",{className:"maputnik-checkbox-box",children:le.jsx("svg",{style:{display:this.props.value?(Jp().b[0][0]++,"inline"):(Jp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:le.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function Wr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wr=function(){return l},l}Wr();let oj=class extends Fn.Component{static defaultProps=(Wr().s[0]++,{value:[],default:[]});constructor(e){Wr().f[0]++,Wr().s[1]++,super(e),Wr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Wr().f[1]++;const r=(Wr().s[3]++,[]),i=(Wr().s[4]++,t.initialPropsValue.slice(0));return Wr().s[5]++,Array(e.length).fill(null).map((s,l)=>{Wr().f[2]++,Wr().s[6]++,e.value[l]===t.initialPropsValue[l]?(Wr().b[0][0]++,Wr().s[7]++,r[l]=t.value[l]):(Wr().b[0][1]++,Wr().s[8]++,r[l]=t.value[l],Wr().s[9]++,i[l]=t.value[l])}),Wr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Wr().f[3]++,Wr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Wr().f[4]++;const i=(Wr().s[12]++,e[r]);return Wr().s[13]++,Wr().b[1][0]++,!(i===void 0||(Wr().b[1][1]++,i===""))})}changeValue(e,t){Wr().f[5]++;const r=(Wr().s[14]++,this.state.value.slice(0));Wr().s[15]++,r[e]=t,Wr().s[16]++,this.setState({value:r},()=>{Wr().f[6]++,Wr().s[17]++,Wr().b[3][0]++,this.isComplete(r)&&(Wr().b[3][1]++,this.props.onChange)?(Wr().b[2][0]++,Wr().s[18]++,this.props.onChange(r)):(Wr().b[2][1]++,Wr().s[19]++,this.props.onChange?(Wr().b[4][0]++,Wr().s[20]++,this.props.onChange(void 0)):Wr().b[4][1]++)})}render(){Wr().f[7]++;const{value:e}=(Wr().s[21]++,this.state),t=(Wr().s[22]++,Wr().b[5][0]++,e.length>0&&(Wr().b[5][1]++,!e.every(i=>(Wr().f[8]++,Wr().s[23]++,Wr().b[6][0]++,i===""||(Wr().b[6][1]++,i===void 0))))),r=(Wr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Wr().f[9]++,Wr().s[25]++,this.props.type==="number"?(Wr().b[7][0]++,Wr().s[26]++,le.jsx(Hm,{default:(Wr().b[9][0]++,t||(Wr().b[9][1]++,!this.props.default)?(Wr().b[8][0]++,void 0):(Wr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Wr().b[10][0]++,!0):(Wr().b[10][1]++,!1),onChange:l=>(Wr().f[10]++,Wr().s[27]++,this.changeValue(s,l)),"aria-label":(Wr().b[11][0]++,this.props["aria-label"]||(Wr().b[11][1]++,this.props.label))},s)):(Wr().b[7][1]++,Wr().s[28]++,le.jsx(Pp,{default:(Wr().b[13][0]++,t||(Wr().b[13][1]++,!this.props.default)?(Wr().b[12][0]++,void 0):(Wr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Wr().b[14][0]++,!0):(Wr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Wr().b[15][0]++,this.props["aria-label"]||(Wr().b[15][1]++,this.props.label))},s)))));return Wr().s[29]++,le.jsx("div",{className:"maputnik-array",children:r})}};function Au(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Au=function(){return l},l}Au();class ece extends Fn.Component{render(){Au().f[0]++;let e=(Au().s[0]++,this.props.options);Au().s[1]++,Au().b[1][0]++,e.length>0&&(Au().b[1][1]++,!Array.isArray(e[0]))?(Au().b[0][0]++,Au().s[2]++,e=e.map(i=>(Au().f[1]++,Au().s[3]++,[i,i]))):Au().b[0][1]++;const t=(Au().s[4]++,Au().b[2][0]++,this.props.value||(Au().b[2][1]++,e[0][0])),r=(Au().s[5]++,e.map(([i,s])=>(Au().f[2]++,Au().s[6]++,le.jsxs("label",{className:fm("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[le.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(Au().f[3]++,Au().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return Au().s[8]++,le.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Pl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Pl=function(){return l},l}Pl();function tce(n){Pl().f[0]++;let e=(Pl().s[0]++,0);return Pl().s[1]++,n.forEach(([t,r])=>{Pl().f[1]++,Pl().s[2]++,e+=r.length}),Pl().s[3]++,e}class i8 extends Fn.Component{render(){Pl().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Pl().s[4]++,this.props);return Pl().s[5]++,Pl().b[1][0]++,e.length<=3&&(Pl().b[1][1]++,tce(e)<=20)?(Pl().b[0][0]++,Pl().s[6]++,le.jsx(ece,{name:i,options:e,value:(Pl().b[2][0]++,t||(Pl().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Pl().b[3][0]++,this.props["aria-label"]||(Pl().b[3][1]++,s))})):(Pl().b[0][1]++,Pl().s[7]++,le.jsx(i1,{options:e,value:(Pl().b[4][0]++,t||(Pl().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Pl().b[5][0]++,this.props["aria-label"]||(Pl().b[5][1]++,s))}))}}function My(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return My=function(){return l},l}My();class nce extends Fn.Component{render(){My().f[0]++;const e=(My().s[0]++,this.props.t);return My().s[1]++,le.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const fE=(My().s[2]++,zs()(nce));function oo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oo=function(){return l},l}oo();function pE(n,e){if(oo().f[0]++,oo().s[0]++,n===""){oo().b[0][0]++,oo().s[1]++;return}else oo().b[0][1]++;let t;oo().s[2]++;const r=l=>{oo().f[1]++,oo().s[3]++;try{const o=(oo().s[4]++,new URL(l));return oo().s[5]++,o.protocol}catch{oo().s[6]++;return}},i=(oo().s[7]++,r(n)),s=(oo().s[8]++,window.location.protocol==="https:");return oo().s[9]++,i?(oo().b[1][1]++,oo().s[13]++,oo().b[4][0]++,i&&(oo().b[4][1]++,i==="http:")&&(oo().b[4][2]++,window.location.protocol==="https:")?(oo().b[3][0]++,oo().s[14]++,t=le.jsx(fE,{children:le.jsxs(N0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",le.jsx("code",{children:"https://"})," domain"]})})):oo().b[3][1]++):(oo().b[1][0]++,oo().s[10]++,s?(oo().b[2][0]++,oo().s[11]++,t=le.jsx(fE,{children:le.jsxs(N0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"https://"})]})})):(oo().b[2][1]++,oo().s[12]++,t=le.jsx(fE,{children:le.jsxs(N0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"http://"})," or ",le.jsx("code",{children:"https://"})]})}))),oo().s[15]++,t}class rce extends Fn.Component{static defaultProps=(oo().s[16]++,{onInput:()=>{oo().f[2]++}});constructor(e){oo().f[3]++,oo().s[17]++,super(e),oo().s[18]++,this.state={error:pE(e.value,e.t)}}onInput=(oo().s[19]++,e=>{oo().f[4]++,oo().s[20]++,this.setState({error:pE(e,this.props.t)}),oo().s[21]++,this.props.onInput?(oo().b[5][0]++,oo().s[22]++,this.props.onInput(e)):oo().b[5][1]++});onChange=(oo().s[23]++,e=>{oo().f[5]++,oo().s[24]++,this.setState({error:pE(e,this.props.t)}),oo().s[25]++,this.props.onChange(e)});render(){return oo().f[6]++,oo().s[26]++,le.jsxs("div",{children:[le.jsx(Pp,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const o8=(oo().s[27]++,zs()(rce));function kr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return kr=function(){return l},l}kr();class ice extends Fn.Component{changeValue(e,t){kr().f[0]++;const r=(kr().s[0]++,this.values.slice(0));kr().s[1]++,r[e]=t,kr().s[2]++,this.props.onChange?(kr().b[0][0]++,kr().s[3]++,this.props.onChange(r)):kr().b[0][1]++}get values(){return kr().f[1]++,kr().s[4]++,kr().b[1][0]++,this.props.value||(kr().b[1][1]++,this.props.default)||(kr().b[1][2]++,[])}addValue=(kr().s[5]++,()=>{kr().f[2]++;const e=(kr().s[6]++,this.values.slice(0));if(kr().s[7]++,this.props.type==="number")kr().b[2][0]++,kr().s[8]++,e.push(0);else if(kr().b[2][1]++,kr().s[9]++,this.props.type==="url")kr().b[3][0]++,kr().s[10]++,e.push("");else if(kr().b[3][1]++,kr().s[11]++,this.props.type==="enum"){kr().b[4][0]++;const{fieldSpec:t}=(kr().s[12]++,this.props),r=(kr().s[13]++,Object.keys(t.values)[0]);kr().s[14]++,e.push(r)}else kr().b[4][1]++,kr().s[15]++,e.push("");kr().s[16]++,this.props.onChange?(kr().b[5][0]++,kr().s[17]++,this.props.onChange(e)):kr().b[5][1]++});deleteValue(e){kr().f[3]++;const t=(kr().s[18]++,this.values.slice(0));kr().s[19]++,t.splice(e,1),kr().s[20]++,this.props.onChange?(kr().b[6][0]++,kr().s[21]++,this.props.onChange(t.length>0?(kr().b[7][0]++,t):(kr().b[7][1]++,void 0))):kr().b[6][1]++}render(){kr().f[4]++;const e=(kr().s[22]++,this.props.t),t=(kr().s[23]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(kr().s[24]++,this.values.map((i,s)=>{kr().f[5]++;const l=(kr().s[25]++,le.jsx(oce,{onClick:this.deleteValue.bind(this,s),...t}));let o;if(kr().s[26]++,this.props.type==="url")kr().b[8][0]++,kr().s[27]++,o=le.jsx(o8,{value:i,onChange:this.changeValue.bind(this,s),"aria-label":(kr().b[9][0]++,this.props["aria-label"]||(kr().b[9][1]++,this.props.label))});else if(kr().b[8][1]++,kr().s[28]++,this.props.type==="number")kr().b[10][0]++,kr().s[29]++,o=le.jsx(Hm,{value:i,onChange:this.changeValue.bind(this,s),"aria-label":(kr().b[11][0]++,this.props["aria-label"]||(kr().b[11][1]++,this.props.label))});else if(kr().b[10][1]++,kr().s[30]++,this.props.type==="enum"){kr().b[12][0]++;const f=(kr().s[31]++,Object.keys(this.props.fieldSpec?.values).map(C=>(kr().f[6]++,kr().s[32]++,[C,zI(C)])));kr().s[33]++,o=le.jsx(i8,{options:f,value:i,onChange:this.changeValue.bind(this,s),"aria-label":(kr().b[13][0]++,this.props["aria-label"]||(kr().b[13][1]++,this.props.label))})}else kr().b[12][1]++,kr().s[34]++,o=le.jsx(Pp,{value:i,onChange:this.changeValue.bind(this,s),"aria-label":(kr().b[14][0]++,this.props["aria-label"]||(kr().b[14][1]++,this.props.label))});return kr().s[35]++,le.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[le.jsx("div",{className:"maputnik-array-block-action",children:l}),le.jsx("div",{className:"maputnik-array-block-content",children:o})]},s)}));return kr().s[36]++,le.jsxs("div",{className:"maputnik-array",children:[r,le.jsx(Qa,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const sj=(kr().s[37]++,zs()(ice));class oce extends Fn.Component{render(){kr().f[7]++;const e=(kr().s[38]++,this.props.t);return kr().s[39]++,le.jsx(Qa,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:le.jsx(gI,{label:le.jsx(Yy,{})})})}}function pa(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return pa=function(){return l},l}pa();class sce extends Fn.Component{static defaultProps=(pa().s[0]++,{fonts:[]});get values(){pa().f[0]++;const e=(pa().s[1]++,pa().b[0][0]++,this.props.value||(pa().b[0][1]++,this.props.default)||(pa().b[0][2]++,[]));return pa().s[2]++,e[e.length-1]!==""?(pa().b[1][0]++,pa().s[3]++,e.concat("")):(pa().b[1][1]++,pa().s[4]++,e)}changeFont(e,t){pa().f[1]++;const r=(pa().s[5]++,this.values.slice(0));pa().s[6]++,r[e]=t;const i=(pa().s[7]++,r.filter(s=>(pa().f[2]++,pa().s[8]++,s!==void 0)).filter(s=>(pa().f[3]++,pa().s[9]++,s!=="")));pa().s[10]++,this.props.onChange(i)}render(){pa().f[4]++;const e=(pa().s[11]++,this.values.map((t,r)=>(pa().f[5]++,pa().s[12]++,le.jsx("li",{children:le.jsx(U_,{"aria-label":(pa().b[2][0]++,this.props["aria-label"]||(pa().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(i=>(pa().f[6]++,pa().s[13]++,[i,i])),onChange:this.changeFont.bind(this,r)})},r))));return pa().s[14]++,le.jsx("ul",{className:"maputnik-font",children:e})}}function Ao(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ao=function(){return l},l}Ao();const ace=(Ao().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let wy=class extends Fn.Component{childNodes(){Ao().f[0]++;const e=(Ao().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Ao().f[1]++,Ao().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Ao().s[3]++,this.props.fieldSpec?.type){case"number":return Ao().b[0][0]++,Ao().s[4]++,le.jsx(Hm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Ao().b[0][1]++;{const t=(Ao().s[5]++,Object.keys((Ao().b[1][0]++,this.props.fieldSpec.values||(Ao().b[1][1]++,[]))).map(r=>(Ao().f[2]++,Ao().s[6]++,[r,zI(r)])));return Ao().s[7]++,le.jsx(i8,{...e,options:t})}case"resolvedImage":Ao().b[0][2]++;case"formatted":Ao().b[0][3]++;case"string":if(Ao().b[0][4]++,Ao().s[8]++,ace.indexOf(this.props.fieldName)>=0){Ao().b[2][0]++;const t=(Ao().s[9]++,Ao().b[3][0]++,this.props.fieldSpec.values||(Ao().b[3][1]++,[]));return Ao().s[10]++,le.jsx(U_,{...e,options:t.map(r=>(Ao().f[3]++,Ao().s[11]++,[r,r]))})}else return Ao().b[2][1]++,Ao().s[12]++,le.jsx(Pp,{...e});case"color":return Ao().b[0][5]++,Ao().s[13]++,le.jsx(rj,{...e});case"boolean":return Ao().b[0][6]++,Ao().s[14]++,le.jsx(ij,{...e});case"array":return Ao().b[0][7]++,Ao().s[15]++,this.props.fieldName==="text-font"?(Ao().b[4][0]++,Ao().s[16]++,le.jsx(sce,{...e,fonts:this.props.fieldSpec.values})):(Ao().b[4][1]++,Ao().s[17]++,this.props.fieldSpec.length?(Ao().b[5][0]++,Ao().s[18]++,le.jsx(oj,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Ao().b[5][1]++,Ao().s[19]++,le.jsx(sj,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return Ao().b[0][8]++,Ao().s[20]++,null}}render(){return Ao().f[4]++,Ao().s[21]++,le.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function Cc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="cf4fa307cbacd101a0c445717dc560b88355320c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:6,column:17},end:{line:26,column:1}},1:{start:{line:7,column:32},end:{line:7,column:53}},2:{start:{line:8,column:18},end:{line:8,column:67}},3:{start:{line:9,column:22},end:{line:11,column:3}},4:{start:{line:10,column:4},end:{line:10,column:20}},5:{start:{line:12,column:2},end:{line:25,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:28},end:{line:26,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:9,column:22},end:{line:9,column:23}},loc:{start:{line:9,column:31},end:{line:11,column:3}},line:9}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:20,column:8}},type:"binary-expr",locations:[{start:{line:13,column:4},end:{line:13,column:19}},{start:{line:13,column:39},end:{line:20,column:8}}],line:13},1:{loc:{start:{line:21,column:4},end:{line:21,column:118}},type:"binary-expr",locations:[{start:{line:21,column:4},end:{line:21,column:20}},{start:{line:21,column:40},end:{line:21,column:118}}],line:21},2:{loc:{start:{line:24,column:4},end:{line:24,column:198}},type:"binary-expr",locations:[{start:{line:24,column:4},end:{line:24,column:19}},{start:{line:24,column:39},end:{line:24,column:198}}],line:24},3:{loc:{start:{line:24,column:104},end:{line:24,column:125}},type:"cond-expr",locations:[{start:{line:24,column:114},end:{line:24,column:116}},{start:{line:24,column:119},end:{line:24,column:125}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAqBI,SAGM,KAHN;AArBJ,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAS7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAU,8BACZ,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf4fa307cbacd101a0c445717dc560b88355320c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cc=function(){return l},l}Cc();Cc().s[0]++;const r_=n=>{Cc().f[0]++;const[e,t]=(Cc().s[1]++,Fn.useState(!1)),r=(Cc().s[2]++,Fn.useRef(zy("fieldset_label_")));Cc().s[3]++;const i=s=>{Cc().f[1]++,Cc().s[4]++,t(s)};return Cc().s[5]++,le.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":r.current,children:[(Cc().b[0][0]++,n.fieldSpec&&(Cc().b[0][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(gI,{label:n.label,onToggleDoc:i,fieldSpec:n.fieldSpec})}))),(Cc().b[1][0]++,!n.fieldSpec&&(Cc().b[1][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:n.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:n.action}),le.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Cc().b[2][0]++,n.fieldSpec&&(Cc().b[2][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Cc().b[3][0]++,""):(Cc().b[3][1]++,"none")},children:le.jsx(yI,{fieldSpec:n.fieldSpec})})))]})};function Ls(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="9ce53c41b0db96df107bee36917be9f6606b9a56",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:15,column:1}},1:{start:{line:6,column:15},end:{line:6,column:20}},2:{start:{line:7,column:27},end:{line:7,column:87}},3:{start:{line:8,column:17},end:{line:8,column:22}},4:{start:{line:9,column:15},end:{line:9,column:23}},5:{start:{line:10,column:23},end:{line:10,column:28}},6:{start:{line:11,column:16},end:{line:11,column:21}},7:{start:{line:12,column:16},end:{line:12,column:21}},8:{start:{line:13,column:19},end:{line:13,column:24}},9:{start:{line:14,column:17},end:{line:14,column:22}},10:{start:{line:16,column:18},end:{line:27,column:1}},11:{start:{line:17,column:20},end:{line:17,column:41}},12:{start:{line:18,column:22},end:{line:18,column:40}},13:{start:{line:20,column:2},end:{line:25,column:3}},14:{start:{line:21,column:4},end:{line:21,column:35}},15:{start:{line:23,column:4},end:{line:23,column:53}},16:{start:{line:24,column:4},end:{line:24,column:22}},17:{start:{line:26,column:2},end:{line:26,column:170}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:9},end:{line:6,column:10}},loc:{start:{line:6,column:15},end:{line:6,column:20}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:7,column:8},end:{line:7,column:9}},loc:{start:{line:7,column:27},end:{line:7,column:87}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:8,column:11},end:{line:8,column:12}},loc:{start:{line:8,column:17},end:{line:8,column:22}},line:8},3:{name:"(anonymous_3)",decl:{start:{line:9,column:9},end:{line:9,column:10}},loc:{start:{line:9,column:15},end:{line:9,column:23}},line:9},4:{name:"(anonymous_4)",decl:{start:{line:10,column:17},end:{line:10,column:18}},loc:{start:{line:10,column:23},end:{line:10,column:28}},line:10},5:{name:"(anonymous_5)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:16},end:{line:11,column:21}},line:11},6:{name:"(anonymous_6)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},7:{name:"(anonymous_7)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:13,column:24}},line:13},8:{name:"(anonymous_8)",decl:{start:{line:14,column:11},end:{line:14,column:12}},loc:{start:{line:14,column:17},end:{line:14,column:22}},line:14},9:{name:"(anonymous_9)",decl:{start:{line:16,column:18},end:{line:16,column:19}},loc:{start:{line:16,column:29},end:{line:27,column:1}},line:16}},branchMap:{0:{loc:{start:{line:7,column:27},end:{line:7,column:87}},type:"cond-expr",locations:[{start:{line:7,column:71},end:{line:7,column:79}},{start:{line:7,column:82},end:{line:7,column:87}}],line:7},1:{loc:{start:{line:20,column:2},end:{line:25,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:25,column:3}},{start:{line:22,column:9},end:{line:25,column:3}}],line:20}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AAqCM;AArCN,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,MAAM,WAAW;AAEnC,QAAM,cAAc,QAAQ,SAAU;AAEtC,MAAI;AACJ,MAAI,aAAa;AACf,gBAAY,YAAY,KAAK;AAAA,EAC/B,OACK;AACH,YAAQ,KAAK,yBAAyB,SAAS;AAC/C,gBAAY;AAAA,EACd;AAEA,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WACpE,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ce53c41b0db96df107bee36917be9f6606b9a56"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ls=function(){return l},l}Ls();const lce=(Ls().s[0]++,{color:()=>(Ls().f[0]++,Ls().s[1]++,ya),enum:({fieldSpec:n})=>(Ls().f[1]++,Ls().s[2]++,Object.keys(n.values).length<=3?(Ls().b[0][0]++,r_):(Ls().b[0][1]++,ya)),boolean:()=>(Ls().f[2]++,Ls().s[3]++,ya),array:()=>(Ls().f[3]++,Ls().s[4]++,r_),resolvedImage:()=>(Ls().f[4]++,Ls().s[5]++,ya),number:()=>(Ls().f[5]++,Ls().s[6]++,ya),string:()=>(Ls().f[6]++,Ls().s[7]++,ya),formatted:()=>(Ls().f[7]++,Ls().s[8]++,ya),padding:()=>(Ls().f[8]++,Ls().s[9]++,ya)});Ls().s[10]++;const Ace=n=>{Ls().f[9]++;const e=(Ls().s[11]++,n.fieldSpec?.type),t=(Ls().s[12]++,lce[e]);let r;return Ls().s[13]++,t?(Ls().b[1][0]++,Ls().s[14]++,r=t(n)):(Ls().b[1][1]++,Ls().s[15]++,console.warn("No such type for '%s'",e),Ls().s[16]++,r=ya),Ls().s[17]++,le.jsx(r,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,children:le.jsx(wy,{...n})})};function Ch(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="1b48667f7b6c71286214e7e9a6764b7991e25bd6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b48667f7b6c71286214e7e9a6764b7991e25bd6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ch=function(){return l},l}Ch();class uce extends Fn.Component{render(){Ch().f[0]++;const e=(Ch().s[0]++,this.props.t);let t,r,i;return Ch().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")?(Ch().b[0][0]++,Ch().s[2]++,i=le.jsx(Qa,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:n_})})}),Ch().s[3]++,t=le.jsx(Qa,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:le.jsx(fH,{})}),Ch().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(Ch().b[1][0]++,Ch().s[5]++,r=le.jsx(Qa,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:le.jsx(pH,{})})):Ch().b[1][1]++,Ch().s[6]++,le.jsxs("div",{children:[i,r,t]})):(Ch().b[0][1]++,Ch().s[7]++,le.jsx("div",{children:i}))}}const cce=(Ch().s[8]++,zs()(uce));function em(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return em=function(){return l},l}em();class hce extends Fn.Component{static defaultProps=(em().s[0]++,{errors:{}});render(){em().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(em().s[1]++,this.props),i=(em().s[2]++,le.jsx(cce,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(em().s[3]++,e[r+"."+t]);return em().s[4]++,le.jsx(Ace,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:w3((em().b[0][0]++,this.props.fieldName||(em().b[0][1]++,""))),action:i})}}function Cd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cd=function(){return l},l}Cd();function aj(n,e){Cd().f[0]++;const t=(Cd().s[0]++,+n),r=(Cd().s[1]++,+e);return Cd().s[2]++,t<r?(Cd().b[0][0]++,Cd().s[3]++,-1):(Cd().b[0][1]++,Cd().s[4]++,t>r?(Cd().b[1][0]++,Cd().s[5]++,1):(Cd().b[1][1]++,Cd().s[6]++,0))}function vp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vp=function(){return l},l}vp();function Tf(n){if(vp().f[0]++,vp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return vp().b[0][0]++,vp().s[1]++,n.default;vp().b[0][1]++;const e=(vp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return vp().s[3]++,vp().b[1][0]++,e[n.type]||(vp().b[1][1]++,"")}function Sy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Sy=function(){return l},l}Sy();class dce extends Fn.Component{render(){Sy().f[0]++;const e=(Sy().s[0]++,this.props.t);return Sy().s[1]++,le.jsx(Qa,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:le.jsx(Yy,{})})}}const lj=(Sy().s[2]++,zs()(dce));function pn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return pn=function(){return l},l}pn();function yF(n,e){pn().f[0]++;let t;return pn().s[0]++,pn().b[1][0]++,n.value&&(pn().b[1][1]++,n.value.stops)?(pn().b[0][0]++,pn().s[1]++,n.value.stops.forEach((r,i)=>{pn().f[1]++,pn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?pn().b[2][1]++:(pn().b[2][0]++,pn().s[3]++,t?pn().b[3][1]++:(pn().b[3][0]++,pn().s[4]++,t={...e}),pn().s[5]++,t[i]=zy("stop-"))})):pn().b[0][1]++,pn().s[6]++,t}class fce extends Fn.Component{state=(pn().s[7]++,{refs:{}});componentDidMount(){pn().f[2]++;const e=(pn().s[8]++,yF(this.props,this.state));pn().s[9]++,e?(pn().b[4][0]++,pn().s[10]++,this.setState({refs:e})):pn().b[4][1]++}static getDerivedStateFromProps(e,t){pn().f[3]++;const r=(pn().s[11]++,yF(e,t));return pn().s[12]++,r?(pn().b[5][0]++,pn().s[13]++,{refs:r}):(pn().b[5][1]++,pn().s[14]++,null)}getFieldFunctionType(e){return pn().f[4]++,pn().s[15]++,e.expression.interpolated?(pn().b[6][0]++,pn().s[16]++,"exponential"):(pn().b[6][1]++,pn().s[17]++,e.type==="number"?(pn().b[7][0]++,pn().s[18]++,"interval"):(pn().b[7][1]++,pn().s[19]++,"categorical"))}getDataFunctionTypes(e){return pn().f[5]++,pn().s[20]++,e.expression.interpolated?(pn().b[8][0]++,pn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(pn().b[8][1]++,pn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){pn().f[6]++;const t=(pn().s[23]++,e.map((i,s)=>(pn().f[7]++,pn().s[24]++,{ref:this.state.refs[s],data:i})).sort((i,s)=>(pn().f[8]++,pn().s[25]++,aj(i.data[0].zoom,s.data[0].zoom)))),r=(pn().s[26]++,{});return pn().s[27]++,t.forEach((i,s)=>{pn().f[9]++,pn().s[28]++,r[s]=i.ref}),pn().s[29]++,this.setState({refs:r}),pn().s[30]++,t.map(i=>(pn().f[10]++,pn().s[31]++,i.data))}onChange=(pn().s[32]++,(e,t)=>{if(pn().f[11]++,pn().s[33]++,t.type==="identity")pn().b[9][0]++,pn().s[34]++,t={type:t.type,property:t.property};else{pn().b[9][1]++;const r=(pn().s[35]++,t.type==="categorical"?(pn().b[10][0]++,""):(pn().b[10][1]++,0));pn().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:r},Tf(this.props.fieldSpec)],[{zoom:10,value:r},Tf(this.props.fieldSpec)]],...t}}pn().s[37]++,this.props.onChange(e,t)});changeStop(e,t,r){pn().f[12]++;const i=(pn().s[38]++,pn().b[11][0]++,this.props.value?.stops.slice(0)||(pn().b[11][1]++,[]));pn().s[39]++,i[e]=[{value:t.value,zoom:t.zoom===void 0?(pn().b[12][0]++,0):(pn().b[12][1]++,t.zoom)},r];const s=(pn().s[40]++,this.orderStopsByZoom(i)),l=(pn().s[41]++,{...this.props.value,stops:s});pn().s[42]++,this.onChange(this.props.fieldName,l)}changeBase(e){pn().f[13]++;const t=(pn().s[43]++,{...this.props.value,base:e});pn().s[44]++,t.base===void 0?(pn().b[13][0]++,pn().s[45]++,delete t.base):pn().b[13][1]++,pn().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){pn().f[14]++,pn().s[47]++,pn().b[15][0]++,e==="interpolate"&&(pn().b[15][1]++,this.props.onChangeToZoomFunction)?(pn().b[14][0]++,pn().s[48]++,this.props.onChangeToZoomFunction()):(pn().b[14][1]++,pn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){pn().f[15]++,pn().s[50]++,t?(pn().b[16][0]++,pn().s[51]++,this.props.value[e]=t):(pn().b[16][1]++,pn().s[52]++,delete this.props.value[e]),pn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){pn().f[16]++;const e=(pn().s[54]++,this.props.t);pn().s[55]++,typeof this.props.value?.type>"u"?(pn().b[17][0]++,pn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):pn().b[17][1]++;let t;return pn().s[57]++,this.props.value?.stops?(pn().b[18][0]++,pn().s[58]++,t=this.props.value.stops.map((r,i)=>{pn().f[17]++;const s=(pn().s[59]++,typeof r[0]=="object"?(pn().b[19][0]++,r[0].zoom):(pn().b[19][1]++,void 0)),l=(pn().s[60]++,this.state.refs[i]),o=(pn().s[61]++,typeof r[0]=="object"?(pn().b[20][0]++,r[0].value):(pn().b[20][1]++,r[0])),f=(pn().s[62]++,r[1]),C=(pn().s[63]++,le.jsx(lj,{onClick:this.props.onDeleteStop?.bind(this,i)})),M=(pn().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:o,onChange:R=>(pn().f[18]++,pn().s[65]++,this.changeStop(i,{zoom:s,value:R},f))});let B;pn().s[66]++,this.props.value?.type==="categorical"?(pn().b[21][0]++,pn().s[67]++,B=le.jsx(Pp,{...M})):(pn().b[21][1]++,pn().s[68]++,B=le.jsx(Hm,{...M}));let D=(pn().s[69]++,null);return pn().s[70]++,s!==void 0?(pn().b[22][0]++,pn().s[71]++,D=le.jsx("div",{children:le.jsx(Hm,{"aria-label":"Zoom",value:s,onChange:R=>(pn().f[19]++,pn().s[72]++,this.changeStop(i,{zoom:R,value:o},f)),min:0,max:22})})):pn().b[22][1]++,pn().s[73]++,le.jsxs("tr",{children:[le.jsx("td",{children:D}),le.jsx("td",{children:B}),le.jsx("td",{children:le.jsx(wy,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:f,onChange:(R,U)=>(pn().f[20]++,pn().s[74]++,this.changeStop(i,{zoom:s,value:o},U))})}),le.jsx("td",{children:C})]},l)})):pn().b[18][1]++,pn().s[75]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:w3(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(ya,{label:e("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(i1,{value:this.props.value.type,onChange:r=>(pn().f[21]++,pn().s[76]++,this.changeDataType(r)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(pn().b[23][0]++,this.props.value?.type!=="identity"&&(pn().b[23][1]++,le.jsx(ya,{label:e("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(wy,{fieldName:"base",fieldSpec:ts.function.base,value:this.props.value?.base,onChange:(r,i)=>(pn().f[22]++,pn().s[77]++,this.changeBase(i))})})},"base"))),le.jsx(ya,{label:"Property",children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Pp,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:r=>(pn().f[23]++,pn().s[78]++,this.changeDataProperty("property",r))})})},"property"),(pn().b[24][0]++,t&&(pn().b[24][1]++,le.jsx(ya,{label:e("Default"),children:le.jsx(wy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(r,i)=>(pn().f[24]++,pn().s[79]++,this.changeDataProperty("default",i))})},"default"))),(pn().b[25][0]++,t&&(pn().b[25][1]++,le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table",children:[le.jsx("caption",{children:e("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:e("Zoom")}),le.jsx("th",{children:e("Input value")}),le.jsx("th",{rowSpan:2,children:e("Output value")})]})}),le.jsx("tbody",{children:t})]})}))),le.jsxs("div",{className:"maputnik-toolbox",children:[(pn().b[26][0]++,t&&(pn().b[26][1]++,le.jsxs(Qa,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:LI})})," ",e("Add stop")]}))),le.jsxs(Qa,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:n_})})," ",e("Convert to expression")]})]})]})]})})}}const pce=(pn().s[80]++,zs()(fce));function gr(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gr=function(){return l},l}gr();function vF(n,e){gr().f[0]++;let t=(gr().s[0]++,{});return gr().s[1]++,gr().b[1][0]++,n.value&&(gr().b[1][1]++,n.value.stops)?(gr().b[0][0]++,gr().s[2]++,n.value.stops.forEach((r,i)=>{gr().f[1]++,gr().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(gr().b[2][0]++,gr().s[4]++,t?gr().b[3][1]++:(gr().b[3][0]++,gr().s[5]++,t={...e}),gr().s[6]++,t[i]=zy("stop-")):(gr().b[2][1]++,gr().s[7]++,t[i]=e.refs[i])})):gr().b[0][1]++,gr().s[8]++,t}class mce extends Fn.Component{static defaultProps=(gr().s[9]++,{errors:{}});state=(gr().s[10]++,{refs:{}});componentDidMount(){gr().f[2]++;const e=(gr().s[11]++,vF(this.props,this.state));gr().s[12]++,e?(gr().b[4][0]++,gr().s[13]++,this.setState({refs:e})):gr().b[4][1]++}static getDerivedStateFromProps(e,t){gr().f[3]++;const r=(gr().s[14]++,vF(e,t));return gr().s[15]++,r?(gr().b[5][0]++,gr().s[16]++,{refs:r}):(gr().b[5][1]++,gr().s[17]++,null)}orderStopsByZoom(e){gr().f[4]++;const t=(gr().s[18]++,e.map((i,s)=>(gr().f[5]++,gr().s[19]++,{ref:this.state.refs[s],data:i})).sort((i,s)=>(gr().f[6]++,gr().s[20]++,aj(i.data[0],s.data[0])))),r=(gr().s[21]++,{});return gr().s[22]++,t.forEach((i,s)=>{gr().f[7]++,gr().s[23]++,r[s]=i.ref}),gr().s[24]++,this.setState({refs:r}),gr().s[25]++,t.map(i=>(gr().f[8]++,gr().s[26]++,i.data))}changeZoomStop(e,t,r){gr().f[9]++;const i=(gr().s[27]++,this.props.value.stops.slice(0));gr().s[28]++,i[e]=[t,r];const s=(gr().s[29]++,this.orderStopsByZoom(i)),l=(gr().s[30]++,{...this.props.value,stops:s});gr().s[31]++,this.props.onChange(this.props.fieldName,l)}changeBase(e){gr().f[10]++;const t=(gr().s[32]++,{...this.props.value,base:e});gr().s[33]++,t.base===void 0?(gr().b[6][0]++,gr().s[34]++,delete t.base):gr().b[6][1]++,gr().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(gr().s[36]++,e=>{gr().f[11]++,gr().s[37]++,gr().b[8][0]++,e!=="interpolate"&&(gr().b[8][1]++,this.props.onChangeToDataFunction)?(gr().b[7][0]++,gr().s[38]++,this.props.onChangeToDataFunction(e)):gr().b[7][1]++});render(){gr().f[12]++;const e=(gr().s[39]++,this.props.t),t=(gr().s[40]++,this.props.value?.stops.map((r,i)=>{gr().f[13]++;const s=(gr().s[41]++,r[0]),l=(gr().s[42]++,r[1]),o=(gr().s[43]++,le.jsx(lj,{onClick:this.props.onDeleteStop?.bind(this,i)}));return gr().s[44]++,le.jsxs("tr",{children:[le.jsx("td",{children:le.jsx(Hm,{"aria-label":e("Zoom"),value:s,onChange:f=>(gr().f[14]++,gr().s[45]++,this.changeZoomStop(i,f,l)),min:0,max:22})}),le.jsx("td",{children:le.jsx(wy,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:l,onChange:(f,C)=>(gr().f[15]++,gr().s[46]++,this.changeZoomStop(i,s,C))})}),le.jsx("td",{children:o})]},`${r[0]}-${r[1]}`)}));return gr().s[47]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:w3(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(ya,{label:e("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(i1,{value:"interpolate",onChange:r=>(gr().f[16]++,gr().s[48]++,this.changeDataType(r)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),le.jsx(ya,{label:e("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(wy,{fieldName:"base",fieldSpec:ts.function.base,value:this.props.value?.base,onChange:(r,i)=>(gr().f[17]++,gr().s[49]++,this.changeBase(i))})})}),le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[le.jsx("caption",{children:e("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:e("Zoom")}),le.jsx("th",{rowSpan:2,children:e("Output value")})]})}),le.jsx("tbody",{children:t})]})}),le.jsxs("div",{className:"maputnik-toolbox",children:[le.jsxs(Qa,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:LI})})," ",e("Add stop")]}),le.jsxs(Qa,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:n_})})," ",e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return gr().f[18]++,gr().s[50]++,e["property-type"]==="data-driven"?(gr().b[9][0]++,gr().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(gr().b[9][1]++,gr().s[52]++,["interpolate"])}}const gce=(gr().s[53]++,zs()(mce));function zt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="5033c253416f295119927ac94f2be1c5d08ca915",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:56,column:22},end:{line:281,column:1}},25:{start:{line:57,column:34},end:{line:59,column:3}},26:{start:{line:60,column:36},end:{line:60,column:57}},27:{start:{line:61,column:2},end:{line:65,column:48}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:61}},30:{start:{line:66,column:31},end:{line:74,column:3}},31:{start:{line:67,column:4},end:{line:69,column:5}},32:{start:{line:68,column:6},end:{line:68,column:27}},33:{start:{line:70,column:4},end:{line:72,column:5}},34:{start:{line:71,column:6},end:{line:71,column:24}},35:{start:{line:73,column:4},end:{line:73,column:25}},36:{start:{line:75,column:18},end:{line:91,column:3}},37:{start:{line:76,column:18},end:{line:76,column:44}},38:{start:{line:77,column:21},end:{line:77,column:44}},39:{start:{line:78,column:4},end:{line:85,column:5}},40:{start:{line:79,column:6},end:{line:82,column:9}},41:{start:{line:84,column:6},end:{line:84,column:49}},42:{start:{line:86,column:25},end:{line:89,column:5}},43:{start:{line:90,column:4},end:{line:90,column:50}},44:{start:{line:92,column:27},end:{line:96,column:3}},45:{start:{line:93,column:37},end:{line:93,column:42}},46:{start:{line:94,column:4},end:{line:94,column:49}},47:{start:{line:95,column:4},end:{line:95,column:25}},48:{start:{line:97,column:21},end:{line:108,column:3}},49:{start:{line:98,column:18},end:{line:98,column:44}},50:{start:{line:99,column:4},end:{line:99,column:29}},51:{start:{line:100,column:23},end:{line:103,column:5}},52:{start:{line:104,column:4},end:{line:106,column:5}},53:{start:{line:105,column:6},end:{line:105,column:33}},54:{start:{line:107,column:4},end:{line:107,column:50}},55:{start:{line:109,column:27},end:{line:138,column:3}},56:{start:{line:110,column:22},end:{line:110,column:27}},57:{start:{line:112,column:4},end:{line:136,column:5}},58:{start:{line:113,column:6},end:{line:128,column:7}},59:{start:{line:114,column:8},end:{line:119,column:10}},60:{start:{line:117,column:12},end:{line:117,column:83}},61:{start:{line:121,column:8},end:{line:127,column:10}},62:{start:{line:130,column:6},end:{line:135,column:8}},63:{start:{line:137,column:4},end:{line:137,column:46}},64:{start:{line:139,column:25},end:{line:151,column:3}},65:{start:{line:140,column:33},end:{line:140,column:38}},66:{start:{line:141,column:4},end:{line:150,column:5}},67:{start:{line:142,column:6},end:{line:145,column:9}},68:{start:{line:146,column:6},end:{line:146,column:27}},69:{start:{line:147,column:11},end:{line:150,column:5}},70:{start:{line:148,column:6},end:{line:148,column:42}},71:{start:{line:149,column:6},end:{line:149,column:27}},72:{start:{line:152,column:18},end:{line:155,column:3}},73:{start:{line:153,column:33},end:{line:153,column:38}},74:{start:{line:154,column:4},end:{line:154,column:140}},75:{start:{line:156,column:25},end:{line:167,column:3}},76:{start:{line:157,column:33},end:{line:157,column:38}},77:{start:{line:159,column:4},end:{line:165,column:5}},78:{start:{line:160,column:6},end:{line:160,column:67}},79:{start:{line:161,column:11},end:{line:165,column:5}},80:{start:{line:162,column:6},end:{line:162,column:43}},81:{start:{line:164,column:6},end:{line:164,column:65}},82:{start:{line:166,column:4},end:{line:166,column:48}},83:{start:{line:168,column:27},end:{line:206,column:3}},84:{start:{line:169,column:25},end:{line:169,column:62}},85:{start:{line:170,column:22},end:{line:170,column:61}},86:{start:{line:171,column:22},end:{line:171,column:27}},87:{start:{line:173,column:4},end:{line:204,column:5}},88:{start:{line:174,column:6},end:{line:193,column:7}},89:{start:{line:175,column:8},end:{line:182,column:10}},90:{start:{line:180,column:12},end:{line:180,column:106}},91:{start:{line:184,column:8},end:{line:192,column:10}},92:{start:{line:195,column:6},end:{line:203,column:8}},93:{start:{line:205,column:4},end:{line:205,column:46}},94:{start:{line:207,column:24},end:{line:209,column:3}},95:{start:{line:208,column:4},end:{line:208,column:23}},96:{start:{line:210,column:26},end:{line:212,column:3}},97:{start:{line:211,column:4},end:{line:211,column:24}},98:{start:{line:213,column:20},end:{line:213,column:120}},99:{start:{line:215,column:2},end:{line:279,column:3}},100:{start:{line:216,column:4},end:{line:231,column:6}},101:{start:{line:232,column:9},end:{line:279,column:3}},102:{start:{line:233,column:4},end:{line:247,column:6}},103:{start:{line:248,column:9},end:{line:279,column:3}},104:{start:{line:249,column:4},end:{line:263,column:6}},105:{start:{line:265,column:4},end:{line:278,column:6}},106:{start:{line:280,column:2},end:{line:280,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:56,column:22},end:{line:56,column:23}},loc:{start:{line:56,column:33},end:{line:281,column:1}},line:56},12:{name:"(anonymous_12)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:65,column:3}},line:61},13:{name:"(anonymous_13)",decl:{start:{line:66,column:31},end:{line:66,column:32}},loc:{start:{line:66,column:46},end:{line:74,column:3}},line:66},14:{name:"(anonymous_14)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:24},end:{line:91,column:3}},line:75},15:{name:"(anonymous_15)",decl:{start:{line:92,column:27},end:{line:92,column:28}},loc:{start:{line:92,column:33},end:{line:96,column:3}},line:92},16:{name:"(anonymous_16)",decl:{start:{line:97,column:21},end:{line:97,column:22}},loc:{start:{line:97,column:34},end:{line:108,column:3}},line:97},17:{name:"(anonymous_17)",decl:{start:{line:109,column:27},end:{line:109,column:28}},loc:{start:{line:109,column:33},end:{line:138,column:3}},line:109},18:{name:"(anonymous_18)",decl:{start:{line:116,column:33},end:{line:116,column:34}},loc:{start:{line:116,column:43},end:{line:118,column:11}},line:116},19:{name:"(anonymous_19)",decl:{start:{line:139,column:25},end:{line:139,column:26}},loc:{start:{line:139,column:31},end:{line:151,column:3}},line:139},20:{name:"(anonymous_20)",decl:{start:{line:152,column:18},end:{line:152,column:19}},loc:{start:{line:152,column:24},end:{line:155,column:3}},line:152},21:{name:"(anonymous_21)",decl:{start:{line:156,column:25},end:{line:156,column:26}},loc:{start:{line:156,column:31},end:{line:167,column:3}},line:156},22:{name:"(anonymous_22)",decl:{start:{line:168,column:27},end:{line:168,column:28}},loc:{start:{line:168,column:33},end:{line:206,column:3}},line:168},23:{name:"(anonymous_23)",decl:{start:{line:179,column:33},end:{line:179,column:34}},loc:{start:{line:179,column:43},end:{line:181,column:11}},line:179},24:{name:"(anonymous_24)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:30},end:{line:209,column:3}},line:207},25:{name:"(anonymous_25)",decl:{start:{line:210,column:26},end:{line:210,column:27}},loc:{start:{line:210,column:32},end:{line:212,column:3}},line:210}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:67,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:67,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67},18:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},19:{loc:{start:{line:78,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:85,column:5}},{start:{line:83,column:11},end:{line:85,column:5}}],line:78},20:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},21:{loc:{start:{line:112,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:136,column:5}},{start:{line:129,column:11},end:{line:136,column:5}}],line:112},22:{loc:{start:{line:113,column:6},end:{line:128,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:128,column:7}},{start:{line:120,column:13},end:{line:128,column:7}}],line:113},23:{loc:{start:{line:117,column:34},end:{line:117,column:81}},type:"binary-expr",locations:[{start:{line:117,column:34},end:{line:117,column:41}},{start:{line:117,column:45},end:{line:117,column:81}}],line:117},24:{loc:{start:{line:132,column:14},end:{line:132,column:59}},type:"binary-expr",locations:[{start:{line:132,column:14},end:{line:132,column:19}},{start:{line:132,column:23},end:{line:132,column:59}}],line:132},25:{loc:{start:{line:133,column:15},end:{line:133,column:60}},type:"binary-expr",locations:[{start:{line:133,column:15},end:{line:133,column:20}},{start:{line:133,column:24},end:{line:133,column:60}}],line:133},26:{loc:{start:{line:141,column:4},end:{line:150,column:5}},type:"if",locations:[{start:{line:141,column:4},end:{line:150,column:5}},{start:{line:147,column:11},end:{line:150,column:5}}],line:141},27:{loc:{start:{line:147,column:11},end:{line:150,column:5}},type:"if",locations:[{start:{line:147,column:11},end:{line:150,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},28:{loc:{start:{line:154,column:11},end:{line:154,column:139}},type:"binary-expr",locations:[{start:{line:154,column:11},end:{line:154,column:33}},{start:{line:154,column:37},end:{line:154,column:63}},{start:{line:154,column:67},end:{line:154,column:85}},{start:{line:154,column:89},end:{line:154,column:109}},{start:{line:154,column:113},end:{line:154,column:139}}],line:154},29:{loc:{start:{line:159,column:4},end:{line:165,column:5}},type:"if",locations:[{start:{line:159,column:4},end:{line:165,column:5}},{start:{line:161,column:11},end:{line:165,column:5}}],line:159},30:{loc:{start:{line:159,column:8},end:{line:159,column:53}},type:"binary-expr",locations:[{start:{line:159,column:8},end:{line:159,column:33}},{start:{line:159,column:37},end:{line:159,column:53}}],line:159},31:{loc:{start:{line:161,column:11},end:{line:165,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:165,column:5}},{start:{line:163,column:11},end:{line:165,column:5}}],line:161},32:{loc:{start:{line:164,column:31},end:{line:164,column:63}},type:"binary-expr",locations:[{start:{line:164,column:31},end:{line:164,column:36}},{start:{line:164,column:40},end:{line:164,column:63}}],line:164},33:{loc:{start:{line:170,column:22},end:{line:170,column:61}},type:"cond-expr",locations:[{start:{line:170,column:55},end:{line:170,column:57}},{start:{line:170,column:60},end:{line:170,column:61}}],line:170},34:{loc:{start:{line:173,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:204,column:5}},{start:{line:194,column:11},end:{line:204,column:5}}],line:173},35:{loc:{start:{line:174,column:6},end:{line:193,column:7}},type:"if",locations:[{start:{line:174,column:6},end:{line:193,column:7}},{start:{line:183,column:13},end:{line:193,column:7}}],line:174},36:{loc:{start:{line:180,column:57},end:{line:180,column:104}},type:"binary-expr",locations:[{start:{line:180,column:57},end:{line:180,column:64}},{start:{line:180,column:68},end:{line:180,column:104}}],line:180},37:{loc:{start:{line:200,column:42},end:{line:200,column:93}},type:"binary-expr",locations:[{start:{line:200,column:42},end:{line:200,column:53}},{start:{line:200,column:57},end:{line:200,column:93}}],line:200},38:{loc:{start:{line:201,column:43},end:{line:201,column:94}},type:"binary-expr",locations:[{start:{line:201,column:43},end:{line:201,column:54}},{start:{line:201,column:58},end:{line:201,column:94}}],line:201},39:{loc:{start:{line:213,column:20},end:{line:213,column:120}},type:"cond-expr",locations:[{start:{line:213,column:62},end:{line:213,column:89}},{start:{line:213,column:92},end:{line:213,column:120}}],line:213},40:{loc:{start:{line:215,column:2},end:{line:279,column:3}},type:"if",locations:[{start:{line:215,column:2},end:{line:279,column:3}},{start:{line:232,column:9},end:{line:279,column:3}}],line:215},41:{loc:{start:{line:232,column:9},end:{line:279,column:3}},type:"if",locations:[{start:{line:232,column:9},end:{line:279,column:3}},{start:{line:248,column:9},end:{line:279,column:3}}],line:232},42:{loc:{start:{line:248,column:9},end:{line:279,column:3}},type:"if",locations:[{start:{line:248,column:9},end:{line:279,column:3}},{start:{line:264,column:9},end:{line:279,column:3}}],line:248}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAsTM;AAtTN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5033c253416f295119927ac94f2be1c5d08ca915"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return zt=function(){return l},l}zt();function CF(n){return zt().f[0]++,zt().s[0]++,zt().b[0][0]++,Array.isArray(n)&&(zt().b[0][1]++,n.length===2)&&(zt().b[0][2]++,n[0]==="literal")}function _F(n){return zt().f[1]++,zt().s[1]++,zt().b[1][0]++,Array.isArray(n)&&(zt().b[1][1]++,n.length===2)&&(zt().b[1][2]++,n[0]==="get")}function yce(n){return zt().f[2]++,zt().s[2]++,zt().b[2][0]++,typeof n=="object"&&(zt().b[2][1]++,n.stops)&&(zt().b[2][2]++,typeof n.property>"u")&&(zt().b[2][3]++,Array.isArray(n.stops))&&(zt().b[2][4]++,n.stops.length>1)&&(zt().b[2][5]++,n.stops.every(e=>(zt().f[3]++,zt().s[3]++,zt().b[3][0]++,Array.isArray(e)&&(zt().b[3][1]++,e.length===2))))}function Aj(n){return zt().f[4]++,zt().s[4]++,zt().b[4][0]++,typeof n=="object"&&(zt().b[4][1]++,n.type==="identity")&&(zt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function vce(n){return zt().f[5]++,zt().s[5]++,zt().b[5][0]++,typeof n=="object"&&(zt().b[5][1]++,n.stops)&&(zt().b[5][2]++,typeof n.property<"u")&&(zt().b[5][3]++,n.stops.length>1)&&(zt().b[5][4]++,Array.isArray(n.stops))&&(zt().b[5][5]++,n.stops.every(e=>(zt().f[6]++,zt().s[6]++,zt().b[6][0]++,Array.isArray(e)&&(zt().b[6][1]++,e.length===2)&&(zt().b[6][2]++,typeof e[0]=="object"))))}function Cce(n){return zt().f[7]++,zt().s[7]++,zt().b[7][0]++,Aj(n)||(zt().b[7][1]++,vce(n))}function s8(n){zt().f[8]++;const e=(zt().s[8]++,["string","boolean","number"]);return zt().s[9]++,e.includes(typeof n)}function _ce(n){return zt().f[9]++,zt().s[10]++,Array.isArray(n)?(zt().b[8][0]++,zt().s[11]++,n.every(s8)):(zt().b[8][1]++,zt().s[12]++,!1)}function bF(n,e=(zt().b[9][0]++,{})){return zt().f[10]++,zt().s[13]++,n===void 0?(zt().b[10][0]++,zt().s[14]++,"value"):(zt().b[10][1]++,zt().s[15]++,s8(n)?(zt().b[11][0]++,zt().s[16]++,"value"):(zt().b[11][1]++,zt().s[17]++,zt().b[13][0]++,e.type==="array"&&(zt().b[13][1]++,_ce(n))?(zt().b[12][0]++,zt().s[18]++,"value"):(zt().b[12][1]++,zt().s[19]++,yce(n)?(zt().b[14][0]++,zt().s[20]++,"zoom_function"):(zt().b[14][1]++,zt().s[21]++,Cce(n)?(zt().b[15][0]++,zt().s[22]++,"data_function"):(zt().b[15][1]++,zt().s[23]++,"expression")))))}zt().s[24]++;const bce=n=>{zt().f[11]++;const[e,t]=(zt().s[25]++,Fn.useState(bF(n.value,n.fieldSpec))),[r,i]=(zt().s[26]++,Fn.useState(!1));zt().s[27]++,Fn.useEffect(()=>{zt().f[12]++,zt().s[28]++,r?zt().b[16][1]++:(zt().b[16][0]++,zt().s[29]++,t(bF(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,r]),zt().s[30]++;const s=$=>(zt().f[13]++,zt().s[31]++,$.expression.interpolated?(zt().b[17][0]++,zt().s[32]++,"exponential"):(zt().b[17][1]++,zt().s[33]++,$.type==="number"?(zt().b[18][0]++,zt().s[34]++,"interval"):(zt().b[18][1]++,zt().s[35]++,"categorical")));zt().s[36]++;const l=()=>{zt().f[14]++;const $=(zt().s[37]++,n.value.stops.slice(0)),oe=(zt().s[38]++,$[$.length-1]);zt().s[39]++,typeof oe[0]=="object"?(zt().b[19][0]++,zt().s[40]++,$.push([{zoom:oe[0].zoom+1,value:oe[0].value},oe[1]])):(zt().b[19][1]++,zt().s[41]++,$.push([oe[0]+1,oe[1]]));const te=(zt().s[42]++,{...n.value,stops:$});zt().s[43]++,n.onChange(n.fieldName,te)};zt().s[44]++;const o=()=>{zt().f[15]++;const{fieldSpec:$,fieldName:oe}=(zt().s[45]++,n);zt().s[46]++,n.onChange(oe,$.default),zt().s[47]++,t("value")};zt().s[48]++;const f=$=>{zt().f[16]++;const oe=(zt().s[49]++,n.value.stops.slice(0));zt().s[50]++,oe.splice($,1);let te=(zt().s[51]++,{...n.value,stops:oe});zt().s[52]++,oe.length===1?(zt().b[20][0]++,zt().s[53]++,te=oe[0][1]):zt().b[20][1]++,zt().s[54]++,n.onChange(n.fieldName,te)};zt().s[55]++;const C=()=>{zt().f[17]++;const{value:$}=(zt().s[56]++,n);let oe;zt().s[57]++,typeof $=="object"?(zt().b[21][0]++,zt().s[58]++,$.stops?(zt().b[22][0]++,zt().s[59]++,oe={base:$.base,stops:$.stops.map(te=>(zt().f[18]++,zt().s[60]++,[te[0].zoom,(zt().b[23][0]++,te[1]||(zt().b[23][1]++,Tf(n.fieldSpec)))]))}):(zt().b[22][1]++,zt().s[61]++,oe={base:$.base,stops:[[6,Tf(n.fieldSpec)],[10,Tf(n.fieldSpec)]]})):(zt().b[21][1]++,zt().s[62]++,oe={stops:[[6,(zt().b[24][0]++,$||(zt().b[24][1]++,Tf(n.fieldSpec)))],[10,(zt().b[25][0]++,$||(zt().b[25][1]++,Tf(n.fieldSpec)))]]}),zt().s[63]++,n.onChange(n.fieldName,oe)};zt().s[64]++;const M=()=>{zt().f[19]++;const{value:$,fieldName:oe}=(zt().s[65]++,n);zt().s[66]++,_F($)?(zt().b[26][0]++,zt().s[67]++,n.onChange(oe,{type:"identity",property:$[1]}),zt().s[68]++,t("value")):(zt().b[26][1]++,zt().s[69]++,CF($)?(zt().b[27][0]++,zt().s[70]++,n.onChange(oe,$[1]),zt().s[71]++,t("value")):zt().b[27][1]++)};zt().s[72]++;const B=()=>{zt().f[20]++;const{value:$,fieldSpec:oe}=(zt().s[73]++,n);return zt().s[74]++,zt().b[28][0]++,_F($)||(zt().b[28][1]++,CF($))||(zt().b[28][2]++,s8($))||(zt().b[28][3]++,Array.isArray($)&&(zt().b[28][4]++,oe.type==="array"))};zt().s[75]++;const D=()=>{zt().f[21]++;const{value:$,fieldSpec:oe}=(zt().s[76]++,n);let te;zt().s[77]++,zt().b[30][0]++,typeof $=="object"&&(zt().b[30][1]++,"stops"in $)?(zt().b[29][0]++,zt().s[78]++,te=bV.convertFunction($,oe)):(zt().b[29][1]++,zt().s[79]++,Aj($)?(zt().b[31][0]++,zt().s[80]++,te=["get",$.property]):(zt().b[31][1]++,zt().s[81]++,te=["literal",(zt().b[32][0]++,$||(zt().b[32][1]++,n.fieldSpec.default))])),zt().s[82]++,n.onChange(n.fieldName,te)};zt().s[83]++;const R=()=>{zt().f[22]++;const $=(zt().s[84]++,s(n.fieldSpec)),oe=(zt().s[85]++,$==="categorical"?(zt().b[33][0]++,""):(zt().b[33][1]++,0)),{value:te}=(zt().s[86]++,n);let H;zt().s[87]++,typeof te=="object"?(zt().b[34][0]++,zt().s[88]++,te.stops?(zt().b[35][0]++,zt().s[89]++,H={property:"",type:$,base:te.base,stops:te.stops.map(re=>(zt().f[23]++,zt().s[90]++,[{zoom:re[0],value:oe},(zt().b[36][0]++,re[1]||(zt().b[36][1]++,Tf(n.fieldSpec)))]))}):(zt().b[35][1]++,zt().s[91]++,H={property:"",type:$,base:te.base,stops:[[{zoom:6,value:oe},Tf(n.fieldSpec)],[{zoom:10,value:oe},Tf(n.fieldSpec)]]})):(zt().b[34][1]++,zt().s[92]++,H={property:"",type:$,base:te.base,stops:[[{zoom:6,value:oe},(zt().b[37][0]++,n.value||(zt().b[37][1]++,Tf(n.fieldSpec)))],[{zoom:10,value:oe},(zt().b[38][0]++,n.value||(zt().b[38][1]++,Tf(n.fieldSpec)))]]}),zt().s[93]++,n.onChange(n.fieldName,H)};zt().s[94]++;const U=()=>{zt().f[24]++,zt().s[95]++,i(!0)};zt().s[96]++;const G=()=>{zt().f[25]++,zt().s[97]++,i(!1)},W=(zt().s[98]++,n.fieldSpec.default===n.value?(zt().b[39][0]++,"maputnik-default-property"):(zt().b[39][1]++,"maputnik-modified-property"));let J;return zt().s[99]++,e==="expression"?(zt().b[40][0]++,zt().s[100]++,J=le.jsx(_G,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:B,onUndo:M,onDelete:o,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:U,onBlur:G})):(zt().b[40][1]++,zt().s[101]++,e==="zoom_function"?(zt().b[41][0]++,zt().s[102]++,J=le.jsx(gce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:f,onAddStop:l,onChangeToDataFunction:R,onExpressionClick:D})):(zt().b[41][1]++,zt().s[103]++,e==="data_function"?(zt().b[42][0]++,zt().s[104]++,J=le.jsx(pce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:f,onAddStop:l,onChangeToZoomFunction:C,onExpressionClick:D})):(zt().b[42][1]++,zt().s[105]++,J=le.jsx(hce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:C,onDataClick:R,onExpressionClick:D})))),zt().s[106]++,le.jsx("div",{className:W,"data-wd-key":"spec-field-container:"+n.fieldName,children:J})};function uo(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return uo=function(){return l},l}uo();const xce=(uo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Mce(n,e,t){uo().f[0]++;const r=(uo().s[1]++,uj(n,e,t)),i=(uo().s[2]++,n[r+"_"+e]),s=(uo().s[3]++,i[t]);return uo().s[4]++,xce.indexOf(t)>=0?(uo().b[0][0]++,uo().s[5]++,{...s,values:n.$root.sprite.values}):(uo().b[0][1]++,uo().s[6]++,t==="text-font"?(uo().b[1][0]++,uo().s[7]++,{...s,values:n.$root.glyphs.values}):(uo().b[1][1]++,uo().s[8]++,s))}function uj(n,e,t){uo().f[1]++;const r=(uo().s[9]++,uo().b[2][0]++,n["paint_"+e]||(uo().b[2][1]++,{}));return uo().s[10]++,t in r?(uo().b[3][0]++,uo().s[11]++,"paint"):(uo().b[3][1]++,uo().s[12]++,"layout")}class wce extends Fn.Component{onPropertyChange=(uo().s[13]++,(e,t)=>{uo().f[2]++;const r=(uo().s[14]++,uj(this.props.spec,this.props.layer.type,e));uo().s[15]++,this.props.onChange(r,e,t)});render(){uo().f[3]++;const{errors:e}=(uo().s[16]++,this.props),t=(uo().s[17]++,this.props.groupFields.map(r=>{uo().f[4]++;const i=(uo().s[18]++,Mce(this.props.spec,this.props.layer.type,r)),s=(uo().s[19]++,uo().b[4][0]++,this.props.layer.paint||(uo().b[4][1]++,{})),l=(uo().s[20]++,uo().b[5][0]++,this.props.layer.layout||(uo().b[5][1]++,{})),o=(uo().s[21]++,r in s?(uo().b[6][0]++,s[r]):(uo().b[6][1]++,l[r])),f=(uo().s[22]++,r in s?(uo().b[7][0]++,"paint"):(uo().b[7][1]++,"layout"));return uo().s[23]++,le.jsx(bce,{errors:e,onChange:this.onPropertyChange,fieldName:r,value:o,fieldType:f,fieldSpec:i},r)}));return uo().s[24]++,le.jsx("div",{className:"maputnik-property-group",children:t})}}var mE,xF;function Sce(){return xF||(xF=1,mE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var l in r)t.d(s,l,(function(o){return r[o]}).bind(null,l));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=gm()},function(n,e){n.exports=Ya()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(U){for(var G,W=1,J=arguments.length;W<J;W++)for(var $ in G=arguments[W])Object.prototype.hasOwnProperty.call(G,$)&&(U[$]=G[$]);return U}).apply(this,arguments)},l=function(U,G){var W={};for(var J in U)Object.prototype.hasOwnProperty.call(U,J)&&G.indexOf(J)<0&&(W[J]=U[J]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(J=Object.getOwnPropertySymbols(U);$<J.length;$++)G.indexOf(J[$])<0&&Object.prototype.propertyIsEnumerable.call(U,J[$])&&(W[J[$]]=U[J[$]])}return W},o=0,f=r.forwardRef(function(U,G){var W=U.title,J=W===void 0?null:W,$=U.description,oe=$===void 0?null:$,te=U.size,H=te===void 0?null:te,re=U.color,j=re===void 0?"currentColor":re,ue=U.horizontal,me=ue===void 0?null:ue,ge=U.vertical,we=ge===void 0?null:ge,Ee=U.rotate,xe=Ee===void 0?null:Ee,We=U.spin,be=We===void 0?null:We,rt=U.style,Ct=rt===void 0?{}:rt,at=U.children,Je=l(U,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var ze,Te=be!==null&&be,He=r.Children.map(at,function(Bt){var Tt=Bt;Te!==!0&&(Te=(be===null?Tt.props.spin:be)===!0);var Le=Tt.props.size;typeof H=="number"&&typeof Tt.props.size=="number"&&(Le=Tt.props.size/H);var Pe={size:Le,color:j===null?Tt.props.color:j,horizontal:me===null?Tt.props.horizontal:me,vertical:we===null?Tt.props.vertical:we,rotate:xe===null?Tt.props.rotate:xe,spin:be===null?Tt.props.spin:be,inStack:!0};return r.cloneElement(Tt,Pe)});H!==null&&(Ct.width=typeof H=="string"?H:1.5*H+"rem");var pt,kt="stack_labelledby_"+o,ft="stack_describedby_"+o;if(J)ze=oe?kt+" "+ft:kt;else if(pt="presentation",oe)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:G,viewBox:"0 0 24 24",style:Ct,role:pt,"aria-labelledby":ze},Je),J&&r.createElement("title",{id:kt},J),oe&&r.createElement("desc",{id:ft},oe),Te&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),He)});f.displayName="Stack",f.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},f.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var C=f;t.d(e,"Icon",function(){return R}),t.d(e,"Stack",function(){return C});var M=function(){return(M=Object.assign||function(U){for(var G,W=1,J=arguments.length;W<J;W++)for(var $ in G=arguments[W])Object.prototype.hasOwnProperty.call(G,$)&&(U[$]=G[$]);return U}).apply(this,arguments)},B=function(U,G){var W={};for(var J in U)Object.prototype.hasOwnProperty.call(U,J)&&G.indexOf(J)<0&&(W[J]=U[J]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(J=Object.getOwnPropertySymbols(U);$<J.length;$++)G.indexOf(J[$])<0&&Object.prototype.propertyIsEnumerable.call(U,J[$])&&(W[J[$]]=U[J[$]])}return W},D=0,R=r.forwardRef(function(U,G){var W=U.path,J=U.id,$=J===void 0?++D:J,oe=U.title,te=oe===void 0?null:oe,H=U.description,re=H===void 0?null:H,j=U.size,ue=j===void 0?null:j,me=U.color,ge=me===void 0?"currentColor":me,we=U.horizontal,Ee=we!==void 0&&we,xe=U.vertical,We=xe!==void 0&&xe,be=U.rotate,rt=be===void 0?0:be,Ct=U.spin,at=Ct!==void 0&&Ct,Je=U.style,ze=Je===void 0?{}:Je,Te=U.inStack,He=Te!==void 0&&Te,pt=B(U,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),kt={},ft=[];ue!==null&&(He?ft.push("scale("+ue+")"):(ze.width=typeof ue=="string"?ue:1.5*ue+"rem",ze.height=ze.width)),Ee&&ft.push("scaleX(-1)"),We&&ft.push("scaleY(-1)"),rt!==0&&ft.push("rotate("+rt+"deg)"),ge!==null&&(kt.fill=ge);var Bt=r.createElement("path",M({d:W,style:kt},He?pt:{})),Tt=Bt;ft.length>0&&(ze.transform=ft.join(" "),ze.transformOrigin="center",He&&(Tt=r.createElement("g",{style:ze},Bt,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Le,Pe=Tt,ke=at===!0||typeof at!="number"?2:at,Qe=!He&&(Ee||We);if(ke<0&&(Qe=!Qe),at&&(Pe=r.createElement("g",{style:{animation:"spin"+(Qe?"-inverse":"")+" linear "+Math.abs(ke)+"s infinite",transformOrigin:"center"}},Tt,!(Ee||We||rt!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),He)return Pe;var _t,gt="icon_labelledby_"+$,wt="icon_describedby_"+$;if(te)Le=re?gt+" "+wt:gt;else if(_t="presentation",re)throw new Error("title attribute required when description is set");return r.createElement("svg",M({ref:G,viewBox:"0 0 24 24",style:ze,role:_t,"aria-labelledby":Le},pt),te&&r.createElement("title",{id:gt},te),re&&r.createElement("desc",{id:wt},re),!He&&at&&(Qe?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});R.displayName="Icon",R.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},R.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=R}])),mE}var Ece=Sce();const MF=yA(Ece);function py(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return py=function(){return l},l}py();class Bce extends Fn.Component{render(){return py().f[0]++,py().s[0]++,le.jsxs(pG,{uuid:this.props.id,children:[le.jsx(yG,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(py().f[1]++,py().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:le.jsxs(Uae,{className:"maputnik-layer-editor-group__button",children:[le.jsx("span",{style:{flexGrow:1},children:this.props.title}),le.jsx(MF,{path:sle,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),le.jsx(MF,{path:ole,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),le.jsx(jae,{children:this.props.children})]})}}function jg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="90f4763b72e1eacd247b39087553d31d1a0a133a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90f4763b72e1eacd247b39087553d31d1a0a133a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return jg=function(){return l},l}jg();jg().s[0]++;const Oce=n=>{jg().f[0]++;const e=(jg().s[1]++,n.t);return jg().s[2]++,le.jsx(ya,{label:e("Min Zoom"),fieldSpec:ts.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:le.jsx(Hm,{allowRange:!0,value:n.value,onChange:n.onChange,min:ts.layer.minzoom.minimum,max:ts.layer.minzoom.maximum,default:ts.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},Ice=(jg().s[3]++,zs()(Oce));function Wg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="af8478150b9688dd685e47e421715e80a172fde9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"af8478150b9688dd685e47e421715e80a172fde9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wg=function(){return l},l}Wg();Wg().s[0]++;const Tce=n=>{Wg().f[0]++;const e=(Wg().s[1]++,n.t);return Wg().s[2]++,le.jsx(ya,{label:e("Max Zoom"),fieldSpec:ts.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:le.jsx(Hm,{allowRange:!0,value:n.value,onChange:n.onChange,min:ts.layer.maxzoom.minimum,max:ts.layer.maxzoom.maximum,default:ts.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},kce=(Wg().s[3]++,zs()(Tce));function z0(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="57456766e3c3291370696e036ad161fb7b3e99e2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"57456766e3c3291370696e036ad161fb7b3e99e2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return z0=function(){return l},l}z0();z0().s[0]++;const Pce=n=>{z0().f[0]++;const e=(z0().s[1]++,n.t),t=(z0().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return z0().s[3]++,le.jsx(ya,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:le.jsx(Pp,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},Rce=(z0().s[4]++,zs()(Pce));function my(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return my=function(){return l},l}my();function cj(n){return my().f[0]++,my().s[0]++,n===""?(my().b[0][0]++,"[empty_string]"):(my().b[0][1]++,`'${n}'`)}function fn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="3841487cdf145c8b2ca211ec85dc555aa6f1c4bb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:266,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:263,column:10}},64:{start:{line:257,column:14},end:{line:260,column:16}},65:{start:{line:265,column:8},end:{line:265,column:49}},66:{start:{line:269,column:4},end:{line:272,column:7}},67:{start:{line:275,column:14},end:{line:275,column:26}},68:{start:{line:276,column:21},end:{line:276,column:23}},69:{start:{line:277,column:22},end:{line:277,column:43}},70:{start:{line:278,column:19},end:{line:295,column:6}},71:{start:{line:279,column:6},end:{line:279,column:70}},72:{start:{line:281,column:22},end:{line:281,column:30}},73:{start:{line:282,column:6},end:{line:282,column:29}},74:{start:{line:283,column:6},end:{line:294,column:8}},75:{start:{line:296,column:19},end:{line:296,column:48}},76:{start:{line:297,column:18},end:{line:325,column:5}},77:{start:{line:300,column:23},end:{line:300,column:71}},78:{start:{line:305,column:23},end:{line:305,column:68}},79:{start:{line:310,column:23},end:{line:310,column:80}},80:{start:{line:316,column:23},end:{line:316,column:41}},81:{start:{line:322,column:23},end:{line:322,column:40}},82:{start:{line:327,column:6},end:{line:327,column:30}},83:{start:{line:328,column:6},end:{line:328,column:26}},84:{start:{line:330,column:4},end:{line:375,column:9}},85:{start:{line:357,column:33},end:{line:357,column:42}},86:{start:{line:358,column:20},end:{line:358,column:201}},87:{start:{line:378,column:20},end:{line:378,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:267,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:256,column:22},end:{line:256,column:23}},loc:{start:{line:256,column:34},end:{line:261,column:13}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:268,column:2},end:{line:268,column:3}},loc:{start:{line:268,column:20},end:{line:273,column:3}},line:268},27:{name:"(anonymous_27)",decl:{start:{line:274,column:2},end:{line:274,column:3}},loc:{start:{line:274,column:11},end:{line:376,column:3}},line:274},28:{name:"(anonymous_28)",decl:{start:{line:278,column:53},end:{line:278,column:54}},loc:{start:{line:278,column:64},end:{line:280,column:5}},line:278},29:{name:"(anonymous_29)",decl:{start:{line:280,column:11},end:{line:280,column:12}},loc:{start:{line:280,column:22},end:{line:295,column:5}},line:280},30:{name:"(anonymous_30)",decl:{start:{line:300,column:17},end:{line:300,column:18}},loc:{start:{line:300,column:23},end:{line:300,column:71}},line:300},31:{name:"(anonymous_31)",decl:{start:{line:305,column:17},end:{line:305,column:18}},loc:{start:{line:305,column:23},end:{line:305,column:68}},line:305},32:{name:"(anonymous_32)",decl:{start:{line:310,column:17},end:{line:310,column:18}},loc:{start:{line:310,column:23},end:{line:310,column:80}},line:310},33:{name:"(anonymous_33)",decl:{start:{line:316,column:17},end:{line:316,column:18}},loc:{start:{line:316,column:23},end:{line:316,column:41}},line:316},34:{name:"(anonymous_34)",decl:{start:{line:322,column:17},end:{line:322,column:18}},loc:{start:{line:322,column:23},end:{line:322,column:40}},line:322},35:{name:"handleSelection",decl:{start:{line:326,column:13},end:{line:326,column:28}},loc:{start:{line:326,column:40},end:{line:329,column:5}},line:326},36:{name:"(anonymous_36)",decl:{start:{line:356,column:147},end:{line:356,column:148}},loc:{start:{line:356,column:155},end:{line:359,column:19}},line:356}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:266,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:263,column:10}},{start:{line:264,column:6},end:{line:265,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:279,column:15},end:{line:279,column:68}},type:"binary-expr",locations:[{start:{line:279,column:15},end:{line:279,column:41}},{start:{line:279,column:45},end:{line:279,column:68}}],line:279},14:{loc:{start:{line:296,column:19},end:{line:296,column:48}},type:"binary-expr",locations:[{start:{line:296,column:19},end:{line:296,column:42}},{start:{line:296,column:46},end:{line:296,column:48}}],line:296},15:{loc:{start:{line:309,column:14},end:{line:309,column:66}},type:"cond-expr",locations:[{start:{line:309,column:45},end:{line:309,column:54}},{start:{line:309,column:57},end:{line:309,column:66}}],line:309}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuNyB,SA2EL,UA1Ed,KADmB;AAvNzB,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAEjD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAChD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3841487cdf145c8b2ca211ec85dc555aa6f1c4bb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fn=function(){return l},l}fn();function Dce(n){fn().f[0]++;const e=(fn().s[0]++,[]);return fn().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(ef.layout_symbol).filter(t=>(fn().f[1]++,fn().s[2]++,t.startsWith("symbol-")))}),fn().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(ef.layout_symbol).filter(t=>(fn().f[2]++,fn().s[4]++,t.startsWith("text-")))}),fn().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(ef.layout_symbol).filter(t=>(fn().f[3]++,fn().s[6]++,t.startsWith("icon-")))}),fn().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(ef.paint_symbol).filter(t=>(fn().f[4]++,fn().s[8]++,t.startsWith("text-")))}),fn().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(ef.paint_symbol).filter(t=>(fn().f[5]++,fn().s[10]++,t.startsWith("icon-")))}),fn().s[11]++,e}function hj(n,e){if(fn().f[6]++,fn().s[12]++,Object.keys(ef.layer.type.values).indexOf(n)<0)return fn().b[0][0]++,fn().s[13]++,[];if(fn().b[0][1]++,fn().s[14]++,n==="symbol")return fn().b[1][0]++,fn().s[15]++,Dce(e);fn().b[1][1]++;const t=(fn().s[16]++,[]);return fn().s[17]++,Object.keys(ef["paint_"+n]).length>0?(fn().b[2][0]++,fn().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(ef["paint_"+n])})):fn().b[2][1]++,fn().s[19]++,Object.keys(ef["layout_"+n]).length>0?(fn().b[3][0]++,fn().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(ef["layout_"+n])})):fn().b[3][1]++,fn().s[21]++,t}function wF(n,e){fn().f[7]++;const t=(fn().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(fn().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(fn().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return fn().s[25]++,[t,r].concat(hj(n,e)).concat([i])}class Fce extends Fn.Component{static defaultProps=(fn().s[26]++,{onLayerChanged:()=>{fn().f[8]++},onLayerIdChange:()=>{fn().f[9]++},onLayerDestroyed:()=>{fn().f[10]++}});constructor(e){fn().f[11]++,fn().s[27]++,super(e);const t=(fn().s[28]++,{});fn().s[29]++;for(const r of wF(this.props.layer.type,e.t))fn().s[30]++,t[r.title]=!0;fn().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){fn().f[12]++;const r=(fn().s[32]++,{...t.editorGroups});fn().s[33]++;for(const i of hj(e.layer.type,e.t))fn().s[34]++,i.title in r?fn().b[4][1]++:(fn().b[4][0]++,fn().s[35]++,r[i.title]=!0);return fn().s[36]++,{editorGroups:r}}changeProperty(e,t,r){fn().f[13]++,fn().s[37]++,this.props.onLayerChanged(this.props.layerIndex,eae(this.props.layer,e,t,r))}onGroupToggle(e,t){fn().f[14]++;const r=(fn().s[38]++,{...this.state.editorGroups,[e]:t});fn().s[39]++,this.setState({editorGroups:r})}renderGroupType(e,t){fn().f[15]++;let r=(fn().s[40]++,"");fn().s[41]++,this.props.layer.metadata?(fn().b[5][0]++,fn().s[42]++,r=this.props.layer.metadata["maputnik:comment"]):fn().b[5][1]++;const{errors:i,layerIndex:s}=(fn().s[43]++,this.props),l=(fn().s[44]++,{});fn().s[45]++,i.forEach(C=>{fn().f[16]++,fn().s[46]++,fn().b[7][0]++,C.parsed&&(fn().b[7][1]++,C.parsed.type==="layer")&&(fn().b[7][2]++,C.parsed.data.index==s)?(fn().b[6][0]++,fn().s[47]++,l[C.parsed.data.key]={message:C.parsed.data.message}):fn().b[6][1]++});let o;const f=(fn().s[48]++,this.props.layer);switch(fn().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,f.source)?(fn().b[8][0]++,fn().s[50]++,o=this.props.sources[f.source].layers):fn().b[8][1]++,fn().s[51]++,e){case"layer":return fn().b[9][0]++,fn().s[52]++,le.jsxs("div",{children:[le.jsx(GN,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:C=>(fn().f[17]++,fn().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,C))}),le.jsx(NN,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:C=>(fn().f[18]++,fn().s[54]++,this.props.onLayerChanged(this.props.layerIndex,Jse(this.props.layer,C)))}),(fn().b[10][0]++,this.props.layer.type!=="background"&&(fn().b[10][1]++,le.jsx(sG,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:C=>(fn().f[19]++,fn().s[55]++,this.changeProperty(null,"source",C))}))),(fn().b[11][0]++,!wB.includes(this.props.layer.type)&&(fn().b[11][1]++,le.jsx(aG,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:C=>(fn().f[20]++,fn().s[56]++,this.changeProperty(null,"source-layer",C))}))),le.jsx(Ice,{error:l.minzoom,value:this.props.layer.minzoom,onChange:C=>(fn().f[21]++,fn().s[57]++,this.changeProperty(null,"minzoom",C))}),le.jsx(kce,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:C=>(fn().f[22]++,fn().s[58]++,this.changeProperty(null,"maxzoom",C))}),le.jsx(Rce,{error:l.comment,value:r,onChange:C=>(fn().f[23]++,fn().s[59]++,this.changeProperty("metadata","maputnik:comment",C==""?(fn().b[12][0]++,void 0):(fn().b[12][1]++,C)))})]});case"filter":return fn().b[9][1]++,fn().s[60]++,le.jsx("div",{children:le.jsx("div",{className:"maputnik-filter-editor-wrapper",children:le.jsx(ble,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:C=>(fn().f[24]++,fn().s[61]++,this.changeProperty(null,"filter",C))})})});case"properties":return fn().b[9][2]++,fn().s[62]++,le.jsx(wce,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return fn().b[9][3]++,fn().s[63]++,le.jsx(KI,{layer:this.props.layer,onChange:C=>{fn().f[25]++,fn().s[64]++,this.props.onLayerChanged(this.props.layerIndex,C)}});default:return fn().b[9][4]++,fn().s[65]++,le.jsx(le.Fragment,{})}}moveLayer(e){fn().f[26]++,fn().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){fn().f[27]++;const e=(fn().s[67]++,this.props.t),t=(fn().s[68]++,[]),r=(fn().s[69]++,this.props.layer.type),i=(fn().s[70]++,wF(r,e).filter(f=>(fn().f[28]++,fn().s[71]++,fn().b[13][0]++,!(r==="background"&&(fn().b[13][1]++,f.type==="source")))).map(f=>{fn().f[29]++;const C=(fn().s[72]++,f.id);return fn().s[73]++,t.push(C),fn().s[74]++,le.jsx(Bce,{"data-wd-key":f.title,id:C,title:f.title,isActive:this.state.editorGroups[f.title],onActiveToggle:this.onGroupToggle.bind(this,f.title),children:this.renderGroupType(f.type,f.fields)},C)})),s=(fn().s[75]++,fn().b[14][0]++,this.props.layer.layout||(fn().b[14][1]++,{})),l=(fn().s[76]++,{delete:{text:e("Delete"),handler:()=>(fn().f[30]++,fn().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(fn().f[31]++,fn().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:s.visibility==="none"?(fn().b[15][0]++,e("Show")):(fn().b[15][1]++,e("Hide")),handler:()=>(fn().f[32]++,fn().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(fn().f[33]++,fn().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(fn().f[34]++,fn().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function o(f,C){fn().f[35]++,fn().s[82]++,C.stopPropagation(),fn().s[83]++,l[f].handler()}return fn().s[84]++,le.jsx(Ey.Provider,{value:{size:"14px",color:"#8e8e8e"},children:le.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[le.jsx("header",{children:le.jsxs("div",{className:"layer-header",children:[le.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:cj(this.props.layer.id)})}),le.jsx("div",{className:"layer-header__info",children:le.jsxs(Qb.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[le.jsx(Qb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:le.jsx(_H,{className:"more-menu__button__svg"})}),le.jsx(Qb.Menu,{children:le.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(f=>{fn().f[36]++;const C=(fn().s[85]++,l[f]);return fn().s[86]++,le.jsx("li",{children:le.jsx(Qb.MenuItem,{value:f,className:"more-menu__menu__item","data-wd-key":C.wdKey,children:C.text})},f)})})})]})})]})}),le.jsx(Sae,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})})}}const Kce=(fn().s[87]++,zs()(Fce));var SF=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Lce=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),Uce=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),zce=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),Nce=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Gce=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),jce=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Wce=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,EF=3,Qce=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",jce]],BF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Yce(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Gce:typeof navigator<"u"?$ce(navigator.userAgent):Hce()}function qce(n){return n!==""&&Qce.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function $ce(n){var e=qce(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Nce;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<EF&&(i=SF(SF([],i,!0),Zce(EF-i.length),!0)):i=[];var s=i.join("."),l=Vce(n),o=Wce.exec(n);return o&&o[1]?new zce(t,s,l,o[1]):new Lce(t,s,l)}function Vce(n){for(var e=0,t=BF.length;e<t;e++){var r=BF[e],i=r[0],s=r[1],l=s.exec(n);if(l)return i}return null}function Hce(){var n=typeof process<"u"&&process.version;return n?new Uce(process.version.slice(1)):null}function Zce(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const Xce="maputnik",Jce="3.0.0",OF={name:Xce,version:Jce},ehe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function qi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="8a543ce29d3fad4d3fcfcf304cf6316fa3ea9488",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAgCW,cAyLG,YAzLH;AAhCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a543ce29d3fad4d3fcfcf304cf6316fa3ea9488"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return qi=function(){return l},l}qi();const the=(qi().s[0]++,Yce()),Zb=(qi().s[1]++,["chrome","firefox"].indexOf(the.name)>-1);class bg extends Fn.Component{render(){return qi().f[0]++,qi().s[2]++,le.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class nhe extends Fn.Component{render(){return qi().f[1]++,qi().s[3]++,le.jsx("a",{className:fm("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class IF extends Fn.Component{render(){return qi().f[2]++,qi().s[4]++,le.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class Xb extends Fn.Component{render(){return qi().f[3]++,qi().s[5]++,le.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class rhe extends Fn.Component{state=(qi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){qi().f[4]++,qi().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){qi().f[5]++,qi().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(qi().s[9]++,e=>{if(qi().f[6]++,qi().s[10]++,e==="map")qi().b[0][0]++,qi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{qi().b[0][1]++;const t=(qi().s[12]++,document.querySelector("#skip-target-"+e));qi().s[13]++,t.focus()}});render(){qi().f[7]++;const e=(qi().s[14]++,this.props.t),t=(qi().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!Zb},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!Zb},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!Zb},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!Zb}]),r=(qi().s[16]++,t.find(i=>(qi().f[8]++,qi().s[17]++,i.id===this.props.mapState)));return qi().s[18]++,le.jsx("nav",{className:"maputnik-toolbar",children:le.jsxs("div",{className:"maputnik-toolbar__inner",children:[le.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[le.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:i=>(qi().f[9]++,qi().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),le.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:i=>(qi().f[10]++,qi().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),le.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:i=>(qi().f[11]++,qi().s[21]++,this.onSkip("map")),children:e("Map view")}),le.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[le.jsx("img",{src:ehe,alt:e("Maputnik on GitHub")}),le.jsxs("h1",{children:[le.jsx("span",{className:"maputnik-toolbar-name",children:OF.name}),le.jsxs("span",{className:"maputnik-toolbar-version",children:["v",OF.version]})]})]})]}),le.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[le.jsxs(Xb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[le.jsx(lH,{}),le.jsx(bg,{children:e("Open")})]}),le.jsxs(Xb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[le.jsx(R6,{}),le.jsx(bg,{children:e("Save")})]}),le.jsxs(Xb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[le.jsx(mH,{}),le.jsx(bg,{children:e("Data Sources")})]}),le.jsxs(Xb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[le.jsx(AH,{}),le.jsx(bg,{children:e("Style Settings")})]}),le.jsxs(IF,{wdKey:"nav:inspect",children:[le.jsx(rH,{}),le.jsxs(bg,{children:[e("View"),le.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:i=>(qi().f[12]++,qi().s[22]++,this.handleSelection(i.target.value)),value:r?.id,children:[t.filter(i=>(qi().f[13]++,qi().s[23]++,i.group==="general")).map(i=>(qi().f[14]++,qi().s[24]++,le.jsx("option",{value:i.id,disabled:i.disabled,"data-wd-key":i.id,children:i.title},i.id))),le.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(i=>(qi().f[15]++,qi().s[25]++,i.group==="color-accessibility")).map(i=>(qi().f[16]++,qi().s[26]++,le.jsx("option",{value:i.id,disabled:i.disabled,children:i.title},i.id)))})]})]})]}),le.jsxs(IF,{wdKey:"nav:language",children:[le.jsx(aH,{}),le.jsxs(bg,{children:["Language",le.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:i=>(qi().f[17]++,qi().s[27]++,this.handleLanguageChange(i.target.value)),value:this.props.i18n.language,children:Object.entries(nL).map(([i,s])=>(qi().f[18]++,qi().s[28]++,le.jsx("option",{value:i,children:s},i)))})]})]}),le.jsxs(nhe,{href:"https://github.com/maplibre/maputnik/wiki",children:[le.jsx(iH,{}),le.jsx(bg,{children:e("Help")})]})]})]})})}}const ihe=(qi().s[29]++,zs()(rhe));function dx(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dx=function(){return l},l}dx();class ohe extends Fn.Component{render(){return dx().f[0]++,dx().s[0]++,le.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function k0(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="8ec38c69dd624a1f42daa5f8d5bda8f1451ec7e4",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:18,column:12}},2:{start:{line:21,column:18},end:{line:21,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:19,column:3}},line:7}},branchMap:{0:{loc:{start:{line:16,column:6},end:{line:16,column:123}},type:"binary-expr",locations:[{start:{line:16,column:6},end:{line:16,column:23}},{start:{line:16,column:43},end:{line:16,column:123}}],line:16}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAsBQ,SACE,KADF;AAtBR,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AACjD,SAAS,mBAAmB;AAW5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8ec38c69dd624a1f42daa5f8d5bda8f1451ec7e4"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return k0=function(){return l},l}k0();class she extends Fn.Component{render(){return k0().f[0]++,k0().s[0]++,document.body.dir=this.props.i18n.dir(),k0().s[1]++,le.jsx(Ey.Provider,{value:{size:"14px"},children:le.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,le.jsxs("div",{className:"maputnik-layout-main",children:[le.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),le.jsx("div",{className:"maputnik-layout-drawer",children:le.jsx(ohe,{children:this.props.layerEditor})}),this.props.map]}),(k0().b[0][0]++,this.props.bottom&&(k0().b[0][1]++,le.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const ahe=(k0().s[2]++,zs()(she));function rl(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return rl=function(){return l},l}rl();class lhe extends Fn.Component{static defaultProps=(rl().s[0]++,{onLayerSelect:()=>{rl().f[0]++}});render(){rl().f[1]++;const{t:e,selectedLayerIndex:t}=(rl().s[1]++,this.props),r=(rl().s[2]++,this.props.errors?.map((s,l)=>{rl().f[2]++;let o;if(rl().s[3]++,rl().b[1][0]++,s.parsed&&(rl().b[1][1]++,s.parsed.type==="layer")){rl().b[0][0]++;const{parsed:f}=(rl().s[4]++,s),C=(rl().s[5]++,this.props.mapStyle?.layers[f.data.index].id);rl().s[6]++,o=le.jsxs(le.Fragment,{children:[le.jsxs(N0,{t:e,children:["Layer ",le.jsx("span",{children:cj(C)}),": ",f.data.message]}),(rl().b[2][0]++,t!==f.data.index&&(rl().b[2][1]++,le.jsxs(le.Fragment,{children:["",le.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(rl().f[3]++,rl().s[7]++,this.props.onLayerSelect(f.data.index)),children:e("switch to layer")})]})))]})}else rl().b[0][1]++,rl().s[8]++,o=s.message;return rl().s[9]++,le.jsx("p",{className:"maputnik-message-panel-error",children:o},"error-"+l)})),i=(rl().s[10]++,this.props.infos?.map((s,l)=>(rl().f[4]++,rl().s[11]++,le.jsx("p",{children:s},"info-"+l))));return rl().s[12]++,le.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}const Ahe=(rl().s[13]++,zs()(lhe));function i_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="88703d2c3d1eb7970d8c410ea3b48099d39b8a79",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88703d2c3d1eb7970d8c410ea3b48099d39b8a79"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return i_=function(){return l},l}i_();i_().s[0]++;const fx=n=>(i_().f[0]++,i_().s[1]++,le.jsx(r_,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(oj,{...n})}));function o_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="fffa19ca675ebdef11e1e19bc5de80e92e7ab3b7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fffa19ca675ebdef11e1e19bc5de80e92e7ab3b7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return o_=function(){return l},l}o_();o_().s[0]++;const xp=n=>(o_().f[0]++,o_().s[1]++,le.jsx(ya,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(Hm,{...n})}));function s_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="52bce12df188c4d6d93f7468926f9c71d8918aec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52bce12df188c4d6d93f7468926f9c71d8918aec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return s_=function(){return l},l}s_();s_().s[0]++;const Df=n=>(s_().f[0]++,s_().s[1]++,le.jsx(ya,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(Pp,{...n})}));function a_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="22d8106d93846b5349fc1a84506c2b599d950216",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"22d8106d93846b5349fc1a84506c2b599d950216"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return a_=function(){return l},l}a_();a_().s[0]++;const Ny=n=>(a_().f[0]++,a_().s[1]++,le.jsx(ya,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(o8,{...n})}));function l_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="fc56b0bbcfdebee59c0c65a50c638259331ea9d2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fc56b0bbcfdebee59c0c65a50c638259331ea9d2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return l_=function(){return l},l}l_();l_().s[0]++;const F3=n=>(l_().f[0]++,l_().s[1]++,le.jsx(ya,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(i1,{...n})}));function A_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="3037ded4ee585e31829504c4e3cf91968b29d62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3037ded4ee585e31829504c4e3cf91968b29d62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return A_=function(){return l},l}A_();A_().s[0]++;const uhe=n=>(A_().f[0]++,A_().s[1]++,le.jsx(r_,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(i8,{...n})}));function u_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="eafb3279f0c8cbcaa727c8284a8764c1ce8a88a6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"eafb3279f0c8cbcaa727c8284a8764c1ce8a88a6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return u_=function(){return l},l}u_();u_().s[0]++;const che=n=>(u_().f[0]++,u_().s[1]++,le.jsx(ya,{label:n.label,fieldSpec:n.fieldSpec,children:le.jsx(rj,{...n})}));function c_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return c_=function(){return l},l}c_();c_().s[0]++;const dj=n=>(c_().f[0]++,c_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Ui(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="d2856bc01a0314604dd2f2be94ded796e110951f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:305,column:6}},27:{start:{line:308,column:22},end:{line:308,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:306,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:170,column:21},end:{line:170,column:42}},type:"binary-expr",locations:[{start:{line:170,column:21},end:{line:170,column:36}},{start:{line:170,column:40},end:{line:170,column:42}}],line:170},9:{loc:{start:{line:299,column:21},end:{line:299,column:62}},type:"binary-expr",locations:[{start:{line:299,column:21},end:{line:299,column:50}},{start:{line:299,column:54},end:{line:299,column:62}}],line:299}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AAgHM,SACE,KADF;AAhHN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,yBAAyB,KAAK,MAAM,kCAAkC;AAAA;AAAA,UAClF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d2856bc01a0314604dd2f2be94ded796e110951f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ui=function(){return l},l}Ui();class hhe extends Fn.Component{changeTransitionProperty(e,t){Ui().f[0]++;const r=(Ui().s[0]++,{...this.props.mapStyle.transition});Ui().s[1]++,t===void 0?(Ui().b[0][0]++,Ui().s[2]++,delete r[e]):(Ui().b[0][1]++,Ui().s[3]++,r[e]=t),Ui().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Ui().f[1]++;const r=(Ui().s[5]++,{...this.props.mapStyle.light});Ui().s[6]++,t===void 0?(Ui().b[1][0]++,Ui().s[7]++,delete r[e]):(Ui().b[1][1]++,Ui().s[8]++,r[e]=t),Ui().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Ui().f[2]++;const r=(Ui().s[10]++,{...this.props.mapStyle.terrain});Ui().s[11]++,t===void 0?(Ui().b[2][0]++,Ui().s[12]++,delete r[e]):(Ui().b[2][1]++,Ui().s[13]++,r[e]=t),Ui().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Ui().f[3]++;const r=(Ui().s[15]++,{...this.props.mapStyle});Ui().s[16]++,t===void 0?(Ui().b[3][0]++,Ui().s[17]++,delete r[e]):(Ui().b[3][1]++,Ui().s[18]++,r[e]=t),Ui().s[19]++,this.props.onStyleChanged(r)}render(){Ui().f[4]++;const e=(Ui().s[20]++,Ui().b[4][0]++,this.props.mapStyle.metadata||(Ui().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Ui().s[21]++,this.props),s=(Ui().s[22]++,dj(t)),l=(Ui().s[23]++,Ui().b[5][0]++,this.props.mapStyle.light||(Ui().b[5][1]++,{})),o=(Ui().s[24]++,Ui().b[6][0]++,this.props.mapStyle.transition||(Ui().b[6][1]++,{})),f=(Ui().s[25]++,Ui().b[7][0]++,this.props.mapStyle.terrain||(Ui().b[7][1]++,{}));return Ui().s[26]++,le.jsx(J0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:le.jsxs("div",{className:"modal:settings",children:[le.jsx(Df,{label:t("Name"),fieldSpec:ts.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),le.jsx(Df,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),le.jsx(Ny,{fieldSpec:ts.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),le.jsx(Ny,{label:t("Glyphs URL"),fieldSpec:ts.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),le.jsx(Df,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(Df,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(Df,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),le.jsx(Df,{label:s.maputnik.locationiq_access_token.label,fieldSpec:s.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:r.bind(this,"maputnik:locationiq_access_token")}),le.jsx(fx,{label:t("Center"),fieldSpec:ts.$root.center,length:2,type:"number",value:(Ui().b[8][0]++,i.center||(Ui().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),le.jsx(xp,{label:t("Zoom"),fieldSpec:ts.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),le.jsx(xp,{label:t("Bearing"),fieldSpec:ts.$root.bearing,value:i.bearing,default:ts.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),le.jsx(xp,{label:t("Pitch"),fieldSpec:ts.$root.pitch,value:i.pitch,default:ts.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),le.jsx(uhe,{label:t("Light anchor"),fieldSpec:ts.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(ts.light.anchor.values),default:ts.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),le.jsx(che,{label:t("Light color"),fieldSpec:ts.light.color,value:l.color,default:ts.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),le.jsx(xp,{label:t("Light intensity"),fieldSpec:ts.light.intensity,value:l.intensity,default:ts.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),le.jsx(fx,{label:t("Light position"),fieldSpec:ts.light.position,type:"number",length:ts.light.position.length,value:l.position,default:ts.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),le.jsx(Df,{label:t("Terrain source"),fieldSpec:ts.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:f.source,onChange:this.changeTerrainProperty.bind(this,"source")}),le.jsx(xp,{label:t("Terrain exaggeration"),fieldSpec:ts.terrain.exaggeration,value:f.exaggeration,default:ts.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),le.jsx(xp,{label:t("Transition delay"),fieldSpec:ts.transition.delay,value:o.delay,default:ts.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),le.jsx(xp,{label:t("Transition duration"),fieldSpec:ts.transition.duration,value:o.duration,default:ts.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),le.jsx(F3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Ui().b[9][0]++,e["maputnik:renderer"]||(Ui().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const dhe=(Ui().s[27]++,zs()(hhe));var d2={exports:{}},fhe=d2.exports,TF;function phe(){return TF||(TF=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",fhe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),r=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(s,l){if(typeof s!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=r[l.locale]||{},f=l.replacement===void 0?"-":l.replacement,C=l.trim===void 0?!0:l.trim,M=s.normalize().split("").reduce(function(B,D){var R=o[D];return R===void 0&&(R=t[D]),R===void 0&&(R=D),R===f&&(R=" "),B+R.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(M=M.replace(/[^A-Za-z0-9\s]/g,"")),C&&(M=M.trim()),M=M.replace(/\s+/g,f),l.lower&&(M=M.toLowerCase()),M}return i.extend=function(s){Object.assign(t,s)},i})}(d2)),d2.exports}var mhe=phe();const ghe=yA(mhe);var f2={exports:{}},yhe=f2.exports,kF;function vhe(){return kF||(kF=1,function(n,e){(function(t,r){r()})(yhe,function(){function t(C,M){return typeof M>"u"?M={autoBom:!1}:typeof M!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),M={autoBom:!M}),M.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\uFEFF",C],{type:C.type}):C}function r(C,M,B){var D=new XMLHttpRequest;D.open("GET",C),D.responseType="blob",D.onload=function(){f(D.response,M,B)},D.onerror=function(){console.error("could not download file")},D.send()}function i(C){var M=new XMLHttpRequest;M.open("HEAD",C,!1);try{M.send()}catch{}return 200<=M.status&&299>=M.status}function s(C){try{C.dispatchEvent(new MouseEvent("click"))}catch{var M=document.createEvent("MouseEvents");M.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(M)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(C,M,B){var D=l.URL||l.webkitURL,R=document.createElement("a");M=M||C.name||"download",R.download=M,R.rel="noopener",typeof C=="string"?(R.href=C,R.origin===location.origin?s(R):i(R.href)?r(C,M,B):s(R,R.target="_blank")):(R.href=D.createObjectURL(C),setTimeout(function(){D.revokeObjectURL(R.href)},4e4),setTimeout(function(){s(R)},0))}:"msSaveOrOpenBlob"in navigator?function(C,M,B){if(M=M||C.name||"download",typeof C!="string")navigator.msSaveOrOpenBlob(t(C,B),M);else if(i(C))r(C,M,B);else{var D=document.createElement("a");D.href=C,D.target="_blank",setTimeout(function(){s(D)})}}:function(C,M,B,D){if(D=D||open("","_blank"),D&&(D.document.title=D.document.body.innerText="downloading..."),typeof C=="string")return r(C,M,B);var R=C.type==="application/octet-stream",U=/constructor/i.test(l.HTMLElement)||l.safari,G=/CriOS\/[\d]+/.test(navigator.userAgent);if((G||R&&U||o)&&typeof FileReader<"u"){var W=new FileReader;W.onloadend=function(){var oe=W.result;oe=G?oe:oe.replace(/^data:[^;]*;/,"data:attachment/file;"),D?D.location.href=oe:location=oe,D=null},W.readAsDataURL(C)}else{var J=l.URL||l.webkitURL,$=J.createObjectURL(C);D?D.location=$:location.href=$,D=null,setTimeout(function(){J.revokeObjectURL($)},4e4)}});l.saveAs=f.saveAs=f,n.exports=f})}(f2)),f2.exports}var PF=vhe();const Che="5.7.1",_he="get_your_own_OpIi9ZULNHzrESv6T2vL",bhe="b71f7f0ba4064f5eb9e903859a9cf5c6",xhe="pk.put_your_api_key_here7bb23dffeb4",fj={openmaptiles:_he,thunderforest:bhe,locationiq:xhe};function $n(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $n=function(){return l},l}$n();const Mhe=($n().s[0]++,mj({version:8,sources:{},layers:[]}));function pj(){return $n().f[0]++,$n().s[1]++,Math.random().toString(36).substring(2,9)}function whe(n){return $n().f[1]++,$n().s[2]++,$n().b[1][0]++,!("id"in n)||($n().b[1][1]++,!n.id)?($n().b[0][0]++,$n().s[3]++,n.id=pj()):$n().b[0][1]++,$n().s[4]++,n}function She(n){$n().f[2]++;const e=($n().s[5]++,n.layers.map(t=>{$n().f[3]++;const r=($n().s[6]++,{...t});return $n().s[7]++,delete r.interactive,$n().s[8]++,r}));return $n().s[9]++,{...n,layers:e}}function Ehe(n){return $n().f[4]++,$n().s[10]++,{...n,layers:UB(n.layers)}}function mj(n){return $n().f[5]++,$n().s[11]++,She(Ehe(whe(n)))}function Bhe(n,e){$n().f[6]++,$n().s[12]++;for(let t=($n().s[13]++,0);t<n.length;t++){if($n().s[14]++,n[t].id===e)return $n().b[2][0]++,$n().s[15]++,t;$n().b[2][1]++}return $n().s[16]++,null}function a8(n,e,t){$n().f[7]++;const r=($n().s[17]++,$n().b[3][0]++,e.metadata||($n().b[3][1]++,{}));let i=($n().s[18]++,r[`maputnik:${n}_access_token`]);return $n().s[19]++,$n().b[5][0]++,t.allowFallback&&($n().b[5][1]++,!i)?($n().b[4][0]++,$n().s[20]++,i=fj[n]):$n().b[4][1]++,$n().s[21]++,i}function Ohe(n,e,t=($n().b[6][0]++,{})){$n().f[8]++;const r=($n().s[22]++,n.sources[e]);if($n().s[23]++,r)$n().b[7][1]++;else return $n().b[7][0]++,$n().s[24]++,n;if($n().s[25]++,$n().b[9][0]++,!("url"in r)||($n().b[9][1]++,!r.url))return $n().b[8][0]++,$n().s[26]++,n;$n().b[8][1]++;let i=($n().s[27]++,e);$n().s[28]++,$n().b[11][0]++,e==="thunderforest_transport"||($n().b[11][1]++,e==="thunderforest_outdoors")?($n().b[10][0]++,$n().s[29]++,i="thunderforest"):($n().b[10][1]++,$n().s[30]++,$n().b[13][0]++,"url"in r&&($n().b[13][1]++,r.url?.match(/\.stadiamaps\.com/))?($n().b[12][0]++,$n().s[31]++,i="stadia"):($n().b[12][1]++,$n().s[32]++,$n().b[15][0]++,"url"in r&&($n().b[15][1]++,r.url?.match(/\.locationiq\.com/))?($n().b[14][0]++,$n().s[33]++,i="locationiq"):$n().b[14][1]++));const s=($n().s[34]++,a8(i,n,t));if($n().s[35]++,s)$n().b[16][1]++;else return $n().b[16][0]++,$n().s[36]++,n;let l;$n().s[37]++,i=="stadia"?($n().b[17][0]++,$n().s[38]++,l=`${r.url}?api_key=${s}`):($n().b[17][1]++,$n().s[39]++,l=r.url.replace("{key}",s));const o=($n().s[40]++,{...n.sources,[e]:{...r,url:l}}),f=($n().s[41]++,{...n,sources:o});return $n().s[42]++,f}function Ihe(n,e=($n().b[18][0]++,{})){$n().f[9]++;let t=($n().s[43]++,n);if($n().s[44]++,Object.keys(n.sources).forEach(r=>{$n().f[10]++,$n().s[45]++,t=Ohe(t,r,e)}),$n().s[46]++,$n().b[20][0]++,n.glyphs&&($n().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||($n().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){$n().b[19][0]++;const r=($n().s[47]++,a8("openmaptiles",n,e));$n().s[48]++,r?($n().b[21][0]++,$n().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):$n().b[21][1]++}else $n().b[19][1]++;return $n().s[50]++,t}function The(n){$n().f[11]++;const e=($n().s[51]++,{...n.metadata});return $n().s[52]++,delete e["maputnik:openmaptiles_access_token"],$n().s[53]++,delete e["maputnik:thunderforest_access_token"],$n().s[54]++,delete e["maputnik:stadia_access_token"],$n().s[55]++,delete e["maputnik:locationiq_access_token"],$n().s[56]++,{...n,metadata:e}}const Ed={ensureStyleValidity:mj,emptyStyle:Mhe,indexOfLayer:Bhe,generateId:pj,getAccessToken:a8,replaceAccessTokens:Ihe,stripAccessTokens:The};function Fr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="00cd106446b1d5f8302f9be1723e3663a64de5af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"00cd106446b1d5f8302f9be1723e3663a64de5af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fr=function(){return l},l}Fr();const RF=(Fr().s[0]++,Che),DF=(Fr().s[1]++,typeof window.showSaveFilePicker=="function");class khe extends Fn.Component{tokenizedStyle(){return Fr().f[0]++,Fr().s[2]++,fV(Ed.stripAccessTokens(Ed.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Fr().f[1]++,Fr().s[3]++,this.props.mapStyle.name?(Fr().b[0][0]++,Fr().s[4]++,ghe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Fr().b[0][1]++,Fr().s[5]++,this.props.mapStyle.id)}createHtml(){Fr().f[2]++;const e=(Fr().s[6]++,this.tokenizedStyle()),t=(Fr().s[7]++,Fr().b[1][0]++,this.props.mapStyle.name||(Fr().b[1][1]++,this.props.t("Map"))),r=(Fr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${RF}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${RF}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Fr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Fr().s[10]++,this.exportName());Fr().s[11]++,PF.saveAs(i,s+".html")}async saveStyle(){Fr().f[3]++;const e=(Fr().s[12]++,this.tokenizedStyle());if(Fr().s[13]++,DF)Fr().b[2][1]++;else{Fr().b[2][0]++;const i=(Fr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Fr().s[15]++,this.exportName());Fr().s[16]++,PF.saveAs(i,s+".json"),Fr().s[17]++;return}let t=(Fr().s[18]++,this.props.fileHandle);if(Fr().s[19]++,t==null)if(Fr().b[3][0]++,Fr().s[20]++,t=await this.createFileHandle(),Fr().s[21]++,this.props.onSetFileHandle(t),Fr().s[22]++,t==null){Fr().b[4][0]++,Fr().s[23]++;return}else Fr().b[4][1]++;else Fr().b[3][1]++;const r=(Fr().s[24]++,await t.createWritable());Fr().s[25]++,await r.write(e),Fr().s[26]++,await r.close(),Fr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Fr().f[4]++;const e=(Fr().s[28]++,this.tokenizedStyle()),t=(Fr().s[29]++,await this.createFileHandle());if(Fr().s[30]++,this.props.onSetFileHandle(t),Fr().s[31]++,t==null){Fr().b[5][0]++,Fr().s[32]++;return}else Fr().b[5][1]++;const r=(Fr().s[33]++,await t.createWritable());Fr().s[34]++,await r.write(e),Fr().s[35]++,await r.close(),Fr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Fr().f[5]++;const e=(Fr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Fr().s[38]++,await window.showSaveFilePicker(e));return Fr().s[39]++,this.props.onSetFileHandle(t),Fr().s[40]++,t}changeMetadataProperty(e,t){Fr().f[6]++;const r=(Fr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Fr().s[42]++,this.props.onStyleChanged(r)}render(){Fr().f[7]++;const e=(Fr().s[43]++,this.props.t),t=(Fr().s[44]++,dj(e));return Fr().s[45]++,le.jsx(J0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Save Style")}),le.jsx("p",{children:e("Save the JSON style to your computer.")}),le.jsxs("div",{children:[le.jsx(Df,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Fr().b[6][0]++,this.props.mapStyle.metadata||(Fr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(Df,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Fr().b[7][0]++,this.props.mapStyle.metadata||(Fr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(Df,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Fr().b[8][0]++,this.props.mapStyle.metadata||(Fr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),le.jsx(Df,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(Fr().b[9][0]++,this.props.mapStyle.metadata||(Fr().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),le.jsxs("div",{className:"maputnik-modal-export-buttons",children:[le.jsxs(Qa,{onClick:this.saveStyle.bind(this),children:[le.jsx(R6,{}),e("Save")]}),(Fr().b[10][0]++,DF&&(Fr().b[10][1]++,le.jsxs(Qa,{onClick:this.saveStyleAs.bind(this),children:[le.jsx(R6,{}),e("Save as")]}))),le.jsxs(Qa,{onClick:this.createHtml.bind(this),children:[le.jsx(gH,{}),e("Create HTML")]})]})]})})}}const Phe=(Fr().s[46]++,zs()(khe));function h_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="008bf7f932014e13eee4379e3554a3bc406336ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"008bf7f932014e13eee4379e3554a3bc406336ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return h_=function(){return l},l}h_();h_().s[0]++;const gj=n=>(h_().f[0]++,h_().s[1]++,le.jsx(r_,{label:n.label,children:le.jsx(sj,{...n})}));function d_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="c125b14cc26e01a4ebcfb9f19e77a3d5d28023c7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c125b14cc26e01a4ebcfb9f19e77a3d5d28023c7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return d_=function(){return l},l}d_();d_().s[0]++;const Rhe=n=>(d_().f[0]++,d_().s[1]++,le.jsx(ya,{label:n.label,children:le.jsx(ij,{...n})}));function Ln(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ln=function(){return l},l}Ln();class gE extends Fn.Component{render(){Ln().f[0]++;const e=(Ln().s[0]++,this.props.t);return Ln().s[1]++,le.jsxs("div",{children:[le.jsx(Ny,{label:e("TileJSON URL"),fieldSpec:Es.source_vector.url,value:this.props.source.url,onChange:t=>(Ln().f[1]++,Ln().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class yE extends Fn.Component{changeTileUrls(e){Ln().f[2]++,Ln().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Ln().f[3]++;const e=(Ln().s[4]++,Ln().b[0][0]++,this.props.source.tiles||(Ln().b[0][1]++,[]));return Ln().s[5]++,le.jsx(gj,{label:this.props.t("Tile URL"),fieldSpec:Es.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Ln().f[4]++;const e=(Ln().s[6]++,this.props.t);return Ln().s[7]++,le.jsxs("div",{children:[this.renderTileUrls(),le.jsx(F3,{label:e("Scheme Type"),fieldSpec:Es.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Ln().f[5]++,Ln().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),le.jsx(xp,{label:e("Min Zoom"),fieldSpec:Es.source_vector.minzoom,value:(Ln().b[1][0]++,this.props.source.minzoom||(Ln().b[1][1]++,0)),onChange:t=>(Ln().f[6]++,Ln().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),le.jsx(xp,{label:e("Max Zoom"),fieldSpec:Es.source_vector.maxzoom,value:(Ln().b[2][0]++,this.props.source.maxzoom||(Ln().b[2][1]++,22)),onChange:t=>(Ln().f[7]++,Ln().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Ln().s[11]++;const yj=n=>(Ln().f[8]++,Ln().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class Dhe extends Fn.Component{render(){Ln().f[9]++;const e=(Ln().s[13]++,this.props.t);Ln().s[14]++;const t=(r,i)=>{Ln().f[10]++;const s=(Ln().s[15]++,this.props.source.coordinates.slice(0));Ln().s[16]++,s[r]=i,Ln().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Ln().s[18]++,le.jsxs("div",{children:[le.jsx(Ny,{label:e("Image URL"),fieldSpec:Es.source_image.url,value:this.props.source.url,onChange:r=>(Ln().f[11]++,Ln().s[19]++,this.props.onChange({...this.props.source,url:r}))}),yj(e).map(({label:r,key:i},s)=>(Ln().f[12]++,Ln().s[20]++,le.jsx(fx,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:l=>(Ln().f[13]++,Ln().s[21]++,t(s,l))},i)))]})}}class Fhe extends Fn.Component{render(){Ln().f[14]++;const e=(Ln().s[22]++,this.props.t);Ln().s[23]++;const t=(i,s)=>{Ln().f[15]++;const l=(Ln().s[24]++,this.props.source.coordinates.slice(0));Ln().s[25]++,l[i]=s,Ln().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};Ln().s[27]++;const r=i=>{Ln().f[16]++,Ln().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Ln().s[29]++,le.jsxs("div",{children:[le.jsx(gj,{label:e("Video URL"),fieldSpec:Es.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),yj(e).map(({label:i,key:s},l)=>(Ln().f[17]++,Ln().s[30]++,le.jsx(fx,{label:i,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(Ln().f[18]++,Ln().s[31]++,t(l,o))},s)))]})}}class Khe extends Fn.Component{render(){Ln().f[19]++;const e=(Ln().s[32]++,this.props.t);return Ln().s[33]++,le.jsx(Ny,{label:e("GeoJSON URL"),fieldSpec:Es.source_geojson.data,value:this.props.source.data,onChange:t=>(Ln().f[20]++,Ln().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class Lhe extends Fn.Component{render(){Ln().f[21]++;const e=(Ln().s[35]++,this.props.t);return Ln().s[36]++,le.jsxs("div",{children:[le.jsx(ya,{label:e("GeoJSON"),fieldSpec:Es.source_geojson.data,children:le.jsx(KI,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Ln().f[22]++,Ln().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),le.jsx(Rhe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Ln().f[23]++,Ln().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class Uhe extends Fn.Component{render(){Ln().f[24]++;const e=(Ln().s[39]++,this.props.t);return Ln().s[40]++,le.jsxs("div",{children:[le.jsx(Ny,{label:e("PMTiles URL"),fieldSpec:Es.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Ln().f[25]++,Ln().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Ln().b[3][0]++,t):(Ln().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class zhe extends Fn.Component{render(){Ln().f[26]++;const e=(Ln().s[42]++,this.props.t),t=(Ln().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Ln().s[44]++,this.props.mode){case"geojson_url":return Ln().b[4][0]++,Ln().s[45]++,le.jsx(Khe,{...t});case"geojson_json":return Ln().b[4][1]++,Ln().s[46]++,le.jsx(Lhe,{...t});case"tilejson_vector":return Ln().b[4][2]++,Ln().s[47]++,le.jsx(gE,{...t});case"tile_vector":return Ln().b[4][3]++,Ln().s[48]++,le.jsx(yE,{...t});case"tilejson_raster":return Ln().b[4][4]++,Ln().s[49]++,le.jsx(gE,{...t});case"tile_raster":return Ln().b[4][5]++,Ln().s[50]++,le.jsx(yE,{...t,children:le.jsx(xp,{label:e("Tile Size"),fieldSpec:Es.source_raster.tileSize,onChange:r=>(Ln().f[27]++,Ln().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Ln().b[5][0]++,this.props.source.tileSize||(Ln().b[5][1]++,Es.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Ln().b[4][6]++,Ln().s[52]++,le.jsx(gE,{...t});case"tilexyz_raster-dem":return Ln().b[4][7]++,Ln().s[53]++,le.jsxs(yE,{...t,children:[le.jsx(xp,{label:e("Tile Size"),fieldSpec:Es.source_raster_dem.tileSize,onChange:r=>(Ln().f[28]++,Ln().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Ln().b[6][0]++,this.props.source.tileSize||(Ln().b[6][1]++,Es.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),le.jsx(F3,{label:e("Encoding"),fieldSpec:Es.source_raster_dem.encoding,options:Object.keys(Es.source_raster_dem.encoding.values),onChange:r=>(Ln().f[29]++,Ln().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(Ln().b[7][0]++,this.props.source.encoding||(Ln().b[7][1]++,Es.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Ln().b[4][8]++,Ln().s[56]++,le.jsx(Uhe,{...t});case"image":return Ln().b[4][9]++,Ln().s[57]++,le.jsx(Dhe,{...t});case"video":return Ln().b[4][10]++,Ln().s[58]++,le.jsx(Fhe,{...t});default:return Ln().b[4][11]++,Ln().s[59]++,null}}}const vj=(Ln().s[60]++,zs()(zhe));function Op(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Op=function(){return l},l}Op();function Nhe(n,e){Op().f[0]++;const t=(Op().s[0]++,{...n.sources});return Op().s[1]++,delete t[e],Op().s[2]++,{...n,sources:t}}function FF(n,e,t){return Op().f[1]++,Op().s[3]++,Cj(n,e,t)}function Cj(n,e,t){Op().f[2]++;const r=(Op().s[4]++,{...n.sources,[e]:t});return Op().s[5]++,{...n,sources:r}}const Ghe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},jhe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},Whe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Qhe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},Yhe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},KF={openmaptiles:Ghe,thunderforest_transport:jhe,thunderforest_outdoors:Whe,open_zoomstack:Qhe,locationiq:Yhe};function un(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="dcb82ee07a51478fd63bf8a24f2c7d17f6ce5866",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dcb82ee07a51478fd63bf8a24f2c7d17f6ce5866"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return un=function(){return l},l}un();class qhe extends Fn.Component{render(){return un().f[0]++,un().s[0]++,le.jsx("div",{className:"maputnik-public-source",children:le.jsxs(Qa,{className:"maputnik-public-source-select",onClick:()=>(un().f[1]++,un().s[1]++,this.props.onSelect(this.props.id)),children:[le.jsxs("div",{className:"maputnik-public-source-info",children:[le.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),le.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(AU,{})]})})}}function $he(n){return un().f[2]++,un().s[2]++,n.type==="raster"?(un().b[0][0]++,un().s[3]++,n.tiles?(un().b[1][0]++,un().s[4]++,"tile_raster"):(un().b[1][1]++,un().s[5]++,"tilejson_raster")):(un().b[0][1]++,un().s[6]++,n.type==="raster-dem"?(un().b[2][0]++,un().s[7]++,n.tiles?(un().b[3][0]++,un().s[8]++,"tilexyz_raster-dem"):(un().b[3][1]++,un().s[9]++,"tilejson_raster-dem")):(un().b[2][1]++,un().s[10]++,n.type==="vector"?(un().b[4][0]++,un().s[11]++,n.tiles?(un().b[5][0]++,un().s[12]++,"tile_vector"):(un().b[5][1]++,un().s[13]++,un().b[7][0]++,n.url&&(un().b[7][1]++,n.url.startsWith("pmtiles://"))?(un().b[6][0]++,un().s[14]++,"pmtiles_vector"):(un().b[6][1]++,un().s[15]++,"tilejson_vector"))):(un().b[4][1]++,un().s[16]++,n.type==="geojson"?(un().b[8][0]++,un().s[17]++,typeof n.data=="string"?(un().b[9][0]++,un().s[18]++,"geojson_url"):(un().b[9][1]++,un().s[19]++,"geojson_json")):(un().b[8][1]++,un().s[20]++,n.type==="image"?(un().b[10][0]++,un().s[21]++,"image"):(un().b[10][1]++,un().s[22]++,n.type==="video"?(un().b[11][0]++,un().s[23]++,"video"):(un().b[11][1]++,un().s[24]++,null))))))}class Vhe extends Fn.Component{render(){un().f[3]++;const e=(un().s[25]++,this.props.t);return un().s[26]++,le.jsxs("div",{className:"maputnik-active-source-type-editor",children:[le.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[le.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(Qa,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(un().f[4]++,un().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:le.jsx(Yy,{})})]}),le.jsx("div",{className:"maputnik-active-source-type-editor-content",children:le.jsx(vj,{onChange:this.props.onChange,mode:$he(this.props.source),source:this.props.source})})]})}}class Hhe extends Fn.Component{constructor(e){un().f[5]++,un().s[28]++,super(e),un().s[29]++,this.state={mode:"tilejson_vector",sourceId:Ed.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){un().f[6]++;const t=(un().s[30]++,un().b[12][0]++,(un().b[13][0]++,this.state||(un().b[13][1]++,{})).source||(un().b[12][1]++,{})),{protocol:r}=(un().s[31]++,window.location);switch(un().s[32]++,e){case"pmtiles_vector":return un().b[14][0]++,un().s[33]++,{type:"vector",url:`${r}//localhost:3000/file.pmtiles`};case"geojson_url":return un().b[14][1]++,un().s[34]++,{type:"geojson",data:`${r}//localhost:3000/geojson.json`};case"geojson_json":return un().b[14][2]++,un().s[35]++,{type:"geojson",cluster:(un().b[15][0]++,t.cluster||(un().b[15][1]++,!1)),data:""};case"tilejson_vector":return un().b[14][3]++,un().s[36]++,{type:"vector",url:(un().b[16][0]++,t.url||(un().b[16][1]++,`${r}//localhost:3000/tilejson.json`))};case"tile_vector":return un().b[14][4]++,un().s[37]++,{type:"vector",tiles:(un().b[17][0]++,t.tiles||(un().b[17][1]++,[`${r}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(un().b[18][0]++,t.minzoom||(un().b[18][1]++,0)),maxzoom:(un().b[19][0]++,t.maxzoom||(un().b[19][1]++,14)),scheme:(un().b[20][0]++,t.scheme||(un().b[20][1]++,"xyz"))};case"tilejson_raster":return un().b[14][5]++,un().s[38]++,{type:"raster",url:(un().b[21][0]++,t.url||(un().b[21][1]++,`${r}//localhost:3000/tilejson.json`))};case"tile_raster":return un().b[14][6]++,un().s[39]++,{type:"raster",tiles:(un().b[22][0]++,t.tiles||(un().b[22][1]++,[`${r}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[23][0]++,t.minzoom||(un().b[23][1]++,0)),maxzoom:(un().b[24][0]++,t.maxzoom||(un().b[24][1]++,14)),scheme:(un().b[25][0]++,t.scheme||(un().b[25][1]++,"xyz")),tileSize:(un().b[26][0]++,t.tileSize||(un().b[26][1]++,512))};case"tilejson_raster-dem":return un().b[14][7]++,un().s[40]++,{type:"raster-dem",url:(un().b[27][0]++,t.url||(un().b[27][1]++,`${r}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return un().b[14][8]++,un().s[41]++,{type:"raster-dem",tiles:(un().b[28][0]++,t.tiles||(un().b[28][1]++,[`${r}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[29][0]++,t.minzoom||(un().b[29][1]++,0)),maxzoom:(un().b[30][0]++,t.maxzoom||(un().b[30][1]++,14)),tileSize:(un().b[31][0]++,t.tileSize||(un().b[31][1]++,512))};case"image":return un().b[14][9]++,un().s[42]++,{type:"image",url:`${r}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return un().b[14][10]++,un().s[43]++,{type:"video",urls:[`${r}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return un().b[14][11]++,un().s[44]++,{}}}onAdd=(un().s[45]++,()=>{un().f[7]++;const{source:e,sourceId:t}=(un().s[46]++,this.state);un().s[47]++,this.props.onAdd(t,e)});onChangeSource=(un().s[48]++,e=>{un().f[8]++,un().s[49]++,this.setState({source:e})});render(){un().f[9]++;const e=(un().s[50]++,this.props.t),t=(un().s[51]++,{doc:ts.source_vector.type.doc});return un().s[52]++,le.jsxs("div",{className:"maputnik-add-source",children:[le.jsx(Df,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:r=>(un().f[10]++,un().s[53]++,this.setState({sourceId:r})),"data-wd-key":"modal:sources.add.source_id"}),le.jsx(F3,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:r=>(un().f[11]++,un().s[54]++,this.setState({mode:r,source:this.defaultSource(r)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),le.jsx(vj,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),le.jsx(Qa,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class Zhe extends Fn.Component{stripTitle(e){un().f[12]++;const t=(un().s[55]++,{...e});return un().s[56]++,delete t.title,un().s[57]++,t}render(){un().f[13]++;const{t:e,mapStyle:t}=(un().s[58]++,this.props),r=(un().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(un().s[60]++,Object.keys(t.sources).map(l=>{un().f[14]++;const o=(un().s[61]++,t.sources[l]);return un().s[62]++,le.jsx(Vhe,{sourceId:l,source:o,onChange:f=>(un().f[15]++,un().s[63]++,this.props.onStyleChanged(Cj(t,l,f))),onDelete:()=>(un().f[16]++,un().s[64]++,this.props.onStyleChanged(Nhe(t,l))),...r},l)})),s=(un().s[65]++,Object.keys(KF).filter(l=>(un().f[17]++,un().s[66]++,!(l in t.sources))).map(l=>{un().f[18]++;const o=(un().s[67]++,KF[l]);return un().s[68]++,le.jsx(qhe,{id:l,type:o.type,title:o.title,onSelect:()=>(un().f[19]++,un().s[69]++,this.props.onStyleChanged(FF(t,l,this.stripTitle(o))))},l)}));return un().s[70]++,le.jsxs(J0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Active Sources")}),i]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Choose Public Source")}),le.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),le.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Add New Source")}),le.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),le.jsx(Hhe,{onAdd:(l,o)=>(un().f[20]++,un().s[71]++,this.props.onStyleChanged(FF(t,l,o))),...r})]})]})}}const Xhe=(un().s[72]++,zs()(Zhe));var Jb={},LF;function Jhe(){if(LF)return Jb;LF=1,Object.defineProperty(Jb,"__esModule",{value:!0});var n=Object.assign||function(U){for(var G=1;G<arguments.length;G++){var W=arguments[G];for(var J in W)Object.prototype.hasOwnProperty.call(W,J)&&(U[J]=W[J])}return U},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},t=function(){function U(G,W){for(var J=0;J<W.length;J++){var $=W[J];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(G,$.key,$)}}return function(G,W,J){return W&&U(G.prototype,W),J&&U(G,J),G}}(),r=Ya(),i=f(r),s=px(),l=o(s);function o(U){return U&&U.__esModule?U:{default:U}}function f(U){if(U&&U.__esModule)return U;var G={};if(U!=null)for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(G[W]=U[W]);return G.default=U,G}function C(U,G){var W={};for(var J in U)G.indexOf(J)>=0||Object.prototype.hasOwnProperty.call(U,J)&&(W[J]=U[J]);return W}function M(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")}function B(U,G){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:U}function D(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(U,G):U.__proto__=G)}var R=function(U){D(G,U);function G(W){M(this,G);var J=B(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,W));J.handleChange=function(oe){var te=Array.prototype.slice.call(oe.target.files),H=(J.props.as||"url").toLowerCase();Promise.all(te.map(function(re){return new Promise(function(j,ue){var me=new FileReader;switch(me.onload=function(ge){j([ge,re])},H){case"binary":{me.readAsBinaryString(re);break}case"buffer":{me.readAsArrayBuffer(re);break}case"text":{me.readAsText(re);break}case"url":{me.readAsDataURL(re);break}}})})).then(function(re){J.props.onChange(oe,re)})},J.triggerInput=function(){var oe=l.default.findDOMNode(J._reactFileReaderInput);oe&&oe.click()};var $=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!$.File||!$.FileReader||!$.FileList||!$.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),J}return t(G,[{key:"render",value:function(){var J=this,$=this.props;$.as;var oe=$.children,te=$.style,H=C($,["as","children","style"]),re=oe?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:te},i.createElement("input",n({},H,{type:"file",ref:function(ue){J._reactFileReaderInput=ue},onChange:this.handleChange,onClick:function(){J._reactFileReaderInput.value=null},style:re})),oe)}}]),G}(i.Component);return Jb.default=R,Jb}var ede=Jhe();const tde=yA(ede);function _d(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _d=function(){return l},l}_d();class nde extends Fn.Component{underlayOnClick(e){_d().f[0]++,_d().s[0]++,e.stopPropagation()}render(){_d().f[1]++;const e=(_d().s[1]++,this.props.t);return _d().s[2]++,le.jsxs(J0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(_d().f[2]++,_d().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(_d().f[3]++,_d().s[4]++,this.props.onCancel()),children:[le.jsx("p",{children:this.props.message}),le.jsx("p",{className:"maputnik-dialog__buttons",children:le.jsx(Qa,{onClick:t=>(_d().f[4]++,_d().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const rde=(_d().s[6]++,zs()(nde)),_j=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function tr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return tr=function(){return l},l}tr();class ide extends Fn.Component{render(){return tr().f[0]++,tr().s[0]++,le.jsx("div",{className:"maputnik-public-style",children:le.jsxs(Qa,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(tr().f[1]++,tr().s[1]++,this.props.onSelect(this.props.url)),children:[le.jsxs("div",{className:"maputnik-public-style-header",children:[le.jsx("div",{children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(AU,{})]}),le.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class ode extends Fn.Component{constructor(e){tr().f[2]++,tr().s[2]++,super(e),tr().s[3]++,this.state={styleUrl:""}}clearError(){tr().f[3]++,tr().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){tr().f[4]++,tr().s[5]++,e?(tr().b[0][0]++,tr().s[6]++,e.stopPropagation()):tr().b[0][1]++,tr().s[7]++,this.state.activeRequest?(tr().b[1][0]++,tr().s[8]++,this.state.activeRequest.abort(),tr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):tr().b[1][1]++}onStyleSelect=(tr().s[10]++,e=>{tr().f[5]++,tr().s[11]++,this.clearError();let t=(tr().s[12]++,!1);tr().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(r){return tr().f[6]++,tr().s[14]++,r.json()}).then(r=>{if(tr().f[7]++,tr().s[15]++,t){tr().b[2][0]++,tr().s[16]++;return}else tr().b[2][1]++;tr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const i=(tr().s[18]++,Ed.ensureStyleValidity(r));tr().s[19]++,console.log("Loaded style ",i.id),tr().s[20]++,this.props.onStyleOpen(i),tr().s[21]++,this.onOpenToggle()}).catch(r=>{tr().f[8]++,tr().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),tr().s[23]++,console.error(r),tr().s[24]++,console.warn("Could not open the style URL",e)}),tr().s[25]++,this.setState({activeRequest:{abort:function(){tr().f[9]++,tr().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(tr().s[27]++,e=>{tr().f[10]++,tr().s[28]++,e.preventDefault(),tr().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(tr().s[30]++,async()=>{tr().f[11]++,tr().s[31]++,this.clearError();const e=(tr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(tr().s[33]++,await window.showOpenFilePicker(e)),r=(tr().s[34]++,await t.getFile()),i=(tr().s[35]++,await r.text());let s;tr().s[36]++;try{tr().s[37]++,s=JSON.parse(i)}catch(l){tr().s[38]++,this.setState({error:l.toString()}),tr().s[39]++;return}return tr().s[40]++,s=Ed.ensureStyleValidity(s),tr().s[41]++,this.props.onStyleOpen(s,t),tr().s[42]++,this.onOpenToggle(),tr().s[43]++,r});onFileChanged=(tr().s[44]++,async(e,t)=>{tr().f[12]++;const[,r]=(tr().s[45]++,t[0]),i=(tr().s[46]++,new FileReader);tr().s[47]++,this.clearError(),tr().s[48]++,i.readAsText(r,"UTF-8"),tr().s[49]++,i.onload=s=>{tr().f[13]++;let l;tr().s[50]++;try{tr().s[51]++,l=JSON.parse(s.target?.result)}catch(o){tr().s[52]++,this.setState({error:o.toString()}),tr().s[53]++;return}tr().s[54]++,l=Ed.ensureStyleValidity(l),tr().s[55]++,this.props.onStyleOpen(l),tr().s[56]++,this.onOpenToggle()},tr().s[57]++,i.onerror=s=>(tr().f[14]++,tr().s[58]++,console.log(s.target))});onOpenToggle(){tr().f[15]++,tr().s[59]++,this.setState({styleUrl:""}),tr().s[60]++,this.clearError(),tr().s[61]++,this.props.onOpenToggle()}onChangeUrl=(tr().s[62]++,e=>{tr().f[16]++,tr().s[63]++,this.setState({styleUrl:e})});render(){tr().f[17]++;const e=(tr().s[64]++,this.props.t),t=(tr().s[65]++,_j.map(i=>(tr().f[18]++,tr().s[66]++,le.jsx(ide,{url:i.url,title:i.title,thumbnailUrl:i.thumbnail,onSelect:this.onStyleSelect},i.id))));let r;return tr().s[67]++,this.state.error?(tr().b[3][0]++,tr().s[68]++,r=le.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,le.jsx("a",{href:"#",onClick:()=>(tr().f[19]++,tr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):tr().b[3][1]++,tr().s[70]++,le.jsxs("div",{children:[le.jsxs(J0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(tr().f[20]++,tr().s[71]++,this.onOpenToggle()),title:e("Open Style"),children:[r,le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Open local Style")}),le.jsx("p",{children:e("Open a local JSON style from your computer.")}),le.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(tr().b[4][0]++,le.jsxs(Qa,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[le.jsx(U7,{})," ",e("Open Style")]})):(tr().b[4][1]++,le.jsx(tde,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":e("Open Style"),children:le.jsxs(Qa,{className:"maputnik-upload-button",children:[le.jsx(U7,{})," ",e("Open Style")]})}))})]}),le.jsx("section",{className:"maputnik-modal-section",children:le.jsxs("form",{onSubmit:this.onSubmitUrl,children:[le.jsx("h1",{children:e("Load from URL")}),le.jsx("p",{children:le.jsxs(N0,{t:e,children:["Load from a URL. Note that the URL must have ",le.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),le.jsx(o8,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),le.jsx("div",{children:le.jsx(Qa,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[le.jsx("h1",{children:e("Gallery Styles")}),le.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),le.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),le.jsx(rde,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:i=>(tr().f[21]++,tr().s[72]++,this.onCancelActiveRequest(i)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const sde=(tr().s[73]++,zs()(ode));function Pf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Pf=function(){return l},l}Pf();class ade extends Fn.Component{render(){Pf().f[0]++;const e=(Pf().s[0]++,this.props.t),t=(Pf().s[1]++,[{key:le.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:le.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:le.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:le.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:le.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:le.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:le.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:le.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(Pf().s[2]++,[{key:le.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:le.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:le.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:le.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:le.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:le.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return Pf().s[3]++,le.jsx(J0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("p",{children:le.jsxs(N0,{t:e,children:["Press ",le.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),le.jsx("dl",{children:t.map((i,s)=>(Pf().f[1]++,Pf().s[4]++,le.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[le.jsx("dt",{children:i.key},"dt"+s),le.jsx("dd",{children:i.text},"dd"+s)]},s)))}),le.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),le.jsx("ul",{children:r.map((i,s)=>(Pf().f[2]++,Pf().s[5]++,le.jsxs("li",{children:[le.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const lde=(Pf().s[6]++,zs()(ade));function uu(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return uu=function(){return l},l}uu();class Ade extends Fn.Component{render(){uu().f[0]++;const{t:e,mapView:t}=(uu().s[0]++,this.props),r=(uu().s[1]++,Math.round(t.zoom)+1),i=(uu().s[2]++,+t.center.lng.toFixed(5)),s=(uu().s[3]++,+t.center.lat.toFixed(5));return uu().s[4]++,le.jsxs(J0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("h1",{children:e("Options")}),(uu().b[0][0]++,this.props.renderer==="mlgljs"&&(uu().b[0][1]++,le.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(uu().f[1]++,uu().s[5]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:f=>(uu().f[2]++,uu().s[6]++,this.props.onChangeMaplibreGlDebug(l,f.target.checked))})," ",l]})},l)))}))),(uu().b[1][0]++,this.props.renderer==="ol"&&(uu().b[1][1]++,le.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(uu().f[3]++,uu().s[7]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:f=>(uu().f[4]++,uu().s[8]++,this.props.onChangeOpenlayersDebug(l,f.target.checked))})," ",l]})},l)))})))]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:"Links"}),le.jsx("p",{children:le.jsxs(N0,{t:e,children:[le.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"}),"  Opens the current view on openstreetmap.org"]})})]})]})}}const ude=(uu().s[9]++,zs()(Ade));var xg={},iC={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var cde=iC.exports,UF;function hde(){return UF||(UF=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=n&&!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var l,o=2147483647,f=36,C=1,M=26,B=38,D=700,R=72,U=128,G="-",W=/^xn--/,J=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=f-C,H=Math.floor,re=String.fromCharCode,j;function ue(ze){throw new RangeError(oe[ze])}function me(ze,Te){for(var He=ze.length,pt=[];He--;)pt[He]=Te(ze[He]);return pt}function ge(ze,Te){var He=ze.split("@"),pt="";He.length>1&&(pt=He[0]+"@",ze=He[1]),ze=ze.replace($,".");var kt=ze.split("."),ft=me(kt,Te).join(".");return pt+ft}function we(ze){for(var Te=[],He=0,pt=ze.length,kt,ft;He<pt;)kt=ze.charCodeAt(He++),kt>=55296&&kt<=56319&&He<pt?(ft=ze.charCodeAt(He++),(ft&64512)==56320?Te.push(((kt&1023)<<10)+(ft&1023)+65536):(Te.push(kt),He--)):Te.push(kt);return Te}function Ee(ze){return me(ze,function(Te){var He="";return Te>65535&&(Te-=65536,He+=re(Te>>>10&1023|55296),Te=56320|Te&1023),He+=re(Te),He}).join("")}function xe(ze){return ze-48<10?ze-22:ze-65<26?ze-65:ze-97<26?ze-97:f}function We(ze,Te){return ze+22+75*(ze<26)-((Te!=0)<<5)}function be(ze,Te,He){var pt=0;for(ze=He?H(ze/D):ze>>1,ze+=H(ze/Te);ze>te*M>>1;pt+=f)ze=H(ze/te);return H(pt+(te+1)*ze/(ze+B))}function rt(ze){var Te=[],He=ze.length,pt,kt=0,ft=U,Bt=R,Tt,Le,Pe,ke,Qe,_t,gt,wt,Qt;for(Tt=ze.lastIndexOf(G),Tt<0&&(Tt=0),Le=0;Le<Tt;++Le)ze.charCodeAt(Le)>=128&&ue("not-basic"),Te.push(ze.charCodeAt(Le));for(Pe=Tt>0?Tt+1:0;Pe<He;){for(ke=kt,Qe=1,_t=f;Pe>=He&&ue("invalid-input"),gt=xe(ze.charCodeAt(Pe++)),(gt>=f||gt>H((o-kt)/Qe))&&ue("overflow"),kt+=gt*Qe,wt=_t<=Bt?C:_t>=Bt+M?M:_t-Bt,!(gt<wt);_t+=f)Qt=f-wt,Qe>H(o/Qt)&&ue("overflow"),Qe*=Qt;pt=Te.length+1,Bt=be(kt-ke,pt,ke==0),H(kt/pt)>o-ft&&ue("overflow"),ft+=H(kt/pt),kt%=pt,Te.splice(kt++,0,ft)}return Ee(Te)}function Ct(ze){var Te,He,pt,kt,ft,Bt,Tt,Le,Pe,ke,Qe,_t=[],gt,wt,Qt,Ft;for(ze=we(ze),gt=ze.length,Te=U,He=0,ft=R,Bt=0;Bt<gt;++Bt)Qe=ze[Bt],Qe<128&&_t.push(re(Qe));for(pt=kt=_t.length,kt&&_t.push(G);pt<gt;){for(Tt=o,Bt=0;Bt<gt;++Bt)Qe=ze[Bt],Qe>=Te&&Qe<Tt&&(Tt=Qe);for(wt=pt+1,Tt-Te>H((o-He)/wt)&&ue("overflow"),He+=(Tt-Te)*wt,Te=Tt,Bt=0;Bt<gt;++Bt)if(Qe=ze[Bt],Qe<Te&&++He>o&&ue("overflow"),Qe==Te){for(Le=He,Pe=f;ke=Pe<=ft?C:Pe>=ft+M?M:Pe-ft,!(Le<ke);Pe+=f)Ft=Le-ke,Qt=f-ke,_t.push(re(We(ke+Ft%Qt,0))),Le=H(Ft/Qt);_t.push(re(We(Le,0))),ft=be(He,wt,pt==kt),He=0,++pt}++He,++Te}return _t.join("")}function at(ze){return ge(ze,function(Te){return W.test(Te)?rt(Te.slice(4).toLowerCase()):Te})}function Je(ze){return ge(ze,function(Te){return J.test(Te)?"xn--"+Ct(Te):Te})}if(l={version:"1.4.1",ucs2:{decode:we,encode:Ee},decode:rt,encode:Ct,toASCII:Je,toUnicode:at},r&&i)if(n.exports==r)i.exports=l;else for(j in l)l.hasOwnProperty(j)&&(r[j]=l[j]);else t.punycode=l})(cde)}(iC,iC.exports)),iC.exports}var vE,zF;function nv(){return zF||(zF=1,vE=TypeError),vE}const dde={},fde=Object.freeze(Object.defineProperty({__proto__:null,default:dde},Symbol.toStringTag,{value:"Module"})),pde=kB(fde);var CE,NF;function K3(){if(NF)return CE;NF=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,f=typeof WeakMap=="function"&&WeakMap.prototype,C=f?WeakMap.prototype.has:null,M=typeof WeakSet=="function"&&WeakSet.prototype,B=M?WeakSet.prototype.has:null,D=typeof WeakRef=="function"&&WeakRef.prototype,R=D?WeakRef.prototype.deref:null,U=Boolean.prototype.valueOf,G=Object.prototype.toString,W=Function.prototype.toString,J=String.prototype.match,$=String.prototype.slice,oe=String.prototype.replace,te=String.prototype.toUpperCase,H=String.prototype.toLowerCase,re=RegExp.prototype.test,j=Array.prototype.concat,ue=Array.prototype.join,me=Array.prototype.slice,ge=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ee=Object.getOwnPropertySymbols,xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,We=typeof Symbol=="function"&&typeof Symbol.iterator=="object",be=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===We||!0)?Symbol.toStringTag:null,rt=Object.prototype.propertyIsEnumerable,Ct=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function($e){return $e.__proto__}:null);function at($e,De){if($e===1/0||$e===-1/0||$e!==$e||$e&&$e>-1e3&&$e<1e3||re.call(/e/,De))return De;var Ze=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof $e=="number"){var m=$e<0?-ge(-$e):ge($e);if(m!==$e){var mt=String(m),At=$.call(De,mt.length+1);return oe.call(mt,Ze,"$&_")+"."+oe.call(oe.call(At,/([0-9]{3})/g,"$&_"),/_$/,"")}}return oe.call(De,Ze,"$&_")}var Je=pde,ze=Je.custom,Te=gt(ze)?ze:null,He={__proto__:null,double:'"',single:"'"},pt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};CE=function $e(De,Ze,m,mt){var At=Ze||{};if(Ft(At,"quoteStyle")&&!Ft(He,At.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ft(At,"maxStringLength")&&(typeof At.maxStringLength=="number"?At.maxStringLength<0&&At.maxStringLength!==1/0:At.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var It=Ft(At,"customInspect")?At.customInspect:!0;if(typeof It!="boolean"&&It!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ft(At,"indent")&&At.indent!==null&&At.indent!=="	"&&!(parseInt(At.indent,10)===At.indent&&At.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ft(At,"numericSeparator")&&typeof At.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var nt=At.numericSeparator;if(typeof De>"u")return"undefined";if(De===null)return"null";if(typeof De=="boolean")return De?"true":"false";if(typeof De=="string")return Pn(De,At);if(typeof De=="number"){if(De===0)return 1/0/De>0?"0":"-0";var en=String(De);return nt?at(De,en):en}if(typeof De=="bigint"){var Tn=String(De)+"n";return nt?at(De,Tn):Tn}var xn=typeof At.depth>"u"?5:At.depth;if(typeof m>"u"&&(m=0),m>=xn&&xn>0&&typeof De=="object")return Bt(De)?"[Array]":"[Object]";var er=Oe(At,m);if(typeof mt>"u")mt=[];else if(jt(mt,De)>=0)return"[Circular]";function Qn(os,Gr,qa){if(Gr&&(mt=me.call(mt),mt.push(Gr)),qa){var sa={depth:At.depth};return Ft(At,"quoteStyle")&&(sa.quoteStyle=At.quoteStyle),$e(os,sa,m+1,mt)}return $e(os,At,m+1,mt)}if(typeof De=="function"&&!Le(De)){var Qr=Vn(De),$r=ct(De,Qn);return"[Function"+(Qr?": "+Qr:" (anonymous)")+"]"+($r.length>0?" { "+ue.call($r,", ")+" }":"")}if(gt(De)){var Br=We?oe.call(String(De),/^(Symbol\(.*\))_[^)]*$/,"$1"):xe.call(De);return typeof De=="object"&&!We?he(Br):Br}if(Hn(De)){for(var br="<"+H.call(String(De.nodeName)),or=De.attributes||[],ti=0;ti<or.length;ti++)br+=" "+or[ti].name+"="+kt(ft(or[ti].value),"double",At);return br+=">",De.childNodes&&De.childNodes.length&&(br+="..."),br+="</"+H.call(String(De.nodeName))+">",br}if(Bt(De)){if(De.length===0)return"[]";var bn=ct(De,Qn);return er&&!fe(bn)?"["+Ge(bn,er)+"]":"[ "+ue.call(bn,", ")+" ]"}if(Pe(De)){var Vi=ct(De,Qn);return!("cause"in Error.prototype)&&"cause"in De&&!rt.call(De,"cause")?"{ ["+String(De)+"] "+ue.call(j.call("[cause]: "+Qn(De.cause),Vi),", ")+" }":Vi.length===0?"["+String(De)+"]":"{ ["+String(De)+"] "+ue.call(Vi,", ")+" }"}if(typeof De=="object"&&It){if(Te&&typeof De[Te]=="function"&&Je)return Je(De,{depth:xn-m});if(It!=="symbol"&&typeof De.inspect=="function")return De.inspect()}if(Un(De)){var zr=[];return r&&r.call(De,function(os,Gr){zr.push(Qn(Gr,De,!0)+" => "+Qn(os,De))}),se("Map",t.call(De),zr,er)}if(En(De)){var $o=[];return o&&o.call(De,function(os){$o.push(Qn(os,De))}),se("Set",l.call(De),$o,er)}if(wn(De))return ie("WeakMap");if(Mr(De))return ie("WeakSet");if(Mn(De))return ie("WeakRef");if(Qe(De))return he(Qn(Number(De)));if(wt(De))return he(Qn(we.call(De)));if(_t(De))return he(U.call(De));if(ke(De))return he(Qn(String(De)));if(typeof window<"u"&&De===window)return"{ [object Window] }";if(typeof globalThis<"u"&&De===globalThis||typeof window<"u"&&De===window)return"{ [object globalThis] }";if(!Tt(De)&&!Le(De)){var is=ct(De,Qn),Zn=Ct?Ct(De)===Object.prototype:De instanceof Object||De.constructor===Object,_i=De instanceof Object?"":"null prototype",Kr=!Zn&&be&&Object(De)===De&&be in De?$.call(ln(De),8,-1):_i?"Object":"",ki=Zn||typeof De.constructor!="function"?"":De.constructor.name?De.constructor.name+" ":"",oa=ki+(Kr||_i?"["+ue.call(j.call([],Kr||[],_i||[]),": ")+"] ":"");return is.length===0?oa+"{}":er?oa+"{"+Ge(is,er)+"}":oa+"{ "+ue.call(is,", ")+" }"}return String(De)};function kt($e,De,Ze){var m=Ze.quoteStyle||De,mt=He[m];return mt+$e+mt}function ft($e){return oe.call(String($e),/"/g,"&quot;")}function Bt($e){return ln($e)==="[object Array]"&&(!be||!(typeof $e=="object"&&be in $e))}function Tt($e){return ln($e)==="[object Date]"&&(!be||!(typeof $e=="object"&&be in $e))}function Le($e){return ln($e)==="[object RegExp]"&&(!be||!(typeof $e=="object"&&be in $e))}function Pe($e){return ln($e)==="[object Error]"&&(!be||!(typeof $e=="object"&&be in $e))}function ke($e){return ln($e)==="[object String]"&&(!be||!(typeof $e=="object"&&be in $e))}function Qe($e){return ln($e)==="[object Number]"&&(!be||!(typeof $e=="object"&&be in $e))}function _t($e){return ln($e)==="[object Boolean]"&&(!be||!(typeof $e=="object"&&be in $e))}function gt($e){if(We)return $e&&typeof $e=="object"&&$e instanceof Symbol;if(typeof $e=="symbol")return!0;if(!$e||typeof $e!="object"||!xe)return!1;try{return xe.call($e),!0}catch{}return!1}function wt($e){if(!$e||typeof $e!="object"||!we)return!1;try{return we.call($e),!0}catch{}return!1}var Qt=Object.prototype.hasOwnProperty||function($e){return $e in this};function Ft($e,De){return Qt.call($e,De)}function ln($e){return G.call($e)}function Vn($e){if($e.name)return $e.name;var De=J.call(W.call($e),/^function\s*([\w$]+)/);return De?De[1]:null}function jt($e,De){if($e.indexOf)return $e.indexOf(De);for(var Ze=0,m=$e.length;Ze<m;Ze++)if($e[Ze]===De)return Ze;return-1}function Un($e){if(!t||!$e||typeof $e!="object")return!1;try{t.call($e);try{l.call($e)}catch{return!0}return $e instanceof Map}catch{}return!1}function wn($e){if(!C||!$e||typeof $e!="object")return!1;try{C.call($e,C);try{B.call($e,B)}catch{return!0}return $e instanceof WeakMap}catch{}return!1}function Mn($e){if(!R||!$e||typeof $e!="object")return!1;try{return R.call($e),!0}catch{}return!1}function En($e){if(!l||!$e||typeof $e!="object")return!1;try{l.call($e);try{t.call($e)}catch{return!0}return $e instanceof Set}catch{}return!1}function Mr($e){if(!B||!$e||typeof $e!="object")return!1;try{B.call($e,B);try{C.call($e,C)}catch{return!0}return $e instanceof WeakSet}catch{}return!1}function Hn($e){return!$e||typeof $e!="object"?!1:typeof HTMLElement<"u"&&$e instanceof HTMLElement?!0:typeof $e.nodeName=="string"&&typeof $e.getAttribute=="function"}function Pn($e,De){if($e.length>De.maxStringLength){var Ze=$e.length-De.maxStringLength,m="... "+Ze+" more character"+(Ze>1?"s":"");return Pn($.call($e,0,De.maxStringLength),De)+m}var mt=pt[De.quoteStyle||"single"];mt.lastIndex=0;var At=oe.call(oe.call($e,mt,"\\$1"),/[\x00-\x1f]/g,Ne);return kt(At,"single",De)}function Ne($e){var De=$e.charCodeAt(0),Ze={8:"b",9:"t",10:"n",12:"f",13:"r"}[De];return Ze?"\\"+Ze:"\\x"+(De<16?"0":"")+te.call(De.toString(16))}function he($e){return"Object("+$e+")"}function ie($e){return $e+" { ? }"}function se($e,De,Ze,m){var mt=m?Ge(Ze,m):ue.call(Ze,", ");return $e+" ("+De+") {"+mt+"}"}function fe($e){for(var De=0;De<$e.length;De++)if(jt($e[De],`
`)>=0)return!1;return!0}function Oe($e,De){var Ze;if($e.indent==="	")Ze="	";else if(typeof $e.indent=="number"&&$e.indent>0)Ze=ue.call(Array($e.indent+1)," ");else return null;return{base:Ze,prev:ue.call(Array(De+1),Ze)}}function Ge($e,De){if($e.length===0)return"";var Ze=`
`+De.prev+De.base;return Ze+ue.call($e,","+Ze)+`
`+De.prev}function ct($e,De){var Ze=Bt($e),m=[];if(Ze){m.length=$e.length;for(var mt=0;mt<$e.length;mt++)m[mt]=Ft($e,mt)?De($e[mt],$e):""}var At=typeof Ee=="function"?Ee($e):[],It;if(We){It={};for(var nt=0;nt<At.length;nt++)It["$"+At[nt]]=At[nt]}for(var en in $e)Ft($e,en)&&(Ze&&String(Number(en))===en&&en<$e.length||We&&It["$"+en]instanceof Symbol||(re.call(/[^\w$]/,en)?m.push(De(en,$e)+": "+De($e[en],$e)):m.push(en+": "+De($e[en],$e))));if(typeof Ee=="function")for(var Tn=0;Tn<At.length;Tn++)rt.call($e,At[Tn])&&m.push("["+De(At[Tn])+"]: "+De($e[At[Tn]],$e));return m}return CE}var _E,GF;function mde(){if(GF)return _E;GF=1;var n=K3(),e=nv(),t=function(o,f,C){for(var M=o,B;(B=M.next)!=null;M=B)if(B.key===f)return M.next=B.next,C||(B.next=o.next,o.next=B),B},r=function(o,f){if(o){var C=t(o,f);return C&&C.value}},i=function(o,f,C){var M=t(o,f);M?M.value=C:o.next={key:f,next:o.next,value:C}},s=function(o,f){return o?!!t(o,f):!1},l=function(o,f){if(o)return t(o,f,!0)};return _E=function(){var f,C={assert:function(M){if(!C.has(M))throw new e("Side channel does not contain "+n(M))},delete:function(M){var B=f&&f.next,D=l(f,M);return D&&B&&B===D&&(f=void 0),!!D},get:function(M){return r(f,M)},has:function(M){return s(f,M)},set:function(M,B){f||(f={next:void 0}),i(f,M,B)}};return C},_E}var bE,jF;function bj(){return jF||(jF=1,bE=Object),bE}var xE,WF;function gde(){return WF||(WF=1,xE=Error),xE}var ME,QF;function yde(){return QF||(QF=1,ME=EvalError),ME}var wE,YF;function vde(){return YF||(YF=1,wE=RangeError),wE}var SE,qF;function Cde(){return qF||(qF=1,SE=ReferenceError),SE}var EE,$F;function _de(){return $F||($F=1,EE=SyntaxError),EE}var BE,VF;function bde(){return VF||(VF=1,BE=URIError),BE}var OE,HF;function xde(){return HF||(HF=1,OE=Math.abs),OE}var IE,ZF;function Mde(){return ZF||(ZF=1,IE=Math.floor),IE}var TE,XF;function wde(){return XF||(XF=1,TE=Math.max),TE}var kE,JF;function Sde(){return JF||(JF=1,kE=Math.min),kE}var PE,eK;function Ede(){return eK||(eK=1,PE=Math.pow),PE}var RE,tK;function Bde(){return tK||(tK=1,RE=Math.round),RE}var DE,nK;function Ode(){return nK||(nK=1,DE=Number.isNaN||function(e){return e!==e}),DE}var FE,rK;function Ide(){if(rK)return FE;rK=1;var n=Ode();return FE=function(t){return n(t)||t===0?t:t<0?-1:1},FE}var KE,iK;function Tde(){return iK||(iK=1,KE=Object.getOwnPropertyDescriptor),KE}var LE,oK;function xj(){if(oK)return LE;oK=1;var n=Tde();if(n)try{n([],"length")}catch{n=null}return LE=n,LE}var UE,sK;function kde(){if(sK)return UE;sK=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return UE=n,UE}var zE,aK;function Pde(){return aK||(aK=1,zE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),zE}var NE,lK;function Rde(){if(lK)return NE;lK=1;var n=typeof Symbol<"u"&&Symbol,e=Pde();return NE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},NE}var GE,AK;function Mj(){return AK||(AK=1,GE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),GE}var jE,uK;function wj(){if(uK)return jE;uK=1;var n=bj();return jE=n.getPrototypeOf||null,jE}var WE,cK;function Dde(){if(cK)return WE;cK=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(f,C){for(var M=[],B=0;B<f.length;B+=1)M[B]=f[B];for(var D=0;D<C.length;D+=1)M[D+f.length]=C[D];return M},s=function(f,C){for(var M=[],B=C,D=0;B<f.length;B+=1,D+=1)M[D]=f[B];return M},l=function(o,f){for(var C="",M=0;M<o.length;M+=1)C+=o[M],M+1<o.length&&(C+=f);return C};return WE=function(f){var C=this;if(typeof C!="function"||e.apply(C)!==r)throw new TypeError(n+C);for(var M=s(arguments,1),B,D=function(){if(this instanceof B){var J=C.apply(this,i(M,arguments));return Object(J)===J?J:this}return C.apply(f,i(M,arguments))},R=t(0,C.length-M.length),U=[],G=0;G<R;G++)U[G]="$"+G;if(B=Function("binder","return function ("+l(U,",")+"){ return binder.apply(this,arguments); }")(D),C.prototype){var W=function(){};W.prototype=C.prototype,B.prototype=new W,W.prototype=null}return B},WE}var QE,hK;function L3(){if(hK)return QE;hK=1;var n=Dde();return QE=Function.prototype.bind||n,QE}var YE,dK;function l8(){return dK||(dK=1,YE=Function.prototype.call),YE}var qE,fK;function Sj(){return fK||(fK=1,qE=Function.prototype.apply),qE}var $E,pK;function Fde(){return pK||(pK=1,$E=typeof Reflect<"u"&&Reflect&&Reflect.apply),$E}var VE,mK;function Kde(){if(mK)return VE;mK=1;var n=L3(),e=Sj(),t=l8(),r=Fde();return VE=r||n.call(t,e),VE}var HE,gK;function Ej(){if(gK)return HE;gK=1;var n=L3(),e=nv(),t=l8(),r=Kde();return HE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},HE}var ZE,yK;function Lde(){if(yK)return ZE;yK=1;var n=Ej(),e=xj(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return ZE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,ZE}var XE,vK;function Ude(){if(vK)return XE;vK=1;var n=Mj(),e=wj(),t=Lde();return XE=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,XE}var JE,CK;function zde(){if(CK)return JE;CK=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=L3();return JE=t.call(n,e),JE}var e6,_K;function A8(){if(_K)return e6;_K=1;var n,e=bj(),t=gde(),r=yde(),i=vde(),s=Cde(),l=_de(),o=nv(),f=bde(),C=xde(),M=Mde(),B=wde(),D=Sde(),R=Ede(),U=Bde(),G=Ide(),W=Function,J=function(Pe){try{return W('"use strict"; return ('+Pe+").constructor;")()}catch{}},$=xj(),oe=kde(),te=function(){throw new o},H=$?function(){try{return arguments.callee,te}catch{try{return $(arguments,"callee").get}catch{return te}}}():te,re=Rde()(),j=Ude(),ue=wj(),me=Mj(),ge=Sj(),we=l8(),Ee={},xe=typeof Uint8Array>"u"||!j?n:j(Uint8Array),We={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":re&&j?j([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":Ee,"%AsyncGenerator%":Ee,"%AsyncGeneratorFunction%":Ee,"%AsyncIteratorPrototype%":Ee,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":W,"%GeneratorFunction%":Ee,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":re&&j?j(j([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!re||!j?n:j(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":$,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!re||!j?n:j(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":re&&j?j(""[Symbol.iterator]()):n,"%Symbol%":re?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":H,"%TypedArray%":xe,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":f,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":we,"%Function.prototype.apply%":ge,"%Object.defineProperty%":oe,"%Object.getPrototypeOf%":ue,"%Math.abs%":C,"%Math.floor%":M,"%Math.max%":B,"%Math.min%":D,"%Math.pow%":R,"%Math.round%":U,"%Math.sign%":G,"%Reflect.getPrototypeOf%":me};if(j)try{null.error}catch(Pe){var be=j(j(Pe));We["%Error.prototype%"]=be}var rt=function Pe(ke){var Qe;if(ke==="%AsyncFunction%")Qe=J("async function () {}");else if(ke==="%GeneratorFunction%")Qe=J("function* () {}");else if(ke==="%AsyncGeneratorFunction%")Qe=J("async function* () {}");else if(ke==="%AsyncGenerator%"){var _t=Pe("%AsyncGeneratorFunction%");_t&&(Qe=_t.prototype)}else if(ke==="%AsyncIteratorPrototype%"){var gt=Pe("%AsyncGenerator%");gt&&j&&(Qe=j(gt.prototype))}return We[ke]=Qe,Qe},Ct={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},at=L3(),Je=zde(),ze=at.call(we,Array.prototype.concat),Te=at.call(ge,Array.prototype.splice),He=at.call(we,String.prototype.replace),pt=at.call(we,String.prototype.slice),kt=at.call(we,RegExp.prototype.exec),ft=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Bt=/\\(\\)?/g,Tt=function(ke){var Qe=pt(ke,0,1),_t=pt(ke,-1);if(Qe==="%"&&_t!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(_t==="%"&&Qe!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var gt=[];return He(ke,ft,function(wt,Qt,Ft,ln){gt[gt.length]=Ft?He(ln,Bt,"$1"):Qt||wt}),gt},Le=function(ke,Qe){var _t=ke,gt;if(Je(Ct,_t)&&(gt=Ct[_t],_t="%"+gt[0]+"%"),Je(We,_t)){var wt=We[_t];if(wt===Ee&&(wt=rt(_t)),typeof wt>"u"&&!Qe)throw new o("intrinsic "+ke+" exists, but is not available. Please file an issue!");return{alias:gt,name:_t,value:wt}}throw new l("intrinsic "+ke+" does not exist!")};return e6=function(ke,Qe){if(typeof ke!="string"||ke.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Qe!="boolean")throw new o('"allowMissing" argument must be a boolean');if(kt(/^%?[^%]*%?$/,ke)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _t=Tt(ke),gt=_t.length>0?_t[0]:"",wt=Le("%"+gt+"%",Qe),Qt=wt.name,Ft=wt.value,ln=!1,Vn=wt.alias;Vn&&(gt=Vn[0],Te(_t,ze([0,1],Vn)));for(var jt=1,Un=!0;jt<_t.length;jt+=1){var wn=_t[jt],Mn=pt(wn,0,1),En=pt(wn,-1);if((Mn==='"'||Mn==="'"||Mn==="`"||En==='"'||En==="'"||En==="`")&&Mn!==En)throw new l("property names with quotes must have matching quotes");if((wn==="constructor"||!Un)&&(ln=!0),gt+="."+wn,Qt="%"+gt+"%",Je(We,Qt))Ft=We[Qt];else if(Ft!=null){if(!(wn in Ft)){if(!Qe)throw new o("base intrinsic for "+ke+" exists, but the property is not available.");return}if($&&jt+1>=_t.length){var Mr=$(Ft,wn);Un=!!Mr,Un&&"get"in Mr&&!("originalValue"in Mr.get)?Ft=Mr.get:Ft=Ft[wn]}else Un=Je(Ft,wn),Ft=Ft[wn];Un&&!ln&&(We[Qt]=Ft)}}return Ft},e6}var t6,bK;function Bj(){if(bK)return t6;bK=1;var n=A8(),e=Ej(),t=e([n("%String.prototype.indexOf%")]);return t6=function(i,s){var l=n(i,!!s);return typeof l=="function"&&t(i,".prototype.")>-1?e([l]):l},t6}var n6,xK;function Oj(){if(xK)return n6;xK=1;var n=A8(),e=Bj(),t=K3(),r=nv(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),f=e("Map.prototype.delete",!0),C=e("Map.prototype.size",!0);return n6=!!i&&function(){var B,D={assert:function(R){if(!D.has(R))throw new r("Side channel does not contain "+t(R))},delete:function(R){if(B){var U=f(B,R);return C(B)===0&&(B=void 0),U}return!1},get:function(R){if(B)return s(B,R)},has:function(R){return B?o(B,R):!1},set:function(R,U){B||(B=new i),l(B,R,U)}};return D},n6}var r6,MK;function Nde(){if(MK)return r6;MK=1;var n=A8(),e=Bj(),t=K3(),r=Oj(),i=nv(),s=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),f=e("WeakMap.prototype.has",!0),C=e("WeakMap.prototype.delete",!0);return r6=s?function(){var B,D,R={assert:function(U){if(!R.has(U))throw new i("Side channel does not contain "+t(U))},delete:function(U){if(s&&U&&(typeof U=="object"||typeof U=="function")){if(B)return C(B,U)}else if(r&&D)return D.delete(U);return!1},get:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?l(B,U):D&&D.get(U)},has:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?f(B,U):!!D&&D.has(U)},set:function(U,G){s&&U&&(typeof U=="object"||typeof U=="function")?(B||(B=new s),o(B,U,G)):r&&(D||(D=r()),D.set(U,G))}};return R}:r,r6}var i6,wK;function Gde(){if(wK)return i6;wK=1;var n=nv(),e=K3(),t=mde(),r=Oj(),i=Nde(),s=i||r||t;return i6=function(){var o,f={assert:function(C){if(!f.has(C))throw new n("Side channel does not contain "+e(C))},delete:function(C){return!!o&&o.delete(C)},get:function(C){return o&&o.get(C)},has:function(C){return!!o&&o.has(C)},set:function(C,M){o||(o=s()),o.set(C,M)}};return f},i6}var o6,SK;function u8(){if(SK)return o6;SK=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return o6={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},o6}var s6,EK;function Ij(){if(EK)return s6;EK=1;var n=u8(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var W=[],J=0;J<256;++J)W.push("%"+((J<16?"0":"")+J.toString(16)).toUpperCase());return W}(),i=function(J){for(;J.length>1;){var $=J.pop(),oe=$.obj[$.prop];if(t(oe)){for(var te=[],H=0;H<oe.length;++H)typeof oe[H]<"u"&&te.push(oe[H]);$.obj[$.prop]=te}}},s=function(J,$){for(var oe=$&&$.plainObjects?{__proto__:null}:{},te=0;te<J.length;++te)typeof J[te]<"u"&&(oe[te]=J[te]);return oe},l=function W(J,$,oe){if(!$)return J;if(typeof $!="object"&&typeof $!="function"){if(t(J))J.push($);else if(J&&typeof J=="object")(oe&&(oe.plainObjects||oe.allowPrototypes)||!e.call(Object.prototype,$))&&(J[$]=!0);else return[J,$];return J}if(!J||typeof J!="object")return[J].concat($);var te=J;return t(J)&&!t($)&&(te=s(J,oe)),t(J)&&t($)?($.forEach(function(H,re){if(e.call(J,re)){var j=J[re];j&&typeof j=="object"&&H&&typeof H=="object"?J[re]=W(j,H,oe):J.push(H)}else J[re]=H}),J):Object.keys($).reduce(function(H,re){var j=$[re];return e.call(H,re)?H[re]=W(H[re],j,oe):H[re]=j,H},te)},o=function(J,$){return Object.keys($).reduce(function(oe,te){return oe[te]=$[te],oe},J)},f=function(W,J,$){var oe=W.replace(/\+/g," ");if($==="iso-8859-1")return oe.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(oe)}catch{return oe}},C=1024,M=function(J,$,oe,te,H){if(J.length===0)return J;var re=J;if(typeof J=="symbol"?re=Symbol.prototype.toString.call(J):typeof J!="string"&&(re=String(J)),oe==="iso-8859-1")return escape(re).replace(/%u[0-9a-f]{4}/gi,function(xe){return"%26%23"+parseInt(xe.slice(2),16)+"%3B"});for(var j="",ue=0;ue<re.length;ue+=C){for(var me=re.length>=C?re.slice(ue,ue+C):re,ge=[],we=0;we<me.length;++we){var Ee=me.charCodeAt(we);if(Ee===45||Ee===46||Ee===95||Ee===126||Ee>=48&&Ee<=57||Ee>=65&&Ee<=90||Ee>=97&&Ee<=122||H===n.RFC1738&&(Ee===40||Ee===41)){ge[ge.length]=me.charAt(we);continue}if(Ee<128){ge[ge.length]=r[Ee];continue}if(Ee<2048){ge[ge.length]=r[192|Ee>>6]+r[128|Ee&63];continue}if(Ee<55296||Ee>=57344){ge[ge.length]=r[224|Ee>>12]+r[128|Ee>>6&63]+r[128|Ee&63];continue}we+=1,Ee=65536+((Ee&1023)<<10|me.charCodeAt(we)&1023),ge[ge.length]=r[240|Ee>>18]+r[128|Ee>>12&63]+r[128|Ee>>6&63]+r[128|Ee&63]}j+=ge.join("")}return j},B=function(J){for(var $=[{obj:{o:J},prop:"o"}],oe=[],te=0;te<$.length;++te)for(var H=$[te],re=H.obj[H.prop],j=Object.keys(re),ue=0;ue<j.length;++ue){var me=j[ue],ge=re[me];typeof ge=="object"&&ge!==null&&oe.indexOf(ge)===-1&&($.push({obj:re,prop:me}),oe.push(ge))}return i($),J},D=function(J){return Object.prototype.toString.call(J)==="[object RegExp]"},R=function(J){return!J||typeof J!="object"?!1:!!(J.constructor&&J.constructor.isBuffer&&J.constructor.isBuffer(J))},U=function(J,$){return[].concat(J,$)},G=function(J,$){if(t(J)){for(var oe=[],te=0;te<J.length;te+=1)oe.push($(J[te]));return oe}return $(J)};return s6={arrayToObject:s,assign:o,combine:U,compact:B,decode:f,encode:M,isBuffer:R,isRegExp:D,maybeMap:G,merge:l},s6}var a6,BK;function jde(){if(BK)return a6;BK=1;var n=Gde(),e=Ij(),t=u8(),r=Object.prototype.hasOwnProperty,i={brackets:function(W){return W+"[]"},comma:"comma",indices:function(W,J){return W+"["+J+"]"},repeat:function(W){return W}},s=Array.isArray,l=Array.prototype.push,o=function(G,W){l.apply(G,s(W)?W:[W])},f=Date.prototype.toISOString,C=t.default,M={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:C,formatter:t.formatters[C],indices:!1,serializeDate:function(W){return f.call(W)},skipNulls:!1,strictNullHandling:!1},B=function(W){return typeof W=="string"||typeof W=="number"||typeof W=="boolean"||typeof W=="symbol"||typeof W=="bigint"},D={},R=function G(W,J,$,oe,te,H,re,j,ue,me,ge,we,Ee,xe,We,be,rt,Ct){for(var at=W,Je=Ct,ze=0,Te=!1;(Je=Je.get(D))!==void 0&&!Te;){var He=Je.get(W);if(ze+=1,typeof He<"u"){if(He===ze)throw new RangeError("Cyclic object value");Te=!0}typeof Je.get(D)>"u"&&(ze=0)}if(typeof me=="function"?at=me(J,at):at instanceof Date?at=Ee(at):$==="comma"&&s(at)&&(at=e.maybeMap(at,function(Qt){return Qt instanceof Date?Ee(Qt):Qt})),at===null){if(H)return ue&&!be?ue(J,M.encoder,rt,"key",xe):J;at=""}if(B(at)||e.isBuffer(at)){if(ue){var pt=be?J:ue(J,M.encoder,rt,"key",xe);return[We(pt)+"="+We(ue(at,M.encoder,rt,"value",xe))]}return[We(J)+"="+We(String(at))]}var kt=[];if(typeof at>"u")return kt;var ft;if($==="comma"&&s(at))be&&ue&&(at=e.maybeMap(at,ue)),ft=[{value:at.length>0?at.join(",")||null:void 0}];else if(s(me))ft=me;else{var Bt=Object.keys(at);ft=ge?Bt.sort(ge):Bt}var Tt=j?String(J).replace(/\./g,"%2E"):String(J),Le=oe&&s(at)&&at.length===1?Tt+"[]":Tt;if(te&&s(at)&&at.length===0)return Le+"[]";for(var Pe=0;Pe<ft.length;++Pe){var ke=ft[Pe],Qe=typeof ke=="object"&&ke&&typeof ke.value<"u"?ke.value:at[ke];if(!(re&&Qe===null)){var _t=we&&j?String(ke).replace(/\./g,"%2E"):String(ke),gt=s(at)?typeof $=="function"?$(Le,_t):Le:Le+(we?"."+_t:"["+_t+"]");Ct.set(W,ze);var wt=n();wt.set(D,Ct),o(kt,G(Qe,gt,$,oe,te,H,re,j,$==="comma"&&be&&s(at)?null:ue,me,ge,we,Ee,xe,We,be,rt,wt))}}return kt},U=function(W){if(!W)return M;if(typeof W.allowEmptyArrays<"u"&&typeof W.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof W.encodeDotInKeys<"u"&&typeof W.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(W.encoder!==null&&typeof W.encoder<"u"&&typeof W.encoder!="function")throw new TypeError("Encoder has to be a function.");var J=W.charset||M.charset;if(typeof W.charset<"u"&&W.charset!=="utf-8"&&W.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var $=t.default;if(typeof W.format<"u"){if(!r.call(t.formatters,W.format))throw new TypeError("Unknown format option provided.");$=W.format}var oe=t.formatters[$],te=M.filter;(typeof W.filter=="function"||s(W.filter))&&(te=W.filter);var H;if(W.arrayFormat in i?H=W.arrayFormat:"indices"in W?H=W.indices?"indices":"repeat":H=M.arrayFormat,"commaRoundTrip"in W&&typeof W.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var re=typeof W.allowDots>"u"?W.encodeDotInKeys===!0?!0:M.allowDots:!!W.allowDots;return{addQueryPrefix:typeof W.addQueryPrefix=="boolean"?W.addQueryPrefix:M.addQueryPrefix,allowDots:re,allowEmptyArrays:typeof W.allowEmptyArrays=="boolean"?!!W.allowEmptyArrays:M.allowEmptyArrays,arrayFormat:H,charset:J,charsetSentinel:typeof W.charsetSentinel=="boolean"?W.charsetSentinel:M.charsetSentinel,commaRoundTrip:!!W.commaRoundTrip,delimiter:typeof W.delimiter>"u"?M.delimiter:W.delimiter,encode:typeof W.encode=="boolean"?W.encode:M.encode,encodeDotInKeys:typeof W.encodeDotInKeys=="boolean"?W.encodeDotInKeys:M.encodeDotInKeys,encoder:typeof W.encoder=="function"?W.encoder:M.encoder,encodeValuesOnly:typeof W.encodeValuesOnly=="boolean"?W.encodeValuesOnly:M.encodeValuesOnly,filter:te,format:$,formatter:oe,serializeDate:typeof W.serializeDate=="function"?W.serializeDate:M.serializeDate,skipNulls:typeof W.skipNulls=="boolean"?W.skipNulls:M.skipNulls,sort:typeof W.sort=="function"?W.sort:null,strictNullHandling:typeof W.strictNullHandling=="boolean"?W.strictNullHandling:M.strictNullHandling}};return a6=function(G,W){var J=G,$=U(W),oe,te;typeof $.filter=="function"?(te=$.filter,J=te("",J)):s($.filter)&&(te=$.filter,oe=te);var H=[];if(typeof J!="object"||J===null)return"";var re=i[$.arrayFormat],j=re==="comma"&&$.commaRoundTrip;oe||(oe=Object.keys(J)),$.sort&&oe.sort($.sort);for(var ue=n(),me=0;me<oe.length;++me){var ge=oe[me],we=J[ge];$.skipNulls&&we===null||o(H,R(we,ge,re,j,$.allowEmptyArrays,$.strictNullHandling,$.skipNulls,$.encodeDotInKeys,$.encode?$.encoder:null,$.filter,$.sort,$.allowDots,$.serializeDate,$.format,$.formatter,$.encodeValuesOnly,$.charset,ue))}var Ee=H.join($.delimiter),xe=$.addQueryPrefix===!0?"?":"";return $.charsetSentinel&&($.charset==="iso-8859-1"?xe+="utf8=%26%2310003%3B&":xe+="utf8=%E2%9C%93&"),Ee.length>0?xe+Ee:""},a6}var l6,OK;function Wde(){if(OK)return l6;OK=1;var n=Ij(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(D){return D.replace(/&#(\d+);/g,function(R,U){return String.fromCharCode(parseInt(U,10))})},s=function(D,R,U){if(D&&typeof D=="string"&&R.comma&&D.indexOf(",")>-1)return D.split(",");if(R.throwOnLimitExceeded&&U>=R.arrayLimit)throw new RangeError("Array limit exceeded. Only "+R.arrayLimit+" element"+(R.arrayLimit===1?"":"s")+" allowed in an array.");return D},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",f=function(R,U){var G={__proto__:null},W=U.ignoreQueryPrefix?R.replace(/^\?/,""):R;W=W.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var J=U.parameterLimit===1/0?void 0:U.parameterLimit,$=W.split(U.delimiter,U.throwOnLimitExceeded?J+1:J);if(U.throwOnLimitExceeded&&$.length>J)throw new RangeError("Parameter limit exceeded. Only "+J+" parameter"+(J===1?"":"s")+" allowed.");var oe=-1,te,H=U.charset;if(U.charsetSentinel)for(te=0;te<$.length;++te)$[te].indexOf("utf8=")===0&&($[te]===o?H="utf-8":$[te]===l&&(H="iso-8859-1"),oe=te,te=$.length);for(te=0;te<$.length;++te)if(te!==oe){var re=$[te],j=re.indexOf("]="),ue=j===-1?re.indexOf("="):j+1,me,ge;ue===-1?(me=U.decoder(re,r.decoder,H,"key"),ge=U.strictNullHandling?null:""):(me=U.decoder(re.slice(0,ue),r.decoder,H,"key"),ge=n.maybeMap(s(re.slice(ue+1),U,t(G[me])?G[me].length:0),function(Ee){return U.decoder(Ee,r.decoder,H,"value")})),ge&&U.interpretNumericEntities&&H==="iso-8859-1"&&(ge=i(String(ge))),re.indexOf("[]=")>-1&&(ge=t(ge)?[ge]:ge);var we=e.call(G,me);we&&U.duplicates==="combine"?G[me]=n.combine(G[me],ge):(!we||U.duplicates==="last")&&(G[me]=ge)}return G},C=function(D,R,U,G){var W=0;if(D.length>0&&D[D.length-1]==="[]"){var J=D.slice(0,-1).join("");W=Array.isArray(R)&&R[J]?R[J].length:0}for(var $=G?R:s(R,U,W),oe=D.length-1;oe>=0;--oe){var te,H=D[oe];if(H==="[]"&&U.parseArrays)te=U.allowEmptyArrays&&($===""||U.strictNullHandling&&$===null)?[]:n.combine([],$);else{te=U.plainObjects?{__proto__:null}:{};var re=H.charAt(0)==="["&&H.charAt(H.length-1)==="]"?H.slice(1,-1):H,j=U.decodeDotInKeys?re.replace(/%2E/g,"."):re,ue=parseInt(j,10);!U.parseArrays&&j===""?te={0:$}:!isNaN(ue)&&H!==j&&String(ue)===j&&ue>=0&&U.parseArrays&&ue<=U.arrayLimit?(te=[],te[ue]=$):j!=="__proto__"&&(te[j]=$)}$=te}return $},M=function(R,U,G,W){if(R){var J=G.allowDots?R.replace(/\.([^.[]+)/g,"[$1]"):R,$=/(\[[^[\]]*])/,oe=/(\[[^[\]]*])/g,te=G.depth>0&&$.exec(J),H=te?J.slice(0,te.index):J,re=[];if(H){if(!G.plainObjects&&e.call(Object.prototype,H)&&!G.allowPrototypes)return;re.push(H)}for(var j=0;G.depth>0&&(te=oe.exec(J))!==null&&j<G.depth;){if(j+=1,!G.plainObjects&&e.call(Object.prototype,te[1].slice(1,-1))&&!G.allowPrototypes)return;re.push(te[1])}if(te){if(G.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+G.depth+" and strictDepth is true");re.push("["+J.slice(te.index)+"]")}return C(re,U,G,W)}},B=function(R){if(!R)return r;if(typeof R.allowEmptyArrays<"u"&&typeof R.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof R.decodeDotInKeys<"u"&&typeof R.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(R.decoder!==null&&typeof R.decoder<"u"&&typeof R.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof R.charset<"u"&&R.charset!=="utf-8"&&R.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof R.throwOnLimitExceeded<"u"&&typeof R.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var U=typeof R.charset>"u"?r.charset:R.charset,G=typeof R.duplicates>"u"?r.duplicates:R.duplicates;if(G!=="combine"&&G!=="first"&&G!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var W=typeof R.allowDots>"u"?R.decodeDotInKeys===!0?!0:r.allowDots:!!R.allowDots;return{allowDots:W,allowEmptyArrays:typeof R.allowEmptyArrays=="boolean"?!!R.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof R.allowPrototypes=="boolean"?R.allowPrototypes:r.allowPrototypes,allowSparse:typeof R.allowSparse=="boolean"?R.allowSparse:r.allowSparse,arrayLimit:typeof R.arrayLimit=="number"?R.arrayLimit:r.arrayLimit,charset:U,charsetSentinel:typeof R.charsetSentinel=="boolean"?R.charsetSentinel:r.charsetSentinel,comma:typeof R.comma=="boolean"?R.comma:r.comma,decodeDotInKeys:typeof R.decodeDotInKeys=="boolean"?R.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof R.decoder=="function"?R.decoder:r.decoder,delimiter:typeof R.delimiter=="string"||n.isRegExp(R.delimiter)?R.delimiter:r.delimiter,depth:typeof R.depth=="number"||R.depth===!1?+R.depth:r.depth,duplicates:G,ignoreQueryPrefix:R.ignoreQueryPrefix===!0,interpretNumericEntities:typeof R.interpretNumericEntities=="boolean"?R.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof R.parameterLimit=="number"?R.parameterLimit:r.parameterLimit,parseArrays:R.parseArrays!==!1,plainObjects:typeof R.plainObjects=="boolean"?R.plainObjects:r.plainObjects,strictDepth:typeof R.strictDepth=="boolean"?!!R.strictDepth:r.strictDepth,strictNullHandling:typeof R.strictNullHandling=="boolean"?R.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof R.throwOnLimitExceeded=="boolean"?R.throwOnLimitExceeded:!1}};return l6=function(D,R){var U=B(R);if(D===""||D===null||typeof D>"u")return U.plainObjects?{__proto__:null}:{};for(var G=typeof D=="string"?f(D,U):D,W=U.plainObjects?{__proto__:null}:{},J=Object.keys(G),$=0;$<J.length;++$){var oe=J[$],te=M(oe,G[oe],U,typeof D=="string");W=n.merge(W,te,U)}return U.allowSparse===!0?W:n.compact(W)},l6}var A6,IK;function Qde(){if(IK)return A6;IK=1;var n=jde(),e=Wde(),t=u8();return A6={formats:t,parse:e,stringify:n},A6}var TK;function Yde(){if(TK)return xg;TK=1;var n=hde();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(l),f=["%","/","?",";","#"].concat(o),C=["/","?","#"],M=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,D=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},G={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=Qde();function J(H,re,j){if(H&&typeof H=="object"&&H instanceof e)return H;var ue=new e;return ue.parse(H,re,j),ue}e.prototype.parse=function(H,re,j){if(typeof H!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof H);var ue=H.indexOf("?"),me=ue!==-1&&ue<H.indexOf("#")?"?":"#",ge=H.split(me),we=/\\/g;ge[0]=ge[0].replace(we,"/"),H=ge.join(me);var Ee=H;if(Ee=Ee.trim(),!j&&H.split("#").length===1){var xe=i.exec(Ee);if(xe)return this.path=Ee,this.href=Ee,this.pathname=xe[1],xe[2]?(this.search=xe[2],re?this.query=W.parse(this.search.substr(1)):this.query=this.search.substr(1)):re&&(this.search="",this.query={}),this}var We=t.exec(Ee);if(We){We=We[0];var be=We.toLowerCase();this.protocol=be,Ee=Ee.substr(We.length)}if(j||We||Ee.match(/^\/\/[^@/]+@[^@/]+/)){var rt=Ee.substr(0,2)==="//";rt&&!(We&&U[We])&&(Ee=Ee.substr(2),this.slashes=!0)}if(!U[We]&&(rt||We&&!G[We])){for(var Ct=-1,at=0;at<C.length;at++){var Je=Ee.indexOf(C[at]);Je!==-1&&(Ct===-1||Je<Ct)&&(Ct=Je)}var ze,Te;Ct===-1?Te=Ee.lastIndexOf("@"):Te=Ee.lastIndexOf("@",Ct),Te!==-1&&(ze=Ee.slice(0,Te),Ee=Ee.slice(Te+1),this.auth=decodeURIComponent(ze)),Ct=-1;for(var at=0;at<f.length;at++){var Je=Ee.indexOf(f[at]);Je!==-1&&(Ct===-1||Je<Ct)&&(Ct=Je)}Ct===-1&&(Ct=Ee.length),this.host=Ee.slice(0,Ct),Ee=Ee.slice(Ct),this.parseHost(),this.hostname=this.hostname||"";var He=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!He)for(var pt=this.hostname.split(/\./),at=0,kt=pt.length;at<kt;at++){var ft=pt[at];if(ft&&!ft.match(B)){for(var Bt="",Tt=0,Le=ft.length;Tt<Le;Tt++)ft.charCodeAt(Tt)>127?Bt+="x":Bt+=ft[Tt];if(!Bt.match(B)){var Pe=pt.slice(0,at),ke=pt.slice(at+1),Qe=ft.match(D);Qe&&(Pe.push(Qe[1]),ke.unshift(Qe[2])),ke.length&&(Ee="/"+ke.join(".")+Ee),this.hostname=Pe.join(".");break}}}this.hostname.length>M?this.hostname="":this.hostname=this.hostname.toLowerCase(),He||(this.hostname=n.toASCII(this.hostname));var _t=this.port?":"+this.port:"",gt=this.hostname||"";this.host=gt+_t,this.href+=this.host,He&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),Ee[0]!=="/"&&(Ee="/"+Ee))}if(!R[be])for(var at=0,kt=o.length;at<kt;at++){var wt=o[at];if(Ee.indexOf(wt)!==-1){var Qt=encodeURIComponent(wt);Qt===wt&&(Qt=escape(wt)),Ee=Ee.split(wt).join(Qt)}}var Ft=Ee.indexOf("#");Ft!==-1&&(this.hash=Ee.substr(Ft),Ee=Ee.slice(0,Ft));var ln=Ee.indexOf("?");if(ln!==-1?(this.search=Ee.substr(ln),this.query=Ee.substr(ln+1),re&&(this.query=W.parse(this.query)),Ee=Ee.slice(0,ln)):re&&(this.search="",this.query={}),Ee&&(this.pathname=Ee),G[be]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _t=this.pathname||"",Vn=this.search||"";this.path=_t+Vn}return this.href=this.format(),this};function $(H){return typeof H=="string"&&(H=J(H)),H instanceof e?H.format():e.prototype.format.call(H)}e.prototype.format=function(){var H=this.auth||"";H&&(H=encodeURIComponent(H),H=H.replace(/%3A/i,":"),H+="@");var re=this.protocol||"",j=this.pathname||"",ue=this.hash||"",me=!1,ge="";this.host?me=H+this.host:this.hostname&&(me=H+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(me+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ge=W.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var we=this.search||ge&&"?"+ge||"";return re&&re.substr(-1)!==":"&&(re+=":"),this.slashes||(!re||G[re])&&me!==!1?(me="//"+(me||""),j&&j.charAt(0)!=="/"&&(j="/"+j)):me||(me=""),ue&&ue.charAt(0)!=="#"&&(ue="#"+ue),we&&we.charAt(0)!=="?"&&(we="?"+we),j=j.replace(/[?#]/g,function(Ee){return encodeURIComponent(Ee)}),we=we.replace("#","%23"),re+me+j+we+ue};function oe(H,re){return J(H,!1,!0).resolve(re)}e.prototype.resolve=function(H){return this.resolveObject(J(H,!1,!0)).format()};function te(H,re){return H?J(H,!1,!0).resolveObject(re):re}return e.prototype.resolveObject=function(H){if(typeof H=="string"){var re=new e;re.parse(H,!1,!0),H=re}for(var j=new e,ue=Object.keys(this),me=0;me<ue.length;me++){var ge=ue[me];j[ge]=this[ge]}if(j.hash=H.hash,H.href==="")return j.href=j.format(),j;if(H.slashes&&!H.protocol){for(var we=Object.keys(H),Ee=0;Ee<we.length;Ee++){var xe=we[Ee];xe!=="protocol"&&(j[xe]=H[xe])}return G[j.protocol]&&j.hostname&&!j.pathname&&(j.pathname="/",j.path=j.pathname),j.href=j.format(),j}if(H.protocol&&H.protocol!==j.protocol){if(!G[H.protocol]){for(var We=Object.keys(H),be=0;be<We.length;be++){var rt=We[be];j[rt]=H[rt]}return j.href=j.format(),j}if(j.protocol=H.protocol,!H.host&&!U[H.protocol]){for(var kt=(H.pathname||"").split("/");kt.length&&!(H.host=kt.shift()););H.host||(H.host=""),H.hostname||(H.hostname=""),kt[0]!==""&&kt.unshift(""),kt.length<2&&kt.unshift(""),j.pathname=kt.join("/")}else j.pathname=H.pathname;if(j.search=H.search,j.query=H.query,j.host=H.host||"",j.auth=H.auth,j.hostname=H.hostname||H.host,j.port=H.port,j.pathname||j.search){var Ct=j.pathname||"",at=j.search||"";j.path=Ct+at}return j.slashes=j.slashes||H.slashes,j.href=j.format(),j}var Je=j.pathname&&j.pathname.charAt(0)==="/",ze=H.host||H.pathname&&H.pathname.charAt(0)==="/",Te=ze||Je||j.host&&H.pathname,He=Te,pt=j.pathname&&j.pathname.split("/")||[],kt=H.pathname&&H.pathname.split("/")||[],ft=j.protocol&&!G[j.protocol];if(ft&&(j.hostname="",j.port=null,j.host&&(pt[0]===""?pt[0]=j.host:pt.unshift(j.host)),j.host="",H.protocol&&(H.hostname=null,H.port=null,H.host&&(kt[0]===""?kt[0]=H.host:kt.unshift(H.host)),H.host=null),Te=Te&&(kt[0]===""||pt[0]==="")),ze)j.host=H.host||H.host===""?H.host:j.host,j.hostname=H.hostname||H.hostname===""?H.hostname:j.hostname,j.search=H.search,j.query=H.query,pt=kt;else if(kt.length)pt||(pt=[]),pt.pop(),pt=pt.concat(kt),j.search=H.search,j.query=H.query;else if(H.search!=null){if(ft){j.host=pt.shift(),j.hostname=j.host;var Bt=j.host&&j.host.indexOf("@")>0?j.host.split("@"):!1;Bt&&(j.auth=Bt.shift(),j.hostname=Bt.shift(),j.host=j.hostname)}return j.search=H.search,j.query=H.query,(j.pathname!==null||j.search!==null)&&(j.path=(j.pathname?j.pathname:"")+(j.search?j.search:"")),j.href=j.format(),j}if(!pt.length)return j.pathname=null,j.search?j.path="/"+j.search:j.path=null,j.href=j.format(),j;for(var Tt=pt.slice(-1)[0],Le=(j.host||H.host||pt.length>1)&&(Tt==="."||Tt==="..")||Tt==="",Pe=0,ke=pt.length;ke>=0;ke--)Tt=pt[ke],Tt==="."?pt.splice(ke,1):Tt===".."?(pt.splice(ke,1),Pe++):Pe&&(pt.splice(ke,1),Pe--);if(!Te&&!He)for(;Pe--;Pe)pt.unshift("..");Te&&pt[0]!==""&&(!pt[0]||pt[0].charAt(0)!=="/")&&pt.unshift(""),Le&&pt.join("/").substr(-1)!=="/"&&pt.push("");var Qe=pt[0]===""||pt[0]&&pt[0].charAt(0)==="/";if(ft){j.hostname=Qe?"":pt.length?pt.shift():"",j.host=j.hostname;var Bt=j.host&&j.host.indexOf("@")>0?j.host.split("@"):!1;Bt&&(j.auth=Bt.shift(),j.hostname=Bt.shift(),j.host=j.hostname)}return Te=Te||j.host&&pt.length,Te&&!Qe&&pt.unshift(""),pt.length>0?j.pathname=pt.join("/"):(j.pathname=null,j.path=null),(j.pathname!==null||j.search!==null)&&(j.path=(j.pathname?j.pathname:"")+(j.search?j.search:"")),j.auth=H.auth||j.auth,j.slashes=j.slashes||H.slashes,j.href=j.format(),j},e.prototype.parseHost=function(){var H=this.host,re=r.exec(H);re&&(re=re[0],re!==":"&&(this.port=re.substr(1)),H=H.substr(0,H.length-re.length)),H&&(this.hostname=H)},xg.parse=J,xg.resolve=oe,xg.resolveObject=te,xg.format=$,xg.Url=e,xg}var qde=Yde();const kK=yA(qde);function ys(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ys=function(){return l},l}ys();function Tj(n,e,t){ys().f[0]++,ys().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(ys().f[1]++,ys().s[1]++,r.ok)ys().b[0][1]++;else throw ys().b[0][0]++,ys().s[2]++,new Error("Failed to load metadata for "+n);return ys().s[3]++,r.json()}).then(r=>{ys().f[2]++,ys().s[4]++,t(r)}).catch(()=>{ys().f[3]++,ys().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),ys().s[6]++,t(e)})}function $de(n,e){if(ys().f[4]++,ys().s[7]++,n)ys().b[1][1]++;else return ys().b[1][0]++,ys().s[8]++,e([]);const t=(ys().s[9]++,kK.parse(n)),r=(ys().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");ys().s[11]++,t.pathname===r?(ys().b[2][0]++,ys().s[12]++,t.pathname="/fontstacks.json"):(ys().b[2][1]++,ys().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(ys().s[14]++,kK.format(t));ys().s[15]++,Tj(i,[],e)}function Vde(n,e){if(ys().f[5]++,ys().s[16]++,n)ys().b[3][1]++;else return ys().b[3][0]++,ys().s[17]++,e([]);const t=(ys().s[18]++,n+".json");ys().s[19]++,Tj(t,{},r=>(ys().f[6]++,ys().s[20]++,e(Object.keys(r))))}function Xh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xh=function(){return l},l}Xh();function kj(n,e){Xh().f[0]++;const t=(Xh().s[0]++,yq(n,e));return Xh().s[1]++,t.map(r=>(Xh().f[1]++,Xh().s[2]++,r.command+" "+r.args.join(" ")))}function Hde(n,e){return Xh().f[2]++,Xh().s[3]++,kj(n,e).map(t=>(Xh().f[3]++,Xh().s[4]++,"Undo "+t))}function Zde(n,e){return Xh().f[4]++,Xh().s[5]++,kj(n,e).map(t=>(Xh().f[5]++,Xh().s[6]++,"Redo "+t))}function Zu(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zu=function(){return l},l}Zu();function Xde(){Zu().f[0]++;const n=(Zu().s[0]++,new URL(window.location.href)),e=(Zu().s[1]++,n.searchParams.get("style"));return Zu().s[2]++,e?(Zu().b[0][0]++,Zu().s[3]++,n.searchParams.delete("style"),Zu().s[4]++,window.history.replaceState({},document.title,n.toString())):Zu().b[0][1]++,Zu().s[5]++,e}async function Pj(n){Zu().f[1]++,Zu().s[6]++,console.log("Loading style",n),Zu().s[7]++;try{const e=(Zu().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(Zu().s[9]++,await e.json());return Zu().s[10]++,Ed.ensureStyleValidity(t)}catch{return Zu().s[11]++,console.warn("Could not fetch default style: "+n),Zu().s[12]++,Ed.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var IB=function(n,e){return IB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},IB(n,e)};function Rj(n,e){IB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Jde(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function efe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return s}function tfe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(efe(arguments[e]));return n}var Dj=function(){function n(e,t){this.target=t,this.type=e}return n}(),nfe=function(n){Rj(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(Dj),rfe=function(n){Rj(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(Dj);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var ife=function(){if(typeof WebSocket<"u")return WebSocket},ofe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},Mg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var l=i._options.minUptime,o=l===void 0?Mg.minUptime:l;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(f){return i._ws.send(f)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(f){return i._callEventListener(s,f)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(l){return i._callEventListener(s,l)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(l){return i._callEventListener(s,l)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(l){return i._callEventListener(s,l)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?Mg.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=Jde(i),l=s.next();!l.done;l=s.next()){var o=l.value;this._callEventListener(e,o)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,tfe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?Mg.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?Mg.minReconnectionDelay:i,l=e.maxReconnectionDelay,o=l===void 0?Mg.maxReconnectionDelay:l,f=0;return this._retryCount>0&&(f=s*Math.pow(r,this._retryCount-1),f>o&&(f=o)),this._debug("next delay",f),f},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?Mg.maxRetries:r,s=t.connectionTimeout,l=s===void 0?Mg.connectionTimeout:s,o=t.WebSocket,f=o===void 0?ife():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!ofe(f))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(C){e._closeCalled||(e._debug("connect",{url:C,protocols:e._protocols}),e._ws=e._protocols?new f(C,e._protocols):new f(C),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new nfe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new rfe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Fj(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fj=function(){return l},l}Fj();function Ur(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ur=function(){return l},l}Ur();const U3=(Ur().s[0]++,"maputnik"),Kj=(Ur().s[1]++,"style"),PK=(Ur().s[2]++,{latest:[U3,"latest_style"].join(":")}),sfe=(Ur().s[3]++,_j[0].url);function RK(){return Ur().f[0]++,Ur().s[4]++,Pj(sfe)}function afe(){Ur().f[1]++;const n=(Ur().s[5]++,[]);Ur().s[6]++;for(let e=(Ur().s[7]++,0);e<window.localStorage.length;e++){const t=(Ur().s[8]++,window.localStorage.key(e));Ur().s[9]++,Lj(t)?(Ur().b[0][0]++,Ur().s[10]++,n.push(lfe(t))):Ur().b[0][1]++}return Ur().s[11]++,n}function Lj(n){Ur().f[2]++;const e=(Ur().s[12]++,n.split(":"));return Ur().s[13]++,Ur().b[1][0]++,e.length===3&&(Ur().b[1][1]++,e[0]===U3)&&(Ur().b[1][2]++,e[1]===Kj)}function lfe(n){if(Ur().f[3]++,Ur().s[14]++,Lj(n))Ur().b[2][1]++;else throw Ur().b[2][0]++,Ur().s[15]++,"Key is not a valid style key";const e=(Ur().s[16]++,n.split(":")),t=(Ur().s[17]++,e[2]);return Ur().s[18]++,t}function DK(n){return Ur().f[4]++,Ur().s[19]++,[U3,Kj,n].join(":")}class Afe{mapStyles;constructor(){Ur().f[5]++,Ur().s[20]++,this.mapStyles=afe()}purge(){Ur().f[6]++,Ur().s[21]++;for(let e=(Ur().s[22]++,0);e<window.localStorage.length;e++){const t=(Ur().s[23]++,window.localStorage.key(e));Ur().s[24]++,t.startsWith(U3)?(Ur().b[3][0]++,Ur().s[25]++,window.localStorage.removeItem(t)):Ur().b[3][1]++}}async getLatestStyle(){if(Ur().f[7]++,Ur().s[26]++,this.mapStyles.length===0)return Ur().b[4][0]++,Ur().s[27]++,RK();Ur().b[4][1]++;const e=(Ur().s[28]++,window.localStorage.getItem(PK.latest)),t=(Ur().s[29]++,window.localStorage.getItem(DK(e)));return Ur().s[30]++,t?(Ur().b[5][0]++,Ur().s[31]++,JSON.parse(t)):(Ur().b[5][1]++,Ur().s[32]++,RK())}save(e){Ur().f[8]++,Ur().s[33]++,e=Ed.ensureStyleValidity(e);const t=(Ur().s[34]++,DK(e.id));Ur().s[35]++;const r=()=>{Ur().f[9]++,Ur().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),Ur().s[37]++,window.localStorage.setItem(PK.latest,e.id)};Ur().s[38]++;try{Ur().s[39]++,r()}catch(i){if(Ur().s[40]++,Ur().b[7][0]++,i instanceof DOMException&&(Ur().b[7][1]++,i.code===22||(Ur().b[7][2]++,i.code===1014)||(Ur().b[7][3]++,i.name==="QuotaExceededError")||(Ur().b[7][4]++,i.name==="NS_ERROR_DOM_QUOTA_REACHED")))Ur().b[6][0]++,Ur().s[41]++,this.purge(),Ur().s[42]++,r();else throw Ur().b[6][1]++,Ur().s[43]++,i}return Ur().s[44]++,e}}function Hh(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hh=function(){return l},l}Hh();async function ufe(n){Hh().f[0]++;const e=(Hh().s[0]++,Xde()),t=(Hh().s[1]++,Hh().b[0][0]++,e&&(Hh().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let r;Hh().s[2]++,Hh().b[1][1]++,Hh().s[9]++,r=new Afe;const i=(Hh().s[10]++,t?(Hh().b[2][0]++,await Pj(e)):(Hh().b[2][1]++,await r.getLatestStyle()));return Hh().s[11]++,n(i,{initialLoad:!0,save:!1}),Hh().s[12]++,r}function gl(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gl=function(){return l},l}gl();class cfe{revisions;currentIdx;constructor(e=(gl().b[0][0]++,[])){gl().f[0]++,gl().s[0]++,this.revisions=e,gl().s[1]++,this.currentIdx=e.length-1}get latest(){return gl().f[1]++,gl().s[2]++,this.revisions[this.revisions.length-1]}get current(){return gl().f[2]++,gl().s[3]++,this.revisions[this.currentIdx]}addRevision(e){gl().f[3]++,gl().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),gl().s[5]++,this.revisions.push(e),gl().s[6]++,this.currentIdx++}undo(){return gl().f[4]++,gl().s[7]++,this.currentIdx>0?(gl().b[1][0]++,gl().s[8]++,this.currentIdx--):gl().b[1][1]++,gl().s[9]++,this.current}redo(){return gl().f[5]++,gl().s[10]++,this.currentIdx<this.revisions.length-1?(gl().b[2][0]++,gl().s[11]++,this.currentIdx++):gl().b[2][1]++,gl().s[12]++,this.current}}var u6,FK;function hfe(){if(FK)return u6;FK=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,f=typeof window=="object"&&window&&window.Object===Object&&window,C=typeof self=="object"&&self&&self.Object===Object&&self,M=f||C||Function("return this")(),B=Object.prototype,D=B.toString,R=Math.max,U=Math.min,G=function(){return M.Date.now()};function W(re,j,ue){var me,ge,we,Ee,xe,We,be=0,rt=!1,Ct=!1,at=!0;if(typeof re!="function")throw new TypeError(n);j=H(j)||0,$(ue)&&(rt=!!ue.leading,Ct="maxWait"in ue,we=Ct?R(H(ue.maxWait)||0,j):we,at="trailing"in ue?!!ue.trailing:at);function Je(Le){var Pe=me,ke=ge;return me=ge=void 0,be=Le,Ee=re.apply(ke,Pe),Ee}function ze(Le){return be=Le,xe=setTimeout(pt,j),rt?Je(Le):Ee}function Te(Le){var Pe=Le-We,ke=Le-be,Qe=j-Pe;return Ct?U(Qe,we-ke):Qe}function He(Le){var Pe=Le-We,ke=Le-be;return We===void 0||Pe>=j||Pe<0||Ct&&ke>=we}function pt(){var Le=G();if(He(Le))return kt(Le);xe=setTimeout(pt,Te(Le))}function kt(Le){return xe=void 0,at&&me?Je(Le):(me=ge=void 0,Ee)}function ft(){xe!==void 0&&clearTimeout(xe),be=0,me=We=ge=xe=void 0}function Bt(){return xe===void 0?Ee:kt(G())}function Tt(){var Le=G(),Pe=He(Le);if(me=arguments,ge=this,We=Le,Pe){if(xe===void 0)return ze(We);if(Ct)return xe=setTimeout(pt,j),Je(We)}return xe===void 0&&(xe=setTimeout(pt,j)),Ee}return Tt.cancel=ft,Tt.flush=Bt,Tt}function J(re,j,ue){var me=!0,ge=!0;if(typeof re!="function")throw new TypeError(n);return $(ue)&&(me="leading"in ue?!!ue.leading:me,ge="trailing"in ue?!!ue.trailing:ge),W(re,j,{leading:me,maxWait:j,trailing:ge})}function $(re){var j=typeof re;return!!re&&(j=="object"||j=="function")}function oe(re){return!!re&&typeof re=="object"}function te(re){return typeof re=="symbol"||oe(re)&&D.call(re)==t}function H(re){if(typeof re=="number")return re;if(te(re))return e;if($(re)){var j=typeof re.valueOf=="function"?re.valueOf():re;re=$(j)?j+"":j}if(typeof re!="string")return re===0?re:+re;re=re.replace(r,"");var ue=s.test(re);return ue||l.test(re)?o(re.slice(2),ue?2:8):i.test(re)?e:+re}return u6=J,u6}var dfe=hfe();const ffe=yA(dfe);var oC={exports:{}};oC.exports;var KK;function pfe(){return KK||(KK=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",f="[object Array]",C="[object AsyncFunction]",M="[object Boolean]",B="[object Date]",D="[object Error]",R="[object Function]",U="[object GeneratorFunction]",G="[object Map]",W="[object Number]",J="[object Null]",$="[object Object]",oe="[object Promise]",te="[object Proxy]",H="[object RegExp]",re="[object Set]",j="[object String]",ue="[object Symbol]",me="[object Undefined]",ge="[object WeakMap]",we="[object ArrayBuffer]",Ee="[object DataView]",xe="[object Float32Array]",We="[object Float64Array]",be="[object Int8Array]",rt="[object Int16Array]",Ct="[object Int32Array]",at="[object Uint8Array]",Je="[object Uint8ClampedArray]",ze="[object Uint16Array]",Te="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,ft={};ft[xe]=ft[We]=ft[be]=ft[rt]=ft[Ct]=ft[at]=ft[Je]=ft[ze]=ft[Te]=!0,ft[o]=ft[f]=ft[we]=ft[M]=ft[Ee]=ft[B]=ft[D]=ft[R]=ft[G]=ft[W]=ft[$]=ft[H]=ft[re]=ft[j]=ft[ge]=!1;var Bt=typeof window=="object"&&window&&window.Object===Object&&window,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Le=Bt||Tt||Function("return this")(),Pe=e&&!e.nodeType&&e,ke=Pe&&!0&&n&&!n.nodeType&&n,Qe=ke&&ke.exports===Pe,_t=Qe&&Bt.process,gt=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),wt=gt&&gt.isTypedArray;function Qt(ee,Ie){for(var st=-1,Yt=ee==null?0:ee.length,wr=0,zn=[];++st<Yt;){var qr=ee[st];Ie(qr,st,ee)&&(zn[wr++]=qr)}return zn}function Ft(ee,Ie){for(var st=-1,Yt=Ie.length,wr=ee.length;++st<Yt;)ee[wr+st]=Ie[st];return ee}function ln(ee,Ie){for(var st=-1,Yt=ee==null?0:ee.length;++st<Yt;)if(Ie(ee[st],st,ee))return!0;return!1}function Vn(ee,Ie){for(var st=-1,Yt=Array(ee);++st<ee;)Yt[st]=Ie(st);return Yt}function jt(ee){return function(Ie){return ee(Ie)}}function Un(ee,Ie){return ee.has(Ie)}function wn(ee,Ie){return ee?.[Ie]}function Mn(ee){var Ie=-1,st=Array(ee.size);return ee.forEach(function(Yt,wr){st[++Ie]=[wr,Yt]}),st}function En(ee,Ie){return function(st){return ee(Ie(st))}}function Mr(ee){var Ie=-1,st=Array(ee.size);return ee.forEach(function(Yt){st[++Ie]=Yt}),st}var Hn=Array.prototype,Pn=Function.prototype,Ne=Object.prototype,he=Le["__core-js_shared__"],ie=Pn.toString,se=Ne.hasOwnProperty,fe=function(){var ee=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Oe=Ne.toString,Ge=RegExp("^"+ie.call(se).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=Qe?Le.Buffer:void 0,$e=Le.Symbol,De=Le.Uint8Array,Ze=Ne.propertyIsEnumerable,m=Hn.splice,mt=$e?$e.toStringTag:void 0,At=Object.getOwnPropertySymbols,It=ct?ct.isBuffer:void 0,nt=En(Object.keys,Object),en=So(Le,"DataView"),Tn=So(Le,"Map"),xn=So(Le,"Promise"),er=So(Le,"Set"),Qn=So(Le,"WeakMap"),Qr=So(Object,"create"),$r=Eo(en),Br=Eo(Tn),br=Eo(xn),or=Eo(er),ti=Eo(Qn),bn=$e?$e.prototype:void 0,Vi=bn?bn.valueOf:void 0;function zr(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function $o(){this.__data__=Qr?Qr(null):{},this.size=0}function is(ee){var Ie=this.has(ee)&&delete this.__data__[ee];return this.size-=Ie?1:0,Ie}function Zn(ee){var Ie=this.__data__;if(Qr){var st=Ie[ee];return st===r?void 0:st}return se.call(Ie,ee)?Ie[ee]:void 0}function _i(ee){var Ie=this.__data__;return Qr?Ie[ee]!==void 0:se.call(Ie,ee)}function Kr(ee,Ie){var st=this.__data__;return this.size+=this.has(ee)?0:1,st[ee]=Qr&&Ie===void 0?r:Ie,this}zr.prototype.clear=$o,zr.prototype.delete=is,zr.prototype.get=Zn,zr.prototype.has=_i,zr.prototype.set=Kr;function ki(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function oa(){this.__data__=[],this.size=0}function os(ee){var Ie=this.__data__,st=sr(Ie,ee);if(st<0)return!1;var Yt=Ie.length-1;return st==Yt?Ie.pop():m.call(Ie,st,1),--this.size,!0}function Gr(ee){var Ie=this.__data__,st=sr(Ie,ee);return st<0?void 0:Ie[st][1]}function qa(ee){return sr(this.__data__,ee)>-1}function sa(ee,Ie){var st=this.__data__,Yt=sr(st,ee);return Yt<0?(++this.size,st.push([ee,Ie])):st[Yt][1]=Ie,this}ki.prototype.clear=oa,ki.prototype.delete=os,ki.prototype.get=Gr,ki.prototype.has=qa,ki.prototype.set=sa;function jo(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.clear();++Ie<st;){var Yt=ee[Ie];this.set(Yt[0],Yt[1])}}function Ds(){this.size=0,this.__data__={hash:new zr,map:new(Tn||ki),string:new zr}}function yl(ee){var Ie=gi(this,ee).delete(ee);return this.size-=Ie?1:0,Ie}function si(ee){return gi(this,ee).get(ee)}function vA(ee){return gi(this,ee).has(ee)}function Bs(ee,Ie){var st=gi(this,ee),Yt=st.size;return st.set(ee,Ie),this.size+=st.size==Yt?0:1,this}jo.prototype.clear=Ds,jo.prototype.delete=yl,jo.prototype.get=si,jo.prototype.has=vA,jo.prototype.set=Bs;function Hr(ee){var Ie=-1,st=ee==null?0:ee.length;for(this.__data__=new jo;++Ie<st;)this.add(ee[Ie])}function Sr(ee){return this.__data__.set(ee,r),this}function aa(ee){return this.__data__.has(ee)}Hr.prototype.add=Hr.prototype.push=Sr,Hr.prototype.has=aa;function vs(ee){var Ie=this.__data__=new ki(ee);this.size=Ie.size}function ss(){this.__data__=new ki,this.size=0}function Ye(ee){var Ie=this.__data__,st=Ie.delete(ee);return this.size=Ie.size,st}function Et(ee){return this.__data__.get(ee)}function gn(ee){return this.__data__.has(ee)}function Nn(ee,Ie){var st=this.__data__;if(st instanceof ki){var Yt=st.__data__;if(!Tn||Yt.length<t-1)return Yt.push([ee,Ie]),this.size=++st.size,this;st=this.__data__=new jo(Yt)}return st.set(ee,Ie),this.size=st.size,this}vs.prototype.clear=ss,vs.prototype.delete=Ye,vs.prototype.get=Et,vs.prototype.has=gn,vs.prototype.set=Nn;function cn(ee,Ie){var st=as(ee),Yt=!st&&hs(ee),wr=!st&&!Yt&&Xi(ee),zn=!st&&!Yt&&!wr&&Cl(ee),qr=st||Yt||wr||zn,ai=qr?Vn(ee.length,String):[],Er=ai.length;for(var Xr in ee)se.call(ee,Xr)&&!(qr&&(Xr=="length"||wr&&(Xr=="offset"||Xr=="parent")||zn&&(Xr=="buffer"||Xr=="byteLength"||Xr=="byteOffset")||sl(Xr,Er)))&&ai.push(Xr);return ai}function sr(ee,Ie){for(var st=ee.length;st--;)if(go(ee[st][0],Ie))return st;return-1}function ji(ee,Ie,st){var Yt=Ie(ee);return as(ee)?Yt:Ft(Yt,st(ee))}function wo(ee){return ee==null?ee===void 0?me:J:mt&&mt in Object(ee)?yi(ee):al(ee)}function xs(ee){return Ri(ee)&&wo(ee)==o}function va(ee,Ie,st,Yt,wr){return ee===Ie?!0:ee==null||Ie==null||!Ri(ee)&&!Ri(Ie)?ee!==ee&&Ie!==Ie:CA(ee,Ie,st,Yt,va,wr)}function CA(ee,Ie,st,Yt,wr,zn){var qr=as(ee),ai=as(Ie),Er=qr?f:cs(ee),Xr=ai?f:cs(Ie);Er=Er==o?$:Er,Xr=Xr==o?$:Xr;var Hi=Er==$,Ji=Xr==$,ni=Er==Xr;if(ni&&Xi(ee)){if(!Xi(Ie))return!1;qr=!0,Hi=!1}if(ni&&!Hi)return zn||(zn=new vs),qr||Cl(ee)?$a(ee,Ie,st,Yt,wr,zn):Ca(ee,Ie,Er,st,Yt,wr,zn);if(!(st&i)){var di=Hi&&se.call(ee,"__wrapped__"),lo=Ji&&se.call(Ie,"__wrapped__");if(di||lo){var zi=di?ee.value():ee,Oi=lo?Ie.value():Ie;return zn||(zn=new vs),wr(zi,Oi,st,Yt,zn)}}return ni?(zn||(zn=new vs),wc(ee,Ie,st,Yt,wr,zn)):!1}function Ci(ee){if(!Ns(ee)||Bi(ee))return!1;var Ie=Cs(ee)?Ge:pt;return Ie.test(Eo(ee))}function cu(ee){return Ri(ee)&&ba(ee.length)&&!!ft[wo(ee)]}function Hl(ee){if(!vl(ee))return nt(ee);var Ie=[];for(var st in Object(ee))se.call(ee,st)&&st!="constructor"&&Ie.push(st);return Ie}function $a(ee,Ie,st,Yt,wr,zn){var qr=st&i,ai=ee.length,Er=Ie.length;if(ai!=Er&&!(qr&&Er>ai))return!1;var Xr=zn.get(ee);if(Xr&&zn.get(Ie))return Xr==Ie;var Hi=-1,Ji=!0,ni=st&s?new Hr:void 0;for(zn.set(ee,Ie),zn.set(Ie,ee);++Hi<ai;){var di=ee[Hi],lo=Ie[Hi];if(Yt)var zi=qr?Yt(lo,di,Hi,Ie,ee,zn):Yt(di,lo,Hi,ee,Ie,zn);if(zi!==void 0){if(zi)continue;Ji=!1;break}if(ni){if(!ln(Ie,function(Oi,la){if(!Un(ni,la)&&(di===Oi||wr(di,Oi,st,Yt,zn)))return ni.push(la)})){Ji=!1;break}}else if(!(di===lo||wr(di,lo,st,Yt,zn))){Ji=!1;break}}return zn.delete(ee),zn.delete(Ie),Ji}function Ca(ee,Ie,st,Yt,wr,zn,qr){switch(st){case Ee:if(ee.byteLength!=Ie.byteLength||ee.byteOffset!=Ie.byteOffset)return!1;ee=ee.buffer,Ie=Ie.buffer;case we:return!(ee.byteLength!=Ie.byteLength||!zn(new De(ee),new De(Ie)));case M:case B:case W:return go(+ee,+Ie);case D:return ee.name==Ie.name&&ee.message==Ie.message;case H:case j:return ee==Ie+"";case G:var ai=Mn;case re:var Er=Yt&i;if(ai||(ai=Mr),ee.size!=Ie.size&&!Er)return!1;var Xr=qr.get(ee);if(Xr)return Xr==Ie;Yt|=s,qr.set(ee,Ie);var Hi=$a(ai(ee),ai(Ie),Yt,wr,zn,qr);return qr.delete(ee),Hi;case ue:if(Vi)return Vi.call(ee)==Vi.call(Ie)}return!1}function wc(ee,Ie,st,Yt,wr,zn){var qr=st&i,ai=_a(ee),Er=ai.length,Xr=_a(Ie),Hi=Xr.length;if(Er!=Hi&&!qr)return!1;for(var Ji=Er;Ji--;){var ni=ai[Ji];if(!(qr?ni in Ie:se.call(Ie,ni)))return!1}var di=zn.get(ee);if(di&&zn.get(Ie))return di==Ie;var lo=!0;zn.set(ee,Ie),zn.set(Ie,ee);for(var zi=qr;++Ji<Er;){ni=ai[Ji];var Oi=ee[ni],la=Ie[ni];if(Yt)var Ea=qr?Yt(la,Oi,ni,Ie,ee,zn):Yt(Oi,la,ni,ee,Ie,zn);if(!(Ea===void 0?Oi===la||wr(Oi,la,st,Yt,zn):Ea)){lo=!1;break}zi||(zi=ni=="constructor")}if(lo&&!zi){var _A=ee.constructor,Gs=Ie.constructor;_A!=Gs&&"constructor"in ee&&"constructor"in Ie&&!(typeof _A=="function"&&_A instanceof _A&&typeof Gs=="function"&&Gs instanceof Gs)&&(lo=!1)}return zn.delete(ee),zn.delete(Ie),lo}function _a(ee){return ji(ee,Zr,ol)}function gi(ee,Ie){var st=ee.__data__;return Fl(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function So(ee,Ie){var st=wn(ee,Ie);return Ci(st)?st:void 0}function yi(ee){var Ie=se.call(ee,mt),st=ee[mt];try{ee[mt]=void 0;var Yt=!0}catch{}var wr=Oe.call(ee);return Yt&&(Ie?ee[mt]=st:delete ee[mt]),wr}var ol=At?function(ee){return ee==null?[]:(ee=Object(ee),Qt(At(ee),function(Ie){return Ze.call(ee,Ie)}))}:Cr,cs=wo;(en&&cs(new en(new ArrayBuffer(1)))!=Ee||Tn&&cs(new Tn)!=G||xn&&cs(xn.resolve())!=oe||er&&cs(new er)!=re||Qn&&cs(new Qn)!=ge)&&(cs=function(ee){var Ie=wo(ee),st=Ie==$?ee.constructor:void 0,Yt=st?Eo(st):"";if(Yt)switch(Yt){case $r:return Ee;case Br:return G;case br:return oe;case or:return re;case ti:return ge}return Ie});function sl(ee,Ie){return Ie=Ie??l,!!Ie&&(typeof ee=="number"||kt.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function Fl(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function Bi(ee){return!!fe&&fe in ee}function vl(ee){var Ie=ee&&ee.constructor,st=typeof Ie=="function"&&Ie.prototype||Ne;return ee===st}function al(ee){return Oe.call(ee)}function Eo(ee){if(ee!=null){try{return ie.call(ee)}catch{}try{return ee+""}catch{}}return""}function go(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}var hs=xs(function(){return arguments}())?xs:function(ee){return Ri(ee)&&se.call(ee,"callee")&&!Ze.call(ee,"callee")},as=Array.isArray;function yo(ee){return ee!=null&&ba(ee.length)&&!Cs(ee)}var Xi=It||Wi;function Sc(ee,Ie){return va(ee,Ie)}function Cs(ee){if(!Ns(ee))return!1;var Ie=wo(ee);return Ie==R||Ie==U||Ie==C||Ie==te}function ba(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function Ns(ee){var Ie=typeof ee;return ee!=null&&(Ie=="object"||Ie=="function")}function Ri(ee){return ee!=null&&typeof ee=="object"}var Cl=wt?jt(wt):cu;function Zr(ee){return yo(ee)?cn(ee):Hl(ee)}function Cr(){return[]}function Wi(){return!1}n.exports=Sc}(oC,oC.exports)),oC.exports}var mfe=pfe();const TB=yA(mfe);function Li(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Li=function(){return l},l}Li();class gfe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(Li().b[0][0]++,{})){Li().f[0]++,Li().s[0]++,this.onSourcesChange=(Li().b[1][0]++,e.onSourcesChange||(Li().b[1][1]++,()=>{Li().f[1]++})),Li().s[1]++,this.onVectorLayersChange=(Li().b[2][0]++,e.onVectorLayersChange||(Li().b[2][1]++,()=>{Li().f[2]++})),Li().s[2]++,this._sources={},Li().s[3]++,this._vectorLayers={},Li().s[4]++,this.throttledAnalyzeVectorLayerFields=ffe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Li().f[3]++;const t=(Li().s[5]++,{...this._sources});Li().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Li().f[4]++,Li().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Li().s[8]++,TB(t,this._sources)?Li().b[3][1]++:(Li().b[3][0]++,Li().s[9]++,this.onSourcesChange(this._sources)),Li().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Li().f[5]++;const t=(Li().s[11]++,{...this._vectorLayers});Li().s[12]++,Object.keys(this._sources).forEach(r=>{Li().f[6]++,Li().s[13]++,(Li().b[4][0]++,this._sources[r]||(Li().b[4][1]++,[])).forEach(i=>{Li().f[7]++;const s=(Li().s[14]++,Li().b[5][0]++,this._vectorLayers[i]||(Li().b[5][1]++,{})),l=(Li().s[15]++,{sourceLayer:i});Li().s[16]++,e.querySourceFeatures(r,l).forEach(o=>{Li().f[8]++,Li().s[17]++,Object.keys(o.properties).forEach(f=>{Li().f[9]++;const C=(Li().s[18]++,Li().b[6][0]++,s[f]||(Li().b[6][1]++,{}));Li().s[19]++,C[o.properties[f]]={},Li().s[20]++,s[f]=C})}),Li().s[21]++,this._vectorLayers[i]=s})}),Li().s[22]++,TB(t,this._vectorLayers)?Li().b[7][1]++:(Li().b[7][0]++,Li().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Li().f[10]++,Li().s[24]++,this._sources}get vectorLayers(){return Li().f[11]++,Li().s[25]++,this._vectorLayers}}function Be(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="7f7b3da2687788391835d940f3f3ee5683c1240b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:33,column:0},end:{line:33,column:30}},1:{start:{line:35,column:29},end:{line:35,column:60}},2:{start:{line:36,column:26},end:{line:36,column:54}},3:{start:{line:37,column:31},end:{line:37,column:64}},4:{start:{line:38,column:28},end:{line:38,column:58}},5:{start:{line:39,column:2},end:{line:56,column:3}},6:{start:{line:40,column:24},end:{line:40,column:95}},7:{start:{line:41,column:4},end:{line:43,column:5}},8:{start:{line:42,column:6},end:{line:42,column:47}},9:{start:{line:44,column:9},end:{line:56,column:3}},10:{start:{line:45,column:24},end:{line:45,column:96}},11:{start:{line:46,column:4},end:{line:48,column:5}},12:{start:{line:47,column:6},end:{line:47,column:47}},13:{start:{line:49,column:9},end:{line:56,column:3}},14:{start:{line:50,column:24},end:{line:50,column:93}},15:{start:{line:51,column:4},end:{line:53,column:5}},16:{start:{line:52,column:6},end:{line:52,column:47}},17:{start:{line:55,column:4},end:{line:55,column:15}},18:{start:{line:59,column:2},end:{line:68,column:4}},19:{start:{line:72,column:15},end:{line:72,column:19}},20:{start:{line:75,column:4},end:{line:75,column:17}},21:{start:{line:76,column:4},end:{line:76,column:45}},22:{start:{line:77,column:4},end:{line:77,column:38}},23:{start:{line:78,column:4},end:{line:111,column:6}},24:{start:{line:112,column:4},end:{line:114,column:7}},25:{start:{line:113,column:35},end:{line:113,column:69}},26:{start:{line:116,column:31},end:{line:183,column:3}},27:{start:{line:117,column:22},end:{line:168,column:5}},28:{start:{line:121,column:10},end:{line:121,column:40}},29:{start:{line:127,column:10},end:{line:127,column:35}},30:{start:{line:133,column:10},end:{line:133,column:37}},31:{start:{line:139,column:10},end:{line:139,column:38}},32:{start:{line:145,column:10},end:{line:145,column:39}},33:{start:{line:151,column:10},end:{line:153,column:12}},34:{start:{line:159,column:10},end:{line:159,column:63}},35:{start:{line:165,column:10},end:{line:165,column:36}},36:{start:{line:169,column:4},end:{line:182,column:7}},37:{start:{line:170,column:6},end:{line:181,column:7}},38:{start:{line:171,column:8},end:{line:171,column:24}},39:{start:{line:172,column:8},end:{line:172,column:30}},40:{start:{line:173,column:13},end:{line:181,column:7}},41:{start:{line:174,column:25},end:{line:176,column:10}},42:{start:{line:175,column:10},end:{line:175,column:41}},43:{start:{line:177,column:8},end:{line:180,column:9}},44:{start:{line:178,column:10},end:{line:178,column:44}},45:{start:{line:179,column:10},end:{line:179,column:29}},46:{start:{line:184,column:19},end:{line:202,column:3}},47:{start:{line:185,column:4},end:{line:201,column:5}},48:{start:{line:186,column:6},end:{line:192,column:7}},49:{start:{line:187,column:8},end:{line:187,column:27}},50:{start:{line:188,column:8},end:{line:188,column:22}},51:{start:{line:189,column:13},end:{line:192,column:7}},52:{start:{line:190,column:8},end:{line:190,column:27}},53:{start:{line:191,column:8},end:{line:191,column:22}},54:{start:{line:194,column:6},end:{line:200,column:7}},55:{start:{line:195,column:8},end:{line:195,column:27}},56:{start:{line:196,column:8},end:{line:196,column:22}},57:{start:{line:197,column:13},end:{line:200,column:7}},58:{start:{line:198,column:8},end:{line:198,column:27}},59:{start:{line:199,column:8},end:{line:199,column:22}},60:{start:{line:204,column:4},end:{line:204,column:102}},61:{start:{line:204,column:65},end:{line:204,column:100}},62:{start:{line:205,column:4},end:{line:205,column:60}},63:{start:{line:208,column:4},end:{line:208,column:63}},64:{start:{line:211,column:4},end:{line:211,column:41}},65:{start:{line:214,column:21},end:{line:214,column:55}},66:{start:{line:215,column:24},end:{line:215,column:93}},67:{start:{line:216,column:21},end:{line:216,column:110}},68:{start:{line:217,column:4},end:{line:219,column:7}},69:{start:{line:218,column:6},end:{line:218,column:80}},70:{start:{line:222,column:4},end:{line:224,column:7}},71:{start:{line:223,column:6},end:{line:223,column:80}},72:{start:{line:226,column:29},end:{line:240,column:3}},73:{start:{line:227,column:4},end:{line:231,column:5}},74:{start:{line:228,column:6},end:{line:230,column:9}},75:{start:{line:232,column:25},end:{line:238,column:5}},76:{start:{line:239,column:4},end:{line:239,column:38}},77:{start:{line:241,column:19},end:{line:364,column:3}},78:{start:{line:242,column:4},end:{line:247,column:6}},79:{start:{line:248,column:4},end:{line:250,column:5}},80:{start:{line:249,column:6},end:{line:249,column:71}},81:{start:{line:251,column:4},end:{line:253,column:5}},82:{start:{line:252,column:6},end:{line:252,column:71}},83:{start:{line:254,column:4},end:{line:258,column:5}},84:{start:{line:255,column:6},end:{line:257,column:7}},85:{start:{line:256,column:8},end:{line:256,column:63}},86:{start:{line:259,column:4},end:{line:261,column:5}},87:{start:{line:260,column:6},end:{line:260,column:44}},88:{start:{line:262,column:19},end:{line:262,column:51}},89:{start:{line:263,column:24},end:{line:263,column:26}},90:{start:{line:264,column:4},end:{line:275,column:5}},91:{start:{line:265,column:26},end:{line:265,column:42}},92:{start:{line:266,column:6},end:{line:274,column:9}},93:{start:{line:267,column:8},end:{line:272,column:9}},94:{start:{line:268,column:24},end:{line:270,column:11}},95:{start:{line:271,column:10},end:{line:271,column:34}},96:{start:{line:273,column:8},end:{line:273,column:40}},97:{start:{line:276,column:25},end:{line:327,column:6}},98:{start:{line:277,column:23},end:{line:277,column:109}},99:{start:{line:278,column:6},end:{line:291,column:7}},100:{start:{line:279,column:35},end:{line:279,column:43}},101:{start:{line:280,column:8},end:{line:290,column:10}},102:{start:{line:292,column:33},end:{line:292,column:100}},103:{start:{line:293,column:6},end:{line:306,column:7}},104:{start:{line:294,column:35},end:{line:294,column:53}},105:{start:{line:295,column:8},end:{line:305,column:10}},106:{start:{line:307,column:25},end:{line:307,column:88}},107:{start:{line:308,column:6},end:{line:326,column:7}},108:{start:{line:309,column:52},end:{line:309,column:62}},109:{start:{line:310,column:20},end:{line:310,column:78}},110:{start:{line:311,column:8},end:{line:321,column:10}},111:{start:{line:323,column:8},end:{line:325,column:10}},112:{start:{line:328,column:24},end:{line:328,column:30}},113:{start:{line:329,column:4},end:{line:343,column:5}},114:{start:{line:330,column:6},end:{line:330,column:42}},115:{start:{line:331,column:6},end:{line:342,column:7}},116:{start:{line:332,column:28},end:{line:332,column:33}},117:{start:{line:333,column:8},end:{line:341,column:9}},118:{start:{line:334,column:10},end:{line:340,column:11}},119:{start:{line:335,column:28},end:{line:335,column:49}},120:{start:{line:336,column:30},end:{line:336,column:69}},121:{start:{line:337,column:12},end:{line:337,column:44}},122:{start:{line:339,column:12},end:{line:339,column:46}},123:{start:{line:344,column:4},end:{line:346,column:5}},124:{start:{line:345,column:6},end:{line:345,column:40}},125:{start:{line:347,column:4},end:{line:349,column:5}},126:{start:{line:348,column:6},end:{line:348,column:40}},127:{start:{line:350,column:4},end:{line:352,column:5}},128:{start:{line:351,column:6},end:{line:351,column:47}},129:{start:{line:353,column:4},end:{line:355,column:5}},130:{start:{line:354,column:6},end:{line:354,column:31}},131:{start:{line:356,column:4},end:{line:363,column:7}},132:{start:{line:361,column:6},end:{line:361,column:26}},133:{start:{line:362,column:6},end:{line:362,column:27}},134:{start:{line:365,column:11},end:{line:372,column:3}},135:{start:{line:366,column:24},end:{line:366,column:49}},136:{start:{line:367,column:21},end:{line:367,column:67}},137:{start:{line:368,column:4},end:{line:368,column:61}},138:{start:{line:369,column:4},end:{line:371,column:7}},139:{start:{line:373,column:11},end:{line:380,column:3}},140:{start:{line:374,column:24},end:{line:374,column:49}},141:{start:{line:375,column:21},end:{line:375,column:67}},142:{start:{line:376,column:4},end:{line:376,column:61}},143:{start:{line:377,column:4},end:{line:379,column:7}},144:{start:{line:381,column:16},end:{line:395,column:3}},145:{start:{line:382,column:33},end:{line:382,column:37}},146:{start:{line:383,column:17},end:{line:383,column:43}},147:{start:{line:384,column:4},end:{line:384,column:53}},148:{start:{line:385,column:4},end:{line:385,column:53}},149:{start:{line:386,column:4},end:{line:386,column:38}},150:{start:{line:386,column:31},end:{line:386,column:38}},151:{start:{line:387,column:4},end:{line:391,column:5}},152:{start:{line:388,column:6},end:{line:390,column:9}},153:{start:{line:392,column:4},end:{line:392,column:29}},154:{start:{line:393,column:4},end:{line:393,column:49}},155:{start:{line:394,column:4},end:{line:394,column:32}},156:{start:{line:396,column:19},end:{line:402,column:3}},157:{start:{line:397,column:25},end:{line:400,column:5}},158:{start:{line:401,column:4},end:{line:401,column:38}},159:{start:{line:403,column:19},end:{line:408,column:3}},160:{start:{line:404,column:19},end:{line:404,column:45}},161:{start:{line:405,column:28},end:{line:405,column:43}},162:{start:{line:406,column:4},end:{line:406,column:37}},163:{start:{line:407,column:4},end:{line:407,column:41}},164:{start:{line:409,column:16},end:{line:416,column:3}},165:{start:{line:410,column:19},end:{line:410,column:45}},166:{start:{line:411,column:26},end:{line:411,column:41}},167:{start:{line:412,column:24},end:{line:412,column:55}},168:{start:{line:413,column:4},end:{line:413,column:46}},169:{start:{line:414,column:4},end:{line:414,column:48}},170:{start:{line:415,column:4},end:{line:415,column:39}},171:{start:{line:417,column:28},end:{line:426,column:3}},172:{start:{line:418,column:19},end:{line:418,column:45}},173:{start:{line:419,column:26},end:{line:419,column:41}},174:{start:{line:420,column:18},end:{line:420,column:45}},175:{start:{line:421,column:26},end:{line:421,column:70}},176:{start:{line:422,column:4},end:{line:422,column:88}},177:{start:{line:423,column:4},end:{line:423,column:33}},178:{start:{line:424,column:4},end:{line:424,column:33}},179:{start:{line:425,column:4},end:{line:425,column:39}},180:{start:{line:427,column:20},end:{line:434,column:3}},181:{start:{line:428,column:26},end:{line:428,column:61}},182:{start:{line:429,column:4},end:{line:432,column:6}},183:{start:{line:433,column:4},end:{line:433,column:39}},184:{start:{line:435,column:19},end:{line:439,column:3}},185:{start:{line:436,column:26},end:{line:436,column:61}},186:{start:{line:437,column:4},end:{line:437,column:33}},187:{start:{line:438,column:4},end:{line:438,column:39}},188:{start:{line:440,column:16},end:{line:444,column:3}},189:{start:{line:441,column:4},end:{line:443,column:27}},190:{start:{line:445,column:21},end:{line:459,column:3}},191:{start:{line:446,column:21},end:{line:446,column:44}},192:{start:{line:447,column:4},end:{line:458,column:5}},193:{start:{line:448,column:27},end:{line:454,column:7}},194:{start:{line:455,column:6},end:{line:455,column:26}},195:{start:{line:457,column:6},end:{line:457,column:22}},196:{start:{line:460,column:14},end:{line:464,column:3}},197:{start:{line:461,column:4},end:{line:461,column:34}},198:{start:{line:462,column:4},end:{line:462,column:47}},199:{start:{line:463,column:4},end:{line:463,column:34}},200:{start:{line:466,column:23},end:{line:466,column:25}},201:{start:{line:467,column:4},end:{line:506,column:5}},202:{start:{line:468,column:21},end:{line:468,column:53}},203:{start:{line:469,column:6},end:{line:505,column:7}},204:{start:{line:470,column:8},end:{line:470,column:93}},205:{start:{line:471,column:8},end:{line:473,column:9}},206:{start:{line:472,column:10},end:{line:472,column:38}},207:{start:{line:475,column:8},end:{line:478,column:10}},208:{start:{line:479,column:18},end:{line:479,column:28}},209:{start:{line:480,column:8},end:{line:484,column:9}},210:{start:{line:481,column:10},end:{line:481,column:62}},211:{start:{line:483,column:10},end:{line:483,column:63}},212:{start:{line:485,column:32},end:{line:492,column:9}},213:{start:{line:486,column:10},end:{line:488,column:11}},214:{start:{line:487,column:12},end:{line:487,column:19}},215:{start:{line:489,column:10},end:{line:491,column:11}},216:{start:{line:490,column:12},end:{line:490,column:50}},217:{start:{line:493,column:8},end:{line:504,column:9}},218:{start:{line:494,column:10},end:{line:501,column:11}},219:{start:{line:495,column:25},end:{line:495,column:77}},220:{start:{line:496,column:12},end:{line:496,column:34}},221:{start:{line:498,column:29},end:{line:498,column:63}},222:{start:{line:499,column:25},end:{line:499,column:46}},223:{start:{line:500,column:12},end:{line:500,column:34}},224:{start:{line:503,column:10},end:{line:503,column:78}},225:{start:{line:507,column:4},end:{line:512,column:5}},226:{start:{line:508,column:6},end:{line:508,column:51}},227:{start:{line:509,column:6},end:{line:511,column:9}},228:{start:{line:515,column:21},end:{line:515,column:55}},229:{start:{line:516,column:4},end:{line:516,column:53}},230:{start:{line:518,column:16},end:{line:522,column:3}},231:{start:{line:519,column:4},end:{line:521,column:7}},232:{start:{line:524,column:40},end:{line:524,column:50}},233:{start:{line:525,column:21},end:{line:536,column:5}},234:{start:{line:528,column:8},end:{line:530,column:11}},235:{start:{line:533,column:8},end:{line:533,column:44}},236:{start:{line:534,column:8},end:{line:534,column:28}},237:{start:{line:537,column:21},end:{line:537,column:40}},238:{start:{line:539,column:4},end:{line:561,column:5}},239:{start:{line:540,column:6},end:{line:548,column:8}},240:{start:{line:550,column:6},end:{line:560,column:8}},241:{start:{line:563,column:4},end:{line:565,column:5}},242:{start:{line:564,column:6},end:{line:564,column:63}},243:{start:{line:566,column:25},end:{line:566,column:27}},244:{start:{line:567,column:4},end:{line:569,column:5}},245:{start:{line:568,column:6},end:{line:568,column:52}},246:{start:{line:570,column:4},end:{line:570,column:160}},247:{start:{line:572,column:18},end:{line:590,column:3}},248:{start:{line:573,column:43},end:{line:573,column:53}},249:{start:{line:574,column:35},end:{line:574,column:45}},250:{start:{line:575,column:16},end:{line:575,column:38}},251:{start:{line:576,column:20},end:{line:576,column:50}},252:{start:{line:577,column:4},end:{line:577,column:70}},253:{start:{line:578,column:23},end:{line:578,column:122}},254:{start:{line:578,column:66},end:{line:578,column:91}},255:{start:{line:578,column:109},end:{line:578,column:121}},256:{start:{line:579,column:4},end:{line:583,column:5}},257:{start:{line:580,column:6},end:{line:580,column:58}},258:{start:{line:582,column:6},end:{line:582,column:39}},259:{start:{line:584,column:4},end:{line:588,column:5}},260:{start:{line:585,column:6},end:{line:585,column:38}},261:{start:{line:586,column:11},end:{line:588,column:5}},262:{start:{line:587,column:6},end:{line:587,column:46}},263:{start:{line:589,column:4},end:{line:589,column:71}},264:{start:{line:591,column:27},end:{line:636,column:3}},265:{start:{line:592,column:16},end:{line:592,column:38}},266:{start:{line:593,column:23},end:{line:593,column:52}},267:{start:{line:594,column:4},end:{line:606,column:5}},268:{start:{line:595,column:21},end:{line:595,column:42}},269:{start:{line:596,column:23},end:{line:596,column:25}},270:{start:{line:597,column:6},end:{line:599,column:9}},271:{start:{line:598,column:8},end:{line:598,column:35}},272:{start:{line:600,column:6},end:{line:605,column:9}},273:{start:{line:607,column:17},end:{line:607,column:45}},274:{start:{line:608,column:4},end:{line:610,column:5}},275:{start:{line:609,column:6},end:{line:609,column:29}},276:{start:{line:611,column:17},end:{line:611,column:46}},277:{start:{line:612,column:4},end:{line:635,column:5}},278:{start:{line:613,column:6},end:{line:634,column:7}},279:{start:{line:614,column:22},end:{line:614,column:37}},280:{start:{line:615,column:46},end:{line:618,column:9}},281:{start:{line:619,column:20},end:{line:619,column:24}},282:{start:{line:620,column:8},end:{line:625,column:9}},283:{start:{line:621,column:33},end:{line:621,column:63}},284:{start:{line:622,column:10},end:{line:624,column:11}},285:{start:{line:623,column:12},end:{line:623,column:26}},286:{start:{line:626,column:8},end:{line:631,column:9}},287:{start:{line:627,column:10},end:{line:630,column:13}},288:{start:{line:633,column:8},end:{line:633,column:26}},289:{start:{line:637,column:18},end:{line:642,column:3}},290:{start:{line:638,column:4},end:{line:641,column:27}},291:{start:{line:644,column:4},end:{line:649,column:27}},292:{start:{line:652,column:4},end:{line:652,column:60}},293:{start:{line:654,column:20},end:{line:656,column:3}},294:{start:{line:655,column:4},end:{line:655,column:34}},295:{start:{line:657,column:28},end:{line:664,column:3}},296:{start:{line:658,column:4},end:{line:663,column:7}},297:{start:{line:665,column:28},end:{line:672,column:3}},298:{start:{line:666,column:4},end:{line:671,column:7}},299:{start:{line:674,column:19},end:{line:674,column:51}},300:{start:{line:675,column:26},end:{line:675,column:92}},301:{start:{line:676,column:36},end:{line:689,column:5}},302:{start:{line:690,column:38},end:{line:704,column:5}},303:{start:{line:705,column:24},end:{line:724,column:14}},304:{start:{line:725,column:24},end:{line:735,column:14}},305:{start:{line:736,column:35},end:{line:796,column:8}},306:{start:{line:797,column:4},end:{line:807,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:44},end:{line:57,column:1}},line:34},1:{name:"updateRootSpec",decl:{start:{line:58,column:9},end:{line:58,column:23}},loc:{start:{line:58,column:52},end:{line:69,column:1}},line:58},2:{name:"(anonymous_2)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:21},end:{line:115,column:3}},line:74},3:{name:"(anonymous_3)",decl:{start:{line:113,column:28},end:{line:113,column:29}},loc:{start:{line:113,column:35},end:{line:113,column:69}},line:113},4:{name:"(anonymous_4)",decl:{start:{line:116,column:31},end:{line:116,column:32}},loc:{start:{line:116,column:37},end:{line:183,column:3}},line:116},5:{name:"(anonymous_5)",decl:{start:{line:120,column:17},end:{line:120,column:18}},loc:{start:{line:120,column:23},end:{line:122,column:9}},line:120},6:{name:"(anonymous_6)",decl:{start:{line:126,column:17},end:{line:126,column:18}},loc:{start:{line:126,column:23},end:{line:128,column:9}},line:126},7:{name:"(anonymous_7)",decl:{start:{line:132,column:17},end:{line:132,column:18}},loc:{start:{line:132,column:23},end:{line:134,column:9}},line:132},8:{name:"(anonymous_8)",decl:{start:{line:138,column:17},end:{line:138,column:18}},loc:{start:{line:138,column:23},end:{line:140,column:9}},line:138},9:{name:"(anonymous_9)",decl:{start:{line:144,column:17},end:{line:144,column:18}},loc:{start:{line:144,column:23},end:{line:146,column:9}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:150,column:17},end:{line:150,column:18}},loc:{start:{line:150,column:23},end:{line:154,column:9}},line:150},11:{name:"(anonymous_11)",decl:{start:{line:158,column:17},end:{line:158,column:18}},loc:{start:{line:158,column:23},end:{line:160,column:9}},line:158},12:{name:"(anonymous_12)",decl:{start:{line:164,column:17},end:{line:164,column:18}},loc:{start:{line:164,column:23},end:{line:166,column:9}},line:164},13:{name:"(anonymous_13)",decl:{start:{line:169,column:44},end:{line:169,column:45}},loc:{start:{line:169,column:51},end:{line:182,column:5}},line:169},14:{name:"(anonymous_14)",decl:{start:{line:174,column:40},end:{line:174,column:41}},loc:{start:{line:174,column:55},end:{line:176,column:9}},line:174},15:{name:"(anonymous_15)",decl:{start:{line:184,column:19},end:{line:184,column:20}},loc:{start:{line:184,column:26},end:{line:202,column:3}},line:184},16:{name:"(anonymous_16)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:28},end:{line:206,column:3}},line:203},17:{name:"(anonymous_17)",decl:{start:{line:204,column:45},end:{line:204,column:46}},loc:{start:{line:204,column:65},end:{line:204,column:100}},line:204},18:{name:"(anonymous_18)",decl:{start:{line:207,column:2},end:{line:207,column:3}},loc:{start:{line:207,column:25},end:{line:209,column:3}},line:207},19:{name:"(anonymous_19)",decl:{start:{line:210,column:2},end:{line:210,column:3}},loc:{start:{line:210,column:27},end:{line:212,column:3}},line:210},20:{name:"(anonymous_20)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:27},end:{line:220,column:3}},line:213},21:{name:"(anonymous_21)",decl:{start:{line:217,column:37},end:{line:217,column:38}},loc:{start:{line:217,column:48},end:{line:219,column:5}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:23},end:{line:225,column:3}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:222,column:36},end:{line:222,column:37}},loc:{start:{line:222,column:47},end:{line:224,column:5}},line:222},24:{name:"(anonymous_24)",decl:{start:{line:226,column:29},end:{line:226,column:30}},loc:{start:{line:226,column:50},end:{line:240,column:3}},line:226},25:{name:"(anonymous_25)",decl:{start:{line:241,column:19},end:{line:241,column:20}},loc:{start:{line:241,column:44},end:{line:364,column:3}},line:241},26:{name:"(anonymous_26)",decl:{start:{line:266,column:30},end:{line:266,column:31}},loc:{start:{line:266,column:48},end:{line:274,column:7}},line:266},27:{name:"(anonymous_27)",decl:{start:{line:276,column:56},end:{line:276,column:57}},loc:{start:{line:276,column:67},end:{line:327,column:5}},line:276},28:{name:"(anonymous_28)",decl:{start:{line:360,column:7},end:{line:360,column:8}},loc:{start:{line:360,column:13},end:{line:363,column:5}},line:360},29:{name:"(anonymous_29)",decl:{start:{line:365,column:11},end:{line:365,column:12}},loc:{start:{line:365,column:17},end:{line:372,column:3}},line:365},30:{name:"(anonymous_30)",decl:{start:{line:373,column:11},end:{line:373,column:12}},loc:{start:{line:373,column:17},end:{line:380,column:3}},line:373},31:{name:"(anonymous_31)",decl:{start:{line:381,column:16},end:{line:381,column:17}},loc:{start:{line:381,column:26},end:{line:395,column:3}},line:381},32:{name:"(anonymous_32)",decl:{start:{line:396,column:19},end:{line:396,column:20}},loc:{start:{line:396,column:38},end:{line:402,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:403,column:19},end:{line:403,column:20}},loc:{start:{line:403,column:30},end:{line:408,column:3}},line:403},34:{name:"(anonymous_34)",decl:{start:{line:409,column:16},end:{line:409,column:17}},loc:{start:{line:409,column:27},end:{line:416,column:3}},line:409},35:{name:"(anonymous_35)",decl:{start:{line:417,column:28},end:{line:417,column:29}},loc:{start:{line:417,column:39},end:{line:426,column:3}},line:417},36:{name:"(anonymous_36)",decl:{start:{line:427,column:20},end:{line:427,column:21}},loc:{start:{line:427,column:46},end:{line:434,column:3}},line:427},37:{name:"(anonymous_37)",decl:{start:{line:435,column:19},end:{line:435,column:20}},loc:{start:{line:435,column:37},end:{line:439,column:3}},line:435},38:{name:"(anonymous_38)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:30},end:{line:444,column:3}},line:440},39:{name:"(anonymous_39)",decl:{start:{line:445,column:21},end:{line:445,column:22}},loc:{start:{line:445,column:35},end:{line:459,column:3}},line:445},40:{name:"(anonymous_40)",decl:{start:{line:460,column:14},end:{line:460,column:15}},loc:{start:{line:460,column:40},end:{line:464,column:3}},line:460},41:{name:"(anonymous_41)",decl:{start:{line:465,column:2},end:{line:465,column:3}},loc:{start:{line:465,column:23},end:{line:513,column:3}},line:465},42:{name:"(anonymous_42)",decl:{start:{line:485,column:32},end:{line:485,column:33}},loc:{start:{line:485,column:42},end:{line:492,column:9}},line:485},43:{name:"(anonymous_43)",decl:{start:{line:514,column:2},end:{line:514,column:3}},loc:{start:{line:514,column:17},end:{line:517,column:3}},line:514},44:{name:"(anonymous_44)",decl:{start:{line:518,column:16},end:{line:518,column:17}},loc:{start:{line:518,column:29},end:{line:522,column:3}},line:518},45:{name:"(anonymous_45)",decl:{start:{line:523,column:2},end:{line:523,column:3}},loc:{start:{line:523,column:16},end:{line:571,column:3}},line:523},46:{name:"(anonymous_46)",decl:{start:{line:527,column:27},end:{line:527,column:28}},loc:{start:{line:527,column:42},end:{line:531,column:7}},line:527},47:{name:"(anonymous_47)",decl:{start:{line:532,column:20},end:{line:532,column:21}},loc:{start:{line:532,column:27},end:{line:535,column:7}},line:532},48:{name:"(anonymous_48)",decl:{start:{line:572,column:18},end:{line:572,column:19}},loc:{start:{line:572,column:24},end:{line:590,column:3}},line:572},49:{name:"(anonymous_49)",decl:{start:{line:578,column:50},end:{line:578,column:51}},loc:{start:{line:578,column:66},end:{line:578,column:91}},line:578},50:{name:"(anonymous_50)",decl:{start:{line:578,column:100},end:{line:578,column:101}},loc:{start:{line:578,column:109},end:{line:578,column:121}},line:578},51:{name:"(anonymous_51)",decl:{start:{line:591,column:27},end:{line:591,column:28}},loc:{start:{line:591,column:41},end:{line:636,column:3}},line:591},52:{name:"(anonymous_52)",decl:{start:{line:597,column:21},end:{line:597,column:22}},loc:{start:{line:597,column:36},end:{line:599,column:7}},line:597},53:{name:"(anonymous_53)",decl:{start:{line:637,column:18},end:{line:637,column:19}},loc:{start:{line:637,column:29},end:{line:642,column:3}},line:637},54:{name:"(anonymous_54)",decl:{start:{line:643,column:2},end:{line:643,column:3}},loc:{start:{line:643,column:29},end:{line:650,column:3}},line:643},55:{name:"(anonymous_55)",decl:{start:{line:651,column:2},end:{line:651,column:3}},loc:{start:{line:651,column:25},end:{line:653,column:3}},line:651},56:{name:"(anonymous_56)",decl:{start:{line:654,column:20},end:{line:654,column:21}},loc:{start:{line:654,column:36},end:{line:656,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:657,column:28},end:{line:657,column:29}},loc:{start:{line:657,column:44},end:{line:664,column:3}},line:657},58:{name:"(anonymous_58)",decl:{start:{line:665,column:28},end:{line:665,column:29}},loc:{start:{line:665,column:44},end:{line:672,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:673,column:2},end:{line:673,column:3}},loc:{start:{line:673,column:11},end:{line:808,column:3}},line:673}},branchMap:{0:{loc:{start:{line:39,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:56,column:3}},{start:{line:44,column:9},end:{line:56,column:3}}],line:39},1:{loc:{start:{line:39,column:6},end:{line:39,column:43}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:24}},{start:{line:39,column:28},end:{line:39,column:43}}],line:39},2:{loc:{start:{line:41,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:43,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:44,column:9},end:{line:56,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:56,column:3}},{start:{line:49,column:9},end:{line:56,column:3}}],line:44},4:{loc:{start:{line:46,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:48,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},5:{loc:{start:{line:49,column:9},end:{line:56,column:3}},type:"if",locations:[{start:{line:49,column:9},end:{line:56,column:3}},{start:{line:54,column:9},end:{line:56,column:3}}],line:49},6:{loc:{start:{line:51,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},7:{loc:{start:{line:152,column:12},end:{line:152,column:61}},type:"cond-expr",locations:[{start:{line:152,column:44},end:{line:152,column:53}},{start:{line:152,column:56},end:{line:152,column:61}}],line:152},8:{loc:{start:{line:170,column:6},end:{line:181,column:7}},type:"if",locations:[{start:{line:170,column:6},end:{line:181,column:7}},{start:{line:173,column:13},end:{line:181,column:7}}],line:170},9:{loc:{start:{line:173,column:13},end:{line:181,column:7}},type:"if",locations:[{start:{line:173,column:13},end:{line:181,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},10:{loc:{start:{line:173,column:17},end:{line:173,column:88}},type:"binary-expr",locations:[{start:{line:173,column:17},end:{line:173,column:44}},{start:{line:173,column:48},end:{line:173,column:88}}],line:173},11:{loc:{start:{line:177,column:8},end:{line:180,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:180,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},12:{loc:{start:{line:185,column:4},end:{line:201,column:5}},type:"if",locations:[{start:{line:185,column:4},end:{line:201,column:5}},{start:{line:193,column:11},end:{line:201,column:5}}],line:185},13:{loc:{start:{line:186,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:186,column:6},end:{line:192,column:7}},{start:{line:189,column:13},end:{line:192,column:7}}],line:186},14:{loc:{start:{line:186,column:10},end:{line:186,column:53}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:19}},{start:{line:186,column:23},end:{line:186,column:33}},{start:{line:186,column:37},end:{line:186,column:53}}],line:186},15:{loc:{start:{line:189,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:189,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:189},16:{loc:{start:{line:189,column:17},end:{line:189,column:46}},type:"binary-expr",locations:[{start:{line:189,column:17},end:{line:189,column:26}},{start:{line:189,column:30},end:{line:189,column:46}}],line:189},17:{loc:{start:{line:194,column:6},end:{line:200,column:7}},type:"if",locations:[{start:{line:194,column:6},end:{line:200,column:7}},{start:{line:197,column:13},end:{line:200,column:7}}],line:194},18:{loc:{start:{line:194,column:10},end:{line:194,column:39}},type:"binary-expr",locations:[{start:{line:194,column:10},end:{line:194,column:19}},{start:{line:194,column:23},end:{line:194,column:39}}],line:194},19:{loc:{start:{line:197,column:13},end:{line:200,column:7}},type:"if",locations:[{start:{line:197,column:13},end:{line:200,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:197},20:{loc:{start:{line:197,column:17},end:{line:197,column:46}},type:"binary-expr",locations:[{start:{line:197,column:17},end:{line:197,column:26}},{start:{line:197,column:30},end:{line:197,column:46}}],line:197},21:{loc:{start:{line:214,column:21},end:{line:214,column:55}},type:"binary-expr",locations:[{start:{line:214,column:21},end:{line:214,column:49}},{start:{line:214,column:53},end:{line:214,column:55}}],line:214},22:{loc:{start:{line:215,column:24},end:{line:215,column:93}},type:"binary-expr",locations:[{start:{line:215,column:24},end:{line:215,column:70}},{start:{line:215,column:74},end:{line:215,column:93}}],line:215},23:{loc:{start:{line:216,column:21},end:{line:216,column:110}},type:"cond-expr",locations:[{start:{line:216,column:55},end:{line:216,column:96}},{start:{line:216,column:99},end:{line:216,column:110}}],line:216},24:{loc:{start:{line:227,column:4},end:{line:231,column:5}},type:"if",locations:[{start:{line:227,column:4},end:{line:231,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:227},25:{loc:{start:{line:227,column:8},end:{line:227,column:123}},type:"binary-expr",locations:[{start:{line:227,column:8},end:{line:227,column:40}},{start:{line:227,column:44},end:{line:227,column:123}}],line:227},26:{loc:{start:{line:241,column:30},end:{line:241,column:39}},type:"default-arg",locations:[{start:{line:241,column:37},end:{line:241,column:39}}],line:241},27:{loc:{start:{line:248,column:4},end:{line:250,column:5}},type:"if",locations:[{start:{line:248,column:4},end:{line:250,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:248},28:{loc:{start:{line:248,column:8},end:{line:248,column:62}},type:"binary-expr",locations:[{start:{line:248,column:8},end:{line:248,column:23}},{start:{line:248,column:27},end:{line:248,column:62}}],line:248},29:{loc:{start:{line:251,column:4},end:{line:253,column:5}},type:"if",locations:[{start:{line:251,column:4},end:{line:253,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:251},30:{loc:{start:{line:251,column:8},end:{line:251,column:62}},type:"binary-expr",locations:[{start:{line:251,column:8},end:{line:251,column:23}},{start:{line:251,column:27},end:{line:251,column:62}}],line:251},31:{loc:{start:{line:255,column:6},end:{line:257,column:7}},type:"if",locations:[{start:{line:255,column:6},end:{line:257,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:255},32:{loc:{start:{line:255,column:10},end:{line:255,column:69}},type:"binary-expr",locations:[{start:{line:255,column:10},end:{line:255,column:16}},{start:{line:255,column:20},end:{line:255,column:35}},{start:{line:255,column:39},end:{line:255,column:69}}],line:255},33:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},34:{loc:{start:{line:262,column:19},end:{line:262,column:51}},type:"binary-expr",locations:[{start:{line:262,column:19},end:{line:262,column:45}},{start:{line:262,column:49},end:{line:262,column:51}}],line:262},35:{loc:{start:{line:264,column:4},end:{line:275,column:5}},type:"if",locations:[{start:{line:264,column:4},end:{line:275,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:264},36:{loc:{start:{line:264,column:8},end:{line:264,column:35}},type:"binary-expr",locations:[{start:{line:264,column:8},end:{line:264,column:16}},{start:{line:264,column:20},end:{line:264,column:35}}],line:264},37:{loc:{start:{line:267,column:8},end:{line:272,column:9}},type:"if",locations:[{start:{line:267,column:8},end:{line:272,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:267},38:{loc:{start:{line:267,column:12},end:{line:267,column:56}},type:"binary-expr",locations:[{start:{line:267,column:12},end:{line:267,column:27}},{start:{line:267,column:31},end:{line:267,column:56}}],line:267},39:{loc:{start:{line:278,column:6},end:{line:291,column:7}},type:"if",locations:[{start:{line:278,column:6},end:{line:291,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},40:{loc:{start:{line:293,column:6},end:{line:306,column:7}},type:"if",locations:[{start:{line:293,column:6},end:{line:306,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:293},41:{loc:{start:{line:308,column:6},end:{line:326,column:7}},type:"if",locations:[{start:{line:308,column:6},end:{line:326,column:7}},{start:{line:322,column:13},end:{line:326,column:7}}],line:308},42:{loc:{start:{line:310,column:20},end:{line:310,column:78}},type:"cond-expr",locations:[{start:{line:310,column:40},end:{line:310,column:67}},{start:{line:310,column:70},end:{line:310,column:78}}],line:310},43:{loc:{start:{line:310,column:20},end:{line:310,column:37}},type:"binary-expr",locations:[{start:{line:310,column:20},end:{line:310,column:25}},{start:{line:310,column:29},end:{line:310,column:37}}],line:310},44:{loc:{start:{line:329,column:4},end:{line:343,column:5}},type:"if",locations:[{start:{line:329,column:4},end:{line:343,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:329},45:{loc:{start:{line:333,column:8},end:{line:341,column:9}},type:"if",locations:[{start:{line:333,column:8},end:{line:341,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:333},46:{loc:{start:{line:344,column:4},end:{line:346,column:5}},type:"if",locations:[{start:{line:344,column:4},end:{line:346,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},47:{loc:{start:{line:347,column:4},end:{line:349,column:5}},type:"if",locations:[{start:{line:347,column:4},end:{line:349,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:347},48:{loc:{start:{line:350,column:4},end:{line:352,column:5}},type:"if",locations:[{start:{line:350,column:4},end:{line:352,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:350},49:{loc:{start:{line:353,column:4},end:{line:355,column:5}},type:"if",locations:[{start:{line:353,column:4},end:{line:355,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:353},50:{loc:{start:{line:386,column:4},end:{line:386,column:38}},type:"if",locations:[{start:{line:386,column:4},end:{line:386,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:386},51:{loc:{start:{line:387,column:4},end:{line:391,column:5}},type:"if",locations:[{start:{line:387,column:4},end:{line:391,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:387},52:{loc:{start:{line:421,column:26},end:{line:421,column:70}},type:"cond-expr",locations:[{start:{line:421,column:46},end:{line:421,column:65}},{start:{line:421,column:68},end:{line:421,column:70}}],line:421},53:{loc:{start:{line:422,column:31},end:{line:422,column:87}},type:"cond-expr",locations:[{start:{line:422,column:69},end:{line:422,column:78}},{start:{line:422,column:81},end:{line:422,column:87}}],line:422},54:{loc:{start:{line:446,column:21},end:{line:446,column:44}},type:"binary-expr",locations:[{start:{line:446,column:21},end:{line:446,column:38}},{start:{line:446,column:42},end:{line:446,column:44}}],line:446},55:{loc:{start:{line:447,column:4},end:{line:458,column:5}},type:"if",locations:[{start:{line:447,column:4},end:{line:458,column:5}},{start:{line:456,column:11},end:{line:458,column:5}}],line:447},56:{loc:{start:{line:469,column:6},end:{line:505,column:7}},type:"if",locations:[{start:{line:469,column:6},end:{line:505,column:7}},{start:{line:474,column:13},end:{line:505,column:7}}],line:469},57:{loc:{start:{line:469,column:10},end:{line:469,column:56}},type:"binary-expr",locations:[{start:{line:469,column:10},end:{line:469,column:34}},{start:{line:469,column:38},end:{line:469,column:56}}],line:469},58:{loc:{start:{line:470,column:26},end:{line:470,column:92}},type:"binary-expr",locations:[{start:{line:470,column:26},end:{line:470,column:49}},{start:{line:470,column:53},end:{line:470,column:92}}],line:470},59:{loc:{start:{line:471,column:8},end:{line:473,column:9}},type:"if",locations:[{start:{line:471,column:8},end:{line:473,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:471},60:{loc:{start:{line:486,column:10},end:{line:488,column:11}},type:"if",locations:[{start:{line:486,column:10},end:{line:488,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:486},61:{loc:{start:{line:494,column:10},end:{line:501,column:11}},type:"if",locations:[{start:{line:494,column:10},end:{line:501,column:11}},{start:{line:497,column:17},end:{line:501,column:11}}],line:494},62:{loc:{start:{line:507,column:4},end:{line:512,column:5}},type:"if",locations:[{start:{line:507,column:4},end:{line:512,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:507},63:{loc:{start:{line:515,column:21},end:{line:515,column:55}},type:"binary-expr",locations:[{start:{line:515,column:21},end:{line:515,column:49}},{start:{line:515,column:53},end:{line:515,column:55}}],line:515},64:{loc:{start:{line:516,column:11},end:{line:516,column:52}},type:"binary-expr",locations:[{start:{line:516,column:11},end:{line:516,column:40}},{start:{line:516,column:44},end:{line:516,column:52}}],line:516},65:{loc:{start:{line:526,column:16},end:{line:526,column:41}},type:"binary-expr",locations:[{start:{line:526,column:16},end:{line:526,column:29}},{start:{line:526,column:33},end:{line:526,column:41}}],line:526},66:{loc:{start:{line:539,column:4},end:{line:561,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:561,column:5}},{start:{line:549,column:11},end:{line:561,column:5}}],line:539},67:{loc:{start:{line:563,column:4},end:{line:565,column:5}},type:"if",locations:[{start:{line:563,column:4},end:{line:565,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:563},68:{loc:{start:{line:567,column:4},end:{line:569,column:5}},type:"if",locations:[{start:{line:567,column:4},end:{line:569,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:567},69:{loc:{start:{line:578,column:66},end:{line:578,column:91}},type:"cond-expr",locations:[{start:{line:578,column:81},end:{line:578,column:84}},{start:{line:578,column:87},end:{line:578,column:91}}],line:578},70:{loc:{start:{line:579,column:4},end:{line:583,column:5}},type:"if",locations:[{start:{line:579,column:4},end:{line:583,column:5}},{start:{line:581,column:11},end:{line:583,column:5}}],line:579},71:{loc:{start:{line:584,column:4},end:{line:588,column:5}},type:"if",locations:[{start:{line:584,column:4},end:{line:588,column:5}},{start:{line:586,column:11},end:{line:588,column:5}}],line:584},72:{loc:{start:{line:586,column:11},end:{line:588,column:5}},type:"if",locations:[{start:{line:586,column:11},end:{line:588,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:586},73:{loc:{start:{line:594,column:4},end:{line:606,column:5}},type:"if",locations:[{start:{line:594,column:4},end:{line:606,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:594},74:{loc:{start:{line:594,column:8},end:{line:594,column:39}},type:"binary-expr",locations:[{start:{line:594,column:8},end:{line:594,column:18}},{start:{line:594,column:22},end:{line:594,column:39}}],line:594},75:{loc:{start:{line:608,column:4},end:{line:610,column:5}},type:"if",locations:[{start:{line:608,column:4},end:{line:610,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:608},76:{loc:{start:{line:608,column:8},end:{line:608,column:27}},type:"binary-expr",locations:[{start:{line:608,column:8},end:{line:608,column:12}},{start:{line:608,column:16},end:{line:608,column:27}}],line:608},77:{loc:{start:{line:612,column:4},end:{line:635,column:5}},type:"if",locations:[{start:{line:612,column:4},end:{line:635,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:612},78:{loc:{start:{line:620,column:8},end:{line:625,column:9}},type:"if",locations:[{start:{line:620,column:8},end:{line:625,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:620},79:{loc:{start:{line:622,column:10},end:{line:624,column:11}},type:"if",locations:[{start:{line:622,column:10},end:{line:624,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:622},80:{loc:{start:{line:626,column:8},end:{line:631,column:9}},type:"if",locations:[{start:{line:626,column:8},end:{line:631,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},81:{loc:{start:{line:674,column:19},end:{line:674,column:51}},type:"binary-expr",locations:[{start:{line:674,column:19},end:{line:674,column:45}},{start:{line:674,column:49},end:{line:674,column:51}}],line:674},82:{loc:{start:{line:675,column:26},end:{line:675,column:92}},type:"cond-expr",locations:[{start:{line:675,column:46},end:{line:675,column:83}},{start:{line:675,column:86},end:{line:675,column:92}}],line:675},83:{loc:{start:{line:705,column:24},end:{line:724,column:14}},type:"cond-expr",locations:[{start:{line:705,column:56},end:{line:724,column:5}},{start:{line:724,column:8},end:{line:724,column:14}}],line:705},84:{loc:{start:{line:725,column:24},end:{line:735,column:14}},type:"cond-expr",locations:[{start:{line:725,column:97},end:{line:735,column:5}},{start:{line:735,column:8},end:{line:735,column:14}}],line:725}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AAsrBmB,SAAA,KAkNA,YAlNA;AAtrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAmDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7f7b3da2687788391835d940f3f3ee5683c1240b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Be=function(){return l},l}Be();Be().s[0]++;window.Buffer=UQ.Buffer;function e2(n,e){Be().f[0]++;const t=(Be().s[1]++,n.match(/\.tilehosting\.com/)),r=(Be().s[2]++,n.match(/\.maptiler\.com/)),i=(Be().s[3]++,n.match(/\.thunderforest\.com/)),s=(Be().s[4]++,n.match(/\.locationiq\.com/));if(Be().s[5]++,Be().b[1][0]++,t||(Be().b[1][1]++,r)){Be().b[0][0]++;const l=(Be().s[6]++,Ed.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Be().s[7]++,l)return Be().b[2][0]++,Be().s[8]++,n.replace("{key}",l);Be().b[2][1]++}else if(Be().b[0][1]++,Be().s[9]++,i){Be().b[3][0]++;const l=(Be().s[10]++,Ed.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Be().s[11]++,l)return Be().b[4][0]++,Be().s[12]++,n.replace("{key}",l);Be().b[4][1]++}else if(Be().b[3][1]++,Be().s[13]++,s){Be().b[5][0]++;const l=(Be().s[14]++,Ed.getAccessToken("locationiq",e,{allowFallback:!0}));if(Be().s[15]++,l)return Be().b[6][0]++,Be().s[16]++,n.replace("{key}",l);Be().b[6][1]++}else return Be().b[5][1]++,Be().s[17]++,n}function LK(n,e,t){return Be().f[1]++,Be().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class yfe extends Fn.Component{revisionStore;styleStore=(Be().s[19]++,null);layerWatcher;constructor(e){Be().f[2]++,Be().s[20]++,super(e),Be().s[21]++,this.revisionStore=new cfe,Be().s[22]++,this.configureKeyboardShortcuts(),Be().s[23]++,this.state={errors:[],infos:[],mapStyle:Ed.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Es,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Be().s[24]++,this.layerWatcher=new gfe({onVectorLayersChange:t=>(Be().f[3]++,Be().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(Be().s[26]++,()=>{Be().f[4]++;const e=(Be().s[27]++,[{key:"?",handler:()=>{Be().f[5]++,Be().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Be().f[6]++,Be().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{Be().f[7]++,Be().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{Be().f[8]++,Be().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Be().f[9]++,Be().s[32]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Be().f[10]++,Be().s[33]++,this.setMapState(this.state.mapState==="map"?(Be().b[7][0]++,"inspect"):(Be().b[7][1]++,"map"))}},{key:"m",handler:()=>{Be().f[11]++,Be().s[34]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Be().f[12]++,Be().s[35]++,this.toggleModal("debug")}}]);Be().s[36]++,document.body.addEventListener("keyup",t=>{if(Be().f[13]++,Be().s[37]++,t.key==="Escape")Be().b[8][0]++,Be().s[38]++,t.target.blur(),Be().s[39]++,document.body.focus();else if(Be().b[8][1]++,Be().s[40]++,Be().b[10][0]++,this.state.isOpen.shortcuts||(Be().b[10][1]++,document.activeElement===document.body)){Be().b[9][0]++;const r=(Be().s[41]++,e.find(i=>(Be().f[14]++,Be().s[42]++,i.key===t.key)));Be().s[43]++,r?(Be().b[11][0]++,Be().s[44]++,this.setModal("shortcuts",!1),Be().s[45]++,r.handler()):Be().b[11][1]++}else Be().b[9][1]++})});handleKeyPress=(Be().s[46]++,e=>{Be().f[15]++,Be().s[47]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Be().b[12][0]++,Be().s[48]++,Be().b[14][0]++,e.metaKey&&(Be().b[14][1]++,e.shiftKey)&&(Be().b[14][2]++,e.keyCode===90)?(Be().b[13][0]++,Be().s[49]++,e.preventDefault(),Be().s[50]++,this.onRedo()):(Be().b[13][1]++,Be().s[51]++,Be().b[16][0]++,e.metaKey&&(Be().b[16][1]++,e.keyCode===90)?(Be().b[15][0]++,Be().s[52]++,e.preventDefault(),Be().s[53]++,this.onUndo()):Be().b[15][1]++)):(Be().b[12][1]++,Be().s[54]++,Be().b[18][0]++,e.ctrlKey&&(Be().b[18][1]++,e.keyCode===90)?(Be().b[17][0]++,Be().s[55]++,e.preventDefault(),Be().s[56]++,this.onUndo()):(Be().b[17][1]++,Be().s[57]++,Be().b[20][0]++,e.ctrlKey&&(Be().b[20][1]++,e.keyCode===89)?(Be().b[19][0]++,Be().s[58]++,e.preventDefault(),Be().s[59]++,this.onRedo()):Be().b[19][1]++))});async componentDidMount(){Be().f[16]++,Be().s[60]++,this.styleStore=await ufe((e,t)=>(Be().f[17]++,Be().s[61]++,this.onStyleChanged(e,t))),Be().s[62]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Be().f[18]++,Be().s[63]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){Be().f[19]++,Be().s[64]++,this.styleStore?.save(e)}updateFonts(e){Be().f[20]++;const t=(Be().s[65]++,Be().b[21][0]++,this.state.mapStyle.metadata||(Be().b[21][1]++,{})),r=(Be().s[66]++,Be().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(Be().b[22][1]++,fj.openmaptiles)),i=(Be().s[67]++,typeof e=="string"?(Be().b[23][0]++,e.replace("{key}",r)):(Be().b[23][1]++,e));Be().s[68]++,$de(i,s=>{Be().f[21]++,Be().s[69]++,this.setState({spec:LK(this.state.spec,"glyphs",s)})})}updateIcons(e){Be().f[22]++,Be().s[70]++,Vde(e,t=>{Be().f[23]++,Be().s[71]++,this.setState({spec:LK(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(Be().s[72]++,(e,t)=>{Be().f[24]++,Be().s[73]++,Be().b[25][0]++,e==="maputnik:renderer"&&(Be().b[25][1]++,t!==GQ(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Be().b[24][0]++,Be().s[74]++,this.setState({mapState:"map"})):Be().b[24][1]++;const r=(Be().s[75]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});Be().s[76]++,this.onStyleChanged(r)});onStyleChanged=(Be().s[77]++,(e,t=(Be().b[26][0]++,{}))=>{Be().f[25]++,Be().s[78]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},Be().s[79]++,Be().b[28][0]++,e.glyphs&&(Be().b[28][1]++,typeof e.glyphs=="string")?(Be().b[27][0]++,Be().s[80]++,e.glyphs=e2(e.glyphs,e)):Be().b[27][1]++,Be().s[81]++,Be().b[30][0]++,e.sprite&&(Be().b[30][1]++,typeof e.sprite=="string")?(Be().b[29][0]++,Be().s[82]++,e.sprite=e2(e.sprite,e)):Be().b[29][1]++,Be().s[83]++;for(const[o,f]of Object.entries(e.sources))Be().s[84]++,Be().b[32][0]++,f&&(Be().b[32][1]++,"url"in f)&&(Be().b[32][2]++,typeof f.url=="string")?(Be().b[31][0]++,Be().s[85]++,f.url=e2(f.url,e)):Be().b[31][1]++;Be().s[86]++,t.initialLoad?(Be().b[33][0]++,Be().s[87]++,this.getInitialStateFromUrl(e)):Be().b[33][1]++;const r=(Be().s[88]++,Be().b[34][0]++,af(e)||(Be().b[34][1]++,[])),i=(Be().s[89]++,[]);if(Be().s[90]++,Be().b[36][0]++,e&&(Be().b[36][1]++,e.layers)){Be().b[35][0]++;const o=(Be().s[91]++,new window.Map);Be().s[92]++,e.layers.forEach((f,C)=>{if(Be().f[26]++,Be().s[93]++,Be().b[38][0]++,f.id===""&&(Be().b[38][1]++,o.has(f.id))){Be().b[37][0]++;const M=(Be().s[94]++,new Error(`layers[${C}]: duplicate layer id [empty_string], previously used`));Be().s[95]++,i.push(M)}else Be().b[37][1]++;Be().s[96]++,o.set(f.id,!0)})}else Be().b[35][1]++;const s=(Be().s[97]++,i.concat(r).map(o=>{Be().f[27]++;const f=(Be().s[98]++,o.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Be().s[99]++,f){Be().b[39][0]++;const[,B,D]=(Be().s[100]++,f);return Be().s[101]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(B,10),key:"id",message:D}}}}else Be().b[39][1]++;const C=(Be().s[102]++,o.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Be().s[103]++,C){Be().b[40][0]++;const[,B,D]=(Be().s[104]++,C);return Be().s[105]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(B,10),key:"source",message:D}}}}else Be().b[40][1]++;const M=(Be().s[106]++,o.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Be().s[107]++,M){Be().b[41][0]++;const[,B,D,R,U]=(Be().s[108]++,M),G=(Be().s[109]++,Be().b[43][0]++,D&&(Be().b[43][1]++,R)?(Be().b[42][0]++,[D,R].join(".")):(Be().b[42][1]++,R));return Be().s[110]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(B,10),key:G,message:U}}}}else return Be().b[41][1]++,Be().s[111]++,{message:o.message}}));let l=(Be().s[112]++,void 0);if(Be().s[113]++,r.length>0){Be().b[44][0]++,Be().s[114]++,l=Y8(e),Be().s[115]++;for(const o of r){const{message:f}=(Be().s[116]++,o);if(Be().s[117]++,f){Be().b[45][0]++,Be().s[118]++;try{const C=(Be().s[119]++,f.split(":")[0]),M=(Be().s[120]++,C.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Be().s[121]++,f_.unset(l,M)}catch(C){Be().s[122]++,console.warn(f+" "+C)}}else Be().b[45][1]++}}else Be().b[44][1]++;Be().s[123]++,e.glyphs!==this.state.mapStyle.glyphs?(Be().b[46][0]++,Be().s[124]++,this.updateFonts(e.glyphs)):Be().b[46][1]++,Be().s[125]++,e.sprite!==this.state.mapStyle.sprite?(Be().b[47][0]++,Be().s[126]++,this.updateIcons(e.sprite)):Be().b[47][1]++,Be().s[127]++,t.addRevision?(Be().b[48][0]++,Be().s[128]++,this.revisionStore.addRevision(e)):Be().b[48][1]++,Be().s[129]++,t.save?(Be().b[49][0]++,Be().s[130]++,this.saveStyle(e)):Be().b[49][1]++,Be().s[131]++,this.setState({mapStyle:e,dirtyMapStyle:l,errors:s},()=>{Be().f[28]++,Be().s[132]++,this.fetchSources(),Be().s[133]++,this.setStateInUrl()})});onUndo=(Be().s[134]++,()=>{Be().f[29]++;const e=(Be().s[135]++,this.revisionStore.undo()),t=(Be().s[136]++,Hde(this.state.mapStyle,e));Be().s[137]++,this.onStyleChanged(e,{addRevision:!1}),Be().s[138]++,this.setState({infos:t})});onRedo=(Be().s[139]++,()=>{Be().f[30]++;const e=(Be().s[140]++,this.revisionStore.redo()),t=(Be().s[141]++,Zde(this.state.mapStyle,e));Be().s[142]++,this.onStyleChanged(e,{addRevision:!1}),Be().s[143]++,this.setState({infos:t})});onMoveLayer=(Be().s[144]++,e=>{Be().f[31]++;let{oldIndex:t,newIndex:r}=(Be().s[145]++,e),i=(Be().s[146]++,this.state.mapStyle.layers);if(Be().s[147]++,t=$8(t,0,i.length-1),Be().s[148]++,r=$8(r,0,i.length-1),Be().s[149]++,t===r){Be().b[50][0]++,Be().s[150]++;return}else Be().b[50][1]++;Be().s[151]++,t===this.state.selectedLayerIndex?(Be().b[51][0]++,Be().s[152]++,this.setState({selectedLayerIndex:r})):Be().b[51][1]++,Be().s[153]++,i=i.slice(0),Be().s[154]++,QQ(i,t,r),Be().s[155]++,this.onLayersChange(i)});onLayersChange=(Be().s[156]++,e=>{Be().f[32]++;const t=(Be().s[157]++,{...this.state.mapStyle,layers:e});Be().s[158]++,this.onStyleChanged(t)});onLayerDestroy=(Be().s[159]++,e=>{Be().f[33]++;const t=(Be().s[160]++,this.state.mapStyle.layers),r=(Be().s[161]++,t.slice(0));Be().s[162]++,r.splice(e,1),Be().s[163]++,this.onLayersChange(r)});onLayerCopy=(Be().s[164]++,e=>{Be().f[34]++;const t=(Be().s[165]++,this.state.mapStyle.layers),r=(Be().s[166]++,t.slice(0)),i=(Be().s[167]++,Y8(r[e]));Be().s[168]++,i.id=i.id+"-copy",Be().s[169]++,r.splice(e,0,i),Be().s[170]++,this.onLayersChange(r)});onLayerVisibilityToggle=(Be().s[171]++,e=>{Be().f[35]++;const t=(Be().s[172]++,this.state.mapStyle.layers),r=(Be().s[173]++,t.slice(0)),i=(Be().s[174]++,{...r[e]}),s=(Be().s[175]++,"layout"in i?(Be().b[52][0]++,{...i.layout}):(Be().b[52][1]++,{}));Be().s[176]++,s.visibility=s.visibility==="none"?(Be().b[53][0]++,"visible"):(Be().b[53][1]++,"none"),Be().s[177]++,i.layout=s,Be().s[178]++,r[e]=i,Be().s[179]++,this.onLayersChange(r)});onLayerIdChange=(Be().s[180]++,(e,t,r)=>{Be().f[36]++;const i=(Be().s[181]++,this.state.mapStyle.layers.slice(0));Be().s[182]++,i[e]={...i[e],id:r},Be().s[183]++,this.onLayersChange(i)});onLayerChanged=(Be().s[184]++,(e,t)=>{Be().f[37]++;const r=(Be().s[185]++,this.state.mapStyle.layers.slice(0));Be().s[186]++,r[e]=t,Be().s[187]++,this.onLayersChange(r)});setMapState=(Be().s[188]++,e=>{Be().f[38]++,Be().s[189]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(Be().s[190]++,e=>{Be().f[39]++;const t=(Be().s[191]++,Be().b[54][0]++,e.metadata||(Be().b[54][1]++,{}));if(Be().s[192]++,t["maputnik:renderer"]===void 0){Be().b[55][0]++;const r=(Be().s[193]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return Be().s[194]++,r}else return Be().b[55][1]++,Be().s[195]++,e});openStyle=(Be().s[196]++,(e,t)=>{Be().f[40]++,Be().s[197]++,this.setState({fileHandle:t}),Be().s[198]++,e=this.setDefaultValues(e),Be().s[199]++,this.onStyleChanged(e)});async fetchSources(){Be().f[41]++;const e=(Be().s[200]++,{});Be().s[201]++;for(const t of Object.keys(this.state.mapStyle.sources)){const r=(Be().s[202]++,this.state.mapStyle.sources[t]);if(Be().s[203]++,Be().b[57][0]++,r.type!=="vector"||(Be().b[57][1]++,!("url"in r)))Be().b[56][0]++,Be().s[204]++,e[t]=(Be().b[58][0]++,this.state.sources[t]||(Be().b[58][1]++,{...this.state.mapStyle.sources[t]})),Be().s[205]++,e[t].layers===void 0?(Be().b[59][0]++,Be().s[206]++,e[t].layers=[]):Be().b[59][1]++;else{Be().b[56][1]++,Be().s[207]++,e[t]={type:r.type,layers:[]};let i=(Be().s[208]++,r.url);Be().s[209]++;try{Be().s[210]++,i=e2(i,this.state.mapStyle)}catch(l){Be().s[211]++,console.warn("Failed to setFetchAccessToken: ",l)}Be().s[212]++;const s=l=>{if(Be().f[42]++,Be().s[213]++,Object.prototype.hasOwnProperty.call(l,"vector_layers"))Be().b[60][1]++;else{Be().b[60][0]++,Be().s[214]++;return}Be().s[215]++;for(const o of l.vector_layers)Be().s[216]++,e[t].layers.push(o.id)};Be().s[217]++;try{if(Be().s[218]++,i.startsWith("pmtiles://")){Be().b[61][0]++;const l=(Be().s[219]++,await new y6(i.substring(10)).getTileJson(""));Be().s[220]++,s(l)}else{Be().b[61][1]++;const l=(Be().s[221]++,await fetch(i,{mode:"cors"})),o=(Be().s[222]++,await l.json());Be().s[223]++,s(o)}}catch(l){Be().s[224]++,console.error(`Failed to process source for url: '${i}', ${l}`)}}}Be().s[225]++,TB(this.state.sources,e)?Be().b[62][1]++:(Be().b[62][0]++,Be().s[226]++,console.debug("Setting sources",e),Be().s[227]++,this.setState({sources:e}))}_getRenderer(){Be().f[43]++;const e=(Be().s[228]++,Be().b[63][0]++,this.state.mapStyle.metadata||(Be().b[63][1]++,{}));return Be().s[229]++,Be().b[64][0]++,e["maputnik:renderer"]||(Be().b[64][1]++,"mlgljs")}onMapChange=(Be().s[230]++,e=>{Be().f[44]++,Be().s[231]++,this.setState({mapView:e})});mapRenderer(){Be().f[45]++;const{mapStyle:e,dirtyMapStyle:t}=(Be().s[232]++,this.state),r=(Be().s[233]++,{mapStyle:(Be().b[65][0]++,t||(Be().b[65][1]++,e)),replaceAccessTokens:f=>(Be().f[46]++,Be().s[234]++,Ed.replaceAccessTokens(f,{allowFallback:!0})),onDataChange:f=>{Be().f[47]++,Be().s[235]++,this.layerWatcher.analyzeMap(f.map),Be().s[236]++,this.fetchSources()}}),i=(Be().s[237]++,this._getRenderer());let s;Be().s[238]++,i==="ol"?(Be().b[66][0]++,Be().s[239]++,s=le.jsx(Pre,{...r,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(Be().b[66][1]++,Be().s[240]++,s=le.jsx(dZ,{...r,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let l;Be().s[241]++,this.state.mapState.match(/^filter-/)?(Be().b[67][0]++,Be().s[242]++,l=this.state.mapState.replace(/^filter-/,"")):Be().b[67][1]++;const o=(Be().s[243]++,{});return Be().s[244]++,l?(Be().b[68][0]++,Be().s[245]++,o.filter=`url('#${l}')`):Be().b[68][1]++,Be().s[246]++,le.jsx("div",{style:o,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:s})}setStateInUrl=(Be().s[247]++,()=>{Be().f[48]++;const{mapState:e,mapStyle:t,isOpen:r}=(Be().s[248]++,this.state),{selectedLayerIndex:i}=(Be().s[249]++,this.state),s=(Be().s[250]++,new URL(location.href)),l=(Be().s[251]++,t7(JSON.stringify(t)));Be().s[252]++,s.searchParams.set("layer",`${l}~${i}`);const o=(Be().s[253]++,Object.entries(r).map(([f,C])=>(Be().f[49]++,Be().s[254]++,C===!0?(Be().b[69][0]++,f):(Be().b[69][1]++,null))).filter(f=>(Be().f[50]++,Be().s[255]++,f!==null)));Be().s[256]++,o.length>0?(Be().b[70][0]++,Be().s[257]++,s.searchParams.set("modal",o.join(","))):(Be().b[70][1]++,Be().s[258]++,s.searchParams.delete("modal")),Be().s[259]++,e==="map"?(Be().b[71][0]++,Be().s[260]++,s.searchParams.delete("view")):(Be().b[71][1]++,Be().s[261]++,e==="inspect"?(Be().b[72][0]++,Be().s[262]++,s.searchParams.set("view","inspect")):Be().b[72][1]++),Be().s[263]++,history.replaceState({selectedLayerIndex:i},"Maputnik",s.href)});getInitialStateFromUrl=(Be().s[264]++,e=>{Be().f[51]++;const t=(Be().s[265]++,new URL(location.href)),r=(Be().s[266]++,t.searchParams.get("modal"));if(Be().s[267]++,Be().b[74][0]++,r&&(Be().b[74][1]++,r!=="")){Be().b[73][0]++;const l=(Be().s[268]++,r.split(",")),o=(Be().s[269]++,{});Be().s[270]++,l.forEach(f=>{Be().f[52]++,Be().s[271]++,o[f]=!0}),Be().s[272]++,this.setState({isOpen:{...this.state.isOpen,...o}})}else Be().b[73][1]++;const i=(Be().s[273]++,t.searchParams.get("view"));Be().s[274]++,Be().b[76][0]++,i&&(Be().b[76][1]++,i!=="")?(Be().b[75][0]++,Be().s[275]++,this.setMapState(i)):Be().b[75][1]++;const s=(Be().s[276]++,t.searchParams.get("layer"));if(Be().s[277]++,s){Be().b[77][0]++,Be().s[278]++;try{const l=(Be().s[279]++,s.split("~")),[o,f]=(Be().s[280]++,[l[0],parseInt(l[1],10)]);let C=(Be().s[281]++,!0);if(Be().s[282]++,o!=="-"){Be().b[78][0]++;const M=(Be().s[283]++,t7(JSON.stringify(e)));Be().s[284]++,M!==parseInt(o,10)?(Be().b[79][0]++,Be().s[285]++,C=!1):Be().b[79][1]++}else Be().b[78][1]++;Be().s[286]++,C?(Be().b[80][0]++,Be().s[287]++,this.setState({selectedLayerIndex:f,selectedLayerOriginalId:e.layers[f].id})):Be().b[80][1]++}catch(l){Be().s[288]++,console.warn(l)}}else Be().b[77][1]++});onLayerSelect=(Be().s[289]++,e=>{Be().f[53]++,Be().s[290]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){Be().f[54]++,Be().s[291]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){Be().f[55]++,Be().s[292]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(Be().s[293]++,e=>{Be().f[56]++,Be().s[294]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(Be().s[295]++,(e,t)=>{Be().f[57]++,Be().s[296]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(Be().s[297]++,(e,t)=>{Be().f[58]++,Be().s[298]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){Be().f[59]++;const e=(Be().s[299]++,Be().b[81][0]++,this.state.mapStyle.layers||(Be().b[81][1]++,[])),t=(Be().s[300]++,e.length>0?(Be().b[82][0]++,e[this.state.selectedLayerIndex]):(Be().b[82][1]++,void 0)),r=(Be().s[301]++,le.jsx(ihe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),i=(Be().s[302]++,le.jsx(iae,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(Be().s[303]++,t?(Be().b[83][0]++,le.jsx(Kce,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Be().b[83][1]++,void 0)),l=(Be().s[304]++,this.state.errors.length+this.state.infos.length>0?(Be().b[84][0]++,le.jsx(Ahe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Be().b[84][1]++,void 0)),o=(Be().s[305]++,le.jsxs("div",{children:[le.jsx(ude,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),le.jsx(lde,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),le.jsx(dhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),le.jsx(Phe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),le.jsx(sde,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),le.jsx(Xhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Be().s[306]++,le.jsx(ahe,{toolbar:r,layerList:i,layerEditor:s,map:this.mapRenderer(),bottom:l,modals:o})}}const vfe=NK.createRoot(document.querySelector("#app"));vfe.render(le.jsx(Ey.Provider,{value:{className:"react-icons"},children:le.jsx(yfe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Bsbp4K50.js.map
