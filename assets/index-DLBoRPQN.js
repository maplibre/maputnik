var QW=Object.defineProperty;var YW=(n,e,t)=>e in n?QW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pn=(n,e,t)=>YW(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function dl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Z6(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var S3={exports:{}},uv={},E3={exports:{}},hs={},d8;function qW(){if(d8)return hs;d8=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.iterator;function k(Le){return Le===null||typeof Le!="object"?null:(Le=B&&Le[B]||Le["@@iterator"],typeof Le=="function"?Le:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,N={};function W(Le,Xe,Ct){this.props=Le,this.context=Xe,this.refs=N,this.updater=Ct||P}W.prototype.isReactComponent={},W.prototype.setState=function(Le,Xe){if(typeof Le!="object"&&typeof Le!="function"&&Le!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Le,Xe,"setState")},W.prototype.forceUpdate=function(Le){this.updater.enqueueForceUpdate(this,Le,"forceUpdate")};function V(){}V.prototype=W.prototype;function $(Le,Xe,Ct){this.props=Le,this.context=Xe,this.refs=N,this.updater=Ct||P}var ie=$.prototype=new V;ie.constructor=$,D(ie,W.prototype),ie.isPureReactComponent=!0;var ne=Array.isArray,q=Object.prototype.hasOwnProperty,te={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function oe(Le,Xe,Ct){var Gt,mt={},Ut=null,kt=null;if(Xe!=null)for(Gt in Xe.ref!==void 0&&(kt=Xe.ref),Xe.key!==void 0&&(Ut=""+Xe.key),Xe)q.call(Xe,Gt)&&!G.hasOwnProperty(Gt)&&(mt[Gt]=Xe[Gt]);var Te=arguments.length-2;if(Te===1)mt.children=Ct;else if(1<Te){for(var Re=Array(Te),Ue=0;Ue<Te;Ue++)Re[Ue]=arguments[Ue+2];mt.children=Re}if(Le&&Le.defaultProps)for(Gt in Te=Le.defaultProps,Te)mt[Gt]===void 0&&(mt[Gt]=Te[Gt]);return{$$typeof:n,type:Le,key:Ut,ref:kt,props:mt,_owner:te.current}}function fe(Le,Xe){return{$$typeof:n,type:Le.type,key:Xe,ref:Le.ref,props:Le.props,_owner:Le._owner}}function he(Le){return typeof Le=="object"&&Le!==null&&Le.$$typeof===n}function Me(Le){var Xe={"=":"=0",":":"=2"};return"$"+Le.replace(/[=:]/g,function(Ct){return Xe[Ct]})}var me=/\/+/g;function pe(Le,Xe){return typeof Le=="object"&&Le!==null&&Le.key!=null?Me(""+Le.key):Xe.toString(36)}function qe(Le,Xe,Ct,Gt,mt){var Ut=typeof Le;(Ut==="undefined"||Ut==="boolean")&&(Le=null);var kt=!1;if(Le===null)kt=!0;else switch(Ut){case"string":case"number":kt=!0;break;case"object":switch(Le.$$typeof){case n:case e:kt=!0}}if(kt)return kt=Le,mt=mt(kt),Le=Gt===""?"."+pe(kt,0):Gt,ne(mt)?(Ct="",Le!=null&&(Ct=Le.replace(me,"$&/")+"/"),qe(mt,Xe,Ct,"",function(Ue){return Ue})):mt!=null&&(he(mt)&&(mt=fe(mt,Ct+(!mt.key||kt&&kt.key===mt.key?"":(""+mt.key).replace(me,"$&/")+"/")+Le)),Xe.push(mt)),1;if(kt=0,Gt=Gt===""?".":Gt+":",ne(Le))for(var Te=0;Te<Le.length;Te++){Ut=Le[Te];var Re=Gt+pe(Ut,Te);kt+=qe(Ut,Xe,Ct,Re,mt)}else if(Re=k(Le),typeof Re=="function")for(Le=Re.call(Le),Te=0;!(Ut=Le.next()).done;)Ut=Ut.value,Re=Gt+pe(Ut,Te++),kt+=qe(Ut,Xe,Ct,Re,mt);else if(Ut==="object")throw Xe=String(Le),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(Le).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.");return kt}function Se(Le,Xe,Ct){if(Le==null)return Le;var Gt=[],mt=0;return qe(Le,Gt,"","",function(Ut){return Xe.call(Ct,Ut,mt++)}),Gt}function vt(Le){if(Le._status===-1){var Xe=Le._result;Xe=Xe(),Xe.then(function(Ct){(Le._status===0||Le._status===-1)&&(Le._status=1,Le._result=Ct)},function(Ct){(Le._status===0||Le._status===-1)&&(Le._status=2,Le._result=Ct)}),Le._status===-1&&(Le._status=0,Le._result=Xe)}if(Le._status===1)return Le._result.default;throw Le._result}var Je={current:null},Ke={transition:null},je={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Ke,ReactCurrentOwner:te};function Pe(){throw Error("act(...) is not supported in production builds of React.")}return hs.Children={map:Se,forEach:function(Le,Xe,Ct){Se(Le,function(){Xe.apply(this,arguments)},Ct)},count:function(Le){var Xe=0;return Se(Le,function(){Xe++}),Xe},toArray:function(Le){return Se(Le,function(Xe){return Xe})||[]},only:function(Le){if(!he(Le))throw Error("React.Children.only expected to receive a single React element child.");return Le}},hs.Component=W,hs.Fragment=t,hs.Profiler=i,hs.PureComponent=$,hs.StrictMode=r,hs.Suspense=p,hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=je,hs.act=Pe,hs.cloneElement=function(Le,Xe,Ct){if(Le==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Le+".");var Gt=D({},Le.props),mt=Le.key,Ut=Le.ref,kt=Le._owner;if(Xe!=null){if(Xe.ref!==void 0&&(Ut=Xe.ref,kt=te.current),Xe.key!==void 0&&(mt=""+Xe.key),Le.type&&Le.type.defaultProps)var Te=Le.type.defaultProps;for(Re in Xe)q.call(Xe,Re)&&!G.hasOwnProperty(Re)&&(Gt[Re]=Xe[Re]===void 0&&Te!==void 0?Te[Re]:Xe[Re])}var Re=arguments.length-2;if(Re===1)Gt.children=Ct;else if(1<Re){Te=Array(Re);for(var Ue=0;Ue<Re;Ue++)Te[Ue]=arguments[Ue+2];Gt.children=Te}return{$$typeof:n,type:Le.type,key:mt,ref:Ut,props:Gt,_owner:kt}},hs.createContext=function(Le){return Le={$$typeof:l,_currentValue:Le,_currentValue2:Le,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Le.Provider={$$typeof:s,_context:Le},Le.Consumer=Le},hs.createElement=oe,hs.createFactory=function(Le){var Xe=oe.bind(null,Le);return Xe.type=Le,Xe},hs.createRef=function(){return{current:null}},hs.forwardRef=function(Le){return{$$typeof:o,render:Le}},hs.isValidElement=he,hs.lazy=function(Le){return{$$typeof:x,_payload:{_status:-1,_result:Le},_init:vt}},hs.memo=function(Le,Xe){return{$$typeof:v,type:Le,compare:Xe===void 0?null:Xe}},hs.startTransition=function(Le){var Xe=Ke.transition;Ke.transition={};try{Le()}finally{Ke.transition=Xe}},hs.unstable_act=Pe,hs.useCallback=function(Le,Xe){return Je.current.useCallback(Le,Xe)},hs.useContext=function(Le){return Je.current.useContext(Le)},hs.useDebugValue=function(){},hs.useDeferredValue=function(Le){return Je.current.useDeferredValue(Le)},hs.useEffect=function(Le,Xe){return Je.current.useEffect(Le,Xe)},hs.useId=function(){return Je.current.useId()},hs.useImperativeHandle=function(Le,Xe,Ct){return Je.current.useImperativeHandle(Le,Xe,Ct)},hs.useInsertionEffect=function(Le,Xe){return Je.current.useInsertionEffect(Le,Xe)},hs.useLayoutEffect=function(Le,Xe){return Je.current.useLayoutEffect(Le,Xe)},hs.useMemo=function(Le,Xe){return Je.current.useMemo(Le,Xe)},hs.useReducer=function(Le,Xe,Ct){return Je.current.useReducer(Le,Xe,Ct)},hs.useRef=function(Le){return Je.current.useRef(Le)},hs.useState=function(Le){return Je.current.useState(Le)},hs.useSyncExternalStore=function(Le,Xe,Ct){return Je.current.useSyncExternalStore(Le,Xe,Ct)},hs.useTransition=function(){return Je.current.useTransition()},hs.version="18.3.1",hs}var f8;function Da(){return f8||(f8=1,E3.exports=qW()),E3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8;function VW(){if(p8)return uv;p8=1;var n=Da(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(o,p,v){var x,B={},k=null,P=null;v!==void 0&&(k=""+v),p.key!==void 0&&(k=""+p.key),p.ref!==void 0&&(P=p.ref);for(x in p)r.call(p,x)&&!s.hasOwnProperty(x)&&(B[x]=p[x]);if(o&&o.defaultProps)for(x in p=o.defaultProps,p)B[x]===void 0&&(B[x]=p[x]);return{$$typeof:e,type:o,key:k,ref:P,props:B,_owner:i.current}}return uv.Fragment=t,uv.jsx=l,uv.jsxs=l,uv}var m8;function HW(){return m8||(m8=1,S3.exports=VW()),S3.exports}var Ae=HW(),Ai=Da();const Zn=dl(Ai);var ID={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},DE=Zn.createContext&&Zn.createContext(ID),$W=["attr","size","title"];function ZW(n,e){if(n==null)return{};var t=XW(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function XW(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Db(){return Db=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Db.apply(this,arguments)}function g8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Fb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(t),!0).forEach(function(r){JW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function JW(n,e,t){return e=ej(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ej(n){var e=tj(n,"string");return typeof e=="symbol"?e:e+""}function tj(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TD(n){return n&&n.map((e,t)=>Zn.createElement(e.tag,Fb({key:t},e.attr),TD(e.child)))}function eA(n){return e=>Zn.createElement(nj,Db({attr:Fb({},n.attr)},e),TD(n.child))}function nj(n){var e=t=>{var{attr:r,size:i,title:s}=n,l=ZW(n,$W),o=i||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),Zn.createElement("svg",Db({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:p,style:Fb(Fb({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Zn.createElement("title",null,s),n.children)};return DE!==void 0?Zn.createElement(DE.Consumer,null,t=>e(t)):e(ID)}var P_={},B3={exports:{}},ud={},O3={exports:{}},I3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y8;function rj(){return y8||(y8=1,function(n){function e(Ke,je){var Pe=Ke.length;Ke.push(je);e:for(;0<Pe;){var Le=Pe-1>>>1,Xe=Ke[Le];if(0<i(Xe,je))Ke[Le]=je,Ke[Pe]=Xe,Pe=Le;else break e}}function t(Ke){return Ke.length===0?null:Ke[0]}function r(Ke){if(Ke.length===0)return null;var je=Ke[0],Pe=Ke.pop();if(Pe!==je){Ke[0]=Pe;e:for(var Le=0,Xe=Ke.length,Ct=Xe>>>1;Le<Ct;){var Gt=2*(Le+1)-1,mt=Ke[Gt],Ut=Gt+1,kt=Ke[Ut];if(0>i(mt,Pe))Ut<Xe&&0>i(kt,mt)?(Ke[Le]=kt,Ke[Ut]=Pe,Le=Ut):(Ke[Le]=mt,Ke[Gt]=Pe,Le=Gt);else if(Ut<Xe&&0>i(kt,Pe))Ke[Le]=kt,Ke[Ut]=Pe,Le=Ut;else break e}}return je}function i(Ke,je){var Pe=Ke.sortIndex-je.sortIndex;return Pe!==0?Pe:Ke.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var p=[],v=[],x=1,B=null,k=3,P=!1,D=!1,N=!1,W=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(Ke){for(var je=t(v);je!==null;){if(je.callback===null)r(v);else if(je.startTime<=Ke)r(v),je.sortIndex=je.expirationTime,e(p,je);else break;je=t(v)}}function ne(Ke){if(N=!1,ie(Ke),!D)if(t(p)!==null)D=!0,vt(q);else{var je=t(v);je!==null&&Je(ne,je.startTime-Ke)}}function q(Ke,je){D=!1,N&&(N=!1,V(oe),oe=-1),P=!0;var Pe=k;try{for(ie(je),B=t(p);B!==null&&(!(B.expirationTime>je)||Ke&&!Me());){var Le=B.callback;if(typeof Le=="function"){B.callback=null,k=B.priorityLevel;var Xe=Le(B.expirationTime<=je);je=n.unstable_now(),typeof Xe=="function"?B.callback=Xe:B===t(p)&&r(p),ie(je)}else r(p);B=t(p)}if(B!==null)var Ct=!0;else{var Gt=t(v);Gt!==null&&Je(ne,Gt.startTime-je),Ct=!1}return Ct}finally{B=null,k=Pe,P=!1}}var te=!1,G=null,oe=-1,fe=5,he=-1;function Me(){return!(n.unstable_now()-he<fe)}function me(){if(G!==null){var Ke=n.unstable_now();he=Ke;var je=!0;try{je=G(!0,Ke)}finally{je?pe():(te=!1,G=null)}}else te=!1}var pe;if(typeof $=="function")pe=function(){$(me)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Se=qe.port2;qe.port1.onmessage=me,pe=function(){Se.postMessage(null)}}else pe=function(){W(me,0)};function vt(Ke){G=Ke,te||(te=!0,pe())}function Je(Ke,je){oe=W(function(){Ke(n.unstable_now())},je)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ke){Ke.callback=null},n.unstable_continueExecution=function(){D||P||(D=!0,vt(q))},n.unstable_forceFrameRate=function(Ke){0>Ke||125<Ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<Ke?Math.floor(1e3/Ke):5},n.unstable_getCurrentPriorityLevel=function(){return k},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(Ke){switch(k){case 1:case 2:case 3:var je=3;break;default:je=k}var Pe=k;k=je;try{return Ke()}finally{k=Pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Ke,je){switch(Ke){case 1:case 2:case 3:case 4:case 5:break;default:Ke=3}var Pe=k;k=Ke;try{return je()}finally{k=Pe}},n.unstable_scheduleCallback=function(Ke,je,Pe){var Le=n.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Le+Pe:Le):Pe=Le,Ke){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Pe+Xe,Ke={id:x++,callback:je,priorityLevel:Ke,startTime:Pe,expirationTime:Xe,sortIndex:-1},Pe>Le?(Ke.sortIndex=Pe,e(v,Ke),t(p)===null&&Ke===t(v)&&(N?(V(oe),oe=-1):N=!0,Je(ne,Pe-Le))):(Ke.sortIndex=Xe,e(p,Ke),D||P||(D=!0,vt(q))),Ke},n.unstable_shouldYield=Me,n.unstable_wrapCallback=function(Ke){var je=k;return function(){var Pe=k;k=je;try{return Ke.apply(this,arguments)}finally{k=Pe}}}}(I3)),I3}var v8;function ij(){return v8||(v8=1,O3.exports=rj()),O3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C8;function oj(){if(C8)return ud;C8=1;var n=Da(),e=ij();function t(m){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+m,F=1;F<arguments.length;F++)_+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,_){l(m,_),l(m+"Capture",_)}function l(m,_){for(i[m]=_,m=0;m<_.length;m++)r.add(_[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},B={};function k(m){return p.call(B,m)?!0:p.call(x,m)?!1:v.test(m)?B[m]=!0:(x[m]=!0,!1)}function P(m,_,F,Q){if(F!==null&&F.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return Q?!1:F!==null?!F.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function D(m,_,F,Q){if(_===null||typeof _>"u"||P(m,_,F,Q))return!0;if(Q)return!1;if(F!==null)switch(F.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function N(m,_,F,Q,le,ve,tt){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=Q,this.attributeNamespace=le,this.mustUseProperty=F,this.propertyName=m,this.type=_,this.sanitizeURL=ve,this.removeEmptyString=tt}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){W[m]=new N(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var _=m[0];W[_]=new N(_,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){W[m]=new N(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){W[m]=new N(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){W[m]=new N(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){W[m]=new N(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){W[m]=new N(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){W[m]=new N(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){W[m]=new N(m,5,!1,m.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function $(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var _=m.replace(V,$);W[_]=new N(_,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var _=m.replace(V,$);W[_]=new N(_,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var _=m.replace(V,$);W[_]=new N(_,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){W[m]=new N(m,1,!1,m.toLowerCase(),null,!1,!1)}),W.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){W[m]=new N(m,1,!1,m.toLowerCase(),null,!0,!0)});function ie(m,_,F,Q){var le=W.hasOwnProperty(_)?W[_]:null;(le!==null?le.type!==0:Q||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(D(_,F,le,Q)&&(F=null),Q||le===null?k(_)&&(F===null?m.removeAttribute(_):m.setAttribute(_,""+F)):le.mustUseProperty?m[le.propertyName]=F===null?le.type===3?!1:"":F:(_=le.attributeName,Q=le.attributeNamespace,F===null?m.removeAttribute(_):(le=le.type,F=le===3||le===4&&F===!0?"":""+F,Q?m.setAttributeNS(Q,_,F):m.setAttribute(_,F))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),te=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),Me=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),vt=Symbol.for("react.lazy"),Je=Symbol.for("react.offscreen"),Ke=Symbol.iterator;function je(m){return m===null||typeof m!="object"?null:(m=Ke&&m[Ke]||m["@@iterator"],typeof m=="function"?m:null)}var Pe=Object.assign,Le;function Xe(m){if(Le===void 0)try{throw Error()}catch(F){var _=F.stack.trim().match(/\n( *(at )?)/);Le=_&&_[1]||""}return`
`+Le+m}var Ct=!1;function Gt(m,_){if(!m||Ct)return"";Ct=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Sn){var Q=Sn}Reflect.construct(m,[],_)}else{try{_.call()}catch(Sn){Q=Sn}m.call(_.prototype)}else{try{throw Error()}catch(Sn){Q=Sn}m()}}catch(Sn){if(Sn&&Q&&typeof Sn.stack=="string"){for(var le=Sn.stack.split(`
`),ve=Q.stack.split(`
`),tt=le.length-1,Ot=ve.length-1;1<=tt&&0<=Ot&&le[tt]!==ve[Ot];)Ot--;for(;1<=tt&&0<=Ot;tt--,Ot--)if(le[tt]!==ve[Ot]){if(tt!==1||Ot!==1)do if(tt--,Ot--,0>Ot||le[tt]!==ve[Ot]){var jt=`
`+le[tt].replace(" at new "," at ");return m.displayName&&jt.includes("<anonymous>")&&(jt=jt.replace("<anonymous>",m.displayName)),jt}while(1<=tt&&0<=Ot);break}}}finally{Ct=!1,Error.prepareStackTrace=F}return(m=m?m.displayName||m.name:"")?Xe(m):""}function mt(m){switch(m.tag){case 5:return Xe(m.type);case 16:return Xe("Lazy");case 13:return Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 2:case 15:return m=Gt(m.type,!1),m;case 11:return m=Gt(m.type.render,!1),m;case 1:return m=Gt(m.type,!0),m;default:return""}}function Ut(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case G:return"Fragment";case te:return"Portal";case fe:return"Profiler";case oe:return"StrictMode";case pe:return"Suspense";case qe:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case Me:return(m.displayName||"Context")+".Consumer";case he:return(m._context.displayName||"Context")+".Provider";case me:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Se:return _=m.displayName||null,_!==null?_:Ut(m.type)||"Memo";case vt:_=m._payload,m=m._init;try{return Ut(m(_))}catch{}}return null}function kt(m){var _=m.type;switch(m.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=_.render,m=m.displayName||m.name||"",_.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ut(_);case 8:return _===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Te(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Re(m){var _=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ue(m){var _=Re(m)?"checked":"value",F=Object.getOwnPropertyDescriptor(m.constructor.prototype,_),Q=""+m[_];if(!m.hasOwnProperty(_)&&typeof F<"u"&&typeof F.get=="function"&&typeof F.set=="function"){var le=F.get,ve=F.set;return Object.defineProperty(m,_,{configurable:!0,get:function(){return le.call(this)},set:function(tt){Q=""+tt,ve.call(this,tt)}}),Object.defineProperty(m,_,{enumerable:F.enumerable}),{getValue:function(){return Q},setValue:function(tt){Q=""+tt},stopTracking:function(){m._valueTracker=null,delete m[_]}}}}function nt(m){m._valueTracker||(m._valueTracker=Ue(m))}function _t(m){if(!m)return!1;var _=m._valueTracker;if(!_)return!0;var F=_.getValue(),Q="";return m&&(Q=Re(m)?m.checked?"true":"false":m.value),m=Q,m!==F?(_.setValue(m),!0):!1}function gt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Kt(m,_){var F=_.checked;return Pe({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:F??m._wrapperState.initialChecked})}function $t(m,_){var F=_.defaultValue==null?"":_.defaultValue,Q=_.checked!=null?_.checked:_.defaultChecked;F=Te(_.value!=null?_.value:F),m._wrapperState={initialChecked:Q,initialValue:F,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function Rt(m,_){_=_.checked,_!=null&&ie(m,"checked",_,!1)}function _n(m,_){Rt(m,_);var F=Te(_.value),Q=_.type;if(F!=null)Q==="number"?(F===0&&m.value===""||m.value!=F)&&(m.value=""+F):m.value!==""+F&&(m.value=""+F);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}_.hasOwnProperty("value")?nn(m,_.type,F):_.hasOwnProperty("defaultValue")&&nn(m,_.type,Te(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(m.defaultChecked=!!_.defaultChecked)}function pr(m,_,F){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var Q=_.type;if(!(Q!=="submit"&&Q!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+m._wrapperState.initialValue,F||_===m.value||(m.value=_),m.defaultValue=_}F=m.name,F!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,F!==""&&(m.name=F)}function nn(m,_,F){(_!=="number"||gt(m.ownerDocument)!==m)&&(F==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+F&&(m.defaultValue=""+F))}var Xn=Array.isArray;function Fn(m,_,F,Q){if(m=m.options,_){_={};for(var le=0;le<F.length;le++)_["$"+F[le]]=!0;for(F=0;F<m.length;F++)le=_.hasOwnProperty("$"+m[F].value),m[F].selected!==le&&(m[F].selected=le),le&&Q&&(m[F].defaultSelected=!0)}else{for(F=""+Te(F),_=null,le=0;le<m.length;le++){if(m[le].value===F){m[le].selected=!0,Q&&(m[le].defaultSelected=!0);return}_!==null||m[le].disabled||(_=m[le])}_!==null&&(_.selected=!0)}}function an(m,_){if(_.dangerouslySetInnerHTML!=null)throw Error(t(91));return Pe({},_,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Bn(m,_){var F=_.value;if(F==null){if(F=_.children,_=_.defaultValue,F!=null){if(_!=null)throw Error(t(92));if(Xn(F)){if(1<F.length)throw Error(t(93));F=F[0]}_=F}_==null&&(_=""),F=_}m._wrapperState={initialValue:Te(F)}}function Cr(m,_){var F=Te(_.value),Q=Te(_.defaultValue);F!=null&&(F=""+F,F!==m.value&&(m.value=F),_.defaultValue==null&&m.defaultValue!==F&&(m.defaultValue=F)),Q!=null&&(m.defaultValue=""+Q)}function lr(m){var _=m.textContent;_===m._wrapperState.initialValue&&_!==""&&_!==null&&(m.value=_)}function hr(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function We(m,_){return m==null||m==="http://www.w3.org/1999/xhtml"?hr(_):m==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ce,ye=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,F,Q,le){MSApp.execUnsafeLocalFunction(function(){return m(_,F,Q,le)})}:m}(function(m,_){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=_;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=ce.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;_.firstChild;)m.appendChild(_.firstChild)}});function rt(m,_){if(_){var F=m.firstChild;if(F&&F===m.lastChild&&F.nodeType===3){F.nodeValue=_;return}}m.textContent=_}var Et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(Et).forEach(function(m){Ht.forEach(function(_){_=_+m.charAt(0).toUpperCase()+m.substring(1),Et[_]=Et[m]})});function Zt(m,_,F){return _==null||typeof _=="boolean"||_===""?"":F||typeof _!="number"||_===0||Et.hasOwnProperty(m)&&Et[m]?(""+_).trim():_+"px"}function Jn(m,_){m=m.style;for(var F in _)if(_.hasOwnProperty(F)){var Q=F.indexOf("--")===0,le=Zt(F,_[F],Q);F==="float"&&(F="cssFloat"),Q?m.setProperty(F,le):m[F]=le}}var He=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ae(m,_){if(_){if(He[m]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(t(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(t(61))}if(_.style!=null&&typeof _.style!="object")throw Error(t(62))}}function _e(m,_){if(m.indexOf("-")===-1)return typeof _.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f=null;function Qe(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ee=null,it=null,ut=null;function at(m){if(m=Po(m)){if(typeof Ee!="function")throw Error(t(280));var _=m.stateNode;_&&(_=ms(_),Ee(m.stateNode,m.type,_))}}function zt(m){it?ut?ut.push(m):ut=[m]:it=m}function Qt(){if(it){var m=it,_=ut;if(ut=it=null,at(m),_)for(m=0;m<_.length;m++)at(_[m])}}function Nt(m,_){return m(_)}function rn(){}var Rn=!1;function Dn(m,_,F){if(Rn)return m(_,F);Rn=!0;try{return Nt(m,_,F)}finally{Rn=!1,(it!==null||ut!==null)&&(rn(),Qt())}}function mr(m,_){var F=m.stateNode;if(F===null)return null;var Q=ms(F);if(Q===null)return null;F=Q[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(F&&typeof F!="function")throw Error(t(231,_,typeof F));return F}var Tr=!1;if(o)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{Tr=!1}function br(m,_,F,Q,le,ve,tt,Ot,jt){var Sn=Array.prototype.slice.call(arguments,3);try{_.apply(F,Sn)}catch(or){this.onError(or)}}var Gr=!1,Si=null,Fr=!1,yn=null,ar={onError:function(m){Gr=!0,Si=m}};function Pr(m,_,F,Q,le,ve,tt,Ot,jt){Gr=!1,Si=null,br.apply(ar,arguments)}function Cs(m,_,F,Q,le,ve,tt,Ot,jt){if(Pr.apply(this,arguments),Gr){if(Gr){var Sn=Si;Gr=!1,Si=null}else throw Error(t(198));Fr||(Fr=!0,yn=Sn)}}function Ao(m){var _=m,F=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,(_.flags&4098)!==0&&(F=_.return),m=_.return;while(m)}return _.tag===3?F:null}function ui(m){if(m.tag===13){var _=m.memoizedState;if(_===null&&(m=m.alternate,m!==null&&(_=m.memoizedState)),_!==null)return _.dehydrated}return null}function $r(m){if(Ao(m)!==m)throw Error(t(188))}function _s(m){var _=m.alternate;if(!_){if(_=Ao(m),_===null)throw Error(t(188));return _!==m?null:m}for(var F=m,Q=_;;){var le=F.return;if(le===null)break;var ve=le.alternate;if(ve===null){if(Q=le.return,Q!==null){F=Q;continue}break}if(le.child===ve.child){for(ve=le.child;ve;){if(ve===F)return $r(le),m;if(ve===Q)return $r(le),_;ve=ve.sibling}throw Error(t(188))}if(F.return!==Q.return)F=le,Q=ve;else{for(var tt=!1,Ot=le.child;Ot;){if(Ot===F){tt=!0,F=le,Q=ve;break}if(Ot===Q){tt=!0,Q=le,F=ve;break}Ot=Ot.sibling}if(!tt){for(Ot=ve.child;Ot;){if(Ot===F){tt=!0,F=ve,Q=le;break}if(Ot===Q){tt=!0,Q=ve,F=le;break}Ot=Ot.sibling}if(!tt)throw Error(t(189))}}if(F.alternate!==Q)throw Error(t(190))}if(F.tag!==3)throw Error(t(188));return F.stateNode.current===F?m:_}function fs(m){return m=_s(m),m!==null?Ja(m):null}function Ja(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var _=Ja(m);if(_!==null)return _;m=m.sibling}return null}var sa=e.unstable_scheduleCallback,Wo=e.unstable_cancelCallback,zo=e.unstable_shouldYield,So=e.unstable_requestPaint,pi=e.unstable_now,tA=e.unstable_getCurrentPriorityLevel,_l=e.unstable_ImmediatePriority,Ni=e.unstable_UserBlockingPriority,wr=e.unstable_NormalPriority,Fa=e.unstable_LowPriority,bs=e.unstable_IdlePriority,Rs=null,Ve=null;function xt(m){if(Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Rs,m,void 0,(m.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:dr,Yn=Math.log,fn=Math.LN2;function dr(m){return m>>>=0,m===0?32:31-(Yn(m)/fn|0)|0}var Wi=64,Co=4194304;function ls(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function pa(m,_){var F=m.pendingLanes;if(F===0)return 0;var Q=0,le=m.suspendedLanes,ve=m.pingedLanes,tt=F&268435455;if(tt!==0){var Ot=tt&~le;Ot!==0?Q=ls(Ot):(ve&=tt,ve!==0&&(Q=ls(ve)))}else tt=F&~le,tt!==0?Q=ls(tt):ve!==0&&(Q=ls(ve));if(Q===0)return 0;if(_!==0&&_!==Q&&(_&le)===0&&(le=Q&-Q,ve=_&-_,le>=ve||le===16&&(ve&4194240)!==0))return _;if((Q&4)!==0&&(Q|=F&16),_=m.entangledLanes,_!==0)for(m=m.entanglements,_&=Q;0<_;)F=31-xn(_),le=1<<F,Q|=m[F],_&=~le;return Q}function nA(m,_){switch(m){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(m,_){for(var F=m.suspendedLanes,Q=m.pingedLanes,le=m.expirationTimes,ve=m.pendingLanes;0<ve;){var tt=31-xn(ve),Ot=1<<tt,jt=le[tt];jt===-1?((Ot&F)===0||(Ot&Q)!==0)&&(le[tt]=nA(Ot,_)):jt<=_&&(m.expiredLanes|=Ot),ve&=~Ot}}function ZA(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function rA(){var m=Wi;return Wi<<=1,(Wi&4194240)===0&&(Wi=64),m}function ma(m){for(var _=[],F=0;31>F;F++)_.push(m);return _}function Ea(m,_,F){m.pendingLanes|=_,_!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,_=31-xn(_),m[_]=F}function _c(m,_){var F=m.pendingLanes&~_;m.pendingLanes=_,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=_,m.mutableReadLanes&=_,m.entangledLanes&=_,_=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<F;){var le=31-xn(F),ve=1<<le;_[le]=0,Q[le]=-1,m[le]=-1,F&=~ve}}function Ws(m,_){var F=m.entangledLanes|=_;for(m=m.entanglements;F;){var Q=31-xn(F),le=1<<Q;le&_|m[Q]&_&&(m[Q]|=_),F&=~le}}var di=0;function jr(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var Ii,bl,$o,aa,js,jo=!1,iA=[],ns=null,Qi=null,_o=null,La=new Map,Ba=new Map,uo=[],Gs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oA(m,_){switch(m){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":La.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(_.pointerId)}}function el(m,_,F,Q,le,ve){return m===null||m.nativeEvent!==ve?(m={blockedOn:_,domEventName:F,eventSystemFlags:Q,nativeEvent:ve,targetContainers:[le]},_!==null&&(_=Po(_),_!==null&&bl(_)),m):(m.eventSystemFlags|=Q,_=m.targetContainers,le!==null&&_.indexOf(le)===-1&&_.push(le),m)}function Oa(m,_,F,Q,le){switch(_){case"focusin":return ns=el(ns,m,_,F,Q,le),!0;case"dragenter":return Qi=el(Qi,m,_,F,Q,le),!0;case"mouseover":return _o=el(_o,m,_,F,Q,le),!0;case"pointerover":var ve=le.pointerId;return La.set(ve,el(La.get(ve)||null,m,_,F,Q,le)),!0;case"gotpointercapture":return ve=le.pointerId,Ba.set(ve,el(Ba.get(ve)||null,m,_,F,Q,le)),!0}return!1}function wA(m){var _=Js(m.target);if(_!==null){var F=Ao(_);if(F!==null){if(_=F.tag,_===13){if(_=ui(F),_!==null){m.blockedOn=_,js(m.priority,function(){$o(F)});return}}else if(_===3&&F.stateNode.current.memoizedState.isDehydrated){m.blockedOn=F.tag===3?F.stateNode.containerInfo:null;return}}}m.blockedOn=null}function wi(m){if(m.blockedOn!==null)return!1;for(var _=m.targetContainers;0<_.length;){var F=Zr(m.domEventName,m.eventSystemFlags,_[0],m.nativeEvent);if(F===null){F=m.nativeEvent;var Q=new F.constructor(F.type,F);f=Q,F.target.dispatchEvent(Q),f=null}else return _=Po(F),_!==null&&bl(_),m.blockedOn=F,!1;_.shift()}return!0}function XA(m,_,F){wi(m)&&F.delete(_)}function eo(){jo=!1,ns!==null&&wi(ns)&&(ns=null),Qi!==null&&wi(Qi)&&(Qi=null),_o!==null&&wi(_o)&&(_o=null),La.forEach(XA),Ba.forEach(XA)}function Sr(m,_){m.blockedOn===_&&(m.blockedOn=null,jo||(jo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eo)))}function no(m){function _(le){return Sr(le,m)}if(0<iA.length){Sr(iA[0],m);for(var F=1;F<iA.length;F++){var Q=iA[F];Q.blockedOn===m&&(Q.blockedOn=null)}}for(ns!==null&&Sr(ns,m),Qi!==null&&Sr(Qi,m),_o!==null&&Sr(_o,m),La.forEach(_),Ba.forEach(_),F=0;F<uo.length;F++)Q=uo[F],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<uo.length&&(F=uo[0],F.blockedOn===null);)wA(F),F.blockedOn===null&&uo.shift()}var J=ne.ReactCurrentBatchConfig,Be=!0;function lt(m,_,F,Q){var le=di,ve=J.transition;J.transition=null;try{di=1,Br(m,_,F,Q)}finally{di=le,J.transition=ve}}function qt(m,_,F,Q){var le=di,ve=J.transition;J.transition=null;try{di=4,Br(m,_,F,Q)}finally{di=le,J.transition=ve}}function Br(m,_,F,Q){if(Be){var le=Zr(m,_,F,Q);if(le===null)Ed(m,_,Q,Gn,F),oA(m,Q);else if(Oa(le,m,_,F,Q))Q.stopPropagation();else if(oA(m,Q),_&4&&-1<Gs.indexOf(m)){for(;le!==null;){var ve=Po(le);if(ve!==null&&Ii(ve),ve=Zr(m,_,F,Q),ve===null&&Ed(m,_,Q,Gn,F),ve===le)break;le=ve}le!==null&&Q.stopPropagation()}else Ed(m,_,Q,null,F)}}var Gn=null;function Zr(m,_,F,Q){if(Gn=null,m=Qe(Q),m=Js(m),m!==null)if(_=Ao(m),_===null)m=null;else if(F=_.tag,F===13){if(m=ui(_),m!==null)return m;m=null}else if(F===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;m=null}else _!==m&&(m=null);return Gn=m,null}function oi(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tA()){case _l:return 1;case Ni:return 4;case wr:case Fa:return 16;case bs:return 536870912;default:return 16}default:return 16}}var Or=null,ni=null,$i=null;function Eo(){if($i)return $i;var m,_=ni,F=_.length,Q,le="value"in Or?Or.value:Or.textContent,ve=le.length;for(m=0;m<F&&_[m]===le[m];m++);var tt=F-m;for(Q=1;Q<=tt&&_[F-Q]===le[ve-Q];Q++);return $i=le.slice(m,1<Q?1-Q:void 0)}function si(m){var _=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&_===13&&(m=13)):m=_,m===10&&(m=13),32<=m||m===13?m:0}function _i(){return!0}function Ri(){return!1}function Yi(m){function _(F,Q,le,ve,tt){this._reactName=F,this._targetInst=le,this.type=Q,this.nativeEvent=ve,this.target=tt,this.currentTarget=null;for(var Ot in m)m.hasOwnProperty(Ot)&&(F=m[Ot],this[Ot]=F?F(ve):ve[Ot]);return this.isDefaultPrevented=(ve.defaultPrevented!=null?ve.defaultPrevented:ve.returnValue===!1)?_i:Ri,this.isPropagationStopped=Ri,this}return Pe(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var F=this.nativeEvent;F&&(F.preventDefault?F.preventDefault():typeof F.returnValue!="unknown"&&(F.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var F=this.nativeEvent;F&&(F.stopPropagation?F.stopPropagation():typeof F.cancelBubble!="unknown"&&(F.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),_}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Yi(mi),Ua=Pe({},mi,{view:0,detail:0}),SA=Yi(Ua),As,Gh,fl,vd=Pe({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wf,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==fl&&(fl&&m.type==="mousemove"?(As=m.screenX-fl.screenX,Gh=m.screenY-fl.screenY):Gh=As=0,fl=m),As)},movementY:function(m){return"movementY"in m?m.movementY:Gh}}),mh=Yi(vd),Nu=Pe({},vd,{dataTransfer:0}),EA=Yi(Nu),gh=Pe({},Ua,{relatedTarget:0}),rs=Yi(gh),yu=Pe({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=Yi(yu),tf=Pe({},mi,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),sA=Yi(tf),Qh=Pe({},mi,{data:0}),nf=Yi(Qh),Vc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xs(m){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(m):(m=bc[m])?!!_[m]:!1}function Wf(){return xs}var xc=Pe({},Ua,{key:function(m){if(m.key){var _=Vc[m.key]||m.key;if(_!=="Unidentified")return _}return m.type==="keypress"?(m=si(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Yh[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wf,charCode:function(m){return m.type==="keypress"?si(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?si(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),qh=Yi(xc),rf=Pe({},vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=Yi(rf),jf=Pe({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wf}),_d=Yi(jf),Vh=Pe({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bd=Yi(Vh),Gf=Pe({},vd,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),of=Yi(Gf),za=[9,13,27,32],Hh=o&&"CompositionEvent"in window,zl=null;o&&"documentMode"in document&&(zl=document.documentMode);var BA=o&&"TextEvent"in window&&!zl,$h=o&&(!Hh||zl&&8<zl&&11>=zl),vh=" ",sf=!1;function vu(m,_){switch(m){case"keyup":return za.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mc(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var wc=!1;function Hc(m,_){switch(m){case"compositionend":return Mc(_);case"keypress":return _.which!==32?null:(sf=!0,vh);case"textInput":return m=_.data,m===vh&&sf?null:m;default:return null}}function xd(m,_){if(wc)return m==="compositionend"||!Hh&&vu(m,_)?(m=Eo(),$i=ni=Or=null,wc=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return $h&&_.locale!=="ko"?null:_.data;default:return null}}var Ip={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _==="input"?!!Ip[m.type]:_==="textarea"}function JA(m,_,F,Q){zt(Q),_=Oc(_,"onChange"),0<_.length&&(F=new Ds("onChange","change",null,F,Q),m.push({event:F,listeners:_}))}var Na=null,tl=null;function af(m){_h(m,0)}function Zh(m){var _=ri(m);if(_t(_))return m}function Qf(m,_){if(m==="change")return _}var Zi=!1;if(o){var aA;if(o){var Md="oninput"in document;if(!Md){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),Md=typeof Yf.oninput=="function"}aA=Md}else aA=!1;Zi=aA&&(!document.documentMode||9<document.documentMode)}function Xh(){Na&&(Na.detachEvent("onpropertychange",qf),tl=Na=null)}function qf(m){if(m.propertyName==="value"&&Zh(tl)){var _=[];JA(_,tl,m,Qe(m)),Dn(af,_)}}function Vf(m,_,F){m==="focusin"?(Xh(),Na=_,tl=F,Na.attachEvent("onpropertychange",qf)):m==="focusout"&&Xh()}function Hf(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Zh(tl)}function oc(m,_){if(m==="click")return Zh(_)}function en(m,_){if(m==="input"||m==="change")return Zh(_)}function Tn(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var un=typeof Object.is=="function"?Object.is:Tn;function Kr(m,_){if(un(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var F=Object.keys(m),Q=Object.keys(_);if(F.length!==Q.length)return!1;for(Q=0;Q<F.length;Q++){var le=F[Q];if(!p.call(_,le)||!un(m[le],_[le]))return!1}return!0}function Ei(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function po(m,_){var F=Ei(m);m=0;for(var Q;F;){if(F.nodeType===3){if(Q=m+F.textContent.length,m<=_&&Q>=_)return{node:F,offset:_-m};m=Q}e:{for(;F;){if(F.nextSibling){F=F.nextSibling;break e}F=F.parentNode}F=void 0}F=Ei(F)}}function Zo(m,_){return m&&_?m===_?!0:m&&m.nodeType===3?!1:_&&_.nodeType===3?Zo(m,_.parentNode):"contains"in m?m.contains(_):m.compareDocumentPosition?!!(m.compareDocumentPosition(_)&16):!1:!1}function us(){for(var m=window,_=gt();_ instanceof m.HTMLIFrameElement;){try{var F=typeof _.contentWindow.location.href=="string"}catch{F=!1}if(F)m=_.contentWindow;else break;_=gt(m.document)}return _}function Zc(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _&&(_==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||_==="textarea"||m.contentEditable==="true")}function $f(m){var _=us(),F=m.focusedElem,Q=m.selectionRange;if(_!==F&&F&&F.ownerDocument&&Zo(F.ownerDocument.documentElement,F)){if(Q!==null&&Zc(F)){if(_=Q.start,m=Q.end,m===void 0&&(m=_),"selectionStart"in F)F.selectionStart=_,F.selectionEnd=Math.min(m,F.value.length);else if(m=(_=F.ownerDocument||document)&&_.defaultView||window,m.getSelection){m=m.getSelection();var le=F.textContent.length,ve=Math.min(Q.start,le);Q=Q.end===void 0?ve:Math.min(Q.end,le),!m.extend&&ve>Q&&(le=Q,Q=ve,ve=le),le=po(F,ve);var tt=po(F,Q);le&&tt&&(m.rangeCount!==1||m.anchorNode!==le.node||m.anchorOffset!==le.offset||m.focusNode!==tt.node||m.focusOffset!==tt.offset)&&(_=_.createRange(),_.setStart(le.node,le.offset),m.removeAllRanges(),ve>Q?(m.addRange(_),m.extend(tt.node,tt.offset)):(_.setEnd(tt.node,tt.offset),m.addRange(_)))}}for(_=[],m=F;m=m.parentNode;)m.nodeType===1&&_.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<_.length;F++)m=_[F],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var pl=o&&"documentMode"in document&&11>=document.documentMode,Cu=null,_u=null,nl=null,OA=!1;function Xc(m,_,F){var Q=F.window===F?F.document:F.nodeType===9?F:F.ownerDocument;OA||Cu==null||Cu!==gt(Q)||(Q=Cu,"selectionStart"in Q&&Zc(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),nl&&Kr(nl,Q)||(nl=Q,Q=Oc(_u,"onSelect"),0<Q.length&&(_=new Ds("onSelect","select",null,_,F),m.push({event:_,listeners:Q}),_.target=Cu)))}function mo(m,_){var F={};return F[m.toLowerCase()]=_.toLowerCase(),F["Webkit"+m]="webkit"+_,F["Moz"+m]="moz"+_,F}var bu={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},Ch={},eu={};o&&(eu=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function Xi(m){if(Ch[m])return Ch[m];if(!bu[m])return m;var _=bu[m],F;for(F in _)if(_.hasOwnProperty(F)&&F in eu)return Ch[m]=_[F];return m}var rl=Xi("animationend"),Sc=Xi("animationiteration"),lA=Xi("animationstart"),Nl=Xi("transitionend"),wd=new Map,lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(m,_){wd.set(m,_),s(_,[m])}for(var Sd=0;Sd<lf.length;Sd++){var Jc=lf[Sd],tu=Jc.toLowerCase(),Jh=Jc[0].toUpperCase()+Jc.slice(1);xl(tu,"on"+Jh)}xl(rl,"onAnimationEnd"),xl(Sc,"onAnimationIteration"),xl(lA,"onAnimationStart"),xl("dblclick","onDoubleClick"),xl("focusin","onFocus"),xl("focusout","onBlur"),xl(Nl,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sc=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function eh(m,_,F){var Q=m.type||"unknown-event";m.currentTarget=F,Cs(Q,_,void 0,m),m.currentTarget=null}function _h(m,_){_=(_&4)!==0;for(var F=0;F<m.length;F++){var Q=m[F],le=Q.event;Q=Q.listeners;e:{var ve=void 0;if(_)for(var tt=Q.length-1;0<=tt;tt--){var Ot=Q[tt],jt=Ot.instance,Sn=Ot.currentTarget;if(Ot=Ot.listener,jt!==ve&&le.isPropagationStopped())break e;eh(le,Ot,Sn),ve=jt}else for(tt=0;tt<Q.length;tt++){if(Ot=Q[tt],jt=Ot.instance,Sn=Ot.currentTarget,Ot=Ot.listener,jt!==ve&&le.isPropagationStopped())break e;eh(le,Ot,Sn),ve=jt}}}if(Fr)throw m=yn,Fr=!1,yn=null,m}function Go(m,_){var F=_[Od];F===void 0&&(F=_[Od]=new Set);var Q=m+"__bubble";F.has(Q)||(Af(_,m,2,!1),F.add(Q))}function Ec(m,_,F){var Q=0;_&&(Q|=4),Af(F,m,Q,_)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function ru(m){if(!m[Bc]){m[Bc]=!0,r.forEach(function(F){F!=="selectionchange"&&(sc.has(F)||Ec(F,!1,m),Ec(F,!0,m))});var _=m.nodeType===9?m:m.ownerDocument;_===null||_[Bc]||(_[Bc]=!0,Ec("selectionchange",!1,_))}}function Af(m,_,F,Q){switch(oi(_)){case 1:var le=lt;break;case 4:le=qt;break;default:le=Br}F=le.bind(null,_,F,m),le=void 0,!Tr||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(le=!0),Q?le!==void 0?m.addEventListener(_,F,{capture:!0,passive:le}):m.addEventListener(_,F,!0):le!==void 0?m.addEventListener(_,F,{passive:le}):m.addEventListener(_,F,!1)}function Ed(m,_,F,Q,le){var ve=Q;if((_&1)===0&&(_&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var tt=Q.tag;if(tt===3||tt===4){var Ot=Q.stateNode.containerInfo;if(Ot===le||Ot.nodeType===8&&Ot.parentNode===le)break;if(tt===4)for(tt=Q.return;tt!==null;){var jt=tt.tag;if((jt===3||jt===4)&&(jt=tt.stateNode.containerInfo,jt===le||jt.nodeType===8&&jt.parentNode===le))return;tt=tt.return}for(;Ot!==null;){if(tt=Js(Ot),tt===null)return;if(jt=tt.tag,jt===5||jt===6){Q=ve=tt;continue e}Ot=Ot.parentNode}}Q=Q.return}Dn(function(){var Sn=ve,or=Qe(F),ur=[];e:{var tr=wd.get(m);if(tr!==void 0){var Ur=Ds,ei=m;switch(m){case"keypress":if(si(F)===0)break e;case"keydown":case"keyup":Ur=qh;break;case"focusin":ei="focus",Ur=rs;break;case"focusout":ei="blur",Ur=rs;break;case"beforeblur":case"afterblur":Ur=rs;break;case"click":if(F.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ur=mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ur=EA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ur=_d;break;case rl:case Sc:case lA:Ur=yh;break;case Nl:Ur=bd;break;case"scroll":Ur=SA;break;case"wheel":Ur=of;break;case"copy":case"cut":case"paste":Ur=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ur=Cd}var ai=(_&4)!==0,Rl=!ai&&m==="scroll",hn=ai?tr!==null?tr+"Capture":null:tr;ai=[];for(var Xt=Sn,pn;Xt!==null;){pn=Xt;var vr=pn.stateNode;if(pn.tag===5&&vr!==null&&(pn=vr,hn!==null&&(vr=mr(Xt,hn),vr!=null&&ai.push(ac(Xt,vr,pn)))),Rl)break;Xt=Xt.return}0<ai.length&&(tr=new Ur(tr,ei,null,F,or),ur.push({event:tr,listeners:ai}))}}if((_&7)===0){e:{if(tr=m==="mouseover"||m==="pointerover",Ur=m==="mouseout"||m==="pointerout",tr&&F!==f&&(ei=F.relatedTarget||F.fromElement)&&(Js(ei)||ei[TA]))break e;if((Ur||tr)&&(tr=or.window===or?or:(tr=or.ownerDocument)?tr.defaultView||tr.parentWindow:window,Ur?(ei=F.relatedTarget||F.toElement,Ur=Sn,ei=ei?Js(ei):null,ei!==null&&(Rl=Ao(ei),ei!==Rl||ei.tag!==5&&ei.tag!==6)&&(ei=null)):(Ur=null,ei=Sn),Ur!==ei)){if(ai=mh,vr="onMouseLeave",hn="onMouseEnter",Xt="mouse",(m==="pointerout"||m==="pointerover")&&(ai=Cd,vr="onPointerLeave",hn="onPointerEnter",Xt="pointer"),Rl=Ur==null?tr:ri(Ur),pn=ei==null?tr:ri(ei),tr=new ai(vr,Xt+"leave",Ur,F,or),tr.target=Rl,tr.relatedTarget=pn,vr=null,Js(or)===Sn&&(ai=new ai(hn,Xt+"enter",ei,F,or),ai.target=pn,ai.relatedTarget=Rl,vr=ai),Rl=vr,Ur&&ei)t:{for(ai=Ur,hn=ei,Xt=0,pn=ai;pn;pn=lc(pn))Xt++;for(pn=0,vr=hn;vr;vr=lc(vr))pn++;for(;0<Xt-pn;)ai=lc(ai),Xt--;for(;0<pn-Xt;)hn=lc(hn),pn--;for(;Xt--;){if(ai===hn||hn!==null&&ai===hn.alternate)break t;ai=lc(ai),hn=lc(hn)}ai=null}else ai=null;Ur!==null&&Ms(ur,tr,Ur,ai,!1),ei!==null&&Rl!==null&&Ms(ur,Rl,ei,ai,!0)}}e:{if(tr=Sn?ri(Sn):window,Ur=tr.nodeName&&tr.nodeName.toLowerCase(),Ur==="select"||Ur==="input"&&tr.type==="file")var gi=Qf;else if($c(tr))if(Zi)gi=en;else{gi=Hf;var Di=Vf}else(Ur=tr.nodeName)&&Ur.toLowerCase()==="input"&&(tr.type==="checkbox"||tr.type==="radio")&&(gi=oc);if(gi&&(gi=gi(m,Sn))){JA(ur,gi,F,or);break e}Di&&Di(m,tr,Sn),m==="focusout"&&(Di=tr._wrapperState)&&Di.controlled&&tr.type==="number"&&nn(tr,"number",tr.value)}switch(Di=Sn?ri(Sn):window,m){case"focusin":($c(Di)||Di.contentEditable==="true")&&(Cu=Di,_u=Sn,nl=null);break;case"focusout":nl=_u=Cu=null;break;case"mousedown":OA=!0;break;case"contextmenu":case"mouseup":case"dragend":OA=!1,Xc(ur,F,or);break;case"selectionchange":if(pl)break;case"keydown":case"keyup":Xc(ur,F,or)}var Ti;if(Hh)e:{switch(m){case"compositionstart":var Ki="onCompositionStart";break e;case"compositionend":Ki="onCompositionEnd";break e;case"compositionupdate":Ki="onCompositionUpdate";break e}Ki=void 0}else wc?vu(m,F)&&(Ki="onCompositionEnd"):m==="keydown"&&F.keyCode===229&&(Ki="onCompositionStart");Ki&&($h&&F.locale!=="ko"&&(wc||Ki!=="onCompositionStart"?Ki==="onCompositionEnd"&&wc&&(Ti=Eo()):(Or=or,ni="value"in Or?Or.value:Or.textContent,wc=!0)),Di=Oc(Sn,Ki),0<Di.length&&(Ki=new nf(Ki,m,null,F,or),ur.push({event:Ki,listeners:Di}),Ti?Ki.data=Ti:(Ti=Mc(F),Ti!==null&&(Ki.data=Ti)))),(Ti=BA?Hc(m,F):xd(m,F))&&(Sn=Oc(Sn,"onBeforeInput"),0<Sn.length&&(or=new nf("onBeforeInput","beforeinput",null,F,or),ur.push({event:or,listeners:Sn}),or.data=Ti))}_h(ur,_)})}function ac(m,_,F){return{instance:m,listener:_,currentTarget:F}}function Oc(m,_){for(var F=_+"Capture",Q=[];m!==null;){var le=m,ve=le.stateNode;le.tag===5&&ve!==null&&(le=ve,ve=mr(m,F),ve!=null&&Q.unshift(ac(m,ve,le)),ve=mr(m,_),ve!=null&&Q.push(ac(m,ve,le))),m=m.return}return Q}function lc(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function Ms(m,_,F,Q,le){for(var ve=_._reactName,tt=[];F!==null&&F!==Q;){var Ot=F,jt=Ot.alternate,Sn=Ot.stateNode;if(jt!==null&&jt===Q)break;Ot.tag===5&&Sn!==null&&(Ot=Sn,le?(jt=mr(F,ve),jt!=null&&tt.unshift(ac(F,jt,Ot))):le||(jt=mr(F,ve),jt!=null&&tt.push(ac(F,jt,Ot)))),F=F.return}tt.length!==0&&m.push({event:_,listeners:tt})}var Qs=/\r\n?/g,Bd=/\u0000|\uFFFD/g;function th(m){return(typeof m=="string"?m:""+m).replace(Qs,`
`).replace(Bd,"")}function bh(m,_,F){if(_=th(_),th(m)!==_&&F)throw Error(t(425))}function ps(){}var xu=null,Xs=null;function Wu(m,_){return m==="textarea"||m==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Wl=typeof setTimeout=="function"?setTimeout:void 0,ju=typeof clearTimeout=="function"?clearTimeout:void 0,Ml=typeof Promise=="function"?Promise:void 0,Mu=typeof queueMicrotask=="function"?queueMicrotask:typeof Ml<"u"?function(m){return Ml.resolve(null).then(m).catch(Ic)}:Wl;function Ic(m){setTimeout(function(){throw m})}function ed(m,_){var F=_,Q=0;do{var le=F.nextSibling;if(m.removeChild(F),le&&le.nodeType===8)if(F=le.data,F==="/$"){if(Q===0){m.removeChild(le),no(_);return}Q--}else F!=="$"&&F!=="$?"&&F!=="$!"||Q++;F=le}while(F);no(_)}function Ac(m){for(;m!=null;m=m.nextSibling){var _=m.nodeType;if(_===1||_===3)break;if(_===8){if(_=m.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return m}function Tc(m){m=m.previousSibling;for(var _=0;m;){if(m.nodeType===8){var F=m.data;if(F==="$"||F==="$!"||F==="$?"){if(_===0)return m;_--}else F==="/$"&&_++}m=m.previousSibling}return null}var IA=Math.random().toString(36).slice(2),wu="__reactFiber$"+IA,ml="__reactProps$"+IA,TA="__reactContainer$"+IA,Od="__reactEvents$"+IA,st="__reactListeners$"+IA,xh="__reactHandles$"+IA;function Js(m){var _=m[wu];if(_)return _;for(var F=m.parentNode;F;){if(_=F[TA]||F[wu]){if(F=_.alternate,_.child!==null||F!==null&&F.child!==null)for(m=Tc(m);m!==null;){if(F=m[wu])return F;m=Tc(m)}return _}m=F,F=m.parentNode}return null}function Po(m){return m=m[wu]||m[TA],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function ri(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function ms(m){return m[ml]||null}var Wa=[],ja=-1;function Os(m){return{current:m}}function Fs(m){0>ja||(m.current=Wa[ja],Wa[ja]=null,ja--)}function Ko(m,_){ja++,Wa[ja]=m.current,m.current=_}var wl={},il=Os(wl),Sl=Os(!1),El=wl;function nh(m,_){var F=m.type.contextTypes;if(!F)return wl;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===_)return Q.__reactInternalMemoizedMaskedChildContext;var le={},ve;for(ve in F)le[ve]=_[ve];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=_,m.__reactInternalMemoizedMaskedChildContext=le),le}function Bl(m){return m=m.childContextTypes,m!=null}function kA(){Fs(Sl),Fs(il)}function Gu(m,_,F){if(il.current!==wl)throw Error(t(168));Ko(il,_),Ko(Sl,F)}function Mr(m,_,F){var Q=m.stateNode;if(_=_.childContextTypes,typeof Q.getChildContext!="function")return F;Q=Q.getChildContext();for(var le in Q)if(!(le in _))throw Error(t(108,kt(m)||"Unknown",le));return Pe({},F,Q)}function AA(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||wl,El=il.current,Ko(il,m),Ko(Sl,Sl.current),!0}function Id(m,_,F){var Q=m.stateNode;if(!Q)throw Error(t(169));F?(m=Mr(m,_,El),Q.__reactInternalMemoizedMergedChildContext=m,Fs(Sl),Fs(il),Ko(il,m)):Fs(Sl),Ko(Sl,F)}var Ol=null,rh=!1,Su=!1;function PA(m){Ol===null?Ol=[m]:Ol.push(m)}function Fi(m){rh=!0,PA(m)}function Qu(){if(!Su&&Ol!==null){Su=!0;var m=0,_=di;try{var F=Ol;for(di=1;m<F.length;m++){var Q=F[m];do Q=Q(!0);while(Q!==null)}Ol=null,rh=!1}catch(le){throw Ol!==null&&(Ol=Ol.slice(m+1)),sa(_l,Qu),le}finally{di=_,Su=!1}}return null}var ih=[],is=0,Bo=null,uA=0,Ga=[],ga=0,kc=null,iu=1,ou="";function oh(m,_){ih[is++]=uA,ih[is++]=Bo,Bo=m,uA=_}function uf(m,_,F){Ga[ga++]=iu,Ga[ga++]=ou,Ga[ga++]=kc,kc=m;var Q=iu;m=ou;var le=32-xn(Q)-1;Q&=~(1<<le),F+=1;var ve=32-xn(_)+le;if(30<ve){var tt=le-le%5;ve=(Q&(1<<tt)-1).toString(32),Q>>=tt,le-=tt,iu=1<<32-xn(_)+le|F<<le|Q,ou=ve+m}else iu=1<<ve|F<<le|Q,ou=m}function jl(m){m.return!==null&&(oh(m,1),uf(m,1,0))}function Qo(m){for(;m===Bo;)Bo=ih[--is],ih[is]=null,uA=ih[--is],ih[is]=null;for(;m===kc;)kc=Ga[--ga],Ga[ga]=null,ou=Ga[--ga],Ga[ga]=null,iu=Ga[--ga],Ga[ga]=null}var ya=null,la=null,ws=!1,Gl=null;function Yu(m,_){var F=Ma(5,null,null,0);F.elementType="DELETED",F.stateNode=_,F.return=m,_=m.deletions,_===null?(m.deletions=[F],m.flags|=16):_.push(F)}function Pc(m,_){switch(m.tag){case 5:var F=m.type;return _=_.nodeType!==1||F.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(m.stateNode=_,ya=m,la=Ac(_.firstChild),!0):!1;case 6:return _=m.pendingProps===""||_.nodeType!==3?null:_,_!==null?(m.stateNode=_,ya=m,la=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(F=kc!==null?{id:iu,overflow:ou}:null,m.memoizedState={dehydrated:_,treeContext:F,retryLane:1073741824},F=Ma(18,null,null,0),F.stateNode=_,F.return=m,m.child=F,ya=m,la=null,!0):!1;default:return!1}}function Qa(m){return(m.mode&1)!==0&&(m.flags&128)===0}function gl(m){if(ws){var _=la;if(_){var F=_;if(!Pc(m,_)){if(Qa(m))throw Error(t(418));_=Ac(F.nextSibling);var Q=ya;_&&Pc(m,_)?Yu(Q,F):(m.flags=m.flags&-4097|2,ws=!1,ya=m)}}else{if(Qa(m))throw Error(t(418));m.flags=m.flags&-4097|2,ws=!1,ya=m}}}function Qr(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ya=m}function Jr(m){if(m!==ya)return!1;if(!ws)return Qr(m),ws=!0,!1;var _;if((_=m.tag!==3)&&!(_=m.tag!==5)&&(_=m.type,_=_!=="head"&&_!=="body"&&!Wu(m.type,m.memoizedProps)),_&&(_=la)){if(Qa(m))throw Mh(),Error(t(418));for(;_;)Yu(m,_),_=Ac(_.nextSibling)}if(Qr(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,_=0;m;){if(m.nodeType===8){var F=m.data;if(F==="/$"){if(_===0){la=Ac(m.nextSibling);break e}_--}else F!=="$"&&F!=="$!"&&F!=="$?"||_++}m=m.nextSibling}la=null}}else la=ya?Ac(m.stateNode.nextSibling):null;return!0}function Mh(){for(var m=la;m;)m=Ac(m.nextSibling)}function Eu(){la=ya=null,ws=!1}function cA(m){Gl===null?Gl=[m]:Gl.push(m)}var Ql=ne.ReactCurrentBatchConfig;function td(m,_,F){if(m=F.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(t(309));var Q=F.stateNode}if(!Q)throw Error(t(147,m));var le=Q,ve=""+m;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ve?_.ref:(_=function(tt){var Ot=le.refs;tt===null?delete Ot[ve]:Ot[ve]=tt},_._stringRef=ve,_)}if(typeof m!="string")throw Error(t(284));if(!F._owner)throw Error(t(290,m))}return m}function Yl(m,_){throw m=Object.prototype.toString.call(_),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m))}function sh(m){var _=m._init;return _(m._payload)}function Bu(m){function _(hn,Xt){if(m){var pn=hn.deletions;pn===null?(hn.deletions=[Xt],hn.flags|=16):pn.push(Xt)}}function F(hn,Xt){if(!m)return null;for(;Xt!==null;)_(hn,Xt),Xt=Xt.sibling;return null}function Q(hn,Xt){for(hn=new Map;Xt!==null;)Xt.key!==null?hn.set(Xt.key,Xt):hn.set(Xt.index,Xt),Xt=Xt.sibling;return hn}function le(hn,Xt){return hn=NA(hn,Xt),hn.index=0,hn.sibling=null,hn}function ve(hn,Xt,pn){return hn.index=pn,m?(pn=hn.alternate,pn!==null?(pn=pn.index,pn<Xt?(hn.flags|=2,Xt):pn):(hn.flags|=2,Xt)):(hn.flags|=1048576,Xt)}function tt(hn){return m&&hn.alternate===null&&(hn.flags|=2),hn}function Ot(hn,Xt,pn,vr){return Xt===null||Xt.tag!==6?(Xt=Lp(pn,hn.mode,vr),Xt.return=hn,Xt):(Xt=le(Xt,pn),Xt.return=hn,Xt)}function jt(hn,Xt,pn,vr){var gi=pn.type;return gi===G?or(hn,Xt,pn.props.children,vr,pn.key):Xt!==null&&(Xt.elementType===gi||typeof gi=="object"&&gi!==null&&gi.$$typeof===vt&&sh(gi)===Xt.type)?(vr=le(Xt,pn.props),vr.ref=td(hn,Xt,pn),vr.return=hn,vr):(vr=rp(pn.type,pn.key,pn.props,null,hn.mode,vr),vr.ref=td(hn,Xt,pn),vr.return=hn,vr)}function Sn(hn,Xt,pn,vr){return Xt===null||Xt.tag!==4||Xt.stateNode.containerInfo!==pn.containerInfo||Xt.stateNode.implementation!==pn.implementation?(Xt=Up(pn,hn.mode,vr),Xt.return=hn,Xt):(Xt=le(Xt,pn.children||[]),Xt.return=hn,Xt)}function or(hn,Xt,pn,vr,gi){return Xt===null||Xt.tag!==7?(Xt=Ph(pn,hn.mode,vr,gi),Xt.return=hn,Xt):(Xt=le(Xt,pn),Xt.return=hn,Xt)}function ur(hn,Xt,pn){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Xt=Lp(""+Xt,hn.mode,pn),Xt.return=hn,Xt;if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case q:return pn=rp(Xt.type,Xt.key,Xt.props,null,hn.mode,pn),pn.ref=td(hn,null,Xt),pn.return=hn,pn;case te:return Xt=Up(Xt,hn.mode,pn),Xt.return=hn,Xt;case vt:var vr=Xt._init;return ur(hn,vr(Xt._payload),pn)}if(Xn(Xt)||je(Xt))return Xt=Ph(Xt,hn.mode,pn,null),Xt.return=hn,Xt;Yl(hn,Xt)}return null}function tr(hn,Xt,pn,vr){var gi=Xt!==null?Xt.key:null;if(typeof pn=="string"&&pn!==""||typeof pn=="number")return gi!==null?null:Ot(hn,Xt,""+pn,vr);if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case q:return pn.key===gi?jt(hn,Xt,pn,vr):null;case te:return pn.key===gi?Sn(hn,Xt,pn,vr):null;case vt:return gi=pn._init,tr(hn,Xt,gi(pn._payload),vr)}if(Xn(pn)||je(pn))return gi!==null?null:or(hn,Xt,pn,vr,null);Yl(hn,pn)}return null}function Ur(hn,Xt,pn,vr,gi){if(typeof vr=="string"&&vr!==""||typeof vr=="number")return hn=hn.get(pn)||null,Ot(Xt,hn,""+vr,gi);if(typeof vr=="object"&&vr!==null){switch(vr.$$typeof){case q:return hn=hn.get(vr.key===null?pn:vr.key)||null,jt(Xt,hn,vr,gi);case te:return hn=hn.get(vr.key===null?pn:vr.key)||null,Sn(Xt,hn,vr,gi);case vt:var Di=vr._init;return Ur(hn,Xt,pn,Di(vr._payload),gi)}if(Xn(vr)||je(vr))return hn=hn.get(pn)||null,or(Xt,hn,vr,gi,null);Yl(Xt,vr)}return null}function ei(hn,Xt,pn,vr){for(var gi=null,Di=null,Ti=Xt,Ki=Xt=0,yA=null;Ti!==null&&Ki<pn.length;Ki++){Ti.index>Ki?(yA=Ti,Ti=null):yA=Ti.sibling;var ys=tr(hn,Ti,pn[Ki],vr);if(ys===null){Ti===null&&(Ti=yA);break}m&&Ti&&ys.alternate===null&&_(hn,Ti),Xt=ve(ys,Xt,Ki),Di===null?gi=ys:Di.sibling=ys,Di=ys,Ti=yA}if(Ki===pn.length)return F(hn,Ti),ws&&oh(hn,Ki),gi;if(Ti===null){for(;Ki<pn.length;Ki++)Ti=ur(hn,pn[Ki],vr),Ti!==null&&(Xt=ve(Ti,Xt,Ki),Di===null?gi=Ti:Di.sibling=Ti,Di=Ti);return ws&&oh(hn,Ki),gi}for(Ti=Q(hn,Ti);Ki<pn.length;Ki++)yA=Ur(Ti,hn,Ki,pn[Ki],vr),yA!==null&&(m&&yA.alternate!==null&&Ti.delete(yA.key===null?Ki:yA.key),Xt=ve(yA,Xt,Ki),Di===null?gi=yA:Di.sibling=yA,Di=yA);return m&&Ti.forEach(function(Ud){return _(hn,Ud)}),ws&&oh(hn,Ki),gi}function ai(hn,Xt,pn,vr){var gi=je(pn);if(typeof gi!="function")throw Error(t(150));if(pn=gi.call(pn),pn==null)throw Error(t(151));for(var Di=gi=null,Ti=Xt,Ki=Xt=0,yA=null,ys=pn.next();Ti!==null&&!ys.done;Ki++,ys=pn.next()){Ti.index>Ki?(yA=Ti,Ti=null):yA=Ti.sibling;var Ud=tr(hn,Ti,ys.value,vr);if(Ud===null){Ti===null&&(Ti=yA);break}m&&Ti&&Ud.alternate===null&&_(hn,Ti),Xt=ve(Ud,Xt,Ki),Di===null?gi=Ud:Di.sibling=Ud,Di=Ud,Ti=yA}if(ys.done)return F(hn,Ti),ws&&oh(hn,Ki),gi;if(Ti===null){for(;!ys.done;Ki++,ys=pn.next())ys=ur(hn,ys.value,vr),ys!==null&&(Xt=ve(ys,Xt,Ki),Di===null?gi=ys:Di.sibling=ys,Di=ys);return ws&&oh(hn,Ki),gi}for(Ti=Q(hn,Ti);!ys.done;Ki++,ys=pn.next())ys=Ur(Ti,hn,Ki,ys.value,vr),ys!==null&&(m&&ys.alternate!==null&&Ti.delete(ys.key===null?Ki:ys.key),Xt=ve(ys,Xt,Ki),Di===null?gi=ys:Di.sibling=ys,Di=ys);return m&&Ti.forEach(function(s1){return _(hn,s1)}),ws&&oh(hn,Ki),gi}function Rl(hn,Xt,pn,vr){if(typeof pn=="object"&&pn!==null&&pn.type===G&&pn.key===null&&(pn=pn.props.children),typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case q:e:{for(var gi=pn.key,Di=Xt;Di!==null;){if(Di.key===gi){if(gi=pn.type,gi===G){if(Di.tag===7){F(hn,Di.sibling),Xt=le(Di,pn.props.children),Xt.return=hn,hn=Xt;break e}}else if(Di.elementType===gi||typeof gi=="object"&&gi!==null&&gi.$$typeof===vt&&sh(gi)===Di.type){F(hn,Di.sibling),Xt=le(Di,pn.props),Xt.ref=td(hn,Di,pn),Xt.return=hn,hn=Xt;break e}F(hn,Di);break}else _(hn,Di);Di=Di.sibling}pn.type===G?(Xt=Ph(pn.props.children,hn.mode,vr,pn.key),Xt.return=hn,hn=Xt):(vr=rp(pn.type,pn.key,pn.props,null,hn.mode,vr),vr.ref=td(hn,Xt,pn),vr.return=hn,hn=vr)}return tt(hn);case te:e:{for(Di=pn.key;Xt!==null;){if(Xt.key===Di)if(Xt.tag===4&&Xt.stateNode.containerInfo===pn.containerInfo&&Xt.stateNode.implementation===pn.implementation){F(hn,Xt.sibling),Xt=le(Xt,pn.children||[]),Xt.return=hn,hn=Xt;break e}else{F(hn,Xt);break}else _(hn,Xt);Xt=Xt.sibling}Xt=Up(pn,hn.mode,vr),Xt.return=hn,hn=Xt}return tt(hn);case vt:return Di=pn._init,Rl(hn,Xt,Di(pn._payload),vr)}if(Xn(pn))return ei(hn,Xt,pn,vr);if(je(pn))return ai(hn,Xt,pn,vr);Yl(hn,pn)}return typeof pn=="string"&&pn!==""||typeof pn=="number"?(pn=""+pn,Xt!==null&&Xt.tag===6?(F(hn,Xt.sibling),Xt=le(Xt,pn),Xt.return=hn,hn=Xt):(F(hn,Xt),Xt=Lp(pn,hn.mode,vr),Xt.return=hn,hn=Xt),tt(hn)):F(hn,Xt)}return Rl}var ji=Bu(!0),Is=Bu(!1),ah=Os(null),ol=null,Ou=null,KA=null;function su(){KA=Ou=ol=null}function ea(m){var _=ah.current;Fs(ah),m._currentValue=_}function Ys(m,_,F){for(;m!==null;){var Q=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,Q!==null&&(Q.childLanes|=_)):Q!==null&&(Q.childLanes&_)!==_&&(Q.childLanes|=_),m===F)break;m=m.return}}function au(m,_){ol=m,KA=Ou=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&_)!==0&&(kl=!0),m.firstContext=null)}function hA(m){var _=m._currentValue;if(KA!==m)if(m={context:m,memoizedValue:_,next:null},Ou===null){if(ol===null)throw Error(t(308));Ou=m,ol.dependencies={lanes:0,firstContext:m}}else Ou=Ou.next=m;return _}var lu=null;function RA(m){lu===null?lu=[m]:lu.push(m)}function Kc(m,_,F,Q){var le=_.interleaved;return le===null?(F.next=F,RA(_)):(F.next=le.next,le.next=F),_.interleaved=F,Au(m,Q)}function Au(m,_){m.lanes|=_;var F=m.alternate;for(F!==null&&(F.lanes|=_),F=m,m=m.return;m!==null;)m.childLanes|=_,F=m.alternate,F!==null&&(F.childLanes|=_),F=m,m=m.return;return F.tag===3?F.stateNode:null}var sl=!1;function wh(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uc(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function uu(m,_){return{eventTime:m,lane:_,tag:0,payload:null,callback:null,next:null}}function Il(m,_,F){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,(bi&2)!==0){var le=Q.pending;return le===null?_.next=_:(_.next=le.next,le.next=_),Q.pending=_,Au(m,F)}return le=Q.interleaved,le===null?(_.next=_,RA(Q)):(_.next=le.next,le.next=_),Q.interleaved=_,Au(m,F)}function O(m,_,F){if(_=_.updateQueue,_!==null&&(_=_.shared,(F&4194240)!==0)){var Q=_.lanes;Q&=m.pendingLanes,F|=Q,_.lanes=F,Ws(m,F)}}function a(m,_){var F=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,F===Q)){var le=null,ve=null;if(F=F.firstBaseUpdate,F!==null){do{var tt={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};ve===null?le=ve=tt:ve=ve.next=tt,F=F.next}while(F!==null);ve===null?le=ve=_:ve=ve.next=_}else le=ve=_;F={baseState:Q.baseState,firstBaseUpdate:le,lastBaseUpdate:ve,shared:Q.shared,effects:Q.effects},m.updateQueue=F;return}m=F.lastBaseUpdate,m===null?F.firstBaseUpdate=_:m.next=_,F.lastBaseUpdate=_}function c(m,_,F,Q){var le=m.updateQueue;sl=!1;var ve=le.firstBaseUpdate,tt=le.lastBaseUpdate,Ot=le.shared.pending;if(Ot!==null){le.shared.pending=null;var jt=Ot,Sn=jt.next;jt.next=null,tt===null?ve=Sn:tt.next=Sn,tt=jt;var or=m.alternate;or!==null&&(or=or.updateQueue,Ot=or.lastBaseUpdate,Ot!==tt&&(Ot===null?or.firstBaseUpdate=Sn:Ot.next=Sn,or.lastBaseUpdate=jt))}if(ve!==null){var ur=le.baseState;tt=0,or=Sn=jt=null,Ot=ve;do{var tr=Ot.lane,Ur=Ot.eventTime;if((Q&tr)===tr){or!==null&&(or=or.next={eventTime:Ur,lane:0,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null});e:{var ei=m,ai=Ot;switch(tr=_,Ur=F,ai.tag){case 1:if(ei=ai.payload,typeof ei=="function"){ur=ei.call(Ur,ur,tr);break e}ur=ei;break e;case 3:ei.flags=ei.flags&-65537|128;case 0:if(ei=ai.payload,tr=typeof ei=="function"?ei.call(Ur,ur,tr):ei,tr==null)break e;ur=Pe({},ur,tr);break e;case 2:sl=!0}}Ot.callback!==null&&Ot.lane!==0&&(m.flags|=64,tr=le.effects,tr===null?le.effects=[Ot]:tr.push(Ot))}else Ur={eventTime:Ur,lane:tr,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null},or===null?(Sn=or=Ur,jt=ur):or=or.next=Ur,tt|=tr;if(Ot=Ot.next,Ot===null){if(Ot=le.shared.pending,Ot===null)break;tr=Ot,Ot=tr.next,tr.next=null,le.lastBaseUpdate=tr,le.shared.pending=null}}while(!0);if(or===null&&(jt=ur),le.baseState=jt,le.firstBaseUpdate=Sn,le.lastBaseUpdate=or,_=le.shared.interleaved,_!==null){le=_;do tt|=le.lane,le=le.next;while(le!==_)}else ve===null&&(le.shared.lanes=0);gA|=tt,m.lanes=tt,m.memoizedState=ur}}function C(m,_,F){if(m=_.effects,_.effects=null,m!==null)for(_=0;_<m.length;_++){var Q=m[_],le=Q.callback;if(le!==null){if(Q.callback=null,Q=F,typeof le!="function")throw Error(t(191,le));le.call(Q)}}}var M={},I=Os(M),z=Os(M),Y=Os(M);function ee(m){if(m===M)throw Error(t(174));return m}function se(m,_){switch(Ko(Y,_),Ko(z,m),Ko(I,M),m=_.nodeType,m){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:We(null,"");break;default:m=m===8?_.parentNode:_,_=m.namespaceURI||null,m=m.tagName,_=We(_,m)}Fs(I),Ko(I,_)}function ge(){Fs(I),Fs(z),Fs(Y)}function Oe(m){ee(Y.current);var _=ee(I.current),F=We(_,m.type);_!==F&&(Ko(z,m),Ko(I,F))}function Ie(m){z.current===m&&(Fs(I),Fs(z))}var Ge=Os(0);function Ze(m){for(var _=m;_!==null;){if(_.tag===13){var F=_.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||F.data==="$?"||F.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var dt=[];function ct(){for(var m=0;m<dt.length;m++)dt[m]._workInProgressVersionPrimary=null;dt.length=0}var pt=ne.ReactCurrentDispatcher,bt=ne.ReactCurrentBatchConfig,Bt=0,wt=null,It=null,Pt=null,Lt=!1,sn=!1,ln=0,on=0;function Cn(){throw Error(t(321))}function Mn(m,_){if(_===null)return!1;for(var F=0;F<_.length&&F<m.length;F++)if(!un(m[F],_[F]))return!1;return!0}function ir(m,_,F,Q,le,ve){if(Bt=ve,wt=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,pt.current=m===null||m.memoizedState===null?cu:hu,m=F(Q,le),sn){ve=0;do{if(sn=!1,ln=0,25<=ve)throw Error(t(301));ve+=1,Pt=It=null,_.updateQueue=null,pt.current=Tu,m=F(Q,le)}while(sn)}if(pt.current=nd,_=It!==null&&It.next!==null,Bt=0,Pt=It=wt=null,Lt=!1,_)throw Error(t(300));return m}function Vn(){var m=ln!==0;return ln=0,m}function kn(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?wt.memoizedState=Pt=m:Pt=Pt.next=m,Pt}function Er(){if(It===null){var m=wt.alternate;m=m!==null?m.memoizedState:null}else m=It.next;var _=Pt===null?wt.memoizedState:Pt.next;if(_!==null)Pt=_,It=m;else{if(m===null)throw Error(t(310));It=m,m={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Pt===null?wt.memoizedState=Pt=m:Pt=Pt.next=m}return Pt}function Vr(m,_){return typeof _=="function"?_(m):_}function ci(m){var _=Er(),F=_.queue;if(F===null)throw Error(t(311));F.lastRenderedReducer=m;var Q=It,le=Q.baseQueue,ve=F.pending;if(ve!==null){if(le!==null){var tt=le.next;le.next=ve.next,ve.next=tt}Q.baseQueue=le=ve,F.pending=null}if(le!==null){ve=le.next,Q=Q.baseState;var Ot=tt=null,jt=null,Sn=ve;do{var or=Sn.lane;if((Bt&or)===or)jt!==null&&(jt=jt.next={lane:0,action:Sn.action,hasEagerState:Sn.hasEagerState,eagerState:Sn.eagerState,next:null}),Q=Sn.hasEagerState?Sn.eagerState:m(Q,Sn.action);else{var ur={lane:or,action:Sn.action,hasEagerState:Sn.hasEagerState,eagerState:Sn.eagerState,next:null};jt===null?(Ot=jt=ur,tt=Q):jt=jt.next=ur,wt.lanes|=or,gA|=or}Sn=Sn.next}while(Sn!==null&&Sn!==ve);jt===null?tt=Q:jt.next=Ot,un(Q,_.memoizedState)||(kl=!0),_.memoizedState=Q,_.baseState=tt,_.baseQueue=jt,F.lastRenderedState=Q}if(m=F.interleaved,m!==null){le=m;do ve=le.lane,wt.lanes|=ve,gA|=ve,le=le.next;while(le!==m)}else le===null&&(F.lanes=0);return[_.memoizedState,F.dispatch]}function Yo(m){var _=Er(),F=_.queue;if(F===null)throw Error(t(311));F.lastRenderedReducer=m;var Q=F.dispatch,le=F.pending,ve=_.memoizedState;if(le!==null){F.pending=null;var tt=le=le.next;do ve=m(ve,tt.action),tt=tt.next;while(tt!==le);un(ve,_.memoizedState)||(kl=!0),_.memoizedState=ve,_.baseQueue===null&&(_.baseState=ve),F.lastRenderedState=ve}return[ve,Q]}function bo(){}function Ro(m,_){var F=wt,Q=Er(),le=_(),ve=!un(Q.memoizedState,le);if(ve&&(Q.memoizedState=le,kl=!0),Q=Q.queue,al(qi.bind(null,F,Q,m),[m]),Q.getSnapshot!==_||ve||Pt!==null&&Pt.memoizedState.tag&1){if(F.flags|=2048,ta(9,to.bind(null,F,Q,le,_),void 0,null),ss===null)throw Error(t(349));(Bt&30)!==0||Ss(F,_,le)}return le}function Ss(m,_,F){m.flags|=16384,m={getSnapshot:_,value:F},_=wt.updateQueue,_===null?(_={lastEffect:null,stores:null},wt.updateQueue=_,_.stores=[m]):(F=_.stores,F===null?_.stores=[m]:F.push(m))}function to(m,_,F,Q){_.value=F,_.getSnapshot=Q,va(_)&&Ca(m)}function qi(m,_,F){return F(function(){va(_)&&Ca(m)})}function va(m){var _=m.getSnapshot;m=m.value;try{var F=_();return!un(m,F)}catch{return!0}}function Ca(m){var _=Au(m,1);_!==null&&kh(_,m,1,-1)}function _a(m){var _=kn();return typeof m=="function"&&(m=m()),_.memoizedState=_.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:m},_.queue=m,m=m.dispatch=hc.bind(null,wt,m),[_.memoizedState,m]}function ta(m,_,F,Q){return m={tag:m,create:_,destroy:F,deps:Q,next:null},_=wt.updateQueue,_===null?(_={lastEffect:null,stores:null},wt.updateQueue=_,_.lastEffect=m.next=m):(F=_.lastEffect,F===null?_.lastEffect=m.next=m:(Q=F.next,F.next=m,m.next=Q,_.lastEffect=m)),m}function yl(){return Er().memoizedState}function DA(m,_,F,Q){var le=kn();wt.flags|=m,le.memoizedState=ta(1|_,F,void 0,Q===void 0?null:Q)}function ql(m,_,F,Q){var le=Er();Q=Q===void 0?null:Q;var ve=void 0;if(It!==null){var tt=It.memoizedState;if(ve=tt.destroy,Q!==null&&Mn(Q,tt.deps)){le.memoizedState=ta(_,F,ve,Q);return}}wt.flags|=m,le.memoizedState=ta(1|_,F,ve,Q)}function FA(m,_){return DA(8390656,8,m,_)}function al(m,_){return ql(2048,8,m,_)}function Iu(m,_){return ql(4,2,m,_)}function Vl(m,_){return ql(4,4,m,_)}function dA(m,_){if(typeof _=="function")return m=m(),_(m),function(){_(null)};if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function qu(m,_,F){return F=F!=null?F.concat([m]):null,ql(4,4,dA.bind(null,_,m),F)}function Hl(){}function cc(m,_){var F=Er();_=_===void 0?null:_;var Q=F.memoizedState;return Q!==null&&_!==null&&Mn(_,Q[1])?Q[0]:(F.memoizedState=[m,_],m)}function qs(m,_){var F=Er();_=_===void 0?null:_;var Q=F.memoizedState;return Q!==null&&_!==null&&Mn(_,Q[1])?Q[0]:(m=m(),F.memoizedState=[m,_],m)}function os(m,_,F){return(Bt&21)===0?(m.baseState&&(m.baseState=!1,kl=!0),m.memoizedState=F):(un(F,_)||(F=rA(),wt.lanes|=F,gA|=F,m.baseState=!0),_)}function na(m,_){var F=di;di=F!==0&&4>F?F:4,m(!0);var Q=bt.transition;bt.transition={};try{m(!1),_()}finally{di=F,bt.transition=Q}}function Es(){return Er().memoizedState}function Tp(m,_,F){var Q=Cf(m);if(F={lane:Q,action:F,hasEagerState:!1,eagerState:null,next:null},cf(m))$l(_,F);else if(F=Kc(m,_,F,Q),F!==null){var le=$u();kh(F,m,Q,le),LA(F,_,Q)}}function hc(m,_,F){var Q=Cf(m),le={lane:Q,action:F,hasEagerState:!1,eagerState:null,next:null};if(cf(m))$l(_,le);else{var ve=m.alternate;if(m.lanes===0&&(ve===null||ve.lanes===0)&&(ve=_.lastRenderedReducer,ve!==null))try{var tt=_.lastRenderedState,Ot=ve(tt,F);if(le.hasEagerState=!0,le.eagerState=Ot,un(Ot,tt)){var jt=_.interleaved;jt===null?(le.next=le,RA(_)):(le.next=jt.next,jt.next=le),_.interleaved=le;return}}catch{}finally{}F=Kc(m,_,le,Q),F!==null&&(le=$u(),kh(F,m,Q,le),LA(F,_,Q))}}function cf(m){var _=m.alternate;return m===wt||_!==null&&_===wt}function $l(m,_){sn=Lt=!0;var F=m.pending;F===null?_.next=_:(_.next=F.next,F.next=_),m.pending=_}function LA(m,_,F){if((F&4194240)!==0){var Q=_.lanes;Q&=m.pendingLanes,F|=Q,_.lanes=F,Ws(m,F)}}var nd={readContext:hA,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},cu={readContext:hA,useCallback:function(m,_){return kn().memoizedState=[m,_===void 0?null:_],m},useContext:hA,useEffect:FA,useImperativeHandle:function(m,_,F){return F=F!=null?F.concat([m]):null,DA(4194308,4,dA.bind(null,_,m),F)},useLayoutEffect:function(m,_){return DA(4194308,4,m,_)},useInsertionEffect:function(m,_){return DA(4,2,m,_)},useMemo:function(m,_){var F=kn();return _=_===void 0?null:_,m=m(),F.memoizedState=[m,_],m},useReducer:function(m,_,F){var Q=kn();return _=F!==void 0?F(_):_,Q.memoizedState=Q.baseState=_,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:_},Q.queue=m,m=m.dispatch=Tp.bind(null,wt,m),[Q.memoizedState,m]},useRef:function(m){var _=kn();return m={current:m},_.memoizedState=m},useState:_a,useDebugValue:Hl,useDeferredValue:function(m){return kn().memoizedState=m},useTransition:function(){var m=_a(!1),_=m[0];return m=na.bind(null,m[1]),kn().memoizedState=m,[_,m]},useMutableSource:function(){},useSyncExternalStore:function(m,_,F){var Q=wt,le=kn();if(ws){if(F===void 0)throw Error(t(407));F=F()}else{if(F=_(),ss===null)throw Error(t(349));(Bt&30)!==0||Ss(Q,_,F)}le.memoizedState=F;var ve={value:F,getSnapshot:_};return le.queue=ve,FA(qi.bind(null,Q,ve,m),[m]),Q.flags|=2048,ta(9,to.bind(null,Q,ve,F,_),void 0,null),F},useId:function(){var m=kn(),_=ss.identifierPrefix;if(ws){var F=ou,Q=iu;F=(Q&~(1<<32-xn(Q)-1)).toString(32)+F,_=":"+_+"R"+F,F=ln++,0<F&&(_+="H"+F.toString(32)),_+=":"}else F=on++,_=":"+_+"r"+F.toString(32)+":";return m.memoizedState=_},unstable_isNewReconciler:!1},hu={readContext:hA,useCallback:cc,useContext:hA,useEffect:al,useImperativeHandle:qu,useInsertionEffect:Iu,useLayoutEffect:Vl,useMemo:qs,useReducer:ci,useRef:yl,useState:function(){return ci(Vr)},useDebugValue:Hl,useDeferredValue:function(m){var _=Er();return os(_,It.memoizedState,m)},useTransition:function(){var m=ci(Vr)[0],_=Er().memoizedState;return[m,_]},useMutableSource:bo,useSyncExternalStore:Ro,useId:Es,unstable_isNewReconciler:!1},Tu={readContext:hA,useCallback:cc,useContext:hA,useEffect:al,useImperativeHandle:qu,useInsertionEffect:Iu,useLayoutEffect:Vl,useMemo:qs,useReducer:Yo,useRef:yl,useState:function(){return Yo(Vr)},useDebugValue:Hl,useDeferredValue:function(m){var _=Er();return It===null?_.memoizedState=m:os(_,It.memoizedState,m)},useTransition:function(){var m=Yo(Vr)[0],_=Er().memoizedState;return[m,_]},useMutableSource:bo,useSyncExternalStore:Ro,useId:Es,unstable_isNewReconciler:!1};function Tl(m,_){if(m&&m.defaultProps){_=Pe({},_),m=m.defaultProps;for(var F in m)_[F]===void 0&&(_[F]=m[F]);return _}return _}function lh(m,_,F,Q){_=m.memoizedState,F=F(Q,_),F=F==null?_:Pe({},_,F),m.memoizedState=F,m.lanes===0&&(m.updateQueue.baseState=F)}var Sh={isMounted:function(m){return(m=m._reactInternals)?Ao(m)===m:!1},enqueueSetState:function(m,_,F){m=m._reactInternals;var Q=$u(),le=Cf(m),ve=uu(Q,le);ve.payload=_,F!=null&&(ve.callback=F),_=Il(m,ve,le),_!==null&&(kh(_,m,le,Q),O(_,m,le))},enqueueReplaceState:function(m,_,F){m=m._reactInternals;var Q=$u(),le=Cf(m),ve=uu(Q,le);ve.tag=1,ve.payload=_,F!=null&&(ve.callback=F),_=Il(m,ve,le),_!==null&&(kh(_,m,le,Q),O(_,m,le))},enqueueForceUpdate:function(m,_){m=m._reactInternals;var F=$u(),Q=Cf(m),le=uu(F,Q);le.tag=2,_!=null&&(le.callback=_),_=Il(m,le,Q),_!==null&&(kh(_,m,Q,F),O(_,m,Q))}};function Td(m,_,F,Q,le,ve,tt){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ve,tt):_.prototype&&_.prototype.isPureReactComponent?!Kr(F,Q)||!Kr(le,ve):!0}function rd(m,_,F){var Q=!1,le=wl,ve=_.contextType;return typeof ve=="object"&&ve!==null?ve=hA(ve):(le=Bl(_)?El:il.current,Q=_.contextTypes,ve=(Q=Q!=null)?nh(m,le):wl),_=new _(F,ve),m.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Sh,m.stateNode=_,_._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=le,m.__reactInternalMemoizedMaskedChildContext=ve),_}function hf(m,_,F,Q){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(F,Q),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(F,Q),_.state!==m&&Sh.enqueueReplaceState(_,_.state,null)}function Zf(m,_,F,Q){var le=m.stateNode;le.props=F,le.state=m.memoizedState,le.refs={},wh(m);var ve=_.contextType;typeof ve=="object"&&ve!==null?le.context=hA(ve):(ve=Bl(_)?El:il.current,le.context=nh(m,ve)),le.state=m.memoizedState,ve=_.getDerivedStateFromProps,typeof ve=="function"&&(lh(m,_,ve,F),le.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof le.getSnapshotBeforeUpdate=="function"||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(_=le.state,typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount(),_!==le.state&&Sh.enqueueReplaceState(le,le.state,null),c(m,F,le,Q),le.state=m.memoizedState),typeof le.componentDidMount=="function"&&(m.flags|=4194308)}function id(m,_){try{var F="",Q=_;do F+=mt(Q),Q=Q.return;while(Q);var le=F}catch(ve){le=`
Error generating stack: `+ve.message+`
`+ve.stack}return{value:m,source:_,stack:le,digest:null}}function df(m,_,F){return{value:m,source:null,stack:F??null,digest:_??null}}function kd(m,_){try{console.error(_.value)}catch(F){setTimeout(function(){throw F})}}var kp=typeof WeakMap=="function"?WeakMap:Map;function Vu(m,_,F){F=uu(-1,F),F.tag=3,F.payload={element:null};var Q=_.value;return F.callback=function(){Hm||(Hm=!0,q0=Q),kd(m,_)},F}function Xf(m,_,F){F=uu(-1,F),F.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var le=_.value;F.payload=function(){return Q(le)},F.callback=function(){kd(m,_)}}var ve=m.stateNode;return ve!==null&&typeof ve.componentDidCatch=="function"&&(F.callback=function(){kd(m,_),typeof Q!="function"&&(Rd===null?Rd=new Set([this]):Rd.add(this));var tt=_.stack;this.componentDidCatch(_.value,{componentStack:tt!==null?tt:""})}),F}function Eh(m,_,F){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new kp;var le=new Set;Q.set(_,le)}else le=Q.get(_),le===void 0&&(le=new Set,Q.set(_,le));le.has(F)||(le.add(F),m=H0.bind(null,m,_,F),_.then(m,m))}function ff(m){do{var _;if((_=m.tag===13)&&(_=m.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return m;m=m.return}while(m!==null);return null}function Rc(m,_,F,Q,le){return(m.mode&1)===0?(m===_?m.flags|=65536:(m.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(_=uu(-1,1),_.tag=2,Il(F,_,1))),F.lanes|=1),m):(m.flags|=65536,m.lanes=le,m)}var pf=ne.ReactCurrentOwner,kl=!1;function fA(m,_,F,Q){_.child=m===null?Is(_,null,F,Q):ji(_,m.child,F,Q)}function Vm(m,_,F,Q,le){F=F.render;var ve=_.ref;return au(_,le),Q=ir(m,_,F,Q,ve,le),F=Vn(),m!==null&&!kl?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~le,pA(m,_,le)):(ws&&F&&jl(_),_.flags|=1,fA(m,_,Q,le),_.child)}function Pp(m,_,F,Q,le){if(m===null){var ve=F.type;return typeof ve=="function"&&!Fp(ve)&&ve.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(_.tag=15,_.type=ve,qo(m,_,ve,Q,le)):(m=rp(F.type,null,Q,_,_.mode,le),m.ref=_.ref,m.return=_,_.child=m)}if(ve=m.child,(m.lanes&le)===0){var tt=ve.memoizedProps;if(F=F.compare,F=F!==null?F:Kr,F(tt,Q)&&m.ref===_.ref)return pA(m,_,le)}return _.flags|=1,m=NA(ve,Q),m.ref=_.ref,m.return=_,_.child=m}function qo(m,_,F,Q,le){if(m!==null){var ve=m.memoizedProps;if(Kr(ve,Q)&&m.ref===_.ref)if(kl=!1,_.pendingProps=Q=ve,(m.lanes&le)!==0)(m.flags&131072)!==0&&(kl=!0);else return _.lanes=m.lanes,pA(m,_,le)}return Bh(m,_,F,Q,le)}function Kp(m,_,F){var Q=_.pendingProps,le=Q.children,ve=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ko(zA,gs),gs|=F;else{if((F&1073741824)===0)return m=ve!==null?ve.baseLanes|F:F,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:m,cachePool:null,transitions:null},_.updateQueue=null,Ko(zA,gs),gs|=m,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ve!==null?ve.baseLanes:F,Ko(zA,gs),gs|=Q}else ve!==null?(Q=ve.baseLanes|F,_.memoizedState=null):Q=F,Ko(zA,gs),gs|=Q;return fA(m,_,le,F),_.child}function Jf(m,_){var F=_.ref;(m===null&&F!==null||m!==null&&m.ref!==F)&&(_.flags|=512,_.flags|=2097152)}function Bh(m,_,F,Q,le){var ve=Bl(F)?El:il.current;return ve=nh(_,ve),au(_,le),F=ir(m,_,F,Q,ve,le),Q=Vn(),m!==null&&!kl?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~le,pA(m,_,le)):(ws&&Q&&jl(_),_.flags|=1,fA(m,_,F,le),_.child)}function ku(m,_,F,Q,le){if(Bl(F)){var ve=!0;AA(_)}else ve=!1;if(au(_,le),_.stateNode===null)yf(m,_),rd(_,F,Q),Zf(_,F,Q,le),Q=!0;else if(m===null){var tt=_.stateNode,Ot=_.memoizedProps;tt.props=Ot;var jt=tt.context,Sn=F.contextType;typeof Sn=="object"&&Sn!==null?Sn=hA(Sn):(Sn=Bl(F)?El:il.current,Sn=nh(_,Sn));var or=F.getDerivedStateFromProps,ur=typeof or=="function"||typeof tt.getSnapshotBeforeUpdate=="function";ur||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Ot!==Q||jt!==Sn)&&hf(_,tt,Q,Sn),sl=!1;var tr=_.memoizedState;tt.state=tr,c(_,Q,tt,le),jt=_.memoizedState,Ot!==Q||tr!==jt||Sl.current||sl?(typeof or=="function"&&(lh(_,F,or,Q),jt=_.memoizedState),(Ot=sl||Td(_,F,Ot,Q,tr,jt,Sn))?(ur||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(_.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=Q,_.memoizedState=jt),tt.props=Q,tt.state=jt,tt.context=Sn,Q=Ot):(typeof tt.componentDidMount=="function"&&(_.flags|=4194308),Q=!1)}else{tt=_.stateNode,uc(m,_),Ot=_.memoizedProps,Sn=_.type===_.elementType?Ot:Tl(_.type,Ot),tt.props=Sn,ur=_.pendingProps,tr=tt.context,jt=F.contextType,typeof jt=="object"&&jt!==null?jt=hA(jt):(jt=Bl(F)?El:il.current,jt=nh(_,jt));var Ur=F.getDerivedStateFromProps;(or=typeof Ur=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Ot!==ur||tr!==jt)&&hf(_,tt,Q,jt),sl=!1,tr=_.memoizedState,tt.state=tr,c(_,Q,tt,le);var ei=_.memoizedState;Ot!==ur||tr!==ei||Sl.current||sl?(typeof Ur=="function"&&(lh(_,F,Ur,Q),ei=_.memoizedState),(Sn=sl||Td(_,F,Sn,Q,tr,ei,jt)||!1)?(or||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(Q,ei,jt),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(Q,ei,jt)),typeof tt.componentDidUpdate=="function"&&(_.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof tt.componentDidUpdate!="function"||Ot===m.memoizedProps&&tr===m.memoizedState||(_.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&tr===m.memoizedState||(_.flags|=1024),_.memoizedProps=Q,_.memoizedState=ei),tt.props=Q,tt.state=ei,tt.context=jt,Q=Sn):(typeof tt.componentDidUpdate!="function"||Ot===m.memoizedProps&&tr===m.memoizedState||(_.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&tr===m.memoizedState||(_.flags|=1024),Q=!1)}return od(m,_,F,Q,ve,le)}function od(m,_,F,Q,le,ve){Jf(m,_);var tt=(_.flags&128)!==0;if(!Q&&!tt)return le&&Id(_,F,!1),pA(m,_,ve);Q=_.stateNode,pf.current=_;var Ot=tt&&typeof F.getDerivedStateFromError!="function"?null:Q.render();return _.flags|=1,m!==null&&tt?(_.child=ji(_,m.child,null,ve),_.child=ji(_,null,Ot,ve)):fA(m,_,Ot,ve),_.memoizedState=Q.state,le&&Id(_,F,!0),_.child}function sd(m){var _=m.stateNode;_.pendingContext?Gu(m,_.pendingContext,_.pendingContext!==_.context):_.context&&Gu(m,_.context,!1),se(m,_.containerInfo)}function Ia(m,_,F,Q,le){return Eu(),cA(le),_.flags|=256,fA(m,_,F,Q),_.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function ad(m){return{baseLanes:m,cachePool:null,transitions:null}}function mf(m,_,F){var Q=_.pendingProps,le=Ge.current,ve=!1,tt=(_.flags&128)!==0,Ot;if((Ot=tt)||(Ot=m!==null&&m.memoizedState===null?!1:(le&2)!==0),Ot?(ve=!0,_.flags&=-129):(m===null||m.memoizedState!==null)&&(le|=1),Ko(Ge,le&1),m===null)return gl(_),m=_.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((_.mode&1)===0?_.lanes=1:m.data==="$!"?_.lanes=8:_.lanes=1073741824,null):(tt=Q.children,m=Q.fallback,ve?(Q=_.mode,ve=_.child,tt={mode:"hidden",children:tt},(Q&1)===0&&ve!==null?(ve.childLanes=0,ve.pendingProps=tt):ve=Ld(tt,Q,0,null),m=Ph(m,Q,F,null),ve.return=_,m.return=_,ve.sibling=m,_.child=ve,_.child.memoizedState=ad(F),_.memoizedState=Pd,m):ld(_,tt));if(le=m.memoizedState,le!==null&&(Ot=le.dehydrated,Ot!==null))return Pi(m,_,tt,Q,Ot,le,F);if(ve){ve=Q.fallback,tt=_.mode,le=m.child,Ot=le.sibling;var jt={mode:"hidden",children:Q.children};return(tt&1)===0&&_.child!==le?(Q=_.child,Q.childLanes=0,Q.pendingProps=jt,_.deletions=null):(Q=NA(le,jt),Q.subtreeFlags=le.subtreeFlags&14680064),Ot!==null?ve=NA(Ot,ve):(ve=Ph(ve,tt,F,null),ve.flags|=2),ve.return=_,Q.return=_,Q.sibling=ve,_.child=Q,Q=ve,ve=_.child,tt=m.child.memoizedState,tt=tt===null?ad(F):{baseLanes:tt.baseLanes|F,cachePool:null,transitions:tt.transitions},ve.memoizedState=tt,ve.childLanes=m.childLanes&~F,_.memoizedState=Pd,Q}return ve=m.child,m=ve.sibling,Q=NA(ve,{mode:"visible",children:Q.children}),(_.mode&1)===0&&(Q.lanes=F),Q.return=_,Q.sibling=null,m!==null&&(F=_.deletions,F===null?(_.deletions=[m],_.flags|=16):F.push(m)),_.child=Q,_.memoizedState=null,Q}function ld(m,_){return _=Ld({mode:"visible",children:_},m.mode,0,null),_.return=m,m.child=_}function Oh(m,_,F,Q){return Q!==null&&cA(Q),ji(_,m.child,null,F),m=ld(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function Pi(m,_,F,Q,le,ve,tt){if(F)return _.flags&256?(_.flags&=-257,Q=df(Error(t(422))),Oh(m,_,tt,Q)):_.memoizedState!==null?(_.child=m.child,_.flags|=128,null):(ve=Q.fallback,le=_.mode,Q=Ld({mode:"visible",children:Q.children},le,0,null),ve=Ph(ve,le,tt,null),ve.flags|=2,Q.return=_,ve.return=_,Q.sibling=ve,_.child=Q,(_.mode&1)!==0&&ji(_,m.child,null,tt),_.child.memoizedState=ad(tt),_.memoizedState=Pd,ve);if((_.mode&1)===0)return Oh(m,_,tt,null);if(le.data==="$!"){if(Q=le.nextSibling&&le.nextSibling.dataset,Q)var Ot=Q.dgst;return Q=Ot,ve=Error(t(419)),Q=df(ve,Q,void 0),Oh(m,_,tt,Q)}if(Ot=(tt&m.childLanes)!==0,kl||Ot){if(Q=ss,Q!==null){switch(tt&-tt){case 4:le=2;break;case 16:le=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:le=32;break;case 536870912:le=268435456;break;default:le=0}le=(le&(Q.suspendedLanes|tt))!==0?0:le,le!==0&&le!==ve.retryLane&&(ve.retryLane=le,Au(m,le),kh(Q,m,le,-1))}return e0(),Q=df(Error(t(421))),Oh(m,_,tt,Q)}return le.data==="$?"?(_.flags|=128,_.child=m.child,_=Hy.bind(null,m),le._reactRetry=_,null):(m=ve.treeContext,la=Ac(le.nextSibling),ya=_,ws=!0,Gl=null,m!==null&&(Ga[ga++]=iu,Ga[ga++]=ou,Ga[ga++]=kc,iu=m.id,ou=m.overflow,kc=_),_=ld(_,Q.children),_.flags|=4096,_)}function gf(m,_,F){m.lanes|=_;var Q=m.alternate;Q!==null&&(Q.lanes|=_),Ys(m.return,_,F)}function Xo(m,_,F,Q,le){var ve=m.memoizedState;ve===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:Q,tail:F,tailMode:le}:(ve.isBackwards=_,ve.rendering=null,ve.renderingStartTime=0,ve.last=Q,ve.tail=F,ve.tailMode=le)}function Dc(m,_,F){var Q=_.pendingProps,le=Q.revealOrder,ve=Q.tail;if(fA(m,_,Q.children,F),Q=Ge.current,(Q&2)!==0)Q=Q&1|2,_.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&gf(m,F,_);else if(m.tag===19)gf(m,F,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(Ko(Ge,Q),(_.mode&1)===0)_.memoizedState=null;else switch(le){case"forwards":for(F=_.child,le=null;F!==null;)m=F.alternate,m!==null&&Ze(m)===null&&(le=F),F=F.sibling;F=le,F===null?(le=_.child,_.child=null):(le=F.sibling,F.sibling=null),Xo(_,!1,le,F,ve);break;case"backwards":for(F=null,le=_.child,_.child=null;le!==null;){if(m=le.alternate,m!==null&&Ze(m)===null){_.child=le;break}m=le.sibling,le.sibling=F,F=le,le=m}Xo(_,!0,F,null,ve);break;case"together":Xo(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function yf(m,_){(_.mode&1)===0&&m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2)}function pA(m,_,F){if(m!==null&&(_.dependencies=m.dependencies),gA|=_.lanes,(F&_.childLanes)===0)return null;if(m!==null&&_.child!==m.child)throw Error(t(153));if(_.child!==null){for(m=_.child,F=NA(m,m.pendingProps),_.child=F,F.return=_;m.sibling!==null;)m=m.sibling,F=F.sibling=NA(m,m.pendingProps),F.return=_;F.sibling=null}return _.child}function Ad(m,_,F){switch(_.tag){case 3:sd(_),Eu();break;case 5:Oe(_);break;case 1:Bl(_.type)&&AA(_);break;case 4:se(_,_.stateNode.containerInfo);break;case 10:var Q=_.type._context,le=_.memoizedProps.value;Ko(ah,Q._currentValue),Q._currentValue=le;break;case 13:if(Q=_.memoizedState,Q!==null)return Q.dehydrated!==null?(Ko(Ge,Ge.current&1),_.flags|=128,null):(F&_.child.childLanes)!==0?mf(m,_,F):(Ko(Ge,Ge.current&1),m=pA(m,_,F),m!==null?m.sibling:null);Ko(Ge,Ge.current&1);break;case 19:if(Q=(F&_.childLanes)!==0,(m.flags&128)!==0){if(Q)return Dc(m,_,F);_.flags|=128}if(le=_.memoizedState,le!==null&&(le.rendering=null,le.tail=null,le.lastEffect=null),Ko(Ge,Ge.current),Q)break;return null;case 22:case 23:return _.lanes=0,Kp(m,_,F)}return pA(m,_,F)}var ba,cm,Ta,hm;ba=function(m,_){for(var F=_.child;F!==null;){if(F.tag===5||F.tag===6)m.appendChild(F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===_)break;for(;F.sibling===null;){if(F.return===null||F.return===_)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},cm=function(){},Ta=function(m,_,F,Q){var le=m.memoizedProps;if(le!==Q){m=_.stateNode,ee(I.current);var ve=null;switch(F){case"input":le=Kt(m,le),Q=Kt(m,Q),ve=[];break;case"select":le=Pe({},le,{value:void 0}),Q=Pe({},Q,{value:void 0}),ve=[];break;case"textarea":le=an(m,le),Q=an(m,Q),ve=[];break;default:typeof le.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=ps)}ae(F,Q);var tt;F=null;for(Sn in le)if(!Q.hasOwnProperty(Sn)&&le.hasOwnProperty(Sn)&&le[Sn]!=null)if(Sn==="style"){var Ot=le[Sn];for(tt in Ot)Ot.hasOwnProperty(tt)&&(F||(F={}),F[tt]="")}else Sn!=="dangerouslySetInnerHTML"&&Sn!=="children"&&Sn!=="suppressContentEditableWarning"&&Sn!=="suppressHydrationWarning"&&Sn!=="autoFocus"&&(i.hasOwnProperty(Sn)?ve||(ve=[]):(ve=ve||[]).push(Sn,null));for(Sn in Q){var jt=Q[Sn];if(Ot=le!=null?le[Sn]:void 0,Q.hasOwnProperty(Sn)&&jt!==Ot&&(jt!=null||Ot!=null))if(Sn==="style")if(Ot){for(tt in Ot)!Ot.hasOwnProperty(tt)||jt&&jt.hasOwnProperty(tt)||(F||(F={}),F[tt]="");for(tt in jt)jt.hasOwnProperty(tt)&&Ot[tt]!==jt[tt]&&(F||(F={}),F[tt]=jt[tt])}else F||(ve||(ve=[]),ve.push(Sn,F)),F=jt;else Sn==="dangerouslySetInnerHTML"?(jt=jt?jt.__html:void 0,Ot=Ot?Ot.__html:void 0,jt!=null&&Ot!==jt&&(ve=ve||[]).push(Sn,jt)):Sn==="children"?typeof jt!="string"&&typeof jt!="number"||(ve=ve||[]).push(Sn,""+jt):Sn!=="suppressContentEditableWarning"&&Sn!=="suppressHydrationWarning"&&(i.hasOwnProperty(Sn)?(jt!=null&&Sn==="onScroll"&&Go("scroll",m),ve||Ot===jt||(ve=[])):(ve=ve||[]).push(Sn,jt))}F&&(ve=ve||[]).push("style",F);var Sn=ve;(_.updateQueue=Sn)&&(_.flags|=4)}},hm=function(m,_,F,Q){F!==Q&&(_.flags|=4)};function ep(m,_){if(!ws)switch(m.tailMode){case"hidden":_=m.tail;for(var F=null;_!==null;)_.alternate!==null&&(F=_),_=_.sibling;F===null?m.tail=null:F.sibling=null;break;case"collapsed":F=m.tail;for(var Q=null;F!==null;)F.alternate!==null&&(Q=F),F=F.sibling;Q===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function mA(m){var _=m.alternate!==null&&m.alternate.child===m.child,F=0,Q=0;if(_)for(var le=m.child;le!==null;)F|=le.lanes|le.childLanes,Q|=le.subtreeFlags&14680064,Q|=le.flags&14680064,le.return=m,le=le.sibling;else for(le=m.child;le!==null;)F|=le.lanes|le.childLanes,Q|=le.subtreeFlags,Q|=le.flags,le.return=m,le=le.sibling;return m.subtreeFlags|=Q,m.childLanes=F,_}function Rp(m,_,F){var Q=_.pendingProps;switch(Qo(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mA(_),null;case 1:return Bl(_.type)&&kA(),mA(_),null;case 3:return Q=_.stateNode,ge(),Fs(Sl),Fs(il),ct(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(Jr(_)?_.flags|=4:m===null||m.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,Gl!==null&&(Xm(Gl),Gl=null))),cm(m,_),mA(_),null;case 5:Ie(_);var le=ee(Y.current);if(F=_.type,m!==null&&_.stateNode!=null)Ta(m,_,F,Q,le),m.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!Q){if(_.stateNode===null)throw Error(t(166));return mA(_),null}if(m=ee(I.current),Jr(_)){Q=_.stateNode,F=_.type;var ve=_.memoizedProps;switch(Q[wu]=_,Q[ml]=ve,m=(_.mode&1)!==0,F){case"dialog":Go("cancel",Q),Go("close",Q);break;case"iframe":case"object":case"embed":Go("load",Q);break;case"video":case"audio":for(le=0;le<nu.length;le++)Go(nu[le],Q);break;case"source":Go("error",Q);break;case"img":case"image":case"link":Go("error",Q),Go("load",Q);break;case"details":Go("toggle",Q);break;case"input":$t(Q,ve),Go("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ve.multiple},Go("invalid",Q);break;case"textarea":Bn(Q,ve),Go("invalid",Q)}ae(F,ve),le=null;for(var tt in ve)if(ve.hasOwnProperty(tt)){var Ot=ve[tt];tt==="children"?typeof Ot=="string"?Q.textContent!==Ot&&(ve.suppressHydrationWarning!==!0&&bh(Q.textContent,Ot,m),le=["children",Ot]):typeof Ot=="number"&&Q.textContent!==""+Ot&&(ve.suppressHydrationWarning!==!0&&bh(Q.textContent,Ot,m),le=["children",""+Ot]):i.hasOwnProperty(tt)&&Ot!=null&&tt==="onScroll"&&Go("scroll",Q)}switch(F){case"input":nt(Q),pr(Q,ve,!0);break;case"textarea":nt(Q),lr(Q);break;case"select":case"option":break;default:typeof ve.onClick=="function"&&(Q.onclick=ps)}Q=le,_.updateQueue=Q,Q!==null&&(_.flags|=4)}else{tt=le.nodeType===9?le:le.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=hr(F)),m==="http://www.w3.org/1999/xhtml"?F==="script"?(m=tt.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=tt.createElement(F,{is:Q.is}):(m=tt.createElement(F),F==="select"&&(tt=m,Q.multiple?tt.multiple=!0:Q.size&&(tt.size=Q.size))):m=tt.createElementNS(m,F),m[wu]=_,m[ml]=Q,ba(m,_,!1,!1),_.stateNode=m;e:{switch(tt=_e(F,Q),F){case"dialog":Go("cancel",m),Go("close",m),le=Q;break;case"iframe":case"object":case"embed":Go("load",m),le=Q;break;case"video":case"audio":for(le=0;le<nu.length;le++)Go(nu[le],m);le=Q;break;case"source":Go("error",m),le=Q;break;case"img":case"image":case"link":Go("error",m),Go("load",m),le=Q;break;case"details":Go("toggle",m),le=Q;break;case"input":$t(m,Q),le=Kt(m,Q),Go("invalid",m);break;case"option":le=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},le=Pe({},Q,{value:void 0}),Go("invalid",m);break;case"textarea":Bn(m,Q),le=an(m,Q),Go("invalid",m);break;default:le=Q}ae(F,le),Ot=le;for(ve in Ot)if(Ot.hasOwnProperty(ve)){var jt=Ot[ve];ve==="style"?Jn(m,jt):ve==="dangerouslySetInnerHTML"?(jt=jt?jt.__html:void 0,jt!=null&&ye(m,jt)):ve==="children"?typeof jt=="string"?(F!=="textarea"||jt!=="")&&rt(m,jt):typeof jt=="number"&&rt(m,""+jt):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?jt!=null&&ve==="onScroll"&&Go("scroll",m):jt!=null&&ie(m,ve,jt,tt))}switch(F){case"input":nt(m),pr(m,Q,!1);break;case"textarea":nt(m),lr(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Te(Q.value));break;case"select":m.multiple=!!Q.multiple,ve=Q.value,ve!=null?Fn(m,!!Q.multiple,ve,!1):Q.defaultValue!=null&&Fn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof le.onClick=="function"&&(m.onclick=ps)}switch(F){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return mA(_),null;case 6:if(m&&_.stateNode!=null)hm(m,_,m.memoizedProps,Q);else{if(typeof Q!="string"&&_.stateNode===null)throw Error(t(166));if(F=ee(Y.current),ee(I.current),Jr(_)){if(Q=_.stateNode,F=_.memoizedProps,Q[wu]=_,(ve=Q.nodeValue!==F)&&(m=ya,m!==null))switch(m.tag){case 3:bh(Q.nodeValue,F,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&bh(Q.nodeValue,F,(m.mode&1)!==0)}ve&&(_.flags|=4)}else Q=(F.nodeType===9?F:F.ownerDocument).createTextNode(Q),Q[wu]=_,_.stateNode=Q}return mA(_),null;case 13:if(Fs(Ge),Q=_.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(ws&&la!==null&&(_.mode&1)!==0&&(_.flags&128)===0)Mh(),Eu(),_.flags|=98560,ve=!1;else if(ve=Jr(_),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ve)throw Error(t(318));if(ve=_.memoizedState,ve=ve!==null?ve.dehydrated:null,!ve)throw Error(t(317));ve[wu]=_}else Eu(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;mA(_),ve=!1}else Gl!==null&&(Xm(Gl),Gl=null),ve=!0;if(!ve)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=F,_):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(_.child.flags|=8192,(_.mode&1)!==0&&(m===null||(Ge.current&1)!==0?Io===0&&(Io=3):e0())),_.updateQueue!==null&&(_.flags|=4),mA(_),null);case 4:return ge(),cm(m,_),m===null&&ru(_.stateNode.containerInfo),mA(_),null;case 10:return ea(_.type._context),mA(_),null;case 17:return Bl(_.type)&&kA(),mA(_),null;case 19:if(Fs(Ge),ve=_.memoizedState,ve===null)return mA(_),null;if(Q=(_.flags&128)!==0,tt=ve.rendering,tt===null)if(Q)ep(ve,!1);else{if(Io!==0||m!==null&&(m.flags&128)!==0)for(m=_.child;m!==null;){if(tt=Ze(m),tt!==null){for(_.flags|=128,ep(ve,!1),Q=tt.updateQueue,Q!==null&&(_.updateQueue=Q,_.flags|=4),_.subtreeFlags=0,Q=F,F=_.child;F!==null;)ve=F,m=Q,ve.flags&=14680066,tt=ve.alternate,tt===null?(ve.childLanes=0,ve.lanes=m,ve.child=null,ve.subtreeFlags=0,ve.memoizedProps=null,ve.memoizedState=null,ve.updateQueue=null,ve.dependencies=null,ve.stateNode=null):(ve.childLanes=tt.childLanes,ve.lanes=tt.lanes,ve.child=tt.child,ve.subtreeFlags=0,ve.deletions=null,ve.memoizedProps=tt.memoizedProps,ve.memoizedState=tt.memoizedState,ve.updateQueue=tt.updateQueue,ve.type=tt.type,m=tt.dependencies,ve.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),F=F.sibling;return Ko(Ge,Ge.current&1|2),_.child}m=m.sibling}ve.tail!==null&&pi()>Ih&&(_.flags|=128,Q=!0,ep(ve,!1),_.lanes=4194304)}else{if(!Q)if(m=Ze(tt),m!==null){if(_.flags|=128,Q=!0,F=m.updateQueue,F!==null&&(_.updateQueue=F,_.flags|=4),ep(ve,!0),ve.tail===null&&ve.tailMode==="hidden"&&!tt.alternate&&!ws)return mA(_),null}else 2*pi()-ve.renderingStartTime>Ih&&F!==1073741824&&(_.flags|=128,Q=!0,ep(ve,!1),_.lanes=4194304);ve.isBackwards?(tt.sibling=_.child,_.child=tt):(F=ve.last,F!==null?F.sibling=tt:_.child=tt,ve.last=tt)}return ve.tail!==null?(_=ve.tail,ve.rendering=_,ve.tail=_.sibling,ve.renderingStartTime=pi(),_.sibling=null,F=Ge.current,Ko(Ge,Q?F&1|2:F&1),_):(mA(_),null);case 22:case 23:return Jm(),Q=_.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(_.flags|=8192),Q&&(_.mode&1)!==0?(gs&1073741824)!==0&&(mA(_),_.subtreeFlags&6&&(_.flags|=8192)):mA(_),null;case 24:return null;case 25:return null}throw Error(t(156,_.tag))}function u(m,_){switch(Qo(_),_.tag){case 1:return Bl(_.type)&&kA(),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return ge(),Fs(Sl),Fs(il),ct(),m=_.flags,(m&65536)!==0&&(m&128)===0?(_.flags=m&-65537|128,_):null;case 5:return Ie(_),null;case 13:if(Fs(Ge),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(t(340));Eu()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return Fs(Ge),null;case 4:return ge(),null;case 10:return ea(_.type._context),null;case 22:case 23:return Jm(),null;case 24:return null;default:return null}}var g=!1,E=!1,S=typeof WeakSet=="function"?WeakSet:Set,K=null;function Z(m,_){var F=m.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(Q){Va(m,_,Q)}else F.current=null}function ue(m,_,F){try{F()}catch(Q){Va(m,_,Q)}}var be=!1;function ke(m,_){if(xu=Be,m=us(),Zc(m)){if("selectionStart"in m)var F={start:m.selectionStart,end:m.selectionEnd};else e:{F=(F=m.ownerDocument)&&F.defaultView||window;var Q=F.getSelection&&F.getSelection();if(Q&&Q.rangeCount!==0){F=Q.anchorNode;var le=Q.anchorOffset,ve=Q.focusNode;Q=Q.focusOffset;try{F.nodeType,ve.nodeType}catch{F=null;break e}var tt=0,Ot=-1,jt=-1,Sn=0,or=0,ur=m,tr=null;t:for(;;){for(var Ur;ur!==F||le!==0&&ur.nodeType!==3||(Ot=tt+le),ur!==ve||Q!==0&&ur.nodeType!==3||(jt=tt+Q),ur.nodeType===3&&(tt+=ur.nodeValue.length),(Ur=ur.firstChild)!==null;)tr=ur,ur=Ur;for(;;){if(ur===m)break t;if(tr===F&&++Sn===le&&(Ot=tt),tr===ve&&++or===Q&&(jt=tt),(Ur=ur.nextSibling)!==null)break;ur=tr,tr=ur.parentNode}ur=Ur}F=Ot===-1||jt===-1?null:{start:Ot,end:jt}}else F=null}F=F||{start:0,end:0}}else F=null;for(Xs={focusedElem:m,selectionRange:F},Be=!1,K=_;K!==null;)if(_=K,m=_.child,(_.subtreeFlags&1028)!==0&&m!==null)m.return=_,K=m;else for(;K!==null;){_=K;try{var ei=_.alternate;if((_.flags&1024)!==0)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ei!==null){var ai=ei.memoizedProps,Rl=ei.memoizedState,hn=_.stateNode,Xt=hn.getSnapshotBeforeUpdate(_.elementType===_.type?ai:Tl(_.type,ai),Rl);hn.__reactInternalSnapshotBeforeUpdate=Xt}break;case 3:var pn=_.stateNode.containerInfo;pn.nodeType===1?pn.textContent="":pn.nodeType===9&&pn.documentElement&&pn.removeChild(pn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(vr){Va(_,_.return,vr)}if(m=_.sibling,m!==null){m.return=_.return,K=m;break}K=_.return}return ei=be,be=!1,ei}function Ne(m,_,F){var Q=_.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var le=Q=Q.next;do{if((le.tag&m)===m){var ve=le.destroy;le.destroy=void 0,ve!==void 0&&ue(_,F,ve)}le=le.next}while(le!==Q)}}function ft(m,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var F=_=_.next;do{if((F.tag&m)===m){var Q=F.create;F.destroy=Q()}F=F.next}while(F!==_)}}function Mt(m){var _=m.ref;if(_!==null){var F=m.stateNode;switch(m.tag){case 5:m=F;break;default:m=F}typeof _=="function"?_(m):_.current=m}}function tn(m){var _=m.alternate;_!==null&&(m.alternate=null,tn(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&(delete _[wu],delete _[ml],delete _[Od],delete _[st],delete _[xh])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Yt(m){return m.tag===5||m.tag===3||m.tag===4}function wn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Yt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Ln(m,_,F){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,_?F.nodeType===8?F.parentNode.insertBefore(m,_):F.insertBefore(m,_):(F.nodeType===8?(_=F.parentNode,_.insertBefore(m,F)):(_=F,_.appendChild(m)),F=F._reactRootContainer,F!=null||_.onclick!==null||(_.onclick=ps));else if(Q!==4&&(m=m.child,m!==null))for(Ln(m,_,F),m=m.sibling;m!==null;)Ln(m,_,F),m=m.sibling}function Hn(m,_,F){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,_?F.insertBefore(m,_):F.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(Hn(m,_,F),m=m.sibling;m!==null;)Hn(m,_,F),m=m.sibling}var $n=null,gr=!1;function Ar(m,_,F){for(F=F.child;F!==null;)Rr(m,_,F),F=F.sibling}function Rr(m,_,F){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Rs,F)}catch{}switch(F.tag){case 5:E||Z(F,_);case 6:var Q=$n,le=gr;$n=null,Ar(m,_,F),$n=Q,gr=le,$n!==null&&(gr?(m=$n,F=F.stateNode,m.nodeType===8?m.parentNode.removeChild(F):m.removeChild(F)):$n.removeChild(F.stateNode));break;case 18:$n!==null&&(gr?(m=$n,F=F.stateNode,m.nodeType===8?ed(m.parentNode,F):m.nodeType===1&&ed(m,F),no(m)):ed($n,F.stateNode));break;case 4:Q=$n,le=gr,$n=F.stateNode.containerInfo,gr=!0,Ar(m,_,F),$n=Q,gr=le;break;case 0:case 11:case 14:case 15:if(!E&&(Q=F.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){le=Q=Q.next;do{var ve=le,tt=ve.destroy;ve=ve.tag,tt!==void 0&&((ve&2)!==0||(ve&4)!==0)&&ue(F,_,tt),le=le.next}while(le!==Q)}Ar(m,_,F);break;case 1:if(!E&&(Z(F,_),Q=F.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=F.memoizedProps,Q.state=F.memoizedState,Q.componentWillUnmount()}catch(Ot){Va(F,_,Ot)}Ar(m,_,F);break;case 21:Ar(m,_,F);break;case 22:F.mode&1?(E=(Q=E)||F.memoizedState!==null,Ar(m,_,F),E=Q):Ar(m,_,F);break;default:Ar(m,_,F)}}function ii(m){var _=m.updateQueue;if(_!==null){m.updateQueue=null;var F=m.stateNode;F===null&&(F=m.stateNode=new S),_.forEach(function(Q){var le=$y.bind(null,m,Q);F.has(Q)||(F.add(Q),Q.then(le,le))})}}function kr(m,_){var F=_.deletions;if(F!==null)for(var Q=0;Q<F.length;Q++){var le=F[Q];try{var ve=m,tt=_,Ot=tt;e:for(;Ot!==null;){switch(Ot.tag){case 5:$n=Ot.stateNode,gr=!1;break e;case 3:$n=Ot.stateNode.containerInfo,gr=!0;break e;case 4:$n=Ot.stateNode.containerInfo,gr=!0;break e}Ot=Ot.return}if($n===null)throw Error(t(160));Rr(ve,tt,le),$n=null,gr=!1;var jt=le.alternate;jt!==null&&(jt.return=null),le.return=null}catch(Sn){Va(le,_,Sn)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)ro(_,m),_=_.sibling}function ro(m,_){var F=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(kr(_,m),Oo(m),Q&4){try{Ne(3,m,m.return),ft(3,m)}catch(ai){Va(m,m.return,ai)}try{Ne(5,m,m.return)}catch(ai){Va(m,m.return,ai)}}break;case 1:kr(_,m),Oo(m),Q&512&&F!==null&&Z(F,F.return);break;case 5:if(kr(_,m),Oo(m),Q&512&&F!==null&&Z(F,F.return),m.flags&32){var le=m.stateNode;try{rt(le,"")}catch(ai){Va(m,m.return,ai)}}if(Q&4&&(le=m.stateNode,le!=null)){var ve=m.memoizedProps,tt=F!==null?F.memoizedProps:ve,Ot=m.type,jt=m.updateQueue;if(m.updateQueue=null,jt!==null)try{Ot==="input"&&ve.type==="radio"&&ve.name!=null&&Rt(le,ve),_e(Ot,tt);var Sn=_e(Ot,ve);for(tt=0;tt<jt.length;tt+=2){var or=jt[tt],ur=jt[tt+1];or==="style"?Jn(le,ur):or==="dangerouslySetInnerHTML"?ye(le,ur):or==="children"?rt(le,ur):ie(le,or,ur,Sn)}switch(Ot){case"input":_n(le,ve);break;case"textarea":Cr(le,ve);break;case"select":var tr=le._wrapperState.wasMultiple;le._wrapperState.wasMultiple=!!ve.multiple;var Ur=ve.value;Ur!=null?Fn(le,!!ve.multiple,Ur,!1):tr!==!!ve.multiple&&(ve.defaultValue!=null?Fn(le,!!ve.multiple,ve.defaultValue,!0):Fn(le,!!ve.multiple,ve.multiple?[]:"",!1))}le[ml]=ve}catch(ai){Va(m,m.return,ai)}}break;case 6:if(kr(_,m),Oo(m),Q&4){if(m.stateNode===null)throw Error(t(162));le=m.stateNode,ve=m.memoizedProps;try{le.nodeValue=ve}catch(ai){Va(m,m.return,ai)}}break;case 3:if(kr(_,m),Oo(m),Q&4&&F!==null&&F.memoizedState.isDehydrated)try{no(_.containerInfo)}catch(ai){Va(m,m.return,ai)}break;case 4:kr(_,m),Oo(m);break;case 13:kr(_,m),Oo(m),le=m.child,le.flags&8192&&(ve=le.memoizedState!==null,le.stateNode.isHidden=ve,!ve||le.alternate!==null&&le.alternate.memoizedState!==null||(Kd=pi())),Q&4&&ii(m);break;case 22:if(or=F!==null&&F.memoizedState!==null,m.mode&1?(E=(Sn=E)||or,kr(_,m),E=Sn):kr(_,m),Oo(m),Q&8192){if(Sn=m.memoizedState!==null,(m.stateNode.isHidden=Sn)&&!or&&(m.mode&1)!==0)for(K=m,or=m.child;or!==null;){for(ur=K=or;K!==null;){switch(tr=K,Ur=tr.child,tr.tag){case 0:case 11:case 14:case 15:Ne(4,tr,tr.return);break;case 1:Z(tr,tr.return);var ei=tr.stateNode;if(typeof ei.componentWillUnmount=="function"){Q=tr,F=tr.return;try{_=Q,ei.props=_.memoizedProps,ei.state=_.memoizedState,ei.componentWillUnmount()}catch(ai){Va(Q,F,ai)}}break;case 5:Z(tr,tr.return);break;case 22:if(tr.memoizedState!==null){ka(ur);continue}}Ur!==null?(Ur.return=tr,K=Ur):ka(ur)}or=or.sibling}e:for(or=null,ur=m;;){if(ur.tag===5){if(or===null){or=ur;try{le=ur.stateNode,Sn?(ve=le.style,typeof ve.setProperty=="function"?ve.setProperty("display","none","important"):ve.display="none"):(Ot=ur.stateNode,jt=ur.memoizedProps.style,tt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null,Ot.style.display=Zt("display",tt))}catch(ai){Va(m,m.return,ai)}}}else if(ur.tag===6){if(or===null)try{ur.stateNode.nodeValue=Sn?"":ur.memoizedProps}catch(ai){Va(m,m.return,ai)}}else if((ur.tag!==22&&ur.tag!==23||ur.memoizedState===null||ur===m)&&ur.child!==null){ur.child.return=ur,ur=ur.child;continue}if(ur===m)break e;for(;ur.sibling===null;){if(ur.return===null||ur.return===m)break e;or===ur&&(or=null),ur=ur.return}or===ur&&(or=null),ur.sibling.return=ur.return,ur=ur.sibling}}break;case 19:kr(_,m),Oo(m),Q&4&&ii(m);break;case 21:break;default:kr(_,m),Oo(m)}}function Oo(m){var _=m.flags;if(_&2){try{e:{for(var F=m.return;F!==null;){if(Yt(F)){var Q=F;break e}F=F.return}throw Error(t(160))}switch(Q.tag){case 5:var le=Q.stateNode;Q.flags&32&&(rt(le,""),Q.flags&=-33);var ve=wn(m);Hn(m,ve,le);break;case 3:case 4:var tt=Q.stateNode.containerInfo,Ot=wn(m);Ln(m,Ot,tt);break;default:throw Error(t(161))}}catch(jt){Va(m,m.return,jt)}m.flags&=-3}_&4096&&(m.flags&=-4097)}function ra(m,_,F){K=m,Ls(m)}function Ls(m,_,F){for(var Q=(m.mode&1)!==0;K!==null;){var le=K,ve=le.child;if(le.tag===22&&Q){var tt=le.memoizedState!==null||g;if(!tt){var Ot=le.alternate,jt=Ot!==null&&Ot.memoizedState!==null||E;Ot=g;var Sn=E;if(g=tt,(E=jt)&&!Sn)for(K=le;K!==null;)tt=K,jt=tt.child,tt.tag===22&&tt.memoizedState!==null?Ya(le):jt!==null?(jt.return=tt,K=jt):Ya(le);for(;ve!==null;)K=ve,Ls(ve),ve=ve.sibling;K=le,g=Ot,E=Sn}Aa(m)}else(le.subtreeFlags&8772)!==0&&ve!==null?(ve.return=le,K=ve):Aa(m)}}function Aa(m){for(;K!==null;){var _=K;if((_.flags&8772)!==0){var F=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:E||ft(5,_);break;case 1:var Q=_.stateNode;if(_.flags&4&&!E)if(F===null)Q.componentDidMount();else{var le=_.elementType===_.type?F.memoizedProps:Tl(_.type,F.memoizedProps);Q.componentDidUpdate(le,F.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ve=_.updateQueue;ve!==null&&C(_,ve,Q);break;case 3:var tt=_.updateQueue;if(tt!==null){if(F=null,_.child!==null)switch(_.child.tag){case 5:F=_.child.stateNode;break;case 1:F=_.child.stateNode}C(_,tt,F)}break;case 5:var Ot=_.stateNode;if(F===null&&_.flags&4){F=Ot;var jt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":jt.autoFocus&&F.focus();break;case"img":jt.src&&(F.src=jt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Sn=_.alternate;if(Sn!==null){var or=Sn.memoizedState;if(or!==null){var ur=or.dehydrated;ur!==null&&no(ur)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}E||_.flags&512&&Mt(_)}catch(tr){Va(_,_.return,tr)}}if(_===m){K=null;break}if(F=_.sibling,F!==null){F.return=_.return,K=F;break}K=_.return}}function ka(m){for(;K!==null;){var _=K;if(_===m){K=null;break}var F=_.sibling;if(F!==null){F.return=_.return,K=F;break}K=_.return}}function Ya(m){for(;K!==null;){var _=K;try{switch(_.tag){case 0:case 11:case 15:var F=_.return;try{ft(4,_)}catch(jt){Va(_,F,jt)}break;case 1:var Q=_.stateNode;if(typeof Q.componentDidMount=="function"){var le=_.return;try{Q.componentDidMount()}catch(jt){Va(_,le,jt)}}var ve=_.return;try{Mt(_)}catch(jt){Va(_,ve,jt)}break;case 5:var tt=_.return;try{Mt(_)}catch(jt){Va(_,tt,jt)}}}catch(jt){Va(_,_.return,jt)}if(_===m){K=null;break}var Ot=_.sibling;if(Ot!==null){Ot.return=_.return,K=Ot;break}K=_.return}}var UA=Math.ceil,ll=ne.ReactCurrentDispatcher,qa=ne.ReactCurrentOwner,cs=ne.ReactCurrentBatchConfig,bi=0,ss=null,Vs=null,ua=0,gs=0,zA=Os(0),Io=0,Ah=null,gA=0,dc=0,Fc=0,xa=null,Pl=null,Kd=0,Ih=1/0,Th=null,Hm=!1,q0=null,Rd=null,dm=!1,vf=null,Hu=0,Dd=0,$m=null,Zm=-1,fm=0;function $u(){return(bi&6)!==0?pi():Zm!==-1?Zm:Zm=pi()}function Cf(m){return(m.mode&1)===0?1:(bi&2)!==0&&ua!==0?ua&-ua:Ql.transition!==null?(fm===0&&(fm=rA()),fm):(m=di,m!==0||(m=window.event,m=m===void 0?16:oi(m.type)),m)}function kh(m,_,F,Q){if(50<Dd)throw Dd=0,$m=null,Error(t(185));Ea(m,F,Q),((bi&2)===0||m!==ss)&&(m===ss&&((bi&2)===0&&(dc|=F),Io===4&&Fd(m,ua)),fc(m,Q),F===1&&bi===0&&(_.mode&1)===0&&(Ih=pi()+500,rh&&Qu()))}function fc(m,_){var F=m.callbackNode;Ci(m,_);var Q=pa(m,m===ss?ua:0);if(Q===0)F!==null&&Wo(F),m.callbackNode=null,m.callbackPriority=0;else if(_=Q&-Q,m.callbackPriority!==_){if(F!=null&&Wo(F),_===1)m.tag===0?Fi(Hg.bind(null,m)):PA(Hg.bind(null,m)),Mu(function(){(bi&6)===0&&Qu()}),F=null;else{switch(jr(Q)){case 1:F=_l;break;case 4:F=Ni;break;case 16:F=wr;break;case 536870912:F=bs;break;default:F=wr}F=Jg(F,pm.bind(null,m))}m.callbackPriority=_,m.callbackNode=F}}function pm(m,_){if(Zm=-1,fm=0,(bi&6)!==0)throw Error(t(327));var F=m.callbackNode;if(bf()&&m.callbackNode!==F)return null;var Q=pa(m,m===ss?ua:0);if(Q===0)return null;if((Q&30)!==0||(Q&m.expiredLanes)!==0||_)_=t0(m,Q);else{_=Q;var le=bi;bi|=2;var ve=Zg();(ss!==m||ua!==_)&&(Th=null,Ih=pi()+500,np(m,_));do try{gm();break}catch(Ot){$g(m,Ot)}while(!0);su(),ll.current=ve,bi=le,Vs!==null?_=0:(ss=null,ua=0,_=Io)}if(_!==0){if(_===2&&(le=ZA(m),le!==0&&(Q=le,_=mm(m,le))),_===1)throw F=Ah,np(m,0),Fd(m,Q),fc(m,pi()),F;if(_===6)Fd(m,Q);else{if(le=m.current.alternate,(Q&30)===0&&!Vg(le)&&(_=t0(m,Q),_===2&&(ve=ZA(m),ve!==0&&(Q=ve,_=mm(m,ve))),_===1))throw F=Ah,np(m,0),Fd(m,Q),fc(m,pi()),F;switch(m.finishedWork=le,m.finishedLanes=Q,_){case 0:case 1:throw Error(t(345));case 2:_f(m,Pl,Th);break;case 3:if(Fd(m,Q),(Q&130023424)===Q&&(_=Kd+500-pi(),10<_)){if(pa(m,0)!==0)break;if(le=m.suspendedLanes,(le&Q)!==Q){$u(),m.pingedLanes|=m.suspendedLanes&le;break}m.timeoutHandle=Wl(_f.bind(null,m,Pl,Th),_);break}_f(m,Pl,Th);break;case 4:if(Fd(m,Q),(Q&4194240)===Q)break;for(_=m.eventTimes,le=-1;0<Q;){var tt=31-xn(Q);ve=1<<tt,tt=_[tt],tt>le&&(le=tt),Q&=~ve}if(Q=le,Q=pi()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*UA(Q/1960))-Q,10<Q){m.timeoutHandle=Wl(_f.bind(null,m,Pl,Th),Q);break}_f(m,Pl,Th);break;case 5:_f(m,Pl,Th);break;default:throw Error(t(329))}}}return fc(m,pi()),m.callbackNode===F?pm.bind(null,m):null}function mm(m,_){var F=xa;return m.current.memoizedState.isDehydrated&&(np(m,_).flags|=256),m=t0(m,_),m!==2&&(_=Pl,Pl=F,_!==null&&Xm(_)),m}function Xm(m){Pl===null?Pl=m:Pl.push.apply(Pl,m)}function Vg(m){for(var _=m;;){if(_.flags&16384){var F=_.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var Q=0;Q<F.length;Q++){var le=F[Q],ve=le.getSnapshot;le=le.value;try{if(!un(ve(),le))return!1}catch{return!1}}}if(F=_.child,_.subtreeFlags&16384&&F!==null)F.return=_,_=F;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Fd(m,_){for(_&=~Fc,_&=~dc,m.suspendedLanes|=_,m.pingedLanes&=~_,m=m.expirationTimes;0<_;){var F=31-xn(_),Q=1<<F;m[F]=-1,_&=~Q}}function Hg(m){if((bi&6)!==0)throw Error(t(327));bf();var _=pa(m,0);if((_&1)===0)return fc(m,pi()),null;var F=t0(m,_);if(m.tag!==0&&F===2){var Q=ZA(m);Q!==0&&(_=Q,F=mm(m,Q))}if(F===1)throw F=Ah,np(m,0),Fd(m,_),fc(m,pi()),F;if(F===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=_,_f(m,Pl,Th),fc(m,pi()),null}function Dp(m,_){var F=bi;bi|=1;try{return m(_)}finally{bi=F,bi===0&&(Ih=pi()+500,rh&&Qu())}}function tp(m){vf!==null&&vf.tag===0&&(bi&6)===0&&bf();var _=bi;bi|=1;var F=cs.transition,Q=di;try{if(cs.transition=null,di=1,m)return m()}finally{di=Q,cs.transition=F,bi=_,(bi&6)===0&&Qu()}}function Jm(){gs=zA.current,Fs(zA)}function np(m,_){m.finishedWork=null,m.finishedLanes=0;var F=m.timeoutHandle;if(F!==-1&&(m.timeoutHandle=-1,ju(F)),Vs!==null)for(F=Vs.return;F!==null;){var Q=F;switch(Qo(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&kA();break;case 3:ge(),Fs(Sl),Fs(il),ct();break;case 5:Ie(Q);break;case 4:ge();break;case 13:Fs(Ge);break;case 19:Fs(Ge);break;case 10:ea(Q.type._context);break;case 22:case 23:Jm()}F=F.return}if(ss=m,Vs=m=NA(m.current,null),ua=gs=_,Io=0,Ah=null,Fc=dc=gA=0,Pl=xa=null,lu!==null){for(_=0;_<lu.length;_++)if(F=lu[_],Q=F.interleaved,Q!==null){F.interleaved=null;var le=Q.next,ve=F.pending;if(ve!==null){var tt=ve.next;ve.next=le,Q.next=tt}F.pending=Q}lu=null}return m}function $g(m,_){do{var F=Vs;try{if(su(),pt.current=nd,Lt){for(var Q=wt.memoizedState;Q!==null;){var le=Q.queue;le!==null&&(le.pending=null),Q=Q.next}Lt=!1}if(Bt=0,Pt=It=wt=null,sn=!1,ln=0,qa.current=null,F===null||F.return===null){Io=1,Ah=_,Vs=null;break}e:{var ve=m,tt=F.return,Ot=F,jt=_;if(_=ua,Ot.flags|=32768,jt!==null&&typeof jt=="object"&&typeof jt.then=="function"){var Sn=jt,or=Ot,ur=or.tag;if((or.mode&1)===0&&(ur===0||ur===11||ur===15)){var tr=or.alternate;tr?(or.updateQueue=tr.updateQueue,or.memoizedState=tr.memoizedState,or.lanes=tr.lanes):(or.updateQueue=null,or.memoizedState=null)}var Ur=ff(tt);if(Ur!==null){Ur.flags&=-257,Rc(Ur,tt,Ot,ve,_),Ur.mode&1&&Eh(ve,Sn,_),_=Ur,jt=Sn;var ei=_.updateQueue;if(ei===null){var ai=new Set;ai.add(jt),_.updateQueue=ai}else ei.add(jt);break e}else{if((_&1)===0){Eh(ve,Sn,_),e0();break e}jt=Error(t(426))}}else if(ws&&Ot.mode&1){var Rl=ff(tt);if(Rl!==null){(Rl.flags&65536)===0&&(Rl.flags|=256),Rc(Rl,tt,Ot,ve,_),cA(id(jt,Ot));break e}}ve=jt=id(jt,Ot),Io!==4&&(Io=2),xa===null?xa=[ve]:xa.push(ve),ve=tt;do{switch(ve.tag){case 3:ve.flags|=65536,_&=-_,ve.lanes|=_;var hn=Vu(ve,jt,_);a(ve,hn);break e;case 1:Ot=jt;var Xt=ve.type,pn=ve.stateNode;if((ve.flags&128)===0&&(typeof Xt.getDerivedStateFromError=="function"||pn!==null&&typeof pn.componentDidCatch=="function"&&(Rd===null||!Rd.has(pn)))){ve.flags|=65536,_&=-_,ve.lanes|=_;var vr=Xf(ve,Ot,_);a(ve,vr);break e}}ve=ve.return}while(ve!==null)}n0(F)}catch(gi){_=gi,Vs===F&&F!==null&&(Vs=F=F.return);continue}break}while(!0)}function Zg(){var m=ll.current;return ll.current=nd,m===null?nd:m}function e0(){(Io===0||Io===3||Io===2)&&(Io=4),ss===null||(gA&268435455)===0&&(dc&268435455)===0||Fd(ss,ua)}function t0(m,_){var F=bi;bi|=2;var Q=Zg();(ss!==m||ua!==_)&&(Th=null,np(m,_));do try{Vy();break}catch(le){$g(m,le)}while(!0);if(su(),bi=F,ll.current=Q,Vs!==null)throw Error(t(261));return ss=null,ua=0,Io}function Vy(){for(;Vs!==null;)V0(Vs)}function gm(){for(;Vs!==null&&!zo();)V0(Vs)}function V0(m){var _=Xg(m.alternate,m,gs);m.memoizedProps=m.pendingProps,_===null?n0(m):Vs=_,qa.current=null}function n0(m){var _=m;do{var F=_.alternate;if(m=_.return,(_.flags&32768)===0){if(F=Rp(F,_,gs),F!==null){Vs=F;return}}else{if(F=u(F,_),F!==null){F.flags&=32767,Vs=F;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Io=6,Vs=null;return}}if(_=_.sibling,_!==null){Vs=_;return}Vs=_=m}while(_!==null);Io===0&&(Io=5)}function _f(m,_,F){var Q=di,le=cs.transition;try{cs.transition=null,di=1,Kl(m,_,F,Q)}finally{cs.transition=le,di=Q}return null}function Kl(m,_,F,Q){do bf();while(vf!==null);if((bi&6)!==0)throw Error(t(327));F=m.finishedWork;var le=m.finishedLanes;if(F===null)return null;if(m.finishedWork=null,m.finishedLanes=0,F===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ve=F.lanes|F.childLanes;if(_c(m,ve),m===ss&&(Vs=ss=null,ua=0),(F.subtreeFlags&2064)===0&&(F.flags&2064)===0||dm||(dm=!0,Jg(wr,function(){return bf(),null})),ve=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||ve){ve=cs.transition,cs.transition=null;var tt=di;di=1;var Ot=bi;bi|=4,qa.current=null,ke(m,F),ro(F,m),$f(Xs),Be=!!xu,Xs=xu=null,m.current=F,ra(F),So(),bi=Ot,di=tt,cs.transition=ve}else m.current=F;if(dm&&(dm=!1,vf=m,Hu=le),ve=m.pendingLanes,ve===0&&(Rd=null),xt(F.stateNode),fc(m,pi()),_!==null)for(Q=m.onRecoverableError,F=0;F<_.length;F++)le=_[F],Q(le.value,{componentStack:le.stack,digest:le.digest});if(Hm)throw Hm=!1,m=q0,q0=null,m;return(Hu&1)!==0&&m.tag!==0&&bf(),ve=m.pendingLanes,(ve&1)!==0?m===$m?Dd++:(Dd=0,$m=m):Dd=0,Qu(),null}function bf(){if(vf!==null){var m=jr(Hu),_=cs.transition,F=di;try{if(cs.transition=null,di=16>m?16:m,vf===null)var Q=!1;else{if(m=vf,vf=null,Hu=0,(bi&6)!==0)throw Error(t(331));var le=bi;for(bi|=4,K=m.current;K!==null;){var ve=K,tt=ve.child;if((K.flags&16)!==0){var Ot=ve.deletions;if(Ot!==null){for(var jt=0;jt<Ot.length;jt++){var Sn=Ot[jt];for(K=Sn;K!==null;){var or=K;switch(or.tag){case 0:case 11:case 15:Ne(8,or,ve)}var ur=or.child;if(ur!==null)ur.return=or,K=ur;else for(;K!==null;){or=K;var tr=or.sibling,Ur=or.return;if(tn(or),or===Sn){K=null;break}if(tr!==null){tr.return=Ur,K=tr;break}K=Ur}}}var ei=ve.alternate;if(ei!==null){var ai=ei.child;if(ai!==null){ei.child=null;do{var Rl=ai.sibling;ai.sibling=null,ai=Rl}while(ai!==null)}}K=ve}}if((ve.subtreeFlags&2064)!==0&&tt!==null)tt.return=ve,K=tt;else e:for(;K!==null;){if(ve=K,(ve.flags&2048)!==0)switch(ve.tag){case 0:case 11:case 15:Ne(9,ve,ve.return)}var hn=ve.sibling;if(hn!==null){hn.return=ve.return,K=hn;break e}K=ve.return}}var Xt=m.current;for(K=Xt;K!==null;){tt=K;var pn=tt.child;if((tt.subtreeFlags&2064)!==0&&pn!==null)pn.return=tt,K=pn;else e:for(tt=Xt;K!==null;){if(Ot=K,(Ot.flags&2048)!==0)try{switch(Ot.tag){case 0:case 11:case 15:ft(9,Ot)}}catch(gi){Va(Ot,Ot.return,gi)}if(Ot===tt){K=null;break e}var vr=Ot.sibling;if(vr!==null){vr.return=Ot.return,K=vr;break e}K=Ot.return}}if(bi=le,Qu(),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Rs,m)}catch{}Q=!0}return Q}finally{di=F,cs.transition=_}}return!1}function r0(m,_,F){_=id(F,_),_=Vu(m,_,1),m=Il(m,_,1),_=$u(),m!==null&&(Ea(m,1,_),fc(m,_))}function Va(m,_,F){if(m.tag===3)r0(m,m,F);else for(;_!==null;){if(_.tag===3){r0(_,m,F);break}else if(_.tag===1){var Q=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Rd===null||!Rd.has(Q))){m=id(F,m),m=Xf(_,m,1),_=Il(_,m,1),m=$u(),_!==null&&(Ea(_,1,m),fc(_,m));break}}_=_.return}}function H0(m,_,F){var Q=m.pingCache;Q!==null&&Q.delete(_),_=$u(),m.pingedLanes|=m.suspendedLanes&F,ss===m&&(ua&F)===F&&(Io===4||Io===3&&(ua&130023424)===ua&&500>pi()-Kd?np(m,0):Fc|=F),fc(m,_)}function i0(m,_){_===0&&((m.mode&1)===0?_=1:(_=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var F=$u();m=Au(m,_),m!==null&&(Ea(m,_,F),fc(m,F))}function Hy(m){var _=m.memoizedState,F=0;_!==null&&(F=_.retryLane),i0(m,F)}function $y(m,_){var F=0;switch(m.tag){case 13:var Q=m.stateNode,le=m.memoizedState;le!==null&&(F=le.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(_),i0(m,F)}var Xg;Xg=function(m,_,F){if(m!==null)if(m.memoizedProps!==_.pendingProps||Sl.current)kl=!0;else{if((m.lanes&F)===0&&(_.flags&128)===0)return kl=!1,Ad(m,_,F);kl=(m.flags&131072)!==0}else kl=!1,ws&&(_.flags&1048576)!==0&&uf(_,uA,_.index);switch(_.lanes=0,_.tag){case 2:var Q=_.type;yf(m,_),m=_.pendingProps;var le=nh(_,il.current);au(_,F),le=ir(null,_,Q,m,le,F);var ve=Vn();return _.flags|=1,typeof le=="object"&&le!==null&&typeof le.render=="function"&&le.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Bl(Q)?(ve=!0,AA(_)):ve=!1,_.memoizedState=le.state!==null&&le.state!==void 0?le.state:null,wh(_),le.updater=Sh,_.stateNode=le,le._reactInternals=_,Zf(_,Q,m,F),_=od(null,_,Q,!0,ve,F)):(_.tag=0,ws&&ve&&jl(_),fA(null,_,le,F),_=_.child),_;case 16:Q=_.elementType;e:{switch(yf(m,_),m=_.pendingProps,le=Q._init,Q=le(Q._payload),_.type=Q,le=_.tag=t1(Q),m=Tl(Q,m),le){case 0:_=Bh(null,_,Q,m,F);break e;case 1:_=ku(null,_,Q,m,F);break e;case 11:_=Vm(null,_,Q,m,F);break e;case 14:_=Pp(null,_,Q,Tl(Q.type,m),F);break e}throw Error(t(306,Q,""))}return _;case 0:return Q=_.type,le=_.pendingProps,le=_.elementType===Q?le:Tl(Q,le),Bh(m,_,Q,le,F);case 1:return Q=_.type,le=_.pendingProps,le=_.elementType===Q?le:Tl(Q,le),ku(m,_,Q,le,F);case 3:e:{if(sd(_),m===null)throw Error(t(387));Q=_.pendingProps,ve=_.memoizedState,le=ve.element,uc(m,_),c(_,Q,null,F);var tt=_.memoizedState;if(Q=tt.element,ve.isDehydrated)if(ve={element:Q,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},_.updateQueue.baseState=ve,_.memoizedState=ve,_.flags&256){le=id(Error(t(423)),_),_=Ia(m,_,Q,F,le);break e}else if(Q!==le){le=id(Error(t(424)),_),_=Ia(m,_,Q,F,le);break e}else for(la=Ac(_.stateNode.containerInfo.firstChild),ya=_,ws=!0,Gl=null,F=Is(_,null,Q,F),_.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(Eu(),Q===le){_=pA(m,_,F);break e}fA(m,_,Q,F)}_=_.child}return _;case 5:return Oe(_),m===null&&gl(_),Q=_.type,le=_.pendingProps,ve=m!==null?m.memoizedProps:null,tt=le.children,Wu(Q,le)?tt=null:ve!==null&&Wu(Q,ve)&&(_.flags|=32),Jf(m,_),fA(m,_,tt,F),_.child;case 6:return m===null&&gl(_),null;case 13:return mf(m,_,F);case 4:return se(_,_.stateNode.containerInfo),Q=_.pendingProps,m===null?_.child=ji(_,null,Q,F):fA(m,_,Q,F),_.child;case 11:return Q=_.type,le=_.pendingProps,le=_.elementType===Q?le:Tl(Q,le),Vm(m,_,Q,le,F);case 7:return fA(m,_,_.pendingProps,F),_.child;case 8:return fA(m,_,_.pendingProps.children,F),_.child;case 12:return fA(m,_,_.pendingProps.children,F),_.child;case 10:e:{if(Q=_.type._context,le=_.pendingProps,ve=_.memoizedProps,tt=le.value,Ko(ah,Q._currentValue),Q._currentValue=tt,ve!==null)if(un(ve.value,tt)){if(ve.children===le.children&&!Sl.current){_=pA(m,_,F);break e}}else for(ve=_.child,ve!==null&&(ve.return=_);ve!==null;){var Ot=ve.dependencies;if(Ot!==null){tt=ve.child;for(var jt=Ot.firstContext;jt!==null;){if(jt.context===Q){if(ve.tag===1){jt=uu(-1,F&-F),jt.tag=2;var Sn=ve.updateQueue;if(Sn!==null){Sn=Sn.shared;var or=Sn.pending;or===null?jt.next=jt:(jt.next=or.next,or.next=jt),Sn.pending=jt}}ve.lanes|=F,jt=ve.alternate,jt!==null&&(jt.lanes|=F),Ys(ve.return,F,_),Ot.lanes|=F;break}jt=jt.next}}else if(ve.tag===10)tt=ve.type===_.type?null:ve.child;else if(ve.tag===18){if(tt=ve.return,tt===null)throw Error(t(341));tt.lanes|=F,Ot=tt.alternate,Ot!==null&&(Ot.lanes|=F),Ys(tt,F,_),tt=ve.sibling}else tt=ve.child;if(tt!==null)tt.return=ve;else for(tt=ve;tt!==null;){if(tt===_){tt=null;break}if(ve=tt.sibling,ve!==null){ve.return=tt.return,tt=ve;break}tt=tt.return}ve=tt}fA(m,_,le.children,F),_=_.child}return _;case 9:return le=_.type,Q=_.pendingProps.children,au(_,F),le=hA(le),Q=Q(le),_.flags|=1,fA(m,_,Q,F),_.child;case 14:return Q=_.type,le=Tl(Q,_.pendingProps),le=Tl(Q.type,le),Pp(m,_,Q,le,F);case 15:return qo(m,_,_.type,_.pendingProps,F);case 17:return Q=_.type,le=_.pendingProps,le=_.elementType===Q?le:Tl(Q,le),yf(m,_),_.tag=1,Bl(Q)?(m=!0,AA(_)):m=!1,au(_,F),rd(_,Q,le),Zf(_,Q,le,F),od(null,_,Q,!0,m,F);case 19:return Dc(m,_,F);case 22:return Kp(m,_,F)}throw Error(t(156,_.tag))};function Jg(m,_){return sa(m,_)}function e1(m,_,F,Q){this.tag=m,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(m,_,F,Q){return new e1(m,_,F,Q)}function Fp(m){return m=m.prototype,!(!m||!m.isReactComponent)}function t1(m){if(typeof m=="function")return Fp(m)?1:0;if(m!=null){if(m=m.$$typeof,m===me)return 11;if(m===Se)return 14}return 2}function NA(m,_){var F=m.alternate;return F===null?(F=Ma(m.tag,_,m.key,m.mode),F.elementType=m.elementType,F.type=m.type,F.stateNode=m.stateNode,F.alternate=m,m.alternate=F):(F.pendingProps=_,F.type=m.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=m.flags&14680064,F.childLanes=m.childLanes,F.lanes=m.lanes,F.child=m.child,F.memoizedProps=m.memoizedProps,F.memoizedState=m.memoizedState,F.updateQueue=m.updateQueue,_=m.dependencies,F.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},F.sibling=m.sibling,F.index=m.index,F.ref=m.ref,F}function rp(m,_,F,Q,le,ve){var tt=2;if(Q=m,typeof m=="function")Fp(m)&&(tt=1);else if(typeof m=="string")tt=5;else e:switch(m){case G:return Ph(F.children,le,ve,_);case oe:tt=8,le|=8;break;case fe:return m=Ma(12,F,_,le|2),m.elementType=fe,m.lanes=ve,m;case pe:return m=Ma(13,F,_,le),m.elementType=pe,m.lanes=ve,m;case qe:return m=Ma(19,F,_,le),m.elementType=qe,m.lanes=ve,m;case Je:return Ld(F,le,ve,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case he:tt=10;break e;case Me:tt=9;break e;case me:tt=11;break e;case Se:tt=14;break e;case vt:tt=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return _=Ma(tt,F,_,le),_.elementType=m,_.type=Q,_.lanes=ve,_}function Ph(m,_,F,Q){return m=Ma(7,m,Q,_),m.lanes=F,m}function Ld(m,_,F,Q){return m=Ma(22,m,Q,_),m.elementType=Je,m.lanes=F,m.stateNode={isHidden:!1},m}function Lp(m,_,F){return m=Ma(6,m,null,_),m.lanes=F,m}function Up(m,_,F){return _=Ma(4,m.children!==null?m.children:[],m.key,_),_.lanes=F,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function Zy(m,_,F,Q,le){this.tag=_,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=Q,this.onRecoverableError=le,this.mutableSourceEagerHydrationData=null}function $0(m,_,F,Q,le,ve,tt,Ot,jt){return m=new Zy(m,_,F,Ot,jt),_===1?(_=1,ve===!0&&(_|=8)):_=0,ve=Ma(3,null,null,_),m.current=ve,ve.stateNode=m,ve.memoizedState={element:Q,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(ve),m}function n1(m,_,F){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:Q==null?null:""+Q,children:m,containerInfo:_,implementation:F}}function Z0(m){if(!m)return wl;m=m._reactInternals;e:{if(Ao(m)!==m||m.tag!==1)throw Error(t(170));var _=m;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Bl(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(t(171))}if(m.tag===1){var F=m.type;if(Bl(F))return Mr(m,F,_)}return _}function r1(m,_,F,Q,le,ve,tt,Ot,jt){return m=$0(F,Q,!0,m,le,ve,tt,Ot,jt),m.context=Z0(null),F=m.current,Q=$u(),le=Cf(F),ve=uu(Q,le),ve.callback=_??null,Il(F,ve,le),m.current.lanes=le,Ea(m,le,Q),fc(m,Q),m}function ym(m,_,F,Q){var le=_.current,ve=$u(),tt=Cf(le);return F=Z0(F),_.context===null?_.context=F:_.pendingContext=F,_=uu(ve,tt),_.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(_.callback=Q),m=Il(le,_,tt),m!==null&&(kh(m,le,tt,ve),O(m,le,tt)),tt}function vm(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function o0(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var F=m.retryLane;m.retryLane=F!==0&&F<_?F:_}}function Cm(m,_){o0(m,_),(m=m.alternate)&&o0(m,_)}function Xy(){return null}var X0=typeof reportError=="function"?reportError:function(m){console.error(m)};function s0(m){this._internalRoot=m}_m.prototype.render=s0.prototype.render=function(m){var _=this._internalRoot;if(_===null)throw Error(t(409));ym(m,_,null,null)},_m.prototype.unmount=s0.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var _=m.containerInfo;tp(function(){ym(null,m,null,null)}),_[TA]=null}};function _m(m){this._internalRoot=m}_m.prototype.unstable_scheduleHydration=function(m){if(m){var _=aa();m={blockedOn:null,target:m,priority:_};for(var F=0;F<uo.length&&_!==0&&_<uo[F].priority;F++);uo.splice(F,0,m),F===0&&wA(m)}};function J0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function a0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function i1(){}function o1(m,_,F,Q,le){if(le){if(typeof Q=="function"){var ve=Q;Q=function(){var Sn=vm(tt);ve.call(Sn)}}var tt=r1(_,Q,m,0,null,!1,!1,"",i1);return m._reactRootContainer=tt,m[TA]=tt.current,ru(m.nodeType===8?m.parentNode:m),tp(),tt}for(;le=m.lastChild;)m.removeChild(le);if(typeof Q=="function"){var Ot=Q;Q=function(){var Sn=vm(jt);Ot.call(Sn)}}var jt=$0(m,0,!1,null,null,!1,!1,"",i1);return m._reactRootContainer=jt,m[TA]=jt.current,ru(m.nodeType===8?m.parentNode:m),tp(function(){ym(_,jt,F,Q)}),jt}function xf(m,_,F,Q,le){var ve=F._reactRootContainer;if(ve){var tt=ve;if(typeof le=="function"){var Ot=le;le=function(){var jt=vm(tt);Ot.call(jt)}}ym(_,tt,m,le)}else tt=o1(F,_,m,le,Q);return vm(tt)}Ii=function(m){switch(m.tag){case 3:var _=m.stateNode;if(_.current.memoizedState.isDehydrated){var F=ls(_.pendingLanes);F!==0&&(Ws(_,F|1),fc(_,pi()),(bi&6)===0&&(Ih=pi()+500,Qu()))}break;case 13:tp(function(){var Q=Au(m,1);if(Q!==null){var le=$u();kh(Q,m,1,le)}}),Cm(m,1)}},bl=function(m){if(m.tag===13){var _=Au(m,134217728);if(_!==null){var F=$u();kh(_,m,134217728,F)}Cm(m,134217728)}},$o=function(m){if(m.tag===13){var _=Cf(m),F=Au(m,_);if(F!==null){var Q=$u();kh(F,m,_,Q)}Cm(m,_)}},aa=function(){return di},js=function(m,_){var F=di;try{return di=m,_()}finally{di=F}},Ee=function(m,_,F){switch(_){case"input":if(_n(m,F),_=F.name,F.type==="radio"&&_!=null){for(F=m;F.parentNode;)F=F.parentNode;for(F=F.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<F.length;_++){var Q=F[_];if(Q!==m&&Q.form===m.form){var le=ms(Q);if(!le)throw Error(t(90));_t(Q),_n(Q,le)}}}break;case"textarea":Cr(m,F);break;case"select":_=F.value,_!=null&&Fn(m,!!F.multiple,_,!1)}},Nt=Dp,rn=tp;var bm={usingClientEntryPoint:!1,Events:[Po,ri,ms,zt,Qt,Dp]},pc={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mf={bundleType:pc.bundleType,version:pc.version,rendererPackageName:pc.rendererPackageName,rendererConfig:pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=fs(m),m===null?null:m.stateNode},findFiberByHostInstance:pc.findFiberByHostInstance||Xy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{Rs=xm.inject(Mf),Ve=xm}catch{}}return ud.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bm,ud.createPortal=function(m,_){var F=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J0(_))throw Error(t(200));return n1(m,_,null,F)},ud.createRoot=function(m,_){if(!J0(m))throw Error(t(299));var F=!1,Q="",le=X0;return _!=null&&(_.unstable_strictMode===!0&&(F=!0),_.identifierPrefix!==void 0&&(Q=_.identifierPrefix),_.onRecoverableError!==void 0&&(le=_.onRecoverableError)),_=$0(m,1,!1,null,null,F,!1,Q,le),m[TA]=_.current,ru(m.nodeType===8?m.parentNode:m),new s0(_)},ud.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=fs(_),m=m===null?null:m.stateNode,m},ud.flushSync=function(m){return tp(m)},ud.hydrate=function(m,_,F){if(!a0(_))throw Error(t(200));return xf(null,m,_,!0,F)},ud.hydrateRoot=function(m,_,F){if(!J0(m))throw Error(t(405));var Q=F!=null&&F.hydratedSources||null,le=!1,ve="",tt=X0;if(F!=null&&(F.unstable_strictMode===!0&&(le=!0),F.identifierPrefix!==void 0&&(ve=F.identifierPrefix),F.onRecoverableError!==void 0&&(tt=F.onRecoverableError)),_=r1(_,null,m,1,F??null,le,!1,ve,tt),m[TA]=_.current,ru(m),Q)for(m=0;m<Q.length;m++)F=Q[m],le=F._getVersion,le=le(F._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[F,le]:_.mutableSourceEagerHydrationData.push(F,le);return new _m(_)},ud.render=function(m,_,F){if(!a0(_))throw Error(t(200));return xf(null,m,_,!1,F)},ud.unmountComponentAtNode=function(m){if(!a0(m))throw Error(t(40));return m._reactRootContainer?(tp(function(){xf(null,null,m,!1,function(){m._reactRootContainer=null,m[TA]=null})}),!0):!1},ud.unstable_batchedUpdates=Dp,ud.unstable_renderSubtreeIntoContainer=function(m,_,F,Q){if(!a0(F))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return xf(m,_,F,!1,Q)},ud.version="18.3.1-next-f1338f8080-20240426",ud}var _8;function RC(){if(_8)return B3.exports;_8=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),B3.exports=oj(),B3.exports}var b8;function sj(){if(b8)return P_;b8=1;var n=RC();return P_.createRoot=n.createRoot,P_.hydrateRoot=n.hydrateRoot,P_}var aj=sj();const lj="modulepreload",Aj=function(n){return"/maputnik/"+n},x8={},f1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(B=>({status:"fulfilled",value:B}),B=>({status:"rejected",reason:B}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),p=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=l(t.map(v=>{if(v=Aj(v),v in x8)return;x8[v]=!0;const x=v.endsWith(".css"),B=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${B}`))return;const k=document.createElement("link");if(k.rel=x?"stylesheet":lj,x||(k.as="script"),k.crossOrigin="",k.href=v,p&&k.setAttribute("nonce",p),document.head.appendChild(k),x)return new Promise((P,D)=>{k.addEventListener("load",P),k.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${v}`)))})}))}function s(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},uj=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},wo=n=>typeof n=="string",cv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},M8=n=>n==null?"":""+n,cj=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},hj=/###/g,w8=n=>n&&n.indexOf("###")>-1?n.replace(hj,"."):n,S8=n=>!n||wo(n),Gv=(n,e,t)=>{const r=wo(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(S8(n))return{};const s=w8(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return S8(n)?{}:{obj:n,k:w8(r[i])}},E8=(n,e,t)=>{const{obj:r,k:i}=Gv(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],l=e.slice(0,e.length-1),o=Gv(n,l,Object);for(;o.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),o=Gv(n,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},dj=(n,e,t,r)=>{const{obj:i,k:s}=Gv(n,e,Object);i[s]=i[s]||[],i[s].push(t)},Lb=(n,e)=>{const{obj:t,k:r}=Gv(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},fj=(n,e,t)=>{const r=Lb(n,t);return r!==void 0?r:Lb(e,t)},kD=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?wo(n[r])||n[r]instanceof String||wo(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):kD(n[r],e[r],t):n[r]=e[r]);return n},p1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var pj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const mj=n=>wo(n)?n.replace(/[&<>"'\/]/g,e=>pj[e]):n;class gj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const yj=[" ",",","?","!",";"],vj=new gj(20),Cj=(n,e,t)=>{e=e||"",t=t||"";const r=yj.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(r.length===0)return!0;const i=vj.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!i.test(n);if(!s){const l=n.indexOf(t);l>0&&!i.test(n.substring(0,l))&&(s=!0)}return s},FE=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let l,o="";for(let p=s;p<r.length;++p)if(p!==s&&(o+=t),o+=r[p],l=i[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&p<r.length-1)continue;s+=p-s+1;break}i=l}return i},Ub=n=>n==null?void 0:n.replace("_","-"),_j={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class zb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||_j,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(wo(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new zb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new zb(this.logger,e)}}var Hp=new zb;class j2{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(l=>{let[o,p]=l;for(let v=0;v<p;v++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[o,p]=l;for(let v=0;v<p;v++)o.apply(o,[e,...r])})}}class B8 extends j2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var v,x;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):wo(r)&&s?o.push(...r.split(s)):o.push(r)));const p=Lb(this.data,o);return!p&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),p||!l||!wo(r)?p:FE((x=(v=this.data)==null?void 0:v[e])==null?void 0:x[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),E8(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(wo(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let p=Lb(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?kD(p,r,s):p={...p,...r},E8(this.data,o,p),l.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var PD={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var l;e=((l=this.processors[s])==null?void 0:l.process(e,t,r,i))??e}),e}};const O8={},I8=n=>!wo(n)&&typeof n!="boolean"&&typeof n!="number";class Nb extends j2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),cj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Hp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Cj(e,r,i);if(l&&!o){const p=e.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:e,namespaces:wo(s)?[s]:s};const v=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(v[0])>-1)&&(s=v.shift()),e=v.join(i)}return{key:e,namespaces:wo(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:l,namespaces:o}=this.extractFromKey(e[e.length-1],t),p=o[o.length-1],v=t.lng||this.language,x=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((v==null?void 0:v.toLowerCase())==="cimode"){if(x){const Me=t.nsSeparator||this.options.nsSeparator;return i?{res:`${p}${Me}${l}`,usedKey:l,exactUsedKey:l,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(t)}:`${p}${Me}${l}`}return i?{res:l,usedKey:l,exactUsedKey:l,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(t)}:l}const B=this.resolve(e,t);let k=B==null?void 0:B.res;const P=(B==null?void 0:B.usedKey)||l,D=(B==null?void 0:B.exactUsedKey)||l,N=["[object Number]","[object Function]","[object RegExp]"],W=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,V=!this.i18nFormat||this.i18nFormat.handleAsObject,$=t.count!==void 0&&!wo(t.count),ie=Nb.hasDefaultValue(t),ne=$?this.pluralResolver.getSuffix(v,t.count,t):"",q=t.ordinal&&$?this.pluralResolver.getSuffix(v,t.count,{ordinal:!1}):"",te=$&&!t.ordinal&&t.count===0,G=te&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${ne}`]||t[`defaultValue${q}`]||t.defaultValue;let oe=k;V&&!k&&ie&&(oe=G);const fe=I8(oe),he=Object.prototype.toString.apply(oe);if(V&&oe&&fe&&N.indexOf(he)<0&&!(wo(W)&&Array.isArray(oe))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Me=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,oe,{...t,ns:o}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(B.res=Me,B.usedParams=this.getUsedParamsDetails(t),B):Me}if(s){const Me=Array.isArray(oe),me=Me?[]:{},pe=Me?D:P;for(const qe in oe)if(Object.prototype.hasOwnProperty.call(oe,qe)){const Se=`${pe}${s}${qe}`;ie&&!k?me[qe]=this.translate(Se,{...t,defaultValue:I8(G)?G[qe]:void 0,joinArrays:!1,ns:o}):me[qe]=this.translate(Se,{...t,joinArrays:!1,ns:o}),me[qe]===Se&&(me[qe]=oe[qe])}k=me}}else if(V&&wo(W)&&Array.isArray(k))k=k.join(W),k&&(k=this.extendTranslation(k,e,t,r));else{let Me=!1,me=!1;!this.isValidLookup(k)&&ie&&(Me=!0,k=G),this.isValidLookup(k)||(me=!0,k=l);const qe=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:k,Se=ie&&G!==k&&this.options.updateMissing;if(me||Me||Se){if(this.logger.log(Se?"updateKey":"missingKey",v,p,l,Se?G:k),s){const je=this.resolve(l,{...t,keySeparator:!1});je&&je.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let vt=[];const Je=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Je&&Je[0])for(let je=0;je<Je.length;je++)vt.push(Je[je]);else this.options.saveMissingTo==="all"?vt=this.languageUtils.toResolveHierarchy(t.lng||this.language):vt.push(t.lng||this.language);const Ke=(je,Pe,Le)=>{var Ct;const Xe=ie&&Le!==k?Le:qe;this.options.missingKeyHandler?this.options.missingKeyHandler(je,p,Pe,Xe,Se,t):(Ct=this.backendConnector)!=null&&Ct.saveMissing&&this.backendConnector.saveMissing(je,p,Pe,Xe,Se,t),this.emit("missingKey",je,p,Pe,k)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?vt.forEach(je=>{const Pe=this.pluralResolver.getSuffixes(je,t);te&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Pe.indexOf(`${this.options.pluralSeparator}zero`)<0&&Pe.push(`${this.options.pluralSeparator}zero`),Pe.forEach(Le=>{Ke([je],l+Le,t[`defaultValue${Le}`]||G)})}):Ke(vt,l,G))}k=this.extendTranslation(k,e,t,B,r),me&&k===l&&this.options.appendNamespaceToMissingKey&&(k=`${p}:${l}`),(me||Me)&&this.options.parseMissingKeyHandler&&(k=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}:${l}`:l,Me?k:void 0))}return i?(B.res=k,B.usedParams=this.getUsedParamsDetails(t),B):k}extendTranslation(e,t,r,i,s){var v,x;var l=this;if((v=this.i18nFormat)!=null&&v.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const B=wo(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let k;if(B){const D=e.match(this.interpolator.nestingRegexp);k=D&&D.length}let P=r.replace&&!wo(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(P={...this.options.interpolation.defaultVariables,...P}),e=this.interpolator.interpolate(e,P,r.lng||this.language||i.usedLng,r),B){const D=e.match(this.interpolator.nestingRegexp),N=D&&D.length;k<N&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];return(s==null?void 0:s[0])===N[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${N[0]} in key: ${t[0]}`),null):l.translate(...N,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,p=wo(o)?[o]:o;return e!=null&&(p!=null&&p.length)&&r.applyPostProcessor!==!1&&(e=PD.handle(p,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,l,o;return wo(e)&&(e=[e]),e.forEach(p=>{if(this.isValidLookup(r))return;const v=this.extractFromKey(p,t),x=v.key;i=x;let B=v.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const k=t.count!==void 0&&!wo(t.count),P=k&&!t.ordinal&&t.count===0,D=t.context!==void 0&&(wo(t.context)||typeof t.context=="number")&&t.context!=="",N=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(W=>{var V,$;this.isValidLookup(r)||(o=W,!O8[`${N[0]}-${W}`]&&((V=this.utils)!=null&&V.hasLoadedNamespace)&&!(($=this.utils)!=null&&$.hasLoadedNamespace(o))&&(O8[`${N[0]}-${W}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(ie=>{var te;if(this.isValidLookup(r))return;l=ie;const ne=[x];if((te=this.i18nFormat)!=null&&te.addLookupKeys)this.i18nFormat.addLookupKeys(ne,x,ie,W,t);else{let G;k&&(G=this.pluralResolver.getSuffix(ie,t.count,t));const oe=`${this.options.pluralSeparator}zero`,fe=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(k&&(ne.push(x+G),t.ordinal&&G.indexOf(fe)===0&&ne.push(x+G.replace(fe,this.options.pluralSeparator)),P&&ne.push(x+oe)),D){const he=`${x}${this.options.contextSeparator}${t.context}`;ne.push(he),k&&(ne.push(he+G),t.ordinal&&G.indexOf(fe)===0&&ne.push(he+G.replace(fe,this.options.pluralSeparator)),P&&ne.push(he+oe))}}let q;for(;q=ne.pop();)this.isValidLookup(r)||(s=q,r=this.getResource(ie,W,q,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!wo(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class T8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hp.create("languageUtils")}getScriptPartFromCode(e){if(e=Ub(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Ub(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(wo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(l=>{if(l===s)return l;if(!(l.indexOf("-")<0&&s.indexOf("-")<0)&&(l.indexOf("-")>0&&s.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===s||l.indexOf(s)===0&&s.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),wo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return wo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):wo(e)&&s(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&s(this.formatLanguageCode(l))}),i}}const k8={zero:0,one:1,two:2,few:3,many:4,other:5},P8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class bj{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Hp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Ub(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let l;try{l=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),P8;if(!e.match(/-|_/))return P8;const p=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(p,t)}return this.pluralRulesCache[s]=l,l}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>k8[i]-k8[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const K8=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=fj(n,e,t);return!s&&i&&wo(t)&&(s=FE(n,t,r),s===void 0&&(s=FE(e,t,r))),s},T3=n=>n.replace(/\$/g,"$$$$");class xj{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Hp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:l,suffix:o,suffixEscaped:p,formatSeparator:v,unescapeSuffix:x,unescapePrefix:B,nestingPrefix:k,nestingPrefixEscaped:P,nestingSuffix:D,nestingSuffixEscaped:N,nestingOptionsSeparator:W,maxReplaces:V,alwaysFormat:$}=e.interpolation;this.escape=t!==void 0?t:mj,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?p1(s):l||"{{",this.suffix=o?p1(o):p||"}}",this.formatSeparator=v||",",this.unescapePrefix=x?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=k?p1(k):P||p1("$t("),this.nestingSuffix=D?p1(D):N||p1(")"),this.nestingOptionsSeparator=W||",",this.maxReplaces=V||1e3,this.alwaysFormat=$!==void 0?$:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var P;let s,l,o;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},v=D=>{if(D.indexOf(this.formatSeparator)<0){const $=K8(t,p,D,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format($,void 0,r,{...i,...t,interpolationkey:D}):$}const N=D.split(this.formatSeparator),W=N.shift().trim(),V=N.join(this.formatSeparator).trim();return this.format(K8(t,p,W,this.options.keySeparator,this.options.ignoreJSONStructure),V,r,{...i,...t,interpolationkey:W})};this.resetRegExp();const x=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,B=((P=i==null?void 0:i.interpolation)==null?void 0:P.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:D=>T3(D)},{regex:this.regexp,safeValue:D=>this.escapeValue?T3(this.escape(D)):T3(D)}].forEach(D=>{for(o=0;s=D.regex.exec(e);){const N=s[1].trim();if(l=v(N),l===void 0)if(typeof x=="function"){const V=x(e,s,i);l=wo(V)?V:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))l="";else if(B){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${e}`),l="";else!wo(l)&&!this.useRawValueToEscape&&(l=M8(l));const W=D.safeValue(l);if(e=e.replace(s[0],W),B?(D.regex.lastIndex+=l.length,D.regex.lastIndex-=s[0].length):D.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,l;const o=(p,v)=>{const x=this.nestingOptionsSeparator;if(p.indexOf(x)<0)return p;const B=p.split(new RegExp(`${x}[ ]*{`));let k=`{${B[1]}`;p=B[0],k=this.interpolate(k,l);const P=k.match(/'/g),D=k.match(/"/g);(((P==null?void 0:P.length)??0)%2===0&&!D||D.length%2!==0)&&(k=k.replace(/'/g,'"'));try{l=JSON.parse(k),v&&(l={...v,...l})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,N),`${p}${x}${k}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,p};for(;i=this.nestingRegexp.exec(e);){let p=[];l={...r},l=l.replace&&!wo(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let v=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const x=i[1].split(this.formatSeparator).map(B=>B.trim());i[1]=x.shift(),p=x,v=!0}if(s=t(o.call(this,i[1].trim(),l),l),s&&i[0]===e&&!wo(s))return s;wo(s)||(s=M8(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),v&&(s=p.reduce((x,B)=>this.format(x,B,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const Mj=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[o,...p]=l.split(":"),v=p.join(":").trim().replace(/^'+|'+$/g,""),x=o.trim();t[x]||(t[x]=v),v==="false"&&(t[x]=!1),v==="true"&&(t[x]=!0),isNaN(v)||(t[x]=parseInt(v,10))}})}return{formatName:e,formatOptions:t}},m1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const l=r+JSON.stringify(s);let o=e[l];return o||(o=n(Ub(r),i),e[l]=o),o(t)}};class wj{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Hp.create("formatter"),this.options=e,this.formats={number:m1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:m1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:m1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:m1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:m1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=m1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(p=>p.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,p)=>{var B;const{formatName:v,formatOptions:x}=Mj(p);if(this.formats[v]){let k=o;try{const P=((B=i==null?void 0:i.formatParams)==null?void 0:B[i.interpolationkey])||{},D=P.locale||P.lng||i.locale||i.lng||r;k=this.formats[v](o,D,{...x,...i,...P})}catch(P){this.logger.warn(P)}return k}else this.logger.warn(`there was no format function for ${v}`);return o},e)}}const Sj=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Ej extends j2{constructor(e,t,r){var s,l;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Hp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(s=this.backend)==null?void 0:s.init)==null||l.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},l={},o={},p={};return e.forEach(v=>{let x=!0;t.forEach(B=>{const k=`${v}|${B}`;!r.reload&&this.store.hasResourceBundle(v,B)?this.state[k]=2:this.state[k]<0||(this.state[k]===1?l[k]===void 0&&(l[k]=!0):(this.state[k]=1,x=!1,l[k]===void 0&&(l[k]=!0),s[k]===void 0&&(s[k]=!0),p[B]===void 0&&(p[B]=!0)))}),x||(o[v]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(p)}}loaded(e,t,r){const i=e.split("|"),s=i[0],l=i[1];t&&this.emit("failedLoading",s,l,t),!t&&r&&this.store.addResourceBundle(s,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(p=>{dj(p.loaded,[s],l),Sj(p,e),t&&p.errors.push(t),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(v=>{o[v]||(o[v]={});const x=p.loaded[v];x.length&&x.forEach(B=>{o[v][B]===void 0&&(o[v][B]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(p=>!p.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:l});return}this.readingCalls++;const o=(v,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(v&&x&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,l)},s);return}l(v,x)},p=this.backend[r].bind(this.backend);if(p.length===2){try{const v=p(e,t);v&&typeof v.then=="function"?v.then(x=>o(null,x)).catch(o):o(null,v)}catch(v){o(v)}return}return p(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();wo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),wo(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,l,o)})}saveMissing(e,t,r,i,s){var p,v,x,B,k;let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((v=(p=this.services)==null?void 0:p.utils)!=null&&v.hasLoadedNamespace&&!((B=(x=this.services)==null?void 0:x.utils)!=null&&B.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((k=this.backend)!=null&&k.create){const P={...l,isUpdate:s},D=this.backend.create.bind(this.backend);if(D.length<6)try{let N;D.length===5?N=D(e,t,r,i,P):N=D(e,t,r,i),N&&typeof N.then=="function"?N.then(W=>o(null,W)).catch(o):o(null,N)}catch(N){o(N)}else D(e,t,r,i,o,P)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const R8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),wo(n[1])&&(e.defaultValue=n[1]),wo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),D8=n=>{var e,t;return wo(n.ns)&&(n.ns=[n.ns]),wo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),wo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},K_=()=>{},Bj=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class iC extends j2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=D8(e),this.services={},this.logger=Hp,this.modules={external:[]},Bj(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(wo(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=R8();this.options={...i,...this.options,...D8(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?Hp.init(s(this.modules.logger),this.options):Hp.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=wj;const B=new T8(this.options);this.store=new B8(this.options.resources,this.options);const k=this.services;k.logger=Hp,k.resourceStore=this.store,k.languageUtils=B,k.pluralResolver=new bj(B,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),x&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(k.formatter=s(x),k.formatter.init(k,this.options),this.options.interpolation.format=k.formatter.format.bind(k.formatter)),k.interpolator=new xj(this.options),k.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},k.backendConnector=new Ej(s(this.modules.backend),k.resourceStore,k,this.options),k.backendConnector.on("*",function(P){for(var D=arguments.length,N=new Array(D>1?D-1:0),W=1;W<D;W++)N[W-1]=arguments[W];e.emit(P,...N)}),this.modules.languageDetector&&(k.languageDetector=s(this.modules.languageDetector),k.languageDetector.init&&k.languageDetector.init(k,this.options.detection,this.options)),this.modules.i18nFormat&&(k.i18nFormat=s(this.modules.i18nFormat),k.i18nFormat.init&&k.i18nFormat.init(this)),this.translator=new Nb(this.services,this.options),this.translator.on("*",function(P){for(var D=arguments.length,N=new Array(D>1?D-1:0),W=1;W<D;W++)N[W-1]=arguments[W];e.emit(P,...N)}),this.modules.external.forEach(P=>{P.init&&P.init(this)})}if(this.format=this.options.interpolation.format,r||(r=K_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=function(){return e.store[x](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=function(){return e.store[x](...arguments),e}});const p=cv(),v=()=>{const x=(B,k)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(k),r(B,k)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?v():setTimeout(v,0),p}loadResources(e){var s,l;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K_;const i=wo(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],p=v=>{if(!v||v==="cimode")return;this.services.languageUtils.toResolveHierarchy(v).forEach(B=>{B!=="cimode"&&o.indexOf(B)<0&&o.push(B)})};i?p(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(x=>p(x)),(l=(s=this.options.preload)==null?void 0:s.forEach)==null||l.call(s,v=>p(v)),this.services.backendConnector.load(o,this.options.ns,v=>{!v&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(v)})}else r(null)}reloadResources(e,t,r){const i=cv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=K_),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&PD.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=cv();this.emit("languageChanging",e);const s=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},l=(p,v)=>{v?this.isLanguageChangingTo===e&&(s(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(p,function(){return r.t(...arguments)})},o=p=>{var B,k;!e&&!p&&this.services.languageDetector&&(p=[]);const v=wo(p)?p:p&&p[0],x=this.store.hasLanguageSomeTranslations(v)?v:this.services.languageUtils.getBestMatchFromCodes(wo(p)?[p]:p);x&&(this.language||s(x),this.translator.language||this.translator.changeLanguage(x),(k=(B=this.services.languageDetector)==null?void 0:B.cacheUserLanguage)==null||k.call(B,x)),this.loadResources(x,P=>{l(P,x)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(l,o){let p;if(typeof o!="object"){for(var v=arguments.length,x=new Array(v>2?v-2:0),B=2;B<v;B++)x[B-2]=arguments[B];p=i.options.overloadTranslationOptionHandler([l,o].concat(x))}else p={...o};p.lng=p.lng||s.lng,p.lngs=p.lngs||s.lngs,p.ns=p.ns||s.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||r||s.keyPrefix);const k=i.options.keySeparator||".";let P;return p.keyPrefix&&Array.isArray(l)?P=l.map(D=>`${p.keyPrefix}${k}${D}`):P=p.keyPrefix?`${p.keyPrefix}${k}${l}`:l,i.t(P,p)};return wo(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,p)=>{const v=this.services.backendConnector.state[`${o}|${p}`];return v===-1||v===0||v===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(s,e)))}loadNamespaces(e,t){const r=cv();return this.options.ns?(wo(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=cv();wo(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=i.concat(s),this.loadResources(l=>{r.resolve(),t&&t(l)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new T8(R8());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new iC(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K_;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new iC(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((p,v)=>(p[v]={...this.store.data[v]},p[v]=Object.keys(p[v]).reduce((x,B)=>(x[B]={...p[v][B]},x),p[v]),p),{});s.store=new B8(o,i),s.services.resourceStore=s.store}return s.translator=new Nb(s.services,i),s.translator.on("*",function(o){for(var p=arguments.length,v=new Array(p>1?p-1:0),x=1;x<p;x++)v[x-1]=arguments[x];s.emit(o,...v)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const qc=iC.createInstance();qc.createInstance=iC.createInstance;qc.createInstance;qc.dir;qc.init;qc.loadResources;qc.reloadResources;qc.use;qc.changeLanguage;qc.getFixedT;qc.t;qc.exists;qc.setDefaultNamespace;qc.hasLoadedNamespace;qc.loadNamespaces;qc.loadLanguages;const{slice:Oj,forEach:Ij}=[];function Tj(n){return Ij.call(Oj.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function kj(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const F8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Pj=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!F8.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!F8.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},L8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=Pj(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var Kj={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return L8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&L8.create(t,n,r,i,s)}},Rj={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const l=i.substring(1).split("&");for(let o=0;o<l.length;o++){const p=l[o].indexOf("=");p>0&&l[o].substring(0,p)===e&&(t=l[o].substring(p+1))}}return t}};let g1=null;const U8=()=>{if(g1!==null)return g1;try{if(g1=typeof window<"u"&&window.localStorage!==null,!g1)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{g1=!1}return g1};var Dj={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&U8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&U8()&&window.localStorage.setItem(t,n)}};let y1=null;const z8=()=>{if(y1!==null)return y1;try{if(y1=typeof window<"u"&&window.sessionStorage!==null,!y1)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{y1=!1}return y1};var Fj={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&z8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&z8()&&window.sessionStorage.setItem(t,n)}},Lj={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},Uj={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},zj={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},Nj={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let KD=!1;try{document.cookie,KD=!0}catch{}const RD=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];KD||RD.splice(1,1);const Wj=()=>({order:RD,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class DD{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Tj(t,this.options||{},Wj()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Kj),this.addDetector(Rj),this.addDetector(Dj),this.addDetector(Fj),this.addDetector(Lj),this.addDetector(Uj),this.addDetector(zj),this.addDetector(Nj)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.filter(r=>r!=null&&!kj(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}DD.type="languageDetector";var jj=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var l=e(r,i);l&&typeof l.then=="function"?l.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,l)}catch(o){s(o)}return}e(r,i,s);return}s(null,e&&e[r]&&e[r][i])}}},k3,N8;function Gj(){return N8||(N8=1,k3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),k3}var Qj=Gj();const Yj=dl(Qj);var qj=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function W8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Yj[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(qj),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var Vj=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Hj=/^\s*$/,$j=Object.create(null);function FD(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(FD,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Zj={parse:function(n,e){e||(e={}),e.components||(e.components=$j);var t,r=[],i=[],s=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(Vj,function(p,v){if(l){if(p!=="</"+t.name+">")return;l=!1}var x,B=p.charAt(1)!=="/",k=p.startsWith("<!--"),P=v+p.length,D=n.charAt(P);if(k){var N=W8(p);return s<0?(r.push(N),r):((x=i[s]).children.push(N),r)}if(B&&(s++,(t=W8(p)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!D||D==="<"||t.children.push({type:"text",content:n.slice(P,n.indexOf("<",P))}),s===0&&r.push(t),(x=i[s-1])&&x.children.push(t),i[s]=t),(!B||t.voidElement)&&(s>-1&&(t.voidElement||t.name===p.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!l&&D!=="<"&&D)){x=s===-1?r:i[s].children;var W=n.indexOf("<",P),V=n.slice(P,W===-1?void 0:W);Hj.test(V)&&(V=" "),(W>-1&&s+x.length>=0||V!==" ")&&x.push({type:"text",content:V})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+FD("",t)},"")}};const xb=(n,e,t,r)=>{var s,l,o,p;const i=[t,{code:e,...r||{}}];if((l=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&l.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);Xd(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(p=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&p.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},j8={},oC=(n,e,t,r)=>{Xd(t)&&j8[t]||(Xd(t)&&(j8[t]=new Date),xb(n,e,t,r))},LD=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},LE=(n,e,t)=>{n.loadNamespaces(e,LD(n,t))},G8=(n,e,t,r)=>{if(Xd(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return LE(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,LD(n,r))},Xj=(n,e,t={})=>!e.languages||!e.languages.length?(oC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),Jj=n=>n.displayName||n.name||(Xd(n)&&n.length>0?n:"Unknown"),Xd=n=>typeof n=="string",mg=n=>typeof n=="object"&&n!==null,eG=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,tG={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},nG=n=>tG[n],rG=n=>n.replace(eG,nG);let UE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:rG};const iG=(n={})=>{UE={...UE,...n}},UD=()=>UE;let zD;const oG=n=>{zD=n},X6=()=>zD,P3=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},K3=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?ty(e):e},sG=n=>Array.isArray(n)&&n.every(Ai.isValidElement),ty=n=>Array.isArray(n)?n:[n],aG=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},ND=(n,e,t,r)=>{if(!n)return"";let i="";const s=ty(n),l=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,p)=>{if(Xd(o)){i+=`${o}`;return}if(Ai.isValidElement(o)){const{props:v,type:x}=o,B=Object.keys(v).length,k=l.indexOf(x)>-1,P=v.children;if(!P&&k&&!B){i+=`<${x}/>`;return}if(!P&&(!k||B)||v.i18nIsDynamicList){i+=`<${p}></${p}>`;return}if(k&&B===1&&Xd(P)){i+=`<${x}>${P}</${x}>`;return}const D=ND(P,e,t,r);i+=`<${p}>${D}</${p}>`;return}if(o===null){xb(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(mg(o)){const{format:v,...x}=o,B=Object.keys(x);if(B.length===1){const k=v?`${B[0]}, ${v}`:B[0];i+=`{{${k}}}`;return}xb(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}xb(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},lG=(n,e,t,r,i,s)=>{if(e==="")return[];const l=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(l.map(W=>`<${W}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const p={},v=W=>{ty(W).forEach($=>{Xd($)||(P3($)?v(K3($)):mg($)&&!Ai.isValidElement($)&&Object.assign(p,$))})};v(n);const x=Zj.parse(`<0>${e}</0>`),B={...p,...i},k=(W,V,$)=>{var q;const ie=K3(W),ne=D(ie,V.children,$);return sG(ie)&&ne.length===0||(q=W.props)!=null&&q.i18nIsDynamicList?ie:ne},P=(W,V,$,ie,ne)=>{W.dummy?(W.children=V,$.push(Ai.cloneElement(W,{key:ie},ne?void 0:V))):$.push(...Ai.Children.map([W],q=>{const te={...q.props};return delete te.i18nIsDynamicList,Ai.createElement(q.type,{...te,key:ie,ref:q.ref},ne?null:V)}))},D=(W,V,$)=>{const ie=ty(W);return ty(V).reduce((q,te,G)=>{var fe,he;const oe=((he=(fe=te.children)==null?void 0:fe[0])==null?void 0:he.content)&&t.services.interpolator.interpolate(te.children[0].content,B,t.language);if(te.type==="tag"){let Me=ie[parseInt(te.name,10)];$.length===1&&!Me&&(Me=$[0][te.name]),Me||(Me={});const me=Object.keys(te.attrs).length!==0?aG({props:te.attrs},Me):Me,pe=Ai.isValidElement(me),qe=pe&&P3(te,!0)&&!te.voidElement,Se=o&&mg(me)&&me.dummy&&!pe,vt=mg(n)&&Object.hasOwnProperty.call(n,te.name);if(Xd(me)){const Je=t.services.interpolator.interpolate(me,B,t.language);q.push(Je)}else if(P3(me)||qe){const Je=k(me,te,$);P(me,Je,q,G)}else if(Se){const Je=D(ie,te.children,$);P(me,Je,q,G)}else if(Number.isNaN(parseFloat(te.name)))if(vt){const Je=k(me,te,$);P(me,Je,q,G,te.voidElement)}else if(r.transSupportBasicHtmlNodes&&l.indexOf(te.name)>-1)if(te.voidElement)q.push(Ai.createElement(te.name,{key:`${te.name}-${G}`}));else{const Je=D(ie,te.children,$);q.push(Ai.createElement(te.name,{key:`${te.name}-${G}`},Je))}else if(te.voidElement)q.push(`<${te.name} />`);else{const Je=D(ie,te.children,$);q.push(`<${te.name}>${Je}</${te.name}>`)}else if(mg(me)&&!pe){const Je=te.children[0]?oe:null;Je&&q.push(Je)}else P(me,oe,q,G,te.children.length!==1||!oe)}else if(te.type==="text"){const Me=r.transWrapTextNodes,me=s?r.unescape(t.services.interpolator.interpolate(te.content,B,t.language)):t.services.interpolator.interpolate(te.content,B,t.language);Me?q.push(Ai.createElement(Me,{key:`${te.name}-${G}`},me)):q.push(me)}return q},[])},N=D([{dummy:!0,children:n||[]}],x,ty(n||[]));return K3(N[0])},WD=(n,e,t)=>{const r=n.key||e,i=Ai.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return Ai.createElement(Ai.Fragment,null,i)}return Ai.createElement(s,{key:r})},AG=(n,e)=>n.map((t,r)=>WD(t,r,e)),uG=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:WD(n[r],r,e)})}),t},cG=(n,e,t,r)=>n?Array.isArray(n)?AG(n,e):mg(n)?uG(n,e):(oC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function hG({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:p,ns:v,i18n:x,t:B,shouldUnescape:k,...P}){var me,pe,qe,Se,vt,Je;const D=x||X6();if(!D)return oC(D,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const N=B||D.t.bind(D)||(Ke=>Ke),W={...UD(),...(me=D.options)==null?void 0:me.react};let V=v||N.ns||((pe=D.options)==null?void 0:pe.defaultNS);V=Xd(V)?[V]:V||["translation"];const $=ND(n,W,D,r),ie=o||$||W.transEmptyNodeValue||r,{hashTransKey:ne}=W,q=r||(ne?ne($||ie):$||ie);(Se=(qe=D.options)==null?void 0:qe.interpolation)!=null&&Se.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...D.options.interpolation.defaultVariables}:{...D.options.interpolation.defaultVariables});const te=l||e!==void 0&&!((Je=(vt=D.options)==null?void 0:vt.interpolation)!=null&&Je.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},G={...s,context:i||s.context,count:e,...l,...te,defaultValue:ie,ns:V},oe=q?N(q,G):ie,fe=cG(p,oe,D,r),he=lG(fe||n,oe,D,W,G,k),Me=t??W.defaultTransParent;return Me?Ai.createElement(Me,P,he):he}const dG={type:"3rdParty",init(n){iG(n.options.react),oG(n)}},jD=Ai.createContext();class fG{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function R0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:p,ns:v,i18n:x,t:B,shouldUnescape:k,...P}){var $;const{i18n:D,defaultNS:N}=Ai.useContext(jD)||{},W=x||D||X6(),V=B||(W==null?void 0:W.t.bind(W));return hG({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:p,ns:v||(V==null?void 0:V.ns)||N||(($=W==null?void 0:W.options)==null?void 0:$.defaultNS),i18n:W,t:B,shouldUnescape:k,...P})}const pG=(n,e)=>{const t=Ai.useRef();return Ai.useEffect(()=>{t.current=n},[n,e]),t.current},GD=(n,e,t,r)=>n.getFixedT(e,t,r),mG=(n,e,t,r)=>Ai.useCallback(GD(n,e,t,r),[n,e,t,r]),gG=(n,e={})=>{var ne,q,te,G;const{i18n:t}=e,{i18n:r,defaultNS:i}=Ai.useContext(jD)||{},s=t||r||X6();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new fG),!s){oC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const oe=(he,Me)=>Xd(Me)?Me:mg(Me)&&Xd(Me.defaultValue)?Me.defaultValue:Array.isArray(he)?he[he.length-1]:he,fe=[oe,{},!1];return fe.t=oe,fe.i18n={},fe.ready=!1,fe}(ne=s.options.react)!=null&&ne.wait&&oC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...UD(),...s.options.react,...e},{useSuspense:o,keyPrefix:p}=l;let v=i||((q=s.options)==null?void 0:q.defaultNS);v=Xd(v)?[v]:v||["translation"],(G=(te=s.reportNamespaces).addUsedNamespaces)==null||G.call(te,v);const x=(s.isInitialized||s.initializedStoreOnce)&&v.every(oe=>Xj(oe,s,l)),B=mG(s,e.lng||null,l.nsMode==="fallback"?v:v[0],p),k=()=>B,P=()=>GD(s,e.lng||null,l.nsMode==="fallback"?v:v[0],p),[D,N]=Ai.useState(k);let W=v.join();e.lng&&(W=`${e.lng}${W}`);const V=pG(W),$=Ai.useRef(!0);Ai.useEffect(()=>{const{bindI18n:oe,bindI18nStore:fe}=l;$.current=!0,!x&&!o&&(e.lng?G8(s,e.lng,v,()=>{$.current&&N(P)}):LE(s,v,()=>{$.current&&N(P)})),x&&V&&V!==W&&$.current&&N(P);const he=()=>{$.current&&N(P)};return oe&&(s==null||s.on(oe,he)),fe&&(s==null||s.store.on(fe,he)),()=>{$.current=!1,s&&(oe==null||oe.split(" ").forEach(Me=>s.off(Me,he))),fe&&s&&fe.split(" ").forEach(Me=>s.store.off(Me,he))}},[s,W]),Ai.useEffect(()=>{$.current&&x&&N(k)},[s,p,x]);const ie=[D,s,x];if(ie.t=D,ie.i18n=s,ie.ready=x,x||!x&&!o)return ie;throw new Promise(oe=>{e.lng?G8(s,e.lng,v,()=>oe()):LE(s,v,()=>oe())})},Ns=(n,e={})=>function(r){function i({forwardedRef:l,...o}){const[p,v,x]=gG(n,{...o,keyPrefix:e.keyPrefix}),B={...o,t:p,i18n:v,tReady:x};return e.withRef&&l?B.ref=l:!e.withRef&&l&&(B.forwardedRef=l),Ai.createElement(r,B)}i.displayName=`withI18nextTranslation(${Jj(r)})`,i.WrappedComponent=r;const s=(l,o)=>Ai.createElement(i,Object.assign({},l,{forwardedRef:o}));return e.withRef?Ai.forwardRef(s):i};function $a(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="f69d9d8f41edfbc571efe934ba014df41eed434c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f69d9d8f41edfbc571efe934ba014df41eed434c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $a=function(){return l},l}$a();const QD=($a().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});$a().s[1]++;qc.use(DD).use(jj((n,e)=>($a().f[0]++,$a().s[2]++,n==="en"?($a().b[0][0]++,$a().s[3]++,{}):($a().b[0][1]++,$a().s[4]++,uj(Object.assign({"./locales/de/translation.json":()=>($a().f[1]++,$a().s[5]++,f1(()=>import("./translation-bfGlUGle.js"),[])),"./locales/fr/translation.json":()=>($a().f[2]++,$a().s[6]++,f1(()=>import("./translation-J1EAmmGD.js"),[])),"./locales/he/translation.json":()=>($a().f[3]++,$a().s[7]++,f1(()=>import("./translation-B80Cngny.js"),[])),"./locales/it/translation.json":()=>($a().f[4]++,$a().s[8]++,f1(()=>import("./translation-Ckdsp6Ku.js"),[])),"./locales/ja/translation.json":()=>($a().f[5]++,$a().s[9]++,f1(()=>import("./translation-C8OpQe1w.js"),[])),"./locales/zh/translation.json":()=>($a().f[6]++,$a().s[10]++,f1(()=>import("./translation-zqWUd59b.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(dG).init({supportedLngs:Object.keys(QD),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if($a().f[7]++,$a().s[11]++,n[0]==="en"){$a().b[1][0]++,$a().s[12]++;return}else $a().b[1][1]++;$a().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var R_={exports:{}},Q8;function yG(){return Q8||(Q8=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(l){if(l===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(l);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(p){var v=Object.getOwnPropertyDescriptor(o,p);if(v===void 0){console.warn('Autobind: "'+p+'" method not found in class.');return}t.indexOf(p)!==-1||typeof v.value!="function"||Object.defineProperty(o,p,s(o,p,v))})}function s(l,o,p){var v=p.value;return{configurable:!0,get:function(){if(this===l||this.hasOwnProperty(o))return v;var B=v.bind(this);return Object.defineProperty(this,o,{value:B,configurable:!0,writable:!0}),B}}}n.exports=e.default}(R_,R_.exports)),R_.exports}var R3,Y8;function vG(){return Y8||(Y8=1,R3=yG()),R3}var CG=vG();const _G=dl(CG);var wv={exports:{}};wv.exports;var q8;function bG(){return q8||(q8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",l="[object Array]",o="[object Boolean]",p="[object Date]",v="[object Error]",x="[object Function]",B="[object GeneratorFunction]",k="[object Map]",P="[object Number]",D="[object Object]",N="[object Promise]",W="[object RegExp]",V="[object Set]",$="[object String]",ie="[object Symbol]",ne="[object WeakMap]",q="[object ArrayBuffer]",te="[object DataView]",G="[object Float32Array]",oe="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",Me="[object Int32Array]",me="[object Uint8Array]",pe="[object Uint8ClampedArray]",qe="[object Uint16Array]",Se="[object Uint32Array]",vt=/[\\^$.*+?()[\]{}|]/g,Je=/\w*$/,Ke=/^\[object .+?Constructor\]$/,je=/^(?:0|[1-9]\d*)$/,Pe={};Pe[s]=Pe[l]=Pe[q]=Pe[te]=Pe[o]=Pe[p]=Pe[G]=Pe[oe]=Pe[fe]=Pe[he]=Pe[Me]=Pe[k]=Pe[P]=Pe[D]=Pe[W]=Pe[V]=Pe[$]=Pe[ie]=Pe[me]=Pe[pe]=Pe[qe]=Pe[Se]=!0,Pe[v]=Pe[x]=Pe[ne]=!1;var Le=typeof window=="object"&&window&&window.Object===Object&&window,Xe=typeof self=="object"&&self&&self.Object===Object&&self,Ct=Le||Xe||Function("return this")(),Gt=e&&!e.nodeType&&e,mt=Gt&&!0&&n&&!n.nodeType&&n,Ut=mt&&mt.exports===Gt;function kt(J,Be){return J.set(Be[0],Be[1]),J}function Te(J,Be){return J.add(Be),J}function Re(J,Be){for(var lt=-1,qt=J?J.length:0;++lt<qt&&Be(J[lt],lt,J)!==!1;);return J}function Ue(J,Be){for(var lt=-1,qt=Be.length,Br=J.length;++lt<qt;)J[Br+lt]=Be[lt];return J}function nt(J,Be,lt,qt){for(var Br=-1,Gn=J?J.length:0;++Br<Gn;)lt=Be(lt,J[Br],Br,J);return lt}function _t(J,Be){for(var lt=-1,qt=Array(J);++lt<J;)qt[lt]=Be(lt);return qt}function gt(J,Be){return J==null?void 0:J[Be]}function Kt(J){var Be=!1;if(J!=null&&typeof J.toString!="function")try{Be=!!(J+"")}catch{}return Be}function $t(J){var Be=-1,lt=Array(J.size);return J.forEach(function(qt,Br){lt[++Be]=[Br,qt]}),lt}function Rt(J,Be){return function(lt){return J(Be(lt))}}function _n(J){var Be=-1,lt=Array(J.size);return J.forEach(function(qt){lt[++Be]=qt}),lt}var pr=Array.prototype,nn=Function.prototype,Xn=Object.prototype,Fn=Ct["__core-js_shared__"],an=function(){var J=/[^.]+$/.exec(Fn&&Fn.keys&&Fn.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Bn=nn.toString,Cr=Xn.hasOwnProperty,lr=Xn.toString,hr=RegExp("^"+Bn.call(Cr).replace(vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ut?Ct.Buffer:void 0,ce=Ct.Symbol,ye=Ct.Uint8Array,rt=Rt(Object.getPrototypeOf,Object),Et=Object.create,Ht=Xn.propertyIsEnumerable,Zt=pr.splice,Jn=Object.getOwnPropertySymbols,He=We?We.isBuffer:void 0,ae=Rt(Object.keys,Object),_e=di(Ct,"DataView"),f=di(Ct,"Map"),Qe=di(Ct,"Promise"),Ee=di(Ct,"Set"),it=di(Ct,"WeakMap"),ut=di(Object,"create"),at=Qi(_e),zt=Qi(f),Qt=Qi(Qe),Nt=Qi(Ee),rn=Qi(it),Rn=ce?ce.prototype:void 0,Dn=Rn?Rn.valueOf:void 0;function mr(J){var Be=-1,lt=J?J.length:0;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function Tr(){this.__data__=ut?ut(null):{}}function Jt(J){return this.has(J)&&delete this.__data__[J]}function br(J){var Be=this.__data__;if(ut){var lt=Be[J];return lt===r?void 0:lt}return Cr.call(Be,J)?Be[J]:void 0}function Gr(J){var Be=this.__data__;return ut?Be[J]!==void 0:Cr.call(Be,J)}function Si(J,Be){var lt=this.__data__;return lt[J]=ut&&Be===void 0?r:Be,this}mr.prototype.clear=Tr,mr.prototype.delete=Jt,mr.prototype.get=br,mr.prototype.has=Gr,mr.prototype.set=Si;function Fr(J){var Be=-1,lt=J?J.length:0;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function yn(){this.__data__=[]}function ar(J){var Be=this.__data__,lt=Fa(Be,J);if(lt<0)return!1;var qt=Be.length-1;return lt==qt?Be.pop():Zt.call(Be,lt,1),!0}function Pr(J){var Be=this.__data__,lt=Fa(Be,J);return lt<0?void 0:Be[lt][1]}function Cs(J){return Fa(this.__data__,J)>-1}function Ao(J,Be){var lt=this.__data__,qt=Fa(lt,J);return qt<0?lt.push([J,Be]):lt[qt][1]=Be,this}Fr.prototype.clear=yn,Fr.prototype.delete=ar,Fr.prototype.get=Pr,Fr.prototype.has=Cs,Fr.prototype.set=Ao;function ui(J){var Be=-1,lt=J?J.length:0;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function $r(){this.__data__={hash:new mr,map:new(f||Fr),string:new mr}}function _s(J){return Ws(this,J).delete(J)}function fs(J){return Ws(this,J).get(J)}function Ja(J){return Ws(this,J).has(J)}function sa(J,Be){return Ws(this,J).set(J,Be),this}ui.prototype.clear=$r,ui.prototype.delete=_s,ui.prototype.get=fs,ui.prototype.has=Ja,ui.prototype.set=sa;function Wo(J){this.__data__=new Fr(J)}function zo(){this.__data__=new Fr}function So(J){return this.__data__.delete(J)}function pi(J){return this.__data__.get(J)}function tA(J){return this.__data__.has(J)}function _l(J,Be){var lt=this.__data__;if(lt instanceof Fr){var qt=lt.__data__;if(!f||qt.length<t-1)return qt.push([J,Be]),this;lt=this.__data__=new ui(qt)}return lt.set(J,Be),this}Wo.prototype.clear=zo,Wo.prototype.delete=So,Wo.prototype.get=pi,Wo.prototype.has=tA,Wo.prototype.set=_l;function Ni(J,Be){var lt=uo(J)||Ba(J)?_t(J.length,String):[],qt=lt.length,Br=!!qt;for(var Gn in J)Cr.call(J,Gn)&&!(Br&&(Gn=="length"||js(Gn,qt)))&&lt.push(Gn);return lt}function wr(J,Be,lt){var qt=J[Be];(!(Cr.call(J,Be)&&La(qt,lt))||lt===void 0&&!(Be in J))&&(J[Be]=lt)}function Fa(J,Be){for(var lt=J.length;lt--;)if(La(J[lt][0],Be))return lt;return-1}function bs(J,Be){return J&&ma(Be,eo(Be),J)}function Rs(J,Be,lt,qt,Br,Gn,Zr){var oi;if(qt&&(oi=Gn?qt(J,Br,Gn,Zr):qt(J)),oi!==void 0)return oi;if(!wi(J))return J;var Or=uo(J);if(Or){if(oi=bl(J),!Be)return rA(J,oi)}else{var ni=Ii(J),$i=ni==x||ni==B;if(el(J))return dr(J,Be);if(ni==D||ni==s||$i&&!Gn){if(Kt(J))return Gn?J:{};if(oi=$o($i?{}:J),!Be)return Ea(J,bs(oi,J))}else{if(!Pe[ni])return Gn?J:{};oi=aa(J,ni,Rs,Be)}}Zr||(Zr=new Wo);var Eo=Zr.get(J);if(Eo)return Eo;if(Zr.set(J,oi),!Or)var si=lt?_c(J):eo(J);return Re(si||J,function(_i,Ri){si&&(Ri=_i,_i=J[Ri]),wr(oi,Ri,Rs(_i,Be,lt,qt,Ri,J,Zr))}),oi}function Ve(J){return wi(J)?Et(J):{}}function xt(J,Be,lt){var qt=Be(J);return uo(J)?qt:Ue(qt,lt(J))}function xn(J){return lr.call(J)}function Yn(J){if(!wi(J)||iA(J))return!1;var Be=Oa(J)||Kt(J)?hr:Ke;return Be.test(Qi(J))}function fn(J){if(!ns(J))return ae(J);var Be=[];for(var lt in Object(J))Cr.call(J,lt)&&lt!="constructor"&&Be.push(lt);return Be}function dr(J,Be){if(Be)return J.slice();var lt=new J.constructor(J.length);return J.copy(lt),lt}function Wi(J){var Be=new J.constructor(J.byteLength);return new ye(Be).set(new ye(J)),Be}function Co(J,Be){var lt=Be?Wi(J.buffer):J.buffer;return new J.constructor(lt,J.byteOffset,J.byteLength)}function ls(J,Be,lt){var qt=Be?lt($t(J),!0):$t(J);return nt(qt,kt,new J.constructor)}function pa(J){var Be=new J.constructor(J.source,Je.exec(J));return Be.lastIndex=J.lastIndex,Be}function nA(J,Be,lt){var qt=Be?lt(_n(J),!0):_n(J);return nt(qt,Te,new J.constructor)}function Ci(J){return Dn?Object(Dn.call(J)):{}}function ZA(J,Be){var lt=Be?Wi(J.buffer):J.buffer;return new J.constructor(lt,J.byteOffset,J.length)}function rA(J,Be){var lt=-1,qt=J.length;for(Be||(Be=Array(qt));++lt<qt;)Be[lt]=J[lt];return Be}function ma(J,Be,lt,qt){lt||(lt={});for(var Br=-1,Gn=Be.length;++Br<Gn;){var Zr=Be[Br],oi=void 0;wr(lt,Zr,oi===void 0?J[Zr]:oi)}return lt}function Ea(J,Be){return ma(J,jr(J),Be)}function _c(J){return xt(J,eo,jr)}function Ws(J,Be){var lt=J.__data__;return jo(Be)?lt[typeof Be=="string"?"string":"hash"]:lt.map}function di(J,Be){var lt=gt(J,Be);return Yn(lt)?lt:void 0}var jr=Jn?Rt(Jn,Object):Sr,Ii=xn;(_e&&Ii(new _e(new ArrayBuffer(1)))!=te||f&&Ii(new f)!=k||Qe&&Ii(Qe.resolve())!=N||Ee&&Ii(new Ee)!=V||it&&Ii(new it)!=ne)&&(Ii=function(J){var Be=lr.call(J),lt=Be==D?J.constructor:void 0,qt=lt?Qi(lt):void 0;if(qt)switch(qt){case at:return te;case zt:return k;case Qt:return N;case Nt:return V;case rn:return ne}return Be});function bl(J){var Be=J.length,lt=J.constructor(Be);return Be&&typeof J[0]=="string"&&Cr.call(J,"index")&&(lt.index=J.index,lt.input=J.input),lt}function $o(J){return typeof J.constructor=="function"&&!ns(J)?Ve(rt(J)):{}}function aa(J,Be,lt,qt){var Br=J.constructor;switch(Be){case q:return Wi(J);case o:case p:return new Br(+J);case te:return Co(J,qt);case G:case oe:case fe:case he:case Me:case me:case pe:case qe:case Se:return ZA(J,qt);case k:return ls(J,qt,lt);case P:case $:return new Br(J);case W:return pa(J);case V:return nA(J,qt,lt);case ie:return Ci(J)}}function js(J,Be){return Be=Be??i,!!Be&&(typeof J=="number"||je.test(J))&&J>-1&&J%1==0&&J<Be}function jo(J){var Be=typeof J;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?J!=="__proto__":J===null}function iA(J){return!!an&&an in J}function ns(J){var Be=J&&J.constructor,lt=typeof Be=="function"&&Be.prototype||Xn;return J===lt}function Qi(J){if(J!=null){try{return Bn.call(J)}catch{}try{return J+""}catch{}}return""}function _o(J){return Rs(J,!0,!0)}function La(J,Be){return J===Be||J!==J&&Be!==Be}function Ba(J){return oA(J)&&Cr.call(J,"callee")&&(!Ht.call(J,"callee")||lr.call(J)==s)}var uo=Array.isArray;function Gs(J){return J!=null&&wA(J.length)&&!Oa(J)}function oA(J){return XA(J)&&Gs(J)}var el=He||no;function Oa(J){var Be=wi(J)?lr.call(J):"";return Be==x||Be==B}function wA(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=i}function wi(J){var Be=typeof J;return!!J&&(Be=="object"||Be=="function")}function XA(J){return!!J&&typeof J=="object"}function eo(J){return Gs(J)?Ni(J):fn(J)}function Sr(){return[]}function no(){return!1}n.exports=_o}(wv,wv.exports)),wv.exports}var xG=bG();const V8=dl(xG);var D3,H8;function MG(){if(H8)return D3;H8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,p=o.toString;function v(N,W,V){return N===N&&(V!==void 0&&(N=N<=V?N:V),W!==void 0&&(N=N>=W?N:W)),N}function x(N){var W=typeof N;return!!N&&(W=="object"||W=="function")}function B(N){return!!N&&typeof N=="object"}function k(N){return typeof N=="symbol"||B(N)&&p.call(N)==e}function P(N){if(typeof N=="number")return N;if(k(N))return n;if(x(N)){var W=typeof N.valueOf=="function"?N.valueOf():N;N=x(W)?W+"":W}if(typeof N!="string")return N===0?N:+N;N=N.replace(t,"");var V=i.test(N);return V||s.test(N)?l(N.slice(2),V?2:8):r.test(N)?n:+N}function D(N,W,V){return V===void 0&&(V=W,W=void 0),V!==void 0&&(V=P(V),V=V===V?V:0),W!==void 0&&(W=P(W),W=W===W?W:0),v(P(N),W,V)}return D3=D,D3}var wG=MG();const $8=dl(wG);var F3={},hv={},Z8;function SG(){if(Z8)return hv;Z8=1,hv.byteLength=o,hv.toByteArray=v,hv.fromByteArray=k;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(P){var D=P.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=P.indexOf("=");N===-1&&(N=D);var W=N===D?0:4-N%4;return[N,W]}function o(P){var D=l(P),N=D[0],W=D[1];return(N+W)*3/4-W}function p(P,D,N){return(D+N)*3/4-N}function v(P){var D,N=l(P),W=N[0],V=N[1],$=new t(p(P,W,V)),ie=0,ne=V>0?W-4:W,q;for(q=0;q<ne;q+=4)D=e[P.charCodeAt(q)]<<18|e[P.charCodeAt(q+1)]<<12|e[P.charCodeAt(q+2)]<<6|e[P.charCodeAt(q+3)],$[ie++]=D>>16&255,$[ie++]=D>>8&255,$[ie++]=D&255;return V===2&&(D=e[P.charCodeAt(q)]<<2|e[P.charCodeAt(q+1)]>>4,$[ie++]=D&255),V===1&&(D=e[P.charCodeAt(q)]<<10|e[P.charCodeAt(q+1)]<<4|e[P.charCodeAt(q+2)]>>2,$[ie++]=D>>8&255,$[ie++]=D&255),$}function x(P){return n[P>>18&63]+n[P>>12&63]+n[P>>6&63]+n[P&63]}function B(P,D,N){for(var W,V=[],$=D;$<N;$+=3)W=(P[$]<<16&16711680)+(P[$+1]<<8&65280)+(P[$+2]&255),V.push(x(W));return V.join("")}function k(P){for(var D,N=P.length,W=N%3,V=[],$=16383,ie=0,ne=N-W;ie<ne;ie+=$)V.push(B(P,ie,ie+$>ne?ne:ie+$));return W===1?(D=P[N-1],V.push(n[D>>2]+n[D<<4&63]+"==")):W===2&&(D=(P[N-2]<<8)+P[N-1],V.push(n[D>>10]+n[D>>4&63]+n[D<<2&63]+"=")),V.join("")}return hv}var D_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var X8;function EG(){return X8||(X8=1,D_.read=function(n,e,t,r,i){var s,l,o=i*8-r-1,p=(1<<o)-1,v=p>>1,x=-7,B=t?i-1:0,k=t?-1:1,P=n[e+B];for(B+=k,s=P&(1<<-x)-1,P>>=-x,x+=o;x>0;s=s*256+n[e+B],B+=k,x-=8);for(l=s&(1<<-x)-1,s>>=-x,x+=r;x>0;l=l*256+n[e+B],B+=k,x-=8);if(s===0)s=1-v;else{if(s===p)return l?NaN:(P?-1:1)*(1/0);l=l+Math.pow(2,r),s=s-v}return(P?-1:1)*l*Math.pow(2,s-r)},D_.write=function(n,e,t,r,i,s){var l,o,p,v=s*8-i-1,x=(1<<v)-1,B=x>>1,k=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=r?0:s-1,D=r?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=x):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+B>=1?e+=k/p:e+=k*Math.pow(2,1-B),e*p>=2&&(l++,p/=2),l+B>=x?(o=0,l=x):l+B>=1?(o=(e*p-1)*Math.pow(2,i),l=l+B):(o=e*Math.pow(2,B-1)*Math.pow(2,i),l=0));i>=8;n[t+P]=o&255,P+=D,o/=256,i-=8);for(l=l<<i|o,v+=i;v>0;n[t+P]=l&255,P+=D,l/=256,v-=8);n[t+P-D]|=N*128}),D_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var J8;function BG(){return J8||(J8=1,function(n){const e=SG(),t=EG(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=$,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const We=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(We,ce),We.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(We){if(We>i)throw new RangeError('The value "'+We+'" is invalid for option "size"');const ce=new Uint8Array(We);return Object.setPrototypeOf(ce,o.prototype),ce}function o(We,ce,ye){if(typeof We=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(We)}return p(We,ce,ye)}o.poolSize=8192;function p(We,ce,ye){if(typeof We=="string")return k(We,ce);if(ArrayBuffer.isView(We))return D(We);if(We==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof We);if(an(We,ArrayBuffer)||We&&an(We.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(an(We,SharedArrayBuffer)||We&&an(We.buffer,SharedArrayBuffer)))return N(We,ce,ye);if(typeof We=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const rt=We.valueOf&&We.valueOf();if(rt!=null&&rt!==We)return o.from(rt,ce,ye);const Et=W(We);if(Et)return Et;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof We[Symbol.toPrimitive]=="function")return o.from(We[Symbol.toPrimitive]("string"),ce,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof We)}o.from=function(We,ce,ye){return p(We,ce,ye)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function v(We){if(typeof We!="number")throw new TypeError('"size" argument must be of type number');if(We<0)throw new RangeError('The value "'+We+'" is invalid for option "size"')}function x(We,ce,ye){return v(We),We<=0?l(We):ce!==void 0?typeof ye=="string"?l(We).fill(ce,ye):l(We).fill(ce):l(We)}o.alloc=function(We,ce,ye){return x(We,ce,ye)};function B(We){return v(We),l(We<0?0:V(We)|0)}o.allocUnsafe=function(We){return B(We)},o.allocUnsafeSlow=function(We){return B(We)};function k(We,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!o.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);const ye=ie(We,ce)|0;let rt=l(ye);const Et=rt.write(We,ce);return Et!==ye&&(rt=rt.slice(0,Et)),rt}function P(We){const ce=We.length<0?0:V(We.length)|0,ye=l(ce);for(let rt=0;rt<ce;rt+=1)ye[rt]=We[rt]&255;return ye}function D(We){if(an(We,Uint8Array)){const ce=new Uint8Array(We);return N(ce.buffer,ce.byteOffset,ce.byteLength)}return P(We)}function N(We,ce,ye){if(ce<0||We.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(We.byteLength<ce+(ye||0))throw new RangeError('"length" is outside of buffer bounds');let rt;return ce===void 0&&ye===void 0?rt=new Uint8Array(We):ye===void 0?rt=new Uint8Array(We,ce):rt=new Uint8Array(We,ce,ye),Object.setPrototypeOf(rt,o.prototype),rt}function W(We){if(o.isBuffer(We)){const ce=V(We.length)|0,ye=l(ce);return ye.length===0||We.copy(ye,0,0,ce),ye}if(We.length!==void 0)return typeof We.length!="number"||Bn(We.length)?l(0):P(We);if(We.type==="Buffer"&&Array.isArray(We.data))return P(We.data)}function V(We){if(We>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return We|0}function $(We){return+We!=We&&(We=0),o.alloc(+We)}o.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==o.prototype},o.compare=function(ce,ye){if(an(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),an(ye,Uint8Array)&&(ye=o.from(ye,ye.offset,ye.byteLength)),!o.isBuffer(ce)||!o.isBuffer(ye))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===ye)return 0;let rt=ce.length,Et=ye.length;for(let Ht=0,Zt=Math.min(rt,Et);Ht<Zt;++Ht)if(ce[Ht]!==ye[Ht]){rt=ce[Ht],Et=ye[Ht];break}return rt<Et?-1:Et<rt?1:0},o.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ce,ye){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return o.alloc(0);let rt;if(ye===void 0)for(ye=0,rt=0;rt<ce.length;++rt)ye+=ce[rt].length;const Et=o.allocUnsafe(ye);let Ht=0;for(rt=0;rt<ce.length;++rt){let Zt=ce[rt];if(an(Zt,Uint8Array))Ht+Zt.length>Et.length?(o.isBuffer(Zt)||(Zt=o.from(Zt)),Zt.copy(Et,Ht)):Uint8Array.prototype.set.call(Et,Zt,Ht);else if(o.isBuffer(Zt))Zt.copy(Et,Ht);else throw new TypeError('"list" argument must be an Array of Buffers');Ht+=Zt.length}return Et};function ie(We,ce){if(o.isBuffer(We))return We.length;if(ArrayBuffer.isView(We)||an(We,ArrayBuffer))return We.byteLength;if(typeof We!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof We);const ye=We.length,rt=arguments.length>2&&arguments[2]===!0;if(!rt&&ye===0)return 0;let Et=!1;for(;;)switch(ce){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return _n(We).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye*2;case"hex":return ye>>>1;case"base64":return Xn(We).length;default:if(Et)return rt?-1:_n(We).length;ce=(""+ce).toLowerCase(),Et=!0}}o.byteLength=ie;function ne(We,ce,ye){let rt=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0,ce>>>=0,ye<=ce))return"";for(We||(We="utf8");;)switch(We){case"hex":return je(this,ce,ye);case"utf8":case"utf-8":return qe(this,ce,ye);case"ascii":return Je(this,ce,ye);case"latin1":case"binary":return Ke(this,ce,ye);case"base64":return pe(this,ce,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,ce,ye);default:if(rt)throw new TypeError("Unknown encoding: "+We);We=(We+"").toLowerCase(),rt=!0}}o.prototype._isBuffer=!0;function q(We,ce,ye){const rt=We[ce];We[ce]=We[ye],We[ye]=rt}o.prototype.swap16=function(){const ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ye=0;ye<ce;ye+=2)q(this,ye,ye+1);return this},o.prototype.swap32=function(){const ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ye=0;ye<ce;ye+=4)q(this,ye,ye+3),q(this,ye+1,ye+2);return this},o.prototype.swap64=function(){const ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ye=0;ye<ce;ye+=8)q(this,ye,ye+7),q(this,ye+1,ye+6),q(this,ye+2,ye+5),q(this,ye+3,ye+4);return this},o.prototype.toString=function(){const ce=this.length;return ce===0?"":arguments.length===0?qe(this,0,ce):ne.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ce){if(!o.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:o.compare(this,ce)===0},o.prototype.inspect=function(){let ce="";const ye=n.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,ye).replace(/(.{2})/g,"$1 ").trim(),this.length>ye&&(ce+=" ... "),"<Buffer "+ce+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(ce,ye,rt,Et,Ht){if(an(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),!o.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(ye===void 0&&(ye=0),rt===void 0&&(rt=ce?ce.length:0),Et===void 0&&(Et=0),Ht===void 0&&(Ht=this.length),ye<0||rt>ce.length||Et<0||Ht>this.length)throw new RangeError("out of range index");if(Et>=Ht&&ye>=rt)return 0;if(Et>=Ht)return-1;if(ye>=rt)return 1;if(ye>>>=0,rt>>>=0,Et>>>=0,Ht>>>=0,this===ce)return 0;let Zt=Ht-Et,Jn=rt-ye;const He=Math.min(Zt,Jn),ae=this.slice(Et,Ht),_e=ce.slice(ye,rt);for(let f=0;f<He;++f)if(ae[f]!==_e[f]){Zt=ae[f],Jn=_e[f];break}return Zt<Jn?-1:Jn<Zt?1:0};function te(We,ce,ye,rt,Et){if(We.length===0)return-1;if(typeof ye=="string"?(rt=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),ye=+ye,Bn(ye)&&(ye=Et?0:We.length-1),ye<0&&(ye=We.length+ye),ye>=We.length){if(Et)return-1;ye=We.length-1}else if(ye<0)if(Et)ye=0;else return-1;if(typeof ce=="string"&&(ce=o.from(ce,rt)),o.isBuffer(ce))return ce.length===0?-1:G(We,ce,ye,rt,Et);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?Et?Uint8Array.prototype.indexOf.call(We,ce,ye):Uint8Array.prototype.lastIndexOf.call(We,ce,ye):G(We,[ce],ye,rt,Et);throw new TypeError("val must be string, number or Buffer")}function G(We,ce,ye,rt,Et){let Ht=1,Zt=We.length,Jn=ce.length;if(rt!==void 0&&(rt=String(rt).toLowerCase(),rt==="ucs2"||rt==="ucs-2"||rt==="utf16le"||rt==="utf-16le")){if(We.length<2||ce.length<2)return-1;Ht=2,Zt/=2,Jn/=2,ye/=2}function He(_e,f){return Ht===1?_e[f]:_e.readUInt16BE(f*Ht)}let ae;if(Et){let _e=-1;for(ae=ye;ae<Zt;ae++)if(He(We,ae)===He(ce,_e===-1?0:ae-_e)){if(_e===-1&&(_e=ae),ae-_e+1===Jn)return _e*Ht}else _e!==-1&&(ae-=ae-_e),_e=-1}else for(ye+Jn>Zt&&(ye=Zt-Jn),ae=ye;ae>=0;ae--){let _e=!0;for(let f=0;f<Jn;f++)if(He(We,ae+f)!==He(ce,f)){_e=!1;break}if(_e)return ae}return-1}o.prototype.includes=function(ce,ye,rt){return this.indexOf(ce,ye,rt)!==-1},o.prototype.indexOf=function(ce,ye,rt){return te(this,ce,ye,rt,!0)},o.prototype.lastIndexOf=function(ce,ye,rt){return te(this,ce,ye,rt,!1)};function oe(We,ce,ye,rt){ye=Number(ye)||0;const Et=We.length-ye;rt?(rt=Number(rt),rt>Et&&(rt=Et)):rt=Et;const Ht=ce.length;rt>Ht/2&&(rt=Ht/2);let Zt;for(Zt=0;Zt<rt;++Zt){const Jn=parseInt(ce.substr(Zt*2,2),16);if(Bn(Jn))return Zt;We[ye+Zt]=Jn}return Zt}function fe(We,ce,ye,rt){return Fn(_n(ce,We.length-ye),We,ye,rt)}function he(We,ce,ye,rt){return Fn(pr(ce),We,ye,rt)}function Me(We,ce,ye,rt){return Fn(Xn(ce),We,ye,rt)}function me(We,ce,ye,rt){return Fn(nn(ce,We.length-ye),We,ye,rt)}o.prototype.write=function(ce,ye,rt,Et){if(ye===void 0)Et="utf8",rt=this.length,ye=0;else if(rt===void 0&&typeof ye=="string")Et=ye,rt=this.length,ye=0;else if(isFinite(ye))ye=ye>>>0,isFinite(rt)?(rt=rt>>>0,Et===void 0&&(Et="utf8")):(Et=rt,rt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ht=this.length-ye;if((rt===void 0||rt>Ht)&&(rt=Ht),ce.length>0&&(rt<0||ye<0)||ye>this.length)throw new RangeError("Attempt to write outside buffer bounds");Et||(Et="utf8");let Zt=!1;for(;;)switch(Et){case"hex":return oe(this,ce,ye,rt);case"utf8":case"utf-8":return fe(this,ce,ye,rt);case"ascii":case"latin1":case"binary":return he(this,ce,ye,rt);case"base64":return Me(this,ce,ye,rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,ce,ye,rt);default:if(Zt)throw new TypeError("Unknown encoding: "+Et);Et=(""+Et).toLowerCase(),Zt=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function pe(We,ce,ye){return ce===0&&ye===We.length?e.fromByteArray(We):e.fromByteArray(We.slice(ce,ye))}function qe(We,ce,ye){ye=Math.min(We.length,ye);const rt=[];let Et=ce;for(;Et<ye;){const Ht=We[Et];let Zt=null,Jn=Ht>239?4:Ht>223?3:Ht>191?2:1;if(Et+Jn<=ye){let He,ae,_e,f;switch(Jn){case 1:Ht<128&&(Zt=Ht);break;case 2:He=We[Et+1],(He&192)===128&&(f=(Ht&31)<<6|He&63,f>127&&(Zt=f));break;case 3:He=We[Et+1],ae=We[Et+2],(He&192)===128&&(ae&192)===128&&(f=(Ht&15)<<12|(He&63)<<6|ae&63,f>2047&&(f<55296||f>57343)&&(Zt=f));break;case 4:He=We[Et+1],ae=We[Et+2],_e=We[Et+3],(He&192)===128&&(ae&192)===128&&(_e&192)===128&&(f=(Ht&15)<<18|(He&63)<<12|(ae&63)<<6|_e&63,f>65535&&f<1114112&&(Zt=f))}}Zt===null?(Zt=65533,Jn=1):Zt>65535&&(Zt-=65536,rt.push(Zt>>>10&1023|55296),Zt=56320|Zt&1023),rt.push(Zt),Et+=Jn}return vt(rt)}const Se=4096;function vt(We){const ce=We.length;if(ce<=Se)return String.fromCharCode.apply(String,We);let ye="",rt=0;for(;rt<ce;)ye+=String.fromCharCode.apply(String,We.slice(rt,rt+=Se));return ye}function Je(We,ce,ye){let rt="";ye=Math.min(We.length,ye);for(let Et=ce;Et<ye;++Et)rt+=String.fromCharCode(We[Et]&127);return rt}function Ke(We,ce,ye){let rt="";ye=Math.min(We.length,ye);for(let Et=ce;Et<ye;++Et)rt+=String.fromCharCode(We[Et]);return rt}function je(We,ce,ye){const rt=We.length;(!ce||ce<0)&&(ce=0),(!ye||ye<0||ye>rt)&&(ye=rt);let Et="";for(let Ht=ce;Ht<ye;++Ht)Et+=Cr[We[Ht]];return Et}function Pe(We,ce,ye){const rt=We.slice(ce,ye);let Et="";for(let Ht=0;Ht<rt.length-1;Ht+=2)Et+=String.fromCharCode(rt[Ht]+rt[Ht+1]*256);return Et}o.prototype.slice=function(ce,ye){const rt=this.length;ce=~~ce,ye=ye===void 0?rt:~~ye,ce<0?(ce+=rt,ce<0&&(ce=0)):ce>rt&&(ce=rt),ye<0?(ye+=rt,ye<0&&(ye=0)):ye>rt&&(ye=rt),ye<ce&&(ye=ce);const Et=this.subarray(ce,ye);return Object.setPrototypeOf(Et,o.prototype),Et};function Le(We,ce,ye){if(We%1!==0||We<0)throw new RangeError("offset is not uint");if(We+ce>ye)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ce,ye,rt){ce=ce>>>0,ye=ye>>>0,rt||Le(ce,ye,this.length);let Et=this[ce],Ht=1,Zt=0;for(;++Zt<ye&&(Ht*=256);)Et+=this[ce+Zt]*Ht;return Et},o.prototype.readUintBE=o.prototype.readUIntBE=function(ce,ye,rt){ce=ce>>>0,ye=ye>>>0,rt||Le(ce,ye,this.length);let Et=this[ce+--ye],Ht=1;for(;ye>0&&(Ht*=256);)Et+=this[ce+--ye]*Ht;return Et},o.prototype.readUint8=o.prototype.readUInt8=function(ce,ye){return ce=ce>>>0,ye||Le(ce,1,this.length),this[ce]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,2,this.length),this[ce]|this[ce+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,2,this.length),this[ce]<<8|this[ce+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},o.prototype.readBigUInt64LE=lr(function(ce){ce=ce>>>0,gt(ce,"offset");const ye=this[ce],rt=this[ce+7];(ye===void 0||rt===void 0)&&Kt(ce,this.length-8);const Et=ye+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24,Ht=this[++ce]+this[++ce]*2**8+this[++ce]*2**16+rt*2**24;return BigInt(Et)+(BigInt(Ht)<<BigInt(32))}),o.prototype.readBigUInt64BE=lr(function(ce){ce=ce>>>0,gt(ce,"offset");const ye=this[ce],rt=this[ce+7];(ye===void 0||rt===void 0)&&Kt(ce,this.length-8);const Et=ye*2**24+this[++ce]*2**16+this[++ce]*2**8+this[++ce],Ht=this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+rt;return(BigInt(Et)<<BigInt(32))+BigInt(Ht)}),o.prototype.readIntLE=function(ce,ye,rt){ce=ce>>>0,ye=ye>>>0,rt||Le(ce,ye,this.length);let Et=this[ce],Ht=1,Zt=0;for(;++Zt<ye&&(Ht*=256);)Et+=this[ce+Zt]*Ht;return Ht*=128,Et>=Ht&&(Et-=Math.pow(2,8*ye)),Et},o.prototype.readIntBE=function(ce,ye,rt){ce=ce>>>0,ye=ye>>>0,rt||Le(ce,ye,this.length);let Et=ye,Ht=1,Zt=this[ce+--Et];for(;Et>0&&(Ht*=256);)Zt+=this[ce+--Et]*Ht;return Ht*=128,Zt>=Ht&&(Zt-=Math.pow(2,8*ye)),Zt},o.prototype.readInt8=function(ce,ye){return ce=ce>>>0,ye||Le(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},o.prototype.readInt16LE=function(ce,ye){ce=ce>>>0,ye||Le(ce,2,this.length);const rt=this[ce]|this[ce+1]<<8;return rt&32768?rt|4294901760:rt},o.prototype.readInt16BE=function(ce,ye){ce=ce>>>0,ye||Le(ce,2,this.length);const rt=this[ce+1]|this[ce]<<8;return rt&32768?rt|4294901760:rt},o.prototype.readInt32LE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},o.prototype.readInt32BE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},o.prototype.readBigInt64LE=lr(function(ce){ce=ce>>>0,gt(ce,"offset");const ye=this[ce],rt=this[ce+7];(ye===void 0||rt===void 0)&&Kt(ce,this.length-8);const Et=this[ce+4]+this[ce+5]*2**8+this[ce+6]*2**16+(rt<<24);return(BigInt(Et)<<BigInt(32))+BigInt(ye+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24)}),o.prototype.readBigInt64BE=lr(function(ce){ce=ce>>>0,gt(ce,"offset");const ye=this[ce],rt=this[ce+7];(ye===void 0||rt===void 0)&&Kt(ce,this.length-8);const Et=(ye<<24)+this[++ce]*2**16+this[++ce]*2**8+this[++ce];return(BigInt(Et)<<BigInt(32))+BigInt(this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+rt)}),o.prototype.readFloatLE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,4,this.length),t.read(this,ce,!0,23,4)},o.prototype.readFloatBE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,4,this.length),t.read(this,ce,!1,23,4)},o.prototype.readDoubleLE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,8,this.length),t.read(this,ce,!0,52,8)},o.prototype.readDoubleBE=function(ce,ye){return ce=ce>>>0,ye||Le(ce,8,this.length),t.read(this,ce,!1,52,8)};function Xe(We,ce,ye,rt,Et,Ht){if(!o.isBuffer(We))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>Et||ce<Ht)throw new RangeError('"value" argument is out of bounds');if(ye+rt>We.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ce,ye,rt,Et){if(ce=+ce,ye=ye>>>0,rt=rt>>>0,!Et){const Jn=Math.pow(2,8*rt)-1;Xe(this,ce,ye,rt,Jn,0)}let Ht=1,Zt=0;for(this[ye]=ce&255;++Zt<rt&&(Ht*=256);)this[ye+Zt]=ce/Ht&255;return ye+rt},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ce,ye,rt,Et){if(ce=+ce,ye=ye>>>0,rt=rt>>>0,!Et){const Jn=Math.pow(2,8*rt)-1;Xe(this,ce,ye,rt,Jn,0)}let Ht=rt-1,Zt=1;for(this[ye+Ht]=ce&255;--Ht>=0&&(Zt*=256);)this[ye+Ht]=ce/Zt&255;return ye+rt},o.prototype.writeUint8=o.prototype.writeUInt8=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,1,255,0),this[ye]=ce&255,ye+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,2,65535,0),this[ye]=ce&255,this[ye+1]=ce>>>8,ye+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,2,65535,0),this[ye]=ce>>>8,this[ye+1]=ce&255,ye+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,4,4294967295,0),this[ye+3]=ce>>>24,this[ye+2]=ce>>>16,this[ye+1]=ce>>>8,this[ye]=ce&255,ye+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,4,4294967295,0),this[ye]=ce>>>24,this[ye+1]=ce>>>16,this[ye+2]=ce>>>8,this[ye+3]=ce&255,ye+4};function Ct(We,ce,ye,rt,Et){_t(ce,rt,Et,We,ye,7);let Ht=Number(ce&BigInt(4294967295));We[ye++]=Ht,Ht=Ht>>8,We[ye++]=Ht,Ht=Ht>>8,We[ye++]=Ht,Ht=Ht>>8,We[ye++]=Ht;let Zt=Number(ce>>BigInt(32)&BigInt(4294967295));return We[ye++]=Zt,Zt=Zt>>8,We[ye++]=Zt,Zt=Zt>>8,We[ye++]=Zt,Zt=Zt>>8,We[ye++]=Zt,ye}function Gt(We,ce,ye,rt,Et){_t(ce,rt,Et,We,ye,7);let Ht=Number(ce&BigInt(4294967295));We[ye+7]=Ht,Ht=Ht>>8,We[ye+6]=Ht,Ht=Ht>>8,We[ye+5]=Ht,Ht=Ht>>8,We[ye+4]=Ht;let Zt=Number(ce>>BigInt(32)&BigInt(4294967295));return We[ye+3]=Zt,Zt=Zt>>8,We[ye+2]=Zt,Zt=Zt>>8,We[ye+1]=Zt,Zt=Zt>>8,We[ye]=Zt,ye+8}o.prototype.writeBigUInt64LE=lr(function(ce,ye=0){return Ct(this,ce,ye,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=lr(function(ce,ye=0){return Gt(this,ce,ye,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ce,ye,rt,Et){if(ce=+ce,ye=ye>>>0,!Et){const He=Math.pow(2,8*rt-1);Xe(this,ce,ye,rt,He-1,-He)}let Ht=0,Zt=1,Jn=0;for(this[ye]=ce&255;++Ht<rt&&(Zt*=256);)ce<0&&Jn===0&&this[ye+Ht-1]!==0&&(Jn=1),this[ye+Ht]=(ce/Zt>>0)-Jn&255;return ye+rt},o.prototype.writeIntBE=function(ce,ye,rt,Et){if(ce=+ce,ye=ye>>>0,!Et){const He=Math.pow(2,8*rt-1);Xe(this,ce,ye,rt,He-1,-He)}let Ht=rt-1,Zt=1,Jn=0;for(this[ye+Ht]=ce&255;--Ht>=0&&(Zt*=256);)ce<0&&Jn===0&&this[ye+Ht+1]!==0&&(Jn=1),this[ye+Ht]=(ce/Zt>>0)-Jn&255;return ye+rt},o.prototype.writeInt8=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,1,127,-128),ce<0&&(ce=255+ce+1),this[ye]=ce&255,ye+1},o.prototype.writeInt16LE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,2,32767,-32768),this[ye]=ce&255,this[ye+1]=ce>>>8,ye+2},o.prototype.writeInt16BE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,2,32767,-32768),this[ye]=ce>>>8,this[ye+1]=ce&255,ye+2},o.prototype.writeInt32LE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,4,2147483647,-2147483648),this[ye]=ce&255,this[ye+1]=ce>>>8,this[ye+2]=ce>>>16,this[ye+3]=ce>>>24,ye+4},o.prototype.writeInt32BE=function(ce,ye,rt){return ce=+ce,ye=ye>>>0,rt||Xe(this,ce,ye,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[ye]=ce>>>24,this[ye+1]=ce>>>16,this[ye+2]=ce>>>8,this[ye+3]=ce&255,ye+4},o.prototype.writeBigInt64LE=lr(function(ce,ye=0){return Ct(this,ce,ye,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=lr(function(ce,ye=0){return Gt(this,ce,ye,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mt(We,ce,ye,rt,Et,Ht){if(ye+rt>We.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function Ut(We,ce,ye,rt,Et){return ce=+ce,ye=ye>>>0,Et||mt(We,ce,ye,4),t.write(We,ce,ye,rt,23,4),ye+4}o.prototype.writeFloatLE=function(ce,ye,rt){return Ut(this,ce,ye,!0,rt)},o.prototype.writeFloatBE=function(ce,ye,rt){return Ut(this,ce,ye,!1,rt)};function kt(We,ce,ye,rt,Et){return ce=+ce,ye=ye>>>0,Et||mt(We,ce,ye,8),t.write(We,ce,ye,rt,52,8),ye+8}o.prototype.writeDoubleLE=function(ce,ye,rt){return kt(this,ce,ye,!0,rt)},o.prototype.writeDoubleBE=function(ce,ye,rt){return kt(this,ce,ye,!1,rt)},o.prototype.copy=function(ce,ye,rt,Et){if(!o.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(rt||(rt=0),!Et&&Et!==0&&(Et=this.length),ye>=ce.length&&(ye=ce.length),ye||(ye=0),Et>0&&Et<rt&&(Et=rt),Et===rt||ce.length===0||this.length===0)return 0;if(ye<0)throw new RangeError("targetStart out of bounds");if(rt<0||rt>=this.length)throw new RangeError("Index out of range");if(Et<0)throw new RangeError("sourceEnd out of bounds");Et>this.length&&(Et=this.length),ce.length-ye<Et-rt&&(Et=ce.length-ye+rt);const Ht=Et-rt;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ye,rt,Et):Uint8Array.prototype.set.call(ce,this.subarray(rt,Et),ye),Ht},o.prototype.fill=function(ce,ye,rt,Et){if(typeof ce=="string"){if(typeof ye=="string"?(Et=ye,ye=0,rt=this.length):typeof rt=="string"&&(Et=rt,rt=this.length),Et!==void 0&&typeof Et!="string")throw new TypeError("encoding must be a string");if(typeof Et=="string"&&!o.isEncoding(Et))throw new TypeError("Unknown encoding: "+Et);if(ce.length===1){const Zt=ce.charCodeAt(0);(Et==="utf8"&&Zt<128||Et==="latin1")&&(ce=Zt)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(ye<0||this.length<ye||this.length<rt)throw new RangeError("Out of range index");if(rt<=ye)return this;ye=ye>>>0,rt=rt===void 0?this.length:rt>>>0,ce||(ce=0);let Ht;if(typeof ce=="number")for(Ht=ye;Ht<rt;++Ht)this[Ht]=ce;else{const Zt=o.isBuffer(ce)?ce:o.from(ce,Et),Jn=Zt.length;if(Jn===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ht=0;Ht<rt-ye;++Ht)this[Ht+ye]=Zt[Ht%Jn]}return this};const Te={};function Re(We,ce,ye){Te[We]=class extends ye{constructor(){super(),Object.defineProperty(this,"message",{value:ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${We}]`,this.stack,delete this.name}get code(){return We}set code(Et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Et,writable:!0})}toString(){return`${this.name} [${We}]: ${this.message}`}}}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(We){return We?`${We} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(We,ce){return`The "${We}" argument must be of type number. Received type ${typeof ce}`},TypeError),Re("ERR_OUT_OF_RANGE",function(We,ce,ye){let rt=`The value of "${We}" is out of range.`,Et=ye;return Number.isInteger(ye)&&Math.abs(ye)>2**32?Et=Ue(String(ye)):typeof ye=="bigint"&&(Et=String(ye),(ye>BigInt(2)**BigInt(32)||ye<-(BigInt(2)**BigInt(32)))&&(Et=Ue(Et)),Et+="n"),rt+=` It must be ${ce}. Received ${Et}`,rt},RangeError);function Ue(We){let ce="",ye=We.length;const rt=We[0]==="-"?1:0;for(;ye>=rt+4;ye-=3)ce=`_${We.slice(ye-3,ye)}${ce}`;return`${We.slice(0,ye)}${ce}`}function nt(We,ce,ye){gt(ce,"offset"),(We[ce]===void 0||We[ce+ye]===void 0)&&Kt(ce,We.length-(ye+1))}function _t(We,ce,ye,rt,Et,Ht){if(We>ye||We<ce){const Zt=typeof ce=="bigint"?"n":"";let Jn;throw ce===0||ce===BigInt(0)?Jn=`>= 0${Zt} and < 2${Zt} ** ${(Ht+1)*8}${Zt}`:Jn=`>= -(2${Zt} ** ${(Ht+1)*8-1}${Zt}) and < 2 ** ${(Ht+1)*8-1}${Zt}`,new Te.ERR_OUT_OF_RANGE("value",Jn,We)}nt(rt,Et,Ht)}function gt(We,ce){if(typeof We!="number")throw new Te.ERR_INVALID_ARG_TYPE(ce,"number",We)}function Kt(We,ce,ye){throw Math.floor(We)!==We?(gt(We,ye),new Te.ERR_OUT_OF_RANGE("offset","an integer",We)):ce<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ce}`,We)}const $t=/[^+/0-9A-Za-z-_]/g;function Rt(We){if(We=We.split("=")[0],We=We.trim().replace($t,""),We.length<2)return"";for(;We.length%4!==0;)We=We+"=";return We}function _n(We,ce){ce=ce||1/0;let ye;const rt=We.length;let Et=null;const Ht=[];for(let Zt=0;Zt<rt;++Zt){if(ye=We.charCodeAt(Zt),ye>55295&&ye<57344){if(!Et){if(ye>56319){(ce-=3)>-1&&Ht.push(239,191,189);continue}else if(Zt+1===rt){(ce-=3)>-1&&Ht.push(239,191,189);continue}Et=ye;continue}if(ye<56320){(ce-=3)>-1&&Ht.push(239,191,189),Et=ye;continue}ye=(Et-55296<<10|ye-56320)+65536}else Et&&(ce-=3)>-1&&Ht.push(239,191,189);if(Et=null,ye<128){if((ce-=1)<0)break;Ht.push(ye)}else if(ye<2048){if((ce-=2)<0)break;Ht.push(ye>>6|192,ye&63|128)}else if(ye<65536){if((ce-=3)<0)break;Ht.push(ye>>12|224,ye>>6&63|128,ye&63|128)}else if(ye<1114112){if((ce-=4)<0)break;Ht.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,ye&63|128)}else throw new Error("Invalid code point")}return Ht}function pr(We){const ce=[];for(let ye=0;ye<We.length;++ye)ce.push(We.charCodeAt(ye)&255);return ce}function nn(We,ce){let ye,rt,Et;const Ht=[];for(let Zt=0;Zt<We.length&&!((ce-=2)<0);++Zt)ye=We.charCodeAt(Zt),rt=ye>>8,Et=ye%256,Ht.push(Et),Ht.push(rt);return Ht}function Xn(We){return e.toByteArray(Rt(We))}function Fn(We,ce,ye,rt){let Et;for(Et=0;Et<rt&&!(Et+ye>=ce.length||Et>=We.length);++Et)ce[Et+ye]=We[Et];return Et}function an(We,ce){return We instanceof ce||We!=null&&We.constructor!=null&&We.constructor.name!=null&&We.constructor.name===ce.name}function Bn(We){return We!==We}const Cr=function(){const We="0123456789abcdef",ce=new Array(256);for(let ye=0;ye<16;++ye){const rt=ye*16;for(let Et=0;Et<16;++Et)ce[rt+Et]=We[ye]+We[Et]}return ce}();function lr(We){return typeof BigInt>"u"?hr:We}function hr(){throw new Error("BigInt not supported")}}(F3)),F3}var OG=BG();const IG=dl(OG);var L3,e7;function TG(){if(e7)return L3;e7=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/[\\^$.*+?()[\]{}|]/g,x=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,k=typeof window=="object"&&window&&window.Object===Object&&window,P=typeof self=="object"&&self&&self.Object===Object&&self,D=k||P||Function("return this")();function N(ae,_e){return ae==null?void 0:ae[_e]}function W(ae){var _e=!1;if(ae!=null&&typeof ae.toString!="function")try{_e=!!(ae+"")}catch{}return _e}var V=Array.prototype,$=Function.prototype,ie=Object.prototype,ne=D["__core-js_shared__"],q=function(){var ae=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),te=$.toString,G=ie.hasOwnProperty,oe=ie.toString,fe=RegExp("^"+te.call(G).replace(v,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=D.Symbol,Me=V.splice,me=Xn(D,"Map"),pe=Xn(Object,"create"),qe=he?he.prototype:void 0,Se=qe?qe.toString:void 0;function vt(ae){var _e=-1,f=ae?ae.length:0;for(this.clear();++_e<f;){var Qe=ae[_e];this.set(Qe[0],Qe[1])}}function Je(){this.__data__=pe?pe(null):{}}function Ke(ae){return this.has(ae)&&delete this.__data__[ae]}function je(ae){var _e=this.__data__;if(pe){var f=_e[ae];return f===e?void 0:f}return G.call(_e,ae)?_e[ae]:void 0}function Pe(ae){var _e=this.__data__;return pe?_e[ae]!==void 0:G.call(_e,ae)}function Le(ae,_e){var f=this.__data__;return f[ae]=pe&&_e===void 0?e:_e,this}vt.prototype.clear=Je,vt.prototype.delete=Ke,vt.prototype.get=je,vt.prototype.has=Pe,vt.prototype.set=Le;function Xe(ae){var _e=-1,f=ae?ae.length:0;for(this.clear();++_e<f;){var Qe=ae[_e];this.set(Qe[0],Qe[1])}}function Ct(){this.__data__=[]}function Gt(ae){var _e=this.__data__,f=Kt(_e,ae);if(f<0)return!1;var Qe=_e.length-1;return f==Qe?_e.pop():Me.call(_e,f,1),!0}function mt(ae){var _e=this.__data__,f=Kt(_e,ae);return f<0?void 0:_e[f][1]}function Ut(ae){return Kt(this.__data__,ae)>-1}function kt(ae,_e){var f=this.__data__,Qe=Kt(f,ae);return Qe<0?f.push([ae,_e]):f[Qe][1]=_e,this}Xe.prototype.clear=Ct,Xe.prototype.delete=Gt,Xe.prototype.get=mt,Xe.prototype.has=Ut,Xe.prototype.set=kt;function Te(ae){var _e=-1,f=ae?ae.length:0;for(this.clear();++_e<f;){var Qe=ae[_e];this.set(Qe[0],Qe[1])}}function Re(){this.__data__={hash:new vt,map:new(me||Xe),string:new vt}}function Ue(ae){return nn(this,ae).delete(ae)}function nt(ae){return nn(this,ae).get(ae)}function _t(ae){return nn(this,ae).has(ae)}function gt(ae,_e){return nn(this,ae).set(ae,_e),this}Te.prototype.clear=Re,Te.prototype.delete=Ue,Te.prototype.get=nt,Te.prototype.has=_t,Te.prototype.set=gt;function Kt(ae,_e){for(var f=ae.length;f--;)if(ce(ae[f][0],_e))return f;return-1}function $t(ae,_e){_e=Fn(_e,ae)?[_e]:pr(_e);for(var f=0,Qe=_e.length;ae!=null&&f<Qe;)ae=ae[lr(_e[f++])];return f&&f==Qe?ae:void 0}function Rt(ae){if(!Et(ae)||Bn(ae))return!1;var _e=rt(ae)||W(ae)?fe:B;return _e.test(hr(ae))}function _n(ae){if(typeof ae=="string")return ae;if(Zt(ae))return Se?Se.call(ae):"";var _e=ae+"";return _e=="0"&&1/ae==-1/0?"-0":_e}function pr(ae){return ye(ae)?ae:Cr(ae)}function nn(ae,_e){var f=ae.__data__;return an(_e)?f[typeof _e=="string"?"string":"hash"]:f.map}function Xn(ae,_e){var f=N(ae,_e);return Rt(f)?f:void 0}function Fn(ae,_e){if(ye(ae))return!1;var f=typeof ae;return f=="number"||f=="symbol"||f=="boolean"||ae==null||Zt(ae)?!0:l.test(ae)||!s.test(ae)||_e!=null&&ae in Object(_e)}function an(ae){var _e=typeof ae;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ae!=="__proto__":ae===null}function Bn(ae){return!!q&&q in ae}var Cr=We(function(ae){ae=Jn(ae);var _e=[];return o.test(ae)&&_e.push(""),ae.replace(p,function(f,Qe,Ee,it){_e.push(Ee?it.replace(x,"$1"):Qe||f)}),_e});function lr(ae){if(typeof ae=="string"||Zt(ae))return ae;var _e=ae+"";return _e=="0"&&1/ae==-1/0?"-0":_e}function hr(ae){if(ae!=null){try{return te.call(ae)}catch{}try{return ae+""}catch{}}return""}function We(ae,_e){if(typeof ae!="function"||_e&&typeof _e!="function")throw new TypeError(n);var f=function(){var Qe=arguments,Ee=_e?_e.apply(this,Qe):Qe[0],it=f.cache;if(it.has(Ee))return it.get(Ee);var ut=ae.apply(this,Qe);return f.cache=it.set(Ee,ut),ut};return f.cache=new(We.Cache||Te),f}We.Cache=Te;function ce(ae,_e){return ae===_e||ae!==ae&&_e!==_e}var ye=Array.isArray;function rt(ae){var _e=Et(ae)?oe.call(ae):"";return _e==t||_e==r}function Et(ae){var _e=typeof ae;return!!ae&&(_e=="object"||_e=="function")}function Ht(ae){return!!ae&&typeof ae=="object"}function Zt(ae){return typeof ae=="symbol"||Ht(ae)&&oe.call(ae)==i}function Jn(ae){return ae==null?"":_n(ae)}function He(ae,_e,f){var Qe=ae==null?void 0:$t(ae,_e);return Qe===void 0?f:Qe}return L3=He,L3}var kG=TG();const PG=dl(kG);var Sv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var KG=Sv.exports,t7;function RG(){return t7||(t7=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",v=500,x="__lodash_placeholder__",B=1,k=2,P=4,D=1,N=2,W=1,V=2,$=4,ie=8,ne=16,q=32,te=64,G=128,oe=256,fe=512,he=30,Me="...",me=800,pe=16,qe=1,Se=2,vt=3,Je=1/0,Ke=9007199254740991,je=17976931348623157e292,Pe=NaN,Le=4294967295,Xe=Le-1,Ct=Le>>>1,Gt=[["ary",G],["bind",W],["bindKey",V],["curry",ie],["curryRight",ne],["flip",fe],["partial",q],["partialRight",te],["rearg",oe]],mt="[object Arguments]",Ut="[object Array]",kt="[object AsyncFunction]",Te="[object Boolean]",Re="[object Date]",Ue="[object DOMException]",nt="[object Error]",_t="[object Function]",gt="[object GeneratorFunction]",Kt="[object Map]",$t="[object Number]",Rt="[object Null]",_n="[object Object]",pr="[object Promise]",nn="[object Proxy]",Xn="[object RegExp]",Fn="[object Set]",an="[object String]",Bn="[object Symbol]",Cr="[object Undefined]",lr="[object WeakMap]",hr="[object WeakSet]",We="[object ArrayBuffer]",ce="[object DataView]",ye="[object Float32Array]",rt="[object Float64Array]",Et="[object Int8Array]",Ht="[object Int16Array]",Zt="[object Int32Array]",Jn="[object Uint8Array]",He="[object Uint8ClampedArray]",ae="[object Uint16Array]",_e="[object Uint32Array]",f=/\b__p \+= '';/g,Qe=/\b(__p \+=) '' \+/g,Ee=/(__e\(.*?\)|\b__t\)) \+\n'';/g,it=/&(?:amp|lt|gt|quot|#39);/g,ut=/[&<>"']/g,at=RegExp(it.source),zt=RegExp(ut.source),Qt=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dn=/^\w*$/,mr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tr=/[\\^$.*+?()[\]{}|]/g,Jt=RegExp(Tr.source),br=/^\s+/,Gr=/\s/,Si=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fr=/\{\n\/\* \[wrapped with (.+)\] \*/,yn=/,? & /,ar=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pr=/[()=,{}\[\]\/\s]/,Cs=/\\(\\)?/g,Ao=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ui=/\w*$/,$r=/^[-+]0x[0-9a-f]+$/i,_s=/^0b[01]+$/i,fs=/^\[object .+?Constructor\]$/,Ja=/^0o[0-7]+$/i,sa=/^(?:0|[1-9]\d*)$/,Wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zo=/($^)/,So=/['\n\r\u2028\u2029\\]/g,pi="\\ud800-\\udfff",tA="\\u0300-\\u036f",_l="\\ufe20-\\ufe2f",Ni="\\u20d0-\\u20ff",wr=tA+_l+Ni,Fa="\\u2700-\\u27bf",bs="a-z\\xdf-\\xf6\\xf8-\\xff",Rs="\\xac\\xb1\\xd7\\xf7",Ve="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xt="\\u2000-\\u206f",xn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yn="A-Z\\xc0-\\xd6\\xd8-\\xde",fn="\\ufe0e\\ufe0f",dr=Rs+Ve+xt+xn,Wi="[']",Co="["+pi+"]",ls="["+dr+"]",pa="["+wr+"]",nA="\\d+",Ci="["+Fa+"]",ZA="["+bs+"]",rA="[^"+pi+dr+nA+Fa+bs+Yn+"]",ma="\\ud83c[\\udffb-\\udfff]",Ea="(?:"+pa+"|"+ma+")",_c="[^"+pi+"]",Ws="(?:\\ud83c[\\udde6-\\uddff]){2}",di="[\\ud800-\\udbff][\\udc00-\\udfff]",jr="["+Yn+"]",Ii="\\u200d",bl="(?:"+ZA+"|"+rA+")",$o="(?:"+jr+"|"+rA+")",aa="(?:"+Wi+"(?:d|ll|m|re|s|t|ve))?",js="(?:"+Wi+"(?:D|LL|M|RE|S|T|VE))?",jo=Ea+"?",iA="["+fn+"]?",ns="(?:"+Ii+"(?:"+[_c,Ws,di].join("|")+")"+iA+jo+")*",Qi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_o="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",La=iA+jo+ns,Ba="(?:"+[Ci,Ws,di].join("|")+")"+La,uo="(?:"+[_c+pa+"?",pa,Ws,di,Co].join("|")+")",Gs=RegExp(Wi,"g"),oA=RegExp(pa,"g"),el=RegExp(ma+"(?="+ma+")|"+uo+La,"g"),Oa=RegExp([jr+"?"+ZA+"+"+aa+"(?="+[ls,jr,"$"].join("|")+")",$o+"+"+js+"(?="+[ls,jr+bl,"$"].join("|")+")",jr+"?"+bl+"+"+aa,jr+"+"+js,_o,Qi,nA,Ba].join("|"),"g"),wA=RegExp("["+Ii+pi+wr+fn+"]"),wi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,XA=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eo=-1,Sr={};Sr[ye]=Sr[rt]=Sr[Et]=Sr[Ht]=Sr[Zt]=Sr[Jn]=Sr[He]=Sr[ae]=Sr[_e]=!0,Sr[mt]=Sr[Ut]=Sr[We]=Sr[Te]=Sr[ce]=Sr[Re]=Sr[nt]=Sr[_t]=Sr[Kt]=Sr[$t]=Sr[_n]=Sr[Xn]=Sr[Fn]=Sr[an]=Sr[lr]=!1;var no={};no[mt]=no[Ut]=no[We]=no[ce]=no[Te]=no[Re]=no[ye]=no[rt]=no[Et]=no[Ht]=no[Zt]=no[Kt]=no[$t]=no[_n]=no[Xn]=no[Fn]=no[an]=no[Bn]=no[Jn]=no[He]=no[ae]=no[_e]=!0,no[nt]=no[_t]=no[lr]=!1;var J={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Br=parseFloat,Gn=parseInt,Zr=typeof window=="object"&&window&&window.Object===Object&&window,oi=typeof self=="object"&&self&&self.Object===Object&&self,Or=Zr||oi||Function("return this")(),ni=e&&!e.nodeType&&e,$i=ni&&!0&&n&&!n.nodeType&&n,Eo=$i&&$i.exports===ni,si=Eo&&Zr.process,_i=function(){try{var en=$i&&$i.require&&$i.require("util").types;return en||si&&si.binding&&si.binding("util")}catch{}}(),Ri=_i&&_i.isArrayBuffer,Yi=_i&&_i.isDate,mi=_i&&_i.isMap,Ds=_i&&_i.isRegExp,Ua=_i&&_i.isSet,SA=_i&&_i.isTypedArray;function As(en,Tn,un){switch(un.length){case 0:return en.call(Tn);case 1:return en.call(Tn,un[0]);case 2:return en.call(Tn,un[0],un[1]);case 3:return en.call(Tn,un[0],un[1],un[2])}return en.apply(Tn,un)}function Gh(en,Tn,un,Kr){for(var Ei=-1,po=en==null?0:en.length;++Ei<po;){var Zo=en[Ei];Tn(Kr,Zo,un(Zo),en)}return Kr}function fl(en,Tn){for(var un=-1,Kr=en==null?0:en.length;++un<Kr&&Tn(en[un],un,en)!==!1;);return en}function vd(en,Tn){for(var un=en==null?0:en.length;un--&&Tn(en[un],un,en)!==!1;);return en}function mh(en,Tn){for(var un=-1,Kr=en==null?0:en.length;++un<Kr;)if(!Tn(en[un],un,en))return!1;return!0}function Nu(en,Tn){for(var un=-1,Kr=en==null?0:en.length,Ei=0,po=[];++un<Kr;){var Zo=en[un];Tn(Zo,un,en)&&(po[Ei++]=Zo)}return po}function EA(en,Tn){var un=en==null?0:en.length;return!!un&&xs(en,Tn,0)>-1}function gh(en,Tn,un){for(var Kr=-1,Ei=en==null?0:en.length;++Kr<Ei;)if(un(Tn,en[Kr]))return!0;return!1}function rs(en,Tn){for(var un=-1,Kr=en==null?0:en.length,Ei=Array(Kr);++un<Kr;)Ei[un]=Tn(en[un],un,en);return Ei}function yu(en,Tn){for(var un=-1,Kr=Tn.length,Ei=en.length;++un<Kr;)en[Ei+un]=Tn[un];return en}function yh(en,Tn,un,Kr){var Ei=-1,po=en==null?0:en.length;for(Kr&&po&&(un=en[++Ei]);++Ei<po;)un=Tn(un,en[Ei],Ei,en);return un}function tf(en,Tn,un,Kr){var Ei=en==null?0:en.length;for(Kr&&Ei&&(un=en[--Ei]);Ei--;)un=Tn(un,en[Ei],Ei,en);return un}function sA(en,Tn){for(var un=-1,Kr=en==null?0:en.length;++un<Kr;)if(Tn(en[un],un,en))return!0;return!1}var Qh=rf("length");function nf(en){return en.split("")}function Vc(en){return en.match(ar)||[]}function Yh(en,Tn,un){var Kr;return un(en,function(Ei,po,Zo){if(Tn(Ei,po,Zo))return Kr=po,!1}),Kr}function bc(en,Tn,un,Kr){for(var Ei=en.length,po=un+(Kr?1:-1);Kr?po--:++po<Ei;)if(Tn(en[po],po,en))return po;return-1}function xs(en,Tn,un){return Tn===Tn?Zh(en,Tn,un):bc(en,xc,un)}function Wf(en,Tn,un,Kr){for(var Ei=un-1,po=en.length;++Ei<po;)if(Kr(en[Ei],Tn))return Ei;return-1}function xc(en){return en!==en}function qh(en,Tn){var un=en==null?0:en.length;return un?Vh(en,Tn)/un:Pe}function rf(en){return function(Tn){return Tn==null?t:Tn[en]}}function Cd(en){return function(Tn){return en==null?t:en[Tn]}}function jf(en,Tn,un,Kr,Ei){return Ei(en,function(po,Zo,us){un=Kr?(Kr=!1,po):Tn(un,po,Zo,us)}),un}function _d(en,Tn){var un=en.length;for(en.sort(Tn);un--;)en[un]=en[un].value;return en}function Vh(en,Tn){for(var un,Kr=-1,Ei=en.length;++Kr<Ei;){var po=Tn(en[Kr]);po!==t&&(un=un===t?po:un+po)}return un}function bd(en,Tn){for(var un=-1,Kr=Array(en);++un<en;)Kr[un]=Tn(un);return Kr}function Gf(en,Tn){return rs(Tn,function(un){return[un,en[un]]})}function of(en){return en&&en.slice(0,Md(en)+1).replace(br,"")}function za(en){return function(Tn){return en(Tn)}}function Hh(en,Tn){return rs(Tn,function(un){return en[un]})}function zl(en,Tn){return en.has(Tn)}function BA(en,Tn){for(var un=-1,Kr=en.length;++un<Kr&&xs(Tn,en[un],0)>-1;);return un}function $h(en,Tn){for(var un=en.length;un--&&xs(Tn,en[un],0)>-1;);return un}function vh(en,Tn){for(var un=en.length,Kr=0;un--;)en[un]===Tn&&++Kr;return Kr}var sf=Cd(J),vu=Cd(Be);function Mc(en){return"\\"+qt[en]}function wc(en,Tn){return en==null?t:en[Tn]}function Hc(en){return wA.test(en)}function xd(en){return wi.test(en)}function Ip(en){for(var Tn,un=[];!(Tn=en.next()).done;)un.push(Tn.value);return un}function $c(en){var Tn=-1,un=Array(en.size);return en.forEach(function(Kr,Ei){un[++Tn]=[Ei,Kr]}),un}function JA(en,Tn){return function(un){return en(Tn(un))}}function Na(en,Tn){for(var un=-1,Kr=en.length,Ei=0,po=[];++un<Kr;){var Zo=en[un];(Zo===Tn||Zo===x)&&(en[un]=x,po[Ei++]=un)}return po}function tl(en){var Tn=-1,un=Array(en.size);return en.forEach(function(Kr){un[++Tn]=Kr}),un}function af(en){var Tn=-1,un=Array(en.size);return en.forEach(function(Kr){un[++Tn]=[Kr,Kr]}),un}function Zh(en,Tn,un){for(var Kr=un-1,Ei=en.length;++Kr<Ei;)if(en[Kr]===Tn)return Kr;return-1}function Qf(en,Tn,un){for(var Kr=un+1;Kr--;)if(en[Kr]===Tn)return Kr;return Kr}function Zi(en){return Hc(en)?Xh(en):Qh(en)}function aA(en){return Hc(en)?qf(en):nf(en)}function Md(en){for(var Tn=en.length;Tn--&&Gr.test(en.charAt(Tn)););return Tn}var Yf=Cd(lt);function Xh(en){for(var Tn=el.lastIndex=0;el.test(en);)++Tn;return Tn}function qf(en){return en.match(el)||[]}function Vf(en){return en.match(Oa)||[]}var Hf=function en(Tn){Tn=Tn==null?Or:oc.defaults(Or.Object(),Tn,oc.pick(Or,XA));var un=Tn.Array,Kr=Tn.Date,Ei=Tn.Error,po=Tn.Function,Zo=Tn.Math,us=Tn.Object,Zc=Tn.RegExp,$f=Tn.String,pl=Tn.TypeError,Cu=un.prototype,_u=po.prototype,nl=us.prototype,OA=Tn["__core-js_shared__"],Xc=_u.toString,mo=nl.hasOwnProperty,bu=0,Ch=function(){var b=/[^.]+$/.exec(OA&&OA.keys&&OA.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),eu=nl.toString,Xi=Xc.call(us),rl=Or._,Sc=Zc("^"+Xc.call(mo).replace(Tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lA=Eo?Tn.Buffer:t,Nl=Tn.Symbol,wd=Tn.Uint8Array,lf=lA?lA.allocUnsafe:t,xl=JA(us.getPrototypeOf,us),Sd=us.create,Jc=nl.propertyIsEnumerable,tu=Cu.splice,Jh=Nl?Nl.isConcatSpreadable:t,nu=Nl?Nl.iterator:t,sc=Nl?Nl.toStringTag:t,eh=function(){try{var b=Dc(us,"defineProperty");return b({},"",{}),b}catch{}}(),_h=Tn.clearTimeout!==Or.clearTimeout&&Tn.clearTimeout,Go=Kr&&Kr.now!==Or.Date.now&&Kr.now,Ec=Tn.setTimeout!==Or.setTimeout&&Tn.setTimeout,Bc=Zo.ceil,ru=Zo.floor,Af=us.getOwnPropertySymbols,Ed=lA?lA.isBuffer:t,ac=Tn.isFinite,Oc=Cu.join,lc=JA(us.keys,us),Ms=Zo.max,Qs=Zo.min,Bd=Kr.now,th=Tn.parseInt,bh=Zo.random,ps=Cu.reverse,xu=Dc(Tn,"DataView"),Xs=Dc(Tn,"Map"),Wu=Dc(Tn,"Promise"),Wl=Dc(Tn,"Set"),ju=Dc(Tn,"WeakMap"),Ml=Dc(us,"create"),Mu=ju&&new ju,Ic={},ed=ka(xu),Ac=ka(Xs),Tc=ka(Wu),IA=ka(Wl),wu=ka(ju),ml=Nl?Nl.prototype:t,TA=ml?ml.valueOf:t,Od=ml?ml.toString:t;function st(b){if(Al(b)&&!xo(b)&&!(b instanceof ri)){if(b instanceof Po)return b;if(mo.call(b,"__wrapped__"))return UA(b)}return new Po(b)}var xh=function(){function b(){}return function(T){if(!vl(T))return{};if(Sd)return Sd(T);b.prototype=T;var H=new b;return b.prototype=t,H}}();function Js(){}function Po(b,T){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}st.templateSettings={escape:Qt,evaluate:Nt,interpolate:rn,variable:"",imports:{_:st}},st.prototype=Js.prototype,st.prototype.constructor=st,Po.prototype=xh(Js.prototype),Po.prototype.constructor=Po;function ri(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function ms(){var b=new ri(this.__wrapped__);return b.__actions__=$l(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=$l(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=$l(this.__views__),b}function Wa(){if(this.__filtered__){var b=new ri(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function ja(){var b=this.__wrapped__.value(),T=this.__dir__,H=xo(b),Ce=T<0,$e=H?b.length:0,ht=cm(0,$e,this.__views__),Dt=ht.start,Vt=ht.end,An=Vt-Dt,Qn=Ce?Vt:Dt-1,qn=this.__iteratees__,fr=qn.length,Yr=0,ki=Qs(An,this.__takeCount__);if(!H||!Ce&&$e==An&&ki==An)return ta(b,this.__actions__);var io=[];e:for(;An--&&Yr<ki;){Qn+=T;for(var Jo=-1,oo=b[Qn];++Jo<fr;){var vs=qn[Jo],Ts=vs.iteratee,Gd=vs.type,Lh=Ts(oo);if(Gd==Se)oo=Lh;else if(!Lh){if(Gd==qe)continue e;break e}}io[Yr++]=oo}return io}ri.prototype=xh(Js.prototype),ri.prototype.constructor=ri;function Os(b){var T=-1,H=b==null?0:b.length;for(this.clear();++T<H;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function Fs(){this.__data__=Ml?Ml(null):{},this.size=0}function Ko(b){var T=this.has(b)&&delete this.__data__[b];return this.size-=T?1:0,T}function wl(b){var T=this.__data__;if(Ml){var H=T[b];return H===p?t:H}return mo.call(T,b)?T[b]:t}function il(b){var T=this.__data__;return Ml?T[b]!==t:mo.call(T,b)}function Sl(b,T){var H=this.__data__;return this.size+=this.has(b)?0:1,H[b]=Ml&&T===t?p:T,this}Os.prototype.clear=Fs,Os.prototype.delete=Ko,Os.prototype.get=wl,Os.prototype.has=il,Os.prototype.set=Sl;function El(b){var T=-1,H=b==null?0:b.length;for(this.clear();++T<H;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function nh(){this.__data__=[],this.size=0}function Bl(b){var T=this.__data__,H=ya(T,b);if(H<0)return!1;var Ce=T.length-1;return H==Ce?T.pop():tu.call(T,H,1),--this.size,!0}function kA(b){var T=this.__data__,H=ya(T,b);return H<0?t:T[H][1]}function Gu(b){return ya(this.__data__,b)>-1}function Mr(b,T){var H=this.__data__,Ce=ya(H,b);return Ce<0?(++this.size,H.push([b,T])):H[Ce][1]=T,this}El.prototype.clear=nh,El.prototype.delete=Bl,El.prototype.get=kA,El.prototype.has=Gu,El.prototype.set=Mr;function AA(b){var T=-1,H=b==null?0:b.length;for(this.clear();++T<H;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function Id(){this.size=0,this.__data__={hash:new Os,map:new(Xs||El),string:new Os}}function Ol(b){var T=gf(this,b).delete(b);return this.size-=T?1:0,T}function rh(b){return gf(this,b).get(b)}function Su(b){return gf(this,b).has(b)}function PA(b,T){var H=gf(this,b),Ce=H.size;return H.set(b,T),this.size+=H.size==Ce?0:1,this}AA.prototype.clear=Id,AA.prototype.delete=Ol,AA.prototype.get=rh,AA.prototype.has=Su,AA.prototype.set=PA;function Fi(b){var T=-1,H=b==null?0:b.length;for(this.__data__=new AA;++T<H;)this.add(b[T])}function Qu(b){return this.__data__.set(b,p),this}function ih(b){return this.__data__.has(b)}Fi.prototype.add=Fi.prototype.push=Qu,Fi.prototype.has=ih;function is(b){var T=this.__data__=new El(b);this.size=T.size}function Bo(){this.__data__=new El,this.size=0}function uA(b){var T=this.__data__,H=T.delete(b);return this.size=T.size,H}function Ga(b){return this.__data__.get(b)}function ga(b){return this.__data__.has(b)}function kc(b,T){var H=this.__data__;if(H instanceof El){var Ce=H.__data__;if(!Xs||Ce.length<i-1)return Ce.push([b,T]),this.size=++H.size,this;H=this.__data__=new AA(Ce)}return H.set(b,T),this.size=H.size,this}is.prototype.clear=Bo,is.prototype.delete=uA,is.prototype.get=Ga,is.prototype.has=ga,is.prototype.set=kc;function iu(b,T){var H=xo(b),Ce=!H&&zp(b),$e=!H&&!Ce&&Uc(b),ht=!H&&!Ce&&!$e&&Sm(b),Dt=H||Ce||$e||ht,Vt=Dt?bd(b.length,$f):[],An=Vt.length;for(var Qn in b)(T||mo.call(b,Qn))&&!(Dt&&(Qn=="length"||$e&&(Qn=="offset"||Qn=="parent")||ht&&(Qn=="buffer"||Qn=="byteLength"||Qn=="byteOffset")||E(Qn,An)))&&Vt.push(Qn);return Vt}function ou(b){var T=b.length;return T?b[Lt(0,T-1)]:t}function oh(b,T){return ra($l(b),Qa(T,0,b.length))}function uf(b){return ra($l(b))}function jl(b,T,H){(H!==t&&!mc(b[T],H)||H===t&&!(T in b))&&Yu(b,T,H)}function Qo(b,T,H){var Ce=b[T];(!(mo.call(b,T)&&mc(Ce,H))||H===t&&!(T in b))&&Yu(b,T,H)}function ya(b,T){for(var H=b.length;H--;)if(mc(b[H][0],T))return H;return-1}function la(b,T,H,Ce){return cA(b,function($e,ht,Dt){T(Ce,$e,H($e),Dt)}),Ce}function ws(b,T){return b&&LA(T,De(T),b)}function Gl(b,T){return b&&LA(T,ot(T),b)}function Yu(b,T,H){T=="__proto__"&&eh?eh(b,T,{configurable:!0,enumerable:!0,value:H,writable:!0}):b[T]=H}function Pc(b,T){for(var H=-1,Ce=T.length,$e=un(Ce),ht=b==null;++H<Ce;)$e[H]=ht?t:Ye(b,T[H]);return $e}function Qa(b,T,H){return b===b&&(H!==t&&(b=b<=H?b:H),T!==t&&(b=b>=T?b:T)),b}function gl(b,T,H,Ce,$e,ht){var Dt,Vt=T&B,An=T&k,Qn=T&P;if(H&&(Dt=$e?H(b,Ce,$e,ht):H(b)),Dt!==t)return Dt;if(!vl(b))return b;var qn=xo(b);if(qn){if(Dt=ep(b),!Vt)return $l(b,Dt)}else{var fr=ba(b),Yr=fr==_t||fr==gt;if(Uc(b))return qu(b,Vt);if(fr==_n||fr==mt||Yr&&!$e){if(Dt=An||Yr?{}:mA(b),!Vt)return An?cu(b,Gl(Dt,b)):nd(b,ws(Dt,b))}else{if(!no[fr])return $e?b:{};Dt=Rp(b,fr,Vt)}}ht||(ht=new is);var ki=ht.get(b);if(ki)return ki;ht.set(b,Dt),A1(b)?b.forEach(function(oo){Dt.add(gl(oo,T,H,oo,b,ht))}):tg(b)&&b.forEach(function(oo,vs){Dt.set(vs,gl(oo,T,H,vs,b,ht))});var io=Qn?An?ad:Pd:An?ot:De,Jo=qn?t:io(b);return fl(Jo||b,function(oo,vs){Jo&&(vs=oo,oo=b[vs]),Qo(Dt,vs,gl(oo,T,H,vs,b,ht))}),Dt}function Qr(b){var T=De(b);return function(H){return Jr(H,b,T)}}function Jr(b,T,H){var Ce=H.length;if(b==null)return!Ce;for(b=us(b);Ce--;){var $e=H[Ce],ht=T[$e],Dt=b[$e];if(Dt===t&&!($e in b)||!ht(Dt))return!1}return!0}function Mh(b,T,H){if(typeof b!="function")throw new pl(l);return ii(function(){b.apply(t,H)},T)}function Eu(b,T,H,Ce){var $e=-1,ht=EA,Dt=!0,Vt=b.length,An=[],Qn=T.length;if(!Vt)return An;H&&(T=rs(T,za(H))),Ce?(ht=gh,Dt=!1):T.length>=i&&(ht=zl,Dt=!1,T=new Fi(T));e:for(;++$e<Vt;){var qn=b[$e],fr=H==null?qn:H(qn);if(qn=Ce||qn!==0?qn:0,Dt&&fr===fr){for(var Yr=Qn;Yr--;)if(T[Yr]===fr)continue e;An.push(qn)}else ht(T,fr,Ce)||An.push(qn)}return An}var cA=Tl(ol),Ql=Tl(Ou,!0);function td(b,T){var H=!0;return cA(b,function(Ce,$e,ht){return H=!!T(Ce,$e,ht),H}),H}function Yl(b,T,H){for(var Ce=-1,$e=b.length;++Ce<$e;){var ht=b[Ce],Dt=T(ht);if(Dt!=null&&(Vt===t?Dt===Dt&&!uh(Dt):H(Dt,Vt)))var Vt=Dt,An=ht}return An}function sh(b,T,H,Ce){var $e=b.length;for(H=To(H),H<0&&(H=-H>$e?0:$e+H),Ce=Ce===t||Ce>$e?$e:To(Ce),Ce<0&&(Ce+=$e),Ce=H>Ce?0:c1(Ce);H<Ce;)b[H++]=T;return b}function Bu(b,T){var H=[];return cA(b,function(Ce,$e,ht){T(Ce,$e,ht)&&H.push(Ce)}),H}function ji(b,T,H,Ce,$e){var ht=-1,Dt=b.length;for(H||(H=g),$e||($e=[]);++ht<Dt;){var Vt=b[ht];T>0&&H(Vt)?T>1?ji(Vt,T-1,H,Ce,$e):yu($e,Vt):Ce||($e[$e.length]=Vt)}return $e}var Is=lh(),ah=lh(!0);function ol(b,T){return b&&Is(b,T,De)}function Ou(b,T){return b&&ah(b,T,De)}function KA(b,T){return Nu(T,function(H){return Rh(b[H])})}function su(b,T){T=al(T,b);for(var H=0,Ce=T.length;b!=null&&H<Ce;)b=b[Aa(T[H++])];return H&&H==Ce?b:t}function ea(b,T,H){var Ce=T(b);return xo(b)?Ce:yu(Ce,H(b))}function Ys(b){return b==null?b===t?Cr:Rt:sc&&sc in us(b)?yf(b):Ln(b)}function au(b,T){return b>T}function hA(b,T){return b!=null&&mo.call(b,T)}function lu(b,T){return b!=null&&T in us(b)}function RA(b,T,H){return b>=Qs(T,H)&&b<Ms(T,H)}function Kc(b,T,H){for(var Ce=H?gh:EA,$e=b[0].length,ht=b.length,Dt=ht,Vt=un(ht),An=1/0,Qn=[];Dt--;){var qn=b[Dt];Dt&&T&&(qn=rs(qn,za(T))),An=Qs(qn.length,An),Vt[Dt]=!H&&(T||$e>=120&&qn.length>=120)?new Fi(Dt&&qn):t}qn=b[0];var fr=-1,Yr=Vt[0];e:for(;++fr<$e&&Qn.length<An;){var ki=qn[fr],io=T?T(ki):ki;if(ki=H||ki!==0?ki:0,!(Yr?zl(Yr,io):Ce(Qn,io,H))){for(Dt=ht;--Dt;){var Jo=Vt[Dt];if(!(Jo?zl(Jo,io):Ce(b[Dt],io,H)))continue e}Yr&&Yr.push(io),Qn.push(ki)}}return Qn}function Au(b,T,H,Ce){return ol(b,function($e,ht,Dt){T(Ce,H($e),ht,Dt)}),Ce}function sl(b,T,H){T=al(T,b),b=$n(b,T);var Ce=b==null?b:b[Aa(Hu(T))];return Ce==null?t:As(Ce,b,H)}function wh(b){return Al(b)&&Ys(b)==mt}function uc(b){return Al(b)&&Ys(b)==We}function uu(b){return Al(b)&&Ys(b)==Re}function Il(b,T,H,Ce,$e){return b===T?!0:b==null||T==null||!Al(b)&&!Al(T)?b!==b&&T!==T:O(b,T,H,Ce,Il,$e)}function O(b,T,H,Ce,$e,ht){var Dt=xo(b),Vt=xo(T),An=Dt?Ut:ba(b),Qn=Vt?Ut:ba(T);An=An==mt?_n:An,Qn=Qn==mt?_n:Qn;var qn=An==_n,fr=Qn==_n,Yr=An==Qn;if(Yr&&Uc(b)){if(!Uc(T))return!1;Dt=!0,qn=!1}if(Yr&&!qn)return ht||(ht=new is),Dt||Sm(b)?ku(b,T,H,Ce,$e,ht):od(b,T,An,H,Ce,$e,ht);if(!(H&D)){var ki=qn&&mo.call(b,"__wrapped__"),io=fr&&mo.call(T,"__wrapped__");if(ki||io){var Jo=ki?b.value():b,oo=io?T.value():T;return ht||(ht=new is),$e(Jo,oo,H,Ce,ht)}}return Yr?(ht||(ht=new is),sd(b,T,H,Ce,$e,ht)):!1}function a(b){return Al(b)&&ba(b)==Kt}function c(b,T,H,Ce){var $e=H.length,ht=$e,Dt=!Ce;if(b==null)return!ht;for(b=us(b);$e--;){var Vt=H[$e];if(Dt&&Vt[2]?Vt[1]!==b[Vt[0]]:!(Vt[0]in b))return!1}for(;++$e<ht;){Vt=H[$e];var An=Vt[0],Qn=b[An],qn=Vt[1];if(Dt&&Vt[2]){if(Qn===t&&!(An in b))return!1}else{var fr=new is;if(Ce)var Yr=Ce(Qn,qn,An,b,T,fr);if(!(Yr===t?Il(qn,Qn,D|N,Ce,fr):Yr))return!1}}return!0}function C(b){if(!vl(b)||be(b))return!1;var T=Rh(b)?Sc:fs;return T.test(ka(b))}function M(b){return Al(b)&&Ys(b)==Xn}function I(b){return Al(b)&&ba(b)==Fn}function z(b){return Al(b)&&Mm(b.length)&&!!Sr[Ys(b)]}function Y(b){return typeof b=="function"?b:b==null?Xu:typeof b=="object"?xo(b)?Ge(b[0],b[1]):Ie(b):c8(b)}function ee(b){if(!Ne(b))return lc(b);var T=[];for(var H in us(b))mo.call(b,H)&&H!="constructor"&&T.push(H);return T}function se(b){if(!vl(b))return wn(b);var T=Ne(b),H=[];for(var Ce in b)Ce=="constructor"&&(T||!mo.call(b,Ce))||H.push(Ce);return H}function ge(b,T){return b<T}function Oe(b,T){var H=-1,Ce=Lc(b)?un(b.length):[];return cA(b,function($e,ht,Dt){Ce[++H]=T($e,ht,Dt)}),Ce}function Ie(b){var T=Xo(b);return T.length==1&&T[0][2]?Mt(T[0][0],T[0][1]):function(H){return H===b||c(H,b,T)}}function Ge(b,T){return K(b)&&ft(T)?Mt(Aa(b),T):function(H){var Ce=Ye(H,b);return Ce===t&&Ce===T?At(H,b):Il(T,Ce,D|N)}}function Ze(b,T,H,Ce,$e){b!==T&&Is(T,function(ht,Dt){if($e||($e=new is),vl(ht))dt(b,T,Dt,H,Ze,Ce,$e);else{var Vt=Ce?Ce(Ar(b,Dt),ht,Dt+"",b,T,$e):t;Vt===t&&(Vt=ht),jl(b,Dt,Vt)}},ot)}function dt(b,T,H,Ce,$e,ht,Dt){var Vt=Ar(b,H),An=Ar(T,H),Qn=Dt.get(An);if(Qn){jl(b,H,Qn);return}var qn=ht?ht(Vt,An,H+"",b,T,Dt):t,fr=qn===t;if(fr){var Yr=xo(An),ki=!Yr&&Uc(An),io=!Yr&&!ki&&Sm(An);qn=An,Yr||ki||io?xo(Vt)?qn=Vt:vA(Vt)?qn=$l(Vt):ki?(fr=!1,qn=qu(An,!0)):io?(fr=!1,qn=na(An,!0)):qn=[]:wm(An)||zp(An)?(qn=Vt,zp(Vt)?qn=u0(Vt):(!vl(Vt)||Rh(Vt))&&(qn=mA(An))):fr=!1}fr&&(Dt.set(An,qn),$e(qn,An,Ce,ht,Dt),Dt.delete(An)),jl(b,H,qn)}function ct(b,T){var H=b.length;if(H)return T+=T<0?H:0,E(T,H)?b[T]:t}function pt(b,T,H){T.length?T=rs(T,function(ht){return xo(ht)?function(Dt){return su(Dt,ht.length===1?ht[0]:ht)}:ht}):T=[Xu];var Ce=-1;T=rs(T,za(Pi()));var $e=Oe(b,function(ht,Dt,Vt){var An=rs(T,function(Qn){return Qn(ht)});return{criteria:An,index:++Ce,value:ht}});return _d($e,function(ht,Dt){return Tp(ht,Dt,H)})}function bt(b,T){return Bt(b,T,function(H,Ce){return At(b,Ce)})}function Bt(b,T,H){for(var Ce=-1,$e=T.length,ht={};++Ce<$e;){var Dt=T[Ce],Vt=su(b,Dt);H(Vt,Dt)&&ir(ht,al(Dt,b),Vt)}return ht}function wt(b){return function(T){return su(T,b)}}function It(b,T,H,Ce){var $e=Ce?Wf:xs,ht=-1,Dt=T.length,Vt=b;for(b===T&&(T=$l(T)),H&&(Vt=rs(b,za(H)));++ht<Dt;)for(var An=0,Qn=T[ht],qn=H?H(Qn):Qn;(An=$e(Vt,qn,An,Ce))>-1;)Vt!==b&&tu.call(Vt,An,1),tu.call(b,An,1);return b}function Pt(b,T){for(var H=b?T.length:0,Ce=H-1;H--;){var $e=T[H];if(H==Ce||$e!==ht){var ht=$e;E($e)?tu.call(b,$e,1):va(b,$e)}}return b}function Lt(b,T){return b+ru(bh()*(T-b+1))}function sn(b,T,H,Ce){for(var $e=-1,ht=Ms(Bc((T-b)/(H||1)),0),Dt=un(ht);ht--;)Dt[Ce?ht:++$e]=b,b+=H;return Dt}function ln(b,T){var H="";if(!b||T<1||T>Ke)return H;do T%2&&(H+=b),T=ru(T/2),T&&(b+=b);while(T);return H}function on(b,T){return kr(Hn(b,T,Xu),b+"")}function Cn(b){return ou(Ru(b))}function Mn(b,T){var H=Ru(b);return ra(H,Qa(T,0,H.length))}function ir(b,T,H,Ce){if(!vl(b))return b;T=al(T,b);for(var $e=-1,ht=T.length,Dt=ht-1,Vt=b;Vt!=null&&++$e<ht;){var An=Aa(T[$e]),Qn=H;if(An==="__proto__"||An==="constructor"||An==="prototype")return b;if($e!=Dt){var qn=Vt[An];Qn=Ce?Ce(qn,An,Vt):t,Qn===t&&(Qn=vl(qn)?qn:E(T[$e+1])?[]:{})}Qo(Vt,An,Qn),Vt=Vt[An]}return b}var Vn=Mu?function(b,T){return Mu.set(b,T),b}:Xu,kn=eh?function(b,T){return eh(b,"toString",{configurable:!0,enumerable:!1,value:Av(T),writable:!0})}:Xu;function Er(b){return ra(Ru(b))}function Vr(b,T,H){var Ce=-1,$e=b.length;T<0&&(T=-T>$e?0:$e+T),H=H>$e?$e:H,H<0&&(H+=$e),$e=T>H?0:H-T>>>0,T>>>=0;for(var ht=un($e);++Ce<$e;)ht[Ce]=b[Ce+T];return ht}function ci(b,T){var H;return cA(b,function(Ce,$e,ht){return H=T(Ce,$e,ht),!H}),!!H}function Yo(b,T,H){var Ce=0,$e=b==null?Ce:b.length;if(typeof T=="number"&&T===T&&$e<=Ct){for(;Ce<$e;){var ht=Ce+$e>>>1,Dt=b[ht];Dt!==null&&!uh(Dt)&&(H?Dt<=T:Dt<T)?Ce=ht+1:$e=ht}return $e}return bo(b,T,Xu,H)}function bo(b,T,H,Ce){var $e=0,ht=b==null?0:b.length;if(ht===0)return 0;T=H(T);for(var Dt=T!==T,Vt=T===null,An=uh(T),Qn=T===t;$e<ht;){var qn=ru(($e+ht)/2),fr=H(b[qn]),Yr=fr!==t,ki=fr===null,io=fr===fr,Jo=uh(fr);if(Dt)var oo=Ce||io;else Qn?oo=io&&(Ce||Yr):Vt?oo=io&&Yr&&(Ce||!ki):An?oo=io&&Yr&&!ki&&(Ce||!Jo):ki||Jo?oo=!1:oo=Ce?fr<=T:fr<T;oo?$e=qn+1:ht=qn}return Qs(ht,Xe)}function Ro(b,T){for(var H=-1,Ce=b.length,$e=0,ht=[];++H<Ce;){var Dt=b[H],Vt=T?T(Dt):Dt;if(!H||!mc(Vt,An)){var An=Vt;ht[$e++]=Dt===0?0:Dt}}return ht}function Ss(b){return typeof b=="number"?b:uh(b)?Pe:+b}function to(b){if(typeof b=="string")return b;if(xo(b))return rs(b,to)+"";if(uh(b))return Od?Od.call(b):"";var T=b+"";return T=="0"&&1/b==-1/0?"-0":T}function qi(b,T,H){var Ce=-1,$e=EA,ht=b.length,Dt=!0,Vt=[],An=Vt;if(H)Dt=!1,$e=gh;else if(ht>=i){var Qn=T?null:Vm(b);if(Qn)return tl(Qn);Dt=!1,$e=zl,An=new Fi}else An=T?[]:Vt;e:for(;++Ce<ht;){var qn=b[Ce],fr=T?T(qn):qn;if(qn=H||qn!==0?qn:0,Dt&&fr===fr){for(var Yr=An.length;Yr--;)if(An[Yr]===fr)continue e;T&&An.push(fr),Vt.push(qn)}else $e(An,fr,H)||(An!==Vt&&An.push(fr),Vt.push(qn))}return Vt}function va(b,T){return T=al(T,b),b=$n(b,T),b==null||delete b[Aa(Hu(T))]}function Ca(b,T,H,Ce){return ir(b,T,H(su(b,T)),Ce)}function _a(b,T,H,Ce){for(var $e=b.length,ht=Ce?$e:-1;(Ce?ht--:++ht<$e)&&T(b[ht],ht,b););return H?Vr(b,Ce?0:ht,Ce?ht+1:$e):Vr(b,Ce?ht+1:0,Ce?$e:ht)}function ta(b,T){var H=b;return H instanceof ri&&(H=H.value()),yh(T,function(Ce,$e){return $e.func.apply($e.thisArg,yu([Ce],$e.args))},H)}function yl(b,T,H){var Ce=b.length;if(Ce<2)return Ce?qi(b[0]):[];for(var $e=-1,ht=un(Ce);++$e<Ce;)for(var Dt=b[$e],Vt=-1;++Vt<Ce;)Vt!=$e&&(ht[$e]=Eu(ht[$e]||Dt,b[Vt],T,H));return qi(ji(ht,1),T,H)}function DA(b,T,H){for(var Ce=-1,$e=b.length,ht=T.length,Dt={};++Ce<$e;){var Vt=Ce<ht?T[Ce]:t;H(Dt,b[Ce],Vt)}return Dt}function ql(b){return vA(b)?b:[]}function FA(b){return typeof b=="function"?b:Xu}function al(b,T){return xo(b)?b:K(b,T)?[b]:Ls(Us(b))}var Iu=on;function Vl(b,T,H){var Ce=b.length;return H=H===t?Ce:H,!T&&H>=Ce?b:Vr(b,T,H)}var dA=_h||function(b){return Or.clearTimeout(b)};function qu(b,T){if(T)return b.slice();var H=b.length,Ce=lf?lf(H):new b.constructor(H);return b.copy(Ce),Ce}function Hl(b){var T=new b.constructor(b.byteLength);return new wd(T).set(new wd(b)),T}function cc(b,T){var H=T?Hl(b.buffer):b.buffer;return new b.constructor(H,b.byteOffset,b.byteLength)}function qs(b){var T=new b.constructor(b.source,ui.exec(b));return T.lastIndex=b.lastIndex,T}function os(b){return TA?us(TA.call(b)):{}}function na(b,T){var H=T?Hl(b.buffer):b.buffer;return new b.constructor(H,b.byteOffset,b.length)}function Es(b,T){if(b!==T){var H=b!==t,Ce=b===null,$e=b===b,ht=uh(b),Dt=T!==t,Vt=T===null,An=T===T,Qn=uh(T);if(!Vt&&!Qn&&!ht&&b>T||ht&&Dt&&An&&!Vt&&!Qn||Ce&&Dt&&An||!H&&An||!$e)return 1;if(!Ce&&!ht&&!Qn&&b<T||Qn&&H&&$e&&!Ce&&!ht||Vt&&H&&$e||!Dt&&$e||!An)return-1}return 0}function Tp(b,T,H){for(var Ce=-1,$e=b.criteria,ht=T.criteria,Dt=$e.length,Vt=H.length;++Ce<Dt;){var An=Es($e[Ce],ht[Ce]);if(An){if(Ce>=Vt)return An;var Qn=H[Ce];return An*(Qn=="desc"?-1:1)}}return b.index-T.index}function hc(b,T,H,Ce){for(var $e=-1,ht=b.length,Dt=H.length,Vt=-1,An=T.length,Qn=Ms(ht-Dt,0),qn=un(An+Qn),fr=!Ce;++Vt<An;)qn[Vt]=T[Vt];for(;++$e<Dt;)(fr||$e<ht)&&(qn[H[$e]]=b[$e]);for(;Qn--;)qn[Vt++]=b[$e++];return qn}function cf(b,T,H,Ce){for(var $e=-1,ht=b.length,Dt=-1,Vt=H.length,An=-1,Qn=T.length,qn=Ms(ht-Vt,0),fr=un(qn+Qn),Yr=!Ce;++$e<qn;)fr[$e]=b[$e];for(var ki=$e;++An<Qn;)fr[ki+An]=T[An];for(;++Dt<Vt;)(Yr||$e<ht)&&(fr[ki+H[Dt]]=b[$e++]);return fr}function $l(b,T){var H=-1,Ce=b.length;for(T||(T=un(Ce));++H<Ce;)T[H]=b[H];return T}function LA(b,T,H,Ce){var $e=!H;H||(H={});for(var ht=-1,Dt=T.length;++ht<Dt;){var Vt=T[ht],An=Ce?Ce(H[Vt],b[Vt],Vt,H,b):t;An===t&&(An=b[Vt]),$e?Yu(H,Vt,An):Qo(H,Vt,An)}return H}function nd(b,T){return LA(b,pA(b),T)}function cu(b,T){return LA(b,Ad(b),T)}function hu(b,T){return function(H,Ce){var $e=xo(H)?Gh:la,ht=T?T():{};return $e(H,b,Pi(Ce,2),ht)}}function Tu(b){return on(function(T,H){var Ce=-1,$e=H.length,ht=$e>1?H[$e-1]:t,Dt=$e>2?H[2]:t;for(ht=b.length>3&&typeof ht=="function"?($e--,ht):t,Dt&&S(H[0],H[1],Dt)&&(ht=$e<3?t:ht,$e=1),T=us(T);++Ce<$e;){var Vt=H[Ce];Vt&&b(T,Vt,Ce,ht)}return T})}function Tl(b,T){return function(H,Ce){if(H==null)return H;if(!Lc(H))return b(H,Ce);for(var $e=H.length,ht=T?$e:-1,Dt=us(H);(T?ht--:++ht<$e)&&Ce(Dt[ht],ht,Dt)!==!1;);return H}}function lh(b){return function(T,H,Ce){for(var $e=-1,ht=us(T),Dt=Ce(T),Vt=Dt.length;Vt--;){var An=Dt[b?Vt:++$e];if(H(ht[An],An,ht)===!1)break}return T}}function Sh(b,T,H){var Ce=T&W,$e=hf(b);function ht(){var Dt=this&&this!==Or&&this instanceof ht?$e:b;return Dt.apply(Ce?H:this,arguments)}return ht}function Td(b){return function(T){T=Us(T);var H=Hc(T)?aA(T):t,Ce=H?H[0]:T.charAt(0),$e=H?Vl(H,1).join(""):T.slice(1);return Ce[b]()+$e}}function rd(b){return function(T){return yh(T_(Zu(T).replace(Gs,"")),b,"")}}function hf(b){return function(){var T=arguments;switch(T.length){case 0:return new b;case 1:return new b(T[0]);case 2:return new b(T[0],T[1]);case 3:return new b(T[0],T[1],T[2]);case 4:return new b(T[0],T[1],T[2],T[3]);case 5:return new b(T[0],T[1],T[2],T[3],T[4]);case 6:return new b(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new b(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var H=xh(b.prototype),Ce=b.apply(H,T);return vl(Ce)?Ce:H}}function Zf(b,T,H){var Ce=hf(b);function $e(){for(var ht=arguments.length,Dt=un(ht),Vt=ht,An=Oh($e);Vt--;)Dt[Vt]=arguments[Vt];var Qn=ht<3&&Dt[0]!==An&&Dt[ht-1]!==An?[]:Na(Dt,An);if(ht-=Qn.length,ht<H)return kl(b,T,kd,$e.placeholder,t,Dt,Qn,t,t,H-ht);var qn=this&&this!==Or&&this instanceof $e?Ce:b;return As(qn,this,Dt)}return $e}function id(b){return function(T,H,Ce){var $e=us(T);if(!Lc(T)){var ht=Pi(H,3);T=De(T),H=function(Vt){return ht($e[Vt],Vt,$e)}}var Dt=b(T,H,Ce);return Dt>-1?$e[ht?T[Dt]:Dt]:t}}function df(b){return Ia(function(T){var H=T.length,Ce=H,$e=Po.prototype.thru;for(b&&T.reverse();Ce--;){var ht=T[Ce];if(typeof ht!="function")throw new pl(l);if($e&&!Dt&&ld(ht)=="wrapper")var Dt=new Po([],!0)}for(Ce=Dt?Ce:H;++Ce<H;){ht=T[Ce];var Vt=ld(ht),An=Vt=="wrapper"?mf(ht):t;An&&ue(An[0])&&An[1]==(G|ie|q|oe)&&!An[4].length&&An[9]==1?Dt=Dt[ld(An[0])].apply(Dt,An[3]):Dt=ht.length==1&&ue(ht)?Dt[Vt]():Dt.thru(ht)}return function(){var Qn=arguments,qn=Qn[0];if(Dt&&Qn.length==1&&xo(qn))return Dt.plant(qn).value();for(var fr=0,Yr=H?T[fr].apply(this,Qn):qn;++fr<H;)Yr=T[fr].call(this,Yr);return Yr}})}function kd(b,T,H,Ce,$e,ht,Dt,Vt,An,Qn){var qn=T&G,fr=T&W,Yr=T&V,ki=T&(ie|ne),io=T&fe,Jo=Yr?t:hf(b);function oo(){for(var vs=arguments.length,Ts=un(vs),Gd=vs;Gd--;)Ts[Gd]=arguments[Gd];if(ki)var Lh=Oh(oo),Qd=vh(Ts,Lh);if(Ce&&(Ts=hc(Ts,Ce,$e,ki)),ht&&(Ts=cf(Ts,ht,Dt,ki)),vs-=Qd,ki&&vs<Qn){var pu=Na(Ts,Lh);return kl(b,T,kd,oo.placeholder,H,Ts,pu,Vt,An,Qn-vs)}var sp=fr?H:this,Im=Yr?sp[b]:b;return vs=Ts.length,Vt?Ts=gr(Ts,Vt):io&&vs>1&&Ts.reverse(),qn&&An<vs&&(Ts.length=An),this&&this!==Or&&this instanceof oo&&(Im=Jo||hf(Im)),Im.apply(sp,Ts)}return oo}function kp(b,T){return function(H,Ce){return Au(H,b,T(Ce),{})}}function Vu(b,T){return function(H,Ce){var $e;if(H===t&&Ce===t)return T;if(H!==t&&($e=H),Ce!==t){if($e===t)return Ce;typeof H=="string"||typeof Ce=="string"?(H=to(H),Ce=to(Ce)):(H=Ss(H),Ce=Ss(Ce)),$e=b(H,Ce)}return $e}}function Xf(b){return Ia(function(T){return T=rs(T,za(Pi())),on(function(H){var Ce=this;return b(T,function($e){return As($e,Ce,H)})})})}function Eh(b,T){T=T===t?" ":to(T);var H=T.length;if(H<2)return H?ln(T,b):T;var Ce=ln(T,Bc(b/Zi(T)));return Hc(T)?Vl(aA(Ce),0,b).join(""):Ce.slice(0,b)}function ff(b,T,H,Ce){var $e=T&W,ht=hf(b);function Dt(){for(var Vt=-1,An=arguments.length,Qn=-1,qn=Ce.length,fr=un(qn+An),Yr=this&&this!==Or&&this instanceof Dt?ht:b;++Qn<qn;)fr[Qn]=Ce[Qn];for(;An--;)fr[Qn++]=arguments[++Vt];return As(Yr,$e?H:this,fr)}return Dt}function Rc(b){return function(T,H,Ce){return Ce&&typeof Ce!="number"&&S(T,H,Ce)&&(H=Ce=t),T=zd(T),H===t?(H=T,T=0):H=zd(H),Ce=Ce===t?T<H?1:-1:zd(Ce),sn(T,H,Ce,b)}}function pf(b){return function(T,H){return typeof T=="string"&&typeof H=="string"||(T=zc(T),H=zc(H)),b(T,H)}}function kl(b,T,H,Ce,$e,ht,Dt,Vt,An,Qn){var qn=T&ie,fr=qn?Dt:t,Yr=qn?t:Dt,ki=qn?ht:t,io=qn?t:ht;T|=qn?q:te,T&=~(qn?te:q),T&$||(T&=-4);var Jo=[b,T,$e,ki,fr,io,Yr,Vt,An,Qn],oo=H.apply(t,Jo);return ue(b)&&Rr(oo,Jo),oo.placeholder=Ce,ro(oo,b,T)}function fA(b){var T=Zo[b];return function(H,Ce){if(H=zc(H),Ce=Ce==null?0:Qs(To(Ce),292),Ce&&ac(H)){var $e=(Us(H)+"e").split("e"),ht=T($e[0]+"e"+(+$e[1]+Ce));return $e=(Us(ht)+"e").split("e"),+($e[0]+"e"+(+$e[1]-Ce))}return T(H)}}var Vm=Wl&&1/tl(new Wl([,-0]))[1]==Je?function(b){return new Wl(b)}:Fh;function Pp(b){return function(T){var H=ba(T);return H==Kt?$c(T):H==Fn?af(T):Gf(T,b(T))}}function qo(b,T,H,Ce,$e,ht,Dt,Vt){var An=T&V;if(!An&&typeof b!="function")throw new pl(l);var Qn=Ce?Ce.length:0;if(Qn||(T&=-97,Ce=$e=t),Dt=Dt===t?Dt:Ms(To(Dt),0),Vt=Vt===t?Vt:To(Vt),Qn-=$e?$e.length:0,T&te){var qn=Ce,fr=$e;Ce=$e=t}var Yr=An?t:mf(b),ki=[b,T,H,Ce,$e,qn,fr,ht,Dt,Vt];if(Yr&&Yt(ki,Yr),b=ki[0],T=ki[1],H=ki[2],Ce=ki[3],$e=ki[4],Vt=ki[9]=ki[9]===t?An?0:b.length:Ms(ki[9]-Qn,0),!Vt&&T&(ie|ne)&&(T&=-25),!T||T==W)var io=Sh(b,T,H);else T==ie||T==ne?io=Zf(b,T,Vt):(T==q||T==(W|q))&&!$e.length?io=ff(b,T,H,Ce):io=kd.apply(t,ki);var Jo=Yr?Vn:Rr;return ro(Jo(io,ki),b,T)}function Kp(b,T,H,Ce){return b===t||mc(b,nl[H])&&!mo.call(Ce,H)?T:b}function Jf(b,T,H,Ce,$e,ht){return vl(b)&&vl(T)&&(ht.set(T,b),Ze(b,T,t,Jf,ht),ht.delete(T)),b}function Bh(b){return wm(b)?t:b}function ku(b,T,H,Ce,$e,ht){var Dt=H&D,Vt=b.length,An=T.length;if(Vt!=An&&!(Dt&&An>Vt))return!1;var Qn=ht.get(b),qn=ht.get(T);if(Qn&&qn)return Qn==T&&qn==b;var fr=-1,Yr=!0,ki=H&N?new Fi:t;for(ht.set(b,T),ht.set(T,b);++fr<Vt;){var io=b[fr],Jo=T[fr];if(Ce)var oo=Dt?Ce(Jo,io,fr,T,b,ht):Ce(io,Jo,fr,b,T,ht);if(oo!==t){if(oo)continue;Yr=!1;break}if(ki){if(!sA(T,function(vs,Ts){if(!zl(ki,Ts)&&(io===vs||$e(io,vs,H,Ce,ht)))return ki.push(Ts)})){Yr=!1;break}}else if(!(io===Jo||$e(io,Jo,H,Ce,ht))){Yr=!1;break}}return ht.delete(b),ht.delete(T),Yr}function od(b,T,H,Ce,$e,ht,Dt){switch(H){case ce:if(b.byteLength!=T.byteLength||b.byteOffset!=T.byteOffset)return!1;b=b.buffer,T=T.buffer;case We:return!(b.byteLength!=T.byteLength||!ht(new wd(b),new wd(T)));case Te:case Re:case $t:return mc(+b,+T);case nt:return b.name==T.name&&b.message==T.message;case Xn:case an:return b==T+"";case Kt:var Vt=$c;case Fn:var An=Ce&D;if(Vt||(Vt=tl),b.size!=T.size&&!An)return!1;var Qn=Dt.get(b);if(Qn)return Qn==T;Ce|=N,Dt.set(b,T);var qn=ku(Vt(b),Vt(T),Ce,$e,ht,Dt);return Dt.delete(b),qn;case Bn:if(TA)return TA.call(b)==TA.call(T)}return!1}function sd(b,T,H,Ce,$e,ht){var Dt=H&D,Vt=Pd(b),An=Vt.length,Qn=Pd(T),qn=Qn.length;if(An!=qn&&!Dt)return!1;for(var fr=An;fr--;){var Yr=Vt[fr];if(!(Dt?Yr in T:mo.call(T,Yr)))return!1}var ki=ht.get(b),io=ht.get(T);if(ki&&io)return ki==T&&io==b;var Jo=!0;ht.set(b,T),ht.set(T,b);for(var oo=Dt;++fr<An;){Yr=Vt[fr];var vs=b[Yr],Ts=T[Yr];if(Ce)var Gd=Dt?Ce(Ts,vs,Yr,T,b,ht):Ce(vs,Ts,Yr,b,T,ht);if(!(Gd===t?vs===Ts||$e(vs,Ts,H,Ce,ht):Gd)){Jo=!1;break}oo||(oo=Yr=="constructor")}if(Jo&&!oo){var Lh=b.constructor,Qd=T.constructor;Lh!=Qd&&"constructor"in b&&"constructor"in T&&!(typeof Lh=="function"&&Lh instanceof Lh&&typeof Qd=="function"&&Qd instanceof Qd)&&(Jo=!1)}return ht.delete(b),ht.delete(T),Jo}function Ia(b){return kr(Hn(b,t,Fc),b+"")}function Pd(b){return ea(b,De,pA)}function ad(b){return ea(b,ot,Ad)}var mf=Mu?function(b){return Mu.get(b)}:Fh;function ld(b){for(var T=b.name+"",H=Ic[T],Ce=mo.call(Ic,T)?H.length:0;Ce--;){var $e=H[Ce],ht=$e.func;if(ht==null||ht==b)return $e.name}return T}function Oh(b){var T=mo.call(st,"placeholder")?st:b;return T.placeholder}function Pi(){var b=st.iteratee||d1;return b=b===d1?Y:b,arguments.length?b(arguments[0],arguments[1]):b}function gf(b,T){var H=b.__data__;return Z(T)?H[typeof T=="string"?"string":"hash"]:H.map}function Xo(b){for(var T=De(b),H=T.length;H--;){var Ce=T[H],$e=b[Ce];T[H]=[Ce,$e,ft($e)]}return T}function Dc(b,T){var H=wc(b,T);return C(H)?H:t}function yf(b){var T=mo.call(b,sc),H=b[sc];try{b[sc]=t;var Ce=!0}catch{}var $e=eu.call(b);return Ce&&(T?b[sc]=H:delete b[sc]),$e}var pA=Af?function(b){return b==null?[]:(b=us(b),Nu(Af(b),function(T){return Jc.call(b,T)}))}:M3,Ad=Af?function(b){for(var T=[];b;)yu(T,pA(b)),b=xl(b);return T}:M3,ba=Ys;(xu&&ba(new xu(new ArrayBuffer(1)))!=ce||Xs&&ba(new Xs)!=Kt||Wu&&ba(Wu.resolve())!=pr||Wl&&ba(new Wl)!=Fn||ju&&ba(new ju)!=lr)&&(ba=function(b){var T=Ys(b),H=T==_n?b.constructor:t,Ce=H?ka(H):"";if(Ce)switch(Ce){case ed:return ce;case Ac:return Kt;case Tc:return pr;case IA:return Fn;case wu:return lr}return T});function cm(b,T,H){for(var Ce=-1,$e=H.length;++Ce<$e;){var ht=H[Ce],Dt=ht.size;switch(ht.type){case"drop":b+=Dt;break;case"dropRight":T-=Dt;break;case"take":T=Qs(T,b+Dt);break;case"takeRight":b=Ms(b,T-Dt);break}}return{start:b,end:T}}function Ta(b){var T=b.match(Fr);return T?T[1].split(yn):[]}function hm(b,T,H){T=al(T,b);for(var Ce=-1,$e=T.length,ht=!1;++Ce<$e;){var Dt=Aa(T[Ce]);if(!(ht=b!=null&&H(b,Dt)))break;b=b[Dt]}return ht||++Ce!=$e?ht:($e=b==null?0:b.length,!!$e&&Mm($e)&&E(Dt,$e)&&(xo(b)||zp(b)))}function ep(b){var T=b.length,H=new b.constructor(T);return T&&typeof b[0]=="string"&&mo.call(b,"index")&&(H.index=b.index,H.input=b.input),H}function mA(b){return typeof b.constructor=="function"&&!Ne(b)?xh(xl(b)):{}}function Rp(b,T,H){var Ce=b.constructor;switch(T){case We:return Hl(b);case Te:case Re:return new Ce(+b);case ce:return cc(b,H);case ye:case rt:case Et:case Ht:case Zt:case Jn:case He:case ae:case _e:return na(b,H);case Kt:return new Ce;case $t:case an:return new Ce(b);case Xn:return qs(b);case Fn:return new Ce;case Bn:return os(b)}}function u(b,T){var H=T.length;if(!H)return b;var Ce=H-1;return T[Ce]=(H>1?"& ":"")+T[Ce],T=T.join(H>2?", ":" "),b.replace(Si,`{
/* [wrapped with `+T+`] */
`)}function g(b){return xo(b)||zp(b)||!!(Jh&&b&&b[Jh])}function E(b,T){var H=typeof b;return T=T??Ke,!!T&&(H=="number"||H!="symbol"&&sa.test(b))&&b>-1&&b%1==0&&b<T}function S(b,T,H){if(!vl(H))return!1;var Ce=typeof T;return(Ce=="number"?Lc(H)&&E(T,H.length):Ce=="string"&&T in H)?mc(H[T],b):!1}function K(b,T){if(xo(b))return!1;var H=typeof b;return H=="number"||H=="symbol"||H=="boolean"||b==null||uh(b)?!0:Dn.test(b)||!Rn.test(b)||T!=null&&b in us(T)}function Z(b){var T=typeof b;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?b!=="__proto__":b===null}function ue(b){var T=ld(b),H=st[T];if(typeof H!="function"||!(T in ri.prototype))return!1;if(b===H)return!0;var Ce=mf(H);return!!Ce&&b===Ce[0]}function be(b){return!!Ch&&Ch in b}var ke=OA?Rh:w3;function Ne(b){var T=b&&b.constructor,H=typeof T=="function"&&T.prototype||nl;return b===H}function ft(b){return b===b&&!vl(b)}function Mt(b,T){return function(H){return H==null?!1:H[b]===T&&(T!==t||b in us(H))}}function tn(b){var T=pn(b,function(Ce){return H.size===v&&H.clear(),Ce}),H=T.cache;return T}function Yt(b,T){var H=b[1],Ce=T[1],$e=H|Ce,ht=$e<(W|V|G),Dt=Ce==G&&H==ie||Ce==G&&H==oe&&b[7].length<=T[8]||Ce==(G|oe)&&T[7].length<=T[8]&&H==ie;if(!(ht||Dt))return b;Ce&W&&(b[2]=T[2],$e|=H&W?0:$);var Vt=T[3];if(Vt){var An=b[3];b[3]=An?hc(An,Vt,T[4]):Vt,b[4]=An?Na(b[3],x):T[4]}return Vt=T[5],Vt&&(An=b[5],b[5]=An?cf(An,Vt,T[6]):Vt,b[6]=An?Na(b[5],x):T[6]),Vt=T[7],Vt&&(b[7]=Vt),Ce&G&&(b[8]=b[8]==null?T[8]:Qs(b[8],T[8])),b[9]==null&&(b[9]=T[9]),b[0]=T[0],b[1]=$e,b}function wn(b){var T=[];if(b!=null)for(var H in us(b))T.push(H);return T}function Ln(b){return eu.call(b)}function Hn(b,T,H){return T=Ms(T===t?b.length-1:T,0),function(){for(var Ce=arguments,$e=-1,ht=Ms(Ce.length-T,0),Dt=un(ht);++$e<ht;)Dt[$e]=Ce[T+$e];$e=-1;for(var Vt=un(T+1);++$e<T;)Vt[$e]=Ce[$e];return Vt[T]=H(Dt),As(b,this,Vt)}}function $n(b,T){return T.length<2?b:su(b,Vr(T,0,-1))}function gr(b,T){for(var H=b.length,Ce=Qs(T.length,H),$e=$l(b);Ce--;){var ht=T[Ce];b[Ce]=E(ht,H)?$e[ht]:t}return b}function Ar(b,T){if(!(T==="constructor"&&typeof b[T]=="function")&&T!="__proto__")return b[T]}var Rr=Oo(Vn),ii=Ec||function(b,T){return Or.setTimeout(b,T)},kr=Oo(kn);function ro(b,T,H){var Ce=T+"";return kr(b,u(Ce,Ya(Ta(Ce),H)))}function Oo(b){var T=0,H=0;return function(){var Ce=Bd(),$e=pe-(Ce-H);if(H=Ce,$e>0){if(++T>=me)return arguments[0]}else T=0;return b.apply(t,arguments)}}function ra(b,T){var H=-1,Ce=b.length,$e=Ce-1;for(T=T===t?Ce:T;++H<T;){var ht=Lt(H,$e),Dt=b[ht];b[ht]=b[H],b[H]=Dt}return b.length=T,b}var Ls=tn(function(b){var T=[];return b.charCodeAt(0)===46&&T.push(""),b.replace(mr,function(H,Ce,$e,ht){T.push($e?ht.replace(Cs,"$1"):Ce||H)}),T});function Aa(b){if(typeof b=="string"||uh(b))return b;var T=b+"";return T=="0"&&1/b==-1/0?"-0":T}function ka(b){if(b!=null){try{return Xc.call(b)}catch{}try{return b+""}catch{}}return""}function Ya(b,T){return fl(Gt,function(H){var Ce="_."+H[0];T&H[1]&&!EA(b,Ce)&&b.push(Ce)}),b.sort()}function UA(b){if(b instanceof ri)return b.clone();var T=new Po(b.__wrapped__,b.__chain__);return T.__actions__=$l(b.__actions__),T.__index__=b.__index__,T.__values__=b.__values__,T}function ll(b,T,H){(H?S(b,T,H):T===t)?T=1:T=Ms(To(T),0);var Ce=b==null?0:b.length;if(!Ce||T<1)return[];for(var $e=0,ht=0,Dt=un(Bc(Ce/T));$e<Ce;)Dt[ht++]=Vr(b,$e,$e+=T);return Dt}function qa(b){for(var T=-1,H=b==null?0:b.length,Ce=0,$e=[];++T<H;){var ht=b[T];ht&&($e[Ce++]=ht)}return $e}function cs(){var b=arguments.length;if(!b)return[];for(var T=un(b-1),H=arguments[0],Ce=b;Ce--;)T[Ce-1]=arguments[Ce];return yu(xo(H)?$l(H):[H],ji(T,1))}var bi=on(function(b,T){return vA(b)?Eu(b,ji(T,1,vA,!0)):[]}),ss=on(function(b,T){var H=Hu(T);return vA(H)&&(H=t),vA(b)?Eu(b,ji(T,1,vA,!0),Pi(H,2)):[]}),Vs=on(function(b,T){var H=Hu(T);return vA(H)&&(H=t),vA(b)?Eu(b,ji(T,1,vA,!0),t,H):[]});function ua(b,T,H){var Ce=b==null?0:b.length;return Ce?(T=H||T===t?1:To(T),Vr(b,T<0?0:T,Ce)):[]}function gs(b,T,H){var Ce=b==null?0:b.length;return Ce?(T=H||T===t?1:To(T),T=Ce-T,Vr(b,0,T<0?0:T)):[]}function zA(b,T){return b&&b.length?_a(b,Pi(T,3),!0,!0):[]}function Io(b,T){return b&&b.length?_a(b,Pi(T,3),!0):[]}function Ah(b,T,H,Ce){var $e=b==null?0:b.length;return $e?(H&&typeof H!="number"&&S(b,T,H)&&(H=0,Ce=$e),sh(b,T,H,Ce)):[]}function gA(b,T,H){var Ce=b==null?0:b.length;if(!Ce)return-1;var $e=H==null?0:To(H);return $e<0&&($e=Ms(Ce+$e,0)),bc(b,Pi(T,3),$e)}function dc(b,T,H){var Ce=b==null?0:b.length;if(!Ce)return-1;var $e=Ce-1;return H!==t&&($e=To(H),$e=H<0?Ms(Ce+$e,0):Qs($e,Ce-1)),bc(b,Pi(T,3),$e,!0)}function Fc(b){var T=b==null?0:b.length;return T?ji(b,1):[]}function xa(b){var T=b==null?0:b.length;return T?ji(b,Je):[]}function Pl(b,T){var H=b==null?0:b.length;return H?(T=T===t?1:To(T),ji(b,T)):[]}function Kd(b){for(var T=-1,H=b==null?0:b.length,Ce={};++T<H;){var $e=b[T];Ce[$e[0]]=$e[1]}return Ce}function Ih(b){return b&&b.length?b[0]:t}function Th(b,T,H){var Ce=b==null?0:b.length;if(!Ce)return-1;var $e=H==null?0:To(H);return $e<0&&($e=Ms(Ce+$e,0)),xs(b,T,$e)}function Hm(b){var T=b==null?0:b.length;return T?Vr(b,0,-1):[]}var q0=on(function(b){var T=rs(b,ql);return T.length&&T[0]===b[0]?Kc(T):[]}),Rd=on(function(b){var T=Hu(b),H=rs(b,ql);return T===Hu(H)?T=t:H.pop(),H.length&&H[0]===b[0]?Kc(H,Pi(T,2)):[]}),dm=on(function(b){var T=Hu(b),H=rs(b,ql);return T=typeof T=="function"?T:t,T&&H.pop(),H.length&&H[0]===b[0]?Kc(H,t,T):[]});function vf(b,T){return b==null?"":Oc.call(b,T)}function Hu(b){var T=b==null?0:b.length;return T?b[T-1]:t}function Dd(b,T,H){var Ce=b==null?0:b.length;if(!Ce)return-1;var $e=Ce;return H!==t&&($e=To(H),$e=$e<0?Ms(Ce+$e,0):Qs($e,Ce-1)),T===T?Qf(b,T,$e):bc(b,xc,$e,!0)}function $m(b,T){return b&&b.length?ct(b,To(T)):t}var Zm=on(fm);function fm(b,T){return b&&b.length&&T&&T.length?It(b,T):b}function $u(b,T,H){return b&&b.length&&T&&T.length?It(b,T,Pi(H,2)):b}function Cf(b,T,H){return b&&b.length&&T&&T.length?It(b,T,t,H):b}var kh=Ia(function(b,T){var H=b==null?0:b.length,Ce=Pc(b,T);return Pt(b,rs(T,function($e){return E($e,H)?+$e:$e}).sort(Es)),Ce});function fc(b,T){var H=[];if(!(b&&b.length))return H;var Ce=-1,$e=[],ht=b.length;for(T=Pi(T,3);++Ce<ht;){var Dt=b[Ce];T(Dt,Ce,b)&&(H.push(Dt),$e.push(Ce))}return Pt(b,$e),H}function pm(b){return b==null?b:ps.call(b)}function mm(b,T,H){var Ce=b==null?0:b.length;return Ce?(H&&typeof H!="number"&&S(b,T,H)?(T=0,H=Ce):(T=T==null?0:To(T),H=H===t?Ce:To(H)),Vr(b,T,H)):[]}function Xm(b,T){return Yo(b,T)}function Vg(b,T,H){return bo(b,T,Pi(H,2))}function Fd(b,T){var H=b==null?0:b.length;if(H){var Ce=Yo(b,T);if(Ce<H&&mc(b[Ce],T))return Ce}return-1}function Hg(b,T){return Yo(b,T,!0)}function Dp(b,T,H){return bo(b,T,Pi(H,2),!0)}function tp(b,T){var H=b==null?0:b.length;if(H){var Ce=Yo(b,T,!0)-1;if(mc(b[Ce],T))return Ce}return-1}function Jm(b){return b&&b.length?Ro(b):[]}function np(b,T){return b&&b.length?Ro(b,Pi(T,2)):[]}function $g(b){var T=b==null?0:b.length;return T?Vr(b,1,T):[]}function Zg(b,T,H){return b&&b.length?(T=H||T===t?1:To(T),Vr(b,0,T<0?0:T)):[]}function e0(b,T,H){var Ce=b==null?0:b.length;return Ce?(T=H||T===t?1:To(T),T=Ce-T,Vr(b,T<0?0:T,Ce)):[]}function t0(b,T){return b&&b.length?_a(b,Pi(T,3),!1,!0):[]}function Vy(b,T){return b&&b.length?_a(b,Pi(T,3)):[]}var gm=on(function(b){return qi(ji(b,1,vA,!0))}),V0=on(function(b){var T=Hu(b);return vA(T)&&(T=t),qi(ji(b,1,vA,!0),Pi(T,2))}),n0=on(function(b){var T=Hu(b);return T=typeof T=="function"?T:t,qi(ji(b,1,vA,!0),t,T)});function _f(b){return b&&b.length?qi(b):[]}function Kl(b,T){return b&&b.length?qi(b,Pi(T,2)):[]}function bf(b,T){return T=typeof T=="function"?T:t,b&&b.length?qi(b,t,T):[]}function r0(b){if(!(b&&b.length))return[];var T=0;return b=Nu(b,function(H){if(vA(H))return T=Ms(H.length,T),!0}),bd(T,function(H){return rs(b,rf(H))})}function Va(b,T){if(!(b&&b.length))return[];var H=r0(b);return T==null?H:rs(H,function(Ce){return As(T,t,Ce)})}var H0=on(function(b,T){return vA(b)?Eu(b,T):[]}),i0=on(function(b){return yl(Nu(b,vA))}),Hy=on(function(b){var T=Hu(b);return vA(T)&&(T=t),yl(Nu(b,vA),Pi(T,2))}),$y=on(function(b){var T=Hu(b);return T=typeof T=="function"?T:t,yl(Nu(b,vA),t,T)}),Xg=on(r0);function Jg(b,T){return DA(b||[],T||[],Qo)}function e1(b,T){return DA(b||[],T||[],ir)}var Ma=on(function(b){var T=b.length,H=T>1?b[T-1]:t;return H=typeof H=="function"?(b.pop(),H):t,Va(b,H)});function Fp(b){var T=st(b);return T.__chain__=!0,T}function t1(b,T){return T(b),b}function NA(b,T){return T(b)}var rp=Ia(function(b){var T=b.length,H=T?b[0]:0,Ce=this.__wrapped__,$e=function(ht){return Pc(ht,b)};return T>1||this.__actions__.length||!(Ce instanceof ri)||!E(H)?this.thru($e):(Ce=Ce.slice(H,+H+(T?1:0)),Ce.__actions__.push({func:NA,args:[$e],thisArg:t}),new Po(Ce,this.__chain__).thru(function(ht){return T&&!ht.length&&ht.push(t),ht}))});function Ph(){return Fp(this)}function Ld(){return new Po(this.value(),this.__chain__)}function Lp(){this.__values__===t&&(this.__values__=A0(this.value()));var b=this.__index__>=this.__values__.length,T=b?t:this.__values__[this.__index__++];return{done:b,value:T}}function Up(){return this}function Zy(b){for(var T,H=this;H instanceof Js;){var Ce=UA(H);Ce.__index__=0,Ce.__values__=t,T?$e.__wrapped__=Ce:T=Ce;var $e=Ce;H=H.__wrapped__}return $e.__wrapped__=b,T}function $0(){var b=this.__wrapped__;if(b instanceof ri){var T=b;return this.__actions__.length&&(T=new ri(this)),T=T.reverse(),T.__actions__.push({func:NA,args:[pm],thisArg:t}),new Po(T,this.__chain__)}return this.thru(pm)}function n1(){return ta(this.__wrapped__,this.__actions__)}var Z0=hu(function(b,T,H){mo.call(b,H)?++b[H]:Yu(b,H,1)});function r1(b,T,H){var Ce=xo(b)?mh:td;return H&&S(b,T,H)&&(T=t),Ce(b,Pi(T,3))}function ym(b,T){var H=xo(b)?Nu:Bu;return H(b,Pi(T,3))}var vm=id(gA),o0=id(dc);function Cm(b,T){return ji(xf(b,T),1)}function Xy(b,T){return ji(xf(b,T),Je)}function X0(b,T,H){return H=H===t?1:To(H),ji(xf(b,T),H)}function s0(b,T){var H=xo(b)?fl:cA;return H(b,Pi(T,3))}function _m(b,T){var H=xo(b)?vd:Ql;return H(b,Pi(T,3))}var J0=hu(function(b,T,H){mo.call(b,H)?b[H].push(T):Yu(b,H,[T])});function a0(b,T,H,Ce){b=Lc(b)?b:Ru(b),H=H&&!Ce?To(H):0;var $e=b.length;return H<0&&(H=Ms($e+H,0)),u1(b)?H<=$e&&b.indexOf(T,H)>-1:!!$e&&xs(b,T,H)>-1}var i1=on(function(b,T,H){var Ce=-1,$e=typeof T=="function",ht=Lc(b)?un(b.length):[];return cA(b,function(Dt){ht[++Ce]=$e?As(T,Dt,H):sl(Dt,T,H)}),ht}),o1=hu(function(b,T,H){Yu(b,H,T)});function xf(b,T){var H=xo(b)?rs:Oe;return H(b,Pi(T,3))}function bm(b,T,H,Ce){return b==null?[]:(xo(T)||(T=T==null?[]:[T]),H=Ce?t:H,xo(H)||(H=H==null?[]:[H]),pt(b,T,H))}var pc=hu(function(b,T,H){b[H?0:1].push(T)},function(){return[[],[]]});function Mf(b,T,H){var Ce=xo(b)?yh:jf,$e=arguments.length<3;return Ce(b,Pi(T,4),H,$e,cA)}function xm(b,T,H){var Ce=xo(b)?tf:jf,$e=arguments.length<3;return Ce(b,Pi(T,4),H,$e,Ql)}function m(b,T){var H=xo(b)?Nu:Bu;return H(b,vr(Pi(T,3)))}function _(b){var T=xo(b)?ou:Cn;return T(b)}function F(b,T,H){(H?S(b,T,H):T===t)?T=1:T=To(T);var Ce=xo(b)?oh:Mn;return Ce(b,T)}function Q(b){var T=xo(b)?uf:Er;return T(b)}function le(b){if(b==null)return 0;if(Lc(b))return u1(b)?Zi(b):b.length;var T=ba(b);return T==Kt||T==Fn?b.size:ee(b).length}function ve(b,T,H){var Ce=xo(b)?sA:ci;return H&&S(b,T,H)&&(T=t),Ce(b,Pi(T,3))}var tt=on(function(b,T){if(b==null)return[];var H=T.length;return H>1&&S(b,T[0],T[1])?T=[]:H>2&&S(T[0],T[1],T[2])&&(T=[T[0]]),pt(b,ji(T,1),[])}),Ot=Go||function(){return Or.Date.now()};function jt(b,T){if(typeof T!="function")throw new pl(l);return b=To(b),function(){if(--b<1)return T.apply(this,arguments)}}function Sn(b,T,H){return T=H?t:T,T=b&&T==null?b.length:T,qo(b,G,t,t,t,t,T)}function or(b,T){var H;if(typeof T!="function")throw new pl(l);return b=To(b),function(){return--b>0&&(H=T.apply(this,arguments)),b<=1&&(T=t),H}}var ur=on(function(b,T,H){var Ce=W;if(H.length){var $e=Na(H,Oh(ur));Ce|=q}return qo(b,Ce,T,H,$e)}),tr=on(function(b,T,H){var Ce=W|V;if(H.length){var $e=Na(H,Oh(tr));Ce|=q}return qo(T,Ce,b,H,$e)});function Ur(b,T,H){T=H?t:T;var Ce=qo(b,ie,t,t,t,t,t,T);return Ce.placeholder=Ur.placeholder,Ce}function ei(b,T,H){T=H?t:T;var Ce=qo(b,ne,t,t,t,t,t,T);return Ce.placeholder=ei.placeholder,Ce}function ai(b,T,H){var Ce,$e,ht,Dt,Vt,An,Qn=0,qn=!1,fr=!1,Yr=!0;if(typeof b!="function")throw new pl(l);T=zc(T)||0,vl(H)&&(qn=!!H.leading,fr="maxWait"in H,ht=fr?Ms(zc(H.maxWait)||0,T):ht,Yr="trailing"in H?!!H.trailing:Yr);function ki(pu){var sp=Ce,Im=$e;return Ce=$e=t,Qn=pu,Dt=b.apply(Im,sp),Dt}function io(pu){return Qn=pu,Vt=ii(vs,T),qn?ki(pu):Dt}function Jo(pu){var sp=pu-An,Im=pu-Qn,h8=T-sp;return fr?Qs(h8,ht-Im):h8}function oo(pu){var sp=pu-An,Im=pu-Qn;return An===t||sp>=T||sp<0||fr&&Im>=ht}function vs(){var pu=Ot();if(oo(pu))return Ts(pu);Vt=ii(vs,Jo(pu))}function Ts(pu){return Vt=t,Yr&&Ce?ki(pu):(Ce=$e=t,Dt)}function Gd(){Vt!==t&&dA(Vt),Qn=0,Ce=An=$e=Vt=t}function Lh(){return Vt===t?Dt:Ts(Ot())}function Qd(){var pu=Ot(),sp=oo(pu);if(Ce=arguments,$e=this,An=pu,sp){if(Vt===t)return io(An);if(fr)return dA(Vt),Vt=ii(vs,T),ki(An)}return Vt===t&&(Vt=ii(vs,T)),Dt}return Qd.cancel=Gd,Qd.flush=Lh,Qd}var Rl=on(function(b,T){return Mh(b,1,T)}),hn=on(function(b,T,H){return Mh(b,zc(T)||0,H)});function Xt(b){return qo(b,fe)}function pn(b,T){if(typeof b!="function"||T!=null&&typeof T!="function")throw new pl(l);var H=function(){var Ce=arguments,$e=T?T.apply(this,Ce):Ce[0],ht=H.cache;if(ht.has($e))return ht.get($e);var Dt=b.apply(this,Ce);return H.cache=ht.set($e,Dt)||ht,Dt};return H.cache=new(pn.Cache||AA),H}pn.Cache=AA;function vr(b){if(typeof b!="function")throw new pl(l);return function(){var T=arguments;switch(T.length){case 0:return!b.call(this);case 1:return!b.call(this,T[0]);case 2:return!b.call(this,T[0],T[1]);case 3:return!b.call(this,T[0],T[1],T[2])}return!b.apply(this,T)}}function gi(b){return or(2,b)}var Di=Iu(function(b,T){T=T.length==1&&xo(T[0])?rs(T[0],za(Pi())):rs(ji(T,1),za(Pi()));var H=T.length;return on(function(Ce){for(var $e=-1,ht=Qs(Ce.length,H);++$e<ht;)Ce[$e]=T[$e].call(this,Ce[$e]);return As(b,this,Ce)})}),Ti=on(function(b,T){var H=Na(T,Oh(Ti));return qo(b,q,t,T,H)}),Ki=on(function(b,T){var H=Na(T,Oh(Ki));return qo(b,te,t,T,H)}),yA=Ia(function(b,T){return qo(b,oe,t,t,t,T)});function ys(b,T){if(typeof b!="function")throw new pl(l);return T=T===t?T:To(T),on(b,T)}function Ud(b,T){if(typeof b!="function")throw new pl(l);return T=T==null?0:Ms(To(T),0),on(function(H){var Ce=H[T],$e=Vl(H,0,T);return Ce&&yu($e,Ce),As(b,this,$e)})}function s1(b,T,H){var Ce=!0,$e=!0;if(typeof b!="function")throw new pl(l);return vl(H)&&(Ce="leading"in H?!!H.leading:Ce,$e="trailing"in H?!!H.trailing:$e),ai(b,T,{leading:Ce,maxWait:T,trailing:$e})}function A_(b){return Sn(b,1)}function Jy(b,T){return Ti(FA(T),b)}function u_(){if(!arguments.length)return[];var b=arguments[0];return xo(b)?b:[b]}function eg(b){return gl(b,P)}function c_(b,T){return T=typeof T=="function"?T:t,gl(b,P,T)}function ev(b){return gl(b,B|P)}function h_(b,T){return T=typeof T=="function"?T:t,gl(b,B|P,T)}function Kh(b,T){return T==null||Jr(b,T,De(T))}function mc(b,T){return b===T||b!==b&&T!==T}var d_=pf(au),f_=pf(function(b,T){return b>=T}),zp=wh(function(){return arguments}())?wh:function(b){return Al(b)&&mo.call(b,"callee")&&!Jc.call(b,"callee")},xo=un.isArray,p_=Ri?za(Ri):uc;function Lc(b){return b!=null&&Mm(b.length)&&!Rh(b)}function vA(b){return Al(b)&&Lc(b)}function m_(b){return b===!0||b===!1||Al(b)&&Ys(b)==Te}var Uc=Ed||w3,g_=Yi?za(Yi):uu;function y_(b){return Al(b)&&b.nodeType===1&&!wm(b)}function v_(b){if(b==null)return!0;if(Lc(b)&&(xo(b)||typeof b=="string"||typeof b.splice=="function"||Uc(b)||Sm(b)||zp(b)))return!b.length;var T=ba(b);if(T==Kt||T==Fn)return!b.size;if(Ne(b))return!ee(b).length;for(var H in b)if(mo.call(b,H))return!1;return!0}function C_(b,T){return Il(b,T)}function u3(b,T,H){H=typeof H=="function"?H:t;var Ce=H?H(b,T):t;return Ce===t?Il(b,T,t,H):!!Ce}function tv(b){if(!Al(b))return!1;var T=Ys(b);return T==nt||T==Ue||typeof b.message=="string"&&typeof b.name=="string"&&!wm(b)}function __(b){return typeof b=="number"&&ac(b)}function Rh(b){if(!vl(b))return!1;var T=Ys(b);return T==_t||T==gt||T==kt||T==nn}function nv(b){return typeof b=="number"&&b==To(b)}function Mm(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=Ke}function vl(b){var T=typeof b;return b!=null&&(T=="object"||T=="function")}function Al(b){return b!=null&&typeof b=="object"}var tg=mi?za(mi):a;function a1(b,T){return b===T||c(b,T,Xo(T))}function c3(b,T,H){return H=typeof H=="function"?H:t,c(b,T,Xo(T),H)}function h3(b){return ip(b)&&b!=+b}function d3(b){if(ke(b))throw new Ei(s);return C(b)}function l0(b){return b===null}function Pu(b){return b==null}function ip(b){return typeof b=="number"||Al(b)&&Ys(b)==$t}function wm(b){if(!Al(b)||Ys(b)!=_n)return!1;var T=xl(b);if(T===null)return!0;var H=mo.call(T,"constructor")&&T.constructor;return typeof H=="function"&&H instanceof H&&Xc.call(H)==Xi}var l1=Ds?za(Ds):M;function b_(b){return nv(b)&&b>=-9007199254740991&&b<=Ke}var A1=Ua?za(Ua):I;function u1(b){return typeof b=="string"||!xo(b)&&Al(b)&&Ys(b)==an}function uh(b){return typeof b=="symbol"||Al(b)&&Ys(b)==Bn}var Sm=SA?za(SA):z;function f3(b){return b===t}function x_(b){return Al(b)&&ba(b)==lr}function rv(b){return Al(b)&&Ys(b)==hr}var iv=pf(ge),M_=pf(function(b,T){return b<=T});function A0(b){if(!b)return[];if(Lc(b))return u1(b)?aA(b):$l(b);if(nu&&b[nu])return Ip(b[nu]());var T=ba(b),H=T==Kt?$c:T==Fn?tl:Ru;return H(b)}function zd(b){if(!b)return b===0?b:0;if(b=zc(b),b===Je||b===-1/0){var T=b<0?-1:1;return T*je}return b===b?b:0}function To(b){var T=zd(b),H=T%1;return T===T?H?T-H:T:0}function c1(b){return b?Qa(To(b),0,Le):0}function zc(b){if(typeof b=="number")return b;if(uh(b))return Pe;if(vl(b)){var T=typeof b.valueOf=="function"?b.valueOf():b;b=vl(T)?T+"":T}if(typeof b!="string")return b===0?b:+b;b=of(b);var H=_s.test(b);return H||Ja.test(b)?Gn(b.slice(2),H?2:8):$r.test(b)?Pe:+b}function u0(b){return LA(b,ot(b))}function ov(b){return b?Qa(To(b),-9007199254740991,Ke):b===0?b:0}function Us(b){return b==null?"":to(b)}var sv=Tu(function(b,T){if(Ne(T)||Lc(T)){LA(T,De(T),b);return}for(var H in T)mo.call(T,H)&&Qo(b,H,T[H])}),w_=Tu(function(b,T){LA(T,ot(T),b)}),h=Tu(function(b,T,H,Ce){LA(T,ot(T),b,Ce)}),A=Tu(function(b,T,H,Ce){LA(T,De(T),b,Ce)}),d=Ia(Pc);function y(b,T){var H=xh(b);return T==null?H:ws(H,T)}var w=on(function(b,T){b=us(b);var H=-1,Ce=T.length,$e=Ce>2?T[2]:t;for($e&&S(T[0],T[1],$e)&&(Ce=1);++H<Ce;)for(var ht=T[H],Dt=ot(ht),Vt=-1,An=Dt.length;++Vt<An;){var Qn=Dt[Vt],qn=b[Qn];(qn===t||mc(qn,nl[Qn])&&!mo.call(b,Qn))&&(b[Qn]=ht[Qn])}return b}),R=on(function(b){return b.push(t,Jf),As(vn,t,b)});function U(b,T){return Yh(b,Pi(T,3),ol)}function j(b,T){return Yh(b,Pi(T,3),Ou)}function X(b,T){return b==null?b:Is(b,Pi(T,3),ot)}function re(b,T){return b==null?b:ah(b,Pi(T,3),ot)}function de(b,T){return b&&ol(b,Pi(T,3))}function xe(b,T){return b&&Ou(b,Pi(T,3))}function Fe(b){return b==null?[]:KA(b,De(b))}function ze(b){return b==null?[]:KA(b,ot(b))}function Ye(b,T,H){var Ce=b==null?t:su(b,T);return Ce===t?H:Ce}function et(b,T){return b!=null&&hm(b,T,hA)}function At(b,T){return b!=null&&hm(b,T,lu)}var yt=kp(function(b,T,H){T!=null&&typeof T.toString!="function"&&(T=eu.call(T)),b[T]=H},Av(Xu)),Wt=kp(function(b,T,H){T!=null&&typeof T.toString!="function"&&(T=eu.call(T)),mo.call(b,T)?b[T].push(H):b[T]=[H]},Pi),St=on(sl);function De(b){return Lc(b)?iu(b):ee(b)}function ot(b){return Lc(b)?iu(b,!0):se(b)}function Tt(b,T){var H={};return T=Pi(T,3),ol(b,function(Ce,$e,ht){Yu(H,T(Ce,$e,ht),Ce)}),H}function dn(b,T){var H={};return T=Pi(T,3),ol(b,function(Ce,$e,ht){Yu(H,$e,T(Ce,$e,ht))}),H}var zn=Tu(function(b,T,H){Ze(b,T,H)}),vn=Tu(function(b,T,H,Ce){Ze(b,T,H,Ce)}),On=Ia(function(b,T){var H={};if(b==null)return H;var Ce=!1;T=rs(T,function(ht){return ht=al(ht,b),Ce||(Ce=ht.length>1),ht}),LA(b,ad(b),H),Ce&&(H=gl(H,B|k|P,Bh));for(var $e=T.length;$e--;)va(H,T[$e]);return H});function er(b,T){return sr(b,vr(Pi(T)))}var Nn=Ia(function(b,T){return b==null?{}:bt(b,T)});function sr(b,T){if(b==null)return{};var H=rs(ad(b),function(Ce){return[Ce]});return T=Pi(T),Bt(b,H,function(Ce,$e){return T(Ce,$e[0])})}function In(b,T,H){T=al(T,b);var Ce=-1,$e=T.length;for($e||($e=1,b=t);++Ce<$e;){var ht=b==null?t:b[Aa(T[Ce])];ht===t&&(Ce=$e,ht=H),b=Rh(ht)?ht.call(b):ht}return b}function zr(b,T,H){return b==null?b:ir(b,T,H)}function xi(b,T,H,Ce){return Ce=typeof Ce=="function"?Ce:t,b==null?b:ir(b,T,H,Ce)}var hi=Pp(De),Hr=Pp(ot);function Do(b,T,H){var Ce=xo(b),$e=Ce||Uc(b)||Sm(b);if(T=Pi(T,4),H==null){var ht=b&&b.constructor;$e?H=Ce?new ht:[]:vl(b)?H=Rh(ht)?xh(xl(b)):{}:H={}}return($e?fl:ol)(b,function(Dt,Vt,An){return T(H,Dt,Vt,An)}),H}function ul(b,T){return b==null?!0:va(b,T)}function CA(b,T,H){return b==null?b:Ca(b,T,FA(H))}function Ku(b,T,H,Ce){return Ce=typeof Ce=="function"?Ce:t,b==null?b:Ca(b,T,FA(H),Ce)}function Ru(b){return b==null?[]:Hh(b,De(b))}function Nc(b){return b==null?[]:Hh(b,ot(b))}function du(b,T,H){return H===t&&(H=T,T=t),H!==t&&(H=zc(H),H=H===H?H:0),T!==t&&(T=zc(T),T=T===T?T:0),Qa(zc(b),T,H)}function Ha(b,T,H){return T=zd(T),H===t?(H=T,T=0):H=zd(H),b=zc(b),RA(b,T,H)}function WA(b,T,H){if(H&&typeof H!="boolean"&&S(b,T,H)&&(T=H=t),H===t&&(typeof T=="boolean"?(H=T,T=t):typeof b=="boolean"&&(H=b,b=t)),b===t&&T===t?(b=0,T=1):(b=zd(b),T===t?(T=b,b=0):T=zd(T)),b>T){var Ce=b;b=T,T=Ce}if(H||b%1||T%1){var $e=bh();return Qs(b+$e*(T-b+Br("1e-"+(($e+"").length-1))),T)}return Lt(b,T)}var fu=rd(function(b,T,H){return T=T.toLowerCase(),b+(H?jA(T):T)});function jA(b){return h1(Us(b).toLowerCase())}function Zu(b){return b=Us(b),b&&b.replace(Wo,sf).replace(oA,"")}function Dh(b,T,H){b=Us(b),T=to(T);var Ce=b.length;H=H===t?Ce:Qa(To(H),0,Ce);var $e=H;return H-=T.length,H>=0&&b.slice(H,$e)==T}function GA(b){return b=Us(b),b&&zt.test(b)?b.replace(ut,vu):b}function Wc(b){return b=Us(b),b&&Jt.test(b)?b.replace(Tr,"\\$&"):b}var _A=rd(function(b,T,H){return b+(H?"-":"")+T.toLowerCase()}),QA=rd(function(b,T,H){return b+(H?" ":"")+T.toLowerCase()}),YA=Td("toLowerCase");function Zl(b,T,H){b=Us(b),T=To(T);var Ce=T?Zi(b):0;if(!T||Ce>=T)return b;var $e=(T-Ce)/2;return Eh(ru($e),H)+b+Eh(Bc($e),H)}function wa(b,T,H){b=Us(b),T=To(T);var Ce=T?Zi(b):0;return T&&Ce<T?b+Eh(T-Ce,H):b}function Nd(b,T,H){b=Us(b),T=To(T);var Ce=T?Zi(b):0;return T&&Ce<T?Eh(T-Ce,H)+b:b}function c0(b,T,H){return H||T==null?T=0:T&&(T=+T),th(Us(b).replace(br,""),T||0)}function Wd(b,T,H){return(H?S(b,T,H):T===t)?T=1:T=To(T),ln(Us(b),T)}function p3(){var b=arguments,T=Us(b[0]);return b.length<3?T:T.replace(b[1],b[2])}var h0=rd(function(b,T,H){return b+(H?"_":"")+T.toLowerCase()});function Em(b,T,H){return H&&typeof H!="number"&&S(b,T,H)&&(T=H=t),H=H===t?Le:H>>>0,H?(b=Us(b),b&&(typeof T=="string"||T!=null&&!l1(T))&&(T=to(T),!T&&Hc(b))?Vl(aA(b),0,H):b.split(T,H)):[]}var d0=rd(function(b,T,H){return b+(H?" ":"")+h1(T)});function f0(b,T,H){return b=Us(b),H=H==null?0:Qa(To(H),0,b.length),T=to(T),b.slice(H,H+T.length)==T}function p0(b,T,H){var Ce=st.templateSettings;H&&S(b,T,H)&&(T=t),b=Us(b),T=h({},T,Ce,Kp);var $e=h({},T.imports,Ce.imports,Kp),ht=De($e),Dt=Hh($e,ht),Vt,An,Qn=0,qn=T.interpolate||zo,fr="__p += '",Yr=Zc((T.escape||zo).source+"|"+qn.source+"|"+(qn===rn?Ao:zo).source+"|"+(T.evaluate||zo).source+"|$","g"),ki="//# sourceURL="+(mo.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eo+"]")+`
`;b.replace(Yr,function(oo,vs,Ts,Gd,Lh,Qd){return Ts||(Ts=Gd),fr+=b.slice(Qn,Qd).replace(So,Mc),vs&&(Vt=!0,fr+=`' +
__e(`+vs+`) +
'`),Lh&&(An=!0,fr+=`';
`+Lh+`;
__p += '`),Ts&&(fr+=`' +
((__t = (`+Ts+`)) == null ? '' : __t) +
'`),Qn=Qd+oo.length,oo}),fr+=`';
`;var io=mo.call(T,"variable")&&T.variable;if(!io)fr=`with (obj) {
`+fr+`
}
`;else if(Pr.test(io))throw new Ei(o);fr=(An?fr.replace(f,""):fr).replace(Qe,"$1").replace(Ee,"$1;"),fr="function("+(io||"obj")+`) {
`+(io?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(An?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fr+`return __p
}`;var Jo=k_(function(){return po(ht,ki+"return "+fr).apply(t,Dt)});if(Jo.source=fr,tv(Jo))throw Jo;return Jo}function S_(b){return Us(b).toLowerCase()}function E_(b){return Us(b).toUpperCase()}function B_(b,T,H){if(b=Us(b),b&&(H||T===t))return of(b);if(!b||!(T=to(T)))return b;var Ce=aA(b),$e=aA(T),ht=BA(Ce,$e),Dt=$h(Ce,$e)+1;return Vl(Ce,ht,Dt).join("")}function O_(b,T,H){if(b=Us(b),b&&(H||T===t))return b.slice(0,Md(b)+1);if(!b||!(T=to(T)))return b;var Ce=aA(b),$e=$h(Ce,aA(T))+1;return Vl(Ce,0,$e).join("")}function av(b,T,H){if(b=Us(b),b&&(H||T===t))return b.replace(br,"");if(!b||!(T=to(T)))return b;var Ce=aA(b),$e=BA(Ce,aA(T));return Vl(Ce,$e).join("")}function lv(b,T){var H=he,Ce=Me;if(vl(T)){var $e="separator"in T?T.separator:$e;H="length"in T?To(T.length):H,Ce="omission"in T?to(T.omission):Ce}b=Us(b);var ht=b.length;if(Hc(b)){var Dt=aA(b);ht=Dt.length}if(H>=ht)return b;var Vt=H-Zi(Ce);if(Vt<1)return Ce;var An=Dt?Vl(Dt,0,Vt).join(""):b.slice(0,Vt);if($e===t)return An+Ce;if(Dt&&(Vt+=An.length-Vt),l1($e)){if(b.slice(Vt).search($e)){var Qn,qn=An;for($e.global||($e=Zc($e.source,Us(ui.exec($e))+"g")),$e.lastIndex=0;Qn=$e.exec(qn);)var fr=Qn.index;An=An.slice(0,fr===t?Vt:fr)}}else if(b.indexOf(to($e),Vt)!=Vt){var Yr=An.lastIndexOf($e);Yr>-1&&(An=An.slice(0,Yr))}return An+Ce}function op(b){return b=Us(b),b&&at.test(b)?b.replace(it,Yf):b}var I_=rd(function(b,T,H){return b+(H?" ":"")+T.toUpperCase()}),h1=Td("toUpperCase");function T_(b,T,H){return b=Us(b),T=H?t:T,T===t?xd(b)?Vf(b):Vc(b):b.match(T)||[]}var k_=on(function(b,T){try{return As(b,t,T)}catch(H){return tv(H)?H:new Ei(H)}}),m3=Ia(function(b,T){return fl(T,function(H){H=Aa(H),Yu(b,H,ur(b[H],b))}),b});function g3(b){var T=b==null?0:b.length,H=Pi();return b=T?rs(b,function(Ce){if(typeof Ce[1]!="function")throw new pl(l);return[H(Ce[0]),Ce[1]]}):[],on(function(Ce){for(var $e=-1;++$e<T;){var ht=b[$e];if(As(ht[0],this,Ce))return As(ht[1],this,Ce)}})}function y3(b){return Qr(gl(b,B))}function Av(b){return function(){return b}}function v3(b,T){return b==null||b!==b?T:b}var C3=df(),jd=df(!0);function Xu(b){return b}function d1(b){return Y(typeof b=="function"?b:gl(b,B))}function _3(b){return Ie(gl(b,B))}function b3(b,T){return Ge(b,gl(T,B))}var x3=on(function(b,T){return function(H){return sl(H,b,T)}}),Ju=on(function(b,T){return function(H){return sl(b,H,T)}});function jc(b,T,H){var Ce=De(T),$e=KA(T,Ce);H==null&&!(vl(T)&&($e.length||!Ce.length))&&(H=T,T=b,b=this,$e=KA(T,De(T)));var ht=!(vl(H)&&"chain"in H)||!!H.chain,Dt=Rh(b);return fl($e,function(Vt){var An=T[Vt];b[Vt]=An,Dt&&(b.prototype[Vt]=function(){var Qn=this.__chain__;if(ht||Qn){var qn=b(this.__wrapped__),fr=qn.__actions__=$l(this.__actions__);return fr.push({func:An,args:arguments,thisArg:b}),qn.__chain__=Qn,qn}return An.apply(b,yu([this.value()],arguments))})}),b}function Bm(){return Or._===this&&(Or._=rl),this}function Fh(){}function Om(b){return b=To(b),on(function(T){return ct(T,b)})}var wf=Xf(rs),vW=Xf(mh),CW=Xf(sA);function c8(b){return K(b)?rf(Aa(b)):wt(b)}function _W(b){return function(T){return b==null?t:su(b,T)}}var bW=Rc(),xW=Rc(!0);function M3(){return[]}function w3(){return!1}function MW(){return{}}function wW(){return""}function SW(){return!0}function EW(b,T){if(b=To(b),b<1||b>Ke)return[];var H=Le,Ce=Qs(b,Le);T=Pi(T),b-=Le;for(var $e=bd(Ce,T);++H<b;)T(H);return $e}function BW(b){return xo(b)?rs(b,Aa):uh(b)?[b]:$l(Ls(Us(b)))}function OW(b){var T=++bu;return Us(b)+T}var IW=Vu(function(b,T){return b+T},0),TW=fA("ceil"),kW=Vu(function(b,T){return b/T},1),PW=fA("floor");function KW(b){return b&&b.length?Yl(b,Xu,au):t}function RW(b,T){return b&&b.length?Yl(b,Pi(T,2),au):t}function DW(b){return qh(b,Xu)}function FW(b,T){return qh(b,Pi(T,2))}function LW(b){return b&&b.length?Yl(b,Xu,ge):t}function UW(b,T){return b&&b.length?Yl(b,Pi(T,2),ge):t}var zW=Vu(function(b,T){return b*T},1),NW=fA("round"),WW=Vu(function(b,T){return b-T},0);function jW(b){return b&&b.length?Vh(b,Xu):0}function GW(b,T){return b&&b.length?Vh(b,Pi(T,2)):0}return st.after=jt,st.ary=Sn,st.assign=sv,st.assignIn=w_,st.assignInWith=h,st.assignWith=A,st.at=d,st.before=or,st.bind=ur,st.bindAll=m3,st.bindKey=tr,st.castArray=u_,st.chain=Fp,st.chunk=ll,st.compact=qa,st.concat=cs,st.cond=g3,st.conforms=y3,st.constant=Av,st.countBy=Z0,st.create=y,st.curry=Ur,st.curryRight=ei,st.debounce=ai,st.defaults=w,st.defaultsDeep=R,st.defer=Rl,st.delay=hn,st.difference=bi,st.differenceBy=ss,st.differenceWith=Vs,st.drop=ua,st.dropRight=gs,st.dropRightWhile=zA,st.dropWhile=Io,st.fill=Ah,st.filter=ym,st.flatMap=Cm,st.flatMapDeep=Xy,st.flatMapDepth=X0,st.flatten=Fc,st.flattenDeep=xa,st.flattenDepth=Pl,st.flip=Xt,st.flow=C3,st.flowRight=jd,st.fromPairs=Kd,st.functions=Fe,st.functionsIn=ze,st.groupBy=J0,st.initial=Hm,st.intersection=q0,st.intersectionBy=Rd,st.intersectionWith=dm,st.invert=yt,st.invertBy=Wt,st.invokeMap=i1,st.iteratee=d1,st.keyBy=o1,st.keys=De,st.keysIn=ot,st.map=xf,st.mapKeys=Tt,st.mapValues=dn,st.matches=_3,st.matchesProperty=b3,st.memoize=pn,st.merge=zn,st.mergeWith=vn,st.method=x3,st.methodOf=Ju,st.mixin=jc,st.negate=vr,st.nthArg=Om,st.omit=On,st.omitBy=er,st.once=gi,st.orderBy=bm,st.over=wf,st.overArgs=Di,st.overEvery=vW,st.overSome=CW,st.partial=Ti,st.partialRight=Ki,st.partition=pc,st.pick=Nn,st.pickBy=sr,st.property=c8,st.propertyOf=_W,st.pull=Zm,st.pullAll=fm,st.pullAllBy=$u,st.pullAllWith=Cf,st.pullAt=kh,st.range=bW,st.rangeRight=xW,st.rearg=yA,st.reject=m,st.remove=fc,st.rest=ys,st.reverse=pm,st.sampleSize=F,st.set=zr,st.setWith=xi,st.shuffle=Q,st.slice=mm,st.sortBy=tt,st.sortedUniq=Jm,st.sortedUniqBy=np,st.split=Em,st.spread=Ud,st.tail=$g,st.take=Zg,st.takeRight=e0,st.takeRightWhile=t0,st.takeWhile=Vy,st.tap=t1,st.throttle=s1,st.thru=NA,st.toArray=A0,st.toPairs=hi,st.toPairsIn=Hr,st.toPath=BW,st.toPlainObject=u0,st.transform=Do,st.unary=A_,st.union=gm,st.unionBy=V0,st.unionWith=n0,st.uniq=_f,st.uniqBy=Kl,st.uniqWith=bf,st.unset=ul,st.unzip=r0,st.unzipWith=Va,st.update=CA,st.updateWith=Ku,st.values=Ru,st.valuesIn=Nc,st.without=H0,st.words=T_,st.wrap=Jy,st.xor=i0,st.xorBy=Hy,st.xorWith=$y,st.zip=Xg,st.zipObject=Jg,st.zipObjectDeep=e1,st.zipWith=Ma,st.entries=hi,st.entriesIn=Hr,st.extend=w_,st.extendWith=h,jc(st,st),st.add=IW,st.attempt=k_,st.camelCase=fu,st.capitalize=jA,st.ceil=TW,st.clamp=du,st.clone=eg,st.cloneDeep=ev,st.cloneDeepWith=h_,st.cloneWith=c_,st.conformsTo=Kh,st.deburr=Zu,st.defaultTo=v3,st.divide=kW,st.endsWith=Dh,st.eq=mc,st.escape=GA,st.escapeRegExp=Wc,st.every=r1,st.find=vm,st.findIndex=gA,st.findKey=U,st.findLast=o0,st.findLastIndex=dc,st.findLastKey=j,st.floor=PW,st.forEach=s0,st.forEachRight=_m,st.forIn=X,st.forInRight=re,st.forOwn=de,st.forOwnRight=xe,st.get=Ye,st.gt=d_,st.gte=f_,st.has=et,st.hasIn=At,st.head=Ih,st.identity=Xu,st.includes=a0,st.indexOf=Th,st.inRange=Ha,st.invoke=St,st.isArguments=zp,st.isArray=xo,st.isArrayBuffer=p_,st.isArrayLike=Lc,st.isArrayLikeObject=vA,st.isBoolean=m_,st.isBuffer=Uc,st.isDate=g_,st.isElement=y_,st.isEmpty=v_,st.isEqual=C_,st.isEqualWith=u3,st.isError=tv,st.isFinite=__,st.isFunction=Rh,st.isInteger=nv,st.isLength=Mm,st.isMap=tg,st.isMatch=a1,st.isMatchWith=c3,st.isNaN=h3,st.isNative=d3,st.isNil=Pu,st.isNull=l0,st.isNumber=ip,st.isObject=vl,st.isObjectLike=Al,st.isPlainObject=wm,st.isRegExp=l1,st.isSafeInteger=b_,st.isSet=A1,st.isString=u1,st.isSymbol=uh,st.isTypedArray=Sm,st.isUndefined=f3,st.isWeakMap=x_,st.isWeakSet=rv,st.join=vf,st.kebabCase=_A,st.last=Hu,st.lastIndexOf=Dd,st.lowerCase=QA,st.lowerFirst=YA,st.lt=iv,st.lte=M_,st.max=KW,st.maxBy=RW,st.mean=DW,st.meanBy=FW,st.min=LW,st.minBy=UW,st.stubArray=M3,st.stubFalse=w3,st.stubObject=MW,st.stubString=wW,st.stubTrue=SW,st.multiply=zW,st.nth=$m,st.noConflict=Bm,st.noop=Fh,st.now=Ot,st.pad=Zl,st.padEnd=wa,st.padStart=Nd,st.parseInt=c0,st.random=WA,st.reduce=Mf,st.reduceRight=xm,st.repeat=Wd,st.replace=p3,st.result=In,st.round=NW,st.runInContext=en,st.sample=_,st.size=le,st.snakeCase=h0,st.some=ve,st.sortedIndex=Xm,st.sortedIndexBy=Vg,st.sortedIndexOf=Fd,st.sortedLastIndex=Hg,st.sortedLastIndexBy=Dp,st.sortedLastIndexOf=tp,st.startCase=d0,st.startsWith=f0,st.subtract=WW,st.sum=jW,st.sumBy=GW,st.template=p0,st.times=EW,st.toFinite=zd,st.toInteger=To,st.toLength=c1,st.toLower=S_,st.toNumber=zc,st.toSafeInteger=ov,st.toString=Us,st.toUpper=E_,st.trim=B_,st.trimEnd=O_,st.trimStart=av,st.truncate=lv,st.unescape=op,st.uniqueId=OW,st.upperCase=I_,st.upperFirst=h1,st.each=s0,st.eachRight=_m,st.first=Ih,jc(st,function(){var b={};return ol(st,function(T,H){mo.call(st.prototype,H)||(b[H]=T)}),b}(),{chain:!1}),st.VERSION=r,fl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){st[b].placeholder=st}),fl(["drop","take"],function(b,T){ri.prototype[b]=function(H){H=H===t?1:Ms(To(H),0);var Ce=this.__filtered__&&!T?new ri(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=Qs(H,Ce.__takeCount__):Ce.__views__.push({size:Qs(H,Le),type:b+(Ce.__dir__<0?"Right":"")}),Ce},ri.prototype[b+"Right"]=function(H){return this.reverse()[b](H).reverse()}}),fl(["filter","map","takeWhile"],function(b,T){var H=T+1,Ce=H==qe||H==vt;ri.prototype[b]=function($e){var ht=this.clone();return ht.__iteratees__.push({iteratee:Pi($e,3),type:H}),ht.__filtered__=ht.__filtered__||Ce,ht}}),fl(["head","last"],function(b,T){var H="take"+(T?"Right":"");ri.prototype[b]=function(){return this[H](1).value()[0]}}),fl(["initial","tail"],function(b,T){var H="drop"+(T?"":"Right");ri.prototype[b]=function(){return this.__filtered__?new ri(this):this[H](1)}}),ri.prototype.compact=function(){return this.filter(Xu)},ri.prototype.find=function(b){return this.filter(b).head()},ri.prototype.findLast=function(b){return this.reverse().find(b)},ri.prototype.invokeMap=on(function(b,T){return typeof b=="function"?new ri(this):this.map(function(H){return sl(H,b,T)})}),ri.prototype.reject=function(b){return this.filter(vr(Pi(b)))},ri.prototype.slice=function(b,T){b=To(b);var H=this;return H.__filtered__&&(b>0||T<0)?new ri(H):(b<0?H=H.takeRight(-b):b&&(H=H.drop(b)),T!==t&&(T=To(T),H=T<0?H.dropRight(-T):H.take(T-b)),H)},ri.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},ri.prototype.toArray=function(){return this.take(Le)},ol(ri.prototype,function(b,T){var H=/^(?:filter|find|map|reject)|While$/.test(T),Ce=/^(?:head|last)$/.test(T),$e=st[Ce?"take"+(T=="last"?"Right":""):T],ht=Ce||/^find/.test(T);$e&&(st.prototype[T]=function(){var Dt=this.__wrapped__,Vt=Ce?[1]:arguments,An=Dt instanceof ri,Qn=Vt[0],qn=An||xo(Dt),fr=function(vs){var Ts=$e.apply(st,yu([vs],Vt));return Ce&&Yr?Ts[0]:Ts};qn&&H&&typeof Qn=="function"&&Qn.length!=1&&(An=qn=!1);var Yr=this.__chain__,ki=!!this.__actions__.length,io=ht&&!Yr,Jo=An&&!ki;if(!ht&&qn){Dt=Jo?Dt:new ri(this);var oo=b.apply(Dt,Vt);return oo.__actions__.push({func:NA,args:[fr],thisArg:t}),new Po(oo,Yr)}return io&&Jo?b.apply(this,Vt):(oo=this.thru(fr),io?Ce?oo.value()[0]:oo.value():oo)})}),fl(["pop","push","shift","sort","splice","unshift"],function(b){var T=Cu[b],H=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(b);st.prototype[b]=function(){var $e=arguments;if(Ce&&!this.__chain__){var ht=this.value();return T.apply(xo(ht)?ht:[],$e)}return this[H](function(Dt){return T.apply(xo(Dt)?Dt:[],$e)})}}),ol(ri.prototype,function(b,T){var H=st[T];if(H){var Ce=H.name+"";mo.call(Ic,Ce)||(Ic[Ce]=[]),Ic[Ce].push({name:T,func:H})}}),Ic[kd(t,V).name]=[{name:"wrapper",func:t}],ri.prototype.clone=ms,ri.prototype.reverse=Wa,ri.prototype.value=ja,st.prototype.at=rp,st.prototype.chain=Ph,st.prototype.commit=Ld,st.prototype.next=Lp,st.prototype.plant=Zy,st.prototype.reverse=$0,st.prototype.toJSON=st.prototype.valueOf=st.prototype.value=n1,st.prototype.first=st.prototype.head,nu&&(st.prototype[nu]=Up),st},oc=Hf();$i?(($i.exports=oc)._=oc,ni._=oc):Or._=oc}).call(KG)}(Sv,Sv.exports)),Sv.exports}var G2=RG();const zE=dl(G2);function DG(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var U3,n7;function FG(){if(n7)return U3;n7=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return U3=n,U3}var LG=FG();const r7=dl(LG);var Hd=Uint8Array,ny=Uint16Array,UG=Int32Array,YD=new Hd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qD=new Hd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zG=new Hd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VD=function(n,e){for(var t=new ny(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new UG(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},HD=VD(YD,2),$D=HD.b,NG=HD.r;$D[28]=258,NG[258]=28;var WG=VD(qD,0),jG=WG.b,NE=new ny(32768);for(var Ul=0;Ul<32768;++Ul){var m0=(Ul&43690)>>1|(Ul&21845)<<1;m0=(m0&52428)>>2|(m0&13107)<<2,m0=(m0&61680)>>4|(m0&3855)<<4,NE[Ul]=((m0&65280)>>8|(m0&255)<<8)>>1}var Qv=function(n,e,t){for(var r=n.length,i=0,s=new ny(e);i<r;++i)n[i]&&++s[n[i]-1];var l=new ny(e);for(i=1;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var o;if(t){o=new ny(1<<e);var p=15-e;for(i=0;i<r;++i)if(n[i])for(var v=i<<4|n[i],x=e-n[i],B=l[n[i]-1]++<<x,k=B|(1<<x)-1;B<=k;++B)o[NE[B]>>p]=v}else for(o=new ny(r),i=0;i<r;++i)n[i]&&(o[i]=NE[l[n[i]-1]++]>>15-n[i]);return o},DC=new Hd(288);for(var Ul=0;Ul<144;++Ul)DC[Ul]=8;for(var Ul=144;Ul<256;++Ul)DC[Ul]=9;for(var Ul=256;Ul<280;++Ul)DC[Ul]=7;for(var Ul=280;Ul<288;++Ul)DC[Ul]=8;var ZD=new Hd(32);for(var Ul=0;Ul<32;++Ul)ZD[Ul]=5;var GG=Qv(DC,9,1),QG=Qv(ZD,5,1),z3=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ap=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},N3=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},YG=function(n){return(n+7)/8|0},qG=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Hd(n.subarray(e,t))},VG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Yd=function(n,e,t){var r=new Error(e||VG[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Yd),!t)throw r;return r},J6=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Hd(0);var l=!t,o=l||e.i!=2,p=e.i;l&&(t=new Hd(i*3));var v=function(nt){var _t=t.length;if(nt>_t){var gt=new Hd(Math.max(_t*2,nt));gt.set(t),t=gt}},x=e.f||0,B=e.p||0,k=e.b||0,P=e.l,D=e.d,N=e.m,W=e.n,V=i*8;do{if(!P){x=ap(n,B,1);var $=ap(n,B+1,3);if(B+=3,$)if($==1)P=GG,D=QG,N=9,W=5;else if($==2){var te=ap(n,B,31)+257,G=ap(n,B+10,15)+4,oe=te+ap(n,B+5,31)+1;B+=14;for(var fe=new Hd(oe),he=new Hd(19),Me=0;Me<G;++Me)he[zG[Me]]=ap(n,B+Me*3,7);B+=G*3;for(var me=z3(he),pe=(1<<me)-1,qe=Qv(he,me,1),Me=0;Me<oe;){var Se=qe[ap(n,B,pe)];B+=Se&15;var ie=Se>>4;if(ie<16)fe[Me++]=ie;else{var vt=0,Je=0;for(ie==16?(Je=3+ap(n,B,3),B+=2,vt=fe[Me-1]):ie==17?(Je=3+ap(n,B,7),B+=3):ie==18&&(Je=11+ap(n,B,127),B+=7);Je--;)fe[Me++]=vt}}var Ke=fe.subarray(0,te),je=fe.subarray(te);N=z3(Ke),W=z3(je),P=Qv(Ke,N,1),D=Qv(je,W,1)}else Yd(1);else{var ie=YG(B)+4,ne=n[ie-4]|n[ie-3]<<8,q=ie+ne;if(q>i){p&&Yd(0);break}o&&v(k+ne),t.set(n.subarray(ie,q),k),e.b=k+=ne,e.p=B=q*8,e.f=x;continue}if(B>V){p&&Yd(0);break}}o&&v(k+131072);for(var Pe=(1<<N)-1,Le=(1<<W)-1,Xe=B;;Xe=B){var vt=P[N3(n,B)&Pe],Ct=vt>>4;if(B+=vt&15,B>V){p&&Yd(0);break}if(vt||Yd(2),Ct<256)t[k++]=Ct;else if(Ct==256){Xe=B,P=null;break}else{var Gt=Ct-254;if(Ct>264){var Me=Ct-257,mt=YD[Me];Gt=ap(n,B,(1<<mt)-1)+$D[Me],B+=mt}var Ut=D[N3(n,B)&Le],kt=Ut>>4;Ut||Yd(3),B+=Ut&15;var je=jG[kt];if(kt>3){var mt=qD[kt];je+=N3(n,B)&(1<<mt)-1,B+=mt}if(B>V){p&&Yd(0);break}o&&v(k+131072);var Te=k+Gt;if(k<je){var Re=s-je,Ue=Math.min(je,Te);for(Re+k<0&&Yd(3);k<Ue;++k)t[k]=r[Re+k]}for(;k<Te;++k)t[k]=t[k-je]}}e.l=P,e.p=Xe,e.b=k,e.f=x,P&&(x=1,e.m=N,e.d=D,e.n=W)}while(!x);return k!=t.length&&l?qG(t,0,k):t.subarray(0,k)},HG=new Hd(0),$G=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Yd(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},ZG=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},XG=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Yd(6,"invalid zlib data"),(n[1]>>5&1)==1&&Yd(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function JG(n,e){return J6(n,{i:2},e,e)}function eQ(n,e){var t=$G(n);return t+8>n.length&&Yd(6,"invalid gzip data"),J6(n.subarray(t,-8),{i:2},new Hd(ZG(n)),e)}function tQ(n,e){return J6(n.subarray(XG(n),-4),{i:2},e,e)}function nQ(n,e){return n[0]==31&&n[1]==139&&n[2]==8?eQ(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?JG(n,e):tQ(n,e)}var rQ=typeof TextDecoder<"u"&&new TextDecoder,iQ=0;try{rQ.decode(HG,{stream:!0}),iQ=1}catch{}var oQ=Object.defineProperty,Yv=Math.pow,Za=(n,e)=>oQ(n,"name",{value:e,configurable:!0}),yc=(n,e,t)=>new Promise((r,i)=>{var s=p=>{try{o(t.next(p))}catch(v){i(v)}},l=p=>{try{o(t.throw(p))}catch(v){i(v)}},o=p=>p.done?r(p.value):Promise.resolve(p.value).then(s,l);o((t=t.apply(n,e)).next())});Za((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Za((s,l)=>{let o=document.createElement("img"),p=new AbortController,v=p.signal;return o.cancel=()=>{p.abort()},t||(n.getHeader().then(x=>{x.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):x.tileType===2?r="image/png":x.tileType===3?r="image/jpeg":x.tileType===4?r="image/webp":x.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,v).then(x=>{if(x){let B=new Blob([x.data],{type:r}),k=window.URL.createObjectURL(B);o.src=k,o.cancel=void 0,l(void 0,o)}}).catch(x=>{if(x.name!=="AbortError")throw x}),o},"createTile"),_removeTile:Za(function(s){let l=this._tiles[s];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var sQ=Za(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Za(()=>r.abort(),"cancel")}},"v3compat"),XD=class{constructor(e){this.tilev4=Za((t,r)=>yc(this,null,function*(){if(t.type==="json"){let P=t.url.substr(10),D=this.tiles.get(P);if(D||(D=new jE(P),this.tiles.set(P,D)),this.metadata)return{data:yield D.getTileJson(t.url)};let N=yield D.getHeader();return(N.minLon>=N.maxLon||N.minLat>=N.maxLat)&&console.error(`Bounds of PMTiles archive ${N.minLon},${N.minLat},${N.maxLon},${N.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:N.minZoom,maxzoom:N.maxZoom,bounds:[N.minLon,N.minLat,N.maxLon,N.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let l=s[1],o=this.tiles.get(l);o||(o=new jE(l),this.tiles.set(l,o));let p=s[2],v=s[3],x=s[4],B=yield o.getHeader(),k=yield o==null?void 0:o.getZxy(+p,+v,+x,r.signal);if(k)return{data:new Uint8Array(k.data),cacheControl:k.cacheControl,expires:k.expires};if(B.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=sQ(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Za(XD,"Protocol");var aQ=XD;function JD(n,e){return(e>>>0)*4294967296+(n>>>0)}Za(JD,"toNum");function eF(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return JD(n,i);throw new Error("Expected varint not more than 10 bytes")}Za(eF,"readVarintRemainder");function Y1(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,eF(r,n))}Za(Y1,"readVarint");function eB(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}Za(eB,"rotate");function tF(n,e){let t=Yv(2,n),r=e,i=e,s=e,l=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),eB(o,l,r,i),l[0]+=o*r,l[1]+=o*i,s=s/4,o*=2;return[n,l[0],l[1]]}Za(tF,"idOnLevel");var lQ=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function nF(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>Yv(2,n)-1||t>Yv(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=lQ[n],i=Yv(2,n),s=0,l=0,o=0,p=[e,t],v=i/2;for(;v>0;)s=(p[0]&v)>0?1:0,l=(p[1]&v)>0?1:0,o+=v*v*(3*s^l),eB(v,p,s,l),v=v/2;return r+o}Za(nF,"zxyToTileId");function AQ(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return tF(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Za(AQ,"tileIdToZxy");var uQ=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(uQ||{});function Q2(n,e){return yc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return nQ(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Za(Q2,"defaultDecompress");var cQ=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(cQ||{});function rF(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Za(rF,"tileTypeExt");var hQ=127;function iF(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Za(iF,"findTile");var dQ=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return yc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Za(dQ,"FileSource");var oF=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return yc(this,null,function*(){let s,l;r?l=r:(s=new AbortController,l=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let p;this.mustReload?p="reload":this.chromeWindowsNoCache&&(p="no-store");let v=yield fetch(this.url,{signal:l,cache:p,headers:o});if(e===0&&v.status===416){let k=v.headers.get("Content-Range");if(!k||!k.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+k.substr(8);v=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let x=v.headers.get("Etag");if(x!=null&&x.startsWith("W/")&&(x=null),v.status===416||i&&x&&x!==i)throw this.mustReload=!0,new WE(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(v.status>=300)throw new Error(`Bad response code: ${v.status}`);let B=v.headers.get("Content-Length");if(v.status===200&&(!B||+B>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield v.arrayBuffer(),etag:x||void 0,cacheControl:v.headers.get("Cache-Control")||void 0,expires:v.headers.get("Expires")||void 0}})}};Za(oF,"FetchSource");var fQ=oF;function Ef(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*Yv(2,32)+r}Za(Ef,"getUint64");function sF(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Ef(t,8),rootDirectoryLength:Ef(t,16),jsonMetadataOffset:Ef(t,24),jsonMetadataLength:Ef(t,32),leafDirectoryOffset:Ef(t,40),leafDirectoryLength:Ef(t,48),tileDataOffset:Ef(t,56),tileDataLength:Ef(t,64),numAddressedTiles:Ef(t,72),numTileEntries:Ef(t,80),numTileContents:Ef(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Za(sF,"bytesToHeader");function tB(n){let e={buf:new Uint8Array(n),pos:0},t=Y1(e),r=[],i=0;for(let s=0;s<t;s++){let l=Y1(e);r.push({tileId:i+l,offset:0,length:0,runLength:1}),i+=l}for(let s=0;s<t;s++)r[s].runLength=Y1(e);for(let s=0;s<t;s++)r[s].length=Y1(e);for(let s=0;s<t;s++){let l=Y1(e);l===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=l-1}return r}Za(tB,"deserializeIndex");var aF=class extends Error{};Za(aF,"EtagMismatch");var WE=aF;function nB(n,e){return yc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,hQ),i=sF(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),l=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=tB(yield e(s,i.internalCompression));return[i,[l,o.length,o]]})}Za(nB,"getHeaderAndRoot");function rB(n,e,t,r,i){return yc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),l=yield e(s.data,i.internalCompression),o=tB(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}Za(rB,"getDirectory");var pQ=class{constructor(e=100,t=!0,r=Q2){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return yc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield nB(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return yc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,l.data;let o=yield rB(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return yc(this,null,function*(){this.cache.delete(e.getKey())})}};Za(pQ,"ResolvedValueCache");var lF=class{constructor(e=100,t=!0,r=Q2){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return yc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,l)=>{nB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return yc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((p,v)=>{rB(e,this.decompress,t,r,i).then(x=>{p(x),this.prune()}).catch(x=>{v(x)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return yc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(l=>{i(),this.invalidations.delete(t)}).catch(l=>{s(l)})});this.invalidations.set(t,r)})}};Za(lF,"SharedPromiseCache");var mQ=lF,AF=class{constructor(e,t,r){typeof e=="string"?this.source=new fQ(e):this.source=e,r?this.decompress=r:this.decompress=Q2,t?this.cache=t:this.cache=new mQ}getHeader(){return yc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return yc(this,null,function*(){let s=nF(e,t,r),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,p=l.rootDirectoryLength;for(let v=0;v<=3;v++){let x=yield this.cache.getDirectory(this.source,o,p,l),B=iF(x,s);if(B){if(B.runLength>0){let k=yield this.source.getBytes(l.tileDataOffset+B.offset,B.length,i,l.etag);return{data:yield this.decompress(k.data,l.tileCompression),cacheControl:k.cacheControl,expires:k.expires}}o=l.leafDirectoryOffset+B.offset,p=B.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return yc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof WE)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return yc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return yc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof WE)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return yc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=rF(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Za(AF,"PMTiles");var jE=AF,gQ=8,yQ={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},vQ={"*":{type:"source"}},CQ=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],_Q={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},bQ={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},xQ={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},MQ={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},wQ={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},SQ={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},EQ={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},BQ=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],OQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},IQ={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},TQ={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},PQ={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},KQ={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},RQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},DQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},FQ={type:"array",value:"*"},LQ={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},UQ={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},zQ={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},NQ={type:"array",value:"*",minimum:1},WQ={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},jQ={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},GQ={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},QQ={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},YQ=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],qQ={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},VQ={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},HQ={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},$Q={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ZQ={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},XQ={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},JQ={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},eY={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},tY={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},nY={"*":{type:"string"}},Bs={$version:gQ,$root:yQ,sources:vQ,source:CQ,source_vector:_Q,source_raster:bQ,source_raster_dem:xQ,source_geojson:MQ,source_video:wQ,source_image:SQ,layer:EQ,layout:BQ,layout_background:OQ,layout_fill:IQ,layout_circle:TQ,layout_heatmap:kQ,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:PQ,layout_symbol:KQ,layout_raster:RQ,layout_hillshade:DQ,filter:FQ,filter_operator:LQ,geometry_type:UQ,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:zQ,expression:NQ,light:WQ,sky:jQ,terrain:GQ,projection:QQ,paint:YQ,paint_fill:qQ,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:VQ,paint_circle:HQ,paint_heatmap:$Q,paint_symbol:ZQ,paint_raster:XQ,paint_hillshade:JQ,paint_background:eY,transition:tY,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:nY};const rY=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function iY(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return rY.forEach(r=>{r in e&&(t[r]=e[r])}),t}function iB(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=iY(n[t],e[n[t].ref]));return n}function da(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!da(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!da(n[r],e[r]))return!1;return!0}return n===e}function Of(n,e){n.push(e)}function uF(n,e,t){Of(t,{command:"addSource",args:[n,e[n]]})}function cF(n,e,t){Of(e,{command:"removeSource",args:[n]}),t[n]=!0}function oY(n,e,t,r){cF(n,t,r),uF(n,e,t)}function sY(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!da(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!da(n[t][r],e[t][r]))return!1;return!0}function aY(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||cF(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?da(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&sY(n,e,i)?Of(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):oY(i,e,t,r)):uF(i,e,t))}function F_(n,e,t,r,i,s){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(da(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||da(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]})}function i7(n){return n.id}function o7(n,e){return n[e.id]=e,n}function lY(n,e,t){n=n||[],e=e||[];const r=n.map(i7),i=e.map(i7),s=n.reduce(o7,{}),l=e.reduce(o7,{}),o=r.slice(),p=Object.create(null);let v,x,B,k,P;for(let D=0,N=0;D<r.length;D++)v=r[D],Object.prototype.hasOwnProperty.call(l,v)?N++:(Of(t,{command:"removeLayer",args:[v]}),o.splice(o.indexOf(v,N),1));for(let D=0,N=0;D<i.length;D++)v=i[i.length-1-D],o[o.length-1-D]!==v&&(Object.prototype.hasOwnProperty.call(s,v)?(Of(t,{command:"removeLayer",args:[v]}),o.splice(o.lastIndexOf(v,o.length-N),1)):N++,k=o[o.length-D],Of(t,{command:"addLayer",args:[l[v],k]}),o.splice(o.length-D,0,v),p[v]=!0);for(let D=0;D<i.length;D++)if(v=i[D],x=s[v],B=l[v],!(p[v]||da(x,B))){if(!da(x.source,B.source)||!da(x["source-layer"],B["source-layer"])||!da(x.type,B.type)){Of(t,{command:"removeLayer",args:[v]}),k=o[o.lastIndexOf(v)+1],Of(t,{command:"addLayer",args:[B,k]});continue}F_(x.layout,B.layout,t,v,null,"setLayoutProperty"),F_(x.paint,B.paint,t,v,null,"setPaintProperty"),da(x.filter,B.filter)||Of(t,{command:"setFilter",args:[v,B.filter]}),(!da(x.minzoom,B.minzoom)||!da(x.maxzoom,B.maxzoom))&&Of(t,{command:"setLayerZoomRange",args:[v,B.minzoom,B.maxzoom]});for(P in x)Object.prototype.hasOwnProperty.call(x,P)&&(P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?F_(x[P],B[P],t,v,P.slice(6),"setPaintProperty"):da(x[P],B[P])||Of(t,{command:"setLayerProperty",args:[v,P,B[P]]})));for(P in B)!Object.prototype.hasOwnProperty.call(B,P)||Object.prototype.hasOwnProperty.call(x,P)||P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?F_(x[P],B[P],t,v,P.slice(6),"setPaintProperty"):da(x[P],B[P])||Of(t,{command:"setLayerProperty",args:[v,P,B[P]]}))}}function AY(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!da(n.version,e.version))return[{command:"setStyle",args:[e]}];da(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),da(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),da(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),da(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),da(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),da(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),da(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),da(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),da(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),da(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),da(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),da(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),da(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),da(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];aY(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(l=>{"source"in l&&r[l.source]?t.push({command:"removeLayer",args:[l.id]}):s.push(l)}),t=t.concat(i),lY(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class xr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function _y(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class Vp extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class oB{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new oB(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Y2={kind:"null"},Ir={kind:"number"},es={kind:"string"},No={kind:"boolean"},em={kind:"color"},q2={kind:"projectionDefinition"},Mg={kind:"object"},Lo={kind:"value"},uY={kind:"error"},V2={kind:"collator"},H2={kind:"formatted"},$2={kind:"padding"},sC={kind:"colorArray"},Z2={kind:"numberArray"},FC={kind:"resolvedImage"},X2={kind:"variableAnchorOffsetCollection"};function $d(n,e){return{kind:"array",itemType:n,N:e}}function Jl(n){if(n.kind==="array"){const e=Jl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const cY=[Y2,Ir,es,No,em,q2,H2,Mg,$d(Lo),$2,Z2,sC,FC,X2];function aC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!aC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of cY)if(!aC(t,e))return null}}return`Expected ${Jl(n)} but found ${Jl(e)} instead.`}function sB(n,e){return e.some(t=>t.kind===n.kind)}function wg(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function g0(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const hF=.96422,dF=1,fF=.82521,pF=4/29,uy=6/29,mF=3*uy*uy,hY=uy*uy*uy,dY=Math.PI/180,fY=180/Math.PI;function gF(n){return n=n%360,n<0&&(n+=360),n}function yF([n,e,t,r]){n=W3(n),e=W3(e),t=W3(t);let i,s;const l=j3((.2225045*n+.7168786*e+.0606169*t)/dF);n===e&&e===t?i=s=l:(i=j3((.4360747*n+.3850649*e+.1430804*t)/hF),s=j3((.0139322*n+.0971045*e+.7141733*t)/fF));const o=116*l-16;return[o<0?0:o,500*(i-l),200*(l-s),r]}function W3(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function j3(n){return n>hY?Math.pow(n,1/3):n/mF+pF}function vF([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,l=isNaN(t)?i:i-t/200;return i=dF*Q3(i),s=hF*Q3(s),l=fF*Q3(l),[G3(3.1338561*s-1.6168667*i-.4906146*l),G3(-.9787684*s+1.9161415*i+.033454*l),G3(.0719453*s-.2289914*i+1.4052427*l),r]}function G3(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function Q3(n){return n>uy?n*n*n:mF*(n-pF)}function pY(n){const[e,t,r,i]=yF(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?gF(Math.atan2(r,t)*fY):NaN,s,e,i]}function mY([n,e,t,r]){return n=isNaN(n)?0:n*dY,vF([t,Math.cos(n)*e,Math.sin(n)*e,r])}function gY([n,e,t,r]){n=gF(n),e/=100,t/=100;function i(s){const l=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[i(0),i(8),i(4),r]}const yY=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function qv(n,e){return yY(n,e)?n[e]:void 0}function vY(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=qv(CY,n);if(e){const[i,s,l]=e;return[i/255,s/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let l=1;return[L_(n.slice(l,l+=s)),L_(n.slice(l,l+=s)),L_(n.slice(l,l+=s)),L_(n.slice(l,l+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[l,o,p,v,x,B,k,P,D,N,W,V]=s,$=[v||" ",k||" ",N].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const ie=[p,B,D].join(""),ne=ie==="%%%"?100:ie===""?255:0;if(ne){const q=[q1(+o/ne,0,1),q1(+x/ne,0,1),q1(+P/ne,0,1),W?s7(+W,V):1];if(a7(q))return q}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,l,o,p,v,x,B,k]=r,P=[l||" ",p||" ",x].join("");if(P==="  "||P==="  /"||P===",,"||P===",,,"){const D=[+s,q1(+o,0,100),q1(+v,0,100),B?s7(+B,k):1];if(a7(D))return gY(D)}}}function L_(n){return parseInt(n.padEnd(2,n),16)/255}function s7(n,e){return q1(e?n/100:n,0,1)}function q1(n,e,t){return Math.min(Math.max(e,n),t)}function a7(n){return!n.some(Number.isNaN)}const CY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function D0(n,e,t){return n+t*(e-n)}function by(n,e,t){return n.map((r,i)=>D0(r,e[i],t))}function _Y(n){return n==="rgb"||n==="hcl"||n==="lab"}let Ra=class V1{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof V1)return e;if(typeof e!="string")return;const t=vY(e);if(t)return new V1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",pY(this.rgb))}get lab(){return this.overwriteGetter("lab",yF(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,l,o,p]=by(e.rgb,t.rgb,r);return new V1(s,l,o,p,!1)}case"hcl":{const[s,l,o,p]=e.hcl,[v,x,B,k]=t.hcl;let P,D;if(!isNaN(s)&&!isNaN(v)){let ie=v-s;v>s&&ie>180?ie-=360:v<s&&s-v>180&&(ie+=360),P=s+r*ie}else isNaN(s)?isNaN(v)?P=NaN:(P=v,(o===1||o===0)&&(D=x)):(P=s,(B===1||B===0)&&(D=l));const[N,W,V,$]=mY([P,D??D0(l,x,r),D0(o,B,r),D0(p,k,r)]);return new V1(N,W,V,$,!1)}case"lab":{const[s,l,o,p]=vF(by(e.lab,t.lab,r));return new V1(s,l,o,p,!1)}}}};Ra.black=new Ra(0,0,0,1);Ra.white=new Ra(1,1,1,1);Ra.transparent=new Ra(0,0,0,0);Ra.red=new Ra(1,0,0,1);class aB{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const bY=["bottom","center","top"];class GE{constructor(e,t,r,i,s,l){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=l}}class tm{constructor(e){this.sections=e}static fromString(e){return new tm([new GE(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof tm?e:tm.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Wh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Wh)return e;if(typeof e=="number")return new Wh([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Wh(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Wh(by(e.values,t.values,r))}}class jh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof jh)return e;if(typeof e=="number")return new jh([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new jh(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new jh(by(e.values,t.values,r))}}class Qc{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qc)return e;if(typeof e=="string"){const r=Ra.parse(e);return r?new Qc([r]):void 0}if(!Array.isArray(e))return;const t=[];for(const r of e){if(typeof r!="string")return;const i=Ra.parse(r);if(!i)return;t.push(i)}return new Qc(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r,i="rgb"){const s=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let l=0;l<e.values.length;l++)s.push(Ra.interpolate(e.values[l],t.values[l],r,i));return new Qc(s)}}class bA extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const xY=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Rf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Rf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!xY.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Rf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new bA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new bA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);l.push(i[o]);const[p,v]=i[o+1],[x,B]=s[o+1];l.push([D0(p,x,r),D0(v,B,r)])}return new Rf(l)}}class Qm{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Qm({name:e,available:!1}):null}}class Tf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Tf(e,t,r)}static parse(e){if(e instanceof Tf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Tf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Tf(e.from,e.to,e.transition);if(typeof e=="string")return new Tf(e,e,1)}}function CF(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function lC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Tf||n instanceof Ra||n instanceof aB||n instanceof tm||n instanceof Wh||n instanceof jh||n instanceof Qc||n instanceof Rf||n instanceof Qm)return!0;if(Array.isArray(n)){for(const e of n)if(!lC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!lC(n[e]))return!1;return!0}else return!1}function Uu(n){if(n===null)return Y2;if(typeof n=="string")return es;if(typeof n=="boolean")return No;if(typeof n=="number")return Ir;if(n instanceof Ra)return em;if(n instanceof Tf)return q2;if(n instanceof aB)return V2;if(n instanceof tm)return H2;if(n instanceof Wh)return $2;if(n instanceof jh)return Z2;if(n instanceof Qc)return sC;if(n instanceof Rf)return X2;if(n instanceof Qm)return FC;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=Uu(r);if(!t)t=i;else{if(t===i)continue;t=Lo;break}}return $d(t||Lo,e)}else return Mg}function Vv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ra||n instanceof Tf||n instanceof tm||n instanceof Wh||n instanceof jh||n instanceof Qc||n instanceof Rf||n instanceof Qm?n.toString():JSON.stringify(n)}class xy{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!lC(e[1]))return t.error("invalid value");const r=e[1];let i=Uu(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new xy(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const U_={string:es,number:Ir,boolean:No,object:Mg};class pp{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const v=e[1];if(typeof v!="string"||!(v in U_)||v==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=U_[v],r++}else o=Lo;let p;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);p=e[2],r++}i=$d(o,p)}else{if(!U_[s])throw new Error(`Types doesn't contain name = ${s}`);i=U_[s]}const l=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Lo);if(!o)return null;l.push(o)}return new pp(i,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(aC(this.type,Uu(r))){if(t===this.args.length-1)throw new bA(`Expected value to be of type ${Jl(this.type)}, but found ${Jl(Uu(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const l7={"to-boolean":No,"to-color":em,"to-number":Ir,"to-string":es};class O0{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!l7[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=l7[r],s=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,Lo);if(!o)return null;s.push(o)}return new O0(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Ra)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=CF(t[0],t[1],t[2],t[3]),!r))return new Ra(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new bA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Wh.parse(t);if(i)return i}throw new bA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=jh.parse(t);if(i)return i}throw new bA(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=Qc.parse(t);if(i)return i}throw new bA(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Rf.parse(t);if(i)return i}throw new bA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new bA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return tm.fromString(Vv(this.args[0].evaluate(e)));case"resolvedImage":return Qm.fromString(Vv(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Vv(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const MY=["Unknown","Point","LineString","Polygon"];class _F{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?MY[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Ra.parse(e),this._parseColorCache.set(e,t)),t}}class J2{constructor(e,t,r=[],i,s=new oB,l=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=l,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,l){return l==="assert"?new pp(s,[i]):l==="coerce"?new O0(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let l=s.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,p=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&p.kind==="value")l=r(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&["string","array"].includes(p.kind)||["color","formatted","resolvedImage"].includes(o.kind)&&["value","string"].includes(p.kind)||["padding","numberArray"].includes(o.kind)&&["value","number","array"].includes(p.kind)||o.kind==="colorArray"&&["value","string","array"].includes(p.kind)||o.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(p.kind))l=r(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,p))return null}if(!(l instanceof xy)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new _F;try{l=new xy(l.type,l.evaluate(o))}catch(p){return this.error(p.message),null}}return l}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new J2(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Vp(r,e))}checkSubtype(e,t){const r=aC(e,t);return r&&this.error(r),r}}class ex{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const l=e[s];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,s);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([l,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new ex(r,i):null}outputDefined(){return this.result.outputDefined()}}class tx{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new tx(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class lB{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ir),i=t.parse(e[2],2,$d(t.expectedType||Lo));if(!r||!i)return null;const s=i.type;return new lB(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new bA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new bA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new bA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class AB{constructor(e,t){this.type=No,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Lo),i=t.parse(e[2],2,Lo);return!r||!i?null:sB(r.type,[No,es,Ir,Y2,Lo])?new AB(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Jl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!wg(t,["boolean","string","number","null"]))throw new bA(`Expected first argument to be of type boolean, string, number or null, but found ${Jl(Uu(t))} instead.`);if(!wg(r,["string","array"]))throw new bA(`Expected second argument to be of type array or string, but found ${Jl(Uu(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Wb{constructor(e,t,r){this.type=Ir,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Lo),i=t.parse(e[2],2,Lo);if(!r||!i)return null;if(!sB(r.type,[No,es,Ir,Y2,Lo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Jl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Ir);return s?new Wb(r,i,s):null}else return new Wb(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!wg(t,["boolean","string","number","null"]))throw new bA(`Expected first argument to be of type boolean, string, number or null, but found ${Jl(Uu(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),wg(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(wg(r,["array"]))return r.indexOf(t,i);throw new bA(`Expected second argument to be of type array or string, but found ${Jl(Uu(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class uB{constructor(e,t,r,i,s,l){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},l=[];for(let v=2;v<e.length-1;v+=2){let x=e[v];const B=e[v+1];Array.isArray(x)||(x=[x]);const k=t.concat(v);if(x.length===0)return k.error("Expected at least one branch label.");for(const D of x){if(typeof D!="number"&&typeof D!="string")return k.error("Branch labels must be numbers or strings.");if(typeof D=="number"&&Math.abs(D)>Number.MAX_SAFE_INTEGER)return k.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof D=="number"&&Math.floor(D)!==D)return k.error("Numeric branch labels must be integer values.");if(!r)r=Uu(D);else if(k.checkSubtype(r,Uu(D)))return null;if(typeof s[String(D)]<"u")return k.error("Branch labels must be unique.");s[String(D)]=l.length}const P=t.parse(B,v,i);if(!P)return null;i=i||P.type,l.push(P)}const o=t.parse(e[1],1,Lo);if(!o)return null;const p=t.parse(e[e.length-1],e.length-1,i);return!p||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new uB(r,i,o,s,l,p)}evaluate(e){const t=this.input.evaluate(e);return(Uu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class cB{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,No);if(!o)return null;const p=t.parse(e[l+1],l+1,r);if(!p)return null;i.push([o,p]),r=r||p.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new cB(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class jb{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Lo),i=t.parse(e[2],2,Ir);if(!r||!i)return null;if(!sB(r.type,[$d(Lo),es,Lo]))return t.error(`Expected first argument to be of type array or string, but found ${Jl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Ir);return s?new jb(r.type,r,i,s):null}else return new jb(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),wg(t,["string"]))return[...t].slice(r,i).join("");if(wg(t,["array"]))return t.slice(r,i);throw new bA(`Expected first argument to be of type array or string, but found ${Jl(Uu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function nx(n,e){const t=n.length-1;let r=0,i=t,s=0,l,o;for(;r<=i;)if(s=Math.floor((r+i)/2),l=n[s],o=n[s+1],l<=e){if(s===t||e<o)return s;r=s+1}else if(l>e)i=s-1;else throw new bA("Input is not a number.");return 0}class rx{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Ir);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],p=e[l+1],v=l,x=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);const B=t.parse(p,x,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new rx(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=nx(t,i);return r[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function wY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Y3,A7;function SY(){if(A7)return Y3;A7=1,Y3=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var l=this.sampleCurveDerivativeX(r);if(Math.abs(l)<1e-6)break;r=r-s/l}var o=0,p=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:p=r,r=(p-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Y3}var EY=SY(),BY=wY(EY);class Df{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[l,o]of s)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=q3(t,e.base,r,i);else if(e.name==="linear")s=q3(t,1,r,i);else if(e.name==="cubic-bezier"){const l=e.controlPoints;s=new BY(l[0],l[1],l[2],l[3]).solve(q3(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...l]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const v=i[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:v}}else if(i[0]==="cubic-bezier"){const v=i.slice(1);if(v.length!==4||v.some(x=>typeof x!="number"||x<0||x>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:v}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Ir),!s)return null;const o=[];let p=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&t.expectedType!=sC?p=em:t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(let v=0;v<l.length;v+=2){const x=l[v],B=l[v+1],k=v+3,P=v+4;if(typeof x!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(o.length&&o[o.length-1][0]>=x)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',k);const D=t.parse(B,P,p);if(!D)return null;p=p||D.type,o.push([x,D])}return!g0(p,Ir)&&!g0(p,q2)&&!g0(p,em)&&!g0(p,$2)&&!g0(p,Z2)&&!g0(p,sC)&&!g0(p,X2)&&!g0(p,$d(Ir))?t.error(`Type ${Jl(p)} is not interpolatable.`):new Df(p,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=nx(t,i),o=t[l],p=t[l+1],v=Df.interpolationFactor(this.interpolation,i,o,p),x=r[l].evaluate(e),B=r[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return D0(x,B,v);case"color":return Ra.interpolate(x,B,v);case"padding":return Wh.interpolate(x,B,v);case"colorArray":return Qc.interpolate(x,B,v);case"numberArray":return jh.interpolate(x,B,v);case"variableAnchorOffsetCollection":return Rf.interpolate(x,B,v);case"array":return by(x,B,v);case"projectionDefinition":return Tf.interpolate(x,B,v)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ra.interpolate(x,B,v,"hcl");case"colorArray":return Qc.interpolate(x,B,v,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ra.interpolate(x,B,v,"lab");case"colorArray":return Qc.interpolate(x,B,v,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function q3(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const OY={color:Ra.interpolate,number:D0,padding:Wh.interpolate,numberArray:jh.interpolate,colorArray:Qc.interpolate,variableAnchorOffsetCollection:Rf.interpolate,array:by};class AC{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const p=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!p)return null;r=r||p.type,s.push(p)}if(!r)throw new Error("No output type");return i&&s.some(o=>aC(i,o.type))?new AC(Lo,s):new AC(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Qm&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function u7(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function IY(n,e,t){return e===t}function TY(n,e,t){return e!==t}function kY(n,e,t){return e<t}function PY(n,e,t){return e>t}function KY(n,e,t){return e<=t}function RY(n,e,t){return e>=t}function bF(n,e,t,r){return r.compare(e,t)===0}function DY(n,e,t,r){return!bF(n,e,t,r)}function FY(n,e,t,r){return r.compare(e,t)<0}function LY(n,e,t,r){return r.compare(e,t)>0}function UY(n,e,t,r){return r.compare(e,t)<=0}function zY(n,e,t,r){return r.compare(e,t)>=0}function Ry(n,e,t){const r=n!=="=="&&n!=="!=";return class xF{constructor(s,l,o){this.type=No,this.lhs=s,this.rhs=l,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||l.type.kind==="value"}static parse(s,l){if(s.length!==3&&s.length!==4)return l.error("Expected two or three arguments.");const o=s[0];let p=l.parse(s[1],1,Lo);if(!p)return null;if(!u7(o,p.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${Jl(p.type)}'.`);let v=l.parse(s[2],2,Lo);if(!v)return null;if(!u7(o,v.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${Jl(v.type)}'.`);if(p.type.kind!==v.type.kind&&p.type.kind!=="value"&&v.type.kind!=="value")return l.error(`Cannot compare types '${Jl(p.type)}' and '${Jl(v.type)}'.`);r&&(p.type.kind==="value"&&v.type.kind!=="value"?p=new pp(v.type,[p]):p.type.kind!=="value"&&v.type.kind==="value"&&(v=new pp(p.type,[v])));let x=null;if(s.length===4){if(p.type.kind!=="string"&&v.type.kind!=="string"&&p.type.kind!=="value"&&v.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(x=l.parse(s[3],3,V2),!x)return null}return new xF(p,v,x)}evaluate(s){const l=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const p=Uu(l),v=Uu(o);if(p.kind!==v.kind||!(p.kind==="string"||p.kind==="number"))throw new bA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${p.kind}, ${v.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const p=Uu(l),v=Uu(o);if(p.kind!=="string"||v.kind!=="string")return e(s,l,o)}return this.collator?t(s,l,o,this.collator.evaluate(s)):e(s,l,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const NY=Ry("==",IY,bF),WY=Ry("!=",TY,DY),jY=Ry("<",kY,FY),GY=Ry(">",PY,LY),QY=Ry("<=",KY,UY),YY=Ry(">=",RY,zY);class ix{constructor(e,t,r){this.type=V2,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,No);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,No);if(!s)return null;let l=null;return r.locale&&(l=t.parse(r.locale,1,es),!l)?null:new ix(i,s,l)}evaluate(e){return new aB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class hB{constructor(e,t,r,i,s){this.type=es,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Ir);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,es),!s))return null;let l=null;if(i.currency&&(l=t.parse(i.currency,1,es),!l))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,Ir),!o))return null;let p=null;return i["max-fraction-digits"]&&(p=t.parse(i["max-fraction-digits"],1,Ir),!p)?null:new hB(r,s,l,o,p)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class dB{constructor(e){this.type=H2,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let p=null;if(o["font-scale"]&&(p=t.parse(o["font-scale"],1,Ir),!p))return null;let v=null;if(o["text-font"]&&(v=t.parse(o["text-font"],1,$d(es)),!v))return null;let x=null;if(o["text-color"]&&(x=t.parse(o["text-color"],1,em),!x))return null;let B=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!bY.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(B=t.parse(o["vertical-align"],1,es),!B)return null}const k=i[i.length-1];k.scale=p,k.font=v,k.textColor=x,k.verticalAlign=B}else{const p=t.parse(e[l],1,Lo);if(!p)return null;const v=p.type.kind;if(v!=="string"&&v!=="value"&&v!=="null"&&v!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:p,scale:null,font:null,textColor:null,verticalAlign:null})}}return new dB(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return Uu(i)===FC?new GE("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new GE(Vv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new tm(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class fB{constructor(e){this.type=FC,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,es);return r?new fB(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Qm.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class pB{constructor(e){this.type=Ir,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Jl(r.type)} instead.`):new pB(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new bA(`Expected value to be of type string or array, but found ${Jl(Uu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const nm=8192;function qY(n,e){const t=VY(n[0]),r=$Y(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*nm),Math.round(r*i*nm)]}function mB(n,e){const t=Math.pow(2,e.z),r=(n[0]/nm+e.x)/t,i=(n[1]/nm+e.y)/t;return[HY(r),ZY(i)]}function VY(n){return(180+n)/360}function HY(n){return n*360-180}function $Y(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function ZY(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function LC(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function uC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function XY(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function JY(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],l=n[1]-t[1];return r*l-s*i===0&&r*s<=0&&i*l<=0}function ox(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return rq(s,i)===0?!1:!!(c7(n,e,t,r)&&c7(t,r,n,e))}function eq(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(ox(n,e,r[i],r[i+1]))return!0;return!1}function Dy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(JY(n,i[s],i[s+1]))return t;XY(n,i[s],i[s+1])&&(r=!r)}return r}function tq(n,e){for(const t of e)if(Dy(n,t))return!0;return!1}function MF(n,e){for(const t of n)if(!Dy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(eq(n[t],n[t+1],e))return!1;return!0}function nq(n,e){for(const t of e)if(MF(n,t))return!0;return!1}function rq(n,e){return n[0]*e[1]-n[1]*e[0]}function c7(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],p=r[0]-t[0],v=r[1]-t[1],x=i*v-p*s,B=l*v-p*o;return x>0&&B<0||x<0&&B>0}function gB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let l=0;l<n[i].length;l++){const o=qY(n[i][l],t);LC(e,o),s.push(o)}r.push(s)}return r}function wF(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=gB(n[i],e,t);r.push(s)}return r}function SF(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}LC(e,n)}function iq(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function h7(n,e,t,r){const i=Math.pow(2,r.z)*nm,s=[r.x*nm,r.y*nm],l=[];for(const o of n)for(const p of o){const v=[p.x+s[0],p.y+s[1]];SF(v,e,t,i),l.push(v)}return l}function d7(n,e,t,r){const i=Math.pow(2,r.z)*nm,s=[r.x*nm,r.y*nm],l=[];for(const o of n){const p=[];for(const v of o){const x=[v.x+s[0],v.y+s[1]];LC(e,x),p.push(x)}l.push(p)}if(e[2]-e[0]<=i/2){iq(e);for(const o of l)for(const p of o)SF(p,e,t,i)}return l}function oq(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=gB(e.coordinates,r,i),l=h7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!Dy(o,s))return!1}if(e.type==="MultiPolygon"){const s=wF(e.coordinates,r,i),l=h7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!tq(o,s))return!1}return!0}function sq(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=gB(e.coordinates,r,i),l=d7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!MF(o,s))return!1}if(e.type==="MultiPolygon"){const s=wF(e.coordinates,r,i),l=d7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!nq(o,s))return!1}return!0}class Sg{constructor(e,t){this.type=No,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(lC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:l,coordinates:o}=s.geometry;l==="Polygon"&&i.push(o),l==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new Sg(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Sg(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Sg(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return oq(e,this.geometries);if(e.geometryType()==="LineString")return sq(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class EF{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,l=t[s];if(r(i,l)>=0)break;t[e]=l,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&r(t[o],t[l])<0&&(l=o),r(t[l],s)>=0)break;t[e]=t[l],e=l}t[e]=s}}function aq(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const l of n){const o=lq(l);o!==0&&(l.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[l]):i.push(l))}return i&&r.push(i),r}function lq(n){let e=0;for(let t=0,r=n.length,i=r-1,s,l;t<r;i=t++)s=n[t],l=n[i],e+=(l.x-s.x)*(s.y+l.y);return e}const Aq=6378.137,f7=1/298.257223563,p7=f7*(2-f7),m7=Math.PI/180;class yB{constructor(e){const t=m7*Aq*1e3,r=Math.cos(e*m7),i=1/(1-p7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-p7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,l,o;for(let p=0;p<e.length-1;p++){let v=e[p][0],x=e[p][1],B=this.wrap(e[p+1][0]-v)*this.kx,k=(e[p+1][1]-x)*this.ky,P=0;(B!==0||k!==0)&&(P=(this.wrap(t[0]-v)*this.kx*B+(t[1]-x)*this.ky*k)/(B*B+k*k),P>1?(v=e[p+1][0],x=e[p+1][1]):P>0&&(v+=B/this.kx*P,x+=k/this.ky*P)),B=this.wrap(t[0]-v)*this.kx,k=(t[1]-x)*this.ky;const D=B*B+k*k;D<r&&(r=D,i=v,s=x,l=p,o=P)}return{point:[i,s],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const QE=100,YE=50;function BF(n,e){return e[0]-n[0]}function Gb(n){return n[1]-n[0]+1}function Nm(n,e){return n[1]>=n[0]&&n[1]<e}function qE(n,e){if(n[0]>n[1])return[null,null];const t=Gb(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function VE(n,e){if(!Nm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)LC(t,n[r]);return t}function HE(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)LC(e,r);return e}function g7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function vB(n,e,t){if(!g7(n)||!g7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function gg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function CB(n,e,t,r,i){const s=Math.min(gg(n,[t,r],i),gg(e,[t,r],i)),l=Math.min(gg(t,[n,e],i),gg(r,[n,e],i));return Math.min(s,l)}function uq(n,e,t,r,i){if(!(Nm(e,n.length)&&Nm(r,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const p=n[o],v=n[o+1];for(let x=r[0];x<r[1];++x){const B=t[x],k=t[x+1];if(ox(p,v,B,k))return 0;l=Math.min(l,CB(p,v,B,k,i))}}return l}function cq(n,e,t,r,i){if(!(Nm(e,n.length)&&Nm(r,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let p=r[0];p<=r[1];++p)if(l=Math.min(l,i.distance(n[o],t[p])),l===0)return l;return l}function hq(n,e,t){if(Dy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],l=i[i.length-1];if(s!==l&&(r=Math.min(r,gg(n,[l,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function dq(n,e,t,r){if(!Nm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(Dy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const l=n[s],o=n[s+1];for(const p of t)for(let v=0,x=p.length,B=x-1;v<x;B=v++){const k=p[B],P=p[v];if(ox(l,o,k,P))return 0;i=Math.min(i,CB(l,o,k,P,r))}}return i}function y7(n,e){for(const t of n)for(const r of t)if(Dy(r,e,!0))return!0;return!1}function fq(n,e,t,r=1/0){const i=HE(n),s=HE(e);if(r!==1/0&&vB(i,s,t)>=r)return r;if(uC(i,s)){if(y7(n,e))return 0}else if(y7(e,n))return 0;let l=1/0;for(const o of n)for(let p=0,v=o.length,x=v-1;p<v;x=p++){const B=o[x],k=o[p];for(const P of e)for(let D=0,N=P.length,W=N-1;D<N;W=D++){const V=P[W],$=P[D];if(ox(B,k,V,$))return 0;l=Math.min(l,CB(B,k,V,$,t))}}return l}function v7(n,e,t,r,i,s){if(!s)return;const l=vB(VE(r,s),i,t);l<e&&n.push([l,s,[0,0]])}function z_(n,e,t,r,i,s,l){if(!s||!l)return;const o=vB(VE(r,s),VE(i,l),t);o<e&&n.push([o,s,l])}function Qb(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const l=new EF([[0,[0,n.length-1],[0,0]]],BF),o=HE(t);for(;l.length>0;){const p=l.pop();if(p[0]>=s)continue;const v=p[1],x=e?YE:QE;if(Gb(v)<=x){if(!Nm(v,n.length))return NaN;if(e){const B=dq(n,v,t,r);if(isNaN(B)||B===0)return B;s=Math.min(s,B)}else for(let B=v[0];B<=v[1];++B){const k=hq(n[B],t,r);if(s=Math.min(s,k),s===0)return 0}}else{const B=qE(v,e);v7(l,s,r,n,o,B[0]),v7(l,s,r,n,o,B[1])}}return s}function Yb(n,e,t,r,i,s=1/0){let l=Math.min(s,i.distance(n[0],t[0]));if(l===0)return l;const o=new EF([[0,[0,n.length-1],[0,t.length-1]]],BF);for(;o.length>0;){const p=o.pop();if(p[0]>=l)continue;const v=p[1],x=p[2],B=e?YE:QE,k=r?YE:QE;if(Gb(v)<=B&&Gb(x)<=k){if(!Nm(v,n.length)&&Nm(x,t.length))return NaN;let P;if(e&&r)P=uq(n,v,t,x,i),l=Math.min(l,P);else if(e&&!r){const D=n.slice(v[0],v[1]+1);for(let N=x[0];N<=x[1];++N)if(P=gg(t[N],D,i),l=Math.min(l,P),l===0)return l}else if(!e&&r){const D=t.slice(x[0],x[1]+1);for(let N=v[0];N<=v[1];++N)if(P=gg(n[N],D,i),l=Math.min(l,P),l===0)return l}else P=cq(n,v,t,x,i),l=Math.min(l,P)}else{const P=qE(v,e),D=qE(x,r);z_(o,l,i,n,t,P[0],D[0]),z_(o,l,i,n,t,P[0],D[1]),z_(o,l,i,n,t,P[1],D[0]),z_(o,l,i,n,t,P[1],D[1])}}return l}function pq(n,e){const t=n.geometry(),r=t.flat().map(l=>mB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new yB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,Yb(r,!1,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Yb(r,!1,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Qb(r,!1,l.coordinates,i,s));break}if(s===0)return s}return s}function mq(n,e){const t=n.geometry(),r=t.flat().map(l=>mB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new yB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,Yb(r,!0,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Yb(r,!0,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Qb(r,!0,l.coordinates,i,s));break}if(s===0)return s}return s}function gq(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=aq(t).map(l=>l.map(o=>o.map(p=>mB([p.x,p.y],n.canonical)))),i=new yB(r[0][0][0][1]);let s=1/0;for(const l of e)for(const o of r){switch(l.type){case"Point":s=Math.min(s,Qb([l.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,Qb(l.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,fq(o,l.coordinates,i,s));break}if(s===0)return s}return s}function V3(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Eg{constructor(e,t){this.type=Ir,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(lC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Eg(r,r.features.map(i=>V3(i.geometry)).flat());if(r.type==="Feature")return new Eg(r,V3(r.geometry));if("type"in r&&"coordinates"in r)return new Eg(r,V3(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pq(e,this.geometries);if(e.geometryType()==="LineString")return mq(e,this.geometries);if(e.geometryType()==="Polygon")return gq(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class sx{constructor(e){this.type=Lo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return r==null?t.error("Global state property must be defined."):typeof r!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new sx(r)}evaluate(e){var t;const r=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!r||Object.keys(r).length===0?null:qv(r,this.key)}eachChild(){}outputDefined(){return!1}}const _B={"==":NY,"!=":WY,">":GY,"<":jY,">=":YY,"<=":QY,array:pp,at:lB,boolean:pp,case:cB,coalesce:AC,collator:ix,format:dB,image:fB,in:AB,"index-of":Wb,interpolate:Df,"interpolate-hcl":Df,"interpolate-lab":Df,length:pB,let:ex,literal:xy,match:uB,number:pp,"number-format":hB,object:pp,slice:jb,step:rx,string:pp,"to-boolean":O0,"to-color":O0,"to-number":O0,"to-string":O0,var:tx,within:Sg,distance:Eg,"global-state":sx};class vp{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=vp.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,l=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=l.filter(([v])=>!Array.isArray(v)||v.length===e.length-1);let p=null;for(const[v,x]of o){p=new J2(t.registry,qb,t.path,null,t.scope);const B=[];let k=!1;for(let P=1;P<e.length;P++){const D=e[P],N=Array.isArray(v)?v[P-1]:v.type,W=p.parse(D,1+B.length,N);if(!W){k=!0;break}B.push(W)}if(!k){if(Array.isArray(v)&&v.length!==B.length){p.error(`Expected ${v.length} arguments, but found ${B.length} instead.`);continue}for(let P=0;P<B.length;P++){const D=Array.isArray(v)?v[P]:v.type,N=B[P];p.concat(P+1).checkSubtype(D,N.type)}if(p.errors.length===0)return new vp(r,s,x,B)}}if(o.length===1)t.errors.push(...p.errors);else{const x=(o.length?o:l).map(([k])=>vq(k)).join(" | "),B=[];for(let k=1;k<e.length;k++){const P=t.parse(e[k],1+B.length);if(!P)return null;B.push(Jl(P.type))}t.error(`Expected arguments of type ${x}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){vp.definitions=t;for(const r in t)e[r]=vp}}function C7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,l=CF(e,t,r,s);if(l)throw new bA(l);return new Ra(e/255,t/255,r/255,s,!1)}function _7(n,e){return n in e}function H3(n,e){const t=e[n];return typeof t>"u"?null:t}function yq(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function ng(n){return{type:n}}vp.register(_B,{error:[uY,[es],(n,[e])=>{throw new bA(e.evaluate(n))}],typeof:[es,[Lo],(n,[e])=>Jl(Uu(e.evaluate(n)))],"to-rgba":[$d(Ir,4),[em],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[em,[Ir,Ir,Ir],C7],rgba:[em,[Ir,Ir,Ir,Ir],C7],has:{type:No,overloads:[[[es],(n,[e])=>_7(e.evaluate(n),n.properties())],[[es,Mg],(n,[e,t])=>_7(e.evaluate(n),t.evaluate(n))]]},get:{type:Lo,overloads:[[[es],(n,[e])=>H3(e.evaluate(n),n.properties())],[[es,Mg],(n,[e,t])=>H3(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Lo,[es],(n,[e])=>H3(e.evaluate(n),n.featureState||{})],properties:[Mg,[],n=>n.properties()],"geometry-type":[es,[],n=>n.geometryType()],id:[Lo,[],n=>n.id()],zoom:[Ir,[],n=>n.globals.zoom],"heatmap-density":[Ir,[],n=>n.globals.heatmapDensity||0],"line-progress":[Ir,[],n=>n.globals.lineProgress||0],accumulated:[Lo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Ir,ng(Ir),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Ir,ng(Ir),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Ir,overloads:[[[Ir,Ir],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Ir],(n,[e])=>-e.evaluate(n)]]},"/":[Ir,[Ir,Ir],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Ir,[Ir,Ir],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Ir,[],()=>Math.LN2],pi:[Ir,[],()=>Math.PI],e:[Ir,[],()=>Math.E],"^":[Ir,[Ir,Ir],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Ir,[Ir],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))],log2:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Ir,[Ir],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Ir,[Ir],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Ir,[Ir],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Ir,[Ir],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Ir,[Ir],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Ir,[Ir],(n,[e])=>Math.atan(e.evaluate(n))],min:[Ir,ng(Ir),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Ir,ng(Ir),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Ir,[Ir],(n,[e])=>Math.abs(e.evaluate(n))],round:[Ir,[Ir],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Ir,[Ir],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Ir,[Ir],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[No,[es,Lo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[No,[Lo],(n,[e])=>n.id()===e.value],"filter-type-==":[No,[es],(n,[e])=>n.geometryType()===e.value],"filter-<":[No,[es,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[No,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[No,[es,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[No,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[No,[es,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[No,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[No,[es,Lo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[No,[Lo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[No,[Lo],(n,[e])=>e.value in n.properties()],"filter-has-id":[No,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[No,[$d(es)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[No,[$d(Lo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[No,[es,$d(Lo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[No,[es,$d(Lo)],(n,[e,t])=>yq(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:No,overloads:[[[No,No],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[ng(No),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:No,overloads:[[[No,No],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[ng(No),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[No,[No],(n,[e])=>!e.evaluate(n)],"is-supported-script":[No,[es],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[es,[es],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[es,[es],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[es,ng(Lo),(n,e)=>e.map(t=>Vv(t.evaluate(n))).join("")],"resolved-locale":[es,[V2],(n,[e])=>e.evaluate(n).resolvedLocale()]});function vq(n){return Array.isArray(n)?`(${n.map(Jl).join(", ")})`:`(${Jl(n.type)}...)`}function qb(n){if(n instanceof tx)return qb(n.boundExpression);if(n instanceof vp&&n.name==="error")return!1;if(n instanceof ix)return!1;if(n instanceof Sg)return!1;if(n instanceof Eg)return!1;if(n instanceof sx)return!1;const e=n instanceof O0||n instanceof pp;let t=!0;return n.eachChild(r=>{e?t=t&&qb(r):t=t&&r instanceof xy}),t?ax(n)&&lx(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function ax(n){if(n instanceof vp){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Sg||n instanceof Eg)return!1;let e=!0;return n.eachChild(t=>{e&&!ax(t)&&(e=!1)}),e}function cC(n){if(n instanceof vp&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!cC(t)&&(e=!1)}),e}function lx(n,e){if(n instanceof vp&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!lx(r,e)&&(t=!1)}),t}function $E(n){return{result:"success",value:n}}function H1(n){return{result:"error",value:n}}function Vb(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function OF(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function bB(n){return!!n.expression&&n.expression.interpolated}function ts(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Fy(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Uu(n)===Mg}function Cq(n){return n}function _q(n){switch(n.type){case"color":return Ra.parse;case"padding":return Wh.parse;case"numberArray":return jh.parse;case"colorArray":return Qc.parse;default:return null}}function bq(n){switch(n){case"exponential":return IF;case"interval":return Mq;case"categorical":return xq;case"identity":return wq;default:throw new Error(`Unknown function type "${n}"`)}}function xB(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",r=t||n.property!==void 0,i=t||!r,s=n.type||(bB(e)?"exponential":"interval"),l=_q(e);if(l&&(n=_y({},n),n.stops&&(n.stops=n.stops.map(x=>[x[0],l(x[1])])),n.default?n.default=l(n.default):n.default=l(e.default)),n.colorSpace&&!_Y(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const o=bq(s);let p,v;if(s==="categorical"){p=Object.create(null);for(const x of n.stops)p[x[0]]=x[1];v=typeof n.stops[0][0]}if(t){const x={},B=[];for(let D=0;D<n.stops.length;D++){const N=n.stops[D],W=N[0].zoom;x[W]===void 0&&(x[W]={zoom:W,type:n.type,property:n.property,default:n.default,stops:[]},B.push(W)),x[W].stops.push([N[0].value,N[1]])}const k=[];for(const D of B)k.push([x[D].zoom,xB(x[D],e)]);const P={name:"linear"};return{kind:"composite",interpolationType:P,interpolationFactor:Df.interpolationFactor.bind(void 0,P),zoomStops:k.map(D=>D[0]),evaluate({zoom:D},N){return IF({stops:k,base:n.base},e,D).evaluate(D,N)}}}else if(i){const x=s==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:Df.interpolationFactor.bind(void 0,x),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>o(n,e,B,p,v)}}else return{kind:"source",evaluate(x,B){const k=B&&B.properties?B.properties[n.property]:void 0;return k===void 0?UC(n.default,e.default):o(n,e,k,p,v)}}}function UC(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function xq(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return UC(s,n.default,e.default)}function Mq(n,e,t){if(ts(t)!=="number")return UC(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=nx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function IF(n,e,t){const r=n.base!==void 0?n.base:1;if(ts(t)!=="number")return UC(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=nx(n.stops.map(x=>x[0]),t),l=Sq(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],p=n.stops[s+1][1],v=OY[e.type]||Cq;return typeof o.evaluate=="function"?{evaluate(...x){const B=o.evaluate.apply(void 0,x),k=p.evaluate.apply(void 0,x);if(!(B===void 0||k===void 0))return v(B,k,l,n.colorSpace)}}:v(o,p,l,n.colorSpace)}function wq(n,e,t){switch(e.type){case"color":t=Ra.parse(t);break;case"formatted":t=tm.fromString(t.toString());break;case"resolvedImage":t=Qm.fromString(t.toString());break;case"padding":t=Wh.parse(t);break;case"colorArray":t=Qc.parse(t);break;case"numberArray":t=jh.parse(t);break;default:ts(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return UC(t,n.default,e.default)}function Sq(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}class TF{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new _F,this._defaultValue=t?Iq(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new bA(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function Ly(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in _B}function Ax(n,e){const t=new J2(_B,qb,[],e?Oq(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?$E(new TF(r,e)):H1(t.errors)}class ZE{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!cC(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}}class XE{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!cC(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}interpolationFactor(e,t,r){return this.interpolationType?Df.interpolationFactor(this.interpolationType,e,t,r):0}}function Eq(n){return n._styleExpression!==void 0}function ux(n,e){const t=Ax(n,e);if(t.result==="error")return t;const r=t.value.expression,i=ax(r);if(!i&&!Vb(e))return H1([new Vp("","data expressions not supported")]);const s=lx(r,["zoom"]);if(!s&&!OF(e))return H1([new Vp("","zoom expressions not supported")]);const l=Mb(r);if(!l&&!s)return H1([new Vp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof Vp)return H1([l]);if(l instanceof Df&&!bB(e))return H1([new Vp("",'"interpolate" expressions cannot be used with this property')]);if(!l)return $E(i?new ZE("constant",t.value):new ZE("source",t.value));const o=l instanceof Df?l.interpolation:void 0;return $E(i?new XE("camera",t.value,l.labels,o):new XE("composite",t.value,l.labels,o))}class cx{constructor(e,t){this._parameters=e,this._specification=t,_y(this,xB(this._parameters,this._specification))}static deserialize(e){return new cx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Bq(n,e){if(Fy(n))return new cx(n,e);if(Ly(n)){const t=ux(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Ra.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Wh.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?t=jh.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?t=Qc.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Rf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Tf.parse(n)),{kind:"constant",evaluate:()=>t}}}function Mb(n){let e=null;if(n instanceof ex)e=Mb(n.result);else if(n instanceof AC){for(const t of n.args)if(e=Mb(t),e)break}else(n instanceof rx||n instanceof Df)&&n.input instanceof vp&&n.input.name==="zoom"&&(e=n);return e instanceof Vp||n.eachChild(t=>{const r=Mb(t);r instanceof Vp?e=r:!e&&r?e=new Vp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Vp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Oq(n){const e={color:em,string:es,number:Ir,enum:es,boolean:No,formatted:H2,padding:$2,numberArray:Z2,colorArray:sC,projectionDefinition:q2,resolvedImage:FC,variableAnchorOffsetCollection:X2};return n.type==="array"?$d(e[n.value]||Lo,n.length):e[n.type]}function Iq(n){if(n.type==="color"&&Fy(n.default))return new Ra(0,0,0,0);switch(n.type){case"color":return Ra.parse(n.default)||null;case"padding":return Wh.parse(n.default)||null;case"numberArray":return jh.parse(n.default)||null;case"colorArray":return Qc.parse(n.default)||null;case"variableAnchorOffsetCollection":return Rf.parse(n.default)||null;case"projectionDefinition":return Tf.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function zC(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!zC(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Tq={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function kq(n){if(n==null)return{filter:()=>!0,needGeometry:!1};zC(n)||(n=Hb(n));const e=Ax(n,Tq);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=kF(n);return{filter:(r,i,s)=>e.value.evaluate(r,i,{},s),needGeometry:t}}}function Pq(n,e){return n<e?-1:n>e?1:0}function kF(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(kF(n[e]))return!0;return!1}function Hb(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?$3(n[1],n[2],"=="):e==="!="?N_($3(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?$3(n[1],n[2],e):e==="any"?Kq(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Hb)):e==="none"?["all"].concat(n.slice(1).map(Hb).map(N_)):e==="in"?b7(n[1],n.slice(2)):e==="!in"?N_(b7(n[1],n.slice(2))):e==="has"?x7(n[1]):e==="!has"?N_(x7(n[1])):!0}function $3(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Kq(n){return["any"].concat(n.map(Hb))}function b7(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Pq)]]:["filter-in-small",n,["literal",e]]}}function x7(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function N_(n){return["!",n]}function Hv(n,e={}){if(zC(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return Dq(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(l=>{const o={},p=Hv(l,o),v=Rq(o);return v===!0?p:["case",v,p,!1]})]}case"all":{const[,...i]=t,s=i.map(l=>Hv(l,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",Hv(["any",...i],{})]}case"in":{const[,i,...s]=t;return M7(i,s)}case"!in":{const[,i,...s]=t;return M7(i,s,!0)}case"has":return w7(t[1]);case"!has":return["!",w7(t[1])];default:return!0}}function Rq(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function Dq(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function M7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const l of e)if(typeof l!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const l=e.sort().filter((o,p)=>p===0||e[p-1]!==o);return["match",r,l,!t,t]}return t?["all",...e.map(l=>["!=",r,l])]:["any",...e.map(l=>["==",r,l])]}function w7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function hC(n){return typeof n=="object"?["literal",n]:n}function MB(n,e){let t=n.stops;if(!t)return Fq(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(l=>!i&&e.tokens&&typeof l[1]=="string"?[l[0],PF(l[1])]:[l[0],hC(l[1])]),r?Lq(n,e,t):s?zq(n,e,t):JE(n,e,t)}function Fq(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,hC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function wB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Lq(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const p=t[o],v=p[0].zoom;r[v]===void 0&&(r[v]={zoom:v,type:n.type,property:n.property,default:n.default},i[v]=[],s.push(v)),i[v].push([p[0].value,p[1]])}if(EB({},e)==="exponential"){const o=[wB(n),["linear"],["zoom"]];for(const p of s){const v=JE(r[p],e,i[p]);cy(o,p,v,!1)}return o}else{const o=["step",["zoom"]];for(const p of s){const v=JE(r[p],e,i[p]);cy(o,p,v,!0)}return SB(o),o}}function Uq(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function S7(n,e){const t=hC(Uq(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function JE(n,e,t){const r=EB(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const l of t)s.push(["==",i,l[0]],l[1]);return s.push(S7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const l of t)cy(s,l[0],l[1],!1);return s.push(S7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const l of t)cy(s,l[0],l[1],!0);return SB(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,hC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,l=[wB(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)cy(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",i],"number"],l,hC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function zq(n,e,t,r=["zoom"]){const i=EB(n,e);let s,l=!1;if(i==="interval")s=["step",r],l=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[wB(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)cy(s,o[0],o[1],l);return SB(s),s}function SB(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function cy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function EB(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function PF(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function Nq(n){for(let e=0;e<Bs.layout.length;e++)for(const t in Bs[Bs.layout[e]])if(t===n)return Bs[Bs.layout[e]][t];for(let e=0;e<Bs.paint.length;e++)for(const t in Bs[Bs.paint[e]])if(t===n)return Bs[Bs.paint[e]][t];return null}function Wq(n,e){for(const t in n.sources)e(n.sources[t])}function $v(n,e){for(const t of n.layers)e(t)}function BB(n,e,t){function r(i,s){const l=i[s];l&&Object.keys(l).forEach(o=>{t({path:[i.id,s,o],key:o,value:l[o],reference:Nq(o),set(p){l[o]=p}})})}$v(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function KF(n){const e=n.key,t=n.value;return t?[new xr(e,t,"constants have been deprecated as of v8")]:[]}function HA(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Tg(n){if(Array.isArray(n))return n.map(Tg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Tg(n[t]);return e}return HA(n)}function kf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,l=n.styleSpec,o=n.validateSpec;let p=[];const v=ts(t);if(v!=="object")return[new xr(e,t,`object expected, ${v} found`)];for(const x in t){const B=x.split(".")[0],k=qv(r,B)||r["*"];let P;if(qv(i,B))P=i[B];else if(qv(r,B))P=o;else if(i["*"])P=i["*"];else if(r["*"])P=o;else{p.push(new xr(e,t[x],`unknown property "${x}"`));continue}p=p.concat(P({key:(e&&`${e}.`)+x,value:t[x],valueSpec:k,style:s,styleSpec:l,object:t,objectKey:x,validateSpec:o},t))}for(const x in r)i[x]||r[x].required&&r[x].default===void 0&&t[x]===void 0&&p.push(new xr(e,t,`missing required property "${x}"`));return p}function OB(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.key,o=n.arrayElementValidator||r;if(ts(e)!=="array")return[new xr(l,e,`array expected, ${ts(e)} found`)];if(t.length&&e.length!==t.length)return[new xr(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new xr(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let p={type:t.value,values:t.values};s.$version<7&&(p.function=t.function),ts(t.value)==="object"&&(p=t.value);let v=[];for(let x=0;x<e.length;x++)v=v.concat(o({array:e,arrayIndex:x,value:e[x],valueSpec:p,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${l}[${x}]`}));return v}function hx(n){const e=n.key,t=n.value,r=n.valueSpec;let i=ts(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new xr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new xr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new xr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function RF(n){const e=n.valueSpec,t=HA(n.value.type);let r,i={},s,l;const o=t!=="categorical"&&n.value.property===void 0,p=!o,v=ts(n.value.stops)==="array"&&ts(n.value.stops[0])==="array"&&ts(n.value.stops[0][0])==="object",x=kf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:D}});return t==="identity"&&o&&x.push(new xr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&x.push(new xr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!bB(n.valueSpec)&&x.push(new xr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(p&&!Vb(n.valueSpec)?x.push(new xr(n.key,n.value,"property functions not supported")):o&&!OF(n.valueSpec)&&x.push(new xr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||v)&&n.value.property===void 0&&x.push(new xr(n.key,n.value,'"property" property is required')),x;function B(N){if(t==="identity")return[new xr(N.key,N.value,'identity function may not have a "stops" property')];let W=[];const V=N.value;return W=W.concat(OB({key:N.key,value:V,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:k})),ts(V)==="array"&&V.length===0&&W.push(new xr(N.key,V,"array must have at least one stop")),W}function k(N){let W=[];const V=N.value,$=N.key;if(ts(V)!=="array")return[new xr($,V,`array expected, ${ts(V)} found`)];if(V.length!==2)return[new xr($,V,`array length 2 expected, length ${V.length} found`)];if(v){if(ts(V[0])!=="object")return[new xr($,V,`object expected, ${ts(V[0])} found`)];if(V[0].zoom===void 0)return[new xr($,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new xr($,V,"object stop key must have value")];if(l&&l>HA(V[0].zoom))return[new xr($,V[0].zoom,"stop zoom values must appear in ascending order")];HA(V[0].zoom)!==l&&(l=HA(V[0].zoom),s=void 0,i={}),W=W.concat(kf({key:`${$}[0]`,value:V[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:hx,value:P}}))}else W=W.concat(P({key:`${$}[0]`,value:V[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},V));return Ly(Tg(V[1]))?W.concat([new xr(`${$}[1]`,V[1],"expressions are not allowed in function stops.")]):W.concat(N.validateSpec({key:`${$}[1]`,value:V[1],valueSpec:e,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function P(N,W){const V=ts(N.value),$=HA(N.value),ie=N.value!==null?N.value:W;if(!r)r=V;else if(V!==r)return[new xr(N.key,ie,`${V} stop domain type must match previous stop domain type ${r}`)];if(V!=="number"&&V!=="string"&&V!=="boolean")return[new xr(N.key,ie,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&t!=="categorical"){let ne=`number expected, ${V} found`;return Vb(e)&&t===void 0&&(ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xr(N.key,ie,ne)]}return t==="categorical"&&V==="number"&&(!isFinite($)||Math.floor($)!==$)?[new xr(N.key,ie,`integer expected, found ${$}`)]:t!=="categorical"&&V==="number"&&s!==void 0&&$<s?[new xr(N.key,ie,"stop domain values must appear in ascending order")]:(s=$,t==="categorical"&&$ in i?[new xr(N.key,ie,"stop domain values must be unique")]:(i[$]=!0,[]))}function D(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:e,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}function My(n){const e=(n.expressionContext==="property"?ux:Ax)(Tg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new xr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new xr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!cC(t))return[new xr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!cC(t))return[new xr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!lx(t,["zoom","feature-state"]))return[new xr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!ax(t))return[new xr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function jq(n){const e=n.value,t=n.key,r=ts(e);return r!=="boolean"?[new xr(t,e,`boolean expected, ${r} found`)]:[]}function e6(n){const e=n.key,t=n.value,r=ts(t);return r!=="string"?[new xr(e,t,`color expected, ${r} found`)]:Ra.parse(String(t))?[]:[new xr(e,t,`color expected, "${t}" found`)]}function dC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(HA(t))===-1&&i.push(new xr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(HA(t))===-1&&i.push(new xr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function IB(n){return zC(Tg(n.value))?My(_y({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):DF(n)}function DF(n){const e=n.value,t=n.key;if(ts(e)!=="array")return[new xr(t,e,`array expected, ${ts(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new xr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(dC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),HA(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&HA(e[1])==="$type"&&s.push(new xr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new xr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=ts(e[1]),i!=="string"&&s.push(new xr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let l=2;l<e.length;l++)i=ts(e[l]),HA(e[1])==="$type"?s=s.concat(dC({key:`${t}[${l}]`,value:e[l],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new xr(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)s=s.concat(DF({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=ts(e[1]),e.length!==2?s.push(new xr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new xr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function FF(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.value,o=n.objectKey,p=s[`${e}_${n.layerType}`];if(!p)return[];const v=o.match(/^(.*)-transition$/);if(e==="paint"&&v&&p[v[1]]&&p[v[1]].transition)return r({key:t,value:l,valueSpec:s.transition,style:i,styleSpec:s});const x=n.valueSpec||p[o];if(!x)return[new xr(t,l,`unknown property "${o}"`)];let B;if(ts(l)==="string"&&Vb(x)&&!x.tokens&&(B=/^{([^}]+)}$/.exec(l)))return[new xr(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const k=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&k.push(new xr(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Fy(Tg(l))&&HA(l.type)==="identity"&&k.push(new xr(t,l,'"text-font" does not support identity functions'))),k.concat(r({key:n.key,value:l,valueSpec:x,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function LF(n){return FF(n,"paint")}function UF(n){return FF(n,"layout")}function zF(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;if(ts(t)!=="object")return[new xr(r,t,`object expected, ${ts(t)} found`)];!t.type&&!t.ref&&e.push(new xr(r,t,'either "type" or "ref" is required'));let l=HA(t.type);const o=HA(t.ref);if(t.id){const p=HA(t.id);for(let v=0;v<n.arrayIndex;v++){const x=i.layers[v];HA(x.id)===p&&e.push(new xr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${x.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(v=>{v in t&&e.push(new xr(r,t[v],`"${v}" is prohibited for ref layers`))});let p;i.layers.forEach(v=>{HA(v.id)===o&&(p=v)}),p?p.ref?e.push(new xr(r,t.ref,"ref cannot reference another ref layer")):l=HA(p.type):e.push(new xr(r,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new xr(r,t,'missing required property "source"'));else{const p=i.sources&&i.sources[t.source],v=p&&HA(p.type);p?v==="vector"&&l==="raster"?e.push(new xr(r,t.source,`layer "${t.id}" requires a raster source`)):v!=="raster-dem"&&l==="hillshade"?e.push(new xr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):v==="raster"&&l!=="raster"?e.push(new xr(r,t.source,`layer "${t.id}" requires a vector source`)):v==="vector"&&!t["source-layer"]?e.push(new xr(r,t,`layer "${t.id}" must specify a "source-layer"`)):v==="raster-dem"&&l!=="hillshade"?e.push(new xr(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(v!=="geojson"||!p.lineMetrics)&&e.push(new xr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new xr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(kf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:IB,layout(p){return kf({layer:t,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(v){return UF(_y({layerType:l},v))}}})},paint(p){return kf({layer:t,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(v){return LF(_y({layerType:l},v))}}})}}})),e}function kg(n){const e=n.value,t=n.key,r=ts(e);return r!=="string"?[new xr(t,e,`string expected, ${r} found`)]:[]}function Gq(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,l=n.style;let o=[];const p=ts(r);if(r===void 0)return o;if(p!=="object")return o.push(new xr("source_raster_dem",r,`object expected, ${p} found`)),o;const x=HA(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],k=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const P in r)!x&&B.includes(P)?o.push(new xr(P,r[P],`In "${t}": "${P}" is only valid when "encoding" is set to "custom". ${k} encoding found`)):s[P]?o=o.concat(n.validateSpec({key:P,value:r[P],valueSpec:s[P],validateSpec:n.validateSpec,style:l,styleSpec:i})):o.push(new xr(P,r[P],`unknown property "${P}"`));return o}const E7={promoteId:Qq};function NF(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new xr(t,e,'"type" is required')];const l=HA(e.type);let o;switch(l){case"vector":case"raster":return o=kf({key:t,value:e,valueSpec:r[`source_${l.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:E7,validateSpec:s}),o;case"raster-dem":return o=Gq({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=kf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:E7}),e.cluster)for(const p in e.clusterProperties){const[v,x]=e.clusterProperties[p],B=typeof v=="string"?[v,["accumulated"],["get",p]]:v;o.push(...My({key:`${t}.${p}.map`,value:x,expressionContext:"cluster-map"})),o.push(...My({key:`${t}.${p}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return o;case"video":return kf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return kf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new xr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Qq({key:n,value:e}){if(ts(e)==="string")return kg({key:n,value:e});{const t=[];for(const r in e)t.push(...kg({key:`${n}.${r}`,value:e[r]}));return t}}function WF(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const l=ts(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new xr("light",e,`object expected, ${l} found`)]),s;for(const o in e){const p=o.match(/^(.*)-transition$/);p&&r[p[1]]&&r[p[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new xr(o,e[o],`unknown property "${o}"`)])}return s}function jF(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=ts(e);if(e===void 0)return[];if(s!=="object")return[new xr("sky",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new xr(o,e[o],`unknown property "${o}"`)]);return l}function GF(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const l=ts(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new xr("terrain",e,`object expected, ${l} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new xr(o,e[o],`unknown property "${o}"`)]);return s}function Yq(n){return kg(n).length===0?[]:My(n)}function qq(n){return kg(n).length===0?[]:My(n)}function Vq(n){const e=n.key,t=n.value;if(ts(t)==="array"){if(t.length<1||t.length>4)return[new xr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return hx({key:e,value:t,valueSpec:{}})}function Hq(n){const e=n.key,t=n.value;if(ts(t)==="array"){const i={type:"number"};if(t.length<1)return[new xr(e,t,"array length at least 1 expected, length 0 found")];let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return hx({key:e,value:t,valueSpec:{}})}function $q(n){const e=n.key,t=n.value;if(ts(t)==="array"){if(t.length<1)return[new xr(e,t,"array length at least 1 expected, length 0 found")];let i=[];for(let s=0;s<t.length;s++)i=i.concat(e6({key:`${e}[${s}]`,value:t[s]}));return i}else return e6({key:e,value:t})}function Zq(n){const e=n.key,t=n.value,r=ts(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new xr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let l=0;l<t.length;l+=2)s=s.concat(dC({key:`${e}[${l}]`,value:t[l],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(OB({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function QF(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const l in t){t[l].id&&i.includes(t[l].id)&&e.push(new xr(r,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),i.push(t[l].id),t[l].url&&s.includes(t[l].url)&&e.push(new xr(r,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),s.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(kf({key:`${r}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return kg({key:r,value:t})}function Xq(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=ts(e);if(e===void 0)return[];if(s!=="object")return[new xr("projection",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new xr(o,e[o],`unknown property "${o}"`)]);return l}function Jq(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=ts(t);return r==="array"&&!tV(t)&&!eV(t)?[new xr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new xr(e,t,`projection expected, invalid type "${r}" found`)]}function eV(n){return!!["interpolate","step","literal"].includes(n[0])}function tV(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function nV(n){return!!n&&n.constructor===Object}function YF(n){return nV(n.value)?[]:[new xr(n.key,n.value,`object expected, ${ts(n.value)} found`)]}const B7={"*"(){return[]},array:OB,boolean:jq,number:hx,color:e6,constants:KF,enum:dC,filter:IB,function:RF,layer:zF,object:kf,source:NF,light:WF,sky:jF,terrain:GF,projection:Xq,projectionDefinition:Jq,string:kg,formatted:Yq,resolvedImage:qq,padding:Vq,numberArray:Hq,colorArray:$q,variableAnchorOffsetCollection:Zq,sprite:QF,state:YF};function $b(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=$b,t.expression&&Fy(HA(e))?RF(n):t.expression&&Ly(Tg(e))?My(n):t.type&&B7[t.type]?B7[t.type](n):kf(_y({},n,{valueSpec:t.type?r[t.type]:t}))}function qF(n){const e=n.value,t=n.key,r=kg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new xr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new xr(t,e,'"glyphs" url must include a "{range}" token'))),r}function Jd(n,e=Bs){let t=[];return t=t.concat($b({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:$b,objectElementValidators:{glyphs:qF,"*"(){return[]}}})),n.constants&&(t=t.concat(KF({key:"constants",value:n.constants}))),VF(t)}Jd.source=Mp(xp(NF));Jd.sprite=Mp(xp(QF));Jd.glyphs=Mp(xp(qF));Jd.light=Mp(xp(WF));Jd.sky=Mp(xp(jF));Jd.terrain=Mp(xp(GF));Jd.state=Mp(xp(YF));Jd.layer=Mp(xp(zF));Jd.filter=Mp(xp(IB));Jd.paintProperty=Mp(xp(LF));Jd.layoutProperty=Mp(xp(UF));function xp(n){return function(e){return n({...e,validateSpec:$b})}}function VF(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function Mp(n){return function(...e){return VF(n.apply(this,e))}}const rV=/("(?:[^\\"]|\\.)*")|[:,]/g;function iV(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,p){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const v=JSON.stringify(l,i);if(v===void 0)return v;const x=r-o.length-p;if(v.length<=x){const B=v.replace(rV,(k,P)=>P||`${k} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(v),i=void 0),typeof l=="object"&&l!==null){const B=o+t,k=[];let P=0,D,N;if(Array.isArray(l)){D="[",N="]";const{length:W}=l;for(;P<W;P++)k.push(s(l[P],B,P===W-1?0:1)||"null")}else{D="{",N="}";const W=Object.keys(l),{length:V}=W;for(;P<V;P++){const $=W[P],ie=`${JSON.stringify($)}: `,ne=s(l[$],B,ie.length+(P===V-1?0:1));ne!==void 0&&k.push(ie+ne)}}if(k.length>0)return[D,t+k.join(`,
${B}`),N].join(`
${o}`)}return v}(n,"",0)}function O7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function HF(n,e=2){return n=O7(n,Bs.$root),n.layers&&(n.layers=n.layers.map(t=>O7(t,Bs.layer))),iV(n,{indent:e})}function Z3(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function I7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function t6(n,e){return typeof e=="string"&&e[0]==="@"?t6(n,n.constants[e]):e}function oV(n){return Array.isArray(n.stops)}function dv(n,e,t){n[t]=n[e],delete n[e]}function sV(n){n.version=8,Wq(n,i=>{i.type==="video"&&i.url!==void 0&&dv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),$v(n,i=>{Z3(i,s=>{s["symbol-min-distance"]!==void 0&&dv(s,"symbol-min-distance","symbol-spacing")}),I7(i,s=>{s["background-image"]!==void 0&&dv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&dv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&dv(s,"fill-image","fill-pattern")})}),BB(n,{paint:!0,layout:!0},i=>{const s=t6(n,i.value);oV(s)&&s.stops.forEach(l=>{l[1]=t6(n,l[1])}),i.set(s)}),delete n.constants,$v(n,i=>{Z3(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),I7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(l=>{l[1]=s(l[1])}),i;throw new Error("unexpected font value")}$v(n,i=>{Z3(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function aV(n){const e=[];return $v(n,t=>{t.filter&&(t.filter=Hv(t.filter))}),BB(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{Ly(r)||(typeof r=="object"&&!Array.isArray(r)?(s(MB(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(PF(r)))}),n}function lV(n){return JSON.parse(AV(JSON.stringify(n)))}function AV(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,l,o]=r.slice(1);return[s,l]=[s,l].map(p=>p.endsWith("%")?p:`${parseFloat(p)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,l,o].filter(Boolean).join(",")})"`}return e})}function uV(n){let e=!1;if(n.version===7&&(n=sV(n),e=!0),n.version===8&&(e=!!aV(n),e=!0),BB(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(lV(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const cV=Bs,hV={StyleExpression:TF,StylePropertyFunction:cx,ZoomConstantExpression:ZE,ZoomDependentExpression:XE,createExpression:Ax,createPropertyExpression:ux,isExpression:Ly,isExpressionFilter:zC,isZoomExpression:Eq,normalizePropertyExpression:Bq},dV={convertFunction:MB,createFunction:xB,isFunction:Fy};var dx=RC();const fV=dl(dx);var wb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */var pV=wb.exports,T7;function mV(){return T7||(T7=1,function(n,e){(function(t,r){n.exports=r()})(pV,function(){var t={},r={};function i(l,o,p){if(r[l]=p,l==="index"){var v="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(t,x),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([v],{type:"text/javascript"}))),t}}i("shared",["exports"],function(l){function o(h,A,d,y){return new(d||(d=Promise))(function(w,R){function U(re){try{X(y.next(re))}catch(de){R(de)}}function j(re){try{X(y.throw(re))}catch(de){R(de)}}function X(re){var de;re.done?w(re.value):(de=re.value,de instanceof d?de:new d(function(xe){xe(de)})).then(U,j)}X((y=y.apply(h,A||[])).next())})}function p(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var v,x;function B(){if(x)return v;function h(A,d){this.x=A,this.y=d}return x=1,v=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,d){return this.clone()._rotateAround(A,d)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var d=A.x-this.x,y=A.y-this.y;return d*d+y*y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,d){return Math.atan2(this.x*d-this.y*A,this.x*A+this.y*d)},_matMult:function(A){var d=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=d,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var d=Math.cos(A),y=Math.sin(A),w=y*this.x+d*this.y;return this.x=d*this.x-y*this.y,this.y=w,this},_rotateAround:function(A,d){var y=Math.cos(A),w=Math.sin(A),R=d.y+w*(this.x-d.x)+y*(this.y-d.y);return this.x=d.x+y*(this.x-d.x)-w*(this.y-d.y),this.y=R,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(A){return A instanceof h?A:Array.isArray(A)?new h(A[0],A[1]):A},v}typeof SuppressedError=="function"&&SuppressedError;var k,P,D=p(B()),N=function(){if(P)return k;function h(A,d,y,w){this.cx=3*A,this.bx=3*(y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(w-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=d,this.p2x=y,this.p2y=w}return P=1,k=h,h.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,d){if(d===void 0&&(d=1e-6),A<0)return 0;if(A>1)return 1;for(var y=A,w=0;w<8;w++){var R=this.sampleCurveX(y)-A;if(Math.abs(R)<d)return y;var U=this.sampleCurveDerivativeX(y);if(Math.abs(U)<1e-6)break;y-=R/U}var j=0,X=1;for(y=A,w=0;w<20&&(R=this.sampleCurveX(y),!(Math.abs(R-A)<d));w++)A>R?j=y:X=y,y=.5*(X-j)+j;return y},solve:function(A,d){return this.sampleCurveY(this.solveCurveX(A,d))}},k}(),W=p(N);let V,$;function ie(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function ne(){if($==null&&($=!1,ie())){const A=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(A){for(let y=0;y<5*5;y++){const w=4*y;A.fillStyle=`rgb(${w},${w+1},${w+2})`,A.fillRect(y%5,Math.floor(y/5),1,1)}const d=A.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&d[y]!==y){$=!0;break}}}return $||!1}var q=1e-6,te=typeof Float32Array<"u"?Float32Array:Array;function G(){var h=new te(9);return te!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function oe(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function fe(){var h=new te(3);return te!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function he(h){return Math.hypot(h[0],h[1],h[2])}function Me(h,A,d){var y=new te(3);return y[0]=h,y[1]=A,y[2]=d,y}Math.hypot||(Math.hypot=function(){for(var h=0,A=arguments.length;A--;)h+=arguments[A]*arguments[A];return Math.sqrt(h)});var me,pe=he;function qe(h,A,d){var y=A[0],w=A[1],R=A[2],U=A[3];return h[0]=d[0]*y+d[4]*w+d[8]*R+d[12]*U,h[1]=d[1]*y+d[5]*w+d[9]*R+d[13]*U,h[2]=d[2]*y+d[6]*w+d[10]*R+d[14]*U,h[3]=d[3]*y+d[7]*w+d[11]*R+d[15]*U,h}function Se(){var h=new te(4);return te!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function vt(){var h=new te(2);return te!=Float32Array&&(h[0]=0,h[1]=0),h}function Je(h,A){var d=new te(2);return d[0]=h,d[1]=A,d}fe(),me=new te(4),te!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0,me[3]=0),fe(),Me(1,0,0),Me(0,1,0),Se(),Se(),G(),vt();const Ke=8192;function je(h,A,d){return A*(Ke/(h.tileSize*Math.pow(2,d-h.tileID.overscaledZ)))}function Pe(h,A){return(h%A+A)%A}function Le(h,A,d){return h*(1-d)+A*d}function Xe(h){if(h<=0)return 0;if(h>=1)return 1;const A=h*h,d=A*h;return 4*(h<.5?d:3*(h-A)+d-.75)}function Ct(h,A,d,y){const w=new W(h,A,d,y);return R=>w.solve(R)}const Gt=Ct(.25,.1,.25,1);function mt(h,A,d){return Math.min(d,Math.max(A,h))}function Ut(h,A,d){const y=d-A,w=((h-A)%y+y)%y+A;return w===A?d:w}function kt(h,...A){for(const d of A)for(const y in d)h[y]=d[y];return h}let Te=1;function Re(h,A,d){const y={};for(const w in h)y[w]=A.call(this,h[w],w,h);return y}function Ue(h,A,d){const y={};for(const w in h)A.call(this,h[w],w,h)&&(y[w]=h[w]);return y}function nt(h){return Array.isArray(h)?h.map(nt):typeof h=="object"&&h?Re(h,nt):h}const _t={};function gt(h){_t[h]||(typeof console<"u"&&console.warn(h),_t[h]=!0)}function Kt(h,A,d){return(d.y-h.y)*(A.x-h.x)>(A.y-h.y)*(d.x-h.x)}function $t(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Rt=null;function _n(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const pr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function nn(h,A,d,y,w){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(h,{timestamp:0});try{const U=R==null?void 0:R.format;if(!U||!U.startsWith("BGR")&&!U.startsWith("RGB"))throw new Error(`Unrecognized format ${U}`);const j=U.startsWith("BGR"),X=new Uint8ClampedArray(y*w*4);if(yield R.copyTo(X,function(re,de,xe,Fe,ze){const Ye=4*Math.max(1,0),et=(Math.max(0,xe)-xe)*Fe*4+Ye,At=4*Fe,yt=Math.max(0,de),Wt=Math.max(0,xe);return{rect:{x:yt,y:Wt,width:Math.min(re.width,de+Fe)-yt,height:Math.min(re.height,xe+ze)-Wt},layout:[{offset:et,stride:At}]}}(h,A,d,y,w)),j)for(let re=0;re<X.length;re+=4){const de=X[re];X[re]=X[re+2],X[re+2]=de}return X}finally{R.close()}})}let Xn,Fn;function an(h,A,d,y){return h.addEventListener(A,d,y),{unsubscribe:()=>{h.removeEventListener(A,d,y)}}}function Bn(h){return h/Math.PI*180}const Cr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},lr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},hr="AbortError";function We(){return new Error(hr)}const ce={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ye(h){return ce.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const rt="global-dispatcher";class Et extends Error{constructor(A,d,y,w){super(`AJAXError: ${d} (${A}): ${y}`),this.status=A,this.statusText=d,this.url=y,this.body=w}}const Ht=()=>$t(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Zt=function(h,A){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const y=ye(h.url);if(y)return y(h,A);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:rt},A)}if(!(/^file:/.test(d=h.url)||/^file:/.test(Ht())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,w){return o(this,void 0,void 0,function*(){const R=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:Ht(),signal:w.signal});let U,j;y.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{U=yield fetch(R)}catch(re){throw new Et(0,re.message,y.url,new Blob)}if(!U.ok){const re=yield U.blob();throw new Et(U.status,U.statusText,y.url,re)}j=y.type==="arrayBuffer"||y.type==="image"?U.arrayBuffer():y.type==="json"?U.json():U.text();const X=yield j;if(w.signal.aborted)throw We();return{data:X,cacheControl:U.headers.get("Cache-Control"),expires:U.headers.get("Expires")}})}(h,A);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:rt},A)}var d;return function(y,w){return new Promise((R,U)=>{var j;const X=new XMLHttpRequest;X.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(X.responseType="arraybuffer");for(const re in y.headers)X.setRequestHeader(re,y.headers[re]);y.type==="json"&&(X.responseType="text",!((j=y.headers)===null||j===void 0)&&j.Accept||X.setRequestHeader("Accept","application/json")),X.withCredentials=y.credentials==="include",X.onerror=()=>{U(new Error(X.statusText))},X.onload=()=>{if(!w.signal.aborted)if((X.status>=200&&X.status<300||X.status===0)&&X.response!==null){let re=X.response;if(y.type==="json")try{re=JSON.parse(X.response)}catch(de){return void U(de)}R({data:re,cacheControl:X.getResponseHeader("Cache-Control"),expires:X.getResponseHeader("Expires")})}else{const re=new Blob([X.response],{type:X.getResponseHeader("Content-Type")});U(new Et(X.status,X.statusText,y.url,re))}},w.signal.addEventListener("abort",()=>{X.abort(),U(We())}),X.send(y.body)})}(h,A)};function Jn(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const A=new URL(h),d=window.location;return A.protocol===d.protocol&&A.host===d.host}function He(h,A,d){d[h]&&d[h].indexOf(A)!==-1||(d[h]=d[h]||[],d[h].push(A))}function ae(h,A,d){if(d&&d[h]){const y=d[h].indexOf(A);y!==-1&&d[h].splice(y,1)}}class _e{constructor(A,d={}){kt(this,d),this.type=A}}class f extends _e{constructor(A,d={}){super("error",kt({error:A},d))}}class Qe{on(A,d){return this._listeners=this._listeners||{},He(A,d,this._listeners),{unsubscribe:()=>{this.off(A,d)}}}off(A,d){return ae(A,d,this._listeners),ae(A,d,this._oneTimeListeners),this}once(A,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},He(A,d,this._oneTimeListeners),this):new Promise(y=>this.once(A,y))}fire(A,d){typeof A=="string"&&(A=new _e(A,d||{}));const y=A.type;if(this.listens(y)){A.target=this;const w=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const j of w)j.call(this,A);const R=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const j of R)ae(y,j,this._oneTimeListeners),j.call(this,A);const U=this._eventedParent;U&&(kt(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),U.fire(A))}else A instanceof f&&console.error(A.error);return this}listens(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)}setEventedParent(A,d){return this._eventedParent=A,this._eventedParentData=d,this}}var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const it=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ut(h,A){const d={};for(const y in h)y!=="ref"&&(d[y]=h[y]);return it.forEach(y=>{y in A&&(d[y]=A[y])}),d}function at(h,A){if(Array.isArray(h)){if(!Array.isArray(A)||h.length!==A.length)return!1;for(let d=0;d<h.length;d++)if(!at(h[d],A[d]))return!1;return!0}if(typeof h=="object"&&h!==null&&A!==null){if(typeof A!="object"||Object.keys(h).length!==Object.keys(A).length)return!1;for(const d in h)if(!at(h[d],A[d]))return!1;return!0}return h===A}function zt(h,A){h.push(A)}function Qt(h,A,d){zt(d,{command:"addSource",args:[h,A[h]]})}function Nt(h,A,d){zt(A,{command:"removeSource",args:[h]}),d[h]=!0}function rn(h,A,d,y){Nt(h,d,y),Qt(h,A,d)}function Rn(h,A,d){let y;for(y in h[d])if(Object.prototype.hasOwnProperty.call(h[d],y)&&y!=="data"&&!at(h[d][y],A[d][y]))return!1;for(y in A[d])if(Object.prototype.hasOwnProperty.call(A[d],y)&&y!=="data"&&!at(h[d][y],A[d][y]))return!1;return!0}function Dn(h,A,d,y,w,R){h=h||{},A=A||{};for(const U in h)Object.prototype.hasOwnProperty.call(h,U)&&(at(h[U],A[U])||d.push({command:R,args:[y,U,A[U],w]}));for(const U in A)Object.prototype.hasOwnProperty.call(A,U)&&!Object.prototype.hasOwnProperty.call(h,U)&&(at(h[U],A[U])||d.push({command:R,args:[y,U,A[U],w]}))}function mr(h){return h.id}function Tr(h,A){return h[A.id]=A,h}class Jt{constructor(A,d,y,w){this.message=(A?`${A}: `:"")+y,w&&(this.identifier=w),d!=null&&d.__line__&&(this.line=d.__line__)}}function br(h,...A){for(const d of A)for(const y in d)h[y]=d[y];return h}class Gr extends Error{constructor(A,d){super(d),this.message=d,this.key=A}}class Si{constructor(A,d=[]){this.parent=A,this.bindings={};for(const[y,w]of d)this.bindings[y]=w}concat(A){return new Si(this,A)}get(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(`${A} not found in scope.`)}has(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)}}const Fr={kind:"null"},yn={kind:"number"},ar={kind:"string"},Pr={kind:"boolean"},Cs={kind:"color"},Ao={kind:"projectionDefinition"},ui={kind:"object"},$r={kind:"value"},_s={kind:"collator"},fs={kind:"formatted"},Ja={kind:"padding"},sa={kind:"resolvedImage"},Wo={kind:"variableAnchorOffsetCollection"};function zo(h,A){return{kind:"array",itemType:h,N:A}}function So(h){if(h.kind==="array"){const A=So(h.itemType);return typeof h.N=="number"?`array<${A}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${A}>`}return h.kind}const pi=[Fr,yn,ar,Pr,Cs,Ao,fs,ui,zo($r),Ja,sa,Wo];function tA(h,A){if(A.kind==="error")return null;if(h.kind==="array"){if(A.kind==="array"&&(A.N===0&&A.itemType.kind==="value"||!tA(h.itemType,A.itemType))&&(typeof h.N!="number"||h.N===A.N))return null}else{if(h.kind===A.kind)return null;if(h.kind==="value"){for(const d of pi)if(!tA(d,A))return null}}return`Expected ${So(h)} but found ${So(A)} instead.`}function _l(h,A){return A.some(d=>d.kind===h.kind)}function Ni(h,A){return A.some(d=>d==="null"?h===null:d==="array"?Array.isArray(h):d==="object"?h&&!Array.isArray(h)&&typeof h=="object":d===typeof h)}function wr(h,A){return h.kind==="array"&&A.kind==="array"?h.itemType.kind===A.itemType.kind&&typeof h.N=="number":h.kind===A.kind}const Fa=.96422,bs=.82521,Rs=4/29,Ve=6/29,xt=3*Ve*Ve,xn=Ve*Ve*Ve,Yn=Math.PI/180,fn=180/Math.PI;function dr(h){return(h%=360)<0&&(h+=360),h}function Wi([h,A,d,y]){let w,R;const U=ls((.2225045*(h=Co(h))+.7168786*(A=Co(A))+.0606169*(d=Co(d)))/1);h===A&&A===d?w=R=U:(w=ls((.4360747*h+.3850649*A+.1430804*d)/Fa),R=ls((.0139322*h+.0971045*A+.7141733*d)/bs));const j=116*U-16;return[j<0?0:j,500*(w-U),200*(U-R),y]}function Co(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function ls(h){return h>xn?Math.pow(h,1/3):h/xt+Rs}function pa([h,A,d,y]){let w=(h+16)/116,R=isNaN(A)?w:w+A/500,U=isNaN(d)?w:w-d/200;return w=1*Ci(w),R=Fa*Ci(R),U=bs*Ci(U),[nA(3.1338561*R-1.6168667*w-.4906146*U),nA(-.9787684*R+1.9161415*w+.033454*U),nA(.0719453*R-.2289914*w+1.4052427*U),y]}function nA(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Ci(h){return h>Ve?h*h*h:xt*(h-Rs)}function ZA(h){return parseInt(h.padEnd(2,h),16)/255}function rA(h,A){return ma(A?h/100:h,0,1)}function ma(h,A,d){return Math.min(Math.max(A,h),d)}function Ea(h){return!h.some(Number.isNaN)}const _c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ws(h,A,d){return h+d*(A-h)}function di(h,A,d){return h.map((y,w)=>Ws(y,A[w],d))}class jr{constructor(A,d,y,w=1,R=!0){this.r=A,this.g=d,this.b=y,this.a=w,R||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[A,d,y,w]))}static parse(A){if(A instanceof jr)return A;if(typeof A!="string")return;const d=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=_c[y];if(w){const[U,j,X]=w;return[U/255,j/255,X/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const U=y.length<6?1:2;let j=1;return[ZA(y.slice(j,j+=U)),ZA(y.slice(j,j+=U)),ZA(y.slice(j,j+=U)),ZA(y.slice(j,j+U)||"ff")]}if(y.startsWith("rgb")){const U=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(U){const[j,X,re,de,xe,Fe,ze,Ye,et,At,yt,Wt]=U,St=[de||" ",ze||" ",At].join("");if(St==="  "||St==="  /"||St===",,"||St===",,,"){const De=[re,Fe,et].join(""),ot=De==="%%%"?100:De===""?255:0;if(ot){const Tt=[ma(+X/ot,0,1),ma(+xe/ot,0,1),ma(+Ye/ot,0,1),yt?rA(+yt,Wt):1];if(Ea(Tt))return Tt}}return}}const R=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[U,j,X,re,de,xe,Fe,ze,Ye]=R,et=[X||" ",de||" ",Fe].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const At=[+j,ma(+re,0,100),ma(+xe,0,100),ze?rA(+ze,Ye):1];if(Ea(At))return function([yt,Wt,St,De]){function ot(Tt){const dn=(Tt+yt/30)%12,zn=Wt*Math.min(St,1-St);return St-zn*Math.max(-1,Math.min(dn-3,9-dn,1))}return yt=dr(yt),Wt/=100,St/=100,[ot(0),ot(8),ot(4),De]}(At)}}}(A);return d?new jr(...d,!1):void 0}get rgb(){const{r:A,g:d,b:y,a:w}=this,R=w||1/0;return this.overwriteGetter("rgb",[A/R,d/R,y/R,w])}get hcl(){return this.overwriteGetter("hcl",function(A){const[d,y,w,R]=Wi(A),U=Math.sqrt(y*y+w*w);return[Math.round(1e4*U)?dr(Math.atan2(w,y)*fn):NaN,U,d,R]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Wi(this.rgb))}overwriteGetter(A,d){return Object.defineProperty(this,A,{value:d}),d}toString(){const[A,d,y,w]=this.rgb;return`rgba(${[A,d,y].map(R=>Math.round(255*R)).join(",")},${w})`}static interpolate(A,d,y,w="rgb"){switch(w){case"rgb":{const[R,U,j,X]=di(A.rgb,d.rgb,y);return new jr(R,U,j,X,!1)}case"hcl":{const[R,U,j,X]=A.hcl,[re,de,xe,Fe]=d.hcl;let ze,Ye;if(isNaN(R)||isNaN(re))isNaN(R)?isNaN(re)?ze=NaN:(ze=re,j!==1&&j!==0||(Ye=de)):(ze=R,xe!==1&&xe!==0||(Ye=U));else{let St=re-R;re>R&&St>180?St-=360:re<R&&R-re>180&&(St+=360),ze=R+y*St}const[et,At,yt,Wt]=function([St,De,ot,Tt]){return St=isNaN(St)?0:St*Yn,pa([ot,Math.cos(St)*De,Math.sin(St)*De,Tt])}([ze,Ye??Ws(U,de,y),Ws(j,xe,y),Ws(X,Fe,y)]);return new jr(et,At,yt,Wt,!1)}case"lab":{const[R,U,j,X]=pa(di(A.lab,d.lab,y));return new jr(R,U,j,X,!1)}}}}jr.black=new jr(0,0,0,1),jr.white=new jr(1,1,1,1),jr.transparent=new jr(0,0,0,0),jr.red=new jr(1,0,0,1);class Ii{constructor(A,d,y){this.sensitivity=A?d?"variant":"case":d?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(A,d){return this.collator.compare(A,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const bl=["bottom","center","top"];class $o{constructor(A,d,y,w,R,U){this.text=A,this.image=d,this.scale=y,this.fontStack=w,this.textColor=R,this.verticalAlign=U}}class aa{constructor(A){this.sections=A}static fromString(A){return new aa([new $o(A,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(A=>A.text.length!==0||A.image&&A.image.name.length!==0)}static factory(A){return A instanceof aa?A:aa.fromString(A)}toString(){return this.sections.length===0?"":this.sections.map(A=>A.text).join("")}}class js{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof js)return A;if(typeof A=="number")return new js([A,A,A,A]);if(Array.isArray(A)&&!(A.length<1||A.length>4)){for(const d of A)if(typeof d!="number")return;switch(A.length){case 1:A=[A[0],A[0],A[0],A[0]];break;case 2:A=[A[0],A[1],A[0],A[1]];break;case 3:A=[A[0],A[1],A[2],A[1]]}return new js(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,d,y){return new js(di(A.values,d.values,y))}}class jo{constructor(A){this.name="ExpressionEvaluationError",this.message=A}toJSON(){return this.message}}const iA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ns{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof ns)return A;if(Array.isArray(A)&&!(A.length<1)&&A.length%2==0){for(let d=0;d<A.length;d+=2){const y=A[d],w=A[d+1];if(typeof y!="string"||!iA.has(y)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new ns(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,d,y){const w=A.values,R=d.values;if(w.length!==R.length)throw new jo(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${d.toString()}`);const U=[];for(let j=0;j<w.length;j+=2){if(w[j]!==R[j])throw new jo(`Cannot interpolate values containing mismatched anchors. from[${j}]: ${w[j]}, to[${j}]: ${R[j]}`);U.push(w[j]);const[X,re]=w[j+1],[de,xe]=R[j+1];U.push([Ws(X,de,y),Ws(re,xe,y)])}return new ns(U)}}class Qi{constructor(A){this.name=A.name,this.available=A.available}toString(){return this.name}static fromString(A){return A?new Qi({name:A,available:!1}):null}}class _o{constructor(A,d,y){this.from=A,this.to=d,this.transition=y}static interpolate(A,d,y){return new _o(A,d,y)}static parse(A){return A instanceof _o?A:Array.isArray(A)&&A.length===3&&typeof A[0]=="string"&&typeof A[1]=="string"&&typeof A[2]=="number"?new _o(A[0],A[1],A[2]):typeof A=="object"&&typeof A.from=="string"&&typeof A.to=="string"&&typeof A.transition=="number"?new _o(A.from,A.to,A.transition):typeof A=="string"?new _o(A,A,1):void 0}}function La(h,A,d,y){return typeof h=="number"&&h>=0&&h<=255&&typeof A=="number"&&A>=0&&A<=255&&typeof d=="number"&&d>=0&&d<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[h,A,d,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[h,A,d,y]:[h,A,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ba(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof _o||h instanceof jr||h instanceof Ii||h instanceof aa||h instanceof js||h instanceof ns||h instanceof Qi)return!0;if(Array.isArray(h)){for(const A of h)if(!Ba(A))return!1;return!0}if(typeof h=="object"){for(const A in h)if(!Ba(h[A]))return!1;return!0}return!1}function uo(h){if(h===null)return Fr;if(typeof h=="string")return ar;if(typeof h=="boolean")return Pr;if(typeof h=="number")return yn;if(h instanceof jr)return Cs;if(h instanceof _o)return Ao;if(h instanceof Ii)return _s;if(h instanceof aa)return fs;if(h instanceof js)return Ja;if(h instanceof ns)return Wo;if(h instanceof Qi)return sa;if(Array.isArray(h)){const A=h.length;let d;for(const y of h){const w=uo(y);if(d){if(d===w)continue;d=$r;break}d=w}return zo(d||$r,A)}return ui}function Gs(h){const A=typeof h;return h===null?"":A==="string"||A==="number"||A==="boolean"?String(h):h instanceof jr||h instanceof _o||h instanceof aa||h instanceof js||h instanceof ns||h instanceof Qi?h.toString():JSON.stringify(h)}class oA{constructor(A,d){this.type=A,this.value=d}static parse(A,d){if(A.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${A.length-1} instead.`);if(!Ba(A[1]))return d.error("invalid value");const y=A[1];let w=uo(y);const R=d.expectedType;return w.kind!=="array"||w.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(w=R),new oA(w,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const el={string:ar,number:yn,boolean:Pr,object:ui};class Oa{constructor(A,d){this.type=A,this.args=d}static parse(A,d){if(A.length<2)return d.error("Expected at least one argument.");let y,w=1;const R=A[0];if(R==="array"){let j,X;if(A.length>2){const re=A[1];if(typeof re!="string"||!(re in el)||re==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);j=el[re],w++}else j=$r;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return d.error('The length argument to "array" must be a positive integer literal',2);X=A[2],w++}y=zo(j,X)}else{if(!el[R])throw new Error(`Types doesn't contain name = ${R}`);y=el[R]}const U=[];for(;w<A.length;w++){const j=d.parse(A[w],w,$r);if(!j)return null;U.push(j)}return new Oa(y,U)}evaluate(A){for(let d=0;d<this.args.length;d++){const y=this.args[d].evaluate(A);if(!tA(this.type,uo(y)))return y;if(d===this.args.length-1)throw new jo(`Expected value to be of type ${So(this.type)}, but found ${So(uo(y))} instead.`)}throw new Error}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const wA={"to-boolean":Pr,"to-color":Cs,"to-number":yn,"to-string":ar};class wi{constructor(A,d){this.type=A,this.args=d}static parse(A,d){if(A.length<2)return d.error("Expected at least one argument.");const y=A[0];if(!wA[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&A.length!==2)return d.error("Expected one argument.");const w=wA[y],R=[];for(let U=1;U<A.length;U++){const j=d.parse(A[U],U,$r);if(!j)return null;R.push(j)}return new wi(w,R)}evaluate(A){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(A);case"color":{let d,y;for(const w of this.args){if(d=w.evaluate(A),y=null,d instanceof jr)return d;if(typeof d=="string"){const R=A.parseColor(d);if(R)return R}else if(Array.isArray(d)&&(y=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:La(d[0],d[1],d[2],d[3]),!y))return new jr(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new jo(y||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const y of this.args){d=y.evaluate(A);const w=js.parse(d);if(w)return w}throw new jo(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const y of this.args){d=y.evaluate(A);const w=ns.parse(d);if(w)return w}throw new jo(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const y of this.args){if(d=y.evaluate(A),d===null)return 0;const w=Number(d);if(!isNaN(w))return w}throw new jo(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return aa.fromString(Gs(this.args[0].evaluate(A)));case"resolvedImage":return Qi.fromString(Gs(this.args[0].evaluate(A)));case"projectionDefinition":return this.args[0].evaluate(A);default:return Gs(this.args[0].evaluate(A))}}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const XA=["Unknown","Point","LineString","Polygon"];class eo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?XA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(A){let d=this._parseColorCache[A];return d||(d=this._parseColorCache[A]=jr.parse(A)),d}}class Sr{constructor(A,d,y=[],w,R=new Si,U=[]){this.registry=A,this.path=y,this.key=y.map(j=>`[${j}]`).join(""),this.scope=R,this.errors=U,this.expectedType=w,this._isConstant=d}parse(A,d,y,w,R={}){return d?this.concat(d,y,w)._parse(A,R):this._parse(A,R)}_parse(A,d){function y(w,R,U){return U==="assert"?new Oa(R,[w]):U==="coerce"?new wi(R,[w]):w}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=A[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[w];if(R){let U=R.parse(A,this);if(!U)return null;if(this.expectedType){const j=this.expectedType,X=U.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||X.kind!=="value")if(j.kind!=="projectionDefinition"||X.kind!=="string"&&X.kind!=="array")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||X.kind!=="value"&&X.kind!=="string")if(j.kind!=="padding"||X.kind!=="value"&&X.kind!=="number"&&X.kind!=="array")if(j.kind!=="variableAnchorOffsetCollection"||X.kind!=="value"&&X.kind!=="array"){if(this.checkSubtype(j,X))return null}else U=y(U,j,d.typeAnnotation||"coerce");else U=y(U,j,d.typeAnnotation||"coerce");else U=y(U,j,d.typeAnnotation||"coerce");else U=y(U,j,d.typeAnnotation||"coerce");else U=y(U,j,d.typeAnnotation||"assert")}if(!(U instanceof oA)&&U.type.kind!=="resolvedImage"&&this._isConstant(U)){const j=new eo;try{U=new oA(U.type,U.evaluate(j))}catch(X){return this.error(X.message),null}}return U}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(A===void 0?"'undefined' value invalid. Use null instead.":typeof A=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof A} instead.`)}concat(A,d,y){const w=typeof A=="number"?this.path.concat(A):this.path,R=y?this.scope.concat(y):this.scope;return new Sr(this.registry,this._isConstant,w,d||null,R,this.errors)}error(A,...d){const y=`${this.key}${d.map(w=>`[${w}]`).join("")}`;this.errors.push(new Gr(y,A))}checkSubtype(A,d){const y=tA(A,d);return y&&this.error(y),y}}class no{constructor(A,d){this.type=d.type,this.bindings=[].concat(A),this.result=d}evaluate(A){return this.result.evaluate(A)}eachChild(A){for(const d of this.bindings)A(d[1]);A(this.result)}static parse(A,d){if(A.length<4)return d.error(`Expected at least 3 arguments, but found ${A.length-1} instead.`);const y=[];for(let R=1;R<A.length-1;R+=2){const U=A[R];if(typeof U!="string")return d.error(`Expected string, but found ${typeof U} instead.`,R);if(/[^a-zA-Z0-9_]/.test(U))return d.error("Variable names must contain only alphanumeric characters or '_'.",R);const j=d.parse(A[R+1],R+1);if(!j)return null;y.push([U,j])}const w=d.parse(A[A.length-1],A.length-1,d.expectedType,y);return w?new no(y,w):null}outputDefined(){return this.result.outputDefined()}}class J{constructor(A,d){this.type=d.type,this.name=A,this.boundExpression=d}static parse(A,d){if(A.length!==2||typeof A[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const y=A[1];return d.scope.has(y)?new J(y,d.scope.get(y)):d.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(A){return this.boundExpression.evaluate(A)}eachChild(){}outputDefined(){return!1}}class Be{constructor(A,d,y){this.type=A,this.index=d,this.input=y}static parse(A,d){if(A.length!==3)return d.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const y=d.parse(A[1],1,yn),w=d.parse(A[2],2,zo(d.expectedType||$r));return y&&w?new Be(w.type.itemType,y,w):null}evaluate(A){const d=this.index.evaluate(A),y=this.input.evaluate(A);if(d<0)throw new jo(`Array index out of bounds: ${d} < 0.`);if(d>=y.length)throw new jo(`Array index out of bounds: ${d} > ${y.length-1}.`);if(d!==Math.floor(d))throw new jo(`Array index must be an integer, but found ${d} instead.`);return y[d]}eachChild(A){A(this.index),A(this.input)}outputDefined(){return!1}}class lt{constructor(A,d){this.type=Pr,this.needle=A,this.haystack=d}static parse(A,d){if(A.length!==3)return d.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const y=d.parse(A[1],1,$r),w=d.parse(A[2],2,$r);return y&&w?_l(y.type,[Pr,ar,yn,Fr,$r])?new lt(y,w):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${So(y.type)} instead`):null}evaluate(A){const d=this.needle.evaluate(A),y=this.haystack.evaluate(A);if(!y)return!1;if(!Ni(d,["boolean","string","number","null"]))throw new jo(`Expected first argument to be of type boolean, string, number or null, but found ${So(uo(d))} instead.`);if(!Ni(y,["string","array"]))throw new jo(`Expected second argument to be of type array or string, but found ${So(uo(y))} instead.`);return y.indexOf(d)>=0}eachChild(A){A(this.needle),A(this.haystack)}outputDefined(){return!0}}class qt{constructor(A,d,y){this.type=yn,this.needle=A,this.haystack=d,this.fromIndex=y}static parse(A,d){if(A.length<=2||A.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const y=d.parse(A[1],1,$r),w=d.parse(A[2],2,$r);if(!y||!w)return null;if(!_l(y.type,[Pr,ar,yn,Fr,$r]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${So(y.type)} instead`);if(A.length===4){const R=d.parse(A[3],3,yn);return R?new qt(y,w,R):null}return new qt(y,w)}evaluate(A){const d=this.needle.evaluate(A),y=this.haystack.evaluate(A);if(!Ni(d,["boolean","string","number","null"]))throw new jo(`Expected first argument to be of type boolean, string, number or null, but found ${So(uo(d))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(A)),Ni(y,["string"])){const R=y.indexOf(d,w);return R===-1?-1:[...y.slice(0,R)].length}if(Ni(y,["array"]))return y.indexOf(d,w);throw new jo(`Expected second argument to be of type array or string, but found ${So(uo(y))} instead.`)}eachChild(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)}outputDefined(){return!1}}class Br{constructor(A,d,y,w,R,U){this.inputType=A,this.type=d,this.input=y,this.cases=w,this.outputs=R,this.otherwise=U}static parse(A,d){if(A.length<5)return d.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if(A.length%2!=1)return d.error("Expected an even number of arguments.");let y,w;d.expectedType&&d.expectedType.kind!=="value"&&(w=d.expectedType);const R={},U=[];for(let re=2;re<A.length-1;re+=2){let de=A[re];const xe=A[re+1];Array.isArray(de)||(de=[de]);const Fe=d.concat(re);if(de.length===0)return Fe.error("Expected at least one branch label.");for(const Ye of de){if(typeof Ye!="number"&&typeof Ye!="string")return Fe.error("Branch labels must be numbers or strings.");if(typeof Ye=="number"&&Math.abs(Ye)>Number.MAX_SAFE_INTEGER)return Fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ye=="number"&&Math.floor(Ye)!==Ye)return Fe.error("Numeric branch labels must be integer values.");if(y){if(Fe.checkSubtype(y,uo(Ye)))return null}else y=uo(Ye);if(R[String(Ye)]!==void 0)return Fe.error("Branch labels must be unique.");R[String(Ye)]=U.length}const ze=d.parse(xe,re,w);if(!ze)return null;w=w||ze.type,U.push(ze)}const j=d.parse(A[1],1,$r);if(!j)return null;const X=d.parse(A[A.length-1],A.length-1,w);return X?j.type.kind!=="value"&&d.concat(1).checkSubtype(y,j.type)?null:new Br(y,w,j,R,U,X):null}evaluate(A){const d=this.input.evaluate(A);return(uo(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(A)}eachChild(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)}outputDefined(){return this.outputs.every(A=>A.outputDefined())&&this.otherwise.outputDefined()}}class Gn{constructor(A,d,y){this.type=A,this.branches=d,this.otherwise=y}static parse(A,d){if(A.length<4)return d.error(`Expected at least 3 arguments, but found only ${A.length-1}.`);if(A.length%2!=0)return d.error("Expected an odd number of arguments.");let y;d.expectedType&&d.expectedType.kind!=="value"&&(y=d.expectedType);const w=[];for(let U=1;U<A.length-1;U+=2){const j=d.parse(A[U],U,Pr);if(!j)return null;const X=d.parse(A[U+1],U+1,y);if(!X)return null;w.push([j,X]),y=y||X.type}const R=d.parse(A[A.length-1],A.length-1,y);if(!R)return null;if(!y)throw new Error("Can't infer output type");return new Gn(y,w,R)}evaluate(A){for(const[d,y]of this.branches)if(d.evaluate(A))return y.evaluate(A);return this.otherwise.evaluate(A)}eachChild(A){for(const[d,y]of this.branches)A(d),A(y);A(this.otherwise)}outputDefined(){return this.branches.every(([A,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Zr{constructor(A,d,y,w){this.type=A,this.input=d,this.beginIndex=y,this.endIndex=w}static parse(A,d){if(A.length<=2||A.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const y=d.parse(A[1],1,$r),w=d.parse(A[2],2,yn);if(!y||!w)return null;if(!_l(y.type,[zo($r),ar,$r]))return d.error(`Expected first argument to be of type array or string, but found ${So(y.type)} instead`);if(A.length===4){const R=d.parse(A[3],3,yn);return R?new Zr(y.type,y,w,R):null}return new Zr(y.type,y,w)}evaluate(A){const d=this.input.evaluate(A),y=this.beginIndex.evaluate(A);let w;if(this.endIndex&&(w=this.endIndex.evaluate(A)),Ni(d,["string"]))return[...d].slice(y,w).join("");if(Ni(d,["array"]))return d.slice(y,w);throw new jo(`Expected first argument to be of type array or string, but found ${So(uo(d))} instead.`)}eachChild(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)}outputDefined(){return!1}}function oi(h,A){const d=h.length-1;let y,w,R=0,U=d,j=0;for(;R<=U;)if(j=Math.floor((R+U)/2),y=h[j],w=h[j+1],y<=A){if(j===d||A<w)return j;R=j+1}else{if(!(y>A))throw new jo("Input is not a number.");U=j-1}return 0}class Or{constructor(A,d,y){this.type=A,this.input=d,this.labels=[],this.outputs=[];for(const[w,R]of y)this.labels.push(w),this.outputs.push(R)}static parse(A,d){if(A.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return d.error("Expected an even number of arguments.");const y=d.parse(A[1],1,yn);if(!y)return null;const w=[];let R=null;d.expectedType&&d.expectedType.kind!=="value"&&(R=d.expectedType);for(let U=1;U<A.length;U+=2){const j=U===1?-1/0:A[U],X=A[U+1],re=U,de=U+1;if(typeof j!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(w.length&&w[w.length-1][0]>=j)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const xe=d.parse(X,de,R);if(!xe)return null;R=R||xe.type,w.push([j,xe])}return new Or(R,y,w)}evaluate(A){const d=this.labels,y=this.outputs;if(d.length===1)return y[0].evaluate(A);const w=this.input.evaluate(A);if(w<=d[0])return y[0].evaluate(A);const R=d.length;return w>=d[R-1]?y[R-1].evaluate(A):y[oi(d,w)].evaluate(A)}eachChild(A){A(this.input);for(const d of this.outputs)A(d)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function ni(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var $i,Eo,si=function(){if(Eo)return $i;function h(A,d,y,w){this.cx=3*A,this.bx=3*(y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(w-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=d,this.p2x=y,this.p2y=w}return Eo=1,$i=h,h.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,d){if(d===void 0&&(d=1e-6),A<0)return 0;if(A>1)return 1;for(var y=A,w=0;w<8;w++){var R=this.sampleCurveX(y)-A;if(Math.abs(R)<d)return y;var U=this.sampleCurveDerivativeX(y);if(Math.abs(U)<1e-6)break;y-=R/U}var j=0,X=1;for(y=A,w=0;w<20&&(R=this.sampleCurveX(y),!(Math.abs(R-A)<d));w++)A>R?j=y:X=y,y=.5*(X-j)+j;return y},solve:function(A,d){return this.sampleCurveY(this.solveCurveX(A,d))}},$i}(),_i=ni(si);class Ri{constructor(A,d,y,w,R){this.type=A,this.operator=d,this.interpolation=y,this.input=w,this.labels=[],this.outputs=[];for(const[U,j]of R)this.labels.push(U),this.outputs.push(j)}static interpolationFactor(A,d,y,w){let R=0;if(A.name==="exponential")R=Yi(d,A.base,y,w);else if(A.name==="linear")R=Yi(d,1,y,w);else if(A.name==="cubic-bezier"){const U=A.controlPoints;R=new _i(U[0],U[1],U[2],U[3]).solve(Yi(d,1,y,w))}return R}static parse(A,d){let[y,w,R,...U]=A;if(!Array.isArray(w)||w.length===0)return d.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const re=w[1];if(typeof re!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:re}}else{if(w[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const re=w.slice(1);if(re.length!==4||re.some(de=>typeof de!="number"||de<0||de>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:re}}}if(A.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(R=d.parse(R,2,yn),!R)return null;const j=[];let X=null;y==="interpolate-hcl"||y==="interpolate-lab"?X=Cs:d.expectedType&&d.expectedType.kind!=="value"&&(X=d.expectedType);for(let re=0;re<U.length;re+=2){const de=U[re],xe=U[re+1],Fe=re+3,ze=re+4;if(typeof de!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(j.length&&j[j.length-1][0]>=de)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Fe);const Ye=d.parse(xe,ze,X);if(!Ye)return null;X=X||Ye.type,j.push([de,Ye])}return wr(X,yn)||wr(X,Ao)||wr(X,Cs)||wr(X,Ja)||wr(X,Wo)||wr(X,zo(yn))?new Ri(X,y,w,R,j):d.error(`Type ${So(X)} is not interpolatable.`)}evaluate(A){const d=this.labels,y=this.outputs;if(d.length===1)return y[0].evaluate(A);const w=this.input.evaluate(A);if(w<=d[0])return y[0].evaluate(A);const R=d.length;if(w>=d[R-1])return y[R-1].evaluate(A);const U=oi(d,w),j=Ri.interpolationFactor(this.interpolation,w,d[U],d[U+1]),X=y[U].evaluate(A),re=y[U+1].evaluate(A);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ws(X,re,j);case"color":return jr.interpolate(X,re,j);case"padding":return js.interpolate(X,re,j);case"variableAnchorOffsetCollection":return ns.interpolate(X,re,j);case"array":return di(X,re,j);case"projectionDefinition":return _o.interpolate(X,re,j)}case"interpolate-hcl":return jr.interpolate(X,re,j,"hcl");case"interpolate-lab":return jr.interpolate(X,re,j,"lab")}}eachChild(A){A(this.input);for(const d of this.outputs)A(d)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function Yi(h,A,d,y){const w=y-d,R=h-d;return w===0?0:A===1?R/w:(Math.pow(A,R)-1)/(Math.pow(A,w)-1)}const mi={color:jr.interpolate,number:Ws,padding:js.interpolate,variableAnchorOffsetCollection:ns.interpolate,array:di};class Ds{constructor(A,d){this.type=A,this.args=d}static parse(A,d){if(A.length<2)return d.error("Expected at least one argument.");let y=null;const w=d.expectedType;w&&w.kind!=="value"&&(y=w);const R=[];for(const j of A.slice(1)){const X=d.parse(j,1+R.length,y,void 0,{typeAnnotation:"omit"});if(!X)return null;y=y||X.type,R.push(X)}if(!y)throw new Error("No output type");const U=w&&R.some(j=>tA(w,j.type));return new Ds(U?$r:y,R)}evaluate(A){let d,y=null,w=0;for(const R of this.args)if(w++,y=R.evaluate(A),y&&y instanceof Qi&&!y.available&&(d||(d=y.name),y=null,w===this.args.length&&(y=d)),y!==null)break;return y}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}function Ua(h,A){return h==="=="||h==="!="?A.kind==="boolean"||A.kind==="string"||A.kind==="number"||A.kind==="null"||A.kind==="value":A.kind==="string"||A.kind==="number"||A.kind==="value"}function SA(h,A,d,y){return y.compare(A,d)===0}function As(h,A,d){const y=h!=="=="&&h!=="!=";return class $F{constructor(R,U,j){this.type=Pr,this.lhs=R,this.rhs=U,this.collator=j,this.hasUntypedArgument=R.type.kind==="value"||U.type.kind==="value"}static parse(R,U){if(R.length!==3&&R.length!==4)return U.error("Expected two or three arguments.");const j=R[0];let X=U.parse(R[1],1,$r);if(!X)return null;if(!Ua(j,X.type))return U.concat(1).error(`"${j}" comparisons are not supported for type '${So(X.type)}'.`);let re=U.parse(R[2],2,$r);if(!re)return null;if(!Ua(j,re.type))return U.concat(2).error(`"${j}" comparisons are not supported for type '${So(re.type)}'.`);if(X.type.kind!==re.type.kind&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error(`Cannot compare types '${So(X.type)}' and '${So(re.type)}'.`);y&&(X.type.kind==="value"&&re.type.kind!=="value"?X=new Oa(re.type,[X]):X.type.kind!=="value"&&re.type.kind==="value"&&(re=new Oa(X.type,[re])));let de=null;if(R.length===4){if(X.type.kind!=="string"&&re.type.kind!=="string"&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error("Cannot use collator to compare non-string types.");if(de=U.parse(R[3],3,_s),!de)return null}return new $F(X,re,de)}evaluate(R){const U=this.lhs.evaluate(R),j=this.rhs.evaluate(R);if(y&&this.hasUntypedArgument){const X=uo(U),re=uo(j);if(X.kind!==re.kind||X.kind!=="string"&&X.kind!=="number")throw new jo(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const X=uo(U),re=uo(j);if(X.kind!=="string"||re.kind!=="string")return A(R,U,j)}return this.collator?d(R,U,j,this.collator.evaluate(R)):A(R,U,j)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const Gh=As("==",function(h,A,d){return A===d},SA),fl=As("!=",function(h,A,d){return A!==d},function(h,A,d,y){return!SA(0,A,d,y)}),vd=As("<",function(h,A,d){return A<d},function(h,A,d,y){return y.compare(A,d)<0}),mh=As(">",function(h,A,d){return A>d},function(h,A,d,y){return y.compare(A,d)>0}),Nu=As("<=",function(h,A,d){return A<=d},function(h,A,d,y){return y.compare(A,d)<=0}),EA=As(">=",function(h,A,d){return A>=d},function(h,A,d,y){return y.compare(A,d)>=0});class gh{constructor(A,d,y){this.type=_s,this.locale=y,this.caseSensitive=A,this.diacriticSensitive=d}static parse(A,d){if(A.length!==2)return d.error("Expected one argument.");const y=A[1];if(typeof y!="object"||Array.isArray(y))return d.error("Collator options argument must be an object.");const w=d.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,Pr);if(!w)return null;const R=d.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,Pr);if(!R)return null;let U=null;return y.locale&&(U=d.parse(y.locale,1,ar),!U)?null:new gh(w,R,U)}evaluate(A){return new Ii(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)}eachChild(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)}outputDefined(){return!1}}class rs{constructor(A,d,y,w,R){this.type=ar,this.number=A,this.locale=d,this.currency=y,this.minFractionDigits=w,this.maxFractionDigits=R}static parse(A,d){if(A.length!==3)return d.error("Expected two arguments.");const y=d.parse(A[1],1,yn);if(!y)return null;const w=A[2];if(typeof w!="object"||Array.isArray(w))return d.error("NumberFormat options argument must be an object.");let R=null;if(w.locale&&(R=d.parse(w.locale,1,ar),!R))return null;let U=null;if(w.currency&&(U=d.parse(w.currency,1,ar),!U))return null;let j=null;if(w["min-fraction-digits"]&&(j=d.parse(w["min-fraction-digits"],1,yn),!j))return null;let X=null;return w["max-fraction-digits"]&&(X=d.parse(w["max-fraction-digits"],1,yn),!X)?null:new rs(y,R,U,j,X)}evaluate(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))}eachChild(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)}outputDefined(){return!1}}class yu{constructor(A){this.type=fs,this.sections=A}static parse(A,d){if(A.length<2)return d.error("Expected at least one argument.");const y=A[1];if(!Array.isArray(y)&&typeof y=="object")return d.error("First argument must be an image or text section.");const w=[];let R=!1;for(let U=1;U<=A.length-1;++U){const j=A[U];if(R&&typeof j=="object"&&!Array.isArray(j)){R=!1;let X=null;if(j["font-scale"]&&(X=d.parse(j["font-scale"],1,yn),!X))return null;let re=null;if(j["text-font"]&&(re=d.parse(j["text-font"],1,zo(ar)),!re))return null;let de=null;if(j["text-color"]&&(de=d.parse(j["text-color"],1,Cs),!de))return null;let xe=null;if(j["vertical-align"]){if(typeof j["vertical-align"]=="string"&&!bl.includes(j["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${j["vertical-align"]}' instead.`);if(xe=d.parse(j["vertical-align"],1,ar),!xe)return null}const Fe=w[w.length-1];Fe.scale=X,Fe.font=re,Fe.textColor=de,Fe.verticalAlign=xe}else{const X=d.parse(A[U],1,$r);if(!X)return null;const re=X.type.kind;if(re!=="string"&&re!=="value"&&re!=="null"&&re!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,w.push({content:X,scale:null,font:null,textColor:null,verticalAlign:null})}}return new yu(w)}evaluate(A){return new aa(this.sections.map(d=>{const y=d.content.evaluate(A);return uo(y)===sa?new $o("",y,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(A):null):new $o(Gs(y),null,d.scale?d.scale.evaluate(A):null,d.font?d.font.evaluate(A).join(","):null,d.textColor?d.textColor.evaluate(A):null,d.verticalAlign?d.verticalAlign.evaluate(A):null)}))}eachChild(A){for(const d of this.sections)A(d.content),d.scale&&A(d.scale),d.font&&A(d.font),d.textColor&&A(d.textColor),d.verticalAlign&&A(d.verticalAlign)}outputDefined(){return!1}}class yh{constructor(A){this.type=sa,this.input=A}static parse(A,d){if(A.length!==2)return d.error("Expected two arguments.");const y=d.parse(A[1],1,ar);return y?new yh(y):d.error("No image name provided.")}evaluate(A){const d=this.input.evaluate(A),y=Qi.fromString(d);return y&&A.availableImages&&(y.available=A.availableImages.indexOf(d)>-1),y}eachChild(A){A(this.input)}outputDefined(){return!1}}class tf{constructor(A){this.type=yn,this.input=A}static parse(A,d){if(A.length!==2)return d.error(`Expected 1 argument, but found ${A.length-1} instead.`);const y=d.parse(A[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${So(y.type)} instead.`):new tf(y):null}evaluate(A){const d=this.input.evaluate(A);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new jo(`Expected value to be of type string or array, but found ${So(uo(d))} instead.`)}eachChild(A){A(this.input)}outputDefined(){return!1}}const sA=8192;function Qh(h,A){const d=(180+h[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,w=Math.pow(2,A.z);return[Math.round(d*w*sA),Math.round(y*w*sA)]}function nf(h,A){const d=Math.pow(2,A.z);return[(w=(h[0]/sA+A.x)/d,360*w-180),(y=(h[1]/sA+A.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,w}function Vc(h,A){h[0]=Math.min(h[0],A[0]),h[1]=Math.min(h[1],A[1]),h[2]=Math.max(h[2],A[0]),h[3]=Math.max(h[3],A[1])}function Yh(h,A){return!(h[0]<=A[0]||h[2]>=A[2]||h[1]<=A[1]||h[3]>=A[3])}function bc(h,A,d){const y=h[0]-A[0],w=h[1]-A[1],R=h[0]-d[0],U=h[1]-d[1];return y*U-R*w==0&&y*R<=0&&w*U<=0}function xs(h,A,d,y){return(w=[y[0]-d[0],y[1]-d[1]])[0]*(R=[A[0]-h[0],A[1]-h[1]])[1]-w[1]*R[0]!=0&&!(!jf(h,A,d,y)||!jf(d,y,h,A));var w,R}function Wf(h,A,d){for(const y of d)for(let w=0;w<y.length-1;++w)if(xs(h,A,y[w],y[w+1]))return!0;return!1}function xc(h,A,d=!1){let y=!1;for(const j of A)for(let X=0;X<j.length-1;X++){if(bc(h,j[X],j[X+1]))return d;(R=j[X])[1]>(w=h)[1]!=(U=j[X+1])[1]>w[1]&&w[0]<(U[0]-R[0])*(w[1]-R[1])/(U[1]-R[1])+R[0]&&(y=!y)}var w,R,U;return y}function qh(h,A){for(const d of A)if(xc(h,d))return!0;return!1}function rf(h,A){for(const d of h)if(!xc(d,A))return!1;for(let d=0;d<h.length-1;++d)if(Wf(h[d],h[d+1],A))return!1;return!0}function Cd(h,A){for(const d of A)if(rf(h,d))return!0;return!1}function jf(h,A,d,y){const w=y[0]-d[0],R=y[1]-d[1],U=(h[0]-d[0])*R-w*(h[1]-d[1]),j=(A[0]-d[0])*R-w*(A[1]-d[1]);return U>0&&j<0||U<0&&j>0}function _d(h,A,d){const y=[];for(let w=0;w<h.length;w++){const R=[];for(let U=0;U<h[w].length;U++){const j=Qh(h[w][U],d);Vc(A,j),R.push(j)}y.push(R)}return y}function Vh(h,A,d){const y=[];for(let w=0;w<h.length;w++){const R=_d(h[w],A,d);y.push(R)}return y}function bd(h,A,d,y){if(h[0]<d[0]||h[0]>d[2]){const w=.5*y;let R=h[0]-d[0]>w?-y:d[0]-h[0]>w?y:0;R===0&&(R=h[0]-d[2]>w?-y:d[2]-h[0]>w?y:0),h[0]+=R}Vc(A,h)}function Gf(h,A,d,y){const w=Math.pow(2,y.z)*sA,R=[y.x*sA,y.y*sA],U=[];for(const j of h)for(const X of j){const re=[X.x+R[0],X.y+R[1]];bd(re,A,d,w),U.push(re)}return U}function of(h,A,d,y){const w=Math.pow(2,y.z)*sA,R=[y.x*sA,y.y*sA],U=[];for(const X of h){const re=[];for(const de of X){const xe=[de.x+R[0],de.y+R[1]];Vc(A,xe),re.push(xe)}U.push(re)}if(A[2]-A[0]<=w/2){(j=A)[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(const X of U)for(const re of X)bd(re,A,d,w)}var j;return U}class za{constructor(A,d){this.type=Pr,this.geojson=A,this.geometries=d}static parse(A,d){if(A.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${A.length-1} instead.`);if(Ba(A[1])){const y=A[1];if(y.type==="FeatureCollection"){const w=[];for(const R of y.features){const{type:U,coordinates:j}=R.geometry;U==="Polygon"&&w.push(j),U==="MultiPolygon"&&w.push(...j)}if(w.length)return new za(y,{type:"MultiPolygon",coordinates:w})}else if(y.type==="Feature"){const w=y.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new za(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new za(y,y)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(d,y){const w=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],U=d.canonicalID();if(y.type==="Polygon"){const j=_d(y.coordinates,R,U),X=Gf(d.geometry(),w,R,U);if(!Yh(w,R))return!1;for(const re of X)if(!xc(re,j))return!1}if(y.type==="MultiPolygon"){const j=Vh(y.coordinates,R,U),X=Gf(d.geometry(),w,R,U);if(!Yh(w,R))return!1;for(const re of X)if(!qh(re,j))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(d,y){const w=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],U=d.canonicalID();if(y.type==="Polygon"){const j=_d(y.coordinates,R,U),X=of(d.geometry(),w,R,U);if(!Yh(w,R))return!1;for(const re of X)if(!rf(re,j))return!1}if(y.type==="MultiPolygon"){const j=Vh(y.coordinates,R,U),X=of(d.geometry(),w,R,U);if(!Yh(w,R))return!1;for(const re of X)if(!Cd(re,j))return!1}return!0}(A,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Hh=class{constructor(h=[],A=(d,y)=>d<y?-1:d>y?1:0){if(this.data=h,this.length=this.data.length,this.compare=A,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:A,compare:d}=this,y=A[h];for(;h>0;){const w=h-1>>1,R=A[w];if(d(y,R)>=0)break;A[h]=R,h=w}A[h]=y}_down(h){const{data:A,compare:d}=this,y=this.length>>1,w=A[h];for(;h<y;){let R=1+(h<<1);const U=R+1;if(U<this.length&&d(A[U],A[R])<0&&(R=U),d(A[R],w)>=0)break;A[h]=A[R],h=R}A[h]=w}};function zl(h,A,d=0,y=h.length-1,w=$h){for(;y>d;){if(y-d>600){const X=y-d+1,re=A-d+1,de=Math.log(X),xe=.5*Math.exp(2*de/3),Fe=.5*Math.sqrt(de*xe*(X-xe)/X)*(re-X/2<0?-1:1);zl(h,A,Math.max(d,Math.floor(A-re*xe/X+Fe)),Math.min(y,Math.floor(A+(X-re)*xe/X+Fe)),w)}const R=h[A];let U=d,j=y;for(BA(h,d,A),w(h[y],R)>0&&BA(h,d,y);U<j;){for(BA(h,U,j),U++,j--;w(h[U],R)<0;)U++;for(;w(h[j],R)>0;)j--}w(h[d],R)===0?BA(h,d,j):(j++,BA(h,j,y)),j<=A&&(d=j+1),A<=j&&(y=j-1)}}function BA(h,A,d){const y=h[A];h[A]=h[d],h[d]=y}function $h(h,A){return h<A?-1:h>A?1:0}function vh(h,A){if(h.length<=1)return[h];const d=[];let y,w;for(const R of h){const U=vu(R);U!==0&&(R.area=Math.abs(U),w===void 0&&(w=U<0),w===U<0?(y&&d.push(y),y=[R]):y.push(R))}if(y&&d.push(y),A>1)for(let R=0;R<d.length;R++)d[R].length<=A||(zl(d[R],A,1,d[R].length-1,sf),d[R]=d[R].slice(0,A));return d}function sf(h,A){return A.area-h.area}function vu(h){let A=0;for(let d,y,w=0,R=h.length,U=R-1;w<R;U=w++)d=h[w],y=h[U],A+=(y.x-d.x)*(d.y+y.y);return A}const Mc=1/298.257223563,wc=Mc*(2-Mc),Hc=Math.PI/180;class xd{constructor(A){const d=6378.137*Hc*1e3,y=Math.cos(A*Hc),w=1/(1-wc*(1-y*y)),R=Math.sqrt(w);this.kx=d*R*y,this.ky=d*R*w*(1-wc)}distance(A,d){const y=this.wrap(A[0]-d[0])*this.kx,w=(A[1]-d[1])*this.ky;return Math.sqrt(y*y+w*w)}pointOnLine(A,d){let y,w,R,U,j=1/0;for(let X=0;X<A.length-1;X++){let re=A[X][0],de=A[X][1],xe=this.wrap(A[X+1][0]-re)*this.kx,Fe=(A[X+1][1]-de)*this.ky,ze=0;xe===0&&Fe===0||(ze=(this.wrap(d[0]-re)*this.kx*xe+(d[1]-de)*this.ky*Fe)/(xe*xe+Fe*Fe),ze>1?(re=A[X+1][0],de=A[X+1][1]):ze>0&&(re+=xe/this.kx*ze,de+=Fe/this.ky*ze)),xe=this.wrap(d[0]-re)*this.kx,Fe=(d[1]-de)*this.ky;const Ye=xe*xe+Fe*Fe;Ye<j&&(j=Ye,y=re,w=de,R=X,U=ze)}return{point:[y,w],index:R,t:Math.max(0,Math.min(1,U))}}wrap(A){for(;A<-180;)A+=360;for(;A>180;)A-=360;return A}}function Ip(h,A){return A[0]-h[0]}function $c(h){return h[1]-h[0]+1}function JA(h,A){return h[1]>=h[0]&&h[1]<A}function Na(h,A){if(h[0]>h[1])return[null,null];const d=$c(h);if(A){if(d===2)return[h,null];const w=Math.floor(d/2);return[[h[0],h[0]+w],[h[0]+w,h[1]]]}if(d===1)return[h,null];const y=Math.floor(d/2)-1;return[[h[0],h[0]+y],[h[0]+y+1,h[1]]]}function tl(h,A){if(!JA(A,h.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let y=A[0];y<=A[1];++y)Vc(d,h[y]);return d}function af(h){const A=[1/0,1/0,-1/0,-1/0];for(const d of h)for(const y of d)Vc(A,y);return A}function Zh(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function Qf(h,A,d){if(!Zh(h)||!Zh(A))return NaN;let y=0,w=0;return h[2]<A[0]&&(y=A[0]-h[2]),h[0]>A[2]&&(y=h[0]-A[2]),h[1]>A[3]&&(w=h[1]-A[3]),h[3]<A[1]&&(w=A[1]-h[3]),d.distance([0,0],[y,w])}function Zi(h,A,d){const y=d.pointOnLine(A,h);return d.distance(h,y.point)}function aA(h,A,d,y,w){const R=Math.min(Zi(h,[d,y],w),Zi(A,[d,y],w)),U=Math.min(Zi(d,[h,A],w),Zi(y,[h,A],w));return Math.min(R,U)}function Md(h,A,d,y,w){if(!JA(A,h.length)||!JA(y,d.length))return 1/0;let R=1/0;for(let U=A[0];U<A[1];++U){const j=h[U],X=h[U+1];for(let re=y[0];re<y[1];++re){const de=d[re],xe=d[re+1];if(xs(j,X,de,xe))return 0;R=Math.min(R,aA(j,X,de,xe,w))}}return R}function Yf(h,A,d,y,w){if(!JA(A,h.length)||!JA(y,d.length))return NaN;let R=1/0;for(let U=A[0];U<=A[1];++U)for(let j=y[0];j<=y[1];++j)if(R=Math.min(R,w.distance(h[U],d[j])),R===0)return R;return R}function Xh(h,A,d){if(xc(h,A,!0))return 0;let y=1/0;for(const w of A){const R=w[0],U=w[w.length-1];if(R!==U&&(y=Math.min(y,Zi(h,[U,R],d)),y===0))return y;const j=d.pointOnLine(w,h);if(y=Math.min(y,d.distance(h,j.point)),y===0)return y}return y}function qf(h,A,d,y){if(!JA(A,h.length))return NaN;for(let R=A[0];R<=A[1];++R)if(xc(h[R],d,!0))return 0;let w=1/0;for(let R=A[0];R<A[1];++R){const U=h[R],j=h[R+1];for(const X of d)for(let re=0,de=X.length,xe=de-1;re<de;xe=re++){const Fe=X[xe],ze=X[re];if(xs(U,j,Fe,ze))return 0;w=Math.min(w,aA(U,j,Fe,ze,y))}}return w}function Vf(h,A){for(const d of h)for(const y of d)if(xc(y,A,!0))return!0;return!1}function Hf(h,A,d,y=1/0){const w=af(h),R=af(A);if(y!==1/0&&Qf(w,R,d)>=y)return y;if(Yh(w,R)){if(Vf(h,A))return 0}else if(Vf(A,h))return 0;let U=1/0;for(const j of h)for(let X=0,re=j.length,de=re-1;X<re;de=X++){const xe=j[de],Fe=j[X];for(const ze of A)for(let Ye=0,et=ze.length,At=et-1;Ye<et;At=Ye++){const yt=ze[At],Wt=ze[Ye];if(xs(xe,Fe,yt,Wt))return 0;U=Math.min(U,aA(xe,Fe,yt,Wt,d))}}return U}function oc(h,A,d,y,w,R){if(!R)return;const U=Qf(tl(y,R),w,d);U<A&&h.push([U,R,[0,0]])}function en(h,A,d,y,w,R,U){if(!R||!U)return;const j=Qf(tl(y,R),tl(w,U),d);j<A&&h.push([j,R,U])}function Tn(h,A,d,y,w=1/0){let R=Math.min(y.distance(h[0],d[0][0]),w);if(R===0)return R;const U=new Hh([[0,[0,h.length-1],[0,0]]],Ip),j=af(d);for(;U.length>0;){const X=U.pop();if(X[0]>=R)continue;const re=X[1],de=A?50:100;if($c(re)<=de){if(!JA(re,h.length))return NaN;if(A){const xe=qf(h,re,d,y);if(isNaN(xe)||xe===0)return xe;R=Math.min(R,xe)}else for(let xe=re[0];xe<=re[1];++xe){const Fe=Xh(h[xe],d,y);if(R=Math.min(R,Fe),R===0)return 0}}else{const xe=Na(re,A);oc(U,R,y,h,j,xe[0]),oc(U,R,y,h,j,xe[1])}}return R}function un(h,A,d,y,w,R=1/0){let U=Math.min(R,w.distance(h[0],d[0]));if(U===0)return U;const j=new Hh([[0,[0,h.length-1],[0,d.length-1]]],Ip);for(;j.length>0;){const X=j.pop();if(X[0]>=U)continue;const re=X[1],de=X[2],xe=A?50:100,Fe=y?50:100;if($c(re)<=xe&&$c(de)<=Fe){if(!JA(re,h.length)&&JA(de,d.length))return NaN;let ze;if(A&&y)ze=Md(h,re,d,de,w),U=Math.min(U,ze);else if(A&&!y){const Ye=h.slice(re[0],re[1]+1);for(let et=de[0];et<=de[1];++et)if(ze=Zi(d[et],Ye,w),U=Math.min(U,ze),U===0)return U}else if(!A&&y){const Ye=d.slice(de[0],de[1]+1);for(let et=re[0];et<=re[1];++et)if(ze=Zi(h[et],Ye,w),U=Math.min(U,ze),U===0)return U}else ze=Yf(h,re,d,de,w),U=Math.min(U,ze)}else{const ze=Na(re,A),Ye=Na(de,y);en(j,U,w,h,d,ze[0],Ye[0]),en(j,U,w,h,d,ze[0],Ye[1]),en(j,U,w,h,d,ze[1],Ye[0]),en(j,U,w,h,d,ze[1],Ye[1])}}return U}function Kr(h){return h.type==="MultiPolygon"?h.coordinates.map(A=>({type:"Polygon",coordinates:A})):h.type==="MultiLineString"?h.coordinates.map(A=>({type:"LineString",coordinates:A})):h.type==="MultiPoint"?h.coordinates.map(A=>({type:"Point",coordinates:A})):[h]}class Ei{constructor(A,d){this.type=yn,this.geojson=A,this.geometries=d}static parse(A,d){if(A.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${A.length-1} instead.`);if(Ba(A[1])){const y=A[1];if(y.type==="FeatureCollection")return new Ei(y,y.features.map(w=>Kr(w.geometry)).flat());if(y.type==="Feature")return new Ei(y,Kr(y.geometry));if("type"in y&&"coordinates"in y)return new Ei(y,Kr(y))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(d,y){const w=d.geometry(),R=w.flat().map(X=>nf([X.x,X.y],d.canonical));if(w.length===0)return NaN;const U=new xd(R[0][1]);let j=1/0;for(const X of y){switch(X.type){case"Point":j=Math.min(j,un(R,!1,[X.coordinates],!1,U,j));break;case"LineString":j=Math.min(j,un(R,!1,X.coordinates,!0,U,j));break;case"Polygon":j=Math.min(j,Tn(R,!1,X.coordinates,U,j))}if(j===0)return j}return j}(A,this.geometries);if(A.geometryType()==="LineString")return function(d,y){const w=d.geometry(),R=w.flat().map(X=>nf([X.x,X.y],d.canonical));if(w.length===0)return NaN;const U=new xd(R[0][1]);let j=1/0;for(const X of y){switch(X.type){case"Point":j=Math.min(j,un(R,!0,[X.coordinates],!1,U,j));break;case"LineString":j=Math.min(j,un(R,!0,X.coordinates,!0,U,j));break;case"Polygon":j=Math.min(j,Tn(R,!0,X.coordinates,U,j))}if(j===0)return j}return j}(A,this.geometries);if(A.geometryType()==="Polygon")return function(d,y){const w=d.geometry();if(w.length===0||w[0].length===0)return NaN;const R=vh(w,0).map(X=>X.map(re=>re.map(de=>nf([de.x,de.y],d.canonical)))),U=new xd(R[0][0][0][1]);let j=1/0;for(const X of y)for(const re of R){switch(X.type){case"Point":j=Math.min(j,Tn([X.coordinates],!1,re,U,j));break;case"LineString":j=Math.min(j,Tn(X.coordinates,!0,re,U,j));break;case"Polygon":j=Math.min(j,Hf(re,X.coordinates,U,j))}if(j===0)return j}return j}(A,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const po={"==":Gh,"!=":fl,">":mh,"<":vd,">=":EA,"<=":Nu,array:Oa,at:Be,boolean:Oa,case:Gn,coalesce:Ds,collator:gh,format:yu,image:yh,in:lt,"index-of":qt,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:tf,let:no,literal:oA,match:Br,number:Oa,"number-format":rs,object:Oa,slice:Zr,step:Or,string:Oa,"to-boolean":wi,"to-color":wi,"to-number":wi,"to-string":wi,var:J,within:za,distance:Ei};class Zo{constructor(A,d,y,w){this.name=A,this.type=d,this._evaluate=y,this.args=w}evaluate(A){return this._evaluate(A,this.args)}eachChild(A){this.args.forEach(A)}outputDefined(){return!1}static parse(A,d){const y=A[0],w=Zo.definitions[y];if(!w)return d.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(w)?w[0]:w.type,U=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,j=U.filter(([re])=>!Array.isArray(re)||re.length===A.length-1);let X=null;for(const[re,de]of j){X=new Sr(d.registry,Cu,d.path,null,d.scope);const xe=[];let Fe=!1;for(let ze=1;ze<A.length;ze++){const Ye=A[ze],et=Array.isArray(re)?re[ze-1]:re.type,At=X.parse(Ye,1+xe.length,et);if(!At){Fe=!0;break}xe.push(At)}if(!Fe)if(Array.isArray(re)&&re.length!==xe.length)X.error(`Expected ${re.length} arguments, but found ${xe.length} instead.`);else{for(let ze=0;ze<xe.length;ze++){const Ye=Array.isArray(re)?re[ze]:re.type,et=xe[ze];X.concat(ze+1).checkSubtype(Ye,et.type)}if(X.errors.length===0)return new Zo(y,R,de,xe)}}if(j.length===1)d.errors.push(...X.errors);else{const re=(j.length?j:U).map(([xe])=>{return Fe=xe,Array.isArray(Fe)?`(${Fe.map(So).join(", ")})`:`(${So(Fe.type)}...)`;var Fe}).join(" | "),de=[];for(let xe=1;xe<A.length;xe++){const Fe=d.parse(A[xe],1+de.length);if(!Fe)return null;de.push(So(Fe.type))}d.error(`Expected arguments of type ${re}, but found (${de.join(", ")}) instead.`)}return null}static register(A,d){Zo.definitions=d;for(const y in d)A[y]=Zo}}function us(h,[A,d,y,w]){A=A.evaluate(h),d=d.evaluate(h),y=y.evaluate(h);const R=w?w.evaluate(h):1,U=La(A,d,y,R);if(U)throw new jo(U);return new jr(A/255,d/255,y/255,R,!1)}function Zc(h,A){return h in A}function $f(h,A){const d=A[h];return d===void 0?null:d}function pl(h){return{type:h}}function Cu(h){if(h instanceof J)return Cu(h.boundExpression);if(h instanceof Zo&&h.name==="error"||h instanceof gh||h instanceof za||h instanceof Ei)return!1;const A=h instanceof wi||h instanceof Oa;let d=!0;return h.eachChild(y=>{d=A?d&&Cu(y):d&&y instanceof oA}),!!d&&_u(h)&&OA(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _u(h){if(h instanceof Zo&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof za||h instanceof Ei)return!1;let A=!0;return h.eachChild(d=>{A&&!_u(d)&&(A=!1)}),A}function nl(h){if(h instanceof Zo&&h.name==="feature-state")return!1;let A=!0;return h.eachChild(d=>{A&&!nl(d)&&(A=!1)}),A}function OA(h,A){if(h instanceof Zo&&A.indexOf(h.name)>=0)return!1;let d=!0;return h.eachChild(y=>{d&&!OA(y,A)&&(d=!1)}),d}function Xc(h){return{result:"success",value:h}}function mo(h){return{result:"error",value:h}}function bu(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Ch(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function eu(h){return!!h.expression&&h.expression.interpolated}function Xi(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function rl(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function Sc(h){return h}function lA(h,A){const d=A.type==="color",y=h.stops&&typeof h.stops[0][0]=="object",w=y||!(y||h.property!==void 0),R=h.type||(eu(A)?"exponential":"interval");if(d||A.type==="padding"){const de=d?jr.parse:js.parse;(h=br({},h)).stops&&(h.stops=h.stops.map(xe=>[xe[0],de(xe[1])])),h.default=de(h.default?h.default:A.default)}if(h.colorSpace&&(U=h.colorSpace)!=="rgb"&&U!=="hcl"&&U!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var U;let j,X,re;if(R==="exponential")j=xl;else if(R==="interval")j=lf;else if(R==="categorical"){j=wd,X=Object.create(null);for(const de of h.stops)X[de[0]]=de[1];re=typeof h.stops[0][0]}else{if(R!=="identity")throw new Error(`Unknown function type "${R}"`);j=Sd}if(y){const de={},xe=[];for(let Ye=0;Ye<h.stops.length;Ye++){const et=h.stops[Ye],At=et[0].zoom;de[At]===void 0&&(de[At]={zoom:At,type:h.type,property:h.property,default:h.default,stops:[]},xe.push(At)),de[At].stops.push([et[0].value,et[1]])}const Fe=[];for(const Ye of xe)Fe.push([de[Ye].zoom,lA(de[Ye],A)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:Ri.interpolationFactor.bind(void 0,ze),zoomStops:Fe.map(Ye=>Ye[0]),evaluate:({zoom:Ye},et)=>xl({stops:Fe,base:h.base},A,Ye).evaluate(Ye,et)}}if(w){const de=R==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:Ri.interpolationFactor.bind(void 0,de),zoomStops:h.stops.map(xe=>xe[0]),evaluate:({zoom:xe})=>j(h,A,xe,X,re)}}return{kind:"source",evaluate(de,xe){const Fe=xe&&xe.properties?xe.properties[h.property]:void 0;return Fe===void 0?Nl(h.default,A.default):j(h,A,Fe,X,re)}}}function Nl(h,A,d){return h!==void 0?h:A!==void 0?A:d!==void 0?d:void 0}function wd(h,A,d,y,w){return Nl(typeof d===w?y[d]:void 0,h.default,A.default)}function lf(h,A,d){if(Xi(d)!=="number")return Nl(h.default,A.default);const y=h.stops.length;if(y===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[y-1][0])return h.stops[y-1][1];const w=oi(h.stops.map(R=>R[0]),d);return h.stops[w][1]}function xl(h,A,d){const y=h.base!==void 0?h.base:1;if(Xi(d)!=="number")return Nl(h.default,A.default);const w=h.stops.length;if(w===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[w-1][0])return h.stops[w-1][1];const R=oi(h.stops.map(de=>de[0]),d),U=function(de,xe,Fe,ze){const Ye=ze-Fe,et=de-Fe;return Ye===0?0:xe===1?et/Ye:(Math.pow(xe,et)-1)/(Math.pow(xe,Ye)-1)}(d,y,h.stops[R][0],h.stops[R+1][0]),j=h.stops[R][1],X=h.stops[R+1][1],re=mi[A.type]||Sc;return typeof j.evaluate=="function"?{evaluate(...de){const xe=j.evaluate.apply(void 0,de),Fe=X.evaluate.apply(void 0,de);if(xe!==void 0&&Fe!==void 0)return re(xe,Fe,U,h.colorSpace)}}:re(j,X,U,h.colorSpace)}function Sd(h,A,d){switch(A.type){case"color":d=jr.parse(d);break;case"formatted":d=aa.fromString(d.toString());break;case"resolvedImage":d=Qi.fromString(d.toString());break;case"padding":d=js.parse(d);break;default:Xi(d)===A.type||A.type==="enum"&&A.values[d]||(d=void 0)}return Nl(d,h.default,A.default)}Zo.register(po,{error:[{kind:"error"},[ar],(h,[A])=>{throw new jo(A.evaluate(h))}],typeof:[ar,[$r],(h,[A])=>So(uo(A.evaluate(h)))],"to-rgba":[zo(yn,4),[Cs],(h,[A])=>{const[d,y,w,R]=A.evaluate(h).rgb;return[255*d,255*y,255*w,R]}],rgb:[Cs,[yn,yn,yn],us],rgba:[Cs,[yn,yn,yn,yn],us],has:{type:Pr,overloads:[[[ar],(h,[A])=>Zc(A.evaluate(h),h.properties())],[[ar,ui],(h,[A,d])=>Zc(A.evaluate(h),d.evaluate(h))]]},get:{type:$r,overloads:[[[ar],(h,[A])=>$f(A.evaluate(h),h.properties())],[[ar,ui],(h,[A,d])=>$f(A.evaluate(h),d.evaluate(h))]]},"feature-state":[$r,[ar],(h,[A])=>$f(A.evaluate(h),h.featureState||{})],properties:[ui,[],h=>h.properties()],"geometry-type":[ar,[],h=>h.geometryType()],id:[$r,[],h=>h.id()],zoom:[yn,[],h=>h.globals.zoom],"heatmap-density":[yn,[],h=>h.globals.heatmapDensity||0],"line-progress":[yn,[],h=>h.globals.lineProgress||0],accumulated:[$r,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[yn,pl(yn),(h,A)=>{let d=0;for(const y of A)d+=y.evaluate(h);return d}],"*":[yn,pl(yn),(h,A)=>{let d=1;for(const y of A)d*=y.evaluate(h);return d}],"-":{type:yn,overloads:[[[yn,yn],(h,[A,d])=>A.evaluate(h)-d.evaluate(h)],[[yn],(h,[A])=>-A.evaluate(h)]]},"/":[yn,[yn,yn],(h,[A,d])=>A.evaluate(h)/d.evaluate(h)],"%":[yn,[yn,yn],(h,[A,d])=>A.evaluate(h)%d.evaluate(h)],ln2:[yn,[],()=>Math.LN2],pi:[yn,[],()=>Math.PI],e:[yn,[],()=>Math.E],"^":[yn,[yn,yn],(h,[A,d])=>Math.pow(A.evaluate(h),d.evaluate(h))],sqrt:[yn,[yn],(h,[A])=>Math.sqrt(A.evaluate(h))],log10:[yn,[yn],(h,[A])=>Math.log(A.evaluate(h))/Math.LN10],ln:[yn,[yn],(h,[A])=>Math.log(A.evaluate(h))],log2:[yn,[yn],(h,[A])=>Math.log(A.evaluate(h))/Math.LN2],sin:[yn,[yn],(h,[A])=>Math.sin(A.evaluate(h))],cos:[yn,[yn],(h,[A])=>Math.cos(A.evaluate(h))],tan:[yn,[yn],(h,[A])=>Math.tan(A.evaluate(h))],asin:[yn,[yn],(h,[A])=>Math.asin(A.evaluate(h))],acos:[yn,[yn],(h,[A])=>Math.acos(A.evaluate(h))],atan:[yn,[yn],(h,[A])=>Math.atan(A.evaluate(h))],min:[yn,pl(yn),(h,A)=>Math.min(...A.map(d=>d.evaluate(h)))],max:[yn,pl(yn),(h,A)=>Math.max(...A.map(d=>d.evaluate(h)))],abs:[yn,[yn],(h,[A])=>Math.abs(A.evaluate(h))],round:[yn,[yn],(h,[A])=>{const d=A.evaluate(h);return d<0?-Math.round(-d):Math.round(d)}],floor:[yn,[yn],(h,[A])=>Math.floor(A.evaluate(h))],ceil:[yn,[yn],(h,[A])=>Math.ceil(A.evaluate(h))],"filter-==":[Pr,[ar,$r],(h,[A,d])=>h.properties()[A.value]===d.value],"filter-id-==":[Pr,[$r],(h,[A])=>h.id()===A.value],"filter-type-==":[Pr,[ar],(h,[A])=>h.geometryType()===A.value],"filter-<":[Pr,[ar,$r],(h,[A,d])=>{const y=h.properties()[A.value],w=d.value;return typeof y==typeof w&&y<w}],"filter-id-<":[Pr,[$r],(h,[A])=>{const d=h.id(),y=A.value;return typeof d==typeof y&&d<y}],"filter->":[Pr,[ar,$r],(h,[A,d])=>{const y=h.properties()[A.value],w=d.value;return typeof y==typeof w&&y>w}],"filter-id->":[Pr,[$r],(h,[A])=>{const d=h.id(),y=A.value;return typeof d==typeof y&&d>y}],"filter-<=":[Pr,[ar,$r],(h,[A,d])=>{const y=h.properties()[A.value],w=d.value;return typeof y==typeof w&&y<=w}],"filter-id-<=":[Pr,[$r],(h,[A])=>{const d=h.id(),y=A.value;return typeof d==typeof y&&d<=y}],"filter->=":[Pr,[ar,$r],(h,[A,d])=>{const y=h.properties()[A.value],w=d.value;return typeof y==typeof w&&y>=w}],"filter-id->=":[Pr,[$r],(h,[A])=>{const d=h.id(),y=A.value;return typeof d==typeof y&&d>=y}],"filter-has":[Pr,[$r],(h,[A])=>A.value in h.properties()],"filter-has-id":[Pr,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Pr,[zo(ar)],(h,[A])=>A.value.indexOf(h.geometryType())>=0],"filter-id-in":[Pr,[zo($r)],(h,[A])=>A.value.indexOf(h.id())>=0],"filter-in-small":[Pr,[ar,zo($r)],(h,[A,d])=>d.value.indexOf(h.properties()[A.value])>=0],"filter-in-large":[Pr,[ar,zo($r)],(h,[A,d])=>function(y,w,R,U){for(;R<=U;){const j=R+U>>1;if(w[j]===y)return!0;w[j]>y?U=j-1:R=j+1}return!1}(h.properties()[A.value],d.value,0,d.value.length-1)],all:{type:Pr,overloads:[[[Pr,Pr],(h,[A,d])=>A.evaluate(h)&&d.evaluate(h)],[pl(Pr),(h,A)=>{for(const d of A)if(!d.evaluate(h))return!1;return!0}]]},any:{type:Pr,overloads:[[[Pr,Pr],(h,[A,d])=>A.evaluate(h)||d.evaluate(h)],[pl(Pr),(h,A)=>{for(const d of A)if(d.evaluate(h))return!0;return!1}]]},"!":[Pr,[Pr],(h,[A])=>!A.evaluate(h)],"is-supported-script":[Pr,[ar],(h,[A])=>{const d=h.globals&&h.globals.isSupportedScript;return!d||d(A.evaluate(h))}],upcase:[ar,[ar],(h,[A])=>A.evaluate(h).toUpperCase()],downcase:[ar,[ar],(h,[A])=>A.evaluate(h).toLowerCase()],concat:[ar,pl($r),(h,A)=>A.map(d=>Gs(d.evaluate(h))).join("")],"resolved-locale":[ar,[_s],(h,[A])=>A.evaluate(h).resolvedLocale()]});class Jc{constructor(A,d){var y;this.expression=A,this._warningHistory={},this._evaluator=new eo,this._defaultValue=d?(y=d).type==="color"&&rl(y.default)?new jr(0,0,0,0):y.type==="color"?jr.parse(y.default)||null:y.type==="padding"?js.parse(y.default)||null:y.type==="variableAnchorOffsetCollection"?ns.parse(y.default)||null:y.type==="projectionDefinition"?_o.parse(y.default)||null:y.default===void 0?null:y.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(A,d,y,w,R,U){return this._evaluator.globals=A,this._evaluator.feature=d,this._evaluator.featureState=y,this._evaluator.canonical=w,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=U,this.expression.evaluate(this._evaluator)}evaluate(A,d,y,w,R,U){this._evaluator.globals=A,this._evaluator.feature=d||null,this._evaluator.featureState=y||null,this._evaluator.canonical=w,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=U||null;try{const j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new jo(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(j.message)),this._defaultValue}}}function tu(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in po}function Jh(h,A){const d=new Sr(po,Cu,[],A?function(w){const R={color:Cs,string:ar,number:yn,enum:ar,boolean:Pr,formatted:fs,padding:Ja,projectionDefinition:Ao,resolvedImage:sa,variableAnchorOffsetCollection:Wo};return w.type==="array"?zo(R[w.value]||$r,w.length):R[w.type]}(A):void 0),y=d.parse(h,void 0,void 0,void 0,A&&A.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Xc(new Jc(y,A)):mo(d.errors)}class nu{constructor(A,d){this.kind=A,this._styleExpression=d,this.isStateDependent=A!=="constant"&&!nl(d.expression)}evaluateWithoutErrorHandling(A,d,y,w,R,U){return this._styleExpression.evaluateWithoutErrorHandling(A,d,y,w,R,U)}evaluate(A,d,y,w,R,U){return this._styleExpression.evaluate(A,d,y,w,R,U)}}class sc{constructor(A,d,y,w){this.kind=A,this.zoomStops=y,this._styleExpression=d,this.isStateDependent=A!=="camera"&&!nl(d.expression),this.interpolationType=w}evaluateWithoutErrorHandling(A,d,y,w,R,U){return this._styleExpression.evaluateWithoutErrorHandling(A,d,y,w,R,U)}evaluate(A,d,y,w,R,U){return this._styleExpression.evaluate(A,d,y,w,R,U)}interpolationFactor(A,d,y){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,A,d,y):0}}function eh(h,A){const d=Jh(h,A);if(d.result==="error")return d;const y=d.value.expression,w=_u(y);if(!w&&!bu(A))return mo([new Gr("","data expressions not supported")]);const R=OA(y,["zoom"]);if(!R&&!Ch(A))return mo([new Gr("","zoom expressions not supported")]);const U=Go(y);return U||R?U instanceof Gr?mo([U]):U instanceof Ri&&!eu(A)?mo([new Gr("",'"interpolate" expressions cannot be used with this property')]):Xc(U?new sc(w?"camera":"composite",d.value,U.labels,U instanceof Ri?U.interpolation:void 0):new nu(w?"constant":"source",d.value)):mo([new Gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class _h{constructor(A,d){this._parameters=A,this._specification=d,br(this,lA(this._parameters,this._specification))}static deserialize(A){return new _h(A._parameters,A._specification)}static serialize(A){return{_parameters:A._parameters,_specification:A._specification}}}function Go(h){let A=null;if(h instanceof no)A=Go(h.result);else if(h instanceof Ds){for(const d of h.args)if(A=Go(d),A)break}else(h instanceof Or||h instanceof Ri)&&h.input instanceof Zo&&h.input.name==="zoom"&&(A=h);return A instanceof Gr||h.eachChild(d=>{const y=Go(d);y instanceof Gr?A=y:!A&&y?A=new Gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&y&&A!==y&&(A=new Gr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}function Ec(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const A of h.slice(1))if(!Ec(A)&&typeof A!="boolean")return!1;return!0;default:return!0}}const Bc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ru(h){if(h==null)return{filter:()=>!0,needGeometry:!1};Ec(h)||(h=ac(h));const A=Jh(h,Bc);if(A.result==="error")throw new Error(A.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,y,w)=>A.value.evaluate(d,y,{},w),needGeometry:Ed(h)}}function Af(h,A){return h<A?-1:h>A?1:0}function Ed(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let A=1;A<h.length;A++)if(Ed(h[A]))return!0;return!1}function ac(h){if(!h)return!0;const A=h[0];return h.length<=1?A!=="any":A==="=="?Oc(h[1],h[2],"=="):A==="!="?Qs(Oc(h[1],h[2],"==")):A==="<"||A===">"||A==="<="||A===">="?Oc(h[1],h[2],A):A==="any"?(d=h.slice(1),["any"].concat(d.map(ac))):A==="all"?["all"].concat(h.slice(1).map(ac)):A==="none"?["all"].concat(h.slice(1).map(ac).map(Qs)):A==="in"?lc(h[1],h.slice(2)):A==="!in"?Qs(lc(h[1],h.slice(2))):A==="has"?Ms(h[1]):A!=="!has"||Qs(Ms(h[1]));var d}function Oc(h,A,d){switch(h){case"$type":return[`filter-type-${d}`,A];case"$id":return[`filter-id-${d}`,A];default:return[`filter-${d}`,h,A]}}function lc(h,A){if(A.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",A]];case"$id":return["filter-id-in",["literal",A]];default:return A.length>200&&!A.some(d=>typeof d!=typeof A[0])?["filter-in-large",h,["literal",A.sort(Af)]]:["filter-in-small",h,["literal",A]]}}function Ms(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Qs(h){return["!",h]}function Bd(h){const A=typeof h;if(A==="number"||A==="boolean"||A==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let w="[";for(const R of h)w+=`${Bd(R)},`;return`${w}]`}const d=Object.keys(h).sort();let y="{";for(let w=0;w<d.length;w++)y+=`${JSON.stringify(d[w])}:${Bd(h[d[w]])},`;return`${y}}`}function th(h){let A="";for(const d of it)A+=`/${Bd(h[d])}`;return A}function bh(h){const A=h.value;return A?[new Jt(h.key,A,"constants have been deprecated as of v8")]:[]}function ps(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function xu(h){if(Array.isArray(h))return h.map(xu);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const A={};for(const d in h)A[d]=xu(h[d]);return A}return ps(h)}function Xs(h){const A=h.key,d=h.value,y=h.valueSpec||{},w=h.objectElementValidators||{},R=h.style,U=h.styleSpec,j=h.validateSpec;let X=[];const re=Xi(d);if(re!=="object")return[new Jt(A,d,`object expected, ${re} found`)];for(const de in d){const xe=de.split(".")[0],Fe=y[xe]||y["*"];let ze;if(w[xe])ze=w[xe];else if(y[xe])ze=j;else if(w["*"])ze=w["*"];else{if(!y["*"]){X.push(new Jt(A,d[de],`unknown property "${de}"`));continue}ze=j}X=X.concat(ze({key:(A&&`${A}.`)+de,value:d[de],valueSpec:Fe,style:R,styleSpec:U,object:d,objectKey:de,validateSpec:j},d))}for(const de in y)w[de]||y[de].required&&y[de].default===void 0&&d[de]===void 0&&X.push(new Jt(A,d,`missing required property "${de}"`));return X}function Wu(h){const A=h.value,d=h.valueSpec,y=h.style,w=h.styleSpec,R=h.key,U=h.arrayElementValidator||h.validateSpec;if(Xi(A)!=="array")return[new Jt(R,A,`array expected, ${Xi(A)} found`)];if(d.length&&A.length!==d.length)return[new Jt(R,A,`array length ${d.length} expected, length ${A.length} found`)];if(d["min-length"]&&A.length<d["min-length"])return[new Jt(R,A,`array length at least ${d["min-length"]} expected, length ${A.length} found`)];let j={type:d.value,values:d.values};w.$version<7&&(j.function=d.function),Xi(d.value)==="object"&&(j=d.value);let X=[];for(let re=0;re<A.length;re++)X=X.concat(U({array:A,arrayIndex:re,value:A[re],valueSpec:j,validateSpec:h.validateSpec,style:y,styleSpec:w,key:`${R}[${re}]`}));return X}function Wl(h){const A=h.key,d=h.value,y=h.valueSpec;let w=Xi(d);return w==="number"&&d!=d&&(w="NaN"),w!=="number"?[new Jt(A,d,`number expected, ${w} found`)]:"minimum"in y&&d<y.minimum?[new Jt(A,d,`${d} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&d>y.maximum?[new Jt(A,d,`${d} is greater than the maximum value ${y.maximum}`)]:[]}function ju(h){const A=h.valueSpec,d=ps(h.value.type);let y,w,R,U={};const j=d!=="categorical"&&h.value.property===void 0,X=!j,re=Xi(h.value.stops)==="array"&&Xi(h.value.stops[0])==="array"&&Xi(h.value.stops[0][0])==="object",de=Xs({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ze){if(d==="identity")return[new Jt(ze.key,ze.value,'identity function may not have a "stops" property')];let Ye=[];const et=ze.value;return Ye=Ye.concat(Wu({key:ze.key,value:et,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:xe})),Xi(et)==="array"&&et.length===0&&Ye.push(new Jt(ze.key,et,"array must have at least one stop")),Ye},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:A,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return d==="identity"&&j&&de.push(new Jt(h.key,h.value,'missing required property "property"')),d==="identity"||h.value.stops||de.push(new Jt(h.key,h.value,'missing required property "stops"')),d==="exponential"&&h.valueSpec.expression&&!eu(h.valueSpec)&&de.push(new Jt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(X&&!bu(h.valueSpec)?de.push(new Jt(h.key,h.value,"property functions not supported")):j&&!Ch(h.valueSpec)&&de.push(new Jt(h.key,h.value,"zoom functions not supported"))),d!=="categorical"&&!re||h.value.property!==void 0||de.push(new Jt(h.key,h.value,'"property" property is required')),de;function xe(ze){let Ye=[];const et=ze.value,At=ze.key;if(Xi(et)!=="array")return[new Jt(At,et,`array expected, ${Xi(et)} found`)];if(et.length!==2)return[new Jt(At,et,`array length 2 expected, length ${et.length} found`)];if(re){if(Xi(et[0])!=="object")return[new Jt(At,et,`object expected, ${Xi(et[0])} found`)];if(et[0].zoom===void 0)return[new Jt(At,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new Jt(At,et,"object stop key must have value")];if(R&&R>ps(et[0].zoom))return[new Jt(At,et[0].zoom,"stop zoom values must appear in ascending order")];ps(et[0].zoom)!==R&&(R=ps(et[0].zoom),w=void 0,U={}),Ye=Ye.concat(Xs({key:`${At}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:Wl,value:Fe}}))}else Ye=Ye.concat(Fe({key:`${At}[0]`,value:et[0],validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},et));return tu(xu(et[1]))?Ye.concat([new Jt(`${At}[1]`,et[1],"expressions are not allowed in function stops.")]):Ye.concat(ze.validateSpec({key:`${At}[1]`,value:et[1],valueSpec:A,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Fe(ze,Ye){const et=Xi(ze.value),At=ps(ze.value),yt=ze.value!==null?ze.value:Ye;if(y){if(et!==y)return[new Jt(ze.key,yt,`${et} stop domain type must match previous stop domain type ${y}`)]}else y=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new Jt(ze.key,yt,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&d!=="categorical"){let Wt=`number expected, ${et} found`;return bu(A)&&d===void 0&&(Wt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jt(ze.key,yt,Wt)]}return d!=="categorical"||et!=="number"||isFinite(At)&&Math.floor(At)===At?d!=="categorical"&&et==="number"&&w!==void 0&&At<w?[new Jt(ze.key,yt,"stop domain values must appear in ascending order")]:(w=At,d==="categorical"&&At in U?[new Jt(ze.key,yt,"stop domain values must be unique")]:(U[At]=!0,[])):[new Jt(ze.key,yt,`integer expected, found ${At}`)]}}function Ml(h){const A=(h.expressionContext==="property"?eh:Jh)(xu(h.value),h.valueSpec);if(A.result==="error")return A.value.map(y=>new Jt(`${h.key}${y.key}`,h.value,y.message));const d=A.value.expression||A.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!d.outputDefined())return[new Jt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!nl(d))return[new Jt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!nl(d))return[new Jt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!OA(d,["zoom","feature-state"]))return[new Jt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!_u(d))return[new Jt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mu(h){const A=h.key,d=h.value,y=h.valueSpec,w=[];return Array.isArray(y.values)?y.values.indexOf(ps(d))===-1&&w.push(new Jt(A,d,`expected one of [${y.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(y.values).indexOf(ps(d))===-1&&w.push(new Jt(A,d,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(d)} found`)),w}function Ic(h){return Ec(xu(h.value))?Ml(br({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ed(h)}function ed(h){const A=h.value,d=h.key;if(Xi(A)!=="array")return[new Jt(d,A,`array expected, ${Xi(A)} found`)];const y=h.styleSpec;let w,R=[];if(A.length<1)return[new Jt(d,A,"filter array must have at least 1 element")];switch(R=R.concat(Mu({key:`${d}[0]`,value:A[0],valueSpec:y.filter_operator,style:h.style,styleSpec:h.styleSpec})),ps(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&ps(A[1])==="$type"&&R.push(new Jt(d,A,`"$type" cannot be use with operator "${A[0]}"`));case"==":case"!=":A.length!==3&&R.push(new Jt(d,A,`filter array for operator "${A[0]}" must have 3 elements`));case"in":case"!in":A.length>=2&&(w=Xi(A[1]),w!=="string"&&R.push(new Jt(`${d}[1]`,A[1],`string expected, ${w} found`)));for(let U=2;U<A.length;U++)w=Xi(A[U]),ps(A[1])==="$type"?R=R.concat(Mu({key:`${d}[${U}]`,value:A[U],valueSpec:y.geometry_type,style:h.style,styleSpec:h.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&R.push(new Jt(`${d}[${U}]`,A[U],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let U=1;U<A.length;U++)R=R.concat(ed({key:`${d}[${U}]`,value:A[U],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":w=Xi(A[1]),A.length!==2?R.push(new Jt(d,A,`filter array for "${A[0]}" operator must have 2 elements`)):w!=="string"&&R.push(new Jt(`${d}[1]`,A[1],`string expected, ${w} found`))}return R}function Ac(h,A){const d=h.key,y=h.validateSpec,w=h.style,R=h.styleSpec,U=h.value,j=h.objectKey,X=R[`${A}_${h.layerType}`];if(!X)return[];const re=j.match(/^(.*)-transition$/);if(A==="paint"&&re&&X[re[1]]&&X[re[1]].transition)return y({key:d,value:U,valueSpec:R.transition,style:w,styleSpec:R});const de=h.valueSpec||X[j];if(!de)return[new Jt(d,U,`unknown property "${j}"`)];let xe;if(Xi(U)==="string"&&bu(de)&&!de.tokens&&(xe=/^{([^}]+)}$/.exec(U)))return[new Jt(d,U,`"${j}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(xe[1])} }\`.`)];const Fe=[];return h.layerType==="symbol"&&(j==="text-field"&&w&&!w.glyphs&&Fe.push(new Jt(d,U,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&rl(xu(U))&&ps(U.type)==="identity"&&Fe.push(new Jt(d,U,'"text-font" does not support identity functions'))),Fe.concat(y({key:h.key,value:U,valueSpec:de,style:w,styleSpec:R,expressionContext:"property",propertyType:A,propertyKey:j}))}function Tc(h){return Ac(h,"paint")}function IA(h){return Ac(h,"layout")}function wu(h){let A=[];const d=h.value,y=h.key,w=h.style,R=h.styleSpec;d.type||d.ref||A.push(new Jt(y,d,'either "type" or "ref" is required'));let U=ps(d.type);const j=ps(d.ref);if(d.id){const X=ps(d.id);for(let re=0;re<h.arrayIndex;re++){const de=w.layers[re];ps(de.id)===X&&A.push(new Jt(y,d.id,`duplicate layer id "${d.id}", previously used at line ${de.id.__line__}`))}}if("ref"in d){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in d&&A.push(new Jt(y,d[re],`"${re}" is prohibited for ref layers`))}),w.layers.forEach(re=>{ps(re.id)===j&&(X=re)}),X?X.ref?A.push(new Jt(y,d.ref,"ref cannot reference another ref layer")):U=ps(X.type):A.push(new Jt(y,d.ref,`ref layer "${j}" not found`))}else if(U!=="background")if(d.source){const X=w.sources&&w.sources[d.source],re=X&&ps(X.type);X?re==="vector"&&U==="raster"?A.push(new Jt(y,d.source,`layer "${d.id}" requires a raster source`)):re!=="raster-dem"&&U==="hillshade"?A.push(new Jt(y,d.source,`layer "${d.id}" requires a raster-dem source`)):re==="raster"&&U!=="raster"?A.push(new Jt(y,d.source,`layer "${d.id}" requires a vector source`)):re!=="vector"||d["source-layer"]?re==="raster-dem"&&U!=="hillshade"?A.push(new Jt(y,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="line"||!d.paint||!d.paint["line-gradient"]||re==="geojson"&&X.lineMetrics||A.push(new Jt(y,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):A.push(new Jt(y,d,`layer "${d.id}" must specify a "source-layer"`)):A.push(new Jt(y,d.source,`source "${d.source}" not found`))}else A.push(new Jt(y,d,'missing required property "source"'));return A=A.concat(Xs({key:y,value:d,valueSpec:R.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${y}.type`,value:d.type,valueSpec:R.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:d,objectKey:"type"}),filter:Ic,layout:X=>Xs({layer:d,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>IA(br({layerType:U},re))}}),paint:X=>Xs({layer:d,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>Tc(br({layerType:U},re))}})}})),A}function ml(h){const A=h.value,d=h.key,y=Xi(A);return y!=="string"?[new Jt(d,A,`string expected, ${y} found`)]:[]}const TA={promoteId:function({key:h,value:A}){if(Xi(A)==="string")return ml({key:h,value:A});{const d=[];for(const y in A)d.push(...ml({key:`${h}.${y}`,value:A[y]}));return d}}};function Od(h){const A=h.value,d=h.key,y=h.styleSpec,w=h.style,R=h.validateSpec;if(!A.type)return[new Jt(d,A,'"type" is required')];const U=ps(A.type);let j;switch(U){case"vector":case"raster":return j=Xs({key:d,value:A,valueSpec:y[`source_${U.replace("-","_")}`],style:h.style,styleSpec:y,objectElementValidators:TA,validateSpec:R}),j;case"raster-dem":return j=function(X){var re;const de=(re=X.sourceName)!==null&&re!==void 0?re:"",xe=X.value,Fe=X.styleSpec,ze=Fe.source_raster_dem,Ye=X.style;let et=[];const At=Xi(xe);if(xe===void 0)return et;if(At!=="object")return et.push(new Jt("source_raster_dem",xe,`object expected, ${At} found`)),et;const yt=ps(xe.encoding)==="custom",Wt=["redFactor","greenFactor","blueFactor","baseShift"],St=X.value.encoding?`"${X.value.encoding}"`:"Default";for(const De in xe)!yt&&Wt.includes(De)?et.push(new Jt(De,xe[De],`In "${de}": "${De}" is only valid when "encoding" is set to "custom". ${St} encoding found`)):ze[De]?et=et.concat(X.validateSpec({key:De,value:xe[De],valueSpec:ze[De],validateSpec:X.validateSpec,style:Ye,styleSpec:Fe})):et.push(new Jt(De,xe[De],`unknown property "${De}"`));return et}({sourceName:d,value:A,style:h.style,styleSpec:y,validateSpec:R}),j;case"geojson":if(j=Xs({key:d,value:A,valueSpec:y.source_geojson,style:w,styleSpec:y,validateSpec:R,objectElementValidators:TA}),A.cluster)for(const X in A.clusterProperties){const[re,de]=A.clusterProperties[X],xe=typeof re=="string"?[re,["accumulated"],["get",X]]:re;j.push(...Ml({key:`${d}.${X}.map`,value:de,expressionContext:"cluster-map"})),j.push(...Ml({key:`${d}.${X}.reduce`,value:xe,expressionContext:"cluster-reduce"}))}return j;case"video":return Xs({key:d,value:A,valueSpec:y.source_video,style:w,validateSpec:R,styleSpec:y});case"image":return Xs({key:d,value:A,valueSpec:y.source_image,style:w,validateSpec:R,styleSpec:y});case"canvas":return[new Jt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mu({key:`${d}.type`,value:A.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function st(h){const A=h.value,d=h.styleSpec,y=d.light,w=h.style;let R=[];const U=Xi(A);if(A===void 0)return R;if(U!=="object")return R=R.concat([new Jt("light",A,`object expected, ${U} found`)]),R;for(const j in A){const X=j.match(/^(.*)-transition$/);R=R.concat(X&&y[X[1]]&&y[X[1]].transition?h.validateSpec({key:j,value:A[j],valueSpec:d.transition,validateSpec:h.validateSpec,style:w,styleSpec:d}):y[j]?h.validateSpec({key:j,value:A[j],valueSpec:y[j],validateSpec:h.validateSpec,style:w,styleSpec:d}):[new Jt(j,A[j],`unknown property "${j}"`)])}return R}function xh(h){const A=h.value,d=h.styleSpec,y=d.sky,w=h.style,R=Xi(A);if(A===void 0)return[];if(R!=="object")return[new Jt("sky",A,`object expected, ${R} found`)];let U=[];for(const j in A)U=U.concat(y[j]?h.validateSpec({key:j,value:A[j],valueSpec:y[j],style:w,styleSpec:d}):[new Jt(j,A[j],`unknown property "${j}"`)]);return U}function Js(h){const A=h.value,d=h.styleSpec,y=d.terrain,w=h.style;let R=[];const U=Xi(A);if(A===void 0)return R;if(U!=="object")return R=R.concat([new Jt("terrain",A,`object expected, ${U} found`)]),R;for(const j in A)R=R.concat(y[j]?h.validateSpec({key:j,value:A[j],valueSpec:y[j],validateSpec:h.validateSpec,style:w,styleSpec:d}):[new Jt(j,A[j],`unknown property "${j}"`)]);return R}function Po(h){let A=[];const d=h.value,y=h.key;if(Array.isArray(d)){const w=[],R=[];for(const U in d)d[U].id&&w.includes(d[U].id)&&A.push(new Jt(y,d,`all the sprites' ids must be unique, but ${d[U].id} is duplicated`)),w.push(d[U].id),d[U].url&&R.includes(d[U].url)&&A.push(new Jt(y,d,`all the sprites' URLs must be unique, but ${d[U].url} is duplicated`)),R.push(d[U].url),A=A.concat(Xs({key:`${y}[${U}]`,value:d[U],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return A}return ml({key:y,value:d})}const ri={"*":()=>[],array:Wu,boolean:function(h){const A=h.value,d=h.key,y=Xi(A);return y!=="boolean"?[new Jt(d,A,`boolean expected, ${y} found`)]:[]},number:Wl,color:function(h){const A=h.key,d=h.value,y=Xi(d);return y!=="string"?[new Jt(A,d,`color expected, ${y} found`)]:jr.parse(String(d))?[]:[new Jt(A,d,`color expected, "${d}" found`)]},constants:bh,enum:Mu,filter:Ic,function:ju,layer:wu,object:Xs,source:Od,light:st,sky:xh,terrain:Js,projection:function(h){const A=h.value,d=h.styleSpec,y=d.projection,w=h.style,R=Xi(A);if(A===void 0)return[];if(R!=="object")return[new Jt("projection",A,`object expected, ${R} found`)];let U=[];for(const j in A)U=U.concat(y[j]?h.validateSpec({key:j,value:A[j],valueSpec:y[j],style:w,styleSpec:d}):[new Jt(j,A[j],`unknown property "${j}"`)]);return U},projectionDefinition:function(h){const A=h.key;let d=h.value;d=d instanceof String?d.valueOf():d;const y=Xi(d);return y!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(d)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(d)?["array","string"].includes(y)?[]:[new Jt(A,d,`projection expected, invalid type "${y}" found`)]:[new Jt(A,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:ml,formatted:function(h){return ml(h).length===0?[]:Ml(h)},resolvedImage:function(h){return ml(h).length===0?[]:Ml(h)},padding:function(h){const A=h.key,d=h.value;if(Xi(d)==="array"){if(d.length<1||d.length>4)return[new Jt(A,d,`padding requires 1 to 4 values; ${d.length} values found`)];const y={type:"number"};let w=[];for(let R=0;R<d.length;R++)w=w.concat(h.validateSpec({key:`${A}[${R}]`,value:d[R],validateSpec:h.validateSpec,valueSpec:y}));return w}return Wl({key:A,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const A=h.key,d=h.value,y=Xi(d),w=h.styleSpec;if(y!=="array"||d.length<1||d.length%2!=0)return[new Jt(A,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let U=0;U<d.length;U+=2)R=R.concat(Mu({key:`${A}[${U}]`,value:d[U],valueSpec:w.layout_symbol["text-anchor"]})),R=R.concat(Wu({key:`${A}[${U+1}]`,value:d[U+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:w}));return R},sprite:Po};function ms(h){const A=h.value,d=h.valueSpec,y=h.styleSpec;return h.validateSpec=ms,d.expression&&rl(ps(A))?ju(h):d.expression&&tu(xu(A))?Ml(h):d.type&&ri[d.type]?ri[d.type](h):Xs(br({},h,{valueSpec:d.type?y[d.type]:d}))}function Wa(h){const A=h.value,d=h.key,y=ml(h);return y.length||(A.indexOf("{fontstack}")===-1&&y.push(new Jt(d,A,'"glyphs" url must include a "{fontstack}" token')),A.indexOf("{range}")===-1&&y.push(new Jt(d,A,'"glyphs" url must include a "{range}" token'))),y}function ja(h,A=Ee){let d=[];return d=d.concat(ms({key:"",value:h,valueSpec:A.$root,styleSpec:A,style:h,validateSpec:ms,objectElementValidators:{glyphs:Wa,"*":()=>[]}})),h.constants&&(d=d.concat(bh({key:"constants",value:h.constants}))),Fs(d)}function Os(h){return function(A){return h({...A,validateSpec:ms})}}function Fs(h){return[].concat(h).sort((A,d)=>A.line-d.line)}function Ko(h){return function(...A){return Fs(h.apply(this,A))}}ja.source=Ko(Os(Od)),ja.sprite=Ko(Os(Po)),ja.glyphs=Ko(Os(Wa)),ja.light=Ko(Os(st)),ja.sky=Ko(Os(xh)),ja.terrain=Ko(Os(Js)),ja.layer=Ko(Os(wu)),ja.filter=Ko(Os(Ic)),ja.paintProperty=Ko(Os(Tc)),ja.layoutProperty=Ko(Os(IA));const wl=ja,il=wl.light,Sl=wl.sky,El=wl.paintProperty,nh=wl.layoutProperty;function Bl(h,A){let d=!1;if(A&&A.length)for(const y of A)h.fire(new f(new Error(y.message))),d=!0;return d}class kA{constructor(A,d,y){const w=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;const U=new Int32Array(this.arrayBuffer);A=U[0],this.d=(d=U[1])+2*(y=U[2]);for(let X=0;X<this.d*this.d;X++){const re=U[3+X],de=U[3+X+1];w.push(re===de?null:U.subarray(re,de))}const j=U[3+w.length+1];this.keys=U.subarray(U[3+w.length],j),this.bboxes=U.subarray(j),this.insert=this._insertReadonly}else{this.d=d+2*y;for(let U=0;U<this.d*this.d;U++)w.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=A,this.padding=y,this.scale=d/A,this.uid=0;const R=y/d*A;this.min=-R,this.max=A+R}insert(A,d,y,w,R){this._forEachCell(d,y,w,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(A),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(A,d,y,w,R,U){this.cells[R].push(U)}query(A,d,y,w,R){const U=this.min,j=this.max;if(A<=U&&d<=U&&j<=y&&j<=w&&!R)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(A,d,y,w,this._queryCell,X,{},R),X}}_queryCell(A,d,y,w,R,U,j,X){const re=this.cells[R];if(re!==null){const de=this.keys,xe=this.bboxes;for(let Fe=0;Fe<re.length;Fe++){const ze=re[Fe];if(j[ze]===void 0){const Ye=4*ze;(X?X(xe[Ye+0],xe[Ye+1],xe[Ye+2],xe[Ye+3]):A<=xe[Ye+2]&&d<=xe[Ye+3]&&y>=xe[Ye+0]&&w>=xe[Ye+1])?(j[ze]=!0,U.push(de[ze])):j[ze]=!1}}}}_forEachCell(A,d,y,w,R,U,j,X){const re=this._convertToCellCoord(A),de=this._convertToCellCoord(d),xe=this._convertToCellCoord(y),Fe=this._convertToCellCoord(w);for(let ze=re;ze<=xe;ze++)for(let Ye=de;Ye<=Fe;Ye++){const et=this.d*Ye+ze;if((!X||X(this._convertFromCellCoord(ze),this._convertFromCellCoord(Ye),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(Ye+1)))&&R.call(this,A,d,y,w,et,U,j,X))return}}_convertFromCellCoord(A){return(A-this.padding)/this.scale}_convertToCellCoord(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const A=this.cells,d=3+this.cells.length+1+1;let y=0;for(let U=0;U<this.cells.length;U++)y+=this.cells[U].length;const w=new Int32Array(d+y+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let R=d;for(let U=0;U<A.length;U++){const j=A[U];w[3+U]=R,w.set(j,R),R+=j.length}return w[3+A.length]=R,w.set(this.keys,R),R+=this.keys.length,w[3+A.length+1]=R,w.set(this.bboxes,R),R+=this.bboxes.length,w.buffer}static serialize(A,d){const y=A.toArrayBuffer();return d&&d.push(y),{buffer:y}}static deserialize(A){return new kA(A.buffer)}}const Gu={};function Mr(h,A,d={}){if(Gu[h])throw new Error(`${h} is already registered.`);Object.defineProperty(A,"_classRegistryKey",{value:h,writeable:!1}),Gu[h]={klass:A,omit:d.omit||[],shallow:d.shallow||[]}}Mr("Object",Object),Mr("TransferableGridIndex",kA),Mr("Color",jr),Mr("Error",Error),Mr("AJAXError",Et),Mr("ResolvedImage",Qi),Mr("StylePropertyFunction",_h),Mr("StyleExpression",Jc,{omit:["_evaluator"]}),Mr("ZoomDependentExpression",sc),Mr("ZoomConstantExpression",nu),Mr("CompoundExpression",Zo,{omit:["_evaluate"]});for(const h in po)po[h]._classRegistryKey||Mr(`Expression_${h}`,po[h]);function AA(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Id(h){return h.$name||h.constructor._classRegistryKey}function Ol(h){return!function(A){if(A===null||typeof A!="object")return!1;const d=Id(A);return!(!d||d==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||AA(h)||_n(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function rh(h,A){if(Ol(h))return(AA(h)||_n(h))&&A&&A.push(h),ArrayBuffer.isView(h)&&A&&A.push(h.buffer),h instanceof ImageData&&A&&A.push(h.data.buffer),h;if(Array.isArray(h)){const R=[];for(const U of h)R.push(rh(U,A));return R}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const d=Id(h);if(!d)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Gu[d])throw new Error(`${d} is not registered.`);const{klass:y}=Gu[d],w=y.serialize?y.serialize(h,A):{};if(y.serialize){if(A&&w===A[A.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in h){if(!h.hasOwnProperty(R)||Gu[d].omit.indexOf(R)>=0)continue;const U=h[R];w[R]=Gu[d].shallow.indexOf(R)>=0?U:rh(U,A)}h instanceof Error&&(w.message=h.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(w.$name=d),w}function Su(h){if(Ol(h))return h;if(Array.isArray(h))return h.map(Su);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const A=Id(h)||"Object";if(!Gu[A])throw new Error(`can't deserialize unregistered class ${A}`);const{klass:d}=Gu[A];if(!d)throw new Error(`can't deserialize unregistered class ${A}`);if(d.deserialize)return d.deserialize(h);const y=Object.create(d.prototype);for(const w of Object.keys(h)){if(w==="$name")continue;const R=h[w];y[w]=Gu[A].shallow.indexOf(w)>=0?R:Su(R)}return y}class PA{constructor(){this.first=!0}update(A,d){const y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=d),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=y,!0))}}const Fi={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Qu(h){for(const A of h)if(ga(A.charCodeAt(0)))return!0;return!1}function ih(h){for(const A of h)if(!uA(A.charCodeAt(0)))return!1;return!0}function is(h){const A=h.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}}).filter(d=>d);return new RegExp(A.join("|"),"u")}const Bo=is(["Arab","Dupl","Mong","Ougr","Syrc"]);function uA(h){return!Bo.test(String.fromCodePoint(h))}const Ga=is(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ga(h){return!(h!==746&&h!==747&&(h<4352||!(Fi["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Fi["CJK Compatibility"](h)||Fi["CJK Strokes"](h)||!(!Fi["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Fi["Enclosed CJK Letters and Months"](h)||Fi["Ideographic Description Characters"](h)||Fi.Kanbun(h)||Fi.Katakana(h)&&h!==12540||!(!Fi["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Fi["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Fi["Vertical Forms"](h)||Fi["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||Ga.test(String.fromCodePoint(h)))))}function kc(h){return!(ga(h)||function(A){return!!(Fi["Latin-1 Supplement"](A)&&(A===167||A===169||A===174||A===177||A===188||A===189||A===190||A===215||A===247)||Fi["General Punctuation"](A)&&(A===8214||A===8224||A===8225||A===8240||A===8241||A===8251||A===8252||A===8258||A===8263||A===8264||A===8265||A===8273)||Fi["Letterlike Symbols"](A)||Fi["Number Forms"](A)||Fi["Miscellaneous Technical"](A)&&(A>=8960&&A<=8967||A>=8972&&A<=8991||A>=8996&&A<=9e3||A===9003||A>=9085&&A<=9114||A>=9150&&A<=9165||A===9167||A>=9169&&A<=9179||A>=9186&&A<=9215)||Fi["Control Pictures"](A)&&A!==9251||Fi["Optical Character Recognition"](A)||Fi["Enclosed Alphanumerics"](A)||Fi["Geometric Shapes"](A)||Fi["Miscellaneous Symbols"](A)&&!(A>=9754&&A<=9759)||Fi["Miscellaneous Symbols and Arrows"](A)&&(A>=11026&&A<=11055||A>=11088&&A<=11097||A>=11192&&A<=11243)||Fi["CJK Symbols and Punctuation"](A)||Fi.Katakana(A)||Fi["Private Use Area"](A)||Fi["CJK Compatibility Forms"](A)||Fi["Small Form Variants"](A)||Fi["Halfwidth and Fullwidth Forms"](A)||A===8734||A===8756||A===8757||A>=9984&&A<=10087||A>=10102&&A<=10131||A===65532||A===65533)}(h))}const iu=is(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ou(h){return iu.test(String.fromCodePoint(h))}function oh(h,A){return!(!A&&ou(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Fi.Khmer(h))}function uf(h){for(const A of h)if(ou(A.charCodeAt(0)))return!0;return!1}const jl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(jl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,A){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const d=h.pluginURL,y=new Promise(R=>{this.loadScriptResolve=R});A(d);const w=new Promise(R=>setTimeout(()=>R(),this.TIMEOUT));if(yield Promise.race([y,w]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:d};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)})}};class Qo{constructor(A,d){this.zoom=A,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new PA,this.transition={})}isSupportedScript(A){return function(d,y){for(const w of d)if(!oh(w.charCodeAt(0),y))return!1;return!0}(A,jl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const A=this.zoom,d=A-Math.floor(A),y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*d}}}class ya{constructor(A,d){this.property=A,this.value=d,this.expression=function(y,w){if(rl(y))return new _h(y,w);if(tu(y)){const R=eh(y,w);if(R.result==="error")throw new Error(R.value.map(U=>`${U.key}: ${U.message}`).join(", "));return R.value}{let R=y;return w.type==="color"&&typeof y=="string"?R=jr.parse(y):w.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?R=ns.parse(y):w.type==="projectionDefinition"&&typeof y=="string"&&(R=_o.parse(y)):R=js.parse(y),{kind:"constant",evaluate:()=>R}}}(d===void 0?A.specification.default:d,A.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(A,d,y){return this.property.possiblyEvaluate(this,A,d,y)}}class la{constructor(A){this.property=A,this.value=new ya(A,void 0)}transitioned(A,d){return new Gl(this.property,this.value,d,kt({},A.transition,this.transition),A.now)}untransitioned(){return new Gl(this.property,this.value,null,{},0)}}class ws{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)}getValue(A){return nt(this._values[A].value.value)}setValue(A,d){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new la(this._values[A].property)),this._values[A].value=new ya(this._values[A].property,d===null?void 0:nt(d))}getTransition(A){return nt(this._values[A].transition)}setTransition(A,d){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new la(this._values[A].property)),this._values[A].transition=nt(d)||void 0}serialize(){const A={};for(const d of Object.keys(this._values)){const y=this.getValue(d);y!==void 0&&(A[d]=y);const w=this.getTransition(d);w!==void 0&&(A[`${d}-transition`]=w)}return A}transitioned(A,d){const y=new Yu(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].transitioned(A,d._values[w]);return y}untransitioned(){const A=new Yu(this._properties);for(const d of Object.keys(this._values))A._values[d]=this._values[d].untransitioned();return A}}class Gl{constructor(A,d,y,w,R){this.property=A,this.value=d,this.begin=R+w.delay||0,this.end=this.begin+w.duration||0,A.specification.transition&&(w.delay||w.duration)&&(this.prior=y)}possiblyEvaluate(A,d,y){const w=A.now||0,R=this.value.possiblyEvaluate(A,d,y),U=this.prior;if(U){if(w>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(w<this.begin)return U.possiblyEvaluate(A,d,y);{const j=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(U.possiblyEvaluate(A,d,y),R,Xe(j))}}return R}}class Yu{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)}possiblyEvaluate(A,d,y){const w=new gl(this._properties);for(const R of Object.keys(this._values))w._values[R]=this._values[R].possiblyEvaluate(A,d,y);return w}hasTransition(){for(const A of Object.keys(this._values))if(this._values[A].prior)return!0;return!1}}class Pc{constructor(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)}hasValue(A){return this._values[A].value!==void 0}getValue(A){return nt(this._values[A].value)}setValue(A,d){this._values[A]=new ya(this._values[A].property,d===null?void 0:nt(d))}serialize(){const A={};for(const d of Object.keys(this._values)){const y=this.getValue(d);y!==void 0&&(A[d]=y)}return A}possiblyEvaluate(A,d,y){const w=new gl(this._properties);for(const R of Object.keys(this._values))w._values[R]=this._values[R].possiblyEvaluate(A,d,y);return w}}class Qa{constructor(A,d,y){this.property=A,this.value=d,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(A){return this.value.kind==="constant"?this.value.value:A}evaluate(A,d,y,w){return this.property.evaluate(this.value,this.parameters,A,d,y,w)}}class gl{constructor(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)}get(A){return this._values[A]}}class Qr{constructor(A){this.specification=A}possiblyEvaluate(A,d){if(A.isDataDriven())throw new Error("Value should not be data driven");return A.expression.evaluate(d)}interpolate(A,d,y){const w=mi[this.specification.type];return w?w(A,d,y):A}}class Jr{constructor(A,d){this.specification=A,this.overrides=d}possiblyEvaluate(A,d,y,w){return new Qa(this,A.expression.kind==="constant"||A.expression.kind==="camera"?{kind:"constant",value:A.expression.evaluate(d,null,{},y,w)}:A.expression,d)}interpolate(A,d,y){if(A.value.kind!=="constant"||d.value.kind!=="constant")return A;if(A.value.value===void 0||d.value.value===void 0)return new Qa(this,{kind:"constant",value:void 0},A.parameters);const w=mi[this.specification.type];if(w){const R=w(A.value.value,d.value.value,y);return new Qa(this,{kind:"constant",value:R},A.parameters)}return A}evaluate(A,d,y,w,R,U){return A.kind==="constant"?A.value:A.evaluate(d,y,w,R,U)}}class Mh extends Jr{possiblyEvaluate(A,d,y,w){if(A.value===void 0)return new Qa(this,{kind:"constant",value:void 0},d);if(A.expression.kind==="constant"){const R=A.expression.evaluate(d,null,{},y,w),U=A.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,j=this._calculate(U,U,U,d);return new Qa(this,{kind:"constant",value:j},d)}if(A.expression.kind==="camera"){const R=this._calculate(A.expression.evaluate({zoom:d.zoom-1}),A.expression.evaluate({zoom:d.zoom}),A.expression.evaluate({zoom:d.zoom+1}),d);return new Qa(this,{kind:"constant",value:R},d)}return new Qa(this,A.expression,d)}evaluate(A,d,y,w,R,U){if(A.kind==="source"){const j=A.evaluate(d,y,w,R,U);return this._calculate(j,j,j,d)}return A.kind==="composite"?this._calculate(A.evaluate({zoom:Math.floor(d.zoom)-1},y,w),A.evaluate({zoom:Math.floor(d.zoom)},y,w),A.evaluate({zoom:Math.floor(d.zoom)+1},y,w),d):A.value}_calculate(A,d,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:A,to:d}:{from:y,to:d}}interpolate(A){return A}}class Eu{constructor(A){this.specification=A}possiblyEvaluate(A,d,y,w){if(A.value!==void 0){if(A.expression.kind==="constant"){const R=A.expression.evaluate(d,null,{},y,w);return this._calculate(R,R,R,d)}return this._calculate(A.expression.evaluate(new Qo(Math.floor(d.zoom-1),d)),A.expression.evaluate(new Qo(Math.floor(d.zoom),d)),A.expression.evaluate(new Qo(Math.floor(d.zoom+1),d)),d)}}_calculate(A,d,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:A,to:d}:{from:y,to:d}}interpolate(A){return A}}class cA{constructor(A){this.specification=A}possiblyEvaluate(A,d,y,w){return!!A.expression.evaluate(d,null,{},y,w)}interpolate(){return!1}}class Ql{constructor(A){this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in A){const y=A[d];y.specification.overridable&&this.overridableProperties.push(d);const w=this.defaultPropertyValues[d]=new ya(y,void 0),R=this.defaultTransitionablePropertyValues[d]=new la(y);this.defaultTransitioningPropertyValues[d]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=w.possiblyEvaluate({})}}}Mr("DataDrivenProperty",Jr),Mr("DataConstantProperty",Qr),Mr("CrossFadedDataDrivenProperty",Mh),Mr("CrossFadedProperty",Eu),Mr("ColorRampProperty",cA);const td="-transition";class Yl extends Qe{constructor(A,d){if(super(),this.id=A.id,this.type=A.type,this._featureFilter={filter:()=>!0,needGeometry:!1},A.type!=="custom"&&(this.metadata=A.metadata,this.minzoom=A.minzoom,this.maxzoom=A.maxzoom,A.type!=="background"&&(this.source=A.source,this.sourceLayer=A["source-layer"],this.filter=A.filter),d.layout&&(this._unevaluatedLayout=new Pc(d.layout)),d.paint)){this._transitionablePaint=new ws(d.paint);for(const y in A.paint)this.setPaintProperty(y,A.paint[y],{validate:!1});for(const y in A.layout)this.setLayoutProperty(y,A.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new gl(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(A){return A==="visibility"?this.visibility:this._unevaluatedLayout.getValue(A)}setLayoutProperty(A,d,y={}){d!=null&&this._validate(nh,`layers.${this.id}.layout.${A}`,A,d,y)||(A!=="visibility"?this._unevaluatedLayout.setValue(A,d):this.visibility=d)}getPaintProperty(A){return A.endsWith(td)?this._transitionablePaint.getTransition(A.slice(0,-11)):this._transitionablePaint.getValue(A)}setPaintProperty(A,d,y={}){if(d!=null&&this._validate(El,`layers.${this.id}.paint.${A}`,A,d,y))return!1;if(A.endsWith(td))return this._transitionablePaint.setTransition(A.slice(0,-11),d||void 0),!1;{const w=this._transitionablePaint._values[A],R=w.property.specification["property-type"]==="cross-faded-data-driven",U=w.value.isDataDriven(),j=w.value;this._transitionablePaint.setValue(A,d),this._handleSpecialPaintPropertyUpdate(A);const X=this._transitionablePaint._values[A].value;return X.isDataDriven()||U||R||this._handleOverridablePaintPropertyUpdate(A,j,X)}}_handleSpecialPaintPropertyUpdate(A){}_handleOverridablePaintPropertyUpdate(A,d,y){return!1}isHidden(A){return!!(this.minzoom&&A<this.minzoom)||!!(this.maxzoom&&A>=this.maxzoom)||this.visibility==="none"}updateTransitions(A){this._transitioningPaint=this._transitionablePaint.transitioned(A,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(A,d){A.getCrossfadeParameters&&(this._crossfadeParameters=A.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(A,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(A,void 0,d)}serialize(){const A={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(A.layout=A.layout||{},A.layout.visibility=this.visibility),Ue(A,(d,y)=>!(d===void 0||y==="layout"&&!Object.keys(d).length||y==="paint"&&!Object.keys(d).length))}_validate(A,d,y,w,R={}){return(!R||R.validate!==!1)&&Bl(this,A.call(wl,{key:d,layerType:this.type,objectKey:y,value:w,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const A in this.paint._values){const d=this.paint.get(A);if(d instanceof Qa&&bu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const sh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bu{constructor(A,d){this._structArray=A,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ji{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(A,d){return A._trim(),d&&(A.isTransferred=!0,d.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}}static deserialize(A){const d=Object.create(this.prototype);return d.arrayBuffer=A.arrayBuffer,d.length=A.length,d.capacity=A.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(A){this.reserve(A),this.length=A}reserve(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Is(h,A=1){let d=0,y=0;return{members:h.map(w=>{const R=sh[w.type].BYTES_PER_ELEMENT,U=d=ah(d,Math.max(A,R)),j=w.components||1;return y=Math.max(y,R),d+=R*j,{name:w.name,type:w.type,components:j,offset:U}}),size:ah(d,Math.max(y,A)),alignment:A}}function ah(h,A){return Math.ceil(h/A)*A}class ol extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d){const y=this.length;return this.resize(y+1),this.emplace(y,A,d)}emplace(A,d,y){const w=2*A;return this.int16[w+0]=d,this.int16[w+1]=y,A}}ol.prototype.bytesPerElement=4,Mr("StructArrayLayout2i4",ol);class Ou extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,d,y)}emplace(A,d,y,w){const R=3*A;return this.int16[R+0]=d,this.int16[R+1]=y,this.int16[R+2]=w,A}}Ou.prototype.bytesPerElement=6,Mr("StructArrayLayout3i6",Ou);class KA extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y,w){const R=this.length;return this.resize(R+1),this.emplace(R,A,d,y,w)}emplace(A,d,y,w,R){const U=4*A;return this.int16[U+0]=d,this.int16[U+1]=y,this.int16[U+2]=w,this.int16[U+3]=R,A}}KA.prototype.bytesPerElement=8,Mr("StructArrayLayout4i8",KA);class su extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U){const j=this.length;return this.resize(j+1),this.emplace(j,A,d,y,w,R,U)}emplace(A,d,y,w,R,U,j){const X=6*A;return this.int16[X+0]=d,this.int16[X+1]=y,this.int16[X+2]=w,this.int16[X+3]=R,this.int16[X+4]=U,this.int16[X+5]=j,A}}su.prototype.bytesPerElement=12,Mr("StructArrayLayout2i4i12",su);class ea extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U){const j=this.length;return this.resize(j+1),this.emplace(j,A,d,y,w,R,U)}emplace(A,d,y,w,R,U,j){const X=4*A,re=8*A;return this.int16[X+0]=d,this.int16[X+1]=y,this.uint8[re+4]=w,this.uint8[re+5]=R,this.uint8[re+6]=U,this.uint8[re+7]=j,A}}ea.prototype.bytesPerElement=8,Mr("StructArrayLayout2i4ub8",ea);class Ys extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,d){const y=this.length;return this.resize(y+1),this.emplace(y,A,d)}emplace(A,d,y){const w=2*A;return this.float32[w+0]=d,this.float32[w+1]=y,A}}Ys.prototype.bytesPerElement=8,Mr("StructArrayLayout2f8",Ys);class au extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U,j,X,re,de){const xe=this.length;return this.resize(xe+1),this.emplace(xe,A,d,y,w,R,U,j,X,re,de)}emplace(A,d,y,w,R,U,j,X,re,de,xe){const Fe=10*A;return this.uint16[Fe+0]=d,this.uint16[Fe+1]=y,this.uint16[Fe+2]=w,this.uint16[Fe+3]=R,this.uint16[Fe+4]=U,this.uint16[Fe+5]=j,this.uint16[Fe+6]=X,this.uint16[Fe+7]=re,this.uint16[Fe+8]=de,this.uint16[Fe+9]=xe,A}}au.prototype.bytesPerElement=20,Mr("StructArrayLayout10ui20",au);class hA extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U,j,X,re,de,xe,Fe){const ze=this.length;return this.resize(ze+1),this.emplace(ze,A,d,y,w,R,U,j,X,re,de,xe,Fe)}emplace(A,d,y,w,R,U,j,X,re,de,xe,Fe,ze){const Ye=12*A;return this.int16[Ye+0]=d,this.int16[Ye+1]=y,this.int16[Ye+2]=w,this.int16[Ye+3]=R,this.uint16[Ye+4]=U,this.uint16[Ye+5]=j,this.uint16[Ye+6]=X,this.uint16[Ye+7]=re,this.int16[Ye+8]=de,this.int16[Ye+9]=xe,this.int16[Ye+10]=Fe,this.int16[Ye+11]=ze,A}}hA.prototype.bytesPerElement=24,Mr("StructArrayLayout4i4ui4i24",hA);class lu extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,d,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,d,y)}emplace(A,d,y,w){const R=3*A;return this.float32[R+0]=d,this.float32[R+1]=y,this.float32[R+2]=w,A}}lu.prototype.bytesPerElement=12,Mr("StructArrayLayout3f12",lu);class RA extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(A){const d=this.length;return this.resize(d+1),this.emplace(d,A)}emplace(A,d){return this.uint32[1*A+0]=d,A}}RA.prototype.bytesPerElement=4,Mr("StructArrayLayout1ul4",RA);class Kc extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U,j,X,re){const de=this.length;return this.resize(de+1),this.emplace(de,A,d,y,w,R,U,j,X,re)}emplace(A,d,y,w,R,U,j,X,re,de){const xe=10*A,Fe=5*A;return this.int16[xe+0]=d,this.int16[xe+1]=y,this.int16[xe+2]=w,this.int16[xe+3]=R,this.int16[xe+4]=U,this.int16[xe+5]=j,this.uint32[Fe+3]=X,this.uint16[xe+8]=re,this.uint16[xe+9]=de,A}}Kc.prototype.bytesPerElement=20,Mr("StructArrayLayout6i1ul2ui20",Kc);class Au extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U){const j=this.length;return this.resize(j+1),this.emplace(j,A,d,y,w,R,U)}emplace(A,d,y,w,R,U,j){const X=6*A;return this.int16[X+0]=d,this.int16[X+1]=y,this.int16[X+2]=w,this.int16[X+3]=R,this.int16[X+4]=U,this.int16[X+5]=j,A}}Au.prototype.bytesPerElement=12,Mr("StructArrayLayout2i2i2i12",Au);class sl extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R){const U=this.length;return this.resize(U+1),this.emplace(U,A,d,y,w,R)}emplace(A,d,y,w,R,U){const j=4*A,X=8*A;return this.float32[j+0]=d,this.float32[j+1]=y,this.float32[j+2]=w,this.int16[X+6]=R,this.int16[X+7]=U,A}}sl.prototype.bytesPerElement=16,Mr("StructArrayLayout2f1f2i16",sl);class wh extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U){const j=this.length;return this.resize(j+1),this.emplace(j,A,d,y,w,R,U)}emplace(A,d,y,w,R,U,j){const X=16*A,re=4*A,de=8*A;return this.uint8[X+0]=d,this.uint8[X+1]=y,this.float32[re+1]=w,this.float32[re+2]=R,this.int16[de+6]=U,this.int16[de+7]=j,A}}wh.prototype.bytesPerElement=16,Mr("StructArrayLayout2ub2f2i16",wh);class uc extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,d,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,d,y)}emplace(A,d,y,w){const R=3*A;return this.uint16[R+0]=d,this.uint16[R+1]=y,this.uint16[R+2]=w,A}}uc.prototype.bytesPerElement=6,Mr("StructArrayLayout3ui6",uc);class uu extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt)}emplace(A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt,Wt){const St=24*A,De=12*A,ot=48*A;return this.int16[St+0]=d,this.int16[St+1]=y,this.uint16[St+2]=w,this.uint16[St+3]=R,this.uint32[De+2]=U,this.uint32[De+3]=j,this.uint32[De+4]=X,this.uint16[St+10]=re,this.uint16[St+11]=de,this.uint16[St+12]=xe,this.float32[De+7]=Fe,this.float32[De+8]=ze,this.uint8[ot+36]=Ye,this.uint8[ot+37]=et,this.uint8[ot+38]=At,this.uint32[De+10]=yt,this.int16[St+22]=Wt,A}}uu.prototype.bytesPerElement=48,Mr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",uu);class Il extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt,Wt,St,De,ot,Tt,dn,zn,vn,On,er,Nn){const sr=this.length;return this.resize(sr+1),this.emplace(sr,A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt,Wt,St,De,ot,Tt,dn,zn,vn,On,er,Nn)}emplace(A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt,Wt,St,De,ot,Tt,dn,zn,vn,On,er,Nn,sr){const In=32*A,zr=16*A;return this.int16[In+0]=d,this.int16[In+1]=y,this.int16[In+2]=w,this.int16[In+3]=R,this.int16[In+4]=U,this.int16[In+5]=j,this.int16[In+6]=X,this.int16[In+7]=re,this.uint16[In+8]=de,this.uint16[In+9]=xe,this.uint16[In+10]=Fe,this.uint16[In+11]=ze,this.uint16[In+12]=Ye,this.uint16[In+13]=et,this.uint16[In+14]=At,this.uint16[In+15]=yt,this.uint16[In+16]=Wt,this.uint16[In+17]=St,this.uint16[In+18]=De,this.uint16[In+19]=ot,this.uint16[In+20]=Tt,this.uint16[In+21]=dn,this.uint16[In+22]=zn,this.uint32[zr+12]=vn,this.float32[zr+13]=On,this.float32[zr+14]=er,this.uint16[In+30]=Nn,this.uint16[In+31]=sr,A}}Il.prototype.bytesPerElement=64,Mr("StructArrayLayout8i15ui1ul2f2ui64",Il);class O extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A){const d=this.length;return this.resize(d+1),this.emplace(d,A)}emplace(A,d){return this.float32[1*A+0]=d,A}}O.prototype.bytesPerElement=4,Mr("StructArrayLayout1f4",O);class a extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,d,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,d,y)}emplace(A,d,y,w){const R=3*A;return this.uint16[6*A+0]=d,this.float32[R+1]=y,this.float32[R+2]=w,A}}a.prototype.bytesPerElement=12,Mr("StructArrayLayout1ui2f12",a);class c extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,d,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,d,y)}emplace(A,d,y,w){const R=4*A;return this.uint32[2*A+0]=d,this.uint16[R+2]=y,this.uint16[R+3]=w,A}}c.prototype.bytesPerElement=8,Mr("StructArrayLayout1ul2ui8",c);class C extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,d){const y=this.length;return this.resize(y+1),this.emplace(y,A,d)}emplace(A,d,y){const w=2*A;return this.uint16[w+0]=d,this.uint16[w+1]=y,A}}C.prototype.bytesPerElement=4,Mr("StructArrayLayout2ui4",C);class M extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A){const d=this.length;return this.resize(d+1),this.emplace(d,A)}emplace(A,d){return this.uint16[1*A+0]=d,A}}M.prototype.bytesPerElement=2,Mr("StructArrayLayout1ui2",M);class I extends ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,d,y,w){const R=this.length;return this.resize(R+1),this.emplace(R,A,d,y,w)}emplace(A,d,y,w,R){const U=4*A;return this.float32[U+0]=d,this.float32[U+1]=y,this.float32[U+2]=w,this.float32[U+3]=R,A}}I.prototype.bytesPerElement=16,Mr("StructArrayLayout4f16",I);class z extends Bu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}z.prototype.size=20;class Y extends Kc{get(A){return new z(this,A)}}Mr("CollisionBoxArray",Y);class ee extends Bu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(A){this._structArray.uint8[this._pos1+37]=A}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(A){this._structArray.uint8[this._pos1+38]=A}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(A){this._structArray.uint32[this._pos4+10]=A}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class se extends uu{get(A){return new ee(this,A)}}Mr("PlacedSymbolArray",se);class ge extends Bu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(A){this._structArray.uint32[this._pos4+12]=A}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ge.prototype.size=64;class Oe extends Il{get(A){return new ge(this,A)}}Mr("SymbolInstanceArray",Oe);class Ie extends O{getoffsetX(A){return this.float32[1*A+0]}}Mr("GlyphOffsetArray",Ie);class Ge extends Ou{getx(A){return this.int16[3*A+0]}gety(A){return this.int16[3*A+1]}gettileUnitDistanceFromAnchor(A){return this.int16[3*A+2]}}Mr("SymbolLineVertexArray",Ge);class Ze extends Bu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ze.prototype.size=12;class dt extends a{get(A){return new Ze(this,A)}}Mr("TextAnchorOffsetArray",dt);class ct extends Bu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ct.prototype.size=8;class pt extends c{get(A){return new ct(this,A)}}Mr("FeatureIndexArray",pt);class bt extends ol{}class Bt extends ol{}class wt extends ol{}class It extends su{}class Pt extends ea{}class Lt extends Ys{}class sn extends au{}class ln extends hA{}class on extends lu{}class Cn extends RA{}class Mn extends Au{}class ir extends wh{}class Vn extends uc{}class kn extends C{}const Er=Is([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vr}=Er;class ci{constructor(A=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=A}prepareSegment(A,d,y,w){const R=this.segments[this.segments.length-1];return A>ci.MAX_VERTEX_ARRAY_LENGTH&&gt(`Max vertices per segment is ${ci.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${A}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ci.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+A>ci.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==w?this.createNewSegment(d,y,w):R}createNewSegment(A,d,y){const w={vertexOffset:A.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(w.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(A,d,y){return this.prepareSegment(0,A,d,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const A of this.segments)for(const d in A.vaos)A.vaos[d].destroy()}static simpleSegment(A,d,y,w){return new ci([{vertexOffset:A,primitiveOffset:d,vertexLength:y,primitiveLength:w,vaos:{},sortKey:0}])}}function Yo(h,A){return 256*(h=mt(Math.floor(h),0,255))+mt(Math.floor(A),0,255)}ci.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mr("SegmentVector",ci);const bo=Is([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ro,Ss,to,qi={exports:{}},va={exports:{}},Ca={exports:{}},_a=function(){if(to)return qi.exports;to=1;var h=(Ro||(Ro=1,va.exports=function(d,y){var w,R,U,j,X,re,de,xe;for(R=d.length-(w=3&d.length),U=y,X=3432918353,re=461845907,xe=0;xe<R;)de=255&d.charCodeAt(xe)|(255&d.charCodeAt(++xe))<<8|(255&d.charCodeAt(++xe))<<16|(255&d.charCodeAt(++xe))<<24,++xe,U=27492+(65535&(j=5*(65535&(U=(U^=de=(65535&(de=(de=(65535&de)*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295)<<13|U>>>19))+((5*(U>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(de=0,w){case 3:de^=(255&d.charCodeAt(xe+2))<<16;case 2:de^=(255&d.charCodeAt(xe+1))<<8;case 1:U^=de=(65535&(de=(de=(65535&(de^=255&d.charCodeAt(xe)))*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295}return U^=d.length,U=2246822507*(65535&(U^=U>>>16))+((2246822507*(U>>>16)&65535)<<16)&4294967295,U=3266489909*(65535&(U^=U>>>13))+((3266489909*(U>>>16)&65535)<<16)&4294967295,(U^=U>>>16)>>>0}),va.exports),A=(Ss||(Ss=1,Ca.exports=function(d,y){for(var w,R=d.length,U=y^R,j=0;R>=4;)w=1540483477*(65535&(w=255&d.charCodeAt(j)|(255&d.charCodeAt(++j))<<8|(255&d.charCodeAt(++j))<<16|(255&d.charCodeAt(++j))<<24))+((1540483477*(w>>>16)&65535)<<16),U=1540483477*(65535&U)+((1540483477*(U>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),R-=4,++j;switch(R){case 3:U^=(255&d.charCodeAt(j+2))<<16;case 2:U^=(255&d.charCodeAt(j+1))<<8;case 1:U=1540483477*(65535&(U^=255&d.charCodeAt(j)))+((1540483477*(U>>>16)&65535)<<16)}return U=1540483477*(65535&(U^=U>>>13))+((1540483477*(U>>>16)&65535)<<16),(U^=U>>>15)>>>0}),Ca.exports);return qi.exports=h,qi.exports.murmur3=h,qi.exports.murmur2=A,qi.exports}(),ta=p(_a);class yl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(A,d,y,w){this.ids.push(DA(A)),this.positions.push(d,y,w)}getPositions(A){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=DA(A);let y=0,w=this.ids.length-1;for(;y<w;){const U=y+w>>1;this.ids[U]>=d?w=U:y=U+1}const R=[];for(;this.ids[y]===d;)R.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return R}static serialize(A,d){const y=new Float64Array(A.ids),w=new Uint32Array(A.positions);return ql(y,w,0,y.length-1),d&&d.push(y.buffer,w.buffer),{ids:y,positions:w}}static deserialize(A){const d=new yl;return d.ids=A.ids,d.positions=A.positions,d.indexed=!0,d}}function DA(h){const A=+h;return!isNaN(A)&&A<=Number.MAX_SAFE_INTEGER?A:ta(String(h))}function ql(h,A,d,y){for(;d<y;){const w=h[d+y>>1];let R=d-1,U=y+1;for(;;){do R++;while(h[R]<w);do U--;while(h[U]>w);if(R>=U)break;FA(h,R,U),FA(A,3*R,3*U),FA(A,3*R+1,3*U+1),FA(A,3*R+2,3*U+2)}U-d<y-U?(ql(h,A,d,U),d=U+1):(ql(h,A,U+1,y),y=U)}}function FA(h,A,d){const y=h[A];h[A]=h[d],h[d]=y}Mr("FeaturePositionMap",yl);class al{constructor(A,d){this.gl=A.gl,this.location=d}}class Iu extends al{constructor(A,d){super(A,d),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1f(this.location,A))}}class Vl extends al{constructor(A,d){super(A,d),this.current=[0,0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]&&A[3]===this.current[3]||(this.current=A,this.gl.uniform4f(this.location,A[0],A[1],A[2],A[3]))}}class dA extends al{constructor(A,d){super(A,d),this.current=jr.transparent}set(A){A.r===this.current.r&&A.g===this.current.g&&A.b===this.current.b&&A.a===this.current.a||(this.current=A,this.gl.uniform4f(this.location,A.r,A.g,A.b,A.a))}}const qu=new Float32Array(16);function Hl(h){return[Yo(255*h.r,255*h.g),Yo(255*h.b,255*h.a)]}class cc{constructor(A,d,y){this.value=A,this.uniformNames=d.map(w=>`u_${w}`),this.type=y}setUniform(A,d,y){A.set(y.constantOr(this.value))}getBinding(A,d,y){return this.type==="color"?new dA(A,d):new Iu(A,d)}}class qs{constructor(A,d){this.uniformNames=d.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(A,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=A.tlbr}setUniform(A,d,y,w){const R=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&A.set(R)}getBinding(A,d,y){return y.substr(0,9)==="u_pattern"?new Vl(A,d):new Iu(A,d)}}class os{constructor(A,d,y,w){this.expression=A,this.type=y,this.maxValue=0,this.paintVertexAttributes=d.map(R=>({name:`a_${R}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(A,d,y,w,R){const U=this.paintVertexArray.length,j=this.expression.evaluate(new Qo(0),d,{},w,[],R);this.paintVertexArray.resize(A),this._setPaintValue(U,A,j)}updatePaintArray(A,d,y,w){const R=this.expression.evaluate({zoom:0},y,w);this._setPaintValue(A,d,R)}_setPaintValue(A,d,y){if(this.type==="color"){const w=Hl(y);for(let R=A;R<d;R++)this.paintVertexArray.emplace(R,w[0],w[1])}else{for(let w=A;w<d;w++)this.paintVertexArray.emplace(w,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class na{constructor(A,d,y,w,R,U){this.expression=A,this.uniformNames=d.map(j=>`u_${j}_t`),this.type=y,this.useIntegerZoom=w,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=d.map(j=>({name:`a_${j}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new U}populatePaintArray(A,d,y,w,R){const U=this.expression.evaluate(new Qo(this.zoom),d,{},w,[],R),j=this.expression.evaluate(new Qo(this.zoom+1),d,{},w,[],R),X=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(X,A,U,j)}updatePaintArray(A,d,y,w){const R=this.expression.evaluate({zoom:this.zoom},y,w),U=this.expression.evaluate({zoom:this.zoom+1},y,w);this._setPaintValue(A,d,R,U)}_setPaintValue(A,d,y,w){if(this.type==="color"){const R=Hl(y),U=Hl(w);for(let j=A;j<d;j++)this.paintVertexArray.emplace(j,R[0],R[1],U[0],U[1])}else{for(let R=A;R<d;R++)this.paintVertexArray.emplace(R,y,w);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(w))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(A,d){const y=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,w=mt(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);A.set(w)}getBinding(A,d,y){return new Iu(A,d)}}class Es{constructor(A,d,y,w,R,U){this.expression=A,this.type=d,this.useIntegerZoom=y,this.zoom=w,this.layerId=U,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(A,d,y){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(w,A,d.patterns&&d.patterns[this.layerId],y)}updatePaintArray(A,d,y,w,R){this._setPaintValues(A,d,y.patterns&&y.patterns[this.layerId],R)}_setPaintValues(A,d,y,w){if(!w||!y)return;const{min:R,mid:U,max:j}=y,X=w[R],re=w[U],de=w[j];if(X&&re&&de)for(let xe=A;xe<d;xe++)this.zoomInPaintVertexArray.emplace(xe,re.tl[0],re.tl[1],re.br[0],re.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],re.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(xe,re.tl[0],re.tl[1],re.br[0],re.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],re.pixelRatio,de.pixelRatio)}upload(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,bo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,bo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Tp{constructor(A,d,y){this.binders={},this._buffers=[];const w=[];for(const R in A.paint._values){if(!y(R))continue;const U=A.paint.get(R);if(!(U instanceof Qa&&bu(U.property.specification)))continue;const j=cf(R,A.type),X=U.value,re=U.property.specification.type,de=U.property.useIntegerZoom,xe=U.property.specification["property-type"],Fe=xe==="cross-faded"||xe==="cross-faded-data-driven";if(X.kind==="constant")this.binders[R]=Fe?new qs(X.value,j):new cc(X.value,j,re),w.push(`/u_${R}`);else if(X.kind==="source"||Fe){const ze=$l(R,re,"source");this.binders[R]=Fe?new Es(X,re,de,d,ze,A.id):new os(X,j,re,ze),w.push(`/a_${R}`)}else{const ze=$l(R,re,"composite");this.binders[R]=new na(X,j,re,de,d,ze),w.push(`/z_${R}`)}}this.cacheKey=w.sort().join("")}getMaxValue(A){const d=this.binders[A];return d instanceof os||d instanceof na?d.maxValue:0}populatePaintArrays(A,d,y,w,R){for(const U in this.binders){const j=this.binders[U];(j instanceof os||j instanceof na||j instanceof Es)&&j.populatePaintArray(A,d,y,w,R)}}setConstantPatternPositions(A,d){for(const y in this.binders){const w=this.binders[y];w instanceof qs&&w.setConstantPatternPositions(A,d)}}updatePaintArrays(A,d,y,w,R){let U=!1;for(const j in A){const X=d.getPositions(j);for(const re of X){const de=y.feature(re.index);for(const xe in this.binders){const Fe=this.binders[xe];if((Fe instanceof os||Fe instanceof na||Fe instanceof Es)&&Fe.expression.isStateDependent===!0){const ze=w.paint.get(xe);Fe.expression=ze.value,Fe.updatePaintArray(re.start,re.end,de,A[j],R),U=!0}}}}return U}defines(){const A=[];for(const d in this.binders){const y=this.binders[d];(y instanceof cc||y instanceof qs)&&A.push(...y.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return A}getBinderAttributes(){const A=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof os||y instanceof na)for(let w=0;w<y.paintVertexAttributes.length;w++)A.push(y.paintVertexAttributes[w].name);else if(y instanceof Es)for(let w=0;w<bo.members.length;w++)A.push(bo.members[w].name)}return A}getBinderUniforms(){const A=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof cc||y instanceof qs||y instanceof na)for(const w of y.uniformNames)A.push(w)}return A}getPaintVertexBuffers(){return this._buffers}getUniforms(A,d){const y=[];for(const w in this.binders){const R=this.binders[w];if(R instanceof cc||R instanceof qs||R instanceof na){for(const U of R.uniformNames)if(d[U]){const j=R.getBinding(A,d[U],U);y.push({name:U,property:w,binding:j})}}}return y}setUniforms(A,d,y,w){for(const{name:R,property:U,binding:j}of d)this.binders[U].setUniform(j,w,y.get(U),R)}updatePaintBuffers(A){this._buffers=[];for(const d in this.binders){const y=this.binders[d];if(A&&y instanceof Es){const w=A.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(y instanceof os||y instanceof na)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(A){for(const d in this.binders){const y=this.binders[d];(y instanceof os||y instanceof na||y instanceof Es)&&y.upload(A)}this.updatePaintBuffers()}destroy(){for(const A in this.binders){const d=this.binders[A];(d instanceof os||d instanceof na||d instanceof Es)&&d.destroy()}}}class hc{constructor(A,d,y=()=>!0){this.programConfigurations={};for(const w of A)this.programConfigurations[w.id]=new Tp(w,d,y);this.needsUpload=!1,this._featureMap=new yl,this._bufferOffset=0}populatePaintArrays(A,d,y,w,R,U){for(const j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(A,d,w,R,U);d.id!==void 0&&this._featureMap.add(d.id,y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0}updatePaintArrays(A,d,y,w){for(const R of y)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(A,this._featureMap,d,R,w)||this.needsUpload}get(A){return this.programConfigurations[A]}upload(A){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(A);this.needsUpload=!1}}destroy(){for(const A in this.programConfigurations)this.programConfigurations[A].destroy()}}function cf(h,A){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${A}-`,"").replace(/-/g,"_")]}function $l(h,A,d){const y={color:{source:Ys,composite:I},number:{source:O,composite:Ys}},w=function(R){return{"line-pattern":{source:sn,composite:sn},"fill-pattern":{source:sn,composite:sn},"fill-extrusion-pattern":{source:sn,composite:sn}}[R]}(h);return w&&w[d]||y[A][d]}Mr("ConstantBinder",cc),Mr("CrossFadedConstantBinder",qs),Mr("SourceExpressionBinder",os),Mr("CrossFadedCompositeBinder",Es),Mr("CompositeExpressionBinder",na),Mr("ProgramConfiguration",Tp,{omit:["_buffers"]}),Mr("ProgramConfigurationSet",hc);const LA=Math.pow(2,14)-1,nd=-LA-1;function cu(h){const A=Ke/h.extent,d=h.loadGeometry();for(let y=0;y<d.length;y++){const w=d[y];for(let R=0;R<w.length;R++){const U=w[R],j=Math.round(U.x*A),X=Math.round(U.y*A);U.x=mt(j,nd,LA),U.y=mt(X,nd,LA),(j<U.x||j>U.x+1||X<U.y||X>U.y+1)&&gt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function hu(h,A){return{type:h.type,id:h.id,properties:h.properties,geometry:A?cu(h):[]}}const Tu=-32768;function Tl(h,A,d,y,w){h.emplaceBack(Tu+8*A+y,Tu+8*d+w)}class lh{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(d=>d.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Bt,this.indexArray=new Vn,this.segments=new ci,this.programConfigurations=new hc(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(A,d,y){const w=this.layers[0],R=[];let U=null,j=!1,X=w.type==="heatmap";if(w.type==="circle"){const de=w;U=de.layout.get("circle-sort-key"),j=!U.isConstant(),X=X||de.paint.get("circle-pitch-alignment")==="map"}const re=X?d.subdivisionGranularity.circle:1;for(const{feature:de,id:xe,index:Fe,sourceLayerIndex:ze}of A){const Ye=this.layers[0]._featureFilter.needGeometry,et=hu(de,Ye);if(!this.layers[0]._featureFilter.filter(new Qo(this.zoom),et,y))continue;const At=j?U.evaluate(et,{},y):void 0,yt={id:xe,properties:de.properties,type:de.type,sourceLayerIndex:ze,index:Fe,geometry:Ye?et.geometry:cu(de),patterns:{},sortKey:At};R.push(yt)}j&&R.sort((de,xe)=>de.sortKey-xe.sortKey);for(const de of R){const{geometry:xe,index:Fe,sourceLayerIndex:ze}=de,Ye=A[Fe].feature;this.addFeature(de,xe,Fe,y,re),d.featureIndex.insert(Ye,xe,Fe,ze,this.index)}}update(A,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,d,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Vr),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(A,d,y,w,R=1){let U;switch(R){case 1:U=[0,7];break;case 3:U=[0,2,5,7];break;case 5:U=[0,1,3,4,6,7];break;case 7:U=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const j=U.length;for(const X of d)for(const re of X){const de=re.x,xe=re.y;if(de<0||de>=Ke||xe<0||xe>=Ke)continue;const Fe=this.segments.prepareSegment(j*j,this.layoutVertexArray,this.indexArray,A.sortKey),ze=Fe.vertexLength;for(let Ye=0;Ye<j;Ye++)for(let et=0;et<j;et++)Tl(this.layoutVertexArray,de,xe,U[et],U[Ye]);for(let Ye=0;Ye<j-1;Ye++)for(let et=0;et<j-1;et++){const At=ze+Ye*j+et,yt=ze+(Ye+1)*j+et;this.indexArray.emplaceBack(At,yt+1,At+1),this.indexArray.emplaceBack(At,yt,yt+1)}Fe.vertexLength+=j*j,Fe.primitiveLength+=(j-1)*(j-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,{},w)}}function Sh(h,A){for(let d=0;d<h.length;d++)if(Vu(A,h[d]))return!0;for(let d=0;d<A.length;d++)if(Vu(h,A[d]))return!0;return!!Zf(h,A)}function Td(h,A,d){return!!Vu(h,A)||!!df(A,h,d)}function rd(h,A){if(h.length===1)return kp(A,h[0]);for(let d=0;d<A.length;d++){const y=A[d];for(let w=0;w<y.length;w++)if(Vu(h,y[w]))return!0}for(let d=0;d<h.length;d++)if(kp(A,h[d]))return!0;for(let d=0;d<A.length;d++)if(Zf(h,A[d]))return!0;return!1}function hf(h,A,d){if(h.length>1){if(Zf(h,A))return!0;for(let y=0;y<A.length;y++)if(df(A[y],h,d))return!0}for(let y=0;y<h.length;y++)if(df(h[y],A,d))return!0;return!1}function Zf(h,A){if(h.length===0||A.length===0)return!1;for(let d=0;d<h.length-1;d++){const y=h[d],w=h[d+1];for(let R=0;R<A.length-1;R++)if(id(y,w,A[R],A[R+1]))return!0}return!1}function id(h,A,d,y){return Kt(h,d,y)!==Kt(A,d,y)&&Kt(h,A,d)!==Kt(h,A,y)}function df(h,A,d){const y=d*d;if(A.length===1)return h.distSqr(A[0])<y;for(let w=1;w<A.length;w++)if(kd(h,A[w-1],A[w])<y)return!0;return!1}function kd(h,A,d){const y=A.distSqr(d);if(y===0)return h.distSqr(A);const w=((h.x-A.x)*(d.x-A.x)+(h.y-A.y)*(d.y-A.y))/y;return h.distSqr(w<0?A:w>1?d:d.sub(A)._mult(w)._add(A))}function kp(h,A){for(let d=0;d<h.length;d++)if(Vu(h[d],A))return!0;return!1}function Vu(h,A){let d=!1;for(let y=0,w=h.length-1;y<h.length;w=y++){const R=h[y],U=h[w];R.y>A.y!=U.y>A.y&&A.x<(U.x-R.x)*(A.y-R.y)/(U.y-R.y)+R.x&&(d=!d)}return d}function Xf(h,A,d){const y=d[0],w=d[2];if(h.x<y.x&&A.x<y.x||h.x>w.x&&A.x>w.x||h.y<y.y&&A.y<y.y||h.y>w.y&&A.y>w.y)return!1;const R=Kt(h,A,d[0]);return R!==Kt(h,A,d[1])||R!==Kt(h,A,d[2])||R!==Kt(h,A,d[3])}function Eh(h,A,d){const y=A.paint.get(h).value;return y.kind==="constant"?y.value:d.programConfigurations.get(A.id).getMaxValue(h)}function ff(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Rc(h,A,d,y,w){if(!A[0]&&!A[1])return h;const R=D.convert(A)._mult(w);d==="viewport"&&R._rotate(-y);const U=[];for(let j=0;j<h.length;j++)U.push(h[j].sub(R));return U}let pf,kl;Mr("CircleBucket",lh,{omit:["layers"]});var fA={get paint(){return kl=kl||new Ql({"circle-radius":new Jr(Ee.paint_circle["circle-radius"]),"circle-color":new Jr(Ee.paint_circle["circle-color"]),"circle-blur":new Jr(Ee.paint_circle["circle-blur"]),"circle-opacity":new Jr(Ee.paint_circle["circle-opacity"]),"circle-translate":new Qr(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new Qr(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qr(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qr(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jr(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jr(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jr(Ee.paint_circle["circle-stroke-opacity"])})},get layout(){return pf=pf||new Ql({"circle-sort-key":new Jr(Ee.layout_circle["circle-sort-key"])})}};class Vm extends Yl{constructor(A){super(A,fA)}createBucket(A){return new lh(A)}queryRadius(A){const d=A;return Eh("circle-radius",this,d)+Eh("circle-stroke-width",this,d)+ff(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:A,feature:d,featureState:y,geometry:w,transform:R,pixelsToTileUnits:U,unwrappedTileID:j,getElevation:X}){const re=Rc(A,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,U),de=this.paint.get("circle-radius").evaluate(d,y)+this.paint.get("circle-stroke-width").evaluate(d,y),xe=this.paint.get("circle-pitch-alignment")==="map",Fe=xe?re:function(Ye,et,At,yt){return Ye.map(Wt=>Pp(Wt,et,At,yt))}(re,R,j,X),ze=xe?de*U:de;for(const Ye of w)for(const et of Ye){const At=xe?et:Pp(et,R,j,X);let yt=ze;const Wt=R.projectTileCoordinates(et.x,et.y,j,X).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?yt*=Wt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(yt*=R.cameraToCenterDistance/Wt),Td(Fe,At,yt))return!0}return!1}}function Pp(h,A,d,y){const w=A.projectTileCoordinates(h.x,h.y,d,y).point;return new D((.5*w.x+.5)*A.width,(.5*-w.y+.5)*A.height)}class qo extends lh{}let Kp;Mr("HeatmapBucket",qo,{omit:["layers"]});var Jf={get paint(){return Kp=Kp||new Ql({"heatmap-radius":new Jr(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jr(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qr(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cA(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qr(Ee.paint_heatmap["heatmap-opacity"])})}};function Bh(h,{width:A,height:d},y,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==A*d*y)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${A*d*y}`)}else w=new Uint8Array(A*d*y);return h.width=A,h.height=d,h.data=w,h}function ku(h,{width:A,height:d},y){if(A===h.width&&d===h.height)return;const w=Bh({},{width:A,height:d},y);od(h,w,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,A),height:Math.min(h.height,d)},y),h.width=A,h.height=d,h.data=w.data}function od(h,A,d,y,w,R){if(w.width===0||w.height===0)return A;if(w.width>h.width||w.height>h.height||d.x>h.width-w.width||d.y>h.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>A.width||w.height>A.height||y.x>A.width-w.width||y.y>A.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const U=h.data,j=A.data;if(U===j)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<w.height;X++){const re=((d.y+X)*h.width+d.x)*R,de=((y.y+X)*A.width+y.x)*R;for(let xe=0;xe<w.width*R;xe++)j[de+xe]=U[re+xe]}return A}class sd{constructor(A,d){Bh(this,A,1,d)}resize(A){ku(this,A,1)}clone(){return new sd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,d,y,w,R){od(A,d,y,w,R,1)}}class Ia{constructor(A,d){Bh(this,A,4,d)}resize(A){ku(this,A,4)}replace(A,d){d?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A}clone(){return new Ia({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,d,y,w,R){od(A,d,y,w,R,4)}}function Pd(h){const A={},d=h.resolution||256,y=h.clips?h.clips.length:1,w=h.image||new Ia({width:d,height:y});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const R=(U,j,X)=>{A[h.evaluationKey]=X;const re=h.expression.evaluate(A);w.data[U+j+0]=Math.floor(255*re.r/re.a),w.data[U+j+1]=Math.floor(255*re.g/re.a),w.data[U+j+2]=Math.floor(255*re.b/re.a),w.data[U+j+3]=Math.floor(255*re.a)};if(h.clips)for(let U=0,j=0;U<y;++U,j+=4*d)for(let X=0,re=0;X<d;X++,re+=4){const de=X/(d-1),{start:xe,end:Fe}=h.clips[U];R(j,re,xe*(1-de)+Fe*de)}else for(let U=0,j=0;U<d;U++,j+=4)R(0,j,U/(d-1));return w}Mr("AlphaImage",sd),Mr("RGBAImage",Ia);const ad="big-fb";class mf extends Yl{createBucket(A){return new qo(A)}constructor(A){super(A,Jf),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Pd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ad)&&this.heatmapFbos.delete(ad)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ld;var Oh={get paint(){return ld=ld||new Ql({"hillshade-illumination-direction":new Qr(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qr(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qr(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qr(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qr(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qr(Ee.paint_hillshade["hillshade-accent-color"])})}};class Pi extends Yl{constructor(A){super(A,Oh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const gf=Is([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xo}=gf;function Dc(h,A,d){const y=d.patternDependencies;let w=!1;for(const R of A){const U=R.paint.get(`${h}-pattern`);U.isConstant()||(w=!0);const j=U.constantOr(null);j&&(w=!0,y[j.to]=!0,y[j.from]=!0)}return w}function yf(h,A,d,y,w){const R=w.patternDependencies;for(const U of A){const j=U.paint.get(`${h}-pattern`).value;if(j.kind!=="constant"){let X=j.evaluate({zoom:y-1},d,{},w.availableImages),re=j.evaluate({zoom:y},d,{},w.availableImages),de=j.evaluate({zoom:y+1},d,{},w.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,de=de&&de.name?de.name:de,R[X]=!0,R[re]=!0,R[de]=!0,d.patterns[U.id]={min:X,mid:re,max:de}}}return d}function pA(h,A,d,y,w){let R;if(w===function(U,j,X,re){let de=0;for(let xe=j,Fe=X-re;xe<X;xe+=re)de+=(U[Fe]-U[xe])*(U[xe+1]+U[Fe+1]),Fe=xe;return de}(h,A,d,y)>0)for(let U=A;U<d;U+=y)R=Yt(U/y|0,h[U],h[U+1],R);else for(let U=d-y;U>=A;U-=y)R=Yt(U/y|0,h[U],h[U+1],R);return R&&be(R,R.next)&&(wn(R),R=R.next),R}function Ad(h,A){if(!h)return h;A||(A=h);let d,y=h;do if(d=!1,y.steiner||!be(y,y.next)&&ue(y.prev,y,y.next)!==0)y=y.next;else{if(wn(y),y=A=y.prev,y===y.next)break;d=!0}while(d||y!==A);return A}function ba(h,A,d,y,w,R,U){if(!h)return;!U&&R&&function(X,re,de,xe){let Fe=X;do Fe.z===0&&(Fe.z=g(Fe.x,Fe.y,re,de,xe)),Fe.prevZ=Fe.prev,Fe.nextZ=Fe.next,Fe=Fe.next;while(Fe!==X);Fe.prevZ.nextZ=null,Fe.prevZ=null,function(ze){let Ye,et=1;do{let At,yt=ze;ze=null;let Wt=null;for(Ye=0;yt;){Ye++;let St=yt,De=0;for(let Tt=0;Tt<et&&(De++,St=St.nextZ,St);Tt++);let ot=et;for(;De>0||ot>0&&St;)De!==0&&(ot===0||!St||yt.z<=St.z)?(At=yt,yt=yt.nextZ,De--):(At=St,St=St.nextZ,ot--),Wt?Wt.nextZ=At:ze=At,At.prevZ=Wt,Wt=At;yt=St}Wt.nextZ=null,et*=2}while(Ye>1)}(Fe)}(h,y,w,R);let j=h;for(;h.prev!==h.next;){const X=h.prev,re=h.next;if(R?Ta(h,y,w,R):cm(h))A.push(X.i,h.i,re.i),wn(h),h=re.next,j=re.next;else if((h=re)===j){U?U===1?ba(h=hm(Ad(h),A),A,d,y,w,R,2):U===2&&ep(h,A,d,y,w,R):ba(Ad(h),A,d,y,w,R,1);break}}}function cm(h){const A=h.prev,d=h,y=h.next;if(ue(A,d,y)>=0)return!1;const w=A.x,R=d.x,U=y.x,j=A.y,X=d.y,re=y.y,de=Math.min(w,R,U),xe=Math.min(j,X,re),Fe=Math.max(w,R,U),ze=Math.max(j,X,re);let Ye=y.next;for(;Ye!==A;){if(Ye.x>=de&&Ye.x<=Fe&&Ye.y>=xe&&Ye.y<=ze&&K(w,j,R,X,U,re,Ye.x,Ye.y)&&ue(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.next}return!0}function Ta(h,A,d,y){const w=h.prev,R=h,U=h.next;if(ue(w,R,U)>=0)return!1;const j=w.x,X=R.x,re=U.x,de=w.y,xe=R.y,Fe=U.y,ze=Math.min(j,X,re),Ye=Math.min(de,xe,Fe),et=Math.max(j,X,re),At=Math.max(de,xe,Fe),yt=g(ze,Ye,A,d,y),Wt=g(et,At,A,d,y);let St=h.prevZ,De=h.nextZ;for(;St&&St.z>=yt&&De&&De.z<=Wt;){if(St.x>=ze&&St.x<=et&&St.y>=Ye&&St.y<=At&&St!==w&&St!==U&&K(j,de,X,xe,re,Fe,St.x,St.y)&&ue(St.prev,St,St.next)>=0||(St=St.prevZ,De.x>=ze&&De.x<=et&&De.y>=Ye&&De.y<=At&&De!==w&&De!==U&&K(j,de,X,xe,re,Fe,De.x,De.y)&&ue(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;St&&St.z>=yt;){if(St.x>=ze&&St.x<=et&&St.y>=Ye&&St.y<=At&&St!==w&&St!==U&&K(j,de,X,xe,re,Fe,St.x,St.y)&&ue(St.prev,St,St.next)>=0)return!1;St=St.prevZ}for(;De&&De.z<=Wt;){if(De.x>=ze&&De.x<=et&&De.y>=Ye&&De.y<=At&&De!==w&&De!==U&&K(j,de,X,xe,re,Fe,De.x,De.y)&&ue(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function hm(h,A){let d=h;do{const y=d.prev,w=d.next.next;!be(y,w)&&ke(y,d,d.next,w)&&Mt(y,w)&&Mt(w,y)&&(A.push(y.i,d.i,w.i),wn(d),wn(d.next),d=h=w),d=d.next}while(d!==h);return Ad(d)}function ep(h,A,d,y,w,R){let U=h;do{let j=U.next.next;for(;j!==U.prev;){if(U.i!==j.i&&Z(U,j)){let X=tn(U,j);return U=Ad(U,U.next),X=Ad(X,X.next),ba(U,A,d,y,w,R,0),void ba(X,A,d,y,w,R,0)}j=j.next}U=U.next}while(U!==h)}function mA(h,A){let d=h.x-A.x;return d===0&&(d=h.y-A.y,d===0)&&(d=(h.next.y-h.y)/(h.next.x-h.x)-(A.next.y-A.y)/(A.next.x-A.x)),d}function Rp(h,A){const d=function(w,R){let U=R;const j=w.x,X=w.y;let re,de=-1/0;if(be(w,U))return U;do{if(be(w,U.next))return U.next;if(X<=U.y&&X>=U.next.y&&U.next.y!==U.y){const et=U.x+(X-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(et<=j&&et>de&&(de=et,re=U.x<U.next.x?U:U.next,et===j))return re}U=U.next}while(U!==R);if(!re)return null;const xe=re,Fe=re.x,ze=re.y;let Ye=1/0;U=re;do{if(j>=U.x&&U.x>=Fe&&j!==U.x&&S(X<ze?j:de,X,Fe,ze,X<ze?de:j,X,U.x,U.y)){const et=Math.abs(X-U.y)/(j-U.x);Mt(U,w)&&(et<Ye||et===Ye&&(U.x>re.x||U.x===re.x&&u(re,U)))&&(re=U,Ye=et)}U=U.next}while(U!==xe);return re}(h,A);if(!d)return A;const y=tn(d,h);return Ad(y,y.next),Ad(d,d.next)}function u(h,A){return ue(h.prev,h,A.prev)<0&&ue(A.next,h,h.next)<0}function g(h,A,d,y,w){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-d)*w|0)|h<<8))|h<<4))|h<<2))|h<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-y)*w|0)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function E(h){let A=h,d=h;do(A.x<d.x||A.x===d.x&&A.y<d.y)&&(d=A),A=A.next;while(A!==h);return d}function S(h,A,d,y,w,R,U,j){return(w-U)*(A-j)>=(h-U)*(R-j)&&(h-U)*(y-j)>=(d-U)*(A-j)&&(d-U)*(R-j)>=(w-U)*(y-j)}function K(h,A,d,y,w,R,U,j){return!(h===U&&A===j)&&S(h,A,d,y,w,R,U,j)}function Z(h,A){return h.next.i!==A.i&&h.prev.i!==A.i&&!function(d,y){let w=d;do{if(w.i!==d.i&&w.next.i!==d.i&&w.i!==y.i&&w.next.i!==y.i&&ke(w,w.next,d,y))return!0;w=w.next}while(w!==d);return!1}(h,A)&&(Mt(h,A)&&Mt(A,h)&&function(d,y){let w=d,R=!1;const U=(d.x+y.x)/2,j=(d.y+y.y)/2;do w.y>j!=w.next.y>j&&w.next.y!==w.y&&U<(w.next.x-w.x)*(j-w.y)/(w.next.y-w.y)+w.x&&(R=!R),w=w.next;while(w!==d);return R}(h,A)&&(ue(h.prev,h,A.prev)||ue(h,A.prev,A))||be(h,A)&&ue(h.prev,h,h.next)>0&&ue(A.prev,A,A.next)>0)}function ue(h,A,d){return(A.y-h.y)*(d.x-A.x)-(A.x-h.x)*(d.y-A.y)}function be(h,A){return h.x===A.x&&h.y===A.y}function ke(h,A,d,y){const w=ft(ue(h,A,d)),R=ft(ue(h,A,y)),U=ft(ue(d,y,h)),j=ft(ue(d,y,A));return w!==R&&U!==j||!(w!==0||!Ne(h,d,A))||!(R!==0||!Ne(h,y,A))||!(U!==0||!Ne(d,h,y))||!(j!==0||!Ne(d,A,y))}function Ne(h,A,d){return A.x<=Math.max(h.x,d.x)&&A.x>=Math.min(h.x,d.x)&&A.y<=Math.max(h.y,d.y)&&A.y>=Math.min(h.y,d.y)}function ft(h){return h>0?1:h<0?-1:0}function Mt(h,A){return ue(h.prev,h,h.next)<0?ue(h,A,h.next)>=0&&ue(h,h.prev,A)>=0:ue(h,A,h.prev)<0||ue(h,h.next,A)<0}function tn(h,A){const d=Ln(h.i,h.x,h.y),y=Ln(A.i,A.x,A.y),w=h.next,R=A.prev;return h.next=A,A.prev=h,d.next=w,w.prev=d,y.next=d,d.prev=y,R.next=y,y.prev=R,y}function Yt(h,A,d,y){const w=Ln(h,A,d);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function wn(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Ln(h,A,d){return{i:h,x:A,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Hn{constructor(A,d){if(d>A)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=A,this._minGranularity=d}getGranularityForZoomLevel(A){return Math.max(Math.floor(this._baseZoomGranularity/(1<<A)),this._minGranularity,1)}}class $n{constructor(A){this.fill=A.fill,this.line=A.line,this.tile=A.tile,this.stencil=A.stencil,this.circle=A.circle}}$n.noSubdivision=new $n({fill:new Hn(0,0),line:new Hn(0,0),tile:new Hn(0,0),stencil:new Hn(0,0),circle:1}),Mr("SubdivisionGranularityExpression",Hn),Mr("SubdivisionGranularitySetting",$n);const gr=-32768,Ar=32767;class Rr{constructor(A,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=A,this._granularityCellSize=Ke/A,this._canonical=d}_getKey(A,d){return(A+=32768)<<16|(d+=32768)<<0}_vertexToIndex(A,d){if(A<-32768||d<-32768||A>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(A),w=0|Math.round(d),R=this._getKey(y,w);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const U=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,U),this._vertexBuffer.push(y,w),U}_subdivideTrianglesScanline(A){if(this._granularity<2)return function(w,R){const U=[];for(let j=0;j<R.length;j+=3){const X=R[j],re=R[j+1],de=R[j+2],xe=w[2*X],Fe=w[2*X+1];(w[2*re]-xe)*(w[2*de+1]-Fe)-(w[2*re+1]-Fe)*(w[2*de]-xe)>0?(U.push(X),U.push(de),U.push(re)):(U.push(X),U.push(re),U.push(de))}return U}(this._vertexBuffer,A);const d=[],y=A.length;for(let w=0;w<y;w+=3){const R=[A[w+0],A[w+1],A[w+2]],U=[this._vertexBuffer[2*A[w+0]+0],this._vertexBuffer[2*A[w+0]+1],this._vertexBuffer[2*A[w+1]+0],this._vertexBuffer[2*A[w+1]+1],this._vertexBuffer[2*A[w+2]+0],this._vertexBuffer[2*A[w+2]+1]];let j=1/0,X=1/0,re=-1/0,de=-1/0;for(let et=0;et<3;et++){const At=U[2*et],yt=U[2*et+1];j=Math.min(j,At),re=Math.max(re,At),X=Math.min(X,yt),de=Math.max(de,yt)}if(j===re||X===de)continue;const xe=Math.floor(j/this._granularityCellSize),Fe=Math.ceil(re/this._granularityCellSize),ze=Math.floor(X/this._granularityCellSize),Ye=Math.ceil(de/this._granularityCellSize);if(xe!==Fe||ze!==Ye)for(let et=ze;et<Ye;et++){const At=this._scanlineGenerateVertexRingForCellRow(et,U,R);ro(this._vertexBuffer,At,d)}else d.push(...R)}return d}_scanlineGenerateVertexRingForCellRow(A,d,y){const w=A*this._granularityCellSize,R=w+this._granularityCellSize,U=[];for(let j=0;j<3;j++){const X=d[2*j],re=d[2*j+1],de=d[2*(j+1)%6],xe=d[(2*(j+1)+1)%6],Fe=d[2*(j+2)%6],ze=d[(2*(j+2)+1)%6],Ye=de-X,et=xe-re,At=Ye===0,yt=et===0,Wt=(w-re)/et,St=(R-re)/et,De=Math.min(Wt,St),ot=Math.max(Wt,St);if(!yt&&(De>=1||ot<=0)||yt&&(re<w||re>R)){xe>=w&&xe<=R&&U.push(y[(j+1)%3]);continue}!yt&&De>0&&U.push(this._vertexToIndex(X+Ye*De,re+et*De));const Tt=X+Ye*Math.max(De,0),dn=X+Ye*Math.min(ot,1);At||this._generateIntraEdgeVertices(U,X,re,de,xe,Tt,dn),!yt&&ot<1&&U.push(this._vertexToIndex(X+Ye*ot,re+et*ot)),(yt||xe>=w&&xe<=R)&&U.push(y[(j+1)%3]),!yt&&(xe<=w||xe>=R)&&this._generateInterEdgeVertices(U,X,re,de,xe,Fe,ze,dn,w,R)}return U}_generateIntraEdgeVertices(A,d,y,w,R,U,j){const X=w-d,re=R-y,de=re===0,xe=de?Math.min(d,w):Math.min(U,j),Fe=de?Math.max(d,w):Math.max(U,j),ze=Math.floor(xe/this._granularityCellSize)+1,Ye=Math.ceil(Fe/this._granularityCellSize)-1;if(de?d<w:U<j)for(let et=ze;et<=Ye;et++){const At=et*this._granularityCellSize;A.push(this._vertexToIndex(At,y+re*(At-d)/X))}else for(let et=Ye;et>=ze;et--){const At=et*this._granularityCellSize;A.push(this._vertexToIndex(At,y+re*(At-d)/X))}}_generateInterEdgeVertices(A,d,y,w,R,U,j,X,re,de){const xe=R-y,Fe=U-w,ze=j-R,Ye=(re-R)/ze,et=(de-R)/ze,At=Math.min(Ye,et),yt=Math.max(Ye,et),Wt=w+Fe*At;let St=Math.floor(Math.min(Wt,X)/this._granularityCellSize)+1,De=Math.ceil(Math.max(Wt,X)/this._granularityCellSize)-1,ot=X<Wt;const Tt=ze===0;if(Tt&&(j===re||j===de))return;if(Tt||At>=1||yt<=0){const zn=y-j,vn=U+(d-U)*Math.min((re-j)/zn,(de-j)/zn);St=Math.floor(Math.min(vn,X)/this._granularityCellSize)+1,De=Math.ceil(Math.max(vn,X)/this._granularityCellSize)-1,ot=X<vn}const dn=xe>0?de:re;if(ot)for(let zn=St;zn<=De;zn++)A.push(this._vertexToIndex(zn*this._granularityCellSize,dn));else for(let zn=De;zn>=St;zn--)A.push(this._vertexToIndex(zn*this._granularityCellSize,dn))}_generateOutline(A){const d=[];for(const y of A){const w=kr(y,this._granularity,!0),R=this._pointArrayToIndices(w),U=[];for(let j=1;j<R.length;j++)U.push(R[j-1]),U.push(R[j]);d.push(U)}return d}_handlePoles(A){let d=!1,y=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(d||y)&&this._fillPoles(A,d,y)}_ensureNoPoleVertices(){const A=this._vertexBuffer;for(let d=0;d<A.length;d+=2){const y=A[d+1];y===gr&&(A[d+1]=-32767),y===Ar&&(A[d+1]=32766)}}_generatePoleQuad(A,d,y,w,R,U){w>R!=(U===gr)?(A.push(d),A.push(y),A.push(this._vertexToIndex(w,U)),A.push(y),A.push(this._vertexToIndex(R,U)),A.push(this._vertexToIndex(w,U))):(A.push(y),A.push(d),A.push(this._vertexToIndex(w,U)),A.push(this._vertexToIndex(R,U)),A.push(y),A.push(this._vertexToIndex(w,U)))}_fillPoles(A,d,y){const w=this._vertexBuffer,R=Ke,U=A.length;for(let j=2;j<U;j+=3){const X=A[j-2],re=A[j-1],de=A[j],xe=w[2*X],Fe=w[2*X+1],ze=w[2*re],Ye=w[2*re+1],et=w[2*de],At=w[2*de+1];d&&(Fe===0&&Ye===0&&this._generatePoleQuad(A,X,re,xe,ze,gr),Ye===0&&At===0&&this._generatePoleQuad(A,re,de,ze,et,gr),At===0&&Fe===0&&this._generatePoleQuad(A,de,X,et,xe,gr)),y&&(Fe===R&&Ye===R&&this._generatePoleQuad(A,X,re,xe,ze,Ar),Ye===R&&At===R&&this._generatePoleQuad(A,re,de,ze,et,Ar),At===R&&Fe===R&&this._generatePoleQuad(A,de,X,et,xe,Ar))}}_initializeVertices(A){for(let d=0;d<A.length;d+=2)this._vertexToIndex(A[d],A[d+1])}subdividePolygonInternal(A,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:w}=function(j){const X=[],re=[];for(const de of j)if(de.length!==0){de!==j[0]&&X.push(re.length/2);for(let xe=0;xe<de.length;xe++)re.push(de[xe].x),re.push(de[xe].y)}return{flattened:re,holeIndices:X}}(A);let R;this._initializeVertices(y);try{const j=function(re,de,xe=2){const Fe=de&&de.length,ze=Fe?de[0]*xe:re.length;let Ye=pA(re,0,ze,xe,!0);const et=[];if(!Ye||Ye.next===Ye.prev)return et;let At,yt,Wt;if(Fe&&(Ye=function(St,De,ot,Tt){const dn=[];for(let zn=0,vn=De.length;zn<vn;zn++){const On=pA(St,De[zn]*Tt,zn<vn-1?De[zn+1]*Tt:St.length,Tt,!1);On===On.next&&(On.steiner=!0),dn.push(E(On))}dn.sort(mA);for(let zn=0;zn<dn.length;zn++)ot=Rp(dn[zn],ot);return ot}(re,de,Ye,xe)),re.length>80*xe){At=1/0,yt=1/0;let St=-1/0,De=-1/0;for(let ot=xe;ot<ze;ot+=xe){const Tt=re[ot],dn=re[ot+1];Tt<At&&(At=Tt),dn<yt&&(yt=dn),Tt>St&&(St=Tt),dn>De&&(De=dn)}Wt=Math.max(St-At,De-yt),Wt=Wt!==0?32767/Wt:0}return ba(Ye,et,xe,At,yt,Wt,0),et}(y,w),X=this._convertIndices(y,j);R=this._subdivideTrianglesScanline(X)}catch(j){console.error(j)}let U=[];return d&&(U=this._generateOutline(A)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:U}}_convertIndices(A,d){const y=[];for(let w=0;w<d.length;w++)y.push(this._vertexToIndex(A[2*d[w]],A[2*d[w]+1]));return y}_pointArrayToIndices(A){const d=[];for(let y=0;y<A.length;y++){const w=A[y];d.push(this._vertexToIndex(w.x,w.y))}return d}}function ii(h,A,d,y=!0){return new Rr(d,A).subdividePolygonInternal(h,y)}function kr(h,A,d=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const y=h[0],w=h[h.length-1],R=d&&(y.x!==w.x||y.y!==w.y);if(A<2)return R?[...h,h[0]]:[...h];const U=Math.floor(Ke/A),j=[];j.push(new D(h[0].x,h[0].y));const X=h.length,re=R?X:X-1;for(let de=0;de<re;de++){const xe=h[de],Fe=de<X-1?h[de+1]:h[0],ze=xe.x,Ye=xe.y,et=Fe.x,At=Fe.y,yt=ze!==et,Wt=Ye!==At;if(!yt&&!Wt)continue;const St=et-ze,De=At-Ye,ot=Math.abs(St),Tt=Math.abs(De);let dn=ze,zn=Ye;for(;;){const On=St>0?(Math.floor(dn/U)+1)*U:(Math.ceil(dn/U)-1)*U,er=De>0?(Math.floor(zn/U)+1)*U:(Math.ceil(zn/U)-1)*U,Nn=Math.abs(dn-On),sr=Math.abs(zn-er),In=Math.abs(dn-et),zr=Math.abs(zn-At),xi=yt?Nn/ot:Number.POSITIVE_INFINITY,hi=Wt?sr/Tt:Number.POSITIVE_INFINITY;if((In<=Nn||!yt)&&(zr<=sr||!Wt))break;if(xi<hi&&yt||!Wt){dn=On,zn+=De*xi;const Hr=new D(dn,Math.round(zn));j[j.length-1].x===Hr.x&&j[j.length-1].y===Hr.y||j.push(Hr)}else{dn+=St*hi,zn=er;const Hr=new D(Math.round(dn),zn);j[j.length-1].x===Hr.x&&j[j.length-1].y===Hr.y||j.push(Hr)}}const vn=new D(et,At);j[j.length-1].x===vn.x&&j[j.length-1].y===vn.y||j.push(vn)}return j}function ro(h,A,d){if(A.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,w=h[2*A[0]];for(let X=1;X<A.length;X++){const re=h[2*A[X]];re<w&&(w=re,y=X)}const R=A.length;let U=y,j=(U+1)%R;for(;;){const X=U-1>=0?U-1:R-1,re=(j+1)%R,de=h[2*A[X]],xe=h[2*A[re]],Fe=h[2*A[U]],ze=h[2*A[U]+1],Ye=h[2*A[j]+1];let et=!1;if(de<xe)et=!0;else if(de>xe)et=!1;else{const At=Ye-ze,yt=-(h[2*A[j]]-Fe),Wt=ze<Ye?1:-1;((de-Fe)*At+(h[2*A[X]+1]-ze)*yt)*Wt>((xe-Fe)*At+(h[2*A[re]+1]-ze)*yt)*Wt&&(et=!0)}if(et){const At=A[X],yt=A[U],Wt=A[j];At!==yt&&At!==Wt&&yt!==Wt&&d.push(Wt,yt,At),U--,U<0&&(U=R-1)}else{const At=A[re],yt=A[U],Wt=A[j];At!==yt&&At!==Wt&&yt!==Wt&&d.push(Wt,yt,At),j++,j>=R&&(j=0)}if(X===re)break}}function Oo(h,A,d,y,w,R,U,j,X){const re=w.length/2,de=U&&j&&X;if(re<ci.MAX_VERTEX_ARRAY_LENGTH){const xe=A.prepareSegment(re,d,y),Fe=xe.vertexLength;for(let et=0;et<R.length;et+=3)y.emplaceBack(Fe+R[et],Fe+R[et+1],Fe+R[et+2]);let ze,Ye;xe.vertexLength+=re,xe.primitiveLength+=R.length/3,de&&(Ye=U.prepareSegment(re,d,j),ze=Ye.vertexLength,Ye.vertexLength+=re);for(let et=0;et<w.length;et+=2)h(w[et],w[et+1]);if(de)for(let et=0;et<X.length;et++){const At=X[et];for(let yt=1;yt<At.length;yt+=2)j.emplaceBack(ze+At[yt-1],ze+At[yt]);Ye.primitiveLength+=At.length/2}}else(function(xe,Fe,ze,Ye,et,At){const yt=[];for(let Tt=0;Tt<Ye.length/2;Tt++)yt.push(-1);const Wt={count:0};let St=0,De=xe.getOrCreateLatestSegment(Fe,ze),ot=De.vertexLength;for(let Tt=2;Tt<et.length;Tt+=3){const dn=et[Tt-2],zn=et[Tt-1],vn=et[Tt];let On=yt[dn]<St,er=yt[zn]<St,Nn=yt[vn]<St;De.vertexLength+((On?1:0)+(er?1:0)+(Nn?1:0))>ci.MAX_VERTEX_ARRAY_LENGTH&&(De=xe.createNewSegment(Fe,ze),St=Wt.count,On=!0,er=!0,Nn=!0,ot=0);const sr=ra(yt,Ye,At,Wt,dn,On,De),In=ra(yt,Ye,At,Wt,zn,er,De),zr=ra(yt,Ye,At,Wt,vn,Nn,De);ze.emplaceBack(ot+sr-St,ot+In-St,ot+zr-St),De.primitiveLength++}})(A,d,y,w,R,h),de&&function(xe,Fe,ze,Ye,et,At){const yt=[];for(let Tt=0;Tt<Ye.length/2;Tt++)yt.push(-1);const Wt={count:0};let St=0,De=xe.getOrCreateLatestSegment(Fe,ze),ot=De.vertexLength;for(let Tt=0;Tt<et.length;Tt++){const dn=et[Tt];for(let zn=1;zn<et[Tt].length;zn+=2){const vn=dn[zn-1],On=dn[zn];let er=yt[vn]<St,Nn=yt[On]<St;De.vertexLength+((er?1:0)+(Nn?1:0))>ci.MAX_VERTEX_ARRAY_LENGTH&&(De=xe.createNewSegment(Fe,ze),St=Wt.count,er=!0,Nn=!0,ot=0);const sr=ra(yt,Ye,At,Wt,vn,er,De),In=ra(yt,Ye,At,Wt,On,Nn,De);ze.emplaceBack(ot+sr-St,ot+In-St),De.primitiveLength++}}}(U,d,j,w,X,h),A.forceNewSegmentOnNextPrepare(),U==null||U.forceNewSegmentOnNextPrepare()}function ra(h,A,d,y,w,R,U){if(R){const j=y.count;return d(A[2*w],A[2*w+1]),h[w]=y.count,y.count++,U.vertexLength++,j}return h[w]}class Ls{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(d=>d.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wt,this.indexArray=new Vn,this.indexArray2=new kn,this.programConfigurations=new hc(A.layers,A.zoom),this.segments=new ci,this.segments2=new ci,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(A,d,y){this.hasPattern=Dc("fill",this.layers,d);const w=this.layers[0].layout.get("fill-sort-key"),R=!w.isConstant(),U=[];for(const{feature:j,id:X,index:re,sourceLayerIndex:de}of A){const xe=this.layers[0]._featureFilter.needGeometry,Fe=hu(j,xe);if(!this.layers[0]._featureFilter.filter(new Qo(this.zoom),Fe,y))continue;const ze=R?w.evaluate(Fe,{},y,d.availableImages):void 0,Ye={id:X,properties:j.properties,type:j.type,sourceLayerIndex:de,index:re,geometry:xe?Fe.geometry:cu(j),patterns:{},sortKey:ze};U.push(Ye)}R&&U.sort((j,X)=>j.sortKey-X.sortKey);for(const j of U){const{geometry:X,index:re,sourceLayerIndex:de}=j;if(this.hasPattern){const xe=yf("fill",this.layers,j,this.zoom,d);this.patternFeatures.push(xe)}else this.addFeature(j,X,re,y,{},d.subdivisionGranularity);d.featureIndex.insert(A[re].feature,X,re,de,this.index)}}update(A,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,d,this.stateDependentLayers,y)}addFeatures(A,d,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,y,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Xo),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(A,d,y,w,R,U){for(const j of vh(d,500)){const X=ii(j,w,U.fill.getGranularityForZoomLevel(w.z)),re=this.layoutVertexArray;Oo((de,xe)=>{re.emplaceBack(de,xe)},this.segments,this.layoutVertexArray,this.indexArray,X.verticesFlattened,X.indicesTriangles,this.segments2,this.indexArray2,X.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,R,w)}}let Aa,ka;Mr("FillBucket",Ls,{omit:["layers","patternFeatures"]});var Ya={get paint(){return ka=ka||new Ql({"fill-antialias":new Qr(Ee.paint_fill["fill-antialias"]),"fill-opacity":new Jr(Ee.paint_fill["fill-opacity"]),"fill-color":new Jr(Ee.paint_fill["fill-color"]),"fill-outline-color":new Jr(Ee.paint_fill["fill-outline-color"]),"fill-translate":new Qr(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new Qr(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Mh(Ee.paint_fill["fill-pattern"])})},get layout(){return Aa=Aa||new Ql({"fill-sort-key":new Jr(Ee.layout_fill["fill-sort-key"])})}};class UA extends Yl{constructor(A){super(A,Ya)}recalculate(A,d){super.recalculate(A,d);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new Ls(A)}queryRadius(){return ff(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:A,geometry:d,transform:y,pixelsToTileUnits:w}){return rd(Rc(A,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,w),d)}isTileClipped(){return!0}}const ll=Is([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qa=Is([{name:"a_centroid",components:2,type:"Int16"}],4),{members:cs}=ll;var bi,ss,Vs,ua,gs,zA,Io,Ah={};function gA(){if(ss)return bi;ss=1;var h=B();function A(w,R,U,j,X){this.properties={},this.extent=U,this.type=0,this._pbf=w,this._geometry=-1,this._keys=j,this._values=X,w.readFields(d,this,R)}function d(w,R,U){w==1?R.id=U.readVarint():w==2?function(j,X){for(var re=j.readVarint()+j.pos;j.pos<re;){var de=X._keys[j.readVarint()],xe=X._values[j.readVarint()];X.properties[de]=xe}}(U,R):w==3?R.type=U.readVarint():w==4&&(R._geometry=U.pos)}function y(w){for(var R,U,j=0,X=0,re=w.length,de=re-1;X<re;de=X++)j+=((U=w[de]).x-(R=w[X]).x)*(R.y+U.y);return j}return bi=A,A.types=["Unknown","Point","LineString","Polygon"],A.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var R,U=w.readVarint()+w.pos,j=1,X=0,re=0,de=0,xe=[];w.pos<U;){if(X<=0){var Fe=w.readVarint();j=7&Fe,X=Fe>>3}if(X--,j===1||j===2)re+=w.readSVarint(),de+=w.readSVarint(),j===1&&(R&&xe.push(R),R=[]),R.push(new h(re,de));else{if(j!==7)throw new Error("unknown command "+j);R&&R.push(R[0].clone())}}return R&&xe.push(R),xe},A.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var R=w.readVarint()+w.pos,U=1,j=0,X=0,re=0,de=1/0,xe=-1/0,Fe=1/0,ze=-1/0;w.pos<R;){if(j<=0){var Ye=w.readVarint();U=7&Ye,j=Ye>>3}if(j--,U===1||U===2)(X+=w.readSVarint())<de&&(de=X),X>xe&&(xe=X),(re+=w.readSVarint())<Fe&&(Fe=re),re>ze&&(ze=re);else if(U!==7)throw new Error("unknown command "+U)}return[de,Fe,xe,ze]},A.prototype.toGeoJSON=function(w,R,U){var j,X,re=this.extent*Math.pow(2,U),de=this.extent*w,xe=this.extent*R,Fe=this.loadGeometry(),ze=A.types[this.type];function Ye(yt){for(var Wt=0;Wt<yt.length;Wt++){var St=yt[Wt];yt[Wt]=[360*(St.x+de)/re-180,360/Math.PI*Math.atan(Math.exp((180-360*(St.y+xe)/re)*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(j=0;j<Fe.length;j++)et[j]=Fe[j][0];Ye(Fe=et);break;case 2:for(j=0;j<Fe.length;j++)Ye(Fe[j]);break;case 3:for(Fe=function(yt){var Wt=yt.length;if(Wt<=1)return[yt];for(var St,De,ot=[],Tt=0;Tt<Wt;Tt++){var dn=y(yt[Tt]);dn!==0&&(De===void 0&&(De=dn<0),De===dn<0?(St&&ot.push(St),St=[yt[Tt]]):St.push(yt[Tt]))}return St&&ot.push(St),ot}(Fe),j=0;j<Fe.length;j++)for(X=0;X<Fe[j].length;X++)Ye(Fe[j][X])}Fe.length===1?Fe=Fe[0]:ze="Multi"+ze;var At={type:"Feature",geometry:{type:ze,coordinates:Fe},properties:this.properties};return"id"in this&&(At.id=this.id),At},bi}function dc(){if(ua)return Vs;ua=1;var h=gA();function A(y,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(d,this,w),this.length=this._features.length}function d(y,w,R){y===15?w.version=R.readVarint():y===1?w.name=R.readString():y===5?w.extent=R.readVarint():y===2?w._features.push(R.pos):y===3?w._keys.push(R.readString()):y===4&&w._values.push(function(U){for(var j=null,X=U.readVarint()+U.pos;U.pos<X;){var re=U.readVarint()>>3;j=re===1?U.readString():re===2?U.readFloat():re===3?U.readDouble():re===4?U.readVarint64():re===5?U.readVarint():re===6?U.readSVarint():re===7?U.readBoolean():null}return j}(R))}return Vs=A,A.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var w=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,w,this.extent,this._keys,this._values)},Vs}function Fc(){return Io||(Io=1,Ah.VectorTile=function(){if(zA)return gs;zA=1;var h=dc();function A(d,y,w){if(d===3){var R=new h(w,w.readVarint()+w.pos);R.length&&(y[R.name]=R)}}return gs=function(d,y){this.layers=d.readFields(A,{},y)},gs}(),Ah.VectorTileFeature=gA(),Ah.VectorTileLayer=dc()),Ah}var xa=p(Fc());const Pl=xa.VectorTileFeature.types,Kd=Math.pow(2,13);function Ih(h,A,d,y,w,R,U,j){h.emplaceBack(A,d,2*Math.floor(y*Kd)+U,w*Kd*2,R*Kd*2,Math.round(j))}class Th{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(d=>d.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new It,this.centroidVertexArray=new bt,this.indexArray=new Vn,this.programConfigurations=new hc(A.layers,A.zoom),this.segments=new ci,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(A,d,y){this.features=[],this.hasPattern=Dc("fill-extrusion",this.layers,d);for(const{feature:w,id:R,index:U,sourceLayerIndex:j}of A){const X=this.layers[0]._featureFilter.needGeometry,re=hu(w,X);if(!this.layers[0]._featureFilter.filter(new Qo(this.zoom),re,y))continue;const de={id:R,sourceLayerIndex:j,index:U,geometry:X?re.geometry:cu(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(yf("fill-extrusion",this.layers,de,this.zoom,d)):this.addFeature(de,de.geometry,U,y,{},d.subdivisionGranularity),d.featureIndex.insert(w,de.geometry,U,j,this.index,!0)}}addFeatures(A,d,y){for(const w of this.features){const{geometry:R}=w;this.addFeature(w,R,w.index,d,y,A.subdivisionGranularity)}}update(A,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,d,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,cs),this.centroidVertexBuffer=A.createVertexBuffer(this.centroidVertexArray,qa.members,!0),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(A,d,y,w,R,U){for(const j of vh(d,500)){const X={x:0,y:0,sampleCount:0},re=this.layoutVertexArray.length;this.processPolygon(X,w,A,j,U);const de=this.layoutVertexArray.length-re,xe=Math.floor(X.x/X.sampleCount),Fe=Math.floor(X.y/X.sampleCount);for(let ze=0;ze<de;ze++)this.centroidVertexArray.emplaceBack(xe,Fe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,R,w)}processPolygon(A,d,y,w,R){if(w.length<1||Rd(w[0]))return;for(const xe of w)xe.length!==0&&Hm(A,xe);const U={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},j=R.fill.getGranularityForZoomLevel(d.z),X=Pl[y.type]==="Polygon";for(const xe of w){if(xe.length===0||Rd(xe))continue;const Fe=kr(xe,j,X);this._generateSideFaces(Fe,U)}if(!X)return;const re=ii(w,d,j,!1),de=this.layoutVertexArray;Oo((xe,Fe)=>{Ih(de,xe,Fe,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,re.verticesFlattened,re.indicesTriangles)}_generateSideFaces(A,d){let y=0;for(let w=1;w<A.length;w++){const R=A[w],U=A[w-1];if(q0(R,U))continue;d.segment.vertexLength+4>ci.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const j=R.sub(U)._perp()._unit(),X=U.dist(R);y+X>32768&&(y=0),Ih(this.layoutVertexArray,R.x,R.y,j.x,j.y,0,0,y),Ih(this.layoutVertexArray,R.x,R.y,j.x,j.y,0,1,y),y+=X,Ih(this.layoutVertexArray,U.x,U.y,j.x,j.y,0,0,y),Ih(this.layoutVertexArray,U.x,U.y,j.x,j.y,0,1,y);const re=d.segment.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function Hm(h,A){for(let d=0;d<A.length;d++){const y=A[d];d===A.length-1&&A[0].x===y.x&&A[0].y===y.y||(h.x+=y.x,h.y+=y.y,h.sampleCount++)}}function q0(h,A){return h.x===A.x&&(h.x<0||h.x>Ke)||h.y===A.y&&(h.y<0||h.y>Ke)}function Rd(h){return h.every(A=>A.x<0)||h.every(A=>A.x>Ke)||h.every(A=>A.y<0)||h.every(A=>A.y>Ke)}let dm;Mr("FillExtrusionBucket",Th,{omit:["layers","features"]});var vf={get paint(){return dm=dm||new Ql({"fill-extrusion-opacity":new Qr(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jr(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qr(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qr(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Mh(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jr(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jr(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qr(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Hu extends Yl{constructor(A){super(A,vf)}createBucket(A){return new Th(A)}queryRadius(){return ff(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:A,feature:d,featureState:y,geometry:w,transform:R,pixelsToTileUnits:U,pixelPosMatrix:j}){const X=Rc(A,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,U),re=this.paint.get("fill-extrusion-height").evaluate(d,y),de=this.paint.get("fill-extrusion-base").evaluate(d,y),xe=function(ze,Ye,et){const At=[];for(const yt of ze){const Wt=[yt.x,yt.y,0,1];qe(Wt,Wt,Ye),At.push(new D(Wt[0]/Wt[3],Wt[1]/Wt[3]))}return At}(X,j),Fe=function(ze,Ye,et,At){const yt=[],Wt=[],St=At[8]*Ye,De=At[9]*Ye,ot=At[10]*Ye,Tt=At[11]*Ye,dn=At[8]*et,zn=At[9]*et,vn=At[10]*et,On=At[11]*et;for(const er of ze){const Nn=[],sr=[];for(const In of er){const zr=In.x,xi=In.y,hi=At[0]*zr+At[4]*xi+At[12],Hr=At[1]*zr+At[5]*xi+At[13],Do=At[2]*zr+At[6]*xi+At[14],ul=At[3]*zr+At[7]*xi+At[15],CA=Do+ot,Ku=ul+Tt,Ru=hi+dn,Nc=Hr+zn,du=Do+vn,Ha=ul+On,WA=new D((hi+St)/Ku,(Hr+De)/Ku);WA.z=CA/Ku,Nn.push(WA);const fu=new D(Ru/Ha,Nc/Ha);fu.z=du/Ha,sr.push(fu)}yt.push(Nn),Wt.push(sr)}return[yt,Wt]}(w,de,re,j);return function(ze,Ye,et){let At=1/0;rd(et,Ye)&&(At=$m(et,Ye[0]));for(let yt=0;yt<Ye.length;yt++){const Wt=Ye[yt],St=ze[yt];for(let De=0;De<Wt.length-1;De++){const ot=Wt[De],Tt=[ot,Wt[De+1],St[De+1],St[De],ot];Sh(et,Tt)&&(At=Math.min(At,$m(et,Tt)))}}return At!==1/0&&At}(Fe[0],Fe[1],xe)}}function Dd(h,A){return h.x*A.x+h.y*A.y}function $m(h,A){if(h.length===1){let d=0;const y=A[d++];let w;for(;!w||y.equals(w);)if(w=A[d++],!w)return 1/0;for(;d<A.length;d++){const R=A[d],U=h[0],j=w.sub(y),X=R.sub(y),re=U.sub(y),de=Dd(j,j),xe=Dd(j,X),Fe=Dd(X,X),ze=Dd(re,j),Ye=Dd(re,X),et=de*Fe-xe*xe,At=(Fe*ze-xe*Ye)/et,yt=(de*Ye-xe*ze)/et,Wt=y.z*(1-At-yt)+w.z*At+R.z*yt;if(isFinite(Wt))return Wt}return 1/0}{let d=1/0;for(const y of A)d=Math.min(d,y.z);return d}}const Zm=Is([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:fm}=Zm,$u=Is([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cf}=$u,kh=xa.VectorTileFeature.types,fc=Math.cos(Math.PI/180*37.5),pm=Math.pow(2,14)/.5;class mm{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(d=>d.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new Pt,this.layoutVertexArray2=new Lt,this.indexArray=new Vn,this.programConfigurations=new hc(A.layers,A.zoom),this.segments=new ci,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(A,d,y){this.hasPattern=Dc("line",this.layers,d);const w=this.layers[0].layout.get("line-sort-key"),R=!w.isConstant(),U=[];for(const{feature:j,id:X,index:re,sourceLayerIndex:de}of A){const xe=this.layers[0]._featureFilter.needGeometry,Fe=hu(j,xe);if(!this.layers[0]._featureFilter.filter(new Qo(this.zoom),Fe,y))continue;const ze=R?w.evaluate(Fe,{},y):void 0,Ye={id:X,properties:j.properties,type:j.type,sourceLayerIndex:de,index:re,geometry:xe?Fe.geometry:cu(j),patterns:{},sortKey:ze};U.push(Ye)}R&&U.sort((j,X)=>j.sortKey-X.sortKey);for(const j of U){const{geometry:X,index:re,sourceLayerIndex:de}=j;if(this.hasPattern){const xe=yf("line",this.layers,j,this.zoom,d);this.patternFeatures.push(xe)}else this.addFeature(j,X,re,y,{},d.subdivisionGranularity);d.featureIndex.insert(A[re].feature,X,re,de,this.index)}}update(A,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,d,this.stateDependentLayers,y)}addFeatures(A,d,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,y,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,Cf)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,fm),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(A){if(A.properties&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}}addFeature(A,d,y,w,R,U){const j=this.layers[0].layout,X=j.get("line-join").evaluate(A,{}),re=j.get("line-cap"),de=j.get("line-miter-limit"),xe=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(const Fe of d)this.addLine(Fe,A,X,re,de,xe,w,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,R,w)}addLine(A,d,y,w,R,U,j,X){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,A=kr(A,j?X.line.getGranularityForZoomLevel(j.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let St=0;St<A.length-1;St++)this.totalDistance+=A[St].dist(A[St+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=kh[d.type]==="Polygon";let de=A.length;for(;de>=2&&A[de-1].equals(A[de-2]);)de--;let xe=0;for(;xe<de-1&&A[xe].equals(A[xe+1]);)xe++;if(de<(re?3:2))return;y==="bevel"&&(R=1.05);const Fe=this.overscaling<=16?15*Ke/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Ye,et,At,yt,Wt;this.e1=this.e2=-1,re&&(Ye=A[de-2],Wt=A[xe].sub(Ye)._unit()._perp());for(let St=xe;St<de;St++){if(At=St===de-1?re?A[xe+1]:void 0:A[St+1],At&&A[St].equals(At))continue;Wt&&(yt=Wt),Ye&&(et=Ye),Ye=A[St],Wt=At?At.sub(Ye)._unit()._perp():yt,yt=yt||Wt;let De=yt.add(Wt);De.x===0&&De.y===0||De._unit();const ot=yt.x*Wt.x+yt.y*Wt.y,Tt=De.x*Wt.x+De.y*Wt.y,dn=Tt!==0?1/Tt:1/0,zn=2*Math.sqrt(2-2*Tt),vn=Tt<fc&&et&&At,On=yt.x*Wt.y-yt.y*Wt.x>0;if(vn&&St>xe){const sr=Ye.dist(et);if(sr>2*Fe){const In=Ye.sub(Ye.sub(et)._mult(Fe/sr)._round());this.updateDistance(et,In),this.addCurrentVertex(In,yt,0,0,ze),et=In}}const er=et&&At;let Nn=er?y:re?"butt":w;if(er&&Nn==="round"&&(dn<U?Nn="miter":dn<=2&&(Nn="fakeround")),Nn==="miter"&&dn>R&&(Nn="bevel"),Nn==="bevel"&&(dn>2&&(Nn="flipbevel"),dn<R&&(Nn="miter")),et&&this.updateDistance(et,Ye),Nn==="miter")De._mult(dn),this.addCurrentVertex(Ye,De,0,0,ze);else if(Nn==="flipbevel"){if(dn>100)De=Wt.mult(-1);else{const sr=dn*yt.add(Wt).mag()/yt.sub(Wt).mag();De._perp()._mult(sr*(On?-1:1))}this.addCurrentVertex(Ye,De,0,0,ze),this.addCurrentVertex(Ye,De.mult(-1),0,0,ze)}else if(Nn==="bevel"||Nn==="fakeround"){const sr=-Math.sqrt(dn*dn-1),In=On?sr:0,zr=On?0:sr;if(et&&this.addCurrentVertex(Ye,yt,In,zr,ze),Nn==="fakeround"){const xi=Math.round(180*zn/Math.PI/20);for(let hi=1;hi<xi;hi++){let Hr=hi/xi;if(Hr!==.5){const ul=Hr-.5;Hr+=Hr*ul*(Hr-1)*((1.0904+ot*(ot*(3.55645-1.43519*ot)-3.2452))*ul*ul+(.848013+ot*(.215638*ot-1.06021)))}const Do=Wt.sub(yt)._mult(Hr)._add(yt)._unit()._mult(On?-1:1);this.addHalfVertex(Ye,Do.x,Do.y,!1,On,0,ze)}}At&&this.addCurrentVertex(Ye,Wt,-In,-zr,ze)}else if(Nn==="butt")this.addCurrentVertex(Ye,De,0,0,ze);else if(Nn==="square"){const sr=et?1:-1;this.addCurrentVertex(Ye,De,sr,sr,ze)}else Nn==="round"&&(et&&(this.addCurrentVertex(Ye,yt,0,0,ze),this.addCurrentVertex(Ye,yt,1,1,ze,!0)),At&&(this.addCurrentVertex(Ye,Wt,-1,-1,ze,!0),this.addCurrentVertex(Ye,Wt,0,0,ze)));if(vn&&St<de-1){const sr=Ye.dist(At);if(sr>2*Fe){const In=Ye.add(At.sub(Ye)._mult(Fe/sr)._round());this.updateDistance(Ye,In),this.addCurrentVertex(In,Wt,0,0,ze),Ye=In}}}}addCurrentVertex(A,d,y,w,R,U=!1){const j=d.y*w-d.x,X=-d.y-d.x*w;this.addHalfVertex(A,d.x+d.y*y,d.y-d.x*y,U,!1,y,R),this.addHalfVertex(A,j,X,U,!0,-w,R),this.distance>pm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(A,d,y,w,R,U))}addHalfVertex({x:A,y:d},y,w,R,U,j,X){const re=.5*(this.lineClips?this.scaledDistance*(pm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((A<<1)+(R?1:0),(d<<1)+(U?1:0),Math.round(63*y)+128,Math.round(63*w)+128,1+(j===0?0:j<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),X.primitiveLength++),U?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(A,d){this.distance+=A.dist(d),this.updateScaledDistance()}}let Xm,Vg;Mr("LineBucket",mm,{omit:["layers","patternFeatures"]});var Fd={get paint(){return Vg=Vg||new Ql({"line-opacity":new Jr(Ee.paint_line["line-opacity"]),"line-color":new Jr(Ee.paint_line["line-color"]),"line-translate":new Qr(Ee.paint_line["line-translate"]),"line-translate-anchor":new Qr(Ee.paint_line["line-translate-anchor"]),"line-width":new Jr(Ee.paint_line["line-width"]),"line-gap-width":new Jr(Ee.paint_line["line-gap-width"]),"line-offset":new Jr(Ee.paint_line["line-offset"]),"line-blur":new Jr(Ee.paint_line["line-blur"]),"line-dasharray":new Eu(Ee.paint_line["line-dasharray"]),"line-pattern":new Mh(Ee.paint_line["line-pattern"]),"line-gradient":new cA(Ee.paint_line["line-gradient"])})},get layout(){return Xm=Xm||new Ql({"line-cap":new Qr(Ee.layout_line["line-cap"]),"line-join":new Jr(Ee.layout_line["line-join"]),"line-miter-limit":new Qr(Ee.layout_line["line-miter-limit"]),"line-round-limit":new Qr(Ee.layout_line["line-round-limit"]),"line-sort-key":new Jr(Ee.layout_line["line-sort-key"])})}};class Hg extends Jr{possiblyEvaluate(A,d){return d=new Qo(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(A,d)}evaluate(A,d,y,w){return d=kt({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(A,d,y,w)}}let Dp;class tp extends Yl{constructor(A){super(A,Fd),this.gradientVersion=0,Dp||(Dp=new Hg(Fd.paint.properties["line-width"].specification),Dp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(A){if(A==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof Or,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(A,d){super.recalculate(A,d),this.paint._values["line-floorwidth"]=Dp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new mm(A)}queryRadius(A){const d=A,y=Jm(Eh("line-width",this,d),Eh("line-gap-width",this,d)),w=Eh("line-offset",this,d);return y/2+Math.abs(w)+ff(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:A,feature:d,featureState:y,geometry:w,transform:R,pixelsToTileUnits:U}){const j=Rc(A,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,U),X=U/2*Jm(this.paint.get("line-width").evaluate(d,y),this.paint.get("line-gap-width").evaluate(d,y)),re=this.paint.get("line-offset").evaluate(d,y);return re&&(w=function(de,xe){const Fe=[];for(let ze=0;ze<de.length;ze++){const Ye=de[ze],et=[];for(let At=0;At<Ye.length;At++){const yt=Ye[At-1],Wt=Ye[At],St=Ye[At+1],De=At===0?new D(0,0):Wt.sub(yt)._unit()._perp(),ot=At===Ye.length-1?new D(0,0):St.sub(Wt)._unit()._perp(),Tt=De._add(ot)._unit(),dn=Tt.x*ot.x+Tt.y*ot.y;dn!==0&&Tt._mult(1/dn),et.push(Tt._mult(xe)._add(Wt))}Fe.push(et)}return Fe}(w,re*U)),function(de,xe,Fe){for(let ze=0;ze<xe.length;ze++){const Ye=xe[ze];if(de.length>=3){for(let et=0;et<Ye.length;et++)if(Vu(de,Ye[et]))return!0}if(hf(de,Ye,Fe))return!0}return!1}(j,w,X)}isTileClipped(){return!0}}function Jm(h,A){return A>0?A+2*h:h}const np=Is([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$g=Is([{name:"a_projected_pos",components:3,type:"Float32"}],4);Is([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Zg=Is([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Is([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const e0=Is([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),t0=Is([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Vy(h,A,d){return h.sections.forEach(y=>{y.text=function(w,R,U){const j=R.layout.get("text-transform").evaluate(U,{});return j==="uppercase"?w=w.toLocaleUpperCase():j==="lowercase"&&(w=w.toLocaleLowerCase()),jl.applyArabicShaping&&(w=jl.applyArabicShaping(w)),w}(y.text,A,d)}),h}Is([{name:"triangle",components:3,type:"Uint16"}]),Is([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Is([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Is([{type:"Float32",name:"offsetX"}]),Is([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Is([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gm={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var V0,n0,_f,Kl=24,bf={};function r0(){return V0||(V0=1,bf.read=function(h,A,d,y,w){var R,U,j=8*w-y-1,X=(1<<j)-1,re=X>>1,de=-7,xe=d?w-1:0,Fe=d?-1:1,ze=h[A+xe];for(xe+=Fe,R=ze&(1<<-de)-1,ze>>=-de,de+=j;de>0;R=256*R+h[A+xe],xe+=Fe,de-=8);for(U=R&(1<<-de)-1,R>>=-de,de+=y;de>0;U=256*U+h[A+xe],xe+=Fe,de-=8);if(R===0)R=1-re;else{if(R===X)return U?NaN:1/0*(ze?-1:1);U+=Math.pow(2,y),R-=re}return(ze?-1:1)*U*Math.pow(2,R-y)},bf.write=function(h,A,d,y,w,R){var U,j,X,re=8*R-w-1,de=(1<<re)-1,xe=de>>1,Fe=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=y?0:R-1,Ye=y?1:-1,et=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(j=isNaN(A)?1:0,U=de):(U=Math.floor(Math.log(A)/Math.LN2),A*(X=Math.pow(2,-U))<1&&(U--,X*=2),(A+=U+xe>=1?Fe/X:Fe*Math.pow(2,1-xe))*X>=2&&(U++,X/=2),U+xe>=de?(j=0,U=de):U+xe>=1?(j=(A*X-1)*Math.pow(2,w),U+=xe):(j=A*Math.pow(2,xe-1)*Math.pow(2,w),U=0));w>=8;h[d+ze]=255&j,ze+=Ye,j/=256,w-=8);for(U=U<<w|j,re+=w;re>0;h[d+ze]=255&U,ze+=Ye,U/=256,re-=8);h[d+ze-Ye]|=128*et}),bf}function Va(){if(_f)return n0;_f=1,n0=A;var h=r0();function A(De){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(De)?De:new Uint8Array(De||0),this.pos=0,this.type=0,this.length=this.buf.length}A.Varint=0,A.Fixed64=1,A.Bytes=2,A.Fixed32=5;var d=4294967296,y=1/d,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function R(De){return De.type===A.Bytes?De.readVarint()+De.pos:De.pos+1}function U(De,ot,Tt){return Tt?4294967296*ot+(De>>>0):4294967296*(ot>>>0)+(De>>>0)}function j(De,ot,Tt){var dn=ot<=16383?1:ot<=2097151?2:ot<=268435455?3:Math.floor(Math.log(ot)/(7*Math.LN2));Tt.realloc(dn);for(var zn=Tt.pos-1;zn>=De;zn--)Tt.buf[zn+dn]=Tt.buf[zn]}function X(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeVarint(De[Tt])}function re(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeSVarint(De[Tt])}function de(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeFloat(De[Tt])}function xe(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeDouble(De[Tt])}function Fe(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeBoolean(De[Tt])}function ze(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeFixed32(De[Tt])}function Ye(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeSFixed32(De[Tt])}function et(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeFixed64(De[Tt])}function At(De,ot){for(var Tt=0;Tt<De.length;Tt++)ot.writeSFixed64(De[Tt])}function yt(De,ot){return(De[ot]|De[ot+1]<<8|De[ot+2]<<16)+16777216*De[ot+3]}function Wt(De,ot,Tt){De[Tt]=ot,De[Tt+1]=ot>>>8,De[Tt+2]=ot>>>16,De[Tt+3]=ot>>>24}function St(De,ot){return(De[ot]|De[ot+1]<<8|De[ot+2]<<16)+(De[ot+3]<<24)}return A.prototype={destroy:function(){this.buf=null},readFields:function(De,ot,Tt){for(Tt=Tt||this.length;this.pos<Tt;){var dn=this.readVarint(),zn=dn>>3,vn=this.pos;this.type=7&dn,De(zn,ot,this),this.pos===vn&&this.skip(dn)}return ot},readMessage:function(De,ot){return this.readFields(De,ot,this.readVarint()+this.pos)},readFixed32:function(){var De=yt(this.buf,this.pos);return this.pos+=4,De},readSFixed32:function(){var De=St(this.buf,this.pos);return this.pos+=4,De},readFixed64:function(){var De=yt(this.buf,this.pos)+yt(this.buf,this.pos+4)*d;return this.pos+=8,De},readSFixed64:function(){var De=yt(this.buf,this.pos)+St(this.buf,this.pos+4)*d;return this.pos+=8,De},readFloat:function(){var De=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,De},readDouble:function(){var De=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,De},readVarint:function(De){var ot,Tt,dn=this.buf;return ot=127&(Tt=dn[this.pos++]),Tt<128?ot:(ot|=(127&(Tt=dn[this.pos++]))<<7,Tt<128?ot:(ot|=(127&(Tt=dn[this.pos++]))<<14,Tt<128?ot:(ot|=(127&(Tt=dn[this.pos++]))<<21,Tt<128?ot:function(zn,vn,On){var er,Nn,sr=On.buf;if(er=(112&(Nn=sr[On.pos++]))>>4,Nn<128||(er|=(127&(Nn=sr[On.pos++]))<<3,Nn<128)||(er|=(127&(Nn=sr[On.pos++]))<<10,Nn<128)||(er|=(127&(Nn=sr[On.pos++]))<<17,Nn<128)||(er|=(127&(Nn=sr[On.pos++]))<<24,Nn<128)||(er|=(1&(Nn=sr[On.pos++]))<<31,Nn<128))return U(zn,er,vn);throw new Error("Expected varint not more than 10 bytes")}(ot|=(15&(Tt=dn[this.pos]))<<28,De,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var De=this.readVarint();return De%2==1?(De+1)/-2:De/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var De=this.readVarint()+this.pos,ot=this.pos;return this.pos=De,De-ot>=12&&w?function(Tt,dn,zn){return w.decode(Tt.subarray(dn,zn))}(this.buf,ot,De):function(Tt,dn,zn){for(var vn="",On=dn;On<zn;){var er,Nn,sr,In=Tt[On],zr=null,xi=In>239?4:In>223?3:In>191?2:1;if(On+xi>zn)break;xi===1?In<128&&(zr=In):xi===2?(192&(er=Tt[On+1]))==128&&(zr=(31&In)<<6|63&er)<=127&&(zr=null):xi===3?(Nn=Tt[On+2],(192&(er=Tt[On+1]))==128&&(192&Nn)==128&&((zr=(15&In)<<12|(63&er)<<6|63&Nn)<=2047||zr>=55296&&zr<=57343)&&(zr=null)):xi===4&&(Nn=Tt[On+2],sr=Tt[On+3],(192&(er=Tt[On+1]))==128&&(192&Nn)==128&&(192&sr)==128&&((zr=(15&In)<<18|(63&er)<<12|(63&Nn)<<6|63&sr)<=65535||zr>=1114112)&&(zr=null)),zr===null?(zr=65533,xi=1):zr>65535&&(zr-=65536,vn+=String.fromCharCode(zr>>>10&1023|55296),zr=56320|1023&zr),vn+=String.fromCharCode(zr),On+=xi}return vn}(this.buf,ot,De)},readBytes:function(){var De=this.readVarint()+this.pos,ot=this.buf.subarray(this.pos,De);return this.pos=De,ot},readPackedVarint:function(De,ot){if(this.type!==A.Bytes)return De.push(this.readVarint(ot));var Tt=R(this);for(De=De||[];this.pos<Tt;)De.push(this.readVarint(ot));return De},readPackedSVarint:function(De){if(this.type!==A.Bytes)return De.push(this.readSVarint());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readSVarint());return De},readPackedBoolean:function(De){if(this.type!==A.Bytes)return De.push(this.readBoolean());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readBoolean());return De},readPackedFloat:function(De){if(this.type!==A.Bytes)return De.push(this.readFloat());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readFloat());return De},readPackedDouble:function(De){if(this.type!==A.Bytes)return De.push(this.readDouble());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readDouble());return De},readPackedFixed32:function(De){if(this.type!==A.Bytes)return De.push(this.readFixed32());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readFixed32());return De},readPackedSFixed32:function(De){if(this.type!==A.Bytes)return De.push(this.readSFixed32());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readSFixed32());return De},readPackedFixed64:function(De){if(this.type!==A.Bytes)return De.push(this.readFixed64());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readFixed64());return De},readPackedSFixed64:function(De){if(this.type!==A.Bytes)return De.push(this.readSFixed64());var ot=R(this);for(De=De||[];this.pos<ot;)De.push(this.readSFixed64());return De},skip:function(De){var ot=7&De;if(ot===A.Varint)for(;this.buf[this.pos++]>127;);else if(ot===A.Bytes)this.pos=this.readVarint()+this.pos;else if(ot===A.Fixed32)this.pos+=4;else{if(ot!==A.Fixed64)throw new Error("Unimplemented type: "+ot);this.pos+=8}},writeTag:function(De,ot){this.writeVarint(De<<3|ot)},realloc:function(De){for(var ot=this.length||16;ot<this.pos+De;)ot*=2;if(ot!==this.length){var Tt=new Uint8Array(ot);Tt.set(this.buf),this.buf=Tt,this.length=ot}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(De){this.realloc(4),Wt(this.buf,De,this.pos),this.pos+=4},writeSFixed32:function(De){this.realloc(4),Wt(this.buf,De,this.pos),this.pos+=4},writeFixed64:function(De){this.realloc(8),Wt(this.buf,-1&De,this.pos),Wt(this.buf,Math.floor(De*y),this.pos+4),this.pos+=8},writeSFixed64:function(De){this.realloc(8),Wt(this.buf,-1&De,this.pos),Wt(this.buf,Math.floor(De*y),this.pos+4),this.pos+=8},writeVarint:function(De){(De=+De||0)>268435455||De<0?function(ot,Tt){var dn,zn;if(ot>=0?(dn=ot%4294967296|0,zn=ot/4294967296|0):(zn=~(-ot/4294967296),4294967295^(dn=~(-ot%4294967296))?dn=dn+1|0:(dn=0,zn=zn+1|0)),ot>=18446744073709552e3||ot<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Tt.realloc(10),function(vn,On,er){er.buf[er.pos++]=127&vn|128,vn>>>=7,er.buf[er.pos++]=127&vn|128,vn>>>=7,er.buf[er.pos++]=127&vn|128,vn>>>=7,er.buf[er.pos++]=127&vn|128,er.buf[er.pos]=127&(vn>>>=7)}(dn,0,Tt),function(vn,On){var er=(7&vn)<<4;On.buf[On.pos++]|=er|((vn>>>=3)?128:0),vn&&(On.buf[On.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(On.buf[On.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(On.buf[On.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(On.buf[On.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(On.buf[On.pos++]=127&vn)))))}(zn,Tt)}(De,this):(this.realloc(4),this.buf[this.pos++]=127&De|(De>127?128:0),De<=127||(this.buf[this.pos++]=127&(De>>>=7)|(De>127?128:0),De<=127||(this.buf[this.pos++]=127&(De>>>=7)|(De>127?128:0),De<=127||(this.buf[this.pos++]=De>>>7&127))))},writeSVarint:function(De){this.writeVarint(De<0?2*-De-1:2*De)},writeBoolean:function(De){this.writeVarint(!!De)},writeString:function(De){De=String(De),this.realloc(4*De.length),this.pos++;var ot=this.pos;this.pos=function(dn,zn,vn){for(var On,er,Nn=0;Nn<zn.length;Nn++){if((On=zn.charCodeAt(Nn))>55295&&On<57344){if(!er){On>56319||Nn+1===zn.length?(dn[vn++]=239,dn[vn++]=191,dn[vn++]=189):er=On;continue}if(On<56320){dn[vn++]=239,dn[vn++]=191,dn[vn++]=189,er=On;continue}On=er-55296<<10|On-56320|65536,er=null}else er&&(dn[vn++]=239,dn[vn++]=191,dn[vn++]=189,er=null);On<128?dn[vn++]=On:(On<2048?dn[vn++]=On>>6|192:(On<65536?dn[vn++]=On>>12|224:(dn[vn++]=On>>18|240,dn[vn++]=On>>12&63|128),dn[vn++]=On>>6&63|128),dn[vn++]=63&On|128)}return vn}(this.buf,De,this.pos);var Tt=this.pos-ot;Tt>=128&&j(ot,Tt,this),this.pos=ot-1,this.writeVarint(Tt),this.pos+=Tt},writeFloat:function(De){this.realloc(4),h.write(this.buf,De,this.pos,!0,23,4),this.pos+=4},writeDouble:function(De){this.realloc(8),h.write(this.buf,De,this.pos,!0,52,8),this.pos+=8},writeBytes:function(De){var ot=De.length;this.writeVarint(ot),this.realloc(ot);for(var Tt=0;Tt<ot;Tt++)this.buf[this.pos++]=De[Tt]},writeRawMessage:function(De,ot){this.pos++;var Tt=this.pos;De(ot,this);var dn=this.pos-Tt;dn>=128&&j(Tt,dn,this),this.pos=Tt-1,this.writeVarint(dn),this.pos+=dn},writeMessage:function(De,ot,Tt){this.writeTag(De,A.Bytes),this.writeRawMessage(ot,Tt)},writePackedVarint:function(De,ot){ot.length&&this.writeMessage(De,X,ot)},writePackedSVarint:function(De,ot){ot.length&&this.writeMessage(De,re,ot)},writePackedBoolean:function(De,ot){ot.length&&this.writeMessage(De,Fe,ot)},writePackedFloat:function(De,ot){ot.length&&this.writeMessage(De,de,ot)},writePackedDouble:function(De,ot){ot.length&&this.writeMessage(De,xe,ot)},writePackedFixed32:function(De,ot){ot.length&&this.writeMessage(De,ze,ot)},writePackedSFixed32:function(De,ot){ot.length&&this.writeMessage(De,Ye,ot)},writePackedFixed64:function(De,ot){ot.length&&this.writeMessage(De,et,ot)},writePackedSFixed64:function(De,ot){ot.length&&this.writeMessage(De,At,ot)},writeBytesField:function(De,ot){this.writeTag(De,A.Bytes),this.writeBytes(ot)},writeFixed32Field:function(De,ot){this.writeTag(De,A.Fixed32),this.writeFixed32(ot)},writeSFixed32Field:function(De,ot){this.writeTag(De,A.Fixed32),this.writeSFixed32(ot)},writeFixed64Field:function(De,ot){this.writeTag(De,A.Fixed64),this.writeFixed64(ot)},writeSFixed64Field:function(De,ot){this.writeTag(De,A.Fixed64),this.writeSFixed64(ot)},writeVarintField:function(De,ot){this.writeTag(De,A.Varint),this.writeVarint(ot)},writeSVarintField:function(De,ot){this.writeTag(De,A.Varint),this.writeSVarint(ot)},writeStringField:function(De,ot){this.writeTag(De,A.Bytes),this.writeString(ot)},writeFloatField:function(De,ot){this.writeTag(De,A.Fixed32),this.writeFloat(ot)},writeDoubleField:function(De,ot){this.writeTag(De,A.Fixed64),this.writeDouble(ot)},writeBooleanField:function(De,ot){this.writeVarintField(De,!!ot)}},n0}var H0=p(Va());const i0=3;function Hy(h,A,d){h===1&&d.readMessage($y,A)}function $y(h,A,d){if(h===3){const{id:y,bitmap:w,width:R,height:U,left:j,top:X,advance:re}=d.readMessage(Xg,{});A.push({id:y,bitmap:new sd({width:R+2*i0,height:U+2*i0},w),metrics:{width:R,height:U,left:j,top:X,advance:re}})}}function Xg(h,A,d){h===1?A.id=d.readVarint():h===2?A.bitmap=d.readBytes():h===3?A.width=d.readVarint():h===4?A.height=d.readVarint():h===5?A.left=d.readSVarint():h===6?A.top=d.readSVarint():h===7&&(A.advance=d.readVarint())}const Jg=i0;function e1(h){let A=0,d=0;for(const U of h)A+=U.w*U.h,d=Math.max(d,U.w);h.sort((U,j)=>j.h-U.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),d),h:1/0}];let w=0,R=0;for(const U of h)for(let j=y.length-1;j>=0;j--){const X=y[j];if(!(U.w>X.w||U.h>X.h)){if(U.x=X.x,U.y=X.y,R=Math.max(R,U.y+U.h),w=Math.max(w,U.x+U.w),U.w===X.w&&U.h===X.h){const re=y.pop();j<y.length&&(y[j]=re)}else U.h===X.h?(X.x+=U.w,X.w-=U.w):U.w===X.w?(X.y+=U.h,X.h-=U.h):(y.push({x:X.x+U.w,y:X.y,w:X.w-U.w,h:U.h}),X.y+=U.h,X.h-=U.h);break}}return{w,h:R,fill:A/(w*R)||0}}const Ma=1;class Fp{constructor(A,{pixelRatio:d,version:y,stretchX:w,stretchY:R,content:U,textFitWidth:j,textFitHeight:X}){this.paddedRect=A,this.pixelRatio=d,this.stretchX=w,this.stretchY=R,this.content=U,this.version=y,this.textFitWidth=j,this.textFitHeight=X}get tl(){return[this.paddedRect.x+Ma,this.paddedRect.y+Ma]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ma,this.paddedRect.y+this.paddedRect.h-Ma]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ma)/this.pixelRatio,(this.paddedRect.h-2*Ma)/this.pixelRatio]}}class t1{constructor(A,d){const y={},w={};this.haveRenderCallbacks=[];const R=[];this.addImages(A,y,R),this.addImages(d,w,R);const{w:U,h:j}=e1(R),X=new Ia({width:U||1,height:j||1});for(const re in A){const de=A[re],xe=y[re].paddedRect;Ia.copy(de.data,X,{x:0,y:0},{x:xe.x+Ma,y:xe.y+Ma},de.data)}for(const re in d){const de=d[re],xe=w[re].paddedRect,Fe=xe.x+Ma,ze=xe.y+Ma,Ye=de.data.width,et=de.data.height;Ia.copy(de.data,X,{x:0,y:0},{x:Fe,y:ze},de.data),Ia.copy(de.data,X,{x:0,y:et-1},{x:Fe,y:ze-1},{width:Ye,height:1}),Ia.copy(de.data,X,{x:0,y:0},{x:Fe,y:ze+et},{width:Ye,height:1}),Ia.copy(de.data,X,{x:Ye-1,y:0},{x:Fe-1,y:ze},{width:1,height:et}),Ia.copy(de.data,X,{x:0,y:0},{x:Fe+Ye,y:ze},{width:1,height:et})}this.image=X,this.iconPositions=y,this.patternPositions=w}addImages(A,d,y){for(const w in A){const R=A[w],U={x:0,y:0,w:R.data.width+2*Ma,h:R.data.height+2*Ma};y.push(U),d[w]=new Fp(U,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(A,d){A.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in A.updatedImages)this.patchUpdatedImage(this.iconPositions[y],A.getImage(y),d),this.patchUpdatedImage(this.patternPositions[y],A.getImage(y),d)}patchUpdatedImage(A,d,y){if(!A||!d||A.version===d.version)return;A.version=d.version;const[w,R]=A.tl;y.update(d.data,void 0,{x:w,y:R})}}var NA;Mr("ImagePosition",Fp),Mr("ImageAtlas",t1),l.al=void 0,(NA=l.al||(l.al={}))[NA.none=0]="none",NA[NA.horizontal=1]="horizontal",NA[NA.vertical=2]="vertical",NA[NA.horizontalOnly=3]="horizontalOnly";const rp=-17;class Ph{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(A,d,y){const w=new Ph;return w.scale=A||1,w.fontStack=d,w.verticalAlign=y||"bottom",w}static forImage(A,d){const y=new Ph;return y.imageName=A,y.verticalAlign=d||"bottom",y}}class Ld{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(A,d){const y=new Ld;for(let w=0;w<A.sections.length;w++){const R=A.sections[w];R.image?y.addImageSection(R):y.addTextSection(R,d)}return y}length(){return this.text.length}getSection(A){return this.sections[this.sectionIndex[A]]}getSectionIndex(A){return this.sectionIndex[A]}getCharCode(A){return this.text.charCodeAt(A)}verticalizePunctuation(){this.text=function(A){let d="";for(let y=0;y<A.length;y++){const w=A.charCodeAt(y+1)||null,R=A.charCodeAt(y-1)||null;d+=w&&kc(w)&&!gm[A[y+1]]||R&&kc(R)&&!gm[A[y-1]]||!gm[A[y]]?A[y]:gm[A[y]]}return d}(this.text)}trim(){let A=0;for(let y=0;y<this.text.length&&Up[this.text.charCodeAt(y)];y++)A++;let d=this.text.length;for(let y=this.text.length-1;y>=0&&y>=A&&Up[this.text.charCodeAt(y)];y--)d--;this.text=this.text.substring(A,d),this.sectionIndex=this.sectionIndex.slice(A,d)}substring(A,d){const y=new Ld;return y.text=this.text.substring(A,d),y.sectionIndex=this.sectionIndex.slice(A,d),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((A,d)=>Math.max(A,this.sections[d].scale),0)}getMaxImageSize(A){let d=0,y=0;for(let w=0;w<this.length();w++){const R=this.getSection(w);if(R.imageName){const U=A[R.imageName];if(!U)continue;const j=U.displaySize;d=Math.max(d,j[0]),y=Math.max(y,j[1])}}return{maxImageWidth:d,maxImageHeight:y}}addTextSection(A,d){this.text+=A.text,this.sections.push(Ph.forText(A.scale,A.fontStack||d,A.verticalAlign));const y=this.sections.length-1;for(let w=0;w<A.text.length;++w)this.sectionIndex.push(y)}addImageSection(A){const d=A.image?A.image.name:"";if(d.length===0)return void gt("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(Ph.forImage(d,A.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):gt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lp(h,A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye){const et=Ld.fromFeature(h,w);let At;xe===l.al.vertical&&et.verticalizePunctuation();const{processBidirectionalText:yt,processStyledBidirectionalText:Wt}=jl;if(yt&&et.sections.length===1){At=[];const ot=yt(et.toString(),o0(et,re,R,A,y,ze));for(const Tt of ot){const dn=new Ld;dn.text=Tt,dn.sections=et.sections;for(let zn=0;zn<Tt.length;zn++)dn.sectionIndex.push(0);At.push(dn)}}else if(Wt){At=[];const ot=Wt(et.text,et.sectionIndex,o0(et,re,R,A,y,ze));for(const Tt of ot){const dn=new Ld;dn.text=Tt[0],dn.sectionIndex=Tt[1],dn.sections=et.sections,At.push(dn)}}else At=function(ot,Tt){const dn=[],zn=ot.text;let vn=0;for(const On of Tt)dn.push(ot.substring(vn,On)),vn=On;return vn<zn.length&&dn.push(ot.substring(vn,zn.length)),dn}(et,o0(et,re,R,A,y,ze));const St=[],De={positionedLines:St,text:et.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:xe,iconsInText:!1,verticalizable:!1};return function(ot,Tt,dn,zn,vn,On,er,Nn,sr,In,zr,xi){let hi=0,Hr=0,Do=0,ul=0;const CA=Nn==="right"?1:Nn==="left"?0:.5,Ku=Kl/xi;let Ru=0;for(const Ha of vn){Ha.trim();const WA=Ha.getMaxScale(),fu={positionedGlyphs:[],lineOffset:0};ot.positionedLines[Ru]=fu;const jA=fu.positionedGlyphs;let Zu=0;if(!Ha.length()){Hr+=On,++Ru;continue}const Dh=Xy(zn,Ha,Ku);for(let Wc=0;Wc<Ha.length();Wc++){const _A=Ha.getSection(Wc),QA=Ha.getSectionIndex(Wc),YA=Ha.getCharCode(Wc),Zl=s0(sr,zr,YA);let wa;if(_A.imageName){if(ot.iconsInText=!0,_A.scale=_A.scale*Ku,wa=J0(_A,Zl,WA,Dh,zn),!wa)continue;Zu=Math.max(Zu,wa.imageOffset)}else if(wa=_m(_A,YA,Zl,Dh,Tt,dn),!wa)continue;const{rect:Nd,metrics:c0,baselineOffset:Wd}=wa;jA.push({glyph:YA,imageName:_A.imageName,x:hi,y:Hr+Wd+rp,vertical:Zl,scale:_A.scale,fontStack:_A.fontStack,sectionIndex:QA,metrics:c0,rect:Nd}),Zl?(ot.verticalizable=!0,hi+=(_A.imageName?c0.advance:Kl)*_A.scale+In):hi+=c0.advance*_A.scale+In}jA.length!==0&&(Do=Math.max(hi-In,Do),a0(jA,0,jA.length-1,CA)),hi=0,fu.lineOffset=Math.max(Zu,(WA-1)*Kl);const GA=On*WA+Zu;Hr+=GA,ul=Math.max(GA,ul),++Ru}const{horizontalAlign:Nc,verticalAlign:du}=Cm(er);(function(Ha,WA,fu,jA,Zu,Dh,GA,Wc,_A){const QA=(WA-fu)*Zu;let YA=0;YA=Dh!==GA?-Wc*jA-rp:-jA*_A*GA+.5*GA;for(const Zl of Ha)for(const wa of Zl.positionedGlyphs)wa.x+=QA,wa.y+=YA})(ot.positionedLines,CA,Nc,du,Do,ul,On,Hr,vn.length),ot.top+=-du*Hr,ot.bottom=ot.top+Hr,ot.left+=-Nc*Do,ot.right=ot.left+Do}(De,A,d,y,At,U,j,X,xe,re,Fe,Ye),!function(ot){for(const Tt of ot)if(Tt.positionedGlyphs.length!==0)return!1;return!0}(St)&&De}const Up={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Zy={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},$0={40:!0};function n1(h,A,d,y,w,R){if(A.imageName){const U=y[A.imageName];return U?U.displaySize[0]*A.scale*Kl/R+w:0}{const U=d[A.fontStack],j=U&&U[h];return j?j.metrics.advance*A.scale+w:0}}function Z0(h,A,d,y){const w=Math.pow(h-A,2);return y?h<A?w/2:2*w:w+Math.abs(d)*d}function r1(h,A,d){let y=0;return h===10&&(y-=1e4),d&&(y+=150),h!==40&&h!==65288||(y+=50),A!==41&&A!==65289||(y+=50),y}function ym(h,A,d,y,w,R){let U=null,j=Z0(A,d,w,R);for(const X of y){const re=Z0(A-X.x,d,w,R)+X.badness;re<=j&&(U=X,j=re)}return{index:h,x:A,priorBreak:U,badness:j}}function vm(h){return h?vm(h.priorBreak).concat(h.index):[]}function o0(h,A,d,y,w,R){if(!h)return[];const U=[],j=function(xe,Fe,ze,Ye,et,At){let yt=0;for(let Wt=0;Wt<xe.length();Wt++){const St=xe.getSection(Wt);yt+=n1(xe.getCharCode(Wt),St,Ye,et,Fe,At)}return yt/Math.max(1,Math.ceil(yt/ze))}(h,A,d,y,w,R),X=h.text.indexOf("")>=0;let re=0;for(let xe=0;xe<h.length();xe++){const Fe=h.getSection(xe),ze=h.getCharCode(xe);if(Up[ze]||(re+=n1(ze,Fe,y,w,A,R)),xe<h.length()-1){const Ye=!((de=ze)<11904)&&(!!Fi["CJK Compatibility Forms"](de)||!!Fi["CJK Compatibility"](de)||!!Fi["CJK Strokes"](de)||!!Fi["CJK Symbols and Punctuation"](de)||!!Fi["Enclosed CJK Letters and Months"](de)||!!Fi["Halfwidth and Fullwidth Forms"](de)||!!Fi["Ideographic Description Characters"](de)||!!Fi["Vertical Forms"](de)||Ga.test(String.fromCodePoint(de)));(Zy[ze]||Ye||Fe.imageName||xe!==h.length()-2&&$0[h.getCharCode(xe+1)])&&U.push(ym(xe+1,re,j,U,r1(ze,h.getCharCode(xe+1),Ye&&X),!1))}}var de;return vm(ym(h.length(),re,j,U,0,!0))}function Cm(h){let A=.5,d=.5;switch(h){case"right":case"top-right":case"bottom-right":A=1;break;case"left":case"top-left":case"bottom-left":A=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:A,verticalAlign:d}}function Xy(h,A,d){const y=A.getMaxScale()*Kl,{maxImageWidth:w,maxImageHeight:R}=A.getMaxImageSize(h),U=Math.max(y,R*d);return{verticalLineContentWidth:Math.max(y,w*d),horizontalLineContentHeight:U}}function X0(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function s0(h,A,d){return!(h===l.al.horizontal||!A&&!ga(d)||A&&(Up[d]||(y=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function _m(h,A,d,y,w,R){const U=R[h.fontStack],j=function(re,de,xe,Fe){if(re&&re.rect)return re;const ze=de[xe.fontStack],Ye=ze&&ze[Fe];return Ye?{rect:null,metrics:Ye.metrics}:null}(U&&U[A],w,h,A);if(j===null)return null;let X;if(d)X=y.verticalLineContentWidth-h.scale*Kl;else{const re=X0(h.verticalAlign);X=(y.horizontalLineContentHeight-h.scale*Kl)*re}return{rect:j.rect,metrics:j.metrics,baselineOffset:X}}function J0(h,A,d,y,w){const R=w[h.imageName];if(!R)return null;const U=R.paddedRect,j=R.displaySize,X={width:j[0],height:j[1],left:Ma,top:-3,advance:A?j[1]:j[0]};let re;if(A)re=y.verticalLineContentWidth-j[1]*h.scale;else{const de=X0(h.verticalAlign);re=(y.horizontalLineContentHeight-j[1]*h.scale)*de}return{rect:U,metrics:X,baselineOffset:re,imageOffset:(A?j[0]:j[1])*h.scale-Kl*d}}function a0(h,A,d,y){if(y===0)return;const w=h[d],R=(h[d].x+w.metrics.advance*w.scale)*y;for(let U=A;U<=d;U++)h[U].x-=R}function i1(h,A,d){const{horizontalAlign:y,verticalAlign:w}=Cm(d),R=A[0]-h.displaySize[0]*y,U=A[1]-h.displaySize[1]*w;return{image:h,top:U,bottom:U+h.displaySize[1],left:R,right:R+h.displaySize[0]}}function o1(h){var A,d;let y=h.left,w=h.top,R=h.right-y,U=h.bottom-w;const j=(A=h.image.textFitWidth)!==null&&A!==void 0?A:"stretchOrShrink",X=(d=h.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",re=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(X==="proportional"){if(j==="stretchOnly"&&R/U<re||j==="proportional"){const de=Math.ceil(U*re);y*=de/R,R=de}}else if(j==="proportional"&&X==="stretchOnly"&&re!==0&&R/U>re){const de=Math.ceil(R/re);w*=de/U,U=de}return{x1:y,y1:w,x2:y+R,y2:w+U}}function xf(h,A,d,y,w,R){const U=h.image;let j;if(U.content){const At=U.content,yt=U.pixelRatio||1;j=[At[0]/yt,At[1]/yt,U.displaySize[0]-At[2]/yt,U.displaySize[1]-At[3]/yt]}const X=A.left*R,re=A.right*R;let de,xe,Fe,ze;d==="width"||d==="both"?(ze=w[0]+X-y[3],xe=w[0]+re+y[1]):(ze=w[0]+(X+re-U.displaySize[0])/2,xe=ze+U.displaySize[0]);const Ye=A.top*R,et=A.bottom*R;return d==="height"||d==="both"?(de=w[1]+Ye-y[0],Fe=w[1]+et+y[2]):(de=w[1]+(Ye+et-U.displaySize[1])/2,Fe=de+U.displaySize[1]),{image:U,top:de,right:xe,bottom:Fe,left:ze,collisionPadding:j}}const bm=255,pc=128,Mf=bm*pc;function xm(h,A){const{expression:d}=A;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Qo(h+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:w}=d;let R=0;for(;R<y.length&&y[R]<=h;)R++;R=Math.max(0,R-1);let U=R;for(;U<y.length&&y[U]<h+1;)U++;U=Math.min(y.length-1,U);const j=y[R],X=y[U];return d.kind==="composite"?{kind:"composite",minZoom:j,maxZoom:X,interpolationType:w}:{kind:"camera",minZoom:j,maxZoom:X,minSize:d.evaluate(new Qo(j)),maxSize:d.evaluate(new Qo(X)),interpolationType:w}}}function m(h,A,d){let y="never";const w=h.get(A);return w?y=w:h.get(d)&&(y="always"),y}const _=xa.VectorTileFeature.types,F=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Q(h,A,d,y,w,R,U,j,X,re,de,xe,Fe){const ze=j?Math.min(Mf,Math.round(j[0])):0,Ye=j?Math.min(Mf,Math.round(j[1])):0;h.emplaceBack(A,d,Math.round(32*y),Math.round(32*w),R,U,(ze<<1)+(X?1:0),Ye,16*re,16*de,256*xe,256*Fe)}function le(h,A,d){h.emplaceBack(A.x,A.y,d),h.emplaceBack(A.x,A.y,d),h.emplaceBack(A.x,A.y,d),h.emplaceBack(A.x,A.y,d)}function ve(h){for(const A of h.sections)if(uf(A.text))return!0;return!1}class tt{constructor(A){this.layoutVertexArray=new ln,this.indexArray=new Vn,this.programConfigurations=A,this.segments=new ci,this.dynamicLayoutVertexArray=new on,this.opacityVertexArray=new Cn,this.hasVisibleVertices=!1,this.placedSymbolArray=new se}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(A,d,y,w){this.isEmpty()||(y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,np.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,$g.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,F,!0),this.opacityVertexBuffer.itemSize=1),(y||w)&&this.programConfigurations.upload(A))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mr("SymbolBuffers",tt);class Ot{constructor(A,d,y){this.layoutVertexArray=new A,this.layoutAttributes=d,this.indexArray=new y,this.segments=new ci,this.collisionVertexArray=new ir}upload(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Zg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mr("CollisionBuffers",Ot);class jt{constructor(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(U=>U.id),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=xm(this.zoom,d["text-size"]),this.iconSizeData=xm(this.zoom,d["icon-size"]);const y=this.layers[0].layout,w=y.get("symbol-sort-key"),R=y.get("symbol-z-order");this.canOverlap=m(y,"text-overlap","text-allow-overlap")!=="never"||m(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(U=>l.al[U])),this.stateDependentLayerIds=this.layers.filter(U=>U.isStateDependent()).map(U=>U.id),this.sourceID=A.sourceID}createArrays(){this.text=new tt(new hc(this.layers,this.zoom,A=>/^text/.test(A))),this.icon=new tt(new hc(this.layers,this.zoom,A=>/^icon/.test(A))),this.glyphOffsetArray=new Ie,this.lineVertexArray=new Ge,this.symbolInstances=new Oe,this.textAnchorOffsets=new dt}calculateGlyphDependencies(A,d,y,w,R){for(let U=0;U<A.length;U++)if(d[A.charCodeAt(U)]=!0,(y||w)&&R){const j=gm[A.charAt(U)];j&&(d[j.charCodeAt(0)]=!0)}}populate(A,d,y){const w=this.layers[0],R=w.layout,U=R.get("text-font"),j=R.get("text-field"),X=R.get("icon-image"),re=(j.value.kind!=="constant"||j.value.value instanceof aa&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(U.value.kind!=="constant"||U.value.value.length>0),de=X.value.kind!=="constant"||!!X.value.value||Object.keys(X.parameters).length>0,xe=R.get("symbol-sort-key");if(this.features=[],!re&&!de)return;const Fe=d.iconDependencies,ze=d.glyphDependencies,Ye=d.availableImages,et=new Qo(this.zoom);for(const{feature:At,id:yt,index:Wt,sourceLayerIndex:St}of A){const De=w._featureFilter.needGeometry,ot=hu(At,De);if(!w._featureFilter.filter(et,ot,y))continue;let Tt,dn;if(De||(ot.geometry=cu(At)),re){const vn=w.getValueAndResolveTokens("text-field",ot,y,Ye),On=aa.factory(vn),er=this.hasRTLText=this.hasRTLText||ve(On);(!er||jl.getRTLTextPluginStatus()==="unavailable"||er&&jl.isParsed())&&(Tt=Vy(On,w,ot))}if(de){const vn=w.getValueAndResolveTokens("icon-image",ot,y,Ye);dn=vn instanceof Qi?vn:Qi.fromString(vn)}if(!Tt&&!dn)continue;const zn=this.sortFeaturesByKey?xe.evaluate(ot,{},y):void 0;if(this.features.push({id:yt,text:Tt,icon:dn,index:Wt,sourceLayerIndex:St,geometry:ot.geometry,properties:At.properties,type:_[At.type],sortKey:zn}),dn&&(Fe[dn.name]=!0),Tt){const vn=U.evaluate(ot,{},y).join(","),On=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.al.vertical)>=0;for(const er of Tt.sections)if(er.image)Fe[er.image.name]=!0;else{const Nn=Qu(Tt.toString()),sr=er.fontStack||vn,In=ze[sr]=ze[sr]||{};this.calculateGlyphDependencies(er.text,In,On,this.allowVerticalPlacement,Nn)}}}R.get("symbol-placement")==="line"&&(this.features=function(At){const yt={},Wt={},St=[];let De=0;function ot(vn){St.push(At[vn]),De++}function Tt(vn,On,er){const Nn=Wt[vn];return delete Wt[vn],Wt[On]=Nn,St[Nn].geometry[0].pop(),St[Nn].geometry[0]=St[Nn].geometry[0].concat(er[0]),Nn}function dn(vn,On,er){const Nn=yt[On];return delete yt[On],yt[vn]=Nn,St[Nn].geometry[0].shift(),St[Nn].geometry[0]=er[0].concat(St[Nn].geometry[0]),Nn}function zn(vn,On,er){const Nn=er?On[0][On[0].length-1]:On[0][0];return`${vn}:${Nn.x}:${Nn.y}`}for(let vn=0;vn<At.length;vn++){const On=At[vn],er=On.geometry,Nn=On.text?On.text.toString():null;if(!Nn){ot(vn);continue}const sr=zn(Nn,er),In=zn(Nn,er,!0);if(sr in Wt&&In in yt&&Wt[sr]!==yt[In]){const zr=dn(sr,In,er),xi=Tt(sr,In,St[zr].geometry);delete yt[sr],delete Wt[In],Wt[zn(Nn,St[xi].geometry,!0)]=xi,St[zr].geometry=null}else sr in Wt?Tt(sr,In,er):In in yt?dn(sr,In,er):(ot(vn),yt[sr]=De-1,Wt[In]=De-1)}return St.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,yt)=>At.sortKey-yt.sortKey)}update(A,d,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,d,this.layers,y),this.icon.programConfigurations.updatePaintArrays(A,d,this.layers,y))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(A,d){const y=this.lineVertexArray.length;if(A.segment!==void 0){let w=A.dist(d[A.segment+1]),R=A.dist(d[A.segment]);const U={};for(let j=A.segment+1;j<d.length;j++)U[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:w},j<d.length-1&&(w+=d[j+1].dist(d[j]));for(let j=A.segment||0;j>=0;j--)U[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:R},j>0&&(R+=d[j-1].dist(d[j]));for(let j=0;j<d.length;j++){const X=U[j];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(A,d,y,w,R,U,j,X,re,de,xe,Fe){const ze=A.indexArray,Ye=A.layoutVertexArray,et=A.segments.prepareSegment(4*d.length,Ye,ze,this.canOverlap?U.sortKey:void 0),At=this.glyphOffsetArray.length,yt=et.vertexLength,Wt=this.allowVerticalPlacement&&j===l.al.vertical?Math.PI/2:0,St=U.text&&U.text.sections;for(let De=0;De<d.length;De++){const{tl:ot,tr:Tt,bl:dn,br:zn,tex:vn,pixelOffsetTL:On,pixelOffsetBR:er,minFontScaleX:Nn,minFontScaleY:sr,glyphOffset:In,isSDF:zr,sectionIndex:xi}=d[De],hi=et.vertexLength,Hr=In[1];Q(Ye,X.x,X.y,ot.x,Hr+ot.y,vn.x,vn.y,y,zr,On.x,On.y,Nn,sr),Q(Ye,X.x,X.y,Tt.x,Hr+Tt.y,vn.x+vn.w,vn.y,y,zr,er.x,On.y,Nn,sr),Q(Ye,X.x,X.y,dn.x,Hr+dn.y,vn.x,vn.y+vn.h,y,zr,On.x,er.y,Nn,sr),Q(Ye,X.x,X.y,zn.x,Hr+zn.y,vn.x+vn.w,vn.y+vn.h,y,zr,er.x,er.y,Nn,sr),le(A.dynamicLayoutVertexArray,X,Wt),ze.emplaceBack(hi,hi+2,hi+1),ze.emplaceBack(hi+1,hi+2,hi+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(In[0]),De!==d.length-1&&xi===d[De+1].sectionIndex||A.programConfigurations.populatePaintArrays(Ye.length,U,U.index,{},Fe,St&&St[xi])}A.placedSymbolArray.emplaceBack(X.x,X.y,At,this.glyphOffsetArray.length-At,yt,re,de,X.segment,y?y[0]:0,y?y[1]:0,w[0],w[1],j,0,!1,0,xe)}_addCollisionDebugVertex(A,d,y,w,R,U){return d.emplaceBack(0,0),A.emplaceBack(y.x,y.y,w,R,Math.round(U.x),Math.round(U.y))}addCollisionDebugVertices(A,d,y,w,R,U,j){const X=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),re=X.vertexLength,de=R.layoutVertexArray,xe=R.collisionVertexArray,Fe=j.anchorX,ze=j.anchorY;this._addCollisionDebugVertex(de,xe,U,Fe,ze,new D(A,d)),this._addCollisionDebugVertex(de,xe,U,Fe,ze,new D(y,d)),this._addCollisionDebugVertex(de,xe,U,Fe,ze,new D(y,w)),this._addCollisionDebugVertex(de,xe,U,Fe,ze,new D(A,w)),X.vertexLength+=4;const Ye=R.indexArray;Ye.emplaceBack(re,re+1),Ye.emplaceBack(re+1,re+2),Ye.emplaceBack(re+2,re+3),Ye.emplaceBack(re+3,re),X.primitiveLength+=4}addDebugCollisionBoxes(A,d,y,w){for(let R=A;R<d;R++){const U=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(U.x1,U.y1,U.x2,U.y2,w?this.textCollisionBox:this.iconCollisionBox,U.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ot(Mn,e0.members,kn),this.iconCollisionBox=new Ot(Mn,e0.members,kn);for(let A=0;A<this.symbolInstances.length;A++){const d=this.symbolInstances.get(A);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(A,d,y,w,R,U,j,X,re){const de={};for(let xe=d;xe<y;xe++){const Fe=A.get(xe);de.textBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.textFeatureIndex=Fe.featureIndex;break}for(let xe=w;xe<R;xe++){const Fe=A.get(xe);de.verticalTextBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.verticalTextFeatureIndex=Fe.featureIndex;break}for(let xe=U;xe<j;xe++){const Fe=A.get(xe);de.iconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.iconFeatureIndex=Fe.featureIndex;break}for(let xe=X;xe<re;xe++){const Fe=A.get(xe);de.verticalIconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.verticalIconFeatureIndex=Fe.featureIndex;break}return de}deserializeCollisionBoxes(A){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const y=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(A,d){const y=A.placedSymbolArray.get(d),w=y.vertexStartIndex+4*y.numGlyphs;for(let R=y.vertexStartIndex;R<w;R+=4)A.indexArray.emplaceBack(R,R+2,R+1),A.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(A),y=Math.cos(A),w=[],R=[],U=[];for(let j=0;j<this.symbolInstances.length;++j){U.push(j);const X=this.symbolInstances.get(j);w.push(0|Math.round(d*X.anchorX+y*X.anchorY)),R.push(X.featureIndex)}return U.sort((j,X)=>w[j]-w[X]||R[X]-R[j]),U}addToSortKeyRanges(A,d){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===d?y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:A,symbolInstanceEnd:A+1})}sortFeatures(A){if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const y=this.symbolInstances.get(d);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((w,R,U)=>{w>=0&&U.indexOf(w)===R&&this.addIndicesForPlacedSymbol(this.text,w)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Sn,or;Mr("SymbolBucket",jt,{omit:["layers","collisionBoxArray","features","compareText"]}),jt.MAX_GLYPHS=65535,jt.addDynamicAttributes=le;var ur={get paint(){return or=or||new Ql({"icon-opacity":new Jr(Ee.paint_symbol["icon-opacity"]),"icon-color":new Jr(Ee.paint_symbol["icon-color"]),"icon-halo-color":new Jr(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jr(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jr(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new Qr(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qr(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jr(Ee.paint_symbol["text-opacity"]),"text-color":new Jr(Ee.paint_symbol["text-color"],{runtimeType:Cs,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Jr(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new Jr(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new Jr(Ee.paint_symbol["text-halo-blur"]),"text-translate":new Qr(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new Qr(Ee.paint_symbol["text-translate-anchor"])})},get layout(){return Sn=Sn||new Ql({"symbol-placement":new Qr(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new Qr(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qr(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jr(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qr(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qr(Ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qr(Ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qr(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qr(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qr(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jr(Ee.layout_symbol["icon-size"]),"icon-text-fit":new Qr(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qr(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jr(Ee.layout_symbol["icon-image"]),"icon-rotate":new Jr(Ee.layout_symbol["icon-rotate"]),"icon-padding":new Jr(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new Qr(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new Jr(Ee.layout_symbol["icon-offset"]),"icon-anchor":new Jr(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qr(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qr(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qr(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new Jr(Ee.layout_symbol["text-field"]),"text-font":new Jr(Ee.layout_symbol["text-font"]),"text-size":new Jr(Ee.layout_symbol["text-size"]),"text-max-width":new Jr(Ee.layout_symbol["text-max-width"]),"text-line-height":new Qr(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new Jr(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new Jr(Ee.layout_symbol["text-justify"]),"text-radial-offset":new Jr(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qr(Ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Jr(Ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Jr(Ee.layout_symbol["text-anchor"]),"text-max-angle":new Qr(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new Qr(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new Jr(Ee.layout_symbol["text-rotate"]),"text-padding":new Qr(Ee.layout_symbol["text-padding"]),"text-keep-upright":new Qr(Ee.layout_symbol["text-keep-upright"]),"text-transform":new Jr(Ee.layout_symbol["text-transform"]),"text-offset":new Jr(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new Qr(Ee.layout_symbol["text-allow-overlap"]),"text-overlap":new Qr(Ee.layout_symbol["text-overlap"]),"text-ignore-placement":new Qr(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new Qr(Ee.layout_symbol["text-optional"])})}};class tr{constructor(A){if(A.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=A.property.overrides?A.property.overrides.runtimeType:Fr,this.defaultValue=A}evaluate(A){if(A.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(A.formattedSection))return d.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default}eachChild(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mr("FormatSectionOverride",tr,{omit:["defaultValue"]});class Ur extends Yl{constructor(A){super(A,ur)}recalculate(A,d){if(super.recalculate(A,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const w=[];for(const R of y)w.indexOf(R)<0&&w.push(R);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(A,d,y,w){const R=this.layout.get(A).evaluate(d,{},y,w),U=this._unevaluatedLayout._values[A];return U.isDataDriven()||tu(U.value)||!R?R:function(j,X){return X.replace(/{([^{}]+)}/g,(re,de)=>j&&de in j?String(j[de]):"")}(d.properties,R)}createBucket(A){return new jt(A)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const A of ur.paint.overridableProperties){if(!Ur.hasPaintOverride(this.layout,A))continue;const d=this.paint.get(A),y=new tr(d),w=new Jc(y,d.property.specification);let R=null;R=d.value.kind==="constant"||d.value.kind==="source"?new nu("source",w):new sc("composite",w,d.value.zoomStops),this.paint._values[A]=new Qa(d.property,R,d.parameters)}}_handleOverridablePaintPropertyUpdate(A,d,y){return!(!this.layout||d.isDataDriven()||y.isDataDriven())&&Ur.hasPaintOverride(this.layout,A)}static hasPaintOverride(A,d){const y=A.get("text-field"),w=ur.paint.properties[d];let R=!1;const U=j=>{for(const X of j)if(w.overrides&&w.overrides.hasOverride(X))return void(R=!0)};if(y.value.kind==="constant"&&y.value.value instanceof aa)U(y.value.value.sections);else if(y.value.kind==="source"){const j=re=>{R||(re instanceof oA&&uo(re.value)===fs?U(re.value.sections):re instanceof yu?U(re.sections):re.eachChild(j))},X=y.value;X._styleExpression&&j(X._styleExpression.expression)}return R}}let ei;var ai={get paint(){return ei=ei||new Ql({"background-color":new Qr(Ee.paint_background["background-color"]),"background-pattern":new Eu(Ee.paint_background["background-pattern"]),"background-opacity":new Qr(Ee.paint_background["background-opacity"])})}};class Rl extends Yl{constructor(A){super(A,ai)}}let hn;var Xt={get paint(){return hn=hn||new Ql({"raster-opacity":new Qr(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qr(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qr(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qr(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new Qr(Ee.paint_raster["raster-saturation"]),"raster-contrast":new Qr(Ee.paint_raster["raster-contrast"]),"raster-resampling":new Qr(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new Qr(Ee.paint_raster["raster-fade-duration"])})}};class pn extends Yl{constructor(A){super(A,Xt)}}class vr extends Yl{constructor(A){super(A,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=A}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class gi{constructor(A){this._methodToThrottle=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Di={once:!0},Ti=63710088e-1;class Ki{constructor(A,d){if(isNaN(A)||isNaN(d))throw new Error(`Invalid LngLat object: (${A}, ${d})`);if(this.lng=+A,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ki(Ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(A){const d=Math.PI/180,y=this.lat*d,w=A.lat*d,R=Math.sin(y)*Math.sin(w)+Math.cos(y)*Math.cos(w)*Math.cos((A.lng-this.lng)*d);return Ti*Math.acos(Math.min(R,1))}static convert(A){if(A instanceof Ki)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Ki(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Ki(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const yA=2*Math.PI*Ti;function ys(h){return yA*Math.cos(h*Math.PI/180)}function Ud(h){return(180+h)/360}function s1(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function A_(h,A){return h/ys(A)}function Jy(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function u_(h,A){return h*ys(Jy(A))}class eg{constructor(A,d,y=0){this.x=+A,this.y=+d,this.z=+y}static fromLngLat(A,d=0){const y=Ki.convert(A);return new eg(Ud(y.lng),s1(y.lat),A_(d,y.lat))}toLngLat(){return new Ki(360*this.x-180,Jy(this.y))}toAltitude(){return u_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/yA*(A=Jy(this.y),1/Math.cos(A*Math.PI/180));var A}}function c_(h,A,d){var y=2*Math.PI*6378137/256/Math.pow(2,d);return[h*y-2*Math.PI*6378137/2,A*y-2*Math.PI*6378137/2]}class ev{constructor(A,d,y){if(!function(w,R,U){return!(w<0||w>25||U<0||U>=Math.pow(2,w)||R<0||R>=Math.pow(2,w))}(A,d,y))throw new Error(`x=${d}, y=${y}, z=${A} outside of bounds. 0<=x<${Math.pow(2,A)}, 0<=y<${Math.pow(2,A)} 0<=z<=25 `);this.z=A,this.x=d,this.y=y,this.key=mc(0,A,A,d,y)}equals(A){return this.z===A.z&&this.x===A.x&&this.y===A.y}url(A,d,y){const w=(U=this.y,j=this.z,X=c_(256*(R=this.x),256*(U=Math.pow(2,j)-U-1),j),re=c_(256*(R+1),256*(U+1),j),X[0]+","+X[1]+","+re[0]+","+re[1]);var R,U,j,X,re;const de=function(xe,Fe,ze){let Ye,et="";for(let At=xe;At>0;At--)Ye=1<<At-1,et+=(Fe&Ye?1:0)+(ze&Ye?2:0);return et}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,w)}isChildOf(A){const d=this.z-A.z;return d>0&&A.x===this.x>>d&&A.y===this.y>>d}getTilePoint(A){const d=Math.pow(2,this.z);return new D((A.x*d-this.x)*Ke,(A.y*d-this.y)*Ke)}toString(){return`${this.z}/${this.x}/${this.y}`}}class h_{constructor(A,d){this.wrap=A,this.canonical=d,this.key=mc(A,d.z,d.z,d.x,d.y)}}class Kh{constructor(A,d,y,w,R){if(this.terrainRttPosMatrix32f=null,A<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${A}; z = ${y}`);this.overscaledZ=A,this.wrap=d,this.canonical=new ev(y,+w,+R),this.key=mc(d,A,y,w,R)}clone(){return new Kh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)}scaledTo(A){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-A;return A>this.canonical.z?new Kh(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Kh(A,this.wrap,A,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(A,d){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-A;return A>this.canonical.z?mc(this.wrap*+d,A,this.canonical.z,this.canonical.x,this.canonical.y):mc(this.wrap*+d,A,A,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(A){if(A.wrap!==this.wrap)return!1;const d=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>d&&A.canonical.y===this.canonical.y>>d}children(A){if(this.overscaledZ>=A)return[new Kh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,y=2*this.canonical.x,w=2*this.canonical.y;return[new Kh(d,this.wrap,d,y,w),new Kh(d,this.wrap,d,y+1,w),new Kh(d,this.wrap,d,y,w+1),new Kh(d,this.wrap,d,y+1,w+1)]}isLessThan(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))}wrapped(){return new Kh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(A){return new Kh(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new h_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(A){return this.canonical.getTilePoint(new eg(A.x-this.wrap,A.y))}}function mc(h,A,d,y,w){(h*=2)<0&&(h=-1*h-1);const R=1<<d;return(R*R*h+R*w+y).toString(36)+d.toString(36)+A.toString(36)}Mr("CanonicalTileID",ev),Mr("OverscaledTileID",Kh,{omit:["terrainRttPosMatrix32f"]});class d_{constructor(A,d,y,w=1,R=1,U=1,j=0){if(this.uid=A,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void gt(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const X=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=R,this.blueFactor=U,this.baseShift=j;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let re=0;re<X;re++)this.data[this._idx(-1,re)]=this.data[this._idx(0,re)],this.data[this._idx(X,re)]=this.data[this._idx(X-1,re)],this.data[this._idx(re,-1)]=this.data[this._idx(re,0)],this.data[this._idx(re,X)]=this.data[this._idx(re,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let re=0;re<X;re++)for(let de=0;de<X;de++){const xe=this.get(re,de);xe>this.max&&(this.max=xe),xe<this.min&&(this.min=xe)}}get(A,d){const y=new Uint8Array(this.data.buffer),w=4*this._idx(A,d);return this.unpack(y[w],y[w+1],y[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(A,d){if(A<-1||A>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(A+1)}unpack(A,d,y){return A*this.redFactor+d*this.greenFactor+y*this.blueFactor-this.baseShift}getPixels(){return new Ia({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(A,d,y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");let w=d*this.dim,R=d*this.dim+this.dim,U=y*this.dim,j=y*this.dim+this.dim;switch(d){case-1:w=R-1;break;case 1:R=w+1}switch(y){case-1:U=j-1;break;case 1:j=U+1}const X=-d*this.dim,re=-y*this.dim;for(let de=U;de<j;de++)for(let xe=w;xe<R;xe++)this.data[this._idx(xe,de)]=A.data[this._idx(xe+X,de+re)]}}Mr("DEMData",d_);class f_{constructor(A){this._stringToNumber={},this._numberToString=[];for(let d=0;d<A.length;d++){const y=A[d];this._stringToNumber[y]=d,this._numberToString[d]=y}}encode(A){return this._stringToNumber[A]}decode(A){if(A>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${A} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[A]}}class zp{constructor(A,d,y,w,R){this.type="Feature",this._vectorTileFeature=A,A._z=d,A._x=y,A._y=w,this.properties=A.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(A){this._geometry=A}toJSON(){const A={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(A[d]=this[d]);return A}}class xo{constructor(A,d){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new kA(Ke,16,0),this.grid3D=new kA(Ke,16,0),this.featureIndexArray=new pt,this.promoteId=d}insert(A,d,y,w,R,U){const j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,w,R);const X=U?this.grid3D:this.grid;for(let re=0;re<d.length;re++){const de=d[re],xe=[1/0,1/0,-1/0,-1/0];for(let Fe=0;Fe<de.length;Fe++){const ze=de[Fe];xe[0]=Math.min(xe[0],ze.x),xe[1]=Math.min(xe[1],ze.y),xe[2]=Math.max(xe[2],ze.x),xe[3]=Math.max(xe[3],ze.y)}xe[0]<Ke&&xe[1]<Ke&&xe[2]>=0&&xe[3]>=0&&X.insert(j,xe[0],xe[1],xe[2],xe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new xa.VectorTile(new H0(this.rawTileData)).layers,this.sourceLayerCoder=new f_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(A,d,y,w){this.loadVTLayers();const R=A.params,U=Ke/A.tileSize/A.scale,j=ru(R.filter),X=A.queryGeometry,re=A.queryPadding*U,de=Lc(X),xe=this.grid.query(de.minX-re,de.minY-re,de.maxX+re,de.maxY+re),Fe=Lc(A.cameraQueryGeometry),ze=this.grid3D.query(Fe.minX-re,Fe.minY-re,Fe.maxX+re,Fe.maxY+re,(At,yt,Wt,St)=>function(De,ot,Tt,dn,zn){for(const On of De)if(ot<=On.x&&Tt<=On.y&&dn>=On.x&&zn>=On.y)return!0;const vn=[new D(ot,Tt),new D(ot,zn),new D(dn,zn),new D(dn,Tt)];if(De.length>2){for(const On of vn)if(Vu(De,On))return!0}for(let On=0;On<De.length-1;On++)if(Xf(De[On],De[On+1],vn))return!0;return!1}(A.cameraQueryGeometry,At-re,yt-re,Wt+re,St+re));for(const At of ze)xe.push(At);xe.sort(vA);const Ye={};let et;for(let At=0;At<xe.length;At++){const yt=xe[At];if(yt===et)continue;et=yt;const Wt=this.featureIndexArray.get(yt);let St=null;this.loadMatchingFeature(Ye,Wt.bucketIndex,Wt.sourceLayerIndex,Wt.featureIndex,j,R.layers,R.availableImages,d,y,w,(De,ot,Tt)=>(St||(St=cu(De)),ot.queryIntersectsFeature({queryGeometry:X,feature:De,featureState:Tt,geometry:St,zoom:this.z,transform:A.transform,pixelsToTileUnits:U,pixelPosMatrix:A.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:A.getElevation})))}return Ye}loadMatchingFeature(A,d,y,w,R,U,j,X,re,de,xe){const Fe=this.bucketLayerIDs[d];if(U&&!Fe.some(At=>U.has(At)))return;const ze=this.sourceLayerCoder.decode(y),Ye=this.vtLayers[ze].feature(w);if(R.needGeometry){const At=hu(Ye,!0);if(!R.filter(new Qo(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!R.filter(new Qo(this.tileID.overscaledZ),Ye))return;const et=this.getId(Ye,ze);for(let At=0;At<Fe.length;At++){const yt=Fe[At];if(U&&!U.has(yt))continue;const Wt=X[yt];if(!Wt)continue;let St={};et&&de&&(St=de.getState(Wt.sourceLayer||"_geojsonTileLayer",et));const De=kt({},re[yt]);De.paint=p_(De.paint,Wt.paint,Ye,St,j),De.layout=p_(De.layout,Wt.layout,Ye,St,j);const ot=!xe||xe(Ye,Wt,St);if(!ot)continue;const Tt=new zp(Ye,this.z,this.x,this.y,et);Tt.layer=De;let dn=A[yt];dn===void 0&&(dn=A[yt]=[]),dn.push({featureIndex:w,feature:Tt,intersectionZ:ot})}}lookupSymbolFeatures(A,d,y,w,R,U,j,X){const re={};this.loadVTLayers();const de=ru(R);for(const xe of A)this.loadMatchingFeature(re,y,w,xe,de,U,j,X,d);return re}hasLayer(A){for(const d of this.bucketLayerIDs)for(const y of d)if(A===y)return!0;return!1}getId(A,d){var y;let w=A.id;return this.promoteId&&(w=A.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((y=A.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(w=Number(A.properties.cluster_id))),w}}function p_(h,A,d,y,w){return Re(h,(R,U)=>{const j=A instanceof gl?A.get(U):null;return j&&j.evaluate?j.evaluate(d,y,w):j})}function Lc(h){let A=1/0,d=1/0,y=-1/0,w=-1/0;for(const R of h)A=Math.min(A,R.x),d=Math.min(d,R.y),y=Math.max(y,R.x),w=Math.max(w,R.y);return{minX:A,minY:d,maxX:y,maxY:w}}function vA(h,A){return A-h}function m_(h,A,d,y,w){const R=[];for(let U=0;U<h.length;U++){const j=h[U];let X;for(let re=0;re<j.length-1;re++){let de=j[re],xe=j[re+1];de.x<A&&xe.x<A||(de.x<A?de=new D(A,de.y+(A-de.x)/(xe.x-de.x)*(xe.y-de.y))._round():xe.x<A&&(xe=new D(A,de.y+(A-de.x)/(xe.x-de.x)*(xe.y-de.y))._round()),de.y<d&&xe.y<d||(de.y<d?de=new D(de.x+(d-de.y)/(xe.y-de.y)*(xe.x-de.x),d)._round():xe.y<d&&(xe=new D(de.x+(d-de.y)/(xe.y-de.y)*(xe.x-de.x),d)._round()),de.x>=y&&xe.x>=y||(de.x>=y?de=new D(y,de.y+(y-de.x)/(xe.x-de.x)*(xe.y-de.y))._round():xe.x>=y&&(xe=new D(y,de.y+(y-de.x)/(xe.x-de.x)*(xe.y-de.y))._round()),de.y>=w&&xe.y>=w||(de.y>=w?de=new D(de.x+(w-de.y)/(xe.y-de.y)*(xe.x-de.x),w)._round():xe.y>=w&&(xe=new D(de.x+(w-de.y)/(xe.y-de.y)*(xe.x-de.x),w)._round()),X&&de.equals(X[X.length-1])||(X=[de],R.push(X)),X.push(xe)))))}}return R}Mr("FeatureIndex",xo,{omit:["rawTileData","sourceLayerCoder"]});class Uc extends D{constructor(A,d,y,w){super(A,d),this.angle=y,w!==void 0&&(this.segment=w)}clone(){return new Uc(this.x,this.y,this.angle,this.segment)}}function g_(h,A,d,y,w){if(A.segment===void 0||d===0)return!0;let R=A,U=A.segment+1,j=0;for(;j>-d/2;){if(U--,U<0)return!1;j-=h[U].dist(R),R=h[U]}j+=h[U].dist(h[U+1]),U++;const X=[];let re=0;for(;j<d/2;){const de=h[U],xe=h[U+1];if(!xe)return!1;let Fe=h[U-1].angleTo(de)-de.angleTo(xe);for(Fe=Math.abs((Fe+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:j,angleDelta:Fe}),re+=Fe;j-X[0].distance>y;)re-=X.shift().angleDelta;if(re>w)return!1;U++,j+=de.dist(xe)}return!0}function y_(h){let A=0;for(let d=0;d<h.length-1;d++)A+=h[d].dist(h[d+1]);return A}function v_(h,A,d){return h?.6*A*d:0}function C_(h,A){return Math.max(h?h.right-h.left:0,A?A.right-A.left:0)}function u3(h,A,d,y,w,R){const U=v_(d,w,R),j=C_(d,y)*R;let X=0;const re=y_(h)/2;for(let de=0;de<h.length-1;de++){const xe=h[de],Fe=h[de+1],ze=xe.dist(Fe);if(X+ze>re){const Ye=(re-X)/ze,et=mi.number(xe.x,Fe.x,Ye),At=mi.number(xe.y,Fe.y,Ye),yt=new Uc(et,At,Fe.angleTo(xe),de);return yt._round(),!U||g_(h,yt,j,U,A)?yt:void 0}X+=ze}}function tv(h,A,d,y,w,R,U,j,X){const re=v_(y,R,U),de=C_(y,w),xe=de*U,Fe=h[0].x===0||h[0].x===X||h[0].y===0||h[0].y===X;return A-xe<A/4&&(A=xe+A/4),__(h,Fe?A/2*j%A:(de/2+2*R)*U*j%A,A,re,d,xe,Fe,!1,X)}function __(h,A,d,y,w,R,U,j,X){const re=R/2,de=y_(h);let xe=0,Fe=A-d,ze=[];for(let Ye=0;Ye<h.length-1;Ye++){const et=h[Ye],At=h[Ye+1],yt=et.dist(At),Wt=At.angleTo(et);for(;Fe+d<xe+yt;){Fe+=d;const St=(Fe-xe)/yt,De=mi.number(et.x,At.x,St),ot=mi.number(et.y,At.y,St);if(De>=0&&De<X&&ot>=0&&ot<X&&Fe-re>=0&&Fe+re<=de){const Tt=new Uc(De,ot,Wt,Ye);Tt._round(),y&&!g_(h,Tt,R,y,w)||ze.push(Tt)}}xe+=yt}return j||ze.length||U||(ze=__(h,xe/2,d,y,w,R,U,!0,X)),ze}Mr("Anchor",Uc);const Rh=Ma;function nv(h,A,d,y){const w=[],R=h.image,U=R.pixelRatio,j=R.paddedRect.w-2*Rh,X=R.paddedRect.h-2*Rh;let re={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const de=R.stretchX||[[0,j]],xe=R.stretchY||[[0,X]],Fe=(In,zr)=>In+zr[1]-zr[0],ze=de.reduce(Fe,0),Ye=xe.reduce(Fe,0),et=j-ze,At=X-Ye;let yt=0,Wt=ze,St=0,De=Ye,ot=0,Tt=et,dn=0,zn=At;if(R.content&&y){const In=R.content,zr=In[2]-In[0],xi=In[3]-In[1];(R.textFitWidth||R.textFitHeight)&&(re=o1(h)),yt=Mm(de,0,In[0]),St=Mm(xe,0,In[1]),Wt=Mm(de,In[0],In[2]),De=Mm(xe,In[1],In[3]),ot=In[0]-yt,dn=In[1]-St,Tt=zr-Wt,zn=xi-De}const vn=re.x1,On=re.y1,er=re.x2-vn,Nn=re.y2-On,sr=(In,zr,xi,hi)=>{const Hr=Al(In.stretch-yt,Wt,er,vn),Do=tg(In.fixed-ot,Tt,In.stretch,ze),ul=Al(zr.stretch-St,De,Nn,On),CA=tg(zr.fixed-dn,zn,zr.stretch,Ye),Ku=Al(xi.stretch-yt,Wt,er,vn),Ru=tg(xi.fixed-ot,Tt,xi.stretch,ze),Nc=Al(hi.stretch-St,De,Nn,On),du=tg(hi.fixed-dn,zn,hi.stretch,Ye),Ha=new D(Hr,ul),WA=new D(Ku,ul),fu=new D(Ku,Nc),jA=new D(Hr,Nc),Zu=new D(Do/U,CA/U),Dh=new D(Ru/U,du/U),GA=A*Math.PI/180;if(GA){const QA=Math.sin(GA),YA=Math.cos(GA),Zl=[YA,-QA,QA,YA];Ha._matMult(Zl),WA._matMult(Zl),jA._matMult(Zl),fu._matMult(Zl)}const Wc=In.stretch+In.fixed,_A=zr.stretch+zr.fixed;return{tl:Ha,tr:WA,bl:jA,br:fu,tex:{x:R.paddedRect.x+Rh+Wc,y:R.paddedRect.y+Rh+_A,w:xi.stretch+xi.fixed-Wc,h:hi.stretch+hi.fixed-_A},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zu,pixelOffsetBR:Dh,minFontScaleX:Tt/U/er,minFontScaleY:zn/U/Nn,isSDF:d}};if(y&&(R.stretchX||R.stretchY)){const In=vl(de,et,ze),zr=vl(xe,At,Ye);for(let xi=0;xi<In.length-1;xi++){const hi=In[xi],Hr=In[xi+1];for(let Do=0;Do<zr.length-1;Do++)w.push(sr(hi,zr[Do],Hr,zr[Do+1]))}}else w.push(sr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:j+1},{fixed:0,stretch:X+1}));return w}function Mm(h,A,d){let y=0;for(const w of h)y+=Math.max(A,Math.min(d,w[1]))-Math.max(A,Math.min(d,w[0]));return y}function vl(h,A,d){const y=[{fixed:-1,stretch:0}];for(const[w,R]of h){const U=y[y.length-1];y.push({fixed:w-U.stretch,stretch:U.stretch}),y.push({fixed:w-U.stretch,stretch:U.stretch+(R-w)})}return y.push({fixed:A+Rh,stretch:d}),y}function Al(h,A,d,y){return h/A*d+y}function tg(h,A,d,y){return h-A*d/y}class a1{constructor(A,d,y,w,R,U,j,X,re,de){var xe;if(this.boxStartIndex=A.length,re){let Fe=U.top,ze=U.bottom;const Ye=U.collisionPadding;Ye&&(Fe-=Ye[1],ze+=Ye[3]);let et=ze-Fe;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Fe=!((xe=U.image)===null||xe===void 0)&&xe.content&&(U.image.textFitWidth||U.image.textFitHeight)?o1(U):{x1:U.left,y1:U.top,x2:U.right,y2:U.bottom};Fe.y1=Fe.y1*j-X[0],Fe.y2=Fe.y2*j+X[2],Fe.x1=Fe.x1*j-X[3],Fe.x2=Fe.x2*j+X[1];const ze=U.collisionPadding;if(ze&&(Fe.x1-=ze[0]*j,Fe.y1-=ze[1]*j,Fe.x2+=ze[2]*j,Fe.y2+=ze[3]*j),de){const Ye=new D(Fe.x1,Fe.y1),et=new D(Fe.x2,Fe.y1),At=new D(Fe.x1,Fe.y2),yt=new D(Fe.x2,Fe.y2),Wt=de*Math.PI/180;Ye._rotate(Wt),et._rotate(Wt),At._rotate(Wt),yt._rotate(Wt),Fe.x1=Math.min(Ye.x,et.x,At.x,yt.x),Fe.x2=Math.max(Ye.x,et.x,At.x,yt.x),Fe.y1=Math.min(Ye.y,et.y,At.y,yt.y),Fe.y2=Math.max(Ye.y,et.y,At.y,yt.y)}A.emplaceBack(d.x,d.y,Fe.x1,Fe.y1,Fe.x2,Fe.y2,y,w,R)}this.boxEndIndex=A.length}}class c3{constructor(A=[],d=(y,w)=>y<w?-1:y>w?1:0){if(this.data=A,this.length=this.data.length,this.compare=d,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:d,compare:y}=this,w=d[A];for(;A>0;){const R=A-1>>1,U=d[R];if(y(w,U)>=0)break;d[A]=U,A=R}d[A]=w}_down(A){const{data:d,compare:y}=this,w=this.length>>1,R=d[A];for(;A<w;){let U=1+(A<<1);const j=U+1;if(j<this.length&&y(d[j],d[U])<0&&(U=j),y(d[U],R)>=0)break;d[A]=d[U],A=U}d[A]=R}}function h3(h,A=1,d=!1){let y=1/0,w=1/0,R=-1/0,U=-1/0;const j=h[0];for(let ze=0;ze<j.length;ze++){const Ye=j[ze];(!ze||Ye.x<y)&&(y=Ye.x),(!ze||Ye.y<w)&&(w=Ye.y),(!ze||Ye.x>R)&&(R=Ye.x),(!ze||Ye.y>U)&&(U=Ye.y)}const X=Math.min(R-y,U-w);let re=X/2;const de=new c3([],d3);if(X===0)return new D(y,w);for(let ze=y;ze<R;ze+=X)for(let Ye=w;Ye<U;Ye+=X)de.push(new l0(ze+re,Ye+re,re,h));let xe=function(ze){let Ye=0,et=0,At=0;const yt=ze[0];for(let Wt=0,St=yt.length,De=St-1;Wt<St;De=Wt++){const ot=yt[Wt],Tt=yt[De],dn=ot.x*Tt.y-Tt.x*ot.y;et+=(ot.x+Tt.x)*dn,At+=(ot.y+Tt.y)*dn,Ye+=3*dn}return new l0(et/Ye,At/Ye,0,ze)}(h),Fe=de.length;for(;de.length;){const ze=de.pop();(ze.d>xe.d||!xe.d)&&(xe=ze,d&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Fe)),ze.max-xe.d<=A||(re=ze.h/2,de.push(new l0(ze.p.x-re,ze.p.y-re,re,h)),de.push(new l0(ze.p.x+re,ze.p.y-re,re,h)),de.push(new l0(ze.p.x-re,ze.p.y+re,re,h)),de.push(new l0(ze.p.x+re,ze.p.y+re,re,h)),Fe+=4)}return d&&(console.log(`num probes: ${Fe}`),console.log(`best distance: ${xe.d}`)),xe.p}function d3(h,A){return A.max-h.max}function l0(h,A,d,y){this.p=new D(h,A),this.h=d,this.d=function(w,R){let U=!1,j=1/0;for(let X=0;X<R.length;X++){const re=R[X];for(let de=0,xe=re.length,Fe=xe-1;de<xe;Fe=de++){const ze=re[de],Ye=re[Fe];ze.y>w.y!=Ye.y>w.y&&w.x<(Ye.x-ze.x)*(w.y-ze.y)/(Ye.y-ze.y)+ze.x&&(U=!U),j=Math.min(j,kd(w,ze,Ye))}}return(U?1:-1)*Math.sqrt(j)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var Pu;l.aB=void 0,(Pu=l.aB||(l.aB={}))[Pu.center=1]="center",Pu[Pu.left=2]="left",Pu[Pu.right=3]="right",Pu[Pu.top=4]="top",Pu[Pu.bottom=5]="bottom",Pu[Pu["top-left"]=6]="top-left",Pu[Pu["top-right"]=7]="top-right",Pu[Pu["bottom-left"]=8]="bottom-left",Pu[Pu["bottom-right"]=9]="bottom-right";const ip=7,wm=Number.POSITIVE_INFINITY;function l1(h,A){return A[1]!==wm?function(d,y,w){let R=0,U=0;switch(y=Math.abs(y),w=Math.abs(w),d){case"top-right":case"top-left":case"top":U=w-ip;break;case"bottom-right":case"bottom-left":case"bottom":U=-w+ip}switch(d){case"top-right":case"bottom-right":case"right":R=-y;break;case"top-left":case"bottom-left":case"left":R=y}return[R,U]}(h,A[0],A[1]):function(d,y){let w=0,R=0;y<0&&(y=0);const U=y/Math.SQRT2;switch(d){case"top-right":case"top-left":R=U-ip;break;case"bottom-right":case"bottom-left":R=-U+ip;break;case"bottom":R=-y+ip;break;case"top":R=y-ip}switch(d){case"top-right":case"bottom-right":w=-U;break;case"top-left":case"bottom-left":w=U;break;case"left":w=y;break;case"right":w=-y}return[w,R]}(h,A[0])}function b_(h,A,d){var y;const w=h.layout,R=(y=w.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(A,{},d);if(R){const j=R.values,X=[];for(let re=0;re<j.length;re+=2){const de=X[re]=j[re],xe=j[re+1].map(Fe=>Fe*Kl);de.startsWith("top")?xe[1]-=ip:de.startsWith("bottom")&&(xe[1]+=ip),X[re+1]=xe}return new ns(X)}const U=w.get("text-variable-anchor");if(U){let j;j=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(A,{},d)*Kl,wm]:w.get("text-offset").evaluate(A,{},d).map(re=>re*Kl);const X=[];for(const re of U)X.push(re,l1(re,j));return new ns(X)}return null}function A1(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function u1(h,A,d,y,w,R,U,j,X,re,de,xe){let Fe=R.textMaxSize.evaluate(A,{});Fe===void 0&&(Fe=U);const ze=h.layers[0].layout,Ye=ze.get("icon-offset").evaluate(A,{},de),et=Sm(d.horizontal),At=U/24,yt=h.tilePixelRatio*At,Wt=h.tilePixelRatio*Fe/24,St=h.tilePixelRatio*j,De=h.tilePixelRatio*ze.get("symbol-spacing"),ot=ze.get("text-padding")*h.tilePixelRatio,Tt=function(xi,hi,Hr,Do=1){const ul=xi.get("icon-padding").evaluate(hi,{},Hr),CA=ul&&ul.values;return[CA[0]*Do,CA[1]*Do,CA[2]*Do,CA[3]*Do]}(ze,A,de,h.tilePixelRatio),dn=ze.get("text-max-angle")/180*Math.PI,zn=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",vn=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",On=ze.get("symbol-placement"),er=De/2,Nn=ze.get("icon-text-fit");let sr;y&&Nn!=="none"&&(h.allowVerticalPlacement&&d.vertical&&(sr=xf(y,d.vertical,Nn,ze.get("icon-text-fit-padding"),Ye,At)),et&&(y=xf(y,et,Nn,ze.get("icon-text-fit-padding"),Ye,At)));const In=de?xe.line.getGranularityForZoomLevel(de.z):1,zr=(xi,hi)=>{hi.x<0||hi.x>=Ke||hi.y<0||hi.y>=Ke||function(Hr,Do,ul,CA,Ku,Ru,Nc,du,Ha,WA,fu,jA,Zu,Dh,GA,Wc,_A,QA,YA,Zl,wa,Nd,c0,Wd,p3){const h0=Hr.addToLineVertexArray(Do,ul);let Em,d0,f0,p0,S_=0,E_=0,B_=0,O_=0,av=-1,lv=-1;const op={};let I_=ta("");if(Hr.allowVerticalPlacement&&CA.vertical){const Ju=du.layout.get("text-rotate").evaluate(wa,{},Wd)+90;f0=new a1(Ha,Do,WA,fu,jA,CA.vertical,Zu,Dh,GA,Ju),Nc&&(p0=new a1(Ha,Do,WA,fu,jA,Nc,_A,QA,GA,Ju))}if(Ku){const Ju=du.layout.get("icon-rotate").evaluate(wa,{}),jc=du.layout.get("icon-text-fit")!=="none",Bm=nv(Ku,Ju,c0,jc),Fh=Nc?nv(Nc,Ju,c0,jc):void 0;d0=new a1(Ha,Do,WA,fu,jA,Ku,_A,QA,!1,Ju),S_=4*Bm.length;const Om=Hr.iconSizeData;let wf=null;Om.kind==="source"?(wf=[pc*du.layout.get("icon-size").evaluate(wa,{})],wf[0]>Mf&&gt(`${Hr.layerIds[0]}: Value for "icon-size" is >= ${bm}. Reduce your "icon-size".`)):Om.kind==="composite"&&(wf=[pc*Nd.compositeIconSizes[0].evaluate(wa,{},Wd),pc*Nd.compositeIconSizes[1].evaluate(wa,{},Wd)],(wf[0]>Mf||wf[1]>Mf)&&gt(`${Hr.layerIds[0]}: Value for "icon-size" is >= ${bm}. Reduce your "icon-size".`)),Hr.addSymbols(Hr.icon,Bm,wf,Zl,YA,wa,l.al.none,Do,h0.lineStartIndex,h0.lineLength,-1,Wd),av=Hr.icon.placedSymbolArray.length-1,Fh&&(E_=4*Fh.length,Hr.addSymbols(Hr.icon,Fh,wf,Zl,YA,wa,l.al.vertical,Do,h0.lineStartIndex,h0.lineLength,-1,Wd),lv=Hr.icon.placedSymbolArray.length-1)}const h1=Object.keys(CA.horizontal);for(const Ju of h1){const jc=CA.horizontal[Ju];if(!Em){I_=ta(jc.text);const Fh=du.layout.get("text-rotate").evaluate(wa,{},Wd);Em=new a1(Ha,Do,WA,fu,jA,jc,Zu,Dh,GA,Fh)}const Bm=jc.positionedLines.length===1;if(B_+=uh(Hr,Do,jc,Ru,du,GA,wa,Wc,h0,CA.vertical?l.al.horizontal:l.al.horizontalOnly,Bm?h1:[Ju],op,av,Nd,Wd),Bm)break}CA.vertical&&(O_+=uh(Hr,Do,CA.vertical,Ru,du,GA,wa,Wc,h0,l.al.vertical,["vertical"],op,lv,Nd,Wd));const T_=Em?Em.boxStartIndex:Hr.collisionBoxArray.length,k_=Em?Em.boxEndIndex:Hr.collisionBoxArray.length,m3=f0?f0.boxStartIndex:Hr.collisionBoxArray.length,g3=f0?f0.boxEndIndex:Hr.collisionBoxArray.length,y3=d0?d0.boxStartIndex:Hr.collisionBoxArray.length,Av=d0?d0.boxEndIndex:Hr.collisionBoxArray.length,v3=p0?p0.boxStartIndex:Hr.collisionBoxArray.length,C3=p0?p0.boxEndIndex:Hr.collisionBoxArray.length;let jd=-1;const Xu=(Ju,jc)=>Ju&&Ju.circleDiameter?Math.max(Ju.circleDiameter,jc):jc;jd=Xu(Em,jd),jd=Xu(f0,jd),jd=Xu(d0,jd),jd=Xu(p0,jd);const d1=jd>-1?1:0;d1&&(jd*=p3/Kl),Hr.glyphOffsetArray.length>=jt.MAX_GLYPHS&&gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),wa.sortKey!==void 0&&Hr.addToSortKeyRanges(Hr.symbolInstances.length,wa.sortKey);const _3=b_(du,wa,Wd),[b3,x3]=function(Ju,jc){const Bm=Ju.length,Fh=jc==null?void 0:jc.values;if((Fh==null?void 0:Fh.length)>0)for(let Om=0;Om<Fh.length;Om+=2){const wf=Fh[Om+1];Ju.emplaceBack(l.aB[Fh[Om]],wf[0],wf[1])}return[Bm,Ju.length]}(Hr.textAnchorOffsets,_3);Hr.symbolInstances.emplaceBack(Do.x,Do.y,op.right>=0?op.right:-1,op.center>=0?op.center:-1,op.left>=0?op.left:-1,op.vertical||-1,av,lv,I_,T_,k_,m3,g3,y3,Av,v3,C3,WA,B_,O_,S_,E_,d1,0,Zu,jd,b3,x3)}(h,hi,xi,d,y,w,sr,h.layers[0],h.collisionBoxArray,A.index,A.sourceLayerIndex,h.index,yt,[ot,ot,ot,ot],zn,X,St,Tt,vn,Ye,A,R,re,de,U)};if(On==="line")for(const xi of m_(A.geometry,0,0,Ke,Ke)){const hi=kr(xi,In),Hr=tv(hi,De,dn,d.vertical||et,y,24,Wt,h.overscaling,Ke);for(const Do of Hr)et&&f3(h,et.text,er,Do)||zr(hi,Do)}else if(On==="line-center"){for(const xi of A.geometry)if(xi.length>1){const hi=kr(xi,In),Hr=u3(hi,dn,d.vertical||et,y,24,Wt);Hr&&zr(hi,Hr)}}else if(A.type==="Polygon")for(const xi of vh(A.geometry,0)){const hi=h3(xi,16);zr(kr(xi[0],In,!0),new Uc(hi.x,hi.y,0))}else if(A.type==="LineString")for(const xi of A.geometry){const hi=kr(xi,In);zr(hi,new Uc(hi[0].x,hi[0].y,0))}else if(A.type==="Point")for(const xi of A.geometry)for(const hi of xi)zr([hi],new Uc(hi.x,hi.y,0))}function uh(h,A,d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye){const et=function(Wt,St,De,ot,Tt,dn,zn,vn){const On=ot.layout.get("text-rotate").evaluate(dn,{})*Math.PI/180,er=[];for(const Nn of St.positionedLines)for(const sr of Nn.positionedGlyphs){if(!sr.rect)continue;const In=sr.rect||{};let zr=Jg+1,xi=!0,hi=1,Hr=0;const Do=(Tt||vn)&&sr.vertical,ul=sr.metrics.advance*sr.scale/2;if(vn&&St.verticalizable&&(Hr=Nn.lineOffset/2-(sr.imageName?-(Kl-sr.metrics.width*sr.scale)/2:(sr.scale-1)*Kl)),sr.imageName){const QA=zn[sr.imageName];xi=QA.sdf,hi=QA.pixelRatio,zr=Ma/hi}const CA=Tt?[sr.x+ul,sr.y]:[0,0];let Ku=Tt?[0,0]:[sr.x+ul+De[0],sr.y+De[1]-Hr],Ru=[0,0];Do&&(Ru=Ku,Ku=[0,0]);const Nc=sr.metrics.isDoubleResolution?2:1,du=(sr.metrics.left-zr)*sr.scale-ul+Ku[0],Ha=(-sr.metrics.top-zr)*sr.scale+Ku[1],WA=du+In.w/Nc*sr.scale/hi,fu=Ha+In.h/Nc*sr.scale/hi,jA=new D(du,Ha),Zu=new D(WA,Ha),Dh=new D(du,fu),GA=new D(WA,fu);if(Do){const QA=new D(-ul,ul-rp),YA=-Math.PI/2,Zl=Kl/2-ul,wa=new D(5-rp-Zl,-(sr.imageName?Zl:0)),Nd=new D(...Ru);jA._rotateAround(YA,QA)._add(wa)._add(Nd),Zu._rotateAround(YA,QA)._add(wa)._add(Nd),Dh._rotateAround(YA,QA)._add(wa)._add(Nd),GA._rotateAround(YA,QA)._add(wa)._add(Nd)}if(On){const QA=Math.sin(On),YA=Math.cos(On),Zl=[YA,-QA,QA,YA];jA._matMult(Zl),Zu._matMult(Zl),Dh._matMult(Zl),GA._matMult(Zl)}const Wc=new D(0,0),_A=new D(0,0);er.push({tl:jA,tr:Zu,bl:Dh,br:GA,tex:In,writingMode:St.writingMode,glyphOffset:CA,sectionIndex:sr.sectionIndex,isSDF:xi,pixelOffsetTL:Wc,pixelOffsetBR:_A,minFontScaleX:0,minFontScaleY:0})}return er}(0,d,j,w,R,U,y,h.allowVerticalPlacement),At=h.textSizeData;let yt=null;At.kind==="source"?(yt=[pc*w.layout.get("text-size").evaluate(U,{})],yt[0]>Mf&&gt(`${h.layerIds[0]}: Value for "text-size" is >= ${bm}. Reduce your "text-size".`)):At.kind==="composite"&&(yt=[pc*ze.compositeTextSizes[0].evaluate(U,{},Ye),pc*ze.compositeTextSizes[1].evaluate(U,{},Ye)],(yt[0]>Mf||yt[1]>Mf)&&gt(`${h.layerIds[0]}: Value for "text-size" is >= ${bm}. Reduce your "text-size".`)),h.addSymbols(h.text,et,yt,j,R,U,re,A,X.lineStartIndex,X.lineLength,Fe,Ye);for(const Wt of de)xe[Wt]=h.text.placedSymbolArray.length-1;return 4*et.length}function Sm(h){for(const A in h)return h[A];return null}function f3(h,A,d,y){const w=h.compareText;if(A in w){const R=w[A];for(let U=R.length-1;U>=0;U--)if(y.dist(R[U])<d)return!0}else w[A]=[];return w[A].push(y),!1}const x_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class rv{static from(A){if(!(A instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,y]=new Uint8Array(A,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=y>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const R=x_[15&y];if(!R)throw new Error("Unrecognized array type.");const[U]=new Uint16Array(A,2,1),[j]=new Uint32Array(A,4,1);return new rv(j,U,R,A)}constructor(A,d=64,y=Float64Array,w){if(isNaN(A)||A<0)throw new Error(`Unpexpected numItems value: ${A}.`);this.numItems=+A,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=y,this.IndexArrayType=A<65536?Uint16Array:Uint32Array;const R=x_.indexOf(this.ArrayType),U=2*A*this.ArrayType.BYTES_PER_ELEMENT,j=A*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-j%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${y}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+j+X,2*A),this._pos=2*A,this._finished=!0):(this.data=new ArrayBuffer(8+U+j+X),this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+j+X,2*A),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=A)}add(A,d){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=A,this.coords[this._pos++]=d,y}finish(){const A=this._pos>>1;if(A!==this.numItems)throw new Error(`Added ${A} items when expected ${this.numItems}.`);return iv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(A,d,y,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:U,nodeSize:j}=this,X=[0,R.length-1,0],re=[];for(;X.length;){const de=X.pop()||0,xe=X.pop()||0,Fe=X.pop()||0;if(xe-Fe<=j){for(let At=Fe;At<=xe;At++){const yt=U[2*At],Wt=U[2*At+1];yt>=A&&yt<=y&&Wt>=d&&Wt<=w&&re.push(R[At])}continue}const ze=Fe+xe>>1,Ye=U[2*ze],et=U[2*ze+1];Ye>=A&&Ye<=y&&et>=d&&et<=w&&re.push(R[ze]),(de===0?A<=Ye:d<=et)&&(X.push(Fe),X.push(ze-1),X.push(1-de)),(de===0?y>=Ye:w>=et)&&(X.push(ze+1),X.push(xe),X.push(1-de))}return re}within(A,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:R,nodeSize:U}=this,j=[0,w.length-1,0],X=[],re=y*y;for(;j.length;){const de=j.pop()||0,xe=j.pop()||0,Fe=j.pop()||0;if(xe-Fe<=U){for(let At=Fe;At<=xe;At++)To(R[2*At],R[2*At+1],A,d)<=re&&X.push(w[At]);continue}const ze=Fe+xe>>1,Ye=R[2*ze],et=R[2*ze+1];To(Ye,et,A,d)<=re&&X.push(w[ze]),(de===0?A-y<=Ye:d-y<=et)&&(j.push(Fe),j.push(ze-1),j.push(1-de)),(de===0?A+y>=Ye:d+y>=et)&&(j.push(ze+1),j.push(xe),j.push(1-de))}return X}}function iv(h,A,d,y,w,R){if(w-y<=d)return;const U=y+w>>1;M_(h,A,U,y,w,R),iv(h,A,d,y,U-1,1-R),iv(h,A,d,U+1,w,1-R)}function M_(h,A,d,y,w,R){for(;w>y;){if(w-y>600){const re=w-y+1,de=d-y+1,xe=Math.log(re),Fe=.5*Math.exp(2*xe/3),ze=.5*Math.sqrt(xe*Fe*(re-Fe)/re)*(de-re/2<0?-1:1);M_(h,A,d,Math.max(y,Math.floor(d-de*Fe/re+ze)),Math.min(w,Math.floor(d+(re-de)*Fe/re+ze)),R)}const U=A[2*d+R];let j=y,X=w;for(A0(h,A,y,d),A[2*w+R]>U&&A0(h,A,y,w);j<X;){for(A0(h,A,j,X),j++,X--;A[2*j+R]<U;)j++;for(;A[2*X+R]>U;)X--}A[2*y+R]===U?A0(h,A,y,X):(X++,A0(h,A,X,w)),X<=d&&(y=X+1),d<=X&&(w=X-1)}}function A0(h,A,d,y){zd(h,d,y),zd(A,2*d,2*y),zd(A,2*d+1,2*y+1)}function zd(h,A,d){const y=h[A];h[A]=h[d],h[d]=y}function To(h,A,d,y){const w=h-d,R=A-y;return w*w+R*R}var c1;l.cm=void 0,(c1=l.cm||(l.cm={})).create="create",c1.load="load",c1.fullLoad="fullLoad";let zc=null,u0=[];const ov=1e3/60,Us="loadTime",sv="fullLoadTime",w_={mark(h){performance.mark(h)},frame(h){const A=h;zc!=null&&u0.push(A-zc),zc=A},clearMetrics(){zc=null,u0=[],performance.clearMeasures(Us),performance.clearMeasures(sv);for(const h in l.cm)performance.clearMarks(l.cm[h])},getPerformanceMetrics(){performance.measure(Us,l.cm.create,l.cm.load),performance.measure(sv,l.cm.create,l.cm.fullLoad);const h=performance.getEntriesByName(Us)[0].duration,A=performance.getEntriesByName(sv)[0].duration,d=u0.length,y=1/(u0.reduce((R,U)=>R+U,0)/d/1e3),w=u0.filter(R=>R>ov).reduce((R,U)=>R+(U-ov)/ov,0);return{loadTime:h,fullLoadTime:A,fps:y,percentDroppedFrames:w/(d+w)*100,totalFrames:d}}};l.$=eg,l.A=te,l.B=mi,l.C=Qo,l.D=Qr,l.E=Qe,l.F=Sl,l.G=function(h){if(Rt==null){const A=h.navigator?h.navigator.userAgent:null;Rt=!!h.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return Rt},l.H=class{constructor(h,A){this.target=h,this.mapId=A,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new gi(()=>this.process()),this.subscription=an(this.target,"message",d=>this.receive(d),!1),this.globalScope=$t(self)?h:window}registerMessageHandler(h,A){this.messageHandlers[h]=A}sendAsync(h,A){return new Promise((d,y)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=A?an(A.signal,"abort",()=>{R==null||R.unsubscribe(),delete this.resolveRejects[w];const X={id:w,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(X)},Di):null;this.resolveRejects[w]={resolve:X=>{R==null||R.unsubscribe(),d(X)},reject:X=>{R==null||R.unsubscribe(),y(X)}};const U=[],j=Object.assign(Object.assign({},h),{id:w,sourceMapId:this.mapId,origin:location.origin,data:rh(h.data,U)});this.target.postMessage(j,{transfer:U})})}receive(h){const A=h.data,d=A.id;if(!(A.origin!=="file://"&&location.origin!=="file://"&&A.origin!=="resource://android"&&location.origin!=="resource://android"&&A.origin!==location.origin||A.targetMapId&&this.mapId!==A.targetMapId)){if(A.type==="<cancel>"){delete this.tasks[d];const y=this.abortControllers[d];return delete this.abortControllers[d],void(y&&y.abort())}if($t(self)||A.mustQueue)return this.tasks[d]=A,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,A)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),A=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),A&&this.processTask(h,A)}processTask(h,A){return o(this,void 0,void 0,function*(){if(A.type==="<response>"){const w=this.resolveRejects[h];return delete this.resolveRejects[h],w?void(A.error?w.reject(Su(A.error)):w.resolve(Su(A.data))):void 0}if(!this.messageHandlers[A.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${A.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Su(A.data),y=new AbortController;this.abortControllers[h]=y;try{const w=yield this.messageHandlers[A.type](A.sourceMapId,d,y);this.completeTask(h,null,w)}catch(w){this.completeTask(h,w)}})}completeTask(h,A,d){const y=[];delete this.abortControllers[h];const w={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:A?rh(A):null,data:rh(d,y)};this.target.postMessage(w,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=Fp,l.J=rt,l.K=function(){var h=new te(16);return te!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},l.L=function(h,A,d){var y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et=d[0],At=d[1],yt=d[2];return A===h?(h[12]=A[0]*et+A[4]*At+A[8]*yt+A[12],h[13]=A[1]*et+A[5]*At+A[9]*yt+A[13],h[14]=A[2]*et+A[6]*At+A[10]*yt+A[14],h[15]=A[3]*et+A[7]*At+A[11]*yt+A[15]):(w=A[1],R=A[2],U=A[3],j=A[4],X=A[5],re=A[6],de=A[7],xe=A[8],Fe=A[9],ze=A[10],Ye=A[11],h[0]=y=A[0],h[1]=w,h[2]=R,h[3]=U,h[4]=j,h[5]=X,h[6]=re,h[7]=de,h[8]=xe,h[9]=Fe,h[10]=ze,h[11]=Ye,h[12]=y*et+j*At+xe*yt+A[12],h[13]=w*et+X*At+Fe*yt+A[13],h[14]=R*et+re*At+ze*yt+A[14],h[15]=U*et+de*At+Ye*yt+A[15]),h},l.M=function(h,A,d){var y=d[0],w=d[1],R=d[2];return h[0]=A[0]*y,h[1]=A[1]*y,h[2]=A[2]*y,h[3]=A[3]*y,h[4]=A[4]*w,h[5]=A[5]*w,h[6]=A[6]*w,h[7]=A[7]*w,h[8]=A[8]*R,h[9]=A[9]*R,h[10]=A[10]*R,h[11]=A[11]*R,h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15],h},l.N=function(h,A,d){var y=A[0],w=A[1],R=A[2],U=A[3],j=A[4],X=A[5],re=A[6],de=A[7],xe=A[8],Fe=A[9],ze=A[10],Ye=A[11],et=A[12],At=A[13],yt=A[14],Wt=A[15],St=d[0],De=d[1],ot=d[2],Tt=d[3];return h[0]=St*y+De*j+ot*xe+Tt*et,h[1]=St*w+De*X+ot*Fe+Tt*At,h[2]=St*R+De*re+ot*ze+Tt*yt,h[3]=St*U+De*de+ot*Ye+Tt*Wt,h[4]=(St=d[4])*y+(De=d[5])*j+(ot=d[6])*xe+(Tt=d[7])*et,h[5]=St*w+De*X+ot*Fe+Tt*At,h[6]=St*R+De*re+ot*ze+Tt*yt,h[7]=St*U+De*de+ot*Ye+Tt*Wt,h[8]=(St=d[8])*y+(De=d[9])*j+(ot=d[10])*xe+(Tt=d[11])*et,h[9]=St*w+De*X+ot*Fe+Tt*At,h[10]=St*R+De*re+ot*ze+Tt*yt,h[11]=St*U+De*de+ot*Ye+Tt*Wt,h[12]=(St=d[12])*y+(De=d[13])*j+(ot=d[14])*xe+(Tt=d[15])*et,h[13]=St*w+De*X+ot*Fe+Tt*At,h[14]=St*R+De*re+ot*ze+Tt*yt,h[15]=St*U+De*de+ot*Ye+Tt*Wt,h},l.O=function(h,A){const d={};for(let y=0;y<A.length;y++){const w=A[y];w in h&&(d[w]=h[w])}return d},l.P=D,l.Q=Ki,l.R=Ia,l.S=s1,l.T=ws,l.U=Ud,l.V=ie,l.W=ne,l.X=nn,l.Y=Kh,l.Z=Ke,l._=o,l.a=ce,l.a$=function(h,A,d){var y=Math.sin(d),w=Math.cos(d),R=A[4],U=A[5],j=A[6],X=A[7],re=A[8],de=A[9],xe=A[10],Fe=A[11];return A!==h&&(h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[4]=R*w+re*y,h[5]=U*w+de*y,h[6]=j*w+xe*y,h[7]=X*w+Fe*y,h[8]=re*w-R*y,h[9]=de*w-U*y,h[10]=xe*w-j*y,h[11]=Fe*w-X*y,h},l.a0=25,l.a1=ev,l.a2=h=>{const A=window.document.createElement("video");return A.muted=!0,new Promise(d=>{A.onloadstart=()=>{d(A)};for(const y of h){const w=window.document.createElement("source");Jn(y)||(A.crossOrigin="Anonymous"),w.src=y,A.appendChild(w)}})},l.a3=Jt,l.a4=function(){return Te++},l.a5=Y,l.a6=jt,l.a7=ru,l.a8=hu,l.a9=zp,l.aA=function(h,A,d,y,w=!1){if(!d[0]&&!d[1])return[0,0];const R=w?y==="map"?-h.bearingInRadians:0:y==="viewport"?h.bearingInRadians:0;if(R){const U=Math.sin(R),j=Math.cos(R);d=[d[0]*j-d[1]*U,d[0]*U+d[1]*j]}return[w?d[0]:je(A,d[0],h.zoom),w?d[1]:je(A,d[1],h.zoom)]},l.aC=m,l.aD=A1,l.aE=Cm,l.aF=rv,l.aG=Is,l.aH=$n,l.aI=bt,l.aJ=ci,l.aK=Vn,l.aL=Ut,l.aM=Bn,l.aN=u_,l.aO=function(h,A,d){return h[0]=A[0]*d,h[1]=A[1]*d,h[2]=A[2]*d,h},l.aP=function(h,A,d){return h[0]=A[0]+d[0],h[1]=A[1]+d[1],h[2]=A[2]+d[2],h},l.aQ=function(h){var A=new te(3);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A},l.aR=function(h,A,d){return h[0]=A[0]*d[0],h[1]=A[1]*d[1],h[2]=A[2]*d[2],h[3]=A[3]*d[3],h},l.aS=function(h,A,d){return h[0]=A[0]-d[0],h[1]=A[1]-d[1],h[2]=A[2]-d[2],h},l.aT=function(h,A){var d=A[0],y=A[1],w=A[2],R=d*d+y*y+w*w;return R>0&&(R=1/Math.sqrt(R)),h[0]=A[0]*R,h[1]=A[1]*R,h[2]=A[2]*R,h},l.aU=function(h,A,d){var y=A[0],w=A[1],R=A[2],U=d[0],j=d[1],X=d[2];return h[0]=w*X-R*j,h[1]=R*U-y*X,h[2]=y*j-w*U,h},l.aV=function(h,A){return h[0]*A[0]+h[1]*A[1]+h[2]*A[2]},l.aW=h_,l.aX=mc,l.aY=function(h,A,d,y,w){var R,U=1/Math.tan(A/2);return h[0]=U/d,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=U,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,w!=null&&w!==1/0?(h[10]=(w+y)*(R=1/(y-w)),h[14]=2*w*y*R):(h[10]=-1,h[14]=-2*y),h},l.aZ=function(h){var A=new te(16);return A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3],A[4]=h[4],A[5]=h[5],A[6]=h[6],A[7]=h[7],A[8]=h[8],A[9]=h[9],A[10]=h[10],A[11]=h[11],A[12]=h[12],A[13]=h[13],A[14]=h[14],A[15]=h[15],A},l.a_=function(h,A,d){var y=Math.sin(d),w=Math.cos(d),R=A[0],U=A[1],j=A[2],X=A[3],re=A[4],de=A[5],xe=A[6],Fe=A[7];return A!==h&&(h[8]=A[8],h[9]=A[9],h[10]=A[10],h[11]=A[11],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[0]=R*w+re*y,h[1]=U*w+de*y,h[2]=j*w+xe*y,h[3]=X*w+Fe*y,h[4]=re*w-R*y,h[5]=de*w-U*y,h[6]=xe*w-j*y,h[7]=Fe*w-X*y,h},l.aa=function(h){const A={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,y,w,R)=>{const U=w||R;return A[y]=!U||U.toLowerCase(),""}),A["max-age"]){const d=parseInt(A["max-age"],10);isNaN(d)?delete A["max-age"]:A["max-age"]=d}return A},l.ab=function(h){return h*Math.PI/180},l.ac=function(h){return Math.pow(2,h)},l.ad=oe,l.ae=mt,l.af=85.051129,l.ag=A_,l.ah=function(h){return Math.log(h)/Math.LN2},l.ai=function(h){var A=h[0],d=h[1];return A*A+d*d},l.aj=function(h,A){const d=[];for(const y in h)y in A||d.push(y);return d},l.ak=function(h,A){let d=0,y=0;if(h.kind==="constant")y=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:w,minZoom:R,maxZoom:U}=h,j=w?mt(Ri.interpolationFactor(w,A,R,U),0,1):0;h.kind==="camera"?y=mi.number(h.minSize,h.maxSize,j):d=j}return{uSizeT:d,uSize:y}},l.am=function(h,{uSize:A,uSizeT:d},{lowerSize:y,upperSize:w}){return h.kind==="source"?y/pc:h.kind==="composite"?mi.number(y/pc,w/pc,d):A},l.an=function(h,A){var d=A[0],y=A[1],w=A[2],R=A[3],U=A[4],j=A[5],X=A[6],re=A[7],de=A[8],xe=A[9],Fe=A[10],ze=A[11],Ye=A[12],et=A[13],At=A[14],yt=A[15],Wt=d*j-y*U,St=d*X-w*U,De=d*re-R*U,ot=y*X-w*j,Tt=y*re-R*j,dn=w*re-R*X,zn=de*et-xe*Ye,vn=de*At-Fe*Ye,On=de*yt-ze*Ye,er=xe*At-Fe*et,Nn=xe*yt-ze*et,sr=Fe*yt-ze*At,In=Wt*sr-St*Nn+De*er+ot*On-Tt*vn+dn*zn;return In?(h[0]=(j*sr-X*Nn+re*er)*(In=1/In),h[1]=(w*Nn-y*sr-R*er)*In,h[2]=(et*dn-At*Tt+yt*ot)*In,h[3]=(Fe*Tt-xe*dn-ze*ot)*In,h[4]=(X*On-U*sr-re*vn)*In,h[5]=(d*sr-w*On+R*vn)*In,h[6]=(At*De-Ye*dn-yt*St)*In,h[7]=(de*dn-Fe*De+ze*St)*In,h[8]=(U*Nn-j*On+re*zn)*In,h[9]=(y*On-d*Nn-R*zn)*In,h[10]=(Ye*Tt-et*De+yt*Wt)*In,h[11]=(xe*De-de*Tt-ze*Wt)*In,h[12]=(j*vn-U*er-X*zn)*In,h[13]=(d*er-y*vn+w*zn)*In,h[14]=(et*St-Ye*ot-At*Wt)*In,h[15]=(de*ot-xe*St+Fe*Wt)*In,h):null},l.ao=vt,l.ap=function(h){return Math.hypot(h[0],h[1])},l.aq=function(h){return h[0]=0,h[1]=0,h},l.ar=function(h,A,d){return h[0]=A[0]*d,h[1]=A[1]*d,h},l.as=le,l.at=qe,l.au=function(h,A,d,y){const w=A.y-h.y,R=A.x-h.x,U=y.y-d.y,j=y.x-d.x,X=U*R-j*w;if(X===0)return null;const re=(j*(h.y-d.y)-U*(h.x-d.x))/X;return new D(h.x+re*R,h.y+re*w)},l.av=m_,l.aw=Sh,l.ax=function(h){let A=1/0,d=1/0,y=-1/0,w=-1/0;for(const R of h)A=Math.min(A,R.x),d=Math.min(d,R.y),y=Math.max(y,R.x),w=Math.max(w,R.y);return[A,d,y,w]},l.ay=Kl,l.az=je,l.b=_n,l.b$=function(h,A){var d=h[0],y=h[1],w=h[2],R=h[3],U=h[4],j=h[5],X=h[6],re=h[7],de=h[8],xe=h[9],Fe=h[10],ze=h[11],Ye=h[12],et=h[13],At=h[14],yt=h[15],Wt=A[0],St=A[1],De=A[2],ot=A[3],Tt=A[4],dn=A[5],zn=A[6],vn=A[7],On=A[8],er=A[9],Nn=A[10],sr=A[11],In=A[12],zr=A[13],xi=A[14],hi=A[15];return Math.abs(d-Wt)<=q*Math.max(1,Math.abs(d),Math.abs(Wt))&&Math.abs(y-St)<=q*Math.max(1,Math.abs(y),Math.abs(St))&&Math.abs(w-De)<=q*Math.max(1,Math.abs(w),Math.abs(De))&&Math.abs(R-ot)<=q*Math.max(1,Math.abs(R),Math.abs(ot))&&Math.abs(U-Tt)<=q*Math.max(1,Math.abs(U),Math.abs(Tt))&&Math.abs(j-dn)<=q*Math.max(1,Math.abs(j),Math.abs(dn))&&Math.abs(X-zn)<=q*Math.max(1,Math.abs(X),Math.abs(zn))&&Math.abs(re-vn)<=q*Math.max(1,Math.abs(re),Math.abs(vn))&&Math.abs(de-On)<=q*Math.max(1,Math.abs(de),Math.abs(On))&&Math.abs(xe-er)<=q*Math.max(1,Math.abs(xe),Math.abs(er))&&Math.abs(Fe-Nn)<=q*Math.max(1,Math.abs(Fe),Math.abs(Nn))&&Math.abs(ze-sr)<=q*Math.max(1,Math.abs(ze),Math.abs(sr))&&Math.abs(Ye-In)<=q*Math.max(1,Math.abs(Ye),Math.abs(In))&&Math.abs(et-zr)<=q*Math.max(1,Math.abs(et),Math.abs(zr))&&Math.abs(At-xi)<=q*Math.max(1,Math.abs(At),Math.abs(xi))&&Math.abs(yt-hi)<=q*Math.max(1,Math.abs(yt),Math.abs(hi))},l.b0=function(){const h=new Float32Array(16);return oe(h),h},l.b1=function(){const h=new Float64Array(16);return oe(h),h},l.b2=function(){return new Float64Array(16)},l.b3=function(h,A,d){const y=new Float64Array(4);return function(w,R,U,j){var X=.5*Math.PI/180;R*=X,U*=X,j*=X;var re=Math.sin(R),de=Math.cos(R),xe=Math.sin(U),Fe=Math.cos(U),ze=Math.sin(j),Ye=Math.cos(j);w[0]=re*Fe*Ye-de*xe*ze,w[1]=de*xe*Ye+re*Fe*ze,w[2]=de*Fe*ze-re*xe*Ye,w[3]=de*Fe*Ye+re*xe*ze}(y,h,A-90,d),y},l.b4=function(h,A,d,y){var w,R,U,j,X,re=A[0],de=A[1],xe=A[2],Fe=A[3],ze=d[0],Ye=d[1],et=d[2],At=d[3];return(R=re*ze+de*Ye+xe*et+Fe*At)<0&&(R=-R,ze=-ze,Ye=-Ye,et=-et,At=-At),1-R>q?(w=Math.acos(R),U=Math.sin(w),j=Math.sin((1-y)*w)/U,X=Math.sin(y*w)/U):(j=1-y,X=y),h[0]=j*re+X*ze,h[1]=j*de+X*Ye,h[2]=j*xe+X*et,h[3]=j*Fe+X*At,h},l.b5=function(h){const A=new Float64Array(9);var d,y,w,R,U,j,X,re,de,xe,Fe,ze,Ye,et,At,yt,Wt,St;xe=(w=(y=h)[0])*(X=w+w),Fe=(R=y[1])*X,Ye=(U=y[2])*X,et=U*(re=R+R),yt=(j=y[3])*X,Wt=j*re,St=j*(de=U+U),(d=A)[0]=1-(ze=R*re)-(At=U*de),d[3]=Fe-St,d[6]=Ye+Wt,d[1]=Fe+St,d[4]=1-xe-At,d[7]=et-yt,d[2]=Ye-Wt,d[5]=et+yt,d[8]=1-xe-ze;const De=Bn(-Math.asin(mt(A[2],-1,1)));let ot,Tt;return Math.hypot(A[5],A[8])<.001?(ot=0,Tt=-Bn(Math.atan2(A[3],A[4]))):(ot=Bn(A[5]===0&&A[8]===0?0:Math.atan2(A[5],A[8])),Tt=Bn(A[1]===0&&A[0]===0?0:Math.atan2(A[1],A[0]))),{roll:ot,pitch:De+90,bearing:Tt}},l.b6=function(h,A){return h.roll==A.roll&&h.pitch==A.pitch&&h.bearing==A.bearing},l.b7=jr,l.b8=Iu,l.b9=gr,l.bA=function(h){if(h.type==="custom")return new vr(h);switch(h.type){case"background":return new Rl(h);case"circle":return new Vm(h);case"fill":return new UA(h);case"fill-extrusion":return new Hu(h);case"heatmap":return new mf(h);case"hillshade":return new Pi(h);case"line":return new tp(h);case"raster":return new pn(h);case"symbol":return new Ur(h)}},l.bB=nt,l.bC=function(h,A){if(!h)return[{command:"setStyle",args:[A]}];let d=[];try{if(!at(h.version,A.version))return[{command:"setStyle",args:[A]}];at(h.center,A.center)||d.push({command:"setCenter",args:[A.center]}),at(h.centerAltitude,A.centerAltitude)||d.push({command:"setCenterAltitude",args:[A.centerAltitude]}),at(h.zoom,A.zoom)||d.push({command:"setZoom",args:[A.zoom]}),at(h.bearing,A.bearing)||d.push({command:"setBearing",args:[A.bearing]}),at(h.pitch,A.pitch)||d.push({command:"setPitch",args:[A.pitch]}),at(h.roll,A.roll)||d.push({command:"setRoll",args:[A.roll]}),at(h.sprite,A.sprite)||d.push({command:"setSprite",args:[A.sprite]}),at(h.glyphs,A.glyphs)||d.push({command:"setGlyphs",args:[A.glyphs]}),at(h.transition,A.transition)||d.push({command:"setTransition",args:[A.transition]}),at(h.light,A.light)||d.push({command:"setLight",args:[A.light]}),at(h.terrain,A.terrain)||d.push({command:"setTerrain",args:[A.terrain]}),at(h.sky,A.sky)||d.push({command:"setSky",args:[A.sky]}),at(h.projection,A.projection)||d.push({command:"setProjection",args:[A.projection]});const y={},w=[];(function(U,j,X,re){let de;for(de in j=j||{},U=U||{})Object.prototype.hasOwnProperty.call(U,de)&&(Object.prototype.hasOwnProperty.call(j,de)||Nt(de,X,re));for(de in j)Object.prototype.hasOwnProperty.call(j,de)&&(Object.prototype.hasOwnProperty.call(U,de)?at(U[de],j[de])||(U[de].type==="geojson"&&j[de].type==="geojson"&&Rn(U,j,de)?zt(X,{command:"setGeoJSONSourceData",args:[de,j[de].data]}):rn(de,j,X,re)):Qt(de,j,X))})(h.sources,A.sources,w,y);const R=[];h.layers&&h.layers.forEach(U=>{"source"in U&&y[U.source]?d.push({command:"removeLayer",args:[U.id]}):R.push(U)}),d=d.concat(w),function(U,j,X){j=j||[];const re=(U=U||[]).map(mr),de=j.map(mr),xe=U.reduce(Tr,{}),Fe=j.reduce(Tr,{}),ze=re.slice(),Ye=Object.create(null);let et,At,yt,Wt,St;for(let De=0,ot=0;De<re.length;De++)et=re[De],Object.prototype.hasOwnProperty.call(Fe,et)?ot++:(zt(X,{command:"removeLayer",args:[et]}),ze.splice(ze.indexOf(et,ot),1));for(let De=0,ot=0;De<de.length;De++)et=de[de.length-1-De],ze[ze.length-1-De]!==et&&(Object.prototype.hasOwnProperty.call(xe,et)?(zt(X,{command:"removeLayer",args:[et]}),ze.splice(ze.lastIndexOf(et,ze.length-ot),1)):ot++,Wt=ze[ze.length-De],zt(X,{command:"addLayer",args:[Fe[et],Wt]}),ze.splice(ze.length-De,0,et),Ye[et]=!0);for(let De=0;De<de.length;De++)if(et=de[De],At=xe[et],yt=Fe[et],!Ye[et]&&!at(At,yt))if(at(At.source,yt.source)&&at(At["source-layer"],yt["source-layer"])&&at(At.type,yt.type)){for(St in Dn(At.layout,yt.layout,X,et,null,"setLayoutProperty"),Dn(At.paint,yt.paint,X,et,null,"setPaintProperty"),at(At.filter,yt.filter)||zt(X,{command:"setFilter",args:[et,yt.filter]}),at(At.minzoom,yt.minzoom)&&at(At.maxzoom,yt.maxzoom)||zt(X,{command:"setLayerZoomRange",args:[et,yt.minzoom,yt.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,St)&&St!=="layout"&&St!=="paint"&&St!=="filter"&&St!=="metadata"&&St!=="minzoom"&&St!=="maxzoom"&&(St.indexOf("paint.")===0?Dn(At[St],yt[St],X,et,St.slice(6),"setPaintProperty"):at(At[St],yt[St])||zt(X,{command:"setLayerProperty",args:[et,St,yt[St]]}));for(St in yt)Object.prototype.hasOwnProperty.call(yt,St)&&!Object.prototype.hasOwnProperty.call(At,St)&&St!=="layout"&&St!=="paint"&&St!=="filter"&&St!=="metadata"&&St!=="minzoom"&&St!=="maxzoom"&&(St.indexOf("paint.")===0?Dn(At[St],yt[St],X,et,St.slice(6),"setPaintProperty"):at(At[St],yt[St])||zt(X,{command:"setLayerProperty",args:[et,St,yt[St]]}))}else zt(X,{command:"removeLayer",args:[et]}),Wt=ze[ze.lastIndexOf(et)+1],zt(X,{command:"addLayer",args:[yt,Wt]})}(R,A.layers,d)}catch(y){console.warn("Unable to compute style diff:",y),d=[{command:"setStyle",args:[A]}]}return d},l.bD=function(h){const A=[],d=h.id;return d===void 0&&A.push({message:`layers.${d}: missing required property "id"`}),h.render===void 0&&A.push({message:`layers.${d}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&A.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),A},l.bE=function h(A,d){if(Array.isArray(A)){if(!Array.isArray(d)||A.length!==d.length)return!1;for(let y=0;y<A.length;y++)if(!h(A[y],d[y]))return!1;return!0}if(typeof A=="object"&&A!==null&&d!==null){if(typeof d!="object"||Object.keys(A).length!==Object.keys(d).length)return!1;for(const y in A)if(!h(A[y],d[y]))return!1;return!0}return A===d},l.bF=Re,l.bG=Ue,l.bH=class extends al{constructor(h,A){super(h,A),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},l.bI=dA,l.bJ=class extends al{constructor(h,A){super(h,A),this.current=qu}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let A=1;A<16;A++)if(h[A]!==this.current[A]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},l.bK=Vl,l.bL=class extends al{constructor(h,A){super(h,A),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},l.bM=class extends al{constructor(h,A){super(h,A),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},l.bN=G,l.bO=function(h,A){var d=Math.sin(A),y=Math.cos(A);return h[0]=y,h[1]=d,h[2]=0,h[3]=-d,h[4]=y,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},l.bP=function(h,A,d){var y=A[0],w=A[1],R=A[2];return h[0]=y*d[0]+w*d[3]+R*d[6],h[1]=y*d[1]+w*d[4]+R*d[7],h[2]=y*d[2]+w*d[5]+R*d[8],h},l.bQ=function(h,A,d,y,w,R,U){var j=1/(A-d),X=1/(y-w),re=1/(R-U);return h[0]=-2*j,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*X,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*re,h[11]=0,h[12]=(A+d)*j,h[13]=(w+y)*X,h[14]=(U+R)*re,h[15]=1,h},l.bR=class extends sl{},l.bS=t0,l.bT=class extends uc{},l.bU=ad,l.bV=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},l.bW=Pd,l.bX=function(h,A,d){var y=A[0],w=A[1],R=A[2],U=d[3]*y+d[7]*w+d[11]*R+d[15];return h[0]=(d[0]*y+d[4]*w+d[8]*R+d[12])/(U=U||1),h[1]=(d[1]*y+d[5]*w+d[9]*R+d[13])/U,h[2]=(d[2]*y+d[6]*w+d[10]*R+d[14])/U,h},l.bY=class extends KA{},l.bZ=class extends M{},l.b_=function(h,A){return h[0]===A[0]&&h[1]===A[1]&&h[2]===A[2]&&h[3]===A[3]&&h[4]===A[4]&&h[5]===A[5]&&h[6]===A[6]&&h[7]===A[7]&&h[8]===A[8]&&h[9]===A[9]&&h[10]===A[10]&&h[11]===A[11]&&h[12]===A[12]&&h[13]===A[13]&&h[14]===A[14]&&h[15]===A[15]},l.ba=Ar,l.bb=Hn,l.bc=Le,l.bd=Xe,l.be=_o,l.bf=function(h,A,d,y,w){return Le(y,w,mt((h-A)/(d-A),0,1))},l.bg=Pe,l.bh=function(){return new Float64Array(3)},l.bi=function(h,A,d,y){return h[0]=A[0]+d[0]*y,h[1]=A[1]+d[1]*y,h[2]=A[2]+d[2]*y,h},l.bj=pe,l.bk=function(){return new Float64Array(4)},l.bl=function(h,A,d,y){var w=[],R=[];return w[0]=A[0]-d[0],w[1]=A[1]-d[1],w[2]=A[2]-d[2],R[0]=w[0]*Math.cos(y)-w[1]*Math.sin(y),R[1]=w[0]*Math.sin(y)+w[1]*Math.cos(y),R[2]=w[2],h[0]=R[0]+d[0],h[1]=R[1]+d[1],h[2]=R[2]+d[2],h},l.bm=function(h,A,d,y){var w=[],R=[];return w[0]=A[0]-d[0],w[1]=A[1]-d[1],w[2]=A[2]-d[2],R[0]=w[0],R[1]=w[1]*Math.cos(y)-w[2]*Math.sin(y),R[2]=w[1]*Math.sin(y)+w[2]*Math.cos(y),h[0]=R[0]+d[0],h[1]=R[1]+d[1],h[2]=R[2]+d[2],h},l.bn=function(h,A,d,y){var w=[],R=[];return w[0]=A[0]-d[0],w[1]=A[1]-d[1],w[2]=A[2]-d[2],R[0]=w[2]*Math.sin(y)+w[0]*Math.cos(y),R[1]=w[1],R[2]=w[2]*Math.cos(y)-w[0]*Math.sin(y),h[0]=R[0]+d[0],h[1]=R[1]+d[1],h[2]=R[2]+d[2],h},l.bo=he,l.bp=function(h,A,d){var y=Math.sin(d),w=Math.cos(d),R=A[0],U=A[1],j=A[2],X=A[3],re=A[8],de=A[9],xe=A[10],Fe=A[11];return A!==h&&(h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15]),h[0]=R*w-re*y,h[1]=U*w-de*y,h[2]=j*w-xe*y,h[3]=X*w-Fe*y,h[8]=R*y+re*w,h[9]=U*y+de*w,h[10]=j*y+xe*w,h[11]=X*y+Fe*w,h},l.bq=function(h,A){const d=Pe(h,360),y=Pe(A,360),w=y-d,R=y>d?w-360:w+360;return Math.abs(w)<Math.abs(R)?w:R},l.br=function(h){return h[0]=0,h[1]=0,h[2]=0,h},l.bs=function(h,A,d,y){const w=Math.sqrt(h*h+A*A),R=Math.sqrt(d*d+y*y);h/=w,A/=w,d/=R,y/=R;const U=Math.acos(h*d+A*y);return-A*d+h*y>0?U:-U},l.bt=function(h,A){return h[0]*A[0]+h[1]*A[1]+h[2]*A[2]+h[3]},l.bu=Ti,l.bv=function(h,A){const d=Pe(h,2*Math.PI),y=Pe(A,2*Math.PI);return Math.min(Math.abs(d-y),Math.abs(d-y+2*Math.PI),Math.abs(d-y-2*Math.PI))},l.bw=function(){const h={},A=Ee.$version;for(const d in Ee.$root){const y=Ee.$root[d];if(y.required){let w=null;w=d==="version"?A:y.type==="array"?[]:{},w!=null&&(h[d]=w)}}return h},l.bx=PA,l.by=Ht,l.bz=function(h){h=h.slice();const A=Object.create(null);for(let d=0;d<h.length;d++)A[h[d].id]=h[d];for(let d=0;d<h.length;d++)"ref"in h[d]&&(h[d]=ut(h[d],A[h[d].ref]));return h},l.c=We,l.c0=function(h,A){return h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3],h[4]=A[4],h[5]=A[5],h[6]=A[6],h[7]=A[7],h[8]=A[8],h[9]=A[9],h[10]=A[10],h[11]=A[11],h[12]=A[12],h[13]=A[13],h[14]=A[14],h[15]=A[15],h},l.c1=h=>h.type==="symbol",l.c2=h=>h.type==="circle",l.c3=h=>h.type==="heatmap",l.c4=h=>h.type==="line",l.c5=h=>h.type==="fill",l.c6=h=>h.type==="fill-extrusion",l.c7=h=>h.type==="hillshade",l.c8=h=>h.type==="raster",l.c9=h=>h.type==="background",l.cA=xa,l.cB=H0,l.cC=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},l.cD=function(h,A,d,y,w){return o(this,void 0,void 0,function*(){if(ne())try{return yield nn(h,A,d,y,w)}catch{}return function(R,U,j,X,re){const de=R.width,xe=R.height;Xn&&Fn||(Xn=new OffscreenCanvas(de,xe),Fn=Xn.getContext("2d",{willReadFrequently:!0})),Xn.width=de,Xn.height=xe,Fn.drawImage(R,0,0,de,xe);const Fe=Fn.getImageData(U,j,X,re);return Fn.clearRect(0,0,de,xe),Fe.data}(h,A,d,y,w)})},l.cE=d_,l.cF=p,l.cG=B,l.cH=Fc,l.cI=Va,l.cJ=Jh,l.cK=jl,l.ca=h=>h.type==="custom",l.cb=Ct,l.cc=function(h,A,d){const y=Je(A.x-d.x,A.y-d.y),w=Je(h.x-d.x,h.y-d.y);var R,U;return Bn(Math.atan2(y[0]*w[1]-y[1]*w[0],(R=y)[0]*(U=w)[0]+R[1]*U[1]))},l.cd=Gt,l.ce=function(h,A){return lr[A]&&(h instanceof MouseEvent||h instanceof WheelEvent)},l.cf=function(h,A){return Cr[A]&&"touches"in h},l.cg=function(h){return Cr[h]||lr[h]},l.ch=function(h,A,d){var y=A[0],w=A[1];return h[0]=d[0]*y+d[4]*w+d[12],h[1]=d[1]*y+d[5]*w+d[13],h},l.ci=function(h,A){const{x:d,y}=eg.fromLngLat(A);return!(h<0||h>25||y<0||y>=1||d<0||d>=1)},l.cj=function(h,A){return h[0]=A[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=A[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=A[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},l.ck=class extends Ou{},l.cl=w_,l.cn=function(h){return h.message===hr},l.co=Et,l.cp=function(h,A){ce.REGISTERED_PROTOCOLS[h]=A},l.cq=function(h){delete ce.REGISTERED_PROTOCOLS[h]},l.cr=function(h,A){const d={};for(let w=0;w<h.length;w++){const R=A&&A[h[w].id]||th(h[w]);A&&(A[h[w].id]=R);let U=d[R];U||(U=d[R]=[]),U.push(h[w])}const y=[];for(const w in d)y.push(d[w]);return y},l.cs=Mr,l.ct=f_,l.cu=xo,l.cv=t1,l.cw=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Ke/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const A=h.bucket.layers[0],d=A.layout,y=A._unevaluatedLayout._values,w={layoutIconSize:y["icon-size"].possiblyEvaluate(new Qo(h.bucket.zoom+1),h.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new Qo(h.bucket.zoom+1),h.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new Qo(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=h.bucket.textSizeData;w.compositeTextSizes=[y["text-size"].possiblyEvaluate(new Qo(re),h.canonical),y["text-size"].possiblyEvaluate(new Qo(de),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=h.bucket.iconSizeData;w.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new Qo(re),h.canonical),y["icon-size"].possiblyEvaluate(new Qo(de),h.canonical)]}const R=d.get("text-line-height")*Kl,U=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",j=d.get("text-keep-upright"),X=d.get("text-size");for(const re of h.bucket.features){const de=d.get("text-font").evaluate(re,{},h.canonical).join(","),xe=X.evaluate(re,{},h.canonical),Fe=w.layoutTextSize.evaluate(re,{},h.canonical),ze=w.layoutIconSize.evaluate(re,{},h.canonical),Ye={horizontal:{},vertical:void 0},et=re.text;let At,yt=[0,0];if(et){const De=et.toString(),ot=d.get("text-letter-spacing").evaluate(re,{},h.canonical)*Kl,Tt=ih(De)?ot:0,dn=d.get("text-anchor").evaluate(re,{},h.canonical),zn=b_(A,re,h.canonical);if(!zn){const Nn=d.get("text-radial-offset").evaluate(re,{},h.canonical);yt=Nn?l1(dn,[Nn*Kl,wm]):d.get("text-offset").evaluate(re,{},h.canonical).map(sr=>sr*Kl)}let vn=U?"center":d.get("text-justify").evaluate(re,{},h.canonical);const On=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(re,{},h.canonical)*Kl:1/0,er=()=>{h.bucket.allowVerticalPlacement&&Qu(De)&&(Ye.vertical=Lp(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,On,R,dn,"left",Tt,yt,l.al.vertical,!0,Fe,xe))};if(!U&&zn){const Nn=new Set;if(vn==="auto")for(let In=0;In<zn.values.length;In+=2)Nn.add(A1(zn.values[In]));else Nn.add(vn);let sr=!1;for(const In of Nn)if(!Ye.horizontal[In])if(sr)Ye.horizontal[In]=Ye.horizontal[0];else{const zr=Lp(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,On,R,"center",In,Tt,yt,l.al.horizontal,!1,Fe,xe);zr&&(Ye.horizontal[In]=zr,sr=zr.positionedLines.length===1)}er()}else{vn==="auto"&&(vn=A1(dn));const Nn=Lp(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,On,R,dn,vn,Tt,yt,l.al.horizontal,!1,Fe,xe);Nn&&(Ye.horizontal[vn]=Nn),er(),Qu(De)&&U&&j&&(Ye.vertical=Lp(et,h.glyphMap,h.glyphPositions,h.imagePositions,de,On,R,dn,vn,Tt,yt,l.al.vertical,!1,Fe,xe))}}let Wt=!1;if(re.icon&&re.icon.name){const De=h.imageMap[re.icon.name];De&&(At=i1(h.imagePositions[re.icon.name],d.get("icon-offset").evaluate(re,{},h.canonical),d.get("icon-anchor").evaluate(re,{},h.canonical)),Wt=!!De.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Wt:h.bucket.sdfIcons!==Wt&&gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==h.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const St=Sm(Ye.horizontal)||Ye.vertical;h.bucket.iconsInText=!!St&&St.iconsInText,(St||At)&&u1(h.bucket,re,Ye,At,h.imageMap,w,Fe,ze,yt,Wt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},l.cx=mm,l.cy=Ls,l.cz=Th,l.d=Jn,l.e=kt,l.f=h=>o(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const A=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(A)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=ye,l.h=h=>new Promise((A,d)=>{const y=new Image;y.onload=()=>{A(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=pr})},y.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(h)],{type:"image/png"});y.src=h.byteLength?URL.createObjectURL(w):pr}),l.i=$t,l.j=(h,A)=>Zt(kt(h,{type:"json"}),A),l.k=f,l.l=_e,l.m=Zt,l.n=(h,A)=>Zt(kt(h,{type:"arrayBuffer"}),A),l.o=function(h){return new H0(h).readFields(Hy,[])},l.p=e1,l.q=sd,l.r=Ql,l.s=an,l.t=il,l.u=Fi,l.v=Ee,l.w=gt,l.x=Bl,l.y=wl,l.z=function([h,A,d]){return A+=90,A*=Math.PI/180,d*=Math.PI/180,{x:h*Math.cos(A)*Math.sin(d),y:h*Math.sin(A)*Math.sin(d),z:h*Math.cos(d)}}}),i("worker",["./shared"],function(l){class o{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,_e){for(const Qe of ae){this._layerConfigs[Qe.id]=Qe;const Ee=this._layers[Qe.id]=l.bA(Qe);Ee._featureFilter=l.a7(Ee.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(const Qe of _e)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const f=l.cr(Object.values(this._layerConfigs),this.keyCache);for(const Qe of f){const Ee=Qe.map(Nt=>this._layers[Nt.id]),it=Ee[0];if(it.visibility==="none")continue;const ut=it.source||"";let at=this.familiesBySource[ut];at||(at=this.familiesBySource[ut]={});const zt=it.sourceLayer||"_geojsonTileLayer";let Qt=at[zt];Qt||(Qt=at[zt]=[]),Qt.push(Ee)}}}class p{constructor(ae){const _e={},f=[];for(const ut in ae){const at=ae[ut],zt=_e[ut]={};for(const Qt in at){const Nt=at[+Qt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const rn={x:0,y:0,w:Nt.bitmap.width+2,h:Nt.bitmap.height+2};f.push(rn),zt[Qt]={rect:rn,metrics:Nt.metrics}}}const{w:Qe,h:Ee}=l.p(f),it=new l.q({width:Qe||1,height:Ee||1});for(const ut in ae){const at=ae[ut];for(const zt in at){const Qt=at[+zt];if(!Qt||Qt.bitmap.width===0||Qt.bitmap.height===0)continue;const Nt=_e[ut][zt].rect;l.q.copy(Qt.bitmap,it,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},Qt.bitmap)}}this.image=it,this.positions=_e}}l.cs("GlyphAtlas",p);class v{constructor(ae){this.tileID=new l.Y(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,_e,f,Qe,Ee){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new l.a5;const it=new l.ct(Object.keys(ae.layers).sort()),ut=new l.cu(this.tileID,this.promoteId);ut.bucketLayerIDs=[];const at={},zt={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:f,subdivisionGranularity:Ee},Qt=_e.familiesBySource[this.source];for(const yn in Qt){const ar=ae.layers[yn];if(!ar)continue;ar.version===1&&l.w(`Vector tile source "${this.source}" layer "${yn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pr=it.encode(yn),Cs=[];for(let Ao=0;Ao<ar.length;Ao++){const ui=ar.feature(Ao),$r=ut.getId(ui,yn);Cs.push({feature:ui,id:$r,index:Ao,sourceLayerIndex:Pr})}for(const Ao of Qt[yn]){const ui=Ao[0];ui.source!==this.source&&l.w(`layer.source = ${ui.source} does not equal this.source = ${this.source}`),ui.minzoom&&this.zoom<Math.floor(ui.minzoom)||ui.maxzoom&&this.zoom>=ui.maxzoom||ui.visibility!=="none"&&(x(Ao,this.zoom,f),(at[ui.id]=ui.createBucket({index:ut.bucketLayerIDs.length,layers:Ao,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source})).populate(Cs,zt,this.tileID.canonical),ut.bucketLayerIDs.push(Ao.map($r=>$r.id)))}}const Nt=l.bF(zt.glyphDependencies,yn=>Object.keys(yn).map(Number));this.inFlightDependencies.forEach(yn=>yn==null?void 0:yn.abort()),this.inFlightDependencies=[];let rn=Promise.resolve({});if(Object.keys(Nt).length){const yn=new AbortController;this.inFlightDependencies.push(yn),rn=Qe.sendAsync({type:"GG",data:{stacks:Nt,source:this.source,tileID:this.tileID,type:"glyphs"}},yn)}const Rn=Object.keys(zt.iconDependencies);let Dn=Promise.resolve({});if(Rn.length){const yn=new AbortController;this.inFlightDependencies.push(yn),Dn=Qe.sendAsync({type:"GI",data:{icons:Rn,source:this.source,tileID:this.tileID,type:"icons"}},yn)}const mr=Object.keys(zt.patternDependencies);let Tr=Promise.resolve({});if(mr.length){const yn=new AbortController;this.inFlightDependencies.push(yn),Tr=Qe.sendAsync({type:"GI",data:{icons:mr,source:this.source,tileID:this.tileID,type:"patterns"}},yn)}const[Jt,br,Gr]=yield Promise.all([rn,Dn,Tr]),Si=new p(Jt),Fr=new l.cv(br,Gr);for(const yn in at){const ar=at[yn];ar instanceof l.a6?(x(ar.layers,this.zoom,f),l.cw({bucket:ar,glyphMap:Jt,glyphPositions:Si.positions,imageMap:br,imagePositions:Fr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:zt.subdivisionGranularity})):ar.hasPattern&&(ar instanceof l.cx||ar instanceof l.cy||ar instanceof l.cz)&&(x(ar.layers,this.zoom,f),ar.addFeatures(zt,this.tileID.canonical,Fr.patternPositions))}return this.status="done",{buckets:Object.values(at).filter(yn=>!yn.isEmpty()),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Si.image,imageAtlas:Fr,glyphMap:this.returnDependencies?Jt:null,iconMap:this.returnDependencies?br:null,glyphPositions:this.returnDependencies?Si.positions:null}})}}function x(He,ae,_e){const f=new l.C(ae);for(const Qe of He)Qe.recalculate(f,_e)}class B{constructor(ae,_e,f){this.actor=ae,this.layerIndex=_e,this.availableImages=f,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,_e){return l._(this,void 0,void 0,function*(){const f=yield l.n(ae.request,_e);try{return{vectorTile:new l.cA.VectorTile(new l.cB(f.data)),rawData:f.data,cacheControl:f.cacheControl,expires:f.expires}}catch(Qe){const Ee=new Uint8Array(f.data);let it=`Unable to parse the tile at ${ae.request.url}, `;throw it+=Ee[0]===31&&Ee[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Qe.message}`,new Error(it)}})}loadTile(ae){return l._(this,void 0,void 0,function*(){const _e=ae.uid,f=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.cC(ae.request),Qe=new v(ae);this.loading[_e]=Qe;const Ee=new AbortController;Qe.abort=Ee;try{const it=yield this.loadVectorTile(ae,Ee);if(delete this.loading[_e],!it)return null;const ut=it.rawData,at={};it.expires&&(at.expires=it.expires),it.cacheControl&&(at.cacheControl=it.cacheControl);const zt={};if(f){const Nt=f.finish();Nt&&(zt.resourceTiming=JSON.parse(JSON.stringify(Nt)))}Qe.vectorTile=it.vectorTile;const Qt=Qe.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[_e]=Qe,this.fetching[_e]={rawTileData:ut,cacheControl:at,resourceTiming:zt};try{const Nt=yield Qt;return l.e({rawTileData:ut.slice(0)},Nt,at,zt)}finally{delete this.fetching[_e]}}catch(it){throw delete this.loading[_e],Qe.status="done",this.loaded[_e]=Qe,it}})}reloadTile(ae){return l._(this,void 0,void 0,function*(){const _e=ae.uid;if(!this.loaded||!this.loaded[_e])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const f=this.loaded[_e];if(f.showCollisionBoxes=ae.showCollisionBoxes,f.status==="parsing"){const Qe=yield f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Ee;if(this.fetching[_e]){const{rawTileData:it,cacheControl:ut,resourceTiming:at}=this.fetching[_e];delete this.fetching[_e],Ee=l.e({rawTileData:it.slice(0)},Qe,ut,at)}else Ee=Qe;return Ee}if(f.status==="done"&&f.vectorTile)return f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return l._(this,void 0,void 0,function*(){const _e=this.loading,f=ae.uid;_e&&_e[f]&&_e[f].abort&&(_e[f].abort.abort(),delete _e[f])})}removeTile(ae){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class k{constructor(){this.loaded={}}loadTile(ae){return l._(this,void 0,void 0,function*(){const{uid:_e,encoding:f,rawImageData:Qe,redFactor:Ee,greenFactor:it,blueFactor:ut,baseShift:at}=ae,zt=Qe.width+2,Qt=Qe.height+2,Nt=l.b(Qe)?new l.R({width:zt,height:Qt},yield l.cD(Qe,-1,-1,zt,Qt)):Qe,rn=new l.cE(_e,Nt,f,Ee,it,ut,at);return this.loaded=this.loaded||{},this.loaded[_e]=rn,rn})}removeTile(ae){const _e=this.loaded,f=ae.uid;_e&&_e[f]&&delete _e[f]}}var P,D,N=function(){if(D)return P;function He(_e,f){if(_e.length!==0){ae(_e[0],f);for(var Qe=1;Qe<_e.length;Qe++)ae(_e[Qe],!f)}}function ae(_e,f){for(var Qe=0,Ee=0,it=0,ut=_e.length,at=ut-1;it<ut;at=it++){var zt=(_e[it][0]-_e[at][0])*(_e[at][1]+_e[it][1]),Qt=Qe+zt;Ee+=Math.abs(Qe)>=Math.abs(zt)?Qe-Qt+zt:zt-Qt+Qe,Qe=Qt}Qe+Ee>=0!=!!f&&_e.reverse()}return D=1,P=function _e(f,Qe){var Ee,it=f&&f.type;if(it==="FeatureCollection")for(Ee=0;Ee<f.features.length;Ee++)_e(f.features[Ee],Qe);else if(it==="GeometryCollection")for(Ee=0;Ee<f.geometries.length;Ee++)_e(f.geometries[Ee],Qe);else if(it==="Feature")_e(f.geometry,Qe);else if(it==="Polygon")He(f.coordinates,Qe);else if(it==="MultiPolygon")for(Ee=0;Ee<f.coordinates.length;Ee++)He(f.coordinates[Ee],Qe);return f}}(),W=l.cF(N);const V=l.cA.VectorTileFeature.prototype.toGeoJSON;class ${constructor(ae){this._feature=ae,this.extent=l.Z,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const _e of this._feature.geometry)ae.push([new l.P(_e[0],_e[1])]);return ae}{const ae=[];for(const _e of this._feature.geometry){const f=[];for(const Qe of _e)f.push(new l.P(Qe[0],Qe[1]));ae.push(f)}return ae}}toGeoJSON(ae,_e,f){return V.call(this,ae,_e,f)}}class ie{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=ae.length,this._features=ae}feature(ae){return new $(this._features[ae])}}var ne,q,te,G={exports:{}},oe=function(){if(te)return G.exports;te=1;var He=l.cI(),ae=function(){if(q)return ne;q=1;var Qt=l.cG(),Nt=l.cH().VectorTileFeature;function rn(Dn,mr){this.options=mr||{},this.features=Dn,this.length=Dn.length}function Rn(Dn,mr){this.id=typeof Dn.id=="number"?Dn.id:void 0,this.type=Dn.type,this.rawGeometry=Dn.type===1?[Dn.geometry]:Dn.geometry,this.properties=Dn.tags,this.extent=mr||4096}return ne=rn,rn.prototype.feature=function(Dn){return new Rn(this.features[Dn],this.options.extent)},Rn.prototype.loadGeometry=function(){var Dn=this.rawGeometry;this.geometry=[];for(var mr=0;mr<Dn.length;mr++){for(var Tr=Dn[mr],Jt=[],br=0;br<Tr.length;br++)Jt.push(new Qt(Tr[br][0],Tr[br][1]));this.geometry.push(Jt)}return this.geometry},Rn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Dn=this.geometry,mr=1/0,Tr=-1/0,Jt=1/0,br=-1/0,Gr=0;Gr<Dn.length;Gr++)for(var Si=Dn[Gr],Fr=0;Fr<Si.length;Fr++){var yn=Si[Fr];mr=Math.min(mr,yn.x),Tr=Math.max(Tr,yn.x),Jt=Math.min(Jt,yn.y),br=Math.max(br,yn.y)}return[mr,Jt,Tr,br]},Rn.prototype.toGeoJSON=Nt.prototype.toGeoJSON,ne}();function _e(Qt){var Nt=new He;return function(rn,Rn){for(var Dn in rn.layers)Rn.writeMessage(3,f,rn.layers[Dn])}(Qt,Nt),Nt.finish()}function f(Qt,Nt){var rn;Nt.writeVarintField(15,Qt.version||1),Nt.writeStringField(1,Qt.name||""),Nt.writeVarintField(5,Qt.extent||4096);var Rn={keys:[],values:[],keycache:{},valuecache:{}};for(rn=0;rn<Qt.length;rn++)Rn.feature=Qt.feature(rn),Nt.writeMessage(2,Qe,Rn);var Dn=Rn.keys;for(rn=0;rn<Dn.length;rn++)Nt.writeStringField(3,Dn[rn]);var mr=Rn.values;for(rn=0;rn<mr.length;rn++)Nt.writeMessage(4,zt,mr[rn])}function Qe(Qt,Nt){var rn=Qt.feature;rn.id!==void 0&&Nt.writeVarintField(1,rn.id),Nt.writeMessage(2,Ee,Qt),Nt.writeVarintField(3,rn.type),Nt.writeMessage(4,at,rn)}function Ee(Qt,Nt){var rn=Qt.feature,Rn=Qt.keys,Dn=Qt.values,mr=Qt.keycache,Tr=Qt.valuecache;for(var Jt in rn.properties){var br=rn.properties[Jt],Gr=mr[Jt];if(br!==null){Gr===void 0&&(Rn.push(Jt),mr[Jt]=Gr=Rn.length-1),Nt.writeVarint(Gr);var Si=typeof br;Si!=="string"&&Si!=="boolean"&&Si!=="number"&&(br=JSON.stringify(br));var Fr=Si+":"+br,yn=Tr[Fr];yn===void 0&&(Dn.push(br),Tr[Fr]=yn=Dn.length-1),Nt.writeVarint(yn)}}}function it(Qt,Nt){return(Nt<<3)+(7&Qt)}function ut(Qt){return Qt<<1^Qt>>31}function at(Qt,Nt){for(var rn=Qt.loadGeometry(),Rn=Qt.type,Dn=0,mr=0,Tr=rn.length,Jt=0;Jt<Tr;Jt++){var br=rn[Jt],Gr=1;Rn===1&&(Gr=br.length),Nt.writeVarint(it(1,Gr));for(var Si=Rn===3?br.length-1:br.length,Fr=0;Fr<Si;Fr++){Fr===1&&Rn!==1&&Nt.writeVarint(it(2,Si-1));var yn=br[Fr].x-Dn,ar=br[Fr].y-mr;Nt.writeVarint(ut(yn)),Nt.writeVarint(ut(ar)),Dn+=yn,mr+=ar}Rn===3&&Nt.writeVarint(it(7,1))}}function zt(Qt,Nt){var rn=typeof Qt;rn==="string"?Nt.writeStringField(1,Qt):rn==="boolean"?Nt.writeBooleanField(7,Qt):rn==="number"&&(Qt%1!=0?Nt.writeDoubleField(3,Qt):Qt<0?Nt.writeSVarintField(6,Qt):Nt.writeVarintField(5,Qt))}return G.exports=_e,G.exports.fromVectorTileJs=_e,G.exports.fromGeojsonVt=function(Qt,Nt){Nt=Nt||{};var rn={};for(var Rn in Qt)rn[Rn]=new ae(Qt[Rn].features,Nt),rn[Rn].name=Rn,rn[Rn].version=Nt.version,rn[Rn].extent=Nt.extent;return _e({layers:rn})},G.exports.GeoJSONWrapper=ae,G.exports}(),fe=l.cF(oe);const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:He=>He},Me=Math.fround||(me=new Float32Array(1),He=>(me[0]=+He,me[0]));var me;const pe=3,qe=5,Se=6;class vt{constructor(ae){this.options=Object.assign(Object.create(he),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:_e,minZoom:f,maxZoom:Qe}=this.options;_e&&console.time("total time");const Ee=`prepare ${ae.length} points`;_e&&console.time(Ee),this.points=ae;const it=[];for(let at=0;at<ae.length;at++){const zt=ae[at];if(!zt.geometry)continue;const[Qt,Nt]=zt.geometry.coordinates,rn=Me(je(Qt)),Rn=Me(Pe(Nt));it.push(rn,Rn,1/0,at,-1,1),this.options.reduce&&it.push(0)}let ut=this.trees[Qe+1]=this._createTree(it);_e&&console.timeEnd(Ee);for(let at=Qe;at>=f;at--){const zt=+Date.now();ut=this.trees[at]=this._createTree(this._cluster(ut,at)),_e&&console.log("z%d: %d clusters in %dms",at,ut.numItems,+Date.now()-zt)}return _e&&console.timeEnd("total time"),this}getClusters(ae,_e){let f=((ae[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,ae[1]));let Ee=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)f=-180,Ee=180;else if(f>Ee){const Nt=this.getClusters([f,Qe,180,it],_e),rn=this.getClusters([-180,Qe,Ee,it],_e);return Nt.concat(rn)}const ut=this.trees[this._limitZoom(_e)],at=ut.range(je(f),Pe(it),je(Ee),Pe(Qe)),zt=ut.data,Qt=[];for(const Nt of at){const rn=this.stride*Nt;Qt.push(zt[rn+qe]>1?Je(zt,rn,this.clusterProps):this.points[zt[rn+pe]])}return Qt}getChildren(ae){const _e=this._getOriginId(ae),f=this._getOriginZoom(ae),Qe="No cluster with the specified id.",Ee=this.trees[f];if(!Ee)throw new Error(Qe);const it=Ee.data;if(_e*this.stride>=it.length)throw new Error(Qe);const ut=this.options.radius/(this.options.extent*Math.pow(2,f-1)),at=Ee.within(it[_e*this.stride],it[_e*this.stride+1],ut),zt=[];for(const Qt of at){const Nt=Qt*this.stride;it[Nt+4]===ae&&zt.push(it[Nt+qe]>1?Je(it,Nt,this.clusterProps):this.points[it[Nt+pe]])}if(zt.length===0)throw new Error(Qe);return zt}getLeaves(ae,_e,f){const Qe=[];return this._appendLeaves(Qe,ae,_e=_e||10,f=f||0,0),Qe}getTile(ae,_e,f){const Qe=this.trees[this._limitZoom(ae)],Ee=Math.pow(2,ae),{extent:it,radius:ut}=this.options,at=ut/it,zt=(f-at)/Ee,Qt=(f+1+at)/Ee,Nt={features:[]};return this._addTileFeatures(Qe.range((_e-at)/Ee,zt,(_e+1+at)/Ee,Qt),Qe.data,_e,f,Ee,Nt),_e===0&&this._addTileFeatures(Qe.range(1-at/Ee,zt,1,Qt),Qe.data,Ee,f,Ee,Nt),_e===Ee-1&&this._addTileFeatures(Qe.range(0,zt,at/Ee,Qt),Qe.data,-1,f,Ee,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(ae){let _e=this._getOriginZoom(ae)-1;for(;_e<=this.options.maxZoom;){const f=this.getChildren(ae);if(_e++,f.length!==1)break;ae=f[0].properties.cluster_id}return _e}_appendLeaves(ae,_e,f,Qe,Ee){const it=this.getChildren(_e);for(const ut of it){const at=ut.properties;if(at&&at.cluster?Ee+at.point_count<=Qe?Ee+=at.point_count:Ee=this._appendLeaves(ae,at.cluster_id,f,Qe,Ee):Ee<Qe?Ee++:ae.push(ut),ae.length===f)break}return Ee}_createTree(ae){const _e=new l.aF(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let f=0;f<ae.length;f+=this.stride)_e.add(ae[f],ae[f+1]);return _e.finish(),_e.data=ae,_e}_addTileFeatures(ae,_e,f,Qe,Ee,it){for(const ut of ae){const at=ut*this.stride,zt=_e[at+qe]>1;let Qt,Nt,rn;if(zt)Qt=Ke(_e,at,this.clusterProps),Nt=_e[at],rn=_e[at+1];else{const mr=this.points[_e[at+pe]];Qt=mr.properties;const[Tr,Jt]=mr.geometry.coordinates;Nt=je(Tr),rn=Pe(Jt)}const Rn={type:1,geometry:[[Math.round(this.options.extent*(Nt*Ee-f)),Math.round(this.options.extent*(rn*Ee-Qe))]],tags:Qt};let Dn;Dn=zt||this.options.generateId?_e[at+pe]:this.points[_e[at+pe]].id,Dn!==void 0&&(Rn.id=Dn),it.features.push(Rn)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,_e){const{radius:f,extent:Qe,reduce:Ee,minPoints:it}=this.options,ut=f/(Qe*Math.pow(2,_e)),at=ae.data,zt=[],Qt=this.stride;for(let Nt=0;Nt<at.length;Nt+=Qt){if(at[Nt+2]<=_e)continue;at[Nt+2]=_e;const rn=at[Nt],Rn=at[Nt+1],Dn=ae.within(at[Nt],at[Nt+1],ut),mr=at[Nt+qe];let Tr=mr;for(const Jt of Dn){const br=Jt*Qt;at[br+2]>_e&&(Tr+=at[br+qe])}if(Tr>mr&&Tr>=it){let Jt,br=rn*mr,Gr=Rn*mr,Si=-1;const Fr=((Nt/Qt|0)<<5)+(_e+1)+this.points.length;for(const yn of Dn){const ar=yn*Qt;if(at[ar+2]<=_e)continue;at[ar+2]=_e;const Pr=at[ar+qe];br+=at[ar]*Pr,Gr+=at[ar+1]*Pr,at[ar+4]=Fr,Ee&&(Jt||(Jt=this._map(at,Nt,!0),Si=this.clusterProps.length,this.clusterProps.push(Jt)),Ee(Jt,this._map(at,ar)))}at[Nt+4]=Fr,zt.push(br/Tr,Gr/Tr,1/0,Fr,-1,Tr),Ee&&zt.push(Si)}else{for(let Jt=0;Jt<Qt;Jt++)zt.push(at[Nt+Jt]);if(Tr>1)for(const Jt of Dn){const br=Jt*Qt;if(!(at[br+2]<=_e)){at[br+2]=_e;for(let Gr=0;Gr<Qt;Gr++)zt.push(at[br+Gr])}}}}return zt}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,_e,f){if(ae[_e+qe]>1){const it=this.clusterProps[ae[_e+Se]];return f?Object.assign({},it):it}const Qe=this.points[ae[_e+pe]].properties,Ee=this.options.map(Qe);return f&&Ee===Qe?Object.assign({},Ee):Ee}}function Je(He,ae,_e){return{type:"Feature",id:He[ae+pe],properties:Ke(He,ae,_e),geometry:{type:"Point",coordinates:[(f=He[ae],360*(f-.5)),Le(He[ae+1])]}};var f}function Ke(He,ae,_e){const f=He[ae+qe],Qe=f>=1e4?`${Math.round(f/1e3)}k`:f>=1e3?Math.round(f/100)/10+"k":f,Ee=He[ae+Se],it=Ee===-1?{}:Object.assign({},_e[Ee]);return Object.assign(it,{cluster:!0,cluster_id:He[ae+pe],point_count:f,point_count_abbreviated:Qe})}function je(He){return He/360+.5}function Pe(He){const ae=Math.sin(He*Math.PI/180),_e=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return _e<0?0:_e>1?1:_e}function Le(He){const ae=(180-360*He)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function Xe(He,ae,_e,f){let Qe=f;const Ee=ae+(_e-ae>>1);let it,ut=_e-ae;const at=He[ae],zt=He[ae+1],Qt=He[_e],Nt=He[_e+1];for(let rn=ae+3;rn<_e;rn+=3){const Rn=Ct(He[rn],He[rn+1],at,zt,Qt,Nt);if(Rn>Qe)it=rn,Qe=Rn;else if(Rn===Qe){const Dn=Math.abs(rn-Ee);Dn<ut&&(it=rn,ut=Dn)}}Qe>f&&(it-ae>3&&Xe(He,ae,it,f),He[it+2]=Qe,_e-it>3&&Xe(He,it,_e,f))}function Ct(He,ae,_e,f,Qe,Ee){let it=Qe-_e,ut=Ee-f;if(it!==0||ut!==0){const at=((He-_e)*it+(ae-f)*ut)/(it*it+ut*ut);at>1?(_e=Qe,f=Ee):at>0&&(_e+=it*at,f+=ut*at)}return it=He-_e,ut=ae-f,it*it+ut*ut}function Gt(He,ae,_e,f){const Qe={id:He??null,type:ae,geometry:_e,tags:f,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")mt(Qe,_e);else if(ae==="Polygon")mt(Qe,_e[0]);else if(ae==="MultiLineString")for(const Ee of _e)mt(Qe,Ee);else if(ae==="MultiPolygon")for(const Ee of _e)mt(Qe,Ee[0]);return Qe}function mt(He,ae){for(let _e=0;_e<ae.length;_e+=3)He.minX=Math.min(He.minX,ae[_e]),He.minY=Math.min(He.minY,ae[_e+1]),He.maxX=Math.max(He.maxX,ae[_e]),He.maxY=Math.max(He.maxY,ae[_e+1])}function Ut(He,ae,_e,f){if(!ae.geometry)return;const Qe=ae.geometry.coordinates;if(Qe&&Qe.length===0)return;const Ee=ae.geometry.type,it=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2);let ut=[],at=ae.id;if(_e.promoteId?at=ae.properties[_e.promoteId]:_e.generateId&&(at=f||0),Ee==="Point")kt(Qe,ut);else if(Ee==="MultiPoint")for(const zt of Qe)kt(zt,ut);else if(Ee==="LineString")Te(Qe,ut,it,!1);else if(Ee==="MultiLineString"){if(_e.lineMetrics){for(const zt of Qe)ut=[],Te(zt,ut,it,!1),He.push(Gt(at,"LineString",ut,ae.properties));return}Re(Qe,ut,it,!1)}else if(Ee==="Polygon")Re(Qe,ut,it,!0);else{if(Ee!=="MultiPolygon"){if(Ee==="GeometryCollection"){for(const zt of ae.geometry.geometries)Ut(He,{id:at,geometry:zt,properties:ae.properties},_e,f);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const zt of Qe){const Qt=[];Re(zt,Qt,it,!0),ut.push(Qt)}}He.push(Gt(at,Ee,ut,ae.properties))}function kt(He,ae){ae.push(Ue(He[0]),nt(He[1]),0)}function Te(He,ae,_e,f){let Qe,Ee,it=0;for(let at=0;at<He.length;at++){const zt=Ue(He[at][0]),Qt=nt(He[at][1]);ae.push(zt,Qt,0),at>0&&(it+=f?(Qe*Qt-zt*Ee)/2:Math.sqrt(Math.pow(zt-Qe,2)+Math.pow(Qt-Ee,2))),Qe=zt,Ee=Qt}const ut=ae.length-3;ae[2]=1,Xe(ae,0,ut,_e),ae[ut+2]=1,ae.size=Math.abs(it),ae.start=0,ae.end=ae.size}function Re(He,ae,_e,f){for(let Qe=0;Qe<He.length;Qe++){const Ee=[];Te(He[Qe],Ee,_e,f),ae.push(Ee)}}function Ue(He){return He/360+.5}function nt(He){const ae=Math.sin(He*Math.PI/180),_e=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return _e<0?0:_e>1?1:_e}function _t(He,ae,_e,f,Qe,Ee,it,ut){if(f/=ae,Ee>=(_e/=ae)&&it<f)return He;if(it<_e||Ee>=f)return null;const at=[];for(const zt of He){const Qt=zt.geometry;let Nt=zt.type;const rn=Qe===0?zt.minX:zt.minY,Rn=Qe===0?zt.maxX:zt.maxY;if(rn>=_e&&Rn<f){at.push(zt);continue}if(Rn<_e||rn>=f)continue;let Dn=[];if(Nt==="Point"||Nt==="MultiPoint")gt(Qt,Dn,_e,f,Qe);else if(Nt==="LineString")Kt(Qt,Dn,_e,f,Qe,!1,ut.lineMetrics);else if(Nt==="MultiLineString")Rt(Qt,Dn,_e,f,Qe,!1);else if(Nt==="Polygon")Rt(Qt,Dn,_e,f,Qe,!0);else if(Nt==="MultiPolygon")for(const mr of Qt){const Tr=[];Rt(mr,Tr,_e,f,Qe,!0),Tr.length&&Dn.push(Tr)}if(Dn.length){if(ut.lineMetrics&&Nt==="LineString"){for(const mr of Dn)at.push(Gt(zt.id,Nt,mr,zt.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(Dn.length===1?(Nt="LineString",Dn=Dn[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=Dn.length===3?"Point":"MultiPoint"),at.push(Gt(zt.id,Nt,Dn,zt.tags))}}return at.length?at:null}function gt(He,ae,_e,f,Qe){for(let Ee=0;Ee<He.length;Ee+=3){const it=He[Ee+Qe];it>=_e&&it<=f&&_n(ae,He[Ee],He[Ee+1],He[Ee+2])}}function Kt(He,ae,_e,f,Qe,Ee,it){let ut=$t(He);const at=Qe===0?pr:nn;let zt,Qt,Nt=He.start;for(let Tr=0;Tr<He.length-3;Tr+=3){const Jt=He[Tr],br=He[Tr+1],Gr=He[Tr+2],Si=He[Tr+3],Fr=He[Tr+4],yn=Qe===0?Jt:br,ar=Qe===0?Si:Fr;let Pr=!1;it&&(zt=Math.sqrt(Math.pow(Jt-Si,2)+Math.pow(br-Fr,2))),yn<_e?ar>_e&&(Qt=at(ut,Jt,br,Si,Fr,_e),it&&(ut.start=Nt+zt*Qt)):yn>f?ar<f&&(Qt=at(ut,Jt,br,Si,Fr,f),it&&(ut.start=Nt+zt*Qt)):_n(ut,Jt,br,Gr),ar<_e&&yn>=_e&&(Qt=at(ut,Jt,br,Si,Fr,_e),Pr=!0),ar>f&&yn<=f&&(Qt=at(ut,Jt,br,Si,Fr,f),Pr=!0),!Ee&&Pr&&(it&&(ut.end=Nt+zt*Qt),ae.push(ut),ut=$t(He)),it&&(Nt+=zt)}let rn=He.length-3;const Rn=He[rn],Dn=He[rn+1],mr=Qe===0?Rn:Dn;mr>=_e&&mr<=f&&_n(ut,Rn,Dn,He[rn+2]),rn=ut.length-3,Ee&&rn>=3&&(ut[rn]!==ut[0]||ut[rn+1]!==ut[1])&&_n(ut,ut[0],ut[1],ut[2]),ut.length&&ae.push(ut)}function $t(He){const ae=[];return ae.size=He.size,ae.start=He.start,ae.end=He.end,ae}function Rt(He,ae,_e,f,Qe,Ee){for(const it of He)Kt(it,ae,_e,f,Qe,Ee,!1)}function _n(He,ae,_e,f){He.push(ae,_e,f)}function pr(He,ae,_e,f,Qe,Ee){const it=(Ee-ae)/(f-ae);return _n(He,Ee,_e+(Qe-_e)*it,1),it}function nn(He,ae,_e,f,Qe,Ee){const it=(Ee-_e)/(Qe-_e);return _n(He,ae+(f-ae)*it,Ee,1),it}function Xn(He,ae){const _e=[];for(let f=0;f<He.length;f++){const Qe=He[f],Ee=Qe.type;let it;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")it=Fn(Qe.geometry,ae);else if(Ee==="MultiLineString"||Ee==="Polygon"){it=[];for(const ut of Qe.geometry)it.push(Fn(ut,ae))}else if(Ee==="MultiPolygon"){it=[];for(const ut of Qe.geometry){const at=[];for(const zt of ut)at.push(Fn(zt,ae));it.push(at)}}_e.push(Gt(Qe.id,Ee,it,Qe.tags))}return _e}function Fn(He,ae){const _e=[];_e.size=He.size,He.start!==void 0&&(_e.start=He.start,_e.end=He.end);for(let f=0;f<He.length;f+=3)_e.push(He[f]+ae,He[f+1],He[f+2]);return _e}function an(He,ae){if(He.transformed)return He;const _e=1<<He.z,f=He.x,Qe=He.y;for(const Ee of He.features){const it=Ee.geometry,ut=Ee.type;if(Ee.geometry=[],ut===1)for(let at=0;at<it.length;at+=2)Ee.geometry.push(Bn(it[at],it[at+1],ae,_e,f,Qe));else for(let at=0;at<it.length;at++){const zt=[];for(let Qt=0;Qt<it[at].length;Qt+=2)zt.push(Bn(it[at][Qt],it[at][Qt+1],ae,_e,f,Qe));Ee.geometry.push(zt)}}return He.transformed=!0,He}function Bn(He,ae,_e,f,Qe,Ee){return[Math.round(_e*(He*f-Qe)),Math.round(_e*(ae*f-Ee))]}function Cr(He,ae,_e,f,Qe){const Ee=ae===Qe.maxZoom?0:Qe.tolerance/((1<<ae)*Qe.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:He.length,source:null,x:_e,y:f,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ut of He)lr(it,ut,Ee,Qe);return it}function lr(He,ae,_e,f){const Qe=ae.geometry,Ee=ae.type,it=[];if(He.minX=Math.min(He.minX,ae.minX),He.minY=Math.min(He.minY,ae.minY),He.maxX=Math.max(He.maxX,ae.maxX),He.maxY=Math.max(He.maxY,ae.maxY),Ee==="Point"||Ee==="MultiPoint")for(let ut=0;ut<Qe.length;ut+=3)it.push(Qe[ut],Qe[ut+1]),He.numPoints++,He.numSimplified++;else if(Ee==="LineString")hr(it,Qe,He,_e,!1,!1);else if(Ee==="MultiLineString"||Ee==="Polygon")for(let ut=0;ut<Qe.length;ut++)hr(it,Qe[ut],He,_e,Ee==="Polygon",ut===0);else if(Ee==="MultiPolygon")for(let ut=0;ut<Qe.length;ut++){const at=Qe[ut];for(let zt=0;zt<at.length;zt++)hr(it,at[zt],He,_e,!0,zt===0)}if(it.length){let ut=ae.tags||null;if(Ee==="LineString"&&f.lineMetrics){ut={};for(const zt in ae.tags)ut[zt]=ae.tags[zt];ut.mapbox_clip_start=Qe.start/Qe.size,ut.mapbox_clip_end=Qe.end/Qe.size}const at={geometry:it,type:Ee==="Polygon"||Ee==="MultiPolygon"?3:Ee==="LineString"||Ee==="MultiLineString"?2:1,tags:ut};ae.id!==null&&(at.id=ae.id),He.features.push(at)}}function hr(He,ae,_e,f,Qe,Ee){const it=f*f;if(f>0&&ae.size<(Qe?it:f))return void(_e.numPoints+=ae.length/3);const ut=[];for(let at=0;at<ae.length;at+=3)(f===0||ae[at+2]>it)&&(_e.numSimplified++,ut.push(ae[at],ae[at+1])),_e.numPoints++;Qe&&function(at,zt){let Qt=0;for(let Nt=0,rn=at.length,Rn=rn-2;Nt<rn;Rn=Nt,Nt+=2)Qt+=(at[Nt]-at[Rn])*(at[Nt+1]+at[Rn+1]);if(Qt>0===zt)for(let Nt=0,rn=at.length;Nt<rn/2;Nt+=2){const Rn=at[Nt],Dn=at[Nt+1];at[Nt]=at[rn-2-Nt],at[Nt+1]=at[rn-1-Nt],at[rn-2-Nt]=Rn,at[rn-1-Nt]=Dn}}(ut,Ee),He.push(ut)}const We={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ce{constructor(ae,_e){const f=(_e=this.options=function(Ee,it){for(const ut in it)Ee[ut]=it[ut];return Ee}(Object.create(We),_e)).debug;if(f&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");let Qe=function(Ee,it){const ut=[];if(Ee.type==="FeatureCollection")for(let at=0;at<Ee.features.length;at++)Ut(ut,Ee.features[at],it,at);else Ut(ut,Ee.type==="Feature"?Ee:{geometry:Ee},it);return ut}(ae,_e);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Qe=function(Ee,it){const ut=it.buffer/it.extent;let at=Ee;const zt=_t(Ee,1,-1-ut,ut,0,-1,2,it),Qt=_t(Ee,1,1-ut,2+ut,0,-1,2,it);return(zt||Qt)&&(at=_t(Ee,1,-ut,1+ut,0,-1,2,it)||[],zt&&(at=Xn(zt,1).concat(at)),Qt&&(at=at.concat(Xn(Qt,-1)))),at}(Qe,_e),Qe.length&&this.splitTile(Qe,0,0,0),f&&(Qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,_e,f,Qe,Ee,it,ut){const at=[ae,_e,f,Qe],zt=this.options,Qt=zt.debug;for(;at.length;){Qe=at.pop(),f=at.pop(),_e=at.pop(),ae=at.pop();const Nt=1<<_e,rn=ye(_e,f,Qe);let Rn=this.tiles[rn];if(!Rn&&(Qt>1&&console.time("creation"),Rn=this.tiles[rn]=Cr(ae,_e,f,Qe,zt),this.tileCoords.push({z:_e,x:f,y:Qe}),Qt)){Qt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,f,Qe,Rn.numFeatures,Rn.numPoints,Rn.numSimplified),console.timeEnd("creation"));const Pr=`z${_e}`;this.stats[Pr]=(this.stats[Pr]||0)+1,this.total++}if(Rn.source=ae,Ee==null){if(_e===zt.indexMaxZoom||Rn.numPoints<=zt.indexMaxPoints)continue}else{if(_e===zt.maxZoom||_e===Ee)continue;if(Ee!=null){const Pr=Ee-_e;if(f!==it>>Pr||Qe!==ut>>Pr)continue}}if(Rn.source=null,ae.length===0)continue;Qt>1&&console.time("clipping");const Dn=.5*zt.buffer/zt.extent,mr=.5-Dn,Tr=.5+Dn,Jt=1+Dn;let br=null,Gr=null,Si=null,Fr=null,yn=_t(ae,Nt,f-Dn,f+Tr,0,Rn.minX,Rn.maxX,zt),ar=_t(ae,Nt,f+mr,f+Jt,0,Rn.minX,Rn.maxX,zt);ae=null,yn&&(br=_t(yn,Nt,Qe-Dn,Qe+Tr,1,Rn.minY,Rn.maxY,zt),Gr=_t(yn,Nt,Qe+mr,Qe+Jt,1,Rn.minY,Rn.maxY,zt),yn=null),ar&&(Si=_t(ar,Nt,Qe-Dn,Qe+Tr,1,Rn.minY,Rn.maxY,zt),Fr=_t(ar,Nt,Qe+mr,Qe+Jt,1,Rn.minY,Rn.maxY,zt),ar=null),Qt>1&&console.timeEnd("clipping"),at.push(br||[],_e+1,2*f,2*Qe),at.push(Gr||[],_e+1,2*f,2*Qe+1),at.push(Si||[],_e+1,2*f+1,2*Qe),at.push(Fr||[],_e+1,2*f+1,2*Qe+1)}}getTile(ae,_e,f){ae=+ae,_e=+_e,f=+f;const Qe=this.options,{extent:Ee,debug:it}=Qe;if(ae<0||ae>24)return null;const ut=1<<ae,at=ye(ae,_e=_e+ut&ut-1,f);if(this.tiles[at])return an(this.tiles[at],Ee);it>1&&console.log("drilling down to z%d-%d-%d",ae,_e,f);let zt,Qt=ae,Nt=_e,rn=f;for(;!zt&&Qt>0;)Qt--,Nt>>=1,rn>>=1,zt=this.tiles[ye(Qt,Nt,rn)];return zt&&zt.source?(it>1&&(console.log("found parent tile z%d-%d-%d",Qt,Nt,rn),console.time("drilling down")),this.splitTile(zt.source,Qt,Nt,rn,ae,_e,f),it>1&&console.timeEnd("drilling down"),this.tiles[at]?an(this.tiles[at],Ee):null):null}}function ye(He,ae,_e){return 32*((1<<He)*_e+ae)+He}function rt(He,ae){return ae?He.properties[ae]:He.id}function Et(He,ae){if(He==null)return!0;if(He.type==="Feature")return rt(He,ae)!=null;if(He.type==="FeatureCollection"){const _e=new Set;for(const f of He.features){const Qe=rt(f,ae);if(Qe==null||_e.has(Qe))return!1;_e.add(Qe)}return!0}return!1}function Ht(He,ae){const _e=new Map;if(He!=null)if(He.type==="Feature")_e.set(rt(He,ae),He);else for(const f of He.features)_e.set(rt(f,ae),f);return _e}class Zt extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,_e){return l._(this,void 0,void 0,function*(){const f=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Qe=this._geoJSONIndex.getTile(f.z,f.x,f.y);if(!Qe)return null;const Ee=new ie(Qe.features);let it=fe(Ee);return it.byteOffset===0&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),{vectorTile:Ee,rawData:it.buffer}})}loadData(ae){return l._(this,void 0,void 0,function*(){var _e;(_e=this._pendingRequest)===null||_e===void 0||_e.abort();const f=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.cC(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new vt(function({superclusterOptions:it,clusterProperties:ut}){if(!ut||!it)return it;const at={},zt={},Qt={accumulated:null,zoom:0},Nt={properties:null},rn=Object.keys(ut);for(const Rn of rn){const[Dn,mr]=ut[Rn],Tr=l.cJ(mr),Jt=l.cJ(typeof Dn=="string"?[Dn,["accumulated"],["get",Rn]]:Dn);at[Rn]=Tr.value,zt[Rn]=Jt.value}return it.map=Rn=>{Nt.properties=Rn;const Dn={};for(const mr of rn)Dn[mr]=at[mr].evaluate(Qt,Nt);return Dn},it.reduce=(Rn,Dn)=>{Nt.properties=Dn;for(const mr of rn)Qt.accumulated=Rn[mr],Rn[mr]=zt[mr].evaluate(Qt,Nt)},it}(ae)).load((yield this._pendingData).features):(Qe=yield this._pendingData,new ce(Qe,ae.geojsonVtOptions)),this.loaded={};const Ee={};if(f){const it=f.finish();it&&(Ee.resourceTiming={},Ee.resourceTiming[ae.source]=JSON.parse(JSON.stringify(it)))}return Ee}catch(Ee){if(delete this._pendingRequest,l.cn(Ee))return{abandoned:!0};throw Ee}var Qe})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const _e=this.loaded;return _e&&_e[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,_e){return l._(this,void 0,void 0,function*(){let f=yield this.loadGeoJSON(ae,_e);if(delete this._pendingRequest,typeof f!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(W(f,!0),ae.filter){const Qe=l.cJ(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Qe.result==="error")throw new Error(Qe.value.map(it=>`${it.key}: ${it.message}`).join(", "));f={type:"FeatureCollection",features:f.features.filter(it=>Qe.value.evaluate({zoom:0},it))}}return f})}loadGeoJSON(ae,_e){return l._(this,void 0,void 0,function*(){const{promoteId:f}=ae;if(ae.request){const Qe=yield l.j(ae.request,_e);return this._dataUpdateable=Et(Qe.data,f)?Ht(Qe.data,f):void 0,Qe.data}if(typeof ae.data=="string")try{const Qe=JSON.parse(ae.data);return this._dataUpdateable=Et(Qe,f)?Ht(Qe,f):void 0,Qe}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(Qe,Ee,it){var ut,at,zt,Qt;if(Ee.removeAll&&Qe.clear(),Ee.remove)for(const Nt of Ee.remove)Qe.delete(Nt);if(Ee.add)for(const Nt of Ee.add){const rn=rt(Nt,it);rn!=null&&Qe.set(rn,Nt)}if(Ee.update)for(const Nt of Ee.update){let rn=Qe.get(Nt.id);if(rn==null)continue;const Rn=!Nt.removeAllProperties&&(((ut=Nt.removeProperties)===null||ut===void 0?void 0:ut.length)>0||((at=Nt.addOrUpdateProperties)===null||at===void 0?void 0:at.length)>0);if((Nt.newGeometry||Nt.removeAllProperties||Rn)&&(rn=Object.assign({},rn),Qe.set(Nt.id,rn),Rn&&(rn.properties=Object.assign({},rn.properties))),Nt.newGeometry&&(rn.geometry=Nt.newGeometry),Nt.removeAllProperties)rn.properties={};else if(((zt=Nt.removeProperties)===null||zt===void 0?void 0:zt.length)>0)for(const Dn of Nt.removeProperties)Object.prototype.hasOwnProperty.call(rn.properties,Dn)&&delete rn.properties[Dn];if(((Qt=Nt.addOrUpdateProperties)===null||Qt===void 0?void 0:Qt.length)>0)for(const{key:Dn,value:mr}of Nt.addOrUpdateProperties)rn.properties[Dn]=mr}}(this._dataUpdateable,ae.dataDiff,f),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class Jn{constructor(ae){this.self=ae,this.actor=new l.H(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(_e,f)=>{if(this.externalWorkerSourceTypes[_e])throw new Error(`Worker source with name "${_e}" already registered.`);this.externalWorkerSourceTypes[_e]=f},this.self.addProtocol=l.cp,this.self.removeProtocol=l.cq,this.self.registerRTLTextPlugin=_e=>{l.cK.setMethods(_e)},this.actor.registerMessageHandler("LDT",(_e,f)=>this._getDEMWorkerSource(_e,f.source).loadTile(f)),this.actor.registerMessageHandler("RDT",(_e,f)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(_e,f.source).removeTile(f)})),this.actor.registerMessageHandler("GCEZ",(_e,f)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(_e,f.type,f.source).getClusterExpansionZoom(f)})),this.actor.registerMessageHandler("GCC",(_e,f)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(_e,f.type,f.source).getClusterChildren(f)})),this.actor.registerMessageHandler("GCL",(_e,f)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(_e,f.type,f.source).getClusterLeaves(f)})),this.actor.registerMessageHandler("LD",(_e,f)=>this._getWorkerSource(_e,f.type,f.source).loadData(f)),this.actor.registerMessageHandler("GD",(_e,f)=>this._getWorkerSource(_e,f.type,f.source).getData()),this.actor.registerMessageHandler("LT",(_e,f)=>this._getWorkerSource(_e,f.type,f.source).loadTile(f)),this.actor.registerMessageHandler("RT",(_e,f)=>this._getWorkerSource(_e,f.type,f.source).reloadTile(f)),this.actor.registerMessageHandler("AT",(_e,f)=>this._getWorkerSource(_e,f.type,f.source).abortTile(f)),this.actor.registerMessageHandler("RMT",(_e,f)=>this._getWorkerSource(_e,f.type,f.source).removeTile(f)),this.actor.registerMessageHandler("RS",(_e,f)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[_e]||!this.workerSources[_e][f.type]||!this.workerSources[_e][f.type][f.source])return;const Qe=this.workerSources[_e][f.type][f.source];delete this.workerSources[_e][f.type][f.source],Qe.removeSource!==void 0&&Qe.removeSource(f)})),this.actor.registerMessageHandler("RM",_e=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[_e],delete this.availableImages[_e],delete this.workerSources[_e],delete this.demWorkerSources[_e]})),this.actor.registerMessageHandler("SR",(_e,f)=>l._(this,void 0,void 0,function*(){this.referrer=f})),this.actor.registerMessageHandler("SRPS",(_e,f)=>this._syncRTLPluginState(_e,f)),this.actor.registerMessageHandler("IS",(_e,f)=>l._(this,void 0,void 0,function*(){this.self.importScripts(f)})),this.actor.registerMessageHandler("SI",(_e,f)=>this._setImages(_e,f)),this.actor.registerMessageHandler("UL",(_e,f)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(_e).update(f.layers,f.removedIds)})),this.actor.registerMessageHandler("SL",(_e,f)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(_e).replace(f)}))}_setImages(ae,_e){return l._(this,void 0,void 0,function*(){this.availableImages[ae]=_e;for(const f in this.workerSources[ae]){const Qe=this.workerSources[ae][f];for(const Ee in Qe)Qe[Ee].availableImages=_e}})}_syncRTLPluginState(ae,_e){return l._(this,void 0,void 0,function*(){return yield l.cK.syncState(_e,this.self.importScripts)})}_getAvailableImages(ae){let _e=this.availableImages[ae];return _e||(_e=[]),_e}_getLayerIndex(ae){let _e=this.layerIndexes[ae];return _e||(_e=this.layerIndexes[ae]=new o),_e}_getWorkerSource(ae,_e,f){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][_e]||(this.workerSources[ae][_e]={}),!this.workerSources[ae][_e][f]){const Qe={sendAsync:(Ee,it)=>(Ee.targetMapId=ae,this.actor.sendAsync(Ee,it))};switch(_e){case"vector":this.workerSources[ae][_e][f]=new B(Qe,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][_e][f]=new Zt(Qe,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][_e][f]=new this.externalWorkerSourceTypes[_e](Qe,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][_e][f]}_getDEMWorkerSource(ae,_e){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][_e]||(this.demWorkerSources[ae][_e]=new k),this.demWorkerSources[ae][_e]}}return l.i(self)&&(self.worker=new Jn(self)),Jn}),i("index",["exports","./shared"],function(l,o){var p="5.4.0";function v(){var O=new o.A(4);return o.A!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O}let x,B;const k={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(O,a,c){const C=requestAnimationFrame(I=>{M(),a(I)}),{unsubscribe:M}=o.s(O.signal,"abort",()=>{M(),cancelAnimationFrame(C),c(o.c())},!1)},frameAsync(O){return new Promise((a,c)=>{this.frame(O,a,c)})},getImageData(O,a=0){return this.getImageCanvasContext(O).getImageData(-a,-a,O.width+2*a,O.height+2*a)},getImageCanvasContext(O){const a=window.document.createElement("canvas"),c=a.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return a.width=O.width,a.height=O.height,c.drawImage(O,0,0,O.width,O.height),c},resolveURL:O=>(x||(x=document.createElement("a")),x.href=O,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class P{static testProp(a){if(!P.docStyle)return a[0];for(let c=0;c<a.length;c++)if(a[c]in P.docStyle)return a[c];return a[0]}static create(a,c,C){const M=window.document.createElement(a);return c!==void 0&&(M.className=c),C&&C.appendChild(M),M}static createNS(a,c){return window.document.createElementNS(a,c)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(a,c){a.style[P.transformProp]=c}static addEventListener(a,c,C,M={}){a.addEventListener(c,C,"passive"in M?M:M.capture)}static removeEventListener(a,c,C,M={}){a.removeEventListener(c,C,"passive"in M?M:M.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(a){const c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}static getPoint(a,c,C){const M=c.boundingClientRect;return new o.P((C.clientX-M.left)/c.x-a.clientLeft,(C.clientY-M.top)/c.y-a.clientTop)}static mousePos(a,c){const C=P.getScale(a);return P.getPoint(a,C,c)}static touchPos(a,c){const C=[],M=P.getScale(a);for(let I=0;I<c.length;I++)C.push(P.getPoint(a,M,c[I]));return C}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){const c=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),C=c.querySelectorAll("script");for(const M of C)M.remove();return P.clean(c),c.innerHTML}static isPossiblyDangerous(a,c){const C=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!C.includes("javascript:")&&!C.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){const c=a.children;for(const C of c)P.removeAttributes(C),P.clean(C)}static removeAttributes(a){for(const{name:c,value:C}of a.attributes)P.isPossiblyDangerous(c,C)&&a.removeAttribute(c)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const D={supported:!1,testSupport:function(O){!V&&W&&($?ie(O):N=O)}};let N,W,V=!1,$=!1;function ie(O){const a=O.createTexture();O.bindTexture(O.TEXTURE_2D,a);try{if(O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,W),O.isContextLost())return;D.supported=!0}catch{}O.deleteTexture(a),V=!0}var ne;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{N&&ie(N),N=null,$=!0},W.onerror=()=>{V=!0,N=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(O){let a,c,C,M;O.resetRequestQueue=()=>{a=[],c=0,C=0,M={}},O.addThrottleControl=ee=>{const se=C++;return M[se]=ee,se},O.removeThrottleControl=ee=>{delete M[ee],z()},O.getImage=(ee,se,ge=!0)=>new Promise((Oe,Ie)=>{D.supported&&(ee.headers||(ee.headers={}),ee.headers.accept="image/webp,*/*"),o.e(ee,{type:"image"}),a.push({abortController:se,requestParameters:ee,supportImageRefresh:ge,state:"queued",onError:Ge=>{Ie(Ge)},onSuccess:Ge=>{Oe(Ge)}}),z()});const I=ee=>o._(this,void 0,void 0,function*(){ee.state="running";const{requestParameters:se,supportImageRefresh:ge,onError:Oe,onSuccess:Ie,abortController:Ge}=ee,Ze=ge===!1&&!o.i(self)&&!o.g(se.url)&&(!se.headers||Object.keys(se.headers).reduce((pt,bt)=>pt&&bt==="accept",!0));c++;const dt=Ze?Y(se,Ge):o.m(se,Ge);try{const pt=yield dt;delete ee.abortController,ee.state="completed",pt.data instanceof HTMLImageElement||o.b(pt.data)?Ie(pt):pt.data&&Ie({data:yield(ct=pt.data,typeof createImageBitmap=="function"?o.f(ct):o.h(ct)),cacheControl:pt.cacheControl,expires:pt.expires})}catch(pt){delete ee.abortController,Oe(pt)}finally{c--,z()}var ct}),z=()=>{const ee=(()=>{for(const se of Object.keys(M))if(M[se]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=c;se<ee&&a.length>0;se++){const ge=a.shift();ge.abortController.signal.aborted?se--:I(ge)}},Y=(ee,se)=>new Promise((ge,Oe)=>{const Ie=new Image,Ge=ee.url,Ze=ee.credentials;Ze&&Ze==="include"?Ie.crossOrigin="use-credentials":(Ze&&Ze==="same-origin"||!o.d(Ge))&&(Ie.crossOrigin="anonymous"),se.signal.addEventListener("abort",()=>{Ie.src="",Oe(o.c())}),Ie.fetchPriority="high",Ie.onload=()=>{Ie.onerror=Ie.onload=null,ge({data:Ie})},Ie.onerror=()=>{Ie.onerror=Ie.onload=null,se.signal.aborted||Oe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Ie.src=Ge})}(ne||(ne={})),ne.resetRequestQueue();class q{constructor(a){this._transformRequestFn=a}transformRequest(a,c){return this._transformRequestFn&&this._transformRequestFn(a,c)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function te(O){const a=[];if(typeof O=="string")a.push({id:"default",url:O});else if(O&&O.length>0){const c=[];for(const{id:C,url:M}of O){const I=`${C}${M}`;c.indexOf(I)===-1&&(c.push(I),a.push({id:C,url:M}))}}return a}function G(O,a,c){try{const C=new URL(O);return C.pathname+=`${a}${c}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${O}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class oe{constructor(a,c,C,M){this.context=a,this.format=C,this.texture=a.gl.createTexture(),this.update(c,M)}update(a,c,C){const{width:M,height:I}=a,z=!(this.size&&this.size[0]===M&&this.size[1]===I||C),{context:Y}=this,{gl:ee}=Y;if(this.useMipmap=!!(c&&c.useMipmap),ee.bindTexture(ee.TEXTURE_2D,this.texture),Y.pixelStoreUnpackFlipY.set(!1),Y.pixelStoreUnpack.set(1),Y.pixelStoreUnpackPremultiplyAlpha.set(this.format===ee.RGBA&&(!c||c.premultiply!==!1)),z)this.size=[M,I],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?ee.texImage2D(ee.TEXTURE_2D,0,this.format,this.format,ee.UNSIGNED_BYTE,a):ee.texImage2D(ee.TEXTURE_2D,0,this.format,M,I,0,this.format,ee.UNSIGNED_BYTE,a.data);else{const{x:se,y:ge}=C||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?ee.texSubImage2D(ee.TEXTURE_2D,0,se,ge,ee.RGBA,ee.UNSIGNED_BYTE,a):ee.texSubImage2D(ee.TEXTURE_2D,0,se,ge,M,I,ee.RGBA,ee.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ee.generateMipmap(ee.TEXTURE_2D),Y.pixelStoreUnpackFlipY.setDefault(),Y.pixelStoreUnpack.setDefault(),Y.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,c,C){const{context:M}=this,{gl:I}=M;I.bindTexture(I.TEXTURE_2D,this.texture),C!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=I.LINEAR),a!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,a),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,C||a),this.filter=a),c!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,c),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function fe(O){const{userImage:a}=O;return!!(a&&a.render&&a.render())&&(O.data.replace(new Uint8Array(a.data.buffer)),!0)}class he extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:c,promiseResolve:C}of this.requestors)C(this._getImagesForIds(c));this.requestors=[]}}getImage(a){const c=this.images[a];if(c&&!c.data&&c.spriteData){const C=c.spriteData;c.data=new o.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),c.spriteData=null}return c}addImage(a,c){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,c)&&(this.images[a]=c)}_validate(a,c){let C=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),C=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),C=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),C=!1),C}_validateStretch(a,c){if(!a)return!0;let C=0;for(const M of a){if(M[0]<C||M[1]<M[0]||c<M[1])return!1;C=M[1]}return!0}_validateContent(a,c){if(!a)return!0;if(a.length!==4)return!1;const C=c.spriteData,M=C&&C.width||c.data.width,I=C&&C.height||c.data.height;return!(a[0]<0||M<a[0]||a[1]<0||I<a[1]||a[2]<0||M<a[2]||a[3]<0||I<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,c,C=!0){const M=this.getImage(a);if(C&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[a]=c,this.updatedImages[a]=!0}removeImage(a){const c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((c,C)=>{let M=!0;if(!this.isLoaded())for(const I of a)this.images[I]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:c})})}_getImagesForIds(a){const c={};for(const C of a){let M=this.getImage(C);M||(this.fire(new o.l("styleimagemissing",{id:C})),M=this.getImage(C)),M?c[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:a,height:c}=this.atlasImage;return{width:a,height:c}}getPattern(a){const c=this.patterns[a],C=this.getImage(a);if(!C)return null;if(c&&c.position.version===C.version)return c.position;if(c)c.position.version=C.version;else{const M={w:C.data.width+2,h:C.data.height+2,x:0,y:0},I=new o.I(M,C);this.patterns[a]={bin:M,position:I}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const I in this.patterns)a.push(this.patterns[I].bin);const{w:c,h:C}=o.p(a),M=this.atlasImage;M.resize({width:c||1,height:C||1});for(const I in this.patterns){const{bin:z}=this.patterns[I],Y=z.x+1,ee=z.y+1,se=this.getImage(I).data,ge=se.width,Oe=se.height;o.R.copy(se,M,{x:0,y:0},{x:Y,y:ee},{width:ge,height:Oe}),o.R.copy(se,M,{x:0,y:Oe-1},{x:Y,y:ee-1},{width:ge,height:1}),o.R.copy(se,M,{x:0,y:0},{x:Y,y:ee+Oe},{width:ge,height:1}),o.R.copy(se,M,{x:ge-1,y:0},{x:Y-1,y:ee},{width:1,height:Oe}),o.R.copy(se,M,{x:0,y:0},{x:Y+ge,y:ee},{width:1,height:Oe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const c of a){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const C=this.getImage(c);C||o.w(`Image with ID: "${c}" was not found`),fe(C)&&this.updateImage(c,C)}}}const Me=1e20;function me(O,a,c,C,M,I,z,Y,ee){for(let se=a;se<a+C;se++)pe(O,c*I+se,I,M,z,Y,ee);for(let se=c;se<c+M;se++)pe(O,se*I+a,1,C,z,Y,ee)}function pe(O,a,c,C,M,I,z){I[0]=0,z[0]=-1e20,z[1]=Me,M[0]=O[a];for(let Y=1,ee=0,se=0;Y<C;Y++){M[Y]=O[a+Y*c];const ge=Y*Y;do{const Oe=I[ee];se=(M[Y]-M[Oe]+ge-Oe*Oe)/(Y-Oe)/2}while(se<=z[ee]&&--ee>-1);ee++,I[ee]=Y,z[ee]=se,z[ee+1]=Me}for(let Y=0,ee=0;Y<C;Y++){for(;z[ee+1]<Y;)ee++;const se=I[ee],ge=Y-se;O[a+Y*c]=M[se]+ge*ge}}class qe{constructor(a,c){this.requestManager=a,this.localIdeographFontFamily=c,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){const c=[];for(const I in a)for(const z of a[I])c.push(this._getAndCacheGlyphsPromise(I,z));const C=yield Promise.all(c),M={};for(const{stack:I,id:z,glyph:Y}of C)M[I]||(M[I]={}),M[I][z]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};return M})}_getAndCacheGlyphsPromise(a,c){return o._(this,void 0,void 0,function*(){let C=this.entries[a];C||(C=this.entries[a]={glyphs:{},requests:{},ranges:{}});let M=C.glyphs[c];if(M!==void 0)return{stack:a,id:c,glyph:M};if(M=this._tinySDF(C,a,c),M)return C.glyphs[c]=M,{stack:a,id:c,glyph:M};const I=Math.floor(c/256);if(256*I>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[I])return{stack:a,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[I]){const Y=qe.loadGlyphRange(a,I,this.url,this.requestManager);C.requests[I]=Y}const z=yield C.requests[I];for(const Y in z)this._doesCharSupportLocalGlyph(+Y)||(C.glyphs[+Y]=z[+Y]);return C.ranges[I]=!0,{stack:a,id:c,glyph:z[c]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,c,C){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(C))return;let I=a.tinySDF;if(!I){let Y="400";/bold/i.test(c)?Y="900":/medium/i.test(c)?Y="500":/light/i.test(c)&&(Y="200"),I=a.tinySDF=new qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:Y})}const z=I.draw(String.fromCharCode(C));return{id:C,bitmap:new o.q({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}qe.loadGlyphRange=function(O,a,c,C){return o._(this,void 0,void 0,function*(){const M=256*a,I=M+255,z=C.transformRequest(c.replace("{fontstack}",O).replace("{range}",`${M}-${I}`),"Glyphs"),Y=yield o.n(z,new AbortController);if(!Y||!Y.data)throw new Error(`Could not load glyph range. range: ${a}, ${M}-${I}`);const ee={};for(const se of o.o(Y.data))ee[se.id]=se;return ee})},qe.TinySDF=class{constructor({fontSize:O=24,buffer:a=3,radius:c=8,cutoff:C=.25,fontFamily:M="sans-serif",fontWeight:I="normal",fontStyle:z="normal"}={}){this.buffer=a,this.cutoff=C,this.radius=c;const Y=this.size=O+4*a,ee=this._createCanvas(Y),se=this.ctx=ee.getContext("2d",{willReadFrequently:!0});se.font=`${z} ${I} ${O}px ${M}`,se.textBaseline="alphabetic",se.textAlign="left",se.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y)}_createCanvas(O){const a=document.createElement("canvas");return a.width=a.height=O,a}draw(O){const{width:a,actualBoundingBoxAscent:c,actualBoundingBoxDescent:C,actualBoundingBoxLeft:M,actualBoundingBoxRight:I}=this.ctx.measureText(O),z=Math.ceil(c),Y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-M))),ee=Math.min(this.size-this.buffer,z+Math.ceil(C)),se=Y+2*this.buffer,ge=ee+2*this.buffer,Oe=Math.max(se*ge,0),Ie=new Uint8ClampedArray(Oe),Ge={data:Ie,width:se,height:ge,glyphWidth:Y,glyphHeight:ee,glyphTop:z,glyphLeft:0,glyphAdvance:a};if(Y===0||ee===0)return Ge;const{ctx:Ze,buffer:dt,gridInner:ct,gridOuter:pt}=this;Ze.clearRect(dt,dt,Y,ee),Ze.fillText(O,dt,dt+z);const bt=Ze.getImageData(dt,dt,Y,ee);pt.fill(Me,0,Oe),ct.fill(0,0,Oe);for(let Bt=0;Bt<ee;Bt++)for(let wt=0;wt<Y;wt++){const It=bt.data[4*(Bt*Y+wt)+3]/255;if(It===0)continue;const Pt=(Bt+dt)*se+wt+dt;if(It===1)pt[Pt]=0,ct[Pt]=Me;else{const Lt=.5-It;pt[Pt]=Lt>0?Lt*Lt:0,ct[Pt]=Lt<0?Lt*Lt:0}}me(pt,0,0,se,ge,se,this.f,this.v,this.z),me(ct,dt,dt,Y,ee,se,this.f,this.v,this.z);for(let Bt=0;Bt<Oe;Bt++){const wt=Math.sqrt(pt[Bt])-Math.sqrt(ct[Bt]);Ie[Bt]=Math.round(255-255*(wt/this.radius+this.cutoff))}return Ge}};class Se{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,c){return o.z(a.expression.evaluate(c))}interpolate(a,c,C){return{x:o.B.number(a.x,c.x,C),y:o.B.number(a.y,c.y,C),z:o.B.number(a.z,c.z,C)}}}let vt;class Je extends o.E{constructor(a){super(),vt=vt||new o.r({anchor:new o.D(o.v.light.anchor),position:new Se,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(vt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,c={}){if(!this._validate(o.t,a,c))for(const C in a){const M=a[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,C){return(!C||C.validate!==!1)&&o.x(this,a.call(o.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Ke=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class je extends o.E{constructor(a){super(),this._transitionable=new o.T(Ke),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(a,c={}){if(!this._validate(o.F,a,c)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in a){const M=a[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,C={}){return(C==null?void 0:C.validate)!==!1&&o.x(this,a.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Pe{constructor(a,c){this.width=a,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,c){const C=a.join(",")+String(c);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(a,c)),this.dashEntry[C]}getDashRanges(a,c,C){const M=[];let I=a.length%2==1?-a[a.length-1]*C:0,z=a[0]*C,Y=!0;M.push({left:I,right:z,isDash:Y,zeroLength:a[0]===0});let ee=a[0];for(let se=1;se<a.length;se++){Y=!Y;const ge=a[se];I=ee*C,ee+=ge,z=ee*C,M.push({left:I,right:z,isDash:Y,zeroLength:ge===0})}return M}addRoundDash(a,c,C){const M=c/2;for(let I=-C;I<=C;I++){const z=this.width*(this.nextRow+C+I);let Y=0,ee=a[Y];for(let se=0;se<this.width;se++){se/ee.right>1&&(ee=a[++Y]);const ge=Math.abs(se-ee.left),Oe=Math.abs(se-ee.right),Ie=Math.min(ge,Oe);let Ge;const Ze=I/C*(M+1);if(ee.isDash){const dt=M-Math.abs(Ze);Ge=Math.sqrt(Ie*Ie+dt*dt)}else Ge=M-Math.sqrt(Ie*Ie+Ze*Ze);this.data[z+se]=Math.max(0,Math.min(255,Ge+128))}}}addRegularDash(a){for(let Y=a.length-1;Y>=0;--Y){const ee=a[Y],se=a[Y+1];ee.zeroLength?a.splice(Y,1):se&&se.isDash===ee.isDash&&(se.left=ee.left,a.splice(Y,1))}const c=a[0],C=a[a.length-1];c.isDash===C.isDash&&(c.left=C.left-this.width,C.right=c.right+this.width);const M=this.width*this.nextRow;let I=0,z=a[I];for(let Y=0;Y<this.width;Y++){Y/z.right>1&&(z=a[++I]);const ee=Math.abs(Y-z.left),se=Math.abs(Y-z.right),ge=Math.min(ee,se);this.data[M+Y]=Math.max(0,Math.min(255,(z.isDash?ge:-ge)+128))}}addDash(a,c){const C=c?7:0,M=2*C+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let I=0;for(let Y=0;Y<a.length;Y++)I+=a[Y];if(I!==0){const Y=this.width/I,ee=this.getDashRanges(a,this.width,Y);c?this.addRoundDash(ee,Y,C):this.addRegularDash(ee)}const z={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:I};return this.nextRow+=M,this.dirty=!0,z}bind(a){const c=a.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Le="maplibre_preloaded_worker_pool";class Xe{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}const Ct=Math.floor(k.hardwareConcurrency/2);let Gt,mt;function Ut(){return Gt||(Gt=new Xe),Gt}Xe.workerCount=o.G(globalThis)?Math.max(Math.min(Ct,3),1):1;class kt{constructor(a,c){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=c;const C=this.workerPool.acquire(c);for(let M=0;M<C.length;M++){const I=new o.H(C[M],c);I.name=`Worker ${M}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,c){const C=[];for(const M of this.actors)C.push(M.sendAsync({type:a,data:c}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,c){for(const C of this.actors)C.registerMessageHandler(a,c)}}function Te(){return mt||(mt=new kt(Ut(),o.J),mt.registerMessageHandler("GR",(O,a,c)=>o.m(a,c))),mt}function Re(O,a){const c=o.K();return o.L(c,c,[1,1,0]),o.M(c,c,[.5*O.width,.5*O.height,1]),O.calculatePosMatrix?o.N(c,c,O.calculatePosMatrix(a.toUnwrapped())):c}function Ue(O,a,c,C,M,I,z){var Y;const ee=function(Ie,Ge,Ze){if(Ie)for(const dt of Ie){const ct=Ge[dt];if(ct&&ct.source===Ze&&ct.type==="fill-extrusion")return!0}else for(const dt in Ge){const ct=Ge[dt];if(ct.source===Ze&&ct.type==="fill-extrusion")return!0}return!1}((Y=M==null?void 0:M.layers)!==null&&Y!==void 0?Y:null,a,O.id),se=I.maxPitchScaleFactor(),ge=O.tilesIn(C,se,ee);ge.sort(nt);const Oe=[];for(const Ie of ge)Oe.push({wrappedTileID:Ie.tileID.wrapped().key,queryResults:Ie.tile.queryRenderedFeatures(a,c,O._state,Ie.queryGeometry,Ie.cameraQueryGeometry,Ie.scale,M,I,se,Re(O.transform,Ie.tileID),z?(Ge,Ze)=>z(Ie.tileID,Ge,Ze):void 0)});return function(Ie,Ge){for(const Ze in Ie)for(const dt of Ie[Ze])_t(dt,Ge);return Ie}(function(Ie){const Ge={},Ze={};for(const dt of Ie){const ct=dt.queryResults,pt=dt.wrappedTileID,bt=Ze[pt]=Ze[pt]||{};for(const Bt in ct){const wt=ct[Bt],It=bt[Bt]=bt[Bt]||{},Pt=Ge[Bt]=Ge[Bt]||[];for(const Lt of wt)It[Lt.featureIndex]||(It[Lt.featureIndex]=!0,Pt.push(Lt))}}return Ge}(Oe),O)}function nt(O,a){const c=O.tileID,C=a.tileID;return c.overscaledZ-C.overscaledZ||c.canonical.y-C.canonical.y||c.wrap-C.wrap||c.canonical.x-C.canonical.x}function _t(O,a){const c=O.feature,C=a.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=C}function gt(O,a,c){return o._(this,void 0,void 0,function*(){let C=O;if(O.url?C=(yield o.j(a.transformRequest(O.url,"Source"),c)).data:yield k.frameAsync(c),!C)return null;const M=o.O(o.e(C,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(M.vectorLayerIds=C.vector_layers.map(I=>I.id)),M})}class Kt{constructor(a,c){a&&(c?this.setSouthWest(a).setNorthEast(c):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}extend(a){const c=this._sw,C=this._ne;let M,I;if(a instanceof o.Q)M=a,I=a;else{if(!(a instanceof Kt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Kt.convert(a)):this.extend(o.Q.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.Q.convert(a)):this;if(M=a._sw,I=a._ne,!M||!I)return this}return c||C?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),C.lng=Math.max(I.lng,C.lng),C.lat=Math.max(I.lat,C.lat)):(this._sw=new o.Q(M.lng,M.lat),this._ne=new o.Q(I.lng,I.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:c,lat:C}=o.Q.convert(a);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&M}static convert(a){return a instanceof Kt?a:a&&new Kt(a)}static fromLngLat(a,c=0){const C=360*c/40075017,M=C/Math.cos(Math.PI/180*a.lat);return new Kt(new o.Q(a.lng-M,a.lat-C),new o.Q(a.lng+M,a.lat+C))}adjustAntiMeridian(){const a=new o.Q(this._sw.lng,this._sw.lat),c=new o.Q(this._ne.lng,this._ne.lat);return new Kt(a,a.lng>c.lng?new o.Q(c.lng+360,c.lat):c)}}class $t{constructor(a,c,C){this.bounds=Kt.convert(this.validateBounds(a)),this.minzoom=c||0,this.maxzoom=C||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const c=Math.pow(2,a.z),C=Math.floor(o.U(this.bounds.getWest())*c),M=Math.floor(o.S(this.bounds.getNorth())*c),I=Math.ceil(o.U(this.bounds.getEast())*c),z=Math.ceil(o.S(this.bounds.getSouth())*c);return a.x>=C&&a.x<I&&a.y>=M&&a.y<z}}class Rt extends o.E{constructor(a,c,C,M){if(super(),this.id=a,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield gt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new $t(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(c,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((I,z)=>{a.reloadPromise={resolve:I,reject:z}})}else a.actor=this.dispatcher.getActor(),M="LT";a.abortController=new AbortController;try{const I=yield a.actor.sendAsync({type:M,data:C},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,I)}catch(I){if(delete a.abortController,a.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,c){if(c&&c.resourceTiming&&(a.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&a.setExpiryData(c),a.loadVectorData(c,this.map.painter),a.reloadPromise){const C=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(C.resolve).catch(C.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class _n extends o.E{constructor(a,c,C,M){super(),this.id=a,this.dispatcher=C,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.O(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield gt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new $t(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(c){this._tileJSONRequest=null,this.fire(new o.k(c))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const C=yield ne.getImage(this.map._requestManager.transformRequest(c,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&C.cacheControl&&C.expires&&a.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const M=this.map.painter.context,I=M.gl,z=C.data;a.texture=this.map.painter.getTileTexture(z.width),a.texture?a.texture.update(z,{useMipmap:!0}):(a.texture=new oe(M,z,I.RGBA,{useMipmap:!0}),a.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(C){if(delete a.abortController,a.aborted)a.state="unloaded";else if(C)throw a.state="errored",C}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class pr extends _n{constructor(a,c,C,M){super(a,c,C,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(c,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const M=yield ne.getImage(C,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(M&&M.data){const I=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&a.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const z=o.b(I)&&o.V()?I:yield this.readImageNow(I),Y={type:this.type,uid:a.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const ee=yield a.actor.sendAsync({type:"LDT",data:Y});a.dem=ee,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(M){if(delete a.abortController,a.aborted)a.state="unloaded";else if(M)throw a.state="errored",M}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.W()){const c=a.width+2,C=a.height+2;try{return new o.R({width:c,height:C},yield o.X(a,-1,-1,c,C))}catch{}}return k.getImageData(a,1)})}_getNeighboringTiles(a){const c=a.canonical,C=Math.pow(2,c.z),M=(c.x-1+C)%C,I=c.x===0?a.wrap-1:a.wrap,z=(c.x+1+C)%C,Y=c.x+1===C?a.wrap+1:a.wrap,ee={};return ee[new o.Y(a.overscaledZ,I,c.z,M,c.y).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,Y,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(ee[new o.Y(a.overscaledZ,I,c.z,M,c.y-1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,Y,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<C&&(ee[new o.Y(a.overscaledZ,I,c.z,M,c.y+1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,Y,c.z,z,c.y+1).key]={backfilled:!1}),ee}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class nn extends o.E{constructor(a,c,C,M){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=C.getActor(),this.setEventedParent(M),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(c=>c.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const a=new Kt,c=yield this.getData();let C;switch(c.type){case"FeatureCollection":C=c.features.map(M=>this.getCoordinatesFromGeometry(M.geometry)).flat(1/0);break;case"Feature":C=this.getCoordinatesFromGeometry(c.geometry);break;default:C=this.getCoordinatesFromGeometry(c)}if(C.length==0)return a;for(let M=0;M<C.length-1;M+=2)a.extend([C[M],C[M+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,c,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:c,offset:C}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);a?c.dataDiff=a:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(k.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||C.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let M=null;C.resourceTiming&&C.resourceTiming[this.id]&&(M=C.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&o.e(I,{resourceTiming:M}),this.fire(new o.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))}catch(C){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(C))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.actor?"RT":"LT";a.actor=this.actor;const C={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:C},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Xn extends o.E{constructor(a,c,C,M){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=C,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,a&&(this.coordinates=a),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.k(c))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const c=a.map(o.$.fromLngLat);var C;return this.tileID=function(M){let I=1/0,z=1/0,Y=-1/0,ee=-1/0;for(const Ie of M)I=Math.min(I,Ie.x),z=Math.min(z,Ie.y),Y=Math.max(Y,Ie.x),ee=Math.max(ee,Ie.y);const se=Math.max(Y-I,ee-z),ge=Math.max(0,Math.floor(-Math.log(se)/Math.LN2)),Oe=Math.pow(2,ge);return new o.a1(ge,Math.floor((I+Y)/2*Oe),Math.floor((z+ee)/2*Oe))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,c=a.gl;this.texture||(this.texture=new oe(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const I=this.tiles[M];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,C=!0)}C&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let c=1/0,C=1/0,M=-1/0,I=-1/0;for(const Y of a)c=Math.min(c,Y.x),C=Math.min(C,Y.y),M=Math.max(M,Y.x),I=Math.max(I,Y.y);const z={};for(let Y=0;Y<=o.a0;Y++){const ee=Math.pow(2,Y),se=Math.floor(c*ee),ge=Math.floor(C*ee),Oe=Math.floor(M*ee),Ie=Math.floor(I*ee);z[Y]={minTileX:se,minTileY:ge,maxTileX:Oe,maxTileY:Ie}}return z}}class Fn extends Xn{constructor(a,c,C,M){super(a,c,C,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const c of a.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,c=a.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new oe(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const I=this.tiles[M];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,C=!0)}C&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class an extends Xn{constructor(a,c,C,M){super(a,c,C,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(I=>!Array.isArray(I)||I.length!==2||I.some(z=>typeof z!="number"))||this.fire(new o.k(new o.a3(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a3(`sources.${a}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a3(`sources.${a}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,C=c.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(c,this.canvas,C.RGBA,{premultiply:!0});let M=!1;for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,M=!0)}M&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Bn={},Cr=O=>{switch(O){case"geojson":return nn;case"image":return Xn;case"raster":return _n;case"raster-dem":return pr;case"vector":return Rt;case"video":return Fn;case"canvas":return an}return Bn[O]},lr="RTLPluginLoaded";class hr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Te()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(c,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=k.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(lr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let We=null;function ce(){return We||(We=new hr),We}class ye{constructor(a,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const c=a+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,c,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(M,I){const z={};if(!I)return z;for(const Y of M){const ee=Y.layerIds.map(se=>I.getLayer(se)).filter(Boolean);if(ee.length!==0){Y.layers=ee,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(se=>ee.filter(ge=>ge.id===se)[0]));for(const se of ee)z[se.id]=Y}}return z}(a.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const I=this.buckets[M];if(I instanceof o.a6){if(this.hasSymbolBuckets=!0,!C)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const I=this.buckets[M];if(I instanceof o.a6&&I.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const I=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(I))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const C in this.buckets){const M=this.buckets[C];M.uploadPending()&&M.upload(a)}const c=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(a,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(a,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,c,C,M,I,z,Y,ee,se,ge,Oe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:I,scale:z,tileSize:this.tileSize,pixelPosMatrix:ge,transform:ee,params:Y,queryPadding:this.queryPadding*se,getElevation:Oe},a,c,C):{}}querySourceFeatures(a,c){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const M=C.loadVTLayers(),I=c&&c.sourceLayer?c.sourceLayer:"",z=M._geojsonTileLayer||M[I];if(!z)return;const Y=o.a7(c&&c.filter),{z:ee,x:se,y:ge}=this.tileID.canonical,Oe={z:ee,x:se,y:ge};for(let Ie=0;Ie<z.length;Ie++){const Ge=z.feature(Ie);if(Y.needGeometry){const ct=o.a8(Ge,!0);if(!Y.filter(new o.C(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!Y.filter(new o.C(this.tileID.overscaledZ),Ge))continue;const Ze=C.getId(Ge,I),dt=new o.a9(Ge,ee,se,ge,Ze);dt.tile=Oe,a.push(dt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const C=o.aa(a.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const C=Date.now();let M=!1;if(this.expirationTime>C)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const I=this.expirationTime-c;I?this.expirationTime=C+Math.max(I,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const I=this.buckets[M],z=I.layers[0].sourceLayer||"_geojsonTileLayer",Y=C[z],ee=a[z];if(!Y||!ee||Object.keys(ee).length===0)continue;I.update(ee,Y,this.imageAtlas&&this.imageAtlas.patternPositions||{});const se=c&&c.style&&c.style.getLayer(M);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=k.now()+a}setDependencies(a,c){const C={};for(const M of c)C[M]=!0;this.dependencies[a]=C}hasDependency(a,c){for(const C of a){const M=this.dependencies[C];if(M){for(const I of c)if(M[I])return!0}}return!1}}class rt{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,C){const M=a.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const I={value:c,timeout:void 0};if(C!==void 0&&(I.timeout=setTimeout(()=>{this.remove(a,I)},C)),this.data[M].push(I),this.order.push(M),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const C=a.wrapped().key,M=c===void 0?0:this.data[C].indexOf(c),I=this.data[C][M];return this.data[C].splice(M,1),I.timeout&&clearTimeout(I.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(I.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const C in this.data)for(const M of this.data[C])a(M.value)||c.push(M);for(const C of c)this.remove(C.value.tileID,C)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,C){const M=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][M]=this.stateChanges[a][M]||{},o.e(this.stateChanges[a][M],C),this.deletedStates[a]===null){this.deletedStates[a]={};for(const I in this.state[a])I!==M&&(this.deletedStates[a][I]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][M]===null){this.deletedStates[a][M]={};for(const I in this.state[a][M])C[I]||(this.deletedStates[a][M][I]=null)}else for(const I in C)this.deletedStates[a]&&this.deletedStates[a][M]&&this.deletedStates[a][M][I]===null&&delete this.deletedStates[a][M][I]}removeFeatureState(a,c,C){if(this.deletedStates[a]===null)return;const M=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},C&&c!==void 0)this.deletedStates[a][M]!==null&&(this.deletedStates[a][M]=this.deletedStates[a][M]||{},this.deletedStates[a][M][C]=null);else if(c!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][M])for(C in this.deletedStates[a][M]={},this.stateChanges[a][M])this.deletedStates[a][M][C]=null;else this.deletedStates[a][M]=null;else this.deletedStates[a]=null}getState(a,c){const C=String(c),M=o.e({},(this.state[a]||{})[C],(this.stateChanges[a]||{})[C]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const I=this.deletedStates[a][c];if(I===null)return{};for(const z in I)delete M[z]}return M}initializeTileState(a,c){a.setFeatureState(this.state,c)}coalesceChanges(a,c){const C={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const I={};for(const z in this.stateChanges[M])this.state[M][z]||(this.state[M][z]={}),o.e(this.state[M][z],this.stateChanges[M][z]),I[z]=this.state[M][z];C[M]=I}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const I={};if(this.deletedStates[M]===null)for(const z in this.state[M])I[z]={},this.state[M][z]={};else for(const z in this.deletedStates[M]){if(this.deletedStates[M][z]===null)this.state[M][z]={};else for(const Y of Object.keys(this.deletedStates[M][z]))delete this.state[M][z][Y];I[z]=this.state[M][z]}C[M]=C[M]||{},o.e(C[M],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const M in a)a[M].setFeatureState(C,c)}}const Ht=89.25;function Zt(O,a){const c=o.ae(a.lat,-85.051129,o.af);return new o.P(o.U(a.lng)*O,o.S(c)*O)}function Jn(O,a){return new o.$(a.x/O,a.y/O).toLngLat()}function He(O){return O.cameraToCenterDistance*Math.min(.85*Math.tan(o.ab(90-O.pitch)),Math.tan(o.ab(Ht-O.pitch)))}function ae(O,a){const c=O.canonical,C=a/o.ac(c.z),M=c.x+Math.pow(2,c.z)*O.wrap,I=o.ad(new Float64Array(16));return o.L(I,I,[M*C,c.y*C,0]),o.M(I,I,[C/o.Z,C/o.Z,1]),I}function _e(O,a,c,C,M){const I=o.$.fromLngLat(O,a),z=M*o.ag(1,O.lat),Y=z*Math.cos(o.ab(c)),ee=Math.sqrt(z*z-Y*Y),se=ee*Math.sin(o.ab(-C)),ge=ee*Math.cos(o.ab(-C));return new o.$(I.x+se,I.y+ge,I.z+Y)}function f(O,a,c){const C=a.intersectsFrustum(O);if(!c)return C;const M=a.intersectsPlane(c);return C===0||M===0?0:C===2&&M===2?2:1}function Qe(O,a,c){let C=0;const M=(c-a)/10;for(let I=0;I<10;I++)C+=M*Math.pow(Math.cos(a+(I+.5)/10*(c-a)),O);return C}function Ee(O,a){return function(c,C,M,I,z){const Y=2*((O-1)/o.ah(Math.cos(o.ab(Ht-z))/Math.cos(o.ab(Ht)))-1),ee=Math.acos(M/I),se=2*Qe(Y-1,0,o.ab(z/2)),ge=Math.min(o.ab(Ht),ee+o.ab(z/2)),Oe=Qe(Y-1,Math.min(ge,ee-o.ab(z/2)),ge),Ie=Math.atan(C/M),Ge=Math.hypot(C,M);let Ze=c;return Ze+=o.ah(I/Ge/Math.max(.5,Math.cos(o.ab(z/2)))),Ze+=Y*o.ah(Math.cos(Ie))/2,Ze-=o.ah(Math.max(1,Oe/se/a))/2,Ze}}const it=Ee(9.314,3);function ut(O,a){const c=(a.roundZoom?Math.round:Math.floor)(O.zoom+o.ah(O.tileSize/a.tileSize));return Math.max(0,c)}function at(O,a){const c=O.getCameraFrustum(),C=O.getClippingPlane(),M=O.screenPointToMercatorCoordinate(O.getCameraPoint()),I=o.$.fromLngLat(O.center,O.elevation);M.z=I.z+Math.cos(O.pitchInRadians)*O.cameraToCenterDistance/O.worldSize;const z=O.getCoveringTilesDetailsProvider(),Y=z.allowVariableZoom(O,a),ee=ut(O,a),se=a.minzoom||0,ge=a.maxzoom!==void 0?a.maxzoom:O.maxZoom,Oe=Math.min(Math.max(0,ee),ge),Ie=Math.pow(2,Oe),Ge=[Ie*M.x,Ie*M.y,0],Ze=[Ie*I.x,Ie*I.y,0],dt=Math.hypot(I.x-M.x,I.y-M.y),ct=Math.abs(I.z-M.z),pt=Math.hypot(dt,ct),bt=It=>({zoom:0,x:0,y:0,wrap:It,fullyVisible:!1}),Bt=[],wt=[];if(O.renderWorldCopies&&z.allowWorldCopies())for(let It=1;It<=3;It++)Bt.push(bt(-It)),Bt.push(bt(It));for(Bt.push(bt(0));Bt.length>0;){const It=Bt.pop(),Pt=It.x,Lt=It.y;let sn=It.fullyVisible;const ln={x:Pt,y:Lt,z:It.zoom},on=z.getTileAABB(ln,It.wrap,O.elevation,a);if(!sn){const Vn=f(c,on,C);if(Vn===0)continue;sn=Vn===2}const Cn=z.distanceToTile2d(M.x,M.y,ln,on);let Mn=ee;Y&&(Mn=(a.calculateTileZoom||it)(O.zoom+o.ah(O.tileSize/a.tileSize),Cn,ct,pt,O.fov)),Mn=(a.roundZoom?Math.round:Math.floor)(Mn),Mn=Math.max(0,Mn);const ir=Math.min(Mn,ge);if(It.wrap=z.getWrap(I,ln,It.wrap),It.zoom>=ir){if(It.zoom<se)continue;const Vn=Oe-It.zoom,kn=Ge[0]-.5-(Pt<<Vn),Er=Ge[1]-.5-(Lt<<Vn),Vr=a.reparseOverscaled?Math.max(It.zoom,Mn):It.zoom;wt.push({tileID:new o.Y(It.zoom===ge?Vr:It.zoom,It.wrap,It.zoom,Pt,Lt),distanceSq:o.ai([Ze[0]-.5-Pt,Ze[1]-.5-Lt]),tileDistanceToCamera:Math.sqrt(kn*kn+Er*Er)})}else for(let Vn=0;Vn<4;Vn++)Bt.push({zoom:It.zoom+1,x:(Pt<<1)+Vn%2,y:(Lt<<1)+(Vn>>1),wrap:It.wrap,fullyVisible:sn})}return wt.sort((It,Pt)=>It.distanceSq-Pt.distanceSq).map(It=>It.tileID)}class zt extends o.E{constructor(a,c,C){super(),this.id=a,this.dispatcher=C,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,I,z,Y)=>{const ee=new(Cr(I.type))(M,I,z,Y);if(ee.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${ee.id}`);return ee})(a,c,C,this),this._tiles={},this._cache=new rt(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,c,C){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,c,C)}catch(M){a.state="errored",M.status!==404?this._source.fire(new o.k(M,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const C=this._tiles[c];C.upload(a),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Qt).map(a=>a.key)}getRenderableIds(a){const c=[];for(const C in this._tiles)this._isIdRenderable(C,a)&&c.push(this._tiles[C]);return a?c.sort((C,M)=>{const I=C.tileID,z=M.tileID,Y=new o.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians),ee=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return I.overscaledZ-z.overscaledZ||ee.y-Y.y||ee.x-Y.x}).map(C=>C.tileID.key):c.map(C=>C.tileID).sort(Qt).map(C=>C.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(a||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(a,c){return o._(this,void 0,void 0,function*(){const C=this._tiles[a];C&&(C.state!=="loading"&&(C.state=c),yield this._loadTile(C,a,c))})}_tileLoaded(a,c,C){a.timeAdded=k.now(),C==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const I=c[M];if(a.neighboringTiles&&a.neighboringTiles[I]){const z=this.getTileByID(I);C(a,z),C(z,a)}}function C(M,I){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let z=I.tileID.canonical.x-M.tileID.canonical.x;const Y=I.tileID.canonical.y-M.tileID.canonical.y,ee=Math.pow(2,M.tileID.canonical.z),se=I.tileID.key;z===0&&Y===0||Math.abs(Y)>1||(Math.abs(z)>1&&(Math.abs(z+ee)===1?z+=ee:Math.abs(z-ee)===1&&(z-=ee)),I.dem&&M.dem&&(M.dem.backfillBorder(I.dem,z,Y),M.neighboringTiles&&M.neighboringTiles[se]&&(M.neighboringTiles[se].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,C,M){for(const I in this._tiles){let z=this._tiles[I];if(M[I]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>C)continue;let Y=z.tileID;for(;z&&z.tileID.overscaledZ>c+1;){const se=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[se.key],z&&z.hasData()&&(Y=se)}let ee=Y;for(;ee.overscaledZ>c;)if(ee=ee.scaledTo(ee.overscaledZ-1),a[ee.key]||a[ee.canonical.key]){M[Y.key]=Y;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const C=this._loadedParentTiles[a.key];return C&&C.tileID.overscaledZ>=c?C:null}for(let C=a.overscaledZ-1;C>=c;C--){const M=a.scaledTo(C),I=this._getLoadedTile(M);if(I)return I}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const c=Math.ceil(a.width/this._source.tileSize)+1,C=Math.ceil(a.height/this._source.tileSize)+1,M=Math.floor(c*C*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(I)}handleWrapJump(a){const c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){const C={};for(const M in this._tiles){const I=this._tiles[M];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+c),C[I.tileID.key]=I}this._tiles=C;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(a,c,C,M,I,z){const Y={},ee={},se=Object.keys(a),ge=k.now();for(const Oe of se){const Ie=a[Oe],Ge=this._tiles[Oe];if(!Ge||Ge.fadeEndTime!==0&&Ge.fadeEndTime<=ge)continue;const Ze=this.findLoadedParent(Ie,c),dt=this.findLoadedSibling(Ie),ct=Ze||dt||null;ct&&(this._addTile(ct.tileID),Y[ct.tileID.key]=ct.tileID),ee[Oe]=Ie}this._retainLoadedChildren(ee,M,C,a);for(const Oe in Y)a[Oe]||(this._coveredTiles[Oe]=!0,a[Oe]=Y[Oe]);if(z){const Oe={},Ie={};for(const Ge of I)this._tiles[Ge.key].hasData()?Oe[Ge.key]=Ge:Ie[Ge.key]=Ge;for(const Ge in Ie){const Ze=Ie[Ge].children(this._source.maxzoom);this._tiles[Ze[0].key]&&this._tiles[Ze[1].key]&&this._tiles[Ze[2].key]&&this._tiles[Ze[3].key]&&(Oe[Ze[0].key]=a[Ze[0].key]=Ze[0],Oe[Ze[1].key]=a[Ze[1].key]=Ze[1],Oe[Ze[2].key]=a[Ze[2].key]=Ze[2],Oe[Ze[3].key]=a[Ze[3].key]=Ze[3],delete Ie[Ge])}for(const Ge in Ie){const Ze=Ie[Ge],dt=this.findLoadedParent(Ze,this._source.minzoom),ct=this.findLoadedSibling(Ze),pt=dt||ct||null;if(pt){Oe[pt.tileID.key]=a[pt.tileID.key]=pt.tileID;for(const bt in Oe)Oe[bt].isChildOf(pt.tileID)&&delete Oe[bt]}}for(const Ge in this._tiles)Oe[Ge]||(this._coveredTiles[Ge]=!0)}}update(a,c){if(!this._sourceLoaded||this._paused)return;let C;this.transform=a,this.terrain=c,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(ge=>new o.Y(ge.canonical.z,ge.wrap,ge.canonical.z,ge.canonical.x,ge.canonical.y)):(C=at(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter(ge=>this._source.hasTile(ge)))):C=[];const M=ut(a,this._source),I=Math.max(M-zt.maxOverzooming,this._source.minzoom),z=Math.max(M+zt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ge={};for(const Oe of C)if(Oe.canonical.z>this._source.minzoom){const Ie=Oe.scaledTo(Oe.canonical.z-1);ge[Ie.key]=Ie;const Ge=Oe.scaledTo(Math.max(this._source.minzoom,Math.min(Oe.canonical.z,5)));ge[Ge.key]=Ge}C=C.concat(Object.values(ge))}const Y=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,Y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ee=this._updateRetainedTiles(C,M);Nt(this._source.type)&&this._updateCoveredAndRetainedTiles(ee,I,z,M,C,c);for(const ge in ee)this._tiles[ge].clearFadeHold();const se=o.aj(this._tiles,ee);for(const ge of se){const Oe=this._tiles[ge];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(ge)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,c){var C;const M={},I={},z=Math.max(c-zt.maxOverzooming,this._source.minzoom),Y=Math.max(c+zt.maxUnderzooming,this._source.minzoom),ee={};for(const se of a){const ge=this._addTile(se);M[se.key]=se,ge.hasData()||c<this._source.maxzoom&&(ee[se.key]=se)}this._retainLoadedChildren(ee,c,Y,M);for(const se of a){let ge=this._tiles[se.key];if(ge.hasData())continue;if(c+1>this._source.maxzoom){const Ie=se.children(this._source.maxzoom)[0],Ge=this.getTile(Ie);if(Ge&&Ge.hasData()){M[Ie.key]=Ie;continue}}else{const Ie=se.children(this._source.maxzoom);if(M[Ie[0].key]&&M[Ie[1].key]&&M[Ie[2].key]&&M[Ie[3].key])continue}let Oe=ge.wasRequested();for(let Ie=se.overscaledZ-1;Ie>=z;--Ie){const Ge=se.scaledTo(Ie);if(I[Ge.key])break;if(I[Ge.key]=!0,ge=this.getTile(Ge),!ge&&Oe&&(ge=this._addTile(Ge)),ge){const Ze=ge.hasData();if((Ze||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||Oe)&&(M[Ge.key]=Ge),Oe=ge.wasRequested(),Ze)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let C,M=this._tiles[a].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){C=this._loadedParentTiles[M.key];break}c.push(M.key);const I=M.scaledTo(M.overscaledZ-1);if(C=this._getLoadedTile(I),C)break;M=I}for(const I of c)this._loadedParentTiles[I]=C}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const c=this._tiles[a].tileID,C=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=C}}_addTile(a){let c=this._tiles[a.key];if(c)return c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const C=c;return c||(c=new ye(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,a.key,c.state)),c.uses++,this._tiles[a.key]=c,C||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const C=c.getExpiryTimeout();C&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},C))}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(a){const c=a.sourceDataType;a.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&c==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,c,C){const M=[],I=this.transform;if(!I)return M;const z=C?I.getCameraQueryGeometry(a):a,Y=a.map(Ze=>I.screenPointToMercatorCoordinate(Ze,this.terrain)),ee=z.map(Ze=>I.screenPointToMercatorCoordinate(Ze,this.terrain)),se=this.getIds();let ge=1/0,Oe=1/0,Ie=-1/0,Ge=-1/0;for(const Ze of ee)ge=Math.min(ge,Ze.x),Oe=Math.min(Oe,Ze.y),Ie=Math.max(Ie,Ze.x),Ge=Math.max(Ge,Ze.y);for(let Ze=0;Ze<se.length;Ze++){const dt=this._tiles[se[Ze]];if(dt.holdingForFade())continue;const ct=I.getCoveringTilesDetailsProvider().allowWorldCopies()?dt.tileID:dt.tileID.unwrapTo(0),pt=Math.pow(2,I.zoom-dt.tileID.overscaledZ),bt=c*dt.queryPadding*o.Z/dt.tileSize/pt,Bt=[ct.getTilePoint(new o.$(ge,Oe)),ct.getTilePoint(new o.$(Ie,Ge))];if(Bt[0].x-bt<o.Z&&Bt[0].y-bt<o.Z&&Bt[1].x+bt>=0&&Bt[1].y+bt>=0){const wt=Y.map(Pt=>ct.getTilePoint(Pt)),It=ee.map(Pt=>ct.getTilePoint(Pt));M.push({tile:dt,tileID:ct,queryGeometry:wt,cameraQueryGeometry:It,scale:pt})}}return M}getVisibleCoordinates(a){const c=this.getRenderableIds(a).map(C=>this._tiles[C].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(Nt(this._source.type)){const a=k.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=a)return!0}return!1}setFeatureState(a,c,C){this._state.updateState(a=a||"_geojsonTileLayer",c,C)}removeFeatureState(a,c,C){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,C)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,C){const M=this._tiles[a];M&&M.setDependencies(c,C)}reloadTilesForDependencies(a,c){for(const C in this._tiles)this._tiles[C].hasDependency(a,c)&&this._reloadTile(C,"reloading");this._cache.filter(C=>!C.hasDependency(a,c))}}function Qt(O,a){const c=Math.abs(2*O.wrap)-+(O.wrap<0),C=Math.abs(2*a.wrap)-+(a.wrap<0);return O.overscaledZ-a.overscaledZ||C-c||a.canonical.y-O.canonical.y||a.canonical.x-O.canonical.x}function Nt(O){return O==="raster"||O==="image"||O==="video"}zt.maxOverzooming=10,zt.maxUnderzooming=3;class rn{constructor(a,c){this.reset(a,c)}reset(a,c){this.points=a||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ae(a,0,1);let c=1,C=this._distances[c];const M=a*this.paddedLength+this.padding;for(;C<M&&c<this._distances.length;)C=this._distances[++c];const I=c-1,z=this._distances[I],Y=C-z,ee=Y>0?(M-z)/Y:0;return this.points[I].mult(1-ee).add(this.points[c].mult(ee))}}function Rn(O,a){let c=!0;return O==="always"||O!=="never"&&a!=="never"||(c=!1),c}class Dn{constructor(a,c,C){const M=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(a/C),this.yCellCount=Math.ceil(c/C);for(let z=0;z<this.xCellCount*this.yCellCount;z++)M.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=c,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,c,C,M,I){this._forEachCell(c,C,M,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(c),this.bboxes.push(C),this.bboxes.push(M),this.bboxes.push(I)}insertCircle(a,c,C,M){this._forEachCell(c-M,C-M,c+M,C+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(c),this.circles.push(C),this.circles.push(M)}_insertBoxCell(a,c,C,M,I,z){this.boxCells[I].push(z)}_insertCircleCell(a,c,C,M,I,z){this.circleCells[I].push(z)}_query(a,c,C,M,I,z,Y){if(C<0||a>this.width||M<0||c>this.height)return[];const ee=[];if(a<=0&&c<=0&&this.width<=C&&this.height<=M){if(I)return[{key:null,x1:a,y1:c,x2:C,y2:M}];for(let se=0;se<this.boxKeys.length;se++)ee.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(let se=0;se<this.circleKeys.length;se++){const ge=this.circles[3*se],Oe=this.circles[3*se+1],Ie=this.circles[3*se+2];ee.push({key:this.circleKeys[se],x1:ge-Ie,y1:Oe-Ie,x2:ge+Ie,y2:Oe+Ie})}}else this._forEachCell(a,c,C,M,this._queryCell,ee,{hitTest:I,overlapMode:z,seenUids:{box:{},circle:{}}},Y);return ee}query(a,c,C,M){return this._query(a,c,C,M,!1,null)}hitTest(a,c,C,M,I,z){return this._query(a,c,C,M,!0,I,z).length>0}hitTestCircle(a,c,C,M,I){const z=a-C,Y=a+C,ee=c-C,se=c+C;if(Y<0||z>this.width||se<0||ee>this.height)return!1;const ge=[];return this._forEachCell(z,ee,Y,se,this._queryCellCircle,ge,{hitTest:!0,overlapMode:M,circle:{x:a,y:c,radius:C},seenUids:{box:{},circle:{}}},I),ge.length>0}_queryCell(a,c,C,M,I,z,Y,ee){const{seenUids:se,hitTest:ge,overlapMode:Oe}=Y,Ie=this.boxCells[I];if(Ie!==null){const Ze=this.bboxes;for(const dt of Ie)if(!se.box[dt]){se.box[dt]=!0;const ct=4*dt,pt=this.boxKeys[dt];if(a<=Ze[ct+2]&&c<=Ze[ct+3]&&C>=Ze[ct+0]&&M>=Ze[ct+1]&&(!ee||ee(pt))&&(!ge||!Rn(Oe,pt.overlapMode))&&(z.push({key:pt,x1:Ze[ct],y1:Ze[ct+1],x2:Ze[ct+2],y2:Ze[ct+3]}),ge))return!0}}const Ge=this.circleCells[I];if(Ge!==null){const Ze=this.circles;for(const dt of Ge)if(!se.circle[dt]){se.circle[dt]=!0;const ct=3*dt,pt=this.circleKeys[dt];if(this._circleAndRectCollide(Ze[ct],Ze[ct+1],Ze[ct+2],a,c,C,M)&&(!ee||ee(pt))&&(!ge||!Rn(Oe,pt.overlapMode))){const bt=Ze[ct],Bt=Ze[ct+1],wt=Ze[ct+2];if(z.push({key:pt,x1:bt-wt,y1:Bt-wt,x2:bt+wt,y2:Bt+wt}),ge)return!0}}}return!1}_queryCellCircle(a,c,C,M,I,z,Y,ee){const{circle:se,seenUids:ge,overlapMode:Oe}=Y,Ie=this.boxCells[I];if(Ie!==null){const Ze=this.bboxes;for(const dt of Ie)if(!ge.box[dt]){ge.box[dt]=!0;const ct=4*dt,pt=this.boxKeys[dt];if(this._circleAndRectCollide(se.x,se.y,se.radius,Ze[ct+0],Ze[ct+1],Ze[ct+2],Ze[ct+3])&&(!ee||ee(pt))&&!Rn(Oe,pt.overlapMode))return z.push(!0),!0}}const Ge=this.circleCells[I];if(Ge!==null){const Ze=this.circles;for(const dt of Ge)if(!ge.circle[dt]){ge.circle[dt]=!0;const ct=3*dt,pt=this.circleKeys[dt];if(this._circlesCollide(Ze[ct],Ze[ct+1],Ze[ct+2],se.x,se.y,se.radius)&&(!ee||ee(pt))&&!Rn(Oe,pt.overlapMode))return z.push(!0),!0}}}_forEachCell(a,c,C,M,I,z,Y,ee){const se=this._convertToXCellCoord(a),ge=this._convertToYCellCoord(c),Oe=this._convertToXCellCoord(C),Ie=this._convertToYCellCoord(M);for(let Ge=se;Ge<=Oe;Ge++)for(let Ze=ge;Ze<=Ie;Ze++)if(I.call(this,a,c,C,M,this.xCellCount*Ze+Ge,z,Y,ee))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,c,C,M,I,z){const Y=M-a,ee=I-c,se=C+z;return se*se>Y*Y+ee*ee}_circleAndRectCollide(a,c,C,M,I,z,Y){const ee=(z-M)/2,se=Math.abs(a-(M+ee));if(se>ee+C)return!1;const ge=(Y-I)/2,Oe=Math.abs(c-(I+ge));if(Oe>ge+C)return!1;if(se<=ee||Oe<=ge)return!0;const Ie=se-ee,Ge=Oe-ge;return Ie*Ie+Ge*Ge<=C*C}}function mr(O,a,c){const C=o.K();if(!O){const{vecSouth:Oe,vecEast:Ie}=Jt(a),Ge=v();Ge[0]=Ie[0],Ge[1]=Ie[1],Ge[2]=Oe[0],Ge[3]=Oe[1],M=Ge,(ge=(z=(I=Ge)[0])*(se=I[3])-(ee=I[2])*(Y=I[1]))&&(M[0]=se*(ge=1/ge),M[1]=-Y*ge,M[2]=-ee*ge,M[3]=z*ge),C[0]=Ge[0],C[1]=Ge[1],C[4]=Ge[2],C[5]=Ge[3]}var M,I,z,Y,ee,se,ge;return o.M(C,C,[1/c,1/c,1]),C}function Tr(O,a,c,C){if(O){const M=o.K();if(!a){const{vecSouth:I,vecEast:z}=Jt(c);M[0]=z[0],M[1]=z[1],M[4]=I[0],M[5]=I[1]}return o.M(M,M,[C,C,1]),M}return c.pixelsToClipSpaceMatrix}function Jt(O){const a=Math.cos(O.rollInRadians),c=Math.sin(O.rollInRadians),C=Math.cos(O.pitchInRadians),M=Math.cos(O.bearingInRadians),I=Math.sin(O.bearingInRadians),z=o.ao();z[0]=-M*C*c-I*a,z[1]=-I*C*c+M*a;const Y=o.ap(z);Y<1e-9?o.aq(z):o.ar(z,z,1/Y);const ee=o.ao();ee[0]=M*C*a-I*c,ee[1]=I*C*a+M*c;const se=o.ap(ee);return se<1e-9?o.aq(ee):o.ar(ee,ee,1/se),{vecEast:ee,vecSouth:z}}function br(O,a,c,C){let M;C?(M=[O,a,C(O,a),1],o.at(M,M,c)):(M=[O,a,0,1],So(M,M,c));const I=M[3];return{point:new o.P(M[0]/I,M[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function Gr(O,a){return .5+O/a*.5}function Si(O,a){return O.x>=-a[0]&&O.x<=a[0]&&O.y>=-a[1]&&O.y<=a[1]}function Fr(O,a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie){const Ge=c?O.textSizeData:O.iconSizeData,Ze=o.ak(Ge,a.transform.zoom),dt=[256/a.width*2+1,256/a.height*2+1],ct=c?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;ct.clear();const pt=O.lineVertexArray,bt=c?O.text.placedSymbolArray:O.icon.placedSymbolArray,Bt=a.transform.width/a.transform.height;let wt=!1;for(let It=0;It<bt.length;It++){const Pt=bt.get(It);if(Pt.hidden||Pt.writingMode===o.al.vertical&&!wt){zo(Pt.numGlyphs,ct);continue}wt=!1;const Lt=new o.P(Pt.anchorX,Pt.anchorY),sn={getElevation:Ie,pitchedLabelPlaneMatrix:C,lineVertexArray:pt,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:Lt,unwrappedTileID:ee,width:se,height:ge,translation:Oe},ln=_s(Pt.anchorX,Pt.anchorY,sn);if(!Si(ln.point,dt)){zo(Pt.numGlyphs,ct);continue}const on=Gr(a.transform.cameraToCenterDistance,ln.signedDistanceFromCamera),Cn=o.am(Ge,Ze,Pt),Mn=I?Cn*a.transform.getPitchedTextCorrection(Pt.anchorX,Pt.anchorY,ee)/on:Cn*on,ir=Pr({projectionContext:sn,pitchedLabelPlaneMatrixInverse:M,symbol:Pt,fontSize:Mn,flip:!1,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:ct,aspectRatio:Bt,rotateToLine:Y});wt=ir.useVertical,(ir.notEnoughRoom||wt||ir.needsFlipping&&Pr({projectionContext:sn,pitchedLabelPlaneMatrixInverse:M,symbol:Pt,fontSize:Mn,flip:!0,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:ct,aspectRatio:Bt,rotateToLine:Y}).notEnoughRoom)&&zo(Pt.numGlyphs,ct)}c?O.text.dynamicLayoutVertexBuffer.updateData(ct):O.icon.dynamicLayoutVertexBuffer.updateData(ct)}function yn(O,a,c,C,M,I,z,Y){const ee=I.glyphStartIndex+I.numGlyphs,se=I.lineStartIndex,ge=I.lineStartIndex+I.lineLength,Oe=a.getoffsetX(I.glyphStartIndex),Ie=a.getoffsetX(ee-1),Ge=sa(O*Oe,c,C,M,I.segment,se,ge,Y,z);if(!Ge)return null;const Ze=sa(O*Ie,c,C,M,I.segment,se,ge,Y,z);return Ze?Y.projectionCache.anyProjectionOccluded?null:{first:Ge,last:Ze}:null}function ar(O,a,c,C){return O===o.al.horizontal&&Math.abs(c.y-a.y)>Math.abs(c.x-a.x)*C?{useVertical:!0}:(O===o.al.vertical?a.y<c.y:a.x>c.x)?{needsFlipping:!0}:null}function Pr(O){const{projectionContext:a,pitchedLabelPlaneMatrixInverse:c,symbol:C,fontSize:M,flip:I,keepUpright:z,glyphOffsetArray:Y,dynamicLayoutVertexArray:ee,aspectRatio:se,rotateToLine:ge}=O,Oe=M/24,Ie=C.lineOffsetX*Oe,Ge=C.lineOffsetY*Oe;let Ze;if(C.numGlyphs>1){const dt=C.glyphStartIndex+C.numGlyphs,ct=C.lineStartIndex,pt=C.lineStartIndex+C.lineLength,bt=yn(Oe,Y,Ie,Ge,I,C,ge,a);if(!bt)return{notEnoughRoom:!0};const Bt=$r(bt.first.point.x,bt.first.point.y,a,c),wt=$r(bt.last.point.x,bt.last.point.y,a,c);if(z&&!I){const It=ar(C.writingMode,Bt,wt,se);if(It)return It}Ze=[bt.first];for(let It=C.glyphStartIndex+1;It<dt-1;It++)Ze.push(sa(Oe*Y.getoffsetX(It),Ie,Ge,I,C.segment,ct,pt,a,ge));Ze.push(bt.last)}else{if(z&&!I){const ct=ui(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,pt=C.lineStartIndex+C.segment+1,bt=new o.P(a.lineVertexArray.getx(pt),a.lineVertexArray.gety(pt)),Bt=ui(bt.x,bt.y,a),wt=Bt.signedDistanceFromCamera>0?Bt.point:Cs(a.tileAnchorPoint,bt,ct,1,a),It=$r(ct.x,ct.y,a,c),Pt=$r(wt.x,wt.y,a,c),Lt=ar(C.writingMode,It,Pt,se);if(Lt)return Lt}const dt=sa(Oe*Y.getoffsetX(C.glyphStartIndex),Ie,Ge,I,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,a,ge);if(!dt||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ze=[dt]}for(const dt of Ze)o.as(ee,dt.point,dt.angle);return{}}function Cs(O,a,c,C,M){const I=O.add(O.sub(a)._unit()),z=ui(I.x,I.y,M).point,Y=c.sub(z);return c.add(Y._mult(C/Y.mag()))}function Ao(O,a,c){const C=a.projectionCache;if(C.projections[O])return C.projections[O];const M=new o.P(a.lineVertexArray.getx(O),a.lineVertexArray.gety(O)),I=ui(M.x,M.y,a);if(I.signedDistanceFromCamera>0)return C.projections[O]=I.point,C.anyProjectionOccluded=C.anyProjectionOccluded||I.isOccluded,I.point;const z=O-c.direction;return Cs(c.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(z),a.lineVertexArray.gety(z)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,a)}function ui(O,a,c){const C=O+c.translation[0],M=a+c.translation[1];let I;return c.pitchWithMap?(I=br(C,M,c.pitchedLabelPlaneMatrix,c.getElevation),I.isOccluded=!1):(I=c.transform.projectTileCoordinates(C,M,c.unwrappedTileID,c.getElevation),I.point.x=(.5*I.point.x+.5)*c.width,I.point.y=(.5*-I.point.y+.5)*c.height),I}function $r(O,a,c,C){if(c.pitchWithMap){const M=[O,a,0,1];return o.at(M,M,C),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:O/c.width*2-1,y:a/c.height*2-1}}function _s(O,a,c){return c.transform.projectTileCoordinates(O,a,c.unwrappedTileID,c.getElevation)}function fs(O,a,c){return O._unit()._perp()._mult(a*c)}function Ja(O,a,c,C,M,I,z,Y,ee){if(Y.projectionCache.offsets[O])return Y.projectionCache.offsets[O];const se=c.add(a);if(O+ee.direction<C||O+ee.direction>=M)return Y.projectionCache.offsets[O]=se,se;const ge=Ao(O+ee.direction,Y,ee),Oe=fs(ge.sub(c),z,ee.direction),Ie=c.add(Oe),Ge=ge.add(Oe);return Y.projectionCache.offsets[O]=o.au(I,se,Ie,Ge)||se,Y.projectionCache.offsets[O]}function sa(O,a,c,C,M,I,z,Y,ee){const se=C?O-a:O+a;let ge=se>0?1:-1,Oe=0;C&&(ge*=-1,Oe=Math.PI),ge<0&&(Oe+=Math.PI);let Ie,Ge=ge>0?I+M:I+M+1;Y.projectionCache.cachedAnchorPoint?Ie=Y.projectionCache.cachedAnchorPoint:(Ie=ui(Y.tileAnchorPoint.x,Y.tileAnchorPoint.y,Y).point,Y.projectionCache.cachedAnchorPoint=Ie);let Ze,dt,ct=Ie,pt=Ie,bt=0,Bt=0;const wt=Math.abs(se),It=[];let Pt;for(;bt+Bt<=wt;){if(Ge+=ge,Ge<I||Ge>=z)return null;bt+=Bt,pt=ct,dt=Ze;const ln={absOffsetX:wt,direction:ge,distanceFromAnchor:bt,previousVertex:pt};if(ct=Ao(Ge,Y,ln),c===0)It.push(pt),Pt=ct.sub(pt);else{let on;const Cn=ct.sub(pt);on=Cn.mag()===0?fs(Ao(Ge+ge,Y,ln).sub(ct),c,ge):fs(Cn,c,ge),dt||(dt=pt.add(on)),Ze=Ja(Ge,on,ct,I,z,dt,c,Y,ln),It.push(dt),Pt=Ze.sub(dt)}Bt=Pt.mag()}const Lt=Pt._mult((wt-bt)/Bt)._add(dt||pt),sn=Oe+Math.atan2(ct.y-pt.y,ct.x-pt.x);return It.push(Lt),{point:Lt,angle:ee?sn:0,path:It}}const Wo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zo(O,a){for(let c=0;c<O;c++){const C=a.length;a.resize(C+4),a.float32.set(Wo,3*C)}}function So(O,a,c){const C=a[0],M=a[1];return O[0]=c[0]*C+c[4]*M+c[12],O[1]=c[1]*C+c[5]*M+c[13],O[3]=c[3]*C+c[7]*M+c[15],O}const pi=100;class tA{constructor(a,c=new Dn(a.width+200,a.height+200,25),C=new Dn(a.width+200,a.height+200,25)){this.transform=a,this.grid=c,this.ignoredGrid=C,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+pi,this.screenBottomBoundary=a.height+pi,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie){const Ge=this.projectAndGetPerspectiveRatio(a.anchorPointX+ee[0],a.anchorPointY+ee[1],I,ge,Ie),Ze=C*Ge.perspectiveRatio;let dt;if(z||Y)dt=this._projectCollisionBox(a,Ze,M,I,z,Y,ee,Ge,ge,Oe,Ie);else{const Pt=Ge.x+(Oe?Oe.x*Ze:0),Lt=Ge.y+(Oe?Oe.y*Ze:0);dt={allPointsOccluded:!1,box:[Pt+a.x1*Ze,Lt+a.y1*Ze,Pt+a.x2*Ze,Lt+a.y2*Ze]}}const[ct,pt,bt,Bt]=dt.box,wt=z?dt.allPointsOccluded:Ge.isOccluded;let It=wt;return It||(It=Ge.perspectiveRatio<this.perspectiveRatioCutoff),It||(It=!this.isInsideGrid(ct,pt,bt,Bt)),It||c!=="always"&&this.grid.hitTest(ct,pt,bt,Bt,c,se)?{box:[ct,pt,bt,Bt],placeable:!1,offscreen:!1,occluded:wt}:{box:[ct,pt,bt,Bt],placeable:!0,offscreen:this.isOffscreen(ct,pt,bt,Bt),occluded:wt}}placeCollisionCircles(a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie,Ge,Ze){const dt=[],ct=new o.P(c.anchorX,c.anchorY),pt=this.getPerspectiveRatio(ct.x,ct.y,z,Ze),bt=(se?I*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,z)/pt:I*pt)/o.ay,Bt={getElevation:Ze,pitchedLabelPlaneMatrix:Y,lineVertexArray:C,pitchWithMap:se,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ct,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:Ge},wt=yn(bt,M,c.lineOffsetX*bt,c.lineOffsetY*bt,!1,c,!1,Bt);let It=!1,Pt=!1,Lt=!0;if(wt){const sn=.5*Oe*pt+Ie,ln=new o.P(-100,-100),on=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Cn=new rn,Mn=wt.first,ir=wt.last;let Vn=[];for(let Vr=Mn.path.length-1;Vr>=1;Vr--)Vn.push(Mn.path[Vr]);for(let Vr=1;Vr<ir.path.length;Vr++)Vn.push(ir.path[Vr]);const kn=2.5*sn;if(se){const Vr=this.projectPathToScreenSpace(Vn,Bt);Vn=Vr.some(ci=>ci.signedDistanceFromCamera<=0)?[]:Vr.map(ci=>ci.point)}let Er=[];if(Vn.length>0){const Vr=Vn[0].clone(),ci=Vn[0].clone();for(let Yo=1;Yo<Vn.length;Yo++)Vr.x=Math.min(Vr.x,Vn[Yo].x),Vr.y=Math.min(Vr.y,Vn[Yo].y),ci.x=Math.max(ci.x,Vn[Yo].x),ci.y=Math.max(ci.y,Vn[Yo].y);Er=Vr.x>=ln.x&&ci.x<=on.x&&Vr.y>=ln.y&&ci.y<=on.y?[Vn]:ci.x<ln.x||Vr.x>on.x||ci.y<ln.y||Vr.y>on.y?[]:o.av([Vn],ln.x,ln.y,on.x,on.y)}for(const Vr of Er){Cn.reset(Vr,.25*sn);let ci=0;ci=Cn.length<=.5*sn?1:Math.ceil(Cn.paddedLength/kn)+1;for(let Yo=0;Yo<ci;Yo++){const bo=Yo/Math.max(ci-1,1),Ro=Cn.lerp(bo),Ss=Ro.x+pi,to=Ro.y+pi;dt.push(Ss,to,sn,0);const qi=Ss-sn,va=to-sn,Ca=Ss+sn,_a=to+sn;if(Lt=Lt&&this.isOffscreen(qi,va,Ca,_a),Pt=Pt||this.isInsideGrid(qi,va,Ca,_a),a!=="always"&&this.grid.hitTestCircle(Ss,to,sn,a,ge)&&(It=!0,!ee))return{circles:[],offscreen:!1,collisionDetected:It}}}}return{circles:!ee&&It||!Pt||pt<this.perspectiveRatioCutoff?[]:dt,offscreen:Lt,collisionDetected:It}}projectPathToScreenSpace(a,c){const C=function(M,I){const z=o.K();return o.an(z,I.pitchedLabelPlaneMatrix),M.map(Y=>{const ee=br(Y.x,Y.y,z,I.getElevation),se=I.transform.projectTileCoordinates(ee.point.x,ee.point.y,I.unwrappedTileID,I.getElevation);return se.point.x=(.5*se.point.x+.5)*I.width,se.point.y=(.5*-se.point.y+.5)*I.height,se})}(a,c);return function(M){let I=0,z=0,Y=0,ee=0;for(let se=0;se<M.length;se++)M[se].isOccluded?(Y=se+1,ee=0):(ee++,ee>z&&(z=ee,I=Y));return M.slice(I,I+z)}(C)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let C=1/0,M=1/0,I=-1/0,z=-1/0;for(const ge of a){const Oe=new o.P(ge.x+pi,ge.y+pi);C=Math.min(C,Oe.x),M=Math.min(M,Oe.y),I=Math.max(I,Oe.x),z=Math.max(z,Oe.y),c.push(Oe)}const Y=this.grid.query(C,M,I,z).concat(this.ignoredGrid.query(C,M,I,z)),ee={},se={};for(const ge of Y){const Oe=ge.key;if(ee[Oe.bucketInstanceId]===void 0&&(ee[Oe.bucketInstanceId]={}),ee[Oe.bucketInstanceId][Oe.featureIndex])continue;const Ie=[new o.P(ge.x1,ge.y1),new o.P(ge.x2,ge.y1),new o.P(ge.x2,ge.y2),new o.P(ge.x1,ge.y2)];o.aw(c,Ie)&&(ee[Oe.bucketInstanceId][Oe.featureIndex]=!0,se[Oe.bucketInstanceId]===void 0&&(se[Oe.bucketInstanceId]=[]),se[Oe.bucketInstanceId].push(Oe.featureIndex))}return se}insertCollisionBox(a,c,C,M,I,z){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:I,collisionGroupID:z,overlapMode:c},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,c,C,M,I,z){const Y=C?this.ignoredGrid:this.grid,ee={bucketInstanceId:M,featureIndex:I,collisionGroupID:z,overlapMode:c};for(let se=0;se<a.length;se+=4)Y.insertCircle(ee,a[se],a[se+1],a[se+2])}projectAndGetPerspectiveRatio(a,c,C,M,I){if(I){let z;M?(z=[a,c,M(a,c),1],o.at(z,z,I)):(z=[a,c,0,1],So(z,z,I));const Y=z[3];return{x:(z[0]/Y+1)/2*this.transform.width+pi,y:(-z[1]/Y+1)/2*this.transform.height+pi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y*.5,isOccluded:!1,signedDistanceFromCamera:Y}}{const z=this.transform.projectTileCoordinates(a,c,C,M);return{x:(z.point.x+1)/2*this.transform.width+pi,y:(1-z.point.y)/2*this.transform.height+pi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(a,c,C,M){const I=this.transform.projectTileCoordinates(a,c,C,M);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(a,c,C,M){return C<pi||a>=this.screenRightBoundary||M<pi||c>this.screenBottomBoundary}isInsideGrid(a,c,C,M){return C>=0&&a<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const a=o.ad([]);return o.L(a,a,[-100,-100,0]),a}_projectCollisionBox(a,c,C,M,I,z,Y,ee,se,ge,Oe){let Ie=1,Ge=0,Ze=0,dt=1;const ct=a.anchorPointX+Y[0],pt=a.anchorPointY+Y[1];if(z&&!I){const Vn=this.projectAndGetPerspectiveRatio(ct+1,pt,M,se,Oe),kn=Vn.x-ee.x,Er=Math.atan((Vn.y-ee.y)/kn)+(kn<0?Math.PI:0),Vr=Math.sin(Er),ci=Math.cos(Er);Ie=ci,Ge=Vr,Ze=-Vr,dt=ci}else if(!z&&I){const Vn=Jt(this.transform);Ie=Vn.vecEast[0],Ge=Vn.vecEast[1],Ze=Vn.vecSouth[0],dt=Vn.vecSouth[1]}let bt=ee.x,Bt=ee.y,wt=c;I&&(bt=ct,Bt=pt,wt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),wt*=this.transform.getPitchedTextCorrection(ct,pt,M),ge||(wt*=o.ae(.5+ee.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ge&&(bt+=Ie*ge.x*wt+Ze*ge.y*wt,Bt+=Ge*ge.x*wt+dt*ge.y*wt);const It=a.x1*wt,Pt=a.x2*wt,Lt=(It+Pt)/2,sn=a.y1*wt,ln=a.y2*wt,on=(sn+ln)/2,Cn=[{offsetX:It,offsetY:sn},{offsetX:Lt,offsetY:sn},{offsetX:Pt,offsetY:sn},{offsetX:Pt,offsetY:on},{offsetX:Pt,offsetY:ln},{offsetX:Lt,offsetY:ln},{offsetX:It,offsetY:ln},{offsetX:It,offsetY:on}];let Mn=[];for(const{offsetX:Vn,offsetY:kn}of Cn)Mn.push(new o.P(bt+Ie*Vn+Ze*kn,Bt+Ge*Vn+dt*kn));let ir=!1;if(I){const Vn=Mn.map(kn=>this.projectAndGetPerspectiveRatio(kn.x,kn.y,M,se,Oe));ir=Vn.some(kn=>!kn.isOccluded),Mn=Vn.map(kn=>new o.P(kn.x,kn.y))}else ir=!0;return{box:o.ax(Mn),allPointsOccluded:!ir}}}class _l{constructor(a,c,C,M){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?c:-c))):M&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Ni{constructor(a,c,C,M,I){this.text=new _l(a?a.text:null,c,C,I),this.icon=new _l(a?a.icon:null,c,M,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wr{constructor(a,c,C){this.text=a,this.icon=c,this.skipFade=C}}class Fa{constructor(a,c,C,M,I){this.bucketInstanceId=a,this.featureIndex=c,this.sourceLayerIndex=C,this.bucketIndex=M,this.tileID=I}}class bs{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const c=++this.maxGroupID;this.collisionGroups[a]={ID:c,predicate:C=>C.collisionGroupID===c}}return this.collisionGroups[a]}}function Rs(O,a,c,C,M){const{horizontalAlign:I,verticalAlign:z}=o.aE(O);return new o.P(-(I-.5)*a+C[0]*M,-(z-.5)*c+C[1]*M)}class Ve{constructor(a,c,C,M,I){this.transform=a.clone(),this.terrain=c,this.collisionIndex=new tA(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new bs(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const c=this.terrain;return c?(C,M)=>c.getElevation(a,C,M):null}getBucketParts(a,c,C,M){const I=C.getBucket(c),z=C.latestFeatureIndex;if(!I||!z||c.id!==I.layerIds[0])return;const Y=C.collisionBoxArray,ee=I.layers[0].layout,se=I.layers[0].paint,ge=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Oe=C.tileSize/o.Z,Ie=C.tileID.toUnwrapped(),Ge=ee.get("text-rotation-alignment")==="map",Ze=o.az(C,1,this.transform.zoom),dt=o.aA(this.collisionIndex.transform,C,se.get("text-translate"),se.get("text-translate-anchor")),ct=o.aA(this.collisionIndex.transform,C,se.get("icon-translate"),se.get("icon-translate-anchor")),pt=mr(Ge,this.transform,Ze);this.retainedQueryData[I.bucketInstanceId]=new Fa(I.bucketInstanceId,z,I.sourceLayerIndex,I.index,C.tileID);const bt={bucket:I,layout:ee,translationText:dt,translationIcon:ct,unwrappedTileID:Ie,pitchedLabelPlaneMatrix:pt,scale:ge,textPixelRatio:Oe,holdingForFade:C.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:o.ak(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(M)for(const Bt of I.sortKeyRanges){const{sortKey:wt,symbolInstanceStart:It,symbolInstanceEnd:Pt}=Bt;a.push({sortKey:wt,symbolInstanceStart:It,symbolInstanceEnd:Pt,parameters:bt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:bt})}attemptAnchorPlacement(a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie,Ge,Ze,dt,ct,pt,bt,Bt,wt){const It=o.aB[a.textAnchor],Pt=[a.textOffset0,a.textOffset1],Lt=Rs(It,C,M,Pt,I),sn=this.collisionIndex.placeCollisionBox(c,Ie,ee,se,ge,Y,z,ct,Oe.predicate,Bt,Lt,wt);if((!bt||this.collisionIndex.placeCollisionBox(bt,Ie,ee,se,ge,Y,z,pt,Oe.predicate,Bt,Lt,wt).placeable)&&sn.placeable){let ln;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ge.crossTileID]&&this.prevPlacement.placements[Ge.crossTileID]&&this.prevPlacement.placements[Ge.crossTileID].text&&(ln=this.prevPlacement.variableOffsets[Ge.crossTileID].anchor),Ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ge.crossTileID]={textOffset:Pt,width:C,height:M,anchor:It,textBoxScale:I,prevAnchor:ln},this.markUsedJustification(Ze,It,Ge,dt),Ze.allowVerticalPlacement&&(this.markUsedOrientation(Ze,dt,Ge),this.placedOrientations[Ge.crossTileID]=dt),{shift:Lt,placedGlyphBoxes:sn}}}placeLayerBucketPart(a,c,C){const{bucket:M,layout:I,translationText:z,translationIcon:Y,unwrappedTileID:ee,pitchedLabelPlaneMatrix:se,textPixelRatio:ge,holdingForFade:Oe,collisionBoxArray:Ie,partiallyEvaluatedTextSize:Ge,collisionGroup:Ze}=a.parameters,dt=I.get("text-optional"),ct=I.get("icon-optional"),pt=o.aC(I,"text-overlap","text-allow-overlap"),bt=pt==="always",Bt=o.aC(I,"icon-overlap","icon-allow-overlap"),wt=Bt==="always",It=I.get("text-rotation-alignment")==="map",Pt=I.get("text-pitch-alignment")==="map",Lt=I.get("icon-text-fit")!=="none",sn=I.get("symbol-z-order")==="viewport-y",ln=bt&&(wt||!M.hasIconData()||ct),on=wt&&(bt||!M.hasTextData()||dt);!M.collisionArrays&&Ie&&M.deserializeCollisionBoxes(Ie);const Cn=this.retainedQueryData[M.bucketInstanceId].tileID,Mn=this._getTerrainElevationFunc(Cn),ir=this.transform.getFastPathSimpleProjectionMatrix(Cn),Vn=(kn,Er,Vr)=>{var ci,Yo;if(c[kn.crossTileID])return;if(Oe)return void(this.placements[kn.crossTileID]=new wr(!1,!1,!1));let bo=!1,Ro=!1,Ss=!0,to=null,qi={box:null,placeable:!1,offscreen:null,occluded:!1},va={placeable:!1},Ca=null,_a=null,ta=null,yl=0,DA=0,ql=0;Er.textFeatureIndex?yl=Er.textFeatureIndex:kn.useRuntimeCollisionCircles&&(yl=kn.featureIndex),Er.verticalTextFeatureIndex&&(DA=Er.verticalTextFeatureIndex);const FA=Er.textBox;if(FA){const dA=qs=>{let os=o.al.horizontal;if(M.allowVerticalPlacement&&!qs&&this.prevPlacement){const na=this.prevPlacement.placedOrientations[kn.crossTileID];na&&(this.placedOrientations[kn.crossTileID]=na,os=na,this.markUsedOrientation(M,os,kn))}return os},qu=(qs,os)=>{if(M.allowVerticalPlacement&&kn.numVerticalGlyphVertices>0&&Er.verticalTextBox){for(const na of M.writingModes)if(na===o.al.vertical?(qi=os(),va=qi):qi=qs(),qi&&qi.placeable)break}else qi=qs()},Hl=kn.textAnchorOffsetStartIndex,cc=kn.textAnchorOffsetEndIndex;if(cc===Hl){const qs=(os,na)=>{const Es=this.collisionIndex.placeCollisionBox(os,pt,ge,Cn,ee,Pt,It,z,Ze.predicate,Mn,void 0,ir);return Es&&Es.placeable&&(this.markUsedOrientation(M,na,kn),this.placedOrientations[kn.crossTileID]=na),Es};qu(()=>qs(FA,o.al.horizontal),()=>{const os=Er.verticalTextBox;return M.allowVerticalPlacement&&kn.numVerticalGlyphVertices>0&&os?qs(os,o.al.vertical):{box:null,offscreen:null}}),dA(qi&&qi.placeable)}else{let qs=o.aB[(Yo=(ci=this.prevPlacement)===null||ci===void 0?void 0:ci.variableOffsets[kn.crossTileID])===null||Yo===void 0?void 0:Yo.anchor];const os=(Es,Tp,hc)=>{const cf=Es.x2-Es.x1,$l=Es.y2-Es.y1,LA=kn.textBoxScale,nd=Lt&&Bt==="never"?Tp:null;let cu=null,hu=pt==="never"?1:2,Tu="never";qs&&hu++;for(let Tl=0;Tl<hu;Tl++){for(let lh=Hl;lh<cc;lh++){const Sh=M.textAnchorOffsets.get(lh);if(qs&&Sh.textAnchor!==qs)continue;const Td=this.attemptAnchorPlacement(Sh,Es,cf,$l,LA,It,Pt,ge,Cn,ee,Ze,Tu,kn,M,hc,z,Y,nd,Mn);if(Td&&(cu=Td.placedGlyphBoxes,cu&&cu.placeable))return bo=!0,to=Td.shift,cu}qs?qs=null:Tu=pt}return C&&!cu&&(cu={box:this.collisionIndex.placeCollisionBox(FA,"always",ge,Cn,ee,Pt,It,z,Ze.predicate,Mn,void 0,ir).box,offscreen:!1,placeable:!1,occluded:!1}),cu};qu(()=>os(FA,Er.iconBox,o.al.horizontal),()=>{const Es=Er.verticalTextBox;return M.allowVerticalPlacement&&(!qi||!qi.placeable)&&kn.numVerticalGlyphVertices>0&&Es?os(Es,Er.verticalIconBox,o.al.vertical):{box:null,occluded:!0,offscreen:null}}),qi&&(bo=qi.placeable,Ss=qi.offscreen);const na=dA(qi&&qi.placeable);if(!bo&&this.prevPlacement){const Es=this.prevPlacement.variableOffsets[kn.crossTileID];Es&&(this.variableOffsets[kn.crossTileID]=Es,this.markUsedJustification(M,Es.anchor,kn,na))}}}if(Ca=qi,bo=Ca&&Ca.placeable,Ss=Ca&&Ca.offscreen,kn.useRuntimeCollisionCircles){const dA=M.text.placedSymbolArray.get(kn.centerJustifiedTextSymbolIndex),qu=o.am(M.textSizeData,Ge,dA),Hl=I.get("text-padding");_a=this.collisionIndex.placeCollisionCircles(pt,dA,M.lineVertexArray,M.glyphOffsetArray,qu,ee,se,C,Pt,Ze.predicate,kn.collisionCircleDiameter,Hl,z,Mn),_a.circles.length&&_a.collisionDetected&&!C&&o.w("Collisions detected, but collision boxes are not shown"),bo=bt||_a.circles.length>0&&!_a.collisionDetected,Ss=Ss&&_a.offscreen}if(Er.iconFeatureIndex&&(ql=Er.iconFeatureIndex),Er.iconBox){const dA=qu=>this.collisionIndex.placeCollisionBox(qu,Bt,ge,Cn,ee,Pt,It,Y,Ze.predicate,Mn,Lt&&to?to:void 0,ir);va&&va.placeable&&Er.verticalIconBox?(ta=dA(Er.verticalIconBox),Ro=ta.placeable):(ta=dA(Er.iconBox),Ro=ta.placeable),Ss=Ss&&ta.offscreen}const al=dt||kn.numHorizontalGlyphVertices===0&&kn.numVerticalGlyphVertices===0,Iu=ct||kn.numIconVertices===0;al||Iu?Iu?al||(Ro=Ro&&bo):bo=Ro&&bo:Ro=bo=Ro&&bo;const Vl=Ro&&ta.placeable;if(bo&&Ca.placeable&&this.collisionIndex.insertCollisionBox(Ca.box,pt,I.get("text-ignore-placement"),M.bucketInstanceId,va&&va.placeable&&DA?DA:yl,Ze.ID),Vl&&this.collisionIndex.insertCollisionBox(ta.box,Bt,I.get("icon-ignore-placement"),M.bucketInstanceId,ql,Ze.ID),_a&&bo&&this.collisionIndex.insertCollisionCircles(_a.circles,pt,I.get("text-ignore-placement"),M.bucketInstanceId,yl,Ze.ID),C&&this.storeCollisionData(M.bucketInstanceId,Vr,Er,Ca,ta,_a),kn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kn.crossTileID]=new wr((bo||ln)&&!(Ca!=null&&Ca.occluded),(Ro||on)&&!(ta!=null&&ta.occluded),Ss||M.justReloaded),c[kn.crossTileID]=!0};if(sn){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Er=kn.length-1;Er>=0;--Er){const Vr=kn[Er];Vn(M.symbolInstances.get(Vr),M.collisionArrays[Vr],Vr)}}else for(let kn=a.symbolInstanceStart;kn<a.symbolInstanceEnd;kn++)Vn(M.symbolInstances.get(kn),M.collisionArrays[kn],kn);M.justReloaded=!1}storeCollisionData(a,c,C,M,I,z){if(C.textBox||C.iconBox){let Y,ee;this.collisionBoxArrays.has(a)?Y=this.collisionBoxArrays.get(a):(Y=new Map,this.collisionBoxArrays.set(a,Y)),Y.has(c)?ee=Y.get(c):(ee={text:null,icon:null},Y.set(c,ee)),C.textBox&&(ee.text=M.box),C.iconBox&&(ee.icon=I.box)}if(z){let Y=this.collisionCircleArrays[a];Y===void 0&&(Y=this.collisionCircleArrays[a]=[]);for(let ee=0;ee<z.circles.length;ee+=4)Y.push(z.circles[ee+0]-pi),Y.push(z.circles[ee+1]-pi),Y.push(z.circles[ee+2]),Y.push(z.collisionDetected?1:0)}}markUsedJustification(a,c,C,M){let I;I=M===o.al.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[o.aD(c)];const z=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const Y of z)Y>=0&&(a.text.placedSymbolArray.get(Y).crossTileID=I>=0&&Y!==I?0:C.crossTileID)}markUsedOrientation(a,c,C){const M=c===o.al.horizontal||c===o.al.horizontalOnly?c:0,I=c===o.al.vertical?c:0,z=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const Y of z)a.text.placedSymbolArray.get(Y).placedOrientation=M;C.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let C=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(a):1,I=c?c.opacities:{},z=c?c.variableOffsets:{},Y=c?c.placedOrientations:{};for(const ee in this.placements){const se=this.placements[ee],ge=I[ee];ge?(this.opacities[ee]=new Ni(ge,M,se.text,se.icon),C=C||se.text!==ge.text.placed||se.icon!==ge.icon.placed):(this.opacities[ee]=new Ni(null,M,se.text,se.icon,se.skipFade),C=C||se.text||se.icon)}for(const ee in I){const se=I[ee];if(!this.opacities[ee]){const ge=new Ni(se,M,!1,!1);ge.isHidden()||(this.opacities[ee]=ge,C=C||se.text.placed||se.icon.placed)}}for(const ee in z)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=z[ee]);for(const ee in Y)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=Y[ee]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:a)}updateLayerOpacities(a,c){const C={};for(const M of c){const I=M.getBucket(a);I&&M.latestFeatureIndex&&a.id===I.layerIds[0]&&this.updateBucketOpacities(I,M.tileID,C,M.collisionBoxArray)}}updateBucketOpacities(a,c,C,M){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const I=a.layers[0],z=I.layout,Y=new Ni(null,0,!1,!1,!0),ee=z.get("text-allow-overlap"),se=z.get("icon-allow-overlap"),ge=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=z.get("text-rotation-alignment")==="map",Ie=z.get("text-pitch-alignment")==="map",Ge=z.get("icon-text-fit")!=="none",Ze=new Ni(null,0,ee&&(se||!a.hasIconData()||z.get("icon-optional")),se&&(ee||!a.hasTextData()||z.get("text-optional")),!0);!a.collisionArrays&&M&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(M);const dt=(pt,bt,Bt)=>{for(let wt=0;wt<bt/4;wt++)pt.opacityVertexArray.emplaceBack(Bt);pt.hasVisibleVertices=pt.hasVisibleVertices||Bt!==nA},ct=this.collisionBoxArrays.get(a.bucketInstanceId);for(let pt=0;pt<a.symbolInstances.length;pt++){const bt=a.symbolInstances.get(pt),{numHorizontalGlyphVertices:Bt,numVerticalGlyphVertices:wt,crossTileID:It}=bt;let Pt=this.opacities[It];C[It]?Pt=Y:Pt||(Pt=Ze,this.opacities[It]=Pt),C[It]=!0;const Lt=bt.numIconVertices>0,sn=this.placedOrientations[bt.crossTileID],ln=sn===o.al.vertical,on=sn===o.al.horizontal||sn===o.al.horizontalOnly;if(Bt>0||wt>0){const Mn=pa(Pt.text);dt(a.text,Bt,ln?nA:Mn),dt(a.text,wt,on?nA:Mn);const ir=Pt.text.isHidden();[bt.rightJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.leftJustifiedTextSymbolIndex].forEach(Er=>{Er>=0&&(a.text.placedSymbolArray.get(Er).hidden=ir||ln?1:0)}),bt.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(bt.verticalPlacedTextSymbolIndex).hidden=ir||on?1:0);const Vn=this.variableOffsets[bt.crossTileID];Vn&&this.markUsedJustification(a,Vn.anchor,bt,sn);const kn=this.placedOrientations[bt.crossTileID];kn&&(this.markUsedJustification(a,"left",bt,kn),this.markUsedOrientation(a,kn,bt))}if(Lt){const Mn=pa(Pt.icon),ir=!(Ge&&bt.verticalPlacedIconSymbolIndex&&ln);bt.placedIconSymbolIndex>=0&&(dt(a.icon,bt.numIconVertices,ir?Mn:nA),a.icon.placedSymbolArray.get(bt.placedIconSymbolIndex).hidden=Pt.icon.isHidden()),bt.verticalPlacedIconSymbolIndex>=0&&(dt(a.icon,bt.numVerticalIconVertices,ir?nA:Mn),a.icon.placedSymbolArray.get(bt.verticalPlacedIconSymbolIndex).hidden=Pt.icon.isHidden())}const Cn=ct&&ct.has(pt)?ct.get(pt):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Mn=a.collisionArrays[pt];if(Mn){let ir=new o.P(0,0);if(Mn.textBox||Mn.verticalTextBox){let Vn=!0;if(ge){const kn=this.variableOffsets[It];kn?(ir=Rs(kn.anchor,kn.width,kn.height,kn.textOffset,kn.textBoxScale),Oe&&ir._rotate(Ie?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Vn=!1}if(Mn.textBox||Mn.verticalTextBox){let kn;Mn.textBox&&(kn=ln),Mn.verticalTextBox&&(kn=on),xt(a.textCollisionBox.collisionVertexArray,Pt.text.placed,!Vn||kn,Cn.text,ir.x,ir.y)}}if(Mn.iconBox||Mn.verticalIconBox){const Vn=!!(!on&&Mn.verticalIconBox);let kn;Mn.iconBox&&(kn=Vn),Mn.verticalIconBox&&(kn=!Vn),xt(a.iconCollisionBox.collisionVertexArray,Pt.icon.placed,kn,Cn.icon,Ge?ir.x:0,Ge?ir.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,c){const C=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*C>a}setStale(){this.stale=!0}}function xt(O,a,c,C,M,I){C&&C.length!==0||(C=[0,0,0,0]);const z=C[0]-pi,Y=C[1]-pi,ee=C[2]-pi,se=C[3]-pi;O.emplaceBack(a?1:0,c?1:0,M||0,I||0,z,Y),O.emplaceBack(a?1:0,c?1:0,M||0,I||0,ee,Y),O.emplaceBack(a?1:0,c?1:0,M||0,I||0,ee,se),O.emplaceBack(a?1:0,c?1:0,M||0,I||0,z,se)}const xn=Math.pow(2,25),Yn=Math.pow(2,24),fn=Math.pow(2,17),dr=Math.pow(2,16),Wi=Math.pow(2,9),Co=Math.pow(2,8),ls=Math.pow(2,1);function pa(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const a=O.placed?1:0,c=Math.floor(127*O.opacity);return c*xn+a*Yn+c*fn+a*dr+c*Wi+a*Co+c*ls+a}const nA=0;class Ci{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,c,C,M,I){const z=this._bucketParts;for(;this._currentTileIndex<a.length;)if(c.getBucketParts(z,M,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((Y,ee)=>Y.sortKey-ee.sortKey));this._currentPartIndex<z.length;)if(c.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,I())return!0;return!1}}class ZA{constructor(a,c,C,M,I,z,Y,ee){this.placement=new Ve(a,c,z,Y,ee),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(a,c,C){const M=k.now(),I=()=>!this._forceFullPlacement&&k.now()-M>2;for(;this._currentPlacementIndex>=0;){const z=c[a[this._currentPlacementIndex]],Y=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=Y)&&(!z.maxzoom||z.maxzoom>Y)){if(this._inProgressLayer||(this._inProgressLayer=new Ci(z)),this._inProgressLayer.continuePlacement(C[z.source],this.placement,this._showCollisionBoxes,z,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const rA=512/o.Z/2;class ma{constructor(a,c,C){this.tileID=a,this.bucketInstanceId=C,this._symbolsByKey={};const M=new Map;for(let I=0;I<c.length;I++){const z=c.get(I),Y=z.key,ee=M.get(Y);ee?ee.push(z):M.set(Y,[z])}for(const[I,z]of M){const Y={positions:z.map(ee=>({x:Math.floor(ee.anchorX*rA),y:Math.floor(ee.anchorY*rA)})),crossTileIDs:z.map(ee=>ee.crossTileID)};if(Y.positions.length>128){const ee=new o.aF(Y.positions.length,16,Uint16Array);for(const{x:se,y:ge}of Y.positions)ee.add(se,ge);ee.finish(),delete Y.positions,Y.index=ee}this._symbolsByKey[I]=Y}}getScaledCoordinates(a,c){const{x:C,y:M,z:I}=this.tileID.canonical,{x:z,y:Y,z:ee}=c.canonical,se=rA/Math.pow(2,ee-I),ge=(Y*o.Z+a.anchorY)*se,Oe=M*o.Z*rA;return{x:Math.floor((z*o.Z+a.anchorX)*se-C*o.Z*rA),y:Math.floor(ge-Oe)}}findMatches(a,c,C){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let I=0;I<a.length;I++){const z=a.get(I);if(z.crossTileID)continue;const Y=this._symbolsByKey[z.key];if(!Y)continue;const ee=this.getScaledCoordinates(z,c);if(Y.index){const se=Y.index.range(ee.x-M,ee.y-M,ee.x+M,ee.y+M).sort();for(const ge of se){const Oe=Y.crossTileIDs[ge];if(!C[Oe]){C[Oe]=!0,z.crossTileID=Oe;break}}}else if(Y.positions)for(let se=0;se<Y.positions.length;se++){const ge=Y.positions[se],Oe=Y.crossTileIDs[se];if(Math.abs(ge.x-ee.x)<=M&&Math.abs(ge.y-ee.y)<=M&&!C[Oe]){C[Oe]=!0,z.crossTileID=Oe;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Ea{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _c{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const c=Math.round((a-this.lng)/360);if(c!==0)for(const C in this.indexes){const M=this.indexes[C],I={};for(const z in M){const Y=M[z];Y.tileID=Y.tileID.unwrapTo(Y.tileID.wrap+c),I[Y.tileID.key]=Y}this.indexes[C]=I}this.lng=a}addBucket(a,c,C){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let I=0;I<c.symbolInstances.length;I++)c.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const M=this.usedCrossTileIDs[a.overscaledZ];for(const I in this.indexes){const z=this.indexes[I];if(Number(I)>a.overscaledZ)for(const Y in z){const ee=z[Y];ee.tileID.isChildOf(a)&&ee.findMatches(c.symbolInstances,a,M)}else{const Y=z[a.scaledTo(Number(I)).key];Y&&Y.findMatches(c.symbolInstances,a,M)}}for(let I=0;I<c.symbolInstances.length;I++){const z=c.symbolInstances.get(I);z.crossTileID||(z.crossTileID=C.generate(),M[z.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new ma(a,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(a,c){for(const C of c.getCrossTileIDsLists())for(const M of C)delete this.usedCrossTileIDs[a][M]}removeStaleBuckets(a){let c=!1;for(const C in this.indexes){const M=this.indexes[C];for(const I in M)a[M[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,M[I]),delete M[I],c=!0)}return c}}class Ws{constructor(){this.layerIndexes={},this.crossTileIDs=new Ea,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,c,C){let M=this.layerIndexes[a.id];M===void 0&&(M=this.layerIndexes[a.id]=new _c);let I=!1;const z={};M.handleWrapJump(C);for(const Y of c){const ee=Y.getBucket(a);ee&&a.id===ee.layerIds[0]&&(ee.bucketInstanceId||(ee.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(Y.tileID,ee,this.crossTileIDs)&&(I=!0),z[ee.bucketInstanceId]=!0)}return M.removeStaleBuckets(z)&&(I=!0),I}pruneUnusedLayers(a){const c={};a.forEach(C=>{c[C]=!0});for(const C in this.layerIndexes)c[C]||delete this.layerIndexes[C]}}var di="void main() {fragColor=vec4(1.0);}";const jr={prelude:Ii(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ii("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ii("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ii(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ii(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ii(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ii(di,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ii(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ii(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ii("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ii("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ii("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ii(di,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ii(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ii(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ii(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ii(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ii(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ii(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ii(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ii(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ii(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ii(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ii(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ii(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ii(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ii(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ii(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ii(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ii("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ii("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ii("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ii("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ii(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ii("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ii(O,a){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=a.match(/in ([\w]+) ([\w]+)/g),M=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=I?I.concat(M):M,Y={};return{fragmentSource:O=O.replace(c,(ee,se,ge,Oe,Ie)=>(Y[Ie]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${Ie}
in ${ge} ${Oe} ${Ie};
#else
uniform ${ge} ${Oe} u_${Ie};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ie}
    ${ge} ${Oe} ${Ie} = u_${Ie};
#endif
`)),vertexSource:a=a.replace(c,(ee,se,ge,Oe,Ie)=>{const Ge=Oe==="float"?"vec2":"vec4",Ze=Ie.match(/color/)?"color":Ge;return Y[Ie]?se==="define"?`
#ifndef HAS_UNIFORM_u_${Ie}
uniform lowp float u_${Ie}_t;
in ${ge} ${Ge} a_${Ie};
out ${ge} ${Oe} ${Ie};
#else
uniform ${ge} ${Oe} u_${Ie};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ie}
    ${Ie} = a_${Ie};
#else
    ${ge} ${Oe} ${Ie} = u_${Ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ie}
    ${Ie} = unpack_mix_${Ze}(a_${Ie}, u_${Ie}_t);
#else
    ${ge} ${Oe} ${Ie} = u_${Ie};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${Ie}
uniform lowp float u_${Ie}_t;
in ${ge} ${Ge} a_${Ie};
#else
uniform ${ge} ${Oe} u_${Ie};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ie}
    ${ge} ${Oe} ${Ie} = a_${Ie};
#else
    ${ge} ${Oe} ${Ie} = u_${Ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ie}
    ${ge} ${Oe} ${Ie} = unpack_mix_${Ze}(a_${Ie}, u_${Ie}_t);
#else
    ${ge} ${Oe} ${Ie} = u_${Ie};
#endif
`}),staticAttributes:C,staticUniforms:z}}class bl{constructor(a,c,C){this.vertexBuffer=a,this.indexBuffer=c,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var $o=o.aG([{name:"a_pos",type:"Int16",components:2}]);const aa="#define PROJECTION_MERCATOR",js="mercator";class jo{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return js}get shaderDefine(){return aa}get shaderPreludeCode(){return jr.projectionMercator}get vertexShaderPreludeCode(){return jr.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,c,C,M,I){if(this._cachedMesh)return this._cachedMesh;const z=new o.aI;z.emplaceBack(0,0),z.emplaceBack(o.Z,0),z.emplaceBack(0,o.Z),z.emplaceBack(o.Z,o.Z);const Y=a.createVertexBuffer(z,$o.members),ee=o.aJ.simpleSegment(0,0,4,2),se=new o.aK;se.emplaceBack(1,0,2),se.emplaceBack(1,2,3);const ge=a.createIndexBuffer(se);return this._cachedMesh=new bl(Y,ge,ee),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class iA{constructor(a=0,c=0,C=0,M=0){if(isNaN(a)||a<0||isNaN(c)||c<0||isNaN(C)||C<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=c,this.left=C,this.right=M}interpolate(a,c,C){return c.top!=null&&a.top!=null&&(this.top=o.B.number(a.top,c.top,C)),c.bottom!=null&&a.bottom!=null&&(this.bottom=o.B.number(a.bottom,c.bottom,C)),c.left!=null&&a.left!=null&&(this.left=o.B.number(a.left,c.left,C)),c.right!=null&&a.right!=null&&(this.right=o.B.number(a.right,c.right,C)),this}getCenter(a,c){const C=o.ae((this.left+a-this.right)/2,0,a),M=o.ae((this.top+c-this.bottom)/2,0,c);return new o.P(C,M)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new iA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ns(O,a){if(!O.renderWorldCopies||O.lngRange)return;const c=a.lng-O.center.lng;a.lng+=c>180?-360:c<-180?360:0}function Qi(O){return Math.max(0,Math.floor(O))}class _o{constructor(a,c,C,M,I,z){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=c||0,this._maxZoom=C||22,this._minPitch=M??0,this._maxPitch=I??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Qi(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new iA,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,c,C){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Qi(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new iA(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!C&&a.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){const c=o.aL(a,-180,180)*Math.PI/180;var C,M,I,z,Y,ee,se,ge,Oe;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=v(),C=this._rotationMatrix,I=-this._bearingInRadians,z=(M=this._rotationMatrix)[0],Y=M[1],ee=M[2],se=M[3],ge=Math.sin(I),Oe=Math.cos(I),C[0]=z*Oe+ee*ge,C[1]=Y*Oe+se*ge,C[2]=z*-ge+ee*Oe,C[3]=Y*-ge+se*Oe)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){const c=o.ae(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){const c=a/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(a){a=o.ae(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ab(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){const c=this.getConstrained(this._center,a).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,c){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,c,C){this._unmodified=!1,this._edgeInsets.interpolate(a,c,C),this._constrain(),this._calcMatrices()}resize(a,c,C=!0){this._width=a,this._height=c,C&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Kt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.af])}getConstrained(a,c){return this._callbacks.getConstrained(a,c)}getCameraQueryGeometry(a,c){if(c.length===1)return[c[0],a];{let C=a.x,M=a.y,I=a.x,z=a.y;for(const Y of c)C=Math.min(C,Y.x),M=Math.min(M,Y.y),I=Math.max(I,Y.x),z=Math.max(z,Y.y);return[new o.P(C,M),new o.P(I,M),new o.P(I,z),new o.P(C,z),new o.P(C,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:c,zoom:C}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(C),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ad(new Float64Array(16));o.M(a,a,[this._width/2,-this._height/2,1]),o.L(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ad(new Float64Array(16)),o.M(a,a,[1,-1,1]),o.L(a,a,[-1,-1,0]),o.M(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,c,C,M){const I=C!==void 0?C:this.bearing,z=M=M!==void 0?M:this.pitch,Y=o.$.fromLngLat(a,c),ee=-Math.cos(o.ab(z)),se=Math.sin(o.ab(z)),ge=se*Math.sin(o.ab(I)),Oe=-se*Math.cos(o.ab(I));let Ie=this.elevation;const Ge=c-Ie;let Ze;ee*Ge>=0||Math.abs(ee)<.1?(Ze=1e4,Ie=c+Ze*ee):Ze=-Ge/ee;let dt,ct,pt=o.aN(1,Y.y),bt=0;do{if(bt+=1,bt>10)break;ct=Ze/pt,dt=new o.$(Y.x+ge*ct,Y.y+Oe*ct),pt=1/dt.meterInMercatorCoordinateUnits()}while(Math.abs(Ze-ct*pt)>1e-12);return{center:dt.toLngLat(),elevation:Ie,zoom:o.ah(this.height/2/Math.tan(this.fovInRadians/2)/ct/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;const c=o.ag(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/c,M=o.$.fromLngLat(this.center,this.elevation),I=_e(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=a;const z=this.calculateCenterFromCameraLngLatAlt(I.toLngLat(),o.aN(I.z,M.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const a=o.ag(1,this.center.lat)*this.worldSize;return _e(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];const c=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/c,a.canonical.y/c,1/c/o.Z,1/c/o.Z]}}class La{constructor(a,c){this.min=a,this.max=c,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(a){const c=[a%2==0,a<2],C=o.aQ(this.min),M=o.aQ(this.max);for(let I=0;I<c.length;I++)C[I]=c[I]?this.min[I]:this.center[I],M[I]=c[I]?this.center[I]:this.max[I];return M[2]=this.max[2],new La(C,M)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let c=!0;for(let C=0;C<a.planes.length;C++){const M=this.intersectsPlane(a.planes[C]);if(M===0)return 0;M===1&&(c=!1)}return c?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let c=a[3],C=a[3];for(let M=0;M<3;M++)a[M]>0?(c+=a[M]*this.min[M],C+=a[M]*this.max[M]):(C+=a[M]*this.min[M],c+=a[M]*this.max[M]);return c>=0?2:C<0?0:1}}class Ba{distanceToTile2d(a,c,C,M){const I=M.distanceX([a,c]),z=M.distanceY([a,c]);return Math.hypot(I,z)}getWrap(a,c,C){return C}getTileAABB(a,c,C,M){var I,z;let Y=C,ee=C;if(M.terrain){const ge=new o.Y(a.z,c,a.z,a.x,a.y),Oe=M.terrain.getMinMaxElevation(ge);Y=(I=Oe.minElevation)!==null&&I!==void 0?I:C,ee=(z=Oe.maxElevation)!==null&&z!==void 0?z:C}const se=1<<a.z;return new La([c+a.x/se,a.y/se,Y],[c+(a.x+1)/se,(a.y+1)/se,ee])}allowVariableZoom(a,c){const C=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,M=o.ae(78.5-C/2,0,60);return!!c.terrain||a.pitch>M}allowWorldCopies(){return!0}recalculateCache(){}}class uo{constructor(a,c,C){this.points=a,this.planes=c,this.aabb=C}static fromInvProjectionMatrix(a,c=1,C=0){const M=Math.pow(2,C),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(se=>{const ge=1/(se=o.at([],se,a))[3]/c*M;return o.aR(se,se,[ge,ge,1/se[3],ge])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(se=>{const ge=o.aS([],I[se[0]],I[se[1]]),Oe=o.aS([],I[se[2]],I[se[1]]),Ie=o.aT([],o.aU([],ge,Oe)),Ge=-o.aV(Ie,I[se[1]]);return Ie.concat(Ge)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ee=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const se of I)for(let ge=0;ge<3;ge++)Y[ge]=Math.min(Y[ge],se[ge]),ee[ge]=Math.max(ee[ge],se[ge]);return new uo(I,z,new La(Y,ee))}}class Gs{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,C){return this._helper.interpolatePadding(a,c,C)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,C=!0){this._helper.resize(a,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,c){}constructor(a,c,C,M,I){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new _o({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,Y)=>this.getConstrained(z,Y)},a,c,C,M,I),this._coveringTilesDetailsProvider=new Ba}clone(){const a=new Gs;return a.apply(this),a}apply(a,c,C){this._helper.apply(a,c,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){const c=[new o.aW(0,a)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new o.P(0,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),Y=Math.floor(Math.min(C.x,M.x,I.x,z.x)),ee=Math.floor(Math.max(C.x,M.x,I.x,z.x)),se=1;for(let ge=Y-se;ge<=ee+se;ge++)ge!==0&&c.push(new o.aW(ge,a))}return c}getCameraFrustum(){return uo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){const c=this.screenPointToLocation(this.centerPoint,a),C=a?a.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(a,c){const C=o.ag(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,C),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),z=o.$.fromLngLat(a),Y=new o.$(z.x-(M.x-I.x),z.y-(M.y-I.y));this.setCenter(Y==null?void 0:Y.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,c){return c?this.coordinatePoint(o.$.fromLngLat(a),c.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(a))}screenPointToLocation(a,c){var C;return(C=this.screenPointToMercatorCoordinate(a,c))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(a,c){if(c){const C=c.pointCoordinate(a);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,c){const C=c||0,M=[a.x,a.y,0,1],I=[a.x,a.y,1,1];o.at(M,M,this._pixelMatrixInverse),o.at(I,I,this._pixelMatrixInverse);const z=M[3],Y=I[3],ee=M[1]/z,se=I[1]/Y,ge=M[2]/z,Oe=I[2]/Y,Ie=ge===Oe?0:(C-ge)/(Oe-ge);return new o.$(o.B.number(M[0]/z,I[0]/Y,Ie)/this.worldSize,o.B.number(ee,se,Ie)/this.worldSize,C)}coordinatePoint(a,c=0,C=this._pixelMatrix){const M=[a.x*this.worldSize,a.y*this.worldSize,c,1];return o.at(M,M,C),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const a=Math.max(0,this._helper._height/2-He(this));return new Kt().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,c){return c?c.pointCoordinate(a)!=null:a.y>this.height/2-He(this)}calculatePosMatrix(a,c=!1,C){var M;const I=(M=a.key)!==null&&M!==void 0?M:o.aX(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),z=c?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(I)){const se=z.get(I);return C?se.f32:se.f64}const Y=ae(a,this.worldSize);o.N(Y,c?this._alignedProjMatrix:this._viewProjMatrix,Y);const ee={f64:Y,f32:new Float32Array(Y)};return z.set(I,ee),C?ee.f32:ee.f64}calculateFogMatrix(a){const c=a.key,C=this._fogMatrixCacheF32;if(C.has(c))return C.get(c);const M=ae(a,this.worldSize);return o.N(M,this._fogMatrix,M),C.set(c,new Float32Array(M)),C.get(c)}getConstrained(a,c){c=o.ae(+c,this.minZoom,this.maxZoom);const C={center:new o.Q(a.lng,a.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const I=this.tileSize*o.ac(C.zoom);let z=0,Y=I,ee=0,se=I,ge=0,Oe=0;const{x:Ie,y:Ge}=this.size;if(this._helper._latRange){const Bt=this._helper._latRange;z=o.S(Bt[1])*I,Y=o.S(Bt[0])*I,Y-z<Ge&&(ge=Ge/(Y-z))}M&&(ee=o.aL(o.U(M[0])*I,0,I),se=o.aL(o.U(M[1])*I,0,I),se<ee&&(se+=I),se-ee<Ie&&(Oe=Ie/(se-ee)));const{x:Ze,y:dt}=Zt(I,a);let ct,pt;const bt=Math.max(Oe||0,ge||0);if(bt){const Bt=new o.P(Oe?(se+ee)/2:Ze,ge?(Y+z)/2:dt);return C.center=Jn(I,Bt).wrap(),C.zoom+=o.ah(bt),C}if(this._helper._latRange){const Bt=Ge/2;dt-Bt<z&&(pt=z+Bt),dt+Bt>Y&&(pt=Y-Bt)}if(M){const Bt=(ee+se)/2;let wt=Ze;this._helper._renderWorldCopies&&(wt=o.aL(Ze,Bt-I/2,Bt+I/2));const It=Ie/2;wt-It<ee&&(ct=ee+It),wt+It>se&&(ct=se-It)}if(ct!==void 0||pt!==void 0){const Bt=new o.P(ct??Ze,pt??dt);C.center=Jn(I,Bt).wrap()}return C}calculateCenterFromCameraLngLatAlt(a,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,C,M)}_calculateNearFarZIfNeeded(a,c,C){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=a-M*this._helper._pixelPerMeter/Math.cos(c),z=M<0?I:a,Y=Math.PI/2+this.pitchInRadians,ee=o.ab(this.fov)*(Math.abs(Math.cos(o.ab(this.roll)))*this.height+Math.abs(Math.sin(o.ab(this.roll)))*this.width)/this.height*(.5+C.y/this.height),se=Math.sin(ee)*z/Math.sin(o.ae(Math.PI-Y-ee,.01,Math.PI-.01)),ge=He(this),Oe=Math.atan(ge/this._helper.cameraToCenterDistance),Ie=o.ab(.75),Ge=Oe>Ie?2*Oe*(.5+C.y/(2*ge)):Ie,Ze=Math.sin(Ge)*z/Math.sin(o.ae(Math.PI-Y-Ge,.01,Math.PI-.01)),dt=Math.min(se,Ze);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*dt+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const a=this.centerOffset,c=Zt(this.worldSize,this.center),C=c.x,M=c.y;this._helper._pixelPerMeter=o.ag(1,this.center.lat)*this.worldSize;const I=o.ab(Math.min(this.pitch,Ht)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let Y;this._calculateNearFarZIfNeeded(z,I,a),Y=new Float64Array(16),o.aY(Y,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,Y),Y[8]=2*-a.x/this._helper._width,Y[9]=2*a.y/this._helper._height,this._projectionMatrix=o.aZ(Y),o.M(Y,Y,[1,-1,1]),o.L(Y,Y,[0,0,-this._helper.cameraToCenterDistance]),o.a_(Y,Y,-this.rollInRadians),o.a$(Y,Y,this.pitchInRadians),o.a_(Y,Y,-this.bearingInRadians),o.L(Y,Y,[-C,-M,0]),this._mercatorMatrix=o.M([],Y,[this.worldSize,this.worldSize,this.worldSize]),o.M(Y,Y,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y),o.L(Y,Y,[0,0,-this.elevation]),this._viewProjMatrix=Y,this._invViewProjMatrix=o.an([],Y);const ee=[0,0,-1,1];o.at(ee,ee,this._invViewProjMatrix),this._cameraPosition=[ee[0]/ee[3],ee[1]/ee[3],ee[2]/ee[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-C,-M,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y);const se=this._helper._width%2/2,ge=this._helper._height%2/2,Oe=Math.cos(this.bearingInRadians),Ie=Math.sin(-this.bearingInRadians),Ge=C-Math.round(C)+Oe*se+Ie*ge,Ze=M-Math.round(M)+Oe*ge+Ie*se,dt=new Float64Array(Y);if(o.L(dt,dt,[Ge>.5?Ge-1:Ge,Ze>.5?Ze-1:Ze,0]),this._alignedProjMatrix=dt,Y=o.an(new Float64Array(16),this._pixelMatrix),!Y)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Y,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const a=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const a=o.ag(1,this.center.lat)*this.worldSize;return _e(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,c){const C=o.$.fromLngLat(a),M=[C.x*this.worldSize,C.y*this.worldSize,c,1];return o.at(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(a){const{overscaledTileID:c,aligned:C,applyTerrainMatrix:M}=a,I=this._helper.getMercatorTileCoordinates(c),z=c?this.calculatePosMatrix(c,C,!0):null;let Y;return Y=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:z||o.b0(),{mainMatrix:Y,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Y}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,c,C){return 1}transformLightDirection(a){return o.aQ(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,c,C,M){const I=this.calculatePosMatrix(C);let z;M?(z=[a,c,M(a,c),1],o.at(z,z,I)):(z=[a,c,0,1],So(z,z,I));const Y=z[3];return{point:new o.P(z[0]/Y,z[1]/Y),signedDistanceFromCamera:Y,isOccluded:!1}}populateCache(a){for(const c of a)this.calculatePosMatrix(c)}getMatrixForModel(a,c){const C=o.$.fromLngLat(a,c),M=C.meterInMercatorCoordinateUnits(),I=o.b1();return o.L(I,I,[C.x,C.y,C.z]),o.a_(I,I,Math.PI),o.a$(I,I,Math.PI/2),o.M(I,I,[-M,M,M]),I}getProjectionDataForCustomLayer(a=!0){const c=new o.Y(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:a}),M=ae(c,this.worldSize);o.N(M,this._viewProjMatrix,M),C.tileMercatorCoords=[0,0,1,1];const I=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],z=o.b2();return o.M(z,M,I),C.fallbackMatrix=z,C.mainMatrix=z,C}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function oA(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function el(O){if(O.useSlerp)if(O.k<1){const a=o.b3(O.startEulerAngles.roll,O.startEulerAngles.pitch,O.startEulerAngles.bearing),c=o.b3(O.endEulerAngles.roll,O.endEulerAngles.pitch,O.endEulerAngles.bearing),C=new Float64Array(4);o.b4(C,a,c,O.k);const M=o.b5(C);O.tr.setRoll(M.roll),O.tr.setPitch(M.pitch),O.tr.setBearing(M.bearing)}else O.tr.setRoll(O.endEulerAngles.roll),O.tr.setPitch(O.endEulerAngles.pitch),O.tr.setBearing(O.endEulerAngles.bearing);else O.tr.setRoll(o.B.number(O.startEulerAngles.roll,O.endEulerAngles.roll,O.k)),O.tr.setPitch(o.B.number(O.startEulerAngles.pitch,O.endEulerAngles.pitch,O.k)),O.tr.setBearing(o.B.number(O.startEulerAngles.bearing,O.endEulerAngles.bearing,O.k))}function Oa(O,a,c,C,M){const I=M.padding,z=Zt(M.worldSize,c.getNorthWest()),Y=Zt(M.worldSize,c.getNorthEast()),ee=Zt(M.worldSize,c.getSouthEast()),se=Zt(M.worldSize,c.getSouthWest()),ge=o.ab(-C),Oe=z.rotate(ge),Ie=Y.rotate(ge),Ge=ee.rotate(ge),Ze=se.rotate(ge),dt=new o.P(Math.max(Oe.x,Ie.x,Ze.x,Ge.x),Math.max(Oe.y,Ie.y,Ze.y,Ge.y)),ct=new o.P(Math.min(Oe.x,Ie.x,Ze.x,Ge.x),Math.min(Oe.y,Ie.y,Ze.y,Ge.y)),pt=dt.sub(ct),bt=(M.width-(I.left+I.right+a.left+a.right))/pt.x,Bt=(M.height-(I.top+I.bottom+a.top+a.bottom))/pt.y;if(Bt<0||bt<0)return void oA();const wt=Math.min(o.ah(M.scale*Math.min(bt,Bt)),O.maxZoom),It=o.P.convert(O.offset),Pt=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ab(C)),Lt=It.add(Pt).mult(M.scale/o.ac(wt));return{center:Jn(M.worldSize,z.add(ee).div(2).sub(Lt)),zoom:wt,bearing:C}}class wA{get useGlobeControls(){return!1}handlePanInertia(a,c){return{easingOffset:a,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(a,c){a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta),a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta)}handleMapControlsPan(a,c,C){a.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(C,a.around)}cameraForBoxAndBearing(a,c,C,M,I){return Oa(a,c,C,M,I)}handleJumpToCenterZoom(a,c){a.zoom!==(c.zoom!==void 0?+c.zoom:a.zoom)&&a.setZoom(+c.zoom),c.center!==void 0&&a.setCenter(o.Q.convert(c.center))}handleEaseTo(a,c){const C=a.zoom,M=a.padding,I={roll:a.roll,pitch:a.pitch,bearing:a.bearing},z={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},Y=c.zoom!==void 0,ee=!a.isPaddingEqual(c.padding);let se=!1;const ge=Y?+c.zoom:a.zoom;let Oe=a.centerPoint.add(c.offsetAsPoint);const Ie=a.screenPointToLocation(Oe),{center:Ge,zoom:Ze}=a.getConstrained(o.Q.convert(c.center||Ie),ge??C);ns(a,Ge);const dt=Zt(a.worldSize,Ie),ct=Zt(a.worldSize,Ge).sub(dt),pt=o.ac(Ze-C);return se=Ze!==C,{easeFunc:bt=>{if(se&&a.setZoom(o.B.number(C,Ze,bt)),o.b6(I,z)||el({startEulerAngles:I,endEulerAngles:z,tr:a,k:bt,useSlerp:I.roll!=z.roll}),ee&&(a.interpolatePadding(M,c.padding,bt),Oe=a.centerPoint.add(c.offsetAsPoint)),c.around)a.setLocationAtPoint(c.around,c.aroundPoint);else{const Bt=o.ac(a.zoom-C),wt=Ze>C?Math.min(2,pt):Math.max(.5,pt),It=Math.pow(wt,1-bt),Pt=Jn(a.worldSize,dt.add(ct.mult(bt*It)).mult(Bt));a.setLocationAtPoint(a.renderWorldCopies?Pt.wrap():Pt,Oe)}},isZooming:se,elevationCenter:Ge}}handleFlyTo(a,c){const C=c.zoom!==void 0,M=a.zoom,I=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),C?+c.zoom:M),z=I.center,Y=I.zoom;ns(a,z);const ee=Zt(a.worldSize,c.locationAtOffset),se=Zt(a.worldSize,z).sub(ee),ge=se.mag(),Oe=o.ac(Y-M);let Ie;if(c.minZoom!==void 0){const Ge=Math.min(+c.minZoom,M,Y),Ze=a.getConstrained(z,Ge).zoom;Ie=o.ac(Ze-M)}return{easeFunc:(Ge,Ze,dt,ct)=>{a.setZoom(Ge===1?Y:M+o.ah(Ze));const pt=Ge===1?z:Jn(a.worldSize,ee.add(se.mult(dt)).mult(Ze));a.setLocationAtPoint(a.renderWorldCopies?pt.wrap():pt,ct)},scaleOfZoom:Oe,targetCenter:z,scaleOfMinZoom:Ie,pixelPathLength:ge}}}class wi{constructor(a,c,C){this.blendFunction=a,this.blendColor=c,this.mask=C}}wi.Replace=[1,0],wi.disabled=new wi(wi.Replace,o.b7.transparent,[!1,!1,!1,!1]),wi.unblended=new wi(wi.Replace,o.b7.transparent,[!0,!0,!0,!0]),wi.alphaBlended=new wi([1,771],o.b7.transparent,[!0,!0,!0,!0]);const XA=2305;class eo{constructor(a,c,C){this.enable=a,this.mode=c,this.frontFace=C}}eo.disabled=new eo(!1,1029,XA),eo.backCCW=new eo(!0,1029,XA),eo.frontCCW=new eo(!0,1028,XA);class Sr{constructor(a,c,C){this.func=a,this.mask=c,this.range=C}}Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(519,Sr.ReadOnly,[0,1]);const no=7680;class J{constructor(a,c,C,M,I,z){this.test=a,this.ref=c,this.mask=C,this.fail=M,this.depthFail=I,this.pass=z}}J.disabled=new J({func:519,mask:0},0,0,no,no,no);const Be=new WeakMap;function lt(O){var a;if(Be.has(O))return Be.get(O);{const c=(a=O.getParameter(O.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Be.set(O,c),c}}class qt{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;const c=a.context,C=c.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const M=new o.aI;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const I=new o.aK;I.emplaceBack(0,1,2),this._fullscreenTriangle=new bl(c.createVertexBuffer(M,$o.members),c.createIndexBuffer(I),o.aJ.simpleSegment(0,0,M.length,I.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(C.TEXTURE1);const z=C.createTexture();C.bindTexture(C.TEXTURE_2D,z),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),lt(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,c){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const a=this._cachedRenderContext.context,c=a.gl;a.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,c){const C=this._cachedRenderContext.context,M=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,M.TRIANGLES,Sr.disabled,J.disabled,wi.unblended,eo.disabled,((I,z)=>({u_input:I,u_output_expected:z}))(a,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&lt(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const I=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&lt(a)){const c=a.clientWaitSync(this._readbackQueue.sync,0,0);if(c===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=qt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let c=0;return c+=a[0]/256,c+=a[1]/65536,c+=a[2]/16777216,a[3]<127&&(c=-c),c/128}}const Br=o.Z/128;function Gn(O,a){const c=O.granularity!==void 0?Math.max(O.granularity,1):1,C=c+(O.generateBorders?2:0),M=c+(O.extendToNorthPole||O.generateBorders?1:0)+(O.extendToSouthPole||O.generateBorders?1:0),I=C+1,z=M+1,Y=O.generateBorders?-1:0,ee=O.generateBorders||O.extendToNorthPole?-1:0,se=c+(O.generateBorders?1:0),ge=c+(O.generateBorders||O.extendToSouthPole?1:0),Oe=I*z,Ie=C*M*6,Ge=I*z>65536;if(Ge&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ze=Ge||a==="32bit",dt=new Int16Array(2*Oe);let ct=0;for(let Bt=ee;Bt<=ge;Bt++)for(let wt=Y;wt<=se;wt++){let It=wt/c*o.Z;wt===-1&&(It=-64),wt===c+1&&(It=o.Z+Br);let Pt=Bt/c*o.Z;Bt===-1&&(Pt=O.extendToNorthPole?o.b9:-64),Bt===c+1&&(Pt=O.extendToSouthPole?o.ba:o.Z+Br),dt[ct++]=It,dt[ct++]=Pt}const pt=Ze?new Uint32Array(Ie):new Uint16Array(Ie);let bt=0;for(let Bt=0;Bt<M;Bt++)for(let wt=0;wt<C;wt++){const It=wt+1+Bt*I,Pt=wt+(Bt+1)*I,Lt=wt+1+(Bt+1)*I;pt[bt++]=wt+Bt*I,pt[bt++]=Pt,pt[bt++]=It,pt[bt++]=It,pt[bt++]=Pt,pt[bt++]=Lt}return{vertices:dt.buffer.slice(0),indices:pt.buffer.slice(0),uses32bitIndices:Ze}}const Zr=new o.aH({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class oi{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return jr.projectionGlobe}get vertexShaderPreludeCode(){return jr.projectionMercator.vertexSource}get subdivisionGranularity(){return Zr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new qt(a));const c=o.S(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,C),I=k.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=I);const z=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(z))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,c,C,M,I){const z=(I==="stencil"?Zr.stencil:Zr.tile).getGranularityForZoomLevel(c.z);return this._getMesh(a,{granularity:z,generateBorders:C,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(a,c){const C=this._getMeshKey(c);if(C in this._tileMeshCache)return this._tileMeshCache[C];const M=function(I,z){const Y=Gn(z,"16bit"),ee=o.aI.deserialize({arrayBuffer:Y.vertices,length:Y.vertices.byteLength/2/2}),se=o.aK.deserialize({arrayBuffer:Y.indices,length:Y.indices.byteLength/2/3});return new bl(I.createVertexBuffer(ee,$o.members),I.createIndexBuffer(se),o.aJ.simpleSegment(0,0,ee.length,se.length))}(a,c);return this._tileMeshCache[C]=M,M}recalculate(a){}hasTransition(){const a=k.now();let c=!1;return c=c||(a-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}const Or=new o.r({type:new o.D(o.v.projection.type)});class ni extends o.E{constructor(a){super(),this._transitionable=new o.T(Or),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new jo,this._verticalPerspectiveProjection=new oi}get transitionState(){const a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.be){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,c,C,M,I){return this.currentProjection.getMeshFromTileID(a,c,C,M,I)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function $i(O){const a=_i(O.worldSize,O.center.lat);return 2*Math.PI*a}function Eo(O,a,c,C,M){const I=1/(1<<M),z=a/o.Z*I+C*I,Y=o.bg((O/o.Z*I+c*I)*Math.PI*2+Math.PI,2*Math.PI),ee=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,se=Math.cos(ee),ge=new Float64Array(3);return ge[0]=Math.sin(Y)*se,ge[1]=Math.sin(ee),ge[2]=Math.cos(Y)*se,ge}function si(O){return function(a,c){const C=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(a)*C,M[1]=Math.sin(c),M[2]=Math.cos(a)*C,M}(O.lng*Math.PI/180,O.lat*Math.PI/180)}function _i(O,a){return O/(2*Math.PI)/Math.cos(a*Math.PI/180)}function Ri(O){const a=Math.asin(O[1])/Math.PI*180,c=Math.sqrt(O[0]*O[0]+O[2]*O[2]);if(c>1e-6){const C=O[0]/c,M=Math.acos(O[2]/c),I=(C>0?M:-M)/Math.PI*180;return new o.Q(o.aL(I,-180,180),a)}return new o.Q(0,a)}function Yi(O){return Math.cos(O*Math.PI/180)}function mi(O,a){const c=Yi(O),C=Yi(a);return o.ah(C/c)}function Ds(O,a){const c=O.rotate(a.bearingInRadians),C=a.zoom+mi(a.center.lat,0),M=o.bc(1/Yi(a.center.lat),1/Yi(Math.min(Math.abs(a.center.lat),60)),o.bf(C,7,3,0,1)),I=360/$i({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.Q(a.center.lng-c.x*I*M,o.ae(a.center.lat+c.y*I,-85.051129,o.af))}function Ua(O){const a=.5*O,c=Math.sin(a),C=Math.cos(a);return Math.log(c+C)-Math.log(C-c)}function SA(O,a,c,C){const M=O.lat+c*C;if(Math.abs(c)>1){const I=(Math.sign(O.lat+c)!==Math.sign(O.lat)?-Math.abs(O.lat):Math.abs(O.lat))*Math.PI/180,z=Math.abs(O.lat+c)*Math.PI/180,Y=Ua(I+C*(z-I)),ee=Ua(I),se=Ua(z);return new o.Q(O.lng+a*((Y-ee)/(se-ee)),M)}return new o.Q(O.lng+a*C,M)}class As{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=a}recalculateCache(){if(!this._hadAnyChanges)return;const a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(a,c,C,M){const I=`${a.z}_${a.x}_${a.y}`,z=this._cache.get(I);if(z)return z;const Y=this._cachePrevious.get(I);if(Y)return this._cache.set(I,Y),Y;const ee=this._aabbFactory(a,c,C,M);return this._cache.set(I,ee),this._hadAnyChanges=!0,ee}}function Gh(O,a,c){const C=O-a;return C<0?-C:Math.max(0,C-c)}function fl(O,a,c,C,M){const I=O-c;let z;return z=I<0?Math.min(-I,1+I-M):I>1?Math.min(Math.max(I-M,0),1-I):0,Math.max(z,Gh(a,C,M))}class vd{constructor(){this._aabbCache=new As(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(a,c,C,M){const I=1<<C.z,z=1/I,Y=C.x/I,ee=C.y/I;let se=2;return se=Math.min(se,fl(a,c,Y,ee,z)),se=Math.min(se,fl(a,c,Y+.5,-ee-z,z)),se=Math.min(se,fl(a,c,Y+.5,2-ee-z,z)),se}getWrap(a,c,C){const M=1<<c.z,I=1/M,z=c.x/M,Y=Gh(a.x,z,I),ee=Gh(a.x,z-1,I),se=Gh(a.x,z+1,I),ge=Math.min(Y,ee,se);return ge===se?1:ge===ee?-1:0}allowVariableZoom(a,c){return ut(a,c)>4}allowWorldCopies(){return!1}getTileAABB(a,c,C,M){return this._aabbCache.getTileAABB(a,c,C,M)}_computeTileAABB(a,c,C,M){if(a.z<=0)return new La([-1,-1,-1],[1,1,1]);if(a.z===1)return new La([a.x===0?-1:0,a.y===0?0:-1,-1],[a.x===0?0:1,a.y===0?1:0,1]);{const I=[Eo(0,0,a.x,a.y,a.z),Eo(o.Z,0,a.x,a.y,a.z),Eo(o.Z,o.Z,a.x,a.y,a.z),Eo(0,o.Z,a.x,a.y,a.z)],z=[1,1,1],Y=[-1,-1,-1];for(const ee of I)for(let se=0;se<3;se++)z[se]=Math.min(z[se],ee[se]),Y[se]=Math.max(Y[se],ee[se]);if(a.y===0||a.y===(1<<a.z)-1){const ee=[0,a.y===0?1:-1,0];for(let se=0;se<3;se++)z[se]=Math.min(z[se],ee[se]),Y[se]=Math.max(Y[se],ee[se])}return new La(z,Y)}}}class mh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,C){return this._helper.interpolatePadding(a,c,C)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c){this._helper.resize(a,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bk(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new _o({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._coveringTilesDetailsProvider=new vd}clone(){const a=new mh;return a.apply(this),a}apply(a,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const a=o.bh();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){const{overscaledTileID:c,applyGlobeMatrix:C}=a,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){const c=this.pitchInRadians,C=this.cameraToCenterDistance/a,M=Math.sin(c)*C,I=Math.cos(c)*C+1,z=1/Math.sqrt(M*M+I*I)*1;let Y=-M,ee=I;const se=Math.sqrt(Y*Y+ee*ee);Y/=se,ee/=se;const ge=[0,Y,ee];o.bl(ge,ge,[0,0,0],-this.bearingInRadians),o.bm(ge,ge,[0,0,0],-1*this.center.lat*Math.PI/180),o.bn(ge,ge,[0,0,0],this.center.lng*Math.PI/180);const Oe=1/o.bo(ge);return o.aO(ge,ge,Oe),[...ge,-z*Oe]}isLocationOccluded(a){return!this.isSurfacePointVisible(si(a))}transformLightDirection(a){const c=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,M=Math.cos(C),I=[Math.sin(c)*M,Math.sin(C),Math.cos(c)*M],z=[I[2],0,-I[0]],Y=[0,0,0];o.aU(Y,z,I),o.aT(z,z),o.aT(Y,Y);const ee=[0,0,0];return o.aT(ee,[z[0]*a[0]+Y[0]*a[1]+I[0]*a[2],z[1]*a[0]+Y[1]*a[1]+I[1]*a[2],z[2]*a[0]+Y[2]*a[1]+I[2]*a[2]]),ee}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,c,C){const M=function(Y,ee,se){const ge=1/(1<<se.z);return new o.$(Y/o.Z*ge+se.x*ge,ee/o.Z*ge+se.y*ge)}(a,c,C.canonical),I=(z=M.y,[o.bg(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(a,c,C,M){const I=C.canonical,z=Eo(a,c,I.x,I.y,I.z),Y=1+(M?M(a,c):0)/o.bu,ee=[z[0]*Y,z[1]*Y,z[2]*Y,1];o.at(ee,ee,this._globeViewProjMatrixNoCorrection);const se=this._cachedClippingPlane,ge=se[0]*z[0]+se[1]*z[1]+se[2]*z[2]+se[3]<0;return{point:new o.P(ee[0]/ee[3],ee[1]/ee[3]),signedDistanceFromCamera:ee[3],isOccluded:ge}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const a=_i(this.worldSize,this.center.lat),c=o.b2(),C=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=o.aZ(c),this._globeProjMatrixInverted=o.b2(),o.an(this._globeProjMatrixInverted,c),o.L(c,c,[0,0,-this.cameraToCenterDistance]),o.a_(c,c,this.rollInRadians),o.a$(c,c,-this.pitchInRadians),o.a_(c,c,this.bearingInRadians),o.L(c,c,[0,0,-a]);const I=o.bh();I[0]=a,I[1]=a,I[2]=a,o.a$(C,c,this.center.lat*Math.PI/180),o.bp(C,C,-this.center.lng*Math.PI/180),o.M(C,C,I),this._globeViewProjMatrixNoCorrection=C,o.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bp(c,c,-this.center.lng*Math.PI/180),o.M(c,c,I),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.an(this._globeViewProjMatrixNoCorrectionInverted,C);const z=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bl(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bm(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bl(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bm(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.bn(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);const Y=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(Y,Y,[1,1,-1]),this._cachedFrustum=uo.fromInvProjectionMatrix(Y)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.b2();return o.ad(c),c}getVisibleUnwrappedCoordinates(a){return[new o.aW(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=si(a);o.aO(C,C,1+c/o.bu);const M=o.bk();return o.at(M,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(a){}getBounds(){const a=.5*this.width,c=.5*this.height,C=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,c)],M=[];for(const Oe of C)M.push(this.unprojectScreenPoint(Oe));let I=0,z=0,Y=0,ee=0;const se=this.center;for(const Oe of M){const Ie=o.bq(se.lng,Oe.lng),Ge=o.bq(se.lat,Oe.lat);Ie<z&&(z=Ie),Ie>I&&(I=Ie),Ge<ee&&(ee=Ge),Ge>Y&&(Y=Ge)}const ge=[se.lng+z,se.lat+ee,se.lng+I,se.lat+Y];return this.isSurfacePointOnScreen([0,1,0])&&(ge[3]=90,ge[0]=-180,ge[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ge[1]=-90,ge[0]=-180,ge[2]=180),new Kt(ge)}getConstrained(a,c){const C=o.ae(a.lat,-85.051129,o.af),M=o.ae(+c,this.minZoom+mi(0,C),this.maxZoom);return{center:new o.Q(a.lng,C),zoom:M}}calculateCenterFromCameraLngLatAlt(a,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,C,M)}setLocationAtPoint(a,c){const C=si(this.unprojectScreenPoint(c)),M=si(a),I=o.bh();o.br(I);const z=o.bh();o.bn(z,C,I,-this.center.lng*Math.PI/180),o.bm(z,z,I,this.center.lat*Math.PI/180);const Y=M[0]*M[0]+M[2]*M[2],ee=z[0]*z[0];if(Y<ee)return;const se=Math.sqrt(Y-ee),ge=-se,Oe=o.bs(M[0],M[2],z[0],se),Ie=o.bs(M[0],M[2],z[0],ge),Ge=o.bh();o.bn(Ge,M,I,-Oe);const Ze=o.bs(Ge[1],Ge[2],z[1],z[2]),dt=o.bh();o.bn(dt,M,I,-Ie);const ct=o.bs(dt[1],dt[2],z[1],z[2]),pt=.5*Math.PI,bt=Ze>=-pt&&Ze<=pt,Bt=ct>=-pt&&ct<=pt;let wt,It;if(bt&&Bt){const ln=this.center.lng*Math.PI/180,on=this.center.lat*Math.PI/180;o.bv(Oe,ln)+o.bv(Ze,on)<o.bv(Ie,ln)+o.bv(ct,on)?(wt=Oe,It=Ze):(wt=Ie,It=ct)}else if(bt)wt=Oe,It=Ze;else{if(!Bt)return;wt=Ie,It=ct}const Pt=wt/Math.PI*180,Lt=It/Math.PI*180,sn=this.center.lat;this.setCenter(new o.Q(Pt,o.ae(Lt,-90,90))),this.setZoom(this.zoom+mi(sn,this.center.lat))}locationToScreenPoint(a,c){const C=si(a);if(c){const M=c.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aO(C,C,1+M/o.bu)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(a){const c=o.bk();return o.at(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,c){if(c){const C=c.pointCoordinate(a);if(C)return C}return o.$.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,c){var C;return(C=this.screenPointToMercatorCoordinate(a,c))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(a,c){const C=this._cameraPosition,M=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(C,M)}getRayDirectionFromPixel(a){const c=o.bk();c[0]=a.x/this.width*2-1,c[1]=-1*(a.y/this.height*2-1),c[2]=1,c[3]=1,o.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const C=o.bh();C[0]=c[0]-this._cameraPosition[0],C[1]=c[1]-this._cameraPosition[1],C[2]=c[2]-this._cameraPosition[2];const M=o.bh();return o.aT(M,C),M}isSurfacePointVisible(a){const c=this._cachedClippingPlane;return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;const c=o.bk();return o.at(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(a,c){const C=o.aV(a,c),M=o.bh(),I=o.bh();o.aO(I,c,C),o.aS(M,a,I);const z=1-o.aV(M,M);if(z<0)return null;const Y=o.aV(a,a)-1,ee=-C+(C<0?1:-1)*Math.sqrt(z),se=Y/ee,ge=ee;return{tMin:Math.min(se,ge),tMax:Math.max(se,ge)}}unprojectScreenPoint(a){const c=this._cameraPosition,C=this.getRayDirectionFromPixel(a),M=this.rayPlanetIntersection(c,C);if(M){const ge=o.bh();o.aP(ge,c,[C[0]*M.tMin,C[1]*M.tMin,C[2]*M.tMin]);const Oe=o.bh();return o.aT(Oe,ge),Ri(Oe)}const I=this._cachedClippingPlane,z=I[0]*C[0]+I[1]*C[1]+I[2]*C[2],Y=-o.bt(I,c)/z,ee=o.bh();if(Y>0)o.aP(ee,c,[C[0]*Y,C[1]*Y,C[2]*Y]);else{const ge=o.bh();o.aP(ge,c,[2*C[0],2*C[1],2*C[2]]);const Oe=o.bt(this._cachedClippingPlane,ge);o.aS(ee,ge,[this._cachedClippingPlane[0]*Oe,this._cachedClippingPlane[1]*Oe,this._cachedClippingPlane[2]*Oe])}const se=function(ge){const Oe=o.bh();return Oe[0]=ge[0]*-ge[3],Oe[1]=ge[1]*-ge[3],Oe[2]=ge[2]*-ge[3],{center:Oe,radius:Math.sqrt(1-ge[3]*ge[3])}}(I);return Ri(function(ge,Oe,Ie){const Ge=o.bh();o.aS(Ge,Ie,ge);const Ze=o.bh();return o.bi(Ze,ge,Ge,Oe/o.bj(Ge)),Ze}(se.center,se.radius,ee))}getMatrixForModel(a,c){const C=o.Q.convert(a),M=1/o.bu,I=o.b1();return o.bp(I,I,C.lng/180*Math.PI),o.a$(I,I,-C.lat/180*Math.PI),o.L(I,I,[0,0,1+c/o.bu]),o.a$(I,I,.5*Math.PI),o.M(I,I,[M,M,M]),I}getProjectionDataForCustomLayer(a=!0){const c=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:a});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(a){}}class Nu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,C){return this._helper.interpolatePadding(a,c,C)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,C=!0){this._helper.resize(a,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,c){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new _o({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._globeness=1,this._mercatorTransform=new Gs,this._verticalPerspectiveTransform=new mh}clone(){const a=new Nu;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){const c=this._mercatorTransform.getProjectionData(a),C=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:c.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,c,C){const M=this._mercatorTransform.getPitchedTextCorrection(a,c,C),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,c,C);return o.bc(M,I,this._globeness)}projectTileCoordinates(a,c,C,M){return this.currentTransform.projectTileCoordinates(a,c,C,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){return this.currentTransform.lngLatToCameraDepth(a,c)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,c){return this.currentTransform.getConstrained(a,c)}calculateCenterFromCameraLngLatAlt(a,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,C,M)}setLocationAtPoint(a,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,c){return this.currentTransform.locationToScreenPoint(a,c)}screenPointToMercatorCoordinate(a,c){return this.currentTransform.screenPointToMercatorCoordinate(a,c)}screenPointToLocation(a,c){return this.currentTransform.screenPointToLocation(a,c)}isPointOnMapSurface(a,c){return this.currentTransform.isPointOnMapSurface(a,c)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,c){return this.currentTransform.getMatrixForModel(a,c)}getProjectionDataForCustomLayer(a=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return c;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return C.fallbackMatrix=c.mainMatrix,C}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class EA{get useGlobeControls(){return!0}handlePanInertia(a,c){const C=Ds(a,c);return Math.abs(C.lng-c.center.lng)>180&&(C.lng=c.center.lng+179.5*Math.sign(C.lng-c.center.lng)),{easingCenter:C,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,c){const C=a.around,M=c.screenPointToLocation(C);a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta);const I=c.zoom;a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta);const z=c.zoom-I;if(z===0)return;const Y=o.bq(c.center.lng,M.lng),ee=Y/(Math.abs(Y/180)+1),se=o.bq(c.center.lat,M.lat),ge=c.getRayDirectionFromPixel(C),Oe=c.cameraPosition,Ie=-1*o.aV(Oe,ge),Ge=o.bh();o.aP(Ge,Oe,[ge[0]*Ie,ge[1]*Ie,ge[2]*Ie]);const Ze=o.bo(Ge)-1,dt=Math.exp(.5*-Math.max(Ze-.3,0)),ct=_i(c.worldSize,c.center.lat)/Math.min(c.width,c.height),pt=o.bf(ct,.9,.5,1,.25),bt=(1-o.ac(-z))*Math.min(dt,pt),Bt=c.center.lat,wt=c.zoom,It=new o.Q(c.center.lng+ee*bt,o.ae(c.center.lat+se*bt,-85.051129,o.af));c.setLocationAtPoint(M,C);const Pt=c.center,Lt=o.bf(Math.abs(Y),45,85,0,1),sn=o.bf(ct,.75,.35,0,1),ln=Math.pow(Math.max(Lt,sn),.25),on=o.bq(Pt.lng,It.lng),Cn=o.bq(Pt.lat,It.lat);c.setCenter(new o.Q(Pt.lng+on*ln,Pt.lat+Cn*ln).wrap()),c.setZoom(wt+mi(Bt,c.center.lat))}handleMapControlsPan(a,c,C){if(!a.panDelta)return;const M=c.center.lat,I=c.zoom;c.setCenter(Ds(a.panDelta,c).wrap()),c.setZoom(I+mi(M,c.center.lat))}cameraForBoxAndBearing(a,c,C,M,I){const z=Oa(a,c,C,M,I),Y=c.left/I.width*2-1,ee=(I.width-c.right)/I.width*2-1,se=c.top/I.height*-2+1,ge=(I.height-c.bottom)/I.height*-2+1,Oe=o.bq(C.getWest(),C.getEast())<0,Ie=Oe?C.getEast():C.getWest(),Ge=Oe?C.getWest():C.getEast(),Ze=Math.max(C.getNorth(),C.getSouth()),dt=Math.min(C.getNorth(),C.getSouth()),ct=Ie+.5*o.bq(Ie,Ge),pt=Ze+.5*o.bq(Ze,dt),bt=I.clone();bt.setCenter(z.center),bt.setBearing(z.bearing),bt.setPitch(0),bt.setRoll(0),bt.setZoom(z.zoom);const Bt=bt.modelViewProjectionMatrix,wt=[si(C.getNorthWest()),si(C.getNorthEast()),si(C.getSouthWest()),si(C.getSouthEast()),si(new o.Q(Ge,pt)),si(new o.Q(Ie,pt)),si(new o.Q(ct,Ze)),si(new o.Q(ct,dt))],It=si(z.center);let Pt=Number.POSITIVE_INFINITY;for(const Lt of wt)Y<0&&(Pt=EA.getLesserNonNegativeNonNull(Pt,EA.solveVectorScale(Lt,It,Bt,"x",Y))),ee>0&&(Pt=EA.getLesserNonNegativeNonNull(Pt,EA.solveVectorScale(Lt,It,Bt,"x",ee))),se>0&&(Pt=EA.getLesserNonNegativeNonNull(Pt,EA.solveVectorScale(Lt,It,Bt,"y",se))),ge<0&&(Pt=EA.getLesserNonNegativeNonNull(Pt,EA.solveVectorScale(Lt,It,Bt,"y",ge)));if(Number.isFinite(Pt)&&Pt!==0)return z.zoom=bt.zoom+o.ah(Pt),z;oA()}handleJumpToCenterZoom(a,c){const C=a.center.lat,M=a.getConstrained(c.center?o.Q.convert(c.center):a.center,a.zoom).center;a.setCenter(M.wrap());const I=c.zoom!==void 0?+c.zoom:a.zoom+mi(C,M.lat);a.zoom!==I&&a.setZoom(I)}handleEaseTo(a,c){const C=a.zoom,M=a.center,I=a.padding,z={roll:a.roll,pitch:a.pitch,bearing:a.bearing},Y={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},ee=c.zoom!==void 0,se=!a.isPaddingEqual(c.padding);let ge=!1;const Oe=c.center?o.Q.convert(c.center):M,Ie=a.getConstrained(Oe,C).center;ns(a,Ie);const Ge=a.clone();Ge.setCenter(Ie),Ge.setZoom(ee?+c.zoom:C+mi(M.lat,Oe.lat)),Ge.setBearing(c.bearing);const Ze=new o.P(o.ae(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));Ge.setLocationAtPoint(Ie,Ze);const dt=(c.offset&&c.offsetAsPoint.mag())>0?Ge.center:Ie,ct=ee?+c.zoom:C+mi(M.lat,dt.lat),pt=C+mi(M.lat,0),bt=ct+mi(dt.lat,0),Bt=o.bq(M.lng,dt.lng),wt=o.bq(M.lat,dt.lat),It=o.ac(bt-pt);return ge=ct!==C,{easeFunc:Pt=>{if(o.b6(z,Y)||el({startEulerAngles:z,endEulerAngles:Y,tr:a,k:Pt,useSlerp:z.roll!=Y.roll}),se&&a.interpolatePadding(I,c.padding,Pt),c.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(c.around,c.aroundPoint);else{const Lt=bt>pt?Math.min(2,It):Math.max(.5,It),sn=Math.pow(Lt,1-Pt),ln=SA(M,Bt,wt,Pt*sn);a.setCenter(ln.wrap())}if(ge){const Lt=o.B.number(pt,bt,Pt)+mi(0,a.center.lat);a.setZoom(Lt)}},isZooming:ge,elevationCenter:dt}}handleFlyTo(a,c){const C=c.zoom!==void 0,M=a.center,I=a.zoom,z=a.padding,Y=!a.isPaddingEqual(c.padding),ee=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),I).center,se=C?+c.zoom:a.zoom+mi(a.center.lat,ee.lat),ge=a.clone();ge.setCenter(ee),ge.setZoom(se),ge.setBearing(c.bearing);const Oe=new o.P(o.ae(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));ge.setLocationAtPoint(ee,Oe);const Ie=ge.center;ns(a,Ie);const Ge=function(wt,It,Pt){const Lt=si(It),sn=si(Pt),ln=o.aV(Lt,sn),on=Math.acos(ln),Cn=$i(wt);return on/(2*Math.PI)*Cn}(a,M,Ie),Ze=I+mi(M.lat,0),dt=se+mi(Ie.lat,0),ct=o.ac(dt-Ze);let pt;if(typeof c.minZoom=="number"){const wt=+c.minZoom+mi(Ie.lat,0),It=Math.min(wt,Ze,dt)+mi(0,Ie.lat),Pt=a.getConstrained(Ie,It).zoom+mi(Ie.lat,0);pt=o.ac(Pt-Ze)}const bt=o.bq(M.lng,Ie.lng),Bt=o.bq(M.lat,Ie.lat);return{easeFunc:(wt,It,Pt,Lt)=>{const sn=SA(M,bt,Bt,Pt);Y&&a.interpolatePadding(z,c.padding,wt);const ln=wt===1?Ie:sn;a.setCenter(ln.wrap());const on=Ze+o.ah(It);a.setZoom(wt===1?se:on+mi(0,ln.lat))},scaleOfZoom:ct,targetCenter:Ie,scaleOfMinZoom:pt,pixelPathLength:Ge}}static solveVectorScale(a,c,C,M,I){const z=M==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],Y=[C[3],C[7],C[11],C[15]],ee=a[0]*z[0]+a[1]*z[1]+a[2]*z[2],se=a[0]*Y[0]+a[1]*Y[1]+a[2]*Y[2],ge=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],Oe=c[0]*Y[0]+c[1]*Y[1]+c[2]*Y[2];return ge+I*se===ee+I*Oe||Y[3]*(ee-ge)+z[3]*(Oe-se)+ee*Oe==ge*se?null:(ge+z[3]-I*Oe-I*Y[3])/(ge-ee-I*Oe+I*se)}static getLesserNonNegativeNonNull(a,c){return c!==null&&c>=0&&c<a?c:a}}class gh{constructor(a){this._globe=a,this._mercatorCameraHelper=new wA,this._verticalPerspectiveCameraHelper=new EA}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,c){return this.currentHelper.handlePanInertia(a,c)}handleMapControlsRollPitchBearingZoom(a,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,c)}handleMapControlsPan(a,c,C){this.currentHelper.handleMapControlsPan(a,c,C)}cameraForBoxAndBearing(a,c,C,M,I){return this.currentHelper.cameraForBoxAndBearing(a,c,C,M,I)}handleJumpToCenterZoom(a,c){this.currentHelper.handleJumpToCenterZoom(a,c)}handleEaseTo(a,c){return this.currentHelper.handleEaseTo(a,c)}handleFlyTo(a,c){return this.currentHelper.handleFlyTo(a,c)}}const rs=(O,a)=>o.x(O,a&&a.filter(c=>c.identifier!=="source.canvas")),yu=o.bw();class yh extends o.E{constructor(a,c={}){super(),this._rtlPluginLoaded=()=>{for(const C in this.sourceCaches){const M=this.sourceCaches[C].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[C].reload()}},this.map=a,this.dispatcher=new kt(Ut(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(C,M)=>this.getGlyphs(C,M)),this.dispatcher.registerMessageHandler("GI",(C,M)=>this.getImages(C,M)),this.imageManager=new he,this.imageManager.setEventedParent(this),this.glyphManager=new qe(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Pe(256,512),this.crossTileSymbolIndex=new Ws,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.by()),ce().on(lr,this._rtlPluginLoaded),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const M=this.sourceCaches[C.sourceId];if(!M)return;const I=M.getSource();if(I&&I.vectorLayerIds)for(const z in this._layers){const Y=this._layers[z];Y.source===I.id&&this._validateLayer(Y)}})}loadURL(a,c={},C){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;o.j(M,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,c,C)}).catch(z=>{this._loadStyleRequest=null,z&&!I.signal.aborted&&this.fire(new o.k(z))})}loadJSON(a,c={},C){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(a,c,C)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(yu,{validate:!1})}_load(a,c,C){var M,I;const z=c.transformStyle?c.transformStyle(C,a):a;if(!c.validate||!rs(this,o.y(z))){this._loaded=!0,this.stylesheet=z;for(const Y in z.sources)this.addSource(Y,z.sources[Y],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Je(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new je(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const a=o.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of a){const C=o.bA(c);C.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=C}}_loadSprite(a,c=!1,C=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(I,z,Y,ee){return o._(this,void 0,void 0,function*(){const se=te(I),ge=Y>1?"@2x":"",Oe={},Ie={};for(const{id:Ge,url:Ze}of se){const dt=z.transformRequest(G(Ze,ge,".json"),"SpriteJSON");Oe[Ge]=o.j(dt,ee);const ct=z.transformRequest(G(Ze,ge,".png"),"SpriteImage");Ie[Ge]=ne.getImage(ct,ee)}return yield Promise.all([...Object.values(Oe),...Object.values(Ie)]),function(Ge,Ze){return o._(this,void 0,void 0,function*(){const dt={};for(const ct in Ge){dt[ct]={};const pt=k.getImageCanvasContext((yield Ze[ct]).data),bt=(yield Ge[ct]).data;for(const Bt in bt){const{width:wt,height:It,x:Pt,y:Lt,sdf:sn,pixelRatio:ln,stretchX:on,stretchY:Cn,content:Mn,textFitWidth:ir,textFitHeight:Vn}=bt[Bt];dt[ct][Bt]={data:null,pixelRatio:ln,sdf:sn,stretchX:on,stretchY:Cn,content:Mn,textFitWidth:ir,textFitHeight:Vn,spriteData:{width:wt,height:It,x:Pt,y:Lt,context:pt}}}}return dt})}(Oe,Ie)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(I=>{if(this._spriteRequest=null,I)for(const z in I){this._spritesImagesIds[z]=[];const Y=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(ee=>!(ee in I)):[];for(const ee of Y)this.imageManager.removeImage(ee),this._changedImages[ee]=!0;for(const ee in I[z]){const se=z==="default"?ee:`${z}:${ee}`;this._spritesImagesIds[z].push(se),se in this.imageManager.images?this.imageManager.updateImage(se,I[z][ee],!1):this.imageManager.addImage(se,I[z][ee]),c&&(this._changedImages[se]=!0)}}}).catch(I=>{this._spriteRequest=null,M=I,this.fire(new o.k(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),C&&C(M)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){const c=this.sourceCaches[a.source];if(!c)return;const C=a.sourceLayer;if(!C)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(C)===-1)&&this.fire(new o.k(new Error(`Source layer "${C}" does not exist on source "${M.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,c=!1){const C=this._serializedAllLayers();if(!a||a.length===0)return Object.values(c?o.bB(C):C);const M=[];for(const I of a)if(C[I]){const z=c?o.bB(C[I]):C[I];M.push(z)}return M}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const c=Object.keys(this._layers);for(const C of c){const M=this._layers[C];M.type!=="custom"&&(a[C]=M.serialize())}return a}hasTransitions(){var a,c,C;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(M.length||I.length)&&this._updateWorkerLayers(M,I);for(const z in this._updatedSources){const Y=this._updatedSources[z];if(Y==="reload")this._reloadSource(z);else{if(Y!=="clear")throw new Error(`Invalid action ${Y}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const C={};for(const M in this.sourceCaches){const I=this.sourceCaches[M];C[M]=I.used,I.used=!1}for(const M of this._order){const I=this._layers[M];I.recalculate(a,this._availableImages),!I.isHidden(a.zoom)&&I.source&&(this.sourceCaches[I.source].used=!0)}for(const M in C){const I=this.sourceCaches[M];!!C[M]!=!!I.used&&I.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,c={}){var C;this._checkLoaded();const M=this.serialize();if(a=c.transformStyle?c.transformStyle(M,a):a,((C=c.validate)===null||C===void 0||C)&&rs(this,o.y(a)))return!1;(a=o.bB(a)).layers=o.bz(a.layers);const I=o.bC(M,a),z=this._getOperationsToPerform(I);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const Y of z.operations)Y();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const c=[],C=[];for(const M of a)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:C.push(M.command)}return{operations:c,unimplemented:C}}addImage(a,c){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,c),this._afterImageUpdated(a)}updateImage(a,c){this.imageManager.updateImage(a,c)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,c,C={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${a}`,c,null,C))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[a]=new zt(a,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:a})),M.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${C}" is using it.`)));const c=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,c){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const C=this.sourceCaches[a].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(c),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,c,C={}){this._checkLoaded();const M=a.id;if(this.getLayer(M))return void this.fire(new o.k(new Error(`Layer "${M}" already exists on this map.`)));let I;if(a.type==="custom"){if(rs(this,o.bD(a)))return;I=o.bA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(M,a.source),a=o.bB(a),a=o.e(a,{source:M})),this._validate(o.y.layer,`layers.${M}`,a,{arrayIndex:-1},C))return;I=o.bA(a),this._validateLayer(I),I.setEventedParent(this,{layer:{id:M}})}const z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new o.k(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(z,0,M),this._layerOrderChanged=!0,this._layers[M]=I,this._removedLayers[M]&&I.source&&I.type!=="custom"){const Y=this._removedLayers[M];delete this._removedLayers[M],Y.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(a,c){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===c)return;const C=this._order.indexOf(a);this._order.splice(C,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${c}".`))):(this._order.splice(M,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const c=this._layers[a];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));c.setEventedParent(null);const C=this._order.indexOf(a);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,c,C){this._checkLoaded();const M=this.getLayer(a);M?M.minzoom===c&&M.maxzoom===C||(c!=null&&(M.minzoom=c),C!=null&&(M.maxzoom=C),this._updateLayer(M)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,c,C={}){this._checkLoaded();const M=this.getLayer(a);if(M){if(!o.bE(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.y.filter,`layers.${M.id}.filter`,c,null,C)||(M.filter=o.bB(c),this._updateLayer(M)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bB(this.getLayer(a).filter)}setLayoutProperty(a,c,C,M={}){this._checkLoaded();const I=this.getLayer(a);I?o.bE(I.getLayoutProperty(c),C)||(I.setLayoutProperty(c,C,M),this._updateLayer(I)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,c){const C=this.getLayer(a);if(C)return C.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,c,C,M={}){this._checkLoaded();const I=this.getLayer(a);I?o.bE(I.getPaintProperty(c),C)||(I.setPaintProperty(c,C,M)&&this._updateLayer(I),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,c){return this.getLayer(a).getPaintProperty(c)}setFeatureState(a,c){this._checkLoaded();const C=a.source,M=a.sourceLayer,I=this.sourceCaches[C];if(I===void 0)return void this.fire(new o.k(new Error(`The source '${C}' does not exist in the map's style.`)));const z=I.getSource().type;z==="geojson"&&M?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||M?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(M,a.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,c){this._checkLoaded();const C=a.source,M=this.sourceCaches[C];if(M===void 0)return void this.fire(new o.k(new Error(`The source '${C}' does not exist in the map's style.`)));const I=M.getSource().type,z=I==="vector"?a.sourceLayer:void 0;I!=="vector"||z?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(z,a.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const c=a.source,C=a.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||C?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),M.getFeatureState(C,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.bF(this.sourceCaches,I=>I.serialize()),c=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,M=this.stylesheet;return o.bG({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:a,layers:c,terrain:C},I=>I!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const c=z=>this._layers[z].type==="fill-extrusion",C={},M=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y)){C[Y]=z;for(const ee of a){const se=ee[Y];if(se)for(const ge of se)M.push(ge)}}}M.sort((z,Y)=>Y.intersectionZ-z.intersectionZ);const I=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y))for(let ee=M.length-1;ee>=0;ee--){const se=M[ee].feature;if(C[se.layer.id]<z)break;I.push(se),M.pop()}else for(const ee of a){const se=ee[Y];if(se)for(const ge of se)I.push(ge.feature)}}return I}queryRenderedFeatures(a,c,C){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const se of c.layers){const ge=this._layers[se];if(!ge)return this.fire(new o.k(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];M[ge.source]=!0}}const I=[];c.availableImages=this._availableImages;const z=this._serializedAllLayers(),Y=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,ee=Object.assign(Object.assign({},c),{layers:Y});for(const se in this.sourceCaches)c.layers&&!M[se]||I.push(Ue(this.sourceCaches[se],this._layers,z,a,ee,C,this.map.terrain?(ge,Oe,Ie)=>this.map.terrain.getElevation(ge,Oe,Ie):void 0));return this.placement&&I.push(function(se,ge,Oe,Ie,Ge,Ze,dt){const ct={},pt=Ze.queryRenderedSymbols(Ie),bt=[];for(const Bt of Object.keys(pt).map(Number))bt.push(dt[Bt]);bt.sort(nt);for(const Bt of bt){const wt=Bt.featureIndex.lookupSymbolFeatures(pt[Bt.bucketInstanceId],ge,Bt.bucketIndex,Bt.sourceLayerIndex,Ge.filter,Ge.layers,Ge.availableImages,se);for(const It in wt){const Pt=ct[It]=ct[It]||[],Lt=wt[It];Lt.sort((sn,ln)=>{const on=Bt.featureSortOrder;if(on){const Cn=on.indexOf(sn.featureIndex);return on.indexOf(ln.featureIndex)-Cn}return ln.featureIndex-sn.featureIndex});for(const sn of Lt)Pt.push(sn)}}return function(Bt,wt,It){for(const Pt in Bt)for(const Lt of Bt[Pt])_t(Lt,It[wt[Pt].source]);return Bt}(ct,se,Oe)}(this._layers,z,this.sourceCaches,a,ee,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(a,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const C=this.sourceCaches[a];return C?function(M,I){const z=M.getRenderableIds().map(se=>M.getTileByID(se)),Y=[],ee={};for(let se=0;se<z.length;se++){const ge=z[se],Oe=ge.tileID.canonical.key;ee[Oe]||(ee[Oe]=!0,ge.querySourceFeatures(Y,I))}return Y}(C,c):[]}getLight(){return this.light.getLight()}setLight(a,c={}){this._checkLoaded();const C=this.light.getLight();let M=!1;for(const z in a)if(!o.bE(a[z],C[z])){M=!0;break}if(!M)return;const I={now:k.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(I)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,c={}){this._checkLoaded();const C=this.getSky();let M=!1;if(!a&&!C)return;if(a&&!C)M=!0;else if(!a&&C)M=!0;else for(const z in a)if(!o.bE(a[z],C[z])){M=!0;break}if(!M)return;const I={now:k.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,c),this.sky.updateTransitions(I)}_setProjectionInternal(a){const c=function(C){if(Array.isArray(C)){const M=new ni({type:C});return{projection:M,transform:new Nu,cameraHelper:new gh(M)}}switch(C){case"mercator":return{projection:new jo,transform:new Gs,cameraHelper:new wA};case"globe":{const M=new ni({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Nu,cameraHelper:new gh(M)}}case"vertical-perspective":return{projection:new oi,transform:new mh,cameraHelper:new EA};default:return o.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new jo,transform:new Gs,cameraHelper:new wA}}}(a);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(a,c,C,M,I={}){return(!I||I.validate!==!1)&&rs(this,a.call(o.y,o.e({key:c,style:this.serialize(),value:C,styleSpec:o.v},M)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(lr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const C=this.sourceCaches[c];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const c in this.sourceCaches)this.sourceCaches[c].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,c,C,M,I=!1){let z=!1,Y=!1;const ee={};for(const se of this._order){const ge=this._layers[se];if(ge.type!=="symbol")continue;if(!ee[ge.source]){const Ie=this.sourceCaches[ge.source];ee[ge.source]=Ie.getRenderableIds(!0).map(Ge=>Ie.getTileByID(Ge)).sort((Ge,Ze)=>Ze.tileID.overscaledZ-Ge.tileID.overscaledZ||(Ge.tileID.isLessThan(Ze.tileID)?-1:1))}const Oe=this.crossTileSymbolIndex.addLayer(ge,ee[ge.source],a.center.lng);z=z||Oe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.now(),a.zoom))&&(this.pauseablePlacement=new ZA(a,this.map.terrain,this._order,I,c,C,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.now()),Y=!0),z&&this.pauseablePlacement.placement.setStale()),Y||z)for(const se of this._order){const ge=this._layers[se];ge.type==="symbol"&&this.placement.updateLayerOpacities(ge,ee[ge.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,c){return o._(this,void 0,void 0,function*(){const C=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),C})}getGlyphs(a,c){return o._(this,void 0,void 0,function*(){const C=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),C})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,c={}){this._checkLoaded(),a&&this._validate(o.y.glyphs,"glyphs",a,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,c,C={},M){this._checkLoaded();const I=[{id:a,url:c}],z=[...te(this.stylesheet.sprite),...I];this._validate(o.y.sprite,"sprite",z,null,C)||(this.stylesheet.sprite=z,this._loadSprite(I,!0,M))}removeSprite(a){this._checkLoaded();const c=te(this.stylesheet.sprite);if(c.find(C=>C.id===a)){if(this._spritesImagesIds[a])for(const C of this._spritesImagesIds[a])this.imageManager.removeImage(C),this._changedImages[C]=!0;c.splice(c.findIndex(C=>C.id===a),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return te(this.stylesheet.sprite)}setSprite(a,c={},C){this._checkLoaded(),a&&this._validate(o.y.sprite,"sprite",a,null,c)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,C):(this._unloadSprite(),C&&C(null)))}}var tf=o.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class sA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,c,C,M,I,z,Y,ee,se){this.context=a;let ge=this.boundPaintVertexBuffers.length!==M.length;for(let Oe=0;!ge&&Oe<M.length;Oe++)this.boundPaintVertexBuffers[Oe]!==M[Oe]&&(ge=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==C||ge||this.boundIndexBuffer!==I||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==Y||this.boundDynamicVertexBuffer2!==ee||this.boundDynamicVertexBuffer3!==se?this.freshBind(c,C,M,I,z,Y,ee,se):(a.bindVertexArray.set(this.vao),Y&&Y.bind(),I&&I.dynamicDraw&&I.bind(),ee&&ee.bind(),se&&se.bind())}freshBind(a,c,C,M,I,z,Y,ee){const se=a.numAttributes,ge=this.context,Oe=ge.gl;this.vao&&this.destroy(),this.vao=ge.createVertexArray(),ge.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=M,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=Y,this.boundDynamicVertexBuffer3=ee,c.enableAttributes(Oe,a);for(const Ie of C)Ie.enableAttributes(Oe,a);z&&z.enableAttributes(Oe,a),Y&&Y.enableAttributes(Oe,a),ee&&ee.enableAttributes(Oe,a),c.bind(),c.setVertexAttribPointers(Oe,a,I);for(const Ie of C)Ie.bind(),Ie.setVertexAttribPointers(Oe,a,I);z&&(z.bind(),z.setVertexAttribPointers(Oe,a,I)),M&&M.bind(),Y&&(Y.bind(),Y.setVertexAttribPointers(Oe,a,I)),ee&&(ee.bind(),ee.setVertexAttribPointers(Oe,a,I)),ge.currentNumAttributes=se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Qh=(O,a,c,C,M)=>({u_texture:0,u_ele_delta:O,u_fog_matrix:a,u_fog_color:c?c.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(C):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),nf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Vc(O){const a=[];for(let c=0;c<O.length;c++){if(O[c]===null)continue;const C=O[c].split(" ");a.push(C.pop())}return a}class Yh{constructor(a,c,C,M,I,z,Y,ee){const se=a.gl;this.program=se.createProgram();const ge=Vc(c.staticAttributes),Oe=C?C.getBinderAttributes():[],Ie=ge.concat(Oe),Ge=jr.prelude.staticUniforms?Vc(jr.prelude.staticUniforms):[],Ze=Y.staticUniforms?Vc(Y.staticUniforms):[],dt=c.staticUniforms?Vc(c.staticUniforms):[],ct=C?C.getBinderUniforms():[],pt=Ge.concat(Ze).concat(dt).concat(ct),bt=[];for(const ln of pt)bt.indexOf(ln)<0&&bt.push(ln);const Bt=C?C.defines():[];lt(se)&&Bt.unshift("#version 300 es"),I&&Bt.push("#define OVERDRAW_INSPECTOR;"),z&&Bt.push("#define TERRAIN3D;"),ee&&Bt.push(ee);let wt=Bt.concat(jr.prelude.fragmentSource,Y.fragmentSource,c.fragmentSource).join(`
`),It=Bt.concat(jr.prelude.vertexSource,Y.vertexSource,c.vertexSource).join(`
`);lt(se)||(wt=function(ln){return ln.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(wt),It=function(ln){return ln.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(It));const Pt=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);if(se.shaderSource(Pt,wt),se.compileShader(Pt),!se.getShaderParameter(Pt,se.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${se.getShaderInfoLog(Pt)}`);se.attachShader(this.program,Pt);const Lt=se.createShader(se.VERTEX_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);if(se.shaderSource(Lt,It),se.compileShader(Lt),!se.getShaderParameter(Lt,se.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${se.getShaderInfoLog(Lt)}`);se.attachShader(this.program,Lt),this.attributes={};const sn={};this.numAttributes=Ie.length;for(let ln=0;ln<this.numAttributes;ln++)Ie[ln]&&(se.bindAttribLocation(this.program,ln,Ie[ln]),this.attributes[Ie[ln]]=ln);if(se.linkProgram(this.program),!se.getProgramParameter(this.program,se.LINK_STATUS))throw new Error(`Program failed to link: ${se.getProgramInfoLog(this.program)}`);se.deleteShader(Lt),se.deleteShader(Pt);for(let ln=0;ln<bt.length;ln++){const on=bt[ln];if(on&&!sn[on]){const Cn=se.getUniformLocation(this.program,on);Cn&&(sn[on]=Cn)}}this.fixedUniforms=M(a,sn),this.terrainUniforms=((ln,on)=>({u_depth:new o.bH(ln,on.u_depth),u_terrain:new o.bH(ln,on.u_terrain),u_terrain_dim:new o.b8(ln,on.u_terrain_dim),u_terrain_matrix:new o.bJ(ln,on.u_terrain_matrix),u_terrain_unpack:new o.bK(ln,on.u_terrain_unpack),u_terrain_exaggeration:new o.b8(ln,on.u_terrain_exaggeration)}))(a,sn),this.projectionUniforms=((ln,on)=>({u_projection_matrix:new o.bJ(ln,on.u_projection_matrix),u_projection_tile_mercator_coords:new o.bK(ln,on.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bK(ln,on.u_projection_clipping_plane),u_projection_transition:new o.b8(ln,on.u_projection_transition),u_projection_fallback_matrix:new o.bJ(ln,on.u_projection_fallback_matrix)}))(a,sn),this.binderUniforms=C?C.getUniforms(a,sn):[]}draw(a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie,Ge,Ze,dt,ct,pt,bt,Bt){const wt=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(C),a.setStencilMode(M),a.setColorMode(I),a.setCullFace(z),ee){a.activeTexture.set(wt.TEXTURE2),wt.bindTexture(wt.TEXTURE_2D,ee.depthTexture),a.activeTexture.set(wt.TEXTURE3),wt.bindTexture(wt.TEXTURE_2D,ee.texture);for(const Pt in this.terrainUniforms)this.terrainUniforms[Pt].set(ee[Pt])}if(se)for(const Pt in se)this.projectionUniforms[nf[Pt]].set(se[Pt]);if(Y)for(const Pt in this.fixedUniforms)this.fixedUniforms[Pt].set(Y[Pt]);ct&&ct.setUniforms(a,this.binderUniforms,Ze,{zoom:dt});let It=0;switch(c){case wt.LINES:It=2;break;case wt.TRIANGLES:It=3;break;case wt.LINE_STRIP:It=1}for(const Pt of Ge.get()){const Lt=Pt.vaos||(Pt.vaos={});(Lt[ge]||(Lt[ge]=new sA)).bind(a,this,Oe,ct?ct.getPaintVertexBuffers():[],Ie,Pt.vertexOffset,pt,bt,Bt),wt.drawElements(c,Pt.primitiveLength*It,wt.UNSIGNED_SHORT,Pt.primitiveOffset*It*2)}}}function bc(O,a,c){const C=1/o.az(c,1,a.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),I=c.tileSize*Math.pow(2,a.transform.tileZoom)/M,z=I*(c.tileID.canonical.x+c.tileID.wrap*M),Y=I*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[C,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[z>>16,Y>>16],u_pixel_coord_lower:[65535&z,65535&Y]}}const xs=(O,a,c,C)=>{const M=O.style.light,I=M.properties.get("position"),z=[I.x,I.y,I.z],Y=o.bN();M.properties.get("anchor")==="viewport"&&o.bO(Y,O.transform.bearingInRadians),o.bP(z,z,Y);const ee=O.transform.transformLightDirection(z),se=M.properties.get("color");return{u_lightpos:z,u_lightpos_globe:ee,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+a,u_opacity:c,u_fill_translate:C}},Wf=(O,a,c,C,M,I,z)=>o.e(xs(O,a,c,C),bc(I,O,z),{u_height_factor:-Math.pow(2,M.overscaledZ)/z.tileSize/8}),xc=(O,a,c,C)=>o.e(bc(a,O,c),{u_fill_translate:C}),qh=(O,a)=>({u_world:O,u_fill_translate:a}),rf=(O,a,c,C,M)=>o.e(xc(O,a,c,M),{u_world:C}),Cd=(O,a,c,C,M)=>{const I=O.transform;let z,Y,ee=0;if(c.paint.get("circle-pitch-alignment")==="map"){const se=o.az(a,1,I.zoom);z=!0,Y=[se,se],ee=se/(o.Z*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*M}else z=!1,Y=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:Y,u_globe_extrude_scale:ee,u_translate:C}},jf=O=>({u_pixel_extrude_scale:[1/O.width,1/O.height]}),_d=O=>({u_viewport_size:[O.width,O.height]}),Vh=(O,a=1)=>({u_color:O,u_overlay:0,u_overlay_scale:a}),bd=(O,a,c,C)=>{const M=o.az(O,1,a)/(o.Z*Math.pow(2,O.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:o.az(O,1,a),u_intensity:c,u_globe_extrude_scale:M}},Gf=(O,a,c,C)=>{const M=o.K();o.bQ(M,0,O.width,O.height,0,0,1);const I=O.context.gl;return{u_matrix:M,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:c,u_color_ramp:C,u_opacity:a.paint.get("heatmap-opacity")}},of=(O,a,c)=>{const C=c.paint.get("hillshade-shadow-color"),M=c.paint.get("hillshade-highlight-color"),I=c.paint.get("hillshade-accent-color");let z=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(z+=O.transform.bearingInRadians),{u_image:0,u_latrange:Hh(0,a.tileID),u_light:[c.paint.get("hillshade-exaggeration"),z],u_shadow:C,u_highlight:M,u_accent:I}},za=(O,a)=>{const c=a.stride,C=o.K();return o.bQ(C,0,o.Z,-8192,0,0,1),o.L(C,C,[0,-8192,0]),{u_matrix:C,u_image:1,u_dimension:[c,c],u_zoom:O.overscaledZ,u_unpack:a.getUnpackVector()}};function Hh(O,a){const c=Math.pow(2,a.canonical.z),C=a.canonical.y;return[new o.$(0,C/c).toLngLat().lat,new o.$(0,(C+1)/c).toLngLat().lat]}const zl=(O,a,c,C)=>{const M=O.transform;return{u_translation:vu(O,a,c),u_ratio:C/o.az(a,1,M.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},BA=(O,a,c,C,M)=>o.e(zl(O,a,c,C),{u_image:0,u_image_height:M}),$h=(O,a,c,C,M)=>{const I=O.transform,z=sf(a,I);return{u_translation:vu(O,a,c),u_texsize:a.imageAtlasTexture.size,u_ratio:C/o.az(a,1,I.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[z,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},vh=(O,a,c,C,M,I)=>{const z=O.lineAtlas,Y=sf(a,O.transform),ee=c.layout.get("line-cap")==="round",se=z.getDash(M.from,ee),ge=z.getDash(M.to,ee),Oe=se.width*I.fromScale,Ie=ge.width*I.toScale;return o.e(zl(O,a,c,C),{u_patternscale_a:[Y/Oe,-se.height/2],u_patternscale_b:[Y/Ie,-ge.height/2],u_sdfgamma:z.width/(256*Math.min(Oe,Ie)*O.pixelRatio)/2,u_image:0,u_tex_y_a:se.y,u_tex_y_b:ge.y,u_mix:I.t})};function sf(O,a){return 1/o.az(O,1,a.tileZoom)}function vu(O,a,c){return o.aA(O.transform,a,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Mc=(O,a,c,C,M)=>{return{u_tl_parent:O,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(z=C.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(I=C.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:wc(C.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var I,z};function wc(O){O*=Math.PI/180;const a=Math.sin(O),c=Math.cos(O);return[(2*c+1)/3,(-Math.sqrt(3)*a-c+1)/3,(Math.sqrt(3)*a-c+1)/3]}const Hc=(O,a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie)=>{const Ge=z.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Ge.cameraToCenterDistance,u_pitch:Ge.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ge.width/Ge.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:Y,u_coord_matrix:ee,u_is_text:+ge,u_pitch_with_map:+C,u_is_along_line:M,u_is_variable_anchor:I,u_texsize:Oe,u_texture:0,u_translation:se,u_pitched_scale:Ie}},xd=(O,a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie,Ge)=>{const Ze=z.transform;return o.e(Hc(O,a,c,C,M,I,z,Y,ee,se,ge,Oe,Ge),{u_gamma_scale:C?Math.cos(Ze.pitch*Math.PI/180)*Ze.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},Ip=(O,a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie)=>o.e(xd(O,a,c,C,M,I,z,Y,ee,se,!0,ge,0,Ie),{u_texsize_icon:Oe,u_texture_icon:1}),$c=(O,a)=>({u_opacity:O,u_color:a}),JA=(O,a,c,C,M)=>o.e(function(I,z,Y,ee){const se=Y.imageManager.getPattern(I.from.toString()),ge=Y.imageManager.getPattern(I.to.toString()),{width:Oe,height:Ie}=Y.imageManager.getPixelSize(),Ge=Math.pow(2,ee.tileID.overscaledZ),Ze=ee.tileSize*Math.pow(2,Y.transform.tileZoom)/Ge,dt=Ze*(ee.tileID.canonical.x+ee.tileID.wrap*Ge),ct=Ze*ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ge.tl,u_pattern_br_b:ge.br,u_texsize:[Oe,Ie],u_mix:z.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ge.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.az(ee,1,Y.transform.tileZoom),u_pixel_coord_upper:[dt>>16,ct>>16],u_pixel_coord_lower:[65535&dt,65535&ct]}}(c,M,a,C),{u_opacity:O}),Na=(O,a)=>{},tl={fillExtrusion:(O,a)=>({u_lightpos:new o.bL(O,a.u_lightpos),u_lightpos_globe:new o.bL(O,a.u_lightpos_globe),u_lightintensity:new o.b8(O,a.u_lightintensity),u_lightcolor:new o.bL(O,a.u_lightcolor),u_vertical_gradient:new o.b8(O,a.u_vertical_gradient),u_opacity:new o.b8(O,a.u_opacity),u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillExtrusionPattern:(O,a)=>({u_lightpos:new o.bL(O,a.u_lightpos),u_lightpos_globe:new o.bL(O,a.u_lightpos_globe),u_lightintensity:new o.b8(O,a.u_lightintensity),u_lightcolor:new o.bL(O,a.u_lightcolor),u_vertical_gradient:new o.b8(O,a.u_vertical_gradient),u_height_factor:new o.b8(O,a.u_height_factor),u_opacity:new o.b8(O,a.u_opacity),u_fill_translate:new o.bM(O,a.u_fill_translate),u_image:new o.bH(O,a.u_image),u_texsize:new o.bM(O,a.u_texsize),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade)}),fill:(O,a)=>({u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillPattern:(O,a)=>({u_image:new o.bH(O,a.u_image),u_texsize:new o.bM(O,a.u_texsize),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade),u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillOutline:(O,a)=>({u_world:new o.bM(O,a.u_world),u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillOutlinePattern:(O,a)=>({u_world:new o.bM(O,a.u_world),u_image:new o.bH(O,a.u_image),u_texsize:new o.bM(O,a.u_texsize),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade),u_fill_translate:new o.bM(O,a.u_fill_translate)}),circle:(O,a)=>({u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_scale_with_map:new o.bH(O,a.u_scale_with_map),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_extrude_scale:new o.bM(O,a.u_extrude_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(O,a.u_globe_extrude_scale),u_translate:new o.bM(O,a.u_translate)}),collisionBox:(O,a)=>({u_pixel_extrude_scale:new o.bM(O,a.u_pixel_extrude_scale)}),collisionCircle:(O,a)=>({u_viewport_size:new o.bM(O,a.u_viewport_size)}),debug:(O,a)=>({u_color:new o.bI(O,a.u_color),u_overlay:new o.bH(O,a.u_overlay),u_overlay_scale:new o.b8(O,a.u_overlay_scale)}),depth:Na,clippingMask:Na,heatmap:(O,a)=>({u_extrude_scale:new o.b8(O,a.u_extrude_scale),u_intensity:new o.b8(O,a.u_intensity),u_globe_extrude_scale:new o.b8(O,a.u_globe_extrude_scale)}),heatmapTexture:(O,a)=>({u_matrix:new o.bJ(O,a.u_matrix),u_world:new o.bM(O,a.u_world),u_image:new o.bH(O,a.u_image),u_color_ramp:new o.bH(O,a.u_color_ramp),u_opacity:new o.b8(O,a.u_opacity)}),hillshade:(O,a)=>({u_image:new o.bH(O,a.u_image),u_latrange:new o.bM(O,a.u_latrange),u_light:new o.bM(O,a.u_light),u_shadow:new o.bI(O,a.u_shadow),u_highlight:new o.bI(O,a.u_highlight),u_accent:new o.bI(O,a.u_accent)}),hillshadePrepare:(O,a)=>({u_matrix:new o.bJ(O,a.u_matrix),u_image:new o.bH(O,a.u_image),u_dimension:new o.bM(O,a.u_dimension),u_zoom:new o.b8(O,a.u_zoom),u_unpack:new o.bK(O,a.u_unpack)}),line:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels)}),lineGradient:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels),u_image:new o.bH(O,a.u_image),u_image_height:new o.b8(O,a.u_image_height)}),linePattern:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_texsize:new o.bM(O,a.u_texsize),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_image:new o.bH(O,a.u_image),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade)}),lineSDF:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels),u_patternscale_a:new o.bM(O,a.u_patternscale_a),u_patternscale_b:new o.bM(O,a.u_patternscale_b),u_sdfgamma:new o.b8(O,a.u_sdfgamma),u_image:new o.bH(O,a.u_image),u_tex_y_a:new o.b8(O,a.u_tex_y_a),u_tex_y_b:new o.b8(O,a.u_tex_y_b),u_mix:new o.b8(O,a.u_mix)}),raster:(O,a)=>({u_tl_parent:new o.bM(O,a.u_tl_parent),u_scale_parent:new o.b8(O,a.u_scale_parent),u_buffer_scale:new o.b8(O,a.u_buffer_scale),u_fade_t:new o.b8(O,a.u_fade_t),u_opacity:new o.b8(O,a.u_opacity),u_image0:new o.bH(O,a.u_image0),u_image1:new o.bH(O,a.u_image1),u_brightness_low:new o.b8(O,a.u_brightness_low),u_brightness_high:new o.b8(O,a.u_brightness_high),u_saturation_factor:new o.b8(O,a.u_saturation_factor),u_contrast_factor:new o.b8(O,a.u_contrast_factor),u_spin_weights:new o.bL(O,a.u_spin_weights),u_coords_top:new o.bK(O,a.u_coords_top),u_coords_bottom:new o.bK(O,a.u_coords_bottom)}),symbolIcon:(O,a)=>({u_is_size_zoom_constant:new o.bH(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bH(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bJ(O,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(O,a.u_coord_matrix),u_is_text:new o.bH(O,a.u_is_text),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_is_along_line:new o.bH(O,a.u_is_along_line),u_is_variable_anchor:new o.bH(O,a.u_is_variable_anchor),u_texsize:new o.bM(O,a.u_texsize),u_texture:new o.bH(O,a.u_texture),u_translation:new o.bM(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),symbolSDF:(O,a)=>({u_is_size_zoom_constant:new o.bH(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bH(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bJ(O,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(O,a.u_coord_matrix),u_is_text:new o.bH(O,a.u_is_text),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_is_along_line:new o.bH(O,a.u_is_along_line),u_is_variable_anchor:new o.bH(O,a.u_is_variable_anchor),u_texsize:new o.bM(O,a.u_texsize),u_texture:new o.bH(O,a.u_texture),u_gamma_scale:new o.b8(O,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_is_halo:new o.bH(O,a.u_is_halo),u_translation:new o.bM(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),symbolTextAndIcon:(O,a)=>({u_is_size_zoom_constant:new o.bH(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bH(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bJ(O,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(O,a.u_coord_matrix),u_is_text:new o.bH(O,a.u_is_text),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_is_along_line:new o.bH(O,a.u_is_along_line),u_is_variable_anchor:new o.bH(O,a.u_is_variable_anchor),u_texsize:new o.bM(O,a.u_texsize),u_texsize_icon:new o.bM(O,a.u_texsize_icon),u_texture:new o.bH(O,a.u_texture),u_texture_icon:new o.bH(O,a.u_texture_icon),u_gamma_scale:new o.b8(O,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_is_halo:new o.bH(O,a.u_is_halo),u_translation:new o.bM(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),background:(O,a)=>({u_opacity:new o.b8(O,a.u_opacity),u_color:new o.bI(O,a.u_color)}),backgroundPattern:(O,a)=>({u_opacity:new o.b8(O,a.u_opacity),u_image:new o.bH(O,a.u_image),u_pattern_tl_a:new o.bM(O,a.u_pattern_tl_a),u_pattern_br_a:new o.bM(O,a.u_pattern_br_a),u_pattern_tl_b:new o.bM(O,a.u_pattern_tl_b),u_pattern_br_b:new o.bM(O,a.u_pattern_br_b),u_texsize:new o.bM(O,a.u_texsize),u_mix:new o.b8(O,a.u_mix),u_pattern_size_a:new o.bM(O,a.u_pattern_size_a),u_pattern_size_b:new o.bM(O,a.u_pattern_size_b),u_scale_a:new o.b8(O,a.u_scale_a),u_scale_b:new o.b8(O,a.u_scale_b),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(O,a.u_tile_units_to_pixels)}),terrain:(O,a)=>({u_texture:new o.bH(O,a.u_texture),u_ele_delta:new o.b8(O,a.u_ele_delta),u_fog_matrix:new o.bJ(O,a.u_fog_matrix),u_fog_color:new o.bI(O,a.u_fog_color),u_fog_ground_blend:new o.b8(O,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(O,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bI(O,a.u_horizon_color),u_horizon_fog_blend:new o.b8(O,a.u_horizon_fog_blend),u_is_globe_mode:new o.b8(O,a.u_is_globe_mode)}),terrainDepth:(O,a)=>({u_ele_delta:new o.b8(O,a.u_ele_delta)}),terrainCoords:(O,a)=>({u_texture:new o.bH(O,a.u_texture),u_terrain_coords_id:new o.b8(O,a.u_terrain_coords_id),u_ele_delta:new o.b8(O,a.u_ele_delta)}),projectionErrorMeasurement:(O,a)=>({u_input:new o.b8(O,a.u_input),u_output_expected:new o.b8(O,a.u_output_expected)}),atmosphere:(O,a)=>({u_sun_pos:new o.bL(O,a.u_sun_pos),u_atmosphere_blend:new o.b8(O,a.u_atmosphere_blend),u_globe_position:new o.bL(O,a.u_globe_position),u_globe_radius:new o.b8(O,a.u_globe_radius),u_inv_proj_matrix:new o.bJ(O,a.u_inv_proj_matrix)}),sky:(O,a)=>({u_sky_color:new o.bI(O,a.u_sky_color),u_horizon_color:new o.bI(O,a.u_horizon_color),u_horizon:new o.bM(O,a.u_horizon),u_horizon_normal:new o.bM(O,a.u_horizon_normal),u_sky_horizon_blend:new o.b8(O,a.u_sky_horizon_blend),u_sky_blend:new o.b8(O,a.u_sky_blend)})};class af{constructor(a,c,C){this.context=a;const M=a.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Zh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qf{constructor(a,c,C,M){this.length=c.length,this.attributes=C,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=a;const I=a.gl;this.buffer=I.createBuffer(),a.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,c){for(let C=0;C<this.attributes.length;C++){const M=c.attributes[this.attributes[C].name];M!==void 0&&a.enableVertexAttribArray(M)}}setVertexAttribPointers(a,c,C){for(let M=0;M<this.attributes.length;M++){const I=this.attributes[M],z=c.attributes[I.name];z!==void 0&&a.vertexAttribPointer(z,I.components,a[Zh[I.type]],!1,this.itemSize,I.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zi{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class aA extends Zi{getDefault(){return o.b7.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Md extends Zi{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Yf extends Zi{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Xh extends Zi{getDefault(){return[!0,!0,!0,!0]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class qf extends Zi{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Vf extends Zi{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Hf extends Zi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class oc extends Zi{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class en extends Zi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}}class Tn extends Zi{getDefault(){return[0,1]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class un extends Zi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}}class Kr extends Zi{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Ei extends Zi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}}class po extends Zi{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Zo extends Zi{getDefault(){return o.b7.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class us extends Zi{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Zc extends Zi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}}class $f extends Zi{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class pl extends Zi{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Cu extends Zi{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class _u extends Zi{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class nl extends Zi{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class OA extends Zi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Xc extends Zi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class mo extends Zi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class bu extends Zi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ch extends Zi{getDefault(){return null}set(a){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class eu extends Zi{getDefault(){return null}set(a){var c;if(a===this.current&&!this.dirty)return;const C=this.gl;lt(C)?C.bindVertexArray(a):(c=C.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Xi extends Zi{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class rl extends Zi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Sc extends Zi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class lA extends Zi{constructor(a,c){super(a),this.context=a,this.parent=c}getDefault(){return null}}class Nl extends lA{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class wd extends lA{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class lf extends lA{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}const xl="Framebuffer is not complete";class Sd{constructor(a,c,C,M,I){this.context=a,this.width=c,this.height=C;const z=a.gl,Y=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new Nl(a,Y),M)this.depthAttachment=I?new lf(a,Y):new wd(a,Y);else if(I)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(xl)}destroy(){const a=this.context.gl,c=this.colorAttachment.get();if(c&&a.deleteTexture(c),this.depthAttachment){const C=this.depthAttachment.get();C&&a.deleteRenderbuffer(C)}a.deleteFramebuffer(this.framebuffer)}}class Jc{constructor(a){var c,C;if(this.gl=a,this.clearColor=new aA(this),this.clearDepth=new Md(this),this.clearStencil=new Yf(this),this.colorMask=new Xh(this),this.depthMask=new qf(this),this.stencilMask=new Vf(this),this.stencilFunc=new Hf(this),this.stencilOp=new oc(this),this.stencilTest=new en(this),this.depthRange=new Tn(this),this.depthTest=new un(this),this.depthFunc=new Kr(this),this.blend=new Ei(this),this.blendFunc=new po(this),this.blendColor=new Zo(this),this.blendEquation=new us(this),this.cullFace=new Zc(this),this.cullFaceSide=new $f(this),this.frontFace=new pl(this),this.program=new Cu(this),this.activeTexture=new _u(this),this.viewport=new nl(this),this.bindFramebuffer=new OA(this),this.bindRenderbuffer=new Xc(this),this.bindTexture=new mo(this),this.bindVertexBuffer=new bu(this),this.bindElementBuffer=new Ch(this),this.bindVertexArray=new eu(this),this.pixelStoreUnpack=new Xi(this),this.pixelStoreUnpackPremultiplyAlpha=new rl(this),this.pixelStoreUnpackFlipY=new Sc(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),lt(a)){this.HALF_FLOAT=a.HALF_FLOAT;const M=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=a.RGBA16F)!==null&&c!==void 0?c:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(C=a.RGB16F)!==null&&C!==void 0?C:M==null?void 0:M.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const M=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,c){return new af(this,a,c)}createVertexBuffer(a,c,C){return new Qf(this,a,c,C)}createRenderbuffer(a,c,C){const M=this.gl,I=M.createRenderbuffer();return this.bindRenderbuffer.set(I),M.renderbufferStorage(M.RENDERBUFFER,a,c,C),this.bindRenderbuffer.set(null),I}createFramebuffer(a,c,C,M){return new Sd(this,a,c,C,M)}clear({color:a,depth:c,stencil:C}){const M=this.gl;let I=0;a&&(I|=M.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(I|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),C!==void 0&&(I|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),M.clear(I)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bE(a.blendFunction,wi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return lt(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var c;return lt(this.gl)?this.gl.deleteVertexArray(a):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let tu;function Jh(O,a,c,C,M){const I=O.context,z=O.transform,Y=I.gl,ee=O.useProgram("collisionBox"),se=[];let ge=0,Oe=0;for(let pt=0;pt<C.length;pt++){const bt=C[pt],Bt=a.getTile(bt).getBucket(c);if(!Bt)continue;const wt=M?Bt.textCollisionBox:Bt.iconCollisionBox,It=Bt.collisionCircleArray;It.length>0&&(se.push({circleArray:It,circleOffset:Oe,coord:bt}),ge+=It.length/4,Oe=ge),wt&&ee.draw(I,Y.LINES,Sr.disabled,J.disabled,O.colorModeForRenderPass(),eo.disabled,jf(O.transform),O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),z.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,O.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!M||!se.length)return;const Ie=O.useProgram("collisionCircle"),Ge=new o.bR;Ge.resize(4*ge),Ge._trim();let Ze=0;for(const pt of se)for(let bt=0;bt<pt.circleArray.length/4;bt++){const Bt=4*bt,wt=pt.circleArray[Bt+0],It=pt.circleArray[Bt+1],Pt=pt.circleArray[Bt+2],Lt=pt.circleArray[Bt+3];Ge.emplace(Ze++,wt,It,Pt,Lt,0),Ge.emplace(Ze++,wt,It,Pt,Lt,1),Ge.emplace(Ze++,wt,It,Pt,Lt,2),Ge.emplace(Ze++,wt,It,Pt,Lt,3)}(!tu||tu.length<2*ge)&&(tu=function(pt){const bt=2*pt,Bt=new o.bT;Bt.resize(bt),Bt._trim();for(let wt=0;wt<bt;wt++){const It=6*wt;Bt.uint16[It+0]=4*wt+0,Bt.uint16[It+1]=4*wt+1,Bt.uint16[It+2]=4*wt+2,Bt.uint16[It+3]=4*wt+2,Bt.uint16[It+4]=4*wt+3,Bt.uint16[It+5]=4*wt+0}return Bt}(ge));const dt=I.createIndexBuffer(tu,!0),ct=I.createVertexBuffer(Ge,o.bS.members,!0);for(const pt of se){const bt=_d(O.transform);Ie.draw(I,Y.TRIANGLES,Sr.disabled,J.disabled,O.colorModeForRenderPass(),eo.disabled,bt,O.style.map.terrain&&O.style.map.terrain.getTerrainData(pt.coord),null,c.id,ct,dt,o.aJ.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,O.transform.zoom,null,null,null)}ct.destroy(),dt.destroy()}const nu=o.ad(new Float32Array(16));function sc(O,a,c,C,M,I){const{horizontalAlign:z,verticalAlign:Y}=o.aE(O);return new o.P((-(z-.5)*a/M+C[0])*I,(-(Y-.5)*c/M+C[1])*I)}function eh(O,a,c,C,M,I){const z=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let Y=C.mult(I);c||(Y=Y.rotate(-M));const ee=z.add(Y);return br(ee.x,ee.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(c){const Y=ui(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(O),ee=Math.atan(Y.y/Y.x)+(Y.x<0?Math.PI:0);return O.add(C.rotate(ee))}return O.add(C)}function _h(O,a,c,C,M,I,z,Y,ee,se,ge,Oe){const Ie=O.text.placedSymbolArray,Ge=O.text.dynamicLayoutVertexArray,Ze=O.icon.dynamicLayoutVertexArray,dt={};Ge.clear();for(let ct=0;ct<Ie.length;ct++){const pt=Ie.get(ct),bt=pt.hidden||!pt.crossTileID||O.allowVerticalPlacement&&!pt.placedOrientation?null:C[pt.crossTileID];if(bt){const Bt=new o.P(pt.anchorX,pt.anchorY),wt={getElevation:Oe,width:M.width,height:M.height,pitchedLabelPlaneMatrix:I,pitchWithMap:c,transform:M,tileAnchorPoint:Bt,translation:se,unwrappedTileID:ge},It=c?_s(Bt.x,Bt.y,wt):ui(Bt.x,Bt.y,wt),Pt=Gr(M.cameraToCenterDistance,It.signedDistanceFromCamera);let Lt=o.am(O.textSizeData,Y,pt)*Pt/o.ay;c&&(Lt*=O.tilePixelRatio/z);const{width:sn,height:ln,anchor:on,textOffset:Cn,textBoxScale:Mn}=bt,ir=sc(on,sn,ln,Cn,Mn,Lt),Vn=M.getPitchedTextCorrection(Bt.x+se[0],Bt.y+se[1],ge),kn=eh(It.point,wt,a,ir,-M.bearingInRadians,Vn),Er=O.allowVerticalPlacement&&pt.placedOrientation===o.al.vertical?Math.PI/2:0;for(let Vr=0;Vr<pt.numGlyphs;Vr++)o.as(Ge,kn,Er);ee&&pt.associatedIconIndex>=0&&(dt[pt.associatedIconIndex]={shiftedAnchor:kn,angle:Er})}else zo(pt.numGlyphs,Ge)}if(ee){Ze.clear();const ct=O.icon.placedSymbolArray;for(let pt=0;pt<ct.length;pt++){const bt=ct.get(pt);if(bt.hidden)zo(bt.numGlyphs,Ze);else{const Bt=dt[pt];if(Bt)for(let wt=0;wt<bt.numGlyphs;wt++)o.as(Ze,Bt.shiftedAnchor,Bt.angle);else zo(bt.numGlyphs,Ze)}}O.icon.dynamicLayoutVertexBuffer.updateData(Ze)}O.text.dynamicLayoutVertexBuffer.updateData(Ge)}function Go(O,a,c){return c.iconsInText&&a?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function Ec(O,a,c,C,M,I,z,Y,ee,se,ge,Oe,Ie){const Ge=O.context,Ze=Ge.gl,dt=O.transform,ct=Y==="map",pt=ee==="map",bt=Y!=="viewport"&&c.layout.get("symbol-placement")!=="point",Bt=ct&&!pt&&!bt,wt=!c.layout.get("symbol-sort-key").isConstant();let It=!1;const Pt=O.getDepthModeForSublayer(0,Sr.ReadOnly),Lt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),sn=[],ln=dt.getCircleRadiusCorrection();for(const on of C){const Cn=a.getTile(on),Mn=Cn.getBucket(c);if(!Mn)continue;const ir=M?Mn.text:Mn.icon;if(!ir||!ir.segments.get().length||!ir.hasVisibleVertices)continue;const Vn=ir.programConfigurations.get(c.id),kn=M||Mn.sdfIcons,Er=M?Mn.textSizeData:Mn.iconSizeData,Vr=pt||dt.pitch!==0,ci=O.useProgram(Go(kn,M,Mn),Vn),Yo=o.ak(Er,dt.zoom),bo=O.style.map.terrain&&O.style.map.terrain.getTerrainData(on);let Ro,Ss,to,qi,va=[0,0],Ca=null;if(M)Ss=Cn.glyphAtlasTexture,to=Ze.LINEAR,Ro=Cn.glyphAtlasTexture.size,Mn.iconsInText&&(va=Cn.imageAtlasTexture.size,Ca=Cn.imageAtlasTexture,qi=Vr||O.options.rotating||O.options.zooming||Er.kind==="composite"||Er.kind==="camera"?Ze.LINEAR:Ze.NEAREST);else{const qs=c.layout.get("icon-size").constantOr(0)!==1||Mn.iconsNeedLinear;Ss=Cn.imageAtlasTexture,to=kn||O.options.rotating||O.options.zooming||qs||Vr?Ze.LINEAR:Ze.NEAREST,Ro=Cn.imageAtlasTexture.size}const _a=o.az(Cn,1,O.transform.zoom),ta=mr(ct,O.transform,_a),yl=o.K();o.an(yl,ta);const DA=Tr(pt,ct,O.transform,_a),ql=o.aA(dt,Cn,I,z),FA=dt.getProjectionData({overscaledTileID:on,applyGlobeMatrix:!Ie,applyTerrainMatrix:!0}),al=Lt&&Mn.hasTextData(),Iu=c.layout.get("icon-text-fit")!=="none"&&al&&Mn.hasIconData();if(bt){const qs=O.style.map.terrain?(na,Es)=>O.style.map.terrain.getElevation(on,na,Es):null,os=c.layout.get("text-rotation-alignment")==="map";Fr(Mn,O,M,ta,yl,pt,se,os,on.toUnwrapped(),dt.width,dt.height,ql,qs)}const Vl=M&&Lt||Iu,dA=bt||Vl?nu:pt?ta:O.transform.clipSpaceToPixelsMatrix,qu=kn&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Hl;Hl=kn?Mn.iconsInText?Ip(Er.kind,Yo,Bt,pt,bt,Vl,O,dA,DA,ql,Ro,va,ln):xd(Er.kind,Yo,Bt,pt,bt,Vl,O,dA,DA,ql,M,Ro,0,ln):Hc(Er.kind,Yo,Bt,pt,bt,Vl,O,dA,DA,ql,M,Ro,ln);const cc={program:ci,buffers:ir,uniformValues:Hl,projectionData:FA,atlasTexture:Ss,atlasTextureIcon:Ca,atlasInterpolation:to,atlasInterpolationIcon:qi,isSDF:kn,hasHalo:qu};if(wt&&Mn.canOverlap){It=!0;const qs=ir.segments.get();for(const os of qs)sn.push({segments:new o.aJ([os]),sortKey:os.sortKey,state:cc,terrainData:bo})}else sn.push({segments:ir.segments,sortKey:0,state:cc,terrainData:bo})}It&&sn.sort((on,Cn)=>on.sortKey-Cn.sortKey);for(const on of sn){const Cn=on.state;if(Ge.activeTexture.set(Ze.TEXTURE0),Cn.atlasTexture.bind(Cn.atlasInterpolation,Ze.CLAMP_TO_EDGE),Cn.atlasTextureIcon&&(Ge.activeTexture.set(Ze.TEXTURE1),Cn.atlasTextureIcon&&Cn.atlasTextureIcon.bind(Cn.atlasInterpolationIcon,Ze.CLAMP_TO_EDGE)),Cn.isSDF){const Mn=Cn.uniformValues;Cn.hasHalo&&(Mn.u_is_halo=1,Bc(Cn.buffers,on.segments,c,O,Cn.program,Pt,ge,Oe,Mn,Cn.projectionData,on.terrainData)),Mn.u_is_halo=0}Bc(Cn.buffers,on.segments,c,O,Cn.program,Pt,ge,Oe,Cn.uniformValues,Cn.projectionData,on.terrainData)}}function Bc(O,a,c,C,M,I,z,Y,ee,se,ge){const Oe=C.context;M.draw(Oe,Oe.gl.TRIANGLES,I,z,Y,eo.backCCW,ee,ge,se,c.id,O.layoutVertexBuffer,O.indexBuffer,a,c.paint,C.transform.zoom,O.programConfigurations.get(c.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function ru(O,a,c,C,M){const I=O.context,z=I.gl,Y=J.disabled,ee=new wi([z.ONE,z.ONE],o.b7.transparent,[!0,!0,!0,!0]),se=a.getBucket(c);if(!se)return;const ge=C.key;let Oe=c.heatmapFbos.get(ge);Oe||(Oe=Ed(I,a.tileSize,a.tileSize),c.heatmapFbos.set(ge,Oe)),I.bindFramebuffer.set(Oe.framebuffer),I.viewport.set([0,0,a.tileSize,a.tileSize]),I.clear({color:o.b7.transparent});const Ie=se.programConfigurations.get(c.id),Ge=O.useProgram("heatmap",Ie,!M),Ze=O.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),dt=O.style.map.terrain.getTerrainData(C);Ge.draw(I,z.TRIANGLES,Sr.disabled,Y,ee,eo.disabled,bd(a,O.transform.zoom,c.paint.get("heatmap-intensity"),1),dt,Ze,c.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,c.paint,O.transform.zoom,Ie)}function Af(O,a,c,C,M){const I=O.context,z=I.gl,Y=O.transform;I.setColorMode(O.colorModeForRenderPass());const ee=ac(I,a),se=c.key,ge=a.heatmapFbos.get(se);if(!ge)return;I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,ge.colorAttachment.get()),I.activeTexture.set(z.TEXTURE1),ee.bind(z.LINEAR,z.CLAMP_TO_EDGE);const Oe=Y.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!C});O.useProgram("heatmapTexture").draw(I,z.TRIANGLES,Sr.disabled,J.disabled,O.colorModeForRenderPass(),eo.disabled,Gf(O,a,0,1),null,Oe,a.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments,a.paint,Y.zoom),ge.destroy(),a.heatmapFbos.delete(se)}function Ed(O,a,c){var C,M;const I=O.gl,z=I.createTexture();I.bindTexture(I.TEXTURE_2D,z),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const Y=(C=O.HALF_FLOAT)!==null&&C!==void 0?C:I.UNSIGNED_BYTE,ee=(M=O.RGBA16F)!==null&&M!==void 0?M:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,ee,a,c,0,I.RGBA,Y,null);const se=O.createFramebuffer(a,c,!1,!1);return se.colorAttachment.set(z),se}function ac(O,a){return a.colorRampTexture||(a.colorRampTexture=new oe(O,a.colorRamp,O.gl.RGBA)),a.colorRampTexture}function Oc(O,a,c,C,M){if(!c||!C||!C.imageAtlas)return;const I=C.imageAtlas.patternPositions;let z=I[c.to.toString()],Y=I[c.from.toString()];if(!z&&Y&&(z=Y),!Y&&z&&(Y=z),!z||!Y){const ee=M.getPaintProperty(a);z=I[ee],Y=I[ee]}z&&Y&&O.setConstantPatternPositions(z,Y)}function lc(O,a,c,C,M,I,z,Y){const ee=O.context.gl,se="fill-pattern",ge=c.paint.get(se),Oe=ge&&ge.constantOr(1),Ie=c.getCrossfadeParameters();let Ge,Ze,dt,ct,pt;const bt=O.transform,Bt=c.paint.get("fill-translate"),wt=c.paint.get("fill-translate-anchor");z?(Ze=Oe&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ge=ee.LINES):(Ze=Oe?"fillPattern":"fill",Ge=ee.TRIANGLES);const It=ge.constantOr(null);for(const Pt of C){const Lt=a.getTile(Pt);if(Oe&&!Lt.patternsLoaded())continue;const sn=Lt.getBucket(c);if(!sn)continue;const ln=sn.programConfigurations.get(c.id),on=O.useProgram(Ze,ln),Cn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Pt);Oe&&(O.context.activeTexture.set(ee.TEXTURE0),Lt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),ln.updatePaintBuffers(Ie)),Oc(ln,se,It,Lt,c);const Mn=bt.getProjectionData({overscaledTileID:Pt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),ir=o.aA(bt,Lt,Bt,wt);if(z){ct=sn.indexBuffer2,pt=sn.segments2;const kn=[ee.drawingBufferWidth,ee.drawingBufferHeight];dt=Ze==="fillOutlinePattern"&&Oe?rf(O,Ie,Lt,kn,ir):qh(kn,ir)}else ct=sn.indexBuffer,pt=sn.segments,dt=Oe?xc(O,Ie,Lt,ir):{u_fill_translate:ir};let Vn;if(O.renderPass==="translucent"&&Y){const[kn]=O.getStencilConfigForOverlapAndUpdateStencilID(C);Vn=kn[Pt.overscaledZ]}else Vn=O.stencilModeForClipping(Pt);on.draw(O.context,Ge,M,Vn,I,eo.backCCW,dt,Cn,Mn,c.id,sn.layoutVertexBuffer,ct,pt,c.paint,O.transform.zoom,ln)}}function Ms(O,a,c,C,M,I,z,Y){const ee=O.context,se=ee.gl,ge="fill-extrusion-pattern",Oe=c.paint.get(ge),Ie=Oe.constantOr(1),Ge=c.getCrossfadeParameters(),Ze=c.paint.get("fill-extrusion-opacity"),dt=Oe.constantOr(null),ct=O.transform;for(const pt of C){const bt=a.getTile(pt),Bt=bt.getBucket(c);if(!Bt)continue;const wt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(pt),It=Bt.programConfigurations.get(c.id),Pt=O.useProgram(Ie?"fillExtrusionPattern":"fillExtrusion",It);Ie&&(O.context.activeTexture.set(se.TEXTURE0),bt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),It.updatePaintBuffers(Ge));const Lt=ct.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});Oc(It,ge,dt,bt,c);const sn=o.aA(ct,bt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ln=c.paint.get("fill-extrusion-vertical-gradient"),on=Ie?Wf(O,ln,Ze,sn,pt,Ge,bt):xs(O,ln,Ze,sn);Pt.draw(ee,ee.gl.TRIANGLES,M,I,z,eo.backCCW,on,wt,Lt,c.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,c.paint,O.transform.zoom,It,O.style.map.terrain&&Bt.centroidVertexBuffer)}}function Qs(O,a,c,C,M,I,z,Y,ee){var se;const ge=O.style.projection,Oe=O.context,Ie=O.transform,Ge=Oe.gl,Ze=O.useProgram("hillshade"),dt=!O.options.moving;for(const ct of C){const pt=a.getTile(ct),bt=pt.fbo;if(!bt)continue;const Bt=ge.getMeshFromTileID(Oe,ct.canonical,Y,!0,"raster"),wt=(se=O.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(ct);Oe.activeTexture.set(Ge.TEXTURE0),Ge.bindTexture(Ge.TEXTURE_2D,bt.colorAttachment.get());const It=Ie.getProjectionData({overscaledTileID:ct,aligned:dt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0});Ze.draw(Oe,Ge.TRIANGLES,I,M[ct.overscaledZ],z,eo.backCCW,of(O,pt,c),wt,It,c.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}const Bd=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function th(O,a,c,C,M,I,z,Y,ee=!1,se=!1){const ge=C[C.length-1].overscaledZ,Oe=O.context,Ie=Oe.gl,Ge=O.useProgram("raster"),Ze=O.transform,dt=O.style.projection,ct=O.colorModeForRenderPass(),pt=!O.options.moving;for(const bt of C){const Bt=O.getDepthModeForSublayer(bt.overscaledZ-ge,c.paint.get("raster-opacity")===1?Sr.ReadWrite:Sr.ReadOnly,Ie.LESS),wt=a.getTile(bt);wt.registerFadeDuration(c.paint.get("raster-fade-duration"));const It=a.findLoadedParent(bt,0),Pt=a.findLoadedSibling(bt),Lt=bh(wt,It||Pt||null,a,c,O.transform,O.style.map.terrain);let sn,ln;const on=c.paint.get("raster-resampling")==="nearest"?Ie.NEAREST:Ie.LINEAR;Oe.activeTexture.set(Ie.TEXTURE0),wt.texture.bind(on,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),Oe.activeTexture.set(Ie.TEXTURE1),It?(It.texture.bind(on,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),sn=Math.pow(2,It.tileID.overscaledZ-wt.tileID.overscaledZ),ln=[wt.tileID.canonical.x*sn%1,wt.tileID.canonical.y*sn%1]):wt.texture.bind(on,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&Oe.extTextureFilterAnisotropic&&O.transform.pitch>20&&Ie.texParameterf(Ie.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax);const Cn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),Mn=Ze.getProjectionData({overscaledTileID:bt,aligned:pt,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),ir=Mc(ln||[0,0],sn||1,Lt,c,Y),Vn=dt.getMeshFromTileID(Oe,bt.canonical,I,z,"raster");Ge.draw(Oe,Ie.TRIANGLES,Bt,M?M[bt.overscaledZ]:J.disabled,ct,ee?eo.frontCCW:eo.backCCW,ir,Cn,Mn,c.id,Vn.vertexBuffer,Vn.indexBuffer,Vn.segments)}}function bh(O,a,c,C,M,I){const z=C.paint.get("raster-fade-duration");if(!I&&z>0){const Y=k.now(),ee=(Y-O.timeAdded)/z,se=a?(Y-a.timeAdded)/z:-1,ge=c.getSource(),Oe=ut(M,{tileSize:ge.tileSize,roundZoom:ge.roundZoom}),Ie=!a||Math.abs(a.tileID.overscaledZ-Oe)>Math.abs(O.tileID.overscaledZ-Oe),Ge=Ie&&O.refreshedUponExpiration?1:o.ae(Ie?ee:1-se,0,1);return O.refreshedUponExpiration&&ee>=1&&(O.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Ge}:{opacity:Ge,mix:0}}return{opacity:1,mix:0}}const ps=new o.b7(1,0,0,1),xu=new o.b7(0,1,0,1),Xs=new o.b7(0,0,1,1),Wu=new o.b7(1,0,1,1),Wl=new o.b7(0,1,1,1);function ju(O,a,c,C){Mu(O,0,a+c/2,O.transform.width,c,C)}function Ml(O,a,c,C){Mu(O,a-c/2,0,c,O.transform.height,C)}function Mu(O,a,c,C,M,I){const z=O.context,Y=z.gl;Y.enable(Y.SCISSOR_TEST),Y.scissor(a*O.pixelRatio,c*O.pixelRatio,C*O.pixelRatio,M*O.pixelRatio),z.clear({color:I}),Y.disable(Y.SCISSOR_TEST)}function Ic(O,a,c){const C=O.context,M=C.gl,I=O.useProgram("debug"),z=Sr.disabled,Y=J.disabled,ee=O.colorModeForRenderPass(),se="$debug",ge=O.style.map.terrain&&O.style.map.terrain.getTerrainData(c);C.activeTexture.set(M.TEXTURE0);const Oe=a.getTileByID(c.key).latestRawTileData,Ie=Math.floor((Oe&&Oe.byteLength||0)/1024),Ge=a.getTile(c).tileSize,Ze=512/Math.min(Ge,512)*(c.overscaledZ/O.transform.zoom)*.5;let dt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(dt+=` => ${c.overscaledZ}`),function(pt,bt){pt.initDebugOverlayCanvas();const Bt=pt.debugOverlayCanvas,wt=pt.context.gl,It=pt.debugOverlayCanvas.getContext("2d");It.clearRect(0,0,Bt.width,Bt.height),It.shadowColor="white",It.shadowBlur=2,It.lineWidth=1.5,It.strokeStyle="white",It.textBaseline="top",It.font="bold 36px Open Sans, sans-serif",It.fillText(bt,5,5),It.strokeText(bt,5,5),pt.debugOverlayTexture.update(Bt),pt.debugOverlayTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE)}(O,`${dt} ${Ie}kB`);const ct=O.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(C,M.TRIANGLES,z,Y,wi.alphaBlended,eo.disabled,Vh(o.b7.transparent,Ze),null,ct,se,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),I.draw(C,M.LINE_STRIP,z,Y,ee,eo.disabled,Vh(o.b7.red),ge,ct,se,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function ed(O,a,c,C){const{isRenderingGlobe:M}=C,I=O.context,z=I.gl,Y=O.transform,ee=O.colorModeForRenderPass(),se=O.getDepthModeFor3D(),ge=O.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,O.width,O.height]);for(const Oe of c){const Ie=a.getTerrainMesh(Oe.tileID),Ge=O.renderToTexture.getTexture(Oe),Ze=a.getTerrainData(Oe.tileID);I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Ge.texture);const dt=a.getMeshFrameDelta(Y.zoom),ct=Y.calculateFogMatrix(Oe.tileID.toUnwrapped()),pt=Qh(dt,ct,O.style.sky,Y.pitch,M),bt=Y.getProjectionData({overscaledTileID:Oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ge.draw(I,z.TRIANGLES,se,J.disabled,ee,eo.backCCW,pt,Ze,bt,"terrain",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}}function Ac(O,a){if(!a.mesh){const c=new o.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const C=new o.aK;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),a.mesh=new bl(O.createVertexBuffer(c,$o.members),O.createIndexBuffer(C),o.aJ.simpleSegment(0,0,c.length,C.length))}return a.mesh}class Tc{constructor(a,c){this.context=new Jc(a),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=zt.maxUnderzooming+zt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ws}resize(a,c,C){if(this.width=Math.floor(a*C),this.height=Math.floor(c*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const a=this.context,c=new o.aI;c.emplaceBack(0,0),c.emplaceBack(o.Z,0),c.emplaceBack(0,o.Z),c.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=a.createVertexBuffer(c,$o.members),this.tileExtentSegments=o.aJ.simpleSegment(0,0,4,2);const C=new o.aI;C.emplaceBack(0,0),C.emplaceBack(o.Z,0),C.emplaceBack(0,o.Z),C.emplaceBack(o.Z,o.Z),this.debugBuffer=a.createVertexBuffer(C,$o.members),this.debugSegments=o.aJ.simpleSegment(0,0,4,5);const M=new o.bY;M.emplaceBack(0,0,0,0),M.emplaceBack(o.Z,0,o.Z,0),M.emplaceBack(0,o.Z,0,o.Z),M.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=a.createVertexBuffer(M,tf.members),this.rasterBoundsSegments=o.aJ.simpleSegment(0,0,4,2);const I=new o.aI;I.emplaceBack(0,0),I.emplaceBack(o.Z,0),I.emplaceBack(0,o.Z),I.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(I,$o.members),this.rasterBoundsSegmentsPosOnly=o.aJ.simpleSegment(0,0,4,5);const z=new o.aI;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(z,$o.members),this.viewportSegments=o.aJ.simpleSegment(0,0,4,2);const Y=new o.bZ;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(Y);const ee=new o.aK;ee.emplaceBack(1,0,2),ee.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(ee);const se=this.context.gl;this.stencilClearMode=new J({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO),this.tileExtentMesh=new bl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const a=this.context,c=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=o.K();o.bQ(C,0,this.width,this.height,0,0,1),o.M(C,C,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(a,c.TRIANGLES,Sr.disabled,this.stencilClearMode,wi.disabled,eo.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,c,C){if(this.currentStencilSource===a.source||!a.isTileClipped()||!c||!c.length)return;this.currentStencilSource=a.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(wi.disabled),M.setDepthMode(Sr.disabled);const I={};for(const z of c)I[z.key]=this.nextStencilID++;this._renderTileMasks(I,c,C,!0),this._renderTileMasks(I,c,C,!1),this._tileClippingMaskIDs=I}_renderTileMasks(a,c,C,M){const I=this.context,z=I.gl,Y=this.style.projection,ee=this.transform,se=this.useProgram("clippingMask");for(const ge of c){const Oe=a[ge.key],Ie=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ge),Ge=Y.getMeshFromTileID(this.context,ge.canonical,M,!0,"stencil"),Ze=ee.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!0,applyTerrainMatrix:!0});se.draw(I,z.TRIANGLES,Sr.disabled,new J({func:z.ALWAYS,mask:0},Oe,255,z.KEEP,z.KEEP,z.REPLACE),wi.disabled,C?eo.disabled:eo.backCCW,null,Ie,Ze,"$clipping",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}}_renderTilesDepthBuffer(){const a=this.context,c=a.gl,C=this.style.projection,M=this.transform,I=this.useProgram("depth"),z=this.getDepthModeFor3D(),Y=at(M,{tileSize:M.tileSize});for(const ee of Y){const se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ee),ge=C.getMeshFromTileID(this.context,ee.canonical,!0,!0,"raster"),Oe=M.getProjectionData({overscaledTileID:ee,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(a,c.TRIANGLES,z,J.disabled,wi.disabled,eo.backCCW,null,se,Oe,"$clipping",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,c=this.context.gl;return new J({func:c.NOTEQUAL,mask:255},a,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(a){const c=this.context.gl;return new J({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){const c=this.context.gl,C=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),M=C[C.length-1].overscaledZ,I=C[0].overscaledZ-M+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const z={};for(let Y=0;Y<I;Y++)z[Y+M]=new J({func:c.GEQUAL,mask:255},Y+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=I,[z,C]}return[{[M]:J.disabled},C]}stencilConfigForOverlapTwoPass(a){const c=this.context.gl,C=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),M=C[C.length-1].overscaledZ,I=C[0].overscaledZ-M+1;if(this.clearStencil(),I>1){const z={},Y={};for(let ee=0;ee<I;ee++)z[ee+M]=new J({func:c.GREATER,mask:255},I+1+ee,255,c.KEEP,c.KEEP,c.REPLACE),Y[ee+M]=new J({func:c.GREATER,mask:255},1+ee,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*I+1,[z,Y,C]}return this.nextStencilID=3,[{[M]:new J({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new J({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},C]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new wi([a.CONSTANT_COLOR,a.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?wi.unblended:wi.alphaBlended}getDepthModeForSublayer(a,c,C){if(!this.opaquePassEnabledForLayer())return Sr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Sr(C||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new Sr(this.context.gl.LEQUAL,Sr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,c){var C,M;this.style=a,this.options=c,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(k.now()),this.imageManager.beginFrame();const I=this.style._order,z=this.style.sourceCaches,Y={},ee={},se={},ge={isRenderingToTexture:!1,isRenderingGlobe:((C=a.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const Ie in z){const Ge=z[Ie];Ge.used&&Ge.prepare(this.context),Y[Ie]=Ge.getVisibleCoordinates(!1),ee[Ie]=Y[Ie].slice().reverse(),se[Ie]=Ge.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ie=0;Ie<I.length;Ie++)if(this.style._layers[I[Ie]].is3D()){this.opaquePassCutoff=Ie;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Ie of I){const Ge=this.style._layers[Ie];if(!Ge.hasOffscreenPass()||Ge.isHidden(this.transform.zoom))continue;const Ze=ee[Ge.source];(Ge.type==="custom"||Ze.length)&&this.renderLayer(this,z[Ge.source],Ge,Ze,ge)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:Ie=>this.useProgram(Ie)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Ie,Ge){const Ze=Ie.context,dt=Ze.gl,ct=((Pt,Lt,sn)=>{const ln=Math.cos(Lt.rollInRadians),on=Math.sin(Lt.rollInRadians),Cn=He(Lt),Mn=Lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Pt.properties.get("sky-color"),u_horizon_color:Pt.properties.get("horizon-color"),u_horizon:[(Lt.width/2-Cn*on)*sn,(Lt.height/2+Cn*ln)*sn],u_horizon_normal:[-on,ln],u_sky_horizon_blend:Pt.properties.get("sky-horizon-blend")*Lt.height/2*sn,u_sky_blend:Mn}})(Ge,Ie.style.map.transform,Ie.pixelRatio),pt=new Sr(dt.LEQUAL,Sr.ReadWrite,[0,1]),bt=J.disabled,Bt=Ie.colorModeForRenderPass(),wt=Ie.useProgram("sky"),It=Ac(Ze,Ge);wt.draw(Ze,dt.TRIANGLES,pt,bt,Bt,eo.disabled,ct,null,void 0,"sky",It.vertexBuffer,It.indexBuffer,It.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const Ie=this.style._layers[I[this.currentLayer]],Ge=z[Ie.source],Ze=Y[Ie.source];this._renderTileClippingMasks(Ie,Ze,!1),this.renderLayer(this,Ge,Ie,Ze,ge)}this.renderPass="translucent";let Oe=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const Ie=this.style._layers[I[this.currentLayer]],Ge=z[Ie.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Ie,ge))continue;this.opaquePassEnabledForLayer()||Oe||(Oe=!0,ge.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ze=(Ie.type==="symbol"?se:ee)[Ie.source];this._renderTileClippingMasks(Ie,Y[Ie.source],!1),this.renderLayer(this,Ge,Ie,Ze,ge)}if(ge.isRenderingGlobe&&function(Ie,Ge,Ze){const dt=Ie.context,ct=dt.gl,pt=Ie.useProgram("atmosphere"),bt=new Sr(ct.LEQUAL,Sr.ReadOnly,[0,1]),Bt=Ie.transform,wt=function(Mn,ir){const Vn=Mn.properties.get("position"),kn=[-Vn.x,-Vn.y,-Vn.z],Er=o.ad(new Float64Array(16));return Mn.properties.get("anchor")==="map"&&(o.a_(Er,Er,ir.rollInRadians),o.a$(Er,Er,-ir.pitchInRadians),o.a_(Er,Er,ir.bearingInRadians),o.a$(Er,Er,ir.center.lat*Math.PI/180),o.bp(Er,Er,-ir.center.lng*Math.PI/180)),o.bX(kn,kn,Er),kn}(Ze,Ie.transform),It=Bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Pt=Ge.properties.get("atmosphere-blend")*It.projectionTransition;if(Pt===0)return;const Lt=_i(Bt.worldSize,Bt.center.lat),sn=Bt.inverseProjectionMatrix,ln=new Float64Array(4);ln[3]=1,o.at(ln,ln,Bt.modelViewProjectionMatrix),ln[0]/=ln[3],ln[1]/=ln[3],ln[2]/=ln[3],ln[3]=1,o.at(ln,ln,sn),ln[0]/=ln[3],ln[1]/=ln[3],ln[2]/=ln[3],ln[3]=1;const on=((Mn,ir,Vn,kn,Er)=>({u_sun_pos:Mn,u_atmosphere_blend:ir,u_globe_position:Vn,u_globe_radius:kn,u_inv_proj_matrix:Er}))(wt,Pt,[ln[0],ln[1],ln[2]],Lt,sn),Cn=Ac(dt,Ge);pt.draw(dt,ct.TRIANGLES,bt,J.disabled,wi.alphaBlended,eo.disabled,on,null,null,"atmosphere",Cn.vertexBuffer,Cn.indexBuffer,Cn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Ie=function(Ge,Ze){let dt=null;const ct=Object.values(Ge._layers).flatMap(wt=>wt.source&&!wt.isHidden(Ze)?[Ge.sourceCaches[wt.source]]:[]),pt=ct.filter(wt=>wt.getSource().type==="vector"),bt=ct.filter(wt=>wt.getSource().type!=="vector"),Bt=wt=>{(!dt||dt.getSource().maxzoom<wt.getSource().maxzoom)&&(dt=wt)};return pt.forEach(wt=>Bt(wt)),dt||bt.forEach(wt=>Bt(wt)),dt}(this.style,this.transform.zoom);Ie&&function(Ge,Ze,dt){for(let ct=0;ct<dt.length;ct++)Ic(Ge,Ze,dt[ct])}(this,Ie,Ie.getVisibleCoordinates())}this.options.showPadding&&function(Ie){const Ge=Ie.transform.padding;ju(Ie,Ie.transform.height-(Ge.top||0),3,ps),ju(Ie,Ge.bottom||0,3,xu),Ml(Ie,Ge.left||0,3,Xs),Ml(Ie,Ie.transform.width-(Ge.right||0),3,Wu);const Ze=Ie.transform.centerPoint;(function(dt,ct,pt,bt){Mu(dt,ct-1,pt-10,2,20,bt),Mu(dt,ct-10,pt-1,20,2,bt)})(Ie,Ze.x,Ie.transform.height-Ze.y,Wl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=a?!o.b_(c,C):!o.b$(c,C)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(o.c0(c,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(I,z){const Y=I.context,ee=Y.gl,se=I.transform,ge=wi.unblended,Oe=new Sr(ee.LEQUAL,Sr.ReadWrite,[0,1]),Ie=z.sourceCache.getRenderableTiles(),Ge=I.useProgram("terrainDepth");Y.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),Y.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),Y.clear({color:o.b7.transparent,depth:1});for(const Ze of Ie){const dt=z.getTerrainMesh(Ze.tileID),ct=z.getTerrainData(Ze.tileID),pt=se.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),bt={u_ele_delta:z.getMeshFrameDelta(se.zoom)};Ge.draw(Y,ee.TRIANGLES,Oe,J.disabled,ge,eo.backCCW,bt,ct,pt,"terrain",dt.vertexBuffer,dt.indexBuffer,dt.segments)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain),function(I,z){const Y=I.context,ee=Y.gl,se=I.transform,ge=wi.unblended,Oe=new Sr(ee.LEQUAL,Sr.ReadWrite,[0,1]),Ie=z.getCoordsTexture(),Ge=z.sourceCache.getRenderableTiles(),Ze=I.useProgram("terrainCoords");Y.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),Y.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),Y.clear({color:o.b7.transparent,depth:1}),z.coordsIndex=[];for(const dt of Ge){const ct=z.getTerrainMesh(dt.tileID),pt=z.getTerrainData(dt.tileID);Y.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Ie.texture);const bt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(se.zoom)},Bt=se.getProjectionData({overscaledTileID:dt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ze.draw(Y,ee.TRIANGLES,Oe,J.disabled,ge,eo.backCCW,bt,pt,Bt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments),z.coordsIndex.push(dt.tileID.key)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain))}renderLayer(a,c,C,M,I){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(M||[]).length)&&(this.id=C.id,o.c1(C)?function(z,Y,ee,se,ge,Oe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Ie}=Oe,Ge=J.disabled,Ze=z.colorModeForRenderPass();(ee._unevaluatedLayout.hasValue("text-variable-anchor")||ee._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(dt,ct,pt,bt,Bt,wt,It,Pt,Lt){const sn=ct.transform,ln=ct.style.map.terrain,on=Bt==="map",Cn=wt==="map";for(const Mn of dt){const ir=bt.getTile(Mn),Vn=ir.getBucket(pt);if(!Vn||!Vn.text||!Vn.text.segments.get().length)continue;const kn=o.ak(Vn.textSizeData,sn.zoom),Er=o.az(ir,1,ct.transform.zoom),Vr=mr(on,ct.transform,Er),ci=pt.layout.get("icon-text-fit")!=="none"&&Vn.hasIconData();if(kn){const Yo=Math.pow(2,sn.zoom-ir.tileID.overscaledZ),bo=ln?(Ro,Ss)=>ln.getElevation(Mn,Ro,Ss):null;_h(Vn,on,Cn,Lt,sn,Vr,Yo,kn,ci,o.aA(sn,ir,It,Pt),Mn.toUnwrapped(),bo)}}}(se,z,ee,Y,ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ge),ee.paint.get("icon-opacity").constantOr(1)!==0&&Ec(z,Y,ee,se,!1,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),ee.layout.get("icon-rotation-alignment"),ee.layout.get("icon-pitch-alignment"),ee.layout.get("icon-keep-upright"),Ge,Ze,Ie),ee.paint.get("text-opacity").constantOr(1)!==0&&Ec(z,Y,ee,se,!0,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.layout.get("text-keep-upright"),Ge,Ze,Ie),Y.map.showCollisionBoxes&&(Jh(z,Y,ee,se,!0),Jh(z,Y,ee,se,!1))}(a,c,C,M,this.style.placement.variableOffsets,I):o.c2(C)?function(z,Y,ee,se,ge){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=ge,Ie=ee.paint.get("circle-opacity"),Ge=ee.paint.get("circle-stroke-width"),Ze=ee.paint.get("circle-stroke-opacity"),dt=!ee.layout.get("circle-sort-key").isConstant();if(Ie.constantOr(1)===0&&(Ge.constantOr(1)===0||Ze.constantOr(1)===0))return;const ct=z.context,pt=ct.gl,bt=z.transform,Bt=z.getDepthModeForSublayer(0,Sr.ReadOnly),wt=J.disabled,It=z.colorModeForRenderPass(),Pt=[],Lt=bt.getCircleRadiusCorrection();for(let sn=0;sn<se.length;sn++){const ln=se[sn],on=Y.getTile(ln),Cn=on.getBucket(ee);if(!Cn)continue;const Mn=ee.paint.get("circle-translate"),ir=ee.paint.get("circle-translate-anchor"),Vn=o.aA(bt,on,Mn,ir),kn=Cn.programConfigurations.get(ee.id),Er=z.useProgram("circle",kn),Vr=Cn.layoutVertexBuffer,ci=Cn.indexBuffer,Yo=z.style.map.terrain&&z.style.map.terrain.getTerrainData(ln),bo={programConfiguration:kn,program:Er,layoutVertexBuffer:Vr,indexBuffer:ci,uniformValues:Cd(z,on,ee,Vn,Lt),terrainData:Yo,projectionData:bt.getProjectionData({overscaledTileID:ln,applyGlobeMatrix:!Oe,applyTerrainMatrix:!0})};if(dt){const Ro=Cn.segments.get();for(const Ss of Ro)Pt.push({segments:new o.aJ([Ss]),sortKey:Ss.sortKey,state:bo})}else Pt.push({segments:Cn.segments,sortKey:0,state:bo})}dt&&Pt.sort((sn,ln)=>sn.sortKey-ln.sortKey);for(const sn of Pt){const{programConfiguration:ln,program:on,layoutVertexBuffer:Cn,indexBuffer:Mn,uniformValues:ir,terrainData:Vn,projectionData:kn}=sn.state;on.draw(ct,pt.TRIANGLES,Bt,wt,It,eo.backCCW,ir,Vn,kn,ee.id,Cn,Mn,sn.segments,ee.paint,z.transform.zoom,ln)}}(a,c,C,M,I):o.c3(C)?function(z,Y,ee,se,ge){if(ee.paint.get("heatmap-opacity")===0)return;const Oe=z.context,{isRenderingToTexture:Ie,isRenderingGlobe:Ge}=ge;if(z.style.map.terrain){for(const Ze of se){const dt=Y.getTile(Ze);Y.hasRenderableParent(Ze)||(z.renderPass==="offscreen"?ru(z,dt,ee,Ze,Ge):z.renderPass==="translucent"&&Af(z,ee,Ze,Ie,Ge))}Oe.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(Ze,dt,ct,pt){const bt=Ze.context,Bt=bt.gl,wt=Ze.transform,It=J.disabled,Pt=new wi([Bt.ONE,Bt.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(Lt,sn,ln){const on=Lt.gl;Lt.activeTexture.set(on.TEXTURE1),Lt.viewport.set([0,0,sn.width/4,sn.height/4]);let Cn=ln.heatmapFbos.get(o.bU);Cn?(on.bindTexture(on.TEXTURE_2D,Cn.colorAttachment.get()),Lt.bindFramebuffer.set(Cn.framebuffer)):(Cn=Ed(Lt,sn.width/4,sn.height/4),ln.heatmapFbos.set(o.bU,Cn))})(bt,Ze,ct),bt.clear({color:o.b7.transparent});for(let Lt=0;Lt<pt.length;Lt++){const sn=pt[Lt];if(dt.hasRenderableParent(sn))continue;const ln=dt.getTile(sn),on=ln.getBucket(ct);if(!on)continue;const Cn=on.programConfigurations.get(ct.id),Mn=Ze.useProgram("heatmap",Cn),ir=wt.getProjectionData({overscaledTileID:sn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Vn=wt.getCircleRadiusCorrection();Mn.draw(bt,Bt.TRIANGLES,Sr.disabled,It,Pt,eo.backCCW,bd(ln,wt.zoom,ct.paint.get("heatmap-intensity"),Vn),null,ir,ct.id,on.layoutVertexBuffer,on.indexBuffer,on.segments,ct.paint,wt.zoom,Cn)}bt.viewport.set([0,0,Ze.width,Ze.height])}(z,Y,ee,se):z.renderPass==="translucent"&&function(Ze,dt){const ct=Ze.context,pt=ct.gl;ct.setColorMode(Ze.colorModeForRenderPass());const bt=dt.heatmapFbos.get(o.bU);bt&&(ct.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,bt.colorAttachment.get()),ct.activeTexture.set(pt.TEXTURE1),ac(ct,dt).bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Ze.useProgram("heatmapTexture").draw(ct,pt.TRIANGLES,Sr.disabled,J.disabled,Ze.colorModeForRenderPass(),eo.disabled,Gf(Ze,dt,0,1),null,null,dt.id,Ze.viewportBuffer,Ze.quadTriangleIndexBuffer,Ze.viewportSegments,dt.paint,Ze.transform.zoom))}(z,ee)}(a,c,C,M,I):o.c4(C)?function(z,Y,ee,se,ge){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=ge,Ie=ee.paint.get("line-opacity"),Ge=ee.paint.get("line-width");if(Ie.constantOr(1)===0||Ge.constantOr(1)===0)return;const Ze=z.getDepthModeForSublayer(0,Sr.ReadOnly),dt=z.colorModeForRenderPass(),ct=ee.paint.get("line-dasharray"),pt=ee.paint.get("line-pattern"),bt=pt.constantOr(1),Bt=ee.paint.get("line-gradient"),wt=ee.getCrossfadeParameters(),It=bt?"linePattern":ct?"lineSDF":Bt?"lineGradient":"line",Pt=z.context,Lt=Pt.gl,sn=z.transform;let ln=!0;for(const on of se){const Cn=Y.getTile(on);if(bt&&!Cn.patternsLoaded())continue;const Mn=Cn.getBucket(ee);if(!Mn)continue;const ir=Mn.programConfigurations.get(ee.id),Vn=z.context.program.get(),kn=z.useProgram(It,ir),Er=ln||kn.program!==Vn,Vr=z.style.map.terrain&&z.style.map.terrain.getTerrainData(on),ci=pt.constantOr(null);if(ci&&Cn.imageAtlas){const to=Cn.imageAtlas,qi=to.patternPositions[ci.to.toString()],va=to.patternPositions[ci.from.toString()];qi&&va&&ir.setConstantPatternPositions(qi,va)}const Yo=sn.getProjectionData({overscaledTileID:on,applyGlobeMatrix:!Oe,applyTerrainMatrix:!0}),bo=sn.getPixelScale(),Ro=bt?$h(z,Cn,ee,bo,wt):ct?vh(z,Cn,ee,bo,ct,wt):Bt?BA(z,Cn,ee,bo,Mn.lineClipsArray.length):zl(z,Cn,ee,bo);if(bt)Pt.activeTexture.set(Lt.TEXTURE0),Cn.imageAtlasTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),ir.updatePaintBuffers(wt);else if(ct&&(Er||z.lineAtlas.dirty))Pt.activeTexture.set(Lt.TEXTURE0),z.lineAtlas.bind(Pt);else if(Bt){const to=Mn.gradients[ee.id];let qi=to.texture;if(ee.gradientVersion!==to.version){let va=256;if(ee.stepInterpolant){const Ca=Y.getSource().maxzoom,_a=on.canonical.z===Ca?Math.ceil(1<<z.transform.maxZoom-on.canonical.z):1;va=o.ae(o.bV(Mn.maxLineLength/o.Z*1024*_a),256,Pt.maxTextureSize)}to.gradient=o.bW({expression:ee.gradientExpression(),evaluationKey:"lineProgress",resolution:va,image:to.gradient||void 0,clips:Mn.lineClipsArray}),to.texture?to.texture.update(to.gradient):to.texture=new oe(Pt,to.gradient,Lt.RGBA),to.version=ee.gradientVersion,qi=to.texture}Pt.activeTexture.set(Lt.TEXTURE0),qi.bind(ee.stepInterpolant?Lt.NEAREST:Lt.LINEAR,Lt.CLAMP_TO_EDGE)}let Ss;if(Oe){const[to]=z.getStencilConfigForOverlapAndUpdateStencilID(se);Ss=to[on.overscaledZ]}else Ss=z.stencilModeForClipping(on);kn.draw(Pt,Lt.TRIANGLES,Ze,Ss,dt,eo.disabled,Ro,Vr,Yo,ee.id,Mn.layoutVertexBuffer,Mn.indexBuffer,Mn.segments,ee.paint,z.transform.zoom,ir,Mn.layoutVertexBuffer2),ln=!1}}(a,c,C,M,I):o.c5(C)?function(z,Y,ee,se,ge){const Oe=ee.paint.get("fill-color"),Ie=ee.paint.get("fill-opacity");if(Ie.constantOr(1)===0)return;const{isRenderingToTexture:Ge}=ge,Ze=z.colorModeForRenderPass(),dt=ee.paint.get("fill-pattern"),ct=z.opaquePassEnabledForLayer()&&!dt.constantOr(1)&&Oe.constantOr(o.b7.transparent).a===1&&Ie.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===ct){const pt=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Sr.ReadWrite:Sr.ReadOnly);lc(z,Y,ee,se,pt,Ze,!1,Ge)}if(z.renderPass==="translucent"&&ee.paint.get("fill-antialias")){const pt=z.getDepthModeForSublayer(ee.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);lc(z,Y,ee,se,pt,Ze,!0,Ge)}}(a,c,C,M,I):o.c6(C)?function(z,Y,ee,se,ge){const Oe=ee.paint.get("fill-extrusion-opacity");if(Oe===0)return;const{isRenderingToTexture:Ie}=ge;if(z.renderPass==="translucent"){const Ge=new Sr(z.context.gl.LEQUAL,Sr.ReadWrite,z.depthRangeFor3D);if(Oe!==1||ee.paint.get("fill-extrusion-pattern").constantOr(1))Ms(z,Y,ee,se,Ge,J.disabled,wi.disabled,Ie),Ms(z,Y,ee,se,Ge,z.stencilModeFor3D(),z.colorModeForRenderPass(),Ie);else{const Ze=z.colorModeForRenderPass();Ms(z,Y,ee,se,Ge,J.disabled,Ze,Ie)}}}(a,c,C,M,I):o.c7(C)?function(z,Y,ee,se,ge){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=ge,Ie=z.context,Ge=z.style.projection.useSubdivision,Ze=z.getDepthModeForSublayer(0,Sr.ReadOnly),dt=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(ct,pt,bt,Bt,wt,It,Pt){const Lt=ct.context,sn=Lt.gl;for(const ln of bt){const on=pt.getTile(ln),Cn=on.dem;if(!Cn||!Cn.data||!on.needsHillshadePrepare)continue;const Mn=Cn.dim,ir=Cn.stride,Vn=Cn.getPixels();if(Lt.activeTexture.set(sn.TEXTURE1),Lt.pixelStoreUnpackPremultiplyAlpha.set(!1),on.demTexture=on.demTexture||ct.getTileTexture(ir),on.demTexture){const Er=on.demTexture;Er.update(Vn,{premultiply:!1}),Er.bind(sn.NEAREST,sn.CLAMP_TO_EDGE)}else on.demTexture=new oe(Lt,Vn,sn.RGBA,{premultiply:!1}),on.demTexture.bind(sn.NEAREST,sn.CLAMP_TO_EDGE);Lt.activeTexture.set(sn.TEXTURE0);let kn=on.fbo;if(!kn){const Er=new oe(Lt,{width:Mn,height:Mn,data:null},sn.RGBA);Er.bind(sn.LINEAR,sn.CLAMP_TO_EDGE),kn=on.fbo=Lt.createFramebuffer(Mn,Mn,!0,!1),kn.colorAttachment.set(Er.texture)}Lt.bindFramebuffer.set(kn.framebuffer),Lt.viewport.set([0,0,Mn,Mn]),ct.useProgram("hillshadePrepare").draw(Lt,sn.TRIANGLES,wt,It,Pt,eo.disabled,za(on.tileID,Cn),null,null,Bt.id,ct.rasterBoundsBuffer,ct.quadTriangleIndexBuffer,ct.rasterBoundsSegments),on.needsHillshadePrepare=!1}})(z,Y,se,ee,Ze,J.disabled,dt),Ie.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(Ge){const[ct,pt,bt]=z.stencilConfigForOverlapTwoPass(se);Qs(z,Y,ee,bt,ct,Ze,dt,!1,Oe),Qs(z,Y,ee,bt,pt,Ze,dt,!0,Oe)}else{const[ct,pt]=z.getStencilConfigForOverlapAndUpdateStencilID(se);Qs(z,Y,ee,pt,ct,Ze,dt,!1,Oe)}}(a,c,C,M,I):o.c8(C)?function(z,Y,ee,se,ge){if(z.renderPass!=="translucent"||ee.paint.get("raster-opacity")===0||!se.length)return;const{isRenderingToTexture:Oe}=ge,Ie=Y.getSource(),Ge=z.style.projection.useSubdivision;if(Ie instanceof Xn)th(z,Y,ee,se,null,!1,!1,Ie.tileCoords,Ie.flippedWindingOrder,Oe);else if(Ge){const[Ze,dt,ct]=z.stencilConfigForOverlapTwoPass(se);th(z,Y,ee,ct,Ze,!1,!0,Bd,!1,Oe),th(z,Y,ee,ct,dt,!0,!0,Bd,!1,Oe)}else{const[Ze,dt]=z.getStencilConfigForOverlapAndUpdateStencilID(se);th(z,Y,ee,dt,Ze,!1,!0,Bd,!1,Oe)}}(a,c,C,M,I):o.c9(C)?function(z,Y,ee,se,ge){const Oe=ee.paint.get("background-color"),Ie=ee.paint.get("background-opacity");if(Ie===0)return;const{isRenderingToTexture:Ge}=ge,Ze=z.context,dt=Ze.gl,ct=z.style.projection,pt=z.transform,bt=pt.tileSize,Bt=ee.paint.get("background-pattern");if(z.isPatternMissing(Bt))return;const wt=!Bt&&Oe.a===1&&Ie===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==wt)return;const It=J.disabled,Pt=z.getDepthModeForSublayer(0,wt==="opaque"?Sr.ReadWrite:Sr.ReadOnly),Lt=z.colorModeForRenderPass(),sn=z.useProgram(Bt?"backgroundPattern":"background"),ln=se||at(pt,{tileSize:bt,terrain:z.style.map.terrain});Bt&&(Ze.activeTexture.set(dt.TEXTURE0),z.imageManager.bind(z.context));const on=ee.getCrossfadeParameters();for(const Cn of ln){const Mn=pt.getProjectionData({overscaledTileID:Cn,applyGlobeMatrix:!Ge,applyTerrainMatrix:!0}),ir=Bt?JA(Ie,z,Bt,{tileID:Cn,tileSize:bt},on):$c(Ie,Oe),Vn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Cn),kn=ct.getMeshFromTileID(Ze,Cn.canonical,!1,!0,"raster");sn.draw(Ze,dt.TRIANGLES,Pt,It,Lt,eo.backCCW,ir,Vn,Mn,ee.id,kn.vertexBuffer,kn.indexBuffer,kn.segments)}}(a,0,C,M,I):o.ca(C)&&function(z,Y,ee,se){const{isRenderingGlobe:ge}=se,Oe=z.context,Ie=ee.implementation,Ge=z.style.projection,Ze=z.transform,dt=Ze.getProjectionDataForCustomLayer(ge),ct={farZ:Ze.farZ,nearZ:Ze.nearZ,fov:Ze.fov*Math.PI/180,modelViewProjectionMatrix:Ze.modelViewProjectionMatrix,projectionMatrix:Ze.projectionMatrix,shaderData:{variantName:Ge.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ge.shaderPreludeCode.vertexSource}`,define:Ge.shaderDefine},defaultProjectionData:dt},pt=Ie.renderingMode?Ie.renderingMode:"2d";if(z.renderPass==="offscreen"){const bt=Ie.prerender;bt&&(z.setCustomLayerDefaults(),Oe.setColorMode(z.colorModeForRenderPass()),bt.call(Ie,Oe.gl,ct),Oe.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),Oe.setColorMode(z.colorModeForRenderPass()),Oe.setStencilMode(J.disabled);const bt=pt==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Sr.ReadOnly);Oe.setDepthMode(bt),Ie.render(Oe.gl,ct),Oe.setDirty(),z.setBaseState(),Oe.bindFramebuffer.set(null)}}(a,0,C,I))}saveTileTexture(a){const c=this._tileTextures[a.size[0]];c?c.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const c=this._tileTextures[a];return c&&c.length>0?c.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const c=this.imageManager.getPattern(a.from.toString()),C=this.imageManager.getPattern(a.to.toString());return!c||!C}useProgram(a,c,C=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,I=this.style.projection,z=a+(c?c.cacheKey:"")+`/${C?js:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[z]||(this.cache[z]=new Yh(this.context,jr[a],c,tl[a],this._showOverdrawInspector,M,C?jr.projectionMercator:I.shaderPreludeCode,C?aa:I.shaderDefine)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:c}=this.context.gl;return this.width!==a||this.height!==c}}function IA(O,a){let c,C=!1,M=null,I=null;const z=()=>{M=null,C&&(O.apply(I,c),M=setTimeout(z,a),C=!1)};return(...Y)=>(C=!0,I=this,c=Y,M||z(),M)}class wu{constructor(a){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let C;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(C=M)}),(C&&C[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:C,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const C=c.join("/");let M=C;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${C}`);let I=window.location.hash.replace(M,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let z=window.location.href.replace(/(#.+)?$/,I);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=IA(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const c=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,M=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,M),z=Math.round(c.lng*I)/I,Y=Math.round(c.lat*I)/I,ee=this._map.getBearing(),se=this._map.getPitch();let ge="";if(ge+=a?`/${z}/${Y}/${C}`:`${C}/${Y}/${z}`,(ee||se)&&(ge+="/"+Math.round(10*ee)/10),se&&(ge+=`/${Math.round(se)}`),this._hashName){const Oe=this._hashName;let Ie=!1;const Ge=window.location.hash.slice(1).split("&").map(Ze=>{const dt=Ze.split("=")[0];return dt===Oe?(Ie=!0,`${dt}=${ge}`):Ze}).filter(Ze=>Ze);return Ie||Ge.push(`${Oe}=${ge}`),`#${Ge.join("&")}`}return`#${ge}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.Q(+a[2],+a[1])}catch{return!1}const c=+a[0],C=+(a[3]||0),M=+(a[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&C>=-180&&C<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const ml={linearity:.3,easing:o.cb(0,0,.3,1)},TA=o.e({deceleration:2500,maxSpeed:1400},ml),Od=o.e({deceleration:20,maxSpeed:1400},ml),st=o.e({deceleration:1e3,maxSpeed:360},ml),xh=o.e({deceleration:1e3,maxSpeed:90},ml),Js=o.e({deceleration:1e3,maxSpeed:360},ml);class Po{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,c=k.now();for(;a.length>0&&c-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)c.zoom+=I.zoomDelta||0,c.bearing+=I.bearingDelta||0,c.pitch+=I.pitchDelta||0,c.roll+=I.rollDelta||0,I.panDelta&&c.pan._add(I.panDelta),I.around&&(c.around=I.around),I.pinchAround&&(c.pinchAround=I.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const I=ms(c.pan.mag(),C,o.e({},TA,a||{})),z=c.pan.mult(I.amount/c.pan.mag()),Y=this._map.cameraHelper.handlePanInertia(z,this._map.transform);M.center=Y.easingCenter,M.offset=Y.easingOffset,ri(M,I)}if(c.zoom){const I=ms(c.zoom,C,Od);M.zoom=this._map.transform.zoom+I.amount,ri(M,I)}if(c.bearing){const I=ms(c.bearing,C,st);M.bearing=this._map.transform.bearing+o.ae(I.amount,-179,179),ri(M,I)}if(c.pitch){const I=ms(c.pitch,C,xh);M.pitch=this._map.transform.pitch+I.amount,ri(M,I)}if(c.roll){const I=ms(c.roll,C,Js);M.roll=this._map.transform.roll+o.ae(I.amount,-179,179),ri(M,I)}if(M.zoom||M.bearing){const I=c.pinchAround===void 0?c.around:c.pinchAround;M.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function ri(O,a){(!O.duration||O.duration<a.duration)&&(O.duration=a.duration,O.easing=a.easing)}function ms(O,a,c){const{maxSpeed:C,linearity:M,deceleration:I}=c,z=o.ae(O*M/(a/1e3),-C,C),Y=Math.abs(z)/(I*M);return{easing:c.easing,duration:1e3*Y,amount:z*(Y/2)}}class Wa extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,C,M={}){C=C instanceof MouseEvent?C:new MouseEvent(a,C);const I=P.mousePos(c.getCanvas(),C),z=c.unproject(I);super(a,o.e({point:I,lngLat:z,originalEvent:C},M)),this._defaultPrevented=!1,this.target=c}}class ja extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,C){const M=a==="touchend"?C.changedTouches:C.touches,I=P.touchPos(c.getCanvasContainer(),M),z=I.map(ee=>c.unproject(ee)),Y=I.reduce((ee,se,ge,Oe)=>ee.add(se.div(Oe.length)),new o.P(0,0));super(a,{points:I,point:Y,lngLats:z,lngLat:c.unproject(Y),originalEvent:C}),this._defaultPrevented=!1}}class Os extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,C){super(a,{originalEvent:C}),this._defaultPrevented=!1}}class Fs{constructor(a,c){this._map=a,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Os(a.type,this._map,a))}mousedown(a,c){return this._mousedownPos=c,this._firePreventable(new Wa(a.type,this._map,a))}mouseup(a){this._map.fire(new Wa(a.type,this._map,a))}click(a,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Wa(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Wa(a.type,this._map,a))}mouseover(a){this._map.fire(new Wa(a.type,this._map,a))}mouseout(a){this._map.fire(new Wa(a.type,this._map,a))}touchstart(a){return this._firePreventable(new ja(a.type,this._map,a))}touchmove(a){this._map.fire(new ja(a.type,this._map,a))}touchend(a){this._map.fire(new ja(a.type,this._map,a))}touchcancel(a){this._map.fire(new ja(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ko{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Wa(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Wa(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wl{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class il{constructor(a,c){this._map=a,this._tr=new wl(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,c){this.isEnabled()&&a.shiftKey&&a.button===0&&(P.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(a,c){if(!this._active)return;const C=c;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=C,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const I=Math.min(M.x,C.x),z=Math.max(M.x,C.x),Y=Math.min(M.y,C.y),ee=Math.max(M.y,C.y);P.setTransform(this._box,`translate(${I}px,${Y}px)`),this._box.style.width=z-I+"px",this._box.style.height=ee-Y+"px"}mouseupWindow(a,c){if(!this._active||a.button!==0)return;const C=this._startPos,M=c;if(this.reset(),P.suppressClick(),C.x!==M.x||C.y!==M.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:I=>I.fitScreenCoordinates(C,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,c){return this._map.fire(new o.l(a,{originalEvent:c}))}}function Sl(O,a){if(O.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${a.length}`);const c={};for(let C=0;C<O.length;C++)c[O[C].identifier]=a[C];return c}class El{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,c,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),C.length===this.numTouches&&(this.centroid=function(M){const I=new o.P(0,0);for(const z of M)I._add(z);return I.div(M.length)}(c),this.touches=Sl(C,c)))}touchmove(a,c,C){if(this.aborted||!this.centroid)return;const M=Sl(C,c);for(const I in this.touches){const z=M[I];(!z||z.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(a,c,C){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class nh{constructor(a){this.singleTap=new El(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,c,C){this.singleTap.touchstart(a,c,C)}touchmove(a,c,C){this.singleTap.touchmove(a,c,C)}touchend(a,c,C){const M=this.singleTap.touchend(a,c,C);if(M){const I=a.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(M)<30;if(I&&z||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class Bl{constructor(a){this._tr=new wl(a),this._zoomIn=new nh({numTouches:1,numTaps:2}),this._zoomOut=new nh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,c,C){this._zoomIn.touchstart(a,c,C),this._zoomOut.touchstart(a,c,C)}touchmove(a,c,C){this._zoomIn.touchmove(a,c,C),this._zoomOut.touchmove(a,c,C)}touchend(a,c,C){const M=this._zoomIn.touchend(a,c,C),I=this._zoomOut.touchend(a,c,C),z=this._tr;return M?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(M)},{originalEvent:a})}):I?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(I)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kA{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const c=this._moveFunction(...a);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(a,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,c){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(C,M))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&P.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Gu={0:1,2:2};class Mr{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const c=P.mouseButton(a);this._eventButton=c}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(c,C){const M=Gu[C];return c.buttons===void 0||(c.buttons&M)!==M}(a,this._eventButton)}isValidEndEvent(a){return P.mouseButton(a)===this._eventButton}}class AA{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class Id{constructor(a=new Mr({checkCorrectEvent:()=>!0}),c=new AA){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(a,c,C){return a instanceof MouseEvent?c(a):typeof TouchEvent<"u"&&a instanceof TouchEvent?C(a):void 0}startMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Ol=O=>{O.mousedown=O.dragStart,O.mousemoveWindow=O.dragMove,O.mouseup=O.dragEnd,O.contextmenu=a=>{a.preventDefault()}};class rh{constructor(a,c){this._clickTolerance=a.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,c,C){return this._calculateTransform(a,c,C)}touchmove(a,c,C){if(this._active){if(!this._shouldBePrevented(C.length))return a.preventDefault(),this._calculateTransform(a,c,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,c,C){this._calculateTransform(a,c,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,c,C){C.length>0&&(this._active=!0);const M=Sl(C,c),I=new o.P(0,0),z=new o.P(0,0);let Y=0;for(const se in M){const ge=M[se],Oe=this._touches[se];Oe&&(I._add(ge),z._add(ge.sub(Oe)),Y++,M[se]=ge)}if(this._touches=M,this._shouldBePrevented(Y)||!z.mag())return;const ee=z.div(Y);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(Y),panDelta:ee}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Su{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,c,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([c[0],c[1]]))}touchmove(a,c,C){if(!this._firstTwoTouches)return;a.preventDefault();const[M,I]=this._firstTwoTouches,z=PA(C,c,M),Y=PA(C,c,I);if(!z||!Y)return;const ee=this._aroundCenter?null:z.add(Y).div(2);return this._move([z,Y],ee,a)}touchend(a,c,C){if(!this._firstTwoTouches)return;const[M,I]=this._firstTwoTouches,z=PA(C,c,M),Y=PA(C,c,I);z&&Y||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function PA(O,a,c){for(let C=0;C<O.length;C++)if(O[C].identifier===c)return a[C]}function Fi(O,a){return Math.log(O/a)/Math.LN2}class Qu extends Su{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,c){const C=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Fi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fi(this._distance,C),pinchAround:c}}}function ih(O,a){return 180*O.angleWith(a)/Math.PI}class is extends Su{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,c,C){const M=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ih(this._vector,M),pinchAround:c}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const c=25/(Math.PI*this._minDiameter)*360,C=ih(a,this._startVector);return Math.abs(C)<c}}function Bo(O){return Math.abs(O.y)>Math.abs(O.x)}class uA extends Su{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,c,C){super.touchstart(a,c,C),this._currentTouchCount=C.length}_start(a){this._lastPoints=a,Bo(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,c,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=a[0].sub(this._lastPoints[0]),I=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,I,C.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(M.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(a,c,C){if(this._valid!==void 0)return this._valid;const M=a.mag()>=2,I=c.mag()>=2;if(!M&&!I)return;if(!M||!I)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const z=a.y>0==c.y>0;return Bo(a)&&Bo(c)&&z}}const Ga={panStep:100,bearingStep:15,pitchStep:10};class ga{constructor(a){this._tr=new wl(a);const c=Ga;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let c=0,C=0,M=0,I=0,z=0;switch(a.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:a.shiftKey?C=-1:(a.preventDefault(),I=-1);break;case 39:a.shiftKey?C=1:(a.preventDefault(),I=1);break;case 38:a.shiftKey?M=1:(a.preventDefault(),z=-1);break;case 40:a.shiftKey?M=-1:(a.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(C=0,M=0),{cameraAnimation:Y=>{const ee=this._tr;Y.easeTo({duration:300,easeId:"keyboardHandler",easing:kc,zoom:c?Math.round(ee.zoom)+c*(a.shiftKey?2:1):ee.zoom,bearing:ee.bearing+C*this._bearingStep,pitch:ee.pitch+M*this._pitchStep,offset:[-I*this._panStep,-z*this._panStep],center:ee.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kc(O){return O*(2-O)}const iu=4.000244140625;class ou{constructor(a,c){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=a,this._tr=new wl(a),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let c=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const C=k.now(),M=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,c!==0&&c%iu==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),a.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=a,this._delta-=c,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=P.mousePos(this._map.getCanvas(),a),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(o.Q.convert(C.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Y=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Y),typeof this._targetZoom=="number"&&(this._targetZoom+=Y)}if(this._delta!==0){const Y=this._type==="wheel"&&Math.abs(this._delta)>iu?this._wheelZoomRate:this._defaultZoomRate;let ee=2/(1+Math.exp(-Math.abs(this._delta*Y)));this._delta<0&&ee!==0&&(ee=1/ee);const se=typeof this._targetZoom!="number"?a.scale:o.ac(this._targetZoom);this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,o.ah(se*ee))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,C=this._startZoom,M=this._easing;let I,z=!1;if(this._type==="wheel"&&C&&M){const Y=k.now()-this._lastWheelEventTime,ee=Math.min((Y+5)/200,1),se=M(ee);I=o.B.number(C,c,se),ee<1?this._frameId||(this._frameId=!0):z=!0}else I=c,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!z,zoomDelta:I-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let c=o.cd;if(this._prevEase){const C=this._prevEase,M=(k.now()-C.start)/C.duration,I=C.easing(M+.01)-C.easing(M),z=.27/Math.sqrt(I*I+1e-4)*.01,Y=Math.sqrt(.0729-z*z);c=o.cb(z,Y,.25,1)}return this._prevEase={start:k.now(),duration:a,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class oh{constructor(a,c){this._clickZoom=a,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uf{constructor(a){this._tr=new wl(a),this.reset()}reset(){this._active=!1}dblclick(a,c){return a.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jl{constructor(){this._tap=new nh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,c,C){if(!this._swipePoint)if(this._tapTime){const M=c[0],I=a.timeStamp-this._tapTime<500,z=this._tapPoint.dist(M)<30;I&&z?C.length>0&&(this._swipePoint=M,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(a,c,C)}touchmove(a,c,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const M=c[0],I=M.y-this._swipePoint.y;return this._swipePoint=M,a.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(a,c,C)}touchend(a,c,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const M=this._tap.touchend(a,c,C);M&&(this._tapTime=a.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qo{constructor(a,c,C){this._el=a,this._mousePan=c,this._touchPan=C}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ya{constructor(a,c,C,M){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=c,this._mousePitch=C,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class la{constructor(a,c,C,M){this._el=a,this._touchZoom=c,this._touchRotate=C,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ws{constructor(a,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",a);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=C,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Gl=O=>O.zoom||O.drag||O.roll||O.pitch||O.rotate;class Yu extends o.l{}function Pc(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta||O.rollDelta}class Qa{constructor(a,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,I)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=M.type==="renderFrame"?void 0:M,Y={needsRenderFrame:!1},ee={},se={};for(const{handlerName:Ie,handler:Ge,allowed:Ze}of this._handlers){if(!Ge.isEnabled())continue;let dt;if(this._blockedByActive(se,Ze,Ie))Ge.reset();else if(Ge[I||M.type]){if(o.ce(M,I||M.type)){const ct=P.mousePos(this._map.getCanvas(),M);dt=Ge[I||M.type](M,ct)}else if(o.cf(M,I||M.type)){const ct=this._getMapTouches(M.touches),pt=P.touchPos(this._map.getCanvas(),ct);dt=Ge[I||M.type](M,pt,ct)}else o.cg(I||M.type)||(dt=Ge[I||M.type](M));this.mergeHandlerResult(Y,ee,dt,Ie,z),dt&&dt.needsRenderFrame&&this._triggerRenderFrame()}(dt||Ge.isActive())&&(se[Ie]=Ge)}const ge={};for(const Ie in this._previousActiveHandlers)se[Ie]||(ge[Ie]=z);this._previousActiveHandlers=se,(Object.keys(ge).length||Pc(Y))&&(this._changes.push([Y,ee,ge]),this._triggerRenderFrame()),(Object.keys(se).length||Pc(Y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Oe}=Y;Oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Oe(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Po(a),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,I,z]of this._listeners)P.addEventListener(M,I,M===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[a,c,C]of this._listeners)P.removeEventListener(a,c,a===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(a){const c=this._map,C=c.getCanvasContainer();this._add("mapEvent",new Fs(c,a));const M=c.boxZoom=new il(c,a);this._add("boxZoom",M),a.interactive&&a.boxZoom&&M.enable();const I=c.cooperativeGestures=new ws(c,a.cooperativeGestures);this._add("cooperativeGestures",I),a.cooperativeGestures&&I.enable();const z=new Bl(c),Y=new uf(c);c.doubleClickZoom=new oh(Y,z),this._add("tapZoom",z),this._add("clickZoom",Y),a.interactive&&a.doubleClickZoom&&c.doubleClickZoom.enable();const ee=new jl;this._add("tapDragZoom",ee);const se=c.touchPitch=new uA(c);this._add("touchPitch",se),a.interactive&&a.touchPitch&&c.touchPitch.enable(a.touchPitch);const ge=()=>c.project(c.getCenter()),Oe=function({enable:wt,clickTolerance:It,aroundCenter:Pt=!0,minPixelCenterThreshold:Lt=100,rotateDegreesPerPixelMoved:sn=.8},ln){const on=new Mr({checkCorrectEvent:Cn=>P.mouseButton(Cn)===0&&Cn.ctrlKey||P.mouseButton(Cn)===2&&!Cn.ctrlKey});return new kA({clickTolerance:It,move:(Cn,Mn)=>{const ir=ln();if(Pt&&Math.abs(ir.y-Cn.y)>Lt)return{bearingDelta:o.cc(new o.P(Cn.x,Mn.y),Mn,ir)};let Vn=(Mn.x-Cn.x)*sn;return Pt&&Mn.y<ir.y&&(Vn=-Vn),{bearingDelta:Vn}},moveStateManager:on,enable:wt,assignEvents:Ol})}(a,ge),Ie=function({enable:wt,clickTolerance:It,pitchDegreesPerPixelMoved:Pt=-.5}){const Lt=new Mr({checkCorrectEvent:sn=>P.mouseButton(sn)===0&&sn.ctrlKey||P.mouseButton(sn)===2});return new kA({clickTolerance:It,move:(sn,ln)=>({pitchDelta:(ln.y-sn.y)*Pt}),moveStateManager:Lt,enable:wt,assignEvents:Ol})}(a),Ge=function({enable:wt,clickTolerance:It,rollDegreesPerPixelMoved:Pt=.3},Lt){const sn=new Mr({checkCorrectEvent:ln=>P.mouseButton(ln)===2&&ln.ctrlKey});return new kA({clickTolerance:It,move:(ln,on)=>{const Cn=Lt();let Mn=(on.x-ln.x)*Pt;return on.y<Cn.y&&(Mn=-Mn),{rollDelta:Mn}},moveStateManager:sn,enable:wt,assignEvents:Ol})}(a,ge);c.dragRotate=new ya(a,Oe,Ie,Ge),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",Ie,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ge,["mousePitch"]),a.interactive&&a.dragRotate&&c.dragRotate.enable();const Ze=function({enable:wt,clickTolerance:It}){const Pt=new Mr({checkCorrectEvent:Lt=>P.mouseButton(Lt)===0&&!Lt.ctrlKey});return new kA({clickTolerance:It,move:(Lt,sn)=>({around:sn,panDelta:sn.sub(Lt)}),activateOnStart:!0,moveStateManager:Pt,enable:wt,assignEvents:Ol})}(a),dt=new rh(a,c);c.dragPan=new Qo(C,Ze,dt),this._add("mousePan",Ze),this._add("touchPan",dt,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&c.dragPan.enable(a.dragPan);const ct=new is,pt=new Qu;c.touchZoomRotate=new la(C,pt,ct,ee),this._add("touchRotate",ct,["touchPan","touchZoom"]),this._add("touchZoom",pt,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&c.touchZoomRotate.enable(a.touchZoomRotate);const bt=c.scrollZoom=new ou(c,()=>this._triggerRenderFrame());this._add("scrollZoom",bt,["mousePan"]),a.interactive&&a.scrollZoom&&c.scrollZoom.enable(a.scrollZoom);const Bt=c.keyboard=new ga(c);this._add("keyboard",Bt),a.interactive&&a.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Ko(c))}_add(a,c,C){this._handlers.push({handlerName:a,handler:c,allowed:C}),this._handlersById[a]=c}stop(a){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gl(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,c,C){for(const M in a)if(M!==C&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(a){const c=[];for(const C of a)this._el.contains(C.target)&&c.push(C);return c}mergeHandlerResult(a,c,C,M,I){if(!C)return;o.e(a,C);const z={handlerName:M,originalEvent:C.originalEvent||I};C.zoomDelta!==void 0&&(c.zoom=z),C.panDelta!==void 0&&(c.drag=z),C.rollDelta!==void 0&&(c.roll=z),C.pitchDelta!==void 0&&(c.pitch=z),C.bearingDelta!==void 0&&(c.rotate=z)}_applyChanges(){const a={},c={},C={};for(const[M,I,z]of this._changes)M.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(a.rollDelta=(a.rollDelta||0)+M.rollDelta),M.around!==void 0&&(a.around=M.around),M.pinchAround!==void 0&&(a.pinchAround=M.pinchAround),M.noInertia&&(a.noInertia=M.noInertia),o.e(c,I),o.e(C,z);this._updateMapTransform(a,c,C),this._changes=[]}_updateMapTransform(a,c,C){const M=this._map,I=M._getTransformForUpdate(),z=M.terrain;if(!(Pc(a)||z&&this._terrainMovement))return this._fireEvents(c,C,!0);M._stop(!0);let{panDelta:Y,zoomDelta:ee,bearingDelta:se,pitchDelta:ge,rollDelta:Oe,around:Ie,pinchAround:Ge}=a;Ge!==void 0&&(Ie=Ge),Ie=Ie||M.transform.centerPoint,z&&!I.isPointOnMapSurface(Ie)&&(Ie=I.centerPoint);const Ze={panDelta:Y,zoomDelta:ee,rollDelta:Oe,pitchDelta:ge,bearingDelta:se,around:Ie};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(Ie)&&(Ie=I.centerPoint);const dt=Ie.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(Y?Ie.sub(Y):Ie);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ze,I),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?I.setCenter(I.screenPointToLocation(I.centerPoint.sub(Y))):this._map.cameraHelper.handleMapControlsPan(Ze,I,dt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Ze,I,dt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ze,I),this._map.cameraHelper.handleMapControlsPan(Ze,I,dt)),M._applyUpdatedTransform(I),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(c,C,!0)}_fireEvents(a,c,C){const M=Gl(this._eventsInProgress),I=Gl(a),z={};for(const Oe in a){const{originalEvent:Ie}=a[Oe];this._eventsInProgress[Oe]||(z[`${Oe}start`]=Ie),this._eventsInProgress[Oe]=a[Oe]}!M&&I&&this._fireEvent("movestart",I.originalEvent);for(const Oe in z)this._fireEvent(Oe,z[Oe]);I&&this._fireEvent("move",I.originalEvent);for(const Oe in a){const{originalEvent:Ie}=a[Oe];this._fireEvent(Oe,Ie)}const Y={};let ee;for(const Oe in this._eventsInProgress){const{handlerName:Ie,originalEvent:Ge}=this._eventsInProgress[Oe];this._handlersById[Ie].isActive()||(delete this._eventsInProgress[Oe],ee=c[Ie]||Ge,Y[`${Oe}end`]=ee)}for(const Oe in Y)this._fireEvent(Oe,Y[Oe]);const se=Gl(this._eventsInProgress),ge=(M||I)&&!se;if(ge&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Oe=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Oe.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Oe)}if(C&&ge){this._updatingCamera=!0;const Oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=Ge=>Ge!==0&&-this._bearingSnap<Ge&&Ge<this._bearingSnap;!Oe||!Oe.essential&&k.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:ee})),Ie(this._map.getBearing())&&this._map.resetNorth()):(Ie(Oe.bearing||this._map.getBearing())&&(Oe.bearing=0),Oe.freezeElevation=!0,this._map.easeTo(Oe,{originalEvent:ee})),this._updatingCamera=!1}}_fireEvent(a,c){this._map.fire(new o.l(a,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Yu("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class gl extends o.E{constructor(a,c,C){super(),this._renderFrameCallback=()=>{const M=Math.min((k.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=C.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,c){a.apply(this.transform),this.transform=a,this.cameraHelper=c}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(a,c){return this.jumpTo({center:a},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,c){return this.jumpTo({elevation:a},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,c,C){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},c),C)}panTo(a,c,C){return this.easeTo(o.e({center:a},c),C)}getZoom(){return this.transform.zoom}setZoom(a,c){return this.jumpTo({zoom:a},c),this}zoomTo(a,c,C){return this.easeTo(o.e({zoom:a},c),C)}zoomIn(a,c){return this.zoomTo(this.getZoom()+1,a,c),this}zoomOut(a,c){return this.zoomTo(this.getZoom()-1,a,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,c){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(a,c){return this.jumpTo({bearing:a},c),this}getPadding(){return this.transform.padding}setPadding(a,c){return this.jumpTo({padding:a},c),this}rotateTo(a,c,C){return this.easeTo(o.e({bearing:a},c),C)}resetNorth(a,c){return this.rotateTo(0,o.e({duration:1e3},a),c),this}resetNorthPitch(a,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),c),this}snapToNorth(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this}getPitch(){return this.transform.pitch}setPitch(a,c){return this.jumpTo({pitch:a},c),this}getRoll(){return this.transform.roll}setRoll(a,c){return this.jumpTo({roll:a},c),this}cameraForBounds(a,c){a=Kt.convert(a).adjustAntiMeridian();const C=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),C,c)}_cameraForBoxAndBearing(a,c,C,M){const I={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const se=M.padding;M.padding={top:se,bottom:se,right:se,left:se}}const z=o.e(I,M.padding);M.padding=z;const Y=this.transform,ee=new Kt(a,c);return this.cameraHelper.cameraForBoxAndBearing(M,z,ee,C,Y)}fitBounds(a,c,C){return this._fitInternal(this.cameraForBounds(a,c),c,C)}fitScreenCoordinates(a,c,C,M,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(c)),C,M),M,I)}_fitInternal(a,c,C){return a?(delete(c=o.e(a,c)).padding,c.linear?this.easeTo(c,C):this.flyTo(c,C)):this}jumpTo(a,c){this.stop();const C=this._getTransformForUpdate();let M=!1,I=!1,z=!1;const Y=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,a);const ee=C.zoom!==Y;return"elevation"in a&&C.elevation!==+a.elevation&&C.setElevation(+a.elevation),"bearing"in a&&C.bearing!==+a.bearing&&(M=!0,C.setBearing(+a.bearing)),"pitch"in a&&C.pitch!==+a.pitch&&(I=!0,C.setPitch(+a.pitch)),"roll"in a&&C.roll!==+a.roll&&(z=!0,C.setRoll(+a.roll)),a.padding==null||C.isPaddingEqual(a.padding)||C.setPadding(a.padding),this._applyUpdatedTransform(C),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),ee&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),M&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),I&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),z&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(a,c,C,M=0){const I=o.$.fromLngLat(a,c),z=o.$.fromLngLat(C,M),Y=z.x-I.x,ee=z.y-I.y,se=z.z-I.z,ge=Math.hypot(Y,ee,se);if(ge===0)throw new Error("Can't calculate camera options with same From and To");const Oe=Math.hypot(Y,ee),Ie=o.ah(this.transform.cameraToCenterDistance/ge/this.transform.tileSize),Ge=180*Math.atan2(Y,-ee)/Math.PI;let Ze=180*Math.acos(Oe/ge)/Math.PI;return Ze=se<0?90-Ze:90+Ze,{center:z.toLngLat(),elevation:M,zoom:Ie,pitch:Ze,bearing:Ge}}calculateCameraOptionsFromCameraLngLatAltRotation(a,c,C,M,I){const z=this.transform.calculateCenterFromCameraLngLatAlt(a,c,C,M);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:C,pitch:M,roll:I}}easeTo(a,c){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.cd},a)).animate===!1||!a.essential&&k.prefersReducedMotion)&&(a.duration=0);const C=this._getTransformForUpdate(),M=this.getBearing(),I=C.pitch,z=C.roll,Y="bearing"in a?this._normalizeBearing(a.bearing,M):M,ee="pitch"in a?+a.pitch:I,se="roll"in a?this._normalizeBearing(a.roll,z):z,ge="padding"in a?a.padding:C.padding,Oe=o.P.convert(a.offset);let Ie,Ge;a.around&&(Ie=o.Q.convert(a.around),Ge=C.locationToScreenPoint(Ie));const Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},dt=this.cameraHelper.handleEaseTo(C,{bearing:Y,pitch:ee,roll:se,padding:ge,around:Ie,aroundPoint:Ge,offsetAsPoint:Oe,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||M!==Y,this._pitching=this._pitching||ee!==I,this._rolling=this._rolling||se!==z,this._padding=!C.isPaddingEqual(ge),this._zooming=this._zooming||dt.isZooming,this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Ze),this.terrain&&this._prepareElevation(dt.elevationCenter),this._ease(ct=>{dt.easeFunc(ct),this.terrain&&!a.freezeElevation&&this._updateElevation(ct),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},ct=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ct)},a),this}_prepareEase(a,c,C={}){this._moving=!0,c||C.moving||this.fire(new o.l("movestart",a)),this._zooming&&!C.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!C.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!C.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!C.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&c!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(C-(c-(C*a+this._elevationStart))/(1-a)),this._elevationTarget=c}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};const c=a.getCameraLngLat(),C=a.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,a.zoom):0;if(C<M){const I=this.calculateCameraOptionsFromTo(c,M,a.center,a.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(a){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const C=a.clone();for(const M of c){const I=C.clone(),{center:z,zoom:Y,roll:ee,pitch:se,bearing:ge,elevation:Oe}=M(I);z&&I.setCenter(z),Oe!==void 0&&I.setElevation(Oe),Y!==void 0&&I.setZoom(Y),ee!==void 0&&I.setRoll(ee),se!==void 0&&I.setPitch(se),ge!==void 0&&I.setBearing(ge),C.apply(I)}this.transform.apply(C)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const C=this._zooming,M=this._rotating,I=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new o.l("zoomend",a)),M&&this.fire(new o.l("rotateend",a)),I&&this.fire(new o.l("pitchend",a)),z&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,c){if(!a.essential&&k.prefersReducedMotion){const Mn=o.O(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Mn,c)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cd},a);const C=this._getTransformForUpdate(),M=C.bearing,I=C.pitch,z=C.roll,Y=C.padding,ee="bearing"in a?this._normalizeBearing(a.bearing,M):M,se="pitch"in a?+a.pitch:I,ge="roll"in a?this._normalizeBearing(a.roll,z):z,Oe="padding"in a?a.padding:C.padding,Ie=o.P.convert(a.offset);let Ge=C.centerPoint.add(Ie);const Ze=C.screenPointToLocation(Ge),dt=this.cameraHelper.handleFlyTo(C,{bearing:ee,pitch:se,roll:ge,padding:Oe,locationAtOffset:Ze,offsetAsPoint:Ie,center:a.center,minZoom:a.minZoom,zoom:a.zoom});let ct=a.curve;const pt=Math.max(C.width,C.height),bt=pt/dt.scaleOfZoom,Bt=dt.pixelPathLength;typeof dt.scaleOfMinZoom=="number"&&(ct=Math.sqrt(pt/dt.scaleOfMinZoom/Bt*2));const wt=ct*ct;function It(Mn){const ir=(bt*bt-pt*pt+(Mn?-1:1)*wt*wt*Bt*Bt)/(2*(Mn?bt:pt)*wt*Bt);return Math.log(Math.sqrt(ir*ir+1)-ir)}function Pt(Mn){return(Math.exp(Mn)-Math.exp(-Mn))/2}function Lt(Mn){return(Math.exp(Mn)+Math.exp(-Mn))/2}const sn=It(!1);let ln=function(Mn){return Lt(sn)/Lt(sn+ct*Mn)},on=function(Mn){return pt*((Lt(sn)*(Pt(ir=sn+ct*Mn)/Lt(ir))-Pt(sn))/wt)/Bt;var ir},Cn=(It(!0)-sn)/ct;if(Math.abs(Bt)<2e-6||!isFinite(Cn)){if(Math.abs(pt-bt)<1e-6)return this.easeTo(a,c);const Mn=bt<pt?-1:1;Cn=Math.abs(Math.log(bt/pt))/ct,on=()=>0,ln=ir=>Math.exp(Mn*ct*ir)}return a.duration="duration"in a?+a.duration:1e3*Cn/("screenSpeed"in a?+a.screenSpeed/ct:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=M!==ee,this._pitching=se!==I,this._rolling=ge!==z,this._padding=!C.isPaddingEqual(Oe),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(dt.targetCenter),this._ease(Mn=>{const ir=Mn*Cn,Vn=1/ln(ir),kn=on(ir);this._rotating&&C.setBearing(o.B.number(M,ee,Mn)),this._pitching&&C.setPitch(o.B.number(I,se,Mn)),this._rolling&&C.setRoll(o.B.number(z,ge,Mn)),this._padding&&(C.interpolatePadding(Y,Oe,Mn),Ge=C.centerPoint.add(Ie)),dt.easeFunc(Mn,Vn,kn,Ge),this.terrain&&!a.freezeElevation&&this._updateElevation(Mn),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,c){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return a||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(a,c,C){C.animate===!1||C.duration===0?(a(1),c()):(this._easeStart=k.now(),this._easeOptions=C,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,c){a=o.aL(a,-180,180);const C=Math.abs(a-c);return Math.abs(a-360-c)<C&&(a-=360),Math.abs(a+360-c)<C&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(a),this.transform.tileZoom):null}}const Qr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Jr{constructor(a=Qr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,c){const C=this._map._getUIString(`AttributionControl.${c}`);a.title=C,a.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const I=c[M];if(I.used||I.usedForTerrain){const z=I.getSource();z.attribution&&a.indexOf(z.attribution)<0&&a.push(z.attribution)}}a=a.filter(M=>String(M).trim()),a.sort((M,I)=>M.length-I.length),a=a.filter((M,I)=>{for(let z=I+1;z<a.length;z++)if(a[z].indexOf(M)>=0)return!1;return!0});const C=a.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,a.length?(this._innerContainer.innerHTML=P.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mh{constructor(a={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const C=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const c=P.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Eu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const c=++this._id;return this._queue.push({callback:a,id:c,cancelled:!1}),c}remove(a){const c=this._currentlyRunning,C=c?this._queue.concat(c):this._queue;for(const M of C)if(M.id===a)return void(M.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const C of c)if(!C.cancelled&&(C.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cA=o.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Ql extends o.E{constructor(a){super(),this._lastTilesetChange=k.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,c){this.sourceCache.update(a,c),this._renderableTilesKeys=[];const C={};for(const M of at(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),o.bQ(M.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[M.key]=new ye(M,this.tileSize),this._lastTilesetChange=k.now());for(const M in this._tiles)C[M]||delete this._tiles[M]}freeRtt(a){for(const c in this._tiles){const C=this._tiles[c];(!a||C.tileID.equals(a)||C.tileID.isChildOf(a)||a.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,c){return c?this._getTerrainCoordsForTileRanges(a,c):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){const c={};for(const C of this._renderableTilesKeys){const M=this._tiles[C].tileID,I=a.clone(),z=o.b2();if(M.canonical.equals(a.canonical))o.bQ(z,0,o.Z,o.Z,0,0,1);else if(M.canonical.isChildOf(a.canonical)){const Y=M.canonical.z-a.canonical.z,ee=M.canonical.x-(M.canonical.x>>Y<<Y),se=M.canonical.y-(M.canonical.y>>Y<<Y),ge=o.Z>>Y;o.bQ(z,0,ge,ge,0,0,1),o.L(z,z,[-ee*ge,-se*ge,0])}else{if(!a.canonical.isChildOf(M.canonical))continue;{const Y=a.canonical.z-M.canonical.z,ee=a.canonical.x-(a.canonical.x>>Y<<Y),se=a.canonical.y-(a.canonical.y>>Y<<Y),ge=o.Z>>Y;o.bQ(z,0,o.Z,o.Z,0,0,1),o.L(z,z,[ee*ge,se*ge,0]),o.M(z,z,[1/2**Y,1/2**Y,0])}}I.terrainRttPosMatrix32f=new Float32Array(z),c[C]=I}return c}_getTerrainCoordsForTileRanges(a,c){const C={};for(const M of this._renderableTilesKeys){const I=this._tiles[M].tileID;if(!this._isWithinTileRanges(I,c))continue;const z=a.clone(),Y=o.b2();if(I.canonical.z===a.canonical.z){const ee=a.canonical.x-I.canonical.x,se=a.canonical.y-I.canonical.y;o.bQ(Y,0,o.Z,o.Z,0,0,1),o.L(Y,Y,[ee*o.Z,se*o.Z,0])}else if(I.canonical.z>a.canonical.z){const ee=I.canonical.z-a.canonical.z,se=I.canonical.x-(I.canonical.x>>ee<<ee),ge=I.canonical.y-(I.canonical.y>>ee<<ee),Oe=a.canonical.x-(I.canonical.x>>ee),Ie=a.canonical.y-(I.canonical.y>>ee),Ge=o.Z>>ee;o.bQ(Y,0,Ge,Ge,0,0,1),o.L(Y,Y,[-se*Ge+Oe*o.Z,-ge*Ge+Ie*o.Z,0])}else{const ee=a.canonical.z-I.canonical.z,se=a.canonical.x-(a.canonical.x>>ee<<ee),ge=a.canonical.y-(a.canonical.y>>ee<<ee),Oe=(a.canonical.x>>ee)-I.canonical.x,Ie=(a.canonical.y>>ee)-I.canonical.y,Ge=o.Z<<ee;o.bQ(Y,0,Ge,Ge,0,0,1),o.L(Y,Y,[se*o.Z+Oe*Ge,ge*o.Z+Ie*Ge,0])}z.terrainRttPosMatrix32f=new Float32Array(Y),C[M]=z}return C}getSourceTile(a,c){const C=this.sourceCache._source;let M=a.overscaledZ-this.deltaZoom;if(M>C.maxzoom&&(M=C.maxzoom),M<C.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(M).key);let I=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!I||!I.dem)&&c)for(;M>=C.minzoom&&(!I||!I.dem);)I=this.sourceCache.getTileByID(a.scaledTo(M--).key);return I}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,c){return c[a.canonical.z]&&a.canonical.x>=c[a.canonical.z].minTileX&&a.canonical.x<=c[a.canonical.z].maxTileX&&a.canonical.y>=c[a.canonical.z].minTileY&&a.canonical.y<=c[a.canonical.z].maxTileY}}class td{constructor(a,c,C){this._meshCache={},this.painter=a,this.sourceCache=new Ql(c),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,c,C,M=o.Z){var I;if(!(c>=0&&c<M&&C>=0&&C<M))return 0;const z=this.getTerrainData(a),Y=(I=z.tile)===null||I===void 0?void 0:I.dem;if(!Y)return 0;const ee=o.ch([],[c/M*o.Z,C/M*o.Z],z.u_terrain_matrix),se=[ee[0]*Y.dim,ee[1]*Y.dim],ge=Math.floor(se[0]),Oe=Math.floor(se[1]),Ie=se[0]-ge,Ge=se[1]-Oe;return Y.get(ge,Oe)*(1-Ie)*(1-Ge)+Y.get(ge+1,Oe)*Ie*(1-Ge)+Y.get(ge,Oe+1)*(1-Ie)*Ge+Y.get(ge+1,Oe+1)*Ie*Ge}getElevationForLngLatZoom(a,c){if(!o.ci(c,a.wrap()))return 0;const{tileID:C,mercatorX:M,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(a,c);return this.getElevation(C,M%o.Z,I%o.Z,o.Z)}getElevation(a,c,C,M=o.Z){return this.getDEMElevation(a,c,C,M)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const M=this.painter.context,I=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(M,I,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ad([])}const c=this.sourceCache.getSourceTile(a,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new oe(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const C=c&&c+c.tileID.key+a.key;if(C&&!this._demMatrixCache[C]){const M=this.sourceCache.sourceCache._source.maxzoom;let I=a.canonical.z-c.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=M?I=a.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=a.canonical.x-(a.canonical.x>>I<<I),Y=a.canonical.y-(a.canonical.y>>I<<I),ee=o.cj(new Float64Array(16),[1/(o.Z<<I),1/(o.Z<<I),0]);o.L(ee,ee,[z*o.Z,Y*o.Z,0]),this._demMatrixCache[a.key]={matrix:ee,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(a){const c=this.painter,C=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(C,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,C,M))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,z=0;I<this._coordsTextureSize;I++)for(let Y=0;Y<this._coordsTextureSize;Y++,z+=4)c[z+0]=255&Y,c[z+1]=255&I,c[z+2]=Y>>8<<4|I>>8,c[z+3]=0;const C=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new oe(a,C,a.gl.RGBA,{premultiply:!1});return M.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),C=this.painter.context,M=C.gl,I=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),Y=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(I,Y-z-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null);const ee=c[0]+(c[2]>>4<<8),se=c[1]+((15&c[2])<<8),ge=this.coordsIndex[255-c[3]],Oe=ge&&this.sourceCache.getTileByID(ge);if(!Oe)return null;const Ie=this._coordsTextureSize,Ge=(1<<Oe.tileID.canonical.z)*Ie;return new o.$((Oe.tileID.canonical.x*Ie+ee)/Ge+Oe.tileID.wrap,(Oe.tileID.canonical.y*Ie+se)/Ge,this.getElevation(Oe.tileID,ee,se,Ie))}depthAtPoint(a){const c=new Uint8Array(4),C=this.painter.context,M=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(a){var c;const C=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=C&&a.canonical.y===0,I=C&&a.canonical.y===(1<<a.canonical.z)-1,z=`m_${M?"n":""}_${I?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const Y=this.painter.context,ee=new o.ck,se=new o.aK,ge=this.meshSize,Oe=o.Z/ge,Ie=ge*ge;for(let Lt=0;Lt<=ge;Lt++)for(let sn=0;sn<=ge;sn++)ee.emplaceBack(sn*Oe,Lt*Oe,0);for(let Lt=0;Lt<Ie;Lt+=ge+1)for(let sn=0;sn<ge;sn++)se.emplaceBack(sn+Lt,ge+sn+Lt+1,ge+sn+Lt+2),se.emplaceBack(sn+Lt,ge+sn+Lt+2,sn+Lt+1);const Ge=ee.length,Ze=Ge+(ge+1),dt=(ge+1)*ge,ct=M?o.b9:0,pt=M?0:1,bt=I?o.ba:o.Z,Bt=I?0:1;for(let Lt=0;Lt<=ge;Lt++)ee.emplaceBack(Lt*Oe,ct,pt);for(let Lt=0;Lt<=ge;Lt++)ee.emplaceBack(Lt*Oe,bt,Bt);for(let Lt=0;Lt<ge;Lt++)se.emplaceBack(dt+Lt,Ze+Lt,Ze+Lt+1),se.emplaceBack(dt+Lt,Ze+Lt+1,dt+Lt+1),se.emplaceBack(0+Lt,Ge+Lt+1,Ge+Lt),se.emplaceBack(0+Lt,0+Lt+1,Ge+Lt+1);const wt=ee.length,It=wt+2*(ge+1);for(const Lt of[0,1])for(let sn=0;sn<=ge;sn++)for(const ln of[0,1])ee.emplaceBack(Lt*o.Z,sn*Oe,ln);for(let Lt=0;Lt<2*ge;Lt+=2)se.emplaceBack(wt+Lt,wt+Lt+1,wt+Lt+3),se.emplaceBack(wt+Lt,wt+Lt+3,wt+Lt+2),se.emplaceBack(It+Lt,It+Lt+3,It+Lt+1),se.emplaceBack(It+Lt,It+Lt+2,It+Lt+3);const Pt=new bl(Y.createVertexBuffer(ee,cA.members),Y.createIndexBuffer(se),o.aJ.simpleSegment(0,0,ee.length,se.length));return this._meshCache[z]=Pt,Pt}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,c){var C;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(a,c);return(C=this.getMinMaxElevation(M).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(a){const c=this.getTerrainData(a).tile,C={minElevation:null,maxElevation:null};return c&&c.dem&&(C.minElevation=c.dem.min*this.exaggeration,C.maxElevation=c.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(a,c){const C=o.$.fromLngLat(a.wrap()),M=(1<<c)*o.Z,I=C.x*M,z=C.y*M,Y=Math.floor(I/o.Z),ee=Math.floor(z/o.Z);return{tileID:new o.Y(c,0,c,Y,ee),mercatorX:I,mercatorY:z}}}class Yl{constructor(a,c,C){this._context=a,this._size=c,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(C.texture),{id:a,fbo:c,texture:C,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>a.id!==c),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const sh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bu{constructor(a,c){this.painter=a,this.terrain=c,this.pool=new Yl(a.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(C=>!a._layers[C].isHidden(c)),this._coordsAscending={};for(const C in a.sourceCaches){this._coordsAscending[C]={};const M=a.sourceCaches[C].getVisibleCoordinates(),I=a.sourceCaches[C].getSource(),z=I instanceof Xn?I.terrainTileRanges:null;for(const Y of M){const ee=this.terrain.sourceCache.getTerrainCoords(Y,z);for(const se in ee)this._coordsAscending[C][se]||(this._coordsAscending[C][se]=[]),this._coordsAscending[C][se].push(ee[se])}}this._coordsAscendingStr={};for(const C of a._order){const M=a._layers[C],I=M.source;if(sh[M.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const z in this._coordsAscending[I])this._coordsAscendingStr[I][z]=this._coordsAscending[I][z].map(Y=>Y.key).sort().join()}}for(const C of this._renderableTiles)for(const M in this._coordsAscendingStr){const I=this._coordsAscendingStr[M][C.tileID.key];I&&I!==C.rttCoords[M]&&(C.rtt=[])}}renderLayer(a,c){if(a.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=a.type,I=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(sh[M]&&(this._prevType&&sh[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(a.id),!z))return!0;if(sh[this._prevType]||sh[M]&&z){this._prevType=M;const Y=this._stacks.length-1,ee=this._stacks[Y]||[];for(const se of this._renderableTiles){if(this.pool.isFull()&&(ed(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(se),se.rtt[Y]){const Oe=this.pool.getObjectForId(se.rtt[Y].id);if(Oe.stamp===se.rtt[Y].stamp){this.pool.useObject(Oe);continue}}const ge=this.pool.getOrCreateFreeObject();this.pool.useObject(ge),this.pool.stampObject(ge),se.rtt[Y]={id:ge.id,stamp:ge.stamp},I.context.bindFramebuffer.set(ge.fbo.framebuffer),I.context.clear({color:o.b7.transparent,stencil:0}),I.currentStencilSource=void 0;for(let Oe=0;Oe<ee.length;Oe++){const Ie=I.style._layers[ee[Oe]],Ge=Ie.source?this._coordsAscending[Ie.source][se.tileID.key]:[se.tileID];I.context.viewport.set([0,0,ge.fbo.width,ge.fbo.height]),I._renderTileClippingMasks(Ie,Ge,!0),I.renderLayer(I,I.style.sourceCaches[Ie.source],Ie,Ge,C),Ie.source&&(se.rttCoords[Ie.source]=this._coordsAscendingStr[Ie.source][se.tileID.key])}}return ed(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),sh[M]}return!1}}const ji={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Is=p,ah={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Qr,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ol={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ou{constructor(a,c,C=!1){this.mousedown=I=>{this.startMove(I,P.mousePos(this.element,I)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,P.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHanlder.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new Id;this._rotatePitchHanlder=new kA({clickTolerance:3,move:(I,z)=>{const Y=c.getBoundingClientRect(),ee=new o.P((Y.bottom-Y.top)/2,(Y.right-Y.left)/2);return{bearingDelta:o.cc(new o.P(I.x,z.y),z,ee),pitchDelta:C?-.5*(z.y-I.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=a,P.addEventListener(c,"mousedown",this.mousedown),P.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(c,"touchcancel",this.reset)}startMove(a,c){this._rotatePitchHanlder.dragStart(a,c),P.disableDrag()}move(a,c){const C=this.map,{bearingDelta:M,pitchDelta:I}=this._rotatePitchHanlder.dragMove(a,c)||{};M&&C.setBearing(C.getBearing()+M),I&&C.setPitch(C.getPitch()+I)}off(){const a=this.element;P.removeEventListener(a,"mousedown",this.mousedown),P.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let KA;function su(O,a,c,C=!1){if(C||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return O==null?void 0:O.wrap();const M=new o.Q(O.lng,O.lat);if(O=new o.Q(O.lng,O.lat),a){const I=new o.Q(O.lng-360,O.lat),z=new o.Q(O.lng+360,O.lat),Y=c.locationToScreenPoint(O).distSqr(a);c.locationToScreenPoint(I).distSqr(a)<Y?O=I:c.locationToScreenPoint(z).distSqr(a)<Y&&(O=z)}for(;Math.abs(O.lng-c.center.lng)>180;){const I=c.locationToScreenPoint(O);if(I.x>=0&&I.y>=0&&I.x<=c.width&&I.y<=c.height)break;O.lng>c.center.lng?O.lng-=360:O.lng+=360}return O.lng!==M.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(O))?O:M}const ea={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ys(O,a,c){const C=O.classList;for(const M in ea)C.remove(`maplibregl-${c}-anchor-${M}`);C.add(`maplibregl-${c}-anchor-${a}`)}class au extends o.E{constructor(a){if(super(),this._onKeyPress=c=>{const C=c.code,M=c.charCode||c.keyCode;C!=="Space"&&C!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const C=c.originalEvent.target,M=this._element;this._popup&&(C===M||M.contains(C))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=su(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let M="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?M=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(M=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${ea[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${M}`),k.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const c=P.createNS("http://www.w3.org/2000/svg","svg"),C=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${C}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${C}`);const I=P.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const Y=P.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const ee=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pt of ee){const bt=P.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",pt.rx),bt.setAttributeNS(null,"ry",pt.ry),Y.appendChild(bt)}const se=P.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const ge=P.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(ge);const Oe=P.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"fill","#000000");const Ie=P.createNS("http://www.w3.org/2000/svg","path");Ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Oe.appendChild(Ie);const Ge=P.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ge.setAttributeNS(null,"fill","#FFFFFF");const Ze=P.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");const dt=P.createNS("http://www.w3.org/2000/svg","circle");dt.setAttributeNS(null,"fill","#000000"),dt.setAttributeNS(null,"opacity","0.25"),dt.setAttributeNS(null,"cx","5.5"),dt.setAttributeNS(null,"cy","5.5"),dt.setAttributeNS(null,"r","5.4999962");const ct=P.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#FFFFFF"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962"),Ze.appendChild(dt),Ze.appendChild(ct),z.appendChild(Y),z.appendChild(se),z.appendChild(Oe),z.appendChild(Ge),z.appendChild(Ze),c.appendChild(z),c.setAttributeNS(null,"height",C*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Ys(this._element,this._anchor,"marker"),a&&a.className)for(const c of a.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.Q.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const M=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var c,C;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const Oe=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Oe&&(this._element.style.opacity=Oe))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,I=M.terrain.depthAtPoint(this._pos),z=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,z)-I<.006)return void(this._element.style.opacity=this._opacity);const Y=-this._offset.y/M.transform.pixelsPerMeter,ee=Math.sin(M.getPitch()*Math.PI/180)*Y,se=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),ge=M.transform.lngLatToCameraDepth(this._lngLat,z+ee)-se>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&ge&&this._popup.remove(),this._element.style.opacity=ge?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,c){return(this._opacity===void 0||a===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const hA={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let lu=0,RA=!1;const Kc={maxWidth:100,unit:"metric"};function Au(O,a,c){const C=c&&c.maxWidth||100,M=O._container.clientHeight/2,I=O._container.clientWidth/2,z=O.unproject([I-C/2,M]),Y=O.unproject([I+C/2,M]),ee=Math.round(O.project(Y).x-O.project(z).x),se=Math.min(C,ee,O._container.clientWidth),ge=z.distanceTo(Y);if(c&&c.unit==="imperial"){const Oe=3.2808*ge;Oe>5280?sl(a,se,Oe/5280,O._getUIString("ScaleControl.Miles")):sl(a,se,Oe,O._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?sl(a,se,ge/1852,O._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?sl(a,se,ge/1e3,O._getUIString("ScaleControl.Kilometers")):sl(a,se,ge,O._getUIString("ScaleControl.Meters"))}function sl(O,a,c,C){const M=function(I){const z=Math.pow(10,`${Math.floor(I)}`.length-1);let Y=I/z;return Y=Y>=10?10:Y>=5?5:Y>=3?3:Y>=2?2:Y>=1?1:function(ee){const se=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*se)/se}(Y),z*Y}(c);O.style.width=a*(M/c)+"px",O.innerHTML=`${M}&nbsp;${C}`}const wh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},uc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function uu(O){if(O){if(typeof O=="number"){const a=Math.round(Math.abs(O)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,O),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-O),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(O,0),right:new o.P(-O,0)}}if(O instanceof o.P||Array.isArray(O)){const a=o.P.convert(O);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(O.center||[0,0]),top:o.P.convert(O.top||[0,0]),"top-left":o.P.convert(O["top-left"]||[0,0]),"top-right":o.P.convert(O["top-right"]||[0,0]),bottom:o.P.convert(O.bottom||[0,0]),"bottom-left":o.P.convert(O["bottom-left"]||[0,0]),"bottom-right":o.P.convert(O["bottom-right"]||[0,0]),left:o.P.convert(O.left||[0,0]),right:o.P.convert(O.right||[0,0])}}return uu(new o.P(0,0))}const Il=p;l.AJAXError=o.co,l.Event=o.l,l.Evented=o.E,l.LngLat=o.Q,l.MercatorCoordinate=o.$,l.Point=o.P,l.addProtocol=o.cp,l.config=o.a,l.removeProtocol=o.cq,l.AttributionControl=Jr,l.BoxZoomHandler=il,l.CanvasSource=an,l.CooperativeGesturesHandler=ws,l.DoubleClickZoomHandler=oh,l.DragPanHandler=Qo,l.DragRotateHandler=ya,l.EdgeInsets=iA,l.FullscreenControl=class extends o.E{constructor(O={}){super(),this._onFullscreenChange=()=>{var a;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=c==null?void 0:c.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const O=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=nn,l.GeolocateControl=class extends o.E{constructor(O){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{const c=new o.Q(a.coords.longitude,a.coords.latitude),C=a.coords.accuracy,M=this._map.getBearing(),I=o.e({bearing:M},this.options.fitBoundsOptions),z=Kt.fromLngLat(c,C);this._map.fitBounds(z,I,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const c=new o.Q(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&RA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new au({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new au({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},hA,O)}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(KA!==void 0&&!a)return KA;if(window.navigator.permissions===void 0)return KA=!!window.navigator.geolocation,KA;try{KA=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{KA=!!window.navigator.geolocation}return KA})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lu=0,RA=!1}_isOutOfMapMaxBounds(O){const a=this._map.getMaxBounds(),c=O.coords;return a&&(c.longitude<a.getWest()||c.longitude>a.getEast()||c.latitude<a.getSouth()||c.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const O=this._map.getBounds(),a=O.getSouthEast(),c=O.getNorthEast(),C=a.distanceTo(c),M=Math.ceil(this._accuracy/(C/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lu--,RA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lu++,lu>1?(O={maximumAge:6e5,timeout:0},RA=!0):(O=this.options.positionOptions,RA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var O;const a=(O=this._map.getProjection())===null||O===void 0?void 0:O.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var O;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((O=this._map.getProjection())===null||O===void 0?void 0:O.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=wu,l.ImageSource=Xn,l.KeyboardHandler=ga,l.LngLatBounds=Kt,l.LogoControl=Mh,l.Map=class extends gl{constructor(O){var a,c;o.cl.mark(o.cm.create);const C=Object.assign(Object.assign(Object.assign({},ah),O),{canvasContextAttributes:Object.assign(Object.assign({},ah.canvasContextAttributes),O.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new Gs,I=new wA;if(C.minZoom!==void 0&&M.setMinZoom(C.minZoom),C.maxZoom!==void 0&&M.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&M.setMinPitch(C.minPitch),C.maxPitch!==void 0&&M.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&M.setRenderWorldCopies(C.renderWorldCopies),super(M,I,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Eu,this._controls=[],this._mapId=o.a4(),this._contextLost=Y=>{Y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:Y}))},this._contextRestored=Y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:Y}))},this._onMapScroll=Y=>{if(Y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ji),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let Y=!1;const ee=IA(se=>{this._trackResize&&!this._removed&&(this.resize(se),this.redraw())},50);this._resizeObserver=new ResizeObserver(se=>{Y?ee(se):Y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Qa(this,C),this._hash=C.hash&&new wu(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,o.e({},C.fitBoundsOptions,{duration:0}))));const z=typeof C.style=="string"||((c=(a=C.style)===null||a===void 0?void 0:a.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Jr(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new Mh,C.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const Y=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Y)}}),this.on("data",Y=>{this._update(Y.dataType==="style"),this.fire(new o.l(`${Y.dataType}data`,Y))}),this.on("dataloading",Y=>{this.fire(new o.l(`${Y.dataType}dataloading`,Y))}),this.on("dataabort",Y=>{this.fire(new o.l("sourcedataabort",Y))})}_getMapId(){return this._mapId}addControl(O,a){if(a===void 0&&(a=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=O.onAdd(this);this._controls.push(O);const C=this._controlPositions[a];return a.indexOf("bottom")!==-1?C.insertBefore(c,C.firstChild):C.appendChild(c),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(O);return a>-1&&this._controls.splice(a,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}calculateCameraOptionsFromTo(O,a,c,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(O,a,c,C)}resize(O,a=!0){const[c,C]=this._containerDimensions(),M=this._getClampedPixelRatio(c,C);if(this._resizeCanvas(c,C,M),this.painter.resize(c,C,M),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const Y=this._getClampedPixelRatio(c,C);this._resizeCanvas(c,C,Y),this.painter.resize(c,C,Y)}this._resizeTransform(a);const I=!this._moving;return I&&(this.stop(),this.fire(new o.l("movestart",O)).fire(new o.l("move",O))),this.fire(new o.l("resize",O)),I&&this.fire(new o.l("moveend",O)),this}_resizeTransform(O=!0){var a;const[c,C]=this._containerDimensions();this.transform.resize(c,C,O),(a=this._requestedCameraState)===null||a===void 0||a.resize(c,C,O)}_getClampedPixelRatio(O,a){const{0:c,1:C}=this._maxCanvasSize,M=this.getPixelRatio(),I=O*M,z=a*M;return Math.min(I>c?c/I:1,z>C?C/z:1)*M}getPixelRatio(){var O;return(O=this._overridePixelRatio)!==null&&O!==void 0?O:devicePixelRatio}setPixelRatio(O){this._overridePixelRatio=O,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(Kt.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.setMinZoom(O),this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.setMaxZoom(O),this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.setMinPitch(O),this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(O>=this.transform.minPitch)return this.transform.setMaxPitch(O),this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.setRenderWorldCopies(O),this._update()}project(O){return this.transform.locationToScreenPoint(o.Q.convert(O),this.style&&this.terrain)}unproject(O){return this.transform.screenPointToLocation(o.P.convert(O),this.terrain)}isMoving(){var O;return this._moving||((O=this.handlers)===null||O===void 0?void 0:O.isMoving())}isZooming(){var O;return this._zooming||((O=this.handlers)===null||O===void 0?void 0:O.isZooming())}isRotating(){var O;return this._rotating||((O=this.handlers)===null||O===void 0?void 0:O.isRotating())}_createDelegatedListener(O,a,c){if(O==="mouseenter"||O==="mouseover"){let C=!1;return{layers:a,listener:c,delegates:{mousemove:I=>{const z=a.filter(ee=>this.getLayer(ee)),Y=z.length!==0?this.queryRenderedFeatures(I.point,{layers:z}):[];Y.length?C||(C=!0,c.call(this,new Wa(O,this,I.originalEvent,{features:Y}))):C=!1},mouseout:()=>{C=!1}}}}if(O==="mouseleave"||O==="mouseout"){let C=!1;return{layers:a,listener:c,delegates:{mousemove:z=>{const Y=a.filter(ee=>this.getLayer(ee));(Y.length!==0?this.queryRenderedFeatures(z.point,{layers:Y}):[]).length?C=!0:C&&(C=!1,c.call(this,new Wa(O,this,z.originalEvent)))},mouseout:z=>{C&&(C=!1,c.call(this,new Wa(O,this,z.originalEvent)))}}}}{const C=M=>{const I=a.filter(Y=>this.getLayer(Y)),z=I.length!==0?this.queryRenderedFeatures(M.point,{layers:I}):[];z.length&&(M.features=z,c.call(this,M),delete M.features)};return{layers:a,listener:c,delegates:{[O]:C}}}}_saveDelegatedListener(O,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(a)}_removeDelegatedListener(O,a,c){if(!this._delegatedListeners||!this._delegatedListeners[O])return;const C=this._delegatedListeners[O];for(let M=0;M<C.length;M++){const I=C[M];if(I.listener===c&&I.layers.length===a.length&&I.layers.every(z=>a.includes(z))){for(const z in I.delegates)this.off(z,I.delegates[z]);return void C.splice(M,1)}}}on(O,a,c){if(c===void 0)return super.on(O,a);const C=typeof a=="string"?[a]:a,M=this._createDelegatedListener(O,C,c);this._saveDelegatedListener(O,M);for(const I in M.delegates)this.on(I,M.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(O,C,c)}}}once(O,a,c){if(c===void 0)return super.once(O,a);const C=typeof a=="string"?[a]:a,M=this._createDelegatedListener(O,C,c);for(const I in M.delegates){const z=M.delegates[I];M.delegates[I]=(...Y)=>{this._removeDelegatedListener(O,C,c),z(...Y)}}this._saveDelegatedListener(O,M);for(const I in M.delegates)this.once(I,M.delegates[I]);return this}off(O,a,c){return c===void 0?super.off(O,a):(this._removeDelegatedListener(O,typeof a=="string"?[a]:a,c),this)}queryRenderedFeatures(O,a){if(!this.style)return[];let c;const C=O instanceof o.P||Array.isArray(O),M=C?O:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(C?{}:O)||{},M instanceof o.P||typeof M[0]=="number")c=[o.P.convert(M)];else{const I=o.P.convert(M[0]),z=o.P.convert(M[1]);c=[I,new o.P(z.x,I.y),z,new o.P(I.x,z.y),I]}return this.style.queryRenderedFeatures(c,a,this.transform)}querySourceFeatures(O,a){return this.style.querySourceFeatures(O,a)}setStyle(O,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(O,a))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const a=this._locale[O];if(a==null)throw new Error(`Missing UI string '${O}'`);return a}_updateStyle(O,a){var c,C;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(O,a));const M=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!O)),O?(this.style=new yh(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O,a,M):this.style.loadJSON(O,a,M),this):((C=(c=this.style)===null||c===void 0?void 0:c.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new yh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,a){if(typeof O=="string"){const c=this._requestManager.transformRequest(O,"Style");o.j(c,new AbortController).then(C=>{this._updateDiff(C.data,a)}).catch(C=>{C&&this.fire(new o.k(C))})}else typeof O=="object"&&this._updateDiff(O,a)}_updateDiff(O,a){try{this.style.setState(O,a)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(O,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(O,a){return this._lazyInitEmptyStyle(),this.style.addSource(O,a),this._update(!0)}isSourceLoaded(O){const a=this.style&&this.style.sourceCaches[O];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),O){const a=this.style.sourceCaches[O.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${O.source}`);this.terrain===null&&a.reload();for(const c in this.style._layers){const C=this.style._layers[c];C.type==="hillshade"&&C.source===O.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new td(this.painter,a,O),this.painter.renderToTexture=new Bu(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var C;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==O.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=c.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:O})),this}getTerrain(){var O,a;return(a=(O=this.terrain)===null||O===void 0?void 0:O.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const a in O){const c=O[a]._tiles;for(const C in c){const M=c[C];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}setSourceTileLodParams(O,a,c){if(c){const C=this.getSource(c);if(!C)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);C.calculateTileZoom=Ee(Math.max(1,O),Math.max(1,a))}else for(const C in this.style.sourceCaches)this.style.sourceCaches[C].getSource().calculateTileZoom=Ee(Math.max(1,O),Math.max(1,a));return this._update(!0),this}addImage(O,a,c={}){const{pixelRatio:C=1,sdf:M=!1,stretchX:I,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:se}=c;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ge,height:Oe,data:Ie}=a,Ge=a;return this.style.addImage(O,{data:new o.R({width:ge,height:Oe},new Uint8Array(Ie)),pixelRatio:C,stretchX:I,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:se,sdf:M,version:0,userImage:Ge}),Ge.onAdd&&Ge.onAdd(this,O),this}}{const{width:ge,height:Oe,data:Ie}=k.getImageData(a);this.style.addImage(O,{data:new o.R({width:ge,height:Oe},Ie),pixelRatio:C,stretchX:I,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:se,sdf:M,version:0})}}updateImage(O,a){const c=this.style.getImage(O);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=a instanceof HTMLImageElement||o.b(a)?k.getImageData(a):a,{width:M,height:I,data:z}=C;if(M===void 0||I===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||I!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Y=!(a instanceof HTMLImageElement||o.b(a));return c.data.replace(z,Y),this.style.updateImage(O,c),this}getImage(O){return this.style.getImage(O)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O){return ne.getImage(this._requestManager.transformRequest(O,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(O,a){return this._lazyInitEmptyStyle(),this.style.addLayer(O,a),this._update(!0)}moveLayer(O,a){return this.style.moveLayer(O,a),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(O,a,c){return this.style.setLayerZoomRange(O,a,c),this._update(!0)}setFilter(O,a,c={}){return this.style.setFilter(O,a,c),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,a,c,C={}){return this.style.setPaintProperty(O,a,c,C),this._update(!0)}getPaintProperty(O,a){return this.style.getPaintProperty(O,a)}setLayoutProperty(O,a,c,C={}){return this.style.setLayoutProperty(O,a,c,C),this._update(!0)}getLayoutProperty(O,a){return this.style.getLayoutProperty(O,a)}setGlyphs(O,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(O,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(O,a,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(O,a,c,C=>{C||this._update(!0)}),this}removeSprite(O){return this._lazyInitEmptyStyle(),this.style.removeSprite(O),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(O,a,c=>{c||this._update(!0)}),this}setLight(O,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(O,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(O,a){return this.style.setFeatureState(O,a),this._update()}removeFeatureState(O,a){return this.style.removeFeatureState(O,a),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,a=0;return this._container&&(O=this._container.clientWidth||400,a=this._container.clientHeight||300),[O,a]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map");const a=this._canvasContainer=P.create("div","maplibregl-canvas-container",O);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),C=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],C);const M=this._controlContainer=P.create("div","maplibregl-control-container",O),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{I[z]=P.create("div",`maplibregl-ctrl-${z} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(O,a,c){this._canvas.width=Math.floor(c*O),this._canvas.height=Math.floor(c*a),this._canvas.style.width=`${O}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const O=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let a=null;this._canvas.addEventListener("webglcontextcreationerror",C=>{a={requestedAttributes:O},C&&(a.statusMessage=C.statusMessage,a.type=C.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,O):this._canvas.getContext("webgl2",O)||this._canvas.getContext("webgl",O),!c){const C="Failed to initialize WebGL";throw a?(a.message=C,new Error(JSON.stringify(a))):new Error(C)}this.painter=new Tc(c,this.transform),D.testSupport(c)}migrateProjection(O,a){super.migrateProjection(O,a),this.painter.transform=O,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){var a,c,C,M,I;const z=this._idleTriggered?this._fadeDuration:0,Y=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let ee=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Oe=this.transform.zoom,Ie=k.now();this.style.zoomHistory.update(Oe,Ie);const Ge=new o.C(Oe,{now:Ie,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ze=Ge.crossFadingFactor();Ze===1&&Ze===this._crossFadingFactor||(ee=!0,this._crossFadingFactor=Ze),this.style.update(Ge)}const se=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==Y;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||se)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,se),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cl.mark(o.cm.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||ee)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ge=this._sourcesDirty||this._styleDirty||this._placementDirty;return ge||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||ge||(this._fullyLoaded=!0,o.cl.mark(o.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var O;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(O=this._resizeObserver)===null||O===void 0||O.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cl.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,k.frame(this._frameRequest,O=>{o.cl.frame(O),this._frameRequest=null;try{this._render(O)}catch(a){if(!o.cn(a)&&!function(c){return c.message===xl}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}get version(){return Is}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(O){return this._lazyInitEmptyStyle(),this.style.setProjection(O),this._update(!0)}},l.MapMouseEvent=Wa,l.MapTouchEvent=ja,l.MapWheelEvent=Os,l.Marker=au,l.NavigationControl=class{constructor(O){this._updateZoomButtons=()=>{const a=this._map.getZoom(),c=a===this._map.getMaxZoom(),C=a===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,c)=>{const C=this._map._getUIString(`NavigationControl.${c}`);a.title=C,a.setAttribute("aria-label",C)},this.options=o.e({},ol,O),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ou(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,a){const c=P.create("button",O,this._container);return c.type="button",c.addEventListener("click",a),c}},l.Popup=class extends o.E{constructor(O){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=su(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;const c=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const M=uu(this.options.offset);if(!C){const z=this._container.offsetWidth,Y=this._container.offsetHeight;let ee;ee=c.y+M.bottom.y<Y?["top"]:c.y>this._map.transform.height-Y?["bottom"]:[],c.x<z/2?ee.push("left"):c.x>this._map.transform.width-z/2&&ee.push("right"),C=ee.length===0?"bottom":ee.join("-")}let I=c.add(M[C]);this.options.subpixelPositioning||(I=I.round()),P.setTransform(this._container,`${ea[C]} translate(${I.x}px,${I.y}px)`),Ys(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(wh),O)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=o.Q.convert(O),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const a=document.createDocumentFragment(),c=document.createElement("body");let C;for(c.innerHTML=O;C=c.firstChild,C;)a.appendChild(C);return this.setDOMContent(a)}getMaxWidth(){var O;return(O=this._container)===null||O===void 0?void 0:O.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){return this._container&&this._container.classList.add(O),this}removeClassName(O){return this._container&&this._container.classList.remove(O),this}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}setSubpixelPositioning(O){this.options.subpixelPositioning=O}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(uc);O&&O.focus()}},l.RasterDEMTileSource=pr,l.RasterTileSource=_n,l.ScaleControl=class{constructor(O){this._onMove=()=>{Au(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Au(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Kc),O)}getDefaultPosition(){return"bottom-left"}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=ou,l.Style=yh,l.TerrainControl=class{constructor(O){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=O}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=uA,l.TwoFingersTouchRotateHandler=is,l.TwoFingersTouchZoomHandler=Qu,l.TwoFingersTouchZoomRotateHandler=la,l.VectorTileSource=Rt,l.VideoSource=Fn,l.addSourceType=(O,a)=>o._(void 0,void 0,void 0,function*(){if(Cr(O))throw new Error(`A source type called "${O}" already exists.`);((c,C)=>{Bn[c]=C})(O,a)}),l.clearPrewarmedResources=function(){const O=Gt;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(Le),Gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Gn,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},l.getVersion=function(){return Il},l.getWorkerCount=function(){return Xe.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(O){return Te().broadcast("IS",O)},l.prewarm=function(){Ut().acquire(Le)},l.setMaxParallelImageRequests=function(O){o.a.MAX_PARALLEL_IMAGE_REQUESTS=O},l.setRTLTextPlugin=function(O,a){return ce().setRTLTextPlugin(O,a)},l.setWorkerCount=function(O){Xe.workerCount=O},l.setWorkerUrl=function(O){o.a.WORKER_URL=O}});var s=t;return s})}(wb)),wb.exports}var gV=mV();const $1=dl(gV);var W_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function ZF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ev={exports:{}};Ev.exports;var k7;function yV(){return k7||(k7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",p="[object Array]",v="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",k="[object Error]",P="[object Function]",D="[object GeneratorFunction]",N="[object Map]",W="[object Number]",V="[object Null]",$="[object Object]",ie="[object Promise]",ne="[object Proxy]",q="[object RegExp]",te="[object Set]",G="[object String]",oe="[object Symbol]",fe="[object Undefined]",he="[object WeakMap]",Me="[object ArrayBuffer]",me="[object DataView]",pe="[object Float32Array]",qe="[object Float64Array]",Se="[object Int8Array]",vt="[object Int16Array]",Je="[object Int32Array]",Ke="[object Uint8Array]",je="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Le="[object Uint32Array]",Xe=/[\\^$.*+?()[\]{}|]/g,Ct=/^\[object .+?Constructor\]$/,Gt=/^(?:0|[1-9]\d*)$/,mt={};mt[pe]=mt[qe]=mt[Se]=mt[vt]=mt[Je]=mt[Ke]=mt[je]=mt[Pe]=mt[Le]=!0,mt[o]=mt[p]=mt[Me]=mt[x]=mt[me]=mt[B]=mt[k]=mt[P]=mt[N]=mt[W]=mt[$]=mt[q]=mt[te]=mt[G]=mt[he]=!1;var Ut=typeof W_=="object"&&W_&&W_.Object===Object&&W_,kt=typeof self=="object"&&self&&self.Object===Object&&self,Te=Ut||kt||Function("return this")(),Re=e&&!e.nodeType&&e,Ue=Re&&!0&&n&&!n.nodeType&&n,nt=Ue&&Ue.exports===Re,_t=nt&&Ut.process,gt=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Kt=gt&&gt.isTypedArray;function $t(J,Be){for(var lt=-1,qt=J==null?0:J.length,Br=0,Gn=[];++lt<qt;){var Zr=J[lt];Be(Zr,lt,J)&&(Gn[Br++]=Zr)}return Gn}function Rt(J,Be){for(var lt=-1,qt=Be.length,Br=J.length;++lt<qt;)J[Br+lt]=Be[lt];return J}function _n(J,Be){for(var lt=-1,qt=J==null?0:J.length;++lt<qt;)if(Be(J[lt],lt,J))return!0;return!1}function pr(J,Be){for(var lt=-1,qt=Array(J);++lt<J;)qt[lt]=Be(lt);return qt}function nn(J){return function(Be){return J(Be)}}function Xn(J,Be){return J.has(Be)}function Fn(J,Be){return J==null?void 0:J[Be]}function an(J){var Be=-1,lt=Array(J.size);return J.forEach(function(qt,Br){lt[++Be]=[Br,qt]}),lt}function Bn(J,Be){return function(lt){return J(Be(lt))}}function Cr(J){var Be=-1,lt=Array(J.size);return J.forEach(function(qt){lt[++Be]=qt}),lt}var lr=Array.prototype,hr=Function.prototype,We=Object.prototype,ce=Te["__core-js_shared__"],ye=hr.toString,rt=We.hasOwnProperty,Et=function(){var J=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ht=We.toString,Zt=RegExp("^"+ye.call(rt).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jn=nt?Te.Buffer:void 0,He=Te.Symbol,ae=Te.Uint8Array,_e=We.propertyIsEnumerable,f=lr.splice,Qe=He?He.toStringTag:void 0,Ee=Object.getOwnPropertySymbols,it=Jn?Jn.isBuffer:void 0,ut=Bn(Object.keys,Object),at=jr(Te,"DataView"),zt=jr(Te,"Map"),Qt=jr(Te,"Promise"),Nt=jr(Te,"Set"),rn=jr(Te,"WeakMap"),Rn=jr(Object,"create"),Dn=Qi(at),mr=Qi(zt),Tr=Qi(Qt),Jt=Qi(Nt),br=Qi(rn),Gr=He?He.prototype:void 0,Si=Gr?Gr.valueOf:void 0;function Fr(J){var Be=-1,lt=J==null?0:J.length;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function yn(){this.__data__=Rn?Rn(null):{},this.size=0}function ar(J){var Be=this.has(J)&&delete this.__data__[J];return this.size-=Be?1:0,Be}function Pr(J){var Be=this.__data__;if(Rn){var lt=Be[J];return lt===r?void 0:lt}return rt.call(Be,J)?Be[J]:void 0}function Cs(J){var Be=this.__data__;return Rn?Be[J]!==void 0:rt.call(Be,J)}function Ao(J,Be){var lt=this.__data__;return this.size+=this.has(J)?0:1,lt[J]=Rn&&Be===void 0?r:Be,this}Fr.prototype.clear=yn,Fr.prototype.delete=ar,Fr.prototype.get=Pr,Fr.prototype.has=Cs,Fr.prototype.set=Ao;function ui(J){var Be=-1,lt=J==null?0:J.length;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function $r(){this.__data__=[],this.size=0}function _s(J){var Be=this.__data__,lt=dr(Be,J);if(lt<0)return!1;var qt=Be.length-1;return lt==qt?Be.pop():f.call(Be,lt,1),--this.size,!0}function fs(J){var Be=this.__data__,lt=dr(Be,J);return lt<0?void 0:Be[lt][1]}function Ja(J){return dr(this.__data__,J)>-1}function sa(J,Be){var lt=this.__data__,qt=dr(lt,J);return qt<0?(++this.size,lt.push([J,Be])):lt[qt][1]=Be,this}ui.prototype.clear=$r,ui.prototype.delete=_s,ui.prototype.get=fs,ui.prototype.has=Ja,ui.prototype.set=sa;function Wo(J){var Be=-1,lt=J==null?0:J.length;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function zo(){this.size=0,this.__data__={hash:new Fr,map:new(zt||ui),string:new Fr}}function So(J){var Be=di(this,J).delete(J);return this.size-=Be?1:0,Be}function pi(J){return di(this,J).get(J)}function tA(J){return di(this,J).has(J)}function _l(J,Be){var lt=di(this,J),qt=lt.size;return lt.set(J,Be),this.size+=lt.size==qt?0:1,this}Wo.prototype.clear=zo,Wo.prototype.delete=So,Wo.prototype.get=pi,Wo.prototype.has=tA,Wo.prototype.set=_l;function Ni(J){var Be=-1,lt=J==null?0:J.length;for(this.__data__=new Wo;++Be<lt;)this.add(J[Be])}function wr(J){return this.__data__.set(J,r),this}function Fa(J){return this.__data__.has(J)}Ni.prototype.add=Ni.prototype.push=wr,Ni.prototype.has=Fa;function bs(J){var Be=this.__data__=new ui(J);this.size=Be.size}function Rs(){this.__data__=new ui,this.size=0}function Ve(J){var Be=this.__data__,lt=Be.delete(J);return this.size=Be.size,lt}function xt(J){return this.__data__.get(J)}function xn(J){return this.__data__.has(J)}function Yn(J,Be){var lt=this.__data__;if(lt instanceof ui){var qt=lt.__data__;if(!zt||qt.length<t-1)return qt.push([J,Be]),this.size=++lt.size,this;lt=this.__data__=new Wo(qt)}return lt.set(J,Be),this.size=lt.size,this}bs.prototype.clear=Rs,bs.prototype.delete=Ve,bs.prototype.get=xt,bs.prototype.has=xn,bs.prototype.set=Yn;function fn(J,Be){var lt=Ba(J),qt=!lt&&La(J),Br=!lt&&!qt&&Gs(J),Gn=!lt&&!qt&&!Br&&XA(J),Zr=lt||qt||Br||Gn,oi=Zr?pr(J.length,String):[],Or=oi.length;for(var ni in J)rt.call(J,ni)&&!(Zr&&(ni=="length"||Br&&(ni=="offset"||ni=="parent")||Gn&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||aa(ni,Or)))&&oi.push(ni);return oi}function dr(J,Be){for(var lt=J.length;lt--;)if(_o(J[lt][0],Be))return lt;return-1}function Wi(J,Be,lt){var qt=Be(J);return Ba(J)?qt:Rt(qt,lt(J))}function Co(J){return J==null?J===void 0?fe:V:Qe&&Qe in Object(J)?Ii(J):ns(J)}function ls(J){return wi(J)&&Co(J)==o}function pa(J,Be,lt,qt,Br){return J===Be?!0:J==null||Be==null||!wi(J)&&!wi(Be)?J!==J&&Be!==Be:nA(J,Be,lt,qt,pa,Br)}function nA(J,Be,lt,qt,Br,Gn){var Zr=Ba(J),oi=Ba(Be),Or=Zr?p:$o(J),ni=oi?p:$o(Be);Or=Or==o?$:Or,ni=ni==o?$:ni;var $i=Or==$,Eo=ni==$,si=Or==ni;if(si&&Gs(J)){if(!Gs(Be))return!1;Zr=!0,$i=!1}if(si&&!$i)return Gn||(Gn=new bs),Zr||XA(J)?ma(J,Be,lt,qt,Br,Gn):Ea(J,Be,Or,lt,qt,Br,Gn);if(!(lt&i)){var _i=$i&&rt.call(J,"__wrapped__"),Ri=Eo&&rt.call(Be,"__wrapped__");if(_i||Ri){var Yi=_i?J.value():J,mi=Ri?Be.value():Be;return Gn||(Gn=new bs),Br(Yi,mi,lt,qt,Gn)}}return si?(Gn||(Gn=new bs),_c(J,Be,lt,qt,Br,Gn)):!1}function Ci(J){if(!wA(J)||jo(J))return!1;var Be=el(J)?Zt:Ct;return Be.test(Qi(J))}function ZA(J){return wi(J)&&Oa(J.length)&&!!mt[Co(J)]}function rA(J){if(!iA(J))return ut(J);var Be=[];for(var lt in Object(J))rt.call(J,lt)&&lt!="constructor"&&Be.push(lt);return Be}function ma(J,Be,lt,qt,Br,Gn){var Zr=lt&i,oi=J.length,Or=Be.length;if(oi!=Or&&!(Zr&&Or>oi))return!1;var ni=Gn.get(J);if(ni&&Gn.get(Be))return ni==Be;var $i=-1,Eo=!0,si=lt&s?new Ni:void 0;for(Gn.set(J,Be),Gn.set(Be,J);++$i<oi;){var _i=J[$i],Ri=Be[$i];if(qt)var Yi=Zr?qt(Ri,_i,$i,Be,J,Gn):qt(_i,Ri,$i,J,Be,Gn);if(Yi!==void 0){if(Yi)continue;Eo=!1;break}if(si){if(!_n(Be,function(mi,Ds){if(!Xn(si,Ds)&&(_i===mi||Br(_i,mi,lt,qt,Gn)))return si.push(Ds)})){Eo=!1;break}}else if(!(_i===Ri||Br(_i,Ri,lt,qt,Gn))){Eo=!1;break}}return Gn.delete(J),Gn.delete(Be),Eo}function Ea(J,Be,lt,qt,Br,Gn,Zr){switch(lt){case me:if(J.byteLength!=Be.byteLength||J.byteOffset!=Be.byteOffset)return!1;J=J.buffer,Be=Be.buffer;case Me:return!(J.byteLength!=Be.byteLength||!Gn(new ae(J),new ae(Be)));case x:case B:case W:return _o(+J,+Be);case k:return J.name==Be.name&&J.message==Be.message;case q:case G:return J==Be+"";case N:var oi=an;case te:var Or=qt&i;if(oi||(oi=Cr),J.size!=Be.size&&!Or)return!1;var ni=Zr.get(J);if(ni)return ni==Be;qt|=s,Zr.set(J,Be);var $i=ma(oi(J),oi(Be),qt,Br,Gn,Zr);return Zr.delete(J),$i;case oe:if(Si)return Si.call(J)==Si.call(Be)}return!1}function _c(J,Be,lt,qt,Br,Gn){var Zr=lt&i,oi=Ws(J),Or=oi.length,ni=Ws(Be),$i=ni.length;if(Or!=$i&&!Zr)return!1;for(var Eo=Or;Eo--;){var si=oi[Eo];if(!(Zr?si in Be:rt.call(Be,si)))return!1}var _i=Gn.get(J);if(_i&&Gn.get(Be))return _i==Be;var Ri=!0;Gn.set(J,Be),Gn.set(Be,J);for(var Yi=Zr;++Eo<Or;){si=oi[Eo];var mi=J[si],Ds=Be[si];if(qt)var Ua=Zr?qt(Ds,mi,si,Be,J,Gn):qt(mi,Ds,si,J,Be,Gn);if(!(Ua===void 0?mi===Ds||Br(mi,Ds,lt,qt,Gn):Ua)){Ri=!1;break}Yi||(Yi=si=="constructor")}if(Ri&&!Yi){var SA=J.constructor,As=Be.constructor;SA!=As&&"constructor"in J&&"constructor"in Be&&!(typeof SA=="function"&&SA instanceof SA&&typeof As=="function"&&As instanceof As)&&(Ri=!1)}return Gn.delete(J),Gn.delete(Be),Ri}function Ws(J){return Wi(J,eo,bl)}function di(J,Be){var lt=J.__data__;return js(Be)?lt[typeof Be=="string"?"string":"hash"]:lt.map}function jr(J,Be){var lt=Fn(J,Be);return Ci(lt)?lt:void 0}function Ii(J){var Be=rt.call(J,Qe),lt=J[Qe];try{J[Qe]=void 0;var qt=!0}catch{}var Br=Ht.call(J);return qt&&(Be?J[Qe]=lt:delete J[Qe]),Br}var bl=Ee?function(J){return J==null?[]:(J=Object(J),$t(Ee(J),function(Be){return _e.call(J,Be)}))}:Sr,$o=Co;(at&&$o(new at(new ArrayBuffer(1)))!=me||zt&&$o(new zt)!=N||Qt&&$o(Qt.resolve())!=ie||Nt&&$o(new Nt)!=te||rn&&$o(new rn)!=he)&&($o=function(J){var Be=Co(J),lt=Be==$?J.constructor:void 0,qt=lt?Qi(lt):"";if(qt)switch(qt){case Dn:return me;case mr:return N;case Tr:return ie;case Jt:return te;case br:return he}return Be});function aa(J,Be){return Be=Be??l,!!Be&&(typeof J=="number"||Gt.test(J))&&J>-1&&J%1==0&&J<Be}function js(J){var Be=typeof J;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?J!=="__proto__":J===null}function jo(J){return!!Et&&Et in J}function iA(J){var Be=J&&J.constructor,lt=typeof Be=="function"&&Be.prototype||We;return J===lt}function ns(J){return Ht.call(J)}function Qi(J){if(J!=null){try{return ye.call(J)}catch{}try{return J+""}catch{}}return""}function _o(J,Be){return J===Be||J!==J&&Be!==Be}var La=ls(function(){return arguments}())?ls:function(J){return wi(J)&&rt.call(J,"callee")&&!_e.call(J,"callee")},Ba=Array.isArray;function uo(J){return J!=null&&Oa(J.length)&&!el(J)}var Gs=it||no;function oA(J,Be){return pa(J,Be)}function el(J){if(!wA(J))return!1;var Be=Co(J);return Be==P||Be==D||Be==v||Be==ne}function Oa(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=l}function wA(J){var Be=typeof J;return J!=null&&(Be=="object"||Be=="function")}function wi(J){return J!=null&&typeof J=="object"}var XA=Kt?nn(Kt):ZA;function eo(J){return uo(J)?fn(J):rA(J)}function Sr(){return[]}function no(){return!1}n.exports=oA}(Ev,Ev.exports)),Ev.exports}var vV=yV(),CV=ZF(vV);function n6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function r6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function i6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function _V(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const p=s(l);r.push(n6(p.circle,l)),i.push(i6(p.line,l)),t.push(r6(p.polygon,p.polygonOutline,l))}else o.forEach(p=>{const v=s(p);r.push(n6(v.circle,l,p)),i.push(i6(v.line,l,p)),t.push(r6(v.polygon,v.polygonOutline,l,p))})}),t.concat(i).concat(r)}function bV(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var P7={polygonLayer:r6,lineLayer:i6,circleLayer:n6,generateInspectStyle:bV,generateColoredLayers:_V};class xV{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function MV(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function X3(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${MV(e)}</div></div>`}function wV(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function SV(n){const e=wV(n.layer["source-layer"]||n.layer.source),t=X3("$id",n.id),r=X3("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>X3(s,n.properties[s]));return[e,t,r].concat(i).join("")}function EV(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${SV(e)}</div>`).join("")}function BV(n){return`<div class="maplibregl-inspect_popup">${EV(n)}</div>`}var Bv={exports:{}},OV=Bv.exports,K7;function IV(){return K7||(K7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(OV,function(){var t=null,r={};V();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=q(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,fe,he;if(G.count!==null&&G.count!==void 0){for(var Me=G.count,me=[],pe=0;pe<G.count;pe++)i.push(!1);for(G.count=null;Me>me.length;){var qe=s(G);t!==null&&(G.seed=t),me.push(qe)}return G.count=Me,me}return oe=l(G),fe=o(oe,G),he=p(oe,fe,G),v([oe,fe,he],G)};function l(G){if(i.length>0){var oe=te(G.hue),fe=D(oe),he=(oe[1]-oe[0])/i.length,Me=parseInt((fe-oe[0])/he);i[Me]===!0?Me=(Me+2)%i.length:i[Me]=!0;var me=(oe[0]+Me*he)%359,pe=(oe[0]+(Me+1)*he)%359;return oe=[me,pe],fe=D(oe),fe<0&&(fe=360+fe),fe}else{var oe=B(G.hue);return fe=D(oe),fe<0&&(fe=360+fe),fe}}function o(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return D([0,100]);var fe=k(G),he=fe[0],Me=fe[1];switch(oe.luminosity){case"bright":he=55;break;case"dark":he=Me-10;break;case"light":Me=55;break}return D([he,Me])}function p(G,oe,fe){var he=x(G,oe),Me=100;switch(fe.luminosity){case"dark":Me=he+20;break;case"light":he=(Me+he)/2;break;case"random":he=0,Me=100;break}return D([he,Me])}function v(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return ne(G);case"hsl":var fe=ne(G);return"hsl("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%)";case"hsla":var he=ne(G),pe=oe.alpha||Math.random();return"hsla("+he[0]+", "+he[1]+"%, "+he[2]+"%, "+pe+")";case"rgbArray":return $(G);case"rgb":var Me=$(G);return"rgb("+Me.join(", ")+")";case"rgba":var me=$(G),pe=oe.alpha||Math.random();return"rgba("+me.join(", ")+", "+pe+")";default:return N(G)}}function x(G,oe){for(var fe=P(G).lowerBounds,he=0;he<fe.length-1;he++){var Me=fe[he][0],me=fe[he][1],pe=fe[he+1][0],qe=fe[he+1][1];if(oe>=Me&&oe<=pe){var Se=(qe-me)/(pe-Me),vt=me-Se*Me;return Se*oe+vt}}return 0}function B(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(G)[0];return[he,he]}}return[0,360]}function k(G){return P(G).saturationRange}function P(G){G>=334&&G<=360&&(G-=360);for(var oe in r){var fe=r[oe];if(fe.hueRange&&G>=fe.hueRange[0]&&G<=fe.hueRange[1])return r[oe]}return"Color not found"}function D(G){if(t===null){var oe=.618033988749895,fe=Math.random();return fe+=oe,fe%=1,Math.floor(G[0]+fe*(G[1]+1-G[0]))}else{var he=G[1]||1,Me=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Me+me*(he-Me))}}function N(G){var oe=$(G);function fe(Me){var me=Me.toString(16);return me.length==1?"0"+me:me}var he="#"+fe(oe[0])+fe(oe[1])+fe(oe[2]);return he}function W(G,oe,fe){var he=fe[0][0],Me=fe[fe.length-1][0],me=fe[fe.length-1][1],pe=fe[0][1];r[G]={hueRange:oe,lowerBounds:fe,saturationRange:[he,Me],brightnessRange:[me,pe]}}function V(){W("monochrome",null,[[0,0],[100,0]]),W("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),W("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),W("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),W("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),W("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),W("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),W("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function $(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var fe=G[1]/100,he=G[2]/100,Me=Math.floor(oe*6),me=oe*6-Me,pe=he*(1-fe),qe=he*(1-me*fe),Se=he*(1-(1-me)*fe),vt=256,Je=256,Ke=256;switch(Me){case 0:vt=he,Je=Se,Ke=pe;break;case 1:vt=qe,Je=he,Ke=pe;break;case 2:vt=pe,Je=he,Ke=Se;break;case 3:vt=pe,Je=qe,Ke=he;break;case 4:vt=Se,Je=pe,Ke=he;break;case 5:vt=he,Je=pe,Ke=qe;break}var je=[Math.floor(vt*255),Math.floor(Je*255),Math.floor(Ke*255)];return je}function ie(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,fe=parseInt(G.substr(2,2),16)/255,he=parseInt(G.substr(4,2),16)/255,Me=Math.max(oe,fe,he),me=Me-Math.min(oe,fe,he),pe=Me?me/Me:0;switch(Me){case oe:return[60*((fe-he)/me%6)||0,pe,Me];case fe:return[60*((he-oe)/me+2)||0,pe,Me];case he:return[60*((oe-fe)/me+4)||0,pe,Me]}}function ne(G){var oe=G[0],fe=G[1]/100,he=G[2]/100,Me=(2-fe)*he;return[oe,Math.round(fe*he/(Me<1?Me:2-Me)*1e4)/100,Me/2*100]}function q(G){for(var oe=0,fe=0;fe!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);fe++)oe+=G.charCodeAt(fe);return oe}function te(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(G)[0];return P(he).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return P(G).hueRange}return[0,360]}return s})}(Bv,Bv.exports)),Bv.exports}var TV=IV(),kV=ZF(TV);function PV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${kV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var KV={brightColor:PV};function RV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function DV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class TB{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!CV(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();RV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const l=this.options.renderPopup(s);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof TB))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:KV.brightColor,buildInspectStyle:P7.generateInspectStyle,renderPopup:BV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new xV({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=P7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(DV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var Ov={exports:{}},FV=Ov.exports,R7;function LV(){return R7||(R7=1,function(n,e){(function(t,r){{var i=r();n&&n.exports&&(e=n.exports=i),e.randomColor=i}})(FV,function(){var t=null,r={};V();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=q(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,fe,he;if(G.count!==null&&G.count!==void 0){for(var Me=G.count,me=[],pe=0;pe<G.count;pe++)i.push(!1);for(G.count=null;Me>me.length;){var qe=s(G);t!==null&&(G.seed=t),me.push(qe)}return G.count=Me,me}return oe=l(G),fe=o(oe,G),he=p(oe,fe,G),v([oe,fe,he],G)};function l(G){if(i.length>0){var oe=te(G.hue),fe=D(oe),he=(oe[1]-oe[0])/i.length,Me=parseInt((fe-oe[0])/he);i[Me]===!0?Me=(Me+2)%i.length:i[Me]=!0;var me=(oe[0]+Me*he)%359,pe=(oe[0]+(Me+1)*he)%359;return oe=[me,pe],fe=D(oe),fe<0&&(fe=360+fe),fe}else{var oe=B(G.hue);return fe=D(oe),fe<0&&(fe=360+fe),fe}}function o(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return D([0,100]);var fe=k(G),he=fe[0],Me=fe[1];switch(oe.luminosity){case"bright":he=55;break;case"dark":he=Me-10;break;case"light":Me=55;break}return D([he,Me])}function p(G,oe,fe){var he=x(G,oe),Me=100;switch(fe.luminosity){case"dark":Me=he+20;break;case"light":he=(Me+he)/2;break;case"random":he=0,Me=100;break}return D([he,Me])}function v(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return ne(G);case"hsl":var fe=ne(G);return"hsl("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%)";case"hsla":var he=ne(G),pe=oe.alpha||Math.random();return"hsla("+he[0]+", "+he[1]+"%, "+he[2]+"%, "+pe+")";case"rgbArray":return $(G);case"rgb":var Me=$(G);return"rgb("+Me.join(", ")+")";case"rgba":var me=$(G),pe=oe.alpha||Math.random();return"rgba("+me.join(", ")+", "+pe+")";default:return N(G)}}function x(G,oe){for(var fe=P(G).lowerBounds,he=0;he<fe.length-1;he++){var Me=fe[he][0],me=fe[he][1],pe=fe[he+1][0],qe=fe[he+1][1];if(oe>=Me&&oe<=pe){var Se=(qe-me)/(pe-Me),vt=me-Se*Me;return Se*oe+vt}}return 0}function B(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(G)[0];return[he,he]}}return[0,360]}function k(G){return P(G).saturationRange}function P(G){G>=334&&G<=360&&(G-=360);for(var oe in r){var fe=r[oe];if(fe.hueRange&&G>=fe.hueRange[0]&&G<=fe.hueRange[1])return r[oe]}return"Color not found"}function D(G){if(t===null){var oe=.618033988749895,fe=Math.random();return fe+=oe,fe%=1,Math.floor(G[0]+fe*(G[1]+1-G[0]))}else{var he=G[1]||1,Me=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Me+me*(he-Me))}}function N(G){var oe=$(G);function fe(Me){var me=Me.toString(16);return me.length==1?"0"+me:me}var he="#"+fe(oe[0])+fe(oe[1])+fe(oe[2]);return he}function W(G,oe,fe){var he=fe[0][0],Me=fe[fe.length-1][0],me=fe[fe.length-1][1],pe=fe[0][1];r[G]={hueRange:oe,lowerBounds:fe,saturationRange:[he,Me],brightnessRange:[me,pe]}}function V(){W("monochrome",null,[[0,0],[100,0]]),W("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),W("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),W("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),W("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),W("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),W("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),W("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function $(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var fe=G[1]/100,he=G[2]/100,Me=Math.floor(oe*6),me=oe*6-Me,pe=he*(1-fe),qe=he*(1-me*fe),Se=he*(1-(1-me)*fe),vt=256,Je=256,Ke=256;switch(Me){case 0:vt=he,Je=Se,Ke=pe;break;case 1:vt=qe,Je=he,Ke=pe;break;case 2:vt=pe,Je=he,Ke=Se;break;case 3:vt=pe,Je=qe,Ke=he;break;case 4:vt=Se,Je=pe,Ke=he;break;case 5:vt=he,Je=pe,Ke=qe;break}var je=[Math.floor(vt*255),Math.floor(Je*255),Math.floor(Ke*255)];return je}function ie(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,fe=parseInt(G.substr(2,2),16)/255,he=parseInt(G.substr(4,2),16)/255,Me=Math.max(oe,fe,he),me=Me-Math.min(oe,fe,he),pe=Me?me/Me:0;switch(Me){case oe:return[60*((fe-he)/me%6)||0,pe,Me];case fe:return[60*((he-oe)/me+2)||0,pe,Me];case he:return[60*((oe-fe)/me+4)||0,pe,Me]}}function ne(G){var oe=G[0],fe=G[1]/100,he=G[2]/100,Me=(2-fe)*he;return[oe,Math.round(fe*he/(Me<1?Me:2-Me)*1e4)/100,Me/2*100]}function q(G){for(var oe=0,fe=0;fe!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);fe++)oe+=G.charCodeAt(fe);return oe}function te(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(G)[0];return P(he).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return P(G).hueRange}return[0,360]}return s})}(Ov,Ov.exports)),Ov.exports}var UV=LV();const zV=dl(UV);function NV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${zV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const XF={brightColor:NV};var J3={exports:{}},e4,D7;function WV(){if(D7)return e4;D7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return e4=n,e4}var t4,F7;function jV(){if(F7)return t4;F7=1;var n=WV();function e(){}function t(){}return t.resetWarningCache=e,t4=function(){function r(l,o,p,v,x,B){if(B!==n){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},t4}var L7;function wp(){return L7||(L7=1,J3.exports=jV()()),J3.exports}var GV=wp();const yi=dl(GV);var U7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function QV(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var W0=function(e,t){var r=e.children,i=e.color,s=e.size,l=e.style,o=e.width,p=e.height,v=QV(e,["children","color","size","style","width","height"]),x=t.reactIconBase,B=x===void 0?{}:x,k=s||B.size||"1em";return Zn.createElement("svg",U7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:p||k,width:o||k},B,v,{style:U7({verticalAlign:"middle",color:i||B.color},B.style||{},l)}))};W0.propTypes={color:yi.string,size:yi.oneOfType([yi.string,yi.number]),width:yi.oneOfType([yi.string,yi.number]),height:yi.oneOfType([yi.string,yi.number]),style:yi.object};W0.contextTypes={reactIconBase:yi.shape(W0.propTypes)};function Zb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zb=function(){return l},l}Zb();class YV extends Zn.Component{render(){return Zb().f[0]++,Zb().s[0]++,Ae.jsx(W0,{viewBox:"0 0 20 20",...this.props,children:Ae.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function Xb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xb=function(){return l},l}Xb();class j_ extends Zn.Component{render(){return Xb().f[0]++,Xb().s[0]++,Ae.jsx(W0,{viewBox:"0 0 20 20",...this.props,children:Ae.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function Jb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Jb=function(){return l},l}Jb();class qV extends Zn.Component{render(){return Jb().f[0]++,Jb().s[0]++,Ae.jsx(W0,{viewBox:"0 0 20 20",...this.props,children:Ae.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:Ae.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function e2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return e2=function(){return l},l}e2();class z7 extends Zn.Component{render(){return e2().f[0]++,e2().s[0]++,Ae.jsx(W0,{viewBox:"0 0 20 20",...this.props,children:Ae.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function t2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return t2=function(){return l},l}t2();class VV extends Zn.Component{render(){return t2().f[0]++,t2().s[0]++,Ae.jsx(W0,{viewBox:"0 0 20 20",...this.props,children:Ae.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function Uy(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function HV(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function $V(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function ZV(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function XV(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function JV(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function eH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function tH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function nH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function rH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function JF(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function iH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function o6(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function oH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function sH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function aH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function N7(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function lH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function AH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function uH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function cH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function hH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function dH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function fH(n){return eA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function n2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return n2=function(){return l},l}n2();class pH extends Zn.Component{render(){return n2().f[0]++,n2().s[0]++,Ae.jsx(fH,{...this.props})}}function Dl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dl=function(){return l},l}Dl();class eL extends Zn.Component{render(){Dl().f[0]++;const e=(Dl().s[0]++,{style:this.props.style});switch(Dl().s[1]++,this.props.type){case"fill-extrusion":return Dl().b[0][0]++,Dl().s[2]++,Ae.jsx(z7,{...e});case"raster":return Dl().b[0][1]++,Dl().s[3]++,Ae.jsx(j_,{...e});case"hillshade":return Dl().b[0][2]++,Dl().s[4]++,Ae.jsx(j_,{...e});case"heatmap":return Dl().b[0][3]++,Dl().s[5]++,Ae.jsx(j_,{...e});case"fill":return Dl().b[0][4]++,Dl().s[6]++,Ae.jsx(j_,{...e});case"background":return Dl().b[0][5]++,Dl().s[7]++,Ae.jsx(z7,{...e});case"line":return Dl().b[0][6]++,Dl().s[8]++,Ae.jsx(YV,{...e});case"symbol":return Dl().b[0][7]++,Dl().s[9]++,Ae.jsx(qV,{...e});case"circle":return Dl().b[0][8]++,Dl().s[10]++,Ae.jsx(VV,{...e});default:return Dl().b[0][9]++,Dl().s[11]++,Ae.jsx(pH,{...e})}}}function Xr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xr=function(){return l},l}Xr();function mH(n){Xr().f[0]++;const e=(Xr().s[0]++,{}),t=(Xr().s[1]++,{});return Xr().s[2]++,n.forEach(r=>{Xr().f[1]++;const i=(Xr().s[3]++,r.layer["source-layer"]);if(Xr().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){Xr().b[0][0]++,Xr().s[5]++,t[r.layer.id]++;const s=(Xr().s[6]++,e[i].find(l=>(Xr().f[2]++,Xr().s[7]++,l.layer.id===r.layer.id)));Xr().s[8]++,s.counter=t[r.layer.id]}else Xr().b[0][1]++,Xr().s[9]++,e[i]=(Xr().b[1][0]++,e[i]||(Xr().b[1][1]++,[])),Xr().s[10]++,e[i].push(r),Xr().s[11]++,t[r.layer.id]=1}),Xr().s[12]++,e}class tL extends Zn.Component{_getFeatureColor(e,t){if(Xr().f[3]++,Xr().s[13]++,e.layer.paint)Xr().b[2][1]++;else{Xr().b[2][0]++,Xr().s[14]++;return}Xr().s[15]++;try{const r=(Xr().s[16]++,e.layer.paint);return Xr().s[17]++,Xr().b[4][0]++,"text-color"in r&&(Xr().b[4][1]++,r["text-color"])?(Xr().b[3][0]++,Xr().s[18]++,String(r["text-color"])):(Xr().b[3][1]++,Xr().s[19]++,Xr().b[6][0]++,"fill-color"in r&&(Xr().b[6][1]++,r["fill-color"])?(Xr().b[5][0]++,Xr().s[20]++,String(r["fill-color"])):(Xr().b[5][1]++,Xr().s[21]++,Xr().b[8][0]++,"line-color"in r&&(Xr().b[8][1]++,r["line-color"])?(Xr().b[7][0]++,Xr().s[22]++,String(r["line-color"])):(Xr().b[7][1]++,Xr().s[23]++,Xr().b[10][0]++,"fill-extrusion-color"in r&&(Xr().b[10][1]++,r["fill-extrusion-color"])?(Xr().b[9][0]++,Xr().s[24]++,String(r["fill-extrusion-color"])):(Xr().b[9][1]++,Xr().s[25]++,"black"))))}catch(r){return Xr().s[26]++,console.warn("Unable to get feature color, error:",r),Xr().s[27]++,"black"}}render(){Xr().f[4]++;const e=(Xr().s[28]++,mH(this.props.features)),t=(Xr().s[29]++,Object.keys(e).map(r=>{Xr().f[5]++;const i=(Xr().s[30]++,e[r].map((s,l)=>{Xr().f[6]++;const o=(Xr().s[31]++,this._getFeatureColor(s,this.props.zoom));return Xr().s[32]++,Ae.jsxs("div",{className:"maputnik-popup-layer",children:[Ae.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),Ae.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Xr().f[7]++,Xr().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(Xr().b[11][0]++,s.layer.type&&(Xr().b[11][1]++,Ae.jsx(eL,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(Xr().b[12][0]++,s.counter&&(Xr().b[12][1]++,Ae.jsxs("span",{children:["  ",s.counter]})))]})]},l)}));return Xr().s[34]++,Ae.jsxs("div",{children:[Ae.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return Xr().s[35]++,Ae.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Ji(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ji=function(){return l},l}Ji();function W7(n){return Ji().f[0]++,Ji().s[0]++,Ji().b[1][0]++,typeof n>"u"||(Ji().b[1][1]++,n===null)?(Ji().b[0][0]++,Ji().s[1]++,n):(Ji().b[0][1]++,Ji().s[2]++,n instanceof Date?(Ji().b[2][0]++,Ji().s[3]++,n.toLocaleString()):(Ji().b[2][1]++,Ji().s[4]++,Ji().b[4][0]++,typeof n=="object"||(Ji().b[4][1]++,typeof n=="number")||(Ji().b[4][2]++,typeof n=="string")?(Ji().b[3][0]++,Ji().s[5]++,n.toString()):(Ji().b[3][1]++,Ji().s[6]++,n)))}function n4(n,e){return Ji().f[1]++,Ji().s[7]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{className:"maputnik-popup-table-cell",children:n}),Ae.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function gH(n,e){return Ji().f[2]++,Ji().s[8]++,Ae.jsxs(Zn.Fragment,{children:[Ae.jsx("tr",{children:Ae.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Ji().b[5][0]++,n.inspectModeCounter&&(Ji().b[5][1]++,Ae.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),n4("$type",n.geometry.type),n4("$id",W7(n.id)),Object.keys(n.properties).map(t=>{Ji().f[3]++;const r=(Ji().s[9]++,n.properties[t]);return Ji().s[10]++,n4(t,W7(r))})]},e)}function yH(n){Ji().f[4]++;const e=(Ji().s[11]++,[]);return Ji().s[12]++,n.forEach(t=>{Ji().f[5]++;const r=(Ji().s[13]++,e.findIndex(i=>(Ji().f[6]++,Ji().s[14]++,Ji().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Ji().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Ji().s[15]++,r===-1?(Ji().b[7][0]++,Ji().s[16]++,e.push(t)):(Ji().b[7][1]++,Ji().s[17]++,"inspectModeCounter"in e[r]?(Ji().b[8][0]++,Ji().s[18]++,e[r].inspectModeCounter++):(Ji().b[8][1]++,Ji().s[19]++,e[r].inspectModeCounter=2))}),Ji().s[20]++,e}class vH extends Zn.Component{render(){Ji().f[7]++;const e=(Ji().s[21]++,yH(this.props.features));return Ji().s[22]++,Ae.jsx("div",{className:"maputnik-feature-property-popup",children:Ae.jsx("table",{className:"maputnik-popup-table",children:Ae.jsx("tbody",{children:e.map(gH)})})})}}const Zv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},nL=Object.create(null);for(const n in Zv)Object.hasOwn(Zv,n)&&(nL[Zv[n]]=n);const ic={to:{},get:{}};ic.get=function(n){const e=n.slice(0,3).toLowerCase();let t,r;switch(e){case"hsl":{t=ic.get.hsl(n),r="hsl";break}case"hwb":{t=ic.get.hwb(n),r="hwb";break}default:{t=ic.get.rgb(n),r="rgb";break}}return t?{model:r,value:t}:null};ic.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/;let l=[0,0,0,1],o,p,v;if(o=n.match(t)){for(v=o[2],o=o[1],p=0;p<3;p++){const x=p*2;l[p]=Number.parseInt(o.slice(x,x+2),16)}v&&(l[3]=Number.parseInt(v,16)/255)}else if(o=n.match(e)){for(o=o[1],v=o[3],p=0;p<3;p++)l[p]=Number.parseInt(o[p]+o[p],16);v&&(l[3]=Number.parseInt(v+v,16)/255)}else if(o=n.match(r)){for(p=0;p<3;p++)l[p]=Number.parseInt(o[p+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(i)){for(p=0;p<3;p++)l[p]=Math.round(Number.parseFloat(o[p+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(s))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Zv,o[1])?(l=Zv[o[1]],l[3]=1,l):null:null;for(p=0;p<3;p++)l[p]=F0(l[p],0,255);return l[3]=F0(l[3],0,1),l};ic.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=F0(Number.parseFloat(t[2]),0,100),l=F0(Number.parseFloat(t[3]),0,100),o=F0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};ic.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=F0(Number.parseFloat(t[2]),0,100),l=F0(Number.parseFloat(t[3]),0,100),o=F0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};ic.to.hex=function(...n){return"#"+G_(n[0])+G_(n[1])+G_(n[2])+(n[3]<1?G_(Math.round(n[3]*255)):"")};ic.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};ic.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};ic.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};ic.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};ic.to.keyword=function(...n){return nL[n.slice(0,3)]};function F0(n,e,t){return Math.min(Math.max(e,n),t)}function G_(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const fC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},rL={};for(const n of Object.keys(fC))rL[fC[n]]=n;const li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Lm=(6/29)**3;for(const n of Object.keys(li)){if(!("channels"in li[n]))throw new Error("missing channels property: "+n);if(!("labels"in li[n]))throw new Error("missing channel labels property: "+n);if(li[n].labels.length!==li[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=li[n];delete li[n].channels,delete li[n].labels,Object.defineProperty(li[n],"channels",{value:e}),Object.defineProperty(li[n],"labels",{value:t})}li.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),l=s-i;let o,p;switch(s){case i:{o=0;break}case e:{o=(t-r)/l;break}case t:{o=2+(r-e)/l;break}case r:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const v=(i+s)/2;return s===i?p=0:v<=.5?p=l/(s+i):p=l/(2-s-i),[o,p*100,v*100]};li.rgb.hsv=function(n){let e,t,r,i,s;const l=n[0]/255,o=n[1]/255,p=n[2]/255,v=Math.max(l,o,p),x=v-Math.min(l,o,p),B=function(k){return(v-k)/6/x+1/2};if(x===0)i=0,s=0;else{switch(s=x/v,e=B(l),t=B(o),r=B(p),v){case l:{i=r-t;break}case o:{i=1/3+e-r;break}case p:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,v*100]};li.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=li.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};li.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,l=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0;return[s*100,l*100,o*100,i*100]};function CH(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}li.rgb.keyword=function(n){const e=rL[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(fC)){const s=fC[i],l=CH(n,s);l<t&&(t=l,r=i)}return r};li.keyword.rgb=function(n){return fC[n]};li.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,l=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,l*100]};li.rgb.lab=function(n){const e=li.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>Lm?t**(1/3):7.787*t+16/116,r=r>Lm?r**(1/3):7.787*r+16/116,i=i>Lm?i**(1/3):7.787*i+16/116;const s=116*r-16,l=500*(t-r),o=200*(r-i);return[s,l,o]};li.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const l=r<.5?r*(1+t):r+t-r*t,o=2*r-l,p=[0,0,0];for(let v=0;v<3;v++)i=e+1/3*-(v-1),i<0&&i++,i>1&&i--,6*i<1?s=o+(l-o)*6*i:2*i<1?s=l:3*i<2?s=o+(l-o)*(2/3-i)*6:s=o,p[v]=s*255;return p};li.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const l=(r+t)/2,o=r===0?2*i/(s+i):2*t/(r+t);return[e,o*100,l*100]};li.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),l=255*r*(1-t),o=255*r*(1-t*s),p=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,p,l];case 1:return[o,r,l];case 2:return[l,r,p];case 3:return[l,o,r];case 4:return[p,l,r];case 5:return[r,l,o]}};li.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,l;l=(2-t)*r;const o=(2-t)*i;return s=t*i,s/=o<=1?o:2-o,s=s||0,l/=2,[e,s*100,l*100]};li.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const l=Math.floor(6*e),o=1-r;s=6*e-l,(l&1)!==0&&(s=1-s);const p=t+s*(o-t);let v,x,B;switch(l){default:case 6:case 0:{v=o,x=p,B=t;break}case 1:{v=p,x=o,B=t;break}case 2:{v=t,x=o,B=p;break}case 3:{v=t,x=p,B=o;break}case 4:{v=p,x=t,B=o;break}case 5:{v=o,x=t,B=p;break}}return[v*255,x*255,B*255]};li.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),l=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i);return[s*255,l*255,o*255]};li.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,l;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,l=e*.0556434+t*-.2040259+r*1.0572252,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),[i*255,s*255,l*255]};li.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>Lm?e**(1/3):7.787*e+16/116,t=t>Lm?t**(1/3):7.787*t+16/116,r=r>Lm?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),l=200*(t-r);return[i,s,l]};li.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,l;s=(e+16)/116,i=t/500+s,l=s-r/200;const o=s**3,p=i**3,v=l**3;return s=o>Lm?o:(s-16/116)/7.787,i=p>Lm?p:(i-16/116)/7.787,l=v>Lm?v:(l-16/116)/7.787,i*=95.047,s*=100,l*=108.883,[i,s,l]};li.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const l=Math.sqrt(t*t+r*r);return[e,l,i]};li.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),l=t*Math.sin(i);return[e,s,l]};li.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?li.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let l=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(l+=60),l};li.hsv.ansi16=function(n){return li.rgb.ansi16(li.hsv.rgb(n),n[2])};li.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};li.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};li.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};li.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};li.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,l=r&255;return[i,s,l]};li.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),l=i-s;let o;const p=l<1?s/(1-l):0;return l<=0?o=0:i===e?o=(t-r)/l%6:i===t?o=2+(r-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,p*100]};li.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};li.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};li.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,l=s%1,o=1-l;let p=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=l,i[2]=0;break}case 1:{i[0]=o,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=l;break}case 3:{i[0]=0,i[1]=o,i[2]=1;break}case 4:{i[0]=l,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=o}return p=(1-t)*r,[(t*i[0]+p)*255,(t*i[1]+p)*255,(t*i[2]+p)*255]};li.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};li.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};li.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};li.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};li.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};li.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};li.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};li.gray.hsl=function(n){return[0,0,n[0]]};li.gray.hsv=li.gray.hsl;li.gray.hwb=function(n){return[0,100,n[0]]};li.gray.cmyk=function(n){return[0,0,0,n[0]]};li.gray.lab=function(n){return[n[0],0,0]};li.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};li.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function _H(){const n={},e=Object.keys(li);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function bH(n){const e=_H(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(li[r]);for(let{length:s}=i,l=0;l<s;l++){const o=i[l],p=e[o];p.distance===-1&&(p.distance=e[r].distance+1,p.parent=r,t.unshift(o))}}return e}function xH(n,e){return function(t){return e(n(t))}}function MH(n,e){const t=[e[n].parent,n];let r=li[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=xH(li[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function wH(n){const e=bH(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const l=r[s];e[l].parent!==null&&(t[l]=MH(l,e))}return t}const vc={},SH=Object.keys(li);function EH(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function BH(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,l=0;l<s;l++)i[l]=Math.round(i[l]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of SH){vc[n]={},Object.defineProperty(vc[n],"channels",{value:li[n].channels}),Object.defineProperty(vc[n],"labels",{value:li[n].labels});const e=wH(n),t=Object.keys(e);for(const r of t){const i=e[r];vc[n][r]=BH(i),vc[n][r].raw=EH(i)}}const iL=["keyword","gray","hex"],s6={};for(const n of Object.keys(vc))s6[[...vc[n].labels].sort().join("")]=n;const Xv={};function Fu(n,e){if(!(this instanceof Fu))return new Fu(n,e);if(e&&e in iL&&(e=null),e&&!(e in vc))throw new Error("Unknown model: "+e);let t,r;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Fu)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const i=ic.get(n);if(i===null)throw new Error("Unable to parse color from string: "+n);this.model=i.model,r=vc[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(n.length>0){this.model=e||"rgb",r=vc[this.model].channels;const i=Array.prototype.slice.call(n,0,r);this.color=a6(i,r),this.valpha=typeof n[r]=="number"?n[r]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(n);"alpha"in n&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const s=i.sort().join("");if(!(s in s6))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=s6[s];const{labels:l}=vc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=a6(o)}if(Xv[this.model])for(r=vc[this.model].channels,t=0;t<r;t++){const i=Xv[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Fu.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in ic.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return ic.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return ic.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=vc[this.model],{labels:t}=vc[this.model];for(let r=0;r<e;r++)n[t[r]]=this.color[r];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Fu([...this.color.map(IH(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Fu([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:qA("rgb",0,ec(255)),green:qA("rgb",1,ec(255)),blue:qA("rgb",2,ec(255)),hue:qA(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:qA("hsl",1,ec(100)),lightness:qA("hsl",2,ec(100)),saturationv:qA("hsv",1,ec(100)),value:qA("hsv",2,ec(100)),chroma:qA("hcg",1,ec(100)),gray:qA("hcg",2,ec(100)),white:qA("hwb",1,ec(100)),wblack:qA("hwb",2,ec(100)),cyan:qA("cmyk",0,ec(100)),magenta:qA("cmyk",1,ec(100)),yellow:qA("cmyk",2,ec(100)),black:qA("cmyk",3,ec(100)),x:qA("xyz",0,ec(95.047)),y:qA("xyz",1,ec(100)),z:qA("xyz",2,ec(108.833)),l:qA("lab",0,ec(100)),a:qA("lab",1),b:qA("lab",2),keyword(n){return n!==void 0?new Fu(n):vc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Fu(n):ic.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Fu(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),ic.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,r]of n.entries()){const i=r/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Fu.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,l=t.alpha()-r.alpha(),o=((s*l===-1?s:(s+l)/(1+s*l))+1)/2,p=1-o;return Fu.rgb(o*t.red()+p*r.red(),o*t.green()+p*r.green(),o*t.blue()+p*r.blue(),t.alpha()*i+r.alpha()*(1-i))}};for(const n of Object.keys(vc)){if(iL.includes(n))continue;const{channels:e}=vc[n];Fu.prototype[n]=function(...t){return this.model===n?new Fu(this):t.length>0?new Fu(t,n):new Fu([...TH(vc[this.model][n].raw(this.color)),this.valpha],n)},Fu[n]=function(...t){let r=t[0];return typeof r=="number"&&(r=a6(t,e)),new Fu(r,n)}}function OH(n,e){return Number(n.toFixed(e))}function IH(n){return function(e){return OH(e,n)}}function qA(n,e,t){n=Array.isArray(n)?n:[n];for(const r of n)(Xv[r]||(Xv[r]=[]))[e]=t;return n=n[0],function(r){let i;return r!==void 0?(t&&(r=t(r)),i=this[n](),i.color[e]=r,i):(i=this[n]().color[e],t&&(i=t(i)),i)}}function ec(n){return function(e){return Math.max(0,Math.min(n,e))}}function TH(n){return Array.isArray(n)?n:[n]}function a6(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function Hs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hs=function(){return l},l}Hs();class kH{constructor(){Pn(this,"_map",(Hs().s[0]++,void 0));Pn(this,"_container",(Hs().s[1]++,void 0));Pn(this,"_textEl",(Hs().s[2]++,null));Hs().f[0]++}onAdd(e){return Hs().f[1]++,Hs().s[3]++,this._map=e,Hs().s[4]++,this._container=document.createElement("div"),Hs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Hs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Hs().s[7]++,this.setLabel("Zoom:"),Hs().s[8]++,this.addEventListeners(),Hs().s[9]++,this._container}updateZoomLevel(){Hs().f[2]++,Hs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Hs().f[3]++,Hs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Hs().s[12]++,this._textEl=this._container.querySelector("span"),Hs().s[13]++,this.updateZoomLevel()}addEventListeners(){Hs().f[4]++,Hs().s[14]++,this._map.on("render",()=>(Hs().f[5]++,Hs().s[15]++,this.updateZoomLevel())),Hs().s[16]++,this._map.on("zoomIn",()=>(Hs().f[6]++,Hs().s[17]++,this.updateZoomLevel())),Hs().s[18]++,this._map.on("zoomOut",()=>(Hs().f[7]++,Hs().s[19]++,this.updateZoomLevel()))}onRemove(){Hs().f[8]++,Hs().s[20]++,this._container.parentNode.removeChild(this._container),Hs().s[21]++,this._map=void 0}}function l6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function A6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function u6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function PH(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const p=s(l);r.push(l6(p.circle,l)),i.push(u6(p.line,l)),t.push(A6(p.polygon,p.polygonOutline,l))}else o.forEach(p=>{const v=s(p);r.push(l6(v.circle,l,p)),i.push(u6(v.line,l,p)),t.push(A6(v.polygon,v.polygonOutline,l,p))})}),t.concat(i).concat(r)}function KH(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const r4={polygonLayer:A6,lineLayer:u6,circleLayer:l6,generateInspectStyle:KH,generateColoredLayers:PH};function yo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yo=function(){return l},l}yo();function i4(n,e){return yo().f[0]++,yo().s[0]++,n.type==="circle"?(yo().b[0][0]++,yo().s[1]++,n.paint["circle-radius"]=3):(yo().b[0][1]++,yo().s[2]++,n.type==="line"?(yo().b[1][0]++,yo().s[3]++,n.paint["line-width"]=2):yo().b[1][1]++),yo().s[4]++,"filter"in e?(yo().b[2][0]++,yo().s[5]++,n.filter=e.filter):(yo().b[2][1]++,yo().s[6]++,delete n.filter),yo().s[7]++,n.id=n.id+"_highlight",yo().s[8]++,n}function RH(n){if(yo().f[1]++,yo().s[9]++,yo().b[4][0]++,!n||(yo().b[4][1]++,n.type==="background")||(yo().b[4][2]++,n.type==="raster"))return yo().b[3][0]++,yo().s[10]++,null;yo().b[3][1]++;const e=(yo().s[11]++,yo().b[5][0]++,n["source-layer"]||(yo().b[5][1]++,"")),t=(yo().s[12]++,XF.brightColor(e,1));return yo().s[13]++,yo().b[7][0]++,n.type==="fill"||(yo().b[7][1]++,n.type==="fill-extrusion")?(yo().b[6][0]++,yo().s[14]++,i4(r4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(yo().b[6][1]++,yo().s[15]++,yo().b[9][0]++,n.type==="symbol"||(yo().b[9][1]++,n.type==="circle")?(yo().b[8][0]++,yo().s[16]++,i4(r4.circleLayer(t,n.source,n["source-layer"]),n)):(yo().b[8][1]++,yo().s[17]++,n.type==="line"?(yo().b[10][0]++,yo().s[18]++,i4(r4.lineLayer(t,n.source,n["source-layer"]),n)):(yo().b[10][1]++,yo().s[19]++,null)))}function kB(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return kB=function(){return l},l}kB();kB().s[0]++;$1.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function o4(n,e,t,r){function i(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function o(x){try{v(r.next(x))}catch(B){l(B)}}function p(x){try{v(r.throw(x))}catch(B){l(B)}}function v(x){x.done?s(x.value):i(x.value).then(o,p)}v((r=r.apply(n,e||[])).next())})}var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function fx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s4,j7;function oL(){if(j7)return s4;j7=1,s4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return s4}var a4={exports:{}},G7;function DH(){return G7||(G7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var l=0,o=[],p=i.length,v=0,x=0,B=s.pre||"",k=s.post||"",P=s.caseSensitive&&i||i.toLowerCase(),D;r=s.caseSensitive&&r||r.toLowerCase();for(var N=0;N<p;N++)D=i[N],P[N]===r[l]?(D=B+D+k,l+=1,x+=1+x):x=0,v+=x,o[o.length]=D;return l===r.length?(v=P===r?1/0:v,{rendered:o.join(""),score:v}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(l,o,p,v){var x=o;s.extract&&(x=s.extract(o));var B=t.match(r,x,s);return B!=null&&(l[l.length]={string:B.rendered,score:B.score,index:p,original:o}),l},[]).sort(function(l,o){var p=o.score-l.score;return p||l.index-o.index}))}})()}(a4)),a4.exports}var l4,Q7;function FH(){if(Q7)return l4;Q7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},l4=n,l4}var A4,Y7;function LH(){if(Y7)return A4;Y7=1;var n=oL(),e=DH(),t=FH(),r=function(i,s,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var l=0;l<s.length&&(this.list.add(s[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,s),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var p=this.render(o);return{original:o,string:p}}).bind(this)),i(l)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var l=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(l),p=o.lastIndexOf(this.query);p>-1;){var v=p+this.query.length;l=l.slice(0,p)+"<strong>"+l.slice(p,v)+"</strong>"+l.slice(v),p=o.slice(0,p).lastIndexOf(this.query)}return l},r.prototype.renderError=function(i){this.list.drawError(i)},A4=r,A4}var u4,q7;function UH(){if(q7)return u4;q7=1;var n=LH();return u4=n,typeof window<"u"&&(window.Suggestions=n),u4}var zH=UH(),NH=fx(zH),Sb={exports:{}},WH=Sb.exports,V7;function jH(){return V7||(V7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(WH,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(p){return p.match(t)||[]}function i(p){return r(p).filter(function(v,x){return v&&x})}function s(p){return p=r(p),{language:p[1]||e,extlang:p[2]||e,script:p[3]||e,region:p[4]||e}}function l(p,v,x){Object.defineProperty(p,v,{value:x,enumerable:!0})}function o(p,v,x){function B(k){return r(k)[p]||e}l(B,"pattern",v),l(s,x,B)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(s,"split",i),s})}(Sb)),Sb.exports}var GH=jH(),QH=fx(GH),c4,H7;function YH(){if(H7)return c4;H7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,p=typeof Q_=="object"&&Q_&&Q_.Object===Object&&Q_,v=typeof self=="object"&&self&&self.Object===Object&&self,x=p||v||Function("return this")(),B=Object.prototype,k=B.toString,P=Math.max,D=Math.min,N=function(){return x.Date.now()};function W(q,te,G){var oe,fe,he,Me,me,pe,qe=0,Se=!1,vt=!1,Je=!0;if(typeof q!="function")throw new TypeError(n);te=ne(te)||0,V(G)&&(Se=!!G.leading,vt="maxWait"in G,he=vt?P(ne(G.maxWait)||0,te):he,Je="trailing"in G?!!G.trailing:Je);function Ke(kt){var Te=oe,Re=fe;return oe=fe=void 0,qe=kt,Me=q.apply(Re,Te),Me}function je(kt){return qe=kt,me=setTimeout(Xe,te),Se?Ke(kt):Me}function Pe(kt){var Te=kt-pe,Re=kt-qe,Ue=te-Te;return vt?D(Ue,he-Re):Ue}function Le(kt){var Te=kt-pe,Re=kt-qe;return pe===void 0||Te>=te||Te<0||vt&&Re>=he}function Xe(){var kt=N();if(Le(kt))return Ct(kt);me=setTimeout(Xe,Pe(kt))}function Ct(kt){return me=void 0,Je&&oe?Ke(kt):(oe=fe=void 0,Me)}function Gt(){me!==void 0&&clearTimeout(me),qe=0,oe=pe=fe=me=void 0}function mt(){return me===void 0?Me:Ct(N())}function Ut(){var kt=N(),Te=Le(kt);if(oe=arguments,fe=this,pe=kt,Te){if(me===void 0)return je(pe);if(vt)return me=setTimeout(Xe,te),Ke(pe)}return me===void 0&&(me=setTimeout(Xe,te)),Me}return Ut.cancel=Gt,Ut.flush=mt,Ut}function V(q){var te=typeof q;return!!q&&(te=="object"||te=="function")}function $(q){return!!q&&typeof q=="object"}function ie(q){return typeof q=="symbol"||$(q)&&k.call(q)==t}function ne(q){if(typeof q=="number")return q;if(ie(q))return e;if(V(q)){var te=typeof q.valueOf=="function"?q.valueOf():q;q=V(te)?te+"":te}if(typeof q!="string")return q===0?q:+q;q=q.replace(r,"");var G=s.test(q);return G||l.test(q)?o(q.slice(2),G?2:8):i.test(q)?e:+q}return c4=W,c4}var qH=YH(),VH=fx(qH),HH=oL(),lp=fx(HH),Y_={exports:{}},$7;function $H(){if($7)return Y_.exports;$7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(q,te,G){return Function.prototype.apply.call(q,te,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:t=function(q){return Object.getOwnPropertyNames(q)};function r(ne){console&&console.warn&&console.warn(ne)}var i=Number.isNaN||function(q){return q!==q};function s(){s.init.call(this)}Y_.exports=s,Y_.exports.once=V,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function o(ne){if(typeof ne!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(ne){if(typeof ne!="number"||ne<0||i(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");l=ne}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||i(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function p(ne){return ne._maxListeners===void 0?s.defaultMaxListeners:ne._maxListeners}s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(q){for(var te=[],G=1;G<arguments.length;G++)te.push(arguments[G]);var oe=q==="error",fe=this._events;if(fe!==void 0)oe=oe&&fe.error===void 0;else if(!oe)return!1;if(oe){var he;if(te.length>0&&(he=te[0]),he instanceof Error)throw he;var Me=new Error("Unhandled error."+(he?" ("+he.message+")":""));throw Me.context=he,Me}var me=fe[q];if(me===void 0)return!1;if(typeof me=="function")e(me,this,te);else for(var pe=me.length,qe=D(me,pe),G=0;G<pe;++G)e(qe[G],this,te);return!0};function v(ne,q,te,G){var oe,fe,he;if(o(te),fe=ne._events,fe===void 0?(fe=ne._events=Object.create(null),ne._eventsCount=0):(fe.newListener!==void 0&&(ne.emit("newListener",q,te.listener?te.listener:te),fe=ne._events),he=fe[q]),he===void 0)he=fe[q]=te,++ne._eventsCount;else if(typeof he=="function"?he=fe[q]=G?[te,he]:[he,te]:G?he.unshift(te):he.push(te),oe=p(ne),oe>0&&he.length>oe&&!he.warned){he.warned=!0;var Me=new Error("Possible EventEmitter memory leak detected. "+he.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");Me.name="MaxListenersExceededWarning",Me.emitter=ne,Me.type=q,Me.count=he.length,r(Me)}return ne}s.prototype.addListener=function(q,te){return v(this,q,te,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(q,te){return v(this,q,te,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(ne,q,te){var G={fired:!1,wrapFn:void 0,target:ne,type:q,listener:te},oe=x.bind(G);return oe.listener=te,G.wrapFn=oe,oe}s.prototype.once=function(q,te){return o(te),this.on(q,B(this,q,te)),this},s.prototype.prependOnceListener=function(q,te){return o(te),this.prependListener(q,B(this,q,te)),this},s.prototype.removeListener=function(q,te){var G,oe,fe,he,Me;if(o(te),oe=this._events,oe===void 0)return this;if(G=oe[q],G===void 0)return this;if(G===te||G.listener===te)--this._eventsCount===0?this._events=Object.create(null):(delete oe[q],oe.removeListener&&this.emit("removeListener",q,G.listener||te));else if(typeof G!="function"){for(fe=-1,he=G.length-1;he>=0;he--)if(G[he]===te||G[he].listener===te){Me=G[he].listener,fe=he;break}if(fe<0)return this;fe===0?G.shift():N(G,fe),G.length===1&&(oe[q]=G[0]),oe.removeListener!==void 0&&this.emit("removeListener",q,Me||te)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(q){var te,G,oe;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[q]),this;if(arguments.length===0){var fe=Object.keys(G),he;for(oe=0;oe<fe.length;++oe)he=fe[oe],he!=="removeListener"&&this.removeAllListeners(he);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(te=G[q],typeof te=="function")this.removeListener(q,te);else if(te!==void 0)for(oe=te.length-1;oe>=0;oe--)this.removeListener(q,te[oe]);return this};function k(ne,q,te){var G=ne._events;if(G===void 0)return[];var oe=G[q];return oe===void 0?[]:typeof oe=="function"?te?[oe.listener||oe]:[oe]:te?W(oe):D(oe,oe.length)}s.prototype.listeners=function(q){return k(this,q,!0)},s.prototype.rawListeners=function(q){return k(this,q,!1)},s.listenerCount=function(ne,q){return typeof ne.listenerCount=="function"?ne.listenerCount(q):P.call(ne,q)},s.prototype.listenerCount=P;function P(ne){var q=this._events;if(q!==void 0){var te=q[ne];if(typeof te=="function")return 1;if(te!==void 0)return te.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function D(ne,q){for(var te=new Array(q),G=0;G<q;++G)te[G]=ne[G];return te}function N(ne,q){for(;q+1<ne.length;q++)ne[q]=ne[q+1];ne.pop()}function W(ne){for(var q=new Array(ne.length),te=0;te<q.length;++te)q[te]=ne[te].listener||ne[te];return q}function V(ne,q){return new Promise(function(te,G){function oe(he){ne.removeListener(q,fe),G(he)}function fe(){typeof ne.removeListener=="function"&&ne.removeListener("error",oe),te([].slice.call(arguments))}ie(ne,q,fe,{once:!0}),q!=="error"&&$(ne,oe,{once:!0})})}function $(ne,q,te){typeof ne.on=="function"&&ie(ne,"error",q,te)}function ie(ne,q,te,G){if(typeof ne.on=="function")G.once?ne.once(q,te):ne.on(q,te);else if(typeof ne.addEventListener=="function")ne.addEventListener(q,function oe(fe){G.once&&ne.removeEventListener(q,oe),te(fe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne)}return Y_.exports}var ZH=$H();const Z7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},XH={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},JH={en:"No results found",de:"Keine Ergebnisse gefunden"},e$={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen"};var fv={placeholder:XH,errorNoResults:JH,errorConnectionFailed:e$};const t$=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class n${constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,l=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,p=s.substring(0,l),v=s.substring(l,l+o),x=s.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+p+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+v+"</span>"+x+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new ZH.EventEmitter,this.options=lp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",VH(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new NH(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,l=s.firstChild;r.appendChild(l)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=this._inputEl.value;if(!s)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&Z7[e.properties.short_code])t=lp({},this.options.flyTo),this._map&&this._map.fitBounds(Z7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=lp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=lp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return o4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),l=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const p=yield l;yield this._handleGeocodeResponse(p,s,t,r,o)}catch(p){this._handleGeocodeErrorResponse(p,o)}return l})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&t$.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return o4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?s.concat(l.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const v=yield o;l.features=l.features?v.concat(l.features):v}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let p=[];"suggestions"in l?p=l.suggestions:"place"in l?p=[l.place]:p=l.features,p.length?(this._clearEl.style.display="block",this._typeahead.update(p),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return o4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=QH.language(this.options.language.split(",")[0]);return this.options.language&&(fv!=null&&fv[e][t])?fv[e][t]:fv[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=lp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=lp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const l=lp({},{},this.options.popup);i=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=lp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=lp(r,{element:s}));const l=new this._maplibregl.Marker(lp({},r,{element:s}));let o;if(this.options.popup){const v=lp({},{},this.options.popup);o=new this._maplibregl.Popup(v).setHTML(this.options.popupRender(i))}i.center?(l.setLngLat(i.center).addTo(this._map),this.options.popup&&l.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(l.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function En(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return En=function(){return l},l}En();function X7(n,e){return En().f[0]++,En().s[0]++,fV.render(n,e),En().s[1]++,e}function r$(n,e,t){En().f[1]++;const r=(En().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(En().s[3]++,RH(t));En().s[4]++,i?(En().b[0][0]++,En().s[5]++,e.push(i)):En().b[0][1]++;const s=(En().s[6]++,{});En().s[7]++,Object.keys(n.sources).forEach(o=>{En().f[2]++;const p=(En().s[8]++,n.sources[o]);En().s[9]++,En().b[2][0]++,p.type!=="raster"&&(En().b[2][1]++,p.type!=="raster-dem")?(En().b[1][0]++,En().s[10]++,s[o]=p):En().b[1][1]++});const l=(En().s[11]++,{...n,sources:s,layers:[r].concat(e)});return En().s[12]++,l}class sL extends Zn.Component{constructor(t){En().f[7]++,En().s[15]++;super(t);Pn(this,"container",(En().s[14]++,null));Pn(this,"onLayerSelectById",(En().s[73]++,t=>{En().f[21]++;const r=(En().s[74]++,this.props.mapStyle.layers.findIndex(i=>(En().f[22]++,En().s[75]++,i.id===t)));En().s[76]++,this.props.onLayerSelect(r)}));En().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},En().s[17]++,qc.on("languageChanged",()=>{En().f[8]++,En().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){En().f[9]++;let i=(En().s[19]++,!1);En().s[20]++;try{En().s[21]++,i=(En().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(En().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return En().s[22]++,i}componentDidUpdate(){var i,s,l;En().f[10]++;const t=(En().s[23]++,this.state.map),r=(En().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));En().s[25]++,t?(En().b[4][0]++,En().s[26]++,t.setStyle(r,{diff:!0}),En().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,En().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,En().s[29]++,t.showOverdrawInspector=(l=this.props.options)==null?void 0:l.showOverdrawInspector):En().b[4][1]++,En().s[30]++,En().b[6][0]++,this.state.inspect&&(En().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(En().b[5][0]++,En().s[31]++,this.state.inspect.toggleInspector()):En().b[5][1]++,En().s[32]++,En().b[8][0]++,this.state.inspect&&(En().b[8][1]++,this.props.inspectModeEnabled)?(En().b[7][0]++,En().s[33]++,this.state.inspect.setOriginalStyle(r),En().s[34]++,setTimeout(()=>{En().f[11]++,En().s[35]++,this.state.inspect.render()},500)):En().b[7][1]++}componentDidMount(){En().f[12]++;const t=(En().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(En().s[37]++,new aQ({metadata:!0}));En().s[38]++,$1.addProtocol("pmtiles",r.tile);const i=(En().s[39]++,new $1.Map(t));En().s[40]++;const s=()=>{En().f[13]++;const B=(En().s[41]++,i.getCenter()),k=(En().s[42]++,i.getZoom());En().s[43]++,this.props.onChange({center:B,zoom:k})};En().s[44]++,s(),En().s[45]++,i.showTileBoundaries=t.showTileBoundaries,En().s[46]++,i.showCollisionBoxes=t.showCollisionBoxes,En().s[47]++,i.showOverdrawInspector=t.showOverdrawInspector;const l=(En().s[48]++,this.initGeocoder(i)),o=(En().s[49]++,new kH);En().s[50]++,i.addControl(o,"top-right");const p=(En().s[51]++,new $1.NavigationControl({visualizePitch:!0}));En().s[52]++,i.addControl(p,"top-right");const v=(En().s[53]++,document.createElement("div")),x=(En().s[54]++,new TB({popup:new $1.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(B,k)=>(En().f[14]++,En().s[55]++,Fu(XF.brightColor(B,k)).desaturate(.5).string()),buildInspectStyle:(B,k)=>(En().f[15]++,En().s[56]++,r$(B,k,this.props.highlightedLayer)),renderPopup:B=>(En().f[16]++,En().s[57]++,this.props.inspectModeEnabled?(En().b[9][0]++,En().s[58]++,X7(Ae.jsx(vH,{features:B}),v)):(En().b[9][1]++,En().s[59]++,X7(Ae.jsx(tL,{features:B,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),v)))}));En().s[60]++,i.addControl(x),En().s[61]++,i.on("style.load",()=>{En().f[17]++,En().s[62]++,this.setState({map:i,inspect:x,geocoder:l,zoomControl:o,zoom:i.getZoom()})}),En().s[63]++,i.on("data",B=>{if(En().f[18]++,En().s[64]++,B.dataType!=="tile"){En().b[10][0]++,En().s[65]++;return}else En().b[10][1]++;En().s[66]++,this.props.onDataChange({map:this.state.map})}),En().s[67]++,i.on("error",B=>{En().f[19]++,En().s[68]++,console.log("ERROR",B)}),En().s[69]++,i.on("zoom",B=>{En().f[20]++,En().s[70]++,this.setState({zoom:i.getZoom()})}),En().s[71]++,i.on("dragend",s),En().s[72]++,i.on("zoomend",s)}initGeocoder(t){En().f[23]++;const r=(En().s[77]++,{forwardGeocode:async s=>{En().f[24]++;const l=(En().s[78]++,[]);En().s[79]++;try{const o=(En().s[80]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),p=(En().s[81]++,await fetch(o)),v=(En().s[82]++,await p.json());En().s[83]++;for(const x of v.features){const B=(En().s[84]++,[x.bbox[0]+(x.bbox[2]-x.bbox[0])/2,x.bbox[1]+(x.bbox[3]-x.bbox[1])/2]),k=(En().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:B},place_name:x.properties.display_name,properties:x.properties,text:x.properties.display_name,place_type:["place"],center:B});En().s[86]++,l.push(k)}}catch(o){En().s[87]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return En().s[88]++,{features:l}}}),i=(En().s[89]++,new n$(r,{placeholder:this.props.t("Search"),maplibregl:$1}));return En().s[90]++,t.addControl(i,"top-left"),En().s[91]++,i}render(){var r,i;En().f[25]++;const t=(En().s[92]++,this.props.t);return En().s[93]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),En().s[94]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),En().s[95]++,Ae.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(En().f[26]++,En().s[96]++,this.container=s),"data-wd-key":"maplibre:map"})}}Pn(sL,"defaultProps",(En().s[13]++,{onMapLoaded:()=>{En().f[3]++},onDataChange:()=>{En().f[4]++},onLayerSelect:()=>{En().f[5]++},onChange:()=>{En().f[6]++},options:{}}));const i$=(En().s[97]++,Ns()(sL));var J7={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},pv=" ",eI=/(italic|oblique)$/i,tI={};function c6(n,e,t){var r=tI[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",l=[],o,p,v=0,x=n.length;v<x;++v){var B=n[v],k=B.split(" "),P=k[k.length-1].toLowerCase();P=="normal"||P=="italic"||P=="oblique"?(s=p?s:P,p=!0,k.pop(),P=k[k.length-1].toLowerCase()):eI.test(P)&&(P=P.replace(eI,""),s=p?s:k[k.length-1].replace(P,""),p=!0);for(var D in J7){var N=k.length>1?k[k.length-2].toLowerCase():"";if(P==D||P==D.replace("-","")||N+"-"+P==D){i=o?i:J7[D],k.pop(),N&&D.startsWith(N)&&k.pop();break}}!o&&typeof P=="number"&&(i=P,o=!0);var W=k.join(pv).replace("Klokantech Noto Sans","Noto Sans");W.indexOf(pv)!==-1&&(W='"'+W+'"'),l.push(W)}r=tI[n]=[s,i,l]}return r[0]+pv+r[1]+pv+e+"px"+(t?"/"+t:"")+pv+r[2]}function o$(n,e,t){let r,i;t=t||rm;let s=0,l=n.length,o=!1;for(;s<l;)r=s+(l-s>>1),i=+t(n[r],e),i<0?s=r+1:(l=r,o=!i);return o?s:~s}function rm(n,e){return n>e?1:n<e?-1:0}function s$(n,e){return n<e?1:n>e?-1:0}function px(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function a$(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function im(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Q0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function l$(n,e,t){const r=e||rm;return n.every(function(i,s){if(s===0)return!0;const l=r(n[s-1],i);return!(l>0||l===0)})}function pC(){return!0}function mx(){return!1}function mC(){}function aL(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!Q0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function wy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}const Sy={PROPERTYCHANGE:"propertychange"},co={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class NC{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function WC(n){for(const e in n)delete n[e]}function j0(n){let e;for(e in n)return!1;return!e}class Sp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class jC extends NC{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Sp(e):e;s.target||(s.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,o[r]=0),++l[r];let p;for(let v=0,x=i.length;v<x;++v)if("handleEvent"in i[v]?p=i[v].handleEvent(s):p=i[v].call(this,s),p===!1||s.propagationStopped){p=!1;break}if(--l[r]===0){let v=o[r];for(delete o[r];v--;)this.removeEventListener(r,mC);delete l[r]}return p}disposeInternal(){this.listeners_&&WC(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=mC,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Ks(n,e,t,r,i){if(i){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function r2(n,e,t,r){return Ks(n,e,t,r,!0)}function hl(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),WC(n))}class GC extends jC{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(co.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ks(this,e[s],t);return i}return Ks(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=r2(this,e[s],t)}else r=r2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)A$(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}GC.prototype.on;GC.prototype.once;GC.prototype.un;function A$(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)hl(n[e]);else hl(n)}function vo(){throw new Error("Unimplemented abstract method.")}let u$=0;function Uo(n){return n.ol_uid||(n.ol_uid=String(++u$))}class nI extends Sp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Ep extends GC{constructor(e){super(),this.on,this.once,this.un,Uo(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new nI(r,e,t)),r=Sy.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new nI(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],j0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}function oa(n,e){if(!n)throw new Error(e)}class gx extends Ep{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new gx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(hl(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ks(e,co.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?c$(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function c$(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(oa(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const gc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function h6(n){const e=Lf();for(let t=0,r=n.length;t<r;++t)Jv(e,n[t]);return e}function h$(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),l=Math.max.apply(null,e);return Wm(r,i,s,l,t)}function L0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function lL(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function zg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Pg(n,e){return PB(n,e[0],e[1])}function $p(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function PB(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function d6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=e[0],o=e[1];let p=gc.UNKNOWN;return l<t?p=p|gc.LEFT:l>i&&(p=p|gc.RIGHT),o<r?p=p|gc.BELOW:o>s&&(p=p|gc.ABOVE),p===gc.UNKNOWN&&(p=gc.INTERSECTING),p}function Lf(){return[1/0,1/0,-1/0,-1/0]}function Wm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function zy(n){return Wm(1/0,1/0,-1/0,-1/0,n)}function AL(n,e){const t=n[0],r=n[1];return Wm(t,r,t,r,e)}function KB(n,e,t,r,i){const s=zy(i);return cL(s,n,e,t,r)}function jm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function uL(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Jv(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function cL(n,e,t,r,i){for(;t<r;t+=i)d$(n,e[t],e[t+1]);return n}function d$(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function hL(n,e){let t;return t=e(yx(n)),t||(t=e(vx(n)),t)||(t=e(Cx(n)),t)||(t=e(Ym(n)),t)?t:!1}function f6(n){let e=0;return Ng(n)||(e=zs(n)*zu(n)),e}function yx(n){return[n[0],n[1]]}function vx(n){return[n[2],n[1]]}function Uf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function f$(n,e){let t;if(e==="bottom-left")t=yx(n);else if(e==="bottom-right")t=vx(n);else if(e==="top-left")t=Ym(n);else if(e==="top-right")t=Cx(n);else throw new Error("Invalid corner");return t}function i2(n,e,t,r,i){const[s,l,o,p,v,x,B,k]=dL(n,e,t,r);return Wm(Math.min(s,o,v,B),Math.min(l,p,x,k),Math.max(s,o,v,B),Math.max(l,p,x,k),i)}function dL(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,l=Math.cos(t),o=Math.sin(t),p=i*l,v=i*o,x=s*l,B=s*o,k=n[0],P=n[1];return[k-p+B,P-v-x,k-p-B,P-v+x,k+p-B,P+v+x,k+p+B,P+v-x,k-p+B,P-v-x]}function zu(n){return n[3]-n[1]}function _p(n,e,t){const r=t||Lf();return $A(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):zy(r),r}function Ym(n){return[n[0],n[3]]}function Cx(n){return[n[2],n[3]]}function zs(n){return n[2]-n[0]}function $A(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Ng(n){return n[2]<n[0]||n[3]<n[1]}function p$(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function m$(n,e,t){let r=!1;const i=d6(n,e),s=d6(n,t);if(i===gc.INTERSECTING||s===gc.INTERSECTING)r=!0;else{const l=n[0],o=n[1],p=n[2],v=n[3],x=e[0],B=e[1],k=t[0],P=t[1],D=(P-B)/(k-x);let N,W;s&gc.ABOVE&&!(i&gc.ABOVE)&&(N=k-(P-v)/D,r=N>=l&&N<=p),!r&&s&gc.RIGHT&&!(i&gc.RIGHT)&&(W=P-(k-p)*D,r=W>=o&&W<=v),!r&&s&gc.BELOW&&!(i&gc.BELOW)&&(N=k-(P-o)/D,r=N>=l&&N<=p),!r&&s&gc.LEFT&&!(i&gc.LEFT)&&(W=P-(k-l)*D,r=W>=o&&W<=v)}return r}function g$(n,e,t,r){if(Ng(n))return zy(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],l=[];for(let o=0,p=i.length;o<p;o+=2)s.push(i[o]),l.push(i[o+1]);return h$(s,l,t)}function fL(n,e){const t=e.getExtent(),r=Uf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=zs(t),l=Math.floor((r[0]-t[0])/i)*i;n[0]-=l,n[2]-=l}return n}function pL(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];fL(n,e);const i=zs(r);if(zs(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function mL(n,e,t,r){const i=[];let s=Lf();for(let l=0,o=t.length;l<o;++l){const p=t[l];s=KB(n,e,p[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=p[p.length-1]}return i}function y$(n,e,t,r,i){return!hL(i,function(l){return!yg(n,e,t,r,l[0],l[1])})}function yg(n,e,t,r,i,s){let l=0,o=n[t-r],p=n[t-r+1];for(;e<t;e+=r){const v=n[e],x=n[e+1];p<=s?x>s&&(v-o)*(s-p)-(i-o)*(x-p)>0&&l++:x<=s&&(v-o)*(s-p)-(i-o)*(x-p)<0&&l--,o=v,p=x}return l!==0}function RB(n,e,t,r,i,s){if(t.length===0||!yg(n,e,t[0],r,i,s))return!1;for(let l=1,o=t.length;l<o;++l)if(yg(n,t[l-1],t[l],r,i,s))return!1;return!0}function v$(n,e,t,r,i,s){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const p=t[l];if(RB(n,e,p,r,i,s))return!0;e=p[p.length-1]}return!1}function DB(n,e,t,r,i,s,l){let o,p,v,x,B,k,P;const D=i[s+1],N=[];for(let $=0,ie=t.length;$<ie;++$){const ne=t[$];for(x=n[ne-r],k=n[ne-r+1],o=e;o<ne;o+=r)B=n[o],P=n[o+1],(D<=k&&P<=D||k<=D&&D<=P)&&(v=(D-k)/(P-k)*(B-x)+x,N.push(v)),x=B,k=P}let W=NaN,V=-1/0;for(N.sort(rm),x=N[0],o=1,p=N.length;o<p;++o){B=N[o];const $=Math.abs(B-x);$>V&&(v=(x+B)/2,RB(n,e,t,r,v,D)&&(W=v,V=$)),x=B}return isNaN(W)&&(W=i[s]),l?(l.push(W,D,V),l):[W,D,V]}function gL(n,e,t,r,i){let s=[];for(let l=0,o=t.length;l<o;++l){const p=t[l];s=DB(n,e,p,r,i,2*l,s),e=p[p.length-1]}return s}function xA(n,e,t){return Math.min(Math.max(n,e),t)}function C$(n,e,t,r,i,s){const l=i-t,o=s-r;if(l!==0||o!==0){const p=((n-t)*l+(e-r)*o)/(l*l+o*o);p>1?(t=i,r=s):p>0&&(t+=l*p,r+=o*p)}return Bg(n,e,t,r)}function Bg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function _$(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const p=Math.abs(n[o][r]);p>s&&(s=p,i=o)}if(s===0)return null;const l=n[i];n[i]=n[r],n[r]=l;for(let o=r+1;o<e;o++){const p=-n[o][r]/n[r][r];for(let v=r;v<e+1;v++)r==v?n[o][v]=0:n[o][v]+=p*n[r][v]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function rI(n){return n*180/Math.PI}function U0(n){return n*Math.PI/180}function Og(n,e){const t=n%e;return t*e<0?t+e:t}function qd(n,e,t){return n+t*(e-n)}function _x(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function q_(n,e){return Math.floor(_x(n,e))}function I0(n,e){return Math.ceil(_x(n,e))}function p6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function o2(n,e,t,r,i,s,l){let o,p;const v=(t-e)/r;if(v===1)o=e;else if(v===2)o=e,p=i;else if(v!==0){let x=n[e],B=n[e+1],k=0;const P=[0];for(let W=e+r;W<t;W+=r){const V=n[W],$=n[W+1];k+=Math.sqrt((V-x)*(V-x)+($-B)*($-B)),P.push(k),x=V,B=$}const D=i*k,N=o$(P,D);N<0?(p=(D-P[-N-2])/(P[-N-1]-P[-N-2]),o=e+(-N-2)*r):o=e+N*r}l=l>1?l:2,s=s||new Array(l);for(let x=0;x<l;++x)s[x]=o===void 0?NaN:p===void 0?n[o+x]:qd(n[o+x],n[o+r+x],p);return s}function m6(n,e,t,r,i,s){if(t==e)return null;let l;if(i<n[e+r-1])return s?(l=n.slice(e,e+r),l[r-1]=i,l):null;if(n[t-1]<i)return s?(l=n.slice(t-r,t),l[r-1]=i,l):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,p=t/r;for(;o<p;){const k=o+p>>1;i<n[(k+1)*r-1]?p=k:o=k+1}const v=n[o*r-1];if(i==v)return n.slice((o-1)*r,(o-1)*r+r);const x=n[(o+1)*r-1],B=(i-v)/(x-v);l=[];for(let k=0;k<r-1;++k)l.push(qd(n[(o-1)*r+k],n[o*r+k],B));return l.push(i),l}function b$(n,e,t,r,i,s,l){if(l)return m6(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let p=0,v=t.length;p<v;++p){const x=t[p];if(e!=x){if(i<n[e+r-1])return null;if(i<=n[x-1])return m6(n,e,x,r,i,!1);e=x}}return null}function x$(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function FB(n,e,t,r){let i=0,s=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const o=n[e],p=n[e+1];i+=(o-s)*(p+l),s=o,l=p}return i===0?void 0:i>0}function LB(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],p=FB(n,e,o,r);if(s===0){if(i&&p||!i&&!p)return!1}else if(i&&!p||!i&&p)return!1;e=o}return!0}function yL(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(!LB(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function s2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],p=FB(n,e,o,r);(s===0?i&&p||!i&&!p:i&&!p||!i&&p)&&x$(n,e,o,r),e=o}return e}function g6(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s)e=s2(n,e,t[s],r,i);return e}function vL(n,e){const t=[];let r=0,i=0,s;for(let l=0,o=e.length;l<o;++l){const p=e[l],v=FB(n,r,p,2);if(s===void 0&&(s=v),v===s)t.push(e.slice(i,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=l+1,r=p}return t}function bx(n,e,t,r,i,s,l){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[l++]=n[e],s[l++]=n[e+1];return l}const p=new Array(o);p[0]=1,p[o-1]=1;const v=[e,t-r];let x=0;for(;v.length>0;){const B=v.pop(),k=v.pop();let P=0;const D=n[k],N=n[k+1],W=n[B],V=n[B+1];for(let $=k+r;$<B;$+=r){const ie=n[$],ne=n[$+1],q=C$(ie,ne,D,N,W,V);q>P&&(x=$,P=q)}P>i&&(p[(x-e)/r]=1,k+r<x&&v.push(k,x),x+r<B&&v.push(x,B))}for(let B=0;B<o;++B)p[B]&&(s[l++]=n[e+B*r],s[l++]=n[e+B*r+1]);return l}function CL(n,e,t,r,i,s,l,o){for(let p=0,v=t.length;p<v;++p){const x=t[p];l=bx(n,e,x,r,i,s,l),o.push(l),e=x}return l}function cg(n,e){return e*Math.round(n/e)}function M$(n,e,t,r,i,s,l){if(e==t)return l;let o=cg(n[e],i),p=cg(n[e+1],i);e+=r,s[l++]=o,s[l++]=p;let v,x;do if(v=cg(n[e],i),x=cg(n[e+1],i),e+=r,e==t)return s[l++]=v,s[l++]=x,l;while(v==o&&x==p);for(;e<t;){const B=cg(n[e],i),k=cg(n[e+1],i);if(e+=r,B==v&&k==x)continue;const P=v-o,D=x-p,N=B-o,W=k-p;if(P*W==D*N&&(P<0&&N<P||P==N||P>0&&N>P)&&(D<0&&W<D||D==W||D>0&&W>D)){v=B,x=k;continue}s[l++]=v,s[l++]=x,o=v,p=x,v=B,x=k}return s[l++]=v,s[l++]=x,l}function UB(n,e,t,r,i,s,l,o){for(let p=0,v=t.length;p<v;++p){const x=t[p];l=M$(n,e,x,r,i,s,l),o.push(l),e=x}return l}function w$(n,e,t,r,i,s,l,o){for(let p=0,v=t.length;p<v;++p){const x=t[p],B=[];l=UB(n,e,x,r,i,s,l,B),o.push(B),e=x[x.length-1]}return l}function z0(n,e,t,r,i,s,l){s=s||[],l=l||2;let o=0;for(let p=e;p<t;p+=r){const v=n[p],x=n[p+1];s[o++]=i[0]*v+i[2]*x+i[4],s[o++]=i[1]*v+i[3]*x+i[5];for(let B=2;B<l;B++)s[o++]=n[p+B]}return s&&s.length!=o&&(s.length=o),s}function _L(n,e,t,r,i,s,l){l=l||[];const o=Math.cos(i),p=Math.sin(i),v=s[0],x=s[1];let B=0;for(let k=e;k<t;k+=r){const P=n[k]-v,D=n[k+1]-x;l[B++]=v+P*o-D*p,l[B++]=x+P*p+D*o;for(let N=k+2;N<k+r;++N)l[B++]=n[N]}return l&&l.length!=B&&(l.length=B),l}function S$(n,e,t,r,i,s,l,o){o=o||[];const p=l[0],v=l[1];let x=0;for(let B=e;B<t;B+=r){const k=n[B]-p,P=n[B+1]-v;o[x++]=p+i*k,o[x++]=v+s*P;for(let D=B+2;D<B+r;++D)o[x++]=n[D]}return o&&o.length!=x&&(o.length=x),o}function E$(n,e,t,r,i,s,l){l=l||[];let o=0;for(let p=e;p<t;p+=r){l[o++]=n[p]+i,l[o++]=n[p+1]+s;for(let v=p+2;v<p+r;++v)l[o++]=n[v]}return l&&l.length!=o&&(l.length=o),l}function bL(...n){console.warn(...n)}function B$(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function a2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function zB(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function O$(n,e){return n[0]*=e,n[1]*=e,n}function NB(n,e){if(e.canWrapX()){const t=zs(e.getExtent()),r=I$(n,e,t);r&&(n[0]-=r*t)}return n}function I$(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||zs(r),i=Math.floor((n[0]-r[0])/t)),i}const G0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class xx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||G0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const QC=6378137,ry=Math.PI*QC,T$=[-ry,-ry,ry,ry],k$=[-180,-85,180,85],V_=QC*Math.log(Math.tan(Math.PI/2));class v1 extends xx{constructor(e){super({code:e,units:"m",extent:T$,global:!0,worldExtent:k$,getPointResolution:function(t,r){return t/Math.cosh(r[1]/QC)}})}}const iI=[new v1("EPSG:3857"),new v1("EPSG:102100"),new v1("EPSG:102113"),new v1("EPSG:900913"),new v1("http://www.opengis.net/def/crs/EPSG/0/3857"),new v1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function P$(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=ry*n[s]/180;let l=QC*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));l>V_?l=V_:l<-V_&&(l=-V_),e[s+1]=l}return e}function K$(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/ry,e[s+1]=360*Math.atan(Math.exp(n[s+1]/QC))/Math.PI-90;return e}const R$=6378137,oI=[-180,-90,180,90],D$=Math.PI*R$/180;class rg extends xx{constructor(e,t){super({code:e,units:"degrees",extent:oI,axisOrientation:t,global:!0,metersPerUnit:D$,worldExtent:oI})}}const sI=[new rg("CRS:84"),new rg("EPSG:4326","neu"),new rg("urn:ogc:def:crs:OGC:1.3:CRS84"),new rg("urn:ogc:def:crs:OGC:2:84"),new rg("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new rg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new rg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let y6={};function F$(n){return y6[n]||y6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function L$(n,e){y6[n]=e}let hy={};function gC(n,e,t){const r=n.getCode(),i=e.getCode();r in hy||(hy[r]={}),hy[r][i]=t}function h4(n,e){return n in hy&&e in hy[n]?hy[n][e]:null}const l2=.9996,Ff=.00669438,Mx=Ff*Ff,wx=Mx*Ff,vg=Ff/(1-Ff),aI=Math.sqrt(1-Ff),Ey=(1-aI)/(1+aI),xL=Ey*Ey,WB=xL*Ey,jB=WB*Ey,ML=jB*Ey,wL=1-Ff/4-3*Mx/64-5*wx/256,U$=3*Ff/8+3*Mx/32+45*wx/1024,z$=15*Mx/256+45*wx/1024,N$=35*wx/3072,W$=3/2*Ey-27/32*WB+269/512*ML,j$=21/16*xL-55/32*jB,G$=151/96*WB-417/128*ML,Q$=1097/512*jB,A2=6378137;function Y$(n,e,t){const r=n-5e5,l=(t.north?e:e-1e7)/l2/(A2*wL),o=l+W$*Math.sin(2*l)+j$*Math.sin(4*l)+G$*Math.sin(6*l)+Q$*Math.sin(8*l),p=Math.sin(o),v=p*p,x=Math.cos(o),B=p/x,k=B*B,P=k*k,D=1-Ff*v,N=Math.sqrt(1-Ff*v),W=A2/N,V=(1-Ff)/D,$=vg*x**2,ie=$*$,ne=r/(W*l2),q=ne*ne,te=q*ne,G=te*ne,oe=G*ne,fe=oe*ne,he=o-B/V*(q/2-G/24*(5+3*k+10*$-4*ie-9*vg))+fe/720*(61+90*k+298*$+45*P-252*vg-3*ie);let Me=(ne-te/6*(1+2*k+$)+oe/120*(5-2*$+28*k-3*ie+8*vg+24*P))/x;return Me=p6(Me+U0(SL(t.number)),-Math.PI,Math.PI),[rI(Me),rI(he)]}const lI=-80,AI=84,q$=-180,V$=180;function H$(n,e,t){n=p6(n,q$,V$),e<lI?e=lI:e>AI&&(e=AI);const r=U0(e),i=Math.sin(r),s=Math.cos(r),l=i/s,o=l*l,p=o*o,v=U0(n),x=SL(t.number),B=U0(x),k=A2/Math.sqrt(1-Ff*i**2),P=vg*s**2,D=s*p6(v-B,-Math.PI,Math.PI),N=D*D,W=N*D,V=W*D,$=V*D,ie=$*D,ne=A2*(wL*r-U$*Math.sin(2*r)+z$*Math.sin(4*r)-N$*Math.sin(6*r)),q=l2*k*(D+W/6*(1-o+P)+$/120*(5-18*o+p+72*P-58*vg))+5e5;let te=l2*(ne+k*l*(N/2+V/24*(5-o+9*P+4*P**2)+ie/720*(61-58*o+p+600*P-330*vg)));return t.north||(te+=1e7),[q,te]}function SL(n){return(n-1)*6-180+3}const $$=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function EL(n){let e=0;for(const i of $$){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function uI(n,e){return function(t,r,i,s){const l=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(l));for(let o=0;o<l;o+=s){const p=t[o],v=t[o+1],x=n(p,v,e);r[o]=x[0],r[o+1]=x[1]}return r}}function Z$(n){return EL(n)?new xx({code:n,units:"m"}):null}function X$(n){const e=EL(n.getCode());return e?{forward:uI(H$,e),inverse:uI(Y$,e)}:null}const J$=63710088e-1;function cI(n,e,t){t=t||J$;const r=U0(n[1]),i=U0(e[1]),s=(i-r)/2,l=U0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const eZ=[X$],tZ=[Z$];let v6=!0;function BL(n){v6=!1}function GB(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function C6(n){L$(n.getCode(),n),gC(n,n,GB)}function nZ(n){n.forEach(C6)}function Sa(n){if(typeof n!="string")return n;const e=F$(n);if(e)return e;for(const t of tZ){const r=t(n);if(r)return r}return null}function _6(n,e,t,r){n=Sa(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const l=n.getMetersPerUnit();l&&(i=i*l/G0[r])}}else{const l=n.getUnits();if(l=="degrees"&&!r||r=="degrees")i=e;else{const o=YC(n,Sa("EPSG:4326"));if(!o&&l!=="degrees")i=e*n.getMetersPerUnit();else{let v=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];v=o(v,v,2);const x=cI(v.slice(0,2),v.slice(2,4)),B=cI(v.slice(4,6),v.slice(6,8));i=(x+B)/2}const p=r?G0[r]:n.getMetersPerUnit();p!==void 0&&(i/=p)}}return i}function hI(n){nZ(n),n.forEach(function(e){n.forEach(function(t){e!==t&&gC(e,t,GB)})})}function rZ(n,e,t,r){n.forEach(function(i){e.forEach(function(s){gC(i,s,t),gC(s,i,r)})})}function QB(n,e){return n?typeof n=="string"?Sa(n):n:Sa(e)}function iZ(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let l=0;l<s;l+=i){const o=n(e.slice(l,l+r)),p=o.length;for(let v=0,x=i;v<x;++v)t[l+v]=v>=p?e[l+v]:o[v]}return t}}function b6(n,e){return BL(),Sx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function d4(n,e){const t=Sx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Og(r+180,360)-180),t}function N0(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||YC(n,e)===GB)&&t}function YC(n,e){const t=n.getCode(),r=e.getCode();let i=h4(t,r);if(i)return i;let s=null,l=null;for(const p of eZ)s||(s=p(n)),l||(l=p(e));if(!s&&!l)return null;const o="EPSG:4326";if(l)if(s)i=f4(s.inverse,l.forward);else{const p=h4(t,o);p&&(i=f4(p,l.forward))}else{const p=h4(o,r);p&&(i=f4(s.inverse,p))}return i&&(C6(n),C6(e),gC(n,e,i)),i}function f4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function yC(n,e){const t=Sa(n),r=Sa(e);return YC(t,r)}function Sx(n,e,t){const r=yC(e,t);if(!r){const i=Sa(e).getCode(),s=Sa(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let oZ=null;function sZ(){return oZ}function x6(n,e){return n}function Km(n,e){return v6&&!a2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(v6=!1,bL("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function YB(n,e){return n}function Zp(n,e){return n}function aZ(){hI(iI),hI(sI),rZ(sI,iI,P$,K$)}aZ();const OL=new Array(6);function yd(){return[1,0,0,1,0,0]}function dI(n){return VB(n,1,0,0,1,0,0)}function qB(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=n[4],o=n[5],p=e[0],v=e[1],x=e[2],B=e[3],k=e[4],P=e[5];return n[0]=t*p+i*v,n[1]=r*p+s*v,n[2]=t*x+i*B,n[3]=r*x+s*B,n[4]=t*k+i*P+l,n[5]=r*k+s*P+o,n}function VB(n,e,t,r,i,s,l){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=l,n}function lZ(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Lu(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function p4(n,e,t){return qB(n,VB(OL,e,0,0,t,0,0))}function AZ(n,e,t){return qB(n,VB(OL,1,0,0,1,e,t))}function sm(n,e,t,r,i,s,l,o){const p=Math.sin(s),v=Math.cos(s);return n[0]=r*v,n[1]=i*p,n[2]=-r*p,n[3]=i*v,n[4]=l*r*v-o*r*p+e,n[5]=l*i*p+o*i*v+t,n}function IL(n,e){const t=uZ(e);oa(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],l=e[3],o=e[4],p=e[5];return n[0]=l/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*p-l*o)/t,n[5]=-(r*p-i*o)/t,n}function uZ(n){return n[0]*n[3]-n[1]*n[2]}const cZ=[1e5,1e5,1e5,1e5,2,2];function hZ(n){return"matrix("+n.join(", ")+")"}function fI(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function dZ(n,e){const t=fI(n),r=fI(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*cZ[i])!==0)return!1;return!0}const pI=yd(),fZ=[NaN,NaN];class TL extends Ep{constructor(){super(),this.extent_=Lf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=aL((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return vo()}closestPointXY(e,t,r,i){return vo()}containsXY(e,t){return this.closestPointXY(e,t,fZ,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return vo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&zy(t),this.extentRevision_=this.getRevision()}return p$(this.extent_,e)}rotate(e,t){vo()}scale(e,t,r){vo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return vo()}getType(){return vo()}applyTransform(e){vo()}intersectsExtent(e){return vo()}translate(e,t){vo()}transform(e,t){const r=Sa(e),i=r.getUnits()=="tile-pixels"?function(s,l,o){const p=r.getExtent(),v=r.getWorldExtent(),x=zu(v)/zu(p);sm(pI,v[0],v[3],x,-x,0,0,0);const B=z0(s,0,s.length,o,pI,l),k=yC(r,t);return k?k(B,B,o):B}:yC(r,t);return this.applyTransform(i),this}}class Wg extends TL{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return KB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return vo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=mI(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){vo()}setLayout(e,t,r){let i;if(e)i=mI(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=jg(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();_L(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Uf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();S$(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();E$(r,0,r.length,i,e,t,r),this.changed()}}}function jg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function mI(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function pZ(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return z0(r,0,r.length,i,e,t)}function mZ(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Ex(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const l=t[i];for(let o=0;o<r;++o)n[e++]=l[o]}return e}function qC(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=Ex(n,e,t[l],r);i[s++]=p,e=p}return i.length=s,i}function kL(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=qC(n,e,t[l],r,i[s]);p.length===0&&(p[0]=e),i[s++]=p,e=p[p.length-1]}return i.length=s,i}class u2 extends TL{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(hl),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ks(e[t],co.CHANGE,this.changed,this))}clone(){const e=new u2(m4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<zg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let l=0,o=s.length;l<o;++l)i=s[l].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){zy(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)uL(e,t[r].getExtent());return e}getGeometries(){return m4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,l=r.length;s<l;++s){const o=r[s],p=o.getSimplifiedGeometry(e);t.push(p),p!==o&&(i=!0)}return i?new u2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Uf(this.getExtent()));const i=this.geometries_;for(let s=0,l=i.length;s<l;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(m4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function m4(n){return n.map(e=>e.clone())}function PL(n,e,t,r){let i=0;const s=n[t-r],l=n[t-r+1];let o=0,p=0;for(;e<t;e+=r){const v=n[e]-s,x=n[e+1]-l;i+=p*v-o*x,o=v,p=x}return i/2}function KL(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=PL(n,e,o,r),e=o}return i}function gZ(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=KL(n,e,o,r),e=o[o.length-1]}return i}function gI(n,e,t,r,i,s,l){const o=n[e],p=n[e+1],v=n[t]-o,x=n[t+1]-p;let B;if(v===0&&x===0)B=e;else{const k=((i-o)*v+(s-p)*x)/(v*v+x*x);if(k>1)B=t;else if(k>0){for(let P=0;P<r;++P)l[P]=qd(n[e+P],n[t+P],k);l.length=r;return}else B=e}for(let k=0;k<r;++k)l[k]=n[B+k];l.length=r}function HB(n,e,t,r,i){let s=n[e],l=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],p=n[e+1],v=Bg(s,l,o,p);v>i&&(i=v),s=o,l=p}return i}function $B(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=HB(n,e,o,r,i),e=o}return i}function yZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=$B(n,e,o,r,i),e=o[o.length-1]}return i}function ZB(n,e,t,r,i,s,l,o,p,v,x){if(e==t)return v;let B,k;if(i===0){if(k=Bg(l,o,n[e],n[e+1]),k<v){for(B=0;B<r;++B)p[B]=n[e+B];return p.length=r,k}return v}x=x||[NaN,NaN];let P=e+r;for(;P<t;)if(gI(n,P-r,P,r,l,o,x),k=Bg(l,o,x[0],x[1]),k<v){for(v=k,B=0;B<r;++B)p[B]=x[B];p.length=r,P+=r}else P+=r*Math.max((Math.sqrt(k)-Math.sqrt(v))/i|0,1);if(s&&(gI(n,t-r,e,r,l,o,x),k=Bg(l,o,x[0],x[1]),k<v)){for(v=k,B=0;B<r;++B)p[B]=x[B];p.length=r}return v}function XB(n,e,t,r,i,s,l,o,p,v,x){x=x||[NaN,NaN];for(let B=0,k=t.length;B<k;++B){const P=t[B];v=ZB(n,e,P,r,i,s,l,o,p,v,x),e=P}return v}function vZ(n,e,t,r,i,s,l,o,p,v,x){x=x||[NaN,NaN];for(let B=0,k=t.length;B<k;++B){const P=t[B];v=XB(n,e,P,r,i,s,l,o,p,v,x),e=P[P.length-1]}return v}function T0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=e;l<t;l+=r)i[s++]=n.slice(l,l+r);return i.length=s,i}function vC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=t[l];i[s++]=T0(n,e,p,r,i[s]),e=p}return i.length=s,i}function M6(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=t[l];i[s++]=p.length===1&&p[0]===e?[]:vC(n,e,p,r,i[s]),e=p[p.length-1]}return i.length=s,i}class CC extends Wg{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new CC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(HB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return PL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return T0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=bx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new CC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ex(this.flatCoordinates,0,e,this.stride),this.changed()}}function RL(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Bx(n,e,t,r,i,s){return s=s??cL(Lf(),n,e,t,r),$A(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:RL(n,e,t,r,function(l,o){return m$(i,l,o)}):!1}function CZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){if(Bx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function DL(n,e,t,r,i){return!!(Bx(n,e,t,r,i)||yg(n,e,t,r,i[0],i[1])||yg(n,e,t,r,i[0],i[3])||yg(n,e,t,r,i[2],i[1])||yg(n,e,t,r,i[2],i[3]))}function FL(n,e,t,r,i){if(!DL(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,l=t.length;s<l;++s)if(y$(n,t[s-1],t[s],r,i)&&!Bx(n,t[s-1],t[s],r,i))return!1;return!0}function _Z(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(FL(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function JB(n,e,t,r){let i=n[e],s=n[e+1],l=0;for(let o=e+r;o<t;o+=r){const p=n[o],v=n[o+1];l+=Math.sqrt((p-i)*(p-i)+(v-s)*(v-s)),i=p,s=v}return l}class Kg extends Wg{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){im(this.flatCoordinates,e),this.changed()}clone(){const e=new Kg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(HB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return RL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,m6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return T0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return o2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return JB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=bx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Kg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Bx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ex(this.flatCoordinates,0,e,this.stride),this.changed()}}class _C extends Wg{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],l=[];for(let p=0,v=i.length;p<v;++p){const x=i[p];im(s,x.getFlatCoordinates()),l.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=l}}appendLineString(e){im(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new _C(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($B(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,b$(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return vC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Kg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=t[l],v=new Kg(e.slice(s,p),r);i.push(v),s=p}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=JB(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let l=0,o=i.length;l<o;++l){const p=i[l],v=o2(t,r,p,s,.5);im(e,v),r=p}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=CL(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new _C(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return CZ(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=qC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Rg extends Wg{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Rg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,l=Bg(e,t,s[0],s[1]);if(l<i){const o=this.stride;for(let p=0;p<o;++p)r[p]=s[p];return r.length=o,l}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return AL(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return PB(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mZ(this.flatCoordinates,0,e,this.stride),this.changed()}}class VC extends Wg{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){im(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new VC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<zg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,l=this.stride;for(let o=0,p=s.length;o<p;o+=l){const v=Bg(e,t,s[o],s[o+1]);if(v<i){i=v;for(let x=0;x<l;++x)r[x]=s[o+x];r.length=l}}return i}getCoordinates(){return T0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Rg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,l=e.length;s<l;s+=r){const o=new Rg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const l=t[i],o=t[i+1];if(PB(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ex(this.flatCoordinates,0,e,this.stride),this.changed()}}class Gm extends Wg{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?im(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Gm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($B(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return RB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return KL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),s2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,vC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Uf(this.getExtent());this.flatInteriorPoint_=DB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Rg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new CC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const p=r[l],v=new CC(t.slice(s,p),e);i.push(v),s=p}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;LB(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=s2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=UB(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Gm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return FL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=qC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function yI(n){if(Ng(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Gm(s,"XY",[s.length])}class bC extends Wg{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],l=[];for(let o=0,p=i.length;o<p;++o){const v=i[o],x=s.length,B=v.getEnds();for(let k=0,P=B.length;k<P;++k)B[k]+=x;im(s,v.getFlatCoordinates()),l.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=l}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;im(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new bC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yZ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return v$(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return gZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),g6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,M6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=mL(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=gL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new VC(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;yL(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=g6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=w$(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new bC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,l=r.length;s<l;++s)r[s]-=t;return new Gm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const p=r[l].slice(),v=p[p.length-1];if(s!==0)for(let B=0,k=p.length;B<k;++B)p[B]-=s;const x=new Gm(t.slice(s,v),e,p);i.push(x),s=v}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return _Z(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=kL(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const vI=yd();class fh{constructor(e,t,r,i,s,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?AL(this.flatCoordinates_):KB(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Uf(this.getExtent());this.flatInteriorPoints_=DB(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=vL(this.flatCoordinates_,this.ends_),t=mL(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=gL(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=o2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const l=r[i],o=o2(e,t,l,2,.5);im(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Sa(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=zu(r)/zu(t);sm(vI,r[0],r[3],i,-i,0,0,0),z0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,vI,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new fh(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=aL((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=bx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=CL(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=UB(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new fh(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}fh.prototype.getFlatCoordinates=fh.prototype.getOrientedFlatCoordinates;const fi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Dg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",bZ=Dg.includes("safari")&&!Dg.includes("chrom");bZ&&(Dg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Dg));const xZ=Dg.includes("webkit")&&!Dg.includes("edge"),LL=Dg.includes("macintosh"),MZ=typeof devicePixelRatio<"u"?devicePixelRatio:1,UL=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,zL=typeof Image<"u"&&Image.prototype.decode,wZ=typeof createImageBitmap=="function",NL=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function MA(n,e,t,r){let i;return t&&t.length?i=t.shift():UL?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let g4;function c2(){return g4||(g4=MA(1,1)),g4}function HC(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function SZ(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function EZ(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function CI(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function WL(n){for(;n.lastChild;)n.lastChild.remove()}function BZ(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}const eO=[NaN,NaN,NaN,0];let y4;function OZ(){return y4||(y4=MA(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),y4}const IZ=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,TZ=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,kZ=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,PZ=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function H_(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function eC(n){throw new Error('failed to parse "'+n+'" as color')}function jL(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(TZ)||n.match(IZ)||n.match(kZ);if(s){const l=s[4],o=100/255;return[xA(H_(s[1],o)+.5|0,0,255),xA(H_(s[2],o)+.5|0,0,255),xA(H_(s[3],o)+.5|0,0,255),l!==void 0?xA(H_(l,100),0,1):1]}eC(n)}if(n.startsWith("#")){if(PZ.test(n)){const s=n.substring(1),l=s.length<=4?1:2,o=[0,0,0,255];for(let p=0,v=s.length;p<v;p+=l){let x=parseInt(s.substring(p,p+l),16);l===1&&(x+=x<<4),o[p/l]=x}return o[3]=o[3]/255,o}eC(n)}const e=OZ();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&eC(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return jL(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=_x(i[3]/255,3),i}function KZ(n){return typeof n=="string"?n:nO(n)}const RZ=1024,mv={};let v4=0;function DZ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function C4(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function _4(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function b4(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function x4(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function _I(n){const e=b4(n[0]),t=b4(n[1]),r=b4(n[2]),i=x4(e*.222488403+t*.716873169+r*.06060791),s=500*(x4(e*.452247074+t*.399439023+r*.148375274)-i),l=200*(i-x4(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(l,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+l*l),o<0?o+360:o,n[3]]}function FZ(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=_4(e),s=_4(e+t/500*Math.cos(r)),l=_4(e-t/200*Math.sin(r)),o=C4(s*3.021973625-i*1.617392459-l*.404875592),p=C4(s*-.943766287+i*1.916279586+l*.027607165),v=C4(s*.069407491-i*.22898585+l*1.159737864);return[xA(o+.5|0,0,255),xA(p+.5|0,0,255),xA(v+.5|0,0,255),n[3]]}function tO(n){if(n==="none")return eO;if(mv.hasOwnProperty(n))return mv[n];if(v4>=RZ){let t=0;for(const r in mv)(t++&3)===0&&(delete mv[r],--v4)}const e=jL(n);e.length!==4&&eC(n);for(const t of e)isNaN(t)&&eC(n);return mv[n]=e,++v4,e}function By(n){return Array.isArray(n)?n:tO(n)}function nO(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class rO extends jC{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?fi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(co.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==fi.IDLE&&this.loader){this.state=fi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;wy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||wZ&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=fi.LOADED}).catch(r=>{this.state=fi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function LZ(n,e,t){const r=n;let i=!0,s=!1,l=!1;const o=[r2(r,co.LOAD,function(){l=!0,s||e()})];return r.src&&zL?(s=!0,r.decode().then(function(){i&&e()}).catch(function(p){i&&(l?e():t())})):o.push(r2(r,co.ERROR,t)),function(){i=!1,o.forEach(hl)}}function UZ(n,e){return new Promise((t,r)=>{function i(){l(),t(n)}function s(){l(),r(new Error("Image load error"))}function l(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function zZ(n,e){return e&&(n.src=e),n.src&&zL?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):UZ(n)}class NZ{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=M4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=M4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const l=M4(e,t,r),o=l in this.cache_;this.cache_[l]=i,s&&(i.getImageState()===fi.IDLE&&i.load(),i.getImageState()===fi.LOADING?i.ready().then(()=>{this.patternCache_[l]=c2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[l]=c2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function M4(n,e,t){const r=t?By(t):"null";return e+":"+n+":"+r}const Pf=new NZ;let gv=null;class GL extends jC{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?fi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===fi.LOADED){gv||(gv=MA(1,1,void 0,{willReadFrequently:!0})),gv.drawImage(this.image_,0,0);try{gv.getImageData(0,0,1,1),this.tainted_=!1}catch{gv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(co.CHANGE)}handleImageError_(){this.imageState_=fi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=fi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=MA(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===fi.IDLE){this.image_||this.initializeImage_(),this.imageState_=fi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&zZ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==fi.LOADED)return;const t=this.image_,r=MA(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=KZ(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)e();else{const t=()=>{(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)&&(this.removeEventListener(co.CHANGE,t),e())};this.addEventListener(co.CHANGE,t)}})),this.ready_}}function iO(n,e,t,r,i,s){let l=e===void 0?void 0:Pf.get(e,t,i);return l||(l=new GL(n,n&&"src"in n?n.src||void 0:e,t,r,i),Pf.set(e,t,i,l,s)),s&&l&&!Pf.getPattern(e,t,i)&&Pf.set(e,t,i,l,s),l}function Xp(n){return n?Array.isArray(n)?nO(n):typeof n=="object"&&"src"in n?WZ(n):n:null}function WZ(n){if(!n.offset||!n.size)return Pf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Pf.getPattern(e,void 0,n.color);if(t)return t;const r=Pf.get(n.src,"anonymous",null);if(r.getImageState()!==fi.LOADED)return null;const i=MA(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),iO(i.canvas,e,void 0,fi.LOADED,n.color,!0),Pf.getPattern(e,void 0,n.color)}const $_="ol-hidden",jZ="ol-selectable",Ox="ol-unselectable",oO="ol-control",bI="ol-collapsed",GZ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),xI=["style","variant","weight","size","lineHeight","family"],QL=function(n){const e=n.match(GZ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=xI.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[xI[r]]=s)}return t.families=t.family.split(/,\s?/),t},YL="10px sans-serif",fd="#000",Oy="round",Um=[],zm=0,Iy="round",xC=10,MC="#000",wC="center",h2="middle",Cg=[0,0,0,0],SC=1,Np=new Ep;let Z1=null,w6;const S6={},qL=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,l;function o(v,x,B){let k=!0;for(let P=0;P<r;++P){const D=t[P];if(l=d2(v+" "+x+" "+e+D,i),B!=D){const N=d2(v+" "+x+" "+e+B+","+D,i);k=k&&N!=l}}return!!k}function p(){let v=!0;const x=Np.getKeys();for(let B=0,k=x.length;B<k;++B){const P=x[B];if(Np.get(P)<100){const[D,N,W]=P.split(`
`);o(D,N,W)?(WC(S6),Z1=null,w6=void 0,Np.set(P,100)):(Np.set(P,Np.get(P)+1,!0),v=!1)}}v&&(clearInterval(s),s=void 0)}return function(v){const x=QL(v);if(!x)return;const B=x.families;for(let k=0,P=B.length;k<P;++k){const D=B[k],N=x.style+`
`+x.weight+`
`+D;Np.get(N)===void 0&&(Np.set(N,100,!0),o(x.style,x.weight,D)||(Np.set(N,0,!0),s===void 0&&(s=setInterval(p,32))))}}}(),QZ=function(){let n;return function(e){let t=S6[e];if(t==null){if(UL){const r=QL(e),i=VL(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);S6[e]=t}return t}}();function VL(n,e){return Z1||(Z1=MA(1,1)),n!=w6&&(Z1.font=n,w6=Z1.font),Z1.measureText(e)}function d2(n,e){return VL(n,e).width}function MI(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,d2(n,s)),0);return t[e]=r,r}function YZ(n,e){const t=[],r=[],i=[];let s=0,l=0,o=0,p=0;for(let v=0,x=e.length;v<=x;v+=2){const B=e[v];if(B===`
`||v===x){s=Math.max(s,l),i.push(l),l=0,o+=p,p=0;continue}const k=e[v+1]||n.font,P=d2(k,B);t.push(P),l+=P;const D=QZ(k);r.push(D),p=Math.max(p,D)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function qZ(n,e,t,r,i,s,l,o,p,v,x){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(p,v),n.scale(x[0],x[1]),VZ(r,n)):x[0]<0||x[1]<0?(n.translate(p,v),n.scale(x[0],x[1]),n.drawImage(r,i,s,l,o,0,0,l,o)):n.drawImage(r,i,s,l,o,p,v,l*x[0],o*x[1]),n.restore()}function VZ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}function wI(n){return n[0]>0&&n[1]>0}function HZ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ph(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Ix{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ph(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ix({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return vo()}getImage(e){return vo()}getHitDetectionImage(){return vo()}getPixelRatio(e){return 1}getImageState(){return vo()}getImageSize(){return vo()}getOrigin(){return vo()}getSize(){return vo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ph(e)}listenImageChange(e){vo()}load(){vo()}unlistenImageChange(e){vo()}ready(){return Promise.resolve()}}class Tx extends Ix{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?fi.LOADING:fi.LOADED,this.imageState_===fi.LOADING&&this.ready().then(()=>this.imageState_=fi.LOADED),this.render()}clone(){const e=this.getScale(),t=new Tx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,l;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(l=Pf.get(r,null,null))==null?void 0:l.getImage(1);if(!i){const o=this.renderOptions_,p=Math.ceil(o.size*e),v=MA(p,p);this.draw_(o,v,e),i=v.canvas,Pf.set(r,null,null,new GL(i,void 0,null,fi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const te=i;i=s,s=te}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,p=s*Math.sin(o),v=Math.sqrt(s*s-p*p),x=i-v,B=Math.sqrt(p*p+x*x),k=B/p;if(e==="miter"&&k<=r)return k*t;const P=t/2/k,D=t/2*(x/B),W=Math.sqrt((i+P)*(i+P)+D*D)-i;if(this.radius2_===void 0||e==="bevel")return W*2;const V=i*Math.sin(o),$=Math.sqrt(i*i-V*V),ie=s-$,q=Math.sqrt(V*V+ie*ie)/V;if(q<=r){const te=q*t/2-s-i;return 2*Math.max(W,te)}return W*2}createRenderOptions(){let e=Oy,t=Iy,r=0,i=null,s=0,l,o=0;this.stroke_&&(l=Xp(this.stroke_.getColor()??MC),o=this.stroke_.getWidth()??SC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Iy,e=this.stroke_.getLineCap()??Oy,r=this.stroke_.getMiterLimit()??xC);const p=this.calculateLineJoinSize_(t,o,r),v=Math.max(this.radius,this.radius2_||0),x=Math.ceil(2*v+p);return{strokeStyle:l,strokeWidth:o,size:x,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=fd),t.fillStyle=Xp(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=By(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=MA(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const p=s+o*l,v=o%2===0?r:i;e.lineTo(v*Math.cos(p),v*Math.sin(p))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=fd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class $C extends Tx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new $C({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=iO(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===fi.IDLE&&t.load(),t.getImageState()===fi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Uo(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:By(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function SI(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let f2=class HL extends Ix{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;oa(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||Uo(l)),oa(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),oa(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let p;if(e.src!==void 0?p=fi.IDLE:l!==void 0&&("complete"in l?l.complete?p=l.src?fi.LOADED:fi.IDLE:p=fi.LOADING:p=fi.LOADED),this.color_=e.color!==void 0?By(e.color):null,this.iconImage_=iO(l,o,this.crossOrigin_,p,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let v,x;if(e.size)[v,x]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)v=B.width,x=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const k=()=>{if(this.unlistenImageChange(k),!this.initialOptions_)return;const P=this.iconImage_.getSize();this.setScale(SI(P[0],P[1],e.width,e.height))};this.listenImageChange(k);return}}v!==void 0&&this.setScale(SI(v,x,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new HL({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(co.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(co.CHANGE,e)}ready(){return this.iconImage_.ready()}};class k0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new k0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Vd{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=EI,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Vd({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=EI,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function $Z(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(oa(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let w4=null;function $L(n,e){if(!w4){const t=new Fm({color:"rgba(255,255,255,0.4)"}),r=new k0({color:"#3399CC",width:1.25});w4=[new Vd({image:new $C({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return w4}function EI(n){return n.getGeometry()}const ZZ="#333";class kx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ph(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fm({color:ZZ}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new kx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ph(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const pd={ADD:"add",REMOVE:"remove"},BI={LENGTH:"length"};class Z_ extends Sp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class Jp extends Ep{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(BI.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Z_(pd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Z_(pd.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Z_(pd.REMOVE,i,e)),this.dispatchEvent(new Z_(pd.ADD,t,e))}updateLength_(){this.set(BI.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Kf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class ZL{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class XZ extends ZL{constructor(e,t,r,i,s,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?_x(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=yd()}drawImages_(e,t,r,i){if(!this.image_)return;const s=z0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,p=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=p*this.imageOpacity_);let v=this.imageRotation_;this.transformRotation_===0&&(v-=this.viewRotation_),this.imageRotateWithView_&&(v+=this.viewRotation_);for(let x=0,B=s.length;x<B;x+=2){const k=s[x]-this.imageAnchorX_,P=s[x+1]-this.imageAnchorY_;if(v!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const D=k+this.imageAnchorX_,N=P+this.imageAnchorY_;sm(o,D,N,1,1,v,-D,-N),l.save(),l.transform.apply(l,o),l.translate(D,N),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,k,P,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=p)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=z0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const p=s[t]+this.textOffsetX_,v=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(p-this.textOffsetX_,v-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,p,v),this.textFillState_&&l.fillText(this.text_,p,v))}}moveToLineTo_(e,t,r,i,s){const l=this.context_,o=z0(e,t,r,i,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let p=o.length;s&&(p-=2);for(let v=2;v<p;v+=2)l.lineTo(o[v],o[v+1]);return s&&l.closePath(),r}drawRings_(e,t,r,i){for(let s=0,l=r.length;s<l;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$A(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=pZ(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),l=this.context_;l.beginPath(),l.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$A(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if($A(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const l=e.getEnds(),o=e.getStride();r.beginPath();for(let p=0,v=l.length;p<v;++p)s=this.moveToLineTo_(i,s,l[p],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$A(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$A(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,p=s.length;o<p;++o){const v=s[o];i=this.drawRings_(r,i,v,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Q0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:wC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Xp(r||fd)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),p=t.getWidth(),v=t.getMiterLimit(),x=s||Um;this.strokeState_={lineCap:i!==void 0?i:Oy,lineDash:this.pixelRatio_===1?x:x.map(B=>B*this.pixelRatio_),lineDashOffset:(l||zm)*this.pixelRatio_,lineJoin:o!==void 0?o:Iy,lineWidth:(p!==void 0?p:SC)*this.pixelRatio_,miterLimit:v!==void 0?v:xC,strokeStyle:Xp(r||MC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/r,l[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const P=t.getColor();this.textFillState_={fillStyle:Xp(P||fd)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const P=r.getColor(),D=r.getLineCap(),N=r.getLineDash(),W=r.getLineDashOffset(),V=r.getLineJoin(),$=r.getWidth(),ie=r.getMiterLimit();this.textStrokeState_={lineCap:D!==void 0?D:Oy,lineDash:N||Um,lineDashOffset:W||zm,lineJoin:V!==void 0?V:Iy,lineWidth:$!==void 0?$:SC,miterLimit:ie!==void 0?ie:xC,strokeStyle:Xp(P||MC)}}const i=e.getFont(),s=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),p=e.getRotation(),v=e.getScaleArray(),x=e.getText(),B=e.getTextAlign(),k=e.getTextBaseline();this.textState_={font:i!==void 0?i:YL,textAlign:B!==void 0?B:wC,textBaseline:k!==void 0?k:h2},this.text_=x!==void 0?Array.isArray(x)?x.reduce((P,D,N)=>P+=N%2?" ":D,""):x:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=p!==void 0?p:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}}}const JZ=.5,XL={Point:aX,LineString:iX,Polygon:AX,MultiPoint:lX,MultiLineString:oX,MultiPolygon:sX,GeometryCollection:rX,Circle:tX};function eX(n,e){return parseInt(Uo(n),10)-parseInt(Uo(e),10)}function E6(n,e){const t=JL(n,e);return t*t}function JL(n,e){return JZ*n/e}function tX(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const p=n.getBuilder(t.getZIndex(),"Circle");p.setFillStrokeStyle(s,l),p.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,r)}}function p2(n,e,t,r,i,s,l,o){const p=[],v=t.getImage();if(v){let k=!0;const P=v.getImageState();P==fi.LOADED||P==fi.ERROR?k=!1:P==fi.IDLE&&v.load(),k&&p.push(v.ready())}const x=t.getFill();x&&x.loading()&&p.push(x.ready());const B=p.length>0;return B&&Promise.all(p).then(()=>i(null)),nX(n,e,t,r,s,l,o),B}function nX(n,e,t,r,i,s,l){const o=t.getGeometryFunction()(e);if(!o)return;const p=o.simplifyTransformed(r,i);if(t.getRenderer())eU(n,p,t,e,l);else{const x=XL[p.getType()];x(n,p,t,e,l,s)}}function eU(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,p=l.length;o<p;++o)eU(n,l[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function rX(n,e,t,r,i,s){const l=e.getGeometriesArray();let o,p;for(o=0,p=l.length;o<p;++o){const v=XL[l[o].getType()];v(n,l[o],t,r,i,s)}}function iX(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function oX(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function sX(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(l||s){const p=n.getBuilder(t.getZIndex(),"Polygon");p.setFillStrokeStyle(s,l),p.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,r,i)}}function aX(n,e,t,r,i,s){const l=t.getImage(),o=t.getText(),p=o&&o.getText(),v=s&&l&&p?{}:void 0;if(l){if(l.getImageState()!=fi.LOADED)return;const x=n.getBuilder(t.getZIndex(),"Image");x.setImageStyle(l,v),x.drawPoint(e,r,i)}if(p){const x=n.getBuilder(t.getZIndex(),"Text");x.setTextStyle(o,v),x.drawText(e,r,i)}}function lX(n,e,t,r,i,s){const l=t.getImage(),o=l&&l.getOpacity()!==0,p=t.getText(),v=p&&p.getText(),x=s&&o&&v?{}:void 0;if(o){if(l.getImageState()!=fi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(l,x),B.drawMultiPoint(e,r,i)}if(v){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(p,x),B.drawText(e,r,i)}}function AX(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const p=n.getBuilder(t.getZIndex(),"Polygon");p.setFillStrokeStyle(s,l),p.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,r,i)}}let uX=!1;function tU(n,e,t,r,i,s,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=uX,o.onload=function(p){if(!o.status||o.status>=200&&o.status<300){const v=e.getType();try{let x;v=="text"||v=="json"?x=o.responseText:v=="xml"?x=o.responseXML||o.responseText:v=="arraybuffer"&&(x=o.response),x?s(e.readFeatures(x,{extent:t,featureProjection:i}),e.readProjection(x)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function OI(n,e){return function(t,r,i,s,l){tU(n,e,t,r,i,(o,p)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),l!==void 0&&l()})}}function cX(n,e){return[[-1/0,-1/0,1/0,1/0]]}function hX(n,e){return[n]}function nU(n,e,t=0,r=n.length-1,i=dX){for(;r>t;){if(r-t>600){const p=r-t+1,v=e-t+1,x=Math.log(p),B=.5*Math.exp(2*x/3),k=.5*Math.sqrt(x*B*(p-B)/p)*(v-p/2<0?-1:1),P=Math.max(t,Math.floor(e-v*B/p+k)),D=Math.min(r,Math.floor(e+(p-v)*B/p+k));nU(n,e,P,D,i)}const s=n[e];let l=t,o=r;for(yv(n,t,e),i(n[r],s)>0&&yv(n,t,r);l<o;){for(yv(n,l,o),l++,o--;i(n[l],s)<0;)l++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?yv(n,t,o):(o++,yv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function yv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function dX(n,e){return n<e?-1:n>e?1:0}let rU=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!J_(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],p=t.leaf?i(o):o;J_(e,p)&&(t.leaf?r.push(o):E4(e,p)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!J_(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],l=t.leaf?this.toBBox(s):s;if(J_(e,l)){if(t.leaf||E4(e,l))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=X1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],l=[];let o,p,v;for(;r||s.length;){if(r||(r=s.pop(),p=s[s.length-1],o=l.pop(),v=!0),r.leaf){const x=fX(e,r.children,t);if(x!==-1)return r.children.splice(x,1),s.push(r),this._condense(s),this}!v&&!r.leaf&&E4(r,i)?(s.push(r),l.push(o),o=0,p=r,r=r.children[0]):p?(o++,r=p.children[o],v=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let l=this._maxEntries,o;if(s<=l)return o=X1(e.slice(t,r+1)),C1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(l)),l=Math.ceil(s/Math.pow(l,i-1))),o=X1([]),o.leaf=!1,o.height=i;const p=Math.ceil(s/l),v=p*Math.ceil(Math.sqrt(l));II(e,t,r,v,this.compareMinX);for(let x=t;x<=r;x+=v){const B=Math.min(x+v-1,r);II(e,x,B,p,this.compareMinY);for(let k=x;k<=B;k+=p){const P=Math.min(k+p-1,B);o.children.push(this._build(e,k,P,i-1))}}return C1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,l=1/0,o;for(let p=0;p<t.children.length;p++){const v=t.children[p],x=S4(v),B=gX(e,v)-x;B<l?(l=B,s=x<s?x:s,o=v):B===l&&x<s&&(s=x,o=v)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],l=this._chooseSubtree(i,this.data,t,s);for(l.children.push(e),Tv(l,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const l=this._chooseSplitIndex(r,s,i),o=X1(r.children.splice(l,r.children.length-l));o.height=r.height,o.leaf=r.leaf,C1(r,this.toBBox),C1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=X1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,C1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,l=1/0;for(let o=t;o<=r-t;o++){const p=Iv(e,0,o,this.toBBox),v=Iv(e,o,r,this.toBBox),x=yX(p,v),B=S4(p)+S4(v);x<s?(s=x,i=o,l=B<l?B:l):x===s&&B<l&&(l=B,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:pX,s=e.leaf?this.compareMinY:mX,l=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);l<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,l=Iv(e,0,t,s),o=Iv(e,r-t,r,s);let p=X_(l)+X_(o);for(let v=t;v<r-t;v++){const x=e.children[v];Tv(l,e.leaf?s(x):x),p+=X_(l)}for(let v=r-t-1;v>=t;v--){const x=e.children[v];Tv(o,e.leaf?s(x):x),p+=X_(o)}return p}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Tv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():C1(e[t],this.toBBox)}};function fX(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function C1(n,e){Iv(n,0,n.children.length,e,n)}function Iv(n,e,t,r,i){i||(i=X1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const l=n.children[s];Tv(i,n.leaf?r(l):l)}return i}function Tv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function pX(n,e){return n.minX-e.minX}function mX(n,e){return n.minY-e.minY}function S4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function X_(n){return n.maxX-n.minX+(n.maxY-n.minY)}function gX(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function yX(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function E4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function J_(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function X1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function II(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const l=e+Math.ceil((t-e)/r/2)*r;nU(n,l,e,t,i),s.push(e,l,l,t)}}class TI{constructor(e){this.rbush_=new rU(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Uo(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const l=e[i],o=t[i],p={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};r[i]=p,this.items_[Uo(o)]=p}this.rbush_.load(r)}remove(e){const t=Uo(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Uo(t)],i=[r.minX,r.minY,r.maxX,r.maxY];jm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return j0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Wm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ny extends Ep{constructor(e){super(),this.projection=Sa(e.projection),this.attributions_=kI(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=kI(e),this.changed()}setState(e){this.state_=e,this.changed()}}function kI(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Sf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class y0 extends Sp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Eb extends Ny{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=mC,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(oa(this.format_,"`format` must be set when `url` is set"),this.loader_=OI(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:cX;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new TI:null,this.loadedExtentsRtree_=new TI,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new Jp(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Uo(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new y0(Sf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof fh||(this.featureChangeKeys_[e]=[Ks(t,co.CHANGE,this.handleFeatureChange_,this),Ks(t,Sy.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof fh){const s=this.idIndex_[i];s instanceof fh?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(oa(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,l=e.length;s<l;s++){const o=e[s],p=Uo(o);this.addToIndex_(p,o)&&r.push(o)}for(let s=0,l=r.length;s<l;s++){const o=r[s],p=Uo(o);this.setupChangeEvents_(p,o);const v=o.getGeometry();if(v){const x=v.getExtent();t.push(x),i.push(o)}else this.nullGeometryFeatures_[p]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(Sf.ADDFEATURE))for(let s=0,l=r.length;s<l;s++)this.dispatchEvent(new y0(Sf.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Sf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Sf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(pd.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(pd.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(hl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new y0(Sf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof fh||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof fh||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),j0(this.nullGeometryFeatures_)||im(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=pL(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const l=[NaN,NaN];let o=1/0;const p=[-1/0,-1/0,1/0,1/0];return t=t||pC,this.featuresRtree_.forEachInExtent(p,function(v){if(t(v)){const x=v.getGeometry(),B=o;if(o=x instanceof fh?0:x.closestPointXY(r,i,l,o),o<B){s=v;const k=Math.sqrt(o);p[0]=r-k,p[1]=i-k,p[2]=r+k,p[3]=i+k}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Uo(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const l=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const s=t.getId();if(s!==void 0){const l=s.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new y0(Sf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Uo(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&j0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let l=0,o=s.length;l<o;++l){const p=s[l];i.forEachInExtent(p,function(x){return $p(x.extent,p)})||(++this.loadingExtentsCount_,this.dispatchEvent(new y0(Sf.FEATURESLOADSTART)),this.loader_.call(this,p,t,r,x=>{--this.loadingExtentsCount_,this.dispatchEvent(new y0(Sf.FEATURESLOADEND,void 0,x))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new y0(Sf.FEATURESLOADERROR))}),i.insert(p,{extent:p.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(jm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Uo(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(hl),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),l=this.idIndex_[s];l===e?delete this.idIndex_[s]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[s]=l[0]))}return delete this.uidIndex_[t],this.hasListener(Sf.REMOVEFEATURE)&&this.dispatchEvent(new y0(Sf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){oa(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(OI(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Xl={ANIMATING:0,INTERACTING:1},Hi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},eb=[Hi.FILL],P0=[Hi.STROKE],_g=[Hi.BEGIN_PATH],PI=[Hi.CLOSE_PATH];class ZC extends ZL{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let l=s.length;for(let o=0,p=e.length;o<p;o+=t)i[0]=e[o],i[1]=e[o+1],Pg(r,i)&&(s[l++]=i[0],s[l++]=i[1]);return l}appendFlatLineCoordinates(e,t,r,i,s,l){const o=this.coordinates;let p=o.length;const v=this.getBufferedMaxExtent();l&&(t+=i);let x=e[t],B=e[t+1];const k=this.tmpCoordinate_;let P=!0,D,N,W;for(D=t+i;D<r;D+=i)k[0]=e[D],k[1]=e[D+1],W=d6(v,k),W!==N?(P&&(o[p++]=x,o[p++]=B,P=!1),o[p++]=k[0],o[p++]=k[1]):W===gc.INTERSECTING?(o[p++]=k[0],o[p++]=k[1],P=!1):P=!0,x=k[0],B=k[1],N=W;return(s&&P||D===t+i)&&(o[p++]=x,o[p++]=B),p}drawCustomCoordinates_(e,t,r,i,s){for(let l=0,o=r.length;l<o;++l){const p=r[l],v=this.appendFlatLineCoordinates(e,t,p,i,!1,!1);s.push(v),t=p}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const l=e.getType(),o=e.getStride(),p=this.coordinates.length;let v,x,B,k,P;switch(l){case"MultiPolygon":v=e.getOrientedFlatCoordinates(),k=[];const D=e.getEndss();P=0;for(let N=0,W=D.length;N<W;++N){const V=[];P=this.drawCustomCoordinates_(v,P,D[N],o,V),k.push(V)}this.instructions.push([Hi.CUSTOM,p,k,e,r,M6,s]),this.hitDetectionInstructions.push([Hi.CUSTOM,p,k,e,i||r,M6,s]);break;case"Polygon":case"MultiLineString":B=[],v=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),P=this.drawCustomCoordinates_(v,0,e.getEnds(),o,B),this.instructions.push([Hi.CUSTOM,p,B,e,r,vC,s]),this.hitDetectionInstructions.push([Hi.CUSTOM,p,B,e,i||r,vC,s]);break;case"LineString":case"Circle":v=e.getFlatCoordinates(),x=this.appendFlatLineCoordinates(v,0,v.length,o,!1,!1),this.instructions.push([Hi.CUSTOM,p,x,e,r,T0,s]),this.hitDetectionInstructions.push([Hi.CUSTOM,p,x,e,i||r,T0,s]);break;case"MultiPoint":v=e.getFlatCoordinates(),x=this.appendFlatPointCoordinates(v,o),x>p&&(this.instructions.push([Hi.CUSTOM,p,x,e,r,T0,s]),this.hitDetectionInstructions.push([Hi.CUSTOM,p,x,e,i||r,T0,s]));break;case"Point":v=e.getFlatCoordinates(),this.coordinates.push(v[0],v[1]),x=this.coordinates.length,this.instructions.push([Hi.CUSTOM,p,x,e,r,void 0,s]),this.hitDetectionInstructions.push([Hi.CUSTOM,p,x,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Hi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Hi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,l=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Hi.END_GEOMETRY?l=t:s==Hi.BEGIN_GEOMETRY&&(i[2]=t,a$(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Xp(r||fd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Xp(r||MC);const i=e.getLineCap();t.lineCap=i!==void 0?i:Oy;const s=e.getLineDash();t.lineDash=s?s.slice():Um;const l=e.getLineDashOffset();t.lineDashOffset=l||zm;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Iy;const p=e.getWidth();t.lineWidth=p!==void 0?p:SC;const v=e.getMiterLimit();t.miterLimit=v!==void 0?v:xC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Hi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Hi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,p=e.lineWidth,v=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Q0(e.currentLineDash,s)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=p||e.currentMiterLimit!=v)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=p,e.currentMiterLimit=v)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Hi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=lL(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;L0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class vX extends ZC{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Pg(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Hi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Hi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let p=0,v=i.length;p<v;p+=e.getStride())(!this.maxExtent||Pg(this.maxExtent,i.slice(p,p+2)))&&s.push(i[p],i[p+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Hi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Hi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CX extends ZC{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Hi.MOVE_TO_LINE_TO,s,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Hi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm],_g);const o=e.getFlatCoordinates(),p=e.getStride();this.drawFlatCoordinates_(o,0,o.length,p),this.hitDetectionInstructions.push(P0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Hi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm],_g);const o=e.getEnds(),p=e.getFlatCoordinates(),v=e.getStride();let x=0;for(let B=0,k=o.length;B<k;++B)x=this.drawFlatCoordinates_(p,x,o[B],v);this.hitDetectionInstructions.push(P0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(P0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(P0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(_g)}}class KI extends ZC{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,l=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,p=r.length;this.instructions.push(_g),this.hitDetectionInstructions.push(_g);for(let v=0;v<p;++v){const x=r[v],B=this.coordinates.length,k=this.appendFlatLineCoordinates(e,t,x,i,!0,!o),P=[Hi.MOVE_TO_LINE_TO,B,k];this.instructions.push(P),this.hitDetectionInstructions.push(P),o&&(this.instructions.push(PI),this.hitDetectionInstructions.push(PI)),t=x}return l&&(this.instructions.push(eb),this.hitDetectionInstructions.push(eb)),o&&(this.instructions.push(P0),this.hitDetectionInstructions.push(P0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Hi.SET_FILL_STYLE,fd]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Hi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const o=e.getFlatCoordinates(),p=e.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,p,!1,!1);const x=[Hi.CIRCLE,v];this.instructions.push(_g,x),this.hitDetectionInstructions.push(_g,x),i.fillStyle!==void 0&&(this.instructions.push(eb),this.hitDetectionInstructions.push(eb)),i.strokeStyle!==void 0&&(this.instructions.push(P0),this.hitDetectionInstructions.push(P0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Hi.SET_FILL_STYLE,fd]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Hi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const o=e.getEnds(),p=e.getOrientedFlatCoordinates(),v=e.getStride();this.drawFlatCoordinatess_(p,0,o,v),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Hi.SET_FILL_STYLE,fd]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Hi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const o=e.getEndss(),p=e.getOrientedFlatCoordinates(),v=e.getStride();let x=0;for(let B=0,k=o.length;B<k;++B)x=this.drawFlatCoordinatess_(p,x,o[B],v);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=cg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function _X(n,e,t,r,i){const s=[];let l=t,o=0,p=e.slice(t,2);for(;o<n&&l+i<r;){const[v,x]=p.slice(-2),B=e[l+i],k=e[l+i+1],P=Math.sqrt((B-v)*(B-v)+(k-x)*(k-x));if(o+=P,o>=n){const D=(n-o+P)/P,N=qd(v,B,D),W=qd(x,k,D);p.push(N,W),s.push(p),p=[N,W],o==n&&(l+=i),o=0}else if(o<n)p.push(e[l+i],e[l+i+1]),l+=i;else{const D=P-o,N=qd(v,B,D/P),W=qd(x,k,D/P);p.push(N,W),s.push(p),p=[N,W],o=0,l+=i}}return o>0&&s.push(p),s}function bX(n,e,t,r,i){let s=t,l=t,o=0,p=0,v=t,x,B,k,P,D,N,W,V,$,ie;for(B=t;B<r;B+=i){const ne=e[B],q=e[B+1];D!==void 0&&($=ne-D,ie=q-N,P=Math.sqrt($*$+ie*ie),W!==void 0&&(p+=k,x=Math.acos((W*$+V*ie)/(k*P)),x>n&&(p>o&&(o=p,s=v,l=B),p=0,v=B-i)),k=P,W=$,V=ie),D=ne,N=q}return p+=P,p>o?[v,B]:[s,l]}const m2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class xX extends ZC{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[fd]={fillStyle:fd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!i&&!s)return;const o=this.coordinates;let p=o.length;const v=e.getType();let x=null,B=e.getStride();if(l.placement==="line"&&(v=="LineString"||v=="MultiLineString"||v=="Polygon"||v=="MultiPolygon")){if(!$A(this.maxExtent,e.getExtent()))return;let k;if(x=e.getFlatCoordinates(),v=="LineString")k=[x.length];else if(v=="MultiLineString")k=e.getEnds();else if(v=="Polygon")k=e.getEnds().slice(0,1);else if(v=="MultiPolygon"){const W=e.getEndss();k=[];for(let V=0,$=W.length;V<$;++V)k.push(W[V][0])}this.beginGeometry(e,t,r);const P=l.repeat,D=P?void 0:l.textAlign;let N=0;for(let W=0,V=k.length;W<V;++W){let $;P?$=_X(P*this.resolution,x,N,k[W],B):$=[x.slice(N,k[W])];for(let ie=0,ne=$.length;ie<ne;++ie){const q=$[ie];let te=0,G=q.length;if(D==null){const fe=bX(l.maxAngle,q,0,q.length,2);te=fe[0],G=fe[1]}for(let fe=te;fe<G;fe+=B)o.push(q[fe],q[fe+1]);const oe=o.length;N=k[W],this.drawChars_(p,oe),p=oe}}this.endGeometry(t)}else{let k=l.overflow?null:[];switch(v){case"Point":case"MultiPoint":x=e.getFlatCoordinates();break;case"LineString":x=e.getFlatMidpoint();break;case"Circle":x=e.getCenter();break;case"MultiLineString":x=e.getFlatMidpoints(),B=2;break;case"Polygon":x=e.getFlatInteriorPoint(),l.overflow||k.push(x[2]/this.resolution),B=3;break;case"MultiPolygon":const ne=e.getFlatInteriorPoints();x=[];for(let q=0,te=ne.length;q<te;q+=3)l.overflow||k.push(ne[q+2]/this.resolution),x.push(ne[q],ne[q+1]);if(x.length===0)return;B=2;break}const P=this.appendFlatPointCoordinates(x,B);if(P===p)return;if(k&&(P-p)/2!==x.length/B){let ne=p/2;k=k.filter((q,te)=>{const G=o[(ne+te)*2]===x[te*B]&&o[(ne+te)*2+1]===x[te*B+1];return G||--ne,G})}this.saveTextStates_();const D=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,N=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,r);let W=l.padding;if(W!=Cg&&(l.scale[0]<0||l.scale[1]<0)){let ne=l.padding[0],q=l.padding[1],te=l.padding[2],G=l.padding[3];l.scale[0]<0&&(q=-q,G=-G),l.scale[1]<0&&(ne=-ne,te=-te),W=[ne,q,te,G]}const V=this.pixelRatio;this.instructions.push([Hi.DRAW_IMAGE,p,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,W==Cg?Cg:W.map(function(ne){return ne*V}),D,N,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,k]);const $=1/V,ie=D?D.slice(0):null;ie&&(ie[1]=fd),this.hitDetectionInstructions.push([Hi.DRAW_IMAGE,p,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[$,$],NaN,this.declutterMode_,this.declutterImageWithText_,W,ie,N,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?fd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,k]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||wC,justify:t.justify,textBaseline:t.textBaseline||h2,scale:t.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,v=m2[i.textBaseline],x=this.textOffsetY_*p,B=this.text_,k=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Hi.DRAW_CHARS,e,t,v,i.overflow,o,i.maxAngle,p,x,s,k*p,B,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Hi.DRAW_CHARS,e,t,v,i.overflow,o&&fd,i.maxAngle,p,x,s,k*p,B,l,1/p,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const l=e.getFill();l?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Xp(l.getColor()||fd)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const N=o.getLineDash(),W=o.getLineDashOffset(),V=o.getWidth(),$=o.getMiterLimit();s.lineCap=o.getLineCap()||Oy,s.lineDash=N?N.slice():Um,s.lineDashOffset=W===void 0?zm:W,s.lineJoin=o.getLineJoin()||Iy,s.lineWidth=V===void 0?SC:V,s.miterLimit=$===void 0?xC:$,s.strokeStyle=Xp(o.getColor()||MC)}r=this.textState_;const p=e.getFont()||YL;qL(p);const v=e.getScaleArray();r.overflow=e.getOverflow(),r.font=p,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||h2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Cg,r.scale=v===void 0?[1,1]:v;const x=e.getOffsetX(),B=e.getOffsetY(),k=e.getRotateWithView(),P=e.getKeepUpright(),D=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=k===void 0?!1:k,this.textKeepUpright_=P===void 0?!0:P,this.textRotation_=D===void 0?0:D,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Uo(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Uo(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const MX={Circle:KI,Default:ZC,Image:vX,LineString:CX,Polygon:KI,Text:xX};class iU{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const l=MX[t];s=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function wX(n,e,t,r,i,s,l,o,p,v,x,B,k=!0){let P=n[e],D=n[e+1],N=0,W=0,V=0,$=0;function ie(){N=P,W=D,e+=r,P=n[e],D=n[e+1],$+=V,V=Math.sqrt((P-N)*(P-N)+(D-W)*(D-W))}do ie();while(e<t-r&&$+V<s);let ne=V===0?0:(s-$)/V;const q=qd(N,P,ne),te=qd(W,D,ne),G=e-r,oe=$,fe=s+o*p(v,i,x);for(;e<t-r&&$+V<fe;)ie();ne=V===0?0:(fe-$)/V;const he=qd(N,P,ne),Me=qd(W,D,ne);let me=!1;if(k)if(B){const Je=[q,te,he,Me];_L(Je,0,4,2,B,Je,Je),me=Je[0]>Je[2]}else me=q>he;const pe=Math.PI,qe=[],Se=G+r===e;e=G,V=0,$=oe,P=n[e],D=n[e+1];let vt;if(Se){ie(),vt=Math.atan2(D-W,P-N),me&&(vt+=vt>0?-pe:pe);const Je=(he+q)/2,Ke=(Me+te)/2;return qe[0]=[Je,Ke,(fe-s)/2,vt,i],qe}i=i.replace(/\n/g," ");for(let Je=0,Ke=i.length;Je<Ke;){ie();let je=Math.atan2(D-W,P-N);if(me&&(je+=je>0?-pe:pe),vt!==void 0){let mt=je-vt;if(mt+=mt>pe?-2*pe:mt<-pe?2*pe:0,Math.abs(mt)>l)return null}vt=je;const Pe=Je;let Le=0;for(;Je<Ke;++Je){const mt=me?Ke-Je-1:Je,Ut=o*p(v,i[mt],x);if(e+r<t&&$+V<s+Le+Ut/2)break;Le+=Ut}if(Je===Pe)continue;const Xe=me?i.substring(Ke-Pe,Ke-Je):i.substring(Pe,Je);ne=V===0?0:(s+Le/2-$)/V;const Ct=qd(N,P,ne),Gt=qd(W,D,ne);qe.push([Ct,Gt,Le/2,je,Xe]),s+=Le}return qe}class sO{constructor(){Pn(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(c2(),{get:(e,t)=>{if(typeof c2()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const l=t[++r];if(typeof e[s]=="function")e[s](...l);else{if(typeof l=="function"){e[s]=l(e);continue}e[s]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const _1=Lf(),v0=[],Tm=[],km=[],C0=[];function RI(n){return n[3].declutterBox}const DI=new RegExp("[-----]");function B4(n,e){return e==="start"?e=DI.test(n)?"right":"left":e==="end"&&(e=DI.test(n)?"left":"right"),m2[e]}function SX(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function EX(n,e,t){return t%2===0&&(n+=e),n}class BX{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=yd(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new sO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const l=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,p=this.textStates[t],v=this.pixelRatio,x=[p.scale[0]*v,p.scale[1]*v],B=p.justify?m2[p.justify]:B4(Array.isArray(e)?e[0]:e,p.textAlign||wC),k=i&&l.lineWidth?l.lineWidth:0,P=Array.isArray(e)?e:String(e).split(`
`).reduce(SX,[]),{width:D,height:N,widths:W,heights:V,lineWidths:$}=YZ(p,P),ie=D+k,ne=[],q=(ie+2)*x[0],te=(N+k)*x[1],G={width:q<0?Math.floor(q):Math.ceil(q),height:te<0?Math.floor(te):Math.ceil(te),contextInstructions:ne};(x[0]!=1||x[1]!=1)&&ne.push("scale",x),i&&(ne.push("strokeStyle",l.strokeStyle),ne.push("lineWidth",k),ne.push("lineCap",l.lineCap),ne.push("lineJoin",l.lineJoin),ne.push("miterLimit",l.miterLimit),ne.push("setLineDash",[l.lineDash]),ne.push("lineDashOffset",l.lineDashOffset)),r&&ne.push("fillStyle",o.fillStyle),ne.push("textBaseline","middle"),ne.push("textAlign","center");const oe=.5-B;let fe=B*ie+oe*k;const he=[],Me=[];let me=0,pe=0,qe=0,Se=0,vt;for(let Je=0,Ke=P.length;Je<Ke;Je+=2){const je=P[Je];if(je===`
`){pe+=me,me=0,fe=B*ie+oe*k,++Se;continue}const Pe=P[Je+1]||p.font;Pe!==vt&&(i&&he.push("font",Pe),r&&Me.push("font",Pe),vt=Pe),me=Math.max(me,V[qe]);const Le=[je,fe+oe*W[qe]+B*(W[qe]-$[Se]),.5*(k+me)+pe];fe+=W[qe],i&&he.push("strokeText",Le),r&&Me.push("fillText",Le),++qe}return Array.prototype.push.apply(ne,he),Array.prototype.push.apply(ne,Me),this.labels_[s]=G,G}replayTextBackground_(e,t,r,i,s,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,l,o,p,v,x,B,k,P,D,N,W){o*=k[0],p*=k[1];let V=r-o,$=i-p;const ie=s+v>e?e-v:s,ne=l+x>t?t-x:l,q=D[3]+ie*k[0]+D[1],te=D[0]+ne*k[1]+D[2],G=V-D[3],oe=$-D[0];(N||B!==0)&&(v0[0]=G,C0[0]=G,v0[1]=oe,Tm[1]=oe,Tm[0]=G+q,km[0]=Tm[0],km[1]=oe+te,C0[1]=km[1]);let fe;return B!==0?(fe=sm(yd(),r,i,1,1,B,-r,-i),Lu(fe,v0),Lu(fe,Tm),Lu(fe,km),Lu(fe,C0),Wm(Math.min(v0[0],Tm[0],km[0],C0[0]),Math.min(v0[1],Tm[1],km[1],C0[1]),Math.max(v0[0],Tm[0],km[0],C0[0]),Math.max(v0[1],Tm[1],km[1],C0[1]),_1)):Wm(Math.min(G,G+q),Math.min(oe,oe+te),Math.max(G,G+q),Math.max(oe,oe+te),_1),P&&(V=Math.round(V),$=Math.round($)),{drawImageX:V,drawImageY:$,drawImageW:ie,drawImageH:ne,originX:v,originY:x,declutterBox:{minX:_1[0],minY:_1[1],maxX:_1[2],maxY:_1[3],value:W},canvasTransform:fe,scale:k}}replayImageOrLabel_(e,t,r,i,s,l,o){const p=!!(l||o),v=i.declutterBox,x=o?o[2]*i.scale[0]/2:0;return v.minX-x<=t[0]&&v.maxX+x>=0&&v.minY-x<=t[1]&&v.maxY+x>=0&&(p&&this.replayTextBackground_(e,v0,Tm,km,C0,l,o),qZ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Lu(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],l=this.createLabel(e,t,i,r),o=this.strokeStates[r],p=this.pixelRatio,v=B4(Array.isArray(e)?e[0]:e,s.textAlign||wC),x=m2[s.textBaseline||h2],B=o&&o.lineWidth?o.lineWidth:0,k=l.width/p-2*s.scale[0],P=v*k+2*(.5-v)*B,D=x*l.height/p+2*(.5-x)*B;return{label:l,anchorX:P,anchorY:D}}execute_(e,t,r,i,s,l,o,p){const v=this.zIndexContext_;let x;this.pixelCoordinates_&&Q0(r,this.renderedTransform_)?x=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),x=z0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),lZ(this.renderedTransform_,r));let B=0;const k=i.length;let P=0,D,N,W,V,$,ie,ne,q,te,G,oe,fe,he,Me=0,me=0;const pe=this.coordinateCache_,qe=this.viewRotation_,Se=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,vt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:qe},Je=this.instructions!=i||this.overlaps?0:200;let Ke,je,Pe,Le;for(;B<k;){const Xe=i[B];switch(Xe[0]){case Hi.BEGIN_GEOMETRY:Ke=Xe[1],Le=Xe[3],Ke.getGeometry()?o!==void 0&&!$A(o,Le.getExtent())?B=Xe[2]+1:++B:B=Xe[2],v&&(v.zIndex=Xe[4]);break;case Hi.BEGIN_PATH:Me>Je&&(this.fill_(e),Me=0),me>Je&&(e.stroke(),me=0),!Me&&!me&&(e.beginPath(),$=NaN,ie=NaN),++B;break;case Hi.CIRCLE:P=Xe[1];const Gt=x[P],mt=x[P+1],Ut=x[P+2],kt=x[P+3],Te=Ut-Gt,Re=kt-mt,Ue=Math.sqrt(Te*Te+Re*Re);e.moveTo(Gt+Ue,mt),e.arc(Gt,mt,Ue,0,2*Math.PI,!0),++B;break;case Hi.CLOSE_PATH:e.closePath(),++B;break;case Hi.CUSTOM:P=Xe[1],D=Xe[2];const nt=Xe[3],_t=Xe[4],gt=Xe[5];vt.geometry=nt,vt.feature=Ke,B in pe||(pe[B]=[]);const Kt=pe[B];gt?gt(x,P,D,2,Kt):(Kt[0]=x[P],Kt[1]=x[P+1],Kt.length=2),v&&(v.zIndex=Xe[6]),_t(Kt,vt),++B;break;case Hi.DRAW_IMAGE:P=Xe[1],D=Xe[2],te=Xe[3],N=Xe[4],W=Xe[5];let $t=Xe[6];const Rt=Xe[7],_n=Xe[8],pr=Xe[9],nn=Xe[10];let Xn=Xe[11];const Fn=Xe[12];let an=Xe[13];V=Xe[14]||"declutter";const Bn=Xe[15];if(!te&&Xe.length>=20){G=Xe[19],oe=Xe[20],fe=Xe[21],he=Xe[22];const Qt=this.drawLabelWithPointPlacement_(G,oe,fe,he);te=Qt.label,Xe[3]=te;const Nt=Xe[23];N=(Qt.anchorX-Nt)*this.pixelRatio,Xe[4]=N;const rn=Xe[24];W=(Qt.anchorY-rn)*this.pixelRatio,Xe[5]=W,$t=te.height,Xe[6]=$t,an=te.width,Xe[13]=an}let Cr;Xe.length>25&&(Cr=Xe[25]);let lr,hr,We;Xe.length>17?(lr=Xe[16],hr=Xe[17],We=Xe[18]):(lr=Cg,hr=null,We=null),nn&&Se?Xn+=qe:!nn&&!Se&&(Xn-=qe);let ce=0;for(;P<D;P+=2){if(Cr&&Cr[ce++]<an/this.pixelRatio)continue;const Qt=this.calculateImageOrLabelDimensions_(te.width,te.height,x[P],x[P+1],an,$t,N,W,_n,pr,Xn,Fn,s,lr,!!hr||!!We,Ke),Nt=[e,t,te,Qt,Rt,hr,We];if(p){let rn,Rn,Dn;if(Bn){const Jt=D-P;if(!Bn[Jt]){Bn[Jt]={args:Nt,declutterMode:V};continue}const br=Bn[Jt];rn=br.args,Rn=br.declutterMode,delete Bn[Jt],Dn=RI(rn)}let mr,Tr;if(rn&&(Rn!=="declutter"||!p.collides(Dn))&&(mr=!0),(V!=="declutter"||!p.collides(Qt.declutterBox))&&(Tr=!0),Rn==="declutter"&&V==="declutter"){const Jt=mr&&Tr;mr=Jt,Tr=Jt}mr&&(Rn!=="none"&&p.insert(Dn),this.replayImageOrLabel_.apply(this,rn)),Tr&&(V!=="none"&&p.insert(Qt.declutterBox),this.replayImageOrLabel_.apply(this,Nt))}else this.replayImageOrLabel_.apply(this,Nt)}++B;break;case Hi.DRAW_CHARS:const ye=Xe[1],rt=Xe[2],Et=Xe[3],Ht=Xe[4];he=Xe[5];const Zt=Xe[6],Jn=Xe[7],He=Xe[8];fe=Xe[9];const ae=Xe[10];G=Xe[11],Array.isArray(G)&&(G=G.reduce(EX,"")),oe=Xe[12];const _e=[Xe[13],Xe[13]];V=Xe[14]||"declutter";const f=Xe[15],Qe=this.textStates[oe],Ee=Qe.font,it=[Qe.scale[0]*Jn,Qe.scale[1]*Jn];let ut;Ee in this.widths_?ut=this.widths_[Ee]:(ut={},this.widths_[Ee]=ut);const at=JB(x,ye,rt,2),zt=Math.abs(it[0])*MI(Ee,G,ut);if(Ht||zt<=at){const Qt=this.textStates[oe].textAlign,Nt=(at-zt)*B4(G,Qt),rn=wX(x,ye,rt,2,G,Nt,Zt,Math.abs(it[0]),MI,Ee,ut,Se?0:this.viewRotation_,f);e:if(rn){const Rn=[];let Dn,mr,Tr,Jt,br;if(fe)for(Dn=0,mr=rn.length;Dn<mr;++Dn){br=rn[Dn],Tr=br[4],Jt=this.createLabel(Tr,oe,"",fe),N=br[2]+(it[0]<0?-ae:ae),W=Et*Jt.height+(.5-Et)*2*ae*it[1]/it[0]-He;const Gr=this.calculateImageOrLabelDimensions_(Jt.width,Jt.height,br[0],br[1],Jt.width,Jt.height,N,W,0,0,br[3],_e,!1,Cg,!1,Ke);if(p&&V==="declutter"&&p.collides(Gr.declutterBox))break e;Rn.push([e,t,Jt,Gr,1,null,null])}if(he)for(Dn=0,mr=rn.length;Dn<mr;++Dn){br=rn[Dn],Tr=br[4],Jt=this.createLabel(Tr,oe,he,""),N=br[2],W=Et*Jt.height-He;const Gr=this.calculateImageOrLabelDimensions_(Jt.width,Jt.height,br[0],br[1],Jt.width,Jt.height,N,W,0,0,br[3],_e,!1,Cg,!1,Ke);if(p&&V==="declutter"&&p.collides(Gr.declutterBox))break e;Rn.push([e,t,Jt,Gr,1,null,null])}p&&V!=="none"&&p.load(Rn.map(RI));for(let Gr=0,Si=Rn.length;Gr<Si;++Gr)this.replayImageOrLabel_.apply(this,Rn[Gr])}}++B;break;case Hi.END_GEOMETRY:if(l!==void 0){Ke=Xe[1];const Qt=l(Ke,Le,V);if(Qt)return Qt}++B;break;case Hi.FILL:Je?Me++:this.fill_(e),++B;break;case Hi.MOVE_TO_LINE_TO:for(P=Xe[1],D=Xe[2],je=x[P],Pe=x[P+1],e.moveTo(je,Pe),$=je+.5|0,ie=Pe+.5|0,P+=2;P<D;P+=2)je=x[P],Pe=x[P+1],ne=je+.5|0,q=Pe+.5|0,(P==D-2||ne!==$||q!==ie)&&(e.lineTo(je,Pe),$=ne,ie=q);++B;break;case Hi.SET_FILL_STYLE:this.alignAndScaleFill_=Xe[2],Me&&(this.fill_(e),Me=0,me&&(e.stroke(),me=0)),e.fillStyle=Xe[1],++B;break;case Hi.SET_STROKE_STYLE:me&&(e.stroke(),me=0),this.setStrokeStyle_(e,Xe),++B;break;case Hi.STROKE:Je?me++:e.stroke(),++B;break;default:++B;break}}Me&&this.fill_(e),me&&e.stroke()}execute(e,t,r,i,s,l){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,l)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const iy=["Polygon","Circle","LineString","Image","Text","Default"],g2=["Image","Text"],OX=iy.filter(n=>!g2.includes(n));class oU{constructor(e,t,r,i,s,l,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=yd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const l in s){const o=s[l];i[l]=new BX(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,l){i=Math.round(i);const o=i*2+1,p=sm(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),v=!this.hitDetectionContext_;v&&(this.hitDetectionContext_=MA(o,o));const x=this.hitDetectionContext_;x.canvas.width!==o||x.canvas.height!==o?(x.canvas.width=o,x.canvas.height=o):v||x.clearRect(0,0,o,o);let B;this.renderBuffer_!==void 0&&(B=Lf(),Jv(B,e),L0(B,t*(this.renderBuffer_+i),B));const k=IX(i);let P;function D(q,te,G){const oe=x.getImageData(0,0,o,o).data;for(let fe=0,he=k.length;fe<he;fe++)if(oe[k[fe]]>0){if(!l||G==="none"||P!=="Image"&&P!=="Text"||l.includes(q)){const Me=(k[fe]-3)/4,me=i-Me%o,pe=i-(Me/o|0),qe=s(q,te,me*me+pe*pe);if(qe)return qe}x.clearRect(0,0,o,o);break}}const N=Object.keys(this.executorsByZIndex_).map(Number);N.sort(rm);let W,V,$,ie,ne;for(W=N.length-1;W>=0;--W){const q=N[W].toString();for($=this.executorsByZIndex_[q],V=iy.length-1;V>=0;--V)if(P=iy[V],ie=$[P],ie!==void 0&&(ne=ie.executeHitDetection(x,p,r,D,B),ne))return ne}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],l=t[3],o=[r,i,r,l,s,l,s,i];return z0(o,0,8,2,e,o),o}isEmpty(){return j0(this.executorsByZIndex_)}execute(e,t,r,i,s,l,o){const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(o?s$:rm),l=l||iy;const v=iy.length;for(let x=0,B=p.length;x<B;++x){const k=p[x].toString(),P=this.executorsByZIndex_[k];for(let D=0,N=l.length;D<N;++D){const W=l[D],V=P[W];if(V!==void 0){const $=o===null?void 0:V.getZIndexContext(),ie=$?$.getContext():e,ne=this.maxExtent_&&W!=="Image"&&W!=="Text";if(ne&&(ie.save(),this.clip(ie,r)),!$||W==="Text"||W==="Image"?V.execute(ie,t,r,i,s,o):$.pushFunction(q=>V.execute(q,t,r,i,s,o)),ne&&ie.restore(),$){$.offset();const q=p[x]*v+D;this.deferredZIndexContexts_[q]||(this.deferredZIndexContexts_[q]=[]),this.deferredZIndexContexts_[q].push($)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(rm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const O4={};function IX(n){if(O4[n]!==void 0)return O4[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let l=0;l<=n;++l){const o=s*s+l*l;if(o>t)break;let p=r[o];p||(p=[],r[o]=p),p.push(((n+s)*e+(n+l))*4+3),s>0&&p.push(((n-s)*e+(n+l))*4+3),l>0&&(p.push(((n+s)*e+(n-l))*4+3),s>0&&p.push(((n-s)*e+(n-l))*4+3))}const i=[];for(let s=0,l=r.length;s<l;++s)r[s]&&i.push(...r[s]);return O4[n]=i,i}const Zd=.5;function sU(n,e,t,r,i,s,l,o,p){const v=p?YB(i):i,x=n[0]*Zd,B=n[1]*Zd,k=MA(x,B);k.imageSmoothingEnabled=!1;const P=k.canvas,D=new XZ(k,Zd,i,null,l,o,p?YC(sZ(),p):null),N=t.length,W=Math.floor((256*256*256-1)/N),V={};for(let ie=1;ie<=N;++ie){const ne=t[ie-1],q=ne.getStyleFunction()||r;if(!q)continue;let te=q(ne,s);if(!te)continue;Array.isArray(te)||(te=[te]);const oe=(ie*W).toString(16).padStart(7,"#00000");for(let fe=0,he=te.length;fe<he;++fe){const Me=te[fe],me=Me.getGeometryFunction()(ne);if(!me||!$A(v,me.getExtent()))continue;const pe=Me.clone(),qe=pe.getFill();qe&&qe.setColor(oe);const Se=pe.getStroke();Se&&(Se.setColor(oe),Se.setLineDash(null)),pe.setText(void 0);const vt=Me.getImage();if(vt){const Pe=vt.getImageSize();if(!Pe)continue;const Le=MA(Pe[0],Pe[1],void 0,{alpha:!1}),Xe=Le.canvas;Le.fillStyle=oe,Le.fillRect(0,0,Xe.width,Xe.height),pe.setImage(new f2({img:Xe,anchor:vt.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:vt.getOrigin(),opacity:1,size:vt.getSize(),scale:vt.getScale(),rotation:vt.getRotation(),rotateWithView:vt.getRotateWithView()}))}const Je=pe.getZIndex()||0;let Ke=V[Je];Ke||(Ke={},V[Je]=Ke,Ke.Polygon=[],Ke.Circle=[],Ke.LineString=[],Ke.Point=[]);const je=me.getType();if(je==="GeometryCollection"){const Pe=me.getGeometriesArrayRecursive();for(let Le=0,Xe=Pe.length;Le<Xe;++Le){const Ct=Pe[Le];Ke[Ct.getType().replace("Multi","")].push(Ct,pe)}}else Ke[je.replace("Multi","")].push(me,pe)}}const $=Object.keys(V).map(Number).sort(rm);for(let ie=0,ne=$.length;ie<ne;++ie){const q=V[$[ie]];for(const te in q){const G=q[te];for(let oe=0,fe=G.length;oe<fe;oe+=2){D.setStyle(G[oe+1]);for(let he=0,Me=e.length;he<Me;++he)D.setTransform(e[he]),D.drawGeometry(G[oe])}}}return k.getImageData(0,0,P.width,P.height)}function aU(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Zd),s=Math.floor(Math.round(n[1])*Zd),l=(xA(i,0,t.width-1)+xA(s,0,t.height-1)*t.width)*4,o=t.data[l],p=t.data[l+1],x=t.data[l+2]+256*(p+256*o),B=Math.floor((256*256*256-1)/e.length);x&&x%B===0&&r.push(e[x/B-1])}return r}class lU extends Sp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const TX=5;class kX extends GC{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=TX}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return vo()}getData(e){return null}prepareFrame(e){return vo()}renderFrame(e,t){return vo()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===fi.LOADED||t.getState()===fi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=fi.LOADED&&t!=fi.ERROR&&e.addEventListener(co.CHANGE,this.boundHandleImageChange_),t==fi.IDLE&&(e.load(),t=e.getState()),t==fi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const FI=[];let J1=null;function PX(){J1=MA(1,1,void 0,{willReadFrequently:!0})}class aO extends kX{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=yd(),this.pixelTransform=yd(),this.inversePixelTransform=yd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){J1||PX(),J1.clearRect(0,0,1,1);let i;try{J1.drawImage(e,t,r,1,1,0,0,1,1),i=J1.getImageData(0,0,1,1).data}catch{return J1=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,l;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Q0(By(e.style.backgroundColor),By(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&dZ(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",l=MA();const p=l.canvas;s.appendChild(p),o=p.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=l}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Ym(r),s=Cx(r),l=vx(r),o=yx(r);Lu(t.coordinateToPixelTransform,i),Lu(t.coordinateToPixelTransform,s),Lu(t.coordinateToPixelTransform,l),Lu(t.coordinateToPixelTransform,o);const p=this.inversePixelTransform;Lu(p,i),Lu(p,s),Lu(p,l),Lu(p,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,l=e.pixelRatio,o=Math.round(zs(r)/i*l),p=Math.round(zu(r)/i*l);sm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,s,-o/2,-p/2),IL(this.inversePixelTransform,this.pixelTransform);const v=hZ(this.pixelTransform);if(this.useContainer(t,v,this.getBackground(e)),!this.containerReused){const x=this.context.canvas;x.width!=o||x.height!=p?(x.width=o,x.height=p):this.context.clearRect(0,0,o,p),v!==x.style.transform&&(x.style.transform=v)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new lU(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Kf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Kf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new sO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Kf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Kf.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,l,o){const p=s/2,v=l/2,x=i/t,B=-x,k=-e[0]+o,P=-e[1];return sm(this.tempTransform,p,v,x,B,-r,k,P)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class KX extends aO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Lf(),this.wrappedRenderedExtent_=Lf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,l=s.center,o=s.resolution,p=s.projection,v=s.rotation,x=p.getExtent(),B=this.getLayer().getSource(),k=this.getLayer().getDeclutter(),P=t.pixelRatio,D=t.viewHints,N=!(D[Xl.ANIMATING]||D[Xl.INTERACTING]),W=this.context,V=Math.round(zs(i)/o*P),$=Math.round(zu(i)/o*P),ie=B.getWrapX()&&p.canWrapX(),ne=ie?zs(x):null,q=ie?Math.ceil((i[2]-x[2])/ne)+1:1;let te=ie?Math.floor((i[0]-x[0])/ne):0;do{let G=this.getRenderTransform(l,o,0,P,V,$,te*ne);t.declutter&&(G=G.slice(0)),e.execute(W,[W.canvas.width,W.canvas.height],G,v,N,r===void 0?iy:r?g2:OX,r?k&&t.declutter[k]:void 0)}while(++te<q)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=MA(this.context.canvas.width,this.context.canvas.height,FI))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,HC(this.context),FI.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(Kf.PRERENDER)||this.getLayer().hasListener(Kf.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const p=Zp(r.extent);o=$A(p,e.extent),this.clipped_=o&&!$p(p,e.extent),this.clipped_&&this.clipUnrotated(s,e,p)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,p=this.wrappedRenderedExtent_,v=this.getLayer(),x=[],B=r[0]*Zd,k=r[1]*Zd;x.push(this.getRenderTransform(i,s,l,Zd,B,k,0).slice());const P=v.getSource(),D=o.getExtent();if(P.getWrapX()&&o.canWrapX()&&!$p(D,p)){let N=p[0];const W=zs(D);let V=0,$;for(;N<D[0];)--V,$=W*V,x.push(this.getRenderTransform(i,s,l,Zd,B,k,$).slice()),N+=W;for(V=0,N=p[2];N>D[2];)++V,$=W*V,x.push(this.getRenderTransform(i,s,l,Zd,B,k,$).slice()),N-=W}this.hitDetectionImageData_=sU(r,x,this.renderedFeatures_,v.getStyleFunction(),p,s,l,E6(s,this.renderedPixelRatio_),null)}t(aU(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){var k,P;if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,p=this.getLayer(),v={},x=function(D,N,W){const V=Uo(D),$=v[V];if($){if($!==!0&&W<$.distanceSq){if(W===0)return v[V]=!0,s.splice(s.lastIndexOf($),1),i(D,p,N);$.geometry=N,$.distanceSq=W}}else{if(W===0)return v[V]=!0,i(D,p,N);s.push(v[V]={feature:D,layer:p,geometry:N,distanceSq:W,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,r,x,B?(P=(k=t.declutter)==null?void 0:k[B])==null?void 0:P.all().map(D=>D.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Xl.ANIMATING],s=e.viewHints[Xl.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=e.extent,v=e.viewState,x=v.projection,B=v.resolution,k=e.pixelRatio,P=t.getRevision(),D=t.getRenderBuffer();let N=t.getRenderOrder();N===void 0&&(N=eX);const W=v.center.slice(),V=L0(p,D*B),$=V.slice(),ie=[V.slice()],ne=x.getExtent();if(r.getWrapX()&&x.canWrapX()&&!$p(ne,e.extent)){const qe=zs(ne),Se=Math.max(zs(V)/2,qe);V[0]=ne[0]-Se,V[2]=ne[2]+Se,NB(W,x);const vt=fL(ie[0],x);vt[0]<ne[0]&&vt[2]<ne[2]?ie.push([vt[0]+qe,vt[1],vt[2]+qe,vt[3]]):vt[0]>ne[0]&&vt[2]>ne[2]&&ie.push([vt[0]-qe,vt[1],vt[2]-qe,vt[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==P&&this.renderedRenderOrder_==N&&this.renderedFrameDeclutter_===!!e.declutter&&$p(this.wrappedRenderedExtent_,V))return Q0(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=W,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const q=new iU(JL(B,k),V,B,k);let te;for(let qe=0,Se=ie.length;qe<Se;++qe)r.loadFeatures(ie[qe],B,x);const G=E6(B,k);let oe=!0;const fe=(qe,Se)=>{let vt;const Je=qe.getStyleFunction()||t.getStyleFunction();if(Je&&(vt=Je(qe,B)),vt){const Ke=this.renderFeature(qe,G,vt,q,te,this.getLayer().getDeclutter(),Se);oe=oe&&!Ke}},he=YB(V),Me=r.getFeaturesInExtent(he);N&&Me.sort(N);for(let qe=0,Se=Me.length;qe<Se;++qe)fe(Me[qe],qe);this.renderedFeatures_=Me,this.ready=oe;const me=q.finish(),pe=new oU(V,B,k,r.getOverlaps(),me,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=P,this.renderedRenderOrder_=N,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=$,this.wrappedRenderedExtent_=V,this.renderedCenter_=W,this.renderedProjection_=x,this.renderedPixelRatio_=k,this.replayGroup_=pe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,l,o){if(!r)return!1;let p=!1;if(Array.isArray(r))for(let v=0,x=r.length;v<x;++v)p=p2(i,e,r[v],t,this.boundHandleStyleImageChange_,s,l,o)||p;else p=p2(i,e,r,t,this.boundHandleStyleImageChange_,s,l,o);return p}}let Gg=0;const zh=1<<Gg++,Ps=1<<Gg++,md=1<<Gg++,mp=1<<Gg++,Fg=1<<Gg++,kv=1<<Gg++,tb=Math.pow(2,Gg)-1,lO={[zh]:"boolean",[Ps]:"number",[md]:"string",[mp]:"color",[Fg]:"number[]",[kv]:"size"},RX=Object.keys(lO).map(Number).sort(rm);function DX(n){return n in lO}function Pv(n){const e=[];for(const t of RX)Kv(n,t)&&e.push(lO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Kv(n,e){return(n&e)===e}function _0(n,e){return n===e}class nc{constructor(e,t){if(!DX(e))throw new Error(`literal expressions must have a specific type, got ${Pv(e)}`);this.type=e,this.value=t}}class FX{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function AU(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Yc(n,e,t){switch(typeof n){case"boolean":{if(_0(e,md))return new nc(md,n?"true":"false");if(!Kv(e,zh))throw new Error(`got a boolean, but expected ${Pv(e)}`);return new nc(zh,n)}case"number":{if(_0(e,kv))return new nc(kv,ph(n));if(_0(e,zh))return new nc(zh,!!n);if(_0(e,md))return new nc(md,n.toString());if(!Kv(e,Ps))throw new Error(`got a number, but expected ${Pv(e)}`);return new nc(Ps,n)}case"string":{if(_0(e,mp))return new nc(mp,tO(n));if(_0(e,zh))return new nc(zh,!!n);if(!Kv(e,md))throw new Error(`got a string, but expected ${Pv(e)}`);return new nc(md,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return VX(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(_0(e,kv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new nc(kv,n)}if(_0(e,mp)){if(n.length===3)return new nc(mp,[...n,1]);if(n.length===4)return new nc(mp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Kv(e,Fg))throw new Error(`got an array of numbers, but expected ${Pv(e)}`);return new nc(Fg,n)}const Wn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},LX={[Wn.Get]:go(Vo(1,1/0),LI),[Wn.Var]:go(Vo(1,1),UX),[Wn.Has]:go(Vo(1,1/0),LI),[Wn.Id]:go(zX,b1),[Wn.Concat]:go(Vo(2,1/0),ca(md)),[Wn.GeometryType]:go(NX,b1),[Wn.LineMetric]:go(b1),[Wn.Resolution]:go(I4,b1),[Wn.Zoom]:go(I4,b1),[Wn.Time]:go(I4,b1),[Wn.Any]:go(Vo(2,1/0),ca(zh)),[Wn.All]:go(Vo(2,1/0),ca(zh)),[Wn.Not]:go(Vo(1,1),ca(zh)),[Wn.Equal]:go(Vo(2,2),ca(tb)),[Wn.NotEqual]:go(Vo(2,2),ca(tb)),[Wn.GreaterThan]:go(Vo(2,2),ca(Ps)),[Wn.GreaterThanOrEqualTo]:go(Vo(2,2),ca(Ps)),[Wn.LessThan]:go(Vo(2,2),ca(Ps)),[Wn.LessThanOrEqualTo]:go(Vo(2,2),ca(Ps)),[Wn.Multiply]:go(Vo(2,1/0),UI),[Wn.Coalesce]:go(Vo(2,1/0),UI),[Wn.Divide]:go(Vo(2,2),ca(Ps)),[Wn.Add]:go(Vo(2,1/0),ca(Ps)),[Wn.Subtract]:go(Vo(2,2),ca(Ps)),[Wn.Clamp]:go(Vo(3,3),ca(Ps)),[Wn.Mod]:go(Vo(2,2),ca(Ps)),[Wn.Pow]:go(Vo(2,2),ca(Ps)),[Wn.Abs]:go(Vo(1,1),ca(Ps)),[Wn.Floor]:go(Vo(1,1),ca(Ps)),[Wn.Ceil]:go(Vo(1,1),ca(Ps)),[Wn.Round]:go(Vo(1,1),ca(Ps)),[Wn.Sin]:go(Vo(1,1),ca(Ps)),[Wn.Cos]:go(Vo(1,1),ca(Ps)),[Wn.Atan]:go(Vo(1,2),ca(Ps)),[Wn.Sqrt]:go(Vo(1,1),ca(Ps)),[Wn.Match]:go(Vo(4,1/0),zI,jX),[Wn.Between]:go(Vo(3,3),ca(Ps)),[Wn.Interpolate]:go(Vo(6,1/0),zI,GX),[Wn.Case]:go(Vo(3,1/0),WX,QX),[Wn.In]:go(Vo(2,2),YX),[Wn.Number]:go(Vo(1,1/0),ca(tb)),[Wn.String]:go(Vo(1,1/0),ca(tb)),[Wn.Array]:go(Vo(1,1/0),ca(Ps)),[Wn.Color]:go(Vo(1,4),ca(Ps)),[Wn.Band]:go(Vo(1,3),ca(Ps)),[Wn.Palette]:go(Vo(2,2),qX),[Wn.ToString]:go(Vo(1,1),ca(zh|Ps|md|mp))};function LI(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=n[s+1];switch(typeof l){case"number":{i[s]=new nc(Ps,l);break}case"string":{i[s]=new nc(md,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}s===0&&t.properties.add(String(l))}return i}function UX(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new nc(md,r)]}function zX(n,e,t){t.featureId=!0}function NX(n,e,t){t.geometryType=!0}function I4(n,e,t){t.mapState=!0}function b1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Vo(n,e){return function(t,r,i){const s=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${l}`)}}}function UI(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=Yc(n[s+1],e,t);i[s]=l}return i}function ca(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let l=0;l<i;++l){const o=Yc(e[l+1],n,r);s[l]=o}return s}}function WX(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function zI(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function jX(n,e,t){const r=n.length-1,i=md|Ps|zh,s=Yc(n[1],i,t),l=Yc(n[n.length-1],e,t),o=new Array(r-2);for(let p=0;p<r-2;p+=2){try{const v=Yc(n[p+2],s.type,t);o[p]=v}catch(v){throw new Error(`failed to parse argument ${p+1} of match expression: ${v.message}`)}try{const v=Yc(n[p+3],l.type,t);o[p+1]=v}catch(v){throw new Error(`failed to parse argument ${p+2} of match expression: ${v.message}`)}}return[s,...o,l]}function GX(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const p=r[1];if(typeof p!="number"||p<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(p)} instead`);i=p;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new nc(Ps,i);let l;try{l=Yc(n[2],Ps,t)}catch(p){throw new Error(`failed to parse argument 1 in interpolate expression: ${p.message}`)}const o=new Array(n.length-3);for(let p=0;p<o.length;p+=2){try{const v=Yc(n[p+3],Ps,t);o[p]=v}catch(v){throw new Error(`failed to parse argument ${p+2} for interpolate expression: ${v.message}`)}try{const v=Yc(n[p+4],e,t);o[p+1]=v}catch(v){throw new Error(`failed to parse argument ${p+3} for interpolate expression: ${v.message}`)}}return[s,l,...o]}function QX(n,e,t){const r=Yc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const l=Yc(n[s+1],zh,t);i[s]=l}catch(l){throw new Error(`failed to parse argument ${s} of case expression: ${l.message}`)}try{const l=Yc(n[s+2],r.type,t);i[s+1]=l}catch(l){throw new Error(`failed to parse argument ${s+1} of case expression: ${l.message}`)}}return i[i.length-1]=r,i}function YX(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=md}else i=Ps;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const p=Yc(r[o],i,t);s[o]=p}catch(p){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${p.message}`)}return[Yc(n[1],i,t),...s]}function qX(n,e,t){let r;try{r=Yc(n[1],Ps,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let l=0;l<s.length;l++){let o;try{o=Yc(i[l],mp,t)}catch(p){throw new Error(`failed to parse color at index ${l} in palette expression: ${p.message}`)}if(!(o instanceof nc))throw new Error(`the palette color at index ${l} must be a literal value`);s[l]=o}return[r,...s]}function go(...n){return function(e,t,r){const i=e[0];let s;for(let l=0;l<n.length;l++){const o=n[l](e,t,r);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new FX(t,i,...s)}}function VX(n,e,t){const r=n[0],i=LX[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function uU(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return uU(n.getGeometries()[0]);default:return""}}function cU(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function qm(n,e,t){const r=Yc(n,e,t);return bp(r)}function bp(n,e){if(n instanceof nc){if(n.type===mp&&typeof n.value=="string"){const r=tO(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Wn.Number:case Wn.String:case Wn.Coalesce:return HX(n);case Wn.Get:case Wn.Var:case Wn.Has:return $X(n);case Wn.Id:return r=>r.featureId;case Wn.GeometryType:return r=>r.geometryType;case Wn.Concat:{const r=n.args.map(i=>bp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Wn.Resolution:return r=>r.resolution;case Wn.Any:case Wn.All:case Wn.Between:case Wn.In:case Wn.Not:return XX(n);case Wn.Equal:case Wn.NotEqual:case Wn.LessThan:case Wn.LessThanOrEqualTo:case Wn.GreaterThan:case Wn.GreaterThanOrEqualTo:return ZX(n);case Wn.Multiply:case Wn.Divide:case Wn.Add:case Wn.Subtract:case Wn.Clamp:case Wn.Mod:case Wn.Pow:case Wn.Abs:case Wn.Floor:case Wn.Ceil:case Wn.Round:case Wn.Sin:case Wn.Cos:case Wn.Atan:case Wn.Sqrt:return JX(n);case Wn.Case:return eJ(n);case Wn.Match:return tJ(n);case Wn.Interpolate:return nJ(n);case Wn.ToString:return rJ(n);default:throw new Error(`Unsupported operator ${t}`)}}function HX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Wn.Coalesce:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Wn.Number:case Wn.String:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function $X(n,e){const r=n.args[0].value;switch(n.operator){case Wn.Get:return i=>{const s=n.args;let l=i.properties[r];for(let o=1,p=s.length;o<p;++o){const x=s[o].value;l=l[x]}return l};case Wn.Var:return i=>i.variables[r];case Wn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let l=i.properties[r];for(let o=1,p=s.length;o<p;++o){const x=s[o].value;if(!l||!Object.hasOwn(l,x))return!1;l=l[x]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function ZX(n,e){const t=n.operator,r=bp(n.args[0]),i=bp(n.args[1]);switch(t){case Wn.Equal:return s=>r(s)===i(s);case Wn.NotEqual:return s=>r(s)!==i(s);case Wn.LessThan:return s=>r(s)<i(s);case Wn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Wn.GreaterThan:return s=>r(s)>i(s);case Wn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function XX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Wn.Any:return s=>{for(let l=0;l<r;++l)if(i[l](s))return!0;return!1};case Wn.All:return s=>{for(let l=0;l<r;++l)if(!i[l](s))return!1;return!0};case Wn.Between:return s=>{const l=i[0](s),o=i[1](s),p=i[2](s);return l>=o&&l<=p};case Wn.In:return s=>{const l=i[0](s);for(let o=1;o<r;++o)if(l===i[o](s))return!0;return!1};case Wn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function JX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Wn.Multiply:return s=>{let l=1;for(let o=0;o<r;++o)l*=i[o](s);return l};case Wn.Divide:return s=>i[0](s)/i[1](s);case Wn.Add:return s=>{let l=0;for(let o=0;o<r;++o)l+=i[o](s);return l};case Wn.Subtract:return s=>i[0](s)-i[1](s);case Wn.Clamp:return s=>{const l=i[0](s),o=i[1](s);if(l<o)return o;const p=i[2](s);return l>p?p:l};case Wn.Mod:return s=>i[0](s)%i[1](s);case Wn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Wn.Abs:return s=>Math.abs(i[0](s));case Wn.Floor:return s=>Math.floor(i[0](s));case Wn.Ceil:return s=>Math.ceil(i[0](s));case Wn.Round:return s=>Math.round(i[0](s));case Wn.Sin:return s=>Math.sin(i[0](s));case Wn.Cos:return s=>Math.cos(i[0](s));case Wn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Wn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function eJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function tJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bp(n.args[i]);return i=>{const s=r[0](i);for(let l=1;l<t-1;l+=2)if(s===r[l](i))return r[l+1](i);return r[t-1](i)}}function nJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bp(n.args[i]);return i=>{const s=r[0](i),l=r[1](i);let o,p;for(let v=2;v<t;v+=2){const x=r[v](i);let B=r[v+1](i);const k=Array.isArray(B);if(k&&(B=DZ(B)),x>=l)return v===2?B:k?iJ(s,l,o,p,x,B):Rv(s,l,o,p,x,B);o=x,p=B}return p}}function rJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=bp(n.args[s]);switch(t){case Wn.ToString:return s=>{const l=i[0](s);return n.args[0].type===mp?nO(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Rv(n,e,t,r,i,s){const l=i-t;if(l===0)return r;const o=e-t,p=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return r+p*(s-r)}function iJ(n,e,t,r,i,s){if(i-t===0)return r;const o=_I(r),p=_I(s);let v=p[2]-o[2];v>180?v-=360:v<-180&&(v+=360);const x=[Rv(n,e,t,o[0],i,p[0]),Rv(n,e,t,o[1],i,p[1]),o[2]+Rv(n,e,t,0,i,v),Rv(n,e,t,r[3],i,s[3])];return FZ(x)}function oJ(n){return!0}function sJ(n){const e=AU(),t=aJ(n,e),r=cU();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const l=i.getId();l!==void 0?r.featureId=l:r.featureId=null}return e.geometryType&&(r.geometryType=uU(i.getGeometry())),t(r)}}function NI(n){const e=AU(),t=n.length,r=new Array(t);for(let l=0;l<t;++l)r[l]=B6(n[l],e);const i=cU(),s=new Array(t);return function(l,o){if(i.properties=l.getPropertiesInternal(),i.resolution=o,e.featureId){const v=l.getId();v!==void 0?i.featureId=v:i.featureId=null}let p=0;for(let v=0;v<t;++v){const x=r[v](i);x&&(s[p]=x,p+=1)}return s.length=p,s}}function aJ(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],l="filter"in s?qm(s.filter,zh,e):oJ;let o;if(Array.isArray(s.style)){const p=s.style.length;o=new Array(p);for(let v=0;v<p;++v)o[v]=B6(s.style[v],e)}else o=[B6(s.style,e)];r[i]={filter:l,styles:o}}return function(i){const s=[];let l=!1;for(let o=0;o<t;++o){const p=r[o].filter;if(p(i)&&!(n[o].else&&l)){l=!0;for(const v of r[o].styles){const x=v(i);x&&s.push(x)}}}return s}}function B6(n,e){const t=EC(n,"",e),r=BC(n,"",e),i=lJ(n,e),s=AJ(n,e),l=gd(n,"z-index",e);if(!t&&!r&&!i&&!s&&!j0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Vd;return function(p){let v=!0;if(t){const x=t(p);x&&(v=!1),o.setFill(x)}if(r){const x=r(p);x&&(v=!1),o.setStroke(x)}if(i){const x=i(p);x&&(v=!1),o.setText(x)}if(s){const x=s(p);x&&(v=!1),o.setImage(x)}return l&&o.setZIndex(l(p)),v?null:o}}function EC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=dJ(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=AO(n,e+"fill-color",t)}if(!r)return null;const i=new Fm;return function(s){const l=r(s);return l===eO?null:(i.setColor(l),i)}}function BC(n,e,t){const r=gd(n,e+"stroke-width",t),i=AO(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Dm(n,e+"stroke-line-cap",t),l=Dm(n,e+"stroke-line-join",t),o=hU(n,e+"stroke-line-dash",t),p=gd(n,e+"stroke-line-dash-offset",t),v=gd(n,e+"stroke-miter-limit",t),x=new k0;return function(B){if(i){const k=i(B);if(k===eO)return null;x.setColor(k)}if(r&&x.setWidth(r(B)),s){const k=s(B);if(k!=="butt"&&k!=="round"&&k!=="square")throw new Error("Expected butt, round, or square line cap");x.setLineCap(k)}if(l){const k=l(B);if(k!=="bevel"&&k!=="round"&&k!=="miter")throw new Error("Expected bevel, round, or miter line join");x.setLineJoin(k)}return o&&x.setLineDash(o(B)),p&&x.setLineDashOffset(p(B)),v&&x.setMiterLimit(v(B)),x}}function lJ(n,e){const t="text-",r=Dm(n,t+"value",e);if(!r)return null;const i=EC(n,t,e),s=EC(n,t+"background-",e),l=BC(n,t,e),o=BC(n,t+"background-",e),p=Dm(n,t+"font",e),v=gd(n,t+"max-angle",e),x=gd(n,t+"offset-x",e),B=gd(n,t+"offset-y",e),k=dy(n,t+"overflow",e),P=Dm(n,t+"placement",e),D=gd(n,t+"repeat",e),N=Px(n,t+"scale",e),W=dy(n,t+"rotate-with-view",e),V=gd(n,t+"rotation",e),$=Dm(n,t+"align",e),ie=Dm(n,t+"justify",e),ne=Dm(n,t+"baseline",e),q=dy(n,t+"keep-upright",e),te=hU(n,t+"padding",e),G=Kx(n,t+"declutter-mode"),oe=new kx({declutterMode:G});return function(fe){if(oe.setText(r(fe)),i&&oe.setFill(i(fe)),s&&oe.setBackgroundFill(s(fe)),l&&oe.setStroke(l(fe)),o&&oe.setBackgroundStroke(o(fe)),p&&oe.setFont(p(fe)),v&&oe.setMaxAngle(v(fe)),x&&oe.setOffsetX(x(fe)),B&&oe.setOffsetY(B(fe)),k&&oe.setOverflow(k(fe)),P){const he=P(fe);if(he!=="point"&&he!=="line")throw new Error("Expected point or line for text-placement");oe.setPlacement(he)}if(D&&oe.setRepeat(D(fe)),N&&oe.setScale(N(fe)),W&&oe.setRotateWithView(W(fe)),V&&oe.setRotation(V(fe)),$){const he=$(fe);if(he!=="left"&&he!=="center"&&he!=="right"&&he!=="end"&&he!=="start")throw new Error("Expected left, right, center, start, or end for text-align");oe.setTextAlign(he)}if(ie){const he=ie(fe);if(he!=="left"&&he!=="right"&&he!=="center")throw new Error("Expected left, right, or center for text-justify");oe.setJustify(he)}if(ne){const he=ne(fe);if(he!=="bottom"&&he!=="top"&&he!=="middle"&&he!=="alphabetic"&&he!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");oe.setTextBaseline(he)}return te&&oe.setPadding(te(fe)),q&&oe.setKeepUpright(q(fe)),oe}}function AJ(n,e){return"icon-src"in n?uJ(n,e):"shape-points"in n?cJ(n,e):"circle-radius"in n?hJ(n,e):null}function uJ(n,e){const t="icon-",r=t+"src",i=dU(n[r],r),s=y2(n,t+"anchor",e),l=Px(n,t+"scale",e),o=gd(n,t+"opacity",e),p=y2(n,t+"displacement",e),v=gd(n,t+"rotation",e),x=dy(n,t+"rotate-with-view",e),B=jI(n,t+"anchor-origin"),k=GI(n,t+"anchor-x-units"),P=GI(n,t+"anchor-y-units"),D=gJ(n,t+"color"),N=pJ(n,t+"cross-origin"),W=mJ(n,t+"offset"),V=jI(n,t+"offset-origin"),$=v2(n,t+"width"),ie=v2(n,t+"height"),ne=fJ(n,t+"size"),q=Kx(n,t+"declutter-mode"),te=new f2({src:i,anchorOrigin:B,anchorXUnits:k,anchorYUnits:P,color:D,crossOrigin:N,offset:W,offsetOrigin:V,height:ie,width:$,size:ne,declutterMode:q});return function(G){return o&&te.setOpacity(o(G)),p&&te.setDisplacement(p(G)),v&&te.setRotation(v(G)),x&&te.setRotateWithView(x(G)),l&&te.setScale(l(G)),s&&te.setAnchor(s(G)),te}}function cJ(n,e){const t="shape-",r=t+"points",i=t+"radius",s=O6(n[r],r),l=O6(n[i],i),o=EC(n,t,e),p=BC(n,t,e),v=Px(n,t+"scale",e),x=y2(n,t+"displacement",e),B=gd(n,t+"rotation",e),k=dy(n,t+"rotate-with-view",e),P=v2(n,t+"radius2"),D=v2(n,t+"angle"),N=Kx(n,t+"declutter-mode"),W=new Tx({points:s,radius:l,radius2:P,angle:D,declutterMode:N});return function(V){return o&&W.setFill(o(V)),p&&W.setStroke(p(V)),x&&W.setDisplacement(x(V)),B&&W.setRotation(B(V)),k&&W.setRotateWithView(k(V)),v&&W.setScale(v(V)),W}}function hJ(n,e){const t="circle-",r=EC(n,t,e),i=BC(n,t,e),s=gd(n,t+"radius",e),l=Px(n,t+"scale",e),o=y2(n,t+"displacement",e),p=gd(n,t+"rotation",e),v=dy(n,t+"rotate-with-view",e),x=Kx(n,t+"declutter-mode"),B=new $C({radius:5,declutterMode:x});return function(k){return s&&B.setRadius(s(k)),r&&B.setFill(r(k)),i&&B.setStroke(i(k)),o&&B.setDisplacement(o(k)),p&&B.setRotation(p(k)),v&&B.setRotateWithView(v(k)),l&&B.setScale(l(k)),B}}function gd(n,e,t){if(!(e in n))return;const r=qm(n[e],Ps,t);return function(i){return O6(r(i),e)}}function Dm(n,e,t){if(!(e in n))return null;const r=qm(n[e],md,t);return function(i){return dU(r(i),e)}}function dJ(n,e,t){const r=Dm(n,e+"pattern-src",t),i=WI(n,e+"pattern-offset",t),s=WI(n,e+"pattern-size",t),l=AO(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:l&&l(o)}}}function dy(n,e,t){if(!(e in n))return null;const r=qm(n[e],zh,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function AO(n,e,t){if(!(e in n))return null;const r=qm(n[e],mp,t);return function(i){return fU(r(i),e)}}function hU(n,e,t){if(!(e in n))return null;const r=qm(n[e],Fg,t);return function(i){return XC(r(i),e)}}function y2(n,e,t){if(!(e in n))return null;const r=qm(n[e],Fg,t);return function(i){const s=XC(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function WI(n,e,t){if(!(e in n))return null;const r=qm(n[e],Fg,t);return function(i){return pU(r(i),e)}}function Px(n,e,t){if(!(e in n))return null;const r=qm(n[e],Fg|Ps,t);return function(i){return yJ(r(i),e)}}function v2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function fJ(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return ph(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function pJ(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function jI(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function GI(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function mJ(n,e){const t=n[e];if(t!==void 0)return XC(t,e)}function Kx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function gJ(n,e){const t=n[e];if(t!==void 0)return fU(t,e)}function XC(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function dU(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function O6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function fU(n,e){if(typeof n=="string")return n;const t=XC(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function pU(n,e){const t=XC(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function yJ(n,e){return typeof n=="number"?n:pU(n,e)}const Ap={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function QI(n,e,t){return function(r,i,s,l,o){if(!r)return;if(!i&&!e)return r;const p=e?0:s[0]*i,v=e?0:s[1]*i,x=o?o[0]:0,B=o?o[1]:0;let k=n[0]+p/2+x,P=n[2]-p/2+x,D=n[1]+v/2+B,N=n[3]-v/2+B;k>P&&(k=(P+k)/2,P=k),D>N&&(D=(N+D)/2,N=D);let W=xA(r[0],k,P),V=xA(r[1],D,N);if(l&&t&&i){const $=30*i;W+=-$*Math.log(1+Math.max(0,k-r[0])/$)+$*Math.log(1+Math.max(0,r[0]-P)/$),V+=-$*Math.log(1+Math.max(0,D-r[1])/$)+$*Math.log(1+Math.max(0,r[1]-N)/$)}return[W,V]}}function vJ(n){return n}function mU(n){return Math.pow(n,3)}function Wy(n){return 1-mU(1-n)}function CJ(n){return 3*n*n-2*n*n*n}function _J(n){return n}function uO(n,e,t,r){const i=zs(e)/t[0],s=zu(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function cO(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),xA(r,t/2,e*2)}function bJ(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,l,o){if(i!==void 0){const p=n[0],v=n[n.length-1],x=t?uO(p,t,l,r):p;if(o)return e?cO(i,x,v):xA(i,v,x);const B=Math.min(x,i),k=Math.floor(px(n,B,s));return n[k]>x&&k<n.length-1?n[k+1]:n[k]}}}function xJ(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(l,o,p,v){if(l!==void 0){const x=i?uO(e,i,p,s):e;if(v)return r?cO(l,x,t):xA(l,t,x);const B=1e-9,k=Math.ceil(Math.log(e/x)/Math.log(n)-B),P=-o*(.5-B)+.5,D=Math.min(x,l),N=Math.floor(Math.log(e/D)/Math.log(n)+P),W=Math.max(k,N),V=e/Math.pow(n,W);return xA(V,t,x)}}}function YI(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,l,o,p){if(s!==void 0){const v=r?uO(n,r,o,i):n;return!t||!p?xA(s,e,v):cO(s,v,e)}}}function hO(n){if(n!==void 0)return 0}function qI(n){if(n!==void 0)return n}function MJ(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function wJ(n){const e=U0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const gU=42,dO=256,T4=0;class gp extends Ep{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=QB(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&BL(),e.center&&(e.center=Km(e.center,this.projection_)),e.extent&&(e.extent=Zp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Ap)delete t[o];this.setProperties(t,!0);const r=EJ(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=SJ(e),s=r.constraint,l=BJ(e);this.constraints_={center:i,resolution:s,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),l=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+l,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Km(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Km(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const x=arguments[i];x.center&&this.setCenterInternal(x.center),x.zoom!==void 0?this.setZoom(x.zoom):x.resolution&&this.setResolution(x.resolution),x.rotation!==void 0&&this.setRotation(x.rotation)}if(i===t){r&&nb(r,!0);return}let s=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,p=this.targetRotation_;const v=[];for(;i<t;++i){const x=arguments[i],B={start:s,complete:!1,anchor:x.anchor,duration:x.duration!==void 0?x.duration:1e3,easing:x.easing||CJ,callback:r};if(x.center&&(B.sourceCenter=l,B.targetCenter=x.center.slice(),l=B.targetCenter),x.zoom!==void 0?(B.sourceResolution=o,B.targetResolution=this.getResolutionForZoom(x.zoom),o=B.targetResolution):x.resolution&&(B.sourceResolution=o,B.targetResolution=x.resolution,o=B.targetResolution),x.rotation!==void 0){B.sourceRotation=p;const k=Og(x.rotation-p+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=p+k,p=B.targetRotation}OJ(B)?B.complete=!0:s+=B.duration,v.push(B)}this.animations_.push(v),this.setHint(Xl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Xl.ANIMATING]>0}getInteracting(){return this.hints_[Xl.INTERACTING]>0}cancelAnimations(){this.setHint(Xl.ANIMATING,-this.hints_[Xl.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&nb(i[0].callback,!1),!e)for(let s=0,l=i.length;s<l;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let l=0,o=i.length;l<o;++l){const p=i[l];if(p.complete)continue;const v=e-p.start;let x=p.duration>0?v/p.duration:1;x>=1?(p.complete=!0,x=1):s=!1;const B=p.easing(x);if(p.sourceCenter){const k=p.sourceCenter[0],P=p.sourceCenter[1],D=p.targetCenter[0],N=p.targetCenter[1];this.nextCenter_=p.targetCenter;const W=k+B*(D-k),V=P+B*(N-P);this.targetCenter_=[W,V]}if(p.sourceResolution&&p.targetResolution){const k=B===1?p.targetResolution:p.sourceResolution+B*(p.targetResolution-p.sourceResolution);if(p.anchor){const P=this.getViewportSize_(this.getRotation()),D=this.constraints_.resolution(k,0,P,!0);this.targetCenter_=this.calculateCenterZoom(D,p.anchor)}this.nextResolution_=p.targetResolution,this.targetResolution_=k,this.applyTargetState_(!0)}if(p.sourceRotation!==void 0&&p.targetRotation!==void 0){const k=B===1?Og(p.targetRotation+Math.PI,2*Math.PI)-Math.PI:p.sourceRotation+B*(p.targetRotation-p.sourceRotation);if(p.anchor){const P=this.constraints_.rotation(k,!0);this.targetCenter_=this.calculateCenterRotate(P,p.anchor)}this.nextRotation_=p.targetRotation,this.targetRotation_=k}if(this.applyTargetState_(!0),t=!0,!p.complete)break}if(s){this.animations_[r]=null,this.setHint(Xl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=i[0].callback;l&&nb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],zB(r,e-this.getRotation()),B$(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const l=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[l,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&x6(e,this.getProjection())}getCenterInternal(){return this.get(Ap.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return YB(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();oa(t,"The view center is not defined");const r=this.getResolution();oa(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return oa(i!==void 0,"The view rotation is not defined"),i2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ap.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Zp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=zs(e)/t[0],i=zu(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(Ap.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(l){return Math.log(r/l)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const l=this.getViewportSizeMinusPadding_();i=k4(i,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=px(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=xA(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,xA(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(oa(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){oa(!Ng(e),"Cannot fit empty extent provided as `geometry`");const i=Zp(e,this.getProjection());r=yI(i)}else if(e.getType()==="Circle"){const i=Zp(e.getExtent(),this.getProjection());r=yI(i),r.rotate(this.getRotation(),Uf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),l=e.getStride();let o=1/0,p=1/0,v=-1/0,x=-1/0;for(let B=0,k=s.length;B<k;B+=l){const P=s[B]*r-s[B+1]*i,D=s[B]*i+s[B+1]*r;o=Math.min(o,P),p=Math.min(p,D),v=Math.max(v,P),x=Math.max(x,D)}return[o,p,v,x]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let p=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);p=isNaN(p)?l:Math.max(p,l),p=this.getConstrainedResolution(p,s?0:1);const v=this.getRotation(),x=Math.sin(v),B=Math.cos(v),k=Uf(o);k[0]+=(i[1]-i[3])/2*p,k[1]+=(i[0]-i[2])/2*p;const P=k[0]*B-k[1]*x,D=k[1]*B+k[0]*x,N=this.getConstrainedCenter([P,D],p),W=t.callback?t.callback:mC;t.duration!==void 0?this.animateInternal({resolution:p,center:N,duration:t.duration,easing:t.easing},W):(this.targetResolution_=p,this.targetCenter_=N,this.applyTargetState_(!1,!0),nb(W,!0))}centerOn(e,t,r){this.centerOnInternal(Km(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(k4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-r),p=k4(e,i,[o[0]/2+l[3],o[1]/2+l[0]],t,r);s=[e[0]-p[0],e[1]-p[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=x6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Km(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Km(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Km(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),l=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,l,s,r,this.calculateCenterShift(this.targetCenter_,l,i,s));this.get(Ap.ROTATION)!==i&&this.set(Ap.ROTATION,i),this.get(Ap.RESOLUTION)!==l&&(this.set(Ap.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Ap.CENTER)||!a2(this.get(Ap.CENTER),o))&&this.set(Ap.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,l),p=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,s,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=p,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!a2(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:p,resolution:o,duration:e,easing:Wy,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Xl.INTERACTING,1)}endInteraction(e,t,r){r=r&&Km(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Xl.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function nb(n,e){setTimeout(function(){n(e)},0)}function SJ(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return QI(n.extent,n.constrainOnlyCenter,t)}const e=QB(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,QI(t,!1,!1)}return vJ}function EJ(n){let e,t,r,l=n.minZoom!==void 0?n.minZoom:T4,o=n.maxZoom!==void 0?n.maxZoom:28;const p=n.zoomFactor!==void 0?n.zoomFactor:2,v=n.multiWorld!==void 0?n.multiWorld:!1,x=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,k=QB(n.projection,"EPSG:3857"),P=k.getExtent();let D=n.constrainOnlyCenter,N=n.extent;if(!v&&!N&&k.isGlobal()&&(D=!1,N=P),n.resolutions!==void 0){const W=n.resolutions;t=W[l],r=W[o]!==void 0?W[o]:W[W.length-1],n.constrainResolution?e=bJ(W,x,!D&&N,B):e=YI(t,r,x,!D&&N,B)}else{const V=(P?Math.max(zs(P),zu(P)):360*G0.degrees/k.getMetersPerUnit())/dO/Math.pow(2,T4),$=V/Math.pow(2,28-T4);t=n.maxResolution,t!==void 0?l=0:t=V/Math.pow(p,l),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(p,o):r=V/Math.pow(p,o):r=$),o=l+Math.floor(Math.log(t/r)/Math.log(p)),r=t/Math.pow(p,o-l),n.constrainResolution?e=xJ(p,t,r,x,!D&&N,B):e=YI(t,r,x,!D&&N,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:l,zoomFactor:p}}function BJ(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?wJ():t===!1?qI:typeof t=="number"?MJ(t):qI}return hO}function OJ(n){return!(n.sourceCenter&&n.targetCenter&&!a2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function k4(n,e,t,r,i){const s=Math.cos(-i);let l=Math.sin(-i),o=n[0]*s-n[1]*l,p=n[1]*s+n[0]*l;o+=(e[0]/2-t[0])*r,p+=(t[1]-e[1]/2)*r,l=-l;const v=o*s-p*l,x=p*s+o*l;return[v,x]}const Pa={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class yU extends Ep{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Pa.OPACITY]=e.opacity!==void 0?e.opacity:1,oa(typeof t[Pa.OPACITY]=="number","Layer opacity must be a number"),t[Pa.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Pa.Z_INDEX]=e.zIndex,t[Pa.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Pa.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Pa.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Pa.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=xA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return vo()}getLayerStatesArray(e){return vo()}getExtent(){return this.get(Pa.EXTENT)}getMaxResolution(){return this.get(Pa.MAX_RESOLUTION)}getMinResolution(){return this.get(Pa.MIN_RESOLUTION)}getMinZoom(){return this.get(Pa.MIN_ZOOM)}getMaxZoom(){return this.get(Pa.MAX_ZOOM)}getOpacity(){return this.get(Pa.OPACITY)}getSourceState(){return vo()}getVisible(){return this.get(Pa.VISIBLE)}getZIndex(){return this.get(Pa.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Pa.EXTENT,e)}setMaxResolution(e){this.set(Pa.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Pa.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Pa.MAX_ZOOM,e)}setMinZoom(e){this.set(Pa.MIN_ZOOM,e)}setOpacity(e){oa(typeof e=="number","Layer opacity must be a number"),this.set(Pa.OPACITY,e)}setVisible(e){this.set(Pa.VISIBLE,e)}setZIndex(e){this.set(Pa.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class jy extends yU{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Pa.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Pa.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(hl(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ks(e,co.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof gp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(l=>l.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return fO(i,t.viewState)&&(!s||$A(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof gp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Pa.MAP,e)}getMapInternal(){return this.get(Pa.MAP)}setMap(e){this.mapPrecomposeKey_&&(hl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(hl(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ks(e,Kf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ks(this,co.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);oa(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Pa.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function fO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const VI={RENDER_ORDER:"renderOrder"};class pO extends jy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(VI.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new rU(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(VI.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?$L:e;const t=IJ(e);this.styleFunction_=e===null?void 0:$Z(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function IJ(n){if(n===void 0)return $L;if(!n)return null;if(typeof n=="function"||n instanceof Vd)return n;if(!Array.isArray(n))return NI([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Vd){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!(l instanceof Vd))throw new Error("Expected a list of style instances");i[s]=l}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");i[s]=l}return sJ(i)}return NI(n)}class mO extends pO{constructor(e){super(e)}createRenderer(){return new KX(this)}}class TJ extends rO{constructor(e,t,r,i,s){const l=s!==void 0?fi.IDLE:fi.LOADED;super(e,t,r,l),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=fi.ERROR):this.state=fi.LOADED,this.changed()}load(){this.state==fi.IDLE&&(this.state=fi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const Lr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class JC extends jC{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(co.CHANGE)}release(){this.setState(Lr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Lr.EMPTY){if(this.state!==Lr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){vo()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:mU(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class vU extends JC{constructor(e,t,r,i,s,l){super(e,t,l),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Lr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Lr.ERROR,this.unlistenImage_(),this.image_=kJ(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Lr.LOADED:this.state=Lr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Lr.ERROR&&(this.state=Lr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Lr.IDLE&&(this.state=Lr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=LZ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function kJ(){const n=MA(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class PJ{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],l=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(l,s),this.initialVelocity_=Math.sqrt(s*s+l*l)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class ey extends Sp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class M0 extends ey{constructor(e,t,r,i,s,l){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const VA={SINGLECLICK:"singleclick",CLICK:co.CLICK,DBLCLICK:co.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},I6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class KJ extends jC{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ks(r,I6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ks(r,I6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(co.TOUCHMOVE,this.boundHandleTouchMove_,NL?{passive:!1}:!1)}emulateClick_(e){let t=new M0(VA.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new M0(VA.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new M0(VA.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==VA.POINTERUP||t.type==VA.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==VA.POINTERDOWN||t.type==VA.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new M0(VA.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(hl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new M0(VA.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ks(r,VA.POINTERMOVE,this.handlePointerMove_,this),Ks(r,VA.POINTERUP,this.handlePointerUp_,this),Ks(this.element_,VA.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ks(this.element_.getRootNode(),VA.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new M0(VA.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new M0(VA.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(hl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(co.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(hl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(hl),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Rm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},hh={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},C2=1/0;class RJ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,WC(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){oa(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=C2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],l=r[e],o=e;for(;e<i>>1;){const p=this.getLeftChildIndex_(e),v=this.getRightChildIndex_(e),x=v<i&&r[v]<r[p]?v:p;t[e]=t[x],r[e]=r[x],e=x}t[e]=s,r[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],l=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>l)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let l,o,p;for(o=0;o<s;++o)l=t[o],p=e(l),p==C2?delete this.queuedElements_[this.keyFunction_(l)]:(r[i]=p,t[i++]=l);t.length=i,r.length=i,this.heapify_()}}class CU extends RJ{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(co.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Lr.LOADED||r===Lr.ERROR||r===Lr.EMPTY){r!==Lr.ERROR&&t.removeEventListener(co.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Lr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function DJ(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return C2;const s=n.viewState.center,l=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(l*l+o*o)/i}class gO extends Ep{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)hl(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==mC&&this.listenerKeys.push(Ks(e,Rm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class FJ extends gO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=l):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(p),this.toggleButton_.addEventListener(co.CLICK,this.handleClick_.bind(this),!1);const v=t+" "+Ox+" "+oO+(this.collapsed_&&this.collapsible_?" "+bI:"")+(this.collapsible_?"":" ol-uncollapsible"),x=this.element;x.className=v,x.appendChild(this.toggleButton_),x.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var l;return((l=s.getSource())==null?void 0:l.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>wy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Q0(t,this.renderedAttributions_)){WL(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const l=document.createElement("li");l.innerHTML=t[i],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(bI),this.collapsed_?CI(this.collapseLabel_,this.label_):CI(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class LJ extends gO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(this.label_),l.addEventListener(co.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Ox+" "+oO,p=this.element;p.className=o,p.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add($_)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Wy}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains($_);!s&&r===0?this.element.classList.add($_):s&&r!==0&&this.element.classList.remove($_)}this.label_.style.transform=i}this.rotation_=r}}class UJ extends gO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",p=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",v=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",x=document.createElement("button");x.className=i,x.setAttribute("type","button"),x.title=p,x.appendChild(typeof l=="string"?document.createTextNode(l):l),x.addEventListener(co.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=s,B.setAttribute("type","button"),B.title=v,B.appendChild(typeof o=="string"?document.createTextNode(o):o),B.addEventListener(co.CLICK,this.handleClick_.bind(this,-r),!1);const k=t+" "+Ox+" "+oO,P=this.element;P.className=k,P.appendChild(x),P.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Wy})):r.setZoom(s)}}}function zJ(n){n=n||{};const e=new Jp;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new UJ(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new LJ(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new FJ(n.attributionOptions)),e}const HI={ACTIVE:"active"};class e_ extends Ep{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(HI.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(HI.ACTIVE,e)}setMap(e){this.map_=e}}function NJ(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:_J,center:n.getConstrainedCenter(i)})}}function yO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),l=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:r!==void 0?r:250,easing:Wy})}class WJ extends e_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==VA.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,l=r.shiftKey?-this.delta_:this.delta_,o=i.getView();yO(o,l,s,this.duration_),r.preventDefault(),t=!0}return!t}}function T6(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const jJ=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},GJ=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},_U=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?GJ(n):!0},QJ=pC,bU=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(xZ&&LL&&e.ctrlKey)},xU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},YJ=function(n){const e=n.originalEvent;return LL?e.metaKey:e.ctrlKey},qJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},MU=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},P4=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},VJ=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class t_ extends e_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==VA.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==VA.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==VA.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==VA.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function vO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class HJ extends t_{constructor(e){super({stopDown:mx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:T6(xU,VJ);this.condition_=e.onFocusOnly?T6(_U,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(vO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();O$(s,o.getResolution()),zB(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),p=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(p),duration:500,easing:Wy})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class $J extends t_{constructor(e){e=e||{},super({stopDown:mx}),this.condition_=e.condition?e.condition:jJ,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!P4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===hO)return;const i=t.getSize(),s=e.pixel,l=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return P4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return P4(e)&&bU(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class ZJ extends NC{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Gm([i])}getGeometry(){return this.geometry_}}const x1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class vv extends Sp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class XJ extends t_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new ZJ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??bU,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new vv(x1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new vv(t?x1.BOXEND:x1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new vv(x1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new vv(x1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new vv(x1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class JJ extends XJ{constructor(e){e=e||{};const t=e.condition?e.condition:qJ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),l=r.getResolutionForExtentInternal(s),o=r.getResolution()/l;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Wy})}}const ig={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class eee extends e_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return xU(t)&&MU(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==co.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==ig.DOWN||i==ig.LEFT||i==ig.RIGHT||i==ig.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let p=0,v=0;i==ig.DOWN?v=-o:i==ig.LEFT?p=-o:i==ig.RIGHT?p=o:v=o;const x=[p,v];zB(x,l.getRotation()),NJ(l,x,this.duration_),r.preventDefault(),t=!0}}return!t}}class tee extends e_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!YJ(t)&&MU(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==co.KEYDOWN||e.type==co.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,l=i==="+"?this.delta_:-this.delta_,o=s.getView();yO(o,l,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class nee extends e_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:QJ;this.condition_=e.onFocusOnly?T6(_U,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==co.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==co.WHEEL&&(s=i.deltaY,i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=s;const p=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),p),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-xA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),yO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class ree extends t_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const p=s-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=p}this.lastAngle_=s;const l=e.map,o=l.getView();o.getConstraints().rotation!==hO&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(vO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class iee extends t_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,l=r.clientY-i.clientY,o=Math.sqrt(s*s+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const p=e.map,v=p.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=p.getCoordinateFromPixelInternal(p.getEventPixel(vO(this.targetPointers))),p.render(),v.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function oee(n){n=n||{};const e=new Jp,t=new PJ(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new $J),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new WJ({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new HJ({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new ree),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new iee({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new eee),e.push(new tee({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new nee({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new JJ({duration:n.zoomDuration})),e}class S0 extends Sp{constructor(e,t){super(e),this.layer=t}}const K4={LAYERS:"layers"};class Gy extends yU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(K4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Jp(r.slice(),{unique:!0}):oa(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Jp(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(hl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ks(e,pd.ADD,this.handleLayersAdd_,this),Ks(e,pd.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(hl);WC(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new S0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ks(e,Sy.PROPERTYCHANGE,this.handleLayerChange_,this),Ks(e,co.CHANGE,this.handleLayerChange_,this)];e instanceof Gy&&t.push(Ks(e,"addlayer",this.handleLayerGroupAdd_,this),Ks(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Uo(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new S0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new S0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new S0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Uo(t);this.listenerKeys_[r].forEach(hl),delete this.listenerKeys_[r],this.dispatchEvent(new S0("removelayer",t)),this.changed()}getLayers(){return this.get(K4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new S0("removelayer",r[i]))}this.set(K4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let l=r,o=t.length;l<o;l++){const p=t[l];p.opacity*=i.opacity,p.visible=p.visible&&i.visible,p.maxResolution=Math.min(p.maxResolution,i.maxResolution),p.minResolution=Math.max(p.minResolution,i.minResolution),p.minZoom=Math.max(p.minZoom,i.minZoom),p.maxZoom=Math.min(p.maxZoom,i.maxZoom),i.extent!==void 0&&(p.extent!==void 0?p.extent=_p(p.extent,i.extent):p.extent=i.extent),p.zIndex===void 0&&(p.zIndex=s)}return t}getSourceState(){return"ready"}}class see extends NC{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){vo()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;sm(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),IL(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,l,o,p){let v;const x=t.viewState;function B(ne,q,te,G){return s.call(l,q,ne?te:null,G)}const k=x.projection,P=NB(e.slice(),k),D=[[0,0]];if(k.canWrapX()&&i){const ne=k.getExtent(),q=zs(ne);D.push([-q,0],[q,0])}const N=t.layerStatesArray,W=N.length,V=[],$=[];for(let ne=0;ne<D.length;ne++)for(let q=W-1;q>=0;--q){const te=N[q],G=te.layer;if(G.hasRenderer()&&fO(te,x)&&o.call(p,G)){const oe=G.getRenderer(),fe=G.getSource();if(oe&&fe){const he=fe.getWrapX()?P:e,Me=B.bind(null,te.managed);$[0]=he[0]+D[ne][0],$[1]=he[1]+D[ne][1],v=oe.forEachFeatureAtCoordinate($,t,r,Me,V)}if(v)return v}}if(V.length===0)return;const ie=1/V.length;return V.forEach((ne,q)=>ne.distanceSq+=q*ie),V.sort((ne,q)=>ne.distanceSq-q.distanceSq),V.some(ne=>v=ne.callback(ne.feature,ne.layer,ne.geometry)),v}hasFeatureAtCoordinate(e,t,r,i,s,l){return this.forEachFeatureAtCoordinate(e,t,r,i,pC,this,s,l)!==void 0}getMap(){return this.map_}renderFrame(e){vo()}scheduleExpireIconCache(e){Pf.canExpireCache()&&e.postRenderFunctions.push(aee)}}function aee(n,e){Pf.expire()}class lee extends see{constructor(e){super(e),this.fontChangeListenerKey_=Ks(Np,Sy.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ox+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new lU(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){hl(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Kf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,p)=>o.zIndex-p.zIndex);t.some(o=>o.layer instanceof pO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let l=null;for(let o=0,p=t.length;o<p;++o){const v=t[o];e.layerIndex=o;const x=v.layer,B=x.getSourceState();if(!fO(v,i)||B!="ready"&&B!="undefined"){x.unrender();continue}const k=x.render(e,l);k&&(k!==l&&(this.children_.push(k),l=k),s.push(v))}this.declutter(e,s),BZ(this.element_,this.children_),this.dispatchRenderEvent(Kf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function wU(n){if(n instanceof jy){n.setMapInternal(null);return}n instanceof Gy&&n.getLayers().forEach(wU)}function SU(n,e){if(n instanceof jy){n.setMapInternal(e);return}if(n instanceof Gy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)SU(t[r],e)}}let CO=class extends Ep{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Aee(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:MZ,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=yd(),this.pixelToCoordinateTransform_=yd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||zJ(),this.interactions=t.interactions||oee({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new CU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(hh.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(hh.VIEW,this.handleViewChanged_),this.addChangeListener(hh.SIZE,this.handleSizeChanged_),this.addChangeListener(hh.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof gp)&&e.view.then(function(i){r.setView(new gp(i))}),this.controls.addEventListener(pd.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(pd.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(pd.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(pd.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(pd.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(pd.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){SU(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,l=r.layerFilter!==void 0?r.layerFilter:pC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,l,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Gy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:pC,s=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,l,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],l=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/l]}getTarget(){return this.get(hh.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return x6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Lu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(hh.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Jp){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const l=i.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Km(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Lu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(hh.SIZE)}getView(){return this.get(hh.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return DJ(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new M0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===I6.POINTERDOWN||r===co.WHEEL||r===co.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,l=t.target,o=s instanceof ShadowRoot?s.host===l?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const l=i[s];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const l=e.viewHints;if(l[Xl.ANIMATING]||l[Xl.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Kf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Kf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ey(Rm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ey(Rm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)hl(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(co.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(co.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new lee(this)),this.mapBrowserEventHandler_=new KJ(this,this.moveTolerance_);for(const s in VA)this.mapBrowserEventHandler_.addEventListener(VA[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(co.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(co.WHEEL,this.boundHandleBrowserEvent_,NL?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Ks(r,co.KEYDOWN,this.handleBrowserEvent,this),Ks(r,co.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(hl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(hl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ks(e,Sy.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ks(e,co.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(hl),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new S0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ks(e,Sy.PROPERTYCHANGE,this.render,this),Ks(e,co.CHANGE,this.render,this),Ks(e,"addlayer",this.handleLayerAdd_,this),Ks(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){wU(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&wI(t)&&r&&r.isDef()){const l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:i2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:Uo(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const p=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=i2(o.nextCenter,o.nextResolution,p,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Ng(this.previousExtent_)&&!jm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ey(Rm.MOVESTART,this,i)),this.previousExtent_=zy(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Xl.ANIMATING]&&!s.viewHints[Xl.INTERACTING]&&!jm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ey(Rm.MOVEEND,this,s)),lL(s.extent,this.previousExtent_))),this.dispatchEvent(new ey(Rm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Rm.LOADSTART)||this.hasListener(Rm.LOADEND)||this.hasListener(Kf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new S0("removelayer",t)),this.set(hh.LAYERGROUP,e)}setSize(e){this.set(hh.SIZE,e)}setTarget(e){this.set(hh.TARGET,e)}setView(e){if(!e||e instanceof gp){this.set(hh.VIEW,e);return}this.set(hh.VIEW,new gp);const t=this;e.then(function(r){t.setView(new gp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(l)&&(t=[Math.max(0,s),Math.max(0,l)],!wI(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&bL("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Q0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Aee(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Gy({layers:n.layers});t[hh.LAYERGROUP]=r,t[hh.TARGET]=n.target,t[hh.VIEW]=n.view instanceof gp?n.view:new gp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new Jp(n.controls.slice()):(oa(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Jp(n.interactions.slice()):(oa(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new Jp(n.overlays.slice()):(oa(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new Jp,{controls:i,interactions:s,keyboardEventTarget:e,overlays:l,values:t}}const ch={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class uee extends Ep{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+jZ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ch.ELEMENT,this.handleElementChanged),this.addChangeListener(ch.MAP,this.handleMapChanged),this.addChangeListener(ch.OFFSET,this.handleOffsetChanged),this.addChangeListener(ch.POSITION,this.handlePositionChanged),this.addChangeListener(ch.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(ch.ELEMENT)}getId(){return this.id}getMap(){return this.get(ch.MAP)||null}getOffset(){return this.get(ch.OFFSET)}getPosition(){return this.get(ch.POSITION)}getPositioning(){return this.get(ch.POSITIONING)}handleElementChanged(){WL(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),hl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ks(e,Rm.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(ch.ELEMENT,e)}setMap(e){this.set(ch.MAP,e)}setOffset(e){this.set(ch.OFFSET,e)}setPosition(e){this.set(ch.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(ch.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[SZ(i),EZ(i)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!$p(r,s)){const o=s[0]-r[0],p=r[2]-s[2],v=s[1]-r[1],x=r[3]-s[3],B=[0,0];if(o<0?B[0]=o-l:p<0&&(B[0]=Math.abs(p)+l),v<0?B[1]=v-l:x<0&&(B[1]=Math.abs(x)+l),B[0]!==0||B[1]!==0){const k=t.getView().getCenterInternal(),P=t.getPixelFromCoordinateInternal(k);if(!P)return;const D=[P[0]+B[0],P[1]+B[1]],N=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(D),duration:N.duration,easing:N.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(ch.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let p="0%",v="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?p="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(p="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?v="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(v="-50%");const x=`translate(${p}, ${v}) translate(${l}, ${o})`;this.rendered.transform_!=x&&(this.rendered.transform_=x,r.transform=x)}getOptions(){return this.options}}class _O{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function M1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new _O(n,e,t,r)}const $I=[];class cee extends JC{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=MA(1,1,$I)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Uo(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(HC(this.context_),$I.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let EU=class extends JC{constructor(e,t,r,i,s,l){super(e,t,l),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Lr.IDLE&&(this.setState(Lr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Lr.ERROR)}setFeatures(e){this.features_=e,this.setState(Lr.LOADED)}setLoader(e){this.loader_=e}};const BU="https://api.mapbox.com";function bO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function hee(n,e,t){if(typeof n=="string")return[{id:"default",url:ZI(n,e,t)}];for(const r of n)r.url=ZI(r.url,e,t);return n}function ZI(n,e,t){const r=bO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${BU}/styles/v1/${s}/sprite?access_token=${e}`}function _2(n,e){const t=bO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${BU}/styles/v1/${i}?&access_token=${e}`}const dee=["a","b","c","d"];function Bb(n,e,t,r){const i=new URL(n,r||location.href),s=bO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return dee.map(l=>`https://${l}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const XI={},JI={};let fee=0;function xO(n){return n.id||(n.id=fee++),n.id}function pee(n,e){return xO(n)+"."+Uo(e)}function OU(n){let e=XI[n.id];return e||(e={},XI[xO(n)]=e),e}function mee(n){let e=JI[n.id];return e||(e={},JI[xO(n)]=e),e}function R4(n){return n*Math.PI/180}const om=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function Rx(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function MO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Dv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const w1={};function Ty(n,e,t={},r){if(e in w1)return r&&(r.url=w1[e][0].url),w1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=function(p){return delete w1[e],Promise.reject(new Error("Error fetching source "+e))},l=function(p){return delete w1[e],p.ok?p.json():Promise.reject(new Error("Error fetching source "+e))},o=wy(()=>i).then(p=>p instanceof Response?(r&&(r.url=p.url),l(p)):(p instanceof Request||(p=new Request(p)),p.headers.get("Accept")||p.headers.set("Accept","application/json"),r&&(r.url=p.url),fetch(p).then(l).catch(s))).catch(s);return w1[e]=[i,o],o}function IU(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=_2(n,e.accessToken),Ty("Style",n,e);else return Promise.resolve(n)}const e9={};function TU(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=e9[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,p)=>{const v=t.transformRequest&&t.transformRequest(p,"Tiles")||p;if(o instanceof EU)o.setLoader((x,B,k)=>{const P=function(D){D.arrayBuffer().then(N=>{const V=o.getFormat().readFeatures(N,{extent:x,featureProjection:k});o.setFeatures(V)})};wy(()=>v).then(D=>{if(D instanceof Response)return P(D);fetch(D).then(P).catch(N=>o.setState(Lr.ERROR))}).catch(D=>o.setState(Lr.ERROR))});else{const x=o.getImage();wy(()=>v).then(B=>{if(typeof B=="string"){x.src=B;return}const k=P=>P.blob().then(D=>{const N=URL.createObjectURL(D);x.addEventListener("load",()=>URL.revokeObjectURL(N)),x.addEventListener("error",()=>URL.revokeObjectURL(N)),x.src=N});if(B instanceof Response)return k(B);fetch(B).then(k).catch(P=>o.setState(Lr.ERROR))}).catch(B=>o.setState(Lr.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=Bb(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const p={};i=Ty("Source",o[0],t,p).then(function(v){return v.tiles=v.tiles.map(function(x){return v.scheme==="tms"&&(x=x.replace("{y}","{-y}")),Bb(x,t.accessToken,t.accessTokenParam||"access_token",p.url)[0]}),Promise.resolve({tileJson:v,tileLoadFunction:s})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Bb(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s})):i=Promise.reject(new Error("source has no `tiles` nor `url`"));e9[r]=i}return i}function t9(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=Rx(i[0],i[1]),l=s.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,i[0],i[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const p=o.data;for(let v=0,x=o.width;v<x;++v)for(let B=0,k=o.height;B<k;++B){const P=(B*x+v)*4;p[P+3]>0&&l.arc(v,B,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),s}function gee(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function n9(n,e,t){const r=Rx(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),l=s.data;for(let o=0,p=s.width;o<p;++o)for(let v=0,x=s.height;v<x;++v){const B=(v*p+o)*4,k=l[B+3]/255,P=.75,D=.1,N=gee(P-D,P+D,k);N>0?(l[B+0]=Math.round(255*t.r*N),l[B+1]=Math.round(255*t.g*N),l[B+2]=Math.round(255*t.b*N),l[B+3]=Math.round(255*N)):l[B+3]=0}return i.putImageData(s,0,0),r}const yee=Array(256).join("");function k6(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=yee.slice(0,Math.round(e/.1));for(let s=0,l=r.length;s<l;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let D4;function kU(){return D4||(D4=Rx(1,1).getContext("2d")),D4}function og(n,e){return kU().measureText(n).width+(n.length-1)*e}const r9={};function P6(n,e,t,r){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let p=0,v=l.length;p<v;++p)o.push(P6(l[p],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=r9[i];if(!s){const l=n.split(" ");if(l.length>1){const o=kU();o.font=e;const v=o.measureText("M").width*t;let x="";const B=[];for(let k=0,P=l.length;k<P;++k){const D=l[k],N=x+(x?" ":"")+D;og(N,r)<=v?x=N:(x&&B.push(x),x=D)}x&&B.push(x);for(let k=0,P=B.length;k<P&&P>1;++k){const D=B[k];if(og(D,r)<v*.35){const N=k>0?og(B[k-1],r):1/0,W=k<P-1?og(B[k+1],r):1/0;B.splice(k,1),P-=1,N<W?(B[k-1]+=" "+D,k-=1):B[k]=D+" "+B[k]}}for(let k=0,P=B.length-1;k<P;++k){const D=B[k],N=B[k+1];if(og(D,r)>v*.7&&og(N,r)<v*.6){const W=D.split(" "),V=W.pop();og(V,r)<v*.2&&(B[k]=W.join(" "),B[k+1]=V+" "+N),P-=1}}s=B.join(`
`)}else s=n;s=k6(s,r),r9[i]=s}return s}const vee=/font-family: ?([^;]*);/,Cee=/("|')/g;let rb;function _ee(n){if(!rb){rb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let l=0,o=s.length;l<o;++l){const p=s[l];if(p.type==5){const v=p.cssText.match(vee);rb[v[1].replace(Cee,"")]=!0}}}catch{}}}return n in rb}const F4={};function bee(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in F4)return F4[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const l=n[i],o=c6(l,1);qL(o);const p=o.split(" ");r.push([p.slice(3).join(" ").replace(/"/g,""),p[1],p[0]])}for(let i=0,s=r.length;i<s;++i){const l=r[i],o=l[0];if(!_ee(o)&&Np.get(`${l[2]}
${l[1]} 
${o}`)!==100){const p=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",l[1]).replace("{-fontstyle}",l[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",l[2]);if(!document.querySelector('link[href="'+p+'"]')){const v=document.createElement("link");v.href=p,v.rel="stylesheet",document.head.appendChild(v)}}}return F4[t]=n,n}const xee={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Mee={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},wee=function(n,e){const t=ux(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},K6={},b2={zoom:0};let ib,L4;function Bi(n,e,t,r,i,s,l){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const p=s[o];if(!p[t]){let v=(n[e]||K6)[t];const x=cV[`${e}_${n.type}`][t];v===void 0&&(v=x.default);let B=Ly(v);if(!B&&Fy(v)&&(v=MB(v,x),B=!0),B){const k=wee(v,x);p[t]=k.evaluate.bind(k)}else x.type=="color"&&(v=Ra.parse(v)),p[t]=function(){return v}}return b2.zoom=r,p[t](b2,i,l)}function i9(n,e,t,r,i){return Bi(n,"layout",`${r}-allow-overlap`,e,t,i)?Bi(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function See(n,e,t,r,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=kq(e).filter}catch(s){console.warn("Filter will evaluate to false: "+s.message),i[n]=function(){return!1}}return b2.zoom=r,i[n](b2,t)}function w0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Eee=/\{[^{}}]*\}/g;function U4(n,e){return n.replace(Eee,function(t){return e[t.slice(1,-1)]||""})}function o9(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Bee={};function Oee(n,e,t,r=om,i=void 0,s=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Bee[pee(e,n)]=Array.from(arguments);const p={};(typeof s=="string"||s instanceof Request||s instanceof Response||s instanceof Promise)&&(s={default:s});for(const q in s){const te=s[q];wy(()=>te).then(async G=>{let oe;if(typeof Image<"u"){const fe=new Image;if(typeof G=="string")fe.crossOrigin="anonymous",fe.src=G;else{let he;G instanceof Request?he=await fetch(G):G instanceof Response&&(he=G);const Me=await he.blob();oe=URL.createObjectURL(Me),fe.src=oe}fe.addEventListener("load",function he(){fe.removeEventListener("load",he),p[q]={image:fe,size:[fe.width,fe.height]},n.changed(),oe&&URL.revokeObjectURL(oe)}),fe.addEventListener("error",function he(){URL.revokeObjectURL(oe),fe.removeEventListener("error",he)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const fe=self;fe.postMessage({action:"loadImage",src:G}),fe.addEventListener("message",function(Me){Me.data.action==="imageLoaded"&&Me.data.src===G&&(p[q]={image:Me.data.image,size:[Me.data.image.width,Me.data.image.height]})})}})}const v=iB(e.layers),x={},B=[],k={},P={},D=OU(e),N=mee(e);let W;for(let q=0,te=v.length;q<te;++q){const G=v[q],oe=G.id;if(typeof t=="string"&&G.source==t||Array.isArray(t)&&t.indexOf(oe)!==-1){const fe=G["source-layer"];if(W){if(G.source!==W)throw new Error(`Layer "${oe}" does not use source "${W}`)}else{W=G.source;const Me=e.sources[W];if(!Me)throw new Error(`Source "${W}" is not defined`);const me=Me.type;if(me!=="vector"&&me!=="geojson")throw new Error(`Source "${W}" is not of type "vector" or "geojson", but "${me}"`)}let he=x[fe];he||(he=[],x[fe]=he),he.push({layer:G,index:q}),B.push(oe)}}const V=new k0,$=new Fm,ie=[],ne=function(q,te,G){const oe=q.getProperties(),fe=x[oe.layer];if(!fe)return;let he=r.indexOf(te);he==-1&&(he=MO(te,r));const Me=xee[q.getGeometry().getType()],me={id:q.getId(),properties:oe,type:Me},pe=n.get("mapbox-featurestate")[q.getId()];let qe=-1;for(let Se=0,vt=fe.length;Se<vt;++Se){const Je=fe[Se],Ke=Je.layer,je=Ke.id;if(G!==void 0&&G!==je)continue;const Pe=Ke.layout||K6,Le=Ke.paint||K6;if(Pe.visibility==="none"||"minzoom"in Ke&&he<Ke.minzoom||"maxzoom"in Ke&&he>=Ke.maxzoom)continue;const Xe=Ke.filter;if(!Xe||See(je,Xe,me,he,N)){let Ct,Gt,mt,Ut,kt,Te;const Re=Je.index;if(Me==3&&(Ke.type=="fill"||Ke.type=="fill-extrusion"))if(Gt=Bi(Ke,"paint",Ke.type+"-opacity",he,me,D,pe),Ke.type+"-pattern"in Le){const an=Bi(Ke,"paint",Ke.type+"-pattern",he,me,D,pe);if(an){const Bn=typeof an=="string"?U4(an,oe):an.toString(),Cr=o9(Bn,p);if(i&&i[Bn]&&Cr){++qe,Te=ie[qe],(!Te||!Te.getFill()||Te.getStroke()||Te.getText())&&(Te=new Vd({fill:new Fm}),ie[qe]=Te),mt=Te.getFill(),Te.setZIndex(Re);const lr=Bn+"."+Gt;let hr=P[lr];if(!hr){const We=i[Bn],ce=Rx(We.width,We.height),ye=ce.getContext("2d");ye.globalAlpha=Gt,ye.drawImage(Cr.image,We.x,We.y,We.width,We.height,0,0,We.width,We.height),hr=ye.createPattern(ce,"repeat"),P[lr]=hr}mt.setColor(hr)}}}else Ct=w0(Bi(Ke,"paint",Ke.type+"-color",he,me,D,pe),Gt),Ke.type+"-outline-color"in Le&&(kt=w0(Bi(Ke,"paint",Ke.type+"-outline-color",he,me,D,pe),Gt)),kt||(kt=Ct),(Ct||kt)&&(++qe,Te=ie[qe],(!Te||Ct&&!Te.getFill()||!Ct&&Te.getFill()||kt&&!Te.getStroke()||!kt&&Te.getStroke()||Te.getText())&&(Te=new Vd({fill:Ct?new Fm:void 0,stroke:kt?new k0:void 0}),ie[qe]=Te),Ct&&(mt=Te.getFill(),mt.setColor(Ct)),kt&&(Ut=Te.getStroke(),Ut.setColor(kt),Ut.setWidth(.5)),Te.setZIndex(Re));if(Me!=1&&Ke.type=="line"){"line-pattern"in Le?Ct=void 0:Ct=w0(Bi(Ke,"paint","line-color",he,me,D,pe),Bi(Ke,"paint","line-opacity",he,me,D,pe));const an=Bi(Ke,"paint","line-width",he,me,D,pe);Ct&&an>0&&(++qe,Te=ie[qe],(!Te||!Te.getStroke()||Te.getFill()||Te.getText())&&(Te=new Vd({stroke:new k0}),ie[qe]=Te),Ut=Te.getStroke(),Ut.setLineCap(Bi(Ke,"layout","line-cap",he,me,D,pe)),Ut.setLineJoin(Bi(Ke,"layout","line-join",he,me,D,pe)),Ut.setMiterLimit(Bi(Ke,"layout","line-miter-limit",he,me,D,pe)),Ut.setColor(Ct),Ut.setWidth(an),Ut.setLineDash(Le["line-dasharray"]?Bi(Ke,"paint","line-dasharray",he,me,D,pe).map(function(Bn){return Bn*an}):null),Te.setZIndex(Re))}let Ue=!1,nt=null,_t=0,gt,Kt,$t;if((Me==1||Me==2)&&"icon-image"in Pe){const an=Bi(Ke,"layout","icon-image",he,me,D,pe);if(an){gt=typeof an=="string"?U4(an,oe):an.toString();let Bn;const Cr=o?o(n,gt):void 0,lr=o9(gt,p);if(i&&i[gt]&&lr||Cr){const hr=Bi(Ke,"layout","icon-rotation-alignment",he,me,D,pe);if(Me==2){const We=q.getGeometry();if(We.getFlatMidpoint||We.getFlatMidpoints){const ce=We.getExtent();if(Math.sqrt(Math.max(Math.pow((ce[2]-ce[0])/te,2),Math.pow((ce[3]-ce[1])/te,2)))>150){const rt=We.getType()==="MultiLineString"?We.getFlatMidpoints():We.getFlatMidpoint();if(L4||(ib=[NaN,NaN],L4=new fh("Point",ib,[],2,{},void 0)),Bn=L4,ib[0]=rt[0],ib[1]=rt[1],Bi(Ke,"layout","symbol-placement",he,me,D,pe)==="line"&&hr==="map"){const Ht=We.getStride(),Zt=We.getFlatCoordinates();for(let Jn=0,He=Zt.length-Ht;Jn<He;Jn+=Ht){const ae=Zt[Jn],_e=Zt[Jn+1],f=Zt[Jn+Ht],Qe=Zt[Jn+Ht+1],Ee=Math.min(ae,f),it=Math.max(ae,f),ut=rt[0],at=rt[1],zt=(Qe-_e)*(ut-ae)-(f-ae)*(at-_e);if(Math.abs(zt)<.001&&ut<=it&&ut>=Ee){_t=Math.atan2(_e-Qe,f-ae);break}}}}}}if(Me!==2||Bn){const We=Bi(Ke,"layout","icon-size",he,me,D,pe),ce=Le["icon-color"]!==void 0?Bi(Ke,"paint","icon-color",he,me,D,pe):null;if(!ce||ce.a!==0){const ye=Bi(Ke,"paint","icon-halo-color",he,me,D,pe),rt=Bi(Ke,"paint","icon-halo-width",he,me,D,pe);let Et=`${gt}.${We}.${rt}.${ye}`;if(ce!==null&&(Et+=`.${ce}`),Kt=k[Et],!Kt){const Ht=i9(Ke,he,me,"icon",D);let Zt;"icon-offset"in Pe&&(Zt=Bi(Ke,"layout","icon-offset",he,me,D,pe).slice(0),Zt[0]*=We,Zt[1]*=-We);let Jn=ce?[ce.r*255,ce.g*255,ce.b*255,ce.a]:void 0;if(Cr){const He={color:Jn,rotateWithView:hr==="map",displacement:Zt,declutterMode:Ht,scale:We};typeof Cr=="string"?He.src=Cr:(He.img=Cr,He.imgSize=[Cr.width,Cr.height]),Kt=new f2(He)}else{const He=i[gt];let ae,_e,f;if(rt)He.sdf?(ae=t9(n9(lr.image,He,ce||[0,0,0,1]),{x:0,y:0,width:He.width,height:He.height,pixelRatio:He.pixelRatio},rt,ye),Jn=void 0):ae=t9(lr.image,He,rt,ye);else{if(He.sdf&&!lr.unSDFed){const Qe=n9(lr.image,{x:0,y:0,width:lr.size[0],height:lr.size[1]},{r:1,g:1,b:1});lr.image=Qe,lr.unSDFed=!0}ae=lr.image,_e=[He.width,He.height],f=[He.x,He.y]}Kt=new f2({color:Jn,img:ae,imgSize:lr.size,size:_e,offset:f,rotateWithView:hr==="map",scale:We/He.pixelRatio,displacement:Zt,declutterMode:Ht})}k[Et]=Kt}}Kt&&(++qe,Te=ie[qe],(!Te||!Te.getImage()||Te.getFill()||Te.getStroke())&&(Te=new Vd,ie[qe]=Te),Te.setGeometry(Bn),Kt.setRotation(_t+R4(Bi(Ke,"layout","icon-rotate",he,me,D,pe))),Kt.setOpacity(Bi(Ke,"paint","icon-opacity",he,me,D,pe)),Kt.setAnchor(Mee[Bi(Ke,"layout","icon-anchor",he,me,D,pe)]),Te.setImage(Kt),nt=Te.getText(),Te.setText(void 0),Te.setZIndex(Re),Ue=!0,$t=!1)}else $t=!0}}}if(Me==1&&Ke.type==="circle"){++qe,Te=ie[qe],(!Te||!Te.getImage()||Te.getFill()||Te.getStroke())&&(Te=new Vd,ie[qe]=Te);const an="circle-radius"in Le?Bi(Ke,"paint","circle-radius",he,me,D,pe):5,Bn=w0(Bi(Ke,"paint","circle-stroke-color",he,me,D,pe),Bi(Ke,"paint","circle-stroke-opacity",he,me,D,pe)),Cr=Bi(Ke,"paint","circle-translate",he,me,D,pe),lr=w0(Bi(Ke,"paint","circle-color",he,me,D,pe),Bi(Ke,"paint","circle-opacity",he,me,D,pe)),hr=Bi(Ke,"paint","circle-stroke-width",he,me,D,pe),We=an+"."+Bn+"."+lr+"."+hr+"."+Cr[0]+"."+Cr[1];Kt=k[We],Kt||(Kt=new $C({radius:an,displacement:[Cr[0],-Cr[1]],stroke:Bn&&hr>0?new k0({width:hr,color:Bn}):void 0,fill:lr?new Fm({color:lr}):void 0,declutterMode:"none"}),k[We]=Kt),Te.setImage(Kt),nt=Te.getText(),Te.setText(void 0),Te.setGeometry(void 0),Te.setZIndex(Re),Ue=!0}let Rt,_n,pr,nn,Xn,Fn;if("text-field"in Pe){nn=Math.round(Bi(Ke,"layout","text-size",he,me,D,pe));const an=Bi(Ke,"layout","text-font",he,me,D,pe);pr=Bi(Ke,"layout","text-line-height",he,me,D,pe),_n=c6(l?l(an,e.metadata?e.metadata["ol:webfonts"]:void 0):an,nn,pr),_n.includes("sans-serif")||(_n+=",sans-serif"),Xn=Bi(Ke,"layout","text-letter-spacing",he,me,D,pe),Fn=Bi(Ke,"layout","text-max-width",he,me,D,pe);const Bn=Bi(Ke,"layout","text-field",he,me,D,pe);typeof Bn=="object"&&Bn.sections?Bn.sections.length===1?Rt=Bn.toString():Rt=Bn.sections.reduce((Cr,lr,hr)=>{const We=lr.fontStack?lr.fontStack.split(","):an,ce=c6(l?l(We):We,nn*(lr.scale||1),pr);let ye=lr.text;if(ye===`
`)return Cr.push(`
`,""),Cr;if(Me==2)return Cr.push(k6(ye,Xn),ce),Cr;ye=P6(ye,ce,Fn,Xn).split(`
`);for(let rt=0,Et=ye.length;rt<Et;++rt)rt>0&&Cr.push(`
`,""),Cr.push(ye[rt],ce);return Cr},[]):Rt=U4(Bn,oe).trim(),Gt=Bi(Ke,"paint","text-opacity",he,me,D,pe)}if(Rt&&Gt&&!$t){Ue||(++qe,Te=ie[qe],(!Te||!Te.getText()||Te.getFill()||Te.getStroke())&&(Te=new Vd,ie[qe]=Te),Te.setImage(void 0),Te.setGeometry(void 0));const an=i9(Ke,he,me,"text",D);Te.getText()||Te.setText(nt),nt=Te.getText(),(!nt||"getDeclutterMode"in nt&&nt.getDeclutterMode()!==an)&&(nt=new kx({padding:[2,2,2,2],declutterMode:an}),Te.setText(nt));const Bn=Bi(Ke,"layout","text-transform",he,me,D,pe);Bn=="uppercase"?Rt=Array.isArray(Rt)?Rt.map((f,Qe)=>Qe%2?f:f.toUpperCase()):Rt.toUpperCase():Bn=="lowercase"&&(Rt=Array.isArray(Rt)?Rt.map((f,Qe)=>Qe%2?f:f.toLowerCase()):Rt.toLowerCase());const Cr=Array.isArray(Rt)?Rt:Me==2?k6(Rt,Xn):P6(Rt,_n,Fn,Xn);if(nt.setText(Cr),nt.setFont(_n),nt.setRotation(R4(Bi(Ke,"layout","text-rotate",he,me,D,pe))),typeof nt.setKeepUpright=="function"){const f=Bi(Ke,"layout","text-keep-upright",he,me,D,pe);nt.setKeepUpright(f)}const lr=Bi(Ke,"layout","text-anchor",he,me,D,pe),hr=Ue||Me==1?"point":Bi(Ke,"layout","symbol-placement",he,me,D,pe);let We;if(hr==="line-center"?(nt.setPlacement("line"),We="center"):nt.setPlacement(hr),hr==="line"&&typeof nt.setRepeat=="function"){const f=Bi(Ke,"layout","symbol-spacing",he,me,D,pe);nt.setRepeat(f*2)}nt.setOverflow(hr==="point");let ce=Bi(Ke,"paint","text-halo-width",he,me,D,pe);const ye=Bi(Ke,"layout","text-offset",he,me,D,pe),rt=Bi(Ke,"paint","text-translate",he,me,D,pe);let Et=0,Ht=0;if(hr=="point"){We="center",lr.indexOf("left")!==-1?(We="left",Ht=ce):lr.indexOf("right")!==-1&&(We="right",Ht=-ce);const f=Bi(Ke,"layout","text-rotation-alignment",he,me,D,pe);nt.setRotateWithView(f=="map")}else nt.setMaxAngle(R4(Bi(Ke,"layout","text-max-angle",he,me,D,pe))*Rt.length/Cr.length),nt.setRotateWithView(!1);nt.setTextAlign(We);let Zt="middle";lr.indexOf("bottom")==0?(Zt="bottom",Et=-ce-.5*(pr-1)*nn):lr.indexOf("top")==0&&(Zt="top",Et=ce+.5*(pr-1)*nn),nt.setTextBaseline(Zt);const Jn=Bi(Ke,"layout","text-justify",he,me,D,pe);nt.setJustify(Jn==="auto"?void 0:Jn),nt.setOffsetX(ye[0]*nn+Ht+rt[0]),nt.setOffsetY(ye[1]*nn+Et+rt[1]),$.setColor(w0(Bi(Ke,"paint","text-color",he,me,D,pe),Gt)),nt.setFill($);const He=w0(Bi(Ke,"paint","text-halo-color",he,me,D,pe),Gt);if(He&&ce>0){V.setColor(He),ce*=2;const f=.5*nn;V.setWidth(ce<=f?ce:f),nt.setStroke(V)}else nt.setStroke(void 0);const ae=Bi(Ke,"layout","text-padding",he,me,D,pe),_e=nt.getPadding();ae!==_e[0]&&(_e[0]=ae,_e[1]=ae,_e[2]=ae,_e[3]=ae),Te.setZIndex(Re)}}}if(qe>-1)return ie.length=qe+1,ie};return n.setStyle(ne),n.set("mapbox-source",W),n.set("mapbox-layers",B),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),ne}class PU{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=gx,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Sa(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Sa(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return vo()}readFeature(e,t){return vo()}readFeatures(e,t){return vo()}readGeometry(e,t){return vo()}readProjection(e){return vo()}writeFeature(e,t){return vo()}writeFeatures(e,t){return vo()}writeGeometry(e,t){return vo()}}function Dx(n,e,t){const r=t?Sa(t.featureProjection):null,i=t?Sa(t.dataProjection):null;let s=n;if(r&&i&&!N0(r,i)){e&&(s=n.clone());const l=e?r:i,o=e?i:r;l.getUnits()==="tile-pixels"?s.transform(l,o):s.applyTransform(yC(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(p){for(let v=0,x=p.length;v<x;++v)p[v]=Math.round(p[v]*l)/l;return p};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Iee={Point:Rg,LineString:Kg,Polygon:Gm,MultiPoint:VC,MultiLineString:_C,MultiPolygon:bC};function Tee(n,e,t){return Array.isArray(e[0])?(yL(n,0,e,t)||(n=n.slice(),g6(n,0,e,t)),n):(LB(n,0,e,t)||(n=n.slice(),s2(n,0,e,t)),n)}function KU(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(l=>KU({...n,geometry:l})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Dx(new fh(r,r==="Polygon"?Tee(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function wO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>wO(i,e));return new u2(r)}const t=Iee[n.type];return Dx(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class kee extends PU{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(ob(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(ob(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return vo()}readFeaturesFromObject(e,t){return vo()}readGeometry(e,t){return this.readGeometryFromObject(ob(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return vo()}readProjection(e){return this.readProjectionFromObject(ob(e))}readProjectionFromObject(e){return vo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return vo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return vo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return vo()}}function ob(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class s9 extends kee{constructor(e){e=e||{},super(),this.dataProjection=Sa(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Sa(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=SO(r.geometry);if(this.featureClass===fh)return KU({geometry:i,id:r.id,properties:r.properties},t);const s=new gx;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(wO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const l=s.features;for(let o=0,p=l.length;o<p;++o){const v=this.readFeatureFromObject(l[o],t);v&&i.push(v)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Pee(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Sa(t.properties.name);else if(t.type==="EPSG")r=Sa("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),l=e.getGeometry();return l&&(r.geometry=R6(l,t),delete s[e.getGeometryName()]),j0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return R6(e,this.adaptOptions(t))}}function SO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Ree(n);break}case"LineString":{t=Dee(n);break}case"Polygon":{t=zee(n);break}case"MultiPoint":{t=Lee(n);break}case"MultiLineString":{t=Fee(n);break}case"MultiPolygon":{t=Uee(n);break}case"GeometryCollection":{t=Kee(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Pee(n,e){const t=SO(n);return wO(t,e)}function Kee(n,e){return n.geometries.map(function(r){return SO(r)})}function Ree(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:jg(e.length)}}function Dee(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:jg(((r=e[0])==null?void 0:r.length)||2)}}function Fee(n){var s,l;const e=n.coordinates,t=((l=(s=e[0])==null?void 0:s[0])==null?void 0:l.length)||2,r=[],i=qC(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:jg(t)}}function Lee(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:jg(((t=e[0])==null?void 0:t.length)||2)}}function Uee(n){var s,l;const e=n.coordinates,t=[],r=((l=(s=e[0])==null?void 0:s[0])==null?void 0:l[0].length)||2,i=kL(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:jg(r)}}function zee(n){var s,l;const e=n.coordinates,t=[],r=(l=(s=e[0])==null?void 0:s[0])==null?void 0:l.length,i=qC(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:jg(r)}}function R6(n,e){n=Dx(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Yee(n);break}case"LineString":{r=Wee(n);break}case"Polygon":{r=qee(n,e);break}case"MultiPoint":{r=Gee(n);break}case"MultiLineString":{r=jee(n);break}case"MultiPolygon":{r=Qee(n,e);break}case"GeometryCollection":{r=Nee(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Nee(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return R6(r,e)})}}function Wee(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function jee(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Gee(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Qee(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Yee(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function qee(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const D6=65536*65536,a9=1/D6,Vee=12,l9=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),z4=0,sb=1,Cv=2,ab=5;class Hee{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,l=this.pos;this.type=i&7,e(s,t,this),this.pos===l&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*D6;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*D6;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,$ee(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Vee&&l9?l9.decode(this.buf.subarray(t,e)):Ate(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Cv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===z4)for(;this.buf[this.pos++]>127;);else if(t===Cv)this.pos=this.readVarint()+this.pos;else if(t===ab)this.pos+=4;else if(t===sb)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*a9),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*a9),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Zee(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=ute(this.buf,e,this.pos);const r=this.pos-t;r>=128&&A9(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&A9(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Cv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,ete,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,tte,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,ite,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,nte,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,rte,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,ote,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,ste,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,ate,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,lte,t)}writeBytesField(e,t){this.writeTag(e,Cv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,ab),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,ab),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,sb),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,sb),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,z4),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,z4),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Cv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,ab),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,sb),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function $ee(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return S1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function S1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Zee(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Xee(t,r,e),Jee(r,e)}function Xee(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Jee(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function A9(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function ete(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function tte(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function nte(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function rte(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function ite(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function ote(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function ste(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function ate(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function lte(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function Ate(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let l=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let p,v,x;o===1?s<128&&(l=s):o===2?(p=n[i+1],(p&192)===128&&(l=(s&31)<<6|p&63,l<=127&&(l=null))):o===3?(p=n[i+1],v=n[i+2],(p&192)===128&&(v&192)===128&&(l=(s&15)<<12|(p&63)<<6|v&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(p=n[i+1],v=n[i+2],x=n[i+3],(p&192)===128&&(v&192)===128&&(x&192)===128&&(l=(s&15)<<18|(p&63)<<12|(v&63)<<6|x&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),r+=String.fromCharCode(l),i+=o}return r}function ute(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class cte extends PU{constructor(e){super(),e=e||{},this.dataProjection=new xx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:fh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let l=1,o=0,p=0,v=0,x=0,B=0;for(;e.pos<s;){if(!o){const k=e.readVarint();l=k&7,o=k>>3}if(o--,l===1||l===2)p+=e.readSVarint(),v+=e.readSVarint(),l===1&&x>B&&(i.push(x),B=x),r.push(p,v),x+=2;else if(l===7)x>B&&(r.push(r[B],r[B+1]),x+=2);else throw new Error("Invalid command found in the PBF")}x>B&&(i.push(x),B=x)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const p=[],v=[];this.readRawGeometry_(e,t,p,v);const x=mte(i,v.length);if(this.featureClass===fh)s=new this.featureClass(x,p,v,2,l,o),s.transform(r.dataProjection);else{let B;if(x=="Polygon"){const D=vL(p,v);B=D.length>1?new bC(p,"XY",D):new Gm(p,"XY",v)}else B=x==="Point"?new Rg(p,"XY"):x==="LineString"?new Kg(p,"XY"):x==="MultiPoint"?new VC(p,"XY"):x==="MultiLineString"?new _C(p,"XY",v):null;const k=this.featureClass;s=new k,this.geometryName_&&s.setGeometryName(this.geometryName_);const P=Dx(B,!1,r);s.setGeometry(P),o!==void 0&&s.setId(o),s.setProperties(l,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Sa(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new Hee(e),l=s.readFields(hte,{}),o=[];for(const p in l){if(r&&!r.includes(p))continue;const v=l[p],x=v?[0,0,v.extent,v.extent]:null;i.setExtent(x);for(let B=0,k=v.length;B<k;++B){const P=pte(s,v,B),D=this.createFeature_(s,P,t);D!==null&&o.push(D)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function hte(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(dte,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function dte(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function fte(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function pte(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(fte,i,r),i}function mte(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class gte extends aO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,l=this.getLayer().getSource(),o=e.viewHints;let p=e.extent;if(t.extent!==void 0&&(p=_p(p,Zp(t.extent,i.projection))),!o[Xl.ANIMATING]&&!o[Xl.INTERACTING]&&!Ng(p))if(l){const v=i.projection,x=l.getImage(p,s,r,v);x&&(this.loadImage(x)?this.image=x:x.getState()===fi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Lu(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Pg(s,i))return null;const l=this.image.getExtent(),o=this.image.getImage(),p=zs(l),v=Math.floor(o.width*((i[0]-l[0])/p));if(v<0||v>=o.width)return null;const x=zu(l),B=Math.floor(o.height*((l[3]-i[1])/x));return B<0||B>=o.height?null:this.getImageData(o,v,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[l,o]=Array.isArray(s)?s:[s,s],p=r.getPixelRatio(),v=e.layerStatesArray[e.layerIndex],x=e.pixelRatio,B=e.viewState,k=B.center,P=B.resolution,D=x*l/(P*p),N=x*o/(P*p);this.prepareContainer(e,t);const W=this.context.canvas.width,V=this.context.canvas.height,$=this.getRenderContext(e);let ie=!1,ne=!0;if(v.extent){const fe=Zp(v.extent,B.projection);ne=$A(fe,e.extent),ie=ne&&!$p(fe,e.extent),ie&&this.clipUnrotated($,e,fe)}const q=r.getImage(),te=sm(this.tempTransform,W/2,V/2,D,N,0,p*(i[0]-k[0])/l,p*(k[1]-i[3])/o);this.renderedResolution=o*x/p;const G=q.width*te[0],oe=q.height*te[3];if(this.getLayer().getSource().getInterpolate()||($.imageSmoothingEnabled=!1),this.preRender($,e),ne&&G>=.5&&oe>=.5){const fe=te[4],he=te[5],Me=v.opacity;Me!==1&&($.save(),$.globalAlpha=Me),$.drawImage(q,0,0,+q.width,+q.height,fe,he,G,oe),Me!==1&&$.restore()}return this.postRender(this.context,e),ie&&$.restore(),$.imageSmoothingEnabled=!0,this.container}}class yte extends jy{constructor(e){e=e||{},super(e)}}class RU extends yte{constructor(e){super(e)}createRenderer(){return new gte(this)}getData(e){return super.getData(e)}}function F6(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const vte=new Error("disposed"),Cte=[256,256];class u9 extends JC{constructor(e){const t=Lr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=F6(this.data_);return e?[e.width,e.height]:Cte}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Lr.IDLE&&this.state!==Lr.ERROR)return;this.state=Lr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Lr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Lr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(vte),this.controller_=null),super.disposeInternal()}}let N4;const fy=[];function c9(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function W4(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function _te(){if(N4===void 0){const n=MA(6,6,fy);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",c9(n,4,5,4,0),c9(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;N4=W4(e,0)||W4(e,4)||W4(e,8),HC(n),fy.push(n.canvas)}return N4}function L6(n,e,t,r){const i=Sx(t,e,n);let s=_6(e,r,t);const l=e.getMetersPerUnit();l!==void 0&&(s*=l);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const p=n.getExtent();if(!p||Pg(p,i)){const v=_6(n,s,i)/s;isFinite(v)&&v>0&&(s/=v)}return s}function bte(n,e,t,r){const i=Uf(t);let s=L6(n,e,i,r);return(!isFinite(s)||s<=0)&&hL(t,function(l){return s=L6(n,e,l,r),isFinite(s)&&s>0}),s}function DU(n,e,t,r,i,s,l,o,p,v,x,B,k,P){const D=MA(Math.round(t*n),Math.round(t*e),fy);if(B||(D.imageSmoothingEnabled=!1),p.length===0)return D.canvas;D.scale(t,t);function N(q){return Math.round(q*t)/t}D.globalCompositeOperation="lighter";const W=Lf();p.forEach(function(q,te,G){uL(W,q.extent)});let V;const $=t/r,ie=(B?1:1+Math.pow(2,-24))/$;(!k||p.length!==1||v!==0)&&(V=MA(Math.round(zs(W)*$),Math.round(zu(W)*$),fy),B||(V.imageSmoothingEnabled=!1),p.forEach(function(q,te,G){if(q.image.width>0&&q.image.height>0){if(q.clipExtent){V.save();const me=(q.clipExtent[0]-W[0])*$,pe=-(q.clipExtent[3]-W[3])*$,qe=zs(q.clipExtent)*$,Se=zu(q.clipExtent)*$;V.rect(B?me:Math.round(me),B?pe:Math.round(pe),B?qe:Math.round(me+qe)-Math.round(me),B?Se:Math.round(pe+Se)-Math.round(pe)),V.clip()}const oe=(q.extent[0]-W[0])*$,fe=-(q.extent[3]-W[3])*$,he=zs(q.extent)*$,Me=zu(q.extent)*$;V.drawImage(q.image,v,v,q.image.width-2*v,q.image.height-2*v,B?oe:Math.round(oe),B?fe:Math.round(fe),B?he:Math.round(oe+he)-Math.round(oe),B?Me:Math.round(fe+Me)-Math.round(fe)),q.clipExtent&&V.restore()}}));const ne=Ym(l);return o.getTriangles().forEach(function(q,te,G){const oe=q.source,fe=q.target;let he=oe[0][0],Me=oe[0][1],me=oe[1][0],pe=oe[1][1],qe=oe[2][0],Se=oe[2][1];const vt=N((fe[0][0]-ne[0])/s),Je=N(-(fe[0][1]-ne[1])/s),Ke=N((fe[1][0]-ne[0])/s),je=N(-(fe[1][1]-ne[1])/s),Pe=N((fe[2][0]-ne[0])/s),Le=N(-(fe[2][1]-ne[1])/s),Xe=he,Ct=Me;he=0,Me=0,me-=Xe,pe-=Ct,qe-=Xe,Se-=Ct;const Gt=[[me,pe,0,0,Ke-vt],[qe,Se,0,0,Pe-vt],[0,0,me,pe,je-Je],[0,0,qe,Se,Le-Je]],mt=_$(Gt);if(!mt)return;if(D.save(),D.beginPath(),_te()||!B){D.moveTo(Ke,je);const kt=4,Te=vt-Ke,Re=Je-je;for(let Ue=0;Ue<kt;Ue++)D.lineTo(Ke+N((Ue+1)*Te/kt),je+N(Ue*Re/(kt-1))),Ue!=kt-1&&D.lineTo(Ke+N((Ue+1)*Te/kt),je+N((Ue+1)*Re/(kt-1)));D.lineTo(Pe,Le)}else D.moveTo(Ke,je),D.lineTo(vt,Je),D.lineTo(Pe,Le);D.clip(),D.transform(mt[0],mt[2],mt[1],mt[3],vt,Je),D.translate(W[0]-Xe,W[3]-Ct);let Ut;if(V)Ut=V.canvas,D.scale(ie,-ie);else{const kt=p[0],Te=kt.extent;Ut=kt.image,D.scale(zs(Te)/Ut.width,-zu(Te)/Ut.height)}D.drawImage(Ut,0,0),D.restore()}),V&&(HC(V),fy.push(V.canvas)),x&&(D.save(),D.globalCompositeOperation="source-over",D.strokeStyle="black",D.lineWidth=1,o.getTriangles().forEach(function(q,te,G){const oe=q.target,fe=(oe[0][0]-ne[0])/s,he=-(oe[0][1]-ne[1])/s,Me=(oe[1][0]-ne[0])/s,me=-(oe[1][1]-ne[1])/s,pe=(oe[2][0]-ne[0])/s,qe=-(oe[2][1]-ne[1])/s;D.beginPath(),D.moveTo(Me,me),D.lineTo(fe,he),D.lineTo(pe,qe),D.closePath(),D.stroke()}),D.restore()),D.canvas}const xte=10,h9=.25;class FU{constructor(e,t,r,i,s,l,o){this.sourceProj_=e,this.targetProj_=t;let p={};const v=o?iZ(ie=>Lu(o,Sx(ie,this.targetProj_,this.sourceProj_))):yC(this.targetProj_,this.sourceProj_);this.transformInv_=function(ie){const ne=ie[0]+"/"+ie[1];return p[ne]||(p[ne]=v(ie)),p[ne]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&zs(i)>=zs(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?zs(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?zs(this.targetProj_.getExtent()):null;const x=Ym(r),B=Cx(r),k=vx(r),P=yx(r),D=this.transformInv_(x),N=this.transformInv_(B),W=this.transformInv_(k),V=this.transformInv_(P),$=xte+(l?Math.max(0,Math.ceil(Math.log2(f6(r)/(l*l*256*256)))):0);if(this.addQuad_(x,B,k,P,D,N,W,V,$),this.wrapsXInSource_){let ie=1/0;this.triangles_.forEach(function(ne,q,te){ie=Math.min(ie,ne.source[0][0],ne.source[1][0],ne.source[2][0])}),this.triangles_.forEach(ne=>{if(Math.max(ne.source[0][0],ne.source[1][0],ne.source[2][0])-ie>this.sourceWorldWidth_/2){const q=[[ne.source[0][0],ne.source[0][1]],[ne.source[1][0],ne.source[1][1]],[ne.source[2][0],ne.source[2][1]]];q[0][0]-ie>this.sourceWorldWidth_/2&&(q[0][0]-=this.sourceWorldWidth_),q[1][0]-ie>this.sourceWorldWidth_/2&&(q[1][0]-=this.sourceWorldWidth_),q[2][0]-ie>this.sourceWorldWidth_/2&&(q[2][0]-=this.sourceWorldWidth_);const te=Math.min(q[0][0],q[1][0],q[2][0]);Math.max(q[0][0],q[1][0],q[2][0])-te<this.sourceWorldWidth_/2&&(ne.source=q)}})}p={}}addTriangle_(e,t,r,i,s,l){this.triangles_.push({source:[i,s,l],target:[e,t,r]})}addQuad_(e,t,r,i,s,l,o,p,v){const x=h6([s,l,o,p]),B=this.sourceWorldWidth_?zs(x)/this.sourceWorldWidth_:null,k=this.sourceWorldWidth_,P=this.sourceProj_.canWrapX()&&B>.5&&B<1;let D=!1;if(v>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const W=h6([e,t,r,i]);D=zs(W)/this.targetWorldWidth_>h9||D}!P&&this.sourceProj_.isGlobal()&&B&&(D=B>h9||D)}if(!D&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!$A(x,this.maxSourceExtent_))return;let N=0;if(!D&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(p[0])||!isFinite(p[1]))){if(v>0)D=!0;else if(N=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),N!=1&&N!=2&&N!=4&&N!=8)return}if(v>0){if(!D){const W=[(e[0]+r[0])/2,(e[1]+r[1])/2],V=this.transformInv_(W);let $;P?$=(Og(s[0],k)+Og(o[0],k))/2-Og(V[0],k):$=(s[0]+o[0])/2-V[0];const ie=(s[1]+o[1])/2-V[1];D=$*$+ie*ie>this.errorThresholdSquared_}if(D){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const W=[(t[0]+r[0])/2,(t[1]+r[1])/2],V=this.transformInv_(W),$=[(i[0]+e[0])/2,(i[1]+e[1])/2],ie=this.transformInv_($);this.addQuad_(e,t,W,$,s,l,V,ie,v-1),this.addQuad_($,W,r,i,ie,V,o,p,v-1)}else{const W=[(e[0]+t[0])/2,(e[1]+t[1])/2],V=this.transformInv_(W),$=[(r[0]+i[0])/2,(r[1]+i[1])/2],ie=this.transformInv_($);this.addQuad_(e,W,$,i,s,V,ie,p,v-1),this.addQuad_(W,t,r,$,V,l,o,ie,v-1)}return}}if(P){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(N&11)==0&&this.addTriangle_(e,r,i,s,o,p),(N&14)==0&&this.addTriangle_(e,r,t,s,o,l),N&&((N&13)==0&&this.addTriangle_(t,i,e,l,p,s),(N&7)==0&&this.addTriangle_(t,i,r,l,p,o))}calculateSourceExtent(){const e=Lf();return this.triangles_.forEach(function(t,r,i){const s=t.source;Jv(e,s[0]),Jv(e,s[1]),Jv(e,s[2])}),e}getTriangles(){return this.triangles_}}const LU=.5;class UU extends JC{constructor(e,t,r,i,s,l,o,p,v,x,B,k){super(s,Lr.IDLE,k),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=o,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const P=i.getTileCoordExtent(this.wrappedTileCoord_),D=this.targetTileGrid_.getExtent();let N=this.sourceTileGrid_.getExtent();const W=D?_p(P,D):P;if(f6(W)===0){this.state=Lr.EMPTY;return}const V=e.getExtent();V&&(N?N=_p(N,V):N=V);const $=i.getResolution(this.wrappedTileCoord_[0]),ie=bte(e,r,W,$);if(!isFinite(ie)||ie<=0){this.state=Lr.EMPTY;return}const ne=x!==void 0?x:LU;if(this.triangulation_=new FU(e,r,W,N,ie*ne,$),this.triangulation_.getTriangles().length===0){this.state=Lr.EMPTY;return}this.sourceZ_=t.getZForResolution(ie);let q=this.triangulation_.calculateSourceExtent();if(N&&(e.canWrapX()?(q[1]=xA(q[1],N[1],N[3]),q[3]=xA(q[3],N[1],N[3])):q=_p(q,N)),!f6(q))this.state=Lr.EMPTY;else{let te=0,G=0;e.canWrapX()&&(te=zs(V),G=Math.floor((q[0]-V[0])/te)),pL(q.slice(),e,!0).forEach(fe=>{const he=t.getTileRangeForExtentAndZ(fe,this.sourceZ_);for(let Me=he.minX;Me<=he.maxX;Me++)for(let me=he.minY;me<=he.maxY;me++){const pe=v(this.sourceZ_,Me,me,o);if(pe){const qe=G*te;this.sourceTiles_.push({tile:pe,offset:qe})}}++G}),this.sourceTiles_.length===0&&(this.state=Lr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==Lr.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const l=(i=this.clipExtent_)==null?void 0:i.slice();l&&(l[0]+=t.offset,l[2]+=t.offset),e.push({extent:s,clipExtent:l,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Lr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=DU(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,p,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Lr.LOADED}this.changed()}load(){if(this.state==Lr.IDLE){this.state=Lr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Lr.IDLE||r==Lr.LOADING){e++;const i=Ks(t,co.CHANGE,s=>{const l=t.getState();(l==Lr.LOADED||l==Lr.ERROR||l==Lr.EMPTY)&&(hl(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Lr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(hl),this.sourcesListenerKeys_=null}release(){this.canvas_&&(HC(this.canvas_.getContext("2d")),fy.push(this.canvas_),this.canvas_=null),super.release()}}class Mte{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof NC&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return oa(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return oa(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){oa(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function x2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function wte(n,e,t){return n+"/"+e+"/"+t}function Ste(n){return Ete(n[0],n[1],n[2])}function Ete(n,e,t){return(e<<n)+t}function Bte(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function j4(n,e,t,r){return`${n},${wte(e,t,r)}`}function G4(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function Ote(n,e,t){const r=n[t];return r?r.delete(e):!1}function d9(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=_p(e,Zp(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=_p(e,i))}return e}class zU extends aO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Lf(),this.tempTileRange_=new _O(0,0,0,0),this.tempTileCoord_=x2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Mte(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),p=j4(o.getKey(),e,t,r);let v;if(s.containsKey(p))v=s.get(p);else{if(v=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!v)return null;s.set(p,v)}return v}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Lu(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Pg(s,i))return null;const l=t.viewState,o=r.getRenderSource(),p=o.getTileGridForProjection(l.projection),v=o.getTilePixelRatio(t.pixelRatio);for(let x=p.getZForResolution(l.resolution);x>=p.getMinZoom();--x){const B=p.getTileCoordForCoordAndZ(i,x),k=this.getTile(x,B[1],B[2],t);if(!k||k.getState()!==Lr.LOADED)continue;const P=p.getOrigin(x),D=ph(p.getTileSize(x)),N=p.getResolution(x);let W;if(k instanceof vU||k instanceof UU)W=k.getImage();else if(k instanceof u9){if(W=F6(k.getData()),!W)continue}else continue;const V=Math.floor(v*((i[0]-P[0])/N-B[1]*D[0])),$=Math.floor(v*((P[1]-i[1])/N-B[2]*D[1])),ie=Math.round(v*o.getGutterForProjection(l.projection));return this.getImageData(W,V+ie,$+ie)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const l=e.viewState,o=this.getLayer(),p=o.getRenderSource(),v=p.getTileGridForProjection(l.projection),x=Uo(p);x in e.wantedTiles||(e.wantedTiles[x]={});const B=e.wantedTiles[x],k=o.getMapInternal(),P=Math.max(r-s,v.getMinZoom(),v.getZForResolution(Math.min(o.getMaxResolution(),k?k.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):v.getResolution(0)),p.zDirection)),D=l.rotation,N=D?dL(l.center,l.resolution,D,e.size):void 0;for(let W=r;W>=P;--W){const V=v.getTileRangeForExtentAndZ(t,W,this.tempTileRange_),$=v.getResolution(W);for(let ie=V.minX;ie<=V.maxX;++ie)for(let ne=V.minY;ne<=V.maxY;++ne){if(D&&!v.tileCoordIntersectsViewport([W,ie,ne],N))continue;const q=this.getTile(W,ie,ne,e);if(!q||!G4(i,q,W))continue;const G=q.getKey();if(B[G]=!0,q.getState()===Lr.IDLE&&!e.tileQueue.isKeyQueued(G)){const oe=x2(W,ie,ne,this.tempTileCoord_);e.tileQueue.enqueue([q,x,v.getTileCoordCenter(oe),$])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],l=e[2],o=this.getStaleKeys();for(let p=0;p<o.length;++p){const v=j4(o[p],i,s,l);if(r.containsKey(v)){const x=r.peek(v);if(x.getState()===Lr.LOADED)return x.endTransition(Uo(this)),G4(t,x,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let l=!0;const o=this.tileCache_,v=this.getLayer().getRenderSource().getKey();for(let x=s.minX;x<=s.maxX;++x)for(let B=s.minY;B<=s.maxY;++B){const k=j4(v,r,x,B);let P=!1;if(o.containsKey(k)){const D=o.peek(k);D.getState()===Lr.LOADED&&(G4(i,D,r),P=!0)}P||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,l=i.resolution,o=i.center,p=e.pixelRatio,v=this.getLayer(),x=v.getSource(),B=x.getTileGridForProjection(s),k=B.getZForResolution(l,x.zDirection),P=B.getResolution(k),D=x.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==D&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=D):this.renderedSourceKey_=D;let N=e.extent;const W=x.getTilePixelRatio(p);this.prepareContainer(e,t);const V=this.context.canvas.width,$=this.context.canvas.height,ie=r.extent&&Zp(r.extent);ie&&(N=_p(N,Zp(r.extent)));const ne=P*V/2/W,q=P*$/2/W,te=[o[0]-ne,o[1]-q,o[0]+ne,o[1]+q],G={};this.renderedTiles.length=0;const oe=v.getPreload();if(e.nextExtent){const Ke=B.getZForResolution(i.nextResolution,x.zDirection),je=d9(e,e.nextExtent);this.enqueueTiles(e,je,Ke,G,oe)}const fe=d9(e,N);if(this.enqueueTiles(e,fe,k,G,0),oe>0&&setTimeout(()=>{this.enqueueTiles(e,fe,k-1,G,oe-1)},0),!(k in G))return this.container;const he=Uo(this),Me=e.time;for(const Ke of G[k]){const je=Ke.getState();if(je===Lr.EMPTY)continue;const Pe=Ke.tileCoord;if(je===Lr.LOADED&&Ke.getAlpha(he,Me)===1){Ke.endTransition(he);continue}if(je!==Lr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Pe,G)){Ote(G,Ke,k),e.animate=!0;continue}if(this.findAltTiles_(B,Pe,k+1,G))continue;const Ct=B.getMinZoom();for(let Gt=k-1;Gt>=Ct&&!this.findAltTiles_(B,Pe,Gt,G);--Gt);}const me=P/l*p/W,pe=this.getRenderContext(e);sm(this.tempTransform,V/2,$/2,me,me,0,-V/2,-$/2),r.extent&&this.clipUnrotated(pe,e,ie),x.getInterpolate()||(pe.imageSmoothingEnabled=!1),this.preRender(pe,e);const qe=Object.keys(G).map(Number);qe.sort(rm);let Se;const vt=[],Je=[];for(let Ke=qe.length-1;Ke>=0;--Ke){const je=qe[Ke],Pe=x.getTilePixelSize(je,p,s),Xe=B.getResolution(je)/P,Ct=Pe[0]*Xe*me,Gt=Pe[1]*Xe*me,mt=B.getTileCoordForCoordAndZ(Ym(te),je),Ut=B.getTileCoordExtent(mt),kt=Lu(this.tempTransform,[W*(Ut[0]-te[0])/P,W*(te[3]-Ut[3])/P]),Te=W*x.getGutterForProjection(s);for(const Re of G[je]){if(Re.getState()!==Lr.LOADED)continue;const Ue=Re.tileCoord,nt=mt[1]-Ue[1],_t=Math.round(kt[0]-(nt-1)*Ct),gt=mt[2]-Ue[2],Kt=Math.round(kt[1]-(gt-1)*Gt),$t=Math.round(kt[0]-nt*Ct),Rt=Math.round(kt[1]-gt*Gt),_n=_t-$t,pr=Kt-Rt,nn=qe.length===1;let Xn=!1;Se=[$t,Rt,$t+_n,Rt,$t+_n,Rt+pr,$t,Rt+pr];for(let Fn=0,an=vt.length;Fn<an;++Fn)if(!nn&&je<Je[Fn]){const Bn=vt[Fn];$A([$t,Rt,$t+_n,Rt+pr],[Bn[0],Bn[3],Bn[4],Bn[7]])&&(Xn||(pe.save(),Xn=!0),pe.beginPath(),pe.moveTo(Se[0],Se[1]),pe.lineTo(Se[2],Se[3]),pe.lineTo(Se[4],Se[5]),pe.lineTo(Se[6],Se[7]),pe.moveTo(Bn[6],Bn[7]),pe.lineTo(Bn[4],Bn[5]),pe.lineTo(Bn[2],Bn[3]),pe.lineTo(Bn[0],Bn[1]),pe.clip())}vt.push(Se),Je.push(je),this.drawTile(Re,e,$t,Rt,_n,pr,Te,nn),Xn&&pe.restore(),this.renderedTiles.unshift(Re),this.updateUsedTiles(e.usedTiles,x,Re)}}if(this.renderedResolution=P,this.extentChanged=!this.renderedExtent_||!jm(this.renderedExtent_,te),this.renderedExtent_=te,this.renderedPixelRatio=p,this.postRender(this.context,e),r.extent&&pe.restore(),pe.imageSmoothingEnabled=!0,this.renderComplete){const Ke=(je,Pe)=>{const Le=Uo(x),Xe=Pe.wantedTiles[Le],Ct=Xe?Object.keys(Xe).length:0;this.updateCacheSize(Ct),this.tileCache_.expireCache()};e.postRenderFunctions.push(Ke)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,l,o,p){let v;if(e instanceof u9){if(v=F6(e.getData()),!v)throw new Error("Rendering array data is not yet supported")}else v=this.getTileImage(e);if(!v)return;const x=this.getRenderContext(t),B=Uo(this),k=t.layerStatesArray[t.layerIndex],P=k.opacity*(p?e.getAlpha(B,t.time):1),D=P!==x.globalAlpha;D&&(x.save(),x.globalAlpha=P),x.drawImage(v,o,o,v.width-2*o,v.height-2*o,r,i,s,l),D&&x.restore(),P!==k.opacity?t.animate=!0:p&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Uo(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const K0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Ite extends jy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(K0.PRELOAD)}setPreload(e){this.set(K0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(K0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(K0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class NU extends Ite{constructor(e){super(e)}createRenderer(){return new zU(this,{cacheSize:this.getCacheSize()})}}const Tte={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},f9={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class kte extends zU{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=yd(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,l,o,p){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,l,o,p)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,p=i.viewHints;return(!(p[Xl.ANIMATING]||p[Xl.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),l=i.getRenderOrder()||null,o=e.wantedResolution,p=e.getReplayState(i);if(!p.dirty&&p.renderedResolution===o&&p.renderedRevision==s&&p.renderedRenderOrder==l)return;const v=i.getSource(),x=!!i.getDeclutter(),B=v.getTileGrid(),P=v.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),D=v.getSourceTiles(t,r,e),N=Uo(i);delete e.hitDetectionImageData[N],e.executorGroups[N]=[],p.dirty=!1;for(let W=0,V=D.length;W<V;++W){const $=D[W];if($.getState()!=Lr.LOADED)continue;const ie=$.tileCoord,ne=B.getTileCoordExtent(ie),q=_p(P,ne),te=L0(q,i.getRenderBuffer()*o,this.tempExtent),G=jm(ne,q)?null:te,oe=new iU(0,q,o,t),fe=E6(o,t),he=function(Se,vt){let Je;const Ke=Se.getStyleFunction()||i.getStyleFunction();if(Ke&&(Je=Ke(Se,o)),Je){const je=this.renderFeature(Se,fe,Je,oe,x,vt);p.dirty=p.dirty||je}},Me=$.getFeatures();l&&l!==p.renderedRenderOrder&&Me.sort(l);for(let Se=0,vt=Me.length;Se<vt;++Se){const Je=Me[Se];(!G||$A(G,Je.getGeometry().getExtent()))&&he.call(this,Je,Se)}const me=oe.finish(),pe=i.getRenderMode()!=="vector"&&x&&D.length===1?null:q,qe=new oU(pe,o,t,v.getOverlaps(),me,i.getRenderBuffer(),!0);e.executorGroups[N].push(qe)}p.renderedRevision=s,p.renderedRenderOrder=l,p.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){var ie,ne;const l=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const p=this.getLayer(),x=p.getSource().getTileGridForProjection(t.viewState.projection),B=h6([e]);L0(B,l*r,B);const k={},P=function(q,te,G){let oe=q.getId();oe===void 0&&(oe=Uo(q));const fe=k[oe];if(fe){if(fe!==!0&&G<fe.distanceSq){if(G===0)return k[oe]=!0,s.splice(s.lastIndexOf(fe),1),i(q,p,te);fe.geometry=te,fe.distanceSq=G}}else{if(G===0)return k[oe]=!0,i(q,p,te);s.push(k[oe]={feature:q,layer:p,geometry:te,distanceSq:G,callback:i})}},D=this.renderedTiles,N=Uo(p),W=p.getDeclutter(),V=W?(ne=(ie=t.declutter)==null?void 0:ie[W])==null?void 0:ne.all().map(q=>q.value):null;let $;e:for(let q=0,te=D.length;q<te;++q){const G=D[q],oe=x.getTileCoordExtent(G.wrappedTileCoord);if(!$A(oe,B))continue;const fe=G.executorGroups[N];for(let he=0,Me=fe.length;he<Me;++he)if($=fe[he].forEachFeatureAtCoordinate(e,l,o,r,P,V),$)break e}return $}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),l=this.renderedProjection,o=l.getExtent(),p=this.renderedResolution,v=s.getTileGridForProjection(l),x=Lu(this.renderedPixelToCoordinateTransform_,e.slice()),B=v.getTileCoordForCoordAndResolution(x,p).toString(),k=this.renderedTiles.find(ie=>ie.tileCoord.toString()===B&&ie.getState()===Lr.LOADED);if(!k||k.loadingSourceTiles>0){t([]);return}s.getWrapX()&&l.canWrapX()&&!$p(o,v.getTileCoordExtent(k.tileCoord))&&NB(x,l);const P=Uo(i),D=v.getTileCoordExtent(k.wrappedTileCoord),N=Ym(D),W=[(x[0]-N[0])/p,(N[1]-x[1])/p],V=k.getSourceTiles().reduce((ie,ne)=>ie.concat(ne.getFeatures()),[]);let $=k.hitDetectionImageData[P];if(!$){const ie=ph(v.getTileSize(v.getZForResolution(p,s.zDirection))),ne=this.renderedRotation_,q=[this.getRenderTransform(v.getTileCoordCenter(k.wrappedTileCoord),p,0,Zd,ie[0]*Zd,ie[1]*Zd,0)];$=sU(ie,q,V,i.getStyleFunction(),v.getTileCoordExtent(k.wrappedTileCoord),k.getReplayState(i).renderedResolution,ne),k.hitDetectionImageData[P]=$}t(aU(W,V,$))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=s.getZForResolution(this.renderedResolution),o={};return r.forEach(p=>{if(p.tileCoord[0]!==l||p.getState()!==Lr.LOADED)return;const v=p.getSourceTiles();for(let x=0,B=v.length;x<B;++x){const k=v[x],P=k.getKey();if(P in o)continue;o[P]=!0;const D=k.tileCoord;if($A(e,s.getTileCoordExtent(D))){const N=k.getFeatures();if(N)for(let W=0,V=N.length;W<V;++W){const $=N[W],ie=$.getGeometry();$A(e,ie.getExtent())&&t.push($)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var k;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,l=!(s[Xl.ANIMATING]||s[Xl.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],p=this.getLayer().getDeclutter(),v=p?(k=e.declutter)==null?void 0:k[p]:void 0,x=Uo(this.getLayer()),B=this.renderedTiles;for(let P=0,D=B.length;P<D;++P){const N=B[P],W=N.executorGroups[x];if(W)for(let V=W.length-1;V>=0;--V)W[V].execute(this.context,o,this.getTileRenderTransform(N,e),e.viewState.rotation,l,g2,v)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Uo(this.getLayer()),i=t.reduce((p,v,x)=>(v.executorGroups[r].forEach(B=>p.push({executorGroup:B,index:x})),p),[]),s=i.map(({executorGroup:p})=>p.getDeferredZIndexContexts()),l={};for(let p=0,v=i.length;p<v;++p){const x=i[p].executorGroup.getDeferredZIndexContexts();for(const B in x)l[B]=!0}Object.keys(l).map(Number).sort(rm).forEach(p=>{s.forEach((v,x)=>{v[p]&&(v[p].forEach(B=>{const{executorGroup:k,index:P}=i[x],D=k.getRenderedContext(),N=D.globalAlpha;D.globalAlpha=this.renderedOpacity_;const W=this.tileClipContexts_[P];W&&W.draw(D),B.draw(D),W&&D.restore(),D.globalAlpha=N,B.clear()}),v[p].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,l=i.resolution,o=i.rotation,p=t.size,v=Math.round(p[0]*r),x=Math.round(p[1]*r),k=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),P=e.tileCoord,D=k.getTileCoordExtent(e.wrappedTileCoord),N=k.getTileCoordExtent(P,this.tempExtent)[0]-D[0];return qB(p4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,l,o,r,v,x,N))}postRender(e,t){var q;const r=t.viewHints,i=!(r[Xl.ANIMATING]||r[Xl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),l=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const p=s.getDeclutter(),v=p?f9[l].filter(te=>!g2.includes(te)):f9[l],x=t.viewState,B=x.rotation,k=s.getSource(),D=k.getTileGridForProjection(x.projection).getZForResolution(x.resolution,k.zDirection),N=this.renderedTiles,W=[],V=[],$=[],ie=Uo(s);let ne=!0;for(let te=N.length-1;te>=0;--te){const G=N[te];ne=ne&&!G.getReplayState(s).dirty;const oe=G.executorGroups[ie].filter(Se=>Se.hasExecutors(v));if(oe.length===0)continue;const fe=this.getTileRenderTransform(G,t),he=G.tileCoord[0];let Me=!1;const me=oe[0].getClipCoords(fe);let pe=e,qe;if(me){qe=new sO,pe=qe.getContext();for(let Se=0,vt=W.length;Se<vt;++Se)if(D!==he&&he<V[Se]){const Je=W[Se];$A([me[0],me[3],me[4],me[7]],[Je[0],Je[3],Je[4],Je[7]])&&(Me||(pe.save(),Me=!0),pe.beginPath(),pe.moveTo(me[0],me[1]),pe.lineTo(me[2],me[3]),pe.lineTo(me[4],me[5]),pe.lineTo(me[6],me[7]),pe.moveTo(Je[6],Je[7]),pe.lineTo(Je[4],Je[5]),pe.lineTo(Je[2],Je[3]),pe.lineTo(Je[0],Je[1]),pe.clip())}W.push(me),V.push(he)}for(let Se=0,vt=oe.length;Se<vt;++Se)oe[Se].execute(e,[e.canvas.width,e.canvas.height],fe,B,i,v,(q=t.declutter)==null?void 0:q[p]);Me&&(pe===e?pe.restore():$[te]=qe)}e.globalAlpha=o,this.ready=ne,this.tileClipContexts_=$,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,l){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let p=0,v=r.length;p<v;++p)o=p2(i,e,r[p],t,this.boundHandleStyleImageChange_,void 0,s,l)||o;else o=p2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),l=e.executorGroups[Uo(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,p=o[0],v=r.getSource();let x=t.pixelRatio;const k=t.viewState.projection,P=v.getTileGridForProjection(k),D=P.getResolution(e.tileCoord[0]),N=t.pixelRatio/e.wantedResolution*D,W=P.getResolution(p),V=e.getContext();x=Math.round(Math.max(x,N/x));const $=v.getTilePixelSize(p,x,k);V.canvas.width=$[0],V.canvas.height=$[1];const ie=x/N;if(ie!==1){const G=dI(this.tmpTransform_);p4(G,ie,ie),V.setTransform.apply(V,G)}const ne=P.getTileCoordExtent(o,this.tempExtent),q=N/W,te=dI(this.tmpTransform_);p4(te,q,-q),AZ(te,-ne[0],-ne[3]);for(let G=0,oe=l.length;G<oe;++G)l[G].execute(V,[V.canvas.width*ie,V.canvas.height*ie],te,0,!0,Tte[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class tC extends pO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";oa(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new kte(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(K0.PRELOAD)}getUseInterimTilesOnError(){return this.get(K0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(K0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(K0.USE_INTERIM_TILES_ON_ERROR,e)}}function U6(n){return Array.isArray(n)?Math.min(...n):n}class Pte extends rO{constructor(e,t,r,i,s,l,o){let p=e.getExtent();p&&e.canWrapX()&&(p=p.slice(),p[0]=-1/0,p[2]=1/0);let v=t.getExtent();v&&t.canWrapX()&&(v=v.slice(),v[0]=-1/0,v[2]=1/0);const x=v?_p(r,v):r,B=Uf(x),k=L6(e,t,B,i),P=LU,D=new FU(e,t,x,p,k*P,i),N=D.calculateSourceExtent(),W=Ng(N)?null:l(N,k,s),V=W?fi.IDLE:fi.EMPTY,$=W?W.getPixelRatio():1;super(r,i,$,V),this.targetProj_=t,this.maxSourceExtent_=p,this.triangulation_=D,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=W,this.sourcePixelRatio_=$,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==fi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==fi.LOADED){const t=zs(this.targetExtent_)/this.targetResolution_,r=zu(this.targetExtent_)/this.targetResolution_;this.canvas_=DU(t,r,this.sourcePixelRatio_,U6(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==fi.IDLE){this.state=fi.LOADING,this.changed();const e=this.sourceImage_.getState();e==fi.LOADED||e==fi.ERROR?this.reproject_():(this.sourceListenerKey_=Ks(this.sourceImage_,co.CHANGE,t=>{const r=this.sourceImage_.getState();(r==fi.LOADED||r==fi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){hl(this.sourceListenerKey_),this.sourceListenerKey_=null}}const lb=4,Q4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Kte extends Sp{constructor(e,t){super(e),this.image=t}}class WU extends Ny{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=px(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||N0(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&N0(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&jm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Pte(s,i,e,t,r,(l,o,p)=>this.getImageInternal(l,o,p,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=Rte(e,t,r,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&$p(this.wantedExtent_,s)||$p(this.image.getExtent(),s))&&(this.wantedResolution_&&U6(this.wantedResolution_)===l||U6(this.image.getResolution())===l)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=l,this.image=new rO(s,l,r,this.loader),this.image.addEventListener(co.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case fi.LOADING:this.loading=!0,r=Q4.IMAGELOADSTART;break;case fi.LOADED:this.loading=!1,r=Q4.IMAGELOADEND;break;case fi.ERROR:this.loading=!1,r=Q4.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new Kte(r,t))}}function Rte(n,e,t,r){const i=e/t,s=Uf(n),l=I0(zs(n)/i,lb),o=I0(zu(n)/i,lb),p=I0((r-1)*l/2,lb),v=l+2*p,x=I0((r-1)*o/2,lb),B=o+2*x;return i2(s,i,0,[v,B])}const E1=[0,0,0],b0=5;class Fx{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,oa(l$(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,oa(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ym(r)),oa(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,oa(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:dO,oa(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const l=new _O(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,l=i.maxX;s<=l;++s)for(let o=i.minY,p=i.maxY;o<=p;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,l,o,p=null,v=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):p=this.getTileCoordExtent(e,i);v>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),s=M1(l,l,o,o,r)):s=this.getTileRangeForExtentAndZ(p,v,r),t(v,s))return!0;--v}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,l=e[2]*2;return M1(s,s+1,l,l+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],l=e[2];if(t===i)return M1(s,l,s,l,r);if(this.zoomFactor_){const p=Math.pow(this.zoomFactor_,t-i),v=Math.floor(s*p),x=Math.floor(l*p);if(t<i)return M1(v,v,x,x,r);const B=Math.floor(p*(s+1))-1,k=Math.floor(p*(l+1))-1;return M1(v,B,x,k,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,E1);const i=E1[1],s=E1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,E1);const l=E1[1],o=E1[2];return M1(i,l,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ph(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=ph(this.getTileSize(e[0]),this.tmpSize_),l=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,p=l+s[0]*i,v=o+s[1]*i;return Wm(l,o,p,v,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const l=this.getZForResolution(r),o=r/this.getResolution(l),p=this.getOrigin(l),v=ph(this.getTileSize(l),this.tmpSize_);let x=o*(e-p[0])/r/v[0],B=o*(p[1]-t)/r/v[1];return i?(x=I0(x,b0)-1,B=I0(B,b0)-1):(x=q_(x,b0),B=q_(B,b0)),x2(l,x,B,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const l=this.getOrigin(r),o=this.getResolution(r),p=ph(this.getTileSize(r),this.tmpSize_);let v=(e-l[0])/o/p[0],x=(l[1]-t)/o/p[1];return i?(v=I0(v,b0)-1,x=I0(x,b0)-1):(v=q_(v,b0),x=q_(x,b0)),x2(r,v,x,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=px(this.resolutions_,e,t||0);return xA(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return DL(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function jU(n){let e=n.getDefaultTileGrid();return e||(e=Lte(n),n.setDefaultTileGrid(e)),e}function Dte(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=Lx(t);if(!Pg(s,i)){const l=zs(s),o=Math.ceil((s[0]-i[0])/l);return i[0]+=l*o,n.getTileCoordForCoordAndZ(i,r)}return e}function Fte(n,e,t,r){r=r!==void 0?r:"top-left";const i=GU(n,e,t);return new Fx({extent:n,origin:f$(n,r),resolutions:i,tileSize:t})}function EO(n){const e=n||{},t=e.extent||Sa("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:GU(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Fx(r)}function GU(n,e,t,r){e=e!==void 0?e:gU,t=ph(t!==void 0?t:dO);const i=zu(n),s=zs(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const l=e+1,o=new Array(l);for(let p=0;p<l;++p)o[p]=r/Math.pow(2,p);return o}function Lte(n,e,t,r){const i=Lx(n);return Fte(i,e,t,r)}function Lx(n){n=Sa(n);let e=n.getExtent();if(!e){const t=180*G0.degrees/n.getMetersPerUnit();e=Wm(-t,-t,t,t)}return e}class QU extends Ny{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ph(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Uo(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return vo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:jU(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),l=ph(i.getTileSize(e),this.tmpSize);return s==1?l:HZ(l,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Dte(i,e,r)),Bte(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Ute extends Sp{constructor(e,t){super(e),this.tile=t}}function YU(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,l=e.height,o=t.length,p=t[0].byteLength;if(i){const k=new Array(o);for(let D=0;D<o;++D)k[D]=new ImageData(new Uint8ClampedArray(t[D]),s,l);return n(k,r).data.buffer}const v=new Uint8ClampedArray(p),x=new Array(o),B=new Array(o);for(let k=0;k<o;++k)x[k]=new Uint8ClampedArray(t[k]),B[k]=[0,0,0,0];for(let k=0;k<p;k+=4){for(let D=0;D<o;++D){const N=x[D];B[D][0]=N[k],B[D][1]=N[k+1],B[D][2]=N[k+2],B[D][3]=N[k+3]}const P=n(B,r);v[k]=P[0],v[k+1]=P[1],v[k+2]=P[2],v[k+3]=P[3]}return v.buffer}}function zte(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+YU.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function Nte(n,e){const t=YU(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Wte extends NC{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=zte(e,this.onWorkerMessage_.bind(this,i));else r[0]=Nte(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(p){return p.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/s);for(let p=0;p<s;++p){const v=p*o,x=[];for(let B=0,k=i.length;B<k;++B)x.push(i[B].slice(v,v+o));this.workers_[p].postMessage({buffers:x,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},x)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const l=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const p=this.dataLookup_[o].buffer,v=o*l;r.set(new Uint8ClampedArray(p),v),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const p9={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class m9 extends Sp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class qU extends WU{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Qte(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(co.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new CU(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:yd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Gte(this.layers_),pixelRatio:1,pixelToCoordinateTransform:yd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Uo(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let l=0,o=e.sources.length;l<o;++l){const p=e.sources[l],v=p instanceof Ny?p:p.getSource();if(!v)continue;const x=(s=v.getAttributions())==null?void 0:s(r);typeof x=="string"?i.push(x):x!==void 0&&i.push(...x)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Wte({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Uf(e);i.size[0]=Math.ceil(zs(e)/t),i.size[1]=Math.ceil(zu(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const l=i.viewState;return l.center=s,l.projection=r,l.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!jm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const l=jte(this.layers_[s],e);if(l)r[s]=l;else return}const i={};this.dispatchEvent(new m9(p9.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!jm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const p=Math.round(zs(s)/l),v=Math.round(zu(s)/l);o=MA(p,v),this.renderedImageCanvas_=new TJ(s,l,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new m9(p9.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}qU.prototype.dispose;let sg=null;function jte(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let l;if(s instanceof HTMLCanvasElement)l=s;else{if(s&&(l=s.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===r&&l.height===i)return l.getContext("2d").getImageData(0,0,r,i)}if(!sg)sg=MA(r,i,void 0,{willReadFrequently:!0});else{const o=sg.canvas;o.width!==r||o.height!==i?sg=MA(r,i,void 0,{willReadFrequently:!0}):sg.clearRect(0,0,r,i)}return sg.drawImage(l,0,0,r,i),sg.getImageData(0,0,r,i)}function Gte(n){return n.map(function(e){return e.getLayerState()})}function Qte(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=Yte(n[r]);return t}function Yte(n){let e;return n instanceof Ny?n instanceof QU?e=new NU({source:n}):n instanceof WU&&(e=new RU({source:n})):e=n,e}function qte(n,e,t,r){const i=document.createElement("script"),s="olc_"+Uo(e);function l(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){l(),t&&t()},1e4);window[s]=function(p){clearTimeout(o),l(),e(p)},document.head.appendChild(i)}const Vte=/\{z\}/g,Hte=/\{x\}/g,$te=/\{y\}/g,Zte=/\{-y\}/g;function Xte(n,e,t,r,i){return n.replace(Vte,e.toString()).replace(Hte,t.toString()).replace($te,r.toString()).replace(Zte,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function Jte(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function ene(n,e){return function(t,r,i){if(!t)return;let s;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(s=o.getHeight()-1)}return Xte(n,l,t[1],t[2],s)}}function VU(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=ene(n[i],e);return tne(r)}function tne(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=Ste(e),s=Og(i,n.length);return n[s](e,t,r)}}const Y4={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Ux extends QU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ux.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Uo(t),i=t.getState();let s;i==Lr.LOADING?(this.tileLoadingKeys_[r]=!0,s=Y4.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Lr.ERROR?Y4.TILELOADERROR:i==Lr.LOADED?Y4.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Ute(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Jte(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(VU(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class nne extends Ux{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:rne,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:vU,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!N0(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||N0(t,e)))return this.tileGrid;const r=Uo(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=jU(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,l){const o=[e,t,r],p=this.getTileCoordForTileUrlFunction(o,s),v=p?this.tileUrlFunction(p,i,s):void 0,x=new this.tileClass(o,v!==void 0?Lr.IDLE:Lr.EMPTY,v!==void 0?v:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=l,x.addEventListener(co.CHANGE,this.handleTileChange.bind(this)),x}getTile(e,t,r,i,s){const l=this.getProjection();if(!l||!s||N0(l,s))return this.getTileInternal(e,t,r,i,l||s);const o=[e,t,r],p=this.getKey(),v=this.getTileGridForProjection(l),x=this.getTileGridForProjection(s),B=this.getTileCoordForTileUrlFunction(o,s),k=new UU(l,v,s,x,o,B,this.getTilePixelRatio(i),this.getGutter(),(P,D,N,W)=>this.getTileInternal(P,D,N,W,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return k.key=p,k}getTileInternal(e,t,r,i,s){const l=this.getKey();return this.createTile_(e,t,r,i,s,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Sa(e);if(r){const i=Uo(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function rne(n,e){n.getImage().src=e}class HU extends nne{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Sa("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)qte(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Sa("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const v=YC(t,r);i=g$(e.bounds,v)}const s=Lx(r),l=e.minzoom||0,o=e.maxzoom||22,p=EO({extent:s,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=VU(e.tiles,p),e.attribution&&!this.getAttributions()){const v=i!==void 0?i:s;this.setAttributions(function(x){return $A(v,x.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class $U extends Ux{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Lx(t),i=e.tileGrid||EO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ZU,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:EU,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Lr.IDLE){r.setState(Lr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(i),o=i[0],p=s.getResolution(o);L0(l,-p,l);const v=this.tileGrid,x=v.getExtent();x&&_p(l,x,l);const B=v.getZForResolution(p,this.zDirection);v.forEachTileCoord(l,B,k=>{const P=this.tileUrlFunction(k,e,t);this.sourceTiles_[P]||(this.sourceTiles_[P]=new this.tileClass(k,P?Lr.IDLE:Lr.EMPTY,P,this.format_,this.tileLoadFunction));const D=this.sourceTiles_[P];r.sourceTiles.push(D),this.tileKeysBySourceTileUrl_[P]||(this.tileKeysBySourceTileUrl_[P]=[]),this.tileKeysBySourceTileUrl_[P].push(r.getKey());const N=D.getState();if(N<Lr.LOADED){const W=V=>{this.handleTileChange(V);const $=D.getState();if($===Lr.LOADED||$===Lr.ERROR){const ie=D.getKey();ie in r.errorTileKeys?D.getState()===Lr.LOADED&&delete r.errorTileKeys[ie]:r.loadingSourceTiles--,$===Lr.ERROR?r.errorTileKeys[ie]=!0:D.removeEventListener(co.CHANGE,W),r.loadingSourceTiles===0&&r.setState(j0(r.errorTileKeys)?Lr.LOADED:Lr.ERROR)}};D.addEventListener(co.CHANGE,W),r.loadingSourceTiles++}N===Lr.IDLE&&(D.extent=v.getTileCoordExtent(k),D.projection=t,D.resolution=v.getResolution(k[0]),D.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(k=>k.getState()===Lr.ERROR)?Lr.ERROR:Lr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const l=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,r,i,s){const l=[e,t,r];let o=this.getTileCoordForTileUrlFunction(l,s);const p=this.getTileGrid().getExtent(),v=this.getTileGridForProjection(s);if(o&&p){const k=v.getTileCoordExtent(o);L0(k,-v.getResolution(e),k),$A(p,k)||(o=null)}let x=!0;if(o!==null){const k=this.tileGrid,P=v.getResolution(e),D=k.getZForResolution(P,1),N=v.getTileCoordExtent(o);L0(N,-P,N),k.forEachTileCoord(N,D,W=>{x=x&&!this.tileUrlFunction(W,i,s)})}const B=new cee(l,x?Lr.EMPTY:Lr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.getProjection();oa(i===null||N0(i,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const s=this.tileGrid,l=s.getResolutions().slice(),o=l.map(function(x,B){return s.getOrigin(B)}),p=l.map(function(x,B){return s.getTileSize(B)}),v=gU+1;for(let x=l.length;x<v;++x)l.push(l[x-1]/2),o.push(o[x-1]),p.push(p[x-1]);r=new Fx({extent:s.getExtent(),origins:o,resolutions:l,tileSizes:p}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=ph(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function ZU(n,e){n.setLoader(function(t,r,i){tU(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function ine(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,l=new Uint8ClampedArray(s.length),o=e.resolution*2,p=r-1,v=i-1,x=[0,0,0,0],B=2*Math.PI,k=Math.PI/2,P=Math.PI*e.sunEl/180,D=Math.PI*e.sunAz/180,N=Math.cos(P),W=Math.sin(P),V=e.highlightColor,$=e.shadowColor,ie=e.accentColor,ne=e.encoding;let q,te,G,oe,fe,he,Me,me,pe,qe,Se,vt,Je,Ke,je,Pe,Le,Xe,Ct,Gt,mt,Ut;function kt(Te,Re="mapbox"){if(Re==="mapbox")return(Te[0]*256*256+Te[1]*256+Te[2])*.1-1e4;if(Re==="terrarium")return Te[0]*256+Te[1]+Te[2]/256-32768}for(te=0;te<=v;++te)for(fe=te===0?0:te-1,he=te===v?v:te+1,q=0;q<=p;++q)G=q===0?0:q-1,oe=q===p?p:q+1,Me=(te*r+G)*4,x[0]=s[Me],x[1]=s[Me+1],x[2]=s[Me+2],x[3]=s[Me+3],me=e.vert*kt(x,ne),Me=(te*r+oe)*4,x[0]=s[Me],x[1]=s[Me+1],x[2]=s[Me+2],x[3]=s[Me+3],pe=e.vert*kt(x,ne),qe=(pe-me)/o,Me=(fe*r+q)*4,x[0]=s[Me],x[1]=s[Me+1],x[2]=s[Me+2],x[3]=s[Me+3],me=e.vert*kt(x,ne),Me=(he*r+q)*4,x[0]=s[Me],x[1]=s[Me+1],x[2]=s[Me+2],x[3]=s[Me+3],pe=e.vert*kt(x,ne),Se=(pe-me)/o,Je=Math.atan2(Se,-qe),Je<0?Je=k-Je:Je>k?Je=B-Je+k:Je=k-Je,vt=Math.atan(Math.sqrt(qe*qe+Se*Se)),Ut=W*Math.cos(vt)+N*Math.sin(vt)*Math.cos(D-Je),Ke=Math.cos(vt),je=255*Ut,Ct=Math.min(Math.max(2*e.sunEl,0),1),Gt=1.875-e.opacity*1.75,mt=e.opacity!==.5?k*((Math.pow(Gt,vt)-1)/(Math.pow(Gt,k)-1)):vt,Le={r:(1-Ke)*ie.r*Ct*255,g:(1-Ke)*ie.g*Ct*255,b:(1-Ke)*ie.b*Ct*255,a:(1-Ke)*ie.a*Ct*255},Pe=Math.abs(((Je+D)/Math.PI+.5)%2-1),Xe={r:(V.r*(1-Pe)+$.r*Pe)*je,g:(V.g*(1-Pe)+$.g*Pe)*je,b:(V.b*(1-Pe)+$.b*Pe)*je,a:(V.a*(1-Pe)+$.a*Pe)*je},Me=(te*r+q)*4,l[Me]=Le.r*(1-Pe)+Xe.r,l[Me+1]=Le.g*(1-Pe)+Xe.g,l[Me+2]=Le.b*(1-Pe)+Xe.b,l[Me+3]=s[Me+3]*e.opacity*Ct*Math.sin(mt);return new ImageData(l,r,i)}function one(n,e=512){return n.getExtent()?EO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():om}function XU(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function sne(n,e,t="",r={},i=void 0){let s,l,o,p,v=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,p=o.source||o.layers,r=o):p=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(v=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:_2(s,o.accessToken),o=XU(s,o)),new Promise(function(x,B){IU(e,o).then(function(k){if(k.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof mO||n instanceof tC))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const P=n instanceof tC?"vector":"geojson";if(p?Array.isArray(p)?l=k.layers.find(function(ne){return ne.id===p[0]}).source:l=p:(l=k.layers.find(function(ne){return ne.source&&k.sources[ne.source].type===P}).source,p=l),!l)return B(new Error(`No ${P} source found in the glStyle.`));function D(){if(!v)return Promise.resolve();if(n instanceof tC)return tz(k.sources[l],s,o).then(function(G){const oe=n.getSource();oe?G!==oe&&(oe.setTileUrlFunction(G.getTileUrlFunction()),typeof oe.setUrls=="function"&&typeof G.getUrls=="function"&&oe.setUrls(G.getUrls()),oe.format_||(oe.format_=G.format_),oe.getAttributions()||oe.setAttributions(G.getAttributions()),oe.getTileLoadFunction()===ZU&&oe.setTileLoadFunction(G.getTileLoadFunction()),N0(oe.getProjection(),G.getProjection())&&(oe.tileGrid=G.getTileGrid())):n.setSource(G);const fe=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&fe.getMinZoom()>0&&n.setMaxResolution(Dv(Math.max(0,fe.getMinZoom()-1e-12),fe.getResolutions()))});const ne=k.sources[l];let q=n.getSource();(!q||q.get("mapbox-source")!==ne)&&(q=iz(ne,s,o));const te=n.getSource();return te?q!==te&&(te.getAttributions()||te.setAttributions(q.getAttributions()),te.format_||(te.format_=q.getFormat()),te.url_=q.getUrl()):n.setSource(q),Promise.resolve()}let N,W;const V={},$={};function ie(){if(!W&&(!k.sprite||V)){if(o.projection&&!i){const q=Sa(o.projection).getUnits();q!=="m"&&(i=om.map(te=>te/G0[q]))}W=Oee(n,k,p,i,V,$,(ne,q=o.webfonts)=>bee(ne,q),o.getImage),n.getStyle()?D().then(x).catch(B):B(new Error(`Nothing to show for source [${l}]`))}else W?(n.setStyle(W),D().then(x).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(k.sprite){const ne=hee(k.sprite,o.accessToken,s||location.href);N=window.devicePixelRatio>=1.5?.5:1;const q=N==.5?"@2x":"";Promise.all(ne.map(function(te){const G=new URL(te.url);let oe=G.origin+G.pathname+q+".json"+G.search;return new Promise(function(fe,he){Ty("Sprite",oe,o).then(fe).catch(function(Me){oe=G.origin+G.pathname+".json"+G.search,Ty("Sprite",oe,o).then(fe).catch(he)})}).then(function(fe){fe===void 0&&B(new Error("No sprites found."));let he;if(he=G.origin+G.pathname+q+".png"+G.search,o.transformRequest){const Me=o.transformRequest(he,"SpriteImage")||he;(Me instanceof Request||Me instanceof Promise)&&(he=Me)}$[te.id]=he;for(const Me in fe){const me=te.id=="default"?Me:`${te.id}:${Me}`;V[me]=fe[Me]}}).catch(function(fe){B(new Error(`Sprites cannot be loaded: ${oe}: ${fe.message}`))})})).then(ie).catch(B)}else ie()}).catch(B)})}const E0={};function JU(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function ane(n,e){const t=n.bounds;if(t){const r=b6([t[0],t[1]],e),i=b6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Sa(e).getExtent()}function ez(n,e,t){const r=new HU({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),l=Sa(t.projection||"EPSG:3857"),o=ane(i,l),p=l.getExtent(),v=i.minzoom||0,x=i.maxzoom||22,B={attributions:r.getAttributions(),projection:l,tileGrid:new Fx({origin:p?Ym(p):s.getOrigin(0),extent:o||s.getExtent(),minZoom:v,resolutions:one(l,e.tileSize).slice(0,x+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function lne(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},l=n.paint||{};i.paint=l;const o=MO(e,t.resolutions||om);let p;const v=Bi(i,"paint","background-color",o,E0,r);return l["background-opacity"]!==void 0&&(p=Bi(i,"paint","background-opacity",o,E0,r)),s.visibility=="none"?void 0:w0(v,p)}function Ane(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new jy({source:new Ny({}),render(i){const s=lne(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function tz(n,e,t){return new Promise(function(r,i){TU(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=ez(n,s,t);o.tileLoadFunction=l,o.format=new cte,r(new $U(o))}).catch(i)})}function une(n,e,t){const r=new tC({declutter:!0,visible:!1});return tz(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function nz(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function cne(n,e,t){return new Promise(function(r,i){TU(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=new HU({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=ez(n,s,t).tileGrid,t.projection&&(o.projection=Sa(t.projection));const p=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(v,x,B){const k=nz(B);let P=p(v,x,B);if(P.indexOf(k)!=-1){const D=o.getTileGrid().getTileCoordExtent(v);P=P.replace(k,D.toString())}return P}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function rz(n,e,t){const r=new NU;return cne(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function hne(n,e,t){const r=rz(n,e,t);return new RU({source:new qU({operationType:"image",operation:ine,sources:[r]})})}function iz(n,e,t){const r=t.projection?new s9({dataProjection:t.projection}):new s9,i=n.data,s={};if(typeof i=="string"){const[o]=Bb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const v=(B,k,P)=>{const D=nz(P);return o.replace(D,`${B.join(",")}`)},x=new Eb({attributions:n.attribution,format:r,loader:(B,k,P,D,N)=>{const W=typeof v=="function"?v(B,k,P):v;Ty("GeoJSON",W,t).then(V=>{const $=x.getFormat().readFeatures(V,{featureProjection:P});x.addFeatures($),D($)}).catch(V=>{x.removeLoadedExtent(B),N()})},strategy:hX});return x.set("mapbox-source",n),x}const p=new Eb({attributions:n.attribution,format:r,url:o,loader:(v,x,B,k,P)=>{Ty("GeoJSON",o,t).then(D=>{const N=p.getFormat().readFeatures(D,{featureProjection:B});p.addFeatures(N),k(N)}).catch(D=>{p.removeLoadedExtent(v),P()})}});return p}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const l=new Eb(Object.assign({attributions:n.attribution,format:r},s));return l.set("mapbox-source",n),l}function dne(n,e,t){return new mO({declutter:!0,source:iz(n,e,t),visible:!1})}function fne(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],pne(n,e,r,t))}}function pne(n,e,t,r){const i=Bi(n,"paint","raster-opacity",t,E0,r);e.setOpacity(i)}function mne(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=iB(r.layers),s=n.get("mapbox-layers"),l=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function gne(n,e,t,r){const i=OU(n),s=n.layers,l=t.type,o=t.source||JU(s,t.ref),p=n.sources[o];let v;if(l=="background")v=Ane(t,r,i);else if(p.type=="vector")v=une(p,e,r);else if(p.type=="raster")v=rz(p,e,r),v.setVisible(t.layout?t.layout.visibility!=="none":!0),v.on("prerender",fne(t,v,i));else if(p.type=="geojson")v=dne(p,e,r);else if(p.type=="raster-dem"&&t.type=="hillshade"){const B=hne(p,e,r);v=B,B.getSource().on("beforeoperations",function(k){const P=k.data;P.resolution=_6(r.projection||"EPSG:3857",k.resolution,Uf(k.extent),"m");const D=MO(k.resolution,r.resolutions||om);P.encoding=p.encoding,P.vert=5*Bi(t,"paint","hillshade-exaggeration",D,E0,i),P.sunAz=Bi(t,"paint","hillshade-illumination-direction",D,E0,i),P.sunEl=35,P.opacity=.3,P.highlightColor=Bi(t,"paint","hillshade-highlight-color",D,E0,i),P.shadowColor=Bi(t,"paint","hillshade-shadow-color",D,E0,i),P.accentColor=Bi(t,"paint","hillshade-accent-color",D,E0,i)}),v.setVisible(t.layout?t.layout.visibility!=="none":!0)}const x=o;return v&&v.set("mapbox-source",x),v}function g9(n,e,t,r){const i=[];let s=null;if(e instanceof CO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const B=r.projection?Sa(r.projection):s.getProjection();s=new gp(Object.assign(s.getProperties(),{maxResolution:om[0]/G0[B.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(b6(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(om[0]/G0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const l=n.layers;let o=[],p,v,x;for(let B=0,k=l.length;B<k;++B){const P=l[B],D=P.type;if(D=="heatmap"){console.debug(`layers[${B}].type "${D}" not supported`);continue}else x=P.source||JU(l,P.ref),(!x||x!=v)&&(o.length&&(i.push(y9(p,o,n,t,e,r)),o=[]),p=gne(n,t,P,r),p instanceof mO||p instanceof tC||(o=[]),v=p.get("mapbox-source")),o.push(P.id)}return i.push(y9(p,o,n,t,e,r)),Promise.all(i)}function yne(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new CO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:_2(e,t.accessToken);t=XU(s,t),r=new Promise(function(l,o){IU(e,t).then(function(p){g9(p,i,s,t).then(function(){l(i)}).catch(o)}).catch(function(p){o(new Error(`Could not load ${e}: ${p.message}`))})})}else r=new Promise(function(s,l){g9(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:_2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(l)});return r}function y9(n,e,t,r,i,s={}){let l=24,o=0;const p=t.layers;for(let v=0,x=p.length;v<x;++v){const B=p[v];e.indexOf(B.id)!==-1&&(l=Math.min("minzoom"in B?B.minzoom:0,l),o=Math.max("maxzoom"in B?B.maxzoom:24,o))}return new Promise(function(v,x){const B=function(){const P=n.getSource();if(!P||P.getState()==="error"){x(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in P){const D=P.getTileGrid();if(D){const N=D.getMinZoom();(l>0||N>0)&&n.setMaxResolution(Math.min(Dv(Math.max(0,l-1e-12),om),Dv(Math.max(0,N-1e-12),D.getResolutions()))),o<24&&n.setMinResolution(Dv(o,om))}}else l>0&&n.setMaxResolution(Dv(Math.max(0,l-1e-12),om));P instanceof Eb||P instanceof $U?sne(n,t,e,Object.assign({styleUrl:r},s)).then(function(){mne(n,i),v()}).catch(x):v()};n.set("mapbox-layers",e);const k=i.getLayers();k.getArray().indexOf(n)===-1&&k.push(n),n.getSource()?B():n.once("change:source",B)})}function ti(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ti=function(){return l},l}ti();function v9(n){return ti().f[0]++,ti().s[0]++,ti().b[1][0]++,!n||(ti().b[1][1]++,n.length<2)?(ti().b[0][0]++,ti().s[1]++,null):(ti().b[0][1]++,ti().s[2]++,Ae.jsx("span",{className:"maputnik-coords",children:n.map(e=>(ti().f[1]++,ti().s[3]++,String(e).padStart(7,""))).join(", ")}))}class oz extends Zn.Component{constructor(t){ti().f[5]++,ti().s[7]++;super(t);Pn(this,"updateStyle");Pn(this,"map");Pn(this,"container",(ti().s[5]++,null));Pn(this,"overlay");Pn(this,"popupContainer",(ti().s[6]++,null));Pn(this,"closeOverlay",(ti().s[32]++,t=>{ti().f[12]++,ti().s[33]++,t.target.blur(),ti().s[34]++,this.overlay.setPosition(void 0)}));ti().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},ti().s[9]++,this.updateStyle=G2.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(ti().f[6]++,ti().s[10]++,this.map)ti().b[2][1]++;else{ti().b[2][0]++,ti().s[11]++;return}ti().s[12]++,this.map.getLayers().clear(),ti().s[13]++,yne(this.map,t)}componentDidUpdate(t){ti().f[7]++,ti().s[14]++,this.props.mapStyle!==t.mapStyle?(ti().b[3][0]++,ti().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):ti().b[3][1]++}componentDidMount(){ti().f[8]++,ti().s[16]++,this.overlay=new uee({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(ti().s[17]++,new CO({target:this.container,overlays:[this.overlay],view:new gp({zoom:1,center:[180,-90]})}));ti().s[18]++,t.on("pointermove",i=>{ti().f[9]++;const s=(ti().s[19]++,d4(i.coordinate));ti().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),ti().s[21]++;const r=()=>{ti().f[10]++;const i=(ti().s[22]++,t.getView().getZoom()),s=(ti().s[23]++,d4(t.getView().getCenter()));ti().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};ti().s[25]++,r(),ti().s[26]++,t.on("moveend",r),ti().s[27]++,t.on("postrender",i=>{ti().f[11]++;const s=(ti().s[28]++,d4(t.getView().getCenter()));ti().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),ti().s[30]++,this.map=t,ti().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){ti().f[13]++;const t=(ti().s[35]++,this.props.t);return ti().s[36]++,Ae.jsxs("div",{className:"maputnik-ol-container",children:[Ae.jsxs("div",{ref:r=>(ti().f[14]++,ti().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[Ae.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:""}),Ae.jsx(tL,{features:(ti().b[4][0]++,this.state.selectedFeatures||(ti().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),Ae.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(ti().b[5][0]++,this.props.debugToolbox&&(ti().b[5][1]++,Ae.jsxs("div",{className:"maputnik-ol-debug",children:[Ae.jsxs("div",{children:[Ae.jsxs("label",{children:[t("cursor:")," "]}),Ae.jsx("span",{children:v9(this.state.cursor)})]}),Ae.jsxs("div",{children:[Ae.jsxs("label",{children:[t("center:")," "]}),Ae.jsx("span",{children:v9(this.state.center)})]}),Ae.jsxs("div",{children:[Ae.jsxs("label",{children:[t("rotation:")," "]}),Ae.jsx("span",{children:this.state.rotation})]})]}))),Ae.jsx("div",{className:"maputnik-ol",ref:r=>(ti().f[15]++,ti().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}Pn(oz,"defaultProps",(ti().s[4]++,{onMapLoaded:()=>{ti().f[2]++},onDataChange:()=>{ti().f[3]++},onLayerSelect:()=>{ti().f[4]++}}));const vne=(ti().s[39]++,Ns()(oz));var q4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var C9;function Cne(){return C9||(C9=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var o in s)e.call(s,o)&&s[o]&&(l=i(l,o));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(q4)),q4.exports}var _ne=Cne();const am=dl(_ne);function fg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fg=function(){return l},l}fg();class bne extends Zn.Component{render(){fg().f[0]++;const e=(fg().s[0]++,{width:20,height:20,...this.props.style});return fg().s[1]++,this.props.isCollapsed?(fg().b[0][0]++,Ae.jsx(cH,{style:e})):(fg().b[0][1]++,Ae.jsx(uH,{style:e}))}}function oy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oy=function(){return l},l}oy();class xne extends Zn.Component{render(){return oy().f[0]++,oy().s[0]++,Ae.jsx("li",{className:"maputnik-layer-list-group",children:Ae.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(oy().f[1]++,oy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[Ae.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(bne,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function OC(){return OC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OC.apply(null,arguments)}function Mne(n){if(Array.isArray(n))return n}function wne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,l,o=[],p=!0,v=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(p=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);p=!0);}catch(x){v=!0,i=x}finally{try{if(!p&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(v)throw i}}return o}}function z6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function sz(n,e){if(n){if(typeof n=="string")return z6(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?z6(n,e):void 0}}function Sne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function az(n,e){return Mne(n)||wne(n,e)||sz(n,e)||Sne()}function ky(n){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(n)}function Ene(n,e){if(ky(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lz(n){var e=Ene(n,"string");return ky(e)=="symbol"?e:e+""}function Ka(n,e,t){return(e=lz(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Ka(n,i,t[i])})}return n}function n_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Bne(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,lz(r.key),r)}}function r_(n,e,t){return e&&Bne(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function as(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function BO(n,e){if(e&&(ky(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return as(n)}function IC(n){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IC(n)}function N6(n,e){return N6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},N6(n,e)}function OO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&N6(n,e)}var H4,_9;function One(){if(_9)return H4;_9=1;var n=function(e,t,r,i,s,l,o,p){if(!e){var v;if(t===void 0)v=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[r,i,s,l,o,p],B=0;v=new Error(t.replace(/%s/g,function(){return x[B++]})),v.name="Invariant Violation"}throw v.framesToPop=1,v}};return H4=n,H4}var Ine=One();const Lg=dl(Ine);function Tne(n){if(Array.isArray(n))return z6(n)}function kne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kne(n){return Tne(n)||kne(n)||sz(n)||Pne()}var Rne=function(){function n(){n_(this,n),Ka(this,"refs",{})}return r_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(Dne)}}]),n}();function Dne(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function Az(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var B1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},uz=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function Ab(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function ub(n,e){n.style["".concat(uz,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function $4(n,e){n.style["".concat(uz,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function Fv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function b9(n,e,t){return Math.max(n,Math.min(t,e))}function sy(n){return n.substr(-2)==="px"?parseFloat(n):0}function Fne(n){var e=window.getComputedStyle(n);return{bottom:sy(e.marginBottom),left:sy(e.marginLeft),right:sy(e.marginRight),top:sy(e.marginTop)}}function IO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function Z4(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function _v(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function Lne(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Ob(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Ob(n.parentNode,e,r)}}function Une(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function x9(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,l="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Lg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),l=o[1]}return Lg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),l==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function zne(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Lg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=az(i,2),l=s[0],o=s[1];return[x9({height:e,lockOffset:l,width:t}),x9({height:e,lockOffset:o,width:t})]}function Nne(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function cz(n){return n instanceof HTMLElement?Nne(n)?n:cz(n.parentNode):null}function Wne(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:sy(e.gridColumnGap),y:sy(e.gridRowGap)}:{x:0,y:0}}var ag={ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},pg={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function jne(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=Kne(r.querySelectorAll(e));return i.forEach(function(s,l){if(s.type!=="file"&&(s.value=t[l].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===pg.Canvas&&t[l].width>0&&t[l].height>0){var o=s.getContext("2d");o.drawImage(t[l],0,0)}}),r}function Gne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){OO(s,i);function s(){var l,o;n_(this,s);for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];return o=BO(this,(l=IC(s)).call.apply(l,[this].concat(v))),Ka(as(as(o)),"wrappedInstance",Ai.createRef()),o}return r_(s,[{key:"componentDidMount",value:function(){var o=dx.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Lg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,OC({ref:o},this.props))}}]),s}(Ai.Component),Ka(e,"displayName",IO("sortableHandle",n)),t}function M9(n){return n.sortableHandle!=null}var Qne=function(){function n(e,t){n_(this,n),this.container=e,this.onScrollCallback=t}return r_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,l=t.maxTranslate,o=t.width,p=t.height,v={x:0,y:0},x={x:1,y:1},B={x:10,y:10},k=this.container,P=k.scrollTop,D=k.scrollLeft,N=k.scrollHeight,W=k.scrollWidth,V=k.clientHeight,$=k.clientWidth,ie=P===0,ne=N-P-V===0,q=D===0,te=W-D-$===0;i.y>=l.y-p/2&&!ne?(v.y=1,x.y=B.y*Math.abs((l.y-p/2-i.y)/p)):i.x>=l.x-o/2&&!te?(v.x=1,x.x=B.x*Math.abs((l.x-o/2-i.x)/o)):i.y<=s.y+p/2&&!ie?(v.y=-1,x.y=B.y*Math.abs((i.y-p/2-s.y)/p)):i.x<=s.x+o/2&&!q&&(v.x=-1,x.x=B.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(v.x!==0||v.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var G={left:x.x*v.x,top:x.y*v.y};r.container.scrollTop+=G.top,r.container.scrollLeft+=G.left,r.onScrollCallback(G)},5))}}]),n}();function Yne(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function qne(n){var e=[pg.Input,pg.Textarea,pg.Select,pg.Option,pg.Button];return!!(e.indexOf(n.target.tagName)!==-1||Fv(n.target,function(t){return t.contentEditable==="true"}))}var hz={axis:yi.oneOf(["x","y","xy"]),contentWindow:yi.any,disableAutoscroll:yi.bool,distance:yi.number,getContainer:yi.func,getHelperDimensions:yi.func,helperClass:yi.string,helperContainer:yi.oneOfType([yi.func,typeof HTMLElement>"u"?yi.any:yi.instanceOf(HTMLElement)]),hideSortableGhost:yi.bool,keyboardSortingTransitionDuration:yi.number,lockAxis:yi.string,lockOffset:yi.oneOfType([yi.number,yi.string,yi.arrayOf(yi.oneOfType([yi.number,yi.string]))]),lockToContainerEdges:yi.bool,onSortEnd:yi.func,onSortMove:yi.func,onSortOver:yi.func,onSortStart:yi.func,pressDelay:yi.number,pressThreshold:yi.number,keyCodes:yi.shape({lift:yi.arrayOf(yi.number),drop:yi.arrayOf(yi.number),cancel:yi.arrayOf(yi.number),up:yi.arrayOf(yi.number),down:yi.arrayOf(yi.number)}),shouldCancelStart:yi.func,transitionDuration:yi.number,updateBeforeSortStart:yi.func,useDragHandle:yi.bool,useWindowAsScrollContainer:yi.bool},dz={lift:[ag.SPACE],drop:[ag.SPACE],cancel:[ag.ESC],up:[ag.UP,ag.LEFT],down:[ag.DOWN,ag.RIGHT]},Vne={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Yne,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:dz,shouldCancelStart:qne,transitionDuration:300,useWindowAsScrollContainer:!1},Hne=Object.keys(hz);function $ne(n){Lg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Zne(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var fz=Ai.createContext({manager:{}});function Xne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){OO(s,i);function s(l){var o;n_(this,s),o=BO(this,IC(s).call(this,l)),Ka(as(as(o)),"state",{}),Ka(as(as(o)),"handleStart",function(v){var x=o.props,B=x.distance,k=x.shouldCancelStart;if(!(v.button===2||k(v))){o.touched=!0,o.position=_v(v);var P=Fv(v.target,function(ie){return ie.sortableInfo!=null});if(P&&P.sortableInfo&&o.nodeIsChild(P)&&!o.state.sorting){var D=o.props.useDragHandle,N=P.sortableInfo,W=N.index,V=N.collection,$=N.disabled;if($||D&&!Fv(v.target,M9))return;o.manager.active={collection:V,index:W},!Lne(v)&&v.target.tagName===pg.Anchor&&v.preventDefault(),B||(o.props.pressDelay===0?o.handlePress(v):o.pressTimer=setTimeout(function(){return o.handlePress(v)},o.props.pressDelay))}}}),Ka(as(as(o)),"nodeIsChild",function(v){return v.sortableInfo.manager===o.manager}),Ka(as(as(o)),"handleMove",function(v){var x=o.props,B=x.distance,k=x.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var P=_v(v),D={x:o.position.x-P.x,y:o.position.y-P.y},N=Math.abs(D.x)+Math.abs(D.y);o.delta=D,!B&&(!k||N>=k)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):B&&N>=B&&o.manager.isActive()&&o.handlePress(v)}}),Ka(as(as(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),Ka(as(as(o)),"cancel",function(){var v=o.props.distance,x=o.state.sorting;x||(v||clearTimeout(o.pressTimer),o.manager.active=null)}),Ka(as(as(o)),"handlePress",function(v){try{var x=o.manager.getActive(),B=function(){if(x){var k=function(){var he=q.sortableInfo.index,Me=Fne(q),me=Wne(o.container),pe=o.scrollContainer.getBoundingClientRect(),qe=N({index:he,node:q,collection:te});if(o.node=q,o.margin=Me,o.gridGap=me,o.width=qe.width,o.height=qe.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=q.getBoundingClientRect(),o.containerBoundingRect=pe,o.index=he,o.newIndex=he,o.axis={x:D.indexOf("x")>=0,y:D.indexOf("y")>=0},o.offsetEdge=Ob(q,o.container),G?o.initialOffset=_v(V4({},v,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=_v(v),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(jne(q)),Ab(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-Me.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-Me.top,"px"),width:"".concat(o.width,"px")}),G&&o.helper.focus(),V&&(o.sortableGhost=q,Ab(q,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},G){var Se=ne?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,vt=Se.top,Je=Se.left,Ke=Se.width,je=Se.height,Pe=vt+je,Le=Je+Ke;o.axis.x&&(o.minTranslate.x=Je-o.boundingClientRect.left,o.maxTranslate.x=Le-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=vt-o.boundingClientRect.top,o.maxTranslate.y=Pe-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(ne?0:pe.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(ne?o.contentWindow.innerWidth:pe.left+pe.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(ne?0:pe.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(ne?o.contentWindow.innerHeight:pe.top+pe.height)-o.boundingClientRect.top-o.height/2);W&&W.split(" ").forEach(function(Xe){return o.helper.classList.add(Xe)}),o.listenerNode=v.touches?v.target:o.contentWindow,G?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(B1.move.forEach(function(Xe){return o.listenerNode.addEventListener(Xe,o.handleSortMove,!1)}),B1.end.forEach(function(Xe){return o.listenerNode.addEventListener(Xe,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:he}),ie&&ie({node:q,index:he,collection:te,isKeySorting:G,nodes:o.manager.getOrderedRefs(),helper:o.helper},v),G&&o.keyMove(0)},P=o.props,D=P.axis,N=P.getHelperDimensions,W=P.helperClass,V=P.hideSortableGhost,$=P.updateBeforeSortStart,ie=P.onSortStart,ne=P.useWindowAsScrollContainer,q=x.node,te=x.collection,G=o.manager.isKeySorting,oe=function(){if(typeof $=="function"){o._awaitingUpdateBeforeSortStart=!0;var fe=Zne(function(){var he=q.sortableInfo.index;return Promise.resolve($({collection:te,index:he,node:q,isKeySorting:G},v)).then(function(){})},function(he,Me){if(o._awaitingUpdateBeforeSortStart=!1,he)throw Me;return Me});if(fe&&fe.then)return fe.then(function(){})}}();return oe&&oe.then?oe.then(k):k(oe)}}();return Promise.resolve(B&&B.then?B.then(function(){}):void 0)}catch(k){return Promise.reject(k)}}),Ka(as(as(o)),"handleSortMove",function(v){var x=o.props.onSortMove;typeof v.preventDefault=="function"&&v.cancelable&&v.preventDefault(),o.updateHelperPosition(v),o.animateNodes(),o.autoscroll(),x&&x(v)}),Ka(as(as(o)),"handleSortEnd",function(v){var x=o.props,B=x.hideSortableGhost,k=x.onSortEnd,P=o.manager,D=P.active.collection,N=P.isKeySorting,W=o.manager.getOrderedRefs();o.listenerNode&&(N?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(B1.move.forEach(function(q){return o.listenerNode.removeEventListener(q,o.handleSortMove)}),B1.end.forEach(function(q){return o.listenerNode.removeEventListener(q,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),B&&o.sortableGhost&&Ab(o.sortableGhost,{opacity:"",visibility:""});for(var V=0,$=W.length;V<$;V++){var ie=W[V],ne=ie.node;ie.edgeOffset=null,ie.boundingClientRect=null,ub(ne,null),$4(ne,null),ie.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof k=="function"&&k({collection:D,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:N,nodes:W},v),o.touched=!1}),Ka(as(as(o)),"autoscroll",function(){var v=o.props.disableAutoscroll,x=o.manager.isKeySorting;if(v){o.autoScroller.clear();return}if(x){var B=V4({},o.translate),k=0,P=0;o.axis.x&&(B.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),k=o.translate.x-B.x),o.axis.y&&(B.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),P=o.translate.y-B.y),o.translate=B,ub(o.helper,o.translate),o.scrollContainer.scrollLeft+=k,o.scrollContainer.scrollTop+=P;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),Ka(as(as(o)),"onAutoScroll",function(v){o.translate.x+=v.left,o.translate.y+=v.top,o.animateNodes()}),Ka(as(as(o)),"handleKeyDown",function(v){var x=v.keyCode,B=o.props,k=B.shouldCancelStart,P=B.keyCodes,D=P===void 0?{}:P,N=V4({},dz,D);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!N.lift.includes(x)||k(v)||!o.isValidSortingTarget(v))||(v.stopPropagation(),v.preventDefault(),N.lift.includes(x)&&!o.manager.active?o.keyLift(v):N.drop.includes(x)&&o.manager.active?o.keyDrop(v):N.cancel.includes(x)?(o.newIndex=o.manager.active.index,o.keyDrop(v)):N.up.includes(x)?o.keyMove(-1):N.down.includes(x)&&o.keyMove(1))}),Ka(as(as(o)),"keyLift",function(v){var x=v.target,B=Fv(x,function(N){return N.sortableInfo!=null}),k=B.sortableInfo,P=k.index,D=k.collection;o.initialFocusedNode=x,o.manager.isKeySorting=!0,o.manager.active={index:P,collection:D},o.handlePress(v)}),Ka(as(as(o)),"keyMove",function(v){var x=o.manager.getOrderedRefs(),B=x[x.length-1].node.sortableInfo.index,k=o.newIndex+v,P=o.newIndex;if(!(k<0||k>B)){o.prevIndex=P,o.newIndex=k;var D=Une(o.newIndex,o.prevIndex,o.index),N=x.find(function(G){var oe=G.node;return oe.sortableInfo.index===D}),W=N.node,V=o.containerScrollDelta,$=N.boundingClientRect||Z4(W,V),ie=N.translate||{x:0,y:0},ne={top:$.top+ie.y-V.top,left:$.left+ie.x-V.left},q=P<k,te={x:q&&o.axis.x?W.offsetWidth-o.width:0,y:q&&o.axis.y?W.offsetHeight-o.height:0};o.handleSortMove({pageX:ne.left+te.x,pageY:ne.top+te.y,ignoreTransition:v===0})}}),Ka(as(as(o)),"keyDrop",function(v){o.handleSortEnd(v),o.initialFocusedNode&&o.initialFocusedNode.focus()}),Ka(as(as(o)),"handleKeyEnd",function(v){o.manager.active&&o.keyDrop(v)}),Ka(as(as(o)),"isValidSortingTarget",function(v){var x=o.props.useDragHandle,B=v.target,k=Fv(B,function(P){return P.sortableInfo!=null});return k&&k.sortableInfo&&!k.sortableInfo.disabled&&(x?M9(B):B.sortableInfo)});var p=new Rne;return $ne(l),o.manager=p,o.wrappedInstance=Ai.createRef(),o.sortableContextValue={manager:p},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return r_(s,[{key:"componentDidMount",value:function(){var o=this,p=this.props.useWindowAsScrollContainer,v=this.getContainer();Promise.resolve(v).then(function(x){o.container=x,o.document=o.container.ownerDocument||document;var B=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof B=="function"?B():B,o.scrollContainer=p?o.document.scrollingElement||o.document.documentElement:cz(o.container)||o.container,o.autoScroller=new Qne(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(k){return B1[k].forEach(function(P){return o.container.addEventListener(P,o.events[k],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(p){return B1[p].forEach(function(v){return o.container.removeEventListener(v,o.events[p])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var p=this.props,v=p.lockAxis,x=p.lockOffset,B=p.lockToContainerEdges,k=p.transitionDuration,P=p.keyboardSortingTransitionDuration,D=P===void 0?k:P,N=this.manager.isKeySorting,W=o.ignoreTransition,V=_v(o),$={x:V.x-this.initialOffset.x,y:V.y-this.initialOffset.y};if($.y-=window.pageYOffset-this.initialWindowScroll.top,$.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=$,B){var ie=zne({height:this.height,lockOffset:x,width:this.width}),ne=az(ie,2),q=ne[0],te=ne[1],G={x:this.width/2-q.x,y:this.height/2-q.y},oe={x:this.width/2-te.x,y:this.height/2-te.y};$.x=b9(this.minTranslate.x+G.x,this.maxTranslate.x-oe.x,$.x),$.y=b9(this.minTranslate.y+G.y,this.maxTranslate.y-oe.y,$.y)}v==="x"?$.y=0:v==="y"&&($.x=0),N&&D&&!W&&$4(this.helper,D),ub(this.helper,$)}},{key:"animateNodes",value:function(){var o=this.props,p=o.transitionDuration,v=o.hideSortableGhost,x=o.onSortOver,B=this.containerScrollDelta,k=this.windowScrollDelta,P=this.manager.getOrderedRefs(),D={left:this.offsetEdge.left+this.translate.x+B.left,top:this.offsetEdge.top+this.translate.y+B.top},N=this.manager.isKeySorting,W=this.newIndex;this.newIndex=null;for(var V=0,$=P.length;V<$;V++){var ie=P[V].node,ne=ie.sortableInfo.index,q=ie.offsetWidth,te=ie.offsetHeight,G={height:this.height>te?te/2:this.height/2,width:this.width>q?q/2:this.width/2},oe=N&&ne>this.index&&ne<=W,fe=N&&ne<this.index&&ne>=W,he={x:0,y:0},Me=P[V].edgeOffset;Me||(Me=Ob(ie,this.container),P[V].edgeOffset=Me,N&&(P[V].boundingClientRect=Z4(ie,B)));var me=V<P.length-1&&P[V+1],pe=V>0&&P[V-1];if(me&&!me.edgeOffset&&(me.edgeOffset=Ob(me.node,this.container),N&&(me.boundingClientRect=Z4(me.node,B))),ne===this.index){v&&(this.sortableGhost=ie,Ab(ie,{opacity:0,visibility:"hidden"}));continue}p&&$4(ie,p),this.axis.x?this.axis.y?fe||ne<this.index&&(D.left+k.left-G.width<=Me.left&&D.top+k.top<=Me.top+G.height||D.top+k.top+G.height<=Me.top)?(he.x=this.width+this.marginOffset.x,Me.left+he.x>this.containerBoundingRect.width-G.width&&me&&(he.x=me.edgeOffset.left-Me.left,he.y=me.edgeOffset.top-Me.top),this.newIndex===null&&(this.newIndex=ne)):(oe||ne>this.index&&(D.left+k.left+G.width>=Me.left&&D.top+k.top+G.height>=Me.top||D.top+k.top+G.height>=Me.top+te))&&(he.x=-(this.width+this.marginOffset.x),Me.left+he.x<this.containerBoundingRect.left+G.width&&pe&&(he.x=pe.edgeOffset.left-Me.left,he.y=pe.edgeOffset.top-Me.top),this.newIndex=ne):oe||ne>this.index&&D.left+k.left+G.width>=Me.left?(he.x=-(this.width+this.marginOffset.x),this.newIndex=ne):(fe||ne<this.index&&D.left+k.left<=Me.left+G.width)&&(he.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=ne)):this.axis.y&&(oe||ne>this.index&&D.top+k.top+G.height>=Me.top?(he.y=-(this.height+this.marginOffset.y),this.newIndex=ne):(fe||ne<this.index&&D.top+k.top<=Me.top+G.height)&&(he.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=ne))),ub(ie,he),P[V].translate=he}this.newIndex==null&&(this.newIndex=this.index),N&&(this.newIndex=W);var qe=N?this.prevIndex:W;x&&this.newIndex!==qe&&x({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:qe,isKeySorting:N,nodes:P,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Lg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?dx.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(fz.Provider,{value:this.sortableContextValue},Ai.createElement(n,OC({ref:o},Az(this.props,Hne))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(Ai.Component),Ka(e,"displayName",IO("sortableList",n)),Ka(e,"defaultProps",Vne),Ka(e,"propTypes",hz),t}var pz={index:yi.number.isRequired,collection:yi.oneOfType([yi.number,yi.string]),disabled:yi.bool},Jne=Object.keys(pz);function ere(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){OO(s,i);function s(){var l,o;n_(this,s);for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];return o=BO(this,(l=IC(s)).call.apply(l,[this].concat(v))),Ka(as(as(o)),"wrappedInstance",Ai.createRef()),o}return r_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,p=o.collection,v=o.disabled,x=o.index,B=dx.findDOMNode(this);B.sortableInfo={collection:p,disabled:v,index:x,manager:this.context.manager},this.node=B,this.ref={node:B},this.context.manager.add(p,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Lg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,OC({ref:o},Az(this.props,Jne)))}}]),s}(Ai.Component),Ka(e,"displayName",IO("sortableElement",n)),Ka(e,"contextType",fz),Ka(e,"propTypes",pz),Ka(e,"defaultProps",{collection:0}),t}function lo(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return lo=function(){return l},l}lo();const tre=(lo().s[0]++,Gne(n=>(lo().f[0]++,lo().s[1]++,Ae.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[Ae.jsx(eL,{className:"layer-handle__icon",type:n.layerType}),Ae.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class X4 extends Zn.Component{renderIcon(){switch(lo().f[1]++,lo().s[2]++,this.props.action){case"duplicate":return lo().b[0][0]++,lo().s[3]++,Ae.jsx(iH,{});case"show":return lo().b[0][1]++,lo().s[4]++,Ae.jsx(rH,{});case"hide":return lo().b[0][2]++,lo().s[5]++,Ae.jsx(nH,{});case"delete":return lo().b[0][3]++,lo().s[6]++,Ae.jsx(Uy,{})}}render(){lo().f[2]++;const{classBlockName:e,classBlockModifier:t}=(lo().s[7]++,this.props);let r=(lo().s[8]++,"");return lo().s[9]++,e?(lo().b[1][0]++,lo().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,lo().s[11]++,t?(lo().b[2][0]++,lo().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):lo().b[2][1]++):lo().b[1][1]++,lo().s[13]++,Ae.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class W6 extends Zn.Component{getChildContext(){return lo().f[6]++,lo().s[16]++,{reactIconBase:{size:14}}}render(){lo().f[7]++;const e=(lo().s[17]++,this.props.visibility==="visible"?(lo().b[3][0]++,"show"):(lo().b[3][1]++,"hide"));return lo().s[18]++,Ae.jsxs("li",{id:this.props.id,onClick:t=>(lo().f[8]++,lo().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:am({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[Ae.jsx(tre,{...this.props}),Ae.jsx("span",{style:{flexGrow:1}}),Ae.jsx(X4,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(lo().f[9]++,lo().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),Ae.jsx(X4,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(lo().f[10]++,lo().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),Ae.jsx(X4,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(lo().f[11]++,lo().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}Pn(W6,"defaultProps",(lo().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{lo().f[3]++},onLayerDestroy:()=>{lo().f[4]++},onLayerVisibilityToggle:()=>{lo().f[5]++}})),Pn(W6,"childContextTypes",(lo().s[15]++,{reactIconBase:yi.object}));const nre=(lo().s[23]++,ere(n=>(lo().f[12]++,lo().s[24]++,Ae.jsx(W6,{...n}))));function M2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return M2=function(){return l},l}M2();class Xa extends Zn.Component{render(){return M2().f[0]++,M2().s[0]++,Ae.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:am("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var mz=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],w2=mz.join(","),gz=typeof Element>"u",Ug=gz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,S2=!gz&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},E2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",l=s||t&&e&&n(e.parentNode);return l},rre=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},yz=function(e,t,r){if(E2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(w2));return t&&Ug.call(e,w2)&&i.unshift(e),i=i.filter(r),i},vz=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var l=s.shift();if(!E2(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),p=o.length?o:l.children,v=n(p,!0,r);r.flatten?i.push.apply(i,v):i.push({scopeParent:l,candidates:v})}else{var x=Ug.call(l,w2);x&&r.filter(l)&&(t||!e.includes(l))&&i.push(l);var B=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),k=!E2(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(B&&k){var P=n(B===!0?l.children:B.children,!0,r);r.flatten?i.push.apply(i,P):i.push({scopeParent:l,candidates:P})}else s.unshift.apply(s,l.children)}}return i},Cz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},B0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||rre(e))&&!Cz(e)?0:e.tabIndex},ire=function(e,t){var r=B0(e);return r<0&&t&&!Cz(e)?0:r},ore=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},_z=function(e){return e.tagName==="INPUT"},sre=function(e){return _z(e)&&e.type==="hidden"},are=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},lre=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Are=function(e){if(!e.name)return!0;var t=e.form||S2(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=lre(i,e.form);return!s||s===e},ure=function(e){return _z(e)&&e.type==="radio"},cre=function(e){return ure(e)&&!Are(e)},hre=function(e){var t,r=e&&S2(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var l,o,p;for(s=!!((l=i)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(p=e.ownerDocument)!==null&&p!==void 0&&p.contains(e));!s&&i;){var v,x,B;r=S2(i),i=(v=r)===null||v===void 0?void 0:v.host,s=!!((x=i)!==null&&x!==void 0&&(B=x.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return s},w9=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},dre=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Ug.call(e,"details>summary:first-of-type"),l=s?e.parentElement:e;if(Ug.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var p=e.parentElement,v=S2(e);if(p&&!p.shadowRoot&&i(p)===!0)return w9(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=o}if(hre(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return w9(e);return!1},fre=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Ug.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},B2=function(e,t){return!(t.disabled||E2(t)||sre(t)||dre(t,e)||are(t)||fre(t))},j6=function(e,t){return!(cre(t)||B0(t)<0||!B2(e,t))},pre=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},mre=function n(e){var t=[],r=[];return e.forEach(function(i,s){var l=!!i.scopeParent,o=l?i.scopeParent:i,p=ire(o,l),v=l?n(i.candidates):o;p===0?l?t.push.apply(t,v):t.push(o):r.push({documentOrder:s,tabIndex:p,item:i,isScope:l,content:v})}),r.sort(ore).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},bz=function(e,t){t=t||{};var r;return t.getShadowRoot?r=vz([e],t.includeContainer,{filter:j6.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:pre}):r=yz(e,t.includeContainer,j6.bind(null,t)),mre(r)},xz=function(e,t){t=t||{};var r;return t.getShadowRoot?r=vz([e],t.includeContainer,{filter:B2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=yz(e,t.includeContainer,B2.bind(null,t)),r},hg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ug.call(e,w2)===!1?!1:j6(t,e)},gre=mz.concat("iframe").join(","),Ib=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ug.call(e,gre)===!1?!1:B2(t,e)};const yre=Object.freeze(Object.defineProperty({__proto__:null,focusable:xz,getTabIndex:B0,isFocusable:Ib,isTabbable:hg,tabbable:bz},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function S9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function E9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(t),!0).forEach(function(r){vre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vre(n,e,t){return e=_re(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cre(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _re(n){var e=Cre(n,"string");return typeof e=="symbol"?e:String(e)}var B9={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},bre=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},xre=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},nC=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Mre=function(e){return nC(e)&&!e.shiftKey},wre=function(e){return nC(e)&&e.shiftKey},O9=function(e){return setTimeout(e,0)},I9=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},bv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},cb=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Sre=[],Ere=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Sre,s=E9({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Mre,isKeyBackward:wre},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,p=function(me,pe,qe){return me&&me[pe]!==void 0?me[pe]:s[qe||pe]},v=function(me,pe){var qe=typeof(pe==null?void 0:pe.composedPath)=="function"?pe.composedPath():void 0;return l.containerGroups.findIndex(function(Se){var vt=Se.container,Je=Se.tabbableNodes;return vt.contains(me)||(qe==null?void 0:qe.includes(vt))||Je.find(function(Ke){return Ke===me})})},x=function(me){var pe=s[me];if(typeof pe=="function"){for(var qe=arguments.length,Se=new Array(qe>1?qe-1:0),vt=1;vt<qe;vt++)Se[vt-1]=arguments[vt];pe=pe.apply(void 0,Se)}if(pe===!0&&(pe=void 0),!pe){if(pe===void 0||pe===!1)return pe;throw new Error("`".concat(me,"` was specified but was not a node, or did not return a node"))}var Je=pe;if(typeof pe=="string"&&(Je=r.querySelector(pe),!Je))throw new Error("`".concat(me,"` as selector refers to no known node"));return Je},B=function(){var me=x("initialFocus");if(me===!1)return!1;if(me===void 0||!Ib(me,s.tabbableOptions))if(v(r.activeElement)>=0)me=r.activeElement;else{var pe=l.tabbableGroups[0],qe=pe&&pe.firstTabbableNode;me=qe||x("fallbackFocus")}if(!me)throw new Error("Your focus-trap needs to have at least one focusable element");return me},k=function(){if(l.containerGroups=l.containers.map(function(me){var pe=bz(me,s.tabbableOptions),qe=xz(me,s.tabbableOptions),Se=pe.length>0?pe[0]:void 0,vt=pe.length>0?pe[pe.length-1]:void 0,Je=qe.find(function(Pe){return hg(Pe)}),Ke=qe.slice().reverse().find(function(Pe){return hg(Pe)}),je=!!pe.find(function(Pe){return B0(Pe)>0});return{container:me,tabbableNodes:pe,focusableNodes:qe,posTabIndexesFound:je,firstTabbableNode:Se,lastTabbableNode:vt,firstDomTabbableNode:Je,lastDomTabbableNode:Ke,nextTabbableNode:function(Le){var Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ct=pe.indexOf(Le);return Ct<0?Xe?qe.slice(qe.indexOf(Le)+1).find(function(Gt){return hg(Gt)}):qe.slice(0,qe.indexOf(Le)).reverse().find(function(Gt){return hg(Gt)}):pe[Ct+(Xe?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(me){return me.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(me){return me.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function Me(me){var pe=me.activeElement;if(pe)return pe.shadowRoot&&pe.shadowRoot.activeElement!==null?Me(pe.shadowRoot):pe},D=function Me(me){if(me!==!1&&me!==P(document)){if(!me||!me.focus){Me(B());return}me.focus({preventScroll:!!s.preventScroll}),l.mostRecentlyFocusedNode=me,bre(me)&&me.select()}},N=function(me){var pe=x("setReturnFocus",me);return pe||(pe===!1?!1:me)},W=function(me){var pe=me.target,qe=me.event,Se=me.isBackward,vt=Se===void 0?!1:Se;pe=pe||cb(qe),k();var Je=null;if(l.tabbableGroups.length>0){var Ke=v(pe,qe),je=Ke>=0?l.containerGroups[Ke]:void 0;if(Ke<0)vt?Je=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:Je=l.tabbableGroups[0].firstTabbableNode;else if(vt){var Pe=I9(l.tabbableGroups,function(Ut){var kt=Ut.firstTabbableNode;return pe===kt});if(Pe<0&&(je.container===pe||Ib(pe,s.tabbableOptions)&&!hg(pe,s.tabbableOptions)&&!je.nextTabbableNode(pe,!1))&&(Pe=Ke),Pe>=0){var Le=Pe===0?l.tabbableGroups.length-1:Pe-1,Xe=l.tabbableGroups[Le];Je=B0(pe)>=0?Xe.lastTabbableNode:Xe.lastDomTabbableNode}else nC(qe)||(Je=je.nextTabbableNode(pe,!1))}else{var Ct=I9(l.tabbableGroups,function(Ut){var kt=Ut.lastTabbableNode;return pe===kt});if(Ct<0&&(je.container===pe||Ib(pe,s.tabbableOptions)&&!hg(pe,s.tabbableOptions)&&!je.nextTabbableNode(pe))&&(Ct=Ke),Ct>=0){var Gt=Ct===l.tabbableGroups.length-1?0:Ct+1,mt=l.tabbableGroups[Gt];Je=B0(pe)>=0?mt.firstTabbableNode:mt.firstDomTabbableNode}else nC(qe)||(Je=je.nextTabbableNode(pe))}}else Je=x("fallbackFocus");return Je},V=function(me){var pe=cb(me);if(!(v(pe,me)>=0)){if(bv(s.clickOutsideDeactivates,me)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}bv(s.allowOutsideClick,me)||me.preventDefault()}},$=function(me){var pe=cb(me),qe=v(pe,me)>=0;if(qe||pe instanceof Document)qe&&(l.mostRecentlyFocusedNode=pe);else{me.stopImmediatePropagation();var Se,vt=!0;if(l.mostRecentlyFocusedNode)if(B0(l.mostRecentlyFocusedNode)>0){var Je=v(l.mostRecentlyFocusedNode),Ke=l.containerGroups[Je].tabbableNodes;if(Ke.length>0){var je=Ke.findIndex(function(Pe){return Pe===l.mostRecentlyFocusedNode});je>=0&&(s.isKeyForward(l.recentNavEvent)?je+1<Ke.length&&(Se=Ke[je+1],vt=!1):je-1>=0&&(Se=Ke[je-1],vt=!1))}}else l.containerGroups.some(function(Pe){return Pe.tabbableNodes.some(function(Le){return B0(Le)>0})})||(vt=!1);else vt=!1;vt&&(Se=W({target:l.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(l.recentNavEvent)})),D(Se||l.mostRecentlyFocusedNode||B())}l.recentNavEvent=void 0},ie=function(me){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=me;var qe=W({event:me,isBackward:pe});qe&&(nC(me)&&me.preventDefault(),D(qe))},ne=function(me){if(xre(me)&&bv(s.escapeDeactivates,me)!==!1){me.preventDefault(),o.deactivate();return}(s.isKeyForward(me)||s.isKeyBackward(me))&&ie(me,s.isKeyBackward(me))},q=function(me){var pe=cb(me);v(pe,me)>=0||bv(s.clickOutsideDeactivates,me)||bv(s.allowOutsideClick,me)||(me.preventDefault(),me.stopImmediatePropagation())},te=function(){if(l.active)return B9.activateTrap(i,o),l.delayInitialFocusTimer=s.delayInitialFocus?O9(function(){D(B())}):D(B()),r.addEventListener("focusin",$,!0),r.addEventListener("mousedown",V,{capture:!0,passive:!1}),r.addEventListener("touchstart",V,{capture:!0,passive:!1}),r.addEventListener("click",q,{capture:!0,passive:!1}),r.addEventListener("keydown",ne,{capture:!0,passive:!1}),o},G=function(){if(l.active)return r.removeEventListener("focusin",$,!0),r.removeEventListener("mousedown",V,!0),r.removeEventListener("touchstart",V,!0),r.removeEventListener("click",q,!0),r.removeEventListener("keydown",ne,!0),o},oe=function(me){var pe=me.some(function(qe){var Se=Array.from(qe.removedNodes);return Se.some(function(vt){return vt===l.mostRecentlyFocusedNode})});pe&&D(B())},fe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(oe):void 0,he=function(){fe&&(fe.disconnect(),l.active&&!l.paused&&l.containers.map(function(me){fe.observe(me,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(me){if(l.active)return this;var pe=p(me,"onActivate"),qe=p(me,"onPostActivate"),Se=p(me,"checkCanFocusTrap");Se||k(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,pe==null||pe();var vt=function(){Se&&k(),te(),he(),qe==null||qe()};return Se?(Se(l.containers.concat()).then(vt,vt),this):(vt(),this)},deactivate:function(me){if(!l.active)return this;var pe=E9({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},me);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,G(),l.active=!1,l.paused=!1,he(),B9.deactivateTrap(i,o);var qe=p(pe,"onDeactivate"),Se=p(pe,"onPostDeactivate"),vt=p(pe,"checkCanReturnFocus"),Je=p(pe,"returnFocus","returnFocusOnDeactivate");qe==null||qe();var Ke=function(){O9(function(){Je&&D(N(l.nodeFocusedBeforeActivation)),Se==null||Se()})};return Je&&vt?(vt(N(l.nodeFocusedBeforeActivation)).then(Ke,Ke),this):(Ke(),this)},pause:function(me){if(l.paused||!l.active)return this;var pe=p(me,"onPause"),qe=p(me,"onPostPause");return l.paused=!0,pe==null||pe(),G(),he(),qe==null||qe(),this},unpause:function(me){if(!l.paused||!l.active)return this;var pe=p(me,"onUnpause"),qe=p(me,"onPostUnpause");return l.paused=!1,pe==null||pe(),k(),te(),he(),qe==null||qe(),this},updateContainerElements:function(me){var pe=[].concat(me).filter(Boolean);return l.containers=pe.map(function(qe){return typeof qe=="string"?r.querySelector(qe):qe}),l.active&&k(),he(),this}},o.updateContainerElements(e),o};const Bre=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Ere},Symbol.toStringTag,{value:"Module"})),Ore=Z6(Bre),Ire=Z6(yre);var J4,T9;function Tre(){if(T9)return J4;T9=1;function n(te){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(te)}function e(te,G){if(!(te instanceof G))throw new TypeError("Cannot call a class as a function")}function t(te,G){for(var oe=0;oe<G.length;oe++){var fe=G[oe];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(te,k(fe.key),fe)}}function r(te,G,oe){return G&&t(te.prototype,G),Object.defineProperty(te,"prototype",{writable:!1}),te}function i(te,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(G&&G.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),Object.defineProperty(te,"prototype",{writable:!1}),G&&s(te,G)}function s(te,G){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,he){return fe.__proto__=he,fe},s(te,G)}function l(te){var G=v();return function(){var fe=x(te),he;if(G){var Me=x(this).constructor;he=Reflect.construct(fe,arguments,Me)}else he=fe.apply(this,arguments);return o(this,he)}}function o(te,G){if(G&&(n(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(te)}function p(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(te){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},x(te)}function B(te,G,oe){return G=k(G),G in te?Object.defineProperty(te,G,{value:oe,enumerable:!0,configurable:!0,writable:!0}):te[G]=oe,te}function k(te){var G=P(te,"string");return n(G)==="symbol"?G:String(G)}function P(te,G){if(n(te)!=="object"||te===null)return te;var oe=te[Symbol.toPrimitive];if(oe!==void 0){var fe=oe.call(te,G);if(n(fe)!=="object")return fe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(te)}var D=Da(),N=wp(),W=Ore,V=W.createFocusTrap,$=Ire,ie=$.isFocusable,ne=function(te){i(oe,te);var G=l(oe);function oe(fe){var he;e(this,oe),he=G.call(this,fe),B(p(he),"getNodeForOption",function(pe){var qe,Se=(qe=this.internalOptions[pe])!==null&&qe!==void 0?qe:this.originalOptions[pe];if(typeof Se=="function"){for(var vt=arguments.length,Je=new Array(vt>1?vt-1:0),Ke=1;Ke<vt;Ke++)Je[Ke-1]=arguments[Ke];Se=Se.apply(void 0,Je)}if(Se===!0&&(Se=void 0),!Se){if(Se===void 0||Se===!1)return Se;throw new Error("`".concat(pe,"` was specified but was not a node, or did not return a node"))}var je=Se;if(typeof Se=="string"){var Pe;if(je=(Pe=this.getDocument())===null||Pe===void 0?void 0:Pe.querySelector(Se),!je)throw new Error("`".concat(pe,"` as selector refers to no known node"))}return je}),he.handleDeactivate=he.handleDeactivate.bind(p(he)),he.handlePostDeactivate=he.handlePostDeactivate.bind(p(he)),he.handleClickOutsideDeactivates=he.handleClickOutsideDeactivates.bind(p(he)),he.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:he.handleDeactivate,onPostDeactivate:he.handlePostDeactivate,clickOutsideDeactivates:he.handleClickOutsideDeactivates},he.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Me=fe.focusTrapOptions;for(var me in Me)if(Object.prototype.hasOwnProperty.call(Me,me)){if(me==="returnFocusOnDeactivate"||me==="onDeactivate"||me==="onPostDeactivate"||me==="checkCanReturnFocus"||me==="clickOutsideDeactivates"){he.originalOptions[me]=Me[me];continue}he.internalOptions[me]=Me[me]}return he.outsideClick=null,he.focusTrapElements=fe.containerElements||[],he.updatePreviousElement(),he}return r(oe,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var he=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return he||(he===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var he=this.getDocument();he&&(this.previouslyFocusedElement=he.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(he){var Me=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,he):this.originalOptions.clickOutsideDeactivates;return Me&&(this.outsideClick={target:he.target,allowDeactivation:Me}),Me}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var he=this,Me=function(){var pe=he.getReturnFocusNode(),qe=!!(he.originalOptions.returnFocusOnDeactivate&&pe!==null&&pe!==void 0&&pe.focus&&(!he.outsideClick||he.outsideClick.allowDeactivation&&!ie(he.outsideClick.target,he.internalOptions.tabbableOptions))),Se=he.internalOptions.preventScroll,vt=Se===void 0?!1:Se;qe&&pe.focus({preventScroll:vt}),he.originalOptions.onPostDeactivate&&he.originalOptions.onPostDeactivate.call(null),he.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Me,Me):Me()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var he=this.focusTrapElements.some(Boolean);he&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(he){if(this.focusTrap){he.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Me=!he.active&&this.props.active,me=he.active&&!this.props.active,pe=!he.paused&&this.props.paused,qe=he.paused&&!this.props.paused;if(Me&&(this.updatePreviousElement(),this.focusTrap.activate()),me){this.deactivateTrap();return}pe&&this.focusTrap.pause(),qe&&this.focusTrap.unpause()}else he.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var he=this,Me=this.props.children?D.Children.only(this.props.children):void 0;if(Me){if(Me.type&&Me.type===D.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var me=function(Se){var vt=he.props.containerElements;Me&&(typeof Me.ref=="function"?Me.ref(Se):Me.ref&&(Me.ref.current=Se)),he.focusTrapElements=vt||[Se]},pe=D.cloneElement(Me,{ref:me});return pe}return null}}]),oe}(D.Component),q=typeof Element>"u"?Function:Element;return ne.propTypes={active:N.bool,paused:N.bool,focusTrapOptions:N.shape({document:N.object,onActivate:N.func,onPostActivate:N.func,checkCanFocusTrap:N.func,onPause:N.func,onPostPause:N.func,onUnpause:N.func,onPostUnpause:N.func,onDeactivate:N.func,onPostDeactivate:N.func,checkCanReturnFocus:N.func,initialFocus:N.oneOfType([N.instanceOf(q),N.string,N.bool,N.func]),fallbackFocus:N.oneOfType([N.instanceOf(q),N.string,N.func]),escapeDeactivates:N.oneOfType([N.bool,N.func]),clickOutsideDeactivates:N.oneOfType([N.bool,N.func]),returnFocusOnDeactivate:N.bool,setReturnFocus:N.oneOfType([N.instanceOf(q),N.string,N.bool,N.func]),allowOutsideClick:N.oneOfType([N.bool,N.func]),preventScroll:N.bool,tabbableOptions:N.shape({displayCheck:N.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:N.oneOfType([N.bool,N.func])}),trapStack:N.array,isKeyForward:N.func,isKeyBackward:N.func}),containerElements:N.arrayOf(N.instanceOf(q)),children:N.oneOfType([N.element,N.instanceOf(q)])},ne.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:V},J4=ne,J4}var eM={exports:{}},k9;function kre(){return k9||(k9=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var B=document.documentElement,k=document.createElement("div");return k.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(k),r=k.offsetWidth-k.clientWidth,B.removeChild(k),r}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(B){if(!(typeof document>"u"||t)){var k=document.documentElement;i=window.pageYOffset,l()?k.style.width="calc(100% - "+s()+"px)":k.style.width="100%",k.style.position="fixed",k.style.top=-i+"px",k.style.overflow="hidden",t=!0}}function p(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function v(){if(t){p();return}o()}var x={on:o,off:p,toggle:v};n.exports=x})()}(eM)),eM.exports}var tM,P9;function Pre(){if(P9)return tM;P9=1;function n(ie){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},n(ie)}function e(ie,ne){if(!(ie instanceof ne))throw new TypeError("Cannot call a class as a function")}function t(ie,ne){for(var q=0;q<ne.length;q++){var te=ne[q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}function r(ie,ne,q){return ne&&t(ie.prototype,ne),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function i(ie,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(ne&&ne.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),Object.defineProperty(ie,"prototype",{writable:!1}),ne&&s(ie,ne)}function s(ie,ne){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,G){return te.__proto__=G,te},s(ie,ne)}function l(ie){var ne=v();return function(){var te=x(ie),G;if(ne){var oe=x(this).constructor;G=Reflect.construct(te,arguments,oe)}else G=te.apply(this,arguments);return o(this,G)}}function o(ie,ne){if(ne&&(n(ne)==="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(ie)}function p(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(ie){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},x(ie)}function B(ie,ne,q){return ne in ie?Object.defineProperty(ie,ne,{value:q,enumerable:!0,configurable:!0,writable:!0}):ie[ne]=q,ie}var k=Da(),P=RC(),D=Tre(),N=kre(),W=function(ie){i(q,ie);var ne=l(q);function q(te){var G;if(e(this,q),G=ne.call(this,te),B(p(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),B(p(G),"checkUnderlayClick",function(oe){G.dialogNode&&G.dialogNode.contains(oe.target)||oe.pageX>oe.target.ownerDocument.documentElement.offsetWidth||oe.pageY>oe.target.ownerDocument.documentElement.offsetHeight||G.exit(oe)}),B(p(G),"checkDocumentKeyDown",function(oe){G.props.escapeExits&&(oe.key==="Escape"||oe.key==="Esc"||oe.keyCode===27)&&G.exit(oe)}),B(p(G),"exit",function(oe){G.props.onExit&&G.props.onExit(oe)}),!te.titleText&&!te.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return r(q,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&N.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?N.off():!G.scrollDisabled&&this.props.scrollDisabled&&N.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&N.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,oe={};if(G.includeDefaultStyles&&(oe={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(oe.background=G.underlayColor),G.underlayClickExits&&(oe.cursor="pointer")),G.underlayStyle)for(var fe in G.underlayStyle)G.underlayStyle.hasOwnProperty(fe)&&(oe[fe]=G.underlayStyle[fe]);var he={className:G.underlayClass,style:oe};G.underlayClickExits&&(he.onMouseDown=this.checkUnderlayClick);for(var Me in this.props.underlayProps)he[Me]=this.props.underlayProps[Me];var me={};G.includeDefaultStyles&&(me={display:"inline-block",height:"100%",verticalAlign:"middle"});var pe={key:"a",style:me},qe={};if(G.includeDefaultStyles&&(qe={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(qe.verticalAlign="middle",qe.top=0)),G.dialogStyle)for(var Se in G.dialogStyle)G.dialogStyle.hasOwnProperty(Se)&&(qe[Se]=G.dialogStyle[Se]);var vt={key:"b",ref:(function(Pe){this.dialogNode=Pe}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:qe};G.titleId?vt["aria-labelledby"]=G.titleId:G.titleText&&(vt["aria-label"]=G.titleText),G.focusDialog&&(vt.tabIndex="-1");for(var Je in G)/^(data-|aria-)/.test(Je)&&(vt[Je]=G[Je]);var Ke=[k.createElement("div",vt,G.children)];G.verticallyCenter&&Ke.unshift(k.createElement("div",pe));var je=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(je.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),je.escapeDeactivates=G.escapeExits,k.createElement(D,{focusTrapOptions:je,paused:G.focusTrapPaused},k.createElement("div",he,Ke))}}]),q}(k.Component);B(W,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function V(ie,ne){if(!window.document)return function(){return null};ne=ne||{};var q=function(te){i(oe,te);var G=l(oe);function oe(){var fe;e(this,oe);for(var he=arguments.length,Me=new Array(he),me=0;me<he;me++)Me[me]=arguments[me];return fe=G.call.apply(G,[this].concat(Me)),B(p(fe),"container",null),fe}return r(oe,[{key:"componentDidMount",value:function(){ne.renderTo?this.container=typeof ne.renderTo=="string"?document.querySelector(ne.renderTo):ne.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){ne.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:P.createPortal(k.createElement(ie,this.props,this.props.children),this.container)}}]),oe}(k.Component);return B(q,"defaultProps",{mounted:!0}),q}var $=V(W);return $.renderTo=function(ie){return V(W,{renderTo:ie})},tM=$,tM}var Kre=Pre();const Rre=dl(Kre);function Du(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Du=function(){return l},l}Du();class Mz extends Zn.Component{constructor(){super(...arguments);Pn(this,"onClose",(Du().s[1]++,()=>{Du().f[0]++,Du().s[2]++,document.activeElement?(Du().b[0][0]++,Du().s[3]++,document.activeElement.blur()):Du().b[0][1]++,Du().s[4]++,setTimeout(()=>{Du().f[1]++,Du().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){Du().f[2]++;const t=(Du().s[6]++,this.props.t);return Du().s[7]++,this.props.isOpen?(Du().b[1][0]++,Du().s[8]++,Ae.jsx(Rre,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:Ae.jsxs("div",{className:am("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[Ae.jsxs("header",{className:"maputnik-modal-header",children:[Ae.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),Ae.jsx("span",{className:"maputnik-modal-header-space"}),Ae.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:Ae.jsx(hH,{})})]}),Ae.jsx("div",{className:"maputnik-modal-scroller",children:Ae.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Du().b[1][1]++,Du().s[9]++,!1)}}Pn(Mz,"defaultProps",(Du().s[0]++,{underlayClickExits:!0}));const Y0=(Du().s[10]++,Ns()(Mz)),Dre={name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format.\n\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\n\nThe URL must include:\n\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \n\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\n\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{js:"0.0.16",android:"0.1.1",ios:"0.1.0"},"omit to use local fonts":{js:"https://github.com/maplibre/maplibre-gl-js/issues/3302",android:"https://github.com/maplibre/maplibre-native/issues/165",ios:"https://github.com/maplibre/maplibre-native/issues/165"}}}},Fre={type:{doc:"The type of the source."}},Lre={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."}},Ure={values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}}},zre={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Nre={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Wre={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Ho={$root:Dre,source_vector:Fre,layer:Lre,filter_operator:Ure,function:{base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."}},light:zre,terrain:Nre,transition:Wre};function ks(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ks=function(){return l},l}ks();class TO extends Zn.Component{constructor(t){ks().f[0]++,ks().s[0]++;super(t);Pn(this,"onToggleDoc",(ks().s[2]++,t=>{ks().f[1]++,ks().s[3]++,this.setState({open:t},()=>{ks().f[2]++,ks().s[4]++,this.props.onToggleDoc?(ks().b[0][0]++,ks().s[5]++,this.props.onToggleDoc(this.state.open)):ks().b[0][1]++})}));ks().s[1]++,this.state={open:!1}}render(){ks().f[3]++;const{label:t,fieldSpec:r}=(ks().s[6]++,this.props),{doc:i}=(ks().s[7]++,ks().b[1][0]++,r||(ks().b[1][1]++,{}));if(ks().s[8]++,i)return ks().b[2][0]++,ks().s[9]++,Ae.jsx("label",{className:"maputnik-doc-wrapper",children:Ae.jsxs("div",{className:"maputnik-doc-target",children:[t,"",Ae.jsx("button",{"aria-label":this.state.open?(ks().b[3][0]++,"close property documentation"):(ks().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(ks().b[4][0]++,"open"):(ks().b[4][1]++,"closed")}`,onClick:()=>(ks().f[4]++,ks().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(ks().b[5][0]++,Ae.jsx(ZV,{})):(ks().b[5][1]++,Ae.jsx(XV,{}))})]})});if(ks().b[2][1]++,ks().s[11]++,t)return ks().b[6][0]++,ks().s[12]++,Ae.jsx("label",{className:"maputnik-doc-wrapper",children:Ae.jsx("div",{className:"maputnik-doc-target",children:t})});ks().b[6][1]++,ks().s[13]++}}function ia(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ia=function(){return l},l}ia();const K9=(ia().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class kO extends Zn.Component{render(){ia().f[0]++;const{fieldSpec:e}=(ia().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(ia().s[2]++,e),l=(ia().s[3]++,e["sdk-support"]),o=(ia().s[4]++,ia().b[0][0]++,!!r&&(ia().b[0][1]++,!Array.isArray(r)));return ia().s[5]++,Ae.jsxs(Ae.Fragment,{children:[(ia().b[1][0]++,t&&(ia().b[1][1]++,Ae.jsxs("div",{className:"SpecDoc",children:[Ae.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(ia().b[2][0]++,o&&(ia().b[2][1]++,Ae.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([p,v])=>(ia().f[1]++,ia().s[6]++,Ae.jsxs("li",{children:[Ae.jsx("code",{children:JSON.stringify(p)}),Ae.jsx("div",{children:v.doc})]},p)))})))]}))),(ia().b[3][0]++,l&&(ia().b[3][1]++,Ae.jsx("div",{className:"SpecDoc__sdk-support",children:Ae.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[Ae.jsx("thead",{children:Ae.jsxs("tr",{children:[Ae.jsx("th",{}),Object.values(K9).map(p=>(ia().f[2]++,ia().s[7]++,Ae.jsx("th",{children:p},p)))]})}),Ae.jsx("tbody",{children:Object.entries(l).map(([p,v])=>(ia().f[3]++,ia().s[8]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{children:p}),Object.keys(K9).map(x=>(ia().f[4]++,ia().s[9]++,Object.prototype.hasOwnProperty.call(v,x)?(ia().b[4][0]++,ia().s[10]++,Ae.jsx("td",{children:v[x]},x)):(ia().b[4][1]++,ia().s[11]++,Ae.jsx("td",{children:"no"},x))))]},p)))})]})}))),(ia().b[5][0]++,i&&(ia().b[5][1]++,s)&&(ia().b[5][2]++,Ae.jsx("div",{className:"SpecDoc__learn-more",children:Ae.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Fo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fo=function(){return l},l}Fo();class fa extends Zn.Component{constructor(t){Fo().f[0]++,Fo().s[1]++;super(t);Pn(this,"_blockEl",(Fo().s[0]++,null));Pn(this,"onToggleDoc",(Fo().s[6]++,t=>{Fo().f[2]++,Fo().s[7]++,this.setState({showDoc:t})}));Pn(this,"onLabelClick",(Fo().s[8]++,t=>{var s;Fo().f[3]++;const r=(Fo().s[9]++,t.nativeEvent.target),i=(Fo().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));Fo().s[11]++,Fo().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Fo().b[3][1]++,!i)?(Fo().b[2][0]++,Fo().s[12]++,t.stopPropagation()):Fo().b[2][1]++,Fo().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Fo().b[4][0]++,Fo().s[14]++,t.preventDefault()):Fo().b[4][1]++}));Fo().s[2]++,this.state={showDoc:!1}}onChange(t){Fo().f[1]++;const r=(Fo().s[3]++,t.target.value);if(Fo().s[4]++,this.props.onChange)return Fo().b[0][0]++,Fo().s[5]++,this.props.onChange(r===""?(Fo().b[1][0]++,void 0):(Fo().b[1][1]++,r));Fo().b[0][1]++}render(){return Fo().f[4]++,Fo().s[15]++,Ae.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:am({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Fo().b[5][0]++,this.props.fieldSpec&&(Fo().b[5][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:Ae.jsx(TO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Fo().b[6][0]++,!this.props.fieldSpec&&(Fo().b[6][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),Ae.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),Ae.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Fo().f[5]++,Fo().s[16]++,this._blockEl=t),children:this.props.children}),(Fo().b[7][0]++,this.props.fieldSpec&&(Fo().b[7][1]++,Ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Fo().b[8][0]++,""):(Fo().b[8][1]++,"none")},children:Ae.jsx(kO,{fieldSpec:this.props.fieldSpec})})))]})}}function Gc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gc=function(){return l},l}Gc();class Qg extends Zn.Component{render(){Gc().f[0]++;let e=(Gc().s[0]++,this.props.options);return Gc().s[1]++,Gc().b[1][0]++,e.length>0&&(Gc().b[1][1]++,!Array.isArray(e[0]))?(Gc().b[0][0]++,Gc().s[2]++,e=e.map(t=>(Gc().f[1]++,Gc().s[3]++,[t,t]))):Gc().b[0][1]++,Gc().s[4]++,Ae.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Gc().f[2]++,Gc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Gc().f[3]++,Gc().s[6]++,Ae.jsx("option",{value:t,children:r},t)))})}}function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Li=function(){return l},l}Li();class zf extends Zn.Component{constructor(e){Li().f[1]++,Li().s[1]++,super(e),Li().s[2]++,this.state={editing:!1,value:(Li().b[0][0]++,e.value||(Li().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Li().f[2]++,Li().s[3]++,t.editing)Li().b[1][1]++;else return Li().b[1][0]++,Li().s[4]++,{value:e.value};return Li().s[5]++,{}}render(){Li().f[3]++;let e,t;return Li().s[6]++,this.props.multi?(Li().b[2][0]++,Li().s[7]++,e="textarea",Li().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Li().b[2][1]++,Li().s[9]++,e="input",Li().s[10]++,t=["maputnik-string"]),Li().s[11]++,this.props.disabled?(Li().b[3][0]++,Li().s[12]++,t.push("maputnik-string--disabled")):Li().b[3][1]++,Li().s[13]++,Zn.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Li().b[4][0]++,this.props.spellCheck):(Li().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Li().b[5][0]++,""):(Li().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Li().f[4]++,Li().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Li().f[5]++,Li().s[15]++,this.props.onInput?(Li().b[6][0]++,Li().s[16]++,this.props.onInput(this.state.value)):Li().b[6][1]++})},onBlur:()=>{Li().f[6]++,Li().s[17]++,this.state.value!==this.props.value?(Li().b[7][0]++,Li().s[18]++,this.setState({editing:!1}),Li().s[19]++,this.props.onChange?(Li().b[8][0]++,Li().s[20]++,this.props.onChange(this.state.value)):Li().b[8][1]++):Li().b[7][1]++},onKeyDown:r=>{Li().f[7]++,Li().s[21]++,Li().b[10][0]++,r.keyCode===13&&(Li().b[10][1]++,this.props.onChange)?(Li().b[9][0]++,Li().s[22]++,this.props.onChange(this.state.value)):Li().b[9][1]++},required:this.props.required})}}Pn(zf,"defaultProps",(Li().s[0]++,{onInput:()=>{Li().f[0]++}}));function cp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return cp=function(){return l},l}cp();class wz extends Zn.Component{render(){cp().f[0]++;const e=(cp().s[1]++,this.props.t);return cp().s[2]++,Ae.jsxs(fa,{label:e("Type"),fieldSpec:Ho.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(cp().b[0][0]++,this.props.disabled&&(cp().b[0][1]++,Ae.jsx(zf,{value:this.props.value,disabled:!0}))),(cp().b[1][0]++,!this.props.disabled&&(cp().b[1][1]++,Ae.jsx(Qg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}Pn(wz,"defaultProps",(cp().s[0]++,{disabled:!1}));const Sz=(cp().s[3]++,Ns()(wz));function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return O2=function(){return l},l}O2();class Ez extends Zn.Component{render(){return O2().f[0]++,O2().s[0]++,Ae.jsx(fa,{label:"ID",fieldSpec:Ho.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:Ae.jsx(zf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var nM={exports:{}},R9;function jre(){if(R9)return nM.exports;R9=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(Je){var Ke,je,Pe,Le=Je.ownerDocument,Xe=Le.body,Ct=Le&&Le.documentElement;return Ke=Je.getBoundingClientRect(),je=Ke.left,Pe=Ke.top,je-=Ct.clientLeft||Xe.clientLeft||0,Pe-=Ct.clientTop||Xe.clientTop||0,{left:je,top:Pe}}function t(Je,Ke){var je=Je["page"+(Ke?"Y":"X")+"Offset"],Pe="scroll"+(Ke?"Top":"Left");if(typeof je!="number"){var Le=Je.document;je=Le.documentElement[Pe],typeof je!="number"&&(je=Le.body[Pe])}return je}function r(Je){return t(Je)}function i(Je){return t(Je,!0)}function s(Je){var Ke=e(Je),je=Je.ownerDocument,Pe=je.defaultView||je.parentWindow;return Ke.left+=r(Pe),Ke.top+=i(Pe),Ke}function l(Je,Ke,je){var Pe="",Le=Je.ownerDocument;return(je=je||Le.defaultView.getComputedStyle(Je,null))&&(Pe=je.getPropertyValue(Ke)||je[Ke]),Pe}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),p=/^(top|right|bottom|left)$/,v="currentStyle",x="runtimeStyle",B="left",k="px";function P(Je,Ke){var je=Je[v]&&Je[v][Ke];if(o.test(je)&&!p.test(Ke)){var Pe=Je.style,Le=Pe[B],Xe=Je[x][B];Je[x][B]=Je[v][B],Pe[B]=Ke==="fontSize"?"1em":je||0,je=Pe.pixelLeft+k,Pe[B]=Le,Je[x][B]=Xe}return je===""?"auto":je}var D;typeof window<"u"&&(D=window.getComputedStyle?l:P);function N(Je,Ke){qe(Je,"position")==="static"&&(Je.style.position="relative");var je=s(Je),Pe={},Le,Xe;for(Xe in Ke)Le=parseFloat(qe(Je,Xe))||0,Pe[Xe]=Le+Ke[Xe]-je[Xe];qe(Je,Pe)}function W(Je,Ke){for(var je=0;je<Je.length;je++)Ke(Je[je])}function V(Je){return D(Je,"boxSizing")==="border-box"}var $=["margin","border","padding"],ie=-1,ne=2,q=1,te=0;function G(Je,Ke,je){var Pe={},Le=Je.style,Xe;for(Xe in Ke)Pe[Xe]=Le[Xe],Le[Xe]=Ke[Xe];je.call(Je);for(Xe in Ke)Le[Xe]=Pe[Xe]}function oe(Je,Ke,je){var Pe=0,Le,Xe,Ct;for(Xe=0;Xe<Ke.length;Xe++)if(Le=Ke[Xe],Le)for(Ct=0;Ct<je.length;Ct++){var Gt;Le==="border"?Gt=Le+je[Ct]+"Width":Gt=Le+je[Ct],Pe+=parseFloat(D(Je,Gt))||0}return Pe}function fe(Je){return Je!=null&&Je==Je.window}var he={};W(["Width","Height"],function(Je){he["doc"+Je]=function(Ke){var je=Ke.document;return Math.max(je.documentElement["scroll"+Je],je.body["scroll"+Je],he["viewport"+Je](je))},he["viewport"+Je]=function(Ke){var je="client"+Je,Pe=Ke.document,Le=Pe.body,Xe=Pe.documentElement,Ct=Xe[je];return Pe.compatMode==="CSS1Compat"&&Ct||Le&&Le[je]||Ct}});function Me(Je,Ke,je){if(fe(Je))return Ke==="width"?he.viewportWidth(Je):he.viewportHeight(Je);if(Je.nodeType===9)return Ke==="width"?he.docWidth(Je):he.docHeight(Je);var Pe=Ke==="width"?["Left","Right"]:["Top","Bottom"],Le=Ke==="width"?Je.offsetWidth:Je.offsetHeight;D(Je);var Xe=V(Je),Ct=0;(Le==null||Le<=0)&&(Le=void 0,Ct=D(Je,Ke),(Ct==null||Number(Ct)<0)&&(Ct=Je.style[Ke]||0),Ct=parseFloat(Ct)||0),je===void 0&&(je=Xe?q:ie);var Gt=Le!==void 0||Xe,mt=Le||Ct;return je===ie?Gt?mt-oe(Je,["border","padding"],Pe):Ct:Gt?mt+(je===q?0:je===ne?-oe(Je,["border"],Pe):oe(Je,["margin"],Pe)):Ct+oe(Je,$.slice(je),Pe)}var me={position:"absolute",visibility:"hidden",display:"block"};function pe(Je){var Ke,je=arguments;return Je.offsetWidth!==0?Ke=Me.apply(void 0,je):G(Je,me,function(){Ke=Me.apply(void 0,je)}),Ke}W(["width","height"],function(Je){var Ke=Je.charAt(0).toUpperCase()+Je.slice(1);he["outer"+Ke]=function(Pe,Le){return Pe&&pe(Pe,Je,Le?te:q)};var je=Je==="width"?["Left","Right"]:["Top","Bottom"];he[Je]=function(Pe,Le){if(Le!==void 0){if(Pe){D(Pe);var Xe=V(Pe);return Xe&&(Le+=oe(Pe,["padding","border"],je)),qe(Pe,Je,Le)}return}return Pe&&pe(Pe,Je,ie)}});function qe(Je,Ke,je){if(typeof Ke=="object"){for(var Pe in Ke)qe(Je,Pe,Ke[Pe]);return}if(typeof je<"u")typeof je=="number"&&(je=je+"px"),Je.style[Ke]=je;else return D(Je,Ke)}function Se(Je,Ke){for(var je in Ke)Je[je]=Ke[je];return Je}var vt=nM.exports={getWindow:function(Je){var Ke=Je.ownerDocument||Je;return Ke.defaultView||Ke.parentWindow},offset:function(Je,Ke){if(typeof Ke<"u")N(Je,Ke);else return s(Je)},isWindow:fe,each:W,css:qe,clone:function(Je){var Ke={};for(var je in Je)Ke[je]=Je[je];var Pe=Je.overflow;if(Pe)for(je in Je)Ke.overflow[je]=Je.overflow[je];return Ke},mix:Se,scrollLeft:function(Je,Ke){if(fe(Je)){if(Ke===void 0)return r(Je);window.scrollTo(Ke,i(Je))}else{if(Ke===void 0)return Je.scrollLeft;Je.scrollLeft=Ke}},scrollTop:function(Je,Ke){if(fe(Je)){if(Ke===void 0)return i(Je);window.scrollTo(r(Je),Ke)}else{if(Ke===void 0)return Je.scrollTop;Je.scrollTop=Ke}},merge:function(){for(var Je={},Ke=0;Ke<arguments.length;Ke++)vt.mix(Je,arguments[Ke]);return Je},viewportWidth:0,viewportHeight:0};return Se(vt,he),nM.exports}var rM,D9;function Gre(){if(D9)return rM;D9=1;var n=jre();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,l=i.onlyScrollIfNeeded,o=i.alignWithTop,p=i.alignWithLeft;s=s===void 0?!0:s;var v=n.isWindow(r),x=n.offset(t),B=n.outerHeight(t),k=n.outerWidth(t),P,D,N,W,V,$,ie,ne,q,te;v?(ie=r,te=n.height(ie),q=n.width(ie),ne={left:n.scrollLeft(ie),top:n.scrollTop(ie)},V={left:x.left-ne.left,top:x.top-ne.top},$={left:x.left+k-(ne.left+q),top:x.top+B-(ne.top+te)},W=ne):(P=n.offset(r),D=r.clientHeight,N=r.clientWidth,W={left:r.scrollLeft,top:r.scrollTop},V={left:x.left-(P.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:x.top-(P.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},$={left:x.left+k-(P.left+N+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:x.top+B-(P.top+D+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),V.top<0||$.top>0?o===!0?n.scrollTop(r,W.top+V.top):o===!1?n.scrollTop(r,W.top+$.top):V.top<0?n.scrollTop(r,W.top+V.top):n.scrollTop(r,W.top+$.top):l||(o=o===void 0?!0:!!o,o?n.scrollTop(r,W.top+V.top):n.scrollTop(r,W.top+$.top)),s&&(V.left<0||$.left>0?p===!0?n.scrollLeft(r,W.left+V.left):p===!1?n.scrollLeft(r,W.left+$.left):V.left<0?n.scrollLeft(r,W.left+V.left):n.scrollLeft(r,W.left+$.left):l||(p=p===void 0?!0:!!p,p?n.scrollLeft(r,W.left+V.left):n.scrollLeft(r,W.left+$.left)))}return rM=e,rM}var iM,F9;function Qre(){return F9||(F9=1,iM=Gre()),iM}var oM,L9;function Yre(){if(L9)return oM;L9=1;var n=Object.assign||function(P){for(var D=1;D<arguments.length;D++){var N=arguments[D];for(var W in N)Object.prototype.hasOwnProperty.call(N,W)&&(P[W]=N[W])}return P},e=function(){function P(D,N){for(var W=0;W<N.length;W++){var V=N[W];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,N,W){return N&&P(D.prototype,N),W&&P(D,W),D}}();function t(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function r(P,D){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:P}function i(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(P,D):P.__proto__=D)}var s=Da(),l=wp(),o=RC(),p=o.findDOMNode,v=Qre(),x=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function B(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var k=function(P){i(D,P);function D(N){t(this,D);var W=r(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N));return W.state={isOpen:!1,highlightedIndex:null},W._debugStates=[],W.ensureHighlightedIndex=W.ensureHighlightedIndex.bind(W),W.exposeAPI=W.exposeAPI.bind(W),W.handleInputFocus=W.handleInputFocus.bind(W),W.handleInputBlur=W.handleInputBlur.bind(W),W.handleChange=W.handleChange.bind(W),W.handleKeyDown=W.handleKeyDown.bind(W),W.handleInputClick=W.handleInputClick.bind(W),W.maybeAutoCompleteText=W.maybeAutoCompleteText.bind(W),W}return e(D,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(W){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),W.autoHighlight&&(this.props.value!==W.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(W,V){(this.state.isOpen&&!V.isOpen||"open"in this.props&&this.props.open&&!W.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),V.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(W){var V=this;this.refs.input=W,x.forEach(function($){return V[$]=W&&W[$]&&W[$].bind(W)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var W=this.refs["item-"+this.state.highlightedIndex],V=this.refs.menu;v(p(W),p(V),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(W){D.keyDownHandlers[W.key]?D.keyDownHandlers[W.key].call(this,W):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(W){this.props.onChange(W,W.target.value)}},{key:"getFilteredItems",value:function(W){var V=W.items;return W.shouldItemRender&&(V=V.filter(function($){return W.shouldItemRender($,W.value)})),W.sortItems&&V.sort(function($,ie){return W.sortItems($,ie,W.value)}),V}},{key:"maybeAutoCompleteText",value:function(W,V){for(var $=W.highlightedIndex,ie=V.value,ne=V.getItemValue,q=$===null?0:$,te=this.getFilteredItems(V),G=0;G<te.length&&!V.isItemSelectable(te[q]);G++)q=(q+1)%te.length;var oe=te[q]&&V.isItemSelectable(te[q])?te[q]:null;if(ie!==""&&oe){var fe=ne(oe),he=fe.toLowerCase().indexOf(ie.toLowerCase())===0;if(he)return{highlightedIndex:q}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(W,V){if(W.highlightedIndex>=this.getFilteredItems(V).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var W=this.refs.input,V=W.getBoundingClientRect(),$=window.window.getComputedStyle(W),ie=parseInt($.marginBottom,10)||0,ne=parseInt($.marginLeft,10)||0,q=parseInt($.marginRight,10)||0;this.setState({menuTop:V.bottom+ie,menuLeft:V.left+ne,menuWidth:V.width+ne+q})}},{key:"highlightItemFromMouse",value:function(W){this.setState({highlightedIndex:W})}},{key:"selectItemFromMouse",value:function(W){var V=this,$=this.props.getItemValue(W);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){V.props.onSelect($,W)})}},{key:"setIgnoreBlur",value:function(W){this._ignoreBlur=W}},{key:"renderMenu",value:function(){var W=this,V=this.getFilteredItems(this.props).map(function(ne,q){var te=W.props.renderItem(ne,W.state.highlightedIndex===q,{cursor:"default"});return s.cloneElement(te,{onMouseEnter:W.props.isItemSelectable(ne)?function(){return W.highlightItemFromMouse(q)}:null,onClick:W.props.isItemSelectable(ne)?function(){return W.selectItemFromMouse(ne)}:null,ref:function(oe){return W.refs["item-"+q]=oe}})}),$={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},ie=this.props.renderMenu(V,this.props.value,$);return s.cloneElement(ie,{ref:function(q){return W.refs.menu=q},onTouchStart:function(){return W.setIgnoreBlur(!0)},onMouseEnter:function(){return W.setIgnoreBlur(!0)},onMouseLeave:function(){return W.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(W){var V=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=B(),this.refs.input.focus();return}var $=void 0,ie=this.state.highlightedIndex;if(this.props.selectOnBlur&&ie!==null){var ne=this.getFilteredItems(this.props),q=ne[ie],te=this.props.getItemValue(q);$=function(){return V.props.onSelect(te,q)}}this.setState({isOpen:!1,highlightedIndex:null},$);var G=this.props.inputProps.onBlur;G&&G(W)}},{key:"handleInputFocus",value:function(W){var V=this;if(this._ignoreFocus){this._ignoreFocus=!1;var $=this._scrollOffset,ie=$.x,ne=$.y;this._scrollOffset=null,window.scrollTo(ie,ne),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){V._scrollTimer=null,window.scrollTo(ie,ne)},0);return}this.setState({isOpen:!0});var q=this.props.inputProps.onFocus;q&&q(W)}},{key:"isInputFocused",value:function(){var W=this.refs.input;return W.ownerDocument&&W===W.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(W,V){return V?function($){W($),V($)}:W}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var W=this.props.inputProps,V=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},W,{role:"combobox","aria-autocomplete":"list","aria-expanded":V,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,W.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,W.onClick),value:this.props.value})),V&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),D}(s.Component);return k.propTypes={items:l.array.isRequired,value:l.any,onChange:l.func,onSelect:l.func,shouldItemRender:l.func,isItemSelectable:l.func,sortItems:l.func,getItemValue:l.func.isRequired,renderItem:l.func.isRequired,renderMenu:l.func,menuStyle:l.object,renderInput:l.func,inputProps:l.object,wrapperProps:l.object,wrapperStyle:l.object,autoHighlight:l.bool,selectOnBlur:l.bool,onMenuVisibilityChange:l.func,open:l.bool,debug:l.bool},k.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(D){return s.createElement("input",D)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(D,N,W){return s.createElement("div",{style:n({},W,this.menuStyle),children:D})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},k.keyDownHandlers={ArrowDown:function(D){D.preventDefault();var N=this.getFilteredItems(this.props);if(N.length){for(var W=this.state.highlightedIndex,V=W===null?-1:W,$=0;$<N.length;$++){var ie=(V+$+1)%N.length;if(this.props.isItemSelectable(N[ie])){V=ie;break}}V>-1&&V!==W&&this.setState({highlightedIndex:V,isOpen:!0})}},ArrowUp:function(D){D.preventDefault();var N=this.getFilteredItems(this.props);if(N.length){for(var W=this.state.highlightedIndex,V=W===null?N.length:W,$=0;$<N.length;$++){var ie=(V-(1+$)+N.length)%N.length;if(this.props.isItemSelectable(N[ie])){V=ie;break}}V!==N.length&&this.setState({highlightedIndex:V,isOpen:!0})}},Enter:function(D){var N=this;if(D.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){N.refs.input.select()});else{D.preventDefault();var W=this.getFilteredItems(this.props)[this.state.highlightedIndex],V=this.props.getItemValue(W);this.setState({isOpen:!1,highlightedIndex:null},function(){N.refs.input.setSelectionRange(V.length,V.length),N.props.onSelect(V,W)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},oM=k,oM}var qre=Yre();const Vre=dl(qre);function ko(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ko=function(){return l},l}ko();const U9=(ko().s[0]++,140);class Qy extends Zn.Component{constructor(){super(...arguments);Pn(this,"state",(ko().s[1]++,{maxHeight:U9}));Pn(this,"autocompleteMenuEl",(ko().s[2]++,null))}calcMaxHeight(){if(ko().f[1]++,ko().s[4]++,this.props.keepMenuWithinWindowBounds){ko().b[0][0]++;const t=(ko().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(ko().s[6]++,Math.min(t,U9));ko().s[7]++,r!=this.state.maxHeight?(ko().b[1][0]++,ko().s[8]++,this.setState({maxHeight:r})):ko().b[1][1]++}else ko().b[0][1]++}componentDidMount(){ko().f[2]++,ko().s[9]++,this.calcMaxHeight()}componentDidUpdate(){ko().f[3]++,ko().s[10]++,this.calcMaxHeight()}onChange(t){ko().f[4]++,ko().s[11]++,this.props.onChange(t===""?(ko().b[2][0]++,void 0):(ko().b[2][1]++,t))}render(){return ko().f[5]++,ko().s[12]++,Ae.jsx("div",{ref:t=>{ko().f[6]++,ko().s[13]++,this.autocompleteMenuEl=t},children:Ae.jsx(Vre,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(ko().f[7]++,ko().s[14]++,t[0]),onSelect:t=>(ko().f[8]++,ko().s[15]++,this.onChange(t)),onChange:(t,r)=>(ko().f[9]++,ko().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(ko().b[3][0]++,""))=>(ko().f[10]++,ko().s[17]++,typeof r=="string"?(ko().b[4][0]++,ko().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(ko().b[4][1]++,ko().s[19]++,!1)),renderItem:(t,r)=>(ko().f[11]++,ko().s[20]++,Ae.jsx("div",{className:am({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}Pn(Qy,"defaultProps",(ko().s[3]++,{onChange:()=>{ko().f[0]++},options:[]}));function Qp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Qp=function(){return l},l}Qp();class Bz extends Zn.Component{render(){var t;Qp().f[1]++;const e=(Qp().s[1]++,this.props.t);return Qp().s[2]++,Ae.jsx(fa,{label:e("Source"),fieldSpec:Ho.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:Ae.jsx(Qy,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(Qp().f[2]++,Qp().s[3]++,[r,r]))})})}}Pn(Bz,"defaultProps",(Qp().s[0]++,{onChange:()=>{Qp().f[0]++},sourceIds:[]}));const Oz=(Qp().s[4]++,Ns()(Bz));function Yp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Yp=function(){return l},l}Yp();class Iz extends Zn.Component{render(){var t;Yp().f[1]++;const e=(Yp().s[1]++,this.props.t);return Yp().s[2]++,Ae.jsx(fa,{label:e("Source Layer"),fieldSpec:Bs.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:Ae.jsx(Qy,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(Yp().f[2]++,Yp().s[3]++,[r,r]))})})}}Pn(Iz,"defaultProps",(Yp().s[0]++,{onChange:()=>{Yp().f[0]++},sourceLayerIds:[],isFixed:!1}));const Tz=(Yp().s[4]++,Ns()(Iz));function Nr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Nr=function(){return l},l}Nr();class Hre extends Zn.Component{constructor(t){Nr().f[1]++,Nr().s[10]++;super(t);Pn(this,"addLayer",(Nr().s[0]++,()=>{Nr().f[0]++;const t=(Nr().s[1]++,this.props.layers.slice(0)),r=(Nr().s[2]++,{id:this.state.id,type:this.state.type});Nr().s[3]++,this.state.type!=="background"?(Nr().b[0][0]++,Nr().s[4]++,r.source=this.state.source,Nr().s[5]++,Nr().b[2][0]++,this.state.type!=="raster"&&(Nr().b[2][1]++,this.state["source-layer"])?(Nr().b[1][0]++,Nr().s[6]++,r["source-layer"]=this.state["source-layer"]):Nr().b[1][1]++):Nr().b[0][1]++,Nr().s[7]++,t.push(r),Nr().s[8]++,this.props.onLayersChange(t),Nr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Nr().s[11]++,{type:"fill",id:""});Nr().s[12]++,t.sources.length>0?(Nr().b[3][0]++,Nr().s[13]++,r.source=Object.keys(this.props.sources)[0],Nr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Nr().b[3][1]++,Nr().s[15]++,this.state=r}componentDidUpdate(t,r){Nr().f[2]++;const i=(Nr().s[16]++,r.type),s=(Nr().s[17]++,this.state.type),l=(Nr().s[18]++,this.getSources(i)),o=(Nr().s[19]++,this.getSources(s));Nr().s[20]++,Nr().b[5][0]++,i!==s&&(Nr().b[5][1]++,r.source!=="")&&(Nr().b[5][2]++,l.indexOf(r.source)>-1)&&(Nr().b[5][3]++,o.indexOf(this.state.source)<0)?(Nr().b[4][0]++,Nr().s[21]++,this.setState({source:""})):Nr().b[4][1]++}getLayersForSource(t){Nr().f[3]++;const r=(Nr().s[22]++,Nr().b[6][0]++,this.props.sources[t]||(Nr().b[6][1]++,{}));return Nr().s[23]++,Nr().b[7][0]++,r.layers||(Nr().b[7][1]++,[])}getSources(t){Nr().f[4]++;const r=(Nr().s[24]++,[]),i=(Nr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Nr().s[26]++;for(const[s,l]of Object.entries(this.props.sources)){const o=(Nr().s[27]++,l.type);Nr().s[28]++,Nr().b[9][0]++,i[o]&&(Nr().b[9][1]++,i[o].indexOf(t)>-1)?(Nr().b[8][0]++,Nr().s[29]++,r.push(s)):Nr().b[8][1]++}return Nr().s[30]++,r}render(){Nr().f[5]++;const t=(Nr().s[31]++,this.props.t),r=(Nr().s[32]++,this.getSources(this.state.type)),i=(Nr().s[33]++,this.getLayersForSource(this.state.source));return Nr().s[34]++,Ae.jsx(Y0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:Ae.jsxs("div",{className:"maputnik-add-layer",children:[Ae.jsx(Ez,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Nr().f[6]++,Nr().s[35]++,this.setState({id:s})}}),Ae.jsx(Sz,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Nr().f[7]++,Nr().s[36]++,this.setState({type:s}))}),(Nr().b[10][0]++,this.state.type!=="background"&&(Nr().b[10][1]++,Ae.jsx(Oz,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Nr().f[8]++,Nr().s[37]++,this.setState({source:s}))}))),(Nr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Nr().b[11][1]++,Ae.jsx(Tz,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>(Nr().f[9]++,Nr().s[38]++,this.setState({"source-layer":s}))}))),Ae.jsx(Xa,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const $re=(Nr().s[39]++,Ns()(Hre));function bg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return bg=function(){return l},l}bg();let z9=(bg().s[0]++,0);function Py(n=(bg().b[0][0]++,"")){return bg().f[0]++,bg().s[1]++,z9++,bg().s[2]++,n+z9}function Gi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gi=function(){return l},l}Gi();function Zre(n,e){Gi().f[0]++;const t=(Gi().s[0]++,{...n.paint});Gi().s[1]++,Object.keys(t).forEach(i=>{Gi().f[1]++,Gi().s[2]++,i in Bs["paint_"+e]?Gi().b[0][1]++:(Gi().b[0][0]++,Gi().s[3]++,delete t[i])});const r=(Gi().s[4]++,{...n.layout});return Gi().s[5]++,Object.keys(r).forEach(i=>{Gi().f[2]++,Gi().s[6]++,i in Bs["layout_"+e]?Gi().b[1][1]++:(Gi().b[1][0]++,Gi().s[7]++,delete r[i])}),Gi().s[8]++,{...n,paint:t,layout:r,type:e}}function Xre(n,e,t,r){if(Gi().f[3]++,Gi().s[9]++,r===void 0)if(Gi().b[2][0]++,Gi().s[10]++,e){Gi().b[3][0]++;const i=(Gi().s[11]++,{...n,[e]:{...n[e]}});return Gi().s[12]++,delete i[e][t],Gi().s[13]++,Object.keys(i[e]).length<1?(Gi().b[4][0]++,Gi().s[14]++,delete i[e]):Gi().b[4][1]++,Gi().s[15]++,i}else{Gi().b[3][1]++;const i=(Gi().s[16]++,{...n});return Gi().s[17]++,delete i[t],Gi().s[18]++,i}else return Gi().b[2][1]++,Gi().s[19]++,e?(Gi().b[5][0]++,Gi().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Gi().b[5][1]++,Gi().s[21]++,{...n,[t]:r})}function ay(n){return Gi().f[4]++,Gi().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Jre(n,e){Gi().f[5]++;const t=(Gi().s[23]++,ay(n[e].id));let r=(Gi().s[24]++,e);Gi().s[25]++;for(let i=(Gi().s[26]++,e);i>0;i--){const s=(Gi().s[27]++,ay(n[i-1].id));if(Gi().s[28]++,s===t)Gi().b[6][0]++,Gi().s[29]++,r=i-1;else return Gi().b[6][1]++,Gi().s[30]++,r}return Gi().s[31]++,r}function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return bn=function(){return l},l}bn();class kz extends Zn.Component{constructor(t){bn().f[1]++,bn().s[1]++;super(t);Pn(this,"selectedItemRef");Pn(this,"scrollContainerRef");Pn(this,"toggleLayers",(bn().s[6]++,()=>{bn().f[3]++;let t=(bn().s[7]++,0);const r=(bn().s[8]++,{});bn().s[9]++,this.groupedLayers().forEach(i=>{bn().f[4]++;const s=(bn().s[10]++,ay(i[0].id)),l=(bn().s[11]++,[s,t].join("-"));bn().s[12]++,i.length>1?(bn().b[0][0]++,bn().s[13]++,r[l]=this.state.areAllGroupsExpanded):bn().b[0][1]++,bn().s[14]++,i.forEach(o=>{bn().f[5]++,bn().s[15]++,t+=1})}),bn().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));bn().s[2]++,this.selectedItemRef=Zn.createRef(),bn().s[3]++,this.scrollContainerRef=Zn.createRef(),bn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Py()},isOpen:{add:!1}}}toggleModal(t){bn().f[2]++,bn().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Py()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){bn().f[6]++;const t=(bn().s[17]++,[]),r=(bn().s[18]++,new Map);bn().s[19]++;for(let i=(bn().s[20]++,0);i<this.props.layers.length;i++){const s=(bn().s[21]++,this.props.layers[i]),l=(bn().s[22]++,this.props.layers[i-1]);bn().s[23]++,r.set(s.id,r.has(s.id)?(bn().b[1][0]++,r.get(s.id)+1):(bn().b[1][1]++,0));const o=(bn().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(bn().s[25]++,bn().b[3][0]++,l&&(bn().b[3][1]++,ay(l.id)==ay(o.id))){bn().b[2][0]++;const p=(bn().s[26]++,t[t.length-1]);bn().s[27]++,p.push(o)}else bn().b[2][1]++,bn().s[28]++,t.push([o])}return bn().s[29]++,t}toggleLayerGroup(t,r){bn().f[7]++;const i=(bn().s[30]++,[t,r].join("-")),s=(bn().s[31]++,{...this.state.collapsedGroups});bn().s[32]++,i in this.state.collapsedGroups?(bn().b[4][0]++,bn().s[33]++,s[i]=!this.state.collapsedGroups[i]):(bn().b[4][1]++,bn().s[34]++,s[i]=!1),bn().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){bn().f[8]++;const i=(bn().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return bn().s[37]++,i===void 0?(bn().b[5][0]++,!0):(bn().b[5][1]++,i)}shouldComponentUpdate(t,r){if(bn().f[9]++,bn().s[38]++,this.state!==r)return bn().b[6][0]++,bn().s[39]++,!0;bn().b[6][1]++;function i(v){bn().f[10]++;const x=(bn().s[40]++,{id:v.id});return bn().s[41]++,v.layout?(bn().b[7][0]++,bn().s[42]++,x.layout={visibility:v.layout.visibility}):bn().b[7][1]++,bn().s[43]++,x}const s=(bn().s[44]++,zE.isEqual(t.layers.map(i),this.props.layers.map(i)));function l(v){bn().f[11]++;const x=(bn().s[45]++,{...v});return bn().s[46]++,delete x.layers,bn().s[47]++,x}const o=(bn().s[48]++,zE.isEqual(l(this.props),l(t))),p=(bn().s[49]++,bn().b[8][0]++,!(s&&(bn().b[8][1]++,o)));return bn().s[50]++,p}componentDidUpdate(t){if(bn().f[12]++,bn().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){bn().b[9][0]++;const r=(bn().s[52]++,this.selectedItemRef.current);if(bn().s[53]++,bn().b[11][0]++,r&&(bn().b[11][1]++,r.node)){bn().b[10][0]++;const i=(bn().s[54]++,r.node),s=(bn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),l=(bn().s[56]++,new IntersectionObserver(o=>{bn().f[13]++,bn().s[57]++,l.unobserve(i),bn().s[58]++,bn().b[13][0]++,o.length>0&&(bn().b[13][1]++,o[0].intersectionRatio<1)?(bn().b[12][0]++,bn().s[59]++,i.scrollIntoView()):bn().b[12][1]++},s));bn().s[60]++,l.observe(i)}else bn().b[10][1]++}else bn().b[9][1]++}render(){bn().f[14]++;const t=(bn().s[61]++,[]);let r=(bn().s[62]++,0);const i=(bn().s[63]++,this.groupedLayers());bn().s[64]++,i.forEach(l=>{bn().f[15]++;const o=(bn().s[65]++,ay(l[0].id));if(bn().s[66]++,l.length>1){bn().b[14][0]++;const p=(bn().s[67]++,Ae.jsx(xne,{"data-wd-key":[o,r].join("-"),"aria-controls":l.map(v=>(bn().f[16]++,bn().s[68]++,v.key)).join(" "),title:o,isActive:(bn().b[15][0]++,!this.isCollapsed(o,r)||(bn().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));bn().s[69]++,t.push(p)}else bn().b[14][1]++;bn().s[70]++,l.forEach((p,v)=>{var D;bn().f[17]++;const x=(bn().s[71]++,Jre(this.props.layers,r)),B=(bn().s[72]++,this.props.errors.find(N=>(bn().f[18]++,bn().s[73]++,bn().b[16][0]++,N.parsed&&(bn().b[16][1]++,N.parsed.type==="layer")&&(bn().b[16][2]++,N.parsed.data.index==r)))),k=(bn().s[74]++,{});bn().s[75]++,r===this.props.selectedLayerIndex?(bn().b[17][0]++,bn().s[76]++,k.ref=this.selectedItemRef):bn().b[17][1]++;const P=(bn().s[77]++,Ae.jsx(nre,{className:am({"maputnik-layer-list-item-collapsed":(bn().b[18][0]++,l.length>1&&(bn().b[18][1]++,this.isCollapsed(o,x))&&(bn().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(bn().b[19][0]++,v==l.length-1&&(bn().b[19][1]++,l.length>1)),"maputnik-layer-list-item--error":!!B}),index:r,id:p.key,layerId:p.id,layerIndex:r,layerType:p.type,visibility:(bn().b[20][0]++,p.layout||(bn().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(D=this.props.onLayerDestroy)==null?void 0:D.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...k},p.key));bn().s[78]++,t.push(P),bn().s[79]++,r+=1})});const s=(bn().s[80]++,this.props.t);return bn().s[81]++,Ae.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[Ae.jsx($re,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),Ae.jsxs("header",{className:"maputnik-layer-list-header",children:[Ae.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx("div",{className:"maputnik-default-property",children:Ae.jsx("div",{className:"maputnik-multibutton",children:Ae.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(bn().b[21][0]++,s("Collapse")):(bn().b[21][1]++,s("Expand"))})})}),Ae.jsx("div",{className:"maputnik-default-property",children:Ae.jsx("div",{className:"maputnik-multibutton",children:Ae.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),Ae.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:Ae.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}Pn(kz,"defaultProps",(bn().s[0]++,{onLayerSelect:()=>{bn().f[0]++}}));const eie=(bn().s[82]++,Ns()(kz)),tie=(bn().s[83]++,Xne(n=>(bn().f[19]++,bn().s[84]++,Ae.jsx(eie,{...n}))));class nie extends Zn.Component{render(){return bn().f[20]++,bn().s[85]++,Ae.jsx(tie,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(bn().f[21]++,bn().s[86]++,!1)})}}var sM,N9;function Pz(){if(N9)return sM;N9=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function r(l){delete n[l]}function i(l,o){var p=n[l];if(!p)throw new Error("Cannot open "+e);p.openMenu(o)}function s(l,o){var p=n[l];if(!p)throw new Error("Cannot close "+e);p.closeMenu(o)}return sM={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},sM}var aM,W9;function rie(){if(W9)return aM;W9=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(p){p.metaKey=p.metaKey||!1,p.ctrlKey=p.ctrlKey||!1,p.altKey=p.altKey||!1,p.shiftKey=p.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:p})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(l=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,l=0,o=this._members.length;l<o;l++)if(s=this._members[l],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,l=this._members.length;s<l;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var l=i.node||i,o=i.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var p=o.replace(/[\W_]/g,"").toLowerCase(),v={node:l,text:p};return s!=null?this._members.splice(s,0,v):this._members.push(v),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,l=i.length;s<l;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var l in i)if(s[l]!==void 0&&i[l]!==s[l])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return aM=function(s){return new n(s)},aM}var lM,j9;function iie(){if(j9)return lM;j9=1;var n=rie(),e=Pz(),t={wrap:!0,stringSearch:!0},r={init:function(p){this.updateOptions(p),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(p){var v=this.options;this.options=p||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),v&&v.id&&v.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(p){this.focusGroup.focusNodeAtIndex(p)},addItem:function(p){this.focusGroup.addMember(p)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(p){this.focusGroup._handleUnboundKey(p)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(p){if(!this.isOpen&&(p=p||{},p.focusMenu===void 0&&(p.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),p.focusMenu)){var v=this;this.moveFocusTimer=setTimeout(function(){v.focusItem(0)},0)}},closeMenu:function(p){this.isOpen&&(p=p||{},this.isOpen=!1,this.update(),p.focusButton&&this.button.ref.current.focus())},toggleMenu:function(p,v){p=p||{},v=v||{},this.isOpen?this.closeMenu(p):this.openMenu(v)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var p=o.button.ref.current;if(p){var v=p.ownerDocument.activeElement;if(!(p&&v===p)){var x=o.menu.ref.current;if(x===v){o.focusItem(0);return}x&&x.contains(v)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,p){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,p)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return lM=function(o){var p=Object.create(r);return p.init(o),p},lM}var AM,G9;function zx(){if(G9)return AM;G9=1;var n=Da(),e=n.createContext();return AM=e,AM}var uM,Q9;function Nx(){if(Q9)return uM;Q9=1;var n=wp();return uM={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},uM}var cM,Y9;function Wx(){return Y9||(Y9=1,cM=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),cM}var hM,q9;function oie(){if(q9)return hM;q9=1;function n(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function e(P,D){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:P}function t(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(P,D):P.__proto__=D)}var r=Da(),i=wp(),s=iie(),l=zx(),o=Nx(),p=o.refType,v=Wx(),x={children:i.node.isRequired,forwardedRef:p,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(D){return{onMenuToggle:D.onMenuToggle,onSelection:D.onSelection,closeOnSelection:D.closeOnSelection,closeOnBlur:D.closeOnBlur,id:D.id}},k=function(P){t(D,P);function D(N){n(this,D);var W=e(this,P.call(this,N));return W.manager=s(B(N)),W}return D.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},D.prototype.render=function(){var W={};return v(W,this.props,x),r.createElement(l.Provider,{value:this.manager},r.createElement(this.props.tag,W,this.props.children))},D}(r.Component);return k.propTypes=x,k.defaultProps={tag:"div"},hM=r.forwardRef(function(P,D){var N={forwardedRef:D};return v(N,P,{children:x.children,forwardedRef:x.forwardedRef}),v(N,{forwardedRef:D}),r.createElement(k,N,P.children)}),hM}var dM,V9;function sie(){if(V9)return dM;V9=1;function n(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function e(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function t(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var r=Da(),i=wp(),s=zx(),l=Nx(),o=l.refType,p=Wx(),v={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},x=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(k){t(P,k);function P(){var D,N,W;n(this,P);for(var V=arguments.length,$=Array(V),ie=0;ie<V;ie++)$[ie]=arguments[ie];return W=(D=(N=e(this,k.call.apply(k,[this].concat($))),N),N.ref=r.createRef(),N.handleKeyDown=function(ne){if(!N.props.disabled){var q=N.props.ambManager;switch(ne.key){case"ArrowDown":ne.preventDefault(),q.isOpen?q.focusItem(0):q.openMenu();break;case"Enter":case" ":ne.preventDefault(),q.toggleMenu();break;case"Escape":q.handleMenuKey(ne);break;default:q.handleButtonNonArrowKey(ne)}}},N.handleClick=function(){N.props.disabled||N.props.ambManager.toggleMenu({},{focusMenu:!1})},N.setRef=function(ne){N.ref.current=ne,typeof N.props.forwardedRef=="function"?N.props.forwardedRef(ne):N.props.forwardedRef&&(N.props.forwardedRef.current=ne)},D),e(N,W)}return P.prototype.componentDidMount=function(){this.props.ambManager.button=this},P.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},P.prototype.render=function(){var N=this.props,W=this.props.ambManager,V={role:"button",tabIndex:N.disabled?"":"0","aria-haspopup":!0,"aria-expanded":W.isOpen,"aria-disabled":N.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},$={};return p($,v),x().indexOf(N.tag)>=0&&delete $.disabled,W.options.closeOnBlur&&(V.onBlur=W.handleBlur),p(V,N,$),p(V,{ref:this.setRef}),r.createElement(N.tag,V,N.children)},P}(r.Component);return B.propTypes=v,B.defaultProps={tag:"span"},dM=r.forwardRef(function(k,P){return r.createElement(s.Consumer,null,function(D){var N={ambManager:D,forwardedRef:P};return p(N,k,{ambManager:v.ambManager,children:v.children,forwardedRef:v.forwardedRef}),r.createElement(B,N,k.children)})}),dM}var fM,H9;function aie(){return H9||(H9=1,fM=function(e,t,r){var i=0,s=0,l=!1,o=!1,p=!1;e.addEventListener("click",v,r),e.addEventListener("touchstart",x,r);function v(W){p||t(W)}function x(W){p=!0,!l&&(l=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",k,r),e.addEventListener("touchcancel",P,r),o=!1,i=W.touches[0].clientX,s=W.touches[0].clientY)}function B(W){o||Math.abs(W.touches[0].clientX-i)<=10&&Math.abs(W.touches[0].clientY-s)<=10||(o=!0)}function k(W){l=!1,D(),o||t(W)}function P(){l=!1,o=!1,i=0,s=0}function D(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",k,r),e.removeEventListener("touchcancel",P,r)}function N(){e.removeEventListener("click",v,r),e.removeEventListener("touchstart",x,r),D()}return{remove:N}}),fM}var pM,$9;function lie(){if($9)return pM;$9=1;function n(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function e(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function t(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var r=Da(),i=wp(),s=aie(),l=zx(),o=Nx(),p=o.refType,v=Wx(),x={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:p,tag:i.string},B=function(k){t(P,k);function P(){var D,N,W;n(this,P);for(var V=arguments.length,$=Array(V),ie=0;ie<V;ie++)$[ie]=arguments[ie];return W=(D=(N=e(this,k.call.apply(k,[this].concat($))),N),N.ref=r.createRef(),N.addTapListener=function(){var ne=N.ref.current;if(ne){var q=ne.ownerDocument;q&&(N.tapListener=s(q.documentElement,N.handleTap))}},N.handleTap=function(ne){N.ref.current.contains(ne.target)||N.props.ambManager.button.ref.current.contains(ne.target)||N.props.ambManager.closeMenu()},N.setRef=function(ne){N.ref.current=ne,typeof N.props.forwardedRef=="function"?N.props.forwardedRef(ne):N.props.forwardedRef&&(N.props.forwardedRef.current=ne)},D),e(N,W)}return P.prototype.componentDidMount=function(){this.props.ambManager.menu=this},P.prototype.componentDidUpdate=function(){var N=this.props.ambManager;N.options.closeOnBlur&&(N.isOpen&&!this.tapListener?this.addTapListener():!N.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),N.isOpen||N.clearItems())},P.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},P.prototype.render=function(){var N=this.props,W=this.props.ambManager,V=function(){return typeof N.children=="function"?N.children({isOpen:W.isOpen}):W.isOpen?N.children:!1}();if(!V)return!1;var $={onKeyDown:W.handleMenuKey,role:"menu",tabIndex:-1};return W.options.closeOnBlur&&($.onBlur=W.handleBlur),v($,N,x),v($,{ref:this.setRef}),r.createElement(N.tag,$,V)},P}(r.Component);return B.propTypes=x,B.defaultProps={tag:"div"},pM=r.forwardRef(function(k,P){return r.createElement(l.Consumer,null,function(D){var N={ambManager:D,forwardedRef:P};return v(N,k,{ambManager:x.ambManager,children:x.children,forwardedRef:x.forwardedRef}),r.createElement(B,N,k.children)})}),pM}var mM,Z9;function Aie(){if(Z9)return mM;Z9=1;function n(B,k){if(!(B instanceof k))throw new TypeError("Cannot call a class as a function")}function e(B,k){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:B}function t(B,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);B.prototype=Object.create(k&&k.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(B,k):B.__proto__=k)}var r=Da(),i=wp(),s=zx(),l=Nx(),o=l.refType,p=Wx(),v={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},x=function(B){t(k,B);function k(){var P,D,N;n(this,k);for(var W=arguments.length,V=Array(W),$=0;$<W;$++)V[$]=arguments[$];return N=(P=(D=e(this,B.call.apply(B,[this].concat(V))),D),D.ref=r.createRef(),D.handleKeyDown=function(ie){ie.key!=="Enter"&&ie.key!==" "||D.props.tag==="a"&&D.props.href||(ie.preventDefault(),D.selectItem(ie))},D.selectItem=function(ie){var ne=typeof D.props.value<"u"?D.props.value:D.props.children;D.props.ambManager.handleSelection(ne,ie)},D.setRef=function(ie){D.ref.current=ie,typeof D.props.forwardedRef=="function"?D.props.forwardedRef(ie):D.props.forwardedRef&&(D.props.forwardedRef.current=ie)},P),e(D,N)}return k.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},k.prototype.render=function(){var D={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return p(D,this.props,v),r.createElement(this.props.tag,D,this.props.children)},k}(r.Component);return x.propTypes=v,x.defaultProps={tag:"div"},mM=r.forwardRef(function(B,k){return r.createElement(s.Consumer,null,function(P){var D={ambManager:P,forwardedRef:k};return p(D,B,{ambManager:v.ambManager,children:v.children,forwardedRef:v.forwardedRef}),r.createElement(x,D,B.children)})}),mM}var gM,X9;function uie(){if(X9)return gM;X9=1;var n=Pz();return gM={Wrapper:oie(),Button:sie(),Menu:lie(),MenuItem:Aie(),openMenu:n.openMenu,closeMenu:n.closeMenu},gM}var hb=uie();function J9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function G6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J9(Object(t),!0).forEach(function(r){Ll(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jx(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function eT(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Gx(n,e,t){return e&&eT(n.prototype,e),t&&eT(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ll(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lm(){return lm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lm.apply(this,arguments)}function PO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Q6(n,e)}function I2(n){return I2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I2(n)}function Q6(n,e){return Q6=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Q6(n,e)}function cie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Qx(n,e){if(n==null)return{};var t=hie(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function dp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function die(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dp(n)}function KO(n){var e=cie();return function(){var r=I2(n),i;if(e){var s=I2(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return die(this,i)}}function fie(n,e){return gie(n)||vie(n,e)||Kz(n,e)||_ie()}function pie(n){return mie(n)||yie(n)||Kz(n)||Cie()}function mie(n){if(Array.isArray(n))return Y6(n)}function gie(n){if(Array.isArray(n))return n}function yie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function vie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,l,o;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(p){s=!0,o=p}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function Kz(n,e){if(n){if(typeof n=="string")return Y6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y6(n,e)}}function Y6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Cie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bie=Gx(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,l=s===void 0?!1:s,o=e.allowZeroExpanded,p=o===void 0?!1:o;jx(this,n),Ll(this,"expanded",void 0),Ll(this,"allowMultipleExpanded",void 0),Ll(this,"allowZeroExpanded",void 0),Ll(this,"toggleExpanded",function(v){if(t.isItemDisabled(v))return t;var x=t.isItemExpanded(v);return x?t.augment({expanded:t.expanded.filter(function(B){return B!==v})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(pie(t.expanded),[v]):[v]})}),Ll(this,"isItemDisabled",function(v){var x=t.isItemExpanded(v),B=t.expanded.length===1;return!!(x&&!t.allowZeroExpanded&&B)}),Ll(this,"isItemExpanded",function(v){return t.expanded.indexOf(v)!==-1}),Ll(this,"getPanelAttributes",function(v,x){var B=x??t.isItemExpanded(v);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(v),id:t.getPanelId(v),hidden:B?void 0:!0}}),Ll(this,"getHeadingAttributes",function(){return{role:"heading"}}),Ll(this,"getButtonAttributes",function(v,x){var B=x??t.isItemExpanded(v),k=t.isItemDisabled(v);return{id:t.getButtonId(v),"aria-disabled":k,"aria-expanded":B,"aria-controls":t.getPanelId(v),role:"button",tabIndex:0}}),Ll(this,"getPanelId",function(v){return"accordion__panel-".concat(v)}),Ll(this,"getButtonId",function(v){return"accordion__heading-".concat(v)}),Ll(this,"augment",function(v){return new n(G6({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},v))}),this.expanded=i,this.allowMultipleExpanded=l,this.allowZeroExpanded=p}),Rz=Ai.createContext(null),Dz=function(n){PO(t,n);var e=KO(t);function t(){var r;jx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Ll(dp(r),"state",new bie({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Ll(dp(r),"toggleExpanded",function(o){r.setState(function(p){return p.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Ll(dp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Ll(dp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Ll(dp(r),"getPanelAttributes",function(o,p){return r.state.getPanelAttributes(o,p)}),Ll(dp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Ll(dp(r),"getButtonAttributes",function(o,p){return r.state.getButtonAttributes(o,p)}),r}return Gx(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,l=i.allowMultipleExpanded;return Ai.createElement(Rz.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Ai.PureComponent);Ll(Dz,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var Fz=function(n){PO(t,n);var e=KO(t);function t(){var r;jx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Ll(dp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return Gx(t,[{key:"render",value:function(){return Ai.createElement(Rz.Consumer,null,this.renderChildren)}}]),t}(Ai.PureComponent),xie=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Mie=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,p=Qx(e,xie);return Ai.createElement(Dz,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:l},Ai.createElement("div",lm({"data-accordion-component":"Accordion",className:r},p)))},q6;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(q6||(q6={}));var Lz=q6,yM=0;function wie(){var n=yM;return yM=yM+1,"raa-".concat(n)}var Sie=Ai.useId||wie,Eie=/[\u0009\u000a\u000c\u000d\u0020]/g;function TC(n){return n===""||Eie.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var Uz=Ai.createContext(null),Bie=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,l=function(){i.toggleExpanded(r)},o=function(v){var x=s??v.isItemExpanded(r),B=v.isItemDisabled(r),k=v.getPanelAttributes(r,s),P=v.getHeadingAttributes(r),D=v.getButtonAttributes(r,s);return Ai.createElement(Uz.Provider,{value:{uuid:r,expanded:x,disabled:B,toggleExpanded:l,panelAttributes:k,headingAttributes:P,buttonAttributes:D}},t)};return Ai.createElement(Fz,null,o)},Oie=function(e){return Ai.createElement(Fz,null,function(t){return Ai.createElement(Bie,lm({},e,{accordionContext:t}))})},Yx=function(e){var t=e.children,r=function(s){return s?t(s):null};return Ai.createElement(Uz.Consumer,null,r)},Iie=["uuid","dangerouslySetExpanded","className","activeClassName"],zz=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,l=e.activeClassName,o=Qx(e,Iie),p=Ai.useState(Sie()),v=fie(p,1),x=v[0],B=t??x,k=function(D){var N=D.expanded,W=N&&l?l:s;return Ai.createElement("div",lm({"data-accordion-component":"AccordionItem",className:W},o))};return TC(B.toString()),o.id&&TC(o.id),Ai.createElement(Oie,{uuid:B,dangerouslySetExpanded:r},Ai.createElement(Yx,null,k))};zz.displayName=Lz.AccordionItem;function Nz(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Nz(n.parentElement))}function qx(n){var e=Nz(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Tie(n){var e=qx(n)||[],t=e[0];t&&t.focus()}function kie(n){var e=qx(n)||[],t=e[e.length-1];t&&t.focus()}function Pie(n){var e=qx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function Kie(n){var e=qx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Pm={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Rie=["toggleExpanded","className"],Die=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=Qx(e,Rie),l=function(p){var v=p.key;if((v===Pm.ENTER||v===Pm.SPACE||v===Pm.SPACE_DEPRECATED)&&(p.preventDefault(),t()),p.target instanceof HTMLElement)switch(v){case Pm.HOME:{p.preventDefault(),Tie(p.target);break}case Pm.END:{p.preventDefault(),kie(p.target);break}case Pm.LEFT:case Pm.UP:{p.preventDefault(),Kie(p.target);break}case Pm.RIGHT:case Pm.DOWN:{p.preventDefault(),Pie(p.target);break}}};return s.id&&TC(s.id),Ai.createElement("div",lm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},Fie=function(e){return Ai.createElement(Yx,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return Ai.createElement(Die,lm({toggleExpanded:r},e,i))})},Lie={className:"accordion__heading","aria-level":3},Uie=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Wz=function(n){PO(t,n);var e=KO(t);function t(){var r;jx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Ll(dp(r),"ref",void 0),Ll(dp(r),"setRef",function(o){r.ref=o}),r}return Gx(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Ai.createElement("div",lm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Uie)}}]),t}(Ai.PureComponent);Ll(Wz,"defaultProps",Lie);var jz=function(e){return Ai.createElement(Yx,null,function(t){var r=t.headingAttributes;return e.id&&TC(e.id),Ai.createElement(Wz,lm({},e,r))})};jz.displayName=Lz.AccordionItemHeading;var zie=["className","region","id"],Nie=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,l=Qx(e,zie),o=function(v){var x=v.panelAttributes;s&&TC(s);var B=G6(G6({},x),{},{"aria-labelledby":i?x["aria-labelledby"]:void 0});return Ai.createElement("div",lm({"data-accordion-component":"AccordionItemPanel",className:r},l,B,{role:i?"region":void 0}))};return Ai.createElement(Yx,null,o)},Tb={exports:{}},Wie=Tb.exports,tT;function Vx(){return tT||(tT=1,function(n,e){(function(t,r){n.exports=r()})(Wie,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),p=s||l||o,v=p&&(s?document.documentMode||6:+(o||l)[1]),x=!o&&/WebKit\//.test(t),B=x&&/Qt\/\d+\.\d+/.test(t),k=!o&&/Chrome\/(\d+)/.exec(t),P=k&&+k[1],D=/Opera\//.test(t),N=/Apple Computer/.test(navigator.vendor),W=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),V=/PhantomJS/.test(t),$=N&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),ie=/Android/.test(t),ne=$||ie||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),q=$||/Mac/.test(r),te=/\bCrOS\b/.test(t),G=/win/i.test(r),oe=D&&t.match(/Version\/(\d*\.\d*)/);oe&&(oe=Number(oe[1])),oe&&oe>=15&&(D=!1,x=!0);var fe=q&&(B||D&&(oe==null||oe<12.11)),he=i||p&&v>=9;function Me(u){return new RegExp("(^|\\s)"+u+"(?:$|\\s)\\s*")}var me=function(u,g){var E=u.className,S=Me(g).exec(E);if(S){var K=E.slice(S.index+S[0].length);u.className=E.slice(0,S.index)+(K?S[1]+K:"")}};function pe(u){for(var g=u.childNodes.length;g>0;--g)u.removeChild(u.firstChild);return u}function qe(u,g){return pe(u).appendChild(g)}function Se(u,g,E,S){var K=document.createElement(u);if(E&&(K.className=E),S&&(K.style.cssText=S),typeof g=="string")K.appendChild(document.createTextNode(g));else if(g)for(var Z=0;Z<g.length;++Z)K.appendChild(g[Z]);return K}function vt(u,g,E,S){var K=Se(u,g,E,S);return K.setAttribute("role","presentation"),K}var Je;document.createRange?Je=function(u,g,E,S){var K=document.createRange();return K.setEnd(S||u,E),K.setStart(u,g),K}:Je=function(u,g,E){var S=document.body.createTextRange();try{S.moveToElementText(u.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",E),S.moveStart("character",g),S};function Ke(u,g){if(g.nodeType==3&&(g=g.parentNode),u.contains)return u.contains(g);do if(g.nodeType==11&&(g=g.host),g==u)return!0;while(g=g.parentNode)}function je(u){var g=u.ownerDocument||u,E;try{E=u.activeElement}catch{E=g.body||null}for(;E&&E.shadowRoot&&E.shadowRoot.activeElement;)E=E.shadowRoot.activeElement;return E}function Pe(u,g){var E=u.className;Me(g).test(E)||(u.className+=(E?" ":"")+g)}function Le(u,g){for(var E=u.split(" "),S=0;S<E.length;S++)E[S]&&!Me(E[S]).test(g)&&(g+=" "+E[S]);return g}var Xe=function(u){u.select()};$?Xe=function(u){u.selectionStart=0,u.selectionEnd=u.value.length}:p&&(Xe=function(u){try{u.select()}catch{}});function Ct(u){return u.display.wrapper.ownerDocument}function Gt(u){return mt(u.display.wrapper)}function mt(u){return u.getRootNode?u.getRootNode():u.ownerDocument}function Ut(u){return Ct(u).defaultView}function kt(u){var g=Array.prototype.slice.call(arguments,1);return function(){return u.apply(null,g)}}function Te(u,g,E){g||(g={});for(var S in u)u.hasOwnProperty(S)&&(E!==!1||!g.hasOwnProperty(S))&&(g[S]=u[S]);return g}function Re(u,g,E,S,K){g==null&&(g=u.search(/[^\s\u00a0]/),g==-1&&(g=u.length));for(var Z=S||0,ue=K||0;;){var be=u.indexOf("	",Z);if(be<0||be>=g)return ue+(g-Z);ue+=be-Z,ue+=E-ue%E,Z=be+1}}var Ue=function(){this.id=null,this.f=null,this.time=0,this.handler=kt(this.onTimeout,this)};Ue.prototype.onTimeout=function(u){u.id=0,u.time<=+new Date?u.f():setTimeout(u.handler,u.time-+new Date)},Ue.prototype.set=function(u,g){this.f=g;var E=+new Date+u;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,u),this.time=E)};function nt(u,g){for(var E=0;E<u.length;++E)if(u[E]==g)return E;return-1}var _t=50,gt={toString:function(){return"CodeMirror.Pass"}},Kt={scroll:!1},$t={origin:"*mouse"},Rt={origin:"+move"};function _n(u,g,E){for(var S=0,K=0;;){var Z=u.indexOf("	",S);Z==-1&&(Z=u.length);var ue=Z-S;if(Z==u.length||K+ue>=g)return S+Math.min(ue,g-K);if(K+=Z-S,K+=E-K%E,S=Z+1,K>=g)return S}}var pr=[""];function nn(u){for(;pr.length<=u;)pr.push(Xn(pr)+" ");return pr[u]}function Xn(u){return u[u.length-1]}function Fn(u,g){for(var E=[],S=0;S<u.length;S++)E[S]=g(u[S],S);return E}function an(u,g,E){for(var S=0,K=E(g);S<u.length&&E(u[S])<=K;)S++;u.splice(S,0,g)}function Bn(){}function Cr(u,g){var E;return Object.create?E=Object.create(u):(Bn.prototype=u,E=new Bn),g&&Te(g,E),E}var lr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function hr(u){return/\w/.test(u)||u>""&&(u.toUpperCase()!=u.toLowerCase()||lr.test(u))}function We(u,g){return g?g.source.indexOf("\\w")>-1&&hr(u)?!0:g.test(u):hr(u)}function ce(u){for(var g in u)if(u.hasOwnProperty(g)&&u[g])return!1;return!0}var ye=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(u){return u.charCodeAt(0)>=768&&ye.test(u)}function Et(u,g,E){for(;(E<0?g>0:g<u.length)&&rt(u.charAt(g));)g+=E;return g}function Ht(u,g,E){for(var S=g>E?-1:1;;){if(g==E)return g;var K=(g+E)/2,Z=S<0?Math.ceil(K):Math.floor(K);if(Z==g)return u(Z)?g:E;u(Z)?E=Z:g=Z+S}}function Zt(u,g,E,S){if(!u)return S(g,E,"ltr",0);for(var K=!1,Z=0;Z<u.length;++Z){var ue=u[Z];(ue.from<E&&ue.to>g||g==E&&ue.to==g)&&(S(Math.max(ue.from,g),Math.min(ue.to,E),ue.level==1?"rtl":"ltr",Z),K=!0)}K||S(g,E,"ltr")}var Jn=null;function He(u,g,E){var S;Jn=null;for(var K=0;K<u.length;++K){var Z=u[K];if(Z.from<g&&Z.to>g)return K;Z.to==g&&(Z.from!=Z.to&&E=="before"?S=K:Jn=K),Z.from==g&&(Z.from!=Z.to&&E!="before"?S=K:Jn=K)}return S??Jn}var ae=function(){var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(Ne){return Ne<=247?u.charAt(Ne):1424<=Ne&&Ne<=1524?"R":1536<=Ne&&Ne<=1785?g.charAt(Ne-1536):1774<=Ne&&Ne<=2220?"r":8192<=Ne&&Ne<=8203?"w":Ne==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,K=/[stwN]/,Z=/[LRr]/,ue=/[Lb1n]/,be=/[1n]/;function ke(Ne,ft,Mt){this.level=Ne,this.from=ft,this.to=Mt}return function(Ne,ft){var Mt=ft=="ltr"?"L":"R";if(Ne.length==0||ft=="ltr"&&!S.test(Ne))return!1;for(var tn=Ne.length,Yt=[],wn=0;wn<tn;++wn)Yt.push(E(Ne.charCodeAt(wn)));for(var Ln=0,Hn=Mt;Ln<tn;++Ln){var $n=Yt[Ln];$n=="m"?Yt[Ln]=Hn:Hn=$n}for(var gr=0,Ar=Mt;gr<tn;++gr){var Rr=Yt[gr];Rr=="1"&&Ar=="r"?Yt[gr]="n":Z.test(Rr)&&(Ar=Rr,Rr=="r"&&(Yt[gr]="R"))}for(var ii=1,kr=Yt[0];ii<tn-1;++ii){var ro=Yt[ii];ro=="+"&&kr=="1"&&Yt[ii+1]=="1"?Yt[ii]="1":ro==","&&kr==Yt[ii+1]&&(kr=="1"||kr=="n")&&(Yt[ii]=kr),kr=ro}for(var Oo=0;Oo<tn;++Oo){var ra=Yt[Oo];if(ra==",")Yt[Oo]="N";else if(ra=="%"){var Ls=void 0;for(Ls=Oo+1;Ls<tn&&Yt[Ls]=="%";++Ls);for(var Aa=Oo&&Yt[Oo-1]=="!"||Ls<tn&&Yt[Ls]=="1"?"1":"N",ka=Oo;ka<Ls;++ka)Yt[ka]=Aa;Oo=Ls-1}}for(var Ya=0,UA=Mt;Ya<tn;++Ya){var ll=Yt[Ya];UA=="L"&&ll=="1"?Yt[Ya]="L":Z.test(ll)&&(UA=ll)}for(var qa=0;qa<tn;++qa)if(K.test(Yt[qa])){var cs=void 0;for(cs=qa+1;cs<tn&&K.test(Yt[cs]);++cs);for(var bi=(qa?Yt[qa-1]:Mt)=="L",ss=(cs<tn?Yt[cs]:Mt)=="L",Vs=bi==ss?bi?"L":"R":Mt,ua=qa;ua<cs;++ua)Yt[ua]=Vs;qa=cs-1}for(var gs=[],zA,Io=0;Io<tn;)if(ue.test(Yt[Io])){var Ah=Io;for(++Io;Io<tn&&ue.test(Yt[Io]);++Io);gs.push(new ke(0,Ah,Io))}else{var gA=Io,dc=gs.length,Fc=ft=="rtl"?1:0;for(++Io;Io<tn&&Yt[Io]!="L";++Io);for(var xa=gA;xa<Io;)if(be.test(Yt[xa])){gA<xa&&(gs.splice(dc,0,new ke(1,gA,xa)),dc+=Fc);var Pl=xa;for(++xa;xa<Io&&be.test(Yt[xa]);++xa);gs.splice(dc,0,new ke(2,Pl,xa)),dc+=Fc,gA=xa}else++xa;gA<Io&&gs.splice(dc,0,new ke(1,gA,Io))}return ft=="ltr"&&(gs[0].level==1&&(zA=Ne.match(/^\s+/))&&(gs[0].from=zA[0].length,gs.unshift(new ke(0,0,zA[0].length))),Xn(gs).level==1&&(zA=Ne.match(/\s+$/))&&(Xn(gs).to-=zA[0].length,gs.push(new ke(0,tn-zA[0].length,tn)))),ft=="rtl"?gs.reverse():gs}}();function _e(u,g){var E=u.order;return E==null&&(E=u.order=ae(u.text,g)),E}var f=[],Qe=function(u,g,E){if(u.addEventListener)u.addEventListener(g,E,!1);else if(u.attachEvent)u.attachEvent("on"+g,E);else{var S=u._handlers||(u._handlers={});S[g]=(S[g]||f).concat(E)}};function Ee(u,g){return u._handlers&&u._handlers[g]||f}function it(u,g,E){if(u.removeEventListener)u.removeEventListener(g,E,!1);else if(u.detachEvent)u.detachEvent("on"+g,E);else{var S=u._handlers,K=S&&S[g];if(K){var Z=nt(K,E);Z>-1&&(S[g]=K.slice(0,Z).concat(K.slice(Z+1)))}}}function ut(u,g){var E=Ee(u,g);if(E.length)for(var S=Array.prototype.slice.call(arguments,2),K=0;K<E.length;++K)E[K].apply(null,S)}function at(u,g,E){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),ut(u,E||g.type,u,g),Dn(g)||g.codemirrorIgnore}function zt(u){var g=u._handlers&&u._handlers.cursorActivity;if(g)for(var E=u.curOp.cursorActivityHandlers||(u.curOp.cursorActivityHandlers=[]),S=0;S<g.length;++S)nt(E,g[S])==-1&&E.push(g[S])}function Qt(u,g){return Ee(u,g).length>0}function Nt(u){u.prototype.on=function(g,E){Qe(this,g,E)},u.prototype.off=function(g,E){it(this,g,E)}}function rn(u){u.preventDefault?u.preventDefault():u.returnValue=!1}function Rn(u){u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}function Dn(u){return u.defaultPrevented!=null?u.defaultPrevented:u.returnValue==!1}function mr(u){rn(u),Rn(u)}function Tr(u){return u.target||u.srcElement}function Jt(u){var g=u.which;return g==null&&(u.button&1?g=1:u.button&2?g=3:u.button&4&&(g=2)),q&&u.ctrlKey&&g==1&&(g=3),g}var br=function(){if(p&&v<9)return!1;var u=Se("div");return"draggable"in u||"dragDrop"in u}(),Gr;function Si(u){if(Gr==null){var g=Se("span","");qe(u,Se("span",[g,document.createTextNode("x")])),u.firstChild.offsetHeight!=0&&(Gr=g.offsetWidth<=1&&g.offsetHeight>2&&!(p&&v<8))}var E=Gr?Se("span",""):Se("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var Fr;function yn(u){if(Fr!=null)return Fr;var g=qe(u,document.createTextNode("AA")),E=Je(g,0,1).getBoundingClientRect(),S=Je(g,1,2).getBoundingClientRect();return pe(u),!E||E.left==E.right?!1:Fr=S.right-E.right<3}var ar=`

b`.split(/\n/).length!=3?function(u){for(var g=0,E=[],S=u.length;g<=S;){var K=u.indexOf(`
`,g);K==-1&&(K=u.length);var Z=u.slice(g,u.charAt(K-1)=="\r"?K-1:K),ue=Z.indexOf("\r");ue!=-1?(E.push(Z.slice(0,ue)),g+=ue+1):(E.push(Z),g=K+1)}return E}:function(u){return u.split(/\r\n?|\n/)},Pr=window.getSelection?function(u){try{return u.selectionStart!=u.selectionEnd}catch{return!1}}:function(u){var g;try{g=u.ownerDocument.selection.createRange()}catch{}return!g||g.parentElement()!=u?!1:g.compareEndPoints("StartToEnd",g)!=0},Cs=function(){var u=Se("div");return"oncopy"in u?!0:(u.setAttribute("oncopy","return;"),typeof u.oncopy=="function")}(),Ao=null;function ui(u){if(Ao!=null)return Ao;var g=qe(u,Se("span","x")),E=g.getBoundingClientRect(),S=Je(g,0,1).getBoundingClientRect();return Ao=Math.abs(E.left-S.left)>1}var $r={},_s={};function fs(u,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),$r[u]=g}function Ja(u,g){_s[u]=g}function sa(u){if(typeof u=="string"&&_s.hasOwnProperty(u))u=_s[u];else if(u&&typeof u.name=="string"&&_s.hasOwnProperty(u.name)){var g=_s[u.name];typeof g=="string"&&(g={name:g}),u=Cr(g,u),u.name=g.name}else{if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(u))return sa("application/xml");if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(u))return sa("application/json")}return typeof u=="string"?{name:u}:u||{name:"null"}}function Wo(u,g){g=sa(g);var E=$r[g.name];if(!E)return Wo(u,"text/plain");var S=E(u,g);if(zo.hasOwnProperty(g.name)){var K=zo[g.name];for(var Z in K)K.hasOwnProperty(Z)&&(S.hasOwnProperty(Z)&&(S["_"+Z]=S[Z]),S[Z]=K[Z])}if(S.name=g.name,g.helperType&&(S.helperType=g.helperType),g.modeProps)for(var ue in g.modeProps)S[ue]=g.modeProps[ue];return S}var zo={};function So(u,g){var E=zo.hasOwnProperty(u)?zo[u]:zo[u]={};Te(g,E)}function pi(u,g){if(g===!0)return g;if(u.copyState)return u.copyState(g);var E={};for(var S in g){var K=g[S];K instanceof Array&&(K=K.concat([])),E[S]=K}return E}function tA(u,g){for(var E;u.innerMode&&(E=u.innerMode(g),!(!E||E.mode==u));)g=E.state,u=E.mode;return E||{mode:u,state:g}}function _l(u,g,E){return u.startState?u.startState(g,E):!0}var Ni=function(u,g,E){this.pos=this.start=0,this.string=u,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};Ni.prototype.eol=function(){return this.pos>=this.string.length},Ni.prototype.sol=function(){return this.pos==this.lineStart},Ni.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ni.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ni.prototype.eat=function(u){var g=this.string.charAt(this.pos),E;if(typeof u=="string"?E=g==u:E=g&&(u.test?u.test(g):u(g)),E)return++this.pos,g},Ni.prototype.eatWhile=function(u){for(var g=this.pos;this.eat(u););return this.pos>g},Ni.prototype.eatSpace=function(){for(var u=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>u},Ni.prototype.skipToEnd=function(){this.pos=this.string.length},Ni.prototype.skipTo=function(u){var g=this.string.indexOf(u,this.pos);if(g>-1)return this.pos=g,!0},Ni.prototype.backUp=function(u){this.pos-=u},Ni.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Re(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Re(this.string,this.lineStart,this.tabSize):0)},Ni.prototype.indentation=function(){return Re(this.string,null,this.tabSize)-(this.lineStart?Re(this.string,this.lineStart,this.tabSize):0)},Ni.prototype.match=function(u,g,E){if(typeof u=="string"){var S=function(ue){return E?ue.toLowerCase():ue},K=this.string.substr(this.pos,u.length);if(S(K)==S(u))return g!==!1&&(this.pos+=u.length),!0}else{var Z=this.string.slice(this.pos).match(u);return Z&&Z.index>0?null:(Z&&g!==!1&&(this.pos+=Z[0].length),Z)}},Ni.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ni.prototype.hideFirstChars=function(u,g){this.lineStart+=u;try{return g()}finally{this.lineStart-=u}},Ni.prototype.lookAhead=function(u){var g=this.lineOracle;return g&&g.lookAhead(u)},Ni.prototype.baseToken=function(){var u=this.lineOracle;return u&&u.baseToken(this.pos)};function wr(u,g){if(g-=u.first,g<0||g>=u.size)throw new Error("There is no line "+(g+u.first)+" in the document.");for(var E=u;!E.lines;)for(var S=0;;++S){var K=E.children[S],Z=K.chunkSize();if(g<Z){E=K;break}g-=Z}return E.lines[g]}function Fa(u,g,E){var S=[],K=g.line;return u.iter(g.line,E.line+1,function(Z){var ue=Z.text;K==E.line&&(ue=ue.slice(0,E.ch)),K==g.line&&(ue=ue.slice(g.ch)),S.push(ue),++K}),S}function bs(u,g,E){var S=[];return u.iter(g,E,function(K){S.push(K.text)}),S}function Rs(u,g){var E=g-u.height;if(E)for(var S=u;S;S=S.parent)S.height+=E}function Ve(u){if(u.parent==null)return null;for(var g=u.parent,E=nt(g.lines,u),S=g.parent;S;g=S,S=S.parent)for(var K=0;S.children[K]!=g;++K)E+=S.children[K].chunkSize();return E+g.first}function xt(u,g){var E=u.first;e:do{for(var S=0;S<u.children.length;++S){var K=u.children[S],Z=K.height;if(g<Z){u=K;continue e}g-=Z,E+=K.chunkSize()}return E}while(!u.lines);for(var ue=0;ue<u.lines.length;++ue){var be=u.lines[ue],ke=be.height;if(g<ke)break;g-=ke}return E+ue}function xn(u,g){return g>=u.first&&g<u.first+u.size}function Yn(u,g){return String(u.lineNumberFormatter(g+u.firstLineNumber))}function fn(u,g,E){if(E===void 0&&(E=null),!(this instanceof fn))return new fn(u,g,E);this.line=u,this.ch=g,this.sticky=E}function dr(u,g){return u.line-g.line||u.ch-g.ch}function Wi(u,g){return u.sticky==g.sticky&&dr(u,g)==0}function Co(u){return fn(u.line,u.ch)}function ls(u,g){return dr(u,g)<0?g:u}function pa(u,g){return dr(u,g)<0?u:g}function nA(u,g){return Math.max(u.first,Math.min(g,u.first+u.size-1))}function Ci(u,g){if(g.line<u.first)return fn(u.first,0);var E=u.first+u.size-1;return g.line>E?fn(E,wr(u,E).text.length):ZA(g,wr(u,g.line).text.length)}function ZA(u,g){var E=u.ch;return E==null||E>g?fn(u.line,g):E<0?fn(u.line,0):u}function rA(u,g){for(var E=[],S=0;S<g.length;S++)E[S]=Ci(u,g[S]);return E}var ma=function(u,g){this.state=u,this.lookAhead=g},Ea=function(u,g,E,S){this.state=g,this.doc=u,this.line=E,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};Ea.prototype.lookAhead=function(u){var g=this.doc.getLine(this.line+u);return g!=null&&u>this.maxLookAhead&&(this.maxLookAhead=u),g},Ea.prototype.baseToken=function(u){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=u;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-u}},Ea.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ea.fromSaved=function(u,g,E){return g instanceof ma?new Ea(u,pi(u.mode,g.state),E,g.lookAhead):new Ea(u,pi(u.mode,g),E)},Ea.prototype.save=function(u){var g=u!==!1?pi(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ma(g,this.maxLookAhead):g};function _c(u,g,E,S){var K=[u.state.modeGen],Z={};jo(u,g.text,u.doc.mode,E,function(Ne,ft){return K.push(Ne,ft)},Z,S);for(var ue=E.state,be=function(Ne){E.baseTokens=K;var ft=u.state.overlays[Ne],Mt=1,tn=0;E.state=!0,jo(u,g.text,ft.mode,E,function(Yt,wn){for(var Ln=Mt;tn<Yt;){var Hn=K[Mt];Hn>Yt&&K.splice(Mt,1,Yt,K[Mt+1],Hn),Mt+=2,tn=Math.min(Yt,Hn)}if(wn)if(ft.opaque)K.splice(Ln,Mt-Ln,Yt,"overlay "+wn),Mt=Ln+2;else for(;Ln<Mt;Ln+=2){var $n=K[Ln+1];K[Ln+1]=($n?$n+" ":"")+"overlay "+wn}},Z),E.state=ue,E.baseTokens=null,E.baseTokenPos=1},ke=0;ke<u.state.overlays.length;++ke)be(ke);return{styles:K,classes:Z.bgClass||Z.textClass?Z:null}}function Ws(u,g,E){if(!g.styles||g.styles[0]!=u.state.modeGen){var S=di(u,Ve(g)),K=g.text.length>u.options.maxHighlightLength&&pi(u.doc.mode,S.state),Z=_c(u,g,S);K&&(S.state=K),g.stateAfter=S.save(!K),g.styles=Z.styles,Z.classes?g.styleClasses=Z.classes:g.styleClasses&&(g.styleClasses=null),E===u.doc.highlightFrontier&&(u.doc.modeFrontier=Math.max(u.doc.modeFrontier,++u.doc.highlightFrontier))}return g.styles}function di(u,g,E){var S=u.doc,K=u.display;if(!S.mode.startState)return new Ea(S,!0,g);var Z=iA(u,g,E),ue=Z>S.first&&wr(S,Z-1).stateAfter,be=ue?Ea.fromSaved(S,ue,Z):new Ea(S,_l(S.mode),Z);return S.iter(Z,g,function(ke){jr(u,ke.text,be);var Ne=be.line;ke.stateAfter=Ne==g-1||Ne%5==0||Ne>=K.viewFrom&&Ne<K.viewTo?be.save():null,be.nextLine()}),E&&(S.modeFrontier=be.line),be}function jr(u,g,E,S){var K=u.doc.mode,Z=new Ni(g,u.options.tabSize,E);for(Z.start=Z.pos=S||0,g==""&&Ii(K,E.state);!Z.eol();)bl(K,Z,E.state),Z.start=Z.pos}function Ii(u,g){if(u.blankLine)return u.blankLine(g);if(u.innerMode){var E=tA(u,g);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function bl(u,g,E,S){for(var K=0;K<10;K++){S&&(S[0]=tA(u,E).mode);var Z=u.token(g,E);if(g.pos>g.start)return Z}throw new Error("Mode "+u.name+" failed to advance stream.")}var $o=function(u,g,E){this.start=u.start,this.end=u.pos,this.string=u.current(),this.type=g||null,this.state=E};function aa(u,g,E,S){var K=u.doc,Z=K.mode,ue;g=Ci(K,g);var be=wr(K,g.line),ke=di(u,g.line,E),Ne=new Ni(be.text,u.options.tabSize,ke),ft;for(S&&(ft=[]);(S||Ne.pos<g.ch)&&!Ne.eol();)Ne.start=Ne.pos,ue=bl(Z,Ne,ke.state),S&&ft.push(new $o(Ne,ue,pi(K.mode,ke.state)));return S?ft:new $o(Ne,ue,ke.state)}function js(u,g){if(u)for(;;){var E=u.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;u=u.slice(0,E.index)+u.slice(E.index+E[0].length);var S=E[1]?"bgClass":"textClass";g[S]==null?g[S]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(g[S])||(g[S]+=" "+E[2])}return u}function jo(u,g,E,S,K,Z,ue){var be=E.flattenSpans;be==null&&(be=u.options.flattenSpans);var ke=0,Ne=null,ft=new Ni(g,u.options.tabSize,S),Mt,tn=u.options.addModeClass&&[null];for(g==""&&js(Ii(E,S.state),Z);!ft.eol();){if(ft.pos>u.options.maxHighlightLength?(be=!1,ue&&jr(u,g,S,ft.pos),ft.pos=g.length,Mt=null):Mt=js(bl(E,ft,S.state,tn),Z),tn){var Yt=tn[0].name;Yt&&(Mt="m-"+(Mt?Yt+" "+Mt:Yt))}if(!be||Ne!=Mt){for(;ke<ft.start;)ke=Math.min(ft.start,ke+5e3),K(ke,Ne);Ne=Mt}ft.start=ft.pos}for(;ke<ft.pos;){var wn=Math.min(ft.pos,ke+5e3);K(wn,Ne),ke=wn}}function iA(u,g,E){for(var S,K,Z=u.doc,ue=E?-1:g-(u.doc.mode.innerMode?1e3:100),be=g;be>ue;--be){if(be<=Z.first)return Z.first;var ke=wr(Z,be-1),Ne=ke.stateAfter;if(Ne&&(!E||be+(Ne instanceof ma?Ne.lookAhead:0)<=Z.modeFrontier))return be;var ft=Re(ke.text,null,u.options.tabSize);(K==null||S>ft)&&(K=be-1,S=ft)}return K}function ns(u,g){if(u.modeFrontier=Math.min(u.modeFrontier,g),!(u.highlightFrontier<g-10)){for(var E=u.first,S=g-1;S>E;S--){var K=wr(u,S).stateAfter;if(K&&(!(K instanceof ma)||S+K.lookAhead<g)){E=S+1;break}}u.highlightFrontier=Math.min(u.highlightFrontier,E)}}var Qi=!1,_o=!1;function La(){Qi=!0}function Ba(){_o=!0}function uo(u,g,E){this.marker=u,this.from=g,this.to=E}function Gs(u,g){if(u)for(var E=0;E<u.length;++E){var S=u[E];if(S.marker==g)return S}}function oA(u,g){for(var E,S=0;S<u.length;++S)u[S]!=g&&(E||(E=[])).push(u[S]);return E}function el(u,g,E){var S=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));S&&u.markedSpans&&S.has(u.markedSpans)?u.markedSpans.push(g):(u.markedSpans=u.markedSpans?u.markedSpans.concat([g]):[g],S&&S.add(u.markedSpans)),g.marker.attachLine(u)}function Oa(u,g,E){var S;if(u)for(var K=0;K<u.length;++K){var Z=u[K],ue=Z.marker,be=Z.from==null||(ue.inclusiveLeft?Z.from<=g:Z.from<g);if(be||Z.from==g&&ue.type=="bookmark"&&(!E||!Z.marker.insertLeft)){var ke=Z.to==null||(ue.inclusiveRight?Z.to>=g:Z.to>g);(S||(S=[])).push(new uo(ue,Z.from,ke?null:Z.to))}}return S}function wA(u,g,E){var S;if(u)for(var K=0;K<u.length;++K){var Z=u[K],ue=Z.marker,be=Z.to==null||(ue.inclusiveRight?Z.to>=g:Z.to>g);if(be||Z.from==g&&ue.type=="bookmark"&&(!E||Z.marker.insertLeft)){var ke=Z.from==null||(ue.inclusiveLeft?Z.from<=g:Z.from<g);(S||(S=[])).push(new uo(ue,ke?null:Z.from-g,Z.to==null?null:Z.to-g))}}return S}function wi(u,g){if(g.full)return null;var E=xn(u,g.from.line)&&wr(u,g.from.line).markedSpans,S=xn(u,g.to.line)&&wr(u,g.to.line).markedSpans;if(!E&&!S)return null;var K=g.from.ch,Z=g.to.ch,ue=dr(g.from,g.to)==0,be=Oa(E,K,ue),ke=wA(S,Z,ue),Ne=g.text.length==1,ft=Xn(g.text).length+(Ne?K:0);if(be)for(var Mt=0;Mt<be.length;++Mt){var tn=be[Mt];if(tn.to==null){var Yt=Gs(ke,tn.marker);Yt?Ne&&(tn.to=Yt.to==null?null:Yt.to+ft):tn.to=K}}if(ke)for(var wn=0;wn<ke.length;++wn){var Ln=ke[wn];if(Ln.to!=null&&(Ln.to+=ft),Ln.from==null){var Hn=Gs(be,Ln.marker);Hn||(Ln.from=ft,Ne&&(be||(be=[])).push(Ln))}else Ln.from+=ft,Ne&&(be||(be=[])).push(Ln)}be&&(be=XA(be)),ke&&ke!=be&&(ke=XA(ke));var $n=[be];if(!Ne){var gr=g.text.length-2,Ar;if(gr>0&&be)for(var Rr=0;Rr<be.length;++Rr)be[Rr].to==null&&(Ar||(Ar=[])).push(new uo(be[Rr].marker,null,null));for(var ii=0;ii<gr;++ii)$n.push(Ar);$n.push(ke)}return $n}function XA(u){for(var g=0;g<u.length;++g){var E=u[g];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&u.splice(g--,1)}return u.length?u:null}function eo(u,g,E){var S=null;if(u.iter(g.line,E.line+1,function(Yt){if(Yt.markedSpans)for(var wn=0;wn<Yt.markedSpans.length;++wn){var Ln=Yt.markedSpans[wn].marker;Ln.readOnly&&(!S||nt(S,Ln)==-1)&&(S||(S=[])).push(Ln)}}),!S)return null;for(var K=[{from:g,to:E}],Z=0;Z<S.length;++Z)for(var ue=S[Z],be=ue.find(0),ke=0;ke<K.length;++ke){var Ne=K[ke];if(!(dr(Ne.to,be.from)<0||dr(Ne.from,be.to)>0)){var ft=[ke,1],Mt=dr(Ne.from,be.from),tn=dr(Ne.to,be.to);(Mt<0||!ue.inclusiveLeft&&!Mt)&&ft.push({from:Ne.from,to:be.from}),(tn>0||!ue.inclusiveRight&&!tn)&&ft.push({from:be.to,to:Ne.to}),K.splice.apply(K,ft),ke+=ft.length-3}}return K}function Sr(u){var g=u.markedSpans;if(g){for(var E=0;E<g.length;++E)g[E].marker.detachLine(u);u.markedSpans=null}}function no(u,g){if(g){for(var E=0;E<g.length;++E)g[E].marker.attachLine(u);u.markedSpans=g}}function J(u){return u.inclusiveLeft?-1:0}function Be(u){return u.inclusiveRight?1:0}function lt(u,g){var E=u.lines.length-g.lines.length;if(E!=0)return E;var S=u.find(),K=g.find(),Z=dr(S.from,K.from)||J(u)-J(g);if(Z)return-Z;var ue=dr(S.to,K.to)||Be(u)-Be(g);return ue||g.id-u.id}function qt(u,g){var E=_o&&u.markedSpans,S;if(E)for(var K=void 0,Z=0;Z<E.length;++Z)K=E[Z],K.marker.collapsed&&(g?K.from:K.to)==null&&(!S||lt(S,K.marker)<0)&&(S=K.marker);return S}function Br(u){return qt(u,!0)}function Gn(u){return qt(u,!1)}function Zr(u,g){var E=_o&&u.markedSpans,S;if(E)for(var K=0;K<E.length;++K){var Z=E[K];Z.marker.collapsed&&(Z.from==null||Z.from<g)&&(Z.to==null||Z.to>g)&&(!S||lt(S,Z.marker)<0)&&(S=Z.marker)}return S}function oi(u,g,E,S,K){var Z=wr(u,g),ue=_o&&Z.markedSpans;if(ue)for(var be=0;be<ue.length;++be){var ke=ue[be];if(ke.marker.collapsed){var Ne=ke.marker.find(0),ft=dr(Ne.from,E)||J(ke.marker)-J(K),Mt=dr(Ne.to,S)||Be(ke.marker)-Be(K);if(!(ft>=0&&Mt<=0||ft<=0&&Mt>=0)&&(ft<=0&&(ke.marker.inclusiveRight&&K.inclusiveLeft?dr(Ne.to,E)>=0:dr(Ne.to,E)>0)||ft>=0&&(ke.marker.inclusiveRight&&K.inclusiveLeft?dr(Ne.from,S)<=0:dr(Ne.from,S)<0)))return!0}}}function Or(u){for(var g;g=Br(u);)u=g.find(-1,!0).line;return u}function ni(u){for(var g;g=Gn(u);)u=g.find(1,!0).line;return u}function $i(u){for(var g,E;g=Gn(u);)u=g.find(1,!0).line,(E||(E=[])).push(u);return E}function Eo(u,g){var E=wr(u,g),S=Or(E);return E==S?g:Ve(S)}function si(u,g){if(g>u.lastLine())return g;var E=wr(u,g),S;if(!_i(u,E))return g;for(;S=Gn(E);)E=S.find(1,!0).line;return Ve(E)+1}function _i(u,g){var E=_o&&g.markedSpans;if(E){for(var S=void 0,K=0;K<E.length;++K)if(S=E[K],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&Ri(u,g,S))return!0}}}function Ri(u,g,E){if(E.to==null){var S=E.marker.find(1,!0);return Ri(u,S.line,Gs(S.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==g.text.length)return!0;for(var K=void 0,Z=0;Z<g.markedSpans.length;++Z)if(K=g.markedSpans[Z],K.marker.collapsed&&!K.marker.widgetNode&&K.from==E.to&&(K.to==null||K.to!=E.from)&&(K.marker.inclusiveLeft||E.marker.inclusiveRight)&&Ri(u,g,K))return!0}function Yi(u){u=Or(u);for(var g=0,E=u.parent,S=0;S<E.lines.length;++S){var K=E.lines[S];if(K==u)break;g+=K.height}for(var Z=E.parent;Z;E=Z,Z=E.parent)for(var ue=0;ue<Z.children.length;++ue){var be=Z.children[ue];if(be==E)break;g+=be.height}return g}function mi(u){if(u.height==0)return 0;for(var g=u.text.length,E,S=u;E=Br(S);){var K=E.find(0,!0);S=K.from.line,g+=K.from.ch-K.to.ch}for(S=u;E=Gn(S);){var Z=E.find(0,!0);g-=S.text.length-Z.from.ch,S=Z.to.line,g+=S.text.length-Z.to.ch}return g}function Ds(u){var g=u.display,E=u.doc;g.maxLine=wr(E,E.first),g.maxLineLength=mi(g.maxLine),g.maxLineChanged=!0,E.iter(function(S){var K=mi(S);K>g.maxLineLength&&(g.maxLineLength=K,g.maxLine=S)})}var Ua=function(u,g,E){this.text=u,no(this,g),this.height=E?E(this):1};Ua.prototype.lineNo=function(){return Ve(this)},Nt(Ua);function SA(u,g,E,S){u.text=g,u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null),u.order!=null&&(u.order=null),Sr(u),no(u,E);var K=S?S(u):1;K!=u.height&&Rs(u,K)}function As(u){u.parent=null,Sr(u)}var Gh={},fl={};function vd(u,g){if(!u||/^\s*$/.test(u))return null;var E=g.addModeClass?fl:Gh;return E[u]||(E[u]=u.replace(/\S+/g,"cm-$&"))}function mh(u,g){var E=vt("span",null,null,x?"padding-right: .1px":null),S={pre:vt("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:u,trailingSpace:!1,splitSpaces:u.getOption("lineWrapping")};g.measure={};for(var K=0;K<=(g.rest?g.rest.length:0);K++){var Z=K?g.rest[K-1]:g.line,ue=void 0;S.pos=0,S.addToken=EA,yn(u.display.measure)&&(ue=_e(Z,u.doc.direction))&&(S.addToken=rs(S.addToken,ue)),S.map=[];var be=g!=u.display.externalMeasured&&Ve(Z);yh(Z,S,Ws(u,Z,be)),Z.styleClasses&&(Z.styleClasses.bgClass&&(S.bgClass=Le(Z.styleClasses.bgClass,S.bgClass||"")),Z.styleClasses.textClass&&(S.textClass=Le(Z.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(Si(u.display.measure))),K==0?(g.measure.map=S.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(S.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if(x){var ke=S.content.lastChild;(/\bcm-tab\b/.test(ke.className)||ke.querySelector&&ke.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return ut(u,"renderLine",u,g.line,S.pre),S.pre.className&&(S.textClass=Le(S.pre.className,S.textClass||"")),S}function Nu(u){var g=Se("span","","cm-invalidchar");return g.title="\\u"+u.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function EA(u,g,E,S,K,Z,ue){if(g){var be=u.splitSpaces?gh(g,u.trailingSpace):g,ke=u.cm.state.specialChars,Ne=!1,ft;if(!ke.test(g))u.col+=g.length,ft=document.createTextNode(be),u.map.push(u.pos,u.pos+g.length,ft),p&&v<9&&(Ne=!0),u.pos+=g.length;else{ft=document.createDocumentFragment();for(var Mt=0;;){ke.lastIndex=Mt;var tn=ke.exec(g),Yt=tn?tn.index-Mt:g.length-Mt;if(Yt){var wn=document.createTextNode(be.slice(Mt,Mt+Yt));p&&v<9?ft.appendChild(Se("span",[wn])):ft.appendChild(wn),u.map.push(u.pos,u.pos+Yt,wn),u.col+=Yt,u.pos+=Yt}if(!tn)break;Mt+=Yt+1;var Ln=void 0;if(tn[0]=="	"){var Hn=u.cm.options.tabSize,$n=Hn-u.col%Hn;Ln=ft.appendChild(Se("span",nn($n),"cm-tab")),Ln.setAttribute("role","presentation"),Ln.setAttribute("cm-text","	"),u.col+=$n}else tn[0]=="\r"||tn[0]==`
`?(Ln=ft.appendChild(Se("span",tn[0]=="\r"?"":"","cm-invalidchar")),Ln.setAttribute("cm-text",tn[0]),u.col+=1):(Ln=u.cm.options.specialCharPlaceholder(tn[0]),Ln.setAttribute("cm-text",tn[0]),p&&v<9?ft.appendChild(Se("span",[Ln])):ft.appendChild(Ln),u.col+=1);u.map.push(u.pos,u.pos+1,Ln),u.pos++}}if(u.trailingSpace=be.charCodeAt(g.length-1)==32,E||S||K||Ne||Z||ue){var gr=E||"";S&&(gr+=S),K&&(gr+=K);var Ar=Se("span",[ft],gr,Z);if(ue)for(var Rr in ue)ue.hasOwnProperty(Rr)&&Rr!="style"&&Rr!="class"&&Ar.setAttribute(Rr,ue[Rr]);return u.content.appendChild(Ar)}u.content.appendChild(ft)}}function gh(u,g){if(u.length>1&&!/  /.test(u))return u;for(var E=g,S="",K=0;K<u.length;K++){var Z=u.charAt(K);Z==" "&&E&&(K==u.length-1||u.charCodeAt(K+1)==32)&&(Z=""),S+=Z,E=Z==" "}return S}function rs(u,g){return function(E,S,K,Z,ue,be,ke){K=K?K+" cm-force-border":"cm-force-border";for(var Ne=E.pos,ft=Ne+S.length;;){for(var Mt=void 0,tn=0;tn<g.length&&(Mt=g[tn],!(Mt.to>Ne&&Mt.from<=Ne));tn++);if(Mt.to>=ft)return u(E,S,K,Z,ue,be,ke);u(E,S.slice(0,Mt.to-Ne),K,Z,null,be,ke),Z=null,S=S.slice(Mt.to-Ne),Ne=Mt.to}}}function yu(u,g,E,S){var K=!S&&E.widgetNode;K&&u.map.push(u.pos,u.pos+g,K),!S&&u.cm.display.input.needsContentAttribute&&(K||(K=u.content.appendChild(document.createElement("span"))),K.setAttribute("cm-marker",E.id)),K&&(u.cm.display.input.setUneditable(K),u.content.appendChild(K)),u.pos+=g,u.trailingSpace=!1}function yh(u,g,E){var S=u.markedSpans,K=u.text,Z=0;if(!S){for(var ue=1;ue<E.length;ue+=2)g.addToken(g,K.slice(Z,Z=E[ue]),vd(E[ue+1],g.cm.options));return}for(var be=K.length,ke=0,Ne=1,ft="",Mt,tn,Yt=0,wn,Ln,Hn,$n,gr;;){if(Yt==ke){wn=Ln=Hn=tn="",gr=null,$n=null,Yt=1/0;for(var Ar=[],Rr=void 0,ii=0;ii<S.length;++ii){var kr=S[ii],ro=kr.marker;if(ro.type=="bookmark"&&kr.from==ke&&ro.widgetNode)Ar.push(ro);else if(kr.from<=ke&&(kr.to==null||kr.to>ke||ro.collapsed&&kr.to==ke&&kr.from==ke)){if(kr.to!=null&&kr.to!=ke&&Yt>kr.to&&(Yt=kr.to,Ln=""),ro.className&&(wn+=" "+ro.className),ro.css&&(tn=(tn?tn+";":"")+ro.css),ro.startStyle&&kr.from==ke&&(Hn+=" "+ro.startStyle),ro.endStyle&&kr.to==Yt&&(Rr||(Rr=[])).push(ro.endStyle,kr.to),ro.title&&((gr||(gr={})).title=ro.title),ro.attributes)for(var Oo in ro.attributes)(gr||(gr={}))[Oo]=ro.attributes[Oo];ro.collapsed&&(!$n||lt($n.marker,ro)<0)&&($n=kr)}else kr.from>ke&&Yt>kr.from&&(Yt=kr.from)}if(Rr)for(var ra=0;ra<Rr.length;ra+=2)Rr[ra+1]==Yt&&(Ln+=" "+Rr[ra]);if(!$n||$n.from==ke)for(var Ls=0;Ls<Ar.length;++Ls)yu(g,0,Ar[Ls]);if($n&&($n.from||0)==ke){if(yu(g,($n.to==null?be+1:$n.to)-ke,$n.marker,$n.from==null),$n.to==null)return;$n.to==ke&&($n=!1)}}if(ke>=be)break;for(var Aa=Math.min(be,Yt);;){if(ft){var ka=ke+ft.length;if(!$n){var Ya=ka>Aa?ft.slice(0,Aa-ke):ft;g.addToken(g,Ya,Mt?Mt+wn:wn,Hn,ke+Ya.length==Yt?Ln:"",tn,gr)}if(ka>=Aa){ft=ft.slice(Aa-ke),ke=Aa;break}ke=ka,Hn=""}ft=K.slice(Z,Z=E[Ne++]),Mt=vd(E[Ne++],g.cm.options)}}}function tf(u,g,E){this.line=g,this.rest=$i(g),this.size=this.rest?Ve(Xn(this.rest))-E+1:1,this.node=this.text=null,this.hidden=_i(u,g)}function sA(u,g,E){for(var S=[],K,Z=g;Z<E;Z=K){var ue=new tf(u.doc,wr(u.doc,Z),Z);K=Z+ue.size,S.push(ue)}return S}var Qh=null;function nf(u){Qh?Qh.ops.push(u):u.ownsGroup=Qh={ops:[u],delayedCallbacks:[]}}function Vc(u){var g=u.delayedCallbacks,E=0;do{for(;E<g.length;E++)g[E].call(null);for(var S=0;S<u.ops.length;S++){var K=u.ops[S];if(K.cursorActivityHandlers)for(;K.cursorActivityCalled<K.cursorActivityHandlers.length;)K.cursorActivityHandlers[K.cursorActivityCalled++].call(null,K.cm)}}while(E<g.length)}function Yh(u,g){var E=u.ownsGroup;if(E)try{Vc(E)}finally{Qh=null,g(E)}}var bc=null;function xs(u,g){var E=Ee(u,g);if(E.length){var S=Array.prototype.slice.call(arguments,2),K;Qh?K=Qh.delayedCallbacks:bc?K=bc:(K=bc=[],setTimeout(Wf,0));for(var Z=function(be){K.push(function(){return E[be].apply(null,S)})},ue=0;ue<E.length;++ue)Z(ue)}}function Wf(){var u=bc;bc=null;for(var g=0;g<u.length;++g)u[g]()}function xc(u,g,E,S){for(var K=0;K<g.changes.length;K++){var Z=g.changes[K];Z=="text"?jf(u,g):Z=="gutter"?Vh(u,g,E,S):Z=="class"?_d(u,g):Z=="widget"&&bd(u,g,S)}g.changes=null}function qh(u){return u.node==u.text&&(u.node=Se("div",null,null,"position: relative"),u.text.parentNode&&u.text.parentNode.replaceChild(u.node,u.text),u.node.appendChild(u.text),p&&v<8&&(u.node.style.zIndex=2)),u.node}function rf(u,g){var E=g.bgClass?g.bgClass+" "+(g.line.bgClass||""):g.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),g.background)E?g.background.className=E:(g.background.parentNode.removeChild(g.background),g.background=null);else if(E){var S=qh(g);g.background=S.insertBefore(Se("div",null,E),S.firstChild),u.display.input.setUneditable(g.background)}}function Cd(u,g){var E=u.display.externalMeasured;return E&&E.line==g.line?(u.display.externalMeasured=null,g.measure=E.measure,E.built):mh(u,g)}function jf(u,g){var E=g.text.className,S=Cd(u,g);g.text==g.node&&(g.node=S.pre),g.text.parentNode.replaceChild(S.pre,g.text),g.text=S.pre,S.bgClass!=g.bgClass||S.textClass!=g.textClass?(g.bgClass=S.bgClass,g.textClass=S.textClass,_d(u,g)):E&&(g.text.className=E)}function _d(u,g){rf(u,g),g.line.wrapClass?qh(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var E=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=E||""}function Vh(u,g,E,S){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var K=qh(g);g.gutterBackground=Se("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(u.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),u.display.input.setUneditable(g.gutterBackground),K.insertBefore(g.gutterBackground,g.text)}var Z=g.line.gutterMarkers;if(u.options.lineNumbers||Z){var ue=qh(g),be=g.gutter=Se("div",null,"CodeMirror-gutter-wrapper","left: "+(u.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(be.setAttribute("aria-hidden","true"),u.display.input.setUneditable(be),ue.insertBefore(be,g.text),g.line.gutterClass&&(be.className+=" "+g.line.gutterClass),u.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(g.lineNumber=be.appendChild(Se("div",Yn(u.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.display.lineNumInnerWidth+"px"))),Z)for(var ke=0;ke<u.display.gutterSpecs.length;++ke){var Ne=u.display.gutterSpecs[ke].className,ft=Z.hasOwnProperty(Ne)&&Z[Ne];ft&&be.appendChild(Se("div",[ft],"CodeMirror-gutter-elt","left: "+S.gutterLeft[Ne]+"px; width: "+S.gutterWidth[Ne]+"px"))}}}function bd(u,g,E){g.alignable&&(g.alignable=null);for(var S=Me("CodeMirror-linewidget"),K=g.node.firstChild,Z=void 0;K;K=Z)Z=K.nextSibling,S.test(K.className)&&g.node.removeChild(K);of(u,g,E)}function Gf(u,g,E,S){var K=Cd(u,g);return g.text=g.node=K.pre,K.bgClass&&(g.bgClass=K.bgClass),K.textClass&&(g.textClass=K.textClass),_d(u,g),Vh(u,g,E,S),of(u,g,S),g.node}function of(u,g,E){if(za(u,g.line,g,E,!0),g.rest)for(var S=0;S<g.rest.length;S++)za(u,g.rest[S],g,E,!1)}function za(u,g,E,S,K){if(g.widgets)for(var Z=qh(E),ue=0,be=g.widgets;ue<be.length;++ue){var ke=be[ue],Ne=Se("div",[ke.node],"CodeMirror-linewidget"+(ke.className?" "+ke.className:""));ke.handleMouseEvents||Ne.setAttribute("cm-ignore-events","true"),Hh(ke,Ne,E,S),u.display.input.setUneditable(Ne),K&&ke.above?Z.insertBefore(Ne,E.gutter||E.text):Z.appendChild(Ne),xs(ke,"redraw")}}function Hh(u,g,E,S){if(u.noHScroll){(E.alignable||(E.alignable=[])).push(g);var K=S.wrapperWidth;g.style.left=S.fixedPos+"px",u.coverGutter||(K-=S.gutterTotalWidth,g.style.paddingLeft=S.gutterTotalWidth+"px"),g.style.width=K+"px"}u.coverGutter&&(g.style.zIndex=5,g.style.position="relative",u.noHScroll||(g.style.marginLeft=-S.gutterTotalWidth+"px"))}function zl(u){if(u.height!=null)return u.height;var g=u.doc.cm;if(!g)return 0;if(!Ke(document.body,u.node)){var E="position: relative;";u.coverGutter&&(E+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),u.noHScroll&&(E+="width: "+g.display.wrapper.clientWidth+"px;"),qe(g.display.measure,Se("div",[u.node],null,E))}return u.height=u.node.parentNode.offsetHeight}function BA(u,g){for(var E=Tr(g);E!=u.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==u.sizer&&E!=u.mover)return!0}function $h(u){return u.lineSpace.offsetTop}function vh(u){return u.mover.offsetHeight-u.lineSpace.offsetHeight}function sf(u){if(u.cachedPaddingH)return u.cachedPaddingH;var g=qe(u.measure,Se("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,S={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(u.cachedPaddingH=S),S}function vu(u){return _t-u.display.nativeBarWidth}function Mc(u){return u.display.scroller.clientWidth-vu(u)-u.display.barWidth}function wc(u){return u.display.scroller.clientHeight-vu(u)-u.display.barHeight}function Hc(u,g,E){var S=u.options.lineWrapping,K=S&&Mc(u);if(!g.measure.heights||S&&g.measure.width!=K){var Z=g.measure.heights=[];if(S){g.measure.width=K;for(var ue=g.text.firstChild.getClientRects(),be=0;be<ue.length-1;be++){var ke=ue[be],Ne=ue[be+1];Math.abs(ke.bottom-Ne.bottom)>2&&Z.push((ke.bottom+Ne.top)/2-E.top)}}Z.push(E.bottom-E.top)}}function xd(u,g,E){if(u.line==g)return{map:u.measure.map,cache:u.measure.cache};if(u.rest){for(var S=0;S<u.rest.length;S++)if(u.rest[S]==g)return{map:u.measure.maps[S],cache:u.measure.caches[S]};for(var K=0;K<u.rest.length;K++)if(Ve(u.rest[K])>E)return{map:u.measure.maps[K],cache:u.measure.caches[K],before:!0}}}function Ip(u,g){g=Or(g);var E=Ve(g),S=u.display.externalMeasured=new tf(u.doc,g,E);S.lineN=E;var K=S.built=mh(u,S);return S.text=K.pre,qe(u.display.lineMeasure,K.pre),S}function $c(u,g,E,S){return tl(u,Na(u,g),E,S)}function JA(u,g){if(g>=u.display.viewFrom&&g<u.display.viewTo)return u.display.view[Xi(u,g)];var E=u.display.externalMeasured;if(E&&g>=E.lineN&&g<E.lineN+E.size)return E}function Na(u,g){var E=Ve(g),S=JA(u,E);S&&!S.text?S=null:S&&S.changes&&(xc(u,S,E,Xc(u)),u.curOp.forceUpdate=!0),S||(S=Ip(u,g));var K=xd(S,g,E);return{line:g,view:S,rect:null,map:K.map,cache:K.cache,before:K.before,hasHeights:!1}}function tl(u,g,E,S,K){g.before&&(E=-1);var Z=E+(S||""),ue;return g.cache.hasOwnProperty(Z)?ue=g.cache[Z]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(Hc(u,g.view,g.rect),g.hasHeights=!0),ue=Zi(u,g,E,S),ue.bogus||(g.cache[Z]=ue)),{left:ue.left,right:ue.right,top:K?ue.rtop:ue.top,bottom:K?ue.rbottom:ue.bottom}}var af={left:0,right:0,top:0,bottom:0};function Zh(u,g,E){for(var S,K,Z,ue,be,ke,Ne=0;Ne<u.length;Ne+=3)if(be=u[Ne],ke=u[Ne+1],g<be?(K=0,Z=1,ue="left"):g<ke?(K=g-be,Z=K+1):(Ne==u.length-3||g==ke&&u[Ne+3]>g)&&(Z=ke-be,K=Z-1,g>=ke&&(ue="right")),K!=null){if(S=u[Ne+2],be==ke&&E==(S.insertLeft?"left":"right")&&(ue=E),E=="left"&&K==0)for(;Ne&&u[Ne-2]==u[Ne-3]&&u[Ne-1].insertLeft;)S=u[(Ne-=3)+2],ue="left";if(E=="right"&&K==ke-be)for(;Ne<u.length-3&&u[Ne+3]==u[Ne+4]&&!u[Ne+5].insertLeft;)S=u[(Ne+=3)+2],ue="right";break}return{node:S,start:K,end:Z,collapse:ue,coverStart:be,coverEnd:ke}}function Qf(u,g){var E=af;if(g=="left")for(var S=0;S<u.length&&(E=u[S]).left==E.right;S++);else for(var K=u.length-1;K>=0&&(E=u[K]).left==E.right;K--);return E}function Zi(u,g,E,S){var K=Zh(g.map,E,S),Z=K.node,ue=K.start,be=K.end,ke=K.collapse,Ne;if(Z.nodeType==3){for(var ft=0;ft<4;ft++){for(;ue&&rt(g.line.text.charAt(K.coverStart+ue));)--ue;for(;K.coverStart+be<K.coverEnd&&rt(g.line.text.charAt(K.coverStart+be));)++be;if(p&&v<9&&ue==0&&be==K.coverEnd-K.coverStart?Ne=Z.parentNode.getBoundingClientRect():Ne=Qf(Je(Z,ue,be).getClientRects(),S),Ne.left||Ne.right||ue==0)break;be=ue,ue=ue-1,ke="right"}p&&v<11&&(Ne=aA(u.display.measure,Ne))}else{ue>0&&(ke=S="right");var Mt;u.options.lineWrapping&&(Mt=Z.getClientRects()).length>1?Ne=Mt[S=="right"?Mt.length-1:0]:Ne=Z.getBoundingClientRect()}if(p&&v<9&&!ue&&(!Ne||!Ne.left&&!Ne.right)){var tn=Z.parentNode.getClientRects()[0];tn?Ne={left:tn.left,right:tn.left+OA(u.display),top:tn.top,bottom:tn.bottom}:Ne=af}for(var Yt=Ne.top-g.rect.top,wn=Ne.bottom-g.rect.top,Ln=(Yt+wn)/2,Hn=g.view.measure.heights,$n=0;$n<Hn.length-1&&!(Ln<Hn[$n]);$n++);var gr=$n?Hn[$n-1]:0,Ar=Hn[$n],Rr={left:(ke=="right"?Ne.right:Ne.left)-g.rect.left,right:(ke=="left"?Ne.left:Ne.right)-g.rect.left,top:gr,bottom:Ar};return!Ne.left&&!Ne.right&&(Rr.bogus=!0),u.options.singleCursorHeightPerLine||(Rr.rtop=Yt,Rr.rbottom=wn),Rr}function aA(u,g){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ui(u))return g;var E=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*E,right:g.right*E,top:g.top*S,bottom:g.bottom*S}}function Md(u){if(u.measure&&(u.measure.cache={},u.measure.heights=null,u.rest))for(var g=0;g<u.rest.length;g++)u.measure.caches[g]={}}function Yf(u){u.display.externalMeasure=null,pe(u.display.lineMeasure);for(var g=0;g<u.display.view.length;g++)Md(u.display.view[g])}function Xh(u){Yf(u),u.display.cachedCharWidth=u.display.cachedTextHeight=u.display.cachedPaddingH=null,u.options.lineWrapping||(u.display.maxLineChanged=!0),u.display.lineNumChars=null}function qf(u){return k&&ie?-(u.body.getBoundingClientRect().left-parseInt(getComputedStyle(u.body).marginLeft)):u.defaultView.pageXOffset||(u.documentElement||u.body).scrollLeft}function Vf(u){return k&&ie?-(u.body.getBoundingClientRect().top-parseInt(getComputedStyle(u.body).marginTop)):u.defaultView.pageYOffset||(u.documentElement||u.body).scrollTop}function Hf(u){var g=Or(u),E=g.widgets,S=0;if(E)for(var K=0;K<E.length;++K)E[K].above&&(S+=zl(E[K]));return S}function oc(u,g,E,S,K){if(!K){var Z=Hf(g);E.top+=Z,E.bottom+=Z}if(S=="line")return E;S||(S="local");var ue=Yi(g);if(S=="local"?ue+=$h(u.display):ue-=u.display.viewOffset,S=="page"||S=="window"){var be=u.display.lineSpace.getBoundingClientRect();ue+=be.top+(S=="window"?0:Vf(Ct(u)));var ke=be.left+(S=="window"?0:qf(Ct(u)));E.left+=ke,E.right+=ke}return E.top+=ue,E.bottom+=ue,E}function en(u,g,E){if(E=="div")return g;var S=g.left,K=g.top;if(E=="page")S-=qf(Ct(u)),K-=Vf(Ct(u));else if(E=="local"||!E){var Z=u.display.sizer.getBoundingClientRect();S+=Z.left,K+=Z.top}var ue=u.display.lineSpace.getBoundingClientRect();return{left:S-ue.left,top:K-ue.top}}function Tn(u,g,E,S,K){return S||(S=wr(u.doc,g.line)),oc(u,S,$c(u,S,g.ch,K),E)}function un(u,g,E,S,K,Z){S=S||wr(u.doc,g.line),K||(K=Na(u,S));function ue(wn,Ln){var Hn=tl(u,K,wn,Ln?"right":"left",Z);return Ln?Hn.left=Hn.right:Hn.right=Hn.left,oc(u,S,Hn,E)}var be=_e(S,u.doc.direction),ke=g.ch,Ne=g.sticky;if(ke>=S.text.length?(ke=S.text.length,Ne="before"):ke<=0&&(ke=0,Ne="after"),!be)return ue(Ne=="before"?ke-1:ke,Ne=="before");function ft(wn,Ln,Hn){var $n=be[Ln],gr=$n.level==1;return ue(Hn?wn-1:wn,gr!=Hn)}var Mt=He(be,ke,Ne),tn=Jn,Yt=ft(ke,Mt,Ne=="before");return tn!=null&&(Yt.other=ft(ke,tn,Ne!="before")),Yt}function Kr(u,g){var E=0;g=Ci(u.doc,g),u.options.lineWrapping||(E=OA(u.display)*g.ch);var S=wr(u.doc,g.line),K=Yi(S)+$h(u.display);return{left:E,right:E,top:K,bottom:K+S.height}}function Ei(u,g,E,S,K){var Z=fn(u,g,E);return Z.xRel=K,S&&(Z.outside=S),Z}function po(u,g,E){var S=u.doc;if(E+=u.display.viewOffset,E<0)return Ei(S.first,0,null,-1,-1);var K=xt(S,E),Z=S.first+S.size-1;if(K>Z)return Ei(S.first+S.size-1,wr(S,Z).text.length,null,1,1);g<0&&(g=0);for(var ue=wr(S,K);;){var be=$f(u,ue,K,g,E),ke=Zr(ue,be.ch+(be.xRel>0||be.outside>0?1:0));if(!ke)return be;var Ne=ke.find(1);if(Ne.line==K)return Ne;ue=wr(S,K=Ne.line)}}function Zo(u,g,E,S){S-=Hf(g);var K=g.text.length,Z=Ht(function(ue){return tl(u,E,ue-1).bottom<=S},K,0);return K=Ht(function(ue){return tl(u,E,ue).top>S},Z,K),{begin:Z,end:K}}function us(u,g,E,S){E||(E=Na(u,g));var K=oc(u,g,tl(u,E,S),"line").top;return Zo(u,g,E,K)}function Zc(u,g,E,S){return u.bottom<=E?!1:u.top>E?!0:(S?u.left:u.right)>g}function $f(u,g,E,S,K){K-=Yi(g);var Z=Na(u,g),ue=Hf(g),be=0,ke=g.text.length,Ne=!0,ft=_e(g,u.doc.direction);if(ft){var Mt=(u.options.lineWrapping?Cu:pl)(u,g,E,Z,ft,S,K);Ne=Mt.level!=1,be=Ne?Mt.from:Mt.to-1,ke=Ne?Mt.to:Mt.from-1}var tn=null,Yt=null,wn=Ht(function(ii){var kr=tl(u,Z,ii);return kr.top+=ue,kr.bottom+=ue,Zc(kr,S,K,!1)?(kr.top<=K&&kr.left<=S&&(tn=ii,Yt=kr),!0):!1},be,ke),Ln,Hn,$n=!1;if(Yt){var gr=S-Yt.left<Yt.right-S,Ar=gr==Ne;wn=tn+(Ar?0:1),Hn=Ar?"after":"before",Ln=gr?Yt.left:Yt.right}else{!Ne&&(wn==ke||wn==be)&&wn++,Hn=wn==0?"after":wn==g.text.length?"before":tl(u,Z,wn-(Ne?1:0)).bottom+ue<=K==Ne?"after":"before";var Rr=un(u,fn(E,wn,Hn),"line",g,Z);Ln=Rr.left,$n=K<Rr.top?-1:K>=Rr.bottom?1:0}return wn=Et(g.text,wn,1),Ei(E,wn,Hn,$n,S-Ln)}function pl(u,g,E,S,K,Z,ue){var be=Ht(function(Mt){var tn=K[Mt],Yt=tn.level!=1;return Zc(un(u,fn(E,Yt?tn.to:tn.from,Yt?"before":"after"),"line",g,S),Z,ue,!0)},0,K.length-1),ke=K[be];if(be>0){var Ne=ke.level!=1,ft=un(u,fn(E,Ne?ke.from:ke.to,Ne?"after":"before"),"line",g,S);Zc(ft,Z,ue,!0)&&ft.top>ue&&(ke=K[be-1])}return ke}function Cu(u,g,E,S,K,Z,ue){var be=Zo(u,g,S,ue),ke=be.begin,Ne=be.end;/\s/.test(g.text.charAt(Ne-1))&&Ne--;for(var ft=null,Mt=null,tn=0;tn<K.length;tn++){var Yt=K[tn];if(!(Yt.from>=Ne||Yt.to<=ke)){var wn=Yt.level!=1,Ln=tl(u,S,wn?Math.min(Ne,Yt.to)-1:Math.max(ke,Yt.from)).right,Hn=Ln<Z?Z-Ln+1e9:Ln-Z;(!ft||Mt>Hn)&&(ft=Yt,Mt=Hn)}}return ft||(ft=K[K.length-1]),ft.from<ke&&(ft={from:ke,to:ft.to,level:ft.level}),ft.to>Ne&&(ft={from:ft.from,to:Ne,level:ft.level}),ft}var _u;function nl(u){if(u.cachedTextHeight!=null)return u.cachedTextHeight;if(_u==null){_u=Se("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)_u.appendChild(document.createTextNode("x")),_u.appendChild(Se("br"));_u.appendChild(document.createTextNode("x"))}qe(u.measure,_u);var E=_u.offsetHeight/50;return E>3&&(u.cachedTextHeight=E),pe(u.measure),E||1}function OA(u){if(u.cachedCharWidth!=null)return u.cachedCharWidth;var g=Se("span","xxxxxxxxxx"),E=Se("pre",[g],"CodeMirror-line-like");qe(u.measure,E);var S=g.getBoundingClientRect(),K=(S.right-S.left)/10;return K>2&&(u.cachedCharWidth=K),K||10}function Xc(u){for(var g=u.display,E={},S={},K=g.gutters.clientLeft,Z=g.gutters.firstChild,ue=0;Z;Z=Z.nextSibling,++ue){var be=u.display.gutterSpecs[ue].className;E[be]=Z.offsetLeft+Z.clientLeft+K,S[be]=Z.clientWidth}return{fixedPos:mo(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:E,gutterWidth:S,wrapperWidth:g.wrapper.clientWidth}}function mo(u){return u.scroller.getBoundingClientRect().left-u.sizer.getBoundingClientRect().left}function bu(u){var g=nl(u.display),E=u.options.lineWrapping,S=E&&Math.max(5,u.display.scroller.clientWidth/OA(u.display)-3);return function(K){if(_i(u.doc,K))return 0;var Z=0;if(K.widgets)for(var ue=0;ue<K.widgets.length;ue++)K.widgets[ue].height&&(Z+=K.widgets[ue].height);return E?Z+(Math.ceil(K.text.length/S)||1)*g:Z+g}}function Ch(u){var g=u.doc,E=bu(u);g.iter(function(S){var K=E(S);K!=S.height&&Rs(S,K)})}function eu(u,g,E,S){var K=u.display;if(!E&&Tr(g).getAttribute("cm-not-content")=="true")return null;var Z,ue,be=K.lineSpace.getBoundingClientRect();try{Z=g.clientX-be.left,ue=g.clientY-be.top}catch{return null}var ke=po(u,Z,ue),Ne;if(S&&ke.xRel>0&&(Ne=wr(u.doc,ke.line).text).length==ke.ch){var ft=Re(Ne,Ne.length,u.options.tabSize)-Ne.length;ke=fn(ke.line,Math.max(0,Math.round((Z-sf(u.display).left)/OA(u.display))-ft))}return ke}function Xi(u,g){if(g>=u.display.viewTo||(g-=u.display.viewFrom,g<0))return null;for(var E=u.display.view,S=0;S<E.length;S++)if(g-=E[S].size,g<0)return S}function rl(u,g,E,S){g==null&&(g=u.doc.first),E==null&&(E=u.doc.first+u.doc.size),S||(S=0);var K=u.display;if(S&&E<K.viewTo&&(K.updateLineNumbers==null||K.updateLineNumbers>g)&&(K.updateLineNumbers=g),u.curOp.viewChanged=!0,g>=K.viewTo)_o&&Eo(u.doc,g)<K.viewTo&&lA(u);else if(E<=K.viewFrom)_o&&si(u.doc,E+S)>K.viewFrom?lA(u):(K.viewFrom+=S,K.viewTo+=S);else if(g<=K.viewFrom&&E>=K.viewTo)lA(u);else if(g<=K.viewFrom){var Z=Nl(u,E,E+S,1);Z?(K.view=K.view.slice(Z.index),K.viewFrom=Z.lineN,K.viewTo+=S):lA(u)}else if(E>=K.viewTo){var ue=Nl(u,g,g,-1);ue?(K.view=K.view.slice(0,ue.index),K.viewTo=ue.lineN):lA(u)}else{var be=Nl(u,g,g,-1),ke=Nl(u,E,E+S,1);be&&ke?(K.view=K.view.slice(0,be.index).concat(sA(u,be.lineN,ke.lineN)).concat(K.view.slice(ke.index)),K.viewTo+=S):lA(u)}var Ne=K.externalMeasured;Ne&&(E<Ne.lineN?Ne.lineN+=S:g<Ne.lineN+Ne.size&&(K.externalMeasured=null))}function Sc(u,g,E){u.curOp.viewChanged=!0;var S=u.display,K=u.display.externalMeasured;if(K&&g>=K.lineN&&g<K.lineN+K.size&&(S.externalMeasured=null),!(g<S.viewFrom||g>=S.viewTo)){var Z=S.view[Xi(u,g)];if(Z.node!=null){var ue=Z.changes||(Z.changes=[]);nt(ue,E)==-1&&ue.push(E)}}}function lA(u){u.display.viewFrom=u.display.viewTo=u.doc.first,u.display.view=[],u.display.viewOffset=0}function Nl(u,g,E,S){var K=Xi(u,g),Z,ue=u.display.view;if(!_o||E==u.doc.first+u.doc.size)return{index:K,lineN:E};for(var be=u.display.viewFrom,ke=0;ke<K;ke++)be+=ue[ke].size;if(be!=g){if(S>0){if(K==ue.length-1)return null;Z=be+ue[K].size-g,K++}else Z=be-g;g+=Z,E+=Z}for(;Eo(u.doc,E)!=E;){if(K==(S<0?0:ue.length-1))return null;E+=S*ue[K-(S<0?1:0)].size,K+=S}return{index:K,lineN:E}}function wd(u,g,E){var S=u.display,K=S.view;K.length==0||g>=S.viewTo||E<=S.viewFrom?(S.view=sA(u,g,E),S.viewFrom=g):(S.viewFrom>g?S.view=sA(u,g,S.viewFrom).concat(S.view):S.viewFrom<g&&(S.view=S.view.slice(Xi(u,g))),S.viewFrom=g,S.viewTo<E?S.view=S.view.concat(sA(u,S.viewTo,E)):S.viewTo>E&&(S.view=S.view.slice(0,Xi(u,E)))),S.viewTo=E}function lf(u){for(var g=u.display.view,E=0,S=0;S<g.length;S++){var K=g[S];!K.hidden&&(!K.node||K.changes)&&++E}return E}function xl(u){u.display.input.showSelection(u.display.input.prepareSelection())}function Sd(u,g){g===void 0&&(g=!0);var E=u.doc,S={},K=S.cursors=document.createDocumentFragment(),Z=S.selection=document.createDocumentFragment(),ue=u.options.$customCursor;ue&&(g=!0);for(var be=0;be<E.sel.ranges.length;be++)if(!(!g&&be==E.sel.primIndex)){var ke=E.sel.ranges[be];if(!(ke.from().line>=u.display.viewTo||ke.to().line<u.display.viewFrom)){var Ne=ke.empty();if(ue){var ft=ue(u,ke);ft&&Jc(u,ft,K)}else(Ne||u.options.showCursorWhenSelecting)&&Jc(u,ke.head,K);Ne||Jh(u,ke,Z)}}return S}function Jc(u,g,E){var S=un(u,g,"div",null,null,!u.options.singleCursorHeightPerLine),K=E.appendChild(Se("div","","CodeMirror-cursor"));if(K.style.left=S.left+"px",K.style.top=S.top+"px",K.style.height=Math.max(0,S.bottom-S.top)*u.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(u.getWrapperElement().className)){var Z=Tn(u,g,"div",null,null),ue=Z.right-Z.left;K.style.width=(ue>0?ue:u.defaultCharWidth())+"px"}if(S.other){var be=E.appendChild(Se("div","","CodeMirror-cursor CodeMirror-secondarycursor"));be.style.display="",be.style.left=S.other.left+"px",be.style.top=S.other.top+"px",be.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function tu(u,g){return u.top-g.top||u.left-g.left}function Jh(u,g,E){var S=u.display,K=u.doc,Z=document.createDocumentFragment(),ue=sf(u.display),be=ue.left,ke=Math.max(S.sizerWidth,Mc(u)-S.sizer.offsetLeft)-ue.right,Ne=K.direction=="ltr";function ft(Ar,Rr,ii,kr){Rr<0&&(Rr=0),Rr=Math.round(Rr),kr=Math.round(kr),Z.appendChild(Se("div",null,"CodeMirror-selected","position: absolute; left: "+Ar+`px;
                             top: `+Rr+"px; width: "+(ii??ke-Ar)+`px;
                             height: `+(kr-Rr)+"px"))}function Mt(Ar,Rr,ii){var kr=wr(K,Ar),ro=kr.text.length,Oo,ra;function Ls(Ya,UA){return Tn(u,fn(Ar,Ya),"div",kr,UA)}function Aa(Ya,UA,ll){var qa=us(u,kr,null,Ya),cs=UA=="ltr"==(ll=="after")?"left":"right",bi=ll=="after"?qa.begin:qa.end-(/\s/.test(kr.text.charAt(qa.end-1))?2:1);return Ls(bi,cs)[cs]}var ka=_e(kr,K.direction);return Zt(ka,Rr||0,ii??ro,function(Ya,UA,ll,qa){var cs=ll=="ltr",bi=Ls(Ya,cs?"left":"right"),ss=Ls(UA-1,cs?"right":"left"),Vs=Rr==null&&Ya==0,ua=ii==null&&UA==ro,gs=qa==0,zA=!ka||qa==ka.length-1;if(ss.top-bi.top<=3){var Io=(Ne?Vs:ua)&&gs,Ah=(Ne?ua:Vs)&&zA,gA=Io?be:(cs?bi:ss).left,dc=Ah?ke:(cs?ss:bi).right;ft(gA,bi.top,dc-gA,bi.bottom)}else{var Fc,xa,Pl,Kd;cs?(Fc=Ne&&Vs&&gs?be:bi.left,xa=Ne?ke:Aa(Ya,ll,"before"),Pl=Ne?be:Aa(UA,ll,"after"),Kd=Ne&&ua&&zA?ke:ss.right):(Fc=Ne?Aa(Ya,ll,"before"):be,xa=!Ne&&Vs&&gs?ke:bi.right,Pl=!Ne&&ua&&zA?be:ss.left,Kd=Ne?Aa(UA,ll,"after"):ke),ft(Fc,bi.top,xa-Fc,bi.bottom),bi.bottom<ss.top&&ft(be,bi.bottom,null,ss.top),ft(Pl,ss.top,Kd-Pl,ss.bottom)}(!Oo||tu(bi,Oo)<0)&&(Oo=bi),tu(ss,Oo)<0&&(Oo=ss),(!ra||tu(bi,ra)<0)&&(ra=bi),tu(ss,ra)<0&&(ra=ss)}),{start:Oo,end:ra}}var tn=g.from(),Yt=g.to();if(tn.line==Yt.line)Mt(tn.line,tn.ch,Yt.ch);else{var wn=wr(K,tn.line),Ln=wr(K,Yt.line),Hn=Or(wn)==Or(Ln),$n=Mt(tn.line,tn.ch,Hn?wn.text.length+1:null).end,gr=Mt(Yt.line,Hn?0:null,Yt.ch).start;Hn&&($n.top<gr.top-2?(ft($n.right,$n.top,null,$n.bottom),ft(be,gr.top,gr.left,gr.bottom)):ft($n.right,$n.top,gr.left-$n.right,$n.bottom)),$n.bottom<gr.top&&ft(be,$n.bottom,null,gr.top)}E.appendChild(Z)}function nu(u){if(u.state.focused){var g=u.display;clearInterval(g.blinker);var E=!0;g.cursorDiv.style.visibility="",u.options.cursorBlinkRate>0?g.blinker=setInterval(function(){u.hasFocus()||Go(u),g.cursorDiv.style.visibility=(E=!E)?"":"hidden"},u.options.cursorBlinkRate):u.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function sc(u){u.hasFocus()||(u.display.input.focus(),u.state.focused||_h(u))}function eh(u){u.state.delayingBlurEvent=!0,setTimeout(function(){u.state.delayingBlurEvent&&(u.state.delayingBlurEvent=!1,u.state.focused&&Go(u))},100)}function _h(u,g){u.state.delayingBlurEvent&&!u.state.draggingText&&(u.state.delayingBlurEvent=!1),u.options.readOnly!="nocursor"&&(u.state.focused||(ut(u,"focus",u,g),u.state.focused=!0,Pe(u.display.wrapper,"CodeMirror-focused"),!u.curOp&&u.display.selForContextMenu!=u.doc.sel&&(u.display.input.reset(),x&&setTimeout(function(){return u.display.input.reset(!0)},20)),u.display.input.receivedFocus()),nu(u))}function Go(u,g){u.state.delayingBlurEvent||(u.state.focused&&(ut(u,"blur",u,g),u.state.focused=!1,me(u.display.wrapper,"CodeMirror-focused")),clearInterval(u.display.blinker),setTimeout(function(){u.state.focused||(u.display.shift=!1)},150))}function Ec(u){for(var g=u.display,E=g.lineDiv.offsetTop,S=Math.max(0,g.scroller.getBoundingClientRect().top),K=g.lineDiv.getBoundingClientRect().top,Z=0,ue=0;ue<g.view.length;ue++){var be=g.view[ue],ke=u.options.lineWrapping,Ne=void 0,ft=0;if(!be.hidden){if(K+=be.line.height,p&&v<8){var Mt=be.node.offsetTop+be.node.offsetHeight;Ne=Mt-E,E=Mt}else{var tn=be.node.getBoundingClientRect();Ne=tn.bottom-tn.top,!ke&&be.text.firstChild&&(ft=be.text.firstChild.getBoundingClientRect().right-tn.left-1)}var Yt=be.line.height-Ne;if((Yt>.005||Yt<-.005)&&(K<S&&(Z-=Yt),Rs(be.line,Ne),Bc(be.line),be.rest))for(var wn=0;wn<be.rest.length;wn++)Bc(be.rest[wn]);if(ft>u.display.sizerWidth){var Ln=Math.ceil(ft/OA(u.display));Ln>u.display.maxLineLength&&(u.display.maxLineLength=Ln,u.display.maxLine=be.line,u.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(g.scroller.scrollTop+=Z)}function Bc(u){if(u.widgets)for(var g=0;g<u.widgets.length;++g){var E=u.widgets[g],S=E.node.parentNode;S&&(E.height=S.offsetHeight)}}function ru(u,g,E){var S=E&&E.top!=null?Math.max(0,E.top):u.scroller.scrollTop;S=Math.floor(S-$h(u));var K=E&&E.bottom!=null?E.bottom:S+u.wrapper.clientHeight,Z=xt(g,S),ue=xt(g,K);if(E&&E.ensure){var be=E.ensure.from.line,ke=E.ensure.to.line;be<Z?(Z=be,ue=xt(g,Yi(wr(g,be))+u.wrapper.clientHeight)):Math.min(ke,g.lastLine())>=ue&&(Z=xt(g,Yi(wr(g,ke))-u.wrapper.clientHeight),ue=ke)}return{from:Z,to:Math.max(ue,Z+1)}}function Af(u,g){if(!at(u,"scrollCursorIntoView")){var E=u.display,S=E.sizer.getBoundingClientRect(),K=null,Z=E.wrapper.ownerDocument;if(g.top+S.top<0?K=!0:g.bottom+S.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(K=!1),K!=null&&!V){var ue=Se("div","",null,`position: absolute;
                         top: `+(g.top-E.viewOffset-$h(u.display))+`px;
                         height: `+(g.bottom-g.top+vu(u)+E.barHeight)+`px;
                         left: `+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;");u.display.lineSpace.appendChild(ue),ue.scrollIntoView(K),u.display.lineSpace.removeChild(ue)}}}function Ed(u,g,E,S){S==null&&(S=0);var K;!u.options.lineWrapping&&g==E&&(E=g.sticky=="before"?fn(g.line,g.ch+1,"before"):g,g=g.ch?fn(g.line,g.sticky=="before"?g.ch-1:g.ch,"after"):g);for(var Z=0;Z<5;Z++){var ue=!1,be=un(u,g),ke=!E||E==g?be:un(u,E);K={left:Math.min(be.left,ke.left),top:Math.min(be.top,ke.top)-S,right:Math.max(be.left,ke.left),bottom:Math.max(be.bottom,ke.bottom)+S};var Ne=Oc(u,K),ft=u.doc.scrollTop,Mt=u.doc.scrollLeft;if(Ne.scrollTop!=null&&(ps(u,Ne.scrollTop),Math.abs(u.doc.scrollTop-ft)>1&&(ue=!0)),Ne.scrollLeft!=null&&(Xs(u,Ne.scrollLeft),Math.abs(u.doc.scrollLeft-Mt)>1&&(ue=!0)),!ue)break}return K}function ac(u,g){var E=Oc(u,g);E.scrollTop!=null&&ps(u,E.scrollTop),E.scrollLeft!=null&&Xs(u,E.scrollLeft)}function Oc(u,g){var E=u.display,S=nl(u.display);g.top<0&&(g.top=0);var K=u.curOp&&u.curOp.scrollTop!=null?u.curOp.scrollTop:E.scroller.scrollTop,Z=wc(u),ue={};g.bottom-g.top>Z&&(g.bottom=g.top+Z);var be=u.doc.height+vh(E),ke=g.top<S,Ne=g.bottom>be-S;if(g.top<K)ue.scrollTop=ke?0:g.top;else if(g.bottom>K+Z){var ft=Math.min(g.top,(Ne?be:g.bottom)-Z);ft!=K&&(ue.scrollTop=ft)}var Mt=u.options.fixedGutter?0:E.gutters.offsetWidth,tn=u.curOp&&u.curOp.scrollLeft!=null?u.curOp.scrollLeft:E.scroller.scrollLeft-Mt,Yt=Mc(u)-E.gutters.offsetWidth,wn=g.right-g.left>Yt;return wn&&(g.right=g.left+Yt),g.left<10?ue.scrollLeft=0:g.left<tn?ue.scrollLeft=Math.max(0,g.left+Mt-(wn?0:10)):g.right>Yt+tn-3&&(ue.scrollLeft=g.right+(wn?0:10)-Yt),ue}function lc(u,g){g!=null&&(th(u),u.curOp.scrollTop=(u.curOp.scrollTop==null?u.doc.scrollTop:u.curOp.scrollTop)+g)}function Ms(u){th(u);var g=u.getCursor();u.curOp.scrollToPos={from:g,to:g,margin:u.options.cursorScrollMargin}}function Qs(u,g,E){(g!=null||E!=null)&&th(u),g!=null&&(u.curOp.scrollLeft=g),E!=null&&(u.curOp.scrollTop=E)}function Bd(u,g){th(u),u.curOp.scrollToPos=g}function th(u){var g=u.curOp.scrollToPos;if(g){u.curOp.scrollToPos=null;var E=Kr(u,g.from),S=Kr(u,g.to);bh(u,E,S,g.margin)}}function bh(u,g,E,S){var K=Oc(u,{left:Math.min(g.left,E.left),top:Math.min(g.top,E.top)-S,right:Math.max(g.right,E.right),bottom:Math.max(g.bottom,E.bottom)+S});Qs(u,K.scrollLeft,K.scrollTop)}function ps(u,g){Math.abs(u.doc.scrollTop-g)<2||(i||El(u,{top:g}),xu(u,g,!0),i&&El(u),Wa(u,100))}function xu(u,g,E){g=Math.max(0,Math.min(u.display.scroller.scrollHeight-u.display.scroller.clientHeight,g)),!(u.display.scroller.scrollTop==g&&!E)&&(u.doc.scrollTop=g,u.display.scrollbars.setScrollTop(g),u.display.scroller.scrollTop!=g&&(u.display.scroller.scrollTop=g))}function Xs(u,g,E,S){g=Math.max(0,Math.min(g,u.display.scroller.scrollWidth-u.display.scroller.clientWidth)),!((E?g==u.doc.scrollLeft:Math.abs(u.doc.scrollLeft-g)<2)&&!S)&&(u.doc.scrollLeft=g,Gu(u),u.display.scroller.scrollLeft!=g&&(u.display.scroller.scrollLeft=g),u.display.scrollbars.setScrollLeft(g))}function Wu(u){var g=u.display,E=g.gutters.offsetWidth,S=Math.round(u.doc.height+vh(u.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:u.options.fixedGutter?E:0,docHeight:S,scrollHeight:S+vu(u)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:E}}var Wl=function(u,g,E){this.cm=E;var S=this.vert=Se("div",[Se("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),K=this.horiz=Se("div",[Se("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=K.tabIndex=-1,u(S),u(K),Qe(S,"scroll",function(){S.clientHeight&&g(S.scrollTop,"vertical")}),Qe(K,"scroll",function(){K.clientWidth&&g(K.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Wl.prototype.update=function(u){var g=u.scrollWidth>u.clientWidth+1,E=u.scrollHeight>u.clientHeight+1,S=u.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=g?S+"px":"0";var K=u.viewHeight-(g?S:0);this.vert.firstChild.style.height=Math.max(0,u.scrollHeight-u.clientHeight+K)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=E?S+"px":"0",this.horiz.style.left=u.barLeft+"px";var Z=u.viewWidth-u.barLeft-(E?S:0);this.horiz.firstChild.style.width=Math.max(0,u.scrollWidth-u.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&u.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?S:0,bottom:g?S:0}},Wl.prototype.setScrollLeft=function(u){this.horiz.scrollLeft!=u&&(this.horiz.scrollLeft=u),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Wl.prototype.setScrollTop=function(u){this.vert.scrollTop!=u&&(this.vert.scrollTop=u),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Wl.prototype.zeroWidthHack=function(){var u=q&&!W?"12px":"18px";this.horiz.style.height=this.vert.style.width=u,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Ue,this.disableVert=new Ue},Wl.prototype.enableZeroWidthBar=function(u,g,E){u.style.visibility="";function S(){var K=u.getBoundingClientRect(),Z=E=="vert"?document.elementFromPoint(K.right-1,(K.top+K.bottom)/2):document.elementFromPoint((K.right+K.left)/2,K.bottom-1);Z!=u?u.style.visibility="hidden":g.set(1e3,S)}g.set(1e3,S)},Wl.prototype.clear=function(){var u=this.horiz.parentNode;u.removeChild(this.horiz),u.removeChild(this.vert)};var ju=function(){};ju.prototype.update=function(){return{bottom:0,right:0}},ju.prototype.setScrollLeft=function(){},ju.prototype.setScrollTop=function(){},ju.prototype.clear=function(){};function Ml(u,g){g||(g=Wu(u));var E=u.display.barWidth,S=u.display.barHeight;Mu(u,g);for(var K=0;K<4&&E!=u.display.barWidth||S!=u.display.barHeight;K++)E!=u.display.barWidth&&u.options.lineWrapping&&Ec(u),Mu(u,Wu(u)),E=u.display.barWidth,S=u.display.barHeight}function Mu(u,g){var E=u.display,S=E.scrollbars.update(g);E.sizer.style.paddingRight=(E.barWidth=S.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=S.bottom)+"px",E.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=S.bottom+"px",E.scrollbarFiller.style.width=S.right+"px"):E.scrollbarFiller.style.display="",S.bottom&&u.options.coverGutterNextToScrollbar&&u.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=S.bottom+"px",E.gutterFiller.style.width=g.gutterWidth+"px"):E.gutterFiller.style.display=""}var Ic={native:Wl,null:ju};function ed(u){u.display.scrollbars&&(u.display.scrollbars.clear(),u.display.scrollbars.addClass&&me(u.display.wrapper,u.display.scrollbars.addClass)),u.display.scrollbars=new Ic[u.options.scrollbarStyle](function(g){u.display.wrapper.insertBefore(g,u.display.scrollbarFiller),Qe(g,"mousedown",function(){u.state.focused&&setTimeout(function(){return u.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,E){E=="horizontal"?Xs(u,g):ps(u,g)},u),u.display.scrollbars.addClass&&Pe(u.display.wrapper,u.display.scrollbars.addClass)}var Ac=0;function Tc(u){u.curOp={cm:u,viewChanged:!1,startHeight:u.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ac,markArrays:null},nf(u.curOp)}function IA(u){var g=u.curOp;g&&Yh(g,function(E){for(var S=0;S<E.ops.length;S++)E.ops[S].cm.curOp=null;wu(E)})}function wu(u){for(var g=u.ops,E=0;E<g.length;E++)ml(g[E]);for(var S=0;S<g.length;S++)TA(g[S]);for(var K=0;K<g.length;K++)Od(g[K]);for(var Z=0;Z<g.length;Z++)st(g[Z]);for(var ue=0;ue<g.length;ue++)xh(g[ue])}function ml(u){var g=u.cm,E=g.display;Fs(g),u.updateMaxLine&&Ds(g),u.mustUpdate=u.viewChanged||u.forceUpdate||u.scrollTop!=null||u.scrollToPos&&(u.scrollToPos.from.line<E.viewFrom||u.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&g.options.lineWrapping,u.update=u.mustUpdate&&new Os(g,u.mustUpdate&&{top:u.scrollTop,ensure:u.scrollToPos},u.forceUpdate)}function TA(u){u.updatedDisplay=u.mustUpdate&&il(u.cm,u.update)}function Od(u){var g=u.cm,E=g.display;u.updatedDisplay&&Ec(g),u.barMeasure=Wu(g),E.maxLineChanged&&!g.options.lineWrapping&&(u.adjustWidthTo=$c(g,E.maxLine,E.maxLine.text.length).left+3,g.display.sizerWidth=u.adjustWidthTo,u.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+u.adjustWidthTo+vu(g)+g.display.barWidth),u.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+u.adjustWidthTo-Mc(g))),(u.updatedDisplay||u.selectionChanged)&&(u.preparedSelection=E.input.prepareSelection())}function st(u){var g=u.cm;u.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=u.adjustWidthTo+"px",u.maxScrollLeft<g.doc.scrollLeft&&Xs(g,Math.min(g.display.scroller.scrollLeft,u.maxScrollLeft),!0),g.display.maxLineChanged=!1);var E=u.focus&&u.focus==je(Gt(g));u.preparedSelection&&g.display.input.showSelection(u.preparedSelection,E),(u.updatedDisplay||u.startHeight!=g.doc.height)&&Ml(g,u.barMeasure),u.updatedDisplay&&kA(g,u.barMeasure),u.selectionChanged&&nu(g),g.state.focused&&u.updateInput&&g.display.input.reset(u.typing),E&&sc(u.cm)}function xh(u){var g=u.cm,E=g.display,S=g.doc;if(u.updatedDisplay&&Sl(g,u.update),E.wheelStartX!=null&&(u.scrollTop!=null||u.scrollLeft!=null||u.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),u.scrollTop!=null&&xu(g,u.scrollTop,u.forceScroll),u.scrollLeft!=null&&Xs(g,u.scrollLeft,!0,!0),u.scrollToPos){var K=Ed(g,Ci(S,u.scrollToPos.from),Ci(S,u.scrollToPos.to),u.scrollToPos.margin);Af(g,K)}var Z=u.maybeHiddenMarkers,ue=u.maybeUnhiddenMarkers;if(Z)for(var be=0;be<Z.length;++be)Z[be].lines.length||ut(Z[be],"hide");if(ue)for(var ke=0;ke<ue.length;++ke)ue[ke].lines.length&&ut(ue[ke],"unhide");E.wrapper.offsetHeight&&(S.scrollTop=g.display.scroller.scrollTop),u.changeObjs&&ut(g,"changes",g,u.changeObjs),u.update&&u.update.finish()}function Js(u,g){if(u.curOp)return g();Tc(u);try{return g()}finally{IA(u)}}function Po(u,g){return function(){if(u.curOp)return g.apply(u,arguments);Tc(u);try{return g.apply(u,arguments)}finally{IA(u)}}}function ri(u){return function(){if(this.curOp)return u.apply(this,arguments);Tc(this);try{return u.apply(this,arguments)}finally{IA(this)}}}function ms(u){return function(){var g=this.cm;if(!g||g.curOp)return u.apply(this,arguments);Tc(g);try{return u.apply(this,arguments)}finally{IA(g)}}}function Wa(u,g){u.doc.highlightFrontier<u.display.viewTo&&u.state.highlight.set(g,kt(ja,u))}function ja(u){var g=u.doc;if(!(g.highlightFrontier>=u.display.viewTo)){var E=+new Date+u.options.workTime,S=di(u,g.highlightFrontier),K=[];g.iter(S.line,Math.min(g.first+g.size,u.display.viewTo+500),function(Z){if(S.line>=u.display.viewFrom){var ue=Z.styles,be=Z.text.length>u.options.maxHighlightLength?pi(g.mode,S.state):null,ke=_c(u,Z,S,!0);be&&(S.state=be),Z.styles=ke.styles;var Ne=Z.styleClasses,ft=ke.classes;ft?Z.styleClasses=ft:Ne&&(Z.styleClasses=null);for(var Mt=!ue||ue.length!=Z.styles.length||Ne!=ft&&(!Ne||!ft||Ne.bgClass!=ft.bgClass||Ne.textClass!=ft.textClass),tn=0;!Mt&&tn<ue.length;++tn)Mt=ue[tn]!=Z.styles[tn];Mt&&K.push(S.line),Z.stateAfter=S.save(),S.nextLine()}else Z.text.length<=u.options.maxHighlightLength&&jr(u,Z.text,S),Z.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>E)return Wa(u,u.options.workDelay),!0}),g.highlightFrontier=S.line,g.modeFrontier=Math.max(g.modeFrontier,S.line),K.length&&Js(u,function(){for(var Z=0;Z<K.length;Z++)Sc(u,K[Z],"text")})}}var Os=function(u,g,E){var S=u.display;this.viewport=g,this.visible=ru(S,u.doc,g),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=Mc(u),this.force=E,this.dims=Xc(u),this.events=[]};Os.prototype.signal=function(u,g){Qt(u,g)&&this.events.push(arguments)},Os.prototype.finish=function(){for(var u=0;u<this.events.length;u++)ut.apply(null,this.events[u])};function Fs(u){var g=u.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=vu(u)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=vu(u)+"px",g.scrollbarsClipped=!0)}function Ko(u){if(u.hasFocus())return null;var g=je(Gt(u));if(!g||!Ke(u.display.lineDiv,g))return null;var E={activeElt:g};if(window.getSelection){var S=Ut(u).getSelection();S.anchorNode&&S.extend&&Ke(u.display.lineDiv,S.anchorNode)&&(E.anchorNode=S.anchorNode,E.anchorOffset=S.anchorOffset,E.focusNode=S.focusNode,E.focusOffset=S.focusOffset)}return E}function wl(u){if(!(!u||!u.activeElt||u.activeElt==je(mt(u.activeElt)))&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&Ke(document.body,u.anchorNode)&&Ke(document.body,u.focusNode))){var g=u.activeElt.ownerDocument,E=g.defaultView.getSelection(),S=g.createRange();S.setEnd(u.anchorNode,u.anchorOffset),S.collapse(!1),E.removeAllRanges(),E.addRange(S),E.extend(u.focusNode,u.focusOffset)}}function il(u,g){var E=u.display,S=u.doc;if(g.editorIsHidden)return lA(u),!1;if(!g.force&&g.visible.from>=E.viewFrom&&g.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&lf(u)==0)return!1;Mr(u)&&(lA(u),g.dims=Xc(u));var K=S.first+S.size,Z=Math.max(g.visible.from-u.options.viewportMargin,S.first),ue=Math.min(K,g.visible.to+u.options.viewportMargin);E.viewFrom<Z&&Z-E.viewFrom<20&&(Z=Math.max(S.first,E.viewFrom)),E.viewTo>ue&&E.viewTo-ue<20&&(ue=Math.min(K,E.viewTo)),_o&&(Z=Eo(u.doc,Z),ue=si(u.doc,ue));var be=Z!=E.viewFrom||ue!=E.viewTo||E.lastWrapHeight!=g.wrapperHeight||E.lastWrapWidth!=g.wrapperWidth;wd(u,Z,ue),E.viewOffset=Yi(wr(u.doc,E.viewFrom)),u.display.mover.style.top=E.viewOffset+"px";var ke=lf(u);if(!be&&ke==0&&!g.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var Ne=Ko(u);return ke>4&&(E.lineDiv.style.display="none"),nh(u,E.updateLineNumbers,g.dims),ke>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,wl(Ne),pe(E.cursorDiv),pe(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,be&&(E.lastWrapHeight=g.wrapperHeight,E.lastWrapWidth=g.wrapperWidth,Wa(u,400)),E.updateLineNumbers=null,!0}function Sl(u,g){for(var E=g.viewport,S=!0;;S=!1){if(!S||!u.options.lineWrapping||g.oldDisplayWidth==Mc(u)){if(E&&E.top!=null&&(E={top:Math.min(u.doc.height+vh(u.display)-wc(u),E.top)}),g.visible=ru(u.display,u.doc,E),g.visible.from>=u.display.viewFrom&&g.visible.to<=u.display.viewTo)break}else S&&(g.visible=ru(u.display,u.doc,E));if(!il(u,g))break;Ec(u);var K=Wu(u);xl(u),Ml(u,K),kA(u,K),g.force=!1}g.signal(u,"update",u),(u.display.viewFrom!=u.display.reportedViewFrom||u.display.viewTo!=u.display.reportedViewTo)&&(g.signal(u,"viewportChange",u,u.display.viewFrom,u.display.viewTo),u.display.reportedViewFrom=u.display.viewFrom,u.display.reportedViewTo=u.display.viewTo)}function El(u,g){var E=new Os(u,g);if(il(u,E)){Ec(u),Sl(u,E);var S=Wu(u);xl(u),Ml(u,S),kA(u,S),E.finish()}}function nh(u,g,E){var S=u.display,K=u.options.lineNumbers,Z=S.lineDiv,ue=Z.firstChild;function be(wn){var Ln=wn.nextSibling;return x&&q&&u.display.currentWheelTarget==wn?wn.style.display="none":wn.parentNode.removeChild(wn),Ln}for(var ke=S.view,Ne=S.viewFrom,ft=0;ft<ke.length;ft++){var Mt=ke[ft];if(!Mt.hidden)if(!Mt.node||Mt.node.parentNode!=Z){var tn=Gf(u,Mt,Ne,E);Z.insertBefore(tn,ue)}else{for(;ue!=Mt.node;)ue=be(ue);var Yt=K&&g!=null&&g<=Ne&&Mt.lineNumber;Mt.changes&&(nt(Mt.changes,"gutter")>-1&&(Yt=!1),xc(u,Mt,Ne,E)),Yt&&(pe(Mt.lineNumber),Mt.lineNumber.appendChild(document.createTextNode(Yn(u.options,Ne)))),ue=Mt.node.nextSibling}Ne+=Mt.size}for(;ue;)ue=be(ue)}function Bl(u){var g=u.gutters.offsetWidth;u.sizer.style.marginLeft=g+"px",xs(u,"gutterChanged",u)}function kA(u,g){u.display.sizer.style.minHeight=g.docHeight+"px",u.display.heightForcer.style.top=g.docHeight+"px",u.display.gutters.style.height=g.docHeight+u.display.barHeight+vu(u)+"px"}function Gu(u){var g=u.display,E=g.view;if(!(!g.alignWidgets&&(!g.gutters.firstChild||!u.options.fixedGutter))){for(var S=mo(g)-g.scroller.scrollLeft+u.doc.scrollLeft,K=g.gutters.offsetWidth,Z=S+"px",ue=0;ue<E.length;ue++)if(!E[ue].hidden){u.options.fixedGutter&&(E[ue].gutter&&(E[ue].gutter.style.left=Z),E[ue].gutterBackground&&(E[ue].gutterBackground.style.left=Z));var be=E[ue].alignable;if(be)for(var ke=0;ke<be.length;ke++)be[ke].style.left=Z}u.options.fixedGutter&&(g.gutters.style.left=S+K+"px")}}function Mr(u){if(!u.options.lineNumbers)return!1;var g=u.doc,E=Yn(u.options,g.first+g.size-1),S=u.display;if(E.length!=S.lineNumChars){var K=S.measure.appendChild(Se("div",[Se("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=K.firstChild.offsetWidth,ue=K.offsetWidth-Z;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(Z,S.lineGutter.offsetWidth-ue)+1,S.lineNumWidth=S.lineNumInnerWidth+ue,S.lineNumChars=S.lineNumInnerWidth?E.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",Bl(u.display),!0}return!1}function AA(u,g){for(var E=[],S=!1,K=0;K<u.length;K++){var Z=u[K],ue=null;if(typeof Z!="string"&&(ue=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(g)S=!0;else continue;E.push({className:Z,style:ue})}return g&&!S&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function Id(u){var g=u.gutters,E=u.gutterSpecs;pe(g),u.lineGutter=null;for(var S=0;S<E.length;++S){var K=E[S],Z=K.className,ue=K.style,be=g.appendChild(Se("div",null,"CodeMirror-gutter "+Z));ue&&(be.style.cssText=ue),Z=="CodeMirror-linenumbers"&&(u.lineGutter=be,be.style.width=(u.lineNumWidth||1)+"px")}g.style.display=E.length?"":"none",Bl(u)}function Ol(u){Id(u.display),rl(u),Gu(u)}function rh(u,g,E,S){var K=this;this.input=E,K.scrollbarFiller=Se("div",null,"CodeMirror-scrollbar-filler"),K.scrollbarFiller.setAttribute("cm-not-content","true"),K.gutterFiller=Se("div",null,"CodeMirror-gutter-filler"),K.gutterFiller.setAttribute("cm-not-content","true"),K.lineDiv=vt("div",null,"CodeMirror-code"),K.selectionDiv=Se("div",null,null,"position: relative; z-index: 1"),K.cursorDiv=Se("div",null,"CodeMirror-cursors"),K.measure=Se("div",null,"CodeMirror-measure"),K.lineMeasure=Se("div",null,"CodeMirror-measure"),K.lineSpace=vt("div",[K.measure,K.lineMeasure,K.selectionDiv,K.cursorDiv,K.lineDiv],null,"position: relative; outline: none");var Z=vt("div",[K.lineSpace],"CodeMirror-lines");K.mover=Se("div",[Z],null,"position: relative"),K.sizer=Se("div",[K.mover],"CodeMirror-sizer"),K.sizerWidth=null,K.heightForcer=Se("div",null,null,"position: absolute; height: "+_t+"px; width: 1px;"),K.gutters=Se("div",null,"CodeMirror-gutters"),K.lineGutter=null,K.scroller=Se("div",[K.sizer,K.heightForcer,K.gutters],"CodeMirror-scroll"),K.scroller.setAttribute("tabIndex","-1"),K.wrapper=Se("div",[K.scrollbarFiller,K.gutterFiller,K.scroller],"CodeMirror"),k&&P>=105&&(K.wrapper.style.clipPath="inset(0px)"),K.wrapper.setAttribute("translate","no"),p&&v<8&&(K.gutters.style.zIndex=-1,K.scroller.style.paddingRight=0),!x&&!(i&&ne)&&(K.scroller.draggable=!0),u&&(u.appendChild?u.appendChild(K.wrapper):u(K.wrapper)),K.viewFrom=K.viewTo=g.first,K.reportedViewFrom=K.reportedViewTo=g.first,K.view=[],K.renderedView=null,K.externalMeasured=null,K.viewOffset=0,K.lastWrapHeight=K.lastWrapWidth=0,K.updateLineNumbers=null,K.nativeBarWidth=K.barHeight=K.barWidth=0,K.scrollbarsClipped=!1,K.lineNumWidth=K.lineNumInnerWidth=K.lineNumChars=null,K.alignWidgets=!1,K.cachedCharWidth=K.cachedTextHeight=K.cachedPaddingH=null,K.maxLine=null,K.maxLineLength=0,K.maxLineChanged=!1,K.wheelDX=K.wheelDY=K.wheelStartX=K.wheelStartY=null,K.shift=!1,K.selForContextMenu=null,K.activeTouch=null,K.gutterSpecs=AA(S.gutters,S.lineNumbers),Id(K),E.init(K)}var Su=0,PA=null;p?PA=-.53:i?PA=15:k?PA=-.7:N&&(PA=-1/3);function Fi(u){var g=u.wheelDeltaX,E=u.wheelDeltaY;return g==null&&u.detail&&u.axis==u.HORIZONTAL_AXIS&&(g=u.detail),E==null&&u.detail&&u.axis==u.VERTICAL_AXIS?E=u.detail:E==null&&(E=u.wheelDelta),{x:g,y:E}}function Qu(u){var g=Fi(u);return g.x*=PA,g.y*=PA,g}function ih(u,g){k&&P==102&&(u.display.chromeScrollHack==null?u.display.sizer.style.pointerEvents="none":clearTimeout(u.display.chromeScrollHack),u.display.chromeScrollHack=setTimeout(function(){u.display.chromeScrollHack=null,u.display.sizer.style.pointerEvents=""},100));var E=Fi(g),S=E.x,K=E.y,Z=PA;g.deltaMode===0&&(S=g.deltaX,K=g.deltaY,Z=1);var ue=u.display,be=ue.scroller,ke=be.scrollWidth>be.clientWidth,Ne=be.scrollHeight>be.clientHeight;if(S&&ke||K&&Ne){if(K&&q&&x){e:for(var ft=g.target,Mt=ue.view;ft!=be;ft=ft.parentNode)for(var tn=0;tn<Mt.length;tn++)if(Mt[tn].node==ft){u.display.currentWheelTarget=ft;break e}}if(S&&!i&&!D&&Z!=null){K&&Ne&&ps(u,Math.max(0,be.scrollTop+K*Z)),Xs(u,Math.max(0,be.scrollLeft+S*Z)),(!K||K&&Ne)&&rn(g),ue.wheelStartX=null;return}if(K&&Z!=null){var Yt=K*Z,wn=u.doc.scrollTop,Ln=wn+ue.wrapper.clientHeight;Yt<0?wn=Math.max(0,wn+Yt-50):Ln=Math.min(u.doc.height,Ln+Yt+50),El(u,{top:wn,bottom:Ln})}Su<20&&g.deltaMode!==0&&(ue.wheelStartX==null?(ue.wheelStartX=be.scrollLeft,ue.wheelStartY=be.scrollTop,ue.wheelDX=S,ue.wheelDY=K,setTimeout(function(){if(ue.wheelStartX!=null){var Hn=be.scrollLeft-ue.wheelStartX,$n=be.scrollTop-ue.wheelStartY,gr=$n&&ue.wheelDY&&$n/ue.wheelDY||Hn&&ue.wheelDX&&Hn/ue.wheelDX;ue.wheelStartX=ue.wheelStartY=null,gr&&(PA=(PA*Su+gr)/(Su+1),++Su)}},200)):(ue.wheelDX+=S,ue.wheelDY+=K))}}var is=function(u,g){this.ranges=u,this.primIndex=g};is.prototype.primary=function(){return this.ranges[this.primIndex]},is.prototype.equals=function(u){if(u==this)return!0;if(u.primIndex!=this.primIndex||u.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var E=this.ranges[g],S=u.ranges[g];if(!Wi(E.anchor,S.anchor)||!Wi(E.head,S.head))return!1}return!0},is.prototype.deepCopy=function(){for(var u=[],g=0;g<this.ranges.length;g++)u[g]=new Bo(Co(this.ranges[g].anchor),Co(this.ranges[g].head));return new is(u,this.primIndex)},is.prototype.somethingSelected=function(){for(var u=0;u<this.ranges.length;u++)if(!this.ranges[u].empty())return!0;return!1},is.prototype.contains=function(u,g){g||(g=u);for(var E=0;E<this.ranges.length;E++){var S=this.ranges[E];if(dr(g,S.from())>=0&&dr(u,S.to())<=0)return E}return-1};var Bo=function(u,g){this.anchor=u,this.head=g};Bo.prototype.from=function(){return pa(this.anchor,this.head)},Bo.prototype.to=function(){return ls(this.anchor,this.head)},Bo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function uA(u,g,E){var S=u&&u.options.selectionsMayTouch,K=g[E];g.sort(function(tn,Yt){return dr(tn.from(),Yt.from())}),E=nt(g,K);for(var Z=1;Z<g.length;Z++){var ue=g[Z],be=g[Z-1],ke=dr(be.to(),ue.from());if(S&&!ue.empty()?ke>0:ke>=0){var Ne=pa(be.from(),ue.from()),ft=ls(be.to(),ue.to()),Mt=be.empty()?ue.from()==ue.head:be.from()==be.head;Z<=E&&--E,g.splice(--Z,2,new Bo(Mt?ft:Ne,Mt?Ne:ft))}}return new is(g,E)}function Ga(u,g){return new is([new Bo(u,g||u)],0)}function ga(u){return u.text?fn(u.from.line+u.text.length-1,Xn(u.text).length+(u.text.length==1?u.from.ch:0)):u.to}function kc(u,g){if(dr(u,g.from)<0)return u;if(dr(u,g.to)<=0)return ga(g);var E=u.line+g.text.length-(g.to.line-g.from.line)-1,S=u.ch;return u.line==g.to.line&&(S+=ga(g).ch-g.to.ch),fn(E,S)}function iu(u,g){for(var E=[],S=0;S<u.sel.ranges.length;S++){var K=u.sel.ranges[S];E.push(new Bo(kc(K.anchor,g),kc(K.head,g)))}return uA(u.cm,E,u.sel.primIndex)}function ou(u,g,E){return u.line==g.line?fn(E.line,u.ch-g.ch+E.ch):fn(E.line+(u.line-g.line),u.ch)}function oh(u,g,E){for(var S=[],K=fn(u.first,0),Z=K,ue=0;ue<g.length;ue++){var be=g[ue],ke=ou(be.from,K,Z),Ne=ou(ga(be),K,Z);if(K=be.to,Z=Ne,E=="around"){var ft=u.sel.ranges[ue],Mt=dr(ft.head,ft.anchor)<0;S[ue]=new Bo(Mt?Ne:ke,Mt?ke:Ne)}else S[ue]=new Bo(ke,ke)}return new is(S,u.sel.primIndex)}function uf(u){u.doc.mode=Wo(u.options,u.doc.modeOption),jl(u)}function jl(u){u.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),u.doc.modeFrontier=u.doc.highlightFrontier=u.doc.first,Wa(u,100),u.state.modeGen++,u.curOp&&rl(u)}function Qo(u,g){return g.from.ch==0&&g.to.ch==0&&Xn(g.text)==""&&(!u.cm||u.cm.options.wholeLineUpdateBefore)}function ya(u,g,E,S){function K(gr){return E?E[gr]:null}function Z(gr,Ar,Rr){SA(gr,Ar,Rr,S),xs(gr,"change",gr,g)}function ue(gr,Ar){for(var Rr=[],ii=gr;ii<Ar;++ii)Rr.push(new Ua(Ne[ii],K(ii),S));return Rr}var be=g.from,ke=g.to,Ne=g.text,ft=wr(u,be.line),Mt=wr(u,ke.line),tn=Xn(Ne),Yt=K(Ne.length-1),wn=ke.line-be.line;if(g.full)u.insert(0,ue(0,Ne.length)),u.remove(Ne.length,u.size-Ne.length);else if(Qo(u,g)){var Ln=ue(0,Ne.length-1);Z(Mt,Mt.text,Yt),wn&&u.remove(be.line,wn),Ln.length&&u.insert(be.line,Ln)}else if(ft==Mt)if(Ne.length==1)Z(ft,ft.text.slice(0,be.ch)+tn+ft.text.slice(ke.ch),Yt);else{var Hn=ue(1,Ne.length-1);Hn.push(new Ua(tn+ft.text.slice(ke.ch),Yt,S)),Z(ft,ft.text.slice(0,be.ch)+Ne[0],K(0)),u.insert(be.line+1,Hn)}else if(Ne.length==1)Z(ft,ft.text.slice(0,be.ch)+Ne[0]+Mt.text.slice(ke.ch),K(0)),u.remove(be.line+1,wn);else{Z(ft,ft.text.slice(0,be.ch)+Ne[0],K(0)),Z(Mt,tn+Mt.text.slice(ke.ch),Yt);var $n=ue(1,Ne.length-1);wn>1&&u.remove(be.line+1,wn-1),u.insert(be.line+1,$n)}xs(u,"change",u,g)}function la(u,g,E){function S(K,Z,ue){if(K.linked)for(var be=0;be<K.linked.length;++be){var ke=K.linked[be];if(ke.doc!=Z){var Ne=ue&&ke.sharedHist;E&&!Ne||(g(ke.doc,Ne),S(ke.doc,K,Ne))}}}S(u,null,!0)}function ws(u,g){if(g.cm)throw new Error("This document is already in use.");u.doc=g,g.cm=u,Ch(u),uf(u),Gl(u),u.options.direction=g.direction,u.options.lineWrapping||Ds(u),u.options.mode=g.modeOption,rl(u)}function Gl(u){(u.doc.direction=="rtl"?Pe:me)(u.display.lineDiv,"CodeMirror-rtl")}function Yu(u){Js(u,function(){Gl(u),rl(u)})}function Pc(u){this.done=[],this.undone=[],this.undoDepth=u?u.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=u?u.maxGeneration:1}function Qa(u,g){var E={from:Co(g.from),to:ga(g),text:Fa(u,g.from,g.to)};return Ql(u,E,g.from.line,g.to.line+1),la(u,function(S){return Ql(S,E,g.from.line,g.to.line+1)},!0),E}function gl(u){for(;u.length;){var g=Xn(u);if(g.ranges)u.pop();else break}}function Qr(u,g){if(g)return gl(u.done),Xn(u.done);if(u.done.length&&!Xn(u.done).ranges)return Xn(u.done);if(u.done.length>1&&!u.done[u.done.length-2].ranges)return u.done.pop(),Xn(u.done)}function Jr(u,g,E,S){var K=u.history;K.undone.length=0;var Z=+new Date,ue,be;if((K.lastOp==S||K.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&K.lastModTime>Z-(u.cm?u.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(ue=Qr(K,K.lastOp==S)))be=Xn(ue.changes),dr(g.from,g.to)==0&&dr(g.from,be.to)==0?be.to=ga(g):ue.changes.push(Qa(u,g));else{var ke=Xn(K.done);for((!ke||!ke.ranges)&&cA(u.sel,K.done),ue={changes:[Qa(u,g)],generation:K.generation},K.done.push(ue);K.done.length>K.undoDepth;)K.done.shift(),K.done[0].ranges||K.done.shift()}K.done.push(E),K.generation=++K.maxGeneration,K.lastModTime=K.lastSelTime=Z,K.lastOp=K.lastSelOp=S,K.lastOrigin=K.lastSelOrigin=g.origin,be||ut(u,"historyAdded")}function Mh(u,g,E,S){var K=g.charAt(0);return K=="*"||K=="+"&&E.ranges.length==S.ranges.length&&E.somethingSelected()==S.somethingSelected()&&new Date-u.history.lastSelTime<=(u.cm?u.cm.options.historyEventDelay:500)}function Eu(u,g,E,S){var K=u.history,Z=S&&S.origin;E==K.lastSelOp||Z&&K.lastSelOrigin==Z&&(K.lastModTime==K.lastSelTime&&K.lastOrigin==Z||Mh(u,Z,Xn(K.done),g))?K.done[K.done.length-1]=g:cA(g,K.done),K.lastSelTime=+new Date,K.lastSelOrigin=Z,K.lastSelOp=E,S&&S.clearRedo!==!1&&gl(K.undone)}function cA(u,g){var E=Xn(g);E&&E.ranges&&E.equals(u)||g.push(u)}function Ql(u,g,E,S){var K=g["spans_"+u.id],Z=0;u.iter(Math.max(u.first,E),Math.min(u.first+u.size,S),function(ue){ue.markedSpans&&((K||(K=g["spans_"+u.id]={}))[Z]=ue.markedSpans),++Z})}function td(u){if(!u)return null;for(var g,E=0;E<u.length;++E)u[E].marker.explicitlyCleared?g||(g=u.slice(0,E)):g&&g.push(u[E]);return g?g.length?g:null:u}function Yl(u,g){var E=g["spans_"+u.id];if(!E)return null;for(var S=[],K=0;K<g.text.length;++K)S.push(td(E[K]));return S}function sh(u,g){var E=Yl(u,g),S=wi(u,g);if(!E)return S;if(!S)return E;for(var K=0;K<E.length;++K){var Z=E[K],ue=S[K];if(Z&&ue)e:for(var be=0;be<ue.length;++be){for(var ke=ue[be],Ne=0;Ne<Z.length;++Ne)if(Z[Ne].marker==ke.marker)continue e;Z.push(ke)}else ue&&(E[K]=ue)}return E}function Bu(u,g,E){for(var S=[],K=0;K<u.length;++K){var Z=u[K];if(Z.ranges){S.push(E?is.prototype.deepCopy.call(Z):Z);continue}var ue=Z.changes,be=[];S.push({changes:be});for(var ke=0;ke<ue.length;++ke){var Ne=ue[ke],ft=void 0;if(be.push({from:Ne.from,to:Ne.to,text:Ne.text}),g)for(var Mt in Ne)(ft=Mt.match(/^spans_(\d+)$/))&&nt(g,Number(ft[1]))>-1&&(Xn(be)[Mt]=Ne[Mt],delete Ne[Mt])}}return S}function ji(u,g,E,S){if(S){var K=u.anchor;if(E){var Z=dr(g,K)<0;Z!=dr(E,K)<0?(K=g,g=E):Z!=dr(g,E)<0&&(g=E)}return new Bo(K,g)}else return new Bo(E||g,g)}function Is(u,g,E,S,K){K==null&&(K=u.cm&&(u.cm.display.shift||u.extend)),ea(u,new is([ji(u.sel.primary(),g,E,K)],0),S)}function ah(u,g,E){for(var S=[],K=u.cm&&(u.cm.display.shift||u.extend),Z=0;Z<u.sel.ranges.length;Z++)S[Z]=ji(u.sel.ranges[Z],g[Z],null,K);var ue=uA(u.cm,S,u.sel.primIndex);ea(u,ue,E)}function ol(u,g,E,S){var K=u.sel.ranges.slice(0);K[g]=E,ea(u,uA(u.cm,K,u.sel.primIndex),S)}function Ou(u,g,E,S){ea(u,Ga(g,E),S)}function KA(u,g,E){var S={ranges:g.ranges,update:function(K){this.ranges=[];for(var Z=0;Z<K.length;Z++)this.ranges[Z]=new Bo(Ci(u,K[Z].anchor),Ci(u,K[Z].head))},origin:E&&E.origin};return ut(u,"beforeSelectionChange",u,S),u.cm&&ut(u.cm,"beforeSelectionChange",u.cm,S),S.ranges!=g.ranges?uA(u.cm,S.ranges,S.ranges.length-1):g}function su(u,g,E){var S=u.history.done,K=Xn(S);K&&K.ranges?(S[S.length-1]=g,Ys(u,g,E)):ea(u,g,E)}function ea(u,g,E){Ys(u,g,E),Eu(u,u.sel,u.cm?u.cm.curOp.id:NaN,E)}function Ys(u,g,E){(Qt(u,"beforeSelectionChange")||u.cm&&Qt(u.cm,"beforeSelectionChange"))&&(g=KA(u,g,E));var S=E&&E.bias||(dr(g.primary().head,u.sel.primary().head)<0?-1:1);au(u,lu(u,g,S,!0)),!(E&&E.scroll===!1)&&u.cm&&u.cm.getOption("readOnly")!="nocursor"&&Ms(u.cm)}function au(u,g){g.equals(u.sel)||(u.sel=g,u.cm&&(u.cm.curOp.updateInput=1,u.cm.curOp.selectionChanged=!0,zt(u.cm)),xs(u,"cursorActivity",u))}function hA(u){au(u,lu(u,u.sel,null,!1))}function lu(u,g,E,S){for(var K,Z=0;Z<g.ranges.length;Z++){var ue=g.ranges[Z],be=g.ranges.length==u.sel.ranges.length&&u.sel.ranges[Z],ke=Kc(u,ue.anchor,be&&be.anchor,E,S),Ne=ue.head==ue.anchor?ke:Kc(u,ue.head,be&&be.head,E,S);(K||ke!=ue.anchor||Ne!=ue.head)&&(K||(K=g.ranges.slice(0,Z)),K[Z]=new Bo(ke,Ne))}return K?uA(u.cm,K,g.primIndex):g}function RA(u,g,E,S,K){var Z=wr(u,g.line);if(Z.markedSpans)for(var ue=0;ue<Z.markedSpans.length;++ue){var be=Z.markedSpans[ue],ke=be.marker,Ne="selectLeft"in ke?!ke.selectLeft:ke.inclusiveLeft,ft="selectRight"in ke?!ke.selectRight:ke.inclusiveRight;if((be.from==null||(Ne?be.from<=g.ch:be.from<g.ch))&&(be.to==null||(ft?be.to>=g.ch:be.to>g.ch))){if(K&&(ut(ke,"beforeCursorEnter"),ke.explicitlyCleared))if(Z.markedSpans){--ue;continue}else break;if(!ke.atomic)continue;if(E){var Mt=ke.find(S<0?1:-1),tn=void 0;if((S<0?ft:Ne)&&(Mt=Au(u,Mt,-S,Mt&&Mt.line==g.line?Z:null)),Mt&&Mt.line==g.line&&(tn=dr(Mt,E))&&(S<0?tn<0:tn>0))return RA(u,Mt,g,S,K)}var Yt=ke.find(S<0?-1:1);return(S<0?Ne:ft)&&(Yt=Au(u,Yt,S,Yt.line==g.line?Z:null)),Yt?RA(u,Yt,g,S,K):null}}return g}function Kc(u,g,E,S,K){var Z=S||1,ue=RA(u,g,E,Z,K)||!K&&RA(u,g,E,Z,!0)||RA(u,g,E,-Z,K)||!K&&RA(u,g,E,-Z,!0);return ue||(u.cantEdit=!0,fn(u.first,0))}function Au(u,g,E,S){return E<0&&g.ch==0?g.line>u.first?Ci(u,fn(g.line-1)):null:E>0&&g.ch==(S||wr(u,g.line)).text.length?g.line<u.first+u.size-1?fn(g.line+1,0):null:new fn(g.line,g.ch+E)}function sl(u){u.setSelection(fn(u.firstLine(),0),fn(u.lastLine()),Kt)}function wh(u,g,E){var S={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return S.canceled=!0}};return E&&(S.update=function(K,Z,ue,be){K&&(S.from=Ci(u,K)),Z&&(S.to=Ci(u,Z)),ue&&(S.text=ue),be!==void 0&&(S.origin=be)}),ut(u,"beforeChange",u,S),u.cm&&ut(u.cm,"beforeChange",u.cm,S),S.canceled?(u.cm&&(u.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function uc(u,g,E){if(u.cm){if(!u.cm.curOp)return Po(u.cm,uc)(u,g,E);if(u.cm.state.suppressEdits)return}if(!((Qt(u,"beforeChange")||u.cm&&Qt(u.cm,"beforeChange"))&&(g=wh(u,g,!0),!g))){var S=Qi&&!E&&eo(u,g.from,g.to);if(S)for(var K=S.length-1;K>=0;--K)uu(u,{from:S[K].from,to:S[K].to,text:K?[""]:g.text,origin:g.origin});else uu(u,g)}}function uu(u,g){if(!(g.text.length==1&&g.text[0]==""&&dr(g.from,g.to)==0)){var E=iu(u,g);Jr(u,g,E,u.cm?u.cm.curOp.id:NaN),a(u,g,E,wi(u,g));var S=[];la(u,function(K,Z){!Z&&nt(S,K.history)==-1&&(z(K.history,g),S.push(K.history)),a(K,g,null,wi(K,g))})}}function Il(u,g,E){var S=u.cm&&u.cm.state.suppressEdits;if(!(S&&!E)){for(var K=u.history,Z,ue=u.sel,be=g=="undo"?K.done:K.undone,ke=g=="undo"?K.undone:K.done,Ne=0;Ne<be.length&&(Z=be[Ne],!(E?Z.ranges&&!Z.equals(u.sel):!Z.ranges));Ne++);if(Ne!=be.length){for(K.lastOrigin=K.lastSelOrigin=null;;)if(Z=be.pop(),Z.ranges){if(cA(Z,ke),E&&!Z.equals(u.sel)){ea(u,Z,{clearRedo:!1});return}ue=Z}else if(S){be.push(Z);return}else break;var ft=[];cA(ue,ke),ke.push({changes:ft,generation:K.generation}),K.generation=Z.generation||++K.maxGeneration;for(var Mt=Qt(u,"beforeChange")||u.cm&&Qt(u.cm,"beforeChange"),tn=function(Ln){var Hn=Z.changes[Ln];if(Hn.origin=g,Mt&&!wh(u,Hn,!1))return be.length=0,{};ft.push(Qa(u,Hn));var $n=Ln?iu(u,Hn):Xn(be);a(u,Hn,$n,sh(u,Hn)),!Ln&&u.cm&&u.cm.scrollIntoView({from:Hn.from,to:ga(Hn)});var gr=[];la(u,function(Ar,Rr){!Rr&&nt(gr,Ar.history)==-1&&(z(Ar.history,Hn),gr.push(Ar.history)),a(Ar,Hn,null,sh(Ar,Hn))})},Yt=Z.changes.length-1;Yt>=0;--Yt){var wn=tn(Yt);if(wn)return wn.v}}}}function O(u,g){if(g!=0&&(u.first+=g,u.sel=new is(Fn(u.sel.ranges,function(K){return new Bo(fn(K.anchor.line+g,K.anchor.ch),fn(K.head.line+g,K.head.ch))}),u.sel.primIndex),u.cm)){rl(u.cm,u.first,u.first-g,g);for(var E=u.cm.display,S=E.viewFrom;S<E.viewTo;S++)Sc(u.cm,S,"gutter")}}function a(u,g,E,S){if(u.cm&&!u.cm.curOp)return Po(u.cm,a)(u,g,E,S);if(g.to.line<u.first){O(u,g.text.length-1-(g.to.line-g.from.line));return}if(!(g.from.line>u.lastLine())){if(g.from.line<u.first){var K=g.text.length-1-(u.first-g.from.line);O(u,K),g={from:fn(u.first,0),to:fn(g.to.line+K,g.to.ch),text:[Xn(g.text)],origin:g.origin}}var Z=u.lastLine();g.to.line>Z&&(g={from:g.from,to:fn(Z,wr(u,Z).text.length),text:[g.text[0]],origin:g.origin}),g.removed=Fa(u,g.from,g.to),E||(E=iu(u,g)),u.cm?c(u.cm,g,S):ya(u,g,S),Ys(u,E,Kt),u.cantEdit&&Kc(u,fn(u.firstLine(),0))&&(u.cantEdit=!1)}}function c(u,g,E){var S=u.doc,K=u.display,Z=g.from,ue=g.to,be=!1,ke=Z.line;u.options.lineWrapping||(ke=Ve(Or(wr(S,Z.line))),S.iter(ke,ue.line+1,function(Yt){if(Yt==K.maxLine)return be=!0,!0})),S.sel.contains(g.from,g.to)>-1&&zt(u),ya(S,g,E,bu(u)),u.options.lineWrapping||(S.iter(ke,Z.line+g.text.length,function(Yt){var wn=mi(Yt);wn>K.maxLineLength&&(K.maxLine=Yt,K.maxLineLength=wn,K.maxLineChanged=!0,be=!1)}),be&&(u.curOp.updateMaxLine=!0)),ns(S,Z.line),Wa(u,400);var Ne=g.text.length-(ue.line-Z.line)-1;g.full?rl(u):Z.line==ue.line&&g.text.length==1&&!Qo(u.doc,g)?Sc(u,Z.line,"text"):rl(u,Z.line,ue.line+1,Ne);var ft=Qt(u,"changes"),Mt=Qt(u,"change");if(Mt||ft){var tn={from:Z,to:ue,text:g.text,removed:g.removed,origin:g.origin};Mt&&xs(u,"change",u,tn),ft&&(u.curOp.changeObjs||(u.curOp.changeObjs=[])).push(tn)}u.display.selForContextMenu=null}function C(u,g,E,S,K){var Z;S||(S=E),dr(S,E)<0&&(Z=[S,E],E=Z[0],S=Z[1]),typeof g=="string"&&(g=u.splitLines(g)),uc(u,{from:E,to:S,text:g,origin:K})}function M(u,g,E,S){E<u.line?u.line+=S:g<u.line&&(u.line=g,u.ch=0)}function I(u,g,E,S){for(var K=0;K<u.length;++K){var Z=u[K],ue=!0;if(Z.ranges){Z.copied||(Z=u[K]=Z.deepCopy(),Z.copied=!0);for(var be=0;be<Z.ranges.length;be++)M(Z.ranges[be].anchor,g,E,S),M(Z.ranges[be].head,g,E,S);continue}for(var ke=0;ke<Z.changes.length;++ke){var Ne=Z.changes[ke];if(E<Ne.from.line)Ne.from=fn(Ne.from.line+S,Ne.from.ch),Ne.to=fn(Ne.to.line+S,Ne.to.ch);else if(g<=Ne.to.line){ue=!1;break}}ue||(u.splice(0,K+1),K=0)}}function z(u,g){var E=g.from.line,S=g.to.line,K=g.text.length-(S-E)-1;I(u.done,E,S,K),I(u.undone,E,S,K)}function Y(u,g,E,S){var K=g,Z=g;return typeof g=="number"?Z=wr(u,nA(u,g)):K=Ve(g),K==null?null:(S(Z,K)&&u.cm&&Sc(u.cm,K,E),Z)}function ee(u){this.lines=u,this.parent=null;for(var g=0,E=0;E<u.length;++E)u[E].parent=this,g+=u[E].height;this.height=g}ee.prototype={chunkSize:function(){return this.lines.length},removeInner:function(u,g){for(var E=u,S=u+g;E<S;++E){var K=this.lines[E];this.height-=K.height,As(K),xs(K,"delete")}this.lines.splice(u,g)},collapse:function(u){u.push.apply(u,this.lines)},insertInner:function(u,g,E){this.height+=E,this.lines=this.lines.slice(0,u).concat(g).concat(this.lines.slice(u));for(var S=0;S<g.length;++S)g[S].parent=this},iterN:function(u,g,E){for(var S=u+g;u<S;++u)if(E(this.lines[u]))return!0}};function se(u){this.children=u;for(var g=0,E=0,S=0;S<u.length;++S){var K=u[S];g+=K.chunkSize(),E+=K.height,K.parent=this}this.size=g,this.height=E,this.parent=null}se.prototype={chunkSize:function(){return this.size},removeInner:function(u,g){this.size-=g;for(var E=0;E<this.children.length;++E){var S=this.children[E],K=S.chunkSize();if(u<K){var Z=Math.min(g,K-u),ue=S.height;if(S.removeInner(u,Z),this.height-=ue-S.height,K==Z&&(this.children.splice(E--,1),S.parent=null),(g-=Z)==0)break;u=0}else u-=K}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof ee))){var be=[];this.collapse(be),this.children=[new ee(be)],this.children[0].parent=this}},collapse:function(u){for(var g=0;g<this.children.length;++g)this.children[g].collapse(u)},insertInner:function(u,g,E){this.size+=g.length,this.height+=E;for(var S=0;S<this.children.length;++S){var K=this.children[S],Z=K.chunkSize();if(u<=Z){if(K.insertInner(u,g,E),K.lines&&K.lines.length>50){for(var ue=K.lines.length%25+25,be=ue;be<K.lines.length;){var ke=new ee(K.lines.slice(be,be+=25));K.height-=ke.height,this.children.splice(++S,0,ke),ke.parent=this}K.lines=K.lines.slice(0,ue),this.maybeSpill()}break}u-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var u=this;do{var g=u.children.splice(u.children.length-5,5),E=new se(g);if(u.parent){u.size-=E.size,u.height-=E.height;var K=nt(u.parent.children,u);u.parent.children.splice(K+1,0,E)}else{var S=new se(u.children);S.parent=u,u.children=[S,E],u=S}E.parent=u.parent}while(u.children.length>10);u.parent.maybeSpill()}},iterN:function(u,g,E){for(var S=0;S<this.children.length;++S){var K=this.children[S],Z=K.chunkSize();if(u<Z){var ue=Math.min(g,Z-u);if(K.iterN(u,ue,E))return!0;if((g-=ue)==0)break;u=0}else u-=Z}}};var ge=function(u,g,E){if(E)for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);this.doc=u,this.node=g};ge.prototype.clear=function(){var u=this.doc.cm,g=this.line.widgets,E=this.line,S=Ve(E);if(!(S==null||!g)){for(var K=0;K<g.length;++K)g[K]==this&&g.splice(K--,1);g.length||(E.widgets=null);var Z=zl(this);Rs(E,Math.max(0,E.height-Z)),u&&(Js(u,function(){Oe(u,E,-Z),Sc(u,S,"widget")}),xs(u,"lineWidgetCleared",u,this,S))}},ge.prototype.changed=function(){var u=this,g=this.height,E=this.doc.cm,S=this.line;this.height=null;var K=zl(this)-g;K&&(_i(this.doc,S)||Rs(S,S.height+K),E&&Js(E,function(){E.curOp.forceUpdate=!0,Oe(E,S,K),xs(E,"lineWidgetChanged",E,u,Ve(S))}))},Nt(ge);function Oe(u,g,E){Yi(g)<(u.curOp&&u.curOp.scrollTop||u.doc.scrollTop)&&lc(u,E)}function Ie(u,g,E,S){var K=new ge(u,E,S),Z=u.cm;return Z&&K.noHScroll&&(Z.display.alignWidgets=!0),Y(u,g,"widget",function(ue){var be=ue.widgets||(ue.widgets=[]);if(K.insertAt==null?be.push(K):be.splice(Math.min(be.length,Math.max(0,K.insertAt)),0,K),K.line=ue,Z&&!_i(u,ue)){var ke=Yi(ue)<u.scrollTop;Rs(ue,ue.height+zl(K)),ke&&lc(Z,K.height),Z.curOp.forceUpdate=!0}return!0}),Z&&xs(Z,"lineWidgetAdded",Z,K,typeof g=="number"?g:Ve(g)),K}var Ge=0,Ze=function(u,g){this.lines=[],this.type=g,this.doc=u,this.id=++Ge};Ze.prototype.clear=function(){if(!this.explicitlyCleared){var u=this.doc.cm,g=u&&!u.curOp;if(g&&Tc(u),Qt(this,"clear")){var E=this.find();E&&xs(this,"clear",E.from,E.to)}for(var S=null,K=null,Z=0;Z<this.lines.length;++Z){var ue=this.lines[Z],be=Gs(ue.markedSpans,this);u&&!this.collapsed?Sc(u,Ve(ue),"text"):u&&(be.to!=null&&(K=Ve(ue)),be.from!=null&&(S=Ve(ue))),ue.markedSpans=oA(ue.markedSpans,be),be.from==null&&this.collapsed&&!_i(this.doc,ue)&&u&&Rs(ue,nl(u.display))}if(u&&this.collapsed&&!u.options.lineWrapping)for(var ke=0;ke<this.lines.length;++ke){var Ne=Or(this.lines[ke]),ft=mi(Ne);ft>u.display.maxLineLength&&(u.display.maxLine=Ne,u.display.maxLineLength=ft,u.display.maxLineChanged=!0)}S!=null&&u&&this.collapsed&&rl(u,S,K+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,u&&hA(u.doc)),u&&xs(u,"markerCleared",u,this,S,K),g&&IA(u),this.parent&&this.parent.clear()}},Ze.prototype.find=function(u,g){u==null&&this.type=="bookmark"&&(u=1);for(var E,S,K=0;K<this.lines.length;++K){var Z=this.lines[K],ue=Gs(Z.markedSpans,this);if(ue.from!=null&&(E=fn(g?Z:Ve(Z),ue.from),u==-1))return E;if(ue.to!=null&&(S=fn(g?Z:Ve(Z),ue.to),u==1))return S}return E&&{from:E,to:S}},Ze.prototype.changed=function(){var u=this,g=this.find(-1,!0),E=this,S=this.doc.cm;!g||!S||Js(S,function(){var K=g.line,Z=Ve(g.line),ue=JA(S,Z);if(ue&&(Md(ue),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!_i(E.doc,K)&&E.height!=null){var be=E.height;E.height=null;var ke=zl(E)-be;ke&&Rs(K,K.height+ke)}xs(S,"markerChanged",S,u)})},Ze.prototype.attachLine=function(u){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(!g.maybeHiddenMarkers||nt(g.maybeHiddenMarkers,this)==-1)&&(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(u)},Ze.prototype.detachLine=function(u){if(this.lines.splice(nt(this.lines,u),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},Nt(Ze);function dt(u,g,E,S,K){if(S&&S.shared)return pt(u,g,E,S,K);if(u.cm&&!u.cm.curOp)return Po(u.cm,dt)(u,g,E,S,K);var Z=new Ze(u,K),ue=dr(g,E);if(S&&Te(S,Z,!1),ue>0||ue==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=vt("span",[Z.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(oi(u,g.line,g,E,Z)||g.line!=E.line&&oi(u,E.line,g,E,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ba()}Z.addToHistory&&Jr(u,{from:g,to:E,origin:"markText"},u.sel,NaN);var be=g.line,ke=u.cm,Ne;if(u.iter(be,E.line+1,function(Mt){ke&&Z.collapsed&&!ke.options.lineWrapping&&Or(Mt)==ke.display.maxLine&&(Ne=!0),Z.collapsed&&be!=g.line&&Rs(Mt,0),el(Mt,new uo(Z,be==g.line?g.ch:null,be==E.line?E.ch:null),u.cm&&u.cm.curOp),++be}),Z.collapsed&&u.iter(g.line,E.line+1,function(Mt){_i(u,Mt)&&Rs(Mt,0)}),Z.clearOnEnter&&Qe(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(La(),(u.history.done.length||u.history.undone.length)&&u.clearHistory()),Z.collapsed&&(Z.id=++Ge,Z.atomic=!0),ke){if(Ne&&(ke.curOp.updateMaxLine=!0),Z.collapsed)rl(ke,g.line,E.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var ft=g.line;ft<=E.line;ft++)Sc(ke,ft,"text");Z.atomic&&hA(ke.doc),xs(ke,"markerAdded",ke,Z)}return Z}var ct=function(u,g){this.markers=u,this.primary=g;for(var E=0;E<u.length;++E)u[E].parent=this};ct.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var u=0;u<this.markers.length;++u)this.markers[u].clear();xs(this,"clear")}},ct.prototype.find=function(u,g){return this.primary.find(u,g)},Nt(ct);function pt(u,g,E,S,K){S=Te(S),S.shared=!1;var Z=[dt(u,g,E,S,K)],ue=Z[0],be=S.widgetNode;return la(u,function(ke){be&&(S.widgetNode=be.cloneNode(!0)),Z.push(dt(ke,Ci(ke,g),Ci(ke,E),S,K));for(var Ne=0;Ne<ke.linked.length;++Ne)if(ke.linked[Ne].isParent)return;ue=Xn(Z)}),new ct(Z,ue)}function bt(u){return u.findMarks(fn(u.first,0),u.clipPos(fn(u.lastLine())),function(g){return g.parent})}function Bt(u,g){for(var E=0;E<g.length;E++){var S=g[E],K=S.find(),Z=u.clipPos(K.from),ue=u.clipPos(K.to);if(dr(Z,ue)){var be=dt(u,Z,ue,S.primary,S.primary.type);S.markers.push(be),be.parent=S}}}function wt(u){for(var g=function(S){var K=u[S],Z=[K.primary.doc];la(K.primary.doc,function(ke){return Z.push(ke)});for(var ue=0;ue<K.markers.length;ue++){var be=K.markers[ue];nt(Z,be.doc)==-1&&(be.parent=null,K.markers.splice(ue--,1))}},E=0;E<u.length;E++)g(E)}var It=0,Pt=function(u,g,E,S,K){if(!(this instanceof Pt))return new Pt(u,g,E,S,K);E==null&&(E=0),se.call(this,[new ee([new Ua("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var Z=fn(E,0);this.sel=Ga(Z),this.history=new Pc(null),this.id=++It,this.modeOption=g,this.lineSep=S,this.direction=K=="rtl"?"rtl":"ltr",this.extend=!1,typeof u=="string"&&(u=this.splitLines(u)),ya(this,{from:Z,to:Z,text:u}),ea(this,Ga(Z),Kt)};Pt.prototype=Cr(se.prototype,{constructor:Pt,iter:function(u,g,E){E?this.iterN(u-this.first,g-u,E):this.iterN(this.first,this.first+this.size,u)},insert:function(u,g){for(var E=0,S=0;S<g.length;++S)E+=g[S].height;this.insertInner(u-this.first,g,E)},remove:function(u,g){this.removeInner(u-this.first,g)},getValue:function(u){var g=bs(this,this.first,this.first+this.size);return u===!1?g:g.join(u||this.lineSeparator())},setValue:ms(function(u){var g=fn(this.first,0),E=this.first+this.size-1;uc(this,{from:g,to:fn(E,wr(this,E).text.length),text:this.splitLines(u),origin:"setValue",full:!0},!0),this.cm&&Qs(this.cm,0,0),ea(this,Ga(g),Kt)}),replaceRange:function(u,g,E,S){g=Ci(this,g),E=E?Ci(this,E):g,C(this,u,g,E,S)},getRange:function(u,g,E){var S=Fa(this,Ci(this,u),Ci(this,g));return E===!1?S:E===""?S.join(""):S.join(E||this.lineSeparator())},getLine:function(u){var g=this.getLineHandle(u);return g&&g.text},getLineHandle:function(u){if(xn(this,u))return wr(this,u)},getLineNumber:function(u){return Ve(u)},getLineHandleVisualStart:function(u){return typeof u=="number"&&(u=wr(this,u)),Or(u)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(u){return Ci(this,u)},getCursor:function(u){var g=this.sel.primary(),E;return u==null||u=="head"?E=g.head:u=="anchor"?E=g.anchor:u=="end"||u=="to"||u===!1?E=g.to():E=g.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ms(function(u,g,E){Ou(this,Ci(this,typeof u=="number"?fn(u,g||0):u),null,E)}),setSelection:ms(function(u,g,E){Ou(this,Ci(this,u),Ci(this,g||u),E)}),extendSelection:ms(function(u,g,E){Is(this,Ci(this,u),g&&Ci(this,g),E)}),extendSelections:ms(function(u,g){ah(this,rA(this,u),g)}),extendSelectionsBy:ms(function(u,g){var E=Fn(this.sel.ranges,u);ah(this,rA(this,E),g)}),setSelections:ms(function(u,g,E){if(u.length){for(var S=[],K=0;K<u.length;K++)S[K]=new Bo(Ci(this,u[K].anchor),Ci(this,u[K].head||u[K].anchor));g==null&&(g=Math.min(u.length-1,this.sel.primIndex)),ea(this,uA(this.cm,S,g),E)}}),addSelection:ms(function(u,g,E){var S=this.sel.ranges.slice(0);S.push(new Bo(Ci(this,u),Ci(this,g||u))),ea(this,uA(this.cm,S,S.length-1),E)}),getSelection:function(u){for(var g=this.sel.ranges,E,S=0;S<g.length;S++){var K=Fa(this,g[S].from(),g[S].to());E=E?E.concat(K):K}return u===!1?E:E.join(u||this.lineSeparator())},getSelections:function(u){for(var g=[],E=this.sel.ranges,S=0;S<E.length;S++){var K=Fa(this,E[S].from(),E[S].to());u!==!1&&(K=K.join(u||this.lineSeparator())),g[S]=K}return g},replaceSelection:function(u,g,E){for(var S=[],K=0;K<this.sel.ranges.length;K++)S[K]=u;this.replaceSelections(S,g,E||"+input")},replaceSelections:ms(function(u,g,E){for(var S=[],K=this.sel,Z=0;Z<K.ranges.length;Z++){var ue=K.ranges[Z];S[Z]={from:ue.from(),to:ue.to(),text:this.splitLines(u[Z]),origin:E}}for(var be=g&&g!="end"&&oh(this,S,g),ke=S.length-1;ke>=0;ke--)uc(this,S[ke]);be?su(this,be):this.cm&&Ms(this.cm)}),undo:ms(function(){Il(this,"undo")}),redo:ms(function(){Il(this,"redo")}),undoSelection:ms(function(){Il(this,"undo",!0)}),redoSelection:ms(function(){Il(this,"redo",!0)}),setExtending:function(u){this.extend=u},getExtending:function(){return this.extend},historySize:function(){for(var u=this.history,g=0,E=0,S=0;S<u.done.length;S++)u.done[S].ranges||++g;for(var K=0;K<u.undone.length;K++)u.undone[K].ranges||++E;return{undo:g,redo:E}},clearHistory:function(){var u=this;this.history=new Pc(this.history),la(this,function(g){return g.history=u.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(u){return u&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(u){return this.history.generation==(u||this.cleanGeneration)},getHistory:function(){return{done:Bu(this.history.done),undone:Bu(this.history.undone)}},setHistory:function(u){var g=this.history=new Pc(this.history);g.done=Bu(u.done.slice(0),null,!0),g.undone=Bu(u.undone.slice(0),null,!0)},setGutterMarker:ms(function(u,g,E){return Y(this,u,"gutter",function(S){var K=S.gutterMarkers||(S.gutterMarkers={});return K[g]=E,!E&&ce(K)&&(S.gutterMarkers=null),!0})}),clearGutter:ms(function(u){var g=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[u]&&Y(g,E,"gutter",function(){return E.gutterMarkers[u]=null,ce(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(u){var g;if(typeof u=="number"){if(!xn(this,u)||(g=u,u=wr(this,u),!u))return null}else if(g=Ve(u),g==null)return null;return{line:g,handle:u,text:u.text,gutterMarkers:u.gutterMarkers,textClass:u.textClass,bgClass:u.bgClass,wrapClass:u.wrapClass,widgets:u.widgets}},addLineClass:ms(function(u,g,E){return Y(this,u,g=="gutter"?"gutter":"class",function(S){var K=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(!S[K])S[K]=E;else{if(Me(E).test(S[K]))return!1;S[K]+=" "+E}return!0})}),removeLineClass:ms(function(u,g,E){return Y(this,u,g=="gutter"?"gutter":"class",function(S){var K=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",Z=S[K];if(Z)if(E==null)S[K]=null;else{var ue=Z.match(Me(E));if(!ue)return!1;var be=ue.index+ue[0].length;S[K]=Z.slice(0,ue.index)+(!ue.index||be==Z.length?"":" ")+Z.slice(be)||null}else return!1;return!0})}),addLineWidget:ms(function(u,g,E){return Ie(this,u,g,E)}),removeLineWidget:function(u){u.clear()},markText:function(u,g,E){return dt(this,Ci(this,u),Ci(this,g),E,E&&E.type||"range")},setBookmark:function(u,g){var E={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return u=Ci(this,u),dt(this,u,u,E,"bookmark")},findMarksAt:function(u){u=Ci(this,u);var g=[],E=wr(this,u.line).markedSpans;if(E)for(var S=0;S<E.length;++S){var K=E[S];(K.from==null||K.from<=u.ch)&&(K.to==null||K.to>=u.ch)&&g.push(K.marker.parent||K.marker)}return g},findMarks:function(u,g,E){u=Ci(this,u),g=Ci(this,g);var S=[],K=u.line;return this.iter(u.line,g.line+1,function(Z){var ue=Z.markedSpans;if(ue)for(var be=0;be<ue.length;be++){var ke=ue[be];!(ke.to!=null&&K==u.line&&u.ch>=ke.to||ke.from==null&&K!=u.line||ke.from!=null&&K==g.line&&ke.from>=g.ch)&&(!E||E(ke.marker))&&S.push(ke.marker.parent||ke.marker)}++K}),S},getAllMarks:function(){var u=[];return this.iter(function(g){var E=g.markedSpans;if(E)for(var S=0;S<E.length;++S)E[S].from!=null&&u.push(E[S].marker)}),u},posFromIndex:function(u){var g,E=this.first,S=this.lineSeparator().length;return this.iter(function(K){var Z=K.text.length+S;if(Z>u)return g=u,!0;u-=Z,++E}),Ci(this,fn(E,g))},indexFromPos:function(u){u=Ci(this,u);var g=u.ch;if(u.line<this.first||u.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,u.line,function(S){g+=S.text.length+E}),g},copy:function(u){var g=new Pt(bs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,u&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(u){u||(u={});var g=this.first,E=this.first+this.size;u.from!=null&&u.from>g&&(g=u.from),u.to!=null&&u.to<E&&(E=u.to);var S=new Pt(bs(this,g,E),u.mode||this.modeOption,g,this.lineSep,this.direction);return u.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:u.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:u.sharedHist}],Bt(S,bt(this)),S},unlinkDoc:function(u){if(u instanceof qo&&(u=u.doc),this.linked)for(var g=0;g<this.linked.length;++g){var E=this.linked[g];if(E.doc==u){this.linked.splice(g,1),u.unlinkDoc(this),wt(bt(this));break}}if(u.history==this.history){var S=[u.id];la(u,function(K){return S.push(K.id)},!0),u.history=new Pc(null),u.history.done=Bu(this.history.done,S),u.history.undone=Bu(this.history.undone,S)}},iterLinkedDocs:function(u){la(this,u)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(u){return this.lineSep?u.split(this.lineSep):ar(u)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ms(function(u){u!="rtl"&&(u="ltr"),u!=this.direction&&(this.direction=u,this.iter(function(g){return g.order=null}),this.cm&&Yu(this.cm))})}),Pt.prototype.eachLine=Pt.prototype.iter;var Lt=0;function sn(u){var g=this;if(Cn(g),!(at(g,u)||BA(g.display,u))){rn(u),p&&(Lt=+new Date);var E=eu(g,u,!0),S=u.dataTransfer.files;if(!(!E||g.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var K=S.length,Z=Array(K),ue=0,be=function(){++ue==K&&Po(g,function(){E=Ci(g.doc,E);var Yt={from:E,to:E,text:g.doc.splitLines(Z.filter(function(wn){return wn!=null}).join(g.doc.lineSeparator())),origin:"paste"};uc(g.doc,Yt),su(g.doc,Ga(Ci(g.doc,E),Ci(g.doc,ga(Yt))))})()},ke=function(Yt,wn){if(g.options.allowDropFileTypes&&nt(g.options.allowDropFileTypes,Yt.type)==-1){be();return}var Ln=new FileReader;Ln.onerror=function(){return be()},Ln.onload=function(){var Hn=Ln.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Hn)){be();return}Z[wn]=Hn,be()},Ln.readAsText(Yt)},Ne=0;Ne<S.length;Ne++)ke(S[Ne],Ne);else{if(g.state.draggingText&&g.doc.sel.contains(E)>-1){g.state.draggingText(u),setTimeout(function(){return g.display.input.focus()},20);return}try{var ft=u.dataTransfer.getData("Text");if(ft){var Mt;if(g.state.draggingText&&!g.state.draggingText.copy&&(Mt=g.listSelections()),Ys(g.doc,Ga(E,E)),Mt)for(var tn=0;tn<Mt.length;++tn)C(g.doc,"",Mt[tn].anchor,Mt[tn].head,"drag");g.replaceSelection(ft,"around","paste"),g.display.input.focus()}}catch{}}}}function ln(u,g){if(p&&(!u.state.draggingText||+new Date-Lt<100)){mr(g);return}if(!(at(u,g)||BA(u.display,g))&&(g.dataTransfer.setData("Text",u.getSelection()),g.dataTransfer.effectAllowed="copyMove",g.dataTransfer.setDragImage&&!N)){var E=Se("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",D&&(E.width=E.height=1,u.display.wrapper.appendChild(E),E._top=E.offsetTop),g.dataTransfer.setDragImage(E,0,0),D&&E.parentNode.removeChild(E)}}function on(u,g){var E=eu(u,g);if(E){var S=document.createDocumentFragment();Jc(u,E,S),u.display.dragCursor||(u.display.dragCursor=Se("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),u.display.lineSpace.insertBefore(u.display.dragCursor,u.display.cursorDiv)),qe(u.display.dragCursor,S)}}function Cn(u){u.display.dragCursor&&(u.display.lineSpace.removeChild(u.display.dragCursor),u.display.dragCursor=null)}function Mn(u){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),E=[],S=0;S<g.length;S++){var K=g[S].CodeMirror;K&&E.push(K)}E.length&&E[0].operation(function(){for(var Z=0;Z<E.length;Z++)u(E[Z])})}}var ir=!1;function Vn(){ir||(kn(),ir=!0)}function kn(){var u;Qe(window,"resize",function(){u==null&&(u=setTimeout(function(){u=null,Mn(Er)},100))}),Qe(window,"blur",function(){return Mn(Go)})}function Er(u){var g=u.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,u.setSize()}for(var Vr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ci=0;ci<10;ci++)Vr[ci+48]=Vr[ci+96]=String(ci);for(var Yo=65;Yo<=90;Yo++)Vr[Yo]=String.fromCharCode(Yo);for(var bo=1;bo<=12;bo++)Vr[bo+111]=Vr[bo+63235]="F"+bo;var Ro={};Ro.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ro.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ro.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ro.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ro.default=q?Ro.macDefault:Ro.pcDefault;function Ss(u){var g=u.split(/-(?!$)/);u=g[g.length-1];for(var E,S,K,Z,ue=0;ue<g.length-1;ue++){var be=g[ue];if(/^(cmd|meta|m)$/i.test(be))Z=!0;else if(/^a(lt)?$/i.test(be))E=!0;else if(/^(c|ctrl|control)$/i.test(be))S=!0;else if(/^s(hift)?$/i.test(be))K=!0;else throw new Error("Unrecognized modifier name: "+be)}return E&&(u="Alt-"+u),S&&(u="Ctrl-"+u),Z&&(u="Cmd-"+u),K&&(u="Shift-"+u),u}function to(u){var g={};for(var E in u)if(u.hasOwnProperty(E)){var S=u[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(S=="..."){delete u[E];continue}for(var K=Fn(E.split(" "),Ss),Z=0;Z<K.length;Z++){var ue=void 0,be=void 0;Z==K.length-1?(be=K.join(" "),ue=S):(be=K.slice(0,Z+1).join(" "),ue="...");var ke=g[be];if(!ke)g[be]=ue;else if(ke!=ue)throw new Error("Inconsistent bindings for "+be)}delete u[E]}for(var Ne in g)u[Ne]=g[Ne];return u}function qi(u,g,E,S){g=ta(g);var K=g.call?g.call(u,S):g[u];if(K===!1)return"nothing";if(K==="...")return"multi";if(K!=null&&E(K))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return qi(u,g.fallthrough,E,S);for(var Z=0;Z<g.fallthrough.length;Z++){var ue=qi(u,g.fallthrough[Z],E,S);if(ue)return ue}}}function va(u){var g=typeof u=="string"?u:Vr[u.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function Ca(u,g,E){var S=u;return g.altKey&&S!="Alt"&&(u="Alt-"+u),(fe?g.metaKey:g.ctrlKey)&&S!="Ctrl"&&(u="Ctrl-"+u),(fe?g.ctrlKey:g.metaKey)&&S!="Mod"&&(u="Cmd-"+u),!E&&g.shiftKey&&S!="Shift"&&(u="Shift-"+u),u}function _a(u,g){if(D&&u.keyCode==34&&u.char)return!1;var E=Vr[u.keyCode];return E==null||u.altGraphKey?!1:(u.keyCode==3&&u.code&&(E=u.code),Ca(E,u,g))}function ta(u){return typeof u=="string"?Ro[u]:u}function yl(u,g){for(var E=u.doc.sel.ranges,S=[],K=0;K<E.length;K++){for(var Z=g(E[K]);S.length&&dr(Z.from,Xn(S).to)<=0;){var ue=S.pop();if(dr(ue.from,Z.from)<0){Z.from=ue.from;break}}S.push(Z)}Js(u,function(){for(var be=S.length-1;be>=0;be--)C(u.doc,"",S[be].from,S[be].to,"+delete");Ms(u)})}function DA(u,g,E){var S=Et(u.text,g+E,E);return S<0||S>u.text.length?null:S}function ql(u,g,E){var S=DA(u,g.ch,E);return S==null?null:new fn(g.line,S,E<0?"after":"before")}function FA(u,g,E,S,K){if(u){g.doc.direction=="rtl"&&(K=-K);var Z=_e(E,g.doc.direction);if(Z){var ue=K<0?Xn(Z):Z[0],be=K<0==(ue.level==1),ke=be?"after":"before",Ne;if(ue.level>0||g.doc.direction=="rtl"){var ft=Na(g,E);Ne=K<0?E.text.length-1:0;var Mt=tl(g,ft,Ne).top;Ne=Ht(function(tn){return tl(g,ft,tn).top==Mt},K<0==(ue.level==1)?ue.from:ue.to-1,Ne),ke=="before"&&(Ne=DA(E,Ne,1))}else Ne=K<0?ue.to:ue.from;return new fn(S,Ne,ke)}}return new fn(S,K<0?E.text.length:0,K<0?"before":"after")}function al(u,g,E,S){var K=_e(g,u.doc.direction);if(!K)return ql(g,E,S);E.ch>=g.text.length?(E.ch=g.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var Z=He(K,E.ch,E.sticky),ue=K[Z];if(u.doc.direction=="ltr"&&ue.level%2==0&&(S>0?ue.to>E.ch:ue.from<E.ch))return ql(g,E,S);var be=function($n,gr){return DA(g,$n instanceof fn?$n.ch:$n,gr)},ke,Ne=function($n){return u.options.lineWrapping?(ke=ke||Na(u,g),us(u,g,ke,$n)):{begin:0,end:g.text.length}},ft=Ne(E.sticky=="before"?be(E,-1):E.ch);if(u.doc.direction=="rtl"||ue.level==1){var Mt=ue.level==1==S<0,tn=be(E,Mt?1:-1);if(tn!=null&&(Mt?tn<=ue.to&&tn<=ft.end:tn>=ue.from&&tn>=ft.begin)){var Yt=Mt?"before":"after";return new fn(E.line,tn,Yt)}}var wn=function($n,gr,Ar){for(var Rr=function(Oo,ra){return ra?new fn(E.line,be(Oo,1),"before"):new fn(E.line,Oo,"after")};$n>=0&&$n<K.length;$n+=gr){var ii=K[$n],kr=gr>0==(ii.level!=1),ro=kr?Ar.begin:be(Ar.end,-1);if(ii.from<=ro&&ro<ii.to||(ro=kr?ii.from:be(ii.to,-1),Ar.begin<=ro&&ro<Ar.end))return Rr(ro,kr)}},Ln=wn(Z+S,S,ft);if(Ln)return Ln;var Hn=S>0?ft.end:be(ft.begin,-1);return Hn!=null&&!(S>0&&Hn==g.text.length)&&(Ln=wn(S>0?0:K.length-1,S,Ne(Hn)),Ln)?Ln:null}var Iu={selectAll:sl,singleSelection:function(u){return u.setSelection(u.getCursor("anchor"),u.getCursor("head"),Kt)},killLine:function(u){return yl(u,function(g){if(g.empty()){var E=wr(u.doc,g.head.line).text.length;return g.head.ch==E&&g.head.line<u.lastLine()?{from:g.head,to:fn(g.head.line+1,0)}:{from:g.head,to:fn(g.head.line,E)}}else return{from:g.from(),to:g.to()}})},deleteLine:function(u){return yl(u,function(g){return{from:fn(g.from().line,0),to:Ci(u.doc,fn(g.to().line+1,0))}})},delLineLeft:function(u){return yl(u,function(g){return{from:fn(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(u){return yl(u,function(g){var E=u.charCoords(g.head,"div").top+5,S=u.coordsChar({left:0,top:E},"div");return{from:S,to:g.from()}})},delWrappedLineRight:function(u){return yl(u,function(g){var E=u.charCoords(g.head,"div").top+5,S=u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:E},"div");return{from:g.from(),to:S}})},undo:function(u){return u.undo()},redo:function(u){return u.redo()},undoSelection:function(u){return u.undoSelection()},redoSelection:function(u){return u.redoSelection()},goDocStart:function(u){return u.extendSelection(fn(u.firstLine(),0))},goDocEnd:function(u){return u.extendSelection(fn(u.lastLine()))},goLineStart:function(u){return u.extendSelectionsBy(function(g){return Vl(u,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(u){return u.extendSelectionsBy(function(g){return qu(u,g.head)},{origin:"+move",bias:1})},goLineEnd:function(u){return u.extendSelectionsBy(function(g){return dA(u,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(u){return u.extendSelectionsBy(function(g){var E=u.cursorCoords(g.head,"div").top+5;return u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:E},"div")},Rt)},goLineLeft:function(u){return u.extendSelectionsBy(function(g){var E=u.cursorCoords(g.head,"div").top+5;return u.coordsChar({left:0,top:E},"div")},Rt)},goLineLeftSmart:function(u){return u.extendSelectionsBy(function(g){var E=u.cursorCoords(g.head,"div").top+5,S=u.coordsChar({left:0,top:E},"div");return S.ch<u.getLine(S.line).search(/\S/)?qu(u,g.head):S},Rt)},goLineUp:function(u){return u.moveV(-1,"line")},goLineDown:function(u){return u.moveV(1,"line")},goPageUp:function(u){return u.moveV(-1,"page")},goPageDown:function(u){return u.moveV(1,"page")},goCharLeft:function(u){return u.moveH(-1,"char")},goCharRight:function(u){return u.moveH(1,"char")},goColumnLeft:function(u){return u.moveH(-1,"column")},goColumnRight:function(u){return u.moveH(1,"column")},goWordLeft:function(u){return u.moveH(-1,"word")},goGroupRight:function(u){return u.moveH(1,"group")},goGroupLeft:function(u){return u.moveH(-1,"group")},goWordRight:function(u){return u.moveH(1,"word")},delCharBefore:function(u){return u.deleteH(-1,"codepoint")},delCharAfter:function(u){return u.deleteH(1,"char")},delWordBefore:function(u){return u.deleteH(-1,"word")},delWordAfter:function(u){return u.deleteH(1,"word")},delGroupBefore:function(u){return u.deleteH(-1,"group")},delGroupAfter:function(u){return u.deleteH(1,"group")},indentAuto:function(u){return u.indentSelection("smart")},indentMore:function(u){return u.indentSelection("add")},indentLess:function(u){return u.indentSelection("subtract")},insertTab:function(u){return u.replaceSelection("	")},insertSoftTab:function(u){for(var g=[],E=u.listSelections(),S=u.options.tabSize,K=0;K<E.length;K++){var Z=E[K].from(),ue=Re(u.getLine(Z.line),Z.ch,S);g.push(nn(S-ue%S))}u.replaceSelections(g)},defaultTab:function(u){u.somethingSelected()?u.indentSelection("add"):u.execCommand("insertTab")},transposeChars:function(u){return Js(u,function(){for(var g=u.listSelections(),E=[],S=0;S<g.length;S++)if(g[S].empty()){var K=g[S].head,Z=wr(u.doc,K.line).text;if(Z){if(K.ch==Z.length&&(K=new fn(K.line,K.ch-1)),K.ch>0)K=new fn(K.line,K.ch+1),u.replaceRange(Z.charAt(K.ch-1)+Z.charAt(K.ch-2),fn(K.line,K.ch-2),K,"+transpose");else if(K.line>u.doc.first){var ue=wr(u.doc,K.line-1).text;ue&&(K=new fn(K.line,1),u.replaceRange(Z.charAt(0)+u.doc.lineSeparator()+ue.charAt(ue.length-1),fn(K.line-1,ue.length-1),K,"+transpose"))}}E.push(new Bo(K,K))}u.setSelections(E)})},newlineAndIndent:function(u){return Js(u,function(){for(var g=u.listSelections(),E=g.length-1;E>=0;E--)u.replaceRange(u.doc.lineSeparator(),g[E].anchor,g[E].head,"+input");g=u.listSelections();for(var S=0;S<g.length;S++)u.indentLine(g[S].from().line,null,!0);Ms(u)})},openLine:function(u){return u.replaceSelection(`
`,"start")},toggleOverwrite:function(u){return u.toggleOverwrite()}};function Vl(u,g){var E=wr(u.doc,g),S=Or(E);return S!=E&&(g=Ve(S)),FA(!0,u,S,g,1)}function dA(u,g){var E=wr(u.doc,g),S=ni(E);return S!=E&&(g=Ve(S)),FA(!0,u,E,g,-1)}function qu(u,g){var E=Vl(u,g.line),S=wr(u.doc,E.line),K=_e(S,u.doc.direction);if(!K||K[0].level==0){var Z=Math.max(E.ch,S.text.search(/\S/)),ue=g.line==E.line&&g.ch<=Z&&g.ch;return fn(E.line,ue?0:Z,E.sticky)}return E}function Hl(u,g,E){if(typeof g=="string"&&(g=Iu[g],!g))return!1;u.display.input.ensurePolled();var S=u.display.shift,K=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),E&&(u.display.shift=!1),K=g(u)!=gt}finally{u.display.shift=S,u.state.suppressEdits=!1}return K}function cc(u,g,E){for(var S=0;S<u.state.keyMaps.length;S++){var K=qi(g,u.state.keyMaps[S],E,u);if(K)return K}return u.options.extraKeys&&qi(g,u.options.extraKeys,E,u)||qi(g,u.options.keyMap,E,u)}var qs=new Ue;function os(u,g,E,S){var K=u.state.keySeq;if(K){if(va(g))return"handled";if(/\'$/.test(g)?u.state.keySeq=null:qs.set(50,function(){u.state.keySeq==K&&(u.state.keySeq=null,u.display.input.reset())}),na(u,K+" "+g,E,S))return!0}return na(u,g,E,S)}function na(u,g,E,S){var K=cc(u,g,S);return K=="multi"&&(u.state.keySeq=g),K=="handled"&&xs(u,"keyHandled",u,g,E),(K=="handled"||K=="multi")&&(rn(E),nu(u)),!!K}function Es(u,g){var E=_a(g,!0);return E?g.shiftKey&&!u.state.keySeq?os(u,"Shift-"+E,g,function(S){return Hl(u,S,!0)})||os(u,E,g,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return Hl(u,S)}):os(u,E,g,function(S){return Hl(u,S)}):!1}function Tp(u,g,E){return os(u,"'"+E+"'",g,function(S){return Hl(u,S,!0)})}var hc=null;function cf(u){var g=this;if(!(u.target&&u.target!=g.display.input.getField())&&(g.curOp.focus=je(Gt(g)),!at(g,u))){p&&v<11&&u.keyCode==27&&(u.returnValue=!1);var E=u.keyCode;g.display.shift=E==16||u.shiftKey;var S=Es(g,u);D&&(hc=S?E:null,!S&&E==88&&!Cs&&(q?u.metaKey:u.ctrlKey)&&g.replaceSelection("",null,"cut")),i&&!q&&!S&&E==46&&u.shiftKey&&!u.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)&&$l(g)}}function $l(u){var g=u.display.lineDiv;Pe(g,"CodeMirror-crosshair");function E(S){(S.keyCode==18||!S.altKey)&&(me(g,"CodeMirror-crosshair"),it(document,"keyup",E),it(document,"mouseover",E))}Qe(document,"keyup",E),Qe(document,"mouseover",E)}function LA(u){u.keyCode==16&&(this.doc.sel.shift=!1),at(this,u)}function nd(u){var g=this;if(!(u.target&&u.target!=g.display.input.getField())&&!(BA(g.display,u)||at(g,u)||u.ctrlKey&&!u.altKey||q&&u.metaKey)){var E=u.keyCode,S=u.charCode;if(D&&E==hc){hc=null,rn(u);return}if(!(D&&(!u.which||u.which<10)&&Es(g,u))){var K=String.fromCharCode(S??E);K!="\b"&&(Tp(g,u,K)||g.display.input.onKeyPress(u))}}}var cu=400,hu=function(u,g,E){this.time=u,this.pos=g,this.button=E};hu.prototype.compare=function(u,g,E){return this.time+cu>u&&dr(g,this.pos)==0&&E==this.button};var Tu,Tl;function lh(u,g){var E=+new Date;return Tl&&Tl.compare(E,u,g)?(Tu=Tl=null,"triple"):Tu&&Tu.compare(E,u,g)?(Tl=new hu(E,u,g),Tu=null,"double"):(Tu=new hu(E,u,g),Tl=null,"single")}function Sh(u){var g=this,E=g.display;if(!(at(g,u)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=u.shiftKey,BA(E,u)){x||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!Vu(g,u)){var S=eu(g,u),K=Jt(u),Z=S?lh(S,K):"single";Ut(g).focus(),K==1&&g.state.selectingText&&g.state.selectingText(u),!(S&&Td(g,K,S,Z,u))&&(K==1?S?hf(g,S,Z,u):Tr(u)==E.scroller&&rn(u):K==2?(S&&Is(g.doc,S),setTimeout(function(){return E.input.focus()},20)):K==3&&(he?g.display.input.onContextMenu(u):eh(g)))}}}function Td(u,g,E,S,K){var Z="Click";return S=="double"?Z="Double"+Z:S=="triple"&&(Z="Triple"+Z),Z=(g==1?"Left":g==2?"Middle":"Right")+Z,os(u,Ca(Z,K),K,function(ue){if(typeof ue=="string"&&(ue=Iu[ue]),!ue)return!1;var be=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),be=ue(u,E)!=gt}finally{u.state.suppressEdits=!1}return be})}function rd(u,g,E){var S=u.getOption("configureMouse"),K=S?S(u,g,E):{};if(K.unit==null){var Z=te?E.shiftKey&&E.metaKey:E.altKey;K.unit=Z?"rectangle":g=="single"?"char":g=="double"?"word":"line"}return(K.extend==null||u.doc.extend)&&(K.extend=u.doc.extend||E.shiftKey),K.addNew==null&&(K.addNew=q?E.metaKey:E.ctrlKey),K.moveOnDrag==null&&(K.moveOnDrag=!(q?E.altKey:E.ctrlKey)),K}function hf(u,g,E,S){p?setTimeout(kt(sc,u),0):u.curOp.focus=je(Gt(u));var K=rd(u,E,S),Z=u.doc.sel,ue;u.options.dragDrop&&br&&!u.isReadOnly()&&E=="single"&&(ue=Z.contains(g))>-1&&(dr((ue=Z.ranges[ue]).from(),g)<0||g.xRel>0)&&(dr(ue.to(),g)>0||g.xRel<0)?Zf(u,S,g,K):df(u,S,g,K)}function Zf(u,g,E,S){var K=u.display,Z=!1,ue=Po(u,function(Ne){x&&(K.scroller.draggable=!1),u.state.draggingText=!1,u.state.delayingBlurEvent&&(u.hasFocus()?u.state.delayingBlurEvent=!1:eh(u)),it(K.wrapper.ownerDocument,"mouseup",ue),it(K.wrapper.ownerDocument,"mousemove",be),it(K.scroller,"dragstart",ke),it(K.scroller,"drop",ue),Z||(rn(Ne),S.addNew||Is(u.doc,E,null,null,S.extend),x&&!N||p&&v==9?setTimeout(function(){K.wrapper.ownerDocument.body.focus({preventScroll:!0}),K.input.focus()},20):K.input.focus())}),be=function(Ne){Z=Z||Math.abs(g.clientX-Ne.clientX)+Math.abs(g.clientY-Ne.clientY)>=10},ke=function(){return Z=!0};x&&(K.scroller.draggable=!0),u.state.draggingText=ue,ue.copy=!S.moveOnDrag,Qe(K.wrapper.ownerDocument,"mouseup",ue),Qe(K.wrapper.ownerDocument,"mousemove",be),Qe(K.scroller,"dragstart",ke),Qe(K.scroller,"drop",ue),u.state.delayingBlurEvent=!0,setTimeout(function(){return K.input.focus()},20),K.scroller.dragDrop&&K.scroller.dragDrop()}function id(u,g,E){if(E=="char")return new Bo(g,g);if(E=="word")return u.findWordAt(g);if(E=="line")return new Bo(fn(g.line,0),Ci(u.doc,fn(g.line+1,0)));var S=E(u,g);return new Bo(S.from,S.to)}function df(u,g,E,S){p&&eh(u);var K=u.display,Z=u.doc;rn(g);var ue,be,ke=Z.sel,Ne=ke.ranges;if(S.addNew&&!S.extend?(be=Z.sel.contains(E),be>-1?ue=Ne[be]:ue=new Bo(E,E)):(ue=Z.sel.primary(),be=Z.sel.primIndex),S.unit=="rectangle")S.addNew||(ue=new Bo(E,E)),E=eu(u,g,!0,!0),be=-1;else{var ft=id(u,E,S.unit);S.extend?ue=ji(ue,ft.anchor,ft.head,S.extend):ue=ft}S.addNew?be==-1?(be=Ne.length,ea(Z,uA(u,Ne.concat([ue]),be),{scroll:!1,origin:"*mouse"})):Ne.length>1&&Ne[be].empty()&&S.unit=="char"&&!S.extend?(ea(Z,uA(u,Ne.slice(0,be).concat(Ne.slice(be+1)),0),{scroll:!1,origin:"*mouse"}),ke=Z.sel):ol(Z,be,ue,$t):(be=0,ea(Z,new is([ue],0),$t),ke=Z.sel);var Mt=E;function tn(Ar){if(dr(Mt,Ar)!=0)if(Mt=Ar,S.unit=="rectangle"){for(var Rr=[],ii=u.options.tabSize,kr=Re(wr(Z,E.line).text,E.ch,ii),ro=Re(wr(Z,Ar.line).text,Ar.ch,ii),Oo=Math.min(kr,ro),ra=Math.max(kr,ro),Ls=Math.min(E.line,Ar.line),Aa=Math.min(u.lastLine(),Math.max(E.line,Ar.line));Ls<=Aa;Ls++){var ka=wr(Z,Ls).text,Ya=_n(ka,Oo,ii);Oo==ra?Rr.push(new Bo(fn(Ls,Ya),fn(Ls,Ya))):ka.length>Ya&&Rr.push(new Bo(fn(Ls,Ya),fn(Ls,_n(ka,ra,ii))))}Rr.length||Rr.push(new Bo(E,E)),ea(Z,uA(u,ke.ranges.slice(0,be).concat(Rr),be),{origin:"*mouse",scroll:!1}),u.scrollIntoView(Ar)}else{var UA=ue,ll=id(u,Ar,S.unit),qa=UA.anchor,cs;dr(ll.anchor,qa)>0?(cs=ll.head,qa=pa(UA.from(),ll.anchor)):(cs=ll.anchor,qa=ls(UA.to(),ll.head));var bi=ke.ranges.slice(0);bi[be]=kd(u,new Bo(Ci(Z,qa),cs)),ea(Z,uA(u,bi,be),$t)}}var Yt=K.wrapper.getBoundingClientRect(),wn=0;function Ln(Ar){var Rr=++wn,ii=eu(u,Ar,!0,S.unit=="rectangle");if(ii)if(dr(ii,Mt)!=0){u.curOp.focus=je(Gt(u)),tn(ii);var kr=ru(K,Z);(ii.line>=kr.to||ii.line<kr.from)&&setTimeout(Po(u,function(){wn==Rr&&Ln(Ar)}),150)}else{var ro=Ar.clientY<Yt.top?-20:Ar.clientY>Yt.bottom?20:0;ro&&setTimeout(Po(u,function(){wn==Rr&&(K.scroller.scrollTop+=ro,Ln(Ar))}),50)}}function Hn(Ar){u.state.selectingText=!1,wn=1/0,Ar&&(rn(Ar),K.input.focus()),it(K.wrapper.ownerDocument,"mousemove",$n),it(K.wrapper.ownerDocument,"mouseup",gr),Z.history.lastSelOrigin=null}var $n=Po(u,function(Ar){Ar.buttons===0||!Jt(Ar)?Hn(Ar):Ln(Ar)}),gr=Po(u,Hn);u.state.selectingText=gr,Qe(K.wrapper.ownerDocument,"mousemove",$n),Qe(K.wrapper.ownerDocument,"mouseup",gr)}function kd(u,g){var E=g.anchor,S=g.head,K=wr(u.doc,E.line);if(dr(E,S)==0&&E.sticky==S.sticky)return g;var Z=_e(K);if(!Z)return g;var ue=He(Z,E.ch,E.sticky),be=Z[ue];if(be.from!=E.ch&&be.to!=E.ch)return g;var ke=ue+(be.from==E.ch==(be.level!=1)?0:1);if(ke==0||ke==Z.length)return g;var Ne;if(S.line!=E.line)Ne=(S.line-E.line)*(u.doc.direction=="ltr"?1:-1)>0;else{var ft=He(Z,S.ch,S.sticky),Mt=ft-ue||(S.ch-E.ch)*(be.level==1?-1:1);ft==ke-1||ft==ke?Ne=Mt<0:Ne=Mt>0}var tn=Z[ke+(Ne?-1:0)],Yt=Ne==(tn.level==1),wn=Yt?tn.from:tn.to,Ln=Yt?"after":"before";return E.ch==wn&&E.sticky==Ln?g:new Bo(new fn(E.line,wn,Ln),S)}function kp(u,g,E,S){var K,Z;if(g.touches)K=g.touches[0].clientX,Z=g.touches[0].clientY;else try{K=g.clientX,Z=g.clientY}catch{return!1}if(K>=Math.floor(u.display.gutters.getBoundingClientRect().right))return!1;S&&rn(g);var ue=u.display,be=ue.lineDiv.getBoundingClientRect();if(Z>be.bottom||!Qt(u,E))return Dn(g);Z-=be.top-ue.viewOffset;for(var ke=0;ke<u.display.gutterSpecs.length;++ke){var Ne=ue.gutters.childNodes[ke];if(Ne&&Ne.getBoundingClientRect().right>=K){var ft=xt(u.doc,Z),Mt=u.display.gutterSpecs[ke];return ut(u,E,u,ft,Mt.className,g),Dn(g)}}}function Vu(u,g){return kp(u,g,"gutterClick",!0)}function Xf(u,g){BA(u.display,g)||Eh(u,g)||at(u,g,"contextmenu")||he||u.display.input.onContextMenu(g)}function Eh(u,g){return Qt(u,"gutterContextMenu")?kp(u,g,"gutterContextMenu",!1):!1}function ff(u){u.display.wrapper.className=u.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+u.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Xh(u)}var Rc={toString:function(){return"CodeMirror.Init"}},pf={},kl={};function fA(u){var g=u.optionHandlers;function E(S,K,Z,ue){u.defaults[S]=K,Z&&(g[S]=ue?function(be,ke,Ne){Ne!=Rc&&Z(be,ke,Ne)}:Z)}u.defineOption=E,u.Init=Rc,E("value","",function(S,K){return S.setValue(K)},!0),E("mode",null,function(S,K){S.doc.modeOption=K,uf(S)},!0),E("indentUnit",2,uf,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(S){jl(S),Xh(S),rl(S)},!0),E("lineSeparator",null,function(S,K){if(S.doc.lineSep=K,!!K){var Z=[],ue=S.doc.first;S.doc.iter(function(ke){for(var Ne=0;;){var ft=ke.text.indexOf(K,Ne);if(ft==-1)break;Ne=ft+K.length,Z.push(fn(ue,ft))}ue++});for(var be=Z.length-1;be>=0;be--)C(S.doc,K,Z[be],fn(Z[be].line,Z[be].ch+K.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,K,Z){S.state.specialChars=new RegExp(K.source+(K.test("	")?"":"|	"),"g"),Z!=Rc&&S.refresh()}),E("specialCharPlaceholder",Nu,function(S){return S.refresh()},!0),E("electricChars",!0),E("inputStyle",ne?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(S,K){return S.getInputField().spellcheck=K},!0),E("autocorrect",!1,function(S,K){return S.getInputField().autocorrect=K},!0),E("autocapitalize",!1,function(S,K){return S.getInputField().autocapitalize=K},!0),E("rtlMoveVisually",!G),E("wholeLineUpdateBefore",!0),E("theme","default",function(S){ff(S),Ol(S)},!0),E("keyMap","default",function(S,K,Z){var ue=ta(K),be=Z!=Rc&&ta(Z);be&&be.detach&&be.detach(S,ue),ue.attach&&ue.attach(S,be||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Pp,!0),E("gutters",[],function(S,K){S.display.gutterSpecs=AA(K,S.options.lineNumbers),Ol(S)},!0),E("fixedGutter",!0,function(S,K){S.display.gutters.style.left=K?mo(S.display)+"px":"0",S.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(S){return Ml(S)},!0),E("scrollbarStyle","native",function(S){ed(S),Ml(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),E("lineNumbers",!1,function(S,K){S.display.gutterSpecs=AA(S.options.gutters,K),Ol(S)},!0),E("firstLineNumber",1,Ol,!0),E("lineNumberFormatter",function(S){return S},Ol,!0),E("showCursorWhenSelecting",!1,xl,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(S,K){K=="nocursor"&&(Go(S),S.display.input.blur()),S.display.input.readOnlyChanged(K)}),E("screenReaderLabel",null,function(S,K){K=K===""?null:K,S.display.input.screenReaderLabelChanged(K)}),E("disableInput",!1,function(S,K){K||S.display.input.reset()},!0),E("dragDrop",!0,Vm),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,xl,!0),E("singleCursorHeightPerLine",!0,xl,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,jl,!0),E("addModeClass",!1,jl,!0),E("pollInterval",100),E("undoDepth",200,function(S,K){return S.doc.history.undoDepth=K}),E("historyEventDelay",1250),E("viewportMargin",10,function(S){return S.refresh()},!0),E("maxHighlightLength",1e4,jl,!0),E("moveInputWithCursor",!0,function(S,K){K||S.display.input.resetPosition()}),E("tabindex",null,function(S,K){return S.display.input.getField().tabIndex=K||""}),E("autofocus",null),E("direction","ltr",function(S,K){return S.doc.setDirection(K)},!0),E("phrases",null)}function Vm(u,g,E){var S=E&&E!=Rc;if(!g!=!S){var K=u.display.dragFunctions,Z=g?Qe:it;Z(u.display.scroller,"dragstart",K.start),Z(u.display.scroller,"dragenter",K.enter),Z(u.display.scroller,"dragover",K.over),Z(u.display.scroller,"dragleave",K.leave),Z(u.display.scroller,"drop",K.drop)}}function Pp(u){u.options.lineWrapping?(Pe(u.display.wrapper,"CodeMirror-wrap"),u.display.sizer.style.minWidth="",u.display.sizerWidth=null):(me(u.display.wrapper,"CodeMirror-wrap"),Ds(u)),Ch(u),rl(u),Xh(u),setTimeout(function(){return Ml(u)},100)}function qo(u,g){var E=this;if(!(this instanceof qo))return new qo(u,g);this.options=g=g?Te(g):{},Te(pf,g,!1);var S=g.value;typeof S=="string"?S=new Pt(S,g.mode,null,g.lineSeparator,g.direction):g.mode&&(S.modeOption=g.mode),this.doc=S;var K=new qo.inputStyles[g.inputStyle](this),Z=this.display=new rh(u,S,K,g);Z.wrapper.CodeMirror=this,ff(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ed(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ue,keySeq:null,specialChars:null},g.autofocus&&!ne&&Z.input.focus(),p&&v<11&&setTimeout(function(){return E.display.input.reset(!0)},20),Kp(this),Vn(),Tc(this),this.curOp.forceUpdate=!0,ws(this,S),g.autofocus&&!ne||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&_h(E)},20):Go(this);for(var ue in kl)kl.hasOwnProperty(ue)&&kl[ue](this,g[ue],Rc);Mr(this),g.finishInit&&g.finishInit(this);for(var be=0;be<Jf.length;++be)Jf[be](this);IA(this),x&&g.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}qo.defaults=pf,qo.optionHandlers=kl;function Kp(u){var g=u.display;Qe(g.scroller,"mousedown",Po(u,Sh)),p&&v<11?Qe(g.scroller,"dblclick",Po(u,function(ke){if(!at(u,ke)){var Ne=eu(u,ke);if(!(!Ne||Vu(u,ke)||BA(u.display,ke))){rn(ke);var ft=u.findWordAt(Ne);Is(u.doc,ft.anchor,ft.head)}}})):Qe(g.scroller,"dblclick",function(ke){return at(u,ke)||rn(ke)}),Qe(g.scroller,"contextmenu",function(ke){return Xf(u,ke)}),Qe(g.input.getField(),"contextmenu",function(ke){g.scroller.contains(ke.target)||Xf(u,ke)});var E,S={end:0};function K(){g.activeTouch&&(E=setTimeout(function(){return g.activeTouch=null},1e3),S=g.activeTouch,S.end=+new Date)}function Z(ke){if(ke.touches.length!=1)return!1;var Ne=ke.touches[0];return Ne.radiusX<=1&&Ne.radiusY<=1}function ue(ke,Ne){if(Ne.left==null)return!0;var ft=Ne.left-ke.left,Mt=Ne.top-ke.top;return ft*ft+Mt*Mt>20*20}Qe(g.scroller,"touchstart",function(ke){if(!at(u,ke)&&!Z(ke)&&!Vu(u,ke)){g.input.ensurePolled(),clearTimeout(E);var Ne=+new Date;g.activeTouch={start:Ne,moved:!1,prev:Ne-S.end<=300?S:null},ke.touches.length==1&&(g.activeTouch.left=ke.touches[0].pageX,g.activeTouch.top=ke.touches[0].pageY)}}),Qe(g.scroller,"touchmove",function(){g.activeTouch&&(g.activeTouch.moved=!0)}),Qe(g.scroller,"touchend",function(ke){var Ne=g.activeTouch;if(Ne&&!BA(g,ke)&&Ne.left!=null&&!Ne.moved&&new Date-Ne.start<300){var ft=u.coordsChar(g.activeTouch,"page"),Mt;!Ne.prev||ue(Ne,Ne.prev)?Mt=new Bo(ft,ft):!Ne.prev.prev||ue(Ne,Ne.prev.prev)?Mt=u.findWordAt(ft):Mt=new Bo(fn(ft.line,0),Ci(u.doc,fn(ft.line+1,0))),u.setSelection(Mt.anchor,Mt.head),u.focus(),rn(ke)}K()}),Qe(g.scroller,"touchcancel",K),Qe(g.scroller,"scroll",function(){g.scroller.clientHeight&&(ps(u,g.scroller.scrollTop),Xs(u,g.scroller.scrollLeft,!0),ut(u,"scroll",u))}),Qe(g.scroller,"mousewheel",function(ke){return ih(u,ke)}),Qe(g.scroller,"DOMMouseScroll",function(ke){return ih(u,ke)}),Qe(g.wrapper,"scroll",function(){return g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),g.dragFunctions={enter:function(ke){at(u,ke)||mr(ke)},over:function(ke){at(u,ke)||(on(u,ke),mr(ke))},start:function(ke){return ln(u,ke)},drop:Po(u,sn),leave:function(ke){at(u,ke)||Cn(u)}};var be=g.input.getField();Qe(be,"keyup",function(ke){return LA.call(u,ke)}),Qe(be,"keydown",Po(u,cf)),Qe(be,"keypress",Po(u,nd)),Qe(be,"focus",function(ke){return _h(u,ke)}),Qe(be,"blur",function(ke){return Go(u,ke)})}var Jf=[];qo.defineInitHook=function(u){return Jf.push(u)};function Bh(u,g,E,S){var K=u.doc,Z;E==null&&(E="add"),E=="smart"&&(K.mode.indent?Z=di(u,g).state:E="prev");var ue=u.options.tabSize,be=wr(K,g),ke=Re(be.text,null,ue);be.stateAfter&&(be.stateAfter=null);var Ne=be.text.match(/^\s*/)[0],ft;if(!S&&!/\S/.test(be.text))ft=0,E="not";else if(E=="smart"&&(ft=K.mode.indent(Z,be.text.slice(Ne.length),be.text),ft==gt||ft>150)){if(!S)return;E="prev"}E=="prev"?g>K.first?ft=Re(wr(K,g-1).text,null,ue):ft=0:E=="add"?ft=ke+u.options.indentUnit:E=="subtract"?ft=ke-u.options.indentUnit:typeof E=="number"&&(ft=ke+E),ft=Math.max(0,ft);var Mt="",tn=0;if(u.options.indentWithTabs)for(var Yt=Math.floor(ft/ue);Yt;--Yt)tn+=ue,Mt+="	";if(tn<ft&&(Mt+=nn(ft-tn)),Mt!=Ne)return C(K,Mt,fn(g,0),fn(g,Ne.length),"+input"),be.stateAfter=null,!0;for(var wn=0;wn<K.sel.ranges.length;wn++){var Ln=K.sel.ranges[wn];if(Ln.head.line==g&&Ln.head.ch<Ne.length){var Hn=fn(g,Ne.length);ol(K,wn,new Bo(Hn,Hn));break}}}var ku=null;function od(u){ku=u}function sd(u,g,E,S,K){var Z=u.doc;u.display.shift=!1,S||(S=Z.sel);var ue=+new Date-200,be=K=="paste"||u.state.pasteIncoming>ue,ke=ar(g),Ne=null;if(be&&S.ranges.length>1)if(ku&&ku.text.join(`
`)==g){if(S.ranges.length%ku.text.length==0){Ne=[];for(var ft=0;ft<ku.text.length;ft++)Ne.push(Z.splitLines(ku.text[ft]))}}else ke.length==S.ranges.length&&u.options.pasteLinesPerSelection&&(Ne=Fn(ke,function($n){return[$n]}));for(var Mt=u.curOp.updateInput,tn=S.ranges.length-1;tn>=0;tn--){var Yt=S.ranges[tn],wn=Yt.from(),Ln=Yt.to();Yt.empty()&&(E&&E>0?wn=fn(wn.line,wn.ch-E):u.state.overwrite&&!be?Ln=fn(Ln.line,Math.min(wr(Z,Ln.line).text.length,Ln.ch+Xn(ke).length)):be&&ku&&ku.lineWise&&ku.text.join(`
`)==ke.join(`
`)&&(wn=Ln=fn(wn.line,0)));var Hn={from:wn,to:Ln,text:Ne?Ne[tn%Ne.length]:ke,origin:K||(be?"paste":u.state.cutIncoming>ue?"cut":"+input")};uc(u.doc,Hn),xs(u,"inputRead",u,Hn)}g&&!be&&Pd(u,g),Ms(u),u.curOp.updateInput<2&&(u.curOp.updateInput=Mt),u.curOp.typing=!0,u.state.pasteIncoming=u.state.cutIncoming=-1}function Ia(u,g){var E=u.clipboardData&&u.clipboardData.getData("Text");if(E)return u.preventDefault(),!g.isReadOnly()&&!g.options.disableInput&&g.hasFocus()&&Js(g,function(){return sd(g,E,0,null,"paste")}),!0}function Pd(u,g){if(!(!u.options.electricChars||!u.options.smartIndent))for(var E=u.doc.sel,S=E.ranges.length-1;S>=0;S--){var K=E.ranges[S];if(!(K.head.ch>100||S&&E.ranges[S-1].head.line==K.head.line)){var Z=u.getModeAt(K.head),ue=!1;if(Z.electricChars){for(var be=0;be<Z.electricChars.length;be++)if(g.indexOf(Z.electricChars.charAt(be))>-1){ue=Bh(u,K.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(wr(u.doc,K.head.line).text.slice(0,K.head.ch))&&(ue=Bh(u,K.head.line,"smart"));ue&&xs(u,"electricInput",u,K.head.line)}}}function ad(u){for(var g=[],E=[],S=0;S<u.doc.sel.ranges.length;S++){var K=u.doc.sel.ranges[S].head.line,Z={anchor:fn(K,0),head:fn(K+1,0)};E.push(Z),g.push(u.getRange(Z.anchor,Z.head))}return{text:g,ranges:E}}function mf(u,g,E,S){u.setAttribute("autocorrect",E?"on":"off"),u.setAttribute("autocapitalize",S?"on":"off"),u.setAttribute("spellcheck",!!g)}function ld(){var u=Se("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=Se("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?u.style.width="1000px":u.setAttribute("wrap","off"),$&&(u.style.border="1px solid black"),g}function Oh(u){var g=u.optionHandlers,E=u.helpers={};u.prototype={constructor:u,focus:function(){Ut(this).focus(),this.display.input.focus()},setOption:function(S,K){var Z=this.options,ue=Z[S];Z[S]==K&&S!="mode"||(Z[S]=K,g.hasOwnProperty(S)&&Po(this,g[S])(this,K,ue),ut(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,K){this.state.keyMaps[K?"push":"unshift"](ta(S))},removeKeyMap:function(S){for(var K=this.state.keyMaps,Z=0;Z<K.length;++Z)if(K[Z]==S||K[Z].name==S)return K.splice(Z,1),!0},addOverlay:ri(function(S,K){var Z=S.token?S:u.getMode(this.options,S);if(Z.startState)throw new Error("Overlays may not be stateful.");an(this.state.overlays,{mode:Z,modeSpec:S,opaque:K&&K.opaque,priority:K&&K.priority||0},function(ue){return ue.priority}),this.state.modeGen++,rl(this)}),removeOverlay:ri(function(S){for(var K=this.state.overlays,Z=0;Z<K.length;++Z){var ue=K[Z].modeSpec;if(ue==S||typeof S=="string"&&ue.name==S){K.splice(Z,1),this.state.modeGen++,rl(this);return}}}),indentLine:ri(function(S,K,Z){typeof K!="string"&&typeof K!="number"&&(K==null?K=this.options.smartIndent?"smart":"prev":K=K?"add":"subtract"),xn(this.doc,S)&&Bh(this,S,K,Z)}),indentSelection:ri(function(S){for(var K=this.doc.sel.ranges,Z=-1,ue=0;ue<K.length;ue++){var be=K[ue];if(be.empty())be.head.line>Z&&(Bh(this,be.head.line,S,!0),Z=be.head.line,ue==this.doc.sel.primIndex&&Ms(this));else{var ke=be.from(),Ne=be.to(),ft=Math.max(Z,ke.line);Z=Math.min(this.lastLine(),Ne.line-(Ne.ch?0:1))+1;for(var Mt=ft;Mt<Z;++Mt)Bh(this,Mt,S);var tn=this.doc.sel.ranges;ke.ch==0&&K.length==tn.length&&tn[ue].from().ch>0&&ol(this.doc,ue,new Bo(ke,tn[ue].to()),Kt)}}}),getTokenAt:function(S,K){return aa(this,S,K)},getLineTokens:function(S,K){return aa(this,fn(S),K,!0)},getTokenTypeAt:function(S){S=Ci(this.doc,S);var K=Ws(this,wr(this.doc,S.line)),Z=0,ue=(K.length-1)/2,be=S.ch,ke;if(be==0)ke=K[2];else for(;;){var Ne=Z+ue>>1;if((Ne?K[Ne*2-1]:0)>=be)ue=Ne;else if(K[Ne*2+1]<be)Z=Ne+1;else{ke=K[Ne*2+2];break}}var ft=ke?ke.indexOf("overlay "):-1;return ft<0?ke:ft==0?null:ke.slice(0,ft-1)},getModeAt:function(S){var K=this.doc.mode;return K.innerMode?u.innerMode(K,this.getTokenAt(S).state).mode:K},getHelper:function(S,K){return this.getHelpers(S,K)[0]},getHelpers:function(S,K){var Z=[];if(!E.hasOwnProperty(K))return Z;var ue=E[K],be=this.getModeAt(S);if(typeof be[K]=="string")ue[be[K]]&&Z.push(ue[be[K]]);else if(be[K])for(var ke=0;ke<be[K].length;ke++){var Ne=ue[be[K][ke]];Ne&&Z.push(Ne)}else be.helperType&&ue[be.helperType]?Z.push(ue[be.helperType]):ue[be.name]&&Z.push(ue[be.name]);for(var ft=0;ft<ue._global.length;ft++){var Mt=ue._global[ft];Mt.pred(be,this)&&nt(Z,Mt.val)==-1&&Z.push(Mt.val)}return Z},getStateAfter:function(S,K){var Z=this.doc;return S=nA(Z,S??Z.first+Z.size-1),di(this,S+1,K).state},cursorCoords:function(S,K){var Z,ue=this.doc.sel.primary();return S==null?Z=ue.head:typeof S=="object"?Z=Ci(this.doc,S):Z=S?ue.from():ue.to(),un(this,Z,K||"page")},charCoords:function(S,K){return Tn(this,Ci(this.doc,S),K||"page")},coordsChar:function(S,K){return S=en(this,S,K||"page"),po(this,S.left,S.top)},lineAtHeight:function(S,K){return S=en(this,{top:S,left:0},K||"page").top,xt(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,K,Z){var ue=!1,be;if(typeof S=="number"){var ke=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>ke&&(S=ke,ue=!0),be=wr(this.doc,S)}else be=S;return oc(this,be,{top:0,left:0},K||"page",Z||ue).top+(ue?this.doc.height-Yi(be):0)},defaultTextHeight:function(){return nl(this.display)},defaultCharWidth:function(){return OA(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,K,Z,ue,be){var ke=this.display;S=un(this,Ci(this.doc,S));var Ne=S.bottom,ft=S.left;if(K.style.position="absolute",K.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(K),ke.sizer.appendChild(K),ue=="over")Ne=S.top;else if(ue=="above"||ue=="near"){var Mt=Math.max(ke.wrapper.clientHeight,this.doc.height),tn=Math.max(ke.sizer.clientWidth,ke.lineSpace.clientWidth);(ue=="above"||S.bottom+K.offsetHeight>Mt)&&S.top>K.offsetHeight?Ne=S.top-K.offsetHeight:S.bottom+K.offsetHeight<=Mt&&(Ne=S.bottom),ft+K.offsetWidth>tn&&(ft=tn-K.offsetWidth)}K.style.top=Ne+"px",K.style.left=K.style.right="",be=="right"?(ft=ke.sizer.clientWidth-K.offsetWidth,K.style.right="0px"):(be=="left"?ft=0:be=="middle"&&(ft=(ke.sizer.clientWidth-K.offsetWidth)/2),K.style.left=ft+"px"),Z&&ac(this,{left:ft,top:Ne,right:ft+K.offsetWidth,bottom:Ne+K.offsetHeight})},triggerOnKeyDown:ri(cf),triggerOnKeyPress:ri(nd),triggerOnKeyUp:LA,triggerOnMouseDown:ri(Sh),execCommand:function(S){if(Iu.hasOwnProperty(S))return Iu[S].call(null,this)},triggerElectric:ri(function(S){Pd(this,S)}),findPosH:function(S,K,Z,ue){var be=1;K<0&&(be=-1,K=-K);for(var ke=Ci(this.doc,S),Ne=0;Ne<K&&(ke=Pi(this.doc,ke,be,Z,ue),!ke.hitSide);++Ne);return ke},moveH:ri(function(S,K){var Z=this;this.extendSelectionsBy(function(ue){return Z.display.shift||Z.doc.extend||ue.empty()?Pi(Z.doc,ue.head,S,K,Z.options.rtlMoveVisually):S<0?ue.from():ue.to()},Rt)}),deleteH:ri(function(S,K){var Z=this.doc.sel,ue=this.doc;Z.somethingSelected()?ue.replaceSelection("",null,"+delete"):yl(this,function(be){var ke=Pi(ue,be.head,S,K,!1);return S<0?{from:ke,to:be.head}:{from:be.head,to:ke}})}),findPosV:function(S,K,Z,ue){var be=1,ke=ue;K<0&&(be=-1,K=-K);for(var Ne=Ci(this.doc,S),ft=0;ft<K;++ft){var Mt=un(this,Ne,"div");if(ke==null?ke=Mt.left:Mt.left=ke,Ne=gf(this,Mt,be,Z),Ne.hitSide)break}return Ne},moveV:ri(function(S,K){var Z=this,ue=this.doc,be=[],ke=!this.display.shift&&!ue.extend&&ue.sel.somethingSelected();if(ue.extendSelectionsBy(function(ft){if(ke)return S<0?ft.from():ft.to();var Mt=un(Z,ft.head,"div");ft.goalColumn!=null&&(Mt.left=ft.goalColumn),be.push(Mt.left);var tn=gf(Z,Mt,S,K);return K=="page"&&ft==ue.sel.primary()&&lc(Z,Tn(Z,tn,"div").top-Mt.top),tn},Rt),be.length)for(var Ne=0;Ne<ue.sel.ranges.length;Ne++)ue.sel.ranges[Ne].goalColumn=be[Ne]}),findWordAt:function(S){var K=this.doc,Z=wr(K,S.line).text,ue=S.ch,be=S.ch;if(Z){var ke=this.getHelper(S,"wordChars");(S.sticky=="before"||be==Z.length)&&ue?--ue:++be;for(var Ne=Z.charAt(ue),ft=We(Ne,ke)?function(Mt){return We(Mt,ke)}:/\s/.test(Ne)?function(Mt){return/\s/.test(Mt)}:function(Mt){return!/\s/.test(Mt)&&!We(Mt)};ue>0&&ft(Z.charAt(ue-1));)--ue;for(;be<Z.length&&ft(Z.charAt(be));)++be}return new Bo(fn(S.line,ue),fn(S.line,be))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Pe(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),ut(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==je(Gt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ri(function(S,K){Qs(this,S,K)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-vu(this)-this.display.barHeight,width:S.scrollWidth-vu(this)-this.display.barWidth,clientHeight:wc(this),clientWidth:Mc(this)}},scrollIntoView:ri(function(S,K){S==null?(S={from:this.doc.sel.primary().head,to:null},K==null&&(K=this.options.cursorScrollMargin)):typeof S=="number"?S={from:fn(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=K||0,S.from.line!=null?Bd(this,S):bh(this,S.from,S.to,S.margin)}),setSize:ri(function(S,K){var Z=this,ue=function(ke){return typeof ke=="number"||/^\d+$/.test(String(ke))?ke+"px":ke};S!=null&&(this.display.wrapper.style.width=ue(S)),K!=null&&(this.display.wrapper.style.height=ue(K)),this.options.lineWrapping&&Yf(this);var be=this.display.viewFrom;this.doc.iter(be,this.display.viewTo,function(ke){if(ke.widgets){for(var Ne=0;Ne<ke.widgets.length;Ne++)if(ke.widgets[Ne].noHScroll){Sc(Z,be,"widget");break}}++be}),this.curOp.forceUpdate=!0,ut(this,"refresh",this)}),operation:function(S){return Js(this,S)},startOperation:function(){return Tc(this)},endOperation:function(){return IA(this)},refresh:ri(function(){var S=this.display.cachedTextHeight;rl(this),this.curOp.forceUpdate=!0,Xh(this),Qs(this,this.doc.scrollLeft,this.doc.scrollTop),Bl(this.display),(S==null||Math.abs(S-nl(this.display))>.5||this.options.lineWrapping)&&Ch(this),ut(this,"refresh",this)}),swapDoc:ri(function(S){var K=this.doc;return K.cm=null,this.state.selectingText&&this.state.selectingText(),ws(this,S),Xh(this),this.display.input.reset(),Qs(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,xs(this,"swapDoc",this,K),K}),phrase:function(S){var K=this.options.phrases;return K&&Object.prototype.hasOwnProperty.call(K,S)?K[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Nt(u),u.registerHelper=function(S,K,Z){E.hasOwnProperty(S)||(E[S]=u[S]={_global:[]}),E[S][K]=Z},u.registerGlobalHelper=function(S,K,Z,ue){u.registerHelper(S,K,ue),E[S]._global.push({pred:Z,val:ue})}}function Pi(u,g,E,S,K){var Z=g,ue=E,be=wr(u,g.line),ke=K&&u.direction=="rtl"?-E:E;function Ne(){var gr=g.line+ke;return gr<u.first||gr>=u.first+u.size?!1:(g=new fn(gr,g.ch,g.sticky),be=wr(u,gr))}function ft(gr){var Ar;if(S=="codepoint"){var Rr=be.text.charCodeAt(g.ch+(E>0?0:-1));if(isNaN(Rr))Ar=null;else{var ii=E>0?Rr>=55296&&Rr<56320:Rr>=56320&&Rr<57343;Ar=new fn(g.line,Math.max(0,Math.min(be.text.length,g.ch+E*(ii?2:1))),-E)}}else K?Ar=al(u.cm,be,g,E):Ar=ql(be,g,E);if(Ar==null)if(!gr&&Ne())g=FA(K,u.cm,be,g.line,ke);else return!1;else g=Ar;return!0}if(S=="char"||S=="codepoint")ft();else if(S=="column")ft(!0);else if(S=="word"||S=="group")for(var Mt=null,tn=S=="group",Yt=u.cm&&u.cm.getHelper(g,"wordChars"),wn=!0;!(E<0&&!ft(!wn));wn=!1){var Ln=be.text.charAt(g.ch)||`
`,Hn=We(Ln,Yt)?"w":tn&&Ln==`
`?"n":!tn||/\s/.test(Ln)?null:"p";if(tn&&!wn&&!Hn&&(Hn="s"),Mt&&Mt!=Hn){E<0&&(E=1,ft(),g.sticky="after");break}if(Hn&&(Mt=Hn),E>0&&!ft(!wn))break}var $n=Kc(u,g,Z,ue,!0);return Wi(Z,$n)&&($n.hitSide=!0),$n}function gf(u,g,E,S){var K=u.doc,Z=g.left,ue;if(S=="page"){var be=Math.min(u.display.wrapper.clientHeight,Ut(u).innerHeight||K(u).documentElement.clientHeight),ke=Math.max(be-.5*nl(u.display),3);ue=(E>0?g.bottom:g.top)+E*ke}else S=="line"&&(ue=E>0?g.bottom+3:g.top-3);for(var Ne;Ne=po(u,Z,ue),!!Ne.outside;){if(E<0?ue<=0:ue>=K.height){Ne.hitSide=!0;break}ue+=E*5}return Ne}var Xo=function(u){this.cm=u,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ue,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Xo.prototype.init=function(u){var g=this,E=this,S=E.cm,K=E.div=u.lineDiv;K.contentEditable=!0,mf(K,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function Z(be){for(var ke=be.target;ke;ke=ke.parentNode){if(ke==K)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ke.className))break}return!1}Qe(K,"paste",function(be){!Z(be)||at(S,be)||Ia(be,S)||v<=11&&setTimeout(Po(S,function(){return g.updateFromDOM()}),20)}),Qe(K,"compositionstart",function(be){g.composing={data:be.data,done:!1}}),Qe(K,"compositionupdate",function(be){g.composing||(g.composing={data:be.data,done:!1})}),Qe(K,"compositionend",function(be){g.composing&&(be.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),Qe(K,"touchstart",function(){return E.forceCompositionEnd()}),Qe(K,"input",function(){g.composing||g.readFromDOMSoon()});function ue(be){if(!(!Z(be)||at(S,be))){if(S.somethingSelected())od({lineWise:!1,text:S.getSelections()}),be.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var ke=ad(S);od({lineWise:!0,text:ke.text}),be.type=="cut"&&S.operation(function(){S.setSelections(ke.ranges,0,Kt),S.replaceSelection("",null,"cut")})}else return;if(be.clipboardData){be.clipboardData.clearData();var Ne=ku.text.join(`
`);if(be.clipboardData.setData("Text",Ne),be.clipboardData.getData("Text")==Ne){be.preventDefault();return}}var ft=ld(),Mt=ft.firstChild;mf(Mt),S.display.lineSpace.insertBefore(ft,S.display.lineSpace.firstChild),Mt.value=ku.text.join(`
`);var tn=je(mt(K));Xe(Mt),setTimeout(function(){S.display.lineSpace.removeChild(ft),tn.focus(),tn==K&&E.showPrimarySelection()},50)}}Qe(K,"copy",ue),Qe(K,"cut",ue)},Xo.prototype.screenReaderLabelChanged=function(u){u?this.div.setAttribute("aria-label",u):this.div.removeAttribute("aria-label")},Xo.prototype.prepareSelection=function(){var u=Sd(this.cm,!1);return u.focus=je(mt(this.div))==this.div,u},Xo.prototype.showSelection=function(u,g){!u||!this.cm.display.view.length||((u.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(u))},Xo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Xo.prototype.showPrimarySelection=function(){var u=this.getSelection(),g=this.cm,E=g.doc.sel.primary(),S=E.from(),K=E.to();if(g.display.viewTo==g.display.viewFrom||S.line>=g.display.viewTo||K.line<g.display.viewFrom){u.removeAllRanges();return}var Z=ba(g,u.anchorNode,u.anchorOffset),ue=ba(g,u.focusNode,u.focusOffset);if(!(Z&&!Z.bad&&ue&&!ue.bad&&dr(pa(Z,ue),S)==0&&dr(ls(Z,ue),K)==0)){var be=g.display.view,ke=S.line>=g.display.viewFrom&&Dc(g,S)||{node:be[0].measure.map[2],offset:0},Ne=K.line<g.display.viewTo&&Dc(g,K);if(!Ne){var ft=be[be.length-1].measure,Mt=ft.maps?ft.maps[ft.maps.length-1]:ft.map;Ne={node:Mt[Mt.length-1],offset:Mt[Mt.length-2]-Mt[Mt.length-3]}}if(!ke||!Ne){u.removeAllRanges();return}var tn=u.rangeCount&&u.getRangeAt(0),Yt;try{Yt=Je(ke.node,ke.offset,Ne.offset,Ne.node)}catch{}Yt&&(!i&&g.state.focused?(u.collapse(ke.node,ke.offset),Yt.collapsed||(u.removeAllRanges(),u.addRange(Yt))):(u.removeAllRanges(),u.addRange(Yt)),tn&&u.anchorNode==null?u.addRange(tn):i&&this.startGracePeriod()),this.rememberSelection()}},Xo.prototype.startGracePeriod=function(){var u=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){u.gracePeriod=!1,u.selectionChanged()&&u.cm.operation(function(){return u.cm.curOp.selectionChanged=!0})},20)},Xo.prototype.showMultipleSelections=function(u){qe(this.cm.display.cursorDiv,u.cursors),qe(this.cm.display.selectionDiv,u.selection)},Xo.prototype.rememberSelection=function(){var u=this.getSelection();this.lastAnchorNode=u.anchorNode,this.lastAnchorOffset=u.anchorOffset,this.lastFocusNode=u.focusNode,this.lastFocusOffset=u.focusOffset},Xo.prototype.selectionInEditor=function(){var u=this.getSelection();if(!u.rangeCount)return!1;var g=u.getRangeAt(0).commonAncestorContainer;return Ke(this.div,g)},Xo.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||je(mt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Xo.prototype.blur=function(){this.div.blur()},Xo.prototype.getField=function(){return this.div},Xo.prototype.supportsTouch=function(){return!0},Xo.prototype.receivedFocus=function(){var u=this,g=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):Js(this.cm,function(){return g.cm.curOp.selectionChanged=!0});function E(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},Xo.prototype.selectionChanged=function(){var u=this.getSelection();return u.anchorNode!=this.lastAnchorNode||u.anchorOffset!=this.lastAnchorOffset||u.focusNode!=this.lastFocusNode||u.focusOffset!=this.lastFocusOffset},Xo.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var u=this.getSelection(),g=this.cm;if(ie&&k&&this.cm.display.gutterSpecs.length&&yf(u.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=ba(g,u.anchorNode,u.anchorOffset),S=ba(g,u.focusNode,u.focusOffset);E&&S&&Js(g,function(){ea(g.doc,Ga(E,S),Kt),(E.bad||S.bad)&&(g.curOp.selectionChanged=!0)})}}},Xo.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u=this.cm,g=u.display,E=u.doc.sel.primary(),S=E.from(),K=E.to();if(S.ch==0&&S.line>u.firstLine()&&(S=fn(S.line-1,wr(u.doc,S.line-1).length)),K.ch==wr(u.doc,K.line).text.length&&K.line<u.lastLine()&&(K=fn(K.line+1,0)),S.line<g.viewFrom||K.line>g.viewTo-1)return!1;var Z,ue,be;S.line==g.viewFrom||(Z=Xi(u,S.line))==0?(ue=Ve(g.view[0].line),be=g.view[0].node):(ue=Ve(g.view[Z].line),be=g.view[Z-1].node.nextSibling);var ke=Xi(u,K.line),Ne,ft;if(ke==g.view.length-1?(Ne=g.viewTo-1,ft=g.lineDiv.lastChild):(Ne=Ve(g.view[ke+1].line)-1,ft=g.view[ke+1].node.previousSibling),!be)return!1;for(var Mt=u.doc.splitLines(Ad(u,be,ft,ue,Ne)),tn=Fa(u.doc,fn(ue,0),fn(Ne,wr(u.doc,Ne).text.length));Mt.length>1&&tn.length>1;)if(Xn(Mt)==Xn(tn))Mt.pop(),tn.pop(),Ne--;else if(Mt[0]==tn[0])Mt.shift(),tn.shift(),ue++;else break;for(var Yt=0,wn=0,Ln=Mt[0],Hn=tn[0],$n=Math.min(Ln.length,Hn.length);Yt<$n&&Ln.charCodeAt(Yt)==Hn.charCodeAt(Yt);)++Yt;for(var gr=Xn(Mt),Ar=Xn(tn),Rr=Math.min(gr.length-(Mt.length==1?Yt:0),Ar.length-(tn.length==1?Yt:0));wn<Rr&&gr.charCodeAt(gr.length-wn-1)==Ar.charCodeAt(Ar.length-wn-1);)++wn;if(Mt.length==1&&tn.length==1&&ue==S.line)for(;Yt&&Yt>S.ch&&gr.charCodeAt(gr.length-wn-1)==Ar.charCodeAt(Ar.length-wn-1);)Yt--,wn++;Mt[Mt.length-1]=gr.slice(0,gr.length-wn).replace(/^\u200b+/,""),Mt[0]=Mt[0].slice(Yt).replace(/\u200b+$/,"");var ii=fn(ue,Yt),kr=fn(Ne,tn.length?Xn(tn).length-wn:0);if(Mt.length>1||Mt[0]||dr(ii,kr))return C(u.doc,Mt,ii,kr,"+input"),!0},Xo.prototype.ensurePolled=function(){this.forceCompositionEnd()},Xo.prototype.reset=function(){this.forceCompositionEnd()},Xo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Xo.prototype.readFromDOMSoon=function(){var u=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(u.readDOMTimeout=null,u.composing)if(u.composing.done)u.composing=null;else return;u.updateFromDOM()},80))},Xo.prototype.updateFromDOM=function(){var u=this;(this.cm.isReadOnly()||!this.pollContent())&&Js(this.cm,function(){return rl(u.cm)})},Xo.prototype.setUneditable=function(u){u.contentEditable="false"},Xo.prototype.onKeyPress=function(u){u.charCode==0||this.composing||(u.preventDefault(),this.cm.isReadOnly()||Po(this.cm,sd)(this.cm,String.fromCharCode(u.charCode==null?u.keyCode:u.charCode),0))},Xo.prototype.readOnlyChanged=function(u){this.div.contentEditable=String(u!="nocursor")},Xo.prototype.onContextMenu=function(){},Xo.prototype.resetPosition=function(){},Xo.prototype.needsContentAttribute=!0;function Dc(u,g){var E=JA(u,g.line);if(!E||E.hidden)return null;var S=wr(u.doc,g.line),K=xd(E,S,g.line),Z=_e(S,u.doc.direction),ue="left";if(Z){var be=He(Z,g.ch);ue=be%2?"right":"left"}var ke=Zh(K.map,g.ch,ue);return ke.offset=ke.collapse=="right"?ke.end:ke.start,ke}function yf(u){for(var g=u;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}function pA(u,g){return g&&(u.bad=!0),u}function Ad(u,g,E,S,K){var Z="",ue=!1,be=u.doc.lineSeparator(),ke=!1;function Ne(Yt){return function(wn){return wn.id==Yt}}function ft(){ue&&(Z+=be,ke&&(Z+=be),ue=ke=!1)}function Mt(Yt){Yt&&(ft(),Z+=Yt)}function tn(Yt){if(Yt.nodeType==1){var wn=Yt.getAttribute("cm-text");if(wn){Mt(wn);return}var Ln=Yt.getAttribute("cm-marker"),Hn;if(Ln){var $n=u.findMarks(fn(S,0),fn(K+1,0),Ne(+Ln));$n.length&&(Hn=$n[0].find(0))&&Mt(Fa(u.doc,Hn.from,Hn.to).join(be));return}if(Yt.getAttribute("contenteditable")=="false")return;var gr=/^(pre|div|p|li|table|br)$/i.test(Yt.nodeName);if(!/^br$/i.test(Yt.nodeName)&&Yt.textContent.length==0)return;gr&&ft();for(var Ar=0;Ar<Yt.childNodes.length;Ar++)tn(Yt.childNodes[Ar]);/^(pre|p)$/i.test(Yt.nodeName)&&(ke=!0),gr&&(ue=!0)}else Yt.nodeType==3&&Mt(Yt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;tn(g),g!=E;)g=g.nextSibling,ke=!1;return Z}function ba(u,g,E){var S;if(g==u.display.lineDiv){if(S=u.display.lineDiv.childNodes[E],!S)return pA(u.clipPos(fn(u.display.viewTo-1)),!0);g=null,E=0}else for(S=g;;S=S.parentNode){if(!S||S==u.display.lineDiv)return null;if(S.parentNode&&S.parentNode==u.display.lineDiv)break}for(var K=0;K<u.display.view.length;K++){var Z=u.display.view[K];if(Z.node==S)return cm(Z,g,E)}}function cm(u,g,E){var S=u.text.firstChild,K=!1;if(!g||!Ke(S,g))return pA(fn(Ve(u.line),0),!0);if(g==S&&(K=!0,g=S.childNodes[E],E=0,!g)){var Z=u.rest?Xn(u.rest):u.line;return pA(fn(Ve(Z),Z.text.length),K)}var ue=g.nodeType==3?g:null,be=g;for(!ue&&g.childNodes.length==1&&g.firstChild.nodeType==3&&(ue=g.firstChild,E&&(E=ue.nodeValue.length));be.parentNode!=S;)be=be.parentNode;var ke=u.measure,Ne=ke.maps;function ft(Hn,$n,gr){for(var Ar=-1;Ar<(Ne?Ne.length:0);Ar++)for(var Rr=Ar<0?ke.map:Ne[Ar],ii=0;ii<Rr.length;ii+=3){var kr=Rr[ii+2];if(kr==Hn||kr==$n){var ro=Ve(Ar<0?u.line:u.rest[Ar]),Oo=Rr[ii]+gr;return(gr<0||kr!=Hn)&&(Oo=Rr[ii+(gr?1:0)]),fn(ro,Oo)}}}var Mt=ft(ue,be,E);if(Mt)return pA(Mt,K);for(var tn=be.nextSibling,Yt=ue?ue.nodeValue.length-E:0;tn;tn=tn.nextSibling){if(Mt=ft(tn,tn.firstChild,0),Mt)return pA(fn(Mt.line,Mt.ch-Yt),K);Yt+=tn.textContent.length}for(var wn=be.previousSibling,Ln=E;wn;wn=wn.previousSibling){if(Mt=ft(wn,wn.firstChild,-1),Mt)return pA(fn(Mt.line,Mt.ch+Ln),K);Ln+=wn.textContent.length}}var Ta=function(u){this.cm=u,this.prevInput="",this.pollingFast=!1,this.polling=new Ue,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ta.prototype.init=function(u){var g=this,E=this,S=this.cm;this.createField(u);var K=this.textarea;u.wrapper.insertBefore(this.wrapper,u.wrapper.firstChild),$&&(K.style.width="0px"),Qe(K,"input",function(){p&&v>=9&&g.hasSelection&&(g.hasSelection=null),E.poll()}),Qe(K,"paste",function(ue){at(S,ue)||Ia(ue,S)||(S.state.pasteIncoming=+new Date,E.fastPoll())});function Z(ue){if(!at(S,ue)){if(S.somethingSelected())od({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var be=ad(S);od({lineWise:!0,text:be.text}),ue.type=="cut"?S.setSelections(be.ranges,null,Kt):(E.prevInput="",K.value=be.text.join(`
`),Xe(K))}else return;ue.type=="cut"&&(S.state.cutIncoming=+new Date)}}Qe(K,"cut",Z),Qe(K,"copy",Z),Qe(u.scroller,"paste",function(ue){if(!(BA(u,ue)||at(S,ue))){if(!K.dispatchEvent){S.state.pasteIncoming=+new Date,E.focus();return}var be=new Event("paste");be.clipboardData=ue.clipboardData,K.dispatchEvent(be)}}),Qe(u.lineSpace,"selectstart",function(ue){BA(u,ue)||rn(ue)}),Qe(K,"compositionstart",function(){var ue=S.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:ue,range:S.markText(ue,S.getCursor("to"),{className:"CodeMirror-composing"})}}),Qe(K,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},Ta.prototype.createField=function(u){this.wrapper=ld(),this.textarea=this.wrapper.firstChild;var g=this.cm.options;mf(this.textarea,g.spellcheck,g.autocorrect,g.autocapitalize)},Ta.prototype.screenReaderLabelChanged=function(u){u?this.textarea.setAttribute("aria-label",u):this.textarea.removeAttribute("aria-label")},Ta.prototype.prepareSelection=function(){var u=this.cm,g=u.display,E=u.doc,S=Sd(u);if(u.options.moveInputWithCursor){var K=un(u,E.sel.primary().head,"div"),Z=g.wrapper.getBoundingClientRect(),ue=g.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,K.top+ue.top-Z.top)),S.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,K.left+ue.left-Z.left))}return S},Ta.prototype.showSelection=function(u){var g=this.cm,E=g.display;qe(E.cursorDiv,u.cursors),qe(E.selectionDiv,u.selection),u.teTop!=null&&(this.wrapper.style.top=u.teTop+"px",this.wrapper.style.left=u.teLeft+"px")},Ta.prototype.reset=function(u){if(!(this.contextMenuPending||this.composing&&u)){var g=this.cm;if(this.resetting=!0,g.somethingSelected()){this.prevInput="";var E=g.getSelection();this.textarea.value=E,g.state.focused&&Xe(this.textarea),p&&v>=9&&(this.hasSelection=E)}else u||(this.prevInput=this.textarea.value="",p&&v>=9&&(this.hasSelection=null));this.resetting=!1}},Ta.prototype.getField=function(){return this.textarea},Ta.prototype.supportsTouch=function(){return!1},Ta.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ne||je(mt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Ta.prototype.blur=function(){this.textarea.blur()},Ta.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ta.prototype.receivedFocus=function(){this.slowPoll()},Ta.prototype.slowPoll=function(){var u=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){u.poll(),u.cm.state.focused&&u.slowPoll()})},Ta.prototype.fastPoll=function(){var u=!1,g=this;g.pollingFast=!0;function E(){var S=g.poll();!S&&!u?(u=!0,g.polling.set(60,E)):(g.pollingFast=!1,g.slowPoll())}g.polling.set(20,E)},Ta.prototype.poll=function(){var u=this,g=this.cm,E=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!g.state.focused||Pr(E)&&!S&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var K=E.value;if(K==S&&!g.somethingSelected())return!1;if(p&&v>=9&&this.hasSelection===K||q&&/[\uf700-\uf7ff]/.test(K))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var Z=K.charCodeAt(0);if(Z==8203&&!S&&(S=""),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var ue=0,be=Math.min(S.length,K.length);ue<be&&S.charCodeAt(ue)==K.charCodeAt(ue);)++ue;return Js(g,function(){sd(g,K.slice(ue),S.length-ue,null,u.composing?"*compose":null),K.length>1e3||K.indexOf(`
`)>-1?E.value=u.prevInput="":u.prevInput=K,u.composing&&(u.composing.range.clear(),u.composing.range=g.markText(u.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ta.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ta.prototype.onKeyPress=function(){p&&v>=9&&(this.hasSelection=null),this.fastPoll()},Ta.prototype.onContextMenu=function(u){var g=this,E=g.cm,S=E.display,K=g.textarea;g.contextMenuPending&&g.contextMenuPending();var Z=eu(E,u),ue=S.scroller.scrollTop;if(!Z||D)return;var be=E.options.resetSelectionOnContextMenu;be&&E.doc.sel.contains(Z)==-1&&Po(E,ea)(E.doc,Ga(Z),Kt);var ke=K.style.cssText,Ne=g.wrapper.style.cssText,ft=g.wrapper.offsetParent.getBoundingClientRect();g.wrapper.style.cssText="position: static",K.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(u.clientY-ft.top-5)+"px; left: "+(u.clientX-ft.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Mt;x&&(Mt=K.ownerDocument.defaultView.scrollY),S.input.focus(),x&&K.ownerDocument.defaultView.scrollTo(null,Mt),S.input.reset(),E.somethingSelected()||(K.value=g.prevInput=" "),g.contextMenuPending=Yt,S.selForContextMenu=E.doc.sel,clearTimeout(S.detectingSelectAll);function tn(){if(K.selectionStart!=null){var Ln=E.somethingSelected(),Hn=""+(Ln?K.value:"");K.value="",K.value=Hn,g.prevInput=Ln?"":"",K.selectionStart=1,K.selectionEnd=Hn.length,S.selForContextMenu=E.doc.sel}}function Yt(){if(g.contextMenuPending==Yt&&(g.contextMenuPending=!1,g.wrapper.style.cssText=Ne,K.style.cssText=ke,p&&v<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=ue),K.selectionStart!=null)){(!p||p&&v<9)&&tn();var Ln=0,Hn=function(){S.selForContextMenu==E.doc.sel&&K.selectionStart==0&&K.selectionEnd>0&&g.prevInput==""?Po(E,sl)(E):Ln++<10?S.detectingSelectAll=setTimeout(Hn,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(Hn,200)}}if(p&&v>=9&&tn(),he){mr(u);var wn=function(){it(window,"mouseup",wn),setTimeout(Yt,20)};Qe(window,"mouseup",wn)}else setTimeout(Yt,50)},Ta.prototype.readOnlyChanged=function(u){u||this.reset(),this.textarea.disabled=u=="nocursor",this.textarea.readOnly=!!u},Ta.prototype.setUneditable=function(){},Ta.prototype.needsContentAttribute=!1;function hm(u,g){if(g=g?Te(g):{},g.value=u.value,!g.tabindex&&u.tabIndex&&(g.tabindex=u.tabIndex),!g.placeholder&&u.placeholder&&(g.placeholder=u.placeholder),g.autofocus==null){var E=je(mt(u));g.autofocus=E==u||u.getAttribute("autofocus")!=null&&E==document.body}function S(){u.value=be.getValue()}var K;if(u.form&&(Qe(u.form,"submit",S),!g.leaveSubmitMethodAlone)){var Z=u.form;K=Z.submit;try{var ue=Z.submit=function(){S(),Z.submit=K,Z.submit(),Z.submit=ue}}catch{}}g.finishInit=function(ke){ke.save=S,ke.getTextArea=function(){return u},ke.toTextArea=function(){ke.toTextArea=isNaN,S(),u.parentNode.removeChild(ke.getWrapperElement()),u.style.display="",u.form&&(it(u.form,"submit",S),!g.leaveSubmitMethodAlone&&typeof u.form.submit=="function"&&(u.form.submit=K))}},u.style.display="none";var be=qo(function(ke){return u.parentNode.insertBefore(ke,u.nextSibling)},g);return be}function ep(u){u.off=it,u.on=Qe,u.wheelEventPixels=Qu,u.Doc=Pt,u.splitLines=ar,u.countColumn=Re,u.findColumn=_n,u.isWordChar=hr,u.Pass=gt,u.signal=ut,u.Line=Ua,u.changeEnd=ga,u.scrollbarModel=Ic,u.Pos=fn,u.cmpPos=dr,u.modes=$r,u.mimeModes=_s,u.resolveMode=sa,u.getMode=Wo,u.modeExtensions=zo,u.extendMode=So,u.copyState=pi,u.startState=_l,u.innerMode=tA,u.commands=Iu,u.keyMap=Ro,u.keyName=_a,u.isModifierKey=va,u.lookupKey=qi,u.normalizeKeyMap=to,u.StringStream=Ni,u.SharedTextMarker=ct,u.TextMarker=Ze,u.LineWidget=ge,u.e_preventDefault=rn,u.e_stopPropagation=Rn,u.e_stop=mr,u.addClass=Pe,u.contains=Ke,u.rmClass=me,u.keyNames=Vr}fA(qo),Oh(qo);var mA="iter insert remove copy getEditor constructor".split(" ");for(var Rp in Pt.prototype)Pt.prototype.hasOwnProperty(Rp)&&nt(mA,Rp)<0&&(qo.prototype[Rp]=function(u){return function(){return u.apply(this.doc,arguments)}}(Pt.prototype[Rp]));return Nt(Pt),qo.inputStyles={textarea:Ta,contenteditable:Xo},qo.defineMode=function(u){!qo.defaults.mode&&u!="null"&&(qo.defaults.mode=u),fs.apply(this,arguments)},qo.defineMIME=Ja,qo.defineMode("null",function(){return{token:function(u){return u.skipToEnd()}}}),qo.defineMIME("text/plain","null"),qo.defineExtension=function(u,g){qo.prototype[u]=g},qo.defineDocExtension=function(u,g){Pt.prototype[u]=g},qo.fromTextArea=hm,ep(qo),qo.version="5.65.19",qo})}(Tb)),Tb.exports}var jie=Vx();const yp=dl(jie);var nT={exports:{}},rT;function Gie(){return rT||(rT=1,function(n,e){(function(t){t(Vx())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,l=i.statementIndent,o=i.jsonld,p=i.json||o,v=i.trackScope!==!1,x=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,k=function(){function Ve(Co){return{type:Co,style:"keyword"}}var xt=Ve("keyword a"),xn=Ve("keyword b"),Yn=Ve("keyword c"),fn=Ve("keyword d"),dr=Ve("operator"),Wi={type:"atom",style:"atom"};return{if:Ve("if"),while:xt,with:xt,else:xn,do:xn,try:xn,finally:xn,return:fn,break:fn,continue:fn,new:Ve("new"),delete:Yn,void:Yn,throw:Yn,debugger:Ve("debugger"),var:Ve("var"),const:Ve("var"),let:Ve("var"),function:Ve("function"),catch:Ve("catch"),for:Ve("for"),switch:Ve("switch"),case:Ve("case"),default:Ve("default"),in:dr,typeof:dr,instanceof:dr,true:Wi,false:Wi,null:Wi,undefined:Wi,NaN:Wi,Infinity:Wi,this:Ve("this"),class:Ve("class"),super:Ve("atom"),yield:Yn,export:Ve("export"),import:Ve("import"),extends:Yn,await:Yn}}(),P=/[+\-*&%=<>!?|~^@]/,D=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function N(Ve){for(var xt=!1,xn,Yn=!1;(xn=Ve.next())!=null;){if(!xt){if(xn=="/"&&!Yn)return;xn=="["?Yn=!0:Yn&&xn=="]"&&(Yn=!1)}xt=!xt&&xn=="\\"}}var W,V;function $(Ve,xt,xn){return W=Ve,V=xn,xt}function ie(Ve,xt){var xn=Ve.next();if(xn=='"'||xn=="'")return xt.tokenize=ne(xn),xt.tokenize(Ve,xt);if(xn=="."&&Ve.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return $("number","number");if(xn=="."&&Ve.match(".."))return $("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(xn))return $(xn);if(xn=="="&&Ve.eat(">"))return $("=>","operator");if(xn=="0"&&Ve.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return $("number","number");if(/\d/.test(xn))return Ve.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),$("number","number");if(xn=="/")return Ve.eat("*")?(xt.tokenize=q,q(Ve,xt)):Ve.eat("/")?(Ve.skipToEnd(),$("comment","comment")):Rs(Ve,xt,1)?(N(Ve),Ve.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),$("regexp","string-2")):(Ve.eat("="),$("operator","operator",Ve.current()));if(xn=="`")return xt.tokenize=te,te(Ve,xt);if(xn=="#"&&Ve.peek()=="!")return Ve.skipToEnd(),$("meta","meta");if(xn=="#"&&Ve.eatWhile(B))return $("variable","property");if(xn=="<"&&Ve.match("!--")||xn=="-"&&Ve.match("->")&&!/\S/.test(Ve.string.slice(0,Ve.start)))return Ve.skipToEnd(),$("comment","comment");if(P.test(xn))return(xn!=">"||!xt.lexical||xt.lexical.type!=">")&&(Ve.eat("=")?(xn=="!"||xn=="=")&&Ve.eat("="):/[<>*+\-|&?]/.test(xn)&&(Ve.eat(xn),xn==">"&&Ve.eat(xn))),xn=="?"&&Ve.eat(".")?$("."):$("operator","operator",Ve.current());if(B.test(xn)){Ve.eatWhile(B);var Yn=Ve.current();if(xt.lastType!="."){if(k.propertyIsEnumerable(Yn)){var fn=k[Yn];return $(fn.type,fn.style,Yn)}if(Yn=="async"&&Ve.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return $("async","keyword",Yn)}return $("variable","variable",Yn)}}function ne(Ve){return function(xt,xn){var Yn=!1,fn;if(o&&xt.peek()=="@"&&xt.match(D))return xn.tokenize=ie,$("jsonld-keyword","meta");for(;(fn=xt.next())!=null&&!(fn==Ve&&!Yn);)Yn=!Yn&&fn=="\\";return Yn||(xn.tokenize=ie),$("string","string")}}function q(Ve,xt){for(var xn=!1,Yn;Yn=Ve.next();){if(Yn=="/"&&xn){xt.tokenize=ie;break}xn=Yn=="*"}return $("comment","comment")}function te(Ve,xt){for(var xn=!1,Yn;(Yn=Ve.next())!=null;){if(!xn&&(Yn=="`"||Yn=="$"&&Ve.eat("{"))){xt.tokenize=ie;break}xn=!xn&&Yn=="\\"}return $("quasi","string-2",Ve.current())}var G="([{}])";function oe(Ve,xt){xt.fatArrowAt&&(xt.fatArrowAt=null);var xn=Ve.string.indexOf("=>",Ve.start);if(!(xn<0)){if(x){var Yn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ve.string.slice(Ve.start,xn));Yn&&(xn=Yn.index)}for(var fn=0,dr=!1,Wi=xn-1;Wi>=0;--Wi){var Co=Ve.string.charAt(Wi),ls=G.indexOf(Co);if(ls>=0&&ls<3){if(!fn){++Wi;break}if(--fn==0){Co=="("&&(dr=!0);break}}else if(ls>=3&&ls<6)++fn;else if(B.test(Co))dr=!0;else if(/["'\/`]/.test(Co))for(;;--Wi){if(Wi==0)return;var pa=Ve.string.charAt(Wi-1);if(pa==Co&&Ve.string.charAt(Wi-2)!="\\"){Wi--;break}}else if(dr&&!fn){++Wi;break}}dr&&!fn&&(xt.fatArrowAt=Wi)}}var fe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function he(Ve,xt,xn,Yn,fn,dr){this.indented=Ve,this.column=xt,this.type=xn,this.prev=fn,this.info=dr,Yn!=null&&(this.align=Yn)}function Me(Ve,xt){if(!v)return!1;for(var xn=Ve.localVars;xn;xn=xn.next)if(xn.name==xt)return!0;for(var Yn=Ve.context;Yn;Yn=Yn.prev)for(var xn=Yn.vars;xn;xn=xn.next)if(xn.name==xt)return!0}function me(Ve,xt,xn,Yn,fn){var dr=Ve.cc;for(pe.state=Ve,pe.stream=fn,pe.marked=null,pe.cc=dr,pe.style=xt,Ve.lexical.hasOwnProperty("align")||(Ve.lexical.align=!0);;){var Wi=dr.length?dr.pop():p?nt:Re;if(Wi(xn,Yn)){for(;dr.length&&dr[dr.length-1].lex;)dr.pop()();return pe.marked?pe.marked:xn=="variable"&&Me(Ve,Yn)?"variable-2":xt}}}var pe={state:null,marked:null,cc:null};function qe(){for(var Ve=arguments.length-1;Ve>=0;Ve--)pe.cc.push(arguments[Ve])}function Se(){return qe.apply(null,arguments),!0}function vt(Ve,xt){for(var xn=xt;xn;xn=xn.next)if(xn.name==Ve)return!0;return!1}function Je(Ve){var xt=pe.state;if(pe.marked="def",!!v){if(xt.context){if(xt.lexical.info=="var"&&xt.context&&xt.context.block){var xn=Ke(Ve,xt.context);if(xn!=null){xt.context=xn;return}}else if(!vt(Ve,xt.localVars)){xt.localVars=new Le(Ve,xt.localVars);return}}i.globalVars&&!vt(Ve,xt.globalVars)&&(xt.globalVars=new Le(Ve,xt.globalVars))}}function Ke(Ve,xt){if(xt)if(xt.block){var xn=Ke(Ve,xt.prev);return xn?xn==xt.prev?xt:new Pe(xn,xt.vars,!0):null}else return vt(Ve,xt.vars)?xt:new Pe(xt.prev,new Le(Ve,xt.vars),!1);else return null}function je(Ve){return Ve=="public"||Ve=="private"||Ve=="protected"||Ve=="abstract"||Ve=="readonly"}function Pe(Ve,xt,xn){this.prev=Ve,this.vars=xt,this.block=xn}function Le(Ve,xt){this.name=Ve,this.next=xt}var Xe=new Le("this",new Le("arguments",null));function Ct(){pe.state.context=new Pe(pe.state.context,pe.state.localVars,!1),pe.state.localVars=Xe}function Gt(){pe.state.context=new Pe(pe.state.context,pe.state.localVars,!0),pe.state.localVars=null}Ct.lex=Gt.lex=!0;function mt(){pe.state.localVars=pe.state.context.vars,pe.state.context=pe.state.context.prev}mt.lex=!0;function Ut(Ve,xt){var xn=function(){var Yn=pe.state,fn=Yn.indented;if(Yn.lexical.type=="stat")fn=Yn.lexical.indented;else for(var dr=Yn.lexical;dr&&dr.type==")"&&dr.align;dr=dr.prev)fn=dr.indented;Yn.lexical=new he(fn,pe.stream.column(),Ve,null,Yn.lexical,xt)};return xn.lex=!0,xn}function kt(){var Ve=pe.state;Ve.lexical.prev&&(Ve.lexical.type==")"&&(Ve.indented=Ve.lexical.indented),Ve.lexical=Ve.lexical.prev)}kt.lex=!0;function Te(Ve){function xt(xn){return xn==Ve?Se():Ve==";"||xn=="}"||xn==")"||xn=="]"?qe():Se(xt)}return xt}function Re(Ve,xt){return Ve=="var"?Se(Ut("vardef",xt),Rn,Te(";"),kt):Ve=="keyword a"?Se(Ut("form"),gt,Re,kt):Ve=="keyword b"?Se(Ut("form"),Re,kt):Ve=="keyword d"?pe.stream.match(/^\s*$/,!1)?Se():Se(Ut("stat"),$t,Te(";"),kt):Ve=="debugger"?Se(Te(";")):Ve=="{"?Se(Ut("}"),Gt,Ht,kt,mt):Ve==";"?Se():Ve=="if"?(pe.state.lexical.info=="else"&&pe.state.cc[pe.state.cc.length-1]==kt&&pe.state.cc.pop()(),Se(Ut("form"),gt,Re,kt,Gr)):Ve=="function"?Se(ar):Ve=="for"?Se(Ut("form"),Gt,Si,Re,mt,kt):Ve=="class"||x&&xt=="interface"?(pe.marked="keyword",Se(Ut("form",Ve=="class"?Ve:xt),$r,kt)):Ve=="variable"?x&&xt=="declare"?(pe.marked="keyword",Se(Re)):x&&(xt=="module"||xt=="enum"||xt=="type")&&pe.stream.match(/^\s*\w/,!1)?(pe.marked="keyword",xt=="enum"?Se(wr):xt=="type"?Se(Cs,Te("operator"),_e,Te(";")):Se(Ut("form"),Dn,Te("{"),Ut("}"),Ht,kt,kt)):x&&xt=="namespace"?(pe.marked="keyword",Se(Ut("form"),nt,Re,kt)):x&&xt=="abstract"?(pe.marked="keyword",Se(Re)):Se(Ut("stat"),lr):Ve=="switch"?Se(Ut("form"),gt,Te("{"),Ut("}","switch"),Gt,Ht,kt,kt,mt):Ve=="case"?Se(nt,Te(":")):Ve=="default"?Se(Te(":")):Ve=="catch"?Se(Ut("form"),Ct,Ue,Re,kt,mt):Ve=="export"?Se(Ut("stat"),sa,kt):Ve=="import"?Se(Ut("stat"),zo,kt):Ve=="async"?Se(Re):xt=="@"?Se(nt,Re):qe(Ut("stat"),nt,Te(";"),kt)}function Ue(Ve){if(Ve=="(")return Se(Ao,Te(")"))}function nt(Ve,xt){return Kt(Ve,xt,!1)}function _t(Ve,xt){return Kt(Ve,xt,!0)}function gt(Ve){return Ve!="("?qe():Se(Ut(")"),$t,Te(")"),kt)}function Kt(Ve,xt,xn){if(pe.state.fatArrowAt==pe.stream.start){var Yn=xn?Fn:Xn;if(Ve=="(")return Se(Ct,Ut(")"),rt(Ao,")"),kt,Te("=>"),Yn,mt);if(Ve=="variable")return qe(Ct,Dn,Te("=>"),Yn,mt)}var fn=xn?_n:Rt;return fe.hasOwnProperty(Ve)?Se(fn):Ve=="function"?Se(ar,fn):Ve=="class"||x&&xt=="interface"?(pe.marked="keyword",Se(Ut("form"),ui,kt)):Ve=="keyword c"||Ve=="async"?Se(xn?_t:nt):Ve=="("?Se(Ut(")"),$t,Te(")"),kt,fn):Ve=="operator"||Ve=="spread"?Se(xn?_t:nt):Ve=="["?Se(Ut("]"),Ni,kt,fn):Ve=="{"?Et(We,"}",null,fn):Ve=="quasi"?qe(pr,fn):Ve=="new"?Se(an(xn)):Se()}function $t(Ve){return Ve.match(/[;\}\)\],]/)?qe():qe(nt)}function Rt(Ve,xt){return Ve==","?Se($t):_n(Ve,xt,!1)}function _n(Ve,xt,xn){var Yn=xn==!1?Rt:_n,fn=xn==!1?nt:_t;if(Ve=="=>")return Se(Ct,xn?Fn:Xn,mt);if(Ve=="operator")return/\+\+|--/.test(xt)||x&&xt=="!"?Se(Yn):x&&xt=="<"&&pe.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Se(Ut(">"),rt(_e,">"),kt,Yn):xt=="?"?Se(nt,Te(":"),fn):Se(fn);if(Ve=="quasi")return qe(pr,Yn);if(Ve!=";"){if(Ve=="(")return Et(_t,")","call",Yn);if(Ve==".")return Se(hr,Yn);if(Ve=="[")return Se(Ut("]"),$t,Te("]"),kt,Yn);if(x&&xt=="as")return pe.marked="keyword",Se(_e,Yn);if(Ve=="regexp")return pe.state.lastType=pe.marked="operator",pe.stream.backUp(pe.stream.pos-pe.stream.start-1),Se(fn)}}function pr(Ve,xt){return Ve!="quasi"?qe():xt.slice(xt.length-2)!="${"?Se(pr):Se($t,nn)}function nn(Ve){if(Ve=="}")return pe.marked="string-2",pe.state.tokenize=te,Se(pr)}function Xn(Ve){return oe(pe.stream,pe.state),qe(Ve=="{"?Re:nt)}function Fn(Ve){return oe(pe.stream,pe.state),qe(Ve=="{"?Re:_t)}function an(Ve){return function(xt){return xt=="."?Se(Ve?Cr:Bn):xt=="variable"&&x?Se(Qt,Ve?_n:Rt):qe(Ve?_t:nt)}}function Bn(Ve,xt){if(xt=="target")return pe.marked="keyword",Se(Rt)}function Cr(Ve,xt){if(xt=="target")return pe.marked="keyword",Se(_n)}function lr(Ve){return Ve==":"?Se(kt,Re):qe(Rt,Te(";"),kt)}function hr(Ve){if(Ve=="variable")return pe.marked="property",Se()}function We(Ve,xt){if(Ve=="async")return pe.marked="property",Se(We);if(Ve=="variable"||pe.style=="keyword"){if(pe.marked="property",xt=="get"||xt=="set")return Se(ce);var xn;return x&&pe.state.fatArrowAt==pe.stream.start&&(xn=pe.stream.match(/^\s*:\s*/,!1))&&(pe.state.fatArrowAt=pe.stream.pos+xn[0].length),Se(ye)}else{if(Ve=="number"||Ve=="string")return pe.marked=o?"property":pe.style+" property",Se(ye);if(Ve=="jsonld-keyword")return Se(ye);if(x&&je(xt))return pe.marked="keyword",Se(We);if(Ve=="[")return Se(nt,Zt,Te("]"),ye);if(Ve=="spread")return Se(_t,ye);if(xt=="*")return pe.marked="keyword",Se(We);if(Ve==":")return qe(ye)}}function ce(Ve){return Ve!="variable"?qe(ye):(pe.marked="property",Se(ar))}function ye(Ve){if(Ve==":")return Se(_t);if(Ve=="(")return qe(ar)}function rt(Ve,xt,xn){function Yn(fn,dr){if(xn?xn.indexOf(fn)>-1:fn==","){var Wi=pe.state.lexical;return Wi.info=="call"&&(Wi.pos=(Wi.pos||0)+1),Se(function(Co,ls){return Co==xt||ls==xt?qe():qe(Ve)},Yn)}return fn==xt||dr==xt?Se():xn&&xn.indexOf(";")>-1?qe(Ve):Se(Te(xt))}return function(fn,dr){return fn==xt||dr==xt?Se():qe(Ve,Yn)}}function Et(Ve,xt,xn){for(var Yn=3;Yn<arguments.length;Yn++)pe.cc.push(arguments[Yn]);return Se(Ut(xt,xn),rt(Ve,xt),kt)}function Ht(Ve){return Ve=="}"?Se():qe(Re,Ht)}function Zt(Ve,xt){if(x){if(Ve==":")return Se(_e);if(xt=="?")return Se(Zt)}}function Jn(Ve,xt){if(x&&(Ve==":"||xt=="in"))return Se(_e)}function He(Ve){if(x&&Ve==":")return pe.stream.match(/^\s*\w+\s+is\b/,!1)?Se(nt,ae,_e):Se(_e)}function ae(Ve,xt){if(xt=="is")return pe.marked="keyword",Se()}function _e(Ve,xt){if(xt=="keyof"||xt=="typeof"||xt=="infer"||xt=="readonly")return pe.marked="keyword",Se(xt=="typeof"?_t:_e);if(Ve=="variable"||xt=="void")return pe.marked="type",Se(zt);if(xt=="|"||xt=="&")return Se(_e);if(Ve=="string"||Ve=="number"||Ve=="atom")return Se(zt);if(Ve=="[")return Se(Ut("]"),rt(_e,"]",","),kt,zt);if(Ve=="{")return Se(Ut("}"),Qe,kt,zt);if(Ve=="(")return Se(rt(at,")"),f,zt);if(Ve=="<")return Se(rt(_e,">"),_e);if(Ve=="quasi")return qe(it,zt)}function f(Ve){if(Ve=="=>")return Se(_e)}function Qe(Ve){return Ve.match(/[\}\)\]]/)?Se():Ve==","||Ve==";"?Se(Qe):qe(Ee,Qe)}function Ee(Ve,xt){if(Ve=="variable"||pe.style=="keyword")return pe.marked="property",Se(Ee);if(xt=="?"||Ve=="number"||Ve=="string")return Se(Ee);if(Ve==":")return Se(_e);if(Ve=="[")return Se(Te("variable"),Jn,Te("]"),Ee);if(Ve=="(")return qe(Pr,Ee);if(!Ve.match(/[;\}\)\],]/))return Se()}function it(Ve,xt){return Ve!="quasi"?qe():xt.slice(xt.length-2)!="${"?Se(it):Se(_e,ut)}function ut(Ve){if(Ve=="}")return pe.marked="string-2",pe.state.tokenize=te,Se(it)}function at(Ve,xt){return Ve=="variable"&&pe.stream.match(/^\s*[?:]/,!1)||xt=="?"?Se(at):Ve==":"?Se(_e):Ve=="spread"?Se(at):qe(_e)}function zt(Ve,xt){if(xt=="<")return Se(Ut(">"),rt(_e,">"),kt,zt);if(xt=="|"||Ve=="."||xt=="&")return Se(_e);if(Ve=="[")return Se(_e,Te("]"),zt);if(xt=="extends"||xt=="implements")return pe.marked="keyword",Se(_e);if(xt=="?")return Se(_e,Te(":"),_e)}function Qt(Ve,xt){if(xt=="<")return Se(Ut(">"),rt(_e,">"),kt,zt)}function Nt(){return qe(_e,rn)}function rn(Ve,xt){if(xt=="=")return Se(_e)}function Rn(Ve,xt){return xt=="enum"?(pe.marked="keyword",Se(wr)):qe(Dn,Zt,Jt,br)}function Dn(Ve,xt){if(x&&je(xt))return pe.marked="keyword",Se(Dn);if(Ve=="variable")return Je(xt),Se();if(Ve=="spread")return Se(Dn);if(Ve=="[")return Et(Tr,"]");if(Ve=="{")return Et(mr,"}")}function mr(Ve,xt){return Ve=="variable"&&!pe.stream.match(/^\s*:/,!1)?(Je(xt),Se(Jt)):(Ve=="variable"&&(pe.marked="property"),Ve=="spread"?Se(Dn):Ve=="}"?qe():Ve=="["?Se(nt,Te("]"),Te(":"),mr):Se(Te(":"),Dn,Jt))}function Tr(){return qe(Dn,Jt)}function Jt(Ve,xt){if(xt=="=")return Se(_t)}function br(Ve){if(Ve==",")return Se(Rn)}function Gr(Ve,xt){if(Ve=="keyword b"&&xt=="else")return Se(Ut("form","else"),Re,kt)}function Si(Ve,xt){if(xt=="await")return Se(Si);if(Ve=="(")return Se(Ut(")"),Fr,kt)}function Fr(Ve){return Ve=="var"?Se(Rn,yn):Ve=="variable"?Se(yn):qe(yn)}function yn(Ve,xt){return Ve==")"?Se():Ve==";"?Se(yn):xt=="in"||xt=="of"?(pe.marked="keyword",Se(nt,yn)):qe(nt,yn)}function ar(Ve,xt){if(xt=="*")return pe.marked="keyword",Se(ar);if(Ve=="variable")return Je(xt),Se(ar);if(Ve=="(")return Se(Ct,Ut(")"),rt(Ao,")"),kt,He,Re,mt);if(x&&xt=="<")return Se(Ut(">"),rt(Nt,">"),kt,ar)}function Pr(Ve,xt){if(xt=="*")return pe.marked="keyword",Se(Pr);if(Ve=="variable")return Je(xt),Se(Pr);if(Ve=="(")return Se(Ct,Ut(")"),rt(Ao,")"),kt,He,mt);if(x&&xt=="<")return Se(Ut(">"),rt(Nt,">"),kt,Pr)}function Cs(Ve,xt){if(Ve=="keyword"||Ve=="variable")return pe.marked="type",Se(Cs);if(xt=="<")return Se(Ut(">"),rt(Nt,">"),kt)}function Ao(Ve,xt){return xt=="@"&&Se(nt,Ao),Ve=="spread"?Se(Ao):x&&je(xt)?(pe.marked="keyword",Se(Ao)):x&&Ve=="this"?Se(Zt,Jt):qe(Dn,Zt,Jt)}function ui(Ve,xt){return Ve=="variable"?$r(Ve,xt):_s(Ve,xt)}function $r(Ve,xt){if(Ve=="variable")return Je(xt),Se(_s)}function _s(Ve,xt){if(xt=="<")return Se(Ut(">"),rt(Nt,">"),kt,_s);if(xt=="extends"||xt=="implements"||x&&Ve==",")return xt=="implements"&&(pe.marked="keyword"),Se(x?_e:nt,_s);if(Ve=="{")return Se(Ut("}"),fs,kt)}function fs(Ve,xt){if(Ve=="async"||Ve=="variable"&&(xt=="static"||xt=="get"||xt=="set"||x&&je(xt))&&pe.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return pe.marked="keyword",Se(fs);if(Ve=="variable"||pe.style=="keyword")return pe.marked="property",Se(Ja,fs);if(Ve=="number"||Ve=="string")return Se(Ja,fs);if(Ve=="[")return Se(nt,Zt,Te("]"),Ja,fs);if(xt=="*")return pe.marked="keyword",Se(fs);if(x&&Ve=="(")return qe(Pr,fs);if(Ve==";"||Ve==",")return Se(fs);if(Ve=="}")return Se();if(xt=="@")return Se(nt,fs)}function Ja(Ve,xt){if(xt=="!"||xt=="?")return Se(Ja);if(Ve==":")return Se(_e,Jt);if(xt=="=")return Se(_t);var xn=pe.state.lexical.prev,Yn=xn&&xn.info=="interface";return qe(Yn?Pr:ar)}function sa(Ve,xt){return xt=="*"?(pe.marked="keyword",Se(_l,Te(";"))):xt=="default"?(pe.marked="keyword",Se(nt,Te(";"))):Ve=="{"?Se(rt(Wo,"}"),_l,Te(";")):qe(Re)}function Wo(Ve,xt){if(xt=="as")return pe.marked="keyword",Se(Te("variable"));if(Ve=="variable")return qe(_t,Wo)}function zo(Ve){return Ve=="string"?Se():Ve=="("?qe(nt):Ve=="."?qe(Rt):qe(So,pi,_l)}function So(Ve,xt){return Ve=="{"?Et(So,"}"):(Ve=="variable"&&Je(xt),xt=="*"&&(pe.marked="keyword"),Se(tA))}function pi(Ve){if(Ve==",")return Se(So,pi)}function tA(Ve,xt){if(xt=="as")return pe.marked="keyword",Se(So)}function _l(Ve,xt){if(xt=="from")return pe.marked="keyword",Se(nt)}function Ni(Ve){return Ve=="]"?Se():qe(rt(_t,"]"))}function wr(){return qe(Ut("form"),Dn,Te("{"),Ut("}"),rt(Fa,"}"),kt,kt)}function Fa(){return qe(Dn,Jt)}function bs(Ve,xt){return Ve.lastType=="operator"||Ve.lastType==","||P.test(xt.charAt(0))||/[,.]/.test(xt.charAt(0))}function Rs(Ve,xt,xn){return xt.tokenize==ie&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(xt.lastType)||xt.lastType=="quasi"&&/\{\s*$/.test(Ve.string.slice(0,Ve.pos-(xn||0)))}return{startState:function(Ve){var xt={tokenize:ie,lastType:"sof",cc:[],lexical:new he((Ve||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Pe(null,null,!1),indented:Ve||0};return i.globalVars&&typeof i.globalVars=="object"&&(xt.globalVars=i.globalVars),xt},token:function(Ve,xt){if(Ve.sol()&&(xt.lexical.hasOwnProperty("align")||(xt.lexical.align=!1),xt.indented=Ve.indentation(),oe(Ve,xt)),xt.tokenize!=q&&Ve.eatSpace())return null;var xn=xt.tokenize(Ve,xt);return W=="comment"?xn:(xt.lastType=W=="operator"&&(V=="++"||V=="--")?"incdec":W,me(xt,xn,W,V,Ve))},indent:function(Ve,xt){if(Ve.tokenize==q||Ve.tokenize==te)return t.Pass;if(Ve.tokenize!=ie)return 0;var xn=xt&&xt.charAt(0),Yn=Ve.lexical,fn;if(!/^\s*else\b/.test(xt))for(var dr=Ve.cc.length-1;dr>=0;--dr){var Wi=Ve.cc[dr];if(Wi==kt)Yn=Yn.prev;else if(Wi!=Gr&&Wi!=mt)break}for(;(Yn.type=="stat"||Yn.type=="form")&&(xn=="}"||(fn=Ve.cc[Ve.cc.length-1])&&(fn==Rt||fn==_n)&&!/^[,\.=+\-*:?[\(]/.test(xt));)Yn=Yn.prev;l&&Yn.type==")"&&Yn.prev.type=="stat"&&(Yn=Yn.prev);var Co=Yn.type,ls=xn==Co;return Co=="vardef"?Yn.indented+(Ve.lastType=="operator"||Ve.lastType==","?Yn.info.length+1:0):Co=="form"&&xn=="{"?Yn.indented:Co=="form"?Yn.indented+s:Co=="stat"?Yn.indented+(bs(Ve,xt)?l||s:0):Yn.info=="switch"&&!ls&&i.doubleIndentSwitch!=!1?Yn.indented+(/^(?:case|default)\b/.test(xt)?s:2*s):Yn.align?Yn.column+(ls?0:1):Yn.indented+(ls?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:o,jsonMode:p,expressionAllowed:Rs,skipExpression:function(Ve){me(Ve,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),nT.exports}Gie();var iT={exports:{}},oT;function Qie(){return oT||(oT=1,function(n,e){(function(t){t(Vx())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(G,oe,fe){var he=document.createElement("div");he.className="CodeMirror-lint-tooltip cm-s-"+G.options.theme,he.appendChild(fe.cloneNode(!0)),G.state.lint.options.selfContain?G.getWrapperElement().appendChild(he):document.body.appendChild(he);function Me(me){if(!he.parentNode)return t.off(document,"mousemove",Me);var pe=Math.max(0,me.clientY-he.offsetHeight-5),qe=Math.max(0,Math.min(me.clientX+5,he.ownerDocument.defaultView.innerWidth-he.offsetWidth));he.style.top=pe+"px",he.style.left=qe+"px"}return t.on(document,"mousemove",Me),Me(oe),he.style.opacity!=null&&(he.style.opacity=1),he}function l(G){G.parentNode&&G.parentNode.removeChild(G)}function o(G){G.parentNode&&(G.style.opacity==null&&l(G),G.style.opacity=0,setTimeout(function(){l(G)},600))}function p(G,oe,fe,he){var Me=s(G,oe,fe);function me(){t.off(he,"mouseout",me),Me&&(o(Me),Me=null)}var pe=setInterval(function(){if(Me)for(var qe=he;;qe=qe.parentNode){if(qe&&qe.nodeType==11&&(qe=qe.host),qe==document.body)return;if(!qe){me();break}}if(!Me)return clearInterval(pe)},400);t.on(he,"mouseout",me)}function v(G,oe,fe){this.marked=[],oe instanceof Function&&(oe={getAnnotations:oe}),(!oe||oe===!0)&&(oe={}),this.options={},this.linterOptions=oe.options||{};for(var he in x)this.options[he]=x[he];for(var he in oe)x.hasOwnProperty(he)?oe[he]!=null&&(this.options[he]=oe[he]):oe.options||(this.linterOptions[he]=oe[he]);this.timeout=null,this.hasGutter=fe,this.onMouseOver=function(Me){te(G,Me)},this.waitingFor=0}var x={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(G){var oe=G.state.lint;oe.hasGutter&&G.clearGutter(r),oe.options.highlightLines&&k(G);for(var fe=0;fe<oe.marked.length;++fe)oe.marked[fe].clear();oe.marked.length=0}function k(G){G.eachLine(function(oe){var fe=oe.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(oe.wrapClass);fe&&G.removeLineClass(oe,"wrap",fe[0])})}function P(G,oe,fe,he,Me){var me=document.createElement("div"),pe=me;return me.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+fe,he&&(pe=me.appendChild(document.createElement("div")),pe.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Me!=!1&&t.on(pe,"mouseover",function(qe){p(G,qe,oe,pe)}),me}function D(G,oe){return G=="error"?G:oe}function N(G){for(var oe=[],fe=0;fe<G.length;++fe){var he=G[fe],Me=he.from.line;(oe[Me]||(oe[Me]=[])).push(he)}return oe}function W(G){var oe=G.severity;oe||(oe="error");var fe=document.createElement("div");return fe.className="CodeMirror-lint-message CodeMirror-lint-message-"+oe,typeof G.messageHTML<"u"?fe.innerHTML=G.messageHTML:fe.appendChild(document.createTextNode(G.message)),fe}function V(G,oe){var fe=G.state.lint,he=++fe.waitingFor;function Me(){he=-1,G.off("change",Me)}G.on("change",Me),oe(G.getValue(),function(me,pe){G.off("change",Me),fe.waitingFor==he&&(pe&&me instanceof t&&(me=pe),G.operation(function(){ie(G,me)}))},fe.linterOptions,G)}function $(G){var oe=G.state.lint;if(oe){var fe=oe.options,he=fe.getAnnotations||G.getHelper(t.Pos(0,0),"lint");if(he)if(fe.async||he.async)V(G,he);else{var Me=he(G.getValue(),oe.linterOptions,G);if(!Me)return;Me.then?Me.then(function(me){G.operation(function(){ie(G,me)})}):G.operation(function(){ie(G,Me)})}}}function ie(G,oe){var fe=G.state.lint;if(fe){var he=fe.options;B(G);for(var Me=N(oe),me=0;me<Me.length;++me){var pe=Me[me];if(pe){for(var qe=null,Se=fe.hasGutter&&document.createDocumentFragment(),vt=0;vt<pe.length;++vt){var Je=pe[vt],Ke=Je.severity;Ke||(Ke="error"),qe=D(qe,Ke),he.formatAnnotation&&(Je=he.formatAnnotation(Je)),fe.hasGutter&&Se.appendChild(W(Je)),Je.to&&fe.marked.push(G.markText(Je.from,Je.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Ke,__annotation:Je}))}fe.hasGutter&&G.setGutterMarker(me,r,P(G,Se,qe,pe.length>1,he.tooltips)),he.highlightLines&&G.addLineClass(me,"wrap",i+qe)}}he.onUpdateLinting&&he.onUpdateLinting(oe,Me,G)}}function ne(G){var oe=G.state.lint;oe&&(clearTimeout(oe.timeout),oe.timeout=setTimeout(function(){$(G)},oe.options.delay))}function q(G,oe,fe){for(var he=fe.target||fe.srcElement,Me=document.createDocumentFragment(),me=0;me<oe.length;me++){var pe=oe[me];Me.appendChild(W(pe))}p(G,fe,Me,he)}function te(G,oe){var fe=oe.target||oe.srcElement;if(/\bCodeMirror-lint-mark-/.test(fe.className)){for(var he=fe.getBoundingClientRect(),Me=(he.left+he.right)/2,me=(he.top+he.bottom)/2,pe=G.findMarksAt(G.coordsChar({left:Me,top:me},"client")),qe=[],Se=0;Se<pe.length;++Se){var vt=pe[Se].__annotation;vt&&qe.push(vt)}qe.length&&q(G,qe,oe)}}t.defineOption("lint",!1,function(G,oe,fe){if(fe&&fe!=t.Init&&(B(G),G.state.lint.options.lintOnChange!==!1&&G.off("change",ne),t.off(G.getWrapperElement(),"mouseover",G.state.lint.onMouseOver),clearTimeout(G.state.lint.timeout),delete G.state.lint),oe){for(var he=G.getOption("gutters"),Me=!1,me=0;me<he.length;++me)he[me]==r&&(Me=!0);var pe=G.state.lint=new v(G,oe,Me);pe.options.lintOnChange&&G.on("change",ne),pe.options.tooltips!=!1&&pe.options.tooltips!="gutter"&&t.on(G.getWrapperElement(),"mouseover",pe.onMouseOver),$(G)}}),t.defineExtension("performLint",function(){$(this)})})}()),iT.exports}Qie();var sT={exports:{}},aT;function Yie(){return aT||(aT=1,function(n,e){(function(t){t(Vx())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(k){return k&&k.bracketRegex||/[(){}[\]]/}function o(k,P,D){var N=k.getLineHandle(P.line),W=P.ch-1,V=D&&D.afterCursor;V==null&&(V=/(^| )cm-fat-cursor($| )/.test(k.getWrapperElement().className));var $=l(D),ie=!V&&W>=0&&$.test(N.text.charAt(W))&&s[N.text.charAt(W)]||$.test(N.text.charAt(W+1))&&s[N.text.charAt(++W)];if(!ie)return null;var ne=ie.charAt(1)==">"?1:-1;if(D&&D.strict&&ne>0!=(W==P.ch))return null;var q=k.getTokenTypeAt(i(P.line,W+1)),te=p(k,i(P.line,W+(ne>0?1:0)),ne,q,D);return te==null?null:{from:i(P.line,W),to:te&&te.pos,match:te&&te.ch==ie.charAt(0),forward:ne>0}}function p(k,P,D,N,W){for(var V=W&&W.maxScanLineLength||1e4,$=W&&W.maxScanLines||1e3,ie=[],ne=l(W),q=D>0?Math.min(P.line+$,k.lastLine()+1):Math.max(k.firstLine()-1,P.line-$),te=P.line;te!=q;te+=D){var G=k.getLine(te);if(G){var oe=D>0?0:G.length-1,fe=D>0?G.length:-1;if(!(G.length>V))for(te==P.line&&(oe=P.ch-(D<0?1:0));oe!=fe;oe+=D){var he=G.charAt(oe);if(ne.test(he)&&(N===void 0||(k.getTokenTypeAt(i(te,oe+1))||"")==(N||""))){var Me=s[he];if(Me&&Me.charAt(1)==">"==D>0)ie.push(he);else if(ie.length)ie.pop();else return{pos:i(te,oe),ch:he}}}}}return te-D==(D>0?k.lastLine():k.firstLine())?!1:null}function v(k,P,D){for(var N=k.state.matchBrackets.maxHighlightLineLength||1e3,W=D&&D.highlightNonMatching,V=[],$=k.listSelections(),ie=0;ie<$.length;ie++){var ne=$[ie].empty()&&o(k,$[ie].head,D);if(ne&&(ne.match||W!==!1)&&k.getLine(ne.from.line).length<=N){var q=ne.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";V.push(k.markText(ne.from,i(ne.from.line,ne.from.ch+1),{className:q})),ne.to&&k.getLine(ne.to.line).length<=N&&V.push(k.markText(ne.to,i(ne.to.line,ne.to.ch+1),{className:q}))}}if(V.length){r&&k.state.focused&&k.focus();var te=function(){k.operation(function(){for(var G=0;G<V.length;G++)V[G].clear()})};if(P)setTimeout(te,800);else return te}}function x(k){k.operation(function(){k.state.matchBrackets.currentlyHighlighted&&(k.state.matchBrackets.currentlyHighlighted(),k.state.matchBrackets.currentlyHighlighted=null),k.state.matchBrackets.currentlyHighlighted=v(k,!1,k.state.matchBrackets)})}function B(k){k.state.matchBrackets&&k.state.matchBrackets.currentlyHighlighted&&(k.state.matchBrackets.currentlyHighlighted(),k.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(k,P,D){D&&D!=t.Init&&(k.off("cursorActivity",x),k.off("focus",x),k.off("blur",B),B(k)),P&&(k.state.matchBrackets=typeof P=="object"?P:{},k.on("cursorActivity",x),k.on("focus",x),k.on("blur",B))}),t.defineExtension("matchBrackets",function(){v(this,!0)}),t.defineExtension("findMatchingBracket",function(k,P,D){return(D||typeof P=="boolean")&&(D?(D.strict=P,P=D):P=P?{strict:!0}:null),o(this,k,P)}),t.defineExtension("scanForBracket",function(k,P,D,N){return p(this,k,P,D,N)})})}()),sT.exports}Yie();const qie=/("(?:[^\\"]|\\.)*")|[:,]/g;function Gz(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,p){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const v=JSON.stringify(l,i);if(v===void 0)return v;const x=r-o.length-p;if(v.length<=x){const B=v.replace(qie,(k,P)=>P||`${k} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(v),i=void 0),typeof l=="object"&&l!==null){const B=o+t,k=[];let P=0,D,N;if(Array.isArray(l)){D="[",N="]";const{length:W}=l;for(;P<W;P++)k.push(s(l[P],B,P===W-1?0:1)||"null")}else{D="{",N="}";const W=Object.keys(l),{length:V}=W;for(;P<V;P++){const $=W[P],ie=`${JSON.stringify($)}: `,ne=s(l[$],B,ie.length+(P===V-1?0:1));ne!==void 0&&k.push(ie+ne)}}if(k.length>0)return[D,t+k.join(`,
${B}`),N].join(`
${o}`)}return v}(n,"",0)}var Lv={exports:{}},Vie=Lv.exports,lT;function Hie(){return lT||(lT=1,function(n,e){(function(t,r){r(e)})(Vie,function(t){const r={isWhiteSpace:function(Pe){return Pe===" "||Pe===""||Pe==="\uFEFF"||Pe>="	"&&Pe<="\r"||Pe===""||Pe>=""&&Pe<=""||Pe==="\u2028"||Pe==="\u2029"||Pe===""||Pe===""||Pe===""},isWhiteSpaceJSON:function(Pe){return Pe===" "||Pe==="	"||Pe===`
`||Pe==="\r"},isLineTerminator:function(Pe){return Pe===`
`||Pe==="\r"||Pe==="\u2028"||Pe==="\u2029"},isLineTerminatorJSON:function(Pe){return Pe===`
`||Pe==="\r"},isIdentifierStart:function(Pe){return Pe==="$"||Pe==="_"||Pe>="A"&&Pe<="Z"||Pe>="a"&&Pe<="z"||Pe>=""&&r.NonAsciiIdentifierStart.test(Pe)},isIdentifierPart:function(Pe){return Pe==="$"||Pe==="_"||Pe>="A"&&Pe<="Z"||Pe>="a"&&Pe<="z"||Pe>="0"&&Pe<="9"||Pe>=""&&r.NonAsciiIdentifierPart.test(Pe)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(je){return je>="0"&&je<="9"||je>="A"&&je<="F"||je>="a"&&je<="f"}function s(je){return je>="0"&&je<="7"}function l(je){return je>="0"&&je<="9"}function o(je){return je.charCodeAt(0)===65279}const p={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},v=Object.hasOwn,x={};function B(je,Pe){(typeof je!="string"||!(je instanceof String))&&(je=String(je));const Le=Pe.mode==="json5",Xe=Pe.ignoreBOM,Ct=Pe.ignoreComments||Pe.mode==="cjson"||Le,Gt=Pe.ignoreTrailingCommas||Le,mt=Pe.ignoreProtoKey,Ut=Pe.ignorePrototypeKeys,kt=Pe.allowSingleQuotedStrings||Le,Te=Pe.allowDuplicateObjectKeys,Re=Pe.reviver,Ue=Pe.tokenize,nt=Pe.rawTokens,_t=Pe.tokenLocations,gt=Pe.tokenPaths,Kt=Le?r.isLineTerminator:r.isLineTerminatorJSON,$t=Le?r.isWhiteSpace:r.isWhiteSpaceJSON,Rt=je.length;let _n=0,pr=0,nn=0;const Xn=[];let Fn,an,Bn;if(Ue){let Ee=null,it,ut;Fn=function(){if(Ee!==null)throw Error("internal error, token overlap");it=_n+1,ut=nn-pr+1,Ee=nn},an=function(at,zt){if(Ee!==nn){const Qt={type:at};nt&&(Qt.raw=je.substr(Ee,nn-Ee)),zt!==void 0&&(Qt.value=zt),_t&&(Qt.location={start:{column:ut,line:it,offset:Ee}}),gt&&(Qt.path=Bn.slice()),Xn.push(Qt)}return Ee=null,zt},gt&&(Bn=[])}function Cr(){let Ee;return nn<Rt?Ee=`Unexpected token ${JSON.stringify(je[nn])}`:Ee="Unexpected end of input",Ee}function lr(Ee){const it=nn-pr+1;++_n;const ut=Me(Ee,je,nn,_n,it),at=SyntaxError(ut.message);return at.reason=Ee,at.excerpt=ut.excerpt,at.pointer=ut.pointer,at.location={start:{column:it,line:_n,offset:nn}},at}function hr(Ee){throw Ee||(Ee=Cr()),lr(Ee)}function We(Ee){Ee==="\r"&&je[nn]===`
`&&++nn,pr=nn,++_n}function ce(){if(nn<Rt){Fn==null||Fn();const Ee=je[nn++];if(Ee==='"'||Ee==="'"&&kt){const it=f(Ee);return an==null||an("literal",it),it}if(Ee==="{")return an==null||an("symbol","{"),Jn();if(Ee==="[")return an==null||an("symbol","["),He();if(Ee==="-"||Ee==="."||l(Ee)||Le&&(Ee==="+"||Ee==="I"||Ee==="N")){const it=ae();return an==null||an("literal",it),it}if(Ee==="n")return Zt("null"),an==null||an("literal",null),null;if(Ee==="t")return Zt("true"),an==null||an("literal",!0),!0;if(Ee==="f")return Zt("false"),an==null||an("literal",!1),!1;--nn,an==null||an();return}}function ye(){let Ee;if(nn<Rt){Fn==null||Fn();const it=je[nn++];if(it==='"'||it==="'"&&kt){const ut=f(it);return an==null||an("literal",ut),ut}if(it==="{")return an==null||an("symbol","{"),Jn();if(it==="[")return an==null||an("symbol","["),He();if(it==="."||l(it)){const ut=ae();return an==null||an("literal",ut),ut}if(Le&&r.isIdentifierStart(it)||it==="\\"&&je[nn]==="u"){const ut=nn-1;if(Ee=_e(),Ee===void 0){nn=ut,an==null||an();return}return an==null||an("literal",Ee),Ee}--nn,an==null||an();return}}function rt(){o(je)&&(Fn==null||Fn(),++nn,an==null||an("bom"))}function Et(){let Ee;function it(){Ee||(Ee=!0,--nn,Fn(),++nn)}function ut(){Ee&&(Ee=!1,an("whitespace"))}for(;nn<Rt;){const at=je[nn++];if(Kt(at))Fn&&it(),We(at);else if($t(at))Fn&&it();else if(at==="/"&&Ct&&(je[nn]==="/"||je[nn]==="*"))Fn&&(--nn,ut(),Fn(),++nn),Ht(je[nn++]==="*"),an==null||an("comment");else{--nn;break}}an&&ut()}function Ht(Ee){for(;nn<Rt;){const it=je[nn++];if(Kt(it)){if(!Ee){--nn;return}We(it)}else if(it==="*"&&Ee&&je[nn]==="/"){++nn;return}}Ee&&hr("Unclosed multiline comment")}function Zt(Ee){const it=nn;for(let ut=1,at=Ee.length;ut<at;++ut)(nn>=Rt||Ee[ut]!==je[nn])&&(nn=it-1,hr()),++nn}function Jn(){let Ee={},it=!1;for(;nn<Rt;){Et();const ut=ye();Te===!1&&v(Ee,ut)&&hr(`Duplicate key: "${ut}"`),Et(),Fn==null||Fn();let at=je[nn++];if(an==null||an("symbol",at),at==="}"&&ut===void 0)return!Gt&&it&&(--nn,hr("Trailing comma in object")),Ee;if(at===":"&&ut!==void 0){Et(),Bn==null||Bn.push(ut);let zt=ce();if(Bn==null||Bn.pop(),zt===void 0&&hr(`No value found for key "${ut}"`),typeof ut!="string"&&(!Le||typeof ut!="number")&&hr(`Wrong key type: "${ut}"`),Ut&&(ut in x||x[ut]!=null)||mt&&ut==="__proto__"||(Re&&(zt=Re(ut,zt)),zt!==void 0&&(it=!0,ut==="__proto__"?Ee=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(zt)}}`),Ee):Ee[ut]=zt)),Et(),Fn==null||Fn(),at=je[nn++],an==null||an("symbol",at),at!==","){if(at==="}")return Ee;hr()}}else--nn,hr()}hr()}function He(){const Ee=[];for(;nn<Rt;){Et(),Bn==null||Bn.push(Ee.length);let it=ce();Bn==null||Bn.pop(),Et(),Fn==null||Fn();const ut=je[nn++];if(an==null||an("symbol",ut),it!==void 0&&(Re&&(it=Re(String(Ee.length),it)),it===void 0?(++Ee.length,it=!0):Ee.push(it)),ut===",")it===void 0&&hr("Elisions are not supported");else{if(ut==="]")return!Gt&&it===void 0&&Ee.length&&(--nn,hr("Trailing comma in array")),Ee;--nn,hr()}}}function ae(){--nn;let Ee=nn,it=je[nn++];const ut=function(at){const zt=je.substr(Ee,nn-Ee);let Qt;if(at?Qt=Number.parseInt(zt.replace(/^0o?/,""),8):Qt=Number(zt),Number.isNaN(Qt))--nn,hr(`Bad numeric literal - "${je.substr(Ee,nn-Ee+1)}"`);else if(!Le&&!zt.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--nn,hr(`Non-json numeric literal - "${je.substr(Ee,nn-Ee+1)}"`);else return Qt};if((it==="-"||it==="+"&&Le)&&(it=je[nn++]),it==="N"&&Le)return Zt("NaN"),Number.NaN;if(it==="I"&&Le)return Zt("Infinity"),ut();if(it>="1"&&it<="9"){for(;nn<Rt&&l(je[nn]);)++nn;it=je[nn++]}if(it==="0"){it=je[nn++];const at=it==="o"||it==="O"||s(it),zt=it==="x"||it==="X";if(Le&&(at||zt)){for(;nn<Rt&&(zt?i:s)(je[nn]);)++nn;let Qt=1;return je[Ee]==="-"?(Qt=-1,++Ee):je[Ee]==="+"&&++Ee,Qt*ut(at)}}if(it==="."){for(;nn<Rt&&l(je[nn]);)++nn;it=je[nn++]}if(it==="e"||it==="E"){for(it=je[nn++],(it==="-"||it==="+")&&++nn;nn<Rt&&l(je[nn]);)++nn;it=je[nn++]}return--nn,ut()}function _e(){--nn;let Ee="";for(;nn<Rt;){let it=je[nn++];if(it==="\\"&&je[nn]==="u"&&i(je[nn+1])&&i(je[nn+2])&&i(je[nn+3])&&i(je[nn+4])&&(it=String.fromCharCode(Number.parseInt(je.substr(nn+1,4),16)),nn+=5),Ee.length)if(r.isIdentifierPart(it))Ee+=it;else return--nn,Ee;else if(r.isIdentifierStart(it))Ee+=it;else return}hr()}function f(Ee){let it="";for(;nn<Rt;){let ut=je[nn++];if(ut===Ee)return it;if(ut==="\\")if(nn>=Rt&&hr(),ut=je[nn++],p[ut]&&(Le||ut!=="v"&&(ut!=="'"||kt)))it+=p[ut];else if(Le&&Kt(ut))We(ut);else if(ut==="u"||ut==="x"&&Le){const at=ut==="u"?4:2;for(let zt=0;zt<at;++zt)nn>=Rt&&hr(),i(je[nn])||hr("Bad escape sequence"),nn++;it+=String.fromCharCode(Number.parseInt(je.substr(nn-at,at),16))}else if(Le&&s(ut)){let at;ut<"4"&&s(je[nn])&&s(je[nn+1])?at=3:s(je[nn])?at=2:at=1,nn+=at-1,it+=String.fromCharCode(Number.parseInt(je.substr(nn-at,at),8))}else Le?it+=ut:(--nn,hr());else Kt(ut)?hr():(!Le&&ut.charCodeAt(0)<32&&(--nn,hr("Unexpected control character")),it+=ut)}hr()}Xe&&rt(),Et();let Qe=ce();if(Qe!==void 0||nn<Rt){if(Et(),nn>=Rt)return Re&&(Qe=Re("",Qe)),Ue?Xn:Qe;hr()}else hr(nn?"No data, only a whitespace":"No data, empty input")}function k(je,Pe){return typeof Pe=="function"?Pe={reviver:Pe}:Pe||(Pe={}),B(je,Pe)}function P(je,Pe){Pe||(Pe={});const Le=Pe.tokenize;Pe.tokenize=!0;const Xe=B(je,Pe);return Pe.tokenize=Le,Xe}function D(je){return je.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function N(je){return je.length===0?"":`/${je.map(D).join("/")}`}function W(je){return je.replace(/~1/g,"/").replace(/~0/g,"~")}function V(je){if(je==="")return[];if(je[0]!=="/")throw new Error('Missing initial "/" in the reference');return je.substr(1).split("/").map(W)}function $(je,Pe){const Le=je.substr(0,Pe).split(/\r?\n/),Xe=Le.length,Ct=Le[Xe-1].length+1;return{line:Xe,column:Ct}}function ie(je,Pe,Le){if(Pe>1){const Xe=/\r?\n/g;let Ct;for(;Ct=Xe.exec(je);)if(--Pe===1)return Ct.index+Le}return Le-1}function ne(je,Pe){const Le=Math.max(0,Pe-20),Xe=je.substr(Le,Pe-Le);return(Pe>20?"...":"")+Xe.replace(/\r?\n/g,"")}function q(je,Pe){let Le=Math.max(0,Pe-20);Le+=Pe-Le;const Xe=je.length-Le;return je.substr(Le,Math.min(20,Xe)).replace(/\r?\n/g,"")+(Xe>20?"...":"")}function te(je,Pe){const Le=ne(je,Pe),Xe=q(je,Pe),Ct=`${new Array(Le.length+1).join("-")}^`;return{excerpt:Le+Xe,pointer:Ct}}function G(je){let Pe=je.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Le=Pe.charAt(0);return Le>="a"&&(Pe=Le.toUpperCase()+Pe.substr(1)),Pe}function oe(je,Pe){const Le=/ in JSON at position (\d+)$/.exec(Pe);if(Le){const Xe=+Le[1],Ct=$(je,Xe);return{offset:Xe,line:Ct.line,column:Ct.column,reason:Pe.substr(0,Le.index)}}}function fe(je,Pe){const Le=/ end of JSON input$/.exec(Pe);if(Le){const Xe=je.length,Ct=$(je,Xe);return{offset:Xe,line:Ct.line,column:Ct.column,reason:Pe.substr(0,Le.index+4)}}}function he(je,Pe){const Le=/ at line (\d+) column (\d+) of the JSON data$/.exec(Pe);if(Le){const Xe=+Le[1],Ct=+Le[2];return{offset:ie(je,Xe,Ct),line:Xe,column:Ct,reason:Pe.substr(0,Le.index)}}}function Me(je,Pe,Le,Xe,Ct){const Gt=te(Pe,Le),mt=Gt.excerpt;let Ut,kt;return typeof Xe=="number"?(kt=Gt.pointer,Ut=`Parse error on line ${Xe}, column ${Ct}:
${mt}
${kt}
${je}`):Ut=`Parse error in JSON input:
${mt}
${je}`,{message:Ut,excerpt:mt,pointer:kt}}function me(je,Pe){let Le=G(Pe);const Xe=oe(je,Le)||fe(je,Le)||he(je,Le);let Ct,Gt,mt;Xe?(Ct=Xe.offset,Gt=Xe.line,mt=Xe.column,Le=Xe.reason):Ct=0,Pe.reason=Le;const Ut=Me(Le,je,Ct,Gt,mt);return Pe.message=Ut.message,Pe.excerpt=Ut.excerpt,Ut.pointer&&(Pe.pointer=Ut.pointer,Pe.location={start:{column:mt,line:Gt,offset:Ct}}),Pe}function pe(je,Pe){try{return JSON.parse(je,Pe)}catch(Le){const Xe=me(je,Le);if(Le.location)throw Xe;return k(je,Pe)}}const qe=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),Se=typeof process<"u"&&process.version.startsWith("v4.");function vt(je){return je.ignoreBOM||je.ignoreComments||je.ignoreTrailingCommas||je.allowSingleQuotedStrings||je.allowDuplicateObjectKeys===!1||je.ignoreProtoKey||je.ignorePrototypeKeys||je.mode==="cjson"||je.mode==="json5"||qe||Se}function Je(je){if(typeof je=="function")return je;if(je)return je.reviver}function Ke(je,Pe){return Pe||(Pe={}),vt(Pe)?k(je,Pe):pe(je,Je(Pe))}t.parse=Ke,t.tokenize=P,t.pathToPointer=N,t.pointerToPath=V,t.parseNative=pe,t.parseCustom=k,t.getErrorTexts=Me,Object.defineProperty(t,"__esModule",{value:!0})})}(Lv,Lv.exports)),Lv.exports}var $ie=Hie(),kb={exports:{}},Zie=kb.exports,AT;function Xie(){return AT||(AT=1,function(n,e){(function(t,r){n.exports=r()})(Zie,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Re,Ue){return Ue={exports:{}},Re(Ue,Ue.exports),Ue.exports}var i=r(function(Re){function Ue(){var nt=0,_t=1,gt=2,Kt=3,$t=4,Rt=5,_n=6,pr=7,nn=8,Xn=9,Fn=10,an=11,Bn=12,Cr=13,lr=14,hr=15,We=16,ce=17,ye=0,rt=1,Et=2,Ht=3,Zt=4;function Jn(f,Qe){return 55296<=f.charCodeAt(Qe)&&f.charCodeAt(Qe)<=56319&&56320<=f.charCodeAt(Qe+1)&&f.charCodeAt(Qe+1)<=57343}function He(f,Qe){Qe===void 0&&(Qe=0);var Ee=f.charCodeAt(Qe);if(55296<=Ee&&Ee<=56319&&Qe<f.length-1){var it=Ee,ut=f.charCodeAt(Qe+1);return 56320<=ut&&ut<=57343?(it-55296)*1024+(ut-56320)+65536:it}if(56320<=Ee&&Ee<=57343&&Qe>=1){var it=f.charCodeAt(Qe-1),ut=Ee;return 55296<=it&&it<=56319?(it-55296)*1024+(ut-56320)+65536:ut}return Ee}function ae(f,Qe,Ee){var it=[f].concat(Qe).concat([Ee]),ut=it[it.length-2],at=Ee,zt=it.lastIndexOf(lr);if(zt>1&&it.slice(1,zt).every(function(rn){return rn==Kt})&&[Kt,Cr,ce].indexOf(f)==-1)return Et;var Qt=it.lastIndexOf($t);if(Qt>0&&it.slice(1,Qt).every(function(rn){return rn==$t})&&[Bn,$t].indexOf(ut)==-1)return it.filter(function(rn){return rn==$t}).length%2==1?Ht:Zt;if(ut==nt&&at==_t)return ye;if(ut==gt||ut==nt||ut==_t)return at==lr&&Qe.every(function(rn){return rn==Kt})?Et:rt;if(at==gt||at==nt||at==_t)return rt;if(ut==_n&&(at==_n||at==pr||at==Xn||at==Fn))return ye;if((ut==Xn||ut==pr)&&(at==pr||at==nn))return ye;if((ut==Fn||ut==nn)&&at==nn)return ye;if(at==Kt||at==hr)return ye;if(at==Rt)return ye;if(ut==Bn)return ye;var Nt=it.indexOf(Kt)!=-1?it.lastIndexOf(Kt)-1:it.length-2;return[Cr,ce].indexOf(it[Nt])!=-1&&it.slice(Nt+1,-1).every(function(rn){return rn==Kt})&&at==lr||ut==hr&&[We,ce].indexOf(at)!=-1?ye:Qe.indexOf($t)!=-1?Et:ut==$t&&at==$t?ye:rt}this.nextBreak=function(f,Qe){if(Qe===void 0&&(Qe=0),Qe<0)return 0;if(Qe>=f.length-1)return f.length;for(var Ee=_e(He(f,Qe)),it=[],ut=Qe+1;ut<f.length;ut++)if(!Jn(f,ut-1)){var at=_e(He(f,ut));if(ae(Ee,it,at))return ut;it.push(at)}return f.length},this.splitGraphemes=function(f){for(var Qe=[],Ee=0,it;(it=this.nextBreak(f,Ee))<f.length;)Qe.push(f.slice(Ee,it)),Ee=it;return Ee<f.length&&Qe.push(f.slice(Ee)),Qe},this.iterateGraphemes=function(f){var Qe=0,Ee={next:(function(){var it,ut;return(ut=this.nextBreak(f,Qe))<f.length?(it=f.slice(Qe,ut),Qe=ut,{value:it,done:!1}):Qe<f.length?(it=f.slice(Qe),Qe=f.length,{value:it,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Ee[Symbol.iterator]=function(){return Ee}),Ee},this.countGraphemes=function(f){for(var Qe=0,Ee=0,it;(it=this.nextBreak(f,Ee))<f.length;)Ee=it,Qe++;return Ee<f.length&&Qe++,Qe};function _e(f){return 1536<=f&&f<=1541||f==1757||f==1807||f==2274||f==3406||f==69821||70082<=f&&f<=70083||f==72250||72326<=f&&f<=72329||f==73030?Bn:f==13?nt:f==10?_t:0<=f&&f<=9||11<=f&&f<=12||14<=f&&f<=31||127<=f&&f<=159||f==173||f==1564||f==6158||f==8203||8206<=f&&f<=8207||f==8232||f==8233||8234<=f&&f<=8238||8288<=f&&f<=8292||f==8293||8294<=f&&f<=8303||55296<=f&&f<=57343||f==65279||65520<=f&&f<=65528||65529<=f&&f<=65531||113824<=f&&f<=113827||119155<=f&&f<=119162||f==917504||f==917505||917506<=f&&f<=917535||917632<=f&&f<=917759||918e3<=f&&f<=921599?gt:768<=f&&f<=879||1155<=f&&f<=1159||1160<=f&&f<=1161||1425<=f&&f<=1469||f==1471||1473<=f&&f<=1474||1476<=f&&f<=1477||f==1479||1552<=f&&f<=1562||1611<=f&&f<=1631||f==1648||1750<=f&&f<=1756||1759<=f&&f<=1764||1767<=f&&f<=1768||1770<=f&&f<=1773||f==1809||1840<=f&&f<=1866||1958<=f&&f<=1968||2027<=f&&f<=2035||2070<=f&&f<=2073||2075<=f&&f<=2083||2085<=f&&f<=2087||2089<=f&&f<=2093||2137<=f&&f<=2139||2260<=f&&f<=2273||2275<=f&&f<=2306||f==2362||f==2364||2369<=f&&f<=2376||f==2381||2385<=f&&f<=2391||2402<=f&&f<=2403||f==2433||f==2492||f==2494||2497<=f&&f<=2500||f==2509||f==2519||2530<=f&&f<=2531||2561<=f&&f<=2562||f==2620||2625<=f&&f<=2626||2631<=f&&f<=2632||2635<=f&&f<=2637||f==2641||2672<=f&&f<=2673||f==2677||2689<=f&&f<=2690||f==2748||2753<=f&&f<=2757||2759<=f&&f<=2760||f==2765||2786<=f&&f<=2787||2810<=f&&f<=2815||f==2817||f==2876||f==2878||f==2879||2881<=f&&f<=2884||f==2893||f==2902||f==2903||2914<=f&&f<=2915||f==2946||f==3006||f==3008||f==3021||f==3031||f==3072||3134<=f&&f<=3136||3142<=f&&f<=3144||3146<=f&&f<=3149||3157<=f&&f<=3158||3170<=f&&f<=3171||f==3201||f==3260||f==3263||f==3266||f==3270||3276<=f&&f<=3277||3285<=f&&f<=3286||3298<=f&&f<=3299||3328<=f&&f<=3329||3387<=f&&f<=3388||f==3390||3393<=f&&f<=3396||f==3405||f==3415||3426<=f&&f<=3427||f==3530||f==3535||3538<=f&&f<=3540||f==3542||f==3551||f==3633||3636<=f&&f<=3642||3655<=f&&f<=3662||f==3761||3764<=f&&f<=3769||3771<=f&&f<=3772||3784<=f&&f<=3789||3864<=f&&f<=3865||f==3893||f==3895||f==3897||3953<=f&&f<=3966||3968<=f&&f<=3972||3974<=f&&f<=3975||3981<=f&&f<=3991||3993<=f&&f<=4028||f==4038||4141<=f&&f<=4144||4146<=f&&f<=4151||4153<=f&&f<=4154||4157<=f&&f<=4158||4184<=f&&f<=4185||4190<=f&&f<=4192||4209<=f&&f<=4212||f==4226||4229<=f&&f<=4230||f==4237||f==4253||4957<=f&&f<=4959||5906<=f&&f<=5908||5938<=f&&f<=5940||5970<=f&&f<=5971||6002<=f&&f<=6003||6068<=f&&f<=6069||6071<=f&&f<=6077||f==6086||6089<=f&&f<=6099||f==6109||6155<=f&&f<=6157||6277<=f&&f<=6278||f==6313||6432<=f&&f<=6434||6439<=f&&f<=6440||f==6450||6457<=f&&f<=6459||6679<=f&&f<=6680||f==6683||f==6742||6744<=f&&f<=6750||f==6752||f==6754||6757<=f&&f<=6764||6771<=f&&f<=6780||f==6783||6832<=f&&f<=6845||f==6846||6912<=f&&f<=6915||f==6964||6966<=f&&f<=6970||f==6972||f==6978||7019<=f&&f<=7027||7040<=f&&f<=7041||7074<=f&&f<=7077||7080<=f&&f<=7081||7083<=f&&f<=7085||f==7142||7144<=f&&f<=7145||f==7149||7151<=f&&f<=7153||7212<=f&&f<=7219||7222<=f&&f<=7223||7376<=f&&f<=7378||7380<=f&&f<=7392||7394<=f&&f<=7400||f==7405||f==7412||7416<=f&&f<=7417||7616<=f&&f<=7673||7675<=f&&f<=7679||f==8204||8400<=f&&f<=8412||8413<=f&&f<=8416||f==8417||8418<=f&&f<=8420||8421<=f&&f<=8432||11503<=f&&f<=11505||f==11647||11744<=f&&f<=11775||12330<=f&&f<=12333||12334<=f&&f<=12335||12441<=f&&f<=12442||f==42607||42608<=f&&f<=42610||42612<=f&&f<=42621||42654<=f&&f<=42655||42736<=f&&f<=42737||f==43010||f==43014||f==43019||43045<=f&&f<=43046||43204<=f&&f<=43205||43232<=f&&f<=43249||43302<=f&&f<=43309||43335<=f&&f<=43345||43392<=f&&f<=43394||f==43443||43446<=f&&f<=43449||f==43452||f==43493||43561<=f&&f<=43566||43569<=f&&f<=43570||43573<=f&&f<=43574||f==43587||f==43596||f==43644||f==43696||43698<=f&&f<=43700||43703<=f&&f<=43704||43710<=f&&f<=43711||f==43713||43756<=f&&f<=43757||f==43766||f==44005||f==44008||f==44013||f==64286||65024<=f&&f<=65039||65056<=f&&f<=65071||65438<=f&&f<=65439||f==66045||f==66272||66422<=f&&f<=66426||68097<=f&&f<=68099||68101<=f&&f<=68102||68108<=f&&f<=68111||68152<=f&&f<=68154||f==68159||68325<=f&&f<=68326||f==69633||69688<=f&&f<=69702||69759<=f&&f<=69761||69811<=f&&f<=69814||69817<=f&&f<=69818||69888<=f&&f<=69890||69927<=f&&f<=69931||69933<=f&&f<=69940||f==70003||70016<=f&&f<=70017||70070<=f&&f<=70078||70090<=f&&f<=70092||70191<=f&&f<=70193||f==70196||70198<=f&&f<=70199||f==70206||f==70367||70371<=f&&f<=70378||70400<=f&&f<=70401||f==70460||f==70462||f==70464||f==70487||70502<=f&&f<=70508||70512<=f&&f<=70516||70712<=f&&f<=70719||70722<=f&&f<=70724||f==70726||f==70832||70835<=f&&f<=70840||f==70842||f==70845||70847<=f&&f<=70848||70850<=f&&f<=70851||f==71087||71090<=f&&f<=71093||71100<=f&&f<=71101||71103<=f&&f<=71104||71132<=f&&f<=71133||71219<=f&&f<=71226||f==71229||71231<=f&&f<=71232||f==71339||f==71341||71344<=f&&f<=71349||f==71351||71453<=f&&f<=71455||71458<=f&&f<=71461||71463<=f&&f<=71467||72193<=f&&f<=72198||72201<=f&&f<=72202||72243<=f&&f<=72248||72251<=f&&f<=72254||f==72263||72273<=f&&f<=72278||72281<=f&&f<=72283||72330<=f&&f<=72342||72344<=f&&f<=72345||72752<=f&&f<=72758||72760<=f&&f<=72765||f==72767||72850<=f&&f<=72871||72874<=f&&f<=72880||72882<=f&&f<=72883||72885<=f&&f<=72886||73009<=f&&f<=73014||f==73018||73020<=f&&f<=73021||73023<=f&&f<=73029||f==73031||92912<=f&&f<=92916||92976<=f&&f<=92982||94095<=f&&f<=94098||113821<=f&&f<=113822||f==119141||119143<=f&&f<=119145||119150<=f&&f<=119154||119163<=f&&f<=119170||119173<=f&&f<=119179||119210<=f&&f<=119213||119362<=f&&f<=119364||121344<=f&&f<=121398||121403<=f&&f<=121452||f==121461||f==121476||121499<=f&&f<=121503||121505<=f&&f<=121519||122880<=f&&f<=122886||122888<=f&&f<=122904||122907<=f&&f<=122913||122915<=f&&f<=122916||122918<=f&&f<=122922||125136<=f&&f<=125142||125252<=f&&f<=125258||917536<=f&&f<=917631||917760<=f&&f<=917999?Kt:127462<=f&&f<=127487?$t:f==2307||f==2363||2366<=f&&f<=2368||2377<=f&&f<=2380||2382<=f&&f<=2383||2434<=f&&f<=2435||2495<=f&&f<=2496||2503<=f&&f<=2504||2507<=f&&f<=2508||f==2563||2622<=f&&f<=2624||f==2691||2750<=f&&f<=2752||f==2761||2763<=f&&f<=2764||2818<=f&&f<=2819||f==2880||2887<=f&&f<=2888||2891<=f&&f<=2892||f==3007||3009<=f&&f<=3010||3014<=f&&f<=3016||3018<=f&&f<=3020||3073<=f&&f<=3075||3137<=f&&f<=3140||3202<=f&&f<=3203||f==3262||3264<=f&&f<=3265||3267<=f&&f<=3268||3271<=f&&f<=3272||3274<=f&&f<=3275||3330<=f&&f<=3331||3391<=f&&f<=3392||3398<=f&&f<=3400||3402<=f&&f<=3404||3458<=f&&f<=3459||3536<=f&&f<=3537||3544<=f&&f<=3550||3570<=f&&f<=3571||f==3635||f==3763||3902<=f&&f<=3903||f==3967||f==4145||4155<=f&&f<=4156||4182<=f&&f<=4183||f==4228||f==6070||6078<=f&&f<=6085||6087<=f&&f<=6088||6435<=f&&f<=6438||6441<=f&&f<=6443||6448<=f&&f<=6449||6451<=f&&f<=6456||6681<=f&&f<=6682||f==6741||f==6743||6765<=f&&f<=6770||f==6916||f==6965||f==6971||6973<=f&&f<=6977||6979<=f&&f<=6980||f==7042||f==7073||7078<=f&&f<=7079||f==7082||f==7143||7146<=f&&f<=7148||f==7150||7154<=f&&f<=7155||7204<=f&&f<=7211||7220<=f&&f<=7221||f==7393||7410<=f&&f<=7411||f==7415||43043<=f&&f<=43044||f==43047||43136<=f&&f<=43137||43188<=f&&f<=43203||43346<=f&&f<=43347||f==43395||43444<=f&&f<=43445||43450<=f&&f<=43451||43453<=f&&f<=43456||43567<=f&&f<=43568||43571<=f&&f<=43572||f==43597||f==43755||43758<=f&&f<=43759||f==43765||44003<=f&&f<=44004||44006<=f&&f<=44007||44009<=f&&f<=44010||f==44012||f==69632||f==69634||f==69762||69808<=f&&f<=69810||69815<=f&&f<=69816||f==69932||f==70018||70067<=f&&f<=70069||70079<=f&&f<=70080||70188<=f&&f<=70190||70194<=f&&f<=70195||f==70197||70368<=f&&f<=70370||70402<=f&&f<=70403||f==70463||70465<=f&&f<=70468||70471<=f&&f<=70472||70475<=f&&f<=70477||70498<=f&&f<=70499||70709<=f&&f<=70711||70720<=f&&f<=70721||f==70725||70833<=f&&f<=70834||f==70841||70843<=f&&f<=70844||f==70846||f==70849||71088<=f&&f<=71089||71096<=f&&f<=71099||f==71102||71216<=f&&f<=71218||71227<=f&&f<=71228||f==71230||f==71340||71342<=f&&f<=71343||f==71350||71456<=f&&f<=71457||f==71462||72199<=f&&f<=72200||f==72249||72279<=f&&f<=72280||f==72343||f==72751||f==72766||f==72873||f==72881||f==72884||94033<=f&&f<=94078||f==119142||f==119149?Rt:4352<=f&&f<=4447||43360<=f&&f<=43388?_n:4448<=f&&f<=4519||55216<=f&&f<=55238?pr:4520<=f&&f<=4607||55243<=f&&f<=55291?nn:f==44032||f==44060||f==44088||f==44116||f==44144||f==44172||f==44200||f==44228||f==44256||f==44284||f==44312||f==44340||f==44368||f==44396||f==44424||f==44452||f==44480||f==44508||f==44536||f==44564||f==44592||f==44620||f==44648||f==44676||f==44704||f==44732||f==44760||f==44788||f==44816||f==44844||f==44872||f==44900||f==44928||f==44956||f==44984||f==45012||f==45040||f==45068||f==45096||f==45124||f==45152||f==45180||f==45208||f==45236||f==45264||f==45292||f==45320||f==45348||f==45376||f==45404||f==45432||f==45460||f==45488||f==45516||f==45544||f==45572||f==45600||f==45628||f==45656||f==45684||f==45712||f==45740||f==45768||f==45796||f==45824||f==45852||f==45880||f==45908||f==45936||f==45964||f==45992||f==46020||f==46048||f==46076||f==46104||f==46132||f==46160||f==46188||f==46216||f==46244||f==46272||f==46300||f==46328||f==46356||f==46384||f==46412||f==46440||f==46468||f==46496||f==46524||f==46552||f==46580||f==46608||f==46636||f==46664||f==46692||f==46720||f==46748||f==46776||f==46804||f==46832||f==46860||f==46888||f==46916||f==46944||f==46972||f==47e3||f==47028||f==47056||f==47084||f==47112||f==47140||f==47168||f==47196||f==47224||f==47252||f==47280||f==47308||f==47336||f==47364||f==47392||f==47420||f==47448||f==47476||f==47504||f==47532||f==47560||f==47588||f==47616||f==47644||f==47672||f==47700||f==47728||f==47756||f==47784||f==47812||f==47840||f==47868||f==47896||f==47924||f==47952||f==47980||f==48008||f==48036||f==48064||f==48092||f==48120||f==48148||f==48176||f==48204||f==48232||f==48260||f==48288||f==48316||f==48344||f==48372||f==48400||f==48428||f==48456||f==48484||f==48512||f==48540||f==48568||f==48596||f==48624||f==48652||f==48680||f==48708||f==48736||f==48764||f==48792||f==48820||f==48848||f==48876||f==48904||f==48932||f==48960||f==48988||f==49016||f==49044||f==49072||f==49100||f==49128||f==49156||f==49184||f==49212||f==49240||f==49268||f==49296||f==49324||f==49352||f==49380||f==49408||f==49436||f==49464||f==49492||f==49520||f==49548||f==49576||f==49604||f==49632||f==49660||f==49688||f==49716||f==49744||f==49772||f==49800||f==49828||f==49856||f==49884||f==49912||f==49940||f==49968||f==49996||f==50024||f==50052||f==50080||f==50108||f==50136||f==50164||f==50192||f==50220||f==50248||f==50276||f==50304||f==50332||f==50360||f==50388||f==50416||f==50444||f==50472||f==50500||f==50528||f==50556||f==50584||f==50612||f==50640||f==50668||f==50696||f==50724||f==50752||f==50780||f==50808||f==50836||f==50864||f==50892||f==50920||f==50948||f==50976||f==51004||f==51032||f==51060||f==51088||f==51116||f==51144||f==51172||f==51200||f==51228||f==51256||f==51284||f==51312||f==51340||f==51368||f==51396||f==51424||f==51452||f==51480||f==51508||f==51536||f==51564||f==51592||f==51620||f==51648||f==51676||f==51704||f==51732||f==51760||f==51788||f==51816||f==51844||f==51872||f==51900||f==51928||f==51956||f==51984||f==52012||f==52040||f==52068||f==52096||f==52124||f==52152||f==52180||f==52208||f==52236||f==52264||f==52292||f==52320||f==52348||f==52376||f==52404||f==52432||f==52460||f==52488||f==52516||f==52544||f==52572||f==52600||f==52628||f==52656||f==52684||f==52712||f==52740||f==52768||f==52796||f==52824||f==52852||f==52880||f==52908||f==52936||f==52964||f==52992||f==53020||f==53048||f==53076||f==53104||f==53132||f==53160||f==53188||f==53216||f==53244||f==53272||f==53300||f==53328||f==53356||f==53384||f==53412||f==53440||f==53468||f==53496||f==53524||f==53552||f==53580||f==53608||f==53636||f==53664||f==53692||f==53720||f==53748||f==53776||f==53804||f==53832||f==53860||f==53888||f==53916||f==53944||f==53972||f==54e3||f==54028||f==54056||f==54084||f==54112||f==54140||f==54168||f==54196||f==54224||f==54252||f==54280||f==54308||f==54336||f==54364||f==54392||f==54420||f==54448||f==54476||f==54504||f==54532||f==54560||f==54588||f==54616||f==54644||f==54672||f==54700||f==54728||f==54756||f==54784||f==54812||f==54840||f==54868||f==54896||f==54924||f==54952||f==54980||f==55008||f==55036||f==55064||f==55092||f==55120||f==55148||f==55176?Xn:44033<=f&&f<=44059||44061<=f&&f<=44087||44089<=f&&f<=44115||44117<=f&&f<=44143||44145<=f&&f<=44171||44173<=f&&f<=44199||44201<=f&&f<=44227||44229<=f&&f<=44255||44257<=f&&f<=44283||44285<=f&&f<=44311||44313<=f&&f<=44339||44341<=f&&f<=44367||44369<=f&&f<=44395||44397<=f&&f<=44423||44425<=f&&f<=44451||44453<=f&&f<=44479||44481<=f&&f<=44507||44509<=f&&f<=44535||44537<=f&&f<=44563||44565<=f&&f<=44591||44593<=f&&f<=44619||44621<=f&&f<=44647||44649<=f&&f<=44675||44677<=f&&f<=44703||44705<=f&&f<=44731||44733<=f&&f<=44759||44761<=f&&f<=44787||44789<=f&&f<=44815||44817<=f&&f<=44843||44845<=f&&f<=44871||44873<=f&&f<=44899||44901<=f&&f<=44927||44929<=f&&f<=44955||44957<=f&&f<=44983||44985<=f&&f<=45011||45013<=f&&f<=45039||45041<=f&&f<=45067||45069<=f&&f<=45095||45097<=f&&f<=45123||45125<=f&&f<=45151||45153<=f&&f<=45179||45181<=f&&f<=45207||45209<=f&&f<=45235||45237<=f&&f<=45263||45265<=f&&f<=45291||45293<=f&&f<=45319||45321<=f&&f<=45347||45349<=f&&f<=45375||45377<=f&&f<=45403||45405<=f&&f<=45431||45433<=f&&f<=45459||45461<=f&&f<=45487||45489<=f&&f<=45515||45517<=f&&f<=45543||45545<=f&&f<=45571||45573<=f&&f<=45599||45601<=f&&f<=45627||45629<=f&&f<=45655||45657<=f&&f<=45683||45685<=f&&f<=45711||45713<=f&&f<=45739||45741<=f&&f<=45767||45769<=f&&f<=45795||45797<=f&&f<=45823||45825<=f&&f<=45851||45853<=f&&f<=45879||45881<=f&&f<=45907||45909<=f&&f<=45935||45937<=f&&f<=45963||45965<=f&&f<=45991||45993<=f&&f<=46019||46021<=f&&f<=46047||46049<=f&&f<=46075||46077<=f&&f<=46103||46105<=f&&f<=46131||46133<=f&&f<=46159||46161<=f&&f<=46187||46189<=f&&f<=46215||46217<=f&&f<=46243||46245<=f&&f<=46271||46273<=f&&f<=46299||46301<=f&&f<=46327||46329<=f&&f<=46355||46357<=f&&f<=46383||46385<=f&&f<=46411||46413<=f&&f<=46439||46441<=f&&f<=46467||46469<=f&&f<=46495||46497<=f&&f<=46523||46525<=f&&f<=46551||46553<=f&&f<=46579||46581<=f&&f<=46607||46609<=f&&f<=46635||46637<=f&&f<=46663||46665<=f&&f<=46691||46693<=f&&f<=46719||46721<=f&&f<=46747||46749<=f&&f<=46775||46777<=f&&f<=46803||46805<=f&&f<=46831||46833<=f&&f<=46859||46861<=f&&f<=46887||46889<=f&&f<=46915||46917<=f&&f<=46943||46945<=f&&f<=46971||46973<=f&&f<=46999||47001<=f&&f<=47027||47029<=f&&f<=47055||47057<=f&&f<=47083||47085<=f&&f<=47111||47113<=f&&f<=47139||47141<=f&&f<=47167||47169<=f&&f<=47195||47197<=f&&f<=47223||47225<=f&&f<=47251||47253<=f&&f<=47279||47281<=f&&f<=47307||47309<=f&&f<=47335||47337<=f&&f<=47363||47365<=f&&f<=47391||47393<=f&&f<=47419||47421<=f&&f<=47447||47449<=f&&f<=47475||47477<=f&&f<=47503||47505<=f&&f<=47531||47533<=f&&f<=47559||47561<=f&&f<=47587||47589<=f&&f<=47615||47617<=f&&f<=47643||47645<=f&&f<=47671||47673<=f&&f<=47699||47701<=f&&f<=47727||47729<=f&&f<=47755||47757<=f&&f<=47783||47785<=f&&f<=47811||47813<=f&&f<=47839||47841<=f&&f<=47867||47869<=f&&f<=47895||47897<=f&&f<=47923||47925<=f&&f<=47951||47953<=f&&f<=47979||47981<=f&&f<=48007||48009<=f&&f<=48035||48037<=f&&f<=48063||48065<=f&&f<=48091||48093<=f&&f<=48119||48121<=f&&f<=48147||48149<=f&&f<=48175||48177<=f&&f<=48203||48205<=f&&f<=48231||48233<=f&&f<=48259||48261<=f&&f<=48287||48289<=f&&f<=48315||48317<=f&&f<=48343||48345<=f&&f<=48371||48373<=f&&f<=48399||48401<=f&&f<=48427||48429<=f&&f<=48455||48457<=f&&f<=48483||48485<=f&&f<=48511||48513<=f&&f<=48539||48541<=f&&f<=48567||48569<=f&&f<=48595||48597<=f&&f<=48623||48625<=f&&f<=48651||48653<=f&&f<=48679||48681<=f&&f<=48707||48709<=f&&f<=48735||48737<=f&&f<=48763||48765<=f&&f<=48791||48793<=f&&f<=48819||48821<=f&&f<=48847||48849<=f&&f<=48875||48877<=f&&f<=48903||48905<=f&&f<=48931||48933<=f&&f<=48959||48961<=f&&f<=48987||48989<=f&&f<=49015||49017<=f&&f<=49043||49045<=f&&f<=49071||49073<=f&&f<=49099||49101<=f&&f<=49127||49129<=f&&f<=49155||49157<=f&&f<=49183||49185<=f&&f<=49211||49213<=f&&f<=49239||49241<=f&&f<=49267||49269<=f&&f<=49295||49297<=f&&f<=49323||49325<=f&&f<=49351||49353<=f&&f<=49379||49381<=f&&f<=49407||49409<=f&&f<=49435||49437<=f&&f<=49463||49465<=f&&f<=49491||49493<=f&&f<=49519||49521<=f&&f<=49547||49549<=f&&f<=49575||49577<=f&&f<=49603||49605<=f&&f<=49631||49633<=f&&f<=49659||49661<=f&&f<=49687||49689<=f&&f<=49715||49717<=f&&f<=49743||49745<=f&&f<=49771||49773<=f&&f<=49799||49801<=f&&f<=49827||49829<=f&&f<=49855||49857<=f&&f<=49883||49885<=f&&f<=49911||49913<=f&&f<=49939||49941<=f&&f<=49967||49969<=f&&f<=49995||49997<=f&&f<=50023||50025<=f&&f<=50051||50053<=f&&f<=50079||50081<=f&&f<=50107||50109<=f&&f<=50135||50137<=f&&f<=50163||50165<=f&&f<=50191||50193<=f&&f<=50219||50221<=f&&f<=50247||50249<=f&&f<=50275||50277<=f&&f<=50303||50305<=f&&f<=50331||50333<=f&&f<=50359||50361<=f&&f<=50387||50389<=f&&f<=50415||50417<=f&&f<=50443||50445<=f&&f<=50471||50473<=f&&f<=50499||50501<=f&&f<=50527||50529<=f&&f<=50555||50557<=f&&f<=50583||50585<=f&&f<=50611||50613<=f&&f<=50639||50641<=f&&f<=50667||50669<=f&&f<=50695||50697<=f&&f<=50723||50725<=f&&f<=50751||50753<=f&&f<=50779||50781<=f&&f<=50807||50809<=f&&f<=50835||50837<=f&&f<=50863||50865<=f&&f<=50891||50893<=f&&f<=50919||50921<=f&&f<=50947||50949<=f&&f<=50975||50977<=f&&f<=51003||51005<=f&&f<=51031||51033<=f&&f<=51059||51061<=f&&f<=51087||51089<=f&&f<=51115||51117<=f&&f<=51143||51145<=f&&f<=51171||51173<=f&&f<=51199||51201<=f&&f<=51227||51229<=f&&f<=51255||51257<=f&&f<=51283||51285<=f&&f<=51311||51313<=f&&f<=51339||51341<=f&&f<=51367||51369<=f&&f<=51395||51397<=f&&f<=51423||51425<=f&&f<=51451||51453<=f&&f<=51479||51481<=f&&f<=51507||51509<=f&&f<=51535||51537<=f&&f<=51563||51565<=f&&f<=51591||51593<=f&&f<=51619||51621<=f&&f<=51647||51649<=f&&f<=51675||51677<=f&&f<=51703||51705<=f&&f<=51731||51733<=f&&f<=51759||51761<=f&&f<=51787||51789<=f&&f<=51815||51817<=f&&f<=51843||51845<=f&&f<=51871||51873<=f&&f<=51899||51901<=f&&f<=51927||51929<=f&&f<=51955||51957<=f&&f<=51983||51985<=f&&f<=52011||52013<=f&&f<=52039||52041<=f&&f<=52067||52069<=f&&f<=52095||52097<=f&&f<=52123||52125<=f&&f<=52151||52153<=f&&f<=52179||52181<=f&&f<=52207||52209<=f&&f<=52235||52237<=f&&f<=52263||52265<=f&&f<=52291||52293<=f&&f<=52319||52321<=f&&f<=52347||52349<=f&&f<=52375||52377<=f&&f<=52403||52405<=f&&f<=52431||52433<=f&&f<=52459||52461<=f&&f<=52487||52489<=f&&f<=52515||52517<=f&&f<=52543||52545<=f&&f<=52571||52573<=f&&f<=52599||52601<=f&&f<=52627||52629<=f&&f<=52655||52657<=f&&f<=52683||52685<=f&&f<=52711||52713<=f&&f<=52739||52741<=f&&f<=52767||52769<=f&&f<=52795||52797<=f&&f<=52823||52825<=f&&f<=52851||52853<=f&&f<=52879||52881<=f&&f<=52907||52909<=f&&f<=52935||52937<=f&&f<=52963||52965<=f&&f<=52991||52993<=f&&f<=53019||53021<=f&&f<=53047||53049<=f&&f<=53075||53077<=f&&f<=53103||53105<=f&&f<=53131||53133<=f&&f<=53159||53161<=f&&f<=53187||53189<=f&&f<=53215||53217<=f&&f<=53243||53245<=f&&f<=53271||53273<=f&&f<=53299||53301<=f&&f<=53327||53329<=f&&f<=53355||53357<=f&&f<=53383||53385<=f&&f<=53411||53413<=f&&f<=53439||53441<=f&&f<=53467||53469<=f&&f<=53495||53497<=f&&f<=53523||53525<=f&&f<=53551||53553<=f&&f<=53579||53581<=f&&f<=53607||53609<=f&&f<=53635||53637<=f&&f<=53663||53665<=f&&f<=53691||53693<=f&&f<=53719||53721<=f&&f<=53747||53749<=f&&f<=53775||53777<=f&&f<=53803||53805<=f&&f<=53831||53833<=f&&f<=53859||53861<=f&&f<=53887||53889<=f&&f<=53915||53917<=f&&f<=53943||53945<=f&&f<=53971||53973<=f&&f<=53999||54001<=f&&f<=54027||54029<=f&&f<=54055||54057<=f&&f<=54083||54085<=f&&f<=54111||54113<=f&&f<=54139||54141<=f&&f<=54167||54169<=f&&f<=54195||54197<=f&&f<=54223||54225<=f&&f<=54251||54253<=f&&f<=54279||54281<=f&&f<=54307||54309<=f&&f<=54335||54337<=f&&f<=54363||54365<=f&&f<=54391||54393<=f&&f<=54419||54421<=f&&f<=54447||54449<=f&&f<=54475||54477<=f&&f<=54503||54505<=f&&f<=54531||54533<=f&&f<=54559||54561<=f&&f<=54587||54589<=f&&f<=54615||54617<=f&&f<=54643||54645<=f&&f<=54671||54673<=f&&f<=54699||54701<=f&&f<=54727||54729<=f&&f<=54755||54757<=f&&f<=54783||54785<=f&&f<=54811||54813<=f&&f<=54839||54841<=f&&f<=54867||54869<=f&&f<=54895||54897<=f&&f<=54923||54925<=f&&f<=54951||54953<=f&&f<=54979||54981<=f&&f<=55007||55009<=f&&f<=55035||55037<=f&&f<=55063||55065<=f&&f<=55091||55093<=f&&f<=55119||55121<=f&&f<=55147||55149<=f&&f<=55175||55177<=f&&f<=55203?Fn:f==9757||f==9977||9994<=f&&f<=9997||f==127877||127938<=f&&f<=127940||f==127943||127946<=f&&f<=127948||128066<=f&&f<=128067||128070<=f&&f<=128080||f==128110||128112<=f&&f<=128120||f==128124||128129<=f&&f<=128131||128133<=f&&f<=128135||f==128170||128372<=f&&f<=128373||f==128378||f==128400||128405<=f&&f<=128406||128581<=f&&f<=128583||128587<=f&&f<=128591||f==128675||128692<=f&&f<=128694||f==128704||f==128716||129304<=f&&f<=129308||129310<=f&&f<=129311||f==129318||129328<=f&&f<=129337||129341<=f&&f<=129342||129489<=f&&f<=129501?Cr:127995<=f&&f<=127999?lr:f==8205?hr:f==9792||f==9794||9877<=f&&f<=9878||f==9992||f==10084||f==127752||f==127806||f==127859||f==127891||f==127908||f==127912||f==127979||f==127981||f==128139||128187<=f&&f<=128188||f==128295||f==128300||f==128488||f==128640||f==128658?We:128102<=f&&f<=128105?ce:an}return this}Re.exports&&(Re.exports=Ue)}),s=new i,l=function(Ue,nt,_t){for(var gt=s.iterateGraphemes(Ue.substring(nt)),Kt="",$t=0;$t<_t-nt;$t++){var Rt=gt.next();if(Kt+=Rt.value,Rt.done)break}return Kt},o=function(Re,Ue,nt,_t,gt,Kt,$t){return{start:{line:Re,column:Ue,offset:nt},end:{line:_t,column:gt,offset:Kt},source:$t||null}},p=r(function(Re,Ue){(function(nt,_t){Re.exports=_t()})(t,function(){var nt="",_t,gt=Kt;function Kt(Fn,an){if(typeof Fn!="string")throw new TypeError("expected a string");if(an===1)return Fn;if(an===2)return Fn+Fn;var Bn=Fn.length*an;if(_t!==Fn||typeof _t>"u")_t=Fn,nt="";else if(nt.length>=Bn)return nt.substr(0,Bn);for(;Bn>nt.length&&an>1;)an&1&&(nt+=Fn),an>>=1,Fn+=Fn;return nt+=Fn,nt=nt.substr(0,Bn),nt}var $t=function(an,Bn,Cr){if(an==null||Bn==null)return an;var lr=String(an),hr=typeof Bn=="number"?Bn:parseInt(Bn,10);if(isNaN(hr)||!isFinite(hr))return lr;var We=lr.length;if(We>=hr)return lr;var ce=String(Cr);ce===""&&(ce=" ");for(var ye=hr-We;ce.length<ye;)ce+=ce;var rt=ce.length>ye?ce.substr(0,ye):ce;return rt+lr},Rt=Object.assign||function(Fn){for(var an=1;an<arguments.length;an++){var Bn=arguments[an];for(var Cr in Bn)Object.prototype.hasOwnProperty.call(Bn,Cr)&&(Fn[Cr]=Bn[Cr])}return Fn};function _n(Fn,an,Bn,Cr){var lr=String(an),hr=$t(lr,Bn," "),We=gt(" ",Cr.tabSize);return hr+" | "+Fn.replace(/\t/g,We)}function pr(Fn,an,Bn,Cr,lr){return Fn.slice(an,Bn).map(function(hr,We){return _n(hr,an+We+1,Cr,lr)}).join(`
`)}var nn={extraLines:2,tabSize:4},Xn=function(an,Bn,Cr,lr){lr=Rt({},nn,lr);var hr=an.split(/\r\n?|\n|\f/),We=Math.max(1,Bn-lr.extraLines)-1,ce=Math.min(Bn+lr.extraLines,hr.length),ye=String(ce).length,rt=pr(hr,We,Bn,ye,lr),Et=_n(hr[Bn-1].substring(0,Cr-1),Bn,ye,lr),Ht=gt(" ",Et.length)+"^",Zt=pr(hr,Bn,ce,ye,lr);return[rt,Ht,Zt].filter(Boolean).join(`
`)};return Xn})}),v=new Error().stack,x=function(Re){var Ue=Object.create(SyntaxError.prototype);return Object.assign(Ue,Re,{name:"SyntaxError"}),Object.defineProperty(Ue,"stack",{get:function(){return v?v.replace(/^(.+\n){1,3}/,String(Ue)+`
`):""}}),Ue},B=function(Re,Ue,nt,_t,gt){throw x({message:_t?Re+`
`+p(Ue,_t,gt):Re,rawMessage:Re,source:nt,line:_t,column:gt})},k={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Ue){for(var nt=arguments.length,_t=Array(nt>1?nt-1:0),gt=1;gt<nt;gt++)_t[gt-1]=arguments[gt];return"Unexpected token <"+Ue+"> at "+_t.filter(Boolean).join(":")}},P={unexpectedSymbol:function(Ue){for(var nt=arguments.length,_t=Array(nt>1?nt-1:0),gt=1;gt<nt;gt++)_t[gt-1]=arguments[gt];return"Unexpected symbol <"+Ue+"> at "+_t.filter(Boolean).join(":")}},D={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},N={"{":D.LEFT_BRACE,"}":D.RIGHT_BRACE,"[":D.LEFT_BRACKET,"]":D.RIGHT_BRACKET,":":D.COLON,",":D.COMMA},W={true:D.TRUE,false:D.FALSE,null:D.NULL},V={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},$={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},ie={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function ne(Re){return Re>="1"&&Re<="9"}function q(Re){return Re>="0"&&Re<="9"}function te(Re){return q(Re)||Re>="a"&&Re<="f"||Re>="A"&&Re<="F"}function G(Re){return Re==="e"||Re==="E"}function oe(Re,Ue,nt,_t){var gt=Re.charAt(Ue);if(gt==="\r")Ue++,nt++,_t=1,Re.charAt(Ue)===`
`&&Ue++;else if(gt===`
`)Ue++,nt++,_t=1;else if(gt==="	"||gt===" ")Ue++,_t++;else return null;return{index:Ue,line:nt,column:_t}}function fe(Re,Ue,nt,_t){var gt=Re.charAt(Ue);return gt in N?{type:N[gt],line:nt,column:_t+1,index:Ue+1,value:null}:null}function he(Re,Ue,nt,_t){for(var gt in W)if(W.hasOwnProperty(gt)&&Re.substr(Ue,gt.length)===gt)return{type:W[gt],line:nt,column:_t+gt.length,index:Ue+gt.length,value:gt};return null}function Me(Re,Ue,nt,_t){for(var gt=Ue,Kt=V._START_;Ue<Re.length;){var $t=Re.charAt(Ue);switch(Kt){case V._START_:{if($t==='"')Ue++,Kt=V.START_QUOTE_OR_CHAR;else return null;break}case V.START_QUOTE_OR_CHAR:{if($t==="\\")Ue++,Kt=V.ESCAPE;else{if($t==='"')return Ue++,{type:D.STRING,line:nt,column:_t+Ue-gt,index:Ue,value:Re.slice(gt,Ue)};Ue++}break}case V.ESCAPE:{if($t in $){if(Ue++,$t==="u")for(var Rt=0;Rt<4;Rt++){var _n=Re.charAt(Ue);if(_n&&te(_n))Ue++;else return null}Kt=V.START_QUOTE_OR_CHAR}else return null;break}}}}function me(Re,Ue,nt,_t){var gt=Ue,Kt=Ue,$t=ie._START_;e:for(;Ue<Re.length;){var Rt=Re.charAt(Ue);switch($t){case ie._START_:{if(Rt==="-")$t=ie.MINUS;else if(Rt==="0")Kt=Ue+1,$t=ie.ZERO;else if(ne(Rt))Kt=Ue+1,$t=ie.DIGIT;else return null;break}case ie.MINUS:{if(Rt==="0")Kt=Ue+1,$t=ie.ZERO;else if(ne(Rt))Kt=Ue+1,$t=ie.DIGIT;else return null;break}case ie.ZERO:{if(Rt===".")$t=ie.POINT;else if(G(Rt))$t=ie.EXP;else break e;break}case ie.DIGIT:{if(q(Rt))Kt=Ue+1;else if(Rt===".")$t=ie.POINT;else if(G(Rt))$t=ie.EXP;else break e;break}case ie.POINT:{if(q(Rt))Kt=Ue+1,$t=ie.DIGIT_FRACTION;else break e;break}case ie.DIGIT_FRACTION:{if(q(Rt))Kt=Ue+1;else if(G(Rt))$t=ie.EXP;else break e;break}case ie.EXP:{if(Rt==="+"||Rt==="-")$t=ie.EXP_DIGIT_OR_SIGN;else if(q(Rt))Kt=Ue+1,$t=ie.EXP_DIGIT_OR_SIGN;else break e;break}case ie.EXP_DIGIT_OR_SIGN:{if(q(Rt))Kt=Ue+1;else break e;break}}Ue++}return Kt>0?{type:D.NUMBER,line:nt,column:_t+Kt-gt,index:Kt,value:Re.slice(gt,Kt)}:null}var pe=function(Ue,nt){for(var _t=1,gt=1,Kt=0,$t=[];Kt<Ue.length;){var Rt=[Ue,Kt,_t,gt],_n=oe.apply(void 0,Rt);if(_n){Kt=_n.index,_t=_n.line,gt=_n.column;continue}var pr=fe.apply(void 0,Rt)||he.apply(void 0,Rt)||Me.apply(void 0,Rt)||me.apply(void 0,Rt);if(pr){var nn={type:pr.type,value:pr.value,loc:o(_t,gt,Kt,pr.line,pr.column,pr.index,nt.source)};$t.push(nn),Kt=pr.index,_t=pr.line,gt=pr.column}else B(P.unexpectedSymbol(l(Ue,Kt,Kt+1),nt.source,_t,gt),Ue,nt.source,_t,gt)}return $t},qe={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},Se={_START_:0,KEY:1,COLON:2},vt={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Je={loc:!0,source:null};function Ke(Re,Ue,nt){var _t=Ue.length>0?Ue[Ue.length-1].loc.end:{line:1,column:1};B(k.unexpectedEnd(),Re,nt.source,_t.line,_t.column)}function je(Re){for(var Ue=0,nt=0;nt<4;nt++)Ue=Ue*16+parseInt(Re[nt],16);return String.fromCharCode(Ue)}var Pe={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Le=['"',"\\","/"];function Xe(Re){for(var Ue="",nt=0;nt<Re.length;nt++){var _t=Re.charAt(nt);if(_t==="\\"){nt++;var gt=Re.charAt(nt);if(gt==="u")Ue+=je(Re.substr(nt+1,4)),nt+=4;else if(Le.indexOf(gt)!==-1)Ue+=gt;else if(gt in Pe)Ue+=Pe[gt];else break}else Ue+=_t}return Ue}function Ct(Re,Ue,nt,_t){for(var gt=void 0,Kt={type:"Object",children:[]},$t=qe._START_;nt<Ue.length;){var Rt=Ue[nt];switch($t){case qe._START_:{if(Rt.type===D.LEFT_BRACE)gt=Rt,$t=qe.OPEN_OBJECT,nt++;else return null;break}case qe.OPEN_OBJECT:{if(Rt.type===D.RIGHT_BRACE)return _t.loc&&(Kt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,_t.source)),{value:Kt,index:nt+1};var _n=Gt(Re,Ue,nt,_t);Kt.children.push(_n.value),$t=qe.PROPERTY,nt=_n.index;break}case qe.PROPERTY:{if(Rt.type===D.RIGHT_BRACE)return _t.loc&&(Kt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,_t.source)),{value:Kt,index:nt+1};Rt.type===D.COMMA?($t=qe.COMMA,nt++):B(k.unexpectedToken(l(Re,Rt.loc.start.offset,Rt.loc.end.offset),_t.source,Rt.loc.start.line,Rt.loc.start.column),Re,_t.source,Rt.loc.start.line,Rt.loc.start.column);break}case qe.COMMA:{var pr=Gt(Re,Ue,nt,_t);pr?(nt=pr.index,Kt.children.push(pr.value),$t=qe.PROPERTY):B(k.unexpectedToken(l(Re,Rt.loc.start.offset,Rt.loc.end.offset),_t.source,Rt.loc.start.line,Rt.loc.start.column),Re,_t.source,Rt.loc.start.line,Rt.loc.start.column);break}}}Ke(Re,Ue,_t)}function Gt(Re,Ue,nt,_t){for(var gt=void 0,Kt={type:"Property",key:null,value:null},$t=Se._START_;nt<Ue.length;){var Rt=Ue[nt];switch($t){case Se._START_:{if(Rt.type===D.STRING){var _n={type:"Identifier",value:Xe(Re.slice(Rt.loc.start.offset+1,Rt.loc.end.offset-1)),raw:Rt.value};_t.loc&&(_n.loc=Rt.loc),gt=Rt,Kt.key=_n,$t=Se.KEY,nt++}else return null;break}case Se.KEY:{Rt.type===D.COLON?($t=Se.COLON,nt++):B(k.unexpectedToken(l(Re,Rt.loc.start.offset,Rt.loc.end.offset),_t.source,Rt.loc.start.line,Rt.loc.start.column),Re,_t.source,Rt.loc.start.line,Rt.loc.start.column);break}case Se.COLON:{var pr=kt(Re,Ue,nt,_t);return Kt.value=pr.value,_t.loc&&(Kt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,pr.value.loc.end.line,pr.value.loc.end.column,pr.value.loc.end.offset,_t.source)),{value:Kt,index:pr.index}}}}}function mt(Re,Ue,nt,_t){for(var gt=void 0,Kt={type:"Array",children:[]},$t=vt._START_,Rt=void 0;nt<Ue.length;)switch(Rt=Ue[nt],$t){case vt._START_:{if(Rt.type===D.LEFT_BRACKET)gt=Rt,$t=vt.OPEN_ARRAY,nt++;else return null;break}case vt.OPEN_ARRAY:{if(Rt.type===D.RIGHT_BRACKET)return _t.loc&&(Kt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,_t.source)),{value:Kt,index:nt+1};var _n=kt(Re,Ue,nt,_t);nt=_n.index,Kt.children.push(_n.value),$t=vt.VALUE;break}case vt.VALUE:{if(Rt.type===D.RIGHT_BRACKET)return _t.loc&&(Kt.loc=o(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,_t.source)),{value:Kt,index:nt+1};Rt.type===D.COMMA?($t=vt.COMMA,nt++):B(k.unexpectedToken(l(Re,Rt.loc.start.offset,Rt.loc.end.offset),_t.source,Rt.loc.start.line,Rt.loc.start.column),Re,_t.source,Rt.loc.start.line,Rt.loc.start.column);break}case vt.COMMA:{var pr=kt(Re,Ue,nt,_t);nt=pr.index,Kt.children.push(pr.value),$t=vt.VALUE;break}}Ke(Re,Ue,_t)}function Ut(Re,Ue,nt,_t){var gt=Ue[nt],Kt=null;switch(gt.type){case D.STRING:{Kt=Xe(Re.slice(gt.loc.start.offset+1,gt.loc.end.offset-1));break}case D.NUMBER:{Kt=Number(gt.value);break}case D.TRUE:{Kt=!0;break}case D.FALSE:{Kt=!1;break}case D.NULL:{Kt=null;break}default:return null}var $t={type:"Literal",value:Kt,raw:gt.value};return _t.loc&&($t.loc=gt.loc),{value:$t,index:nt+1}}function kt(Re,Ue,nt,_t){var gt=Ue[nt],Kt=Ut.apply(void 0,arguments)||Ct.apply(void 0,arguments)||mt.apply(void 0,arguments);if(Kt)return Kt;B(k.unexpectedToken(l(Re,gt.loc.start.offset,gt.loc.end.offset),_t.source,gt.loc.start.line,gt.loc.start.column),Re,_t.source,gt.loc.start.line,gt.loc.start.column)}var Te=function(Re,Ue){Ue=Object.assign({},Je,Ue);var nt=pe(Re,Ue);nt.length===0&&Ke(Re,nt,Ue);var _t=kt(Re,nt,0,Ue);if(_t.index===nt.length)return _t.value;var gt=nt[_t.index];B(k.unexpectedToken(l(Re,gt.loc.start.offset,gt.loc.end.offset),Ue.source,gt.loc.start.line,gt.loc.start.column),Re,Ue.source,gt.loc.start.line,gt.loc.start.column)};return Te})}(kb)),kb.exports}var Jie=Xie();const eoe=dl(Jie);function cr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return cr=function(){return l},l}cr();cr().s[0]++;yp.defineMode("mgl",(n,e)=>(cr().f[0]++,cr().s[1]++,yp.modes.javascript({...n,json:!0},e)));function Qz(n){cr().f[1]++;const e=(cr().s[2]++,[]);cr().s[3]++;try{cr().s[4]++,$ie.parse(n)}catch(t){const r=(cr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(cr().s[6]++,r){cr().b[0][0]++;const i=(cr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});cr().s[8]++,e.push({from:yp.Pos(i.first_line-1,i.first_column),to:yp.Pos(i.last_line-1,i.last_column),message:t})}else cr().b[0][1]++}return cr().s[9]++,e}cr().s[10]++;yp.registerHelper("lint","json",n=>(cr().f[2]++,cr().s[11]++,Qz(n)));cr().s[12]++;yp.registerHelper("lint","mgl",(n,e,t)=>{cr().f[3]++;const r=(cr().s[13]++,Qz(n)),{context:i}=(cr().s[14]++,e);if(cr().s[15]++,r.length>0)return cr().b[1][0]++,cr().s[16]++,r;cr().b[1][1]++;const s=(cr().s[17]++,eoe(n)),l=(cr().s[18]++,JSON.parse(n));function o(v,x){if(cr().f[4]++,cr().s[19]++,v){if(cr().b[2][1]++,cr().s[21]++,x.length<1)return cr().b[3][0]++,cr().s[22]++,v;if(cr().b[3][1]++,cr().s[23]++,v.children){cr().b[4][1]++;const B=(cr().s[25]++,x[0]);let k;return cr().s[26]++,B.match(/^[0-9]+$/)?(cr().b[5][0]++,cr().s[27]++,k=v.children[x[0]]):(cr().b[5][1]++,cr().s[28]++,k=v.children.find(P=>(cr().f[5]++,cr().s[29]++,cr().b[6][0]++,P.key&&(cr().b[6][1]++,P.key.type==="Identifier")&&(cr().b[6][2]++,P.key.value===B))),cr().s[30]++,k?(cr().b[7][0]++,cr().s[31]++,k=k.value):cr().b[7][1]++),cr().s[32]++,o(k,x.slice(1))}else{cr().b[4][0]++,cr().s[24]++;return}}else{cr().b[2][0]++,cr().s[20]++;return}}let p=(cr().s[33]++,null);if(cr().s[34]++,i==="layer"){cr().b[8][0]++;const v=(cr().s[35]++,Jd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));cr().s[36]++,v?(cr().b[9][0]++,cr().s[37]++,p={result:"error",value:v.filter(x=>(cr().f[6]++,cr().s[38]++,!x.message.match(/^layers\[0\]: source ".*" not found$/))).map(x=>{cr().f[7]++;const B=(cr().s[39]++,x.message.replace(/^layers\[0\]./,"").split(":"));return cr().s[40]++,{name:"",key:B[0],message:B[1]}})}):cr().b[9][1]++}else if(cr().b[8][1]++,cr().s[41]++,i==="expression")cr().b[10][0]++,cr().s[42]++,p=hV.createExpression(l,e.spec);else throw cr().b[10][1]++,cr().s[43]++,new Error(`Invalid context ${i}`);if(cr().s[44]++,(p==null?void 0:p.result)==="error"){cr().b[11][0]++;const v=(cr().s[45]++,p.value);cr().s[46]++,v.forEach(x=>{cr().f[8]++;const{key:B,message:k}=(cr().s[47]++,x);if(cr().s[48]++,B)if(cr().b[12][1]++,cr().s[52]++,B){cr().b[13][0]++;const P=(cr().s[53]++,B.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),D=(cr().s[54]++,o(s,P));if(cr().s[55]++,D)cr().b[14][1]++;else{cr().b[14][0]++,cr().s[56]++,console.warn("Something went wrong parsing error:",x),cr().s[57]++;return}const{loc:N}=(cr().s[58]++,D),{start:W,end:V}=(cr().s[59]++,N);cr().s[60]++,r.push({from:yp.Pos(W.line-1,W.column),to:yp.Pos(V.line-1,V.column),message:k})}else cr().b[13][1]++;else{cr().b[12][0]++;const P=(cr().s[49]++,t.getLineHandle(t.lastLine())),D=(cr().s[50]++,{from:yp.Pos(t.firstLine(),0),to:yp.Pos(t.lastLine(),P.text.length),message:k});cr().s[51]++,r.push(D)}})}else cr().b[11][1]++;return cr().s[61]++,r});function yr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yr=function(){return l},l}yr();class Yz extends Zn.Component{constructor(t){yr().f[5]++,yr().s[4]++;super(t);Pn(this,"_keyEvent");Pn(this,"_doc");Pn(this,"_el",(yr().s[2]++,null));Pn(this,"_cancelNextChange",(yr().s[3]++,!1));Pn(this,"onPointerDown",(yr().s[11]++,()=>{yr().f[7]++,yr().s[12]++,this._keyEvent="pointer"}));Pn(this,"onFocus",(yr().s[13]++,()=>{yr().f[8]++,yr().s[14]++,this.props.onFocus?(yr().b[2][0]++,yr().s[15]++,this.props.onFocus()):yr().b[2][1]++,yr().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));Pn(this,"onBlur",(yr().s[17]++,()=>{yr().f[9]++,yr().s[18]++,this._keyEvent="keyboard",yr().s[19]++,this.props.onBlur?(yr().b[3][0]++,yr().s[20]++,this.props.onBlur()):yr().b[3][1]++,yr().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));Pn(this,"onChange",(yr().s[28]++,t=>{if(yr().f[12]++,yr().s[29]++,this._cancelNextChange){yr().b[6][0]++,yr().s[30]++,this._cancelNextChange=!1,yr().s[31]++,this.setState({prevValue:this._doc.getValue()}),yr().s[32]++;return}else yr().b[6][1]++;const r=(yr().s[33]++,this._doc.getValue());if(yr().s[34]++,this.state.prevValue!==r){yr().b[7][0]++;let i,s;yr().s[35]++;try{yr().s[36]++,i=JSON.parse(r)}catch(l){yr().s[37]++,s=l,yr().s[38]++,console.warn(l)}yr().s[39]++,yr().b[9][0]++,s&&(yr().b[9][1]++,this.props.onJSONInvalid)?(yr().b[8][0]++,yr().s[40]++,this.props.onJSONInvalid()):(yr().b[8][1]++,yr().s[41]++,this.props.onChange?(yr().b[10][0]++,yr().s[42]++,this.props.onChange(i)):yr().b[10][1]++,yr().s[43]++,this.props.onJSONValid?(yr().b[11][0]++,yr().s[44]++,this.props.onJSONValid()):yr().b[11][1]++)}else yr().b[7][1]++;yr().s[45]++,this.setState({prevValue:r})}));yr().s[5]++,this._keyEvent="keyboard",yr().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){yr().f[6]++,yr().s[7]++,this._doc=yp(this._el,{value:this.props.getValue(this.props.layer),mode:(yr().b[0][0]++,this.props.mode||(yr().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(yr().b[1][0]++,this.props.lint||(yr().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),yr().s[8]++,this._doc.on("change",this.onChange),yr().s[9]++,this._doc.on("focus",this.onFocus),yr().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){yr().f[10]++,yr().s[22]++,this._doc.off("change",this.onChange),yr().s[23]++,this._doc.off("focus",this.onFocus),yr().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){yr().f[11]++,yr().s[25]++,yr().b[5][0]++,!this.state.isEditing&&(yr().b[5][1]++,t.layer!==this.props.layer)?(yr().b[4][0]++,yr().s[26]++,this._cancelNextChange=!0,yr().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):yr().b[4][1]++}render(){yr().f[13]++;const t=(yr().s[46]++,this.props.t),{showMessage:r}=(yr().s[47]++,this.state),i=(yr().s[48]++,{});return yr().s[49]++,this.props.maxHeight?(yr().b[12][0]++,yr().s[50]++,i.maxHeight=this.props.maxHeight):yr().b[12][1]++,yr().s[51]++,Ae.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[Ae.jsx("div",{className:am("JSONEditor__message",{"JSONEditor__message--on":r}),children:Ae.jsxs(R0,{t,children:["Press ",Ae.jsx("kbd",{children:"ESC"})," to lose focus"]})}),Ae.jsx("div",{className:am("codemirror-container",this.props.className),ref:s=>(yr().f[14]++,yr().s[52]++,this._el=s),style:i})]})}}Pn(Yz,"defaultProps",(yr().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(yr().f[0]++,yr().s[1]++,Gz(t,{indent:2,maxLength:40})),onFocus:()=>{yr().f[1]++},onBlur:()=>{yr().f[2]++},onJSONInvalid:()=>{yr().f[3]++},onJSONValid:()=>{yr().f[4]++}}));const toe=(yr().s[53]++,Ns()(Yz));function T2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return T2=function(){return l},l}T2();class RO extends Zn.Component{render(){return T2().f[0]++,T2().s[0]++,Ae.jsx(toe,{...this.props})}}var kC="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",noe="M7,10L12,15L17,10H7Z",roe="M7,15L12,10L17,15H7Z",DO="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Ig(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ig=function(){return l},l}Ig();const FO=(Ig().s[0]++,["all","any","none"]);Ig().s[1]++;const ioe=(Ig().s[2]++,Object.keys(Ho.filter_operator.values).filter(n=>(Ig().f[0]++,Ig().s[3]++,FO.indexOf(n)<0)));function Oi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Oi=function(){return l},l}Oi();function ooe(n){return Oi().f[0]++,Oi().s[0]++,n===""?(Oi().b[0][0]++,Oi().s[1]++,n):(Oi().b[0][1]++,Oi().s[2]++,isNaN(n)?(Oi().b[1][0]++,Oi().s[3]++,n):(Oi().b[1][1]++,Oi().s[4]++,parseFloat(n)))}function soe(n){Oi().f[1]++;const e=(Oi().s[5]++,typeof n=="string");if(Oi().s[6]++,e)Oi().b[2][1]++;else return Oi().b[2][0]++,Oi().s[7]++,n;return Oi().s[8]++,n.match(/^\s*true\s*$/)?(Oi().b[3][0]++,Oi().s[9]++,!0):(Oi().b[3][1]++,Oi().s[10]++,n.match(/^\s*false\s*$/)?(Oi().b[4][0]++,Oi().s[11]++,!1):(Oi().b[4][1]++,Oi().s[12]++,n))}function aoe(n){return Oi().f[2]++,Oi().s[13]++,n=ooe(n),Oi().s[14]++,n=soe(n),Oi().s[15]++,n}class qz extends Zn.Component{onFilterPartChanged(e,t,r){Oi().f[3]++;let i=(Oi().s[17]++,[e,t,...r.map(aoe)]);Oi().s[18]++,Oi().b[6][0]++,e==="has"||(Oi().b[6][1]++,e==="!has")?(Oi().b[5][0]++,Oi().s[19]++,i=[e,t]):(Oi().b[5][1]++,Oi().s[20]++,r.length===0?(Oi().b[7][0]++,Oi().s[21]++,i=[e,t,""]):Oi().b[7][1]++),Oi().s[22]++,this.props.onChange(i)}render(){Oi().f[4]++;const e=(Oi().s[23]++,this.props.filter),t=(Oi().s[24]++,e[0]),r=(Oi().s[25]++,e[1]),i=(Oi().s[26]++,e.slice(2));return Oi().s[27]++,Ae.jsxs("div",{className:"maputnik-filter-editor-single",children:[Ae.jsx("div",{className:"maputnik-filter-editor-property",children:Ae.jsx(Qy,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(Oi().f[5]++,Oi().s[28]++,[s,s])),onChange:s=>(Oi().f[6]++,Oi().s[29]++,this.onFilterPartChanged(t,s,i))})}),Ae.jsx("div",{className:"maputnik-filter-editor-operator",children:Ae.jsx(Qg,{"aria-label":"function",value:t,onChange:s=>(Oi().f[7]++,Oi().s[30]++,this.onFilterPartChanged(s,r,i)),options:ioe})}),(Oi().b[8][0]++,i.length>0&&(Oi().b[8][1]++,Ae.jsx("div",{className:"maputnik-filter-editor-args",children:Ae.jsx(zf,{"aria-label":"value",value:i.join(","),onChange:s=>(Oi().f[8]++,Oi().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}Pn(qz,"defaultProps",(Oi().s[16]++,{properties:{}}));function py(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="13a2e2db8b749f303c3bce9d46fec729506d3ee2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"13a2e2db8b749f303c3bce9d46fec729506d3ee2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return py=function(){return l},l}py();class loe extends Zn.Component{render(){py().f[0]++;const e=(py().s[0]++,this.props.t);return py().s[1]++,Ae.jsxs("div",{className:"maputnik-filter-editor-block",children:[Ae.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),Ae.jsx("div",{className:"maputnik-filter-editor-block-action",children:Ae.jsx(Xa,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:Ae.jsx(Uy,{})})})]})}}const Aoe=(py().s[2]++,Ns()(loe));var vM,uT;function uoe(){if(uT)return vM;uT=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",l="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+o+")",v="[^"+e+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",k="\\u200d",P=p+"?",D="["+i+"]?",N="(?:"+k+"(?:"+[v,x,B].join("|")+")"+D+P+")*",W=D+P+N,V="(?:"+[v+l+"?",l,x,B,s].join("|")+")",$=RegExp(o+"(?="+o+")|"+V+W,"g"),ie=RegExp("["+k+e+t+r+i+"]"),ne=typeof window=="object"&&window&&window.Object===Object&&window,q=typeof self=="object"&&self&&self.Object===Object&&self,te=ne||q||Function("return this")();function G(mt){return mt.split("")}function oe(mt){return ie.test(mt)}function fe(mt){return oe(mt)?he(mt):G(mt)}function he(mt){return mt.match($)||[]}var Me=Object.prototype,me=Me.toString,pe=te.Symbol,qe=pe?pe.prototype:void 0,Se=qe?qe.toString:void 0;function vt(mt,Ut,kt){var Te=-1,Re=mt.length;Ut<0&&(Ut=-Ut>Re?0:Re+Ut),kt=kt>Re?Re:kt,kt<0&&(kt+=Re),Re=Ut>kt?0:kt-Ut>>>0,Ut>>>=0;for(var Ue=Array(Re);++Te<Re;)Ue[Te]=mt[Te+Ut];return Ue}function Je(mt){if(typeof mt=="string")return mt;if(Le(mt))return Se?Se.call(mt):"";var Ut=mt+"";return Ut=="0"&&1/mt==-1/0?"-0":Ut}function Ke(mt,Ut,kt){var Te=mt.length;return kt=kt===void 0?Te:kt,vt(mt,Ut,kt)}function je(mt){return function(Ut){Ut=Xe(Ut);var kt=oe(Ut)?fe(Ut):void 0,Te=kt?kt[0]:Ut.charAt(0),Re=kt?Ke(kt,1).join(""):Ut.slice(1);return Te[mt]()+Re}}function Pe(mt){return!!mt&&typeof mt=="object"}function Le(mt){return typeof mt=="symbol"||Pe(mt)&&me.call(mt)==n}function Xe(mt){return mt==null?"":Je(mt)}function Ct(mt){return Gt(Xe(mt).toLowerCase())}var Gt=je("toUpperCase");return vM=Ct,vM}var coe=uoe();const LO=dl(coe);function Wp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wp=function(){return l},l}Wp();function Hx(n){Wp().f[0]++;let e;const t=(Wp().s[0]++,n.split("-"));return Wp().s[1]++,t.length>1?(Wp().b[0][0]++,Wp().s[2]++,e=n.split("-").slice(1).join(" ")):(Wp().b[0][1]++,Wp().s[3]++,e=n),Wp().s[4]++,LO(e)}function Mo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mo=function(){return l},l}Mo();class Vz extends Zn.Component{constructor(t){Mo().f[2]++,Mo().s[1]++;super(t);Pn(this,"onJSONInvalid",(Mo().s[3]++,t=>{Mo().f[3]++,Mo().s[4]++,this.setState({jsonError:!0})}));Pn(this,"onJSONValid",(Mo().s[5]++,()=>{Mo().f[4]++,Mo().s[6]++,this.setState({jsonError:!1})}));Mo().s[2]++,this.state={jsonError:!1}}render(){Mo().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:l,canUndo:o}=(Mo().s[7]++,this.props),{jsonError:p}=(Mo().s[8]++,this.state),v=(Mo().s[9]++,o?(Mo().b[0][0]++,!o()):(Mo().b[0][1]++,!0)),x=(Mo().s[10]++,Ae.jsxs(Ae.Fragment,{children:[(Mo().b[1][0]++,this.props.onUndo&&(Mo().b[1][1]++,Ae.jsx(Xa,{onClick:this.props.onUndo,disabled:v,className:"maputnik-delete-stop",title:t("Revert from expression"),children:Ae.jsx(oH,{})},"undo_action"))),Ae.jsx(Xa,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:Ae.jsx(Uy,{})},"delete_action")]})),B=(Mo().s[11]++,s===void 0?(Mo().b[2][0]++,i):(Mo().b[2][1]++,`${s}.${i}`)),k=(Mo().s[12]++,r[B]),P=(Mo().s[13]++,`${B}[`),D=(Mo().s[14]++,[]);function N(W){return Mo().f[6]++,Mo().s[15]++,Gz(W,{indent:2,maxLength:38})}return Mo().s[16]++,p?(Mo().b[3][0]++,Mo().s[17]++,D.push({message:"Invalid JSON"})):(Mo().b[3][1]++,Mo().s[18]++,Object.entries(r).filter(([W,V])=>(Mo().f[7]++,Mo().s[19]++,W.startsWith(P))).forEach(([W,V])=>(Mo().f[8]++,Mo().s[20]++,D.push(V))),Mo().s[21]++,k?(Mo().b[4][0]++,Mo().s[22]++,D.push(k)):Mo().b[4][1]++),Mo().s[23]++,Ae.jsx(fa,{error:D,fieldSpec:this.props.fieldSpec,label:t(Hx(this.props.fieldName)),action:x,wideMode:!0,children:Ae.jsx(RO,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:l,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:N,onChange:this.props.onChange})})}}Pn(Vz,"defaultProps",(Mo().s[0]++,{errors:{},onFocus:()=>{Mo().f[0]++},onBlur:()=>{Mo().f[1]++}}));const Hz=(Mo().s[24]++,Ns()(Vz));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Un=function(){return l},l}Un();function x0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,FO.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function hoe(n){return Un().f[1]++,Un().s[9]++,uV(doe(n)).layers[0].filter}function doe(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const foe=(Un().s[11]++,["all","any","none"]);function cT(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,foe.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,Hv(n));return Un().s[15]++,!G2.isEqual(e,n)}function hT(n){return Un().f[4]++,Un().s[16]++,FO.indexOf(n[0])>=0}function poe(n){return Un().f[5]++,Un().s[17]++,hT(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,hT(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class $z extends Zn.Component{constructor(t){Un().f[8]++,Un().s[23]++;super(t);Pn(this,"addFilterItem",(Un().s[31]++,()=>{Un().f[11]++;const t=(Un().s[32]++,x0(this.props).slice(0));Un().s[33]++,t.push(["==","name",""]),Un().s[34]++,this.props.onChange(t)}));Pn(this,"onToggleDoc",(Un().s[35]++,t=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:t})}));Pn(this,"makeFilter",(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})}));Pn(this,"makeExpression",(Un().s[39]++,()=>{Un().f[14]++;const t=(Un().s[40]++,x0(this.props));Un().s[41]++,this.props.onChange(hoe(t)),Un().s[42]++,this.setState({displaySimpleFilter:!1})}));Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:cT(x0(t))}}onFilterPartChanged(t,r){Un().f[9]++;const i=(Un().s[25]++,x0(this.props).slice(0));Un().s[26]++,i[t]=r,Un().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Un().f[10]++;const r=(Un().s[28]++,x0(this.props).slice(0));Un().s[29]++,r.splice(t+1,1),Un().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Un().f[15]++;const i=(Un().s[43]++,cT(x0(t)));return Un().s[44]++,Un().b[7][0]++,!i&&(Un().b[7][1]++,r.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,i&&(Un().b[9][1]++,r.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:t,t:r}=(Un().s[49]++,this.props),{displaySimpleFilter:i}=(Un().s[50]++,this.state),s=(Un().s[51]++,{doc:Bs.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),l=(Un().s[52]++,["all"]),o=(Un().s[53]++,Un().b[10][0]++,i&&(Un().b[10][1]++,poe(x0(this.props))));if(Un().s[54]++,o)return Un().b[11][0]++,Un().s[55]++,Ae.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[Ae.jsx("p",{children:r("Nested filters are not supported.")}),Ae.jsxs(Xa,{onClick:this.makeExpression,title:r("Convert to expression"),children:[Ae.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:kC})}),r("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,i){Un().b[12][0]++;const p=(Un().s[57]++,x0(this.props)),v=(Un().s[58]++,p[0]),x=(Un().s[59]++,p.slice(1)),B=(Un().s[60]++,Ae.jsx("div",{children:Ae.jsx(Xa,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:kC})})})})),k=(Un().s[61]++,x.map((P,D)=>{Un().f[17]++;const N=(Un().s[62]++,t[`filter[${D+1}]`]);return Un().s[63]++,Ae.jsxs("div",{children:[Ae.jsx(Aoe,{onDelete:this.deleteFilterItem.bind(this,D),children:Ae.jsx(qz,{properties:this.props.properties,filter:P,onChange:this.onFilterPartChanged.bind(this,D+1)})},D),(Un().b[13][0]++,N&&(Un().b[13][1]++,Ae.jsx("div",{className:"maputnik-inline-error",children:N.message},"error")))]},`block-${D}`)}));return Un().s[64]++,Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(fa,{fieldSpec:s,label:r("Filter"),action:B,children:Ae.jsx(Qg,{value:v,onChange:P=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,P)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),k,Ae.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:Ae.jsxs(Xa,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:DO})})," ",r("Add filter")]})},"buttons"),Ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:Ae.jsx(kO,{fieldSpec:s})},"doc")]})}else{Un().b[12][1]++;const{filter:p}=(Un().s[66]++,this.props);return Un().s[67]++,Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Hz,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(l)},fieldName:"filter",fieldSpec:s,value:p,errors:t,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,Ae.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",Ae.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}Pn($z,"defaultProps",(Un().s[22]++,{filter:["all"]}));const moe=(Un().s[70]++,Ns()($z));var O1={},cd={},I1={},CM,dT;function Zz(){if(dT)return CM;dT=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return CM=n,CM}var _M,fT;function Bp(){if(fT)return _M;fT=1;var n=Zz(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return _M=t,_M}var bM,pT;function i_(){if(pT)return bM;pT=1;var n=Bp(),e=n.Symbol;return bM=e,bM}var xM,mT;function goe(){if(mT)return xM;mT=1;var n=i_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(l){var o=t.call(l,i),p=l[i];try{l[i]=void 0;var v=!0}catch{}var x=r.call(l);return v&&(o?l[i]=p:delete l[i]),x}return xM=s,xM}var MM,gT;function yoe(){if(gT)return MM;gT=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return MM=t,MM}var wM,yT;function Yg(){if(yT)return wM;yT=1;var n=i_(),e=goe(),t=yoe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return wM=l,wM}var SM,vT;function ef(){if(vT)return SM;vT=1;var n=Array.isArray;return SM=n,SM}var EM,CT;function um(){if(CT)return EM;CT=1;function n(e){return e!=null&&typeof e=="object"}return EM=n,EM}var BM,_T;function voe(){if(_T)return BM;_T=1;var n=Yg(),e=ef(),t=um(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return BM=i,BM}var OM,bT;function Coe(){if(bT)return OM;bT=1;function n(e){return function(t,r,i){for(var s=-1,l=Object(t),o=i(t),p=o.length;p--;){var v=o[e?p:++s];if(r(l[v],v,l)===!1)break}return t}}return OM=n,OM}var IM,xT;function Xz(){if(xT)return IM;xT=1;var n=Coe(),e=n();return IM=e,IM}var TM,MT;function _oe(){if(MT)return TM;MT=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return TM=n,TM}var kM,wT;function boe(){if(wT)return kM;wT=1;var n=Yg(),e=um(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return kM=r,kM}var PM,ST;function UO(){if(ST)return PM;ST=1;var n=boe(),e=um(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return PM=s,PM}var Uv={exports:{}},KM,ET;function xoe(){if(ET)return KM;ET=1;function n(){return!1}return KM=n,KM}Uv.exports;var BT;function $x(){return BT||(BT=1,function(n,e){var t=Bp(),r=xoe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,l=s&&s.exports===i,o=l?t.Buffer:void 0,p=o?o.isBuffer:void 0,v=p||r;n.exports=v}(Uv,Uv.exports)),Uv.exports}var RM,OT;function zO(){if(OT)return RM;OT=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return RM=t,RM}var DM,IT;function NO(){if(IT)return DM;IT=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return DM=e,DM}var FM,TT;function Moe(){if(TT)return FM;TT=1;var n=Yg(),e=NO(),t=um(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",o="[object Error]",p="[object Function]",v="[object Map]",x="[object Number]",B="[object Object]",k="[object RegExp]",P="[object Set]",D="[object String]",N="[object WeakMap]",W="[object ArrayBuffer]",V="[object DataView]",$="[object Float32Array]",ie="[object Float64Array]",ne="[object Int8Array]",q="[object Int16Array]",te="[object Int32Array]",G="[object Uint8Array]",oe="[object Uint8ClampedArray]",fe="[object Uint16Array]",he="[object Uint32Array]",Me={};Me[$]=Me[ie]=Me[ne]=Me[q]=Me[te]=Me[G]=Me[oe]=Me[fe]=Me[he]=!0,Me[r]=Me[i]=Me[W]=Me[s]=Me[V]=Me[l]=Me[o]=Me[p]=Me[v]=Me[x]=Me[B]=Me[k]=Me[P]=Me[D]=Me[N]=!1;function me(pe){return t(pe)&&e(pe.length)&&!!Me[n(pe)]}return FM=me,FM}var LM,kT;function WO(){if(kT)return LM;kT=1;function n(e){return function(t){return e(t)}}return LM=n,LM}var zv={exports:{}};zv.exports;var PT;function jO(){return PT||(PT=1,function(n,e){var t=Zz(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s&&t.process,o=function(){try{var p=i&&i.require&&i.require("util").types;return p||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(zv,zv.exports)),zv.exports}var UM,KT;function GO(){if(KT)return UM;KT=1;var n=Moe(),e=WO(),t=jO(),r=t&&t.isTypedArray,i=r?e(r):n;return UM=i,UM}var zM,RT;function Jz(){if(RT)return zM;RT=1;var n=_oe(),e=UO(),t=ef(),r=$x(),i=zO(),s=GO(),l=Object.prototype,o=l.hasOwnProperty;function p(v,x){var B=t(v),k=!B&&e(v),P=!B&&!k&&r(v),D=!B&&!k&&!P&&s(v),N=B||k||P||D,W=N?n(v.length,String):[],V=W.length;for(var $ in v)(x||o.call(v,$))&&!(N&&($=="length"||P&&($=="offset"||$=="parent")||D&&($=="buffer"||$=="byteLength"||$=="byteOffset")||i($,V)))&&W.push($);return W}return zM=p,zM}var NM,DT;function QO(){if(DT)return NM;DT=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return NM=e,NM}var WM,FT;function eN(){if(FT)return WM;FT=1;function n(e,t){return function(r){return e(t(r))}}return WM=n,WM}var jM,LT;function woe(){if(LT)return jM;LT=1;var n=eN(),e=n(Object.keys,Object);return jM=e,jM}var GM,UT;function Soe(){if(UT)return GM;UT=1;var n=QO(),e=woe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var l=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&l.push(o);return l}return GM=i,GM}var QM,zT;function Nf(){if(zT)return QM;zT=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return QM=n,QM}var YM,NT;function YO(){if(NT)return YM;NT=1;var n=Yg(),e=Nf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function l(o){if(!e(o))return!1;var p=n(o);return p==r||p==i||p==t||p==s}return YM=l,YM}var qM,WT;function Yy(){if(WT)return qM;WT=1;var n=YO(),e=NO();function t(r){return r!=null&&e(r.length)&&!n(r)}return qM=t,qM}var VM,jT;function o_(){if(jT)return VM;jT=1;var n=Jz(),e=Soe(),t=Yy();function r(i){return t(i)?n(i):e(i)}return VM=r,VM}var HM,GT;function tN(){if(GT)return HM;GT=1;var n=Xz(),e=o_();function t(r,i){return r&&n(r,i,e)}return HM=t,HM}var $M,QT;function Zx(){if(QT)return $M;QT=1;function n(e){return e}return $M=n,$M}var ZM,YT;function nN(){if(YT)return ZM;YT=1;var n=Zx();function e(t){return typeof t=="function"?t:n}return ZM=e,ZM}var XM,qT;function qO(){if(qT)return XM;qT=1;var n=tN(),e=nN();function t(r,i){return r&&n(r,e(i))}return XM=t,XM}var JM,VT;function VO(){if(VT)return JM;VT=1;var n=eN(),e=n(Object.getPrototypeOf,Object);return JM=e,JM}var e5,HT;function rN(){if(HT)return e5;HT=1;var n=Yg(),e=VO(),t=um(),r="[object Object]",i=Function.prototype,s=Object.prototype,l=i.toString,o=s.hasOwnProperty,p=l.call(Object);function v(x){if(!t(x)||n(x)!=r)return!1;var B=e(x);if(B===null)return!0;var k=o.call(B,"constructor")&&B.constructor;return typeof k=="function"&&k instanceof k&&l.call(k)==p}return e5=v,e5}var t5,$T;function iN(){if($T)return t5;$T=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return t5=n,t5}var n5,ZT;function Eoe(){if(ZT)return n5;ZT=1;function n(){this.__data__=[],this.size=0}return n5=n,n5}var r5,XT;function s_(){if(XT)return r5;XT=1;function n(e,t){return e===t||e!==e&&t!==t}return r5=n,r5}var i5,JT;function Xx(){if(JT)return i5;JT=1;var n=s_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return i5=e,i5}var o5,ek;function Boe(){if(ek)return o5;ek=1;var n=Xx(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,l=n(s,i);if(l<0)return!1;var o=s.length-1;return l==o?s.pop():t.call(s,l,1),--this.size,!0}return o5=r,o5}var s5,tk;function Ooe(){if(tk)return s5;tk=1;var n=Xx();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return s5=e,s5}var a5,nk;function Ioe(){if(nk)return a5;nk=1;var n=Xx();function e(t){return n(this.__data__,t)>-1}return a5=e,a5}var l5,rk;function Toe(){if(rk)return l5;rk=1;var n=Xx();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return l5=e,l5}var A5,ik;function Jx(){if(ik)return A5;ik=1;var n=Eoe(),e=Boe(),t=Ooe(),r=Ioe(),i=Toe();function s(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var v=l[o];this.set(v[0],v[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,A5=s,A5}var u5,ok;function koe(){if(ok)return u5;ok=1;var n=Jx();function e(){this.__data__=new n,this.size=0}return u5=e,u5}var c5,sk;function Poe(){if(sk)return c5;sk=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return c5=n,c5}var h5,ak;function Koe(){if(ak)return h5;ak=1;function n(e){return this.__data__.get(e)}return h5=n,h5}var d5,lk;function Roe(){if(lk)return d5;lk=1;function n(e){return this.__data__.has(e)}return d5=n,d5}var f5,Ak;function Doe(){if(Ak)return f5;Ak=1;var n=Bp(),e=n["__core-js_shared__"];return f5=e,f5}var p5,uk;function Foe(){if(uk)return p5;uk=1;var n=Doe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return p5=t,p5}var m5,ck;function oN(){if(ck)return m5;ck=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return m5=t,m5}var g5,hk;function Loe(){if(hk)return g5;hk=1;var n=YO(),e=Foe(),t=Nf(),r=oN(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,p=l.toString,v=o.hasOwnProperty,x=RegExp("^"+p.call(v).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(k){if(!t(k)||e(k))return!1;var P=n(k)?x:s;return P.test(r(k))}return g5=B,g5}var y5,dk;function Uoe(){if(dk)return y5;dk=1;function n(e,t){return e==null?void 0:e[t]}return y5=n,y5}var v5,fk;function qg(){if(fk)return v5;fk=1;var n=Loe(),e=Uoe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return v5=t,v5}var C5,pk;function HO(){if(pk)return C5;pk=1;var n=qg(),e=Bp(),t=n(e,"Map");return C5=t,C5}var _5,mk;function e3(){if(mk)return _5;mk=1;var n=qg(),e=n(Object,"create");return _5=e,_5}var b5,gk;function zoe(){if(gk)return b5;gk=1;var n=e3();function e(){this.__data__=n?n(null):{},this.size=0}return b5=e,b5}var x5,yk;function Noe(){if(yk)return x5;yk=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return x5=n,x5}var M5,vk;function Woe(){if(vk)return M5;vk=1;var n=e3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var l=this.__data__;if(n){var o=l[s];return o===e?void 0:o}return r.call(l,s)?l[s]:void 0}return M5=i,M5}var w5,Ck;function joe(){if(Ck)return w5;Ck=1;var n=e3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return w5=r,w5}var S5,_k;function Goe(){if(_k)return S5;_k=1;var n=e3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return S5=t,S5}var E5,bk;function Qoe(){if(bk)return E5;bk=1;var n=zoe(),e=Noe(),t=Woe(),r=joe(),i=Goe();function s(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var v=l[o];this.set(v[0],v[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,E5=s,E5}var B5,xk;function Yoe(){if(xk)return B5;xk=1;var n=Qoe(),e=Jx(),t=HO();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return B5=r,B5}var O5,Mk;function qoe(){if(Mk)return O5;Mk=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return O5=n,O5}var I5,wk;function t3(){if(wk)return I5;wk=1;var n=qoe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return I5=e,I5}var T5,Sk;function Voe(){if(Sk)return T5;Sk=1;var n=t3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return T5=e,T5}var k5,Ek;function Hoe(){if(Ek)return k5;Ek=1;var n=t3();function e(t){return n(this,t).get(t)}return k5=e,k5}var P5,Bk;function $oe(){if(Bk)return P5;Bk=1;var n=t3();function e(t){return n(this,t).has(t)}return P5=e,P5}var K5,Ok;function Zoe(){if(Ok)return K5;Ok=1;var n=t3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return K5=e,K5}var R5,Ik;function $O(){if(Ik)return R5;Ik=1;var n=Yoe(),e=Voe(),t=Hoe(),r=$oe(),i=Zoe();function s(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var v=l[o];this.set(v[0],v[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,R5=s,R5}var D5,Tk;function Xoe(){if(Tk)return D5;Tk=1;var n=Jx(),e=HO(),t=$O(),r=200;function i(s,l){var o=this.__data__;if(o instanceof n){var p=o.__data__;if(!e||p.length<r-1)return p.push([s,l]),this.size=++o.size,this;o=this.__data__=new t(p)}return o.set(s,l),this.size=o.size,this}return D5=i,D5}var F5,kk;function n3(){if(kk)return F5;kk=1;var n=Jx(),e=koe(),t=Poe(),r=Koe(),i=Roe(),s=Xoe();function l(o){var p=this.__data__=new n(o);this.size=p.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=r,l.prototype.has=i,l.prototype.set=s,F5=l,F5}var L5,Pk;function Joe(){if(Pk)return L5;Pk=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return L5=e,L5}var U5,Kk;function ese(){if(Kk)return U5;Kk=1;function n(e){return this.__data__.has(e)}return U5=n,U5}var z5,Rk;function tse(){if(Rk)return z5;Rk=1;var n=$O(),e=Joe(),t=ese();function r(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new n;++s<l;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,z5=r,z5}var N5,Dk;function nse(){if(Dk)return N5;Dk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return N5=n,N5}var W5,Fk;function rse(){if(Fk)return W5;Fk=1;function n(e,t){return e.has(t)}return W5=n,W5}var j5,Lk;function sN(){if(Lk)return j5;Lk=1;var n=tse(),e=nse(),t=rse(),r=1,i=2;function s(l,o,p,v,x,B){var k=p&r,P=l.length,D=o.length;if(P!=D&&!(k&&D>P))return!1;var N=B.get(l),W=B.get(o);if(N&&W)return N==o&&W==l;var V=-1,$=!0,ie=p&i?new n:void 0;for(B.set(l,o),B.set(o,l);++V<P;){var ne=l[V],q=o[V];if(v)var te=k?v(q,ne,V,o,l,B):v(ne,q,V,l,o,B);if(te!==void 0){if(te)continue;$=!1;break}if(ie){if(!e(o,function(G,oe){if(!t(ie,oe)&&(ne===G||x(ne,G,p,v,B)))return ie.push(oe)})){$=!1;break}}else if(!(ne===q||x(ne,q,p,v,B))){$=!1;break}}return B.delete(l),B.delete(o),$}return j5=s,j5}var G5,Uk;function aN(){if(Uk)return G5;Uk=1;var n=Bp(),e=n.Uint8Array;return G5=e,G5}var Q5,zk;function ise(){if(zk)return Q5;zk=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return Q5=n,Q5}var Y5,Nk;function ose(){if(Nk)return Y5;Nk=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return Y5=n,Y5}var q5,Wk;function sse(){if(Wk)return q5;Wk=1;var n=i_(),e=aN(),t=s_(),r=sN(),i=ise(),s=ose(),l=1,o=2,p="[object Boolean]",v="[object Date]",x="[object Error]",B="[object Map]",k="[object Number]",P="[object RegExp]",D="[object Set]",N="[object String]",W="[object Symbol]",V="[object ArrayBuffer]",$="[object DataView]",ie=n?n.prototype:void 0,ne=ie?ie.valueOf:void 0;function q(te,G,oe,fe,he,Me,me){switch(oe){case $:if(te.byteLength!=G.byteLength||te.byteOffset!=G.byteOffset)return!1;te=te.buffer,G=G.buffer;case V:return!(te.byteLength!=G.byteLength||!Me(new e(te),new e(G)));case p:case v:case k:return t(+te,+G);case x:return te.name==G.name&&te.message==G.message;case P:case N:return te==G+"";case B:var pe=i;case D:var qe=fe&l;if(pe||(pe=s),te.size!=G.size&&!qe)return!1;var Se=me.get(te);if(Se)return Se==G;fe|=o,me.set(te,G);var vt=r(pe(te),pe(G),fe,he,Me,me);return me.delete(te),vt;case W:if(ne)return ne.call(te)==ne.call(G)}return!1}return q5=q,q5}var V5,jk;function lN(){if(jk)return V5;jk=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return V5=n,V5}var H5,Gk;function AN(){if(Gk)return H5;Gk=1;var n=lN(),e=ef();function t(r,i,s){var l=i(r);return e(r)?l:n(l,s(r))}return H5=t,H5}var $5,Qk;function ase(){if(Qk)return $5;Qk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,l=[];++r<i;){var o=e[r];t(o,r,e)&&(l[s++]=o)}return l}return $5=n,$5}var Z5,Yk;function uN(){if(Yk)return Z5;Yk=1;function n(){return[]}return Z5=n,Z5}var X5,qk;function ZO(){if(qk)return X5;qk=1;var n=ase(),e=uN(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(l){return l==null?[]:(l=Object(l),n(i(l),function(o){return r.call(l,o)}))}:e;return X5=s,X5}var J5,Vk;function cN(){if(Vk)return J5;Vk=1;var n=AN(),e=ZO(),t=o_();function r(i){return n(i,t,e)}return J5=r,J5}var ew,Hk;function lse(){if(Hk)return ew;Hk=1;var n=cN(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o,p,v,x){var B=o&e,k=n(s),P=k.length,D=n(l),N=D.length;if(P!=N&&!B)return!1;for(var W=P;W--;){var V=k[W];if(!(B?V in l:r.call(l,V)))return!1}var $=x.get(s),ie=x.get(l);if($&&ie)return $==l&&ie==s;var ne=!0;x.set(s,l),x.set(l,s);for(var q=B;++W<P;){V=k[W];var te=s[V],G=l[V];if(p)var oe=B?p(G,te,V,l,s,x):p(te,G,V,s,l,x);if(!(oe===void 0?te===G||v(te,G,o,p,x):oe)){ne=!1;break}q||(q=V=="constructor")}if(ne&&!q){var fe=s.constructor,he=l.constructor;fe!=he&&"constructor"in s&&"constructor"in l&&!(typeof fe=="function"&&fe instanceof fe&&typeof he=="function"&&he instanceof he)&&(ne=!1)}return x.delete(s),x.delete(l),ne}return ew=i,ew}var tw,$k;function Ase(){if($k)return tw;$k=1;var n=qg(),e=Bp(),t=n(e,"DataView");return tw=t,tw}var nw,Zk;function use(){if(Zk)return nw;Zk=1;var n=qg(),e=Bp(),t=n(e,"Promise");return nw=t,nw}var rw,Xk;function cse(){if(Xk)return rw;Xk=1;var n=qg(),e=Bp(),t=n(e,"Set");return rw=t,rw}var iw,Jk;function hse(){if(Jk)return iw;Jk=1;var n=qg(),e=Bp(),t=n(e,"WeakMap");return iw=t,iw}var ow,eP;function r3(){if(eP)return ow;eP=1;var n=Ase(),e=HO(),t=use(),r=cse(),i=hse(),s=Yg(),l=oN(),o="[object Map]",p="[object Object]",v="[object Promise]",x="[object Set]",B="[object WeakMap]",k="[object DataView]",P=l(n),D=l(e),N=l(t),W=l(r),V=l(i),$=s;return(n&&$(new n(new ArrayBuffer(1)))!=k||e&&$(new e)!=o||t&&$(t.resolve())!=v||r&&$(new r)!=x||i&&$(new i)!=B)&&($=function(ie){var ne=s(ie),q=ne==p?ie.constructor:void 0,te=q?l(q):"";if(te)switch(te){case P:return k;case D:return o;case N:return v;case W:return x;case V:return B}return ne}),ow=$,ow}var sw,tP;function dse(){if(tP)return sw;tP=1;var n=n3(),e=sN(),t=sse(),r=lse(),i=r3(),s=ef(),l=$x(),o=GO(),p=1,v="[object Arguments]",x="[object Array]",B="[object Object]",k=Object.prototype,P=k.hasOwnProperty;function D(N,W,V,$,ie,ne){var q=s(N),te=s(W),G=q?x:i(N),oe=te?x:i(W);G=G==v?B:G,oe=oe==v?B:oe;var fe=G==B,he=oe==B,Me=G==oe;if(Me&&l(N)){if(!l(W))return!1;q=!0,fe=!1}if(Me&&!fe)return ne||(ne=new n),q||o(N)?e(N,W,V,$,ie,ne):t(N,W,G,V,$,ie,ne);if(!(V&p)){var me=fe&&P.call(N,"__wrapped__"),pe=he&&P.call(W,"__wrapped__");if(me||pe){var qe=me?N.value():N,Se=pe?W.value():W;return ne||(ne=new n),ie(qe,Se,V,$,ne)}}return Me?(ne||(ne=new n),r(N,W,V,$,ie,ne)):!1}return sw=D,sw}var aw,nP;function hN(){if(nP)return aw;nP=1;var n=dse(),e=um();function t(r,i,s,l,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,l,t,o)}return aw=t,aw}var lw,rP;function fse(){if(rP)return lw;rP=1;var n=n3(),e=hN(),t=1,r=2;function i(s,l,o,p){var v=o.length,x=v,B=!p;if(s==null)return!x;for(s=Object(s);v--;){var k=o[v];if(B&&k[2]?k[1]!==s[k[0]]:!(k[0]in s))return!1}for(;++v<x;){k=o[v];var P=k[0],D=s[P],N=k[1];if(B&&k[2]){if(D===void 0&&!(P in s))return!1}else{var W=new n;if(p)var V=p(D,N,P,s,l,W);if(!(V===void 0?e(N,D,t|r,p,W):V))return!1}}return!0}return lw=i,lw}var Aw,iP;function dN(){if(iP)return Aw;iP=1;var n=Nf();function e(t){return t===t&&!n(t)}return Aw=e,Aw}var uw,oP;function pse(){if(oP)return uw;oP=1;var n=dN(),e=o_();function t(r){for(var i=e(r),s=i.length;s--;){var l=i[s],o=r[l];i[s]=[l,o,n(o)]}return i}return uw=t,uw}var cw,sP;function fN(){if(sP)return cw;sP=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return cw=n,cw}var hw,aP;function mse(){if(aP)return hw;aP=1;var n=fse(),e=pse(),t=fN();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(l){return l===i||n(l,i,s)}}return hw=r,hw}var dw,lP;function i3(){if(lP)return dw;lP=1;var n=Yg(),e=um(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return dw=r,dw}var fw,AP;function XO(){if(AP)return fw;AP=1;var n=ef(),e=i3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||l!=null&&s in Object(l)}return fw=i,fw}var pw,uP;function gse(){if(uP)return pw;uP=1;var n=$O(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var l=arguments,o=i?i.apply(this,l):l[0],p=s.cache;if(p.has(o))return p.get(o);var v=r.apply(this,l);return s.cache=p.set(o,v)||p,v};return s.cache=new(t.Cache||n),s}return t.Cache=n,pw=t,pw}var mw,cP;function yse(){if(cP)return mw;cP=1;var n=gse(),e=500;function t(r){var i=n(r,function(l){return s.size===e&&s.clear(),l}),s=i.cache;return i}return mw=t,mw}var gw,hP;function vse(){if(hP)return gw;hP=1;var n=yse(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(l,o,p,v){s.push(p?v.replace(t,"$1"):o||l)}),s});return gw=r,gw}var yw,dP;function Cse(){if(dP)return yw;dP=1;var n=i_(),e=iN(),t=ef(),r=i3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(r(o))return s?s.call(o):"";var p=o+"";return p=="0"&&1/o==-1/0?"-0":p}return yw=l,yw}var vw,fP;function _se(){if(fP)return vw;fP=1;var n=Cse();function e(t){return t==null?"":n(t)}return vw=e,vw}var Cw,pP;function pN(){if(pP)return Cw;pP=1;var n=ef(),e=XO(),t=vse(),r=_se();function i(s,l){return n(s)?s:e(s,l)?[s]:t(r(s))}return Cw=i,Cw}var _w,mP;function o3(){if(mP)return _w;mP=1;var n=i3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return _w=e,_w}var bw,gP;function mN(){if(gP)return bw;gP=1;var n=pN(),e=o3();function t(r,i){i=n(i,r);for(var s=0,l=i.length;r!=null&&s<l;)r=r[e(i[s++])];return s&&s==l?r:void 0}return bw=t,bw}var xw,yP;function bse(){if(yP)return xw;yP=1;var n=mN();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return xw=e,xw}var Mw,vP;function xse(){if(vP)return Mw;vP=1;function n(e,t){return e!=null&&t in Object(e)}return Mw=n,Mw}var ww,CP;function Mse(){if(CP)return ww;CP=1;var n=pN(),e=UO(),t=ef(),r=zO(),i=NO(),s=o3();function l(o,p,v){p=n(p,o);for(var x=-1,B=p.length,k=!1;++x<B;){var P=s(p[x]);if(!(k=o!=null&&v(o,P)))break;o=o[P]}return k||++x!=B?k:(B=o==null?0:o.length,!!B&&i(B)&&r(P,B)&&(t(o)||e(o)))}return ww=l,ww}var Sw,_P;function wse(){if(_P)return Sw;_P=1;var n=xse(),e=Mse();function t(r,i){return r!=null&&e(r,i,n)}return Sw=t,Sw}var Ew,bP;function Sse(){if(bP)return Ew;bP=1;var n=hN(),e=bse(),t=wse(),r=XO(),i=dN(),s=fN(),l=o3(),o=1,p=2;function v(x,B){return r(x)&&i(B)?s(l(x),B):function(k){var P=e(k,x);return P===void 0&&P===B?t(k,x):n(B,P,o|p)}}return Ew=v,Ew}var Bw,xP;function Ese(){if(xP)return Bw;xP=1;function n(e){return function(t){return t==null?void 0:t[e]}}return Bw=n,Bw}var Ow,MP;function Bse(){if(MP)return Ow;MP=1;var n=mN();function e(t){return function(r){return n(r,t)}}return Ow=e,Ow}var Iw,wP;function Ose(){if(wP)return Iw;wP=1;var n=Ese(),e=Bse(),t=XO(),r=o3();function i(s){return t(s)?n(r(s)):e(s)}return Iw=i,Iw}var Tw,SP;function Ise(){if(SP)return Tw;SP=1;var n=mse(),e=Sse(),t=Zx(),r=ef(),i=Ose();function s(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?r(l)?e(l[0],l[1]):n(l):i(l)}return Tw=s,Tw}var kw,EP;function Tse(){if(EP)return kw;EP=1;var n=Yy();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var l=i.length,o=r?l:-1,p=Object(i);(r?o--:++o<l)&&s(p[o],o,p)!==!1;);return i}}return kw=e,kw}var Pw,BP;function gN(){if(BP)return Pw;BP=1;var n=tN(),e=Tse(),t=e(n);return Pw=t,Pw}var Kw,OP;function kse(){if(OP)return Kw;OP=1;var n=gN(),e=Yy();function t(r,i){var s=-1,l=e(r)?Array(r.length):[];return n(r,function(o,p,v){l[++s]=i(o,p,v)}),l}return Kw=t,Kw}var Rw,IP;function Pse(){if(IP)return Rw;IP=1;var n=iN(),e=Ise(),t=kse(),r=ef();function i(s,l){var o=r(s)?n:t;return o(s,e(l,3))}return Rw=i,Rw}var TP;function Kse(){if(TP)return I1;TP=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.flattenNames=void 0;var n=voe(),e=p(n),t=qO(),r=p(t),i=rN(),s=p(i),l=Pse(),o=p(l);function p(x){return x&&x.__esModule?x:{default:x}}var v=I1.flattenNames=function x(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=[];return(0,o.default)(B,function(P){Array.isArray(P)?x(P).map(function(D){return k.push(D)}):(0,s.default)(P)?(0,r.default)(P,function(D,N){D===!0&&k.push(N),k.push(N+"-"+D)}):(0,e.default)(P)&&k.push(P)}),k};return I1.default=v,I1}var T1={},Dw,kP;function yN(){if(kP)return Dw;kP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return Dw=n,Dw}var Fw,PP;function vN(){if(PP)return Fw;PP=1;var n=qg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Fw=e,Fw}var Lw,KP;function JO(){if(KP)return Lw;KP=1;var n=vN();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return Lw=e,Lw}var Uw,RP;function CN(){if(RP)return Uw;RP=1;var n=JO(),e=s_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o){var p=s[l];(!(r.call(s,l)&&e(p,o))||o===void 0&&!(l in s))&&n(s,l,o)}return Uw=i,Uw}var zw,DP;function a_(){if(DP)return zw;DP=1;var n=CN(),e=JO();function t(r,i,s,l){var o=!s;s||(s={});for(var p=-1,v=i.length;++p<v;){var x=i[p],B=l?l(s[x],r[x],x,s,r):void 0;B===void 0&&(B=r[x]),o?e(s,x,B):n(s,x,B)}return s}return zw=t,zw}var Nw,FP;function Rse(){if(FP)return Nw;FP=1;var n=a_(),e=o_();function t(r,i){return r&&n(i,e(i),r)}return Nw=t,Nw}var Ww,LP;function Dse(){if(LP)return Ww;LP=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return Ww=n,Ww}var jw,UP;function Fse(){if(UP)return jw;UP=1;var n=Nf(),e=QO(),t=Dse(),r=Object.prototype,i=r.hasOwnProperty;function s(l){if(!n(l))return t(l);var o=e(l),p=[];for(var v in l)v=="constructor"&&(o||!i.call(l,v))||p.push(v);return p}return jw=s,jw}var Gw,zP;function l_(){if(zP)return Gw;zP=1;var n=Jz(),e=Fse(),t=Yy();function r(i){return t(i)?n(i,!0):e(i)}return Gw=r,Gw}var Qw,NP;function Lse(){if(NP)return Qw;NP=1;var n=a_(),e=l_();function t(r,i){return r&&n(i,e(i),r)}return Qw=t,Qw}var Nv={exports:{}};Nv.exports;var WP;function _N(){return WP||(WP=1,function(n,e){var t=Bp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function p(v,x){if(x)return v.slice();var B=v.length,k=o?o(B):new v.constructor(B);return v.copy(k),k}n.exports=p}(Nv,Nv.exports)),Nv.exports}var Yw,jP;function bN(){if(jP)return Yw;jP=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return Yw=n,Yw}var qw,GP;function Use(){if(GP)return qw;GP=1;var n=a_(),e=ZO();function t(r,i){return n(r,e(r),i)}return qw=t,qw}var Vw,QP;function xN(){if(QP)return Vw;QP=1;var n=lN(),e=VO(),t=ZO(),r=uN(),i=Object.getOwnPropertySymbols,s=i?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:r;return Vw=s,Vw}var Hw,YP;function zse(){if(YP)return Hw;YP=1;var n=a_(),e=xN();function t(r,i){return n(r,e(r),i)}return Hw=t,Hw}var $w,qP;function Nse(){if(qP)return $w;qP=1;var n=AN(),e=xN(),t=l_();function r(i){return n(i,t,e)}return $w=r,$w}var Zw,VP;function Wse(){if(VP)return Zw;VP=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Zw=t,Zw}var Xw,HP;function e8(){if(HP)return Xw;HP=1;var n=aN();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return Xw=e,Xw}var Jw,$P;function jse(){if($P)return Jw;$P=1;var n=e8();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return Jw=e,Jw}var eS,ZP;function Gse(){if(ZP)return eS;ZP=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return eS=e,eS}var tS,XP;function Qse(){if(XP)return tS;XP=1;var n=i_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return tS=r,tS}var nS,JP;function MN(){if(JP)return nS;JP=1;var n=e8();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return nS=e,nS}var rS,eK;function Yse(){if(eK)return rS;eK=1;var n=e8(),e=jse(),t=Gse(),r=Qse(),i=MN(),s="[object Boolean]",l="[object Date]",o="[object Map]",p="[object Number]",v="[object RegExp]",x="[object Set]",B="[object String]",k="[object Symbol]",P="[object ArrayBuffer]",D="[object DataView]",N="[object Float32Array]",W="[object Float64Array]",V="[object Int8Array]",$="[object Int16Array]",ie="[object Int32Array]",ne="[object Uint8Array]",q="[object Uint8ClampedArray]",te="[object Uint16Array]",G="[object Uint32Array]";function oe(fe,he,Me){var me=fe.constructor;switch(he){case P:return n(fe);case s:case l:return new me(+fe);case D:return e(fe,Me);case N:case W:case V:case $:case ie:case ne:case q:case te:case G:return i(fe,Me);case o:return new me;case p:case B:return new me(fe);case v:return t(fe);case x:return new me;case k:return r(fe)}}return rS=oe,rS}var iS,tK;function qse(){if(tK)return iS;tK=1;var n=Nf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return iS=t,iS}var oS,nK;function wN(){if(nK)return oS;nK=1;var n=qse(),e=VO(),t=QO();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return oS=r,oS}var sS,rK;function Vse(){if(rK)return sS;rK=1;var n=r3(),e=um(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return sS=r,sS}var aS,iK;function Hse(){if(iK)return aS;iK=1;var n=Vse(),e=WO(),t=jO(),r=t&&t.isMap,i=r?e(r):n;return aS=i,aS}var lS,oK;function $se(){if(oK)return lS;oK=1;var n=r3(),e=um(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return lS=r,lS}var AS,sK;function Zse(){if(sK)return AS;sK=1;var n=$se(),e=WO(),t=jO(),r=t&&t.isSet,i=r?e(r):n;return AS=i,AS}var uS,aK;function Xse(){if(aK)return uS;aK=1;var n=n3(),e=yN(),t=CN(),r=Rse(),i=Lse(),s=_N(),l=bN(),o=Use(),p=zse(),v=cN(),x=Nse(),B=r3(),k=Wse(),P=Yse(),D=wN(),N=ef(),W=$x(),V=Hse(),$=Nf(),ie=Zse(),ne=o_(),q=l_(),te=1,G=2,oe=4,fe="[object Arguments]",he="[object Array]",Me="[object Boolean]",me="[object Date]",pe="[object Error]",qe="[object Function]",Se="[object GeneratorFunction]",vt="[object Map]",Je="[object Number]",Ke="[object Object]",je="[object RegExp]",Pe="[object Set]",Le="[object String]",Xe="[object Symbol]",Ct="[object WeakMap]",Gt="[object ArrayBuffer]",mt="[object DataView]",Ut="[object Float32Array]",kt="[object Float64Array]",Te="[object Int8Array]",Re="[object Int16Array]",Ue="[object Int32Array]",nt="[object Uint8Array]",_t="[object Uint8ClampedArray]",gt="[object Uint16Array]",Kt="[object Uint32Array]",$t={};$t[fe]=$t[he]=$t[Gt]=$t[mt]=$t[Me]=$t[me]=$t[Ut]=$t[kt]=$t[Te]=$t[Re]=$t[Ue]=$t[vt]=$t[Je]=$t[Ke]=$t[je]=$t[Pe]=$t[Le]=$t[Xe]=$t[nt]=$t[_t]=$t[gt]=$t[Kt]=!0,$t[pe]=$t[qe]=$t[Ct]=!1;function Rt(_n,pr,nn,Xn,Fn,an){var Bn,Cr=pr&te,lr=pr&G,hr=pr&oe;if(nn&&(Bn=Fn?nn(_n,Xn,Fn,an):nn(_n)),Bn!==void 0)return Bn;if(!$(_n))return _n;var We=N(_n);if(We){if(Bn=k(_n),!Cr)return l(_n,Bn)}else{var ce=B(_n),ye=ce==qe||ce==Se;if(W(_n))return s(_n,Cr);if(ce==Ke||ce==fe||ye&&!Fn){if(Bn=lr||ye?{}:D(_n),!Cr)return lr?p(_n,i(Bn,_n)):o(_n,r(Bn,_n))}else{if(!$t[ce])return Fn?_n:{};Bn=P(_n,ce,Cr)}}an||(an=new n);var rt=an.get(_n);if(rt)return rt;an.set(_n,Bn),ie(_n)?_n.forEach(function(Zt){Bn.add(Rt(Zt,pr,nn,Zt,_n,an))}):V(_n)&&_n.forEach(function(Zt,Jn){Bn.set(Jn,Rt(Zt,pr,nn,Jn,_n,an))});var Et=hr?lr?x:v:lr?q:ne,Ht=We?void 0:Et(_n);return e(Ht||_n,function(Zt,Jn){Ht&&(Jn=Zt,Zt=_n[Jn]),t(Bn,Jn,Rt(Zt,pr,nn,Jn,_n,an))}),Bn}return uS=Rt,uS}var cS,lK;function Jse(){if(lK)return cS;lK=1;var n=Xse(),e=1,t=4;function r(i){return n(i,e|t)}return cS=r,cS}var AK;function eae(){if(AK)return T1;AK=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.mergeClasses=void 0;var n=qO(),e=s(n),t=Jse(),r=s(t),i=Object.assign||function(o){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(o[x]=v[x])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var l=T1.mergeClasses=function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=p.default&&(0,r.default)(p.default)||{};return v.map(function(B){var k=p[B];return k&&(0,e.default)(k,function(P,D){x[D]||(x[D]={}),x[D]=i({},x[D],k[D])}),B}),x};return T1.default=l,T1}var k1={},uK;function tae(){if(uK)return k1;uK=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.autoprefix=void 0;var n=qO(),e=r(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var p=arguments[o];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(l[v]=p[v])}return l};function r(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var p=o&&o.split(" ");return{position:"absolute",top:p&&p[0],right:p&&p[1],bottom:p&&p[2],left:p&&p[3]}},extend:function(o,p){var v=p[o];return v||{extend:o}}},s=k1.autoprefix=function(o){var p={};return(0,e.default)(o,function(v,x){var B={};(0,e.default)(v,function(k,P){var D=i[P];D?B=t({},B,D(k)):B[P]=k}),p[x]=B}),p};return k1.default=s,k1}var P1={},cK;function nae(){if(cK)return P1;cK=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.hover=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(p[B]=x[B])}return p},e=Da(),t=r(e);function r(p){return p&&p.__esModule?p:{default:p}}function i(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function s(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function l(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}var o=P1.hover=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(k,B);function k(){var P,D,N,W;i(this,k);for(var V=arguments.length,$=Array(V),ie=0;ie<V;ie++)$[ie]=arguments[ie];return W=(D=(N=s(this,(P=k.__proto__||Object.getPrototypeOf(k)).call.apply(P,[this].concat($))),N),N.state={hover:!1},N.handleMouseOver=function(){return N.setState({hover:!0})},N.handleMouseOut=function(){return N.setState({hover:!1})},N.render=function(){return t.default.createElement(x,{onMouseOver:N.handleMouseOver,onMouseOut:N.handleMouseOut},t.default.createElement(v,n({},N.props,N.state)))},D),s(N,W)}return k}(t.default.Component)};return P1.default=o,P1}var K1={},hK;function rae(){if(hK)return K1;hK=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.active=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(p[B]=x[B])}return p},e=Da(),t=r(e);function r(p){return p&&p.__esModule?p:{default:p}}function i(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function s(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function l(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}var o=K1.active=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(k,B);function k(){var P,D,N,W;i(this,k);for(var V=arguments.length,$=Array(V),ie=0;ie<V;ie++)$[ie]=arguments[ie];return W=(D=(N=s(this,(P=k.__proto__||Object.getPrototypeOf(k)).call.apply(P,[this].concat($))),N),N.state={active:!1},N.handleMouseDown=function(){return N.setState({active:!0})},N.handleMouseUp=function(){return N.setState({active:!1})},N.render=function(){return t.default.createElement(x,{onMouseDown:N.handleMouseDown,onMouseUp:N.handleMouseUp},t.default.createElement(v,n({},N.props,N.state)))},D),s(N,W)}return k}(t.default.Component)};return K1.default=o,K1}var db={},dK;function iae(){if(dK)return db;dK=1,Object.defineProperty(db,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=p};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return db.default=n,db}var fK;function Op(){if(fK)return cd;fK=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.ReactCSS=cd.loop=cd.handleActive=cd.handleHover=cd.hover=void 0;var n=Kse(),e=k(n),t=eae(),r=k(t),i=tae(),s=k(i),l=nae(),o=k(l),p=rae(),v=k(p),x=iae(),B=k(x);function k(D){return D&&D.__esModule?D:{default:D}}cd.hover=o.default,cd.handleHover=o.default,cd.handleActive=v.default,cd.loop=B.default;var P=cd.ReactCSS=function(N){for(var W=arguments.length,V=Array(W>1?W-1:0),$=1;$<W;$++)V[$-1]=arguments[$];var ie=(0,e.default)(V),ne=(0,r.default)(N,ie);return(0,s.default)(ne)};return cd.default=P,cd}var hS,pK;function SN(){if(pK)return hS;pK=1;var n=JO(),e=s_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return hS=t,hS}var dS,mK;function oae(){if(mK)return dS;mK=1;var n=Yy(),e=um();function t(r){return e(r)&&n(r)}return dS=t,dS}var fS,gK;function EN(){if(gK)return fS;gK=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return fS=n,fS}var pS,yK;function sae(){if(yK)return pS;yK=1;var n=a_(),e=l_();function t(r){return n(r,e(r))}return pS=t,pS}var mS,vK;function aae(){if(vK)return mS;vK=1;var n=SN(),e=_N(),t=MN(),r=bN(),i=wN(),s=UO(),l=ef(),o=oae(),p=$x(),v=YO(),x=Nf(),B=rN(),k=GO(),P=EN(),D=sae();function N(W,V,$,ie,ne,q,te){var G=P(W,$),oe=P(V,$),fe=te.get(oe);if(fe){n(W,$,fe);return}var he=q?q(G,oe,$+"",W,V,te):void 0,Me=he===void 0;if(Me){var me=l(oe),pe=!me&&p(oe),qe=!me&&!pe&&k(oe);he=oe,me||pe||qe?l(G)?he=G:o(G)?he=r(G):pe?(Me=!1,he=e(oe,!0)):qe?(Me=!1,he=t(oe,!0)):he=[]:B(oe)||s(oe)?(he=G,s(G)?he=D(G):(!x(G)||v(G))&&(he=i(oe))):Me=!1}Me&&(te.set(oe,he),ne(he,oe,ie,q,te),te.delete(oe)),n(W,$,he)}return mS=N,mS}var gS,CK;function lae(){if(CK)return gS;CK=1;var n=n3(),e=SN(),t=Xz(),r=aae(),i=Nf(),s=l_(),l=EN();function o(p,v,x,B,k){p!==v&&t(v,function(P,D){if(k||(k=new n),i(P))r(p,v,D,x,o,B,k);else{var N=B?B(l(p,D),P,D+"",p,v,k):void 0;N===void 0&&(N=P),e(p,D,N)}},s)}return gS=o,gS}var yS,_K;function Aae(){if(_K)return yS;_K=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return yS=n,yS}var vS,bK;function uae(){if(bK)return vS;bK=1;var n=Aae(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var l=arguments,o=-1,p=e(l.length-i,0),v=Array(p);++o<p;)v[o]=l[i+o];o=-1;for(var x=Array(i+1);++o<i;)x[o]=l[o];return x[i]=s(v),n(r,this,x)}}return vS=t,vS}var CS,xK;function cae(){if(xK)return CS;xK=1;function n(e){return function(){return e}}return CS=n,CS}var _S,MK;function hae(){if(MK)return _S;MK=1;var n=cae(),e=vN(),t=Zx(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return _S=r,_S}var bS,wK;function dae(){if(wK)return bS;wK=1;var n=800,e=16,t=Date.now;function r(i){var s=0,l=0;return function(){var o=t(),p=e-(o-l);if(l=o,p>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return bS=r,bS}var xS,SK;function fae(){if(SK)return xS;SK=1;var n=hae(),e=dae(),t=e(n);return xS=t,xS}var MS,EK;function pae(){if(EK)return MS;EK=1;var n=Zx(),e=uae(),t=fae();function r(i,s){return t(e(i,s,n),i+"")}return MS=r,MS}var wS,BK;function mae(){if(BK)return wS;BK=1;var n=s_(),e=Yy(),t=zO(),r=Nf();function i(s,l,o){if(!r(o))return!1;var p=typeof l;return(p=="number"?e(o)&&t(l,o.length):p=="string"&&l in o)?n(o[l],s):!1}return wS=i,wS}var SS,OK;function gae(){if(OK)return SS;OK=1;var n=pae(),e=mae();function t(r){return n(function(i,s){var l=-1,o=s.length,p=o>1?s[o-1]:void 0,v=o>2?s[2]:void 0;for(p=r.length>3&&typeof p=="function"?(o--,p):void 0,v&&e(s[0],s[1],v)&&(p=o<3?void 0:p,o=1),i=Object(i);++l<o;){var x=s[l];x&&r(i,x,l,p)}return i})}return SS=t,SS}var ES,IK;function BN(){if(IK)return ES;IK=1;var n=lae(),e=gae(),t=e(function(r,i,s){n(r,i,s)});return ES=t,ES}var BS={},R1={},fb={},TK;function yae(){return TK||(TK=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.calculateChange=function(e,t,r,i,s){var l=s.clientWidth,o=s.clientHeight,p=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,v=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,x=p-(s.getBoundingClientRect().left+window.pageXOffset),B=v-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var k=void 0;if(B<0?k=0:B>o?k=1:k=Math.round(B*100/o)/100,t.a!==k)return{h:t.h,s:t.s,l:t.l,a:k,source:"rgb"}}else{var P=void 0;if(x<0?P=0:x>l?P=1:P=Math.round(x*100/l)/100,i!==P)return{h:t.h,s:t.s,l:t.l,a:P,source:"rgb"}}return null}),fb}var D1={},xv={},kK;function vae(){if(kK)return xv;kK=1,Object.defineProperty(xv,"__esModule",{value:!0});var n={},e=xv.render=function(r,i,s,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=s*2,o.height=s*2;var p=o.getContext("2d");return p?(p.fillStyle=r,p.fillRect(0,0,o.width,o.height),p.fillStyle=i,p.fillRect(0,0,s,s),p.translate(s,s),p.fillRect(0,0,s,s),o.toDataURL()):null};return xv.get=function(r,i,s,l){var o=r+"-"+i+"-"+s+(l?"-server":"");if(n[o])return n[o];var p=e(r,i,s,l);return n[o]=p,p},xv}var PK;function t8(){if(PK)return D1;PK=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.Checkboard=void 0;var n=Object.assign||function(x){for(var B=1;B<arguments.length;B++){var k=arguments[B];for(var P in k)Object.prototype.hasOwnProperty.call(k,P)&&(x[P]=k[P])}return x},e=Da(),t=p(e),r=Op(),i=p(r),s=vae(),l=o(s);function o(x){if(x&&x.__esModule)return x;var B={};if(x!=null)for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(B[k]=x[k]);return B.default=x,B}function p(x){return x&&x.__esModule?x:{default:x}}var v=D1.Checkboard=function(B){var k=B.white,P=B.grey,D=B.size,N=B.renderers,W=B.borderRadius,V=B.boxShadow,$=B.children,ie=(0,i.default)({default:{grid:{borderRadius:W,boxShadow:V,absolute:"0px 0px 0px 0px",background:"url("+l.get(k,P,D,N.canvas)+") center left"}}});return(0,e.isValidElement)($)?t.default.cloneElement($,n({},$.props,{style:n({},$.props.style,ie.grid)})):t.default.createElement("div",{style:ie.grid})};return v.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},D1.default=v,D1}var KK;function Cae(){if(KK)return R1;KK=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.Alpha=void 0;var n=Object.assign||function(W){for(var V=1;V<arguments.length;V++){var $=arguments[V];for(var ie in $)Object.prototype.hasOwnProperty.call($,ie)&&(W[ie]=$[ie])}return W},e=function(){function W(V,$){for(var ie=0;ie<$.length;ie++){var ne=$[ie];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(V,ne.key,ne)}}return function(V,$,ie){return $&&W(V.prototype,$),ie&&W(V,ie),V}}(),t=Da(),r=B(t),i=Op(),s=B(i),l=yae(),o=x(l),p=t8(),v=B(p);function x(W){if(W&&W.__esModule)return W;var V={};if(W!=null)for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(V[$]=W[$]);return V.default=W,V}function B(W){return W&&W.__esModule?W:{default:W}}function k(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")}function P(W,V){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:W}function D(W,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);W.prototype=Object.create(V&&V.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(W,V):W.__proto__=V)}var N=R1.Alpha=function(W){D(V,W);function V(){var $,ie,ne,q;k(this,V);for(var te=arguments.length,G=Array(te),oe=0;oe<te;oe++)G[oe]=arguments[oe];return q=(ie=(ne=P(this,($=V.__proto__||Object.getPrototypeOf(V)).call.apply($,[this].concat(G))),ne),ne.handleChange=function(fe){var he=o.calculateChange(fe,ne.props.hsl,ne.props.direction,ne.props.a,ne.container);he&&typeof ne.props.onChange=="function"&&ne.props.onChange(he,fe)},ne.handleMouseDown=function(fe){ne.handleChange(fe),window.addEventListener("mousemove",ne.handleChange),window.addEventListener("mouseup",ne.handleMouseUp)},ne.handleMouseUp=function(){ne.unbindEventListeners()},ne.unbindEventListeners=function(){window.removeEventListener("mousemove",ne.handleChange),window.removeEventListener("mouseup",ne.handleMouseUp)},ie),P(ne,q)}return e(V,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var ie=this,ne=this.props.rgb,q=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:ne.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)"},pointer:{left:0,top:ne.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:q.alpha},r.default.createElement("div",{style:q.checkboard},r.default.createElement(v.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:q.gradient}),r.default.createElement("div",{style:q.container,ref:function(G){return ie.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:q.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:q.slider}))))}}]),V}(t.PureComponent||t.Component);return R1.default=N,R1}var F1={},RK;function _ae(){if(RK)return F1;RK=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.EditableInput=void 0;var n=function(){function $(ie,ne){for(var q=0;q<ne.length;q++){var te=ne[q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}return function(ie,ne,q){return ne&&$(ie.prototype,ne),q&&$(ie,q),ie}}(),e=Da(),t=s(e),r=Op(),i=s(r);function s($){return $&&$.__esModule?$:{default:$}}function l($,ie,ne){return ie in $?Object.defineProperty($,ie,{value:ne,enumerable:!0,configurable:!0,writable:!0}):$[ie]=ne,$}function o($,ie){if(!($ instanceof ie))throw new TypeError("Cannot call a class as a function")}function p($,ie){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:$}function v($,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);$.prototype=Object.create(ie&&ie.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf($,ie):$.__proto__=ie)}var x=1,B=38,k=40,P=[B,k],D=function(ie){return P.indexOf(ie)>-1},N=function(ie){return Number(String(ie).replace(/%/g,""))},W=1,V=F1.EditableInput=function($){v(ie,$);function ie(ne){o(this,ie);var q=p(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return q.handleBlur=function(){q.state.blurValue&&q.setState({value:q.state.blurValue,blurValue:null})},q.handleChange=function(te){q.setUpdatedValue(te.target.value,te)},q.handleKeyDown=function(te){var G=N(te.target.value);if(!isNaN(G)&&D(te.keyCode)){var oe=q.getArrowOffset(),fe=te.keyCode===B?G+oe:G-oe;q.setUpdatedValue(fe,te)}},q.handleDrag=function(te){if(q.props.dragLabel){var G=Math.round(q.props.value+te.movementX);G>=0&&G<=q.props.dragMax&&q.props.onChange&&q.props.onChange(q.getValueObjectWithLabel(G),te)}},q.handleMouseDown=function(te){q.props.dragLabel&&(te.preventDefault(),q.handleDrag(te),window.addEventListener("mousemove",q.handleDrag),window.addEventListener("mouseup",q.handleMouseUp))},q.handleMouseUp=function(){q.unbindEventListeners()},q.unbindEventListeners=function(){window.removeEventListener("mousemove",q.handleDrag),window.removeEventListener("mouseup",q.handleMouseUp)},q.state={value:String(ne.value).toUpperCase(),blurValue:String(ne.value).toUpperCase()},q.inputId="rc-editable-input-"+W++,q}return n(ie,[{key:"componentDidUpdate",value:function(q,te){this.props.value!==this.state.value&&(q.value!==this.props.value||te.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(q){return l({},this.props.label,q)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||x}},{key:"setUpdatedValue",value:function(q,te){var G=this.props.label?this.getValueObjectWithLabel(q):q;this.props.onChange&&this.props.onChange(G,te),this.setState({value:q})}},{key:"render",value:function(){var q=this,te=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:te.wrap},t.default.createElement("input",{id:this.inputId,style:te.input,ref:function(oe){return q.input=oe},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:te.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ie}(e.PureComponent||e.Component);return F1.default=V,F1}var L1={},pb={},DK;function bae(){return DK||(DK=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.calculateChange=function(e,t,r,i){var s=i.clientWidth,l=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,p=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,v=o-(i.getBoundingClientRect().left+window.pageXOffset),x=p-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(x<0)B=359;else if(x>l)B=0;else{var k=-(x*100/l)+100;B=360*k/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var P=void 0;if(v<0)P=0;else if(v>s)P=359;else{var D=v*100/s;P=360*D/100}if(r.h!==P)return{h:P,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),pb}var FK;function xae(){if(FK)return L1;FK=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.Hue=void 0;var n=function(){function P(D,N){for(var W=0;W<N.length;W++){var V=N[W];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,N,W){return N&&P(D.prototype,N),W&&P(D,W),D}}(),e=Da(),t=p(e),r=Op(),i=p(r),s=bae(),l=o(s);function o(P){if(P&&P.__esModule)return P;var D={};if(P!=null)for(var N in P)Object.prototype.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function p(P){return P&&P.__esModule?P:{default:P}}function v(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function x(P,D){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:P}function B(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(P,D):P.__proto__=D)}var k=L1.Hue=function(P){B(D,P);function D(){var N,W,V,$;v(this,D);for(var ie=arguments.length,ne=Array(ie),q=0;q<ie;q++)ne[q]=arguments[q];return $=(W=(V=x(this,(N=D.__proto__||Object.getPrototypeOf(D)).call.apply(N,[this].concat(ne))),V),V.handleChange=function(te){var G=l.calculateChange(te,V.props.direction,V.props.hsl,V.container);G&&typeof V.props.onChange=="function"&&V.props.onChange(G,te)},V.handleMouseDown=function(te){V.handleChange(te),window.addEventListener("mousemove",V.handleChange),window.addEventListener("mouseup",V.handleMouseUp)},V.handleMouseUp=function(){V.unbindEventListeners()},W),x(V,$)}return n(D,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var W=this,V=this.props.direction,$=V===void 0?"horizontal":V,ie=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:$==="vertical"});return t.default.createElement("div",{style:ie.hue},t.default.createElement("div",{className:"hue-"+$,style:ie.container,ref:function(q){return W.container=q},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:ie.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ie.slider}))))}}]),D}(e.PureComponent||e.Component);return L1.default=k,L1}var U1={},LK;function Mae(){if(LK)return U1;LK=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.Raised=void 0;var n=Da(),e=p(n),t=wp(),r=p(t),i=Op(),s=p(i),l=BN(),o=p(l);function p(x){return x&&x.__esModule?x:{default:x}}var v=U1.Raised=function(B){var k=B.zDepth,P=B.radius,D=B.background,N=B.children,W=B.styles,V=W===void 0?{}:W,$=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+k+"px "+k*4+"px rgba(0,0,0,.24)",borderRadius:P,background:D}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},V),{"zDepth-1":k===1});return e.default.createElement("div",{style:$.wrap},e.default.createElement("div",{style:$.bg}),e.default.createElement("div",{style:$.content},N))};return v.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},v.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},U1.default=v,U1}var z1={},OS,UK;function wae(){if(UK)return OS;UK=1;var n=Bp(),e=function(){return n.Date.now()};return OS=e,OS}var IS,zK;function Sae(){if(zK)return IS;zK=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return IS=e,IS}var TS,NK;function Eae(){if(NK)return TS;NK=1;var n=Sae(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return TS=t,TS}var kS,WK;function Bae(){if(WK)return kS;WK=1;var n=Eae(),e=Nf(),t=i3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function p(v){if(typeof v=="number")return v;if(t(v))return r;if(e(v)){var x=typeof v.valueOf=="function"?v.valueOf():v;v=e(x)?x+"":x}if(typeof v!="string")return v===0?v:+v;v=n(v);var B=s.test(v);return B||l.test(v)?o(v.slice(2),B?2:8):i.test(v)?r:+v}return kS=p,kS}var PS,jK;function ON(){if(jK)return PS;jK=1;var n=Nf(),e=wae(),t=Bae(),r="Expected a function",i=Math.max,s=Math.min;function l(o,p,v){var x,B,k,P,D,N,W=0,V=!1,$=!1,ie=!0;if(typeof o!="function")throw new TypeError(r);p=t(p)||0,n(v)&&(V=!!v.leading,$="maxWait"in v,k=$?i(t(v.maxWait)||0,p):k,ie="trailing"in v?!!v.trailing:ie);function ne(pe){var qe=x,Se=B;return x=B=void 0,W=pe,P=o.apply(Se,qe),P}function q(pe){return W=pe,D=setTimeout(oe,p),V?ne(pe):P}function te(pe){var qe=pe-N,Se=pe-W,vt=p-qe;return $?s(vt,k-Se):vt}function G(pe){var qe=pe-N,Se=pe-W;return N===void 0||qe>=p||qe<0||$&&Se>=k}function oe(){var pe=e();if(G(pe))return fe(pe);D=setTimeout(oe,te(pe))}function fe(pe){return D=void 0,ie&&x?ne(pe):(x=B=void 0,P)}function he(){D!==void 0&&clearTimeout(D),W=0,x=N=B=D=void 0}function Me(){return D===void 0?P:fe(e())}function me(){var pe=e(),qe=G(pe);if(x=arguments,B=this,N=pe,qe){if(D===void 0)return q(N);if($)return clearTimeout(D),D=setTimeout(oe,p),ne(N)}return D===void 0&&(D=setTimeout(oe,p)),P}return me.cancel=he,me.flush=Me,me}return PS=l,PS}var KS,GK;function Oae(){if(GK)return KS;GK=1;var n=ON(),e=Nf(),t="Expected a function";function r(i,s,l){var o=!0,p=!0;if(typeof i!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,p="trailing"in l?!!l.trailing:p),n(i,s,{leading:o,maxWait:s,trailing:p})}return KS=r,KS}var mb={},QK;function Iae(){return QK||(QK=1,Object.defineProperty(mb,"__esModule",{value:!0}),mb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,l=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,p=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,v=o-(r.getBoundingClientRect().left+window.pageXOffset),x=p-(r.getBoundingClientRect().top+window.pageYOffset);v<0?v=0:v>s&&(v=s),x<0?x=0:x>l&&(x=l);var B=v/s,k=1-x/l;return{h:t.h,s:B,v:k,a:t.a,source:"hsv"}}),mb}var YK;function Tae(){if(YK)return z1;YK=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.Saturation=void 0;var n=function(){function N(W,V){for(var $=0;$<V.length;$++){var ie=V[$];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(W,ie.key,ie)}}return function(W,V,$){return V&&N(W.prototype,V),$&&N(W,$),W}}(),e=Da(),t=x(e),r=Op(),i=x(r),s=Oae(),l=x(s),o=Iae(),p=v(o);function v(N){if(N&&N.__esModule)return N;var W={};if(N!=null)for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(W[V]=N[V]);return W.default=N,W}function x(N){return N&&N.__esModule?N:{default:N}}function B(N,W){if(!(N instanceof W))throw new TypeError("Cannot call a class as a function")}function k(N,W){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:N}function P(N,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);N.prototype=Object.create(W&&W.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(N,W):N.__proto__=W)}var D=z1.Saturation=function(N){P(W,N);function W(V){B(this,W);var $=k(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,V));return $.handleChange=function(ie){typeof $.props.onChange=="function"&&$.throttle($.props.onChange,p.calculateChange(ie,$.props.hsl,$.container),ie)},$.handleMouseDown=function(ie){$.handleChange(ie);var ne=$.getContainerRenderWindow();ne.addEventListener("mousemove",$.handleChange),ne.addEventListener("mouseup",$.handleMouseUp)},$.handleMouseUp=function(){$.unbindEventListeners()},$.throttle=(0,l.default)(function(ie,ne,q){ie(ne,q)},50),$}return n(W,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var $=this.container,ie=window;!ie.document.contains($)&&ie.parent!==ie;)ie=ie.parent;return ie}},{key:"unbindEventListeners",value:function(){var $=this.getContainerRenderWindow();$.removeEventListener("mousemove",this.handleChange),$.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var $=this,ie=this.props.style||{},ne=ie.color,q=ie.white,te=ie.black,G=ie.pointer,oe=ie.circle,fe=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:ne,white:q,black:te,pointer:G,circle:oe}},{custom:!!this.props.style});return t.default.createElement("div",{style:fe.color,ref:function(Me){return $.container=Me},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:fe.white,className:"saturation-white"},t.default.createElement("div",{style:fe.black,className:"saturation-black"}),t.default.createElement("div",{style:fe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:fe.circle}))))}}]),W}(e.PureComponent||e.Component);return z1.default=D,z1}var N1={},Uh={},RS,qK;function kae(){if(qK)return RS;qK=1;var n=yN(),e=gN(),t=nN(),r=ef();function i(s,l){var o=r(s)?n:e;return o(s,t(l))}return RS=i,RS}var DS,VK;function Pae(){return VK||(VK=1,DS=kae()),DS}var Pb={exports:{}},Kae=Pb.exports,HK;function Rae(){return HK||(HK=1,function(n,e){(function(t,r){n.exports=r()})(Kae,function(){function t(Te){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},t(Te)}var r=/^\s+/,i=/\s+$/;function s(Te,Re){if(Te=Te||"",Re=Re||{},Te instanceof s)return Te;if(!(this instanceof s))return new s(Te,Re);var Ue=l(Te);this._originalInput=Te,this._r=Ue.r,this._g=Ue.g,this._b=Ue.b,this._a=Ue.a,this._roundA=Math.round(100*this._a)/100,this._format=Re.format||Ue.format,this._gradientType=Re.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Ue.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Re=this.toRgb();return(Re.r*299+Re.g*587+Re.b*114)/1e3},getLuminance:function(){var Re=this.toRgb(),Ue,nt,_t,gt,Kt,$t;return Ue=Re.r/255,nt=Re.g/255,_t=Re.b/255,Ue<=.03928?gt=Ue/12.92:gt=Math.pow((Ue+.055)/1.055,2.4),nt<=.03928?Kt=nt/12.92:Kt=Math.pow((nt+.055)/1.055,2.4),_t<=.03928?$t=_t/12.92:$t=Math.pow((_t+.055)/1.055,2.4),.2126*gt+.7152*Kt+.0722*$t},setAlpha:function(Re){return this._a=qe(Re),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Re=x(this._r,this._g,this._b);return{h:Re.h*360,s:Re.s,v:Re.v,a:this._a}},toHsvString:function(){var Re=x(this._r,this._g,this._b),Ue=Math.round(Re.h*360),nt=Math.round(Re.s*100),_t=Math.round(Re.v*100);return this._a==1?"hsv("+Ue+", "+nt+"%, "+_t+"%)":"hsva("+Ue+", "+nt+"%, "+_t+"%, "+this._roundA+")"},toHsl:function(){var Re=p(this._r,this._g,this._b);return{h:Re.h*360,s:Re.s,l:Re.l,a:this._a}},toHslString:function(){var Re=p(this._r,this._g,this._b),Ue=Math.round(Re.h*360),nt=Math.round(Re.s*100),_t=Math.round(Re.l*100);return this._a==1?"hsl("+Ue+", "+nt+"%, "+_t+"%)":"hsla("+Ue+", "+nt+"%, "+_t+"%, "+this._roundA+")"},toHex:function(Re){return k(this._r,this._g,this._b,Re)},toHexString:function(Re){return"#"+this.toHex(Re)},toHex8:function(Re){return P(this._r,this._g,this._b,this._a,Re)},toHex8String:function(Re){return"#"+this.toHex8(Re)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Se(this._r,255)*100)+"%",g:Math.round(Se(this._g,255)*100)+"%",b:Math.round(Se(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Se(this._r,255)*100)+"%, "+Math.round(Se(this._g,255)*100)+"%, "+Math.round(Se(this._b,255)*100)+"%)":"rgba("+Math.round(Se(this._r,255)*100)+"%, "+Math.round(Se(this._g,255)*100)+"%, "+Math.round(Se(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:me[k(this._r,this._g,this._b,!0)]||!1},toFilter:function(Re){var Ue="#"+D(this._r,this._g,this._b,this._a),nt=Ue,_t=this._gradientType?"GradientType = 1, ":"";if(Re){var gt=s(Re);nt="#"+D(gt._r,gt._g,gt._b,gt._a)}return"progid:DXImageTransform.Microsoft.gradient("+_t+"startColorstr="+Ue+",endColorstr="+nt+")"},toString:function(Re){var Ue=!!Re;Re=Re||this._format;var nt=!1,_t=this._a<1&&this._a>=0,gt=!Ue&&_t&&(Re==="hex"||Re==="hex6"||Re==="hex3"||Re==="hex4"||Re==="hex8"||Re==="name");return gt?Re==="name"&&this._a===0?this.toName():this.toRgbString():(Re==="rgb"&&(nt=this.toRgbString()),Re==="prgb"&&(nt=this.toPercentageRgbString()),(Re==="hex"||Re==="hex6")&&(nt=this.toHexString()),Re==="hex3"&&(nt=this.toHexString(!0)),Re==="hex4"&&(nt=this.toHex8String(!0)),Re==="hex8"&&(nt=this.toHex8String()),Re==="name"&&(nt=this.toName()),Re==="hsl"&&(nt=this.toHslString()),Re==="hsv"&&(nt=this.toHsvString()),nt||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Re,Ue){var nt=Re.apply(null,[this].concat([].slice.call(Ue)));return this._r=nt._r,this._g=nt._g,this._b=nt._b,this.setAlpha(nt._a),this},lighten:function(){return this._applyModification($,arguments)},brighten:function(){return this._applyModification(ie,arguments)},darken:function(){return this._applyModification(ne,arguments)},desaturate:function(){return this._applyModification(N,arguments)},saturate:function(){return this._applyModification(W,arguments)},greyscale:function(){return this._applyModification(V,arguments)},spin:function(){return this._applyModification(q,arguments)},_applyCombination:function(Re,Ue){return Re.apply(null,[this].concat([].slice.call(Ue)))},analogous:function(){return this._applyCombination(fe,arguments)},complement:function(){return this._applyCombination(te,arguments)},monochromatic:function(){return this._applyCombination(he,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},s.fromRatio=function(Te,Re){if(t(Te)=="object"){var Ue={};for(var nt in Te)Te.hasOwnProperty(nt)&&(nt==="a"?Ue[nt]=Te[nt]:Ue[nt]=Le(Te[nt]));Te=Ue}return s(Te,Re)};function l(Te){var Re={r:0,g:0,b:0},Ue=1,nt=null,_t=null,gt=null,Kt=!1,$t=!1;return typeof Te=="string"&&(Te=Ut(Te)),t(Te)=="object"&&(mt(Te.r)&&mt(Te.g)&&mt(Te.b)?(Re=o(Te.r,Te.g,Te.b),Kt=!0,$t=String(Te.r).substr(-1)==="%"?"prgb":"rgb"):mt(Te.h)&&mt(Te.s)&&mt(Te.v)?(nt=Le(Te.s),_t=Le(Te.v),Re=B(Te.h,nt,_t),Kt=!0,$t="hsv"):mt(Te.h)&&mt(Te.s)&&mt(Te.l)&&(nt=Le(Te.s),gt=Le(Te.l),Re=v(Te.h,nt,gt),Kt=!0,$t="hsl"),Te.hasOwnProperty("a")&&(Ue=Te.a)),Ue=qe(Ue),{ok:Kt,format:Te.format||$t,r:Math.min(255,Math.max(Re.r,0)),g:Math.min(255,Math.max(Re.g,0)),b:Math.min(255,Math.max(Re.b,0)),a:Ue}}function o(Te,Re,Ue){return{r:Se(Te,255)*255,g:Se(Re,255)*255,b:Se(Ue,255)*255}}function p(Te,Re,Ue){Te=Se(Te,255),Re=Se(Re,255),Ue=Se(Ue,255);var nt=Math.max(Te,Re,Ue),_t=Math.min(Te,Re,Ue),gt,Kt,$t=(nt+_t)/2;if(nt==_t)gt=Kt=0;else{var Rt=nt-_t;switch(Kt=$t>.5?Rt/(2-nt-_t):Rt/(nt+_t),nt){case Te:gt=(Re-Ue)/Rt+(Re<Ue?6:0);break;case Re:gt=(Ue-Te)/Rt+2;break;case Ue:gt=(Te-Re)/Rt+4;break}gt/=6}return{h:gt,s:Kt,l:$t}}function v(Te,Re,Ue){var nt,_t,gt;Te=Se(Te,360),Re=Se(Re,100),Ue=Se(Ue,100);function Kt(_n,pr,nn){return nn<0&&(nn+=1),nn>1&&(nn-=1),nn<1/6?_n+(pr-_n)*6*nn:nn<1/2?pr:nn<2/3?_n+(pr-_n)*(2/3-nn)*6:_n}if(Re===0)nt=_t=gt=Ue;else{var $t=Ue<.5?Ue*(1+Re):Ue+Re-Ue*Re,Rt=2*Ue-$t;nt=Kt(Rt,$t,Te+1/3),_t=Kt(Rt,$t,Te),gt=Kt(Rt,$t,Te-1/3)}return{r:nt*255,g:_t*255,b:gt*255}}function x(Te,Re,Ue){Te=Se(Te,255),Re=Se(Re,255),Ue=Se(Ue,255);var nt=Math.max(Te,Re,Ue),_t=Math.min(Te,Re,Ue),gt,Kt,$t=nt,Rt=nt-_t;if(Kt=nt===0?0:Rt/nt,nt==_t)gt=0;else{switch(nt){case Te:gt=(Re-Ue)/Rt+(Re<Ue?6:0);break;case Re:gt=(Ue-Te)/Rt+2;break;case Ue:gt=(Te-Re)/Rt+4;break}gt/=6}return{h:gt,s:Kt,v:$t}}function B(Te,Re,Ue){Te=Se(Te,360)*6,Re=Se(Re,100),Ue=Se(Ue,100);var nt=Math.floor(Te),_t=Te-nt,gt=Ue*(1-Re),Kt=Ue*(1-_t*Re),$t=Ue*(1-(1-_t)*Re),Rt=nt%6,_n=[Ue,Kt,gt,gt,$t,Ue][Rt],pr=[$t,Ue,Ue,Kt,gt,gt][Rt],nn=[gt,gt,$t,Ue,Ue,Kt][Rt];return{r:_n*255,g:pr*255,b:nn*255}}function k(Te,Re,Ue,nt){var _t=[Pe(Math.round(Te).toString(16)),Pe(Math.round(Re).toString(16)),Pe(Math.round(Ue).toString(16))];return nt&&_t[0].charAt(0)==_t[0].charAt(1)&&_t[1].charAt(0)==_t[1].charAt(1)&&_t[2].charAt(0)==_t[2].charAt(1)?_t[0].charAt(0)+_t[1].charAt(0)+_t[2].charAt(0):_t.join("")}function P(Te,Re,Ue,nt,_t){var gt=[Pe(Math.round(Te).toString(16)),Pe(Math.round(Re).toString(16)),Pe(Math.round(Ue).toString(16)),Pe(Xe(nt))];return _t&&gt[0].charAt(0)==gt[0].charAt(1)&&gt[1].charAt(0)==gt[1].charAt(1)&&gt[2].charAt(0)==gt[2].charAt(1)&&gt[3].charAt(0)==gt[3].charAt(1)?gt[0].charAt(0)+gt[1].charAt(0)+gt[2].charAt(0)+gt[3].charAt(0):gt.join("")}function D(Te,Re,Ue,nt){var _t=[Pe(Xe(nt)),Pe(Math.round(Te).toString(16)),Pe(Math.round(Re).toString(16)),Pe(Math.round(Ue).toString(16))];return _t.join("")}s.equals=function(Te,Re){return!Te||!Re?!1:s(Te).toRgbString()==s(Re).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function N(Te,Re){Re=Re===0?0:Re||10;var Ue=s(Te).toHsl();return Ue.s-=Re/100,Ue.s=vt(Ue.s),s(Ue)}function W(Te,Re){Re=Re===0?0:Re||10;var Ue=s(Te).toHsl();return Ue.s+=Re/100,Ue.s=vt(Ue.s),s(Ue)}function V(Te){return s(Te).desaturate(100)}function $(Te,Re){Re=Re===0?0:Re||10;var Ue=s(Te).toHsl();return Ue.l+=Re/100,Ue.l=vt(Ue.l),s(Ue)}function ie(Te,Re){Re=Re===0?0:Re||10;var Ue=s(Te).toRgb();return Ue.r=Math.max(0,Math.min(255,Ue.r-Math.round(255*-(Re/100)))),Ue.g=Math.max(0,Math.min(255,Ue.g-Math.round(255*-(Re/100)))),Ue.b=Math.max(0,Math.min(255,Ue.b-Math.round(255*-(Re/100)))),s(Ue)}function ne(Te,Re){Re=Re===0?0:Re||10;var Ue=s(Te).toHsl();return Ue.l-=Re/100,Ue.l=vt(Ue.l),s(Ue)}function q(Te,Re){var Ue=s(Te).toHsl(),nt=(Ue.h+Re)%360;return Ue.h=nt<0?360+nt:nt,s(Ue)}function te(Te){var Re=s(Te).toHsl();return Re.h=(Re.h+180)%360,s(Re)}function G(Te,Re){if(isNaN(Re)||Re<=0)throw new Error("Argument to polyad must be a positive number");for(var Ue=s(Te).toHsl(),nt=[s(Te)],_t=360/Re,gt=1;gt<Re;gt++)nt.push(s({h:(Ue.h+gt*_t)%360,s:Ue.s,l:Ue.l}));return nt}function oe(Te){var Re=s(Te).toHsl(),Ue=Re.h;return[s(Te),s({h:(Ue+72)%360,s:Re.s,l:Re.l}),s({h:(Ue+216)%360,s:Re.s,l:Re.l})]}function fe(Te,Re,Ue){Re=Re||6,Ue=Ue||30;var nt=s(Te).toHsl(),_t=360/Ue,gt=[s(Te)];for(nt.h=(nt.h-(_t*Re>>1)+720)%360;--Re;)nt.h=(nt.h+_t)%360,gt.push(s(nt));return gt}function he(Te,Re){Re=Re||6;for(var Ue=s(Te).toHsv(),nt=Ue.h,_t=Ue.s,gt=Ue.v,Kt=[],$t=1/Re;Re--;)Kt.push(s({h:nt,s:_t,v:gt})),gt=(gt+$t)%1;return Kt}s.mix=function(Te,Re,Ue){Ue=Ue===0?0:Ue||50;var nt=s(Te).toRgb(),_t=s(Re).toRgb(),gt=Ue/100,Kt={r:(_t.r-nt.r)*gt+nt.r,g:(_t.g-nt.g)*gt+nt.g,b:(_t.b-nt.b)*gt+nt.b,a:(_t.a-nt.a)*gt+nt.a};return s(Kt)},s.readability=function(Te,Re){var Ue=s(Te),nt=s(Re);return(Math.max(Ue.getLuminance(),nt.getLuminance())+.05)/(Math.min(Ue.getLuminance(),nt.getLuminance())+.05)},s.isReadable=function(Te,Re,Ue){var nt=s.readability(Te,Re),_t,gt;switch(gt=!1,_t=kt(Ue),_t.level+_t.size){case"AAsmall":case"AAAlarge":gt=nt>=4.5;break;case"AAlarge":gt=nt>=3;break;case"AAAsmall":gt=nt>=7;break}return gt},s.mostReadable=function(Te,Re,Ue){var nt=null,_t=0,gt,Kt,$t,Rt;Ue=Ue||{},Kt=Ue.includeFallbackColors,$t=Ue.level,Rt=Ue.size;for(var _n=0;_n<Re.length;_n++)gt=s.readability(Te,Re[_n]),gt>_t&&(_t=gt,nt=s(Re[_n]));return s.isReadable(Te,nt,{level:$t,size:Rt})||!Kt?nt:(Ue.includeFallbackColors=!1,s.mostReadable(Te,["#fff","#000"],Ue))};var Me=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},me=s.hexNames=pe(Me);function pe(Te){var Re={};for(var Ue in Te)Te.hasOwnProperty(Ue)&&(Re[Te[Ue]]=Ue);return Re}function qe(Te){return Te=parseFloat(Te),(isNaN(Te)||Te<0||Te>1)&&(Te=1),Te}function Se(Te,Re){Ke(Te)&&(Te="100%");var Ue=je(Te);return Te=Math.min(Re,Math.max(0,parseFloat(Te))),Ue&&(Te=parseInt(Te*Re,10)/100),Math.abs(Te-Re)<1e-6?1:Te%Re/parseFloat(Re)}function vt(Te){return Math.min(1,Math.max(0,Te))}function Je(Te){return parseInt(Te,16)}function Ke(Te){return typeof Te=="string"&&Te.indexOf(".")!=-1&&parseFloat(Te)===1}function je(Te){return typeof Te=="string"&&Te.indexOf("%")!=-1}function Pe(Te){return Te.length==1?"0"+Te:""+Te}function Le(Te){return Te<=1&&(Te=Te*100+"%"),Te}function Xe(Te){return Math.round(parseFloat(Te)*255).toString(16)}function Ct(Te){return Je(Te)/255}var Gt=function(){var Te="[-\\+]?\\d+%?",Re="[-\\+]?\\d*\\.\\d+%?",Ue="(?:"+Re+")|(?:"+Te+")",nt="[\\s|\\(]+("+Ue+")[,|\\s]+("+Ue+")[,|\\s]+("+Ue+")\\s*\\)?",_t="[\\s|\\(]+("+Ue+")[,|\\s]+("+Ue+")[,|\\s]+("+Ue+")[,|\\s]+("+Ue+")\\s*\\)?";return{CSS_UNIT:new RegExp(Ue),rgb:new RegExp("rgb"+nt),rgba:new RegExp("rgba"+_t),hsl:new RegExp("hsl"+nt),hsla:new RegExp("hsla"+_t),hsv:new RegExp("hsv"+nt),hsva:new RegExp("hsva"+_t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function mt(Te){return!!Gt.CSS_UNIT.exec(Te)}function Ut(Te){Te=Te.replace(r,"").replace(i,"").toLowerCase();var Re=!1;if(Me[Te])Te=Me[Te],Re=!0;else if(Te=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Ue;return(Ue=Gt.rgb.exec(Te))?{r:Ue[1],g:Ue[2],b:Ue[3]}:(Ue=Gt.rgba.exec(Te))?{r:Ue[1],g:Ue[2],b:Ue[3],a:Ue[4]}:(Ue=Gt.hsl.exec(Te))?{h:Ue[1],s:Ue[2],l:Ue[3]}:(Ue=Gt.hsla.exec(Te))?{h:Ue[1],s:Ue[2],l:Ue[3],a:Ue[4]}:(Ue=Gt.hsv.exec(Te))?{h:Ue[1],s:Ue[2],v:Ue[3]}:(Ue=Gt.hsva.exec(Te))?{h:Ue[1],s:Ue[2],v:Ue[3],a:Ue[4]}:(Ue=Gt.hex8.exec(Te))?{r:Je(Ue[1]),g:Je(Ue[2]),b:Je(Ue[3]),a:Ct(Ue[4]),format:Re?"name":"hex8"}:(Ue=Gt.hex6.exec(Te))?{r:Je(Ue[1]),g:Je(Ue[2]),b:Je(Ue[3]),format:Re?"name":"hex"}:(Ue=Gt.hex4.exec(Te))?{r:Je(Ue[1]+""+Ue[1]),g:Je(Ue[2]+""+Ue[2]),b:Je(Ue[3]+""+Ue[3]),a:Ct(Ue[4]+""+Ue[4]),format:Re?"name":"hex8"}:(Ue=Gt.hex3.exec(Te))?{r:Je(Ue[1]+""+Ue[1]),g:Je(Ue[2]+""+Ue[2]),b:Je(Ue[3]+""+Ue[3]),format:Re?"name":"hex"}:!1}function kt(Te){var Re,Ue;return Te=Te||{level:"AA",size:"small"},Re=(Te.level||"AA").toUpperCase(),Ue=(Te.size||"small").toLowerCase(),Re!=="AA"&&Re!=="AAA"&&(Re="AA"),Ue!=="small"&&Ue!=="large"&&(Ue="small"),{level:Re,size:Ue}}return s})}(Pb)),Pb.exports}var $K;function IN(){if($K)return Uh;$K=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.isvalidColorString=Uh.red=Uh.getContrastingColor=Uh.isValidHex=Uh.toState=Uh.simpleCheckForValidColor=void 0;var n=Pae(),e=i(n),t=Rae(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}Uh.simpleCheckForValidColor=function(o){var p=["r","g","b","a","h","s","l","v"],v=0,x=0;return(0,e.default)(p,function(B){if(o[B]&&(v+=1,isNaN(o[B])||(x+=1),B==="s"||B==="l")){var k=/^\d+%$/;k.test(o[B])&&(x+=1)}}),v===x?o:!1};var s=Uh.toState=function(o,p){var v=o.hex?(0,r.default)(o.hex):(0,r.default)(o),x=v.toHsl(),B=v.toHsv(),k=v.toRgb(),P=v.toHex();x.s===0&&(x.h=p||0,B.h=p||0);var D=P==="000000"&&k.a===0;return{hsl:x,hex:D?"transparent":"#"+P,rgb:k,hsv:B,oldHue:o.h||p||x.h,source:o.source}};return Uh.isValidHex=function(o){if(o==="transparent")return!0;var p=String(o).charAt(0)==="#"?1:0;return o.length!==4+p&&o.length<7+p&&(0,r.default)(o).isValid()},Uh.getContrastingColor=function(o){if(!o)return"#fff";var p=s(o);if(p.hex==="transparent")return"rgba(0,0,0,0.4)";var v=(p.rgb.r*299+p.rgb.g*587+p.rgb.b*114)/1e3;return v>=128?"#000":"#fff"},Uh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Uh.isvalidColorString=function(o,p){var v=o.replace("","");return(0,r.default)(p+" ("+v+")")._ok},Uh}var ZK;function Dae(){if(ZK)return N1;ZK=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ColorWrap=void 0;var n=Object.assign||function(D){for(var N=1;N<arguments.length;N++){var W=arguments[N];for(var V in W)Object.prototype.hasOwnProperty.call(W,V)&&(D[V]=W[V])}return D},e=function(){function D(N,W){for(var V=0;V<W.length;V++){var $=W[V];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}return function(N,W,V){return W&&D(N.prototype,W),V&&D(N,V),N}}(),t=Da(),r=v(t),i=ON(),s=v(i),l=IN(),o=p(l);function p(D){if(D&&D.__esModule)return D;var N={};if(D!=null)for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(N[W]=D[W]);return N.default=D,N}function v(D){return D&&D.__esModule?D:{default:D}}function x(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function B(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:D}function k(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}var P=N1.ColorWrap=function(N){var W=function(V){k($,V);function $(ie){x(this,$);var ne=B(this,($.__proto__||Object.getPrototypeOf($)).call(this));return ne.handleChange=function(q,te){var G=o.simpleCheckForValidColor(q);if(G){var oe=o.toState(q,q.h||ne.state.oldHue);ne.setState(oe),ne.props.onChangeComplete&&ne.debounce(ne.props.onChangeComplete,oe,te),ne.props.onChange&&ne.props.onChange(oe,te)}},ne.handleSwatchHover=function(q,te){var G=o.simpleCheckForValidColor(q);if(G){var oe=o.toState(q,q.h||ne.state.oldHue);ne.props.onSwatchHover&&ne.props.onSwatchHover(oe,te)}},ne.state=n({},o.toState(ie.color,0)),ne.debounce=(0,s.default)(function(q,te,G){q(te,G)},100),ne}return e($,[{key:"render",value:function(){var ne={};return this.props.onSwatchHover&&(ne.onSwatchHover=this.handleSwatchHover),r.default.createElement(N,n({},this.props,this.state,{onChange:this.handleChange},ne))}}],[{key:"getDerivedStateFromProps",value:function(ne,q){return n({},o.toState(ne.color,q.oldHue))}}]),$}(t.PureComponent||t.Component);return W.propTypes=n({},N.propTypes),W.defaultProps=n({},N.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),W};return N1.default=P,N1}var W1={},Mv={},XK;function Fae(){if(XK)return Mv;XK=1,Object.defineProperty(Mv,"__esModule",{value:!0}),Mv.handleFocus=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(p[B]=x[B])}return p},e=function(){function p(v,x){for(var B=0;B<x.length;B++){var k=x[B];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(v,k.key,k)}}return function(v,x,B){return x&&p(v.prototype,x),B&&p(v,B),v}}(),t=Da(),r=i(t);function i(p){return p&&p.__esModule?p:{default:p}}function s(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function l(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function o(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}return Mv.handleFocus=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){o(k,B);function k(){var P,D,N,W;s(this,k);for(var V=arguments.length,$=Array(V),ie=0;ie<V;ie++)$[ie]=arguments[ie];return W=(D=(N=l(this,(P=k.__proto__||Object.getPrototypeOf(k)).call.apply(P,[this].concat($))),N),N.state={focus:!1},N.handleFocus=function(){return N.setState({focus:!0})},N.handleBlur=function(){return N.setState({focus:!1})},D),l(N,W)}return e(k,[{key:"render",value:function(){return r.default.createElement(x,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(v,n({},this.props,this.state)))}}]),k}(r.default.Component)},Mv}var JK;function Lae(){if(JK)return W1;JK=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.Swatch=void 0;var n=Object.assign||function(B){for(var k=1;k<arguments.length;k++){var P=arguments[k];for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(B[D]=P[D])}return B},e=Da(),t=p(e),r=Op(),i=p(r),s=Fae(),l=t8(),o=p(l);function p(B){return B&&B.__esModule?B:{default:B}}var v=13,x=W1.Swatch=function(k){var P=k.color,D=k.style,N=k.onClick,W=N===void 0?function(){}:N,V=k.onHover,$=k.title,ie=$===void 0?P:$,ne=k.children,q=k.focus,te=k.focusStyle,G=te===void 0?{}:te,oe=P==="transparent",fe=(0,i.default)({default:{swatch:n({background:P,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},D,q?G:{})}}),he=function(Se){return W(P,Se)},Me=function(Se){return Se.keyCode===v&&W(P,Se)},me=function(Se){return V(P,Se)},pe={};return V&&(pe.onMouseOver=me),t.default.createElement("div",n({style:fe.swatch,onClick:he,title:ie,tabIndex:0,onKeyDown:Me},pe),ne,oe&&t.default.createElement(o.default,{borderRadius:fe.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return W1.default=(0,s.handleFocus)(x),W1}var eR;function TN(){return eR||(eR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Cae();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return v(e).default}});var t=t8();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return v(t).default}});var r=_ae();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return v(r).default}});var i=xae();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return v(i).default}});var s=Mae();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return v(s).default}});var l=Tae();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return v(l).default}});var o=Dae();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return v(o).default}});var p=Lae();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return v(p).default}});function v(x){return x&&x.__esModule?x:{default:x}}}(BS)),BS}var j1={},FS,tR;function Uae(){if(tR)return FS;tR=1;function n(e){return e===void 0}return FS=n,FS}var gb={},nR;function zae(){if(nR)return gb;nR=1,Object.defineProperty(gb,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var p=arguments[o];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(l[v]=p[v])}return l},e=Da(),t=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,o){var p={};for(var v in l)o.indexOf(v)>=0||Object.prototype.hasOwnProperty.call(l,v)&&(p[v]=l[v]);return p}var s=24;return gb.default=function(l){var o=l.fill,p=o===void 0?"currentColor":o,v=l.width,x=v===void 0?s:v,B=l.height,k=B===void 0?s:B,P=l.style,D=P===void 0?{}:P,N=i(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:p,width:x,height:k},D)},N),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},gb}var rR;function Nae(){if(rR)return j1;rR=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ChromeFields=void 0;var n=function(){function $(ie,ne){for(var q=0;q<ne.length;q++){var te=ne[q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}return function(ie,ne,q){return ne&&$(ie.prototype,ne),q&&$(ie,q),ie}}(),e=Da(),t=P(e),r=Op(),i=P(r),s=IN(),l=k(s),o=Uae(),p=P(o),v=TN(),x=zae(),B=P(x);function k($){if($&&$.__esModule)return $;var ie={};if($!=null)for(var ne in $)Object.prototype.hasOwnProperty.call($,ne)&&(ie[ne]=$[ne]);return ie.default=$,ie}function P($){return $&&$.__esModule?$:{default:$}}function D($,ie){if(!($ instanceof ie))throw new TypeError("Cannot call a class as a function")}function N($,ie){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:$}function W($,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);$.prototype=Object.create(ie&&ie.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf($,ie):$.__proto__=ie)}var V=j1.ChromeFields=function($){W(ie,$);function ie(ne){D(this,ie);var q=N(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return q.toggleViews=function(){q.state.view==="hex"?q.setState({view:"rgb"}):q.state.view==="rgb"?q.setState({view:"hsl"}):q.state.view==="hsl"&&(q.props.hsl.a===1?q.setState({view:"hex"}):q.setState({view:"rgb"}))},q.handleChange=function(te,G){te.hex?l.isValidHex(te.hex)&&q.props.onChange({hex:te.hex,source:"hex"},G):te.r||te.g||te.b?q.props.onChange({r:te.r||q.props.rgb.r,g:te.g||q.props.rgb.g,b:te.b||q.props.rgb.b,source:"rgb"},G):te.a?(te.a<0?te.a=0:te.a>1&&(te.a=1),q.props.onChange({h:q.props.hsl.h,s:q.props.hsl.s,l:q.props.hsl.l,a:Math.round(te.a*100)/100,source:"rgb"},G)):(te.h||te.s||te.l)&&(typeof te.s=="string"&&te.s.includes("%")&&(te.s=te.s.replace("%","")),typeof te.l=="string"&&te.l.includes("%")&&(te.l=te.l.replace("%","")),te.s==1?te.s=.01:te.l==1&&(te.l=.01),q.props.onChange({h:te.h||q.props.hsl.h,s:Number((0,p.default)(te.s)?q.props.hsl.s:te.s),l:Number((0,p.default)(te.l)?q.props.hsl.l:te.l),source:"hsl"},G))},q.showHighlight=function(te){te.currentTarget.style.background="#eee"},q.hideHighlight=function(te){te.currentTarget.style.background="transparent"},ne.hsl.a!==1&&ne.view==="hex"?q.state={view:"rgb"}:q.state={view:ne.view},q}return n(ie,[{key:"render",value:function(){var q=this,te=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(v.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:te.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:te.toggle},t.default.createElement("div",{style:te.icon,onClick:this.toggleViews,ref:function(fe){return q.icon=fe}},t.default.createElement(B.default,{style:te.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(q,te){return q.hsl.a!==1&&te.view==="hex"?{view:"rgb"}:null}}]),ie}(t.default.Component);return V.defaultProps={view:"hex"},j1.default=V,j1}var G1={},iR;function Wae(){if(iR)return G1;iR=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.ChromePointer=void 0;var n=Da(),e=i(n),t=Op(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=G1.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return G1.default=s,G1}var Q1={},oR;function jae(){if(oR)return Q1;oR=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.ChromePointerCircle=void 0;var n=Da(),e=i(n),t=Op(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=Q1.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return Q1.default=s,Q1}var sR;function Gae(){if(sR)return O1;sR=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.Chrome=void 0;var n=Da(),e=N(n),t=wp(),r=N(t),i=Op(),s=N(i),l=BN(),o=N(l),p=TN(),v=Nae(),x=N(v),B=Wae(),k=N(B),P=jae(),D=N(P);function N(V){return V&&V.__esModule?V:{default:V}}var W=O1.Chrome=function($){var ie=$.width,ne=$.onChange,q=$.disableAlpha,te=$.rgb,G=$.hsl,oe=$.hsv,fe=$.hex,he=$.renderers,Me=$.styles,me=Me===void 0?{}:Me,pe=$.className,qe=pe===void 0?"":pe,Se=$.defaultView,vt=(0,s.default)((0,o.default)({default:{picker:{width:ie,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+te.r+", "+te.g+", "+te.b+", "+te.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},me),{disableAlpha:q});return e.default.createElement("div",{style:vt.picker,className:"chrome-picker "+qe},e.default.createElement("div",{style:vt.saturation},e.default.createElement(p.Saturation,{style:vt.Saturation,hsl:G,hsv:oe,pointer:D.default,onChange:ne})),e.default.createElement("div",{style:vt.body},e.default.createElement("div",{style:vt.controls,className:"flexbox-fix"},e.default.createElement("div",{style:vt.color},e.default.createElement("div",{style:vt.swatch},e.default.createElement("div",{style:vt.active}),e.default.createElement(p.Checkboard,{renderers:he}))),e.default.createElement("div",{style:vt.toggles},e.default.createElement("div",{style:vt.hue},e.default.createElement(p.Hue,{style:vt.Hue,hsl:G,pointer:k.default,onChange:ne})),e.default.createElement("div",{style:vt.alpha},e.default.createElement(p.Alpha,{style:vt.Alpha,rgb:te,hsl:G,pointer:k.default,renderers:he,onChange:ne})))),e.default.createElement(x.default,{rgb:te,hsl:G,hex:fe,view:Se,onChange:ne,disableAlpha:q})))};return W.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},W.defaultProps={width:225,disableAlpha:!1,styles:{}},O1.default=(0,p.ColorWrap)(W),O1}var Qae=Gae();const Yae=dl(Qae);function so(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return so=function(){return l},l}so();function qae(n){so().f[0]++;const e=(so().s[0]++,n.rgb);return so().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class kN extends Zn.Component{constructor(t){so().f[1]++,so().s[4]++;super(t);Pn(this,"state",(so().s[2]++,{pickerOpened:!1}));Pn(this,"colorInput",(so().s[3]++,null));Pn(this,"calcPickerOffset",(so().s[7]++,()=>{so().f[3]++;const t=(so().s[8]++,this.colorInput);if(so().s[9]++,t){so().b[0][0]++;const r=(so().s[10]++,t.getBoundingClientRect());return so().s[11]++,{top:r.top,left:r.left+196}}else return so().b[0][1]++,so().s[12]++,{top:160,left:555}}));Pn(this,"togglePicker",(so().s[13]++,()=>{so().f[4]++,so().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));so().s[5]++,this.onChangeNoCheck=zE.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){so().f[2]++,so().s[6]++,this.props.onChange(t)}get color(){so().f[5]++,so().s[15]++;try{return so().s[16]++,Fu(this.props.value).rgb()}catch(t){return so().s[17]++,console.warn("Error parsing color: ",t),so().s[18]++,Fu("rgb(255,255,255)")}}onChange(t){so().f[6]++,so().s[19]++,this.props.onChange(t===""?(so().b[1][0]++,void 0):(so().b[1][1]++,t))}render(){so().f[7]++;const t=(so().s[20]++,this.calcPickerOffset()),r=(so().s[21]++,this.color.object()),i=(so().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(so().s[23]++,Ae.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[Ae.jsx(Yae,{color:i,onChange:o=>(so().f[8]++,so().s[24]++,this.onChangeNoCheck(qae(o)))}),Ae.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),l=(so().s[25]++,{backgroundColor:this.props.value});return so().s[26]++,Ae.jsxs("div",{className:"maputnik-color-wrapper",children:[(so().b[2][0]++,this.state.pickerOpened&&(so().b[2][1]++,s)),Ae.jsx("div",{className:"maputnik-color-swatch",style:l}),Ae.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(so().f[9]++,so().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(so().b[3][0]++,this.props.value):(so().b[3][1]++,""),onChange:o=>(so().f[10]++,so().s[28]++,this.onChange(o.target.value))})]})}}function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gn=function(){return l},l}gn();class Am extends Zn.Component{constructor(t){gn().f[0]++,gn().s[2]++;super(t);Pn(this,"_keyboardEvent",(gn().s[1]++,!1));Pn(this,"resetValue",(gn().s[26]++,()=>{if(gn().f[4]++,gn().s[27]++,this.setState({editing:!1}),gn().s[28]++,this.state.value)gn().b[16][1]++;else{gn().b[16][0]++,gn().s[29]++;return}gn().s[30]++,this.isValid(this.state.value)?gn().b[17][1]++:(gn().b[17][0]++,gn().s[31]++,this.isValid(this.props.value)?(gn().b[18][0]++,gn().s[32]++,this.changeValue(this.props.value),gn().s[33]++,this.setState({dirtyValue:this.props.value})):(gn().b[18][1]++,gn().s[34]++,this.changeValue(void 0),gn().s[35]++,this.setState({dirtyValue:void 0})))}));Pn(this,"onChangeRange",(gn().s[36]++,t=>{gn().f[5]++;let r=(gn().s[37]++,parseFloat(t.target.value));const i=(gn().s[38]++,this.props.rangeStep);let s=(gn().s[39]++,r);if(gn().s[40]++,i){gn().b[19][0]++;const l=(gn().s[41]++,r%i);gn().s[42]++,this._keyboardEvent?(gn().b[20][0]++,gn().s[43]++,r<+this.state.dirtyValue?(gn().b[21][0]++,gn().s[44]++,r=this.state.value-i):(gn().b[21][1]++,gn().s[45]++,r=this.state.value+i),gn().s[46]++,s=r):(gn().b[20][1]++,gn().s[47]++,l<i/2?(gn().b[22][0]++,gn().s[48]++,r=r-l):(gn().b[22][1]++,gn().s[49]++,r=r+(i-l)))}else gn().b[19][1]++;gn().s[50]++,this._keyboardEvent=!1,gn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),gn().s[52]++,this.setState({value:r,dirtyValue:s}),gn().s[53]++,this.props.onChange?(gn().b[23][0]++,gn().s[54]++,this.props.onChange(r)):gn().b[23][1]++}));gn().s[3]++,this.state={uuid:+Py(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return gn().f[1]++,gn().s[4]++,gn().b[1][0]++,!r.editing&&(gn().b[1][1]++,t.value!==r.value)?(gn().b[0][0]++,gn().s[5]++,{value:t.value,dirtyValue:t.value}):(gn().b[0][1]++,gn().s[6]++,null)}changeValue(t){gn().f[2]++;const r=(gn().s[7]++,gn().b[3][0]++,t===""||(gn().b[3][1]++,t===void 0)?(gn().b[2][0]++,void 0):(gn().b[2][1]++,+t)),i=(gn().s[8]++,this.props.value!==r);gn().s[9]++,gn().b[5][0]++,this.isValid(r)&&(gn().b[5][1]++,i)?(gn().b[4][0]++,gn().s[10]++,this.props.onChange?(gn().b[6][0]++,gn().s[11]++,this.props.onChange(r)):gn().b[6][1]++,gn().s[12]++,this.setState({value:r})):(gn().b[4][1]++,gn().s[13]++,gn().b[8][0]++,!this.isValid(r)&&(gn().b[8][1]++,i)?(gn().b[7][0]++,gn().s[14]++,this.setState({value:void 0})):gn().b[7][1]++),gn().s[15]++,this.setState({dirtyValue:t===""?(gn().b[9][0]++,void 0):(gn().b[9][1]++,t)})}isValid(t){if(gn().f[3]++,gn().s[16]++,t===void 0)return gn().b[10][0]++,gn().s[17]++,!0;gn().b[10][1]++;const r=(gn().s[18]++,+t);return gn().s[19]++,isNaN(r)?(gn().b[11][0]++,gn().s[20]++,!1):(gn().b[11][1]++,gn().s[21]++,gn().b[13][0]++,!isNaN(this.props.min)&&(gn().b[13][1]++,r<this.props.min)?(gn().b[12][0]++,gn().s[22]++,!1):(gn().b[12][1]++,gn().s[23]++,gn().b[15][0]++,!isNaN(this.props.max)&&(gn().b[15][1]++,r>this.props.max)?(gn().b[14][0]++,gn().s[24]++,!1):(gn().b[14][1]++,gn().s[25]++,!0)))}render(){var t,r;if(gn().f[6]++,gn().s[55]++,gn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(gn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(gn().b[25][2]++,this.props.min!==void 0)&&(gn().b[25][3]++,this.props.max!==void 0)&&(gn().b[25][4]++,this.props.allowRange)){gn().b[24][0]++;const i=(gn().s[56]++,this.state.editing?(gn().b[26][0]++,this.state.dirtyValue):(gn().b[26][1]++,this.state.value)),s=(gn().s[57]++,this.props.default===void 0?(gn().b[27][0]++,""):(gn().b[27][1]++,this.props.default));let l;return gn().s[58]++,this.state.editingRange?(gn().b[28][0]++,gn().s[59]++,l=this.state.value):(gn().b[28][1]++,gn().s[60]++,l=i),gn().s[61]++,Ae.jsxs("div",{className:"maputnik-number-container",children:[Ae.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(gn().b[29][0]++,s):(gn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{gn().f[7]++,gn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{gn().f[8]++,gn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{gn().f[9]++,gn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{gn().f[10]++,gn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),Ae.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:l===void 0?(gn().b[30][0]++,""):(gn().b[30][1]++,l),onFocus:o=>{gn().f[11]++,gn().s[66]++,this.setState({editing:!0})},onChange:o=>{gn().f[12]++,gn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{gn().f[13]++,gn().s[68]++,this.setState({editing:!1}),gn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{gn().b[24][1]++;const i=(gn().s[70]++,this.state.editing?(gn().b[31][0]++,this.state.dirtyValue):(gn().b[31][1]++,this.state.value));return gn().s[71]++,Ae.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(gn().b[32][0]++,""):(gn().b[32][1]++,i),onChange:s=>(gn().f[14]++,gn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{gn().f[15]++,gn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}Pn(Am,"defaultProps",(gn().s[0]++,{rangeStep:1}));function jp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return jp=function(){return l},l}jp();class n8 extends Zn.Component{constructor(){super(...arguments);Pn(this,"onChange",(jp().s[1]++,()=>{jp().f[0]++,jp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return jp().f[1]++,jp().s[3]++,Ae.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[Ae.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),Ae.jsx("div",{className:"maputnik-checkbox-box",children:Ae.jsx("svg",{style:{display:this.props.value?(jp().b[0][0]++,"inline"):(jp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:Ae.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}Pn(n8,"defaultProps",(jp().s[0]++,{value:!1}));function qr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return qr=function(){return l},l}qr();var RE;let PN=(RE=class extends Zn.Component{constructor(e){qr().f[0]++,qr().s[1]++,super(e),qr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){qr().f[1]++;const r=(qr().s[3]++,[]),i=(qr().s[4]++,t.initialPropsValue.slice(0));return qr().s[5]++,Array(e.length).fill(null).map((s,l)=>{qr().f[2]++,qr().s[6]++,e.value[l]===t.initialPropsValue[l]?(qr().b[0][0]++,qr().s[7]++,r[l]=t.value[l]):(qr().b[0][1]++,qr().s[8]++,r[l]=t.value[l],qr().s[9]++,i[l]=t.value[l])}),qr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return qr().f[3]++,qr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{qr().f[4]++;const i=(qr().s[12]++,e[r]);return qr().s[13]++,qr().b[1][0]++,!(i===void 0||(qr().b[1][1]++,i===""))})}changeValue(e,t){qr().f[5]++;const r=(qr().s[14]++,this.state.value.slice(0));qr().s[15]++,r[e]=t,qr().s[16]++,this.setState({value:r},()=>{qr().f[6]++,qr().s[17]++,qr().b[3][0]++,this.isComplete(r)&&(qr().b[3][1]++,this.props.onChange)?(qr().b[2][0]++,qr().s[18]++,this.props.onChange(r)):(qr().b[2][1]++,qr().s[19]++,this.props.onChange?(qr().b[4][0]++,qr().s[20]++,this.props.onChange(void 0)):qr().b[4][1]++)})}render(){qr().f[7]++;const{value:e}=(qr().s[21]++,this.state),t=(qr().s[22]++,qr().b[5][0]++,e.length>0&&(qr().b[5][1]++,!e.every(i=>(qr().f[8]++,qr().s[23]++,qr().b[6][0]++,i===""||(qr().b[6][1]++,i===void 0))))),r=(qr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(qr().f[9]++,qr().s[25]++,this.props.type==="number"?(qr().b[7][0]++,qr().s[26]++,Ae.jsx(Am,{default:(qr().b[9][0]++,t||(qr().b[9][1]++,!this.props.default)?(qr().b[8][0]++,void 0):(qr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(qr().b[10][0]++,!0):(qr().b[10][1]++,!1),onChange:l=>(qr().f[10]++,qr().s[27]++,this.changeValue(s,l)),"aria-label":(qr().b[11][0]++,this.props["aria-label"]||(qr().b[11][1]++,this.props.label))},s)):(qr().b[7][1]++,qr().s[28]++,Ae.jsx(zf,{default:(qr().b[13][0]++,t||(qr().b[13][1]++,!this.props.default)?(qr().b[12][0]++,void 0):(qr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(qr().b[14][0]++,!0):(qr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(qr().b[15][0]++,this.props["aria-label"]||(qr().b[15][1]++,this.props.label))},s)))));return qr().s[29]++,Ae.jsx("div",{className:"maputnik-array",children:r})}},Pn(RE,"defaultProps",(qr().s[0]++,{value:[],default:[]})),RE);function mu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mu=function(){return l},l}mu();class Vae extends Zn.Component{render(){mu().f[0]++;let e=(mu().s[0]++,this.props.options);mu().s[1]++,mu().b[1][0]++,e.length>0&&(mu().b[1][1]++,!Array.isArray(e[0]))?(mu().b[0][0]++,mu().s[2]++,e=e.map(i=>(mu().f[1]++,mu().s[3]++,[i,i]))):mu().b[0][1]++;const t=(mu().s[4]++,mu().b[2][0]++,this.props.value||(mu().b[2][1]++,e[0][0])),r=(mu().s[5]++,e.map(([i,s])=>(mu().f[2]++,mu().s[6]++,Ae.jsxs("label",{className:am("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[Ae.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(mu().f[3]++,mu().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return mu().s[8]++,Ae.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Fl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fl=function(){return l},l}Fl();function Hae(n){Fl().f[0]++;let e=(Fl().s[0]++,0);return Fl().s[1]++,n.forEach(([t,r])=>{Fl().f[1]++,Fl().s[2]++,e+=r.length}),Fl().s[3]++,e}class r8 extends Zn.Component{render(){Fl().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Fl().s[4]++,this.props);return Fl().s[5]++,Fl().b[1][0]++,e.length<=3&&(Fl().b[1][1]++,Hae(e)<=20)?(Fl().b[0][0]++,Fl().s[6]++,Ae.jsx(Vae,{name:i,options:e,value:(Fl().b[2][0]++,t||(Fl().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Fl().b[3][0]++,this.props["aria-label"]||(Fl().b[3][1]++,s))})):(Fl().b[0][1]++,Fl().s[7]++,Ae.jsx(Qg,{options:e,value:(Fl().b[4][0]++,t||(Fl().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Fl().b[5][0]++,this.props["aria-label"]||(Fl().b[5][1]++,s))}))}}function my(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return my=function(){return l},l}my();class $ae extends Zn.Component{render(){my().f[0]++;const e=(my().s[0]++,this.props.t);return my().s[1]++,Ae.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const LS=(my().s[2]++,Ns()($ae));function ao(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ao=function(){return l},l}ao();function US(n,e){if(ao().f[0]++,ao().s[0]++,n===""){ao().b[0][0]++,ao().s[1]++;return}else ao().b[0][1]++;let t;ao().s[2]++;const r=l=>{ao().f[1]++,ao().s[3]++;try{const o=(ao().s[4]++,new URL(l));return ao().s[5]++,o.protocol}catch{ao().s[6]++;return}},i=(ao().s[7]++,r(n)),s=(ao().s[8]++,window.location.protocol==="https:");return ao().s[9]++,i?(ao().b[1][1]++,ao().s[13]++,ao().b[4][0]++,i&&(ao().b[4][1]++,i==="http:")&&(ao().b[4][2]++,window.location.protocol==="https:")?(ao().b[3][0]++,ao().s[14]++,t=Ae.jsx(LS,{children:Ae.jsxs(R0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",Ae.jsx("code",{children:"https://"})," domain"]})})):ao().b[3][1]++):(ao().b[1][0]++,ao().s[10]++,s?(ao().b[2][0]++,ao().s[11]++,t=Ae.jsx(LS,{children:Ae.jsxs(R0,{t:e,children:["Must provide protocol: ",Ae.jsx("code",{children:"https://"})]})})):(ao().b[2][1]++,ao().s[12]++,t=Ae.jsx(LS,{children:Ae.jsxs(R0,{t:e,children:["Must provide protocol: ",Ae.jsx("code",{children:"http://"})," or ",Ae.jsx("code",{children:"https://"})]})}))),ao().s[15]++,t}class KN extends Zn.Component{constructor(t){ao().f[3]++,ao().s[17]++;super(t);Pn(this,"onInput",(ao().s[19]++,t=>{ao().f[4]++,ao().s[20]++,this.setState({error:US(t,this.props.t)}),ao().s[21]++,this.props.onInput?(ao().b[5][0]++,ao().s[22]++,this.props.onInput(t)):ao().b[5][1]++}));Pn(this,"onChange",(ao().s[23]++,t=>{ao().f[5]++,ao().s[24]++,this.setState({error:US(t,this.props.t)}),ao().s[25]++,this.props.onChange(t)}));ao().s[18]++,this.state={error:US(t.value,t.t)}}render(){return ao().f[6]++,ao().s[26]++,Ae.jsxs("div",{children:[Ae.jsx(zf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}Pn(KN,"defaultProps",(ao().s[16]++,{onInput:()=>{ao().f[2]++}}));const i8=(ao().s[27]++,Ns()(KN));function Dr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dr=function(){return l},l}Dr();class Zae extends Zn.Component{constructor(){super(...arguments);Pn(this,"addValue",(Dr().s[5]++,()=>{Dr().f[2]++;const t=(Dr().s[6]++,this.values.slice(0));if(Dr().s[7]++,this.props.type==="number")Dr().b[2][0]++,Dr().s[8]++,t.push(0);else if(Dr().b[2][1]++,Dr().s[9]++,this.props.type==="url")Dr().b[3][0]++,Dr().s[10]++,t.push("");else if(Dr().b[3][1]++,Dr().s[11]++,this.props.type==="enum"){Dr().b[4][0]++;const{fieldSpec:r}=(Dr().s[12]++,this.props),i=(Dr().s[13]++,Object.keys(r.values)[0]);Dr().s[14]++,t.push(i)}else Dr().b[4][1]++,Dr().s[15]++,t.push("");Dr().s[16]++,this.props.onChange?(Dr().b[5][0]++,Dr().s[17]++,this.props.onChange(t)):Dr().b[5][1]++}))}changeValue(t,r){Dr().f[0]++;const i=(Dr().s[0]++,this.values.slice(0));Dr().s[1]++,i[t]=r,Dr().s[2]++,this.props.onChange?(Dr().b[0][0]++,Dr().s[3]++,this.props.onChange(i)):Dr().b[0][1]++}get values(){return Dr().f[1]++,Dr().s[4]++,Dr().b[1][0]++,this.props.value||(Dr().b[1][1]++,this.props.default)||(Dr().b[1][2]++,[])}deleteValue(t){Dr().f[3]++;const r=(Dr().s[18]++,this.values.slice(0));Dr().s[19]++,r.splice(t,1),Dr().s[20]++,this.props.onChange?(Dr().b[6][0]++,Dr().s[21]++,this.props.onChange(r.length>0?(Dr().b[7][0]++,r):(Dr().b[7][1]++,void 0))):Dr().b[6][1]++}render(){Dr().f[4]++;const t=(Dr().s[22]++,this.props.t),r=(Dr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Dr().s[24]++,this.values.map((s,l)=>{var v;Dr().f[5]++;const o=(Dr().s[25]++,Ae.jsx(Xae,{onClick:this.deleteValue.bind(this,l),...r}));let p;if(Dr().s[26]++,this.props.type==="url")Dr().b[8][0]++,Dr().s[27]++,p=Ae.jsx(i8,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Dr().b[9][0]++,this.props["aria-label"]||(Dr().b[9][1]++,this.props.label))});else if(Dr().b[8][1]++,Dr().s[28]++,this.props.type==="number")Dr().b[10][0]++,Dr().s[29]++,p=Ae.jsx(Am,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Dr().b[11][0]++,this.props["aria-label"]||(Dr().b[11][1]++,this.props.label))});else if(Dr().b[10][1]++,Dr().s[30]++,this.props.type==="enum"){Dr().b[12][0]++;const x=(Dr().s[31]++,Object.keys((v=this.props.fieldSpec)==null?void 0:v.values).map(B=>(Dr().f[6]++,Dr().s[32]++,[B,LO(B)])));Dr().s[33]++,p=Ae.jsx(r8,{options:x,value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Dr().b[13][0]++,this.props["aria-label"]||(Dr().b[13][1]++,this.props.label))})}else Dr().b[12][1]++,Dr().s[34]++,p=Ae.jsx(zf,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Dr().b[14][0]++,this.props["aria-label"]||(Dr().b[14][1]++,this.props.label))});return Dr().s[35]++,Ae.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[Ae.jsx("div",{className:"maputnik-array-block-action",children:o}),Ae.jsx("div",{className:"maputnik-array-block-content",children:p})]},l)}));return Dr().s[36]++,Ae.jsxs("div",{className:"maputnik-array",children:[i,Ae.jsx(Xa,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const RN=(Dr().s[37]++,Ns()(Zae));class Xae extends Zn.Component{render(){Dr().f[7]++;const e=(Dr().s[38]++,this.props.t);return Dr().s[39]++,Ae.jsx(Xa,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:Ae.jsx(TO,{label:Ae.jsx(Uy,{})})})}}function ha(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ha=function(){return l},l}ha();class DN extends Zn.Component{get values(){ha().f[0]++;const e=(ha().s[1]++,ha().b[0][0]++,this.props.value||(ha().b[0][1]++,this.props.default)||(ha().b[0][2]++,[]));return ha().s[2]++,e[e.length-1]!==""?(ha().b[1][0]++,ha().s[3]++,e.concat("")):(ha().b[1][1]++,ha().s[4]++,e)}changeFont(e,t){ha().f[1]++;const r=(ha().s[5]++,this.values.slice(0));ha().s[6]++,r[e]=t;const i=(ha().s[7]++,r.filter(s=>(ha().f[2]++,ha().s[8]++,s!==void 0)).filter(s=>(ha().f[3]++,ha().s[9]++,s!=="")));ha().s[10]++,this.props.onChange(i)}render(){ha().f[4]++;const e=(ha().s[11]++,this.values.map((t,r)=>{var i;return ha().f[5]++,ha().s[12]++,Ae.jsx("li",{children:Ae.jsx(Qy,{"aria-label":(ha().b[2][0]++,this.props["aria-label"]||(ha().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(ha().f[6]++,ha().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return ha().s[14]++,Ae.jsx("ul",{className:"maputnik-font",children:e})}}Pn(DN,"defaultProps",(ha().s[0]++,{fonts:[]}));function ho(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ho=function(){return l},l}ho();const Jae=(ho().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let gy=class extends Zn.Component{childNodes(){var t,r;ho().f[0]++;const e=(ho().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(ho().f[1]++,ho().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(ho().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return ho().b[0][0]++,ho().s[4]++,Ae.jsx(Am,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":ho().b[0][1]++;{const i=(ho().s[5]++,Object.keys((ho().b[1][0]++,this.props.fieldSpec.values||(ho().b[1][1]++,[]))).map(s=>(ho().f[2]++,ho().s[6]++,[s,LO(s)])));return ho().s[7]++,Ae.jsx(r8,{...e,options:i})}case"resolvedImage":ho().b[0][2]++;case"formatted":ho().b[0][3]++;case"string":if(ho().b[0][4]++,ho().s[8]++,Jae.indexOf(this.props.fieldName)>=0){ho().b[2][0]++;const i=(ho().s[9]++,ho().b[3][0]++,this.props.fieldSpec.values||(ho().b[3][1]++,[]));return ho().s[10]++,Ae.jsx(Qy,{...e,options:i.map(s=>(ho().f[3]++,ho().s[11]++,[s,s]))})}else return ho().b[2][1]++,ho().s[12]++,Ae.jsx(zf,{...e});case"color":return ho().b[0][5]++,ho().s[13]++,Ae.jsx(kN,{...e});case"boolean":return ho().b[0][6]++,ho().s[14]++,Ae.jsx(n8,{...e});case"array":return ho().b[0][7]++,ho().s[15]++,this.props.fieldName==="text-font"?(ho().b[4][0]++,ho().s[16]++,Ae.jsx(DN,{...e,fonts:this.props.fieldSpec.values})):(ho().b[4][1]++,ho().s[17]++,this.props.fieldSpec.length?(ho().b[5][0]++,ho().s[18]++,Ae.jsx(PN,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(ho().b[5][1]++,ho().s[19]++,Ae.jsx(RN,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return ho().b[0][8]++,ho().s[20]++,null}}render(){return ho().f[4]++,ho().s[21]++,Ae.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function tc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return tc=function(){return l},l}tc();class PC extends Zn.Component{constructor(t){tc().f[0]++,tc().s[0]++;super(t);Pn(this,"_labelId");Pn(this,"onToggleDoc",(tc().s[3]++,t=>{tc().f[1]++,tc().s[4]++,this.setState({showDoc:t})}));tc().s[1]++,this._labelId=Py("fieldset_label_"),tc().s[2]++,this.state={showDoc:!1}}render(){return tc().f[2]++,tc().s[5]++,Ae.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(tc().b[0][0]++,this.props.fieldSpec&&(tc().b[0][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:Ae.jsx(TO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(tc().b[1][0]++,!this.props.fieldSpec&&(tc().b[1][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),Ae.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),Ae.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(tc().b[2][0]++,this.props.fieldSpec&&(tc().b[2][1]++,Ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(tc().b[3][0]++,""):(tc().b[3][1]++,"none")},children:Ae.jsx(kO,{fieldSpec:this.props.fieldSpec})})))]})}}function $s(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $s=function(){return l},l}$s();const ele=($s().s[0]++,{color:()=>($s().f[0]++,$s().s[1]++,fa),enum:({fieldSpec:n})=>($s().f[1]++,$s().s[2]++,Object.keys(n.values).length<=3?($s().b[0][0]++,PC):($s().b[0][1]++,fa)),boolean:()=>($s().f[2]++,$s().s[3]++,fa),array:()=>($s().f[3]++,$s().s[4]++,PC),resolvedImage:()=>($s().f[4]++,$s().s[5]++,fa),number:()=>($s().f[5]++,$s().s[6]++,fa),string:()=>($s().f[6]++,$s().s[7]++,fa),formatted:()=>($s().f[7]++,$s().s[8]++,fa),padding:()=>($s().f[8]++,$s().s[9]++,fa)});class tle extends Zn.Component{render(){var i;$s().f[9]++;const e=($s().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=($s().s[11]++,ele[e]);let r;return $s().s[12]++,t?($s().b[1][0]++,$s().s[13]++,r=t(this.props)):($s().b[1][1]++,$s().s[14]++,console.warn("No such type for '%s'",e),$s().s[15]++,r=fa),$s().s[16]++,Ae.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:Ae.jsx(gy,{...this.props})})}}function dh(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dh=function(){return l},l}dh();class nle extends Zn.Component{render(){dh().f[0]++;const e=(dh().s[0]++,this.props.t);let t,r,i;return dh().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(dh().b[0][0]++,dh().s[2]++,i=Ae.jsx(Xa,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:kC})})}),dh().s[3]++,t=Ae.jsx(Xa,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:Ae.jsx(sH,{})}),dh().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(dh().b[1][0]++,dh().s[5]++,r=Ae.jsx(Xa,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:Ae.jsx(aH,{})})):dh().b[1][1]++,dh().s[6]++,Ae.jsxs("div",{children:[i,r,t]})):(dh().b[0][1]++,dh().s[7]++,Ae.jsx("div",{children:i}))}}const rle=(dh().s[8]++,Ns()(nle));function Gp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gp=function(){return l},l}Gp();class FN extends Zn.Component{render(){Gp().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Gp().s[1]++,this.props),i=(Gp().s[2]++,Ae.jsx(rle,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Gp().s[3]++,e[r+"."+t]);return Gp().s[4]++,Ae.jsx(tle,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:Hx((Gp().b[0][0]++,this.props.fieldName||(Gp().b[0][1]++,""))),action:i})}}Pn(FN,"defaultProps",(Gp().s[0]++,{errors:{}}));function hd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hd=function(){return l},l}hd();function LN(n,e){hd().f[0]++;const t=(hd().s[0]++,+n),r=(hd().s[1]++,+e);return hd().s[2]++,t<r?(hd().b[0][0]++,hd().s[3]++,-1):(hd().b[0][1]++,hd().s[4]++,t>r?(hd().b[1][0]++,hd().s[5]++,1):(hd().b[1][1]++,hd().s[6]++,0))}function up(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return up=function(){return l},l}up();function Bf(n){if(up().f[0]++,up().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return up().b[0][0]++,up().s[1]++,n.default;up().b[0][1]++;const e=(up().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return up().s[3]++,up().b[1][0]++,e[n.type]||(up().b[1][1]++,"")}function yy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yy=function(){return l},l}yy();class ile extends Zn.Component{render(){yy().f[0]++;const e=(yy().s[0]++,this.props.t);return yy().s[1]++,Ae.jsx(Xa,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:Ae.jsx(Uy,{})})}}const UN=(yy().s[2]++,Ns()(ile));function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mn=function(){return l},l}mn();function aR(n,e){mn().f[0]++;let t;return mn().s[0]++,mn().b[1][0]++,n.value&&(mn().b[1][1]++,n.value.stops)?(mn().b[0][0]++,mn().s[1]++,n.value.stops.forEach((r,i)=>{mn().f[1]++,mn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?mn().b[2][1]++:(mn().b[2][0]++,mn().s[3]++,t?mn().b[3][1]++:(mn().b[3][0]++,mn().s[4]++,t={...e}),mn().s[5]++,t[i]=Py("stop-"))})):mn().b[0][1]++,mn().s[6]++,t}class ole extends Zn.Component{constructor(){super(...arguments);Pn(this,"state",(mn().s[7]++,{refs:{}}));Pn(this,"onChange",(mn().s[32]++,(t,r)=>{if(mn().f[11]++,mn().s[33]++,r.type==="identity")mn().b[9][0]++,mn().s[34]++,r={type:r.type,property:r.property};else{mn().b[9][1]++;const i=(mn().s[35]++,r.type==="categorical"?(mn().b[10][0]++,""):(mn().b[10][1]++,0));mn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},Bf(this.props.fieldSpec)],[{zoom:10,value:i},Bf(this.props.fieldSpec)]],...r}}mn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){mn().f[2]++;const t=(mn().s[8]++,aR(this.props,this.state));mn().s[9]++,t?(mn().b[4][0]++,mn().s[10]++,this.setState({refs:t})):mn().b[4][1]++}static getDerivedStateFromProps(t,r){mn().f[3]++;const i=(mn().s[11]++,aR(t,r));return mn().s[12]++,i?(mn().b[5][0]++,mn().s[13]++,{refs:i}):(mn().b[5][1]++,mn().s[14]++,null)}getFieldFunctionType(t){return mn().f[4]++,mn().s[15]++,t.expression.interpolated?(mn().b[6][0]++,mn().s[16]++,"exponential"):(mn().b[6][1]++,mn().s[17]++,t.type==="number"?(mn().b[7][0]++,mn().s[18]++,"interval"):(mn().b[7][1]++,mn().s[19]++,"categorical"))}getDataFunctionTypes(t){return mn().f[5]++,mn().s[20]++,t.expression.interpolated?(mn().b[8][0]++,mn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(mn().b[8][1]++,mn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){mn().f[6]++;const r=(mn().s[23]++,t.map((s,l)=>(mn().f[7]++,mn().s[24]++,{ref:this.state.refs[l],data:s})).sort((s,l)=>(mn().f[8]++,mn().s[25]++,LN(s.data[0].zoom,l.data[0].zoom)))),i=(mn().s[26]++,{});return mn().s[27]++,r.forEach((s,l)=>{mn().f[9]++,mn().s[28]++,i[l]=s.ref}),mn().s[29]++,this.setState({refs:i}),mn().s[30]++,r.map(s=>(mn().f[10]++,mn().s[31]++,s.data))}changeStop(t,r,i){var p;mn().f[12]++;const s=(mn().s[38]++,mn().b[11][0]++,((p=this.props.value)==null?void 0:p.stops.slice(0))||(mn().b[11][1]++,[]));mn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(mn().b[12][0]++,0):(mn().b[12][1]++,r.zoom)},i];const l=(mn().s[40]++,this.orderStopsByZoom(s)),o=(mn().s[41]++,{...this.props.value,stops:l});mn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){mn().f[13]++;const r=(mn().s[43]++,{...this.props.value,base:t});mn().s[44]++,r.base===void 0?(mn().b[13][0]++,mn().s[45]++,delete r.base):mn().b[13][1]++,mn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){mn().f[14]++,mn().s[47]++,mn().b[15][0]++,t==="interpolate"&&(mn().b[15][1]++,this.props.onChangeToZoomFunction)?(mn().b[14][0]++,mn().s[48]++,this.props.onChangeToZoomFunction()):(mn().b[14][1]++,mn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){mn().f[15]++,mn().s[50]++,r?(mn().b[16][0]++,mn().s[51]++,this.props.value[t]=r):(mn().b[16][1]++,mn().s[52]++,delete this.props.value[t]),mn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,l,o,p,v,x,B;mn().f[16]++;const t=(mn().s[54]++,this.props.t);mn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(mn().b[17][0]++,mn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):mn().b[17][1]++;let r;return mn().s[57]++,(s=this.props.value)!=null&&s.stops?(mn().b[18][0]++,mn().s[58]++,r=this.props.value.stops.map((k,P)=>{var te,G;mn().f[17]++;const D=(mn().s[59]++,typeof k[0]=="object"?(mn().b[19][0]++,k[0].zoom):(mn().b[19][1]++,void 0)),N=(mn().s[60]++,this.state.refs[P]),W=(mn().s[61]++,typeof k[0]=="object"?(mn().b[20][0]++,k[0].value):(mn().b[20][1]++,k[0])),V=(mn().s[62]++,k[1]),$=(mn().s[63]++,Ae.jsx(UN,{onClick:(te=this.props.onDeleteStop)==null?void 0:te.bind(this,P)})),ie=(mn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:W,onChange:oe=>(mn().f[18]++,mn().s[65]++,this.changeStop(P,{zoom:D,value:oe},V))});let ne;mn().s[66]++,((G=this.props.value)==null?void 0:G.type)==="categorical"?(mn().b[21][0]++,mn().s[67]++,ne=Ae.jsx(zf,{...ie})):(mn().b[21][1]++,mn().s[68]++,ne=Ae.jsx(Am,{...ie}));let q=(mn().s[69]++,null);return mn().s[70]++,D!==void 0?(mn().b[22][0]++,mn().s[71]++,q=Ae.jsx("div",{children:Ae.jsx(Am,{"aria-label":"Zoom",value:D,onChange:oe=>(mn().f[19]++,mn().s[72]++,this.changeStop(P,{zoom:oe,value:W},V)),min:0,max:22})})):mn().b[22][1]++,mn().s[73]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{children:q}),Ae.jsx("td",{children:ne}),Ae.jsx("td",{children:Ae.jsx(gy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:V,onChange:(oe,fe)=>(mn().f[20]++,mn().s[74]++,this.changeStop(P,{zoom:D,value:W},fe))})}),Ae.jsx("td",{children:$})]},N)})):mn().b[18][1]++,mn().s[75]++,Ae.jsx("div",{className:"maputnik-data-spec-block",children:Ae.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[Ae.jsx("legend",{children:Hx(this.props.fieldName)}),Ae.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[Ae.jsx(fa,{label:t("Function"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(Qg,{value:this.props.value.type,onChange:k=>(mn().f[21]++,mn().s[76]++,this.changeDataType(k)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(mn().b[23][0]++,((l=this.props.value)==null?void 0:l.type)!=="identity"&&(mn().b[23][1]++,Ae.jsx(fa,{label:t("Base"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(gy,{fieldName:"base",fieldSpec:Ho.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(k,P)=>(mn().f[22]++,mn().s[77]++,this.changeBase(P))})})},"base"))),Ae.jsx(fa,{label:"Property",children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(zf,{value:(p=this.props.value)==null?void 0:p.property,title:t("Input a data property to base styles off of."),onChange:k=>(mn().f[23]++,mn().s[78]++,this.changeDataProperty("property",k))})})},"property"),(mn().b[24][0]++,r&&(mn().b[24][1]++,Ae.jsx(fa,{label:t("Default"),children:Ae.jsx(gy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(v=this.props.value)==null?void 0:v.default,onChange:(k,P)=>(mn().f[24]++,mn().s[79]++,this.changeDataProperty("default",P))})},"default"))),(mn().b[25][0]++,r&&(mn().b[25][1]++,Ae.jsx("div",{className:"maputnik-function-stop",children:Ae.jsxs("table",{className:"maputnik-function-stop-table",children:[Ae.jsx("caption",{children:t("Stops")}),Ae.jsx("thead",{children:Ae.jsxs("tr",{children:[Ae.jsx("th",{children:t("Zoom")}),Ae.jsx("th",{children:t("Input value")}),Ae.jsx("th",{rowSpan:2,children:t("Output value")})]})}),Ae.jsx("tbody",{children:r})]})}))),Ae.jsxs("div",{className:"maputnik-toolbox",children:[(mn().b[26][0]++,r&&(mn().b[26][1]++,Ae.jsxs(Xa,{className:"maputnik-add-stop",onClick:(x=this.props.onAddStop)==null?void 0:x.bind(this),children:[Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:DO})})," ",t("Add stop")]}))),Ae.jsxs(Xa,{className:"maputnik-add-stop",onClick:(B=this.props.onExpressionClick)==null?void 0:B.bind(this),children:[Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:kC})})," ",t("Convert to expression")]})]})]})]})})}}const sle=(mn().s[80]++,Ns()(ole));function _r(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _r=function(){return l},l}_r();function lR(n,e){_r().f[0]++;let t=(_r().s[0]++,{});return _r().s[1]++,_r().b[1][0]++,n.value&&(_r().b[1][1]++,n.value.stops)?(_r().b[0][0]++,_r().s[2]++,n.value.stops.forEach((r,i)=>{_r().f[1]++,_r().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(_r().b[2][0]++,_r().s[4]++,t?_r().b[3][1]++:(_r().b[3][0]++,_r().s[5]++,t={...e}),_r().s[6]++,t[i]=Py("stop-")):(_r().b[2][1]++,_r().s[7]++,t[i]=e.refs[i])})):_r().b[0][1]++,_r().s[8]++,t}class zN extends Zn.Component{constructor(){super(...arguments);Pn(this,"state",(_r().s[10]++,{refs:{}}));Pn(this,"changeDataType",(_r().s[36]++,t=>{_r().f[11]++,_r().s[37]++,_r().b[8][0]++,t!=="interpolate"&&(_r().b[8][1]++,this.props.onChangeToDataFunction)?(_r().b[7][0]++,_r().s[38]++,this.props.onChangeToDataFunction(t)):_r().b[7][1]++}))}componentDidMount(){_r().f[2]++;const t=(_r().s[11]++,lR(this.props,this.state));_r().s[12]++,t?(_r().b[4][0]++,_r().s[13]++,this.setState({refs:t})):_r().b[4][1]++}static getDerivedStateFromProps(t,r){_r().f[3]++;const i=(_r().s[14]++,lR(t,r));return _r().s[15]++,i?(_r().b[5][0]++,_r().s[16]++,{refs:i}):(_r().b[5][1]++,_r().s[17]++,null)}orderStopsByZoom(t){_r().f[4]++;const r=(_r().s[18]++,t.map((s,l)=>(_r().f[5]++,_r().s[19]++,{ref:this.state.refs[l],data:s})).sort((s,l)=>(_r().f[6]++,_r().s[20]++,LN(s.data[0],l.data[0])))),i=(_r().s[21]++,{});return _r().s[22]++,r.forEach((s,l)=>{_r().f[7]++,_r().s[23]++,i[l]=s.ref}),_r().s[24]++,this.setState({refs:i}),_r().s[25]++,r.map(s=>(_r().f[8]++,_r().s[26]++,s.data))}changeZoomStop(t,r,i){_r().f[9]++;const s=(_r().s[27]++,this.props.value.stops.slice(0));_r().s[28]++,s[t]=[r,i];const l=(_r().s[29]++,this.orderStopsByZoom(s)),o=(_r().s[30]++,{...this.props.value,stops:l});_r().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){_r().f[10]++;const r=(_r().s[32]++,{...this.props.value,base:t});_r().s[33]++,r.base===void 0?(_r().b[6][0]++,_r().s[34]++,delete r.base):_r().b[6][1]++,_r().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,l,o;_r().f[12]++;const t=(_r().s[39]++,this.props.t),r=(_r().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((p,v)=>{var P;_r().f[13]++;const x=(_r().s[41]++,p[0]),B=(_r().s[42]++,p[1]),k=(_r().s[43]++,Ae.jsx(UN,{onClick:(P=this.props.onDeleteStop)==null?void 0:P.bind(this,v)}));return _r().s[44]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{children:Ae.jsx(Am,{"aria-label":t("Zoom"),value:x,onChange:D=>(_r().f[14]++,_r().s[45]++,this.changeZoomStop(v,D,B)),min:0,max:22})}),Ae.jsx("td",{children:Ae.jsx(gy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:B,onChange:(D,N)=>(_r().f[15]++,_r().s[46]++,this.changeZoomStop(v,x,N))})}),Ae.jsx("td",{children:k})]},`${p[0]}-${p[1]}`)}));return _r().s[47]++,Ae.jsx("div",{className:"maputnik-data-spec-block",children:Ae.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[Ae.jsx("legend",{children:Hx(this.props.fieldName)}),Ae.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[Ae.jsx(fa,{label:t("Function"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(Qg,{value:"interpolate",onChange:p=>(_r().f[16]++,_r().s[48]++,this.changeDataType(p)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),Ae.jsx(fa,{label:t("Base"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(gy,{fieldName:"base",fieldSpec:Ho.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(p,v)=>(_r().f[17]++,_r().s[49]++,this.changeBase(v))})})}),Ae.jsx("div",{className:"maputnik-function-stop",children:Ae.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[Ae.jsx("caption",{children:t("Stops")}),Ae.jsx("thead",{children:Ae.jsxs("tr",{children:[Ae.jsx("th",{children:t("Zoom")}),Ae.jsx("th",{rowSpan:2,children:t("Output value")})]})}),Ae.jsx("tbody",{children:r})]})}),Ae.jsxs("div",{className:"maputnik-toolbox",children:[Ae.jsxs(Xa,{className:"maputnik-add-stop",onClick:(l=this.props.onAddStop)==null?void 0:l.bind(this),children:[Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:DO})})," ",t("Add stop")]}),Ae.jsxs(Xa,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[Ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:Ae.jsx("path",{fill:"currentColor",d:kC})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return _r().f[18]++,_r().s[50]++,t["property-type"]==="data-driven"?(_r().b[9][0]++,_r().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(_r().b[9][1]++,_r().s[52]++,["interpolate"])}}Pn(zN,"defaultProps",(_r().s[9]++,{errors:{}}));const ale=(_r().s[53]++,Ns()(zN));function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ft=function(){return l},l}Ft();function AR(n){return Ft().f[0]++,Ft().s[0]++,Ft().b[0][0]++,Array.isArray(n)&&(Ft().b[0][1]++,n.length===2)&&(Ft().b[0][2]++,n[0]==="literal")}function uR(n){return Ft().f[1]++,Ft().s[1]++,Ft().b[1][0]++,Array.isArray(n)&&(Ft().b[1][1]++,n.length===2)&&(Ft().b[1][2]++,n[0]==="get")}function lle(n){return Ft().f[2]++,Ft().s[2]++,Ft().b[2][0]++,typeof n=="object"&&(Ft().b[2][1]++,n.stops)&&(Ft().b[2][2]++,typeof n.property>"u")&&(Ft().b[2][3]++,Array.isArray(n.stops))&&(Ft().b[2][4]++,n.stops.length>1)&&(Ft().b[2][5]++,n.stops.every(e=>(Ft().f[3]++,Ft().s[3]++,Ft().b[3][0]++,Array.isArray(e)&&(Ft().b[3][1]++,e.length===2))))}function NN(n){return Ft().f[4]++,Ft().s[4]++,Ft().b[4][0]++,typeof n=="object"&&(Ft().b[4][1]++,n.type==="identity")&&(Ft().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function Ale(n){return Ft().f[5]++,Ft().s[5]++,Ft().b[5][0]++,typeof n=="object"&&(Ft().b[5][1]++,n.stops)&&(Ft().b[5][2]++,typeof n.property<"u")&&(Ft().b[5][3]++,n.stops.length>1)&&(Ft().b[5][4]++,Array.isArray(n.stops))&&(Ft().b[5][5]++,n.stops.every(e=>(Ft().f[6]++,Ft().s[6]++,Ft().b[6][0]++,Array.isArray(e)&&(Ft().b[6][1]++,e.length===2)&&(Ft().b[6][2]++,typeof e[0]=="object"))))}function ule(n){return Ft().f[7]++,Ft().s[7]++,Ft().b[7][0]++,NN(n)||(Ft().b[7][1]++,Ale(n))}function o8(n){Ft().f[8]++;const e=(Ft().s[8]++,["string","boolean","number"]);return Ft().s[9]++,e.includes(typeof n)}function cle(n){return Ft().f[9]++,Ft().s[10]++,Array.isArray(n)?(Ft().b[8][0]++,Ft().s[11]++,n.every(o8)):(Ft().b[8][1]++,Ft().s[12]++,!1)}function cR(n,e=(Ft().b[9][0]++,{})){return Ft().f[10]++,Ft().s[13]++,n===void 0?(Ft().b[10][0]++,Ft().s[14]++,"value"):(Ft().b[10][1]++,Ft().s[15]++,o8(n)?(Ft().b[11][0]++,Ft().s[16]++,"value"):(Ft().b[11][1]++,Ft().s[17]++,Ft().b[13][0]++,e.type==="array"&&(Ft().b[13][1]++,cle(n))?(Ft().b[12][0]++,Ft().s[18]++,"value"):(Ft().b[12][1]++,Ft().s[19]++,lle(n)?(Ft().b[14][0]++,Ft().s[20]++,"zoom_function"):(Ft().b[14][1]++,Ft().s[21]++,ule(n)?(Ft().b[15][0]++,Ft().s[22]++,"data_function"):(Ft().b[15][1]++,Ft().s[23]++,"expression")))))}class hle extends Zn.Component{constructor(t){Ft().f[11]++,Ft().s[24]++;super(t);Pn(this,"addStop",(Ft().s[34]++,()=>{Ft().f[14]++;const t=(Ft().s[35]++,this.props.value.stops.slice(0)),r=(Ft().s[36]++,t[t.length-1]);Ft().s[37]++,typeof r[0]=="object"?(Ft().b[19][0]++,Ft().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Ft().b[19][1]++,Ft().s[39]++,t.push([r[0]+1,r[1]]));const i=(Ft().s[40]++,{...this.props.value,stops:t});Ft().s[41]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"deleteExpression",(Ft().s[42]++,()=>{Ft().f[15]++;const{fieldSpec:t,fieldName:r}=(Ft().s[43]++,this.props);Ft().s[44]++,this.props.onChange(r,t.default),Ft().s[45]++,this.setState({dataType:"value"})}));Pn(this,"deleteStop",(Ft().s[46]++,t=>{Ft().f[16]++;const r=(Ft().s[47]++,this.props.value.stops.slice(0));Ft().s[48]++,r.splice(t,1);let i=(Ft().s[49]++,{...this.props.value,stops:r});Ft().s[50]++,r.length===1?(Ft().b[20][0]++,Ft().s[51]++,i=r[0][1]):Ft().b[20][1]++,Ft().s[52]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeZoomFunction",(Ft().s[53]++,()=>{Ft().f[17]++;const{value:t}=(Ft().s[54]++,this.props);let r;Ft().s[55]++,typeof t=="object"?(Ft().b[21][0]++,Ft().s[56]++,t.stops?(Ft().b[22][0]++,Ft().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Ft().f[18]++,Ft().s[58]++,[i[0].zoom,(Ft().b[23][0]++,i[1]||(Ft().b[23][1]++,Bf(this.props.fieldSpec)))]))}):(Ft().b[22][1]++,Ft().s[59]++,r={base:t.base,stops:[[6,Bf(this.props.fieldSpec)],[10,Bf(this.props.fieldSpec)]]})):(Ft().b[21][1]++,Ft().s[60]++,r={stops:[[6,(Ft().b[24][0]++,t||(Ft().b[24][1]++,Bf(this.props.fieldSpec)))],[10,(Ft().b[25][0]++,t||(Ft().b[25][1]++,Bf(this.props.fieldSpec)))]]}),Ft().s[61]++,this.props.onChange(this.props.fieldName,r)}));Pn(this,"undoExpression",(Ft().s[62]++,()=>{Ft().f[19]++;const{value:t,fieldName:r}=(Ft().s[63]++,this.props);Ft().s[64]++,uR(t)?(Ft().b[26][0]++,Ft().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Ft().s[66]++,this.setState({dataType:"value"})):(Ft().b[26][1]++,Ft().s[67]++,AR(t)?(Ft().b[27][0]++,Ft().s[68]++,this.props.onChange(r,t[1]),Ft().s[69]++,this.setState({dataType:"value"})):Ft().b[27][1]++)}));Pn(this,"canUndo",(Ft().s[70]++,()=>{Ft().f[20]++;const{value:t,fieldSpec:r}=(Ft().s[71]++,this.props);return Ft().s[72]++,Ft().b[28][0]++,uR(t)||(Ft().b[28][1]++,AR(t))||(Ft().b[28][2]++,o8(t))||(Ft().b[28][3]++,Array.isArray(t)&&(Ft().b[28][4]++,r.type==="array"))}));Pn(this,"makeExpression",(Ft().s[73]++,()=>{Ft().f[21]++;const{value:t,fieldSpec:r}=(Ft().s[74]++,this.props);let i;Ft().s[75]++,Ft().b[30][0]++,typeof t=="object"&&(Ft().b[30][1]++,"stops"in t)?(Ft().b[29][0]++,Ft().s[76]++,i=dV.convertFunction(t,r)):(Ft().b[29][1]++,Ft().s[77]++,NN(t)?(Ft().b[31][0]++,Ft().s[78]++,i=["get",t.property]):(Ft().b[31][1]++,Ft().s[79]++,i=["literal",(Ft().b[32][0]++,t||(Ft().b[32][1]++,this.props.fieldSpec.default))])),Ft().s[80]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeDataFunction",(Ft().s[81]++,()=>{Ft().f[22]++;const t=(Ft().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Ft().s[83]++,t==="categorical"?(Ft().b[33][0]++,""):(Ft().b[33][1]++,0)),{value:i}=(Ft().s[84]++,this.props);let s;Ft().s[85]++,typeof i=="object"?(Ft().b[34][0]++,Ft().s[86]++,i.stops?(Ft().b[35][0]++,Ft().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(l=>(Ft().f[23]++,Ft().s[88]++,[{zoom:l[0],value:r},(Ft().b[36][0]++,l[1]||(Ft().b[36][1]++,Bf(this.props.fieldSpec)))]))}):(Ft().b[35][1]++,Ft().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},Bf(this.props.fieldSpec)],[{zoom:10,value:r},Bf(this.props.fieldSpec)]]})):(Ft().b[34][1]++,Ft().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Ft().b[37][0]++,this.props.value||(Ft().b[37][1]++,Bf(this.props.fieldSpec)))],[{zoom:10,value:r},(Ft().b[38][0]++,this.props.value||(Ft().b[38][1]++,Bf(this.props.fieldSpec)))]]}),Ft().s[91]++,this.props.onChange(this.props.fieldName,s)}));Pn(this,"onMarkEditing",(Ft().s[92]++,()=>{Ft().f[24]++,Ft().s[93]++,this.setState({isEditing:!0})}));Pn(this,"onUnmarkEditing",(Ft().s[94]++,()=>{Ft().f[25]++,Ft().s[95]++,this.setState({isEditing:!1})}));Ft().s[25]++,this.state={dataType:cR(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Ft().f[12]++,Ft().s[26]++,r.isEditing?(Ft().b[16][0]++,Ft().s[27]++,{}):(Ft().b[16][1]++,Ft().s[28]++,{isEditing:!1,dataType:cR(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Ft().f[13]++,Ft().s[29]++,t.expression.interpolated?(Ft().b[17][0]++,Ft().s[30]++,"exponential"):(Ft().b[17][1]++,Ft().s[31]++,t.type==="number"?(Ft().b[18][0]++,Ft().s[32]++,"interval"):(Ft().b[18][1]++,Ft().s[33]++,"categorical"))}render(){Ft().f[26]++;const{dataType:t}=(Ft().s[96]++,this.state),r=(Ft().s[97]++,this.props.fieldSpec.default===this.props.value?(Ft().b[39][0]++,"maputnik-default-property"):(Ft().b[39][1]++,"maputnik-modified-property"));let i;return Ft().s[98]++,t==="expression"?(Ft().b[40][0]++,Ft().s[99]++,i=Ae.jsx(Hz,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Ft().b[40][1]++,Ft().s[100]++,t==="zoom_function"?(Ft().b[41][0]++,Ft().s[101]++,i=Ae.jsx(ale,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Ft().b[41][1]++,Ft().s[102]++,t==="data_function"?(Ft().b[42][0]++,Ft().s[103]++,i=Ae.jsx(sle,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Ft().b[42][1]++,Ft().s[104]++,i=Ae.jsx(FN,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Ft().s[105]++,Ae.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function fo(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fo=function(){return l},l}fo();const dle=(fo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function fle(n,e,t){fo().f[0]++;const r=(fo().s[1]++,WN(n,e,t)),i=(fo().s[2]++,n[r+"_"+e]),s=(fo().s[3]++,i[t]);return fo().s[4]++,dle.indexOf(t)>=0?(fo().b[0][0]++,fo().s[5]++,{...s,values:n.$root.sprite.values}):(fo().b[0][1]++,fo().s[6]++,t==="text-font"?(fo().b[1][0]++,fo().s[7]++,{...s,values:n.$root.glyphs.values}):(fo().b[1][1]++,fo().s[8]++,s))}function WN(n,e,t){fo().f[1]++;const r=(fo().s[9]++,fo().b[2][0]++,n["paint_"+e]||(fo().b[2][1]++,{}));return fo().s[10]++,t in r?(fo().b[3][0]++,fo().s[11]++,"paint"):(fo().b[3][1]++,fo().s[12]++,"layout")}class ple extends Zn.Component{constructor(){super(...arguments);Pn(this,"onPropertyChange",(fo().s[13]++,(t,r)=>{fo().f[2]++;const i=(fo().s[14]++,WN(this.props.spec,this.props.layer.type,t));fo().s[15]++,this.props.onChange(i,t,r)}))}render(){fo().f[3]++;const{errors:t}=(fo().s[16]++,this.props),r=(fo().s[17]++,this.props.groupFields.map(i=>{fo().f[4]++;const s=(fo().s[18]++,fle(this.props.spec,this.props.layer.type,i)),l=(fo().s[19]++,fo().b[4][0]++,this.props.layer.paint||(fo().b[4][1]++,{})),o=(fo().s[20]++,fo().b[5][0]++,this.props.layer.layout||(fo().b[5][1]++,{})),p=(fo().s[21]++,i in l?(fo().b[6][0]++,l[i]):(fo().b[6][1]++,o[i])),v=(fo().s[22]++,i in l?(fo().b[7][0]++,"paint"):(fo().b[7][1]++,"layout"));return fo().s[23]++,Ae.jsx(hle,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:p,fieldType:v,fieldSpec:s},i)}));return fo().s[24]++,Ae.jsx("div",{className:"maputnik-property-group",children:r})}}var zS,hR;function mle(){return hR||(hR=1,zS=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var l in r)t.d(s,l,(function(o){return r[o]}).bind(null,l));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=wp()},function(n,e){n.exports=Da()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(D){for(var N,W=1,V=arguments.length;W<V;W++)for(var $ in N=arguments[W])Object.prototype.hasOwnProperty.call(N,$)&&(D[$]=N[$]);return D}).apply(this,arguments)},l=function(D,N){var W={};for(var V in D)Object.prototype.hasOwnProperty.call(D,V)&&N.indexOf(V)<0&&(W[V]=D[V]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(V=Object.getOwnPropertySymbols(D);$<V.length;$++)N.indexOf(V[$])<0&&Object.prototype.propertyIsEnumerable.call(D,V[$])&&(W[V[$]]=D[V[$]])}return W},o=0,p=r.forwardRef(function(D,N){var W=D.title,V=W===void 0?null:W,$=D.description,ie=$===void 0?null:$,ne=D.size,q=ne===void 0?null:ne,te=D.color,G=te===void 0?"currentColor":te,oe=D.horizontal,fe=oe===void 0?null:oe,he=D.vertical,Me=he===void 0?null:he,me=D.rotate,pe=me===void 0?null:me,qe=D.spin,Se=qe===void 0?null:qe,vt=D.style,Je=vt===void 0?{}:vt,Ke=D.children,je=l(D,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var Pe,Le=Se!==null&&Se,Xe=r.Children.map(Ke,function(Ut){var kt=Ut;Le!==!0&&(Le=(Se===null?kt.props.spin:Se)===!0);var Te=kt.props.size;typeof q=="number"&&typeof kt.props.size=="number"&&(Te=kt.props.size/q);var Re={size:Te,color:G===null?kt.props.color:G,horizontal:fe===null?kt.props.horizontal:fe,vertical:Me===null?kt.props.vertical:Me,rotate:pe===null?kt.props.rotate:pe,spin:Se===null?kt.props.spin:Se,inStack:!0};return r.cloneElement(kt,Re)});q!==null&&(Je.width=typeof q=="string"?q:1.5*q+"rem");var Ct,Gt="stack_labelledby_"+o,mt="stack_describedby_"+o;if(V)Pe=ie?Gt+" "+mt:Gt;else if(Ct="presentation",ie)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:N,viewBox:"0 0 24 24",style:Je,role:Ct,"aria-labelledby":Pe},je),V&&r.createElement("title",{id:Gt},V),ie&&r.createElement("desc",{id:mt},ie),Le&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),Xe)});p.displayName="Stack",p.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},p.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var v=p;t.d(e,"Icon",function(){return P}),t.d(e,"Stack",function(){return v});var x=function(){return(x=Object.assign||function(D){for(var N,W=1,V=arguments.length;W<V;W++)for(var $ in N=arguments[W])Object.prototype.hasOwnProperty.call(N,$)&&(D[$]=N[$]);return D}).apply(this,arguments)},B=function(D,N){var W={};for(var V in D)Object.prototype.hasOwnProperty.call(D,V)&&N.indexOf(V)<0&&(W[V]=D[V]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(V=Object.getOwnPropertySymbols(D);$<V.length;$++)N.indexOf(V[$])<0&&Object.prototype.propertyIsEnumerable.call(D,V[$])&&(W[V[$]]=D[V[$]])}return W},k=0,P=r.forwardRef(function(D,N){var W=D.path,V=D.id,$=V===void 0?++k:V,ie=D.title,ne=ie===void 0?null:ie,q=D.description,te=q===void 0?null:q,G=D.size,oe=G===void 0?null:G,fe=D.color,he=fe===void 0?"currentColor":fe,Me=D.horizontal,me=Me!==void 0&&Me,pe=D.vertical,qe=pe!==void 0&&pe,Se=D.rotate,vt=Se===void 0?0:Se,Je=D.spin,Ke=Je!==void 0&&Je,je=D.style,Pe=je===void 0?{}:je,Le=D.inStack,Xe=Le!==void 0&&Le,Ct=B(D,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Gt={},mt=[];oe!==null&&(Xe?mt.push("scale("+oe+")"):(Pe.width=typeof oe=="string"?oe:1.5*oe+"rem",Pe.height=Pe.width)),me&&mt.push("scaleX(-1)"),qe&&mt.push("scaleY(-1)"),vt!==0&&mt.push("rotate("+vt+"deg)"),he!==null&&(Gt.fill=he);var Ut=r.createElement("path",x({d:W,style:Gt},Xe?Ct:{})),kt=Ut;mt.length>0&&(Pe.transform=mt.join(" "),Pe.transformOrigin="center",Xe&&(kt=r.createElement("g",{style:Pe},Ut,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Te,Re=kt,Ue=Ke===!0||typeof Ke!="number"?2:Ke,nt=!Xe&&(me||qe);if(Ue<0&&(nt=!nt),Ke&&(Re=r.createElement("g",{style:{animation:"spin"+(nt?"-inverse":"")+" linear "+Math.abs(Ue)+"s infinite",transformOrigin:"center"}},kt,!(me||qe||vt!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),Xe)return Re;var _t,gt="icon_labelledby_"+$,Kt="icon_describedby_"+$;if(ne)Te=te?gt+" "+Kt:gt;else if(_t="presentation",te)throw new Error("title attribute required when description is set");return r.createElement("svg",x({ref:N,viewBox:"0 0 24 24",style:Pe,role:_t,"aria-labelledby":Te},Ct),ne&&r.createElement("title",{id:gt},ne),te&&r.createElement("desc",{id:Kt},te),!Xe&&Ke&&(nt?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Re)});P.displayName="Icon",P.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},P.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=P}])),zS}var gle=mle();const dR=dl(gle);function ly(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ly=function(){return l},l}ly();class yle extends Zn.Component{render(){return ly().f[0]++,ly().s[0]++,Ae.jsxs(zz,{uuid:this.props.id,children:[Ae.jsx(jz,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(ly().f[1]++,ly().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:Ae.jsxs(Fie,{className:"maputnik-layer-editor-group__button",children:[Ae.jsx("span",{style:{flexGrow:1},children:this.props.title}),Ae.jsx(dR,{path:roe,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),Ae.jsx(dR,{path:noe,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),Ae.jsx(Nie,{children:this.props.children})]})}}function vy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vy=function(){return l},l}vy();class vle extends Zn.Component{render(){vy().f[0]++;const e=(vy().s[0]++,this.props.t);return vy().s[1]++,Ae.jsx(fa,{label:e("Min Zoom"),fieldSpec:Ho.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:Ae.jsx(Am,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:Ho.layer.minzoom.minimum,max:Ho.layer.minzoom.maximum,default:Ho.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const Cle=(vy().s[2]++,Ns()(vle));function Cy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cy=function(){return l},l}Cy();class _le extends Zn.Component{render(){Cy().f[0]++;const e=(Cy().s[0]++,this.props.t);return Cy().s[1]++,Ae.jsx(fa,{label:e("Max Zoom"),fieldSpec:Ho.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:Ae.jsx(Am,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:Ho.layer.maxzoom.minimum,max:Ho.layer.maxzoom.maximum,default:Ho.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const ble=(Cy().s[2]++,Ns()(_le));function xg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xg=function(){return l},l}xg();class xle extends Zn.Component{render(){xg().f[0]++;const e=(xg().s[0]++,this.props.t),t=(xg().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return xg().s[2]++,Ae.jsx(fa,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:Ae.jsx(zf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const Mle=(xg().s[3]++,Ns()(xle)),wle={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},Sle={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},Ele={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},Ble={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},Ole={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},Ile={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},Tle={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},kle={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},Ple={groups:[]},yb={line:wle,background:Sle,fill:Ele,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:Ble,symbol:Ole,raster:Ile,hillshade:Tle,heatmap:kle,invalid:Ple};function Ay(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ay=function(){return l},l}Ay();function jN(n){return Ay().f[0]++,Ay().s[0]++,n===""?(Ay().b[0][0]++,"[empty_string]"):(Ay().b[0][1]++,`'${n}'`)}function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Kn=function(){return l},l}Kn();function GN(n,e){return Kn().f[0]++,Kn().s[0]++,yb[n]?(Kn().b[0][0]++,{...yb[n],groups:yb[n].groups.map(t=>(Kn().f[1]++,Kn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Kn().b[0][1]++,yb.invalid)}function fR(n,e){Kn().f[2]++;const t=(Kn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Kn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Kn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Kn().s[5]++,[t,r].concat(GN(n,e).groups).concat([i])}class V6 extends Zn.Component{constructor(e){Kn().f[6]++,Kn().s[8]++,super(e);const t=(Kn().s[9]++,{});Kn().s[10]++,fR(this.props.layer.type,e.t).forEach(r=>{Kn().f[7]++,Kn().s[11]++,t[r.title]=!0}),Kn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Kn().f[8]++;const r=(Kn().s[13]++,{...t.editorGroups});return Kn().s[14]++,GN(e.layer.type,e.t).groups.forEach(i=>{Kn().f[9]++,Kn().s[15]++,i.title in r?Kn().b[1][1]++:(Kn().b[1][0]++,Kn().s[16]++,r[i.title]=!0)}),Kn().s[17]++,{editorGroups:r}}getChildContext(){return Kn().f[10]++,Kn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){Kn().f[11]++,Kn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,Xre(this.props.layer,e,t,r))}onGroupToggle(e,t){Kn().f[12]++;const r=(Kn().s[20]++,{...this.state.editorGroups,[e]:t});Kn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){Kn().f[13]++;let r=(Kn().s[22]++,"");Kn().s[23]++,this.props.layer.metadata?(Kn().b[2][0]++,Kn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):Kn().b[2][1]++;const{errors:i,layerIndex:s}=(Kn().s[25]++,this.props),l=(Kn().s[26]++,{});Kn().s[27]++,i.forEach(v=>{Kn().f[14]++,Kn().s[28]++,Kn().b[4][0]++,v.parsed&&(Kn().b[4][1]++,v.parsed.type==="layer")&&(Kn().b[4][2]++,v.parsed.data.index==s)?(Kn().b[3][0]++,Kn().s[29]++,l[v.parsed.data.key]={message:v.parsed.data.message}):Kn().b[3][1]++});let o;const p=(Kn().s[30]++,this.props.layer);switch(Kn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,p.source)?(Kn().b[5][0]++,Kn().s[32]++,o=this.props.sources[p.source].layers):Kn().b[5][1]++,Kn().s[33]++,e){case"layer":return Kn().b[6][0]++,Kn().s[34]++,Ae.jsxs("div",{children:[Ae.jsx(Ez,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:v=>(Kn().f[15]++,Kn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,v))}),Ae.jsx(Sz,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:v=>(Kn().f[16]++,Kn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Zre(this.props.layer,v)))}),(Kn().b[7][0]++,this.props.layer.type!=="background"&&(Kn().b[7][1]++,Ae.jsx(Oz,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:v=>(Kn().f[17]++,Kn().s[37]++,this.changeProperty(null,"source",v))}))),(Kn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Kn().b[8][1]++,Ae.jsx(Tz,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:v=>(Kn().f[18]++,Kn().s[38]++,this.changeProperty(null,"source-layer",v))}))),Ae.jsx(Cle,{error:l.minzoom,value:this.props.layer.minzoom,onChange:v=>(Kn().f[19]++,Kn().s[39]++,this.changeProperty(null,"minzoom",v))}),Ae.jsx(ble,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:v=>(Kn().f[20]++,Kn().s[40]++,this.changeProperty(null,"maxzoom",v))}),Ae.jsx(Mle,{error:l.comment,value:r,onChange:v=>(Kn().f[21]++,Kn().s[41]++,this.changeProperty("metadata","maputnik:comment",v==""?(Kn().b[9][0]++,void 0):(Kn().b[9][1]++,v)))})]});case"filter":return Kn().b[6][1]++,Kn().s[42]++,Ae.jsx("div",{children:Ae.jsx("div",{className:"maputnik-filter-editor-wrapper",children:Ae.jsx(moe,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:v=>(Kn().f[22]++,Kn().s[43]++,this.changeProperty(null,"filter",v))})})});case"properties":return Kn().b[6][2]++,Kn().s[44]++,Ae.jsx(ple,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Kn().b[6][3]++,Kn().s[45]++,Ae.jsx(RO,{layer:this.props.layer,onChange:v=>{Kn().f[23]++,Kn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,v)}});default:return Kn().b[6][4]++,Kn().s[47]++,Ae.jsx(Ae.Fragment,{})}}moveLayer(e){Kn().f[24]++,Kn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Kn().f[25]++;const e=(Kn().s[49]++,this.props.t),t=(Kn().s[50]++,[]),r=(Kn().s[51]++,this.props.layer.type),i=(Kn().s[52]++,fR(r,e).filter(p=>(Kn().f[26]++,Kn().s[53]++,Kn().b[10][0]++,!(r==="background"&&(Kn().b[10][1]++,p.type==="source")))).map(p=>{Kn().f[27]++;const v=(Kn().s[54]++,p.id);return Kn().s[55]++,t.push(v),Kn().s[56]++,Ae.jsx(yle,{"data-wd-key":p.title,id:v,title:p.title,isActive:this.state.editorGroups[p.title],onActiveToggle:this.onGroupToggle.bind(this,p.title),children:this.renderGroupType(p.type,p.fields)},v)})),s=(Kn().s[57]++,Kn().b[11][0]++,this.props.layer.layout||(Kn().b[11][1]++,{})),l=(Kn().s[58]++,{delete:{text:e("Delete"),handler:()=>(Kn().f[28]++,Kn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Kn().f[29]++,Kn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Kn().b[12][0]++,e("Show")):(Kn().b[12][1]++,e("Hide")),handler:()=>(Kn().f[30]++,Kn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Kn().f[31]++,Kn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Kn().f[32]++,Kn().s[63]++,this.moveLayer(1))}});function o(p,v){Kn().f[33]++,Kn().s[64]++,v.stopPropagation(),Kn().s[65]++,l[p].handler()}return Kn().s[66]++,Ae.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[Ae.jsx("header",{children:Ae.jsxs("div",{className:"layer-header",children:[Ae.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:jN(this.props.layer.id)})}),Ae.jsx("div",{className:"layer-header__info",children:Ae.jsxs(hb.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[Ae.jsx(hb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:Ae.jsx(dH,{className:"more-menu__button__svg"})}),Ae.jsx(hb.Menu,{children:Ae.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(p=>{Kn().f[34]++;const v=(Kn().s[67]++,l[p]);return Kn().s[68]++,Ae.jsx("li",{children:Ae.jsx(hb.MenuItem,{value:p,className:"more-menu__menu__item",children:v.text})},p)})})})]})})]})}),Ae.jsx(Mie,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}Pn(V6,"defaultProps",(Kn().s[6]++,{onLayerChanged:()=>{Kn().f[3]++},onLayerIdChange:()=>{Kn().f[4]++},onLayerDestroyed:()=>{Kn().f[5]++}})),Pn(V6,"childContextTypes",(Kn().s[7]++,{reactIconBase:yi.object}));const Kle=(Kn().s[69]++,Ns()(V6));var pR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Rle=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),Dle=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Fle=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),Lle=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Ule=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),zle=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Nle=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,mR=3,Wle=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",zle]],gR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function jle(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ule:typeof navigator<"u"?Qle(navigator.userAgent):qle()}function Gle(n){return n!==""&&Wle.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function Qle(n){var e=Gle(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Lle;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<mR&&(i=pR(pR([],i,!0),Vle(mR-i.length),!0)):i=[];var s=i.join("."),l=Yle(n),o=Nle.exec(n);return o&&o[1]?new Fle(t,s,l,o[1]):new Rle(t,s,l)}function Yle(n){for(var e=0,t=gR.length;e<t;e++){var r=gR[e],i=r[0],s=r[1],l=s.exec(n);if(l)return i}return null}function qle(){var n=typeof process<"u"&&process.version;return n?new Dle(process.version.slice(1)):null}function Vle(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const Hle="maputnik",$le="2.1.1",yR={name:Hle,version:$le},Zle="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Vi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vi=function(){return l},l}Vi();const Xle=(Vi().s[0]++,jle()),vb=(Vi().s[1]++,["chrome","firefox"].indexOf(Xle.name)>-1);class lg extends Zn.Component{render(){return Vi().f[0]++,Vi().s[2]++,Ae.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Jle extends Zn.Component{render(){return Vi().f[1]++,Vi().s[3]++,Ae.jsx("a",{className:am("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class vR extends Zn.Component{render(){return Vi().f[2]++,Vi().s[4]++,Ae.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class Cb extends Zn.Component{render(){return Vi().f[3]++,Vi().s[5]++,Ae.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class eAe extends Zn.Component{constructor(){super(...arguments);Pn(this,"state",(Vi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));Pn(this,"onSkip",(Vi().s[9]++,t=>{if(Vi().f[6]++,Vi().s[10]++,t==="map")Vi().b[0][0]++,Vi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Vi().b[0][1]++;const r=(Vi().s[12]++,document.querySelector("#skip-target-"+t));Vi().s[13]++,r.focus()}}))}handleSelection(t){Vi().f[4]++,Vi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Vi().f[5]++,Vi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Vi().f[7]++;const t=(Vi().s[14]++,this.props.t),r=(Vi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!vb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!vb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!vb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!vb}]),i=(Vi().s[16]++,r.find(s=>(Vi().f[8]++,Vi().s[17]++,s.id===this.props.mapState)));return Vi().s[18]++,Ae.jsx("nav",{className:"maputnik-toolbar",children:Ae.jsxs("div",{className:"maputnik-toolbar__inner",children:[Ae.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[Ae.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Vi().f[9]++,Vi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),Ae.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Vi().f[10]++,Vi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),Ae.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Vi().f[11]++,Vi().s[21]++,this.onSkip("map")),children:t("Map view")}),Ae.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[Ae.jsx("img",{src:Zle,alt:t("Maputnik on GitHub")}),Ae.jsxs("h1",{children:[Ae.jsx("span",{className:"maputnik-toolbar-name",children:yR.name}),Ae.jsxs("span",{className:"maputnik-toolbar-version",children:["v",yR.version]})]})]})]}),Ae.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[Ae.jsxs(Cb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[Ae.jsx(eH,{}),Ae.jsx(lg,{children:t("Open")})]}),Ae.jsxs(Cb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[Ae.jsx(o6,{}),Ae.jsx(lg,{children:t("Save")})]}),Ae.jsxs(Cb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[Ae.jsx(lH,{}),Ae.jsx(lg,{children:t("Data Sources")})]}),Ae.jsxs(Cb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[Ae.jsx(tH,{}),Ae.jsx(lg,{children:t("Style Settings")})]}),Ae.jsxs(vR,{wdKey:"nav:inspect",children:[Ae.jsx(HV,{}),Ae.jsxs(lg,{children:[t("View"),Ae.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Vi().f[12]++,Vi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Vi().f[13]++,Vi().s[23]++,s.group==="general")).map(s=>(Vi().f[14]++,Vi().s[24]++,Ae.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),Ae.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Vi().f[15]++,Vi().s[25]++,s.group==="color-accessibility")).map(s=>(Vi().f[16]++,Vi().s[26]++,Ae.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),Ae.jsxs(vR,{wdKey:"nav:language",children:[Ae.jsx(JV,{}),Ae.jsxs(lg,{children:["Language",Ae.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Vi().f[17]++,Vi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(QD).map(([s,l])=>(Vi().f[18]++,Vi().s[28]++,Ae.jsx("option",{value:s,children:l},s)))})]})]}),Ae.jsxs(Jle,{href:"https://github.com/maplibre/maputnik/wiki",children:[Ae.jsx($V,{}),Ae.jsx(lg,{children:t("Help")})]})]})]})})}}const tAe=(Vi().s[29]++,Ns()(eAe));function k2(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return k2=function(){return l},l}k2();class nAe extends Zn.Component{render(){return k2().f[0]++,k2().s[0]++,Ae.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function hp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hp=function(){return l},l}hp();class QN extends Zn.Component{getChildContext(){return hp().f[0]++,hp().s[1]++,{reactIconBase:{size:14}}}render(){return hp().f[1]++,hp().s[2]++,document.body.dir=this.props.i18n.dir(),hp().s[3]++,Ae.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,Ae.jsxs("div",{className:"maputnik-layout-main",children:[Ae.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),Ae.jsx("div",{className:"maputnik-layout-drawer",children:Ae.jsx(nAe,{children:this.props.layerEditor})}),this.props.map]}),(hp().b[0][0]++,this.props.bottom&&(hp().b[0][1]++,Ae.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}Pn(QN,"childContextTypes",(hp().s[0]++,{reactIconBase:yi.object}));const rAe=(hp().s[4]++,Ns()(QN));function cl(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return cl=function(){return l},l}cl();class YN extends Zn.Component{render(){var s,l;cl().f[1]++;const{t:e,selectedLayerIndex:t}=(cl().s[1]++,this.props),r=(cl().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,p)=>{var x;cl().f[2]++;let v;if(cl().s[3]++,cl().b[1][0]++,o.parsed&&(cl().b[1][1]++,o.parsed.type==="layer")){cl().b[0][0]++;const{parsed:B}=(cl().s[4]++,o),k=(cl().s[5]++,(x=this.props.mapStyle)==null?void 0:x.layers[B.data.index].id);cl().s[6]++,v=Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs(R0,{t:e,children:["Layer ",Ae.jsx("span",{children:jN(k)}),": ",B.data.message]}),(cl().b[2][0]++,t!==B.data.index&&(cl().b[2][1]++,Ae.jsxs(Ae.Fragment,{children:["",Ae.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(cl().f[3]++,cl().s[7]++,this.props.onLayerSelect(B.data.index)),children:e("switch to layer")})]})))]})}else cl().b[0][1]++,cl().s[8]++,v=o.message;return cl().s[9]++,Ae.jsx("p",{className:"maputnik-message-panel-error",children:v},"error-"+p)})),i=(cl().s[10]++,(l=this.props.infos)==null?void 0:l.map((o,p)=>(cl().f[4]++,cl().s[11]++,Ae.jsx("p",{children:o},"info-"+p))));return cl().s[12]++,Ae.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}Pn(YN,"defaultProps",(cl().s[0]++,{onLayerSelect:()=>{cl().f[0]++}}));const iAe=(cl().s[13]++,Ns()(YN));function P2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return P2=function(){return l},l}P2();class K2 extends Zn.Component{render(){return P2().f[0]++,P2().s[0]++,Ae.jsx(PC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(PN,{...this.props})})}}function R2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return R2=function(){return l},l}R2();class fp extends Zn.Component{render(){return R2().f[0]++,R2().s[0]++,Ae.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(Am,{...this.props})})}}function D2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return D2=function(){return l},l}D2();class qp extends Zn.Component{render(){return D2().f[0]++,D2().s[0]++,Ae.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(zf,{...this.props})})}}function F2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return F2=function(){return l},l}F2();class Ky extends Zn.Component{render(){return F2().f[0]++,F2().s[0]++,Ae.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(i8,{...this.props})})}}function L2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return L2=function(){return l},l}L2();class s3 extends Zn.Component{render(){return L2().f[0]++,L2().s[0]++,Ae.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(Qg,{...this.props})})}}function U2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return U2=function(){return l},l}U2();class oAe extends Zn.Component{render(){return U2().f[0]++,U2().s[0]++,Ae.jsx(PC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(r8,{...this.props})})}}function z2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return z2=function(){return l},l}z2();class sAe extends Zn.Component{render(){return z2().f[0]++,z2().s[0]++,Ae.jsx(fa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:Ae.jsx(kN,{...this.props})})}}function KC(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return KC=function(){return l},l}KC();KC().s[0]++;const qN=n=>(KC().f[0]++,KC().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function zi(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return zi=function(){return l},l}zi();class aAe extends Zn.Component{changeTransitionProperty(e,t){zi().f[0]++;const r=(zi().s[0]++,{...this.props.mapStyle.transition});zi().s[1]++,t===void 0?(zi().b[0][0]++,zi().s[2]++,delete r[e]):(zi().b[0][1]++,zi().s[3]++,r[e]=t),zi().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){zi().f[1]++;const r=(zi().s[5]++,{...this.props.mapStyle.light});zi().s[6]++,t===void 0?(zi().b[1][0]++,zi().s[7]++,delete r[e]):(zi().b[1][1]++,zi().s[8]++,r[e]=t),zi().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){zi().f[2]++;const r=(zi().s[10]++,{...this.props.mapStyle.terrain});zi().s[11]++,t===void 0?(zi().b[2][0]++,zi().s[12]++,delete r[e]):(zi().b[2][1]++,zi().s[13]++,r[e]=t),zi().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){zi().f[3]++;const r=(zi().s[15]++,{...this.props.mapStyle});zi().s[16]++,t===void 0?(zi().b[3][0]++,zi().s[17]++,delete r[e]):(zi().b[3][1]++,zi().s[18]++,r[e]=t),zi().s[19]++,this.props.onStyleChanged(r)}render(){zi().f[4]++;const e=(zi().s[20]++,zi().b[4][0]++,this.props.mapStyle.metadata||(zi().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(zi().s[21]++,this.props),s=(zi().s[22]++,qN(t)),l=(zi().s[23]++,zi().b[5][0]++,this.props.mapStyle.light||(zi().b[5][1]++,{})),o=(zi().s[24]++,zi().b[6][0]++,this.props.mapStyle.transition||(zi().b[6][1]++,{})),p=(zi().s[25]++,zi().b[7][0]++,this.props.mapStyle.terrain||(zi().b[7][1]++,{}));return zi().s[26]++,Ae.jsx(Y0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:Ae.jsxs("div",{className:"modal:settings",children:[Ae.jsx(qp,{label:t("Name"),fieldSpec:Ho.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),Ae.jsx(qp,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),Ae.jsx(Ky,{fieldSpec:Ho.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),Ae.jsx(Ky,{label:t("Glyphs URL"),fieldSpec:Ho.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),Ae.jsx(qp,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),Ae.jsx(qp,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),Ae.jsx(qp,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),Ae.jsx(K2,{label:t("Center"),fieldSpec:Ho.$root.center,length:2,type:"number",value:(zi().b[8][0]++,i.center||(zi().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),Ae.jsx(fp,{label:t("Zoom"),fieldSpec:Ho.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),Ae.jsx(fp,{label:t("Bearing"),fieldSpec:Ho.$root.bearing,value:i.bearing,default:Ho.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),Ae.jsx(fp,{label:t("Pitch"),fieldSpec:Ho.$root.pitch,value:i.pitch,default:Ho.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),Ae.jsx(oAe,{label:t("Light anchor"),fieldSpec:Ho.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(Ho.light.anchor.values),default:Ho.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),Ae.jsx(sAe,{label:t("Light color"),fieldSpec:Ho.light.color,value:l.color,default:Ho.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),Ae.jsx(fp,{label:t("Light intensity"),fieldSpec:Ho.light.intensity,value:l.intensity,default:Ho.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),Ae.jsx(K2,{label:t("Light position"),fieldSpec:Ho.light.position,type:"number",length:Ho.light.position.length,value:l.position,default:Ho.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),Ae.jsx(qp,{label:t("Terrain source"),fieldSpec:Ho.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:p.source,onChange:this.changeTerrainProperty.bind(this,"source")}),Ae.jsx(fp,{label:t("Terrain exaggeration"),fieldSpec:Ho.terrain.exaggeration,value:p.exaggeration,default:Ho.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),Ae.jsx(fp,{label:t("Transition delay"),fieldSpec:Ho.transition.delay,value:o.delay,default:Ho.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),Ae.jsx(fp,{label:t("Transition duration"),fieldSpec:Ho.transition.duration,value:o.duration,default:Ho.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),Ae.jsx(s3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(zi().b[9][0]++,e["maputnik:renderer"]||(zi().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const lAe=(zi().s[27]++,Ns()(aAe));var Kb={exports:{}},AAe=Kb.exports,CR;function uAe(){return CR||(CR=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",AAe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),r=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(s,l){if(typeof s!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=r[l.locale]||{},p=l.replacement===void 0?"-":l.replacement,v=l.trim===void 0?!0:l.trim,x=s.normalize().split("").reduce(function(B,k){var P=o[k];return P===void 0&&(P=t[k]),P===void 0&&(P=k),P===p&&(P=" "),B+P.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(x=x.replace(/[^A-Za-z0-9\s]/g,"")),v&&(x=x.trim()),x=x.replace(/\s+/g,p),l.lower&&(x=x.toLowerCase()),x}return i.extend=function(s){Object.assign(t,s)},i})}(Kb)),Kb.exports}var cAe=uAe();const hAe=dl(cAe);var Rb={exports:{}},dAe=Rb.exports,_R;function fAe(){return _R||(_R=1,function(n,e){(function(t,r){r()})(dAe,function(){function t(v,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v}function r(v,x,B){var k=new XMLHttpRequest;k.open("GET",v),k.responseType="blob",k.onload=function(){p(k.response,x,B)},k.onerror=function(){console.error("could not download file")},k.send()}function i(v){var x=new XMLHttpRequest;x.open("HEAD",v,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function s(v){try{v.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),v.dispatchEvent(x)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(v,x,B){var k=l.URL||l.webkitURL,P=document.createElement("a");x=x||v.name||"download",P.download=x,P.rel="noopener",typeof v=="string"?(P.href=v,P.origin===location.origin?s(P):i(P.href)?r(v,x,B):s(P,P.target="_blank")):(P.href=k.createObjectURL(v),setTimeout(function(){k.revokeObjectURL(P.href)},4e4),setTimeout(function(){s(P)},0))}:"msSaveOrOpenBlob"in navigator?function(v,x,B){if(x=x||v.name||"download",typeof v!="string")navigator.msSaveOrOpenBlob(t(v,B),x);else if(i(v))r(v,x,B);else{var k=document.createElement("a");k.href=v,k.target="_blank",setTimeout(function(){s(k)})}}:function(v,x,B,k){if(k=k||open("","_blank"),k&&(k.document.title=k.document.body.innerText="downloading..."),typeof v=="string")return r(v,x,B);var P=v.type==="application/octet-stream",D=/constructor/i.test(l.HTMLElement)||l.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||P&&D||o)&&typeof FileReader<"u"){var W=new FileReader;W.onloadend=function(){var ie=W.result;ie=N?ie:ie.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=ie:location=ie,k=null},W.readAsDataURL(v)}else{var V=l.URL||l.webkitURL,$=V.createObjectURL(v);k?k.location=$:location.href=$,k=null,setTimeout(function(){V.revokeObjectURL($)},4e4)}});l.saveAs=p.saveAs=p,n.exports=p})}(Rb)),Rb.exports}var bR=fAe();const pAe="5.4.0",mAe="get_your_own_OpIi9ZULNHzrESv6T2vL",gAe="b71f7f0ba4064f5eb9e903859a9cf5c6",VN={openmaptiles:mAe,thunderforest:gAe};function rr(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return rr=function(){return l},l}rr();const yAe=(rr().s[0]++,$N({version:8,sources:{},layers:[]}));function HN(){return rr().f[0]++,rr().s[1]++,Math.random().toString(36).substring(2,9)}function vAe(n){return rr().f[1]++,rr().s[2]++,rr().b[1][0]++,!("id"in n)||(rr().b[1][1]++,!n.id)?(rr().b[0][0]++,rr().s[3]++,n.id=HN(),rr().s[4]++,n):(rr().b[0][1]++,rr().s[5]++,n)}function CAe(n){rr().f[2]++;const e=(rr().s[6]++,n.layers.map(t=>{rr().f[3]++;const r=(rr().s[7]++,{...t});return rr().s[8]++,delete r.interactive,rr().s[9]++,r}));return rr().s[10]++,{...n,layers:e}}function _Ae(n){return rr().f[4]++,rr().s[11]++,{...n,layers:iB(n.layers)}}function $N(n){return rr().f[5]++,rr().s[12]++,CAe(_Ae(vAe(n)))}function bAe(n,e){rr().f[6]++,rr().s[13]++;for(let t=(rr().s[14]++,0);t<n.length;t++){if(rr().s[15]++,n[t].id===e)return rr().b[2][0]++,rr().s[16]++,t;rr().b[2][1]++}return rr().s[17]++,null}function s8(n,e,t){rr().f[7]++;const r=(rr().s[18]++,rr().b[3][0]++,e.metadata||(rr().b[3][1]++,{}));let i=(rr().s[19]++,r[`maputnik:${n}_access_token`]);return rr().s[20]++,rr().b[5][0]++,t.allowFallback&&(rr().b[5][1]++,!i)?(rr().b[4][0]++,rr().s[21]++,i=VN[n]):rr().b[4][1]++,rr().s[22]++,i}function xAe(n,e,t=(rr().b[6][0]++,{})){var v;rr().f[8]++;const r=(rr().s[23]++,n.sources[e]);if(rr().s[24]++,r)rr().b[7][1]++;else return rr().b[7][0]++,rr().s[25]++,n;if(rr().s[26]++,rr().b[9][0]++,!("url"in r)||(rr().b[9][1]++,!r.url))return rr().b[8][0]++,rr().s[27]++,n;rr().b[8][1]++;let i=(rr().s[28]++,e);rr().s[29]++,rr().b[11][0]++,e==="thunderforest_transport"||(rr().b[11][1]++,e==="thunderforest_outdoors")?(rr().b[10][0]++,rr().s[30]++,i="thunderforest"):(rr().b[10][1]++,rr().s[31]++,rr().b[13][0]++,"url"in r&&(rr().b[13][1]++,(v=r.url)==null?void 0:v.match(/\.stadiamaps\.com/))?(rr().b[12][0]++,rr().s[32]++,i="stadia"):rr().b[12][1]++);const s=(rr().s[33]++,s8(i,n,t));if(rr().s[34]++,s)rr().b[14][1]++;else return rr().b[14][0]++,rr().s[35]++,n;let l;rr().s[36]++,i=="stadia"?(rr().b[15][0]++,rr().s[37]++,l=`${r.url}?api_key=${s}`):(rr().b[15][1]++,rr().s[38]++,l=r.url.replace("{key}",s));const o=(rr().s[39]++,{...n.sources,[e]:{...r,url:l}}),p=(rr().s[40]++,{...n,sources:o});return rr().s[41]++,p}function MAe(n,e=(rr().b[16][0]++,{})){rr().f[9]++;let t=(rr().s[42]++,n);if(rr().s[43]++,Object.keys(n.sources).forEach(r=>{rr().f[10]++,rr().s[44]++,t=xAe(t,r,e)}),rr().s[45]++,rr().b[18][0]++,n.glyphs&&(rr().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(rr().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){rr().b[17][0]++;const r=(rr().s[46]++,s8("openmaptiles",n,e));rr().s[47]++,r?(rr().b[19][0]++,rr().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):rr().b[19][1]++}else rr().b[17][1]++;return rr().s[49]++,t}function wAe(n){rr().f[11]++;const e=(rr().s[50]++,{...n.metadata});return rr().s[51]++,delete e["maputnik:openmaptiles_access_token"],rr().s[52]++,delete e["maputnik:thunderforest_access_token"],rr().s[53]++,delete e["maputnik:stadia_access_token"],rr().s[54]++,{...n,metadata:e}}const Cc={ensureStyleValidity:$N,emptyStyle:yAe,indexOfLayer:bAe,generateId:HN,getAccessToken:s8,replaceAccessTokens:MAe,stripAccessTokens:wAe};function Wr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wr=function(){return l},l}Wr();const xR=(Wr().s[0]++,pAe),MR=(Wr().s[1]++,typeof window.showSaveFilePicker=="function");class SAe extends Zn.Component{tokenizedStyle(){return Wr().f[0]++,Wr().s[2]++,HF(Cc.stripAccessTokens(Cc.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Wr().f[1]++,Wr().s[3]++,this.props.mapStyle.name?(Wr().b[0][0]++,Wr().s[4]++,hAe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Wr().b[0][1]++,Wr().s[5]++,this.props.mapStyle.id)}createHtml(){Wr().f[2]++;const e=(Wr().s[6]++,this.tokenizedStyle()),t=(Wr().s[7]++,Wr().b[1][0]++,this.props.mapStyle.name||(Wr().b[1][1]++,this.props.t("Map"))),r=(Wr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${xR}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${xR}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Wr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Wr().s[10]++,this.exportName());Wr().s[11]++,bR.saveAs(i,s+".html")}async saveStyle(){Wr().f[3]++;const e=(Wr().s[12]++,this.tokenizedStyle());if(Wr().s[13]++,MR)Wr().b[2][1]++;else{Wr().b[2][0]++;const i=(Wr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Wr().s[15]++,this.exportName());Wr().s[16]++,bR.saveAs(i,s+".json"),Wr().s[17]++;return}let t=(Wr().s[18]++,this.props.fileHandle);if(Wr().s[19]++,t==null)if(Wr().b[3][0]++,Wr().s[20]++,t=await this.createFileHandle(),Wr().s[21]++,this.props.onSetFileHandle(t),Wr().s[22]++,t==null){Wr().b[4][0]++,Wr().s[23]++;return}else Wr().b[4][1]++;else Wr().b[3][1]++;const r=(Wr().s[24]++,await t.createWritable());Wr().s[25]++,await r.write(e),Wr().s[26]++,await r.close(),Wr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Wr().f[4]++;const e=(Wr().s[28]++,this.tokenizedStyle()),t=(Wr().s[29]++,await this.createFileHandle());if(Wr().s[30]++,this.props.onSetFileHandle(t),Wr().s[31]++,t==null){Wr().b[5][0]++,Wr().s[32]++;return}else Wr().b[5][1]++;const r=(Wr().s[33]++,await t.createWritable());Wr().s[34]++,await r.write(e),Wr().s[35]++,await r.close(),Wr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Wr().f[5]++;const e=(Wr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Wr().s[38]++,await window.showSaveFilePicker(e));return Wr().s[39]++,this.props.onSetFileHandle(t),Wr().s[40]++,t}changeMetadataProperty(e,t){Wr().f[6]++;const r=(Wr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Wr().s[42]++,this.props.onStyleChanged(r)}render(){Wr().f[7]++;const e=(Wr().s[43]++,this.props.t),t=(Wr().s[44]++,qN(e));return Wr().s[45]++,Ae.jsx(Y0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Save Style")}),Ae.jsx("p",{children:e("Save the JSON style to your computer.")}),Ae.jsxs("div",{children:[Ae.jsx(qp,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Wr().b[6][0]++,this.props.mapStyle.metadata||(Wr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),Ae.jsx(qp,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Wr().b[7][0]++,this.props.mapStyle.metadata||(Wr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),Ae.jsx(qp,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Wr().b[8][0]++,this.props.mapStyle.metadata||(Wr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),Ae.jsxs("div",{className:"maputnik-modal-export-buttons",children:[Ae.jsxs(Xa,{onClick:this.saveStyle.bind(this),children:[Ae.jsx(o6,{}),e("Save")]}),(Wr().b[9][0]++,MR&&(Wr().b[9][1]++,Ae.jsxs(Xa,{onClick:this.saveStyleAs.bind(this),children:[Ae.jsx(o6,{}),e("Save as")]}))),Ae.jsxs(Xa,{onClick:this.createHtml.bind(this),children:[Ae.jsx(AH,{}),e("Create HTML")]})]})]})})}}const EAe=(Wr().s[46]++,Ns()(SAe));function N2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return N2=function(){return l},l}N2();class ZN extends Zn.Component{render(){return N2().f[0]++,N2().s[0]++,Ae.jsx(PC,{label:this.props.label,children:Ae.jsx(RN,{...this.props})})}}function W2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return W2=function(){return l},l}W2();class BAe extends Zn.Component{render(){return W2().f[0]++,W2().s[0]++,Ae.jsx(fa,{label:this.props.label,children:Ae.jsx(n8,{...this.props})})}}function jn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return jn=function(){return l},l}jn();class NS extends Zn.Component{render(){jn().f[0]++;const e=(jn().s[0]++,this.props.t);return jn().s[1]++,Ae.jsxs("div",{children:[Ae.jsx(Ky,{label:e("TileJSON URL"),fieldSpec:Bs.source_vector.url,value:this.props.source.url,onChange:t=>(jn().f[1]++,jn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class WS extends Zn.Component{changeTileUrls(e){jn().f[2]++,jn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){jn().f[3]++;const e=(jn().s[4]++,jn().b[0][0]++,this.props.source.tiles||(jn().b[0][1]++,[]));return jn().s[5]++,Ae.jsx(ZN,{label:this.props.t("Tile URL"),fieldSpec:Bs.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){jn().f[4]++;const e=(jn().s[6]++,this.props.t);return jn().s[7]++,Ae.jsxs("div",{children:[this.renderTileUrls(),Ae.jsx(s3,{label:e("Scheme Type"),fieldSpec:Bs.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(jn().f[5]++,jn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),Ae.jsx(fp,{label:e("Min Zoom"),fieldSpec:Bs.source_vector.minzoom,value:(jn().b[1][0]++,this.props.source.minzoom||(jn().b[1][1]++,0)),onChange:t=>(jn().f[6]++,jn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),Ae.jsx(fp,{label:e("Max Zoom"),fieldSpec:Bs.source_vector.maxzoom,value:(jn().b[2][0]++,this.props.source.maxzoom||(jn().b[2][1]++,22)),onChange:t=>(jn().f[7]++,jn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}jn().s[11]++;const XN=n=>(jn().f[8]++,jn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class OAe extends Zn.Component{render(){jn().f[9]++;const e=(jn().s[13]++,this.props.t);jn().s[14]++;const t=(r,i)=>{jn().f[10]++;const s=(jn().s[15]++,this.props.source.coordinates.slice(0));jn().s[16]++,s[r]=i,jn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return jn().s[18]++,Ae.jsxs("div",{children:[Ae.jsx(Ky,{label:e("Image URL"),fieldSpec:Bs.source_image.url,value:this.props.source.url,onChange:r=>(jn().f[11]++,jn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),XN(e).map(({label:r,key:i},s)=>(jn().f[12]++,jn().s[20]++,Ae.jsx(K2,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:l=>(jn().f[13]++,jn().s[21]++,t(s,l))},i)))]})}}class IAe extends Zn.Component{render(){jn().f[14]++;const e=(jn().s[22]++,this.props.t);jn().s[23]++;const t=(i,s)=>{jn().f[15]++;const l=(jn().s[24]++,this.props.source.coordinates.slice(0));jn().s[25]++,l[i]=s,jn().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};jn().s[27]++;const r=i=>{jn().f[16]++,jn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return jn().s[29]++,Ae.jsxs("div",{children:[Ae.jsx(ZN,{label:e("Video URL"),fieldSpec:Bs.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),XN(e).map(({label:i,key:s},l)=>(jn().f[17]++,jn().s[30]++,Ae.jsx(K2,{label:i,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(jn().f[18]++,jn().s[31]++,t(l,o))},s)))]})}}class TAe extends Zn.Component{render(){jn().f[19]++;const e=(jn().s[32]++,this.props.t);return jn().s[33]++,Ae.jsx(Ky,{label:e("GeoJSON URL"),fieldSpec:Bs.source_geojson.data,value:this.props.source.data,onChange:t=>(jn().f[20]++,jn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class kAe extends Zn.Component{render(){jn().f[21]++;const e=(jn().s[35]++,this.props.t);return jn().s[36]++,Ae.jsxs("div",{children:[Ae.jsx(fa,{label:e("GeoJSON"),fieldSpec:Bs.source_geojson.data,children:Ae.jsx(RO,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{jn().f[22]++,jn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),Ae.jsx(BAe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{jn().f[23]++,jn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class PAe extends Zn.Component{render(){jn().f[24]++;const e=(jn().s[39]++,this.props.t);return jn().s[40]++,Ae.jsxs("div",{children:[Ae.jsx(Ky,{label:e("PMTiles URL"),fieldSpec:Bs.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(jn().f[25]++,jn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(jn().b[3][0]++,t):(jn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class KAe extends Zn.Component{render(){jn().f[26]++;const e=(jn().s[42]++,this.props.t),t=(jn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(jn().s[44]++,this.props.mode){case"geojson_url":return jn().b[4][0]++,jn().s[45]++,Ae.jsx(TAe,{...t});case"geojson_json":return jn().b[4][1]++,jn().s[46]++,Ae.jsx(kAe,{...t});case"tilejson_vector":return jn().b[4][2]++,jn().s[47]++,Ae.jsx(NS,{...t});case"tile_vector":return jn().b[4][3]++,jn().s[48]++,Ae.jsx(WS,{...t});case"tilejson_raster":return jn().b[4][4]++,jn().s[49]++,Ae.jsx(NS,{...t});case"tile_raster":return jn().b[4][5]++,jn().s[50]++,Ae.jsx(WS,{...t,children:Ae.jsx(fp,{label:e("Tile Size"),fieldSpec:Bs.source_raster.tileSize,onChange:r=>(jn().f[27]++,jn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(jn().b[5][0]++,this.props.source.tileSize||(jn().b[5][1]++,Bs.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return jn().b[4][6]++,jn().s[52]++,Ae.jsx(NS,{...t});case"tilexyz_raster-dem":return jn().b[4][7]++,jn().s[53]++,Ae.jsxs(WS,{...t,children:[Ae.jsx(fp,{label:e("Tile Size"),fieldSpec:Bs.source_raster_dem.tileSize,onChange:r=>(jn().f[28]++,jn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(jn().b[6][0]++,this.props.source.tileSize||(jn().b[6][1]++,Bs.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),Ae.jsx(s3,{label:e("Encoding"),fieldSpec:Bs.source_raster_dem.encoding,options:Object.keys(Bs.source_raster_dem.encoding.values),onChange:r=>(jn().f[29]++,jn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(jn().b[7][0]++,this.props.source.encoding||(jn().b[7][1]++,Bs.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return jn().b[4][8]++,jn().s[56]++,Ae.jsx(PAe,{...t});case"image":return jn().b[4][9]++,jn().s[57]++,Ae.jsx(OAe,{...t});case"video":return jn().b[4][10]++,jn().s[58]++,Ae.jsx(IAe,{...t});default:return jn().b[4][11]++,jn().s[59]++,null}}}const JN=(jn().s[60]++,Ns()(KAe));function Cp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cp=function(){return l},l}Cp();function RAe(n,e){Cp().f[0]++;const t=(Cp().s[0]++,{...n.sources});return Cp().s[1]++,delete t[e],Cp().s[2]++,{...n,sources:t}}function wR(n,e,t){return Cp().f[1]++,Cp().s[3]++,eW(n,e,t)}function eW(n,e,t){Cp().f[2]++;const r=(Cp().s[4]++,{...n.sources,[e]:t});return Cp().s[5]++,{...n,sources:r}}const DAe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},FAe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},LAe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},UAe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},SR={openmaptiles:DAe,thunderforest_transport:FAe,thunderforest_outdoors:LAe,open_zoomstack:UAe};function cn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return cn=function(){return l},l}cn();class zAe extends Zn.Component{render(){return cn().f[0]++,cn().s[0]++,Ae.jsx("div",{className:"maputnik-public-source",children:Ae.jsxs(Xa,{className:"maputnik-public-source-select",onClick:()=>(cn().f[1]++,cn().s[1]++,this.props.onSelect(this.props.id)),children:[Ae.jsxs("div",{className:"maputnik-public-source-info",children:[Ae.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),Ae.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(JF,{})]})})}}function NAe(n){return cn().f[2]++,cn().s[2]++,n.type==="raster"?(cn().b[0][0]++,cn().s[3]++,n.tiles?(cn().b[1][0]++,cn().s[4]++,"tile_raster"):(cn().b[1][1]++,cn().s[5]++,"tilejson_raster")):(cn().b[0][1]++,cn().s[6]++,n.type==="raster-dem"?(cn().b[2][0]++,cn().s[7]++,n.tiles?(cn().b[3][0]++,cn().s[8]++,"tilexyz_raster-dem"):(cn().b[3][1]++,cn().s[9]++,"tilejson_raster-dem")):(cn().b[2][1]++,cn().s[10]++,n.type==="vector"?(cn().b[4][0]++,cn().s[11]++,n.tiles?(cn().b[5][0]++,cn().s[12]++,"tile_vector"):(cn().b[5][1]++,cn().s[13]++,cn().b[7][0]++,n.url&&(cn().b[7][1]++,n.url.startsWith("pmtiles://"))?(cn().b[6][0]++,cn().s[14]++,"pmtiles_vector"):(cn().b[6][1]++,cn().s[15]++,"tilejson_vector"))):(cn().b[4][1]++,cn().s[16]++,n.type==="geojson"?(cn().b[8][0]++,cn().s[17]++,typeof n.data=="string"?(cn().b[9][0]++,cn().s[18]++,"geojson_url"):(cn().b[9][1]++,cn().s[19]++,"geojson_json")):(cn().b[8][1]++,cn().s[20]++,n.type==="image"?(cn().b[10][0]++,cn().s[21]++,"image"):(cn().b[10][1]++,cn().s[22]++,n.type==="video"?(cn().b[11][0]++,cn().s[23]++,"video"):(cn().b[11][1]++,cn().s[24]++,null))))))}class WAe extends Zn.Component{render(){cn().f[3]++;const e=(cn().s[25]++,this.props.t);return cn().s[26]++,Ae.jsxs("div",{className:"maputnik-active-source-type-editor",children:[Ae.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[Ae.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(Xa,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(cn().f[4]++,cn().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:Ae.jsx(Uy,{})})]}),Ae.jsx("div",{className:"maputnik-active-source-type-editor-content",children:Ae.jsx(JN,{onChange:this.props.onChange,mode:NAe(this.props.source),source:this.props.source})})]})}}class jAe extends Zn.Component{constructor(t){cn().f[5]++,cn().s[28]++;super(t);Pn(this,"onAdd",(cn().s[45]++,()=>{cn().f[7]++;const{source:t,sourceId:r}=(cn().s[46]++,this.state);cn().s[47]++,this.props.onAdd(r,t)}));Pn(this,"onChangeSource",(cn().s[48]++,t=>{cn().f[8]++,cn().s[49]++,this.setState({source:t})}));cn().s[29]++,this.state={mode:"tilejson_vector",sourceId:Cc.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){cn().f[6]++;const r=(cn().s[30]++,cn().b[12][0]++,(cn().b[13][0]++,this.state||(cn().b[13][1]++,{})).source||(cn().b[12][1]++,{})),{protocol:i}=(cn().s[31]++,window.location);switch(cn().s[32]++,t){case"pmtiles_vector":return cn().b[14][0]++,cn().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return cn().b[14][1]++,cn().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return cn().b[14][2]++,cn().s[35]++,{type:"geojson",cluster:(cn().b[15][0]++,r.cluster||(cn().b[15][1]++,!1)),data:""};case"tilejson_vector":return cn().b[14][3]++,cn().s[36]++,{type:"vector",url:(cn().b[16][0]++,r.url||(cn().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return cn().b[14][4]++,cn().s[37]++,{type:"vector",tiles:(cn().b[17][0]++,r.tiles||(cn().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(cn().b[18][0]++,r.minzoom||(cn().b[18][1]++,0)),maxzoom:(cn().b[19][0]++,r.maxzoom||(cn().b[19][1]++,14)),scheme:(cn().b[20][0]++,r.scheme||(cn().b[20][1]++,"xyz"))};case"tilejson_raster":return cn().b[14][5]++,cn().s[38]++,{type:"raster",url:(cn().b[21][0]++,r.url||(cn().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return cn().b[14][6]++,cn().s[39]++,{type:"raster",tiles:(cn().b[22][0]++,r.tiles||(cn().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[23][0]++,r.minzoom||(cn().b[23][1]++,0)),maxzoom:(cn().b[24][0]++,r.maxzoom||(cn().b[24][1]++,14)),scheme:(cn().b[25][0]++,r.scheme||(cn().b[25][1]++,"xyz")),tileSize:(cn().b[26][0]++,r.tileSize||(cn().b[26][1]++,512))};case"tilejson_raster-dem":return cn().b[14][7]++,cn().s[40]++,{type:"raster-dem",url:(cn().b[27][0]++,r.url||(cn().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return cn().b[14][8]++,cn().s[41]++,{type:"raster-dem",tiles:(cn().b[28][0]++,r.tiles||(cn().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[29][0]++,r.minzoom||(cn().b[29][1]++,0)),maxzoom:(cn().b[30][0]++,r.maxzoom||(cn().b[30][1]++,14)),tileSize:(cn().b[31][0]++,r.tileSize||(cn().b[31][1]++,512))};case"image":return cn().b[14][9]++,cn().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return cn().b[14][10]++,cn().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return cn().b[14][11]++,cn().s[44]++,{}}}render(){cn().f[9]++;const t=(cn().s[50]++,this.props.t),r=(cn().s[51]++,{doc:Ho.source_vector.type.doc});return cn().s[52]++,Ae.jsxs("div",{className:"maputnik-add-source",children:[Ae.jsx(qp,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(cn().f[10]++,cn().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),Ae.jsx(s3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["pmtiles_vector",t("Vector (PMTiles)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(cn().f[11]++,cn().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),Ae.jsx(JN,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),Ae.jsx(Xa,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class GAe extends Zn.Component{stripTitle(e){cn().f[12]++;const t=(cn().s[55]++,{...e});return cn().s[56]++,delete t.title,cn().s[57]++,t}render(){cn().f[13]++;const{t:e,mapStyle:t}=(cn().s[58]++,this.props),r=(cn().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(cn().s[60]++,Object.keys(t.sources).map(l=>{cn().f[14]++;const o=(cn().s[61]++,t.sources[l]);return cn().s[62]++,Ae.jsx(WAe,{sourceId:l,source:o,onChange:p=>(cn().f[15]++,cn().s[63]++,this.props.onStyleChanged(eW(t,l,p))),onDelete:()=>(cn().f[16]++,cn().s[64]++,this.props.onStyleChanged(RAe(t,l))),...r},l)})),s=(cn().s[65]++,Object.keys(SR).filter(l=>(cn().f[17]++,cn().s[66]++,!(l in t.sources))).map(l=>{cn().f[18]++;const o=(cn().s[67]++,SR[l]);return cn().s[68]++,Ae.jsx(zAe,{id:l,type:o.type,title:o.title,onSelect:()=>(cn().f[19]++,cn().s[69]++,this.props.onStyleChanged(wR(t,l,this.stripTitle(o))))},l)}));return cn().s[70]++,Ae.jsxs(Y0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Active Sources")}),i]}),Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Choose Public Source")}),Ae.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),Ae.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Add New Source")}),Ae.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),Ae.jsx(jAe,{onAdd:(l,o)=>(cn().f[20]++,cn().s[71]++,this.props.onStyleChanged(wR(t,l,o))),...r})]})]})}}const QAe=(cn().s[72]++,Ns()(GAe));var _b={},ER;function YAe(){if(ER)return _b;ER=1,Object.defineProperty(_b,"__esModule",{value:!0});var n=Object.assign||function(D){for(var N=1;N<arguments.length;N++){var W=arguments[N];for(var V in W)Object.prototype.hasOwnProperty.call(W,V)&&(D[V]=W[V])}return D},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t=function(){function D(N,W){for(var V=0;V<W.length;V++){var $=W[V];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}return function(N,W,V){return W&&D(N.prototype,W),V&&D(N,V),N}}(),r=Da(),i=p(r),s=RC(),l=o(s);function o(D){return D&&D.__esModule?D:{default:D}}function p(D){if(D&&D.__esModule)return D;var N={};if(D!=null)for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(N[W]=D[W]);return N.default=D,N}function v(D,N){var W={};for(var V in D)N.indexOf(V)>=0||Object.prototype.hasOwnProperty.call(D,V)&&(W[V]=D[V]);return W}function x(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function B(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:D}function k(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}var P=function(D){k(N,D);function N(W){x(this,N);var V=B(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,W));V.handleChange=function(ie){var ne=Array.prototype.slice.call(ie.target.files),q=(V.props.as||"url").toLowerCase();Promise.all(ne.map(function(te){return new Promise(function(G,oe){var fe=new FileReader;switch(fe.onload=function(he){G([he,te])},q){case"binary":{fe.readAsBinaryString(te);break}case"buffer":{fe.readAsArrayBuffer(te);break}case"text":{fe.readAsText(te);break}case"url":{fe.readAsDataURL(te);break}}})})).then(function(te){V.props.onChange(ie,te)})},V.triggerInput=function(){var ie=l.default.findDOMNode(V._reactFileReaderInput);ie&&ie.click()};var $=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!$.File||!$.FileReader||!$.FileList||!$.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),V}return t(N,[{key:"render",value:function(){var V=this,$=this.props;$.as;var ie=$.children,ne=$.style,q=v($,["as","children","style"]),te=ie?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:ne},i.createElement("input",n({},q,{type:"file",ref:function(oe){V._reactFileReaderInput=oe},onChange:this.handleChange,onClick:function(){V._reactFileReaderInput.value=null},style:te})),ie)}}]),N}(i.Component);return _b.default=P,_b}var qAe=YAe();const VAe=dl(qAe);function dd(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dd=function(){return l},l}dd();class HAe extends Zn.Component{underlayOnClick(e){dd().f[0]++,dd().s[0]++,e.stopPropagation()}render(){dd().f[1]++;const e=(dd().s[1]++,this.props.t);return dd().s[2]++,Ae.jsxs(Y0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(dd().f[2]++,dd().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(dd().f[3]++,dd().s[4]++,this.props.onCancel()),children:[Ae.jsx("p",{children:this.props.message}),Ae.jsx("p",{className:"maputnik-dialog__buttons",children:Ae.jsx(Xa,{onClick:t=>(dd().f[4]++,dd().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const $Ae=(dd().s[6]++,Ns()(HAe)),tW=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function nr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return nr=function(){return l},l}nr();class ZAe extends Zn.Component{render(){return nr().f[0]++,nr().s[0]++,Ae.jsx("div",{className:"maputnik-public-style",children:Ae.jsxs(Xa,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(nr().f[1]++,nr().s[1]++,this.props.onSelect(this.props.url)),children:[Ae.jsxs("div",{className:"maputnik-public-style-header",children:[Ae.jsx("div",{children:this.props.title}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(JF,{})]}),Ae.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class XAe extends Zn.Component{constructor(t){nr().f[2]++,nr().s[2]++;super(t);Pn(this,"onStyleSelect",(nr().s[10]++,t=>{nr().f[5]++,nr().s[11]++,this.clearError();let r=(nr().s[12]++,!1);nr().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return nr().f[6]++,nr().s[14]++,i.json()}).then(i=>{if(nr().f[7]++,nr().s[15]++,r){nr().b[2][0]++,nr().s[16]++;return}else nr().b[2][1]++;nr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(nr().s[18]++,Cc.ensureStyleValidity(i));nr().s[19]++,console.log("Loaded style ",s.id),nr().s[20]++,this.props.onStyleOpen(s),nr().s[21]++,this.onOpenToggle()}).catch(i=>{nr().f[8]++,nr().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),nr().s[23]++,console.error(i),nr().s[24]++,console.warn("Could not open the style URL",t)}),nr().s[25]++,this.setState({activeRequest:{abort:function(){nr().f[9]++,nr().s[26]++,r=!0}},activeRequestUrl:t})}));Pn(this,"onSubmitUrl",(nr().s[27]++,t=>{nr().f[10]++,nr().s[28]++,t.preventDefault(),nr().s[29]++,this.onStyleSelect(this.state.styleUrl)}));Pn(this,"onOpenFile",(nr().s[30]++,async()=>{nr().f[11]++,nr().s[31]++,this.clearError();const t=(nr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(nr().s[33]++,await window.showOpenFilePicker(t)),i=(nr().s[34]++,await r.getFile()),s=(nr().s[35]++,await i.text());let l;nr().s[36]++;try{nr().s[37]++,l=JSON.parse(s)}catch(o){nr().s[38]++,this.setState({error:o.toString()}),nr().s[39]++;return}return nr().s[40]++,l=Cc.ensureStyleValidity(l),nr().s[41]++,this.props.onStyleOpen(l,r),nr().s[42]++,this.onOpenToggle(),nr().s[43]++,i}));Pn(this,"onFileChanged",(nr().s[44]++,async(t,r)=>{nr().f[12]++;const[,i]=(nr().s[45]++,r[0]),s=(nr().s[46]++,new FileReader);nr().s[47]++,this.clearError(),nr().s[48]++,s.readAsText(i,"UTF-8"),nr().s[49]++,s.onload=l=>{var p;nr().f[13]++;let o;nr().s[50]++;try{nr().s[51]++,o=JSON.parse((p=l.target)==null?void 0:p.result)}catch(v){nr().s[52]++,this.setState({error:v.toString()}),nr().s[53]++;return}nr().s[54]++,o=Cc.ensureStyleValidity(o),nr().s[55]++,this.props.onStyleOpen(o),nr().s[56]++,this.onOpenToggle()},nr().s[57]++,s.onerror=l=>(nr().f[14]++,nr().s[58]++,console.log(l.target))}));Pn(this,"onChangeUrl",(nr().s[62]++,t=>{nr().f[16]++,nr().s[63]++,this.setState({styleUrl:t})}));nr().s[3]++,this.state={styleUrl:""}}clearError(){nr().f[3]++,nr().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){nr().f[4]++,nr().s[5]++,t?(nr().b[0][0]++,nr().s[6]++,t.stopPropagation()):nr().b[0][1]++,nr().s[7]++,this.state.activeRequest?(nr().b[1][0]++,nr().s[8]++,this.state.activeRequest.abort(),nr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):nr().b[1][1]++}onOpenToggle(){nr().f[15]++,nr().s[59]++,this.setState({styleUrl:""}),nr().s[60]++,this.clearError(),nr().s[61]++,this.props.onOpenToggle()}render(){nr().f[17]++;const t=(nr().s[64]++,this.props.t),r=(nr().s[65]++,tW.map(s=>(nr().f[18]++,nr().s[66]++,Ae.jsx(ZAe,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return nr().s[67]++,this.state.error?(nr().b[3][0]++,nr().s[68]++,i=Ae.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,Ae.jsx("a",{href:"#",onClick:()=>(nr().f[19]++,nr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):nr().b[3][1]++,nr().s[70]++,Ae.jsxs("div",{children:[Ae.jsxs(Y0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(nr().f[20]++,nr().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:t("Open local Style")}),Ae.jsx("p",{children:t("Open a local JSON style from your computer.")}),Ae.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(nr().b[4][0]++,Ae.jsxs(Xa,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[Ae.jsx(N7,{})," ",t("Open Style")]})):(nr().b[4][1]++,Ae.jsx(VAe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:Ae.jsxs(Xa,{className:"maputnik-upload-button",children:[Ae.jsx(N7,{})," ",t("Open Style")]})}))})]}),Ae.jsx("section",{className:"maputnik-modal-section",children:Ae.jsxs("form",{onSubmit:this.onSubmitUrl,children:[Ae.jsx("h1",{children:t("Load from URL")}),Ae.jsx("p",{children:Ae.jsxs(R0,{t,children:["Load from a URL. Note that the URL must have ",Ae.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),Ae.jsx(i8,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),Ae.jsx("div",{children:Ae.jsx(Xa,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),Ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[Ae.jsx("h1",{children:t("Gallery Styles")}),Ae.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),Ae.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),Ae.jsx($Ae,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(nr().f[21]++,nr().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const JAe=(nr().s[73]++,Ns()(XAe));function If(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return If=function(){return l},l}If();class eue extends Zn.Component{render(){If().f[0]++;const e=(If().s[0]++,this.props.t),t=(If().s[1]++,[{key:Ae.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:Ae.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:Ae.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:Ae.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:Ae.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:Ae.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:Ae.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:Ae.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(If().s[2]++,[{key:Ae.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:Ae.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:Ae.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:Ae.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:Ae.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:Ae.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return If().s[3]++,Ae.jsx(Y0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:Ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[Ae.jsx("p",{children:Ae.jsxs(R0,{t:e,children:["Press ",Ae.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),Ae.jsx("dl",{children:t.map((i,s)=>(If().f[1]++,If().s[4]++,Ae.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[Ae.jsx("dt",{children:i.key},"dt"+s),Ae.jsx("dd",{children:i.text},"dd"+s)]},s)))}),Ae.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),Ae.jsx("ul",{children:r.map((i,s)=>(If().f[2]++,If().s[5]++,Ae.jsxs("li",{children:[Ae.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const tue=(If().s[6]++,Ns()(eue));function gu(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gu=function(){return l},l}gu();class nue extends Zn.Component{render(){gu().f[0]++;const{t:e,mapView:t}=(gu().s[0]++,this.props),r=(gu().s[1]++,Math.round(t.zoom)+1),i=(gu().s[2]++,+t.center.lng.toFixed(5)),s=(gu().s[3]++,+t.center.lat.toFixed(5));return gu().s[4]++,Ae.jsxs(Y0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[Ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[Ae.jsx("h1",{children:e("Options")}),(gu().b[0][0]++,this.props.renderer==="mlgljs"&&(gu().b[0][1]++,Ae.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(gu().f[1]++,gu().s[5]++,Ae.jsx("li",{children:Ae.jsxs("label",{children:[Ae.jsx("input",{type:"checkbox",checked:o,onChange:p=>(gu().f[2]++,gu().s[6]++,this.props.onChangeMaplibreGlDebug(l,p.target.checked))})," ",l]})},l)))}))),(gu().b[1][0]++,this.props.renderer==="ol"&&(gu().b[1][1]++,Ae.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(gu().f[3]++,gu().s[7]++,Ae.jsx("li",{children:Ae.jsxs("label",{children:[Ae.jsx("input",{type:"checkbox",checked:o,onChange:p=>(gu().f[4]++,gu().s[8]++,this.props.onChangeOpenlayersDebug(l,p.target.checked))})," ",l]})},l)))})))]}),Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:"Links"}),Ae.jsx("p",{children:Ae.jsxs(R0,{t:e,children:[Ae.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"}),"  Opens the current view on openstreetmap.org"]})})]})]})}}const rue=(gu().s[9]++,Ns()(nue));var Ag={},Wv={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var iue=Wv.exports,BR;function oue(){return BR||(BR=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=n&&!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var l,o=2147483647,p=36,v=1,x=26,B=38,k=700,P=72,D=128,N="-",W=/^xn--/,V=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,ie={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ne=p-v,q=Math.floor,te=String.fromCharCode,G;function oe(Pe){throw new RangeError(ie[Pe])}function fe(Pe,Le){for(var Xe=Pe.length,Ct=[];Xe--;)Ct[Xe]=Le(Pe[Xe]);return Ct}function he(Pe,Le){var Xe=Pe.split("@"),Ct="";Xe.length>1&&(Ct=Xe[0]+"@",Pe=Xe[1]),Pe=Pe.replace($,".");var Gt=Pe.split("."),mt=fe(Gt,Le).join(".");return Ct+mt}function Me(Pe){for(var Le=[],Xe=0,Ct=Pe.length,Gt,mt;Xe<Ct;)Gt=Pe.charCodeAt(Xe++),Gt>=55296&&Gt<=56319&&Xe<Ct?(mt=Pe.charCodeAt(Xe++),(mt&64512)==56320?Le.push(((Gt&1023)<<10)+(mt&1023)+65536):(Le.push(Gt),Xe--)):Le.push(Gt);return Le}function me(Pe){return fe(Pe,function(Le){var Xe="";return Le>65535&&(Le-=65536,Xe+=te(Le>>>10&1023|55296),Le=56320|Le&1023),Xe+=te(Le),Xe}).join("")}function pe(Pe){return Pe-48<10?Pe-22:Pe-65<26?Pe-65:Pe-97<26?Pe-97:p}function qe(Pe,Le){return Pe+22+75*(Pe<26)-((Le!=0)<<5)}function Se(Pe,Le,Xe){var Ct=0;for(Pe=Xe?q(Pe/k):Pe>>1,Pe+=q(Pe/Le);Pe>ne*x>>1;Ct+=p)Pe=q(Pe/ne);return q(Ct+(ne+1)*Pe/(Pe+B))}function vt(Pe){var Le=[],Xe=Pe.length,Ct,Gt=0,mt=D,Ut=P,kt,Te,Re,Ue,nt,_t,gt,Kt,$t;for(kt=Pe.lastIndexOf(N),kt<0&&(kt=0),Te=0;Te<kt;++Te)Pe.charCodeAt(Te)>=128&&oe("not-basic"),Le.push(Pe.charCodeAt(Te));for(Re=kt>0?kt+1:0;Re<Xe;){for(Ue=Gt,nt=1,_t=p;Re>=Xe&&oe("invalid-input"),gt=pe(Pe.charCodeAt(Re++)),(gt>=p||gt>q((o-Gt)/nt))&&oe("overflow"),Gt+=gt*nt,Kt=_t<=Ut?v:_t>=Ut+x?x:_t-Ut,!(gt<Kt);_t+=p)$t=p-Kt,nt>q(o/$t)&&oe("overflow"),nt*=$t;Ct=Le.length+1,Ut=Se(Gt-Ue,Ct,Ue==0),q(Gt/Ct)>o-mt&&oe("overflow"),mt+=q(Gt/Ct),Gt%=Ct,Le.splice(Gt++,0,mt)}return me(Le)}function Je(Pe){var Le,Xe,Ct,Gt,mt,Ut,kt,Te,Re,Ue,nt,_t=[],gt,Kt,$t,Rt;for(Pe=Me(Pe),gt=Pe.length,Le=D,Xe=0,mt=P,Ut=0;Ut<gt;++Ut)nt=Pe[Ut],nt<128&&_t.push(te(nt));for(Ct=Gt=_t.length,Gt&&_t.push(N);Ct<gt;){for(kt=o,Ut=0;Ut<gt;++Ut)nt=Pe[Ut],nt>=Le&&nt<kt&&(kt=nt);for(Kt=Ct+1,kt-Le>q((o-Xe)/Kt)&&oe("overflow"),Xe+=(kt-Le)*Kt,Le=kt,Ut=0;Ut<gt;++Ut)if(nt=Pe[Ut],nt<Le&&++Xe>o&&oe("overflow"),nt==Le){for(Te=Xe,Re=p;Ue=Re<=mt?v:Re>=mt+x?x:Re-mt,!(Te<Ue);Re+=p)Rt=Te-Ue,$t=p-Ue,_t.push(te(qe(Ue+Rt%$t,0))),Te=q(Rt/$t);_t.push(te(qe(Te,0))),mt=Se(Xe,Kt,Ct==Gt),Xe=0,++Ct}++Xe,++Le}return _t.join("")}function Ke(Pe){return he(Pe,function(Le){return W.test(Le)?vt(Le.slice(4).toLowerCase()):Le})}function je(Pe){return he(Pe,function(Le){return V.test(Le)?"xn--"+Je(Le):Le})}if(l={version:"1.4.1",ucs2:{decode:Me,encode:me},decode:vt,encode:Je,toASCII:je,toUnicode:Ke},r&&i)if(n.exports==r)i.exports=l;else for(G in l)l.hasOwnProperty(G)&&(r[G]=l[G]);else t.punycode=l})(iue)}(Wv,Wv.exports)),Wv.exports}var jS,OR;function qy(){return OR||(OR=1,jS=TypeError),jS}const sue={},aue=Object.freeze(Object.defineProperty({__proto__:null,default:sue},Symbol.toStringTag,{value:"Module"})),lue=Z6(aue);var GS,IR;function a3(){if(IR)return GS;IR=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,p=typeof WeakMap=="function"&&WeakMap.prototype,v=p?WeakMap.prototype.has:null,x=typeof WeakSet=="function"&&WeakSet.prototype,B=x?WeakSet.prototype.has:null,k=typeof WeakRef=="function"&&WeakRef.prototype,P=k?WeakRef.prototype.deref:null,D=Boolean.prototype.valueOf,N=Object.prototype.toString,W=Function.prototype.toString,V=String.prototype.match,$=String.prototype.slice,ie=String.prototype.replace,ne=String.prototype.toUpperCase,q=String.prototype.toLowerCase,te=RegExp.prototype.test,G=Array.prototype.concat,oe=Array.prototype.join,fe=Array.prototype.slice,he=Math.floor,Me=typeof BigInt=="function"?BigInt.prototype.valueOf:null,me=Object.getOwnPropertySymbols,pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Se=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qe||!0)?Symbol.toStringTag:null,vt=Object.prototype.propertyIsEnumerable,Je=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(He){return He.__proto__}:null);function Ke(He,ae){if(He===1/0||He===-1/0||He!==He||He&&He>-1e3&&He<1e3||te.call(/e/,ae))return ae;var _e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof He=="number"){var f=He<0?-he(-He):he(He);if(f!==He){var Qe=String(f),Ee=$.call(ae,Qe.length+1);return ie.call(Qe,_e,"$&_")+"."+ie.call(ie.call(Ee,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ie.call(ae,_e,"$&_")}var je=lue,Pe=je.custom,Le=gt(Pe)?Pe:null,Xe={__proto__:null,double:'"',single:"'"},Ct={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};GS=function He(ae,_e,f,Qe){var Ee=_e||{};if(Rt(Ee,"quoteStyle")&&!Rt(Xe,Ee.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Rt(Ee,"maxStringLength")&&(typeof Ee.maxStringLength=="number"?Ee.maxStringLength<0&&Ee.maxStringLength!==1/0:Ee.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var it=Rt(Ee,"customInspect")?Ee.customInspect:!0;if(typeof it!="boolean"&&it!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Rt(Ee,"indent")&&Ee.indent!==null&&Ee.indent!=="	"&&!(parseInt(Ee.indent,10)===Ee.indent&&Ee.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Rt(Ee,"numericSeparator")&&typeof Ee.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ut=Ee.numericSeparator;if(typeof ae>"u")return"undefined";if(ae===null)return"null";if(typeof ae=="boolean")return ae?"true":"false";if(typeof ae=="string")return hr(ae,Ee);if(typeof ae=="number"){if(ae===0)return 1/0/ae>0?"0":"-0";var at=String(ae);return ut?Ke(ae,at):at}if(typeof ae=="bigint"){var zt=String(ae)+"n";return ut?Ke(ae,zt):zt}var Qt=typeof Ee.depth>"u"?5:Ee.depth;if(typeof f>"u"&&(f=0),f>=Qt&&Qt>0&&typeof ae=="object")return Ut(ae)?"[Array]":"[Object]";var Nt=Ht(Ee,f);if(typeof Qe>"u")Qe=[];else if(nn(Qe,ae)>=0)return"[Circular]";function rn(_s,fs,Ja){if(fs&&(Qe=fe.call(Qe),Qe.push(fs)),Ja){var sa={depth:Ee.depth};return Rt(Ee,"quoteStyle")&&(sa.quoteStyle=Ee.quoteStyle),He(_s,sa,f+1,Qe)}return He(_s,Ee,f+1,Qe)}if(typeof ae=="function"&&!Te(ae)){var Rn=pr(ae),Dn=Jn(ae,rn);return"[Function"+(Rn?": "+Rn:" (anonymous)")+"]"+(Dn.length>0?" { "+oe.call(Dn,", ")+" }":"")}if(gt(ae)){var mr=qe?ie.call(String(ae),/^(Symbol\(.*\))_[^)]*$/,"$1"):pe.call(ae);return typeof ae=="object"&&!qe?ce(mr):mr}if(lr(ae)){for(var Tr="<"+q.call(String(ae.nodeName)),Jt=ae.attributes||[],br=0;br<Jt.length;br++)Tr+=" "+Jt[br].name+"="+Gt(mt(Jt[br].value),"double",Ee);return Tr+=">",ae.childNodes&&ae.childNodes.length&&(Tr+="..."),Tr+="</"+q.call(String(ae.nodeName))+">",Tr}if(Ut(ae)){if(ae.length===0)return"[]";var Gr=Jn(ae,rn);return Nt&&!Et(Gr)?"["+Zt(Gr,Nt)+"]":"[ "+oe.call(Gr,", ")+" ]"}if(Re(ae)){var Si=Jn(ae,rn);return!("cause"in Error.prototype)&&"cause"in ae&&!vt.call(ae,"cause")?"{ ["+String(ae)+"] "+oe.call(G.call("[cause]: "+rn(ae.cause),Si),", ")+" }":Si.length===0?"["+String(ae)+"]":"{ ["+String(ae)+"] "+oe.call(Si,", ")+" }"}if(typeof ae=="object"&&it){if(Le&&typeof ae[Le]=="function"&&je)return je(ae,{depth:Qt-f});if(it!=="symbol"&&typeof ae.inspect=="function")return ae.inspect()}if(Xn(ae)){var Fr=[];return r&&r.call(ae,function(_s,fs){Fr.push(rn(fs,ae,!0)+" => "+rn(_s,ae))}),rt("Map",t.call(ae),Fr,Nt)}if(Bn(ae)){var yn=[];return o&&o.call(ae,function(_s){yn.push(rn(_s,ae))}),rt("Set",l.call(ae),yn,Nt)}if(Fn(ae))return ye("WeakMap");if(Cr(ae))return ye("WeakSet");if(an(ae))return ye("WeakRef");if(nt(ae))return ce(rn(Number(ae)));if(Kt(ae))return ce(rn(Me.call(ae)));if(_t(ae))return ce(D.call(ae));if(Ue(ae))return ce(rn(String(ae)));if(typeof window<"u"&&ae===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ae===globalThis||typeof window<"u"&&ae===window)return"{ [object globalThis] }";if(!kt(ae)&&!Te(ae)){var ar=Jn(ae,rn),Pr=Je?Je(ae)===Object.prototype:ae instanceof Object||ae.constructor===Object,Cs=ae instanceof Object?"":"null prototype",Ao=!Pr&&Se&&Object(ae)===ae&&Se in ae?$.call(_n(ae),8,-1):Cs?"Object":"",ui=Pr||typeof ae.constructor!="function"?"":ae.constructor.name?ae.constructor.name+" ":"",$r=ui+(Ao||Cs?"["+oe.call(G.call([],Ao||[],Cs||[]),": ")+"] ":"");return ar.length===0?$r+"{}":Nt?$r+"{"+Zt(ar,Nt)+"}":$r+"{ "+oe.call(ar,", ")+" }"}return String(ae)};function Gt(He,ae,_e){var f=_e.quoteStyle||ae,Qe=Xe[f];return Qe+He+Qe}function mt(He){return ie.call(String(He),/"/g,"&quot;")}function Ut(He){return _n(He)==="[object Array]"&&(!Se||!(typeof He=="object"&&Se in He))}function kt(He){return _n(He)==="[object Date]"&&(!Se||!(typeof He=="object"&&Se in He))}function Te(He){return _n(He)==="[object RegExp]"&&(!Se||!(typeof He=="object"&&Se in He))}function Re(He){return _n(He)==="[object Error]"&&(!Se||!(typeof He=="object"&&Se in He))}function Ue(He){return _n(He)==="[object String]"&&(!Se||!(typeof He=="object"&&Se in He))}function nt(He){return _n(He)==="[object Number]"&&(!Se||!(typeof He=="object"&&Se in He))}function _t(He){return _n(He)==="[object Boolean]"&&(!Se||!(typeof He=="object"&&Se in He))}function gt(He){if(qe)return He&&typeof He=="object"&&He instanceof Symbol;if(typeof He=="symbol")return!0;if(!He||typeof He!="object"||!pe)return!1;try{return pe.call(He),!0}catch{}return!1}function Kt(He){if(!He||typeof He!="object"||!Me)return!1;try{return Me.call(He),!0}catch{}return!1}var $t=Object.prototype.hasOwnProperty||function(He){return He in this};function Rt(He,ae){return $t.call(He,ae)}function _n(He){return N.call(He)}function pr(He){if(He.name)return He.name;var ae=V.call(W.call(He),/^function\s*([\w$]+)/);return ae?ae[1]:null}function nn(He,ae){if(He.indexOf)return He.indexOf(ae);for(var _e=0,f=He.length;_e<f;_e++)if(He[_e]===ae)return _e;return-1}function Xn(He){if(!t||!He||typeof He!="object")return!1;try{t.call(He);try{l.call(He)}catch{return!0}return He instanceof Map}catch{}return!1}function Fn(He){if(!v||!He||typeof He!="object")return!1;try{v.call(He,v);try{B.call(He,B)}catch{return!0}return He instanceof WeakMap}catch{}return!1}function an(He){if(!P||!He||typeof He!="object")return!1;try{return P.call(He),!0}catch{}return!1}function Bn(He){if(!l||!He||typeof He!="object")return!1;try{l.call(He);try{t.call(He)}catch{return!0}return He instanceof Set}catch{}return!1}function Cr(He){if(!B||!He||typeof He!="object")return!1;try{B.call(He,B);try{v.call(He,v)}catch{return!0}return He instanceof WeakSet}catch{}return!1}function lr(He){return!He||typeof He!="object"?!1:typeof HTMLElement<"u"&&He instanceof HTMLElement?!0:typeof He.nodeName=="string"&&typeof He.getAttribute=="function"}function hr(He,ae){if(He.length>ae.maxStringLength){var _e=He.length-ae.maxStringLength,f="... "+_e+" more character"+(_e>1?"s":"");return hr($.call(He,0,ae.maxStringLength),ae)+f}var Qe=Ct[ae.quoteStyle||"single"];Qe.lastIndex=0;var Ee=ie.call(ie.call(He,Qe,"\\$1"),/[\x00-\x1f]/g,We);return Gt(Ee,"single",ae)}function We(He){var ae=He.charCodeAt(0),_e={8:"b",9:"t",10:"n",12:"f",13:"r"}[ae];return _e?"\\"+_e:"\\x"+(ae<16?"0":"")+ne.call(ae.toString(16))}function ce(He){return"Object("+He+")"}function ye(He){return He+" { ? }"}function rt(He,ae,_e,f){var Qe=f?Zt(_e,f):oe.call(_e,", ");return He+" ("+ae+") {"+Qe+"}"}function Et(He){for(var ae=0;ae<He.length;ae++)if(nn(He[ae],`
`)>=0)return!1;return!0}function Ht(He,ae){var _e;if(He.indent==="	")_e="	";else if(typeof He.indent=="number"&&He.indent>0)_e=oe.call(Array(He.indent+1)," ");else return null;return{base:_e,prev:oe.call(Array(ae+1),_e)}}function Zt(He,ae){if(He.length===0)return"";var _e=`
`+ae.prev+ae.base;return _e+oe.call(He,","+_e)+`
`+ae.prev}function Jn(He,ae){var _e=Ut(He),f=[];if(_e){f.length=He.length;for(var Qe=0;Qe<He.length;Qe++)f[Qe]=Rt(He,Qe)?ae(He[Qe],He):""}var Ee=typeof me=="function"?me(He):[],it;if(qe){it={};for(var ut=0;ut<Ee.length;ut++)it["$"+Ee[ut]]=Ee[ut]}for(var at in He)Rt(He,at)&&(_e&&String(Number(at))===at&&at<He.length||qe&&it["$"+at]instanceof Symbol||(te.call(/[^\w$]/,at)?f.push(ae(at,He)+": "+ae(He[at],He)):f.push(at+": "+ae(He[at],He))));if(typeof me=="function")for(var zt=0;zt<Ee.length;zt++)vt.call(He,Ee[zt])&&f.push("["+ae(Ee[zt])+"]: "+ae(He[Ee[zt]],He));return f}return GS}var QS,TR;function Aue(){if(TR)return QS;TR=1;var n=a3(),e=qy(),t=function(o,p,v){for(var x=o,B;(B=x.next)!=null;x=B)if(B.key===p)return x.next=B.next,v||(B.next=o.next,o.next=B),B},r=function(o,p){if(o){var v=t(o,p);return v&&v.value}},i=function(o,p,v){var x=t(o,p);x?x.value=v:o.next={key:p,next:o.next,value:v}},s=function(o,p){return o?!!t(o,p):!1},l=function(o,p){if(o)return t(o,p,!0)};return QS=function(){var p,v={assert:function(x){if(!v.has(x))throw new e("Side channel does not contain "+n(x))},delete:function(x){var B=p&&p.next,k=l(p,x);return k&&B&&B===k&&(p=void 0),!!k},get:function(x){return r(p,x)},has:function(x){return s(p,x)},set:function(x,B){p||(p={next:void 0}),i(p,x,B)}};return v},QS}var YS,kR;function nW(){return kR||(kR=1,YS=Object),YS}var qS,PR;function uue(){return PR||(PR=1,qS=Error),qS}var VS,KR;function cue(){return KR||(KR=1,VS=EvalError),VS}var HS,RR;function hue(){return RR||(RR=1,HS=RangeError),HS}var $S,DR;function due(){return DR||(DR=1,$S=ReferenceError),$S}var ZS,FR;function fue(){return FR||(FR=1,ZS=SyntaxError),ZS}var XS,LR;function pue(){return LR||(LR=1,XS=URIError),XS}var JS,UR;function mue(){return UR||(UR=1,JS=Math.abs),JS}var eE,zR;function gue(){return zR||(zR=1,eE=Math.floor),eE}var tE,NR;function yue(){return NR||(NR=1,tE=Math.max),tE}var nE,WR;function vue(){return WR||(WR=1,nE=Math.min),nE}var rE,jR;function Cue(){return jR||(jR=1,rE=Math.pow),rE}var iE,GR;function _ue(){return GR||(GR=1,iE=Math.round),iE}var oE,QR;function bue(){return QR||(QR=1,oE=Number.isNaN||function(e){return e!==e}),oE}var sE,YR;function xue(){if(YR)return sE;YR=1;var n=bue();return sE=function(t){return n(t)||t===0?t:t<0?-1:1},sE}var aE,qR;function Mue(){return qR||(qR=1,aE=Object.getOwnPropertyDescriptor),aE}var lE,VR;function rW(){if(VR)return lE;VR=1;var n=Mue();if(n)try{n([],"length")}catch{n=null}return lE=n,lE}var AE,HR;function wue(){if(HR)return AE;HR=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return AE=n,AE}var uE,$R;function Sue(){return $R||($R=1,uE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),uE}var cE,ZR;function Eue(){if(ZR)return cE;ZR=1;var n=typeof Symbol<"u"&&Symbol,e=Sue();return cE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},cE}var hE,XR;function iW(){return XR||(XR=1,hE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),hE}var dE,JR;function oW(){if(JR)return dE;JR=1;var n=nW();return dE=n.getPrototypeOf||null,dE}var fE,eD;function Bue(){if(eD)return fE;eD=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(p,v){for(var x=[],B=0;B<p.length;B+=1)x[B]=p[B];for(var k=0;k<v.length;k+=1)x[k+p.length]=v[k];return x},s=function(p,v){for(var x=[],B=v,k=0;B<p.length;B+=1,k+=1)x[k]=p[B];return x},l=function(o,p){for(var v="",x=0;x<o.length;x+=1)v+=o[x],x+1<o.length&&(v+=p);return v};return fE=function(p){var v=this;if(typeof v!="function"||e.apply(v)!==r)throw new TypeError(n+v);for(var x=s(arguments,1),B,k=function(){if(this instanceof B){var V=v.apply(this,i(x,arguments));return Object(V)===V?V:this}return v.apply(p,i(x,arguments))},P=t(0,v.length-x.length),D=[],N=0;N<P;N++)D[N]="$"+N;if(B=Function("binder","return function ("+l(D,",")+"){ return binder.apply(this,arguments); }")(k),v.prototype){var W=function(){};W.prototype=v.prototype,B.prototype=new W,W.prototype=null}return B},fE}var pE,tD;function l3(){if(tD)return pE;tD=1;var n=Bue();return pE=Function.prototype.bind||n,pE}var mE,nD;function a8(){return nD||(nD=1,mE=Function.prototype.call),mE}var gE,rD;function sW(){return rD||(rD=1,gE=Function.prototype.apply),gE}var yE,iD;function Oue(){return iD||(iD=1,yE=typeof Reflect<"u"&&Reflect&&Reflect.apply),yE}var vE,oD;function Iue(){if(oD)return vE;oD=1;var n=l3(),e=sW(),t=a8(),r=Oue();return vE=r||n.call(t,e),vE}var CE,sD;function aW(){if(sD)return CE;sD=1;var n=l3(),e=qy(),t=a8(),r=Iue();return CE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},CE}var _E,aD;function Tue(){if(aD)return _E;aD=1;var n=aW(),e=rW(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return _E=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,_E}var bE,lD;function kue(){if(lD)return bE;lD=1;var n=iW(),e=oW(),t=Tue();return bE=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,bE}var xE,AD;function Pue(){if(AD)return xE;AD=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=l3();return xE=t.call(n,e),xE}var ME,uD;function l8(){if(uD)return ME;uD=1;var n,e=nW(),t=uue(),r=cue(),i=hue(),s=due(),l=fue(),o=qy(),p=pue(),v=mue(),x=gue(),B=yue(),k=vue(),P=Cue(),D=_ue(),N=xue(),W=Function,V=function(Re){try{return W('"use strict"; return ('+Re+").constructor;")()}catch{}},$=rW(),ie=wue(),ne=function(){throw new o},q=$?function(){try{return arguments.callee,ne}catch{try{return $(arguments,"callee").get}catch{return ne}}}():ne,te=Eue()(),G=kue(),oe=oW(),fe=iW(),he=sW(),Me=a8(),me={},pe=typeof Uint8Array>"u"||!G?n:G(Uint8Array),qe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":te&&G?G([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":me,"%AsyncGenerator%":me,"%AsyncGeneratorFunction%":me,"%AsyncIteratorPrototype%":me,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":W,"%GeneratorFunction%":me,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":te&&G?G(G([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!te||!G?n:G(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":$,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!te||!G?n:G(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":te&&G?G(""[Symbol.iterator]()):n,"%Symbol%":te?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":q,"%TypedArray%":pe,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Me,"%Function.prototype.apply%":he,"%Object.defineProperty%":ie,"%Object.getPrototypeOf%":oe,"%Math.abs%":v,"%Math.floor%":x,"%Math.max%":B,"%Math.min%":k,"%Math.pow%":P,"%Math.round%":D,"%Math.sign%":N,"%Reflect.getPrototypeOf%":fe};if(G)try{null.error}catch(Re){var Se=G(G(Re));qe["%Error.prototype%"]=Se}var vt=function Re(Ue){var nt;if(Ue==="%AsyncFunction%")nt=V("async function () {}");else if(Ue==="%GeneratorFunction%")nt=V("function* () {}");else if(Ue==="%AsyncGeneratorFunction%")nt=V("async function* () {}");else if(Ue==="%AsyncGenerator%"){var _t=Re("%AsyncGeneratorFunction%");_t&&(nt=_t.prototype)}else if(Ue==="%AsyncIteratorPrototype%"){var gt=Re("%AsyncGenerator%");gt&&G&&(nt=G(gt.prototype))}return qe[Ue]=nt,nt},Je={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ke=l3(),je=Pue(),Pe=Ke.call(Me,Array.prototype.concat),Le=Ke.call(he,Array.prototype.splice),Xe=Ke.call(Me,String.prototype.replace),Ct=Ke.call(Me,String.prototype.slice),Gt=Ke.call(Me,RegExp.prototype.exec),mt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ut=/\\(\\)?/g,kt=function(Ue){var nt=Ct(Ue,0,1),_t=Ct(Ue,-1);if(nt==="%"&&_t!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(_t==="%"&&nt!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var gt=[];return Xe(Ue,mt,function(Kt,$t,Rt,_n){gt[gt.length]=Rt?Xe(_n,Ut,"$1"):$t||Kt}),gt},Te=function(Ue,nt){var _t=Ue,gt;if(je(Je,_t)&&(gt=Je[_t],_t="%"+gt[0]+"%"),je(qe,_t)){var Kt=qe[_t];if(Kt===me&&(Kt=vt(_t)),typeof Kt>"u"&&!nt)throw new o("intrinsic "+Ue+" exists, but is not available. Please file an issue!");return{alias:gt,name:_t,value:Kt}}throw new l("intrinsic "+Ue+" does not exist!")};return ME=function(Ue,nt){if(typeof Ue!="string"||Ue.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof nt!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Gt(/^%?[^%]*%?$/,Ue)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _t=kt(Ue),gt=_t.length>0?_t[0]:"",Kt=Te("%"+gt+"%",nt),$t=Kt.name,Rt=Kt.value,_n=!1,pr=Kt.alias;pr&&(gt=pr[0],Le(_t,Pe([0,1],pr)));for(var nn=1,Xn=!0;nn<_t.length;nn+=1){var Fn=_t[nn],an=Ct(Fn,0,1),Bn=Ct(Fn,-1);if((an==='"'||an==="'"||an==="`"||Bn==='"'||Bn==="'"||Bn==="`")&&an!==Bn)throw new l("property names with quotes must have matching quotes");if((Fn==="constructor"||!Xn)&&(_n=!0),gt+="."+Fn,$t="%"+gt+"%",je(qe,$t))Rt=qe[$t];else if(Rt!=null){if(!(Fn in Rt)){if(!nt)throw new o("base intrinsic for "+Ue+" exists, but the property is not available.");return}if($&&nn+1>=_t.length){var Cr=$(Rt,Fn);Xn=!!Cr,Xn&&"get"in Cr&&!("originalValue"in Cr.get)?Rt=Cr.get:Rt=Rt[Fn]}else Xn=je(Rt,Fn),Rt=Rt[Fn];Xn&&!_n&&(qe[$t]=Rt)}}return Rt},ME}var wE,cD;function lW(){if(cD)return wE;cD=1;var n=l8(),e=aW(),t=e([n("%String.prototype.indexOf%")]);return wE=function(i,s){var l=n(i,!!s);return typeof l=="function"&&t(i,".prototype.")>-1?e([l]):l},wE}var SE,hD;function AW(){if(hD)return SE;hD=1;var n=l8(),e=lW(),t=a3(),r=qy(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),p=e("Map.prototype.delete",!0),v=e("Map.prototype.size",!0);return SE=!!i&&function(){var B,k={assert:function(P){if(!k.has(P))throw new r("Side channel does not contain "+t(P))},delete:function(P){if(B){var D=p(B,P);return v(B)===0&&(B=void 0),D}return!1},get:function(P){if(B)return s(B,P)},has:function(P){return B?o(B,P):!1},set:function(P,D){B||(B=new i),l(B,P,D)}};return k},SE}var EE,dD;function Kue(){if(dD)return EE;dD=1;var n=l8(),e=lW(),t=a3(),r=AW(),i=qy(),s=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),p=e("WeakMap.prototype.has",!0),v=e("WeakMap.prototype.delete",!0);return EE=s?function(){var B,k,P={assert:function(D){if(!P.has(D))throw new i("Side channel does not contain "+t(D))},delete:function(D){if(s&&D&&(typeof D=="object"||typeof D=="function")){if(B)return v(B,D)}else if(r&&k)return k.delete(D);return!1},get:function(D){return s&&D&&(typeof D=="object"||typeof D=="function")&&B?l(B,D):k&&k.get(D)},has:function(D){return s&&D&&(typeof D=="object"||typeof D=="function")&&B?p(B,D):!!k&&k.has(D)},set:function(D,N){s&&D&&(typeof D=="object"||typeof D=="function")?(B||(B=new s),o(B,D,N)):r&&(k||(k=r()),k.set(D,N))}};return P}:r,EE}var BE,fD;function Rue(){if(fD)return BE;fD=1;var n=qy(),e=a3(),t=Aue(),r=AW(),i=Kue(),s=i||r||t;return BE=function(){var o,p={assert:function(v){if(!p.has(v))throw new n("Side channel does not contain "+e(v))},delete:function(v){return!!o&&o.delete(v)},get:function(v){return o&&o.get(v)},has:function(v){return!!o&&o.has(v)},set:function(v,x){o||(o=s()),o.set(v,x)}};return p},BE}var OE,pD;function A8(){if(pD)return OE;pD=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return OE={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},OE}var IE,mD;function uW(){if(mD)return IE;mD=1;var n=A8(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var W=[],V=0;V<256;++V)W.push("%"+((V<16?"0":"")+V.toString(16)).toUpperCase());return W}(),i=function(V){for(;V.length>1;){var $=V.pop(),ie=$.obj[$.prop];if(t(ie)){for(var ne=[],q=0;q<ie.length;++q)typeof ie[q]<"u"&&ne.push(ie[q]);$.obj[$.prop]=ne}}},s=function(V,$){for(var ie=$&&$.plainObjects?{__proto__:null}:{},ne=0;ne<V.length;++ne)typeof V[ne]<"u"&&(ie[ne]=V[ne]);return ie},l=function W(V,$,ie){if(!$)return V;if(typeof $!="object"&&typeof $!="function"){if(t(V))V.push($);else if(V&&typeof V=="object")(ie&&(ie.plainObjects||ie.allowPrototypes)||!e.call(Object.prototype,$))&&(V[$]=!0);else return[V,$];return V}if(!V||typeof V!="object")return[V].concat($);var ne=V;return t(V)&&!t($)&&(ne=s(V,ie)),t(V)&&t($)?($.forEach(function(q,te){if(e.call(V,te)){var G=V[te];G&&typeof G=="object"&&q&&typeof q=="object"?V[te]=W(G,q,ie):V.push(q)}else V[te]=q}),V):Object.keys($).reduce(function(q,te){var G=$[te];return e.call(q,te)?q[te]=W(q[te],G,ie):q[te]=G,q},ne)},o=function(V,$){return Object.keys($).reduce(function(ie,ne){return ie[ne]=$[ne],ie},V)},p=function(W,V,$){var ie=W.replace(/\+/g," ");if($==="iso-8859-1")return ie.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ie)}catch{return ie}},v=1024,x=function(V,$,ie,ne,q){if(V.length===0)return V;var te=V;if(typeof V=="symbol"?te=Symbol.prototype.toString.call(V):typeof V!="string"&&(te=String(V)),ie==="iso-8859-1")return escape(te).replace(/%u[0-9a-f]{4}/gi,function(pe){return"%26%23"+parseInt(pe.slice(2),16)+"%3B"});for(var G="",oe=0;oe<te.length;oe+=v){for(var fe=te.length>=v?te.slice(oe,oe+v):te,he=[],Me=0;Me<fe.length;++Me){var me=fe.charCodeAt(Me);if(me===45||me===46||me===95||me===126||me>=48&&me<=57||me>=65&&me<=90||me>=97&&me<=122||q===n.RFC1738&&(me===40||me===41)){he[he.length]=fe.charAt(Me);continue}if(me<128){he[he.length]=r[me];continue}if(me<2048){he[he.length]=r[192|me>>6]+r[128|me&63];continue}if(me<55296||me>=57344){he[he.length]=r[224|me>>12]+r[128|me>>6&63]+r[128|me&63];continue}Me+=1,me=65536+((me&1023)<<10|fe.charCodeAt(Me)&1023),he[he.length]=r[240|me>>18]+r[128|me>>12&63]+r[128|me>>6&63]+r[128|me&63]}G+=he.join("")}return G},B=function(V){for(var $=[{obj:{o:V},prop:"o"}],ie=[],ne=0;ne<$.length;++ne)for(var q=$[ne],te=q.obj[q.prop],G=Object.keys(te),oe=0;oe<G.length;++oe){var fe=G[oe],he=te[fe];typeof he=="object"&&he!==null&&ie.indexOf(he)===-1&&($.push({obj:te,prop:fe}),ie.push(he))}return i($),V},k=function(V){return Object.prototype.toString.call(V)==="[object RegExp]"},P=function(V){return!V||typeof V!="object"?!1:!!(V.constructor&&V.constructor.isBuffer&&V.constructor.isBuffer(V))},D=function(V,$){return[].concat(V,$)},N=function(V,$){if(t(V)){for(var ie=[],ne=0;ne<V.length;ne+=1)ie.push($(V[ne]));return ie}return $(V)};return IE={arrayToObject:s,assign:o,combine:D,compact:B,decode:p,encode:x,isBuffer:P,isRegExp:k,maybeMap:N,merge:l},IE}var TE,gD;function Due(){if(gD)return TE;gD=1;var n=Rue(),e=uW(),t=A8(),r=Object.prototype.hasOwnProperty,i={brackets:function(W){return W+"[]"},comma:"comma",indices:function(W,V){return W+"["+V+"]"},repeat:function(W){return W}},s=Array.isArray,l=Array.prototype.push,o=function(N,W){l.apply(N,s(W)?W:[W])},p=Date.prototype.toISOString,v=t.default,x={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:v,formatter:t.formatters[v],indices:!1,serializeDate:function(W){return p.call(W)},skipNulls:!1,strictNullHandling:!1},B=function(W){return typeof W=="string"||typeof W=="number"||typeof W=="boolean"||typeof W=="symbol"||typeof W=="bigint"},k={},P=function N(W,V,$,ie,ne,q,te,G,oe,fe,he,Me,me,pe,qe,Se,vt,Je){for(var Ke=W,je=Je,Pe=0,Le=!1;(je=je.get(k))!==void 0&&!Le;){var Xe=je.get(W);if(Pe+=1,typeof Xe<"u"){if(Xe===Pe)throw new RangeError("Cyclic object value");Le=!0}typeof je.get(k)>"u"&&(Pe=0)}if(typeof fe=="function"?Ke=fe(V,Ke):Ke instanceof Date?Ke=me(Ke):$==="comma"&&s(Ke)&&(Ke=e.maybeMap(Ke,function($t){return $t instanceof Date?me($t):$t})),Ke===null){if(q)return oe&&!Se?oe(V,x.encoder,vt,"key",pe):V;Ke=""}if(B(Ke)||e.isBuffer(Ke)){if(oe){var Ct=Se?V:oe(V,x.encoder,vt,"key",pe);return[qe(Ct)+"="+qe(oe(Ke,x.encoder,vt,"value",pe))]}return[qe(V)+"="+qe(String(Ke))]}var Gt=[];if(typeof Ke>"u")return Gt;var mt;if($==="comma"&&s(Ke))Se&&oe&&(Ke=e.maybeMap(Ke,oe)),mt=[{value:Ke.length>0?Ke.join(",")||null:void 0}];else if(s(fe))mt=fe;else{var Ut=Object.keys(Ke);mt=he?Ut.sort(he):Ut}var kt=G?String(V).replace(/\./g,"%2E"):String(V),Te=ie&&s(Ke)&&Ke.length===1?kt+"[]":kt;if(ne&&s(Ke)&&Ke.length===0)return Te+"[]";for(var Re=0;Re<mt.length;++Re){var Ue=mt[Re],nt=typeof Ue=="object"&&Ue&&typeof Ue.value<"u"?Ue.value:Ke[Ue];if(!(te&&nt===null)){var _t=Me&&G?String(Ue).replace(/\./g,"%2E"):String(Ue),gt=s(Ke)?typeof $=="function"?$(Te,_t):Te:Te+(Me?"."+_t:"["+_t+"]");Je.set(W,Pe);var Kt=n();Kt.set(k,Je),o(Gt,N(nt,gt,$,ie,ne,q,te,G,$==="comma"&&Se&&s(Ke)?null:oe,fe,he,Me,me,pe,qe,Se,vt,Kt))}}return Gt},D=function(W){if(!W)return x;if(typeof W.allowEmptyArrays<"u"&&typeof W.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof W.encodeDotInKeys<"u"&&typeof W.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(W.encoder!==null&&typeof W.encoder<"u"&&typeof W.encoder!="function")throw new TypeError("Encoder has to be a function.");var V=W.charset||x.charset;if(typeof W.charset<"u"&&W.charset!=="utf-8"&&W.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var $=t.default;if(typeof W.format<"u"){if(!r.call(t.formatters,W.format))throw new TypeError("Unknown format option provided.");$=W.format}var ie=t.formatters[$],ne=x.filter;(typeof W.filter=="function"||s(W.filter))&&(ne=W.filter);var q;if(W.arrayFormat in i?q=W.arrayFormat:"indices"in W?q=W.indices?"indices":"repeat":q=x.arrayFormat,"commaRoundTrip"in W&&typeof W.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var te=typeof W.allowDots>"u"?W.encodeDotInKeys===!0?!0:x.allowDots:!!W.allowDots;return{addQueryPrefix:typeof W.addQueryPrefix=="boolean"?W.addQueryPrefix:x.addQueryPrefix,allowDots:te,allowEmptyArrays:typeof W.allowEmptyArrays=="boolean"?!!W.allowEmptyArrays:x.allowEmptyArrays,arrayFormat:q,charset:V,charsetSentinel:typeof W.charsetSentinel=="boolean"?W.charsetSentinel:x.charsetSentinel,commaRoundTrip:!!W.commaRoundTrip,delimiter:typeof W.delimiter>"u"?x.delimiter:W.delimiter,encode:typeof W.encode=="boolean"?W.encode:x.encode,encodeDotInKeys:typeof W.encodeDotInKeys=="boolean"?W.encodeDotInKeys:x.encodeDotInKeys,encoder:typeof W.encoder=="function"?W.encoder:x.encoder,encodeValuesOnly:typeof W.encodeValuesOnly=="boolean"?W.encodeValuesOnly:x.encodeValuesOnly,filter:ne,format:$,formatter:ie,serializeDate:typeof W.serializeDate=="function"?W.serializeDate:x.serializeDate,skipNulls:typeof W.skipNulls=="boolean"?W.skipNulls:x.skipNulls,sort:typeof W.sort=="function"?W.sort:null,strictNullHandling:typeof W.strictNullHandling=="boolean"?W.strictNullHandling:x.strictNullHandling}};return TE=function(N,W){var V=N,$=D(W),ie,ne;typeof $.filter=="function"?(ne=$.filter,V=ne("",V)):s($.filter)&&(ne=$.filter,ie=ne);var q=[];if(typeof V!="object"||V===null)return"";var te=i[$.arrayFormat],G=te==="comma"&&$.commaRoundTrip;ie||(ie=Object.keys(V)),$.sort&&ie.sort($.sort);for(var oe=n(),fe=0;fe<ie.length;++fe){var he=ie[fe],Me=V[he];$.skipNulls&&Me===null||o(q,P(Me,he,te,G,$.allowEmptyArrays,$.strictNullHandling,$.skipNulls,$.encodeDotInKeys,$.encode?$.encoder:null,$.filter,$.sort,$.allowDots,$.serializeDate,$.format,$.formatter,$.encodeValuesOnly,$.charset,oe))}var me=q.join($.delimiter),pe=$.addQueryPrefix===!0?"?":"";return $.charsetSentinel&&($.charset==="iso-8859-1"?pe+="utf8=%26%2310003%3B&":pe+="utf8=%E2%9C%93&"),me.length>0?pe+me:""},TE}var kE,yD;function Fue(){if(yD)return kE;yD=1;var n=uW(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(k){return k.replace(/&#(\d+);/g,function(P,D){return String.fromCharCode(parseInt(D,10))})},s=function(k,P,D){if(k&&typeof k=="string"&&P.comma&&k.indexOf(",")>-1)return k.split(",");if(P.throwOnLimitExceeded&&D>=P.arrayLimit)throw new RangeError("Array limit exceeded. Only "+P.arrayLimit+" element"+(P.arrayLimit===1?"":"s")+" allowed in an array.");return k},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",p=function(P,D){var N={__proto__:null},W=D.ignoreQueryPrefix?P.replace(/^\?/,""):P;W=W.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var V=D.parameterLimit===1/0?void 0:D.parameterLimit,$=W.split(D.delimiter,D.throwOnLimitExceeded?V+1:V);if(D.throwOnLimitExceeded&&$.length>V)throw new RangeError("Parameter limit exceeded. Only "+V+" parameter"+(V===1?"":"s")+" allowed.");var ie=-1,ne,q=D.charset;if(D.charsetSentinel)for(ne=0;ne<$.length;++ne)$[ne].indexOf("utf8=")===0&&($[ne]===o?q="utf-8":$[ne]===l&&(q="iso-8859-1"),ie=ne,ne=$.length);for(ne=0;ne<$.length;++ne)if(ne!==ie){var te=$[ne],G=te.indexOf("]="),oe=G===-1?te.indexOf("="):G+1,fe,he;oe===-1?(fe=D.decoder(te,r.decoder,q,"key"),he=D.strictNullHandling?null:""):(fe=D.decoder(te.slice(0,oe),r.decoder,q,"key"),he=n.maybeMap(s(te.slice(oe+1),D,t(N[fe])?N[fe].length:0),function(me){return D.decoder(me,r.decoder,q,"value")})),he&&D.interpretNumericEntities&&q==="iso-8859-1"&&(he=i(String(he))),te.indexOf("[]=")>-1&&(he=t(he)?[he]:he);var Me=e.call(N,fe);Me&&D.duplicates==="combine"?N[fe]=n.combine(N[fe],he):(!Me||D.duplicates==="last")&&(N[fe]=he)}return N},v=function(k,P,D,N){var W=0;if(k.length>0&&k[k.length-1]==="[]"){var V=k.slice(0,-1).join("");W=Array.isArray(P)&&P[V]?P[V].length:0}for(var $=N?P:s(P,D,W),ie=k.length-1;ie>=0;--ie){var ne,q=k[ie];if(q==="[]"&&D.parseArrays)ne=D.allowEmptyArrays&&($===""||D.strictNullHandling&&$===null)?[]:n.combine([],$);else{ne=D.plainObjects?{__proto__:null}:{};var te=q.charAt(0)==="["&&q.charAt(q.length-1)==="]"?q.slice(1,-1):q,G=D.decodeDotInKeys?te.replace(/%2E/g,"."):te,oe=parseInt(G,10);!D.parseArrays&&G===""?ne={0:$}:!isNaN(oe)&&q!==G&&String(oe)===G&&oe>=0&&D.parseArrays&&oe<=D.arrayLimit?(ne=[],ne[oe]=$):G!=="__proto__"&&(ne[G]=$)}$=ne}return $},x=function(P,D,N,W){if(P){var V=N.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P,$=/(\[[^[\]]*])/,ie=/(\[[^[\]]*])/g,ne=N.depth>0&&$.exec(V),q=ne?V.slice(0,ne.index):V,te=[];if(q){if(!N.plainObjects&&e.call(Object.prototype,q)&&!N.allowPrototypes)return;te.push(q)}for(var G=0;N.depth>0&&(ne=ie.exec(V))!==null&&G<N.depth;){if(G+=1,!N.plainObjects&&e.call(Object.prototype,ne[1].slice(1,-1))&&!N.allowPrototypes)return;te.push(ne[1])}if(ne){if(N.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+N.depth+" and strictDepth is true");te.push("["+V.slice(ne.index)+"]")}return v(te,D,N,W)}},B=function(P){if(!P)return r;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.decodeDotInKeys<"u"&&typeof P.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(P.decoder!==null&&typeof P.decoder<"u"&&typeof P.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof P.throwOnLimitExceeded<"u"&&typeof P.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var D=typeof P.charset>"u"?r.charset:P.charset,N=typeof P.duplicates>"u"?r.duplicates:P.duplicates;if(N!=="combine"&&N!=="first"&&N!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var W=typeof P.allowDots>"u"?P.decodeDotInKeys===!0?!0:r.allowDots:!!P.allowDots;return{allowDots:W,allowEmptyArrays:typeof P.allowEmptyArrays=="boolean"?!!P.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof P.allowPrototypes=="boolean"?P.allowPrototypes:r.allowPrototypes,allowSparse:typeof P.allowSparse=="boolean"?P.allowSparse:r.allowSparse,arrayLimit:typeof P.arrayLimit=="number"?P.arrayLimit:r.arrayLimit,charset:D,charsetSentinel:typeof P.charsetSentinel=="boolean"?P.charsetSentinel:r.charsetSentinel,comma:typeof P.comma=="boolean"?P.comma:r.comma,decodeDotInKeys:typeof P.decodeDotInKeys=="boolean"?P.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof P.decoder=="function"?P.decoder:r.decoder,delimiter:typeof P.delimiter=="string"||n.isRegExp(P.delimiter)?P.delimiter:r.delimiter,depth:typeof P.depth=="number"||P.depth===!1?+P.depth:r.depth,duplicates:N,ignoreQueryPrefix:P.ignoreQueryPrefix===!0,interpretNumericEntities:typeof P.interpretNumericEntities=="boolean"?P.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof P.parameterLimit=="number"?P.parameterLimit:r.parameterLimit,parseArrays:P.parseArrays!==!1,plainObjects:typeof P.plainObjects=="boolean"?P.plainObjects:r.plainObjects,strictDepth:typeof P.strictDepth=="boolean"?!!P.strictDepth:r.strictDepth,strictNullHandling:typeof P.strictNullHandling=="boolean"?P.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof P.throwOnLimitExceeded=="boolean"?P.throwOnLimitExceeded:!1}};return kE=function(k,P){var D=B(P);if(k===""||k===null||typeof k>"u")return D.plainObjects?{__proto__:null}:{};for(var N=typeof k=="string"?p(k,D):k,W=D.plainObjects?{__proto__:null}:{},V=Object.keys(N),$=0;$<V.length;++$){var ie=V[$],ne=x(ie,N[ie],D,typeof k=="string");W=n.merge(W,ne,D)}return D.allowSparse===!0?W:n.compact(W)},kE}var PE,vD;function Lue(){if(vD)return PE;vD=1;var n=Due(),e=Fue(),t=A8();return PE={formats:t,parse:e,stringify:n},PE}var CD;function Uue(){if(CD)return Ag;CD=1;var n=oue();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(l),p=["%","/","?",";","#"].concat(o),v=["/","?","#"],x=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,k=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},D={javascript:!0,"javascript:":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=Lue();function V(q,te,G){if(q&&typeof q=="object"&&q instanceof e)return q;var oe=new e;return oe.parse(q,te,G),oe}e.prototype.parse=function(q,te,G){if(typeof q!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof q);var oe=q.indexOf("?"),fe=oe!==-1&&oe<q.indexOf("#")?"?":"#",he=q.split(fe),Me=/\\/g;he[0]=he[0].replace(Me,"/"),q=he.join(fe);var me=q;if(me=me.trim(),!G&&q.split("#").length===1){var pe=i.exec(me);if(pe)return this.path=me,this.href=me,this.pathname=pe[1],pe[2]?(this.search=pe[2],te?this.query=W.parse(this.search.substr(1)):this.query=this.search.substr(1)):te&&(this.search="",this.query={}),this}var qe=t.exec(me);if(qe){qe=qe[0];var Se=qe.toLowerCase();this.protocol=Se,me=me.substr(qe.length)}if(G||qe||me.match(/^\/\/[^@/]+@[^@/]+/)){var vt=me.substr(0,2)==="//";vt&&!(qe&&D[qe])&&(me=me.substr(2),this.slashes=!0)}if(!D[qe]&&(vt||qe&&!N[qe])){for(var Je=-1,Ke=0;Ke<v.length;Ke++){var je=me.indexOf(v[Ke]);je!==-1&&(Je===-1||je<Je)&&(Je=je)}var Pe,Le;Je===-1?Le=me.lastIndexOf("@"):Le=me.lastIndexOf("@",Je),Le!==-1&&(Pe=me.slice(0,Le),me=me.slice(Le+1),this.auth=decodeURIComponent(Pe)),Je=-1;for(var Ke=0;Ke<p.length;Ke++){var je=me.indexOf(p[Ke]);je!==-1&&(Je===-1||je<Je)&&(Je=je)}Je===-1&&(Je=me.length),this.host=me.slice(0,Je),me=me.slice(Je),this.parseHost(),this.hostname=this.hostname||"";var Xe=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Xe)for(var Ct=this.hostname.split(/\./),Ke=0,Gt=Ct.length;Ke<Gt;Ke++){var mt=Ct[Ke];if(mt&&!mt.match(B)){for(var Ut="",kt=0,Te=mt.length;kt<Te;kt++)mt.charCodeAt(kt)>127?Ut+="x":Ut+=mt[kt];if(!Ut.match(B)){var Re=Ct.slice(0,Ke),Ue=Ct.slice(Ke+1),nt=mt.match(k);nt&&(Re.push(nt[1]),Ue.unshift(nt[2])),Ue.length&&(me="/"+Ue.join(".")+me),this.hostname=Re.join(".");break}}}this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),Xe||(this.hostname=n.toASCII(this.hostname));var _t=this.port?":"+this.port:"",gt=this.hostname||"";this.host=gt+_t,this.href+=this.host,Xe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),me[0]!=="/"&&(me="/"+me))}if(!P[Se])for(var Ke=0,Gt=o.length;Ke<Gt;Ke++){var Kt=o[Ke];if(me.indexOf(Kt)!==-1){var $t=encodeURIComponent(Kt);$t===Kt&&($t=escape(Kt)),me=me.split(Kt).join($t)}}var Rt=me.indexOf("#");Rt!==-1&&(this.hash=me.substr(Rt),me=me.slice(0,Rt));var _n=me.indexOf("?");if(_n!==-1?(this.search=me.substr(_n),this.query=me.substr(_n+1),te&&(this.query=W.parse(this.query)),me=me.slice(0,_n)):te&&(this.search="",this.query={}),me&&(this.pathname=me),N[Se]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _t=this.pathname||"",pr=this.search||"";this.path=_t+pr}return this.href=this.format(),this};function $(q){return typeof q=="string"&&(q=V(q)),q instanceof e?q.format():e.prototype.format.call(q)}e.prototype.format=function(){var q=this.auth||"";q&&(q=encodeURIComponent(q),q=q.replace(/%3A/i,":"),q+="@");var te=this.protocol||"",G=this.pathname||"",oe=this.hash||"",fe=!1,he="";this.host?fe=q+this.host:this.hostname&&(fe=q+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(fe+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(he=W.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Me=this.search||he&&"?"+he||"";return te&&te.substr(-1)!==":"&&(te+=":"),this.slashes||(!te||N[te])&&fe!==!1?(fe="//"+(fe||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):fe||(fe=""),oe&&oe.charAt(0)!=="#"&&(oe="#"+oe),Me&&Me.charAt(0)!=="?"&&(Me="?"+Me),G=G.replace(/[?#]/g,function(me){return encodeURIComponent(me)}),Me=Me.replace("#","%23"),te+fe+G+Me+oe};function ie(q,te){return V(q,!1,!0).resolve(te)}e.prototype.resolve=function(q){return this.resolveObject(V(q,!1,!0)).format()};function ne(q,te){return q?V(q,!1,!0).resolveObject(te):te}return e.prototype.resolveObject=function(q){if(typeof q=="string"){var te=new e;te.parse(q,!1,!0),q=te}for(var G=new e,oe=Object.keys(this),fe=0;fe<oe.length;fe++){var he=oe[fe];G[he]=this[he]}if(G.hash=q.hash,q.href==="")return G.href=G.format(),G;if(q.slashes&&!q.protocol){for(var Me=Object.keys(q),me=0;me<Me.length;me++){var pe=Me[me];pe!=="protocol"&&(G[pe]=q[pe])}return N[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if(q.protocol&&q.protocol!==G.protocol){if(!N[q.protocol]){for(var qe=Object.keys(q),Se=0;Se<qe.length;Se++){var vt=qe[Se];G[vt]=q[vt]}return G.href=G.format(),G}if(G.protocol=q.protocol,!q.host&&!D[q.protocol]){for(var Gt=(q.pathname||"").split("/");Gt.length&&!(q.host=Gt.shift()););q.host||(q.host=""),q.hostname||(q.hostname=""),Gt[0]!==""&&Gt.unshift(""),Gt.length<2&&Gt.unshift(""),G.pathname=Gt.join("/")}else G.pathname=q.pathname;if(G.search=q.search,G.query=q.query,G.host=q.host||"",G.auth=q.auth,G.hostname=q.hostname||q.host,G.port=q.port,G.pathname||G.search){var Je=G.pathname||"",Ke=G.search||"";G.path=Je+Ke}return G.slashes=G.slashes||q.slashes,G.href=G.format(),G}var je=G.pathname&&G.pathname.charAt(0)==="/",Pe=q.host||q.pathname&&q.pathname.charAt(0)==="/",Le=Pe||je||G.host&&q.pathname,Xe=Le,Ct=G.pathname&&G.pathname.split("/")||[],Gt=q.pathname&&q.pathname.split("/")||[],mt=G.protocol&&!N[G.protocol];if(mt&&(G.hostname="",G.port=null,G.host&&(Ct[0]===""?Ct[0]=G.host:Ct.unshift(G.host)),G.host="",q.protocol&&(q.hostname=null,q.port=null,q.host&&(Gt[0]===""?Gt[0]=q.host:Gt.unshift(q.host)),q.host=null),Le=Le&&(Gt[0]===""||Ct[0]==="")),Pe)G.host=q.host||q.host===""?q.host:G.host,G.hostname=q.hostname||q.hostname===""?q.hostname:G.hostname,G.search=q.search,G.query=q.query,Ct=Gt;else if(Gt.length)Ct||(Ct=[]),Ct.pop(),Ct=Ct.concat(Gt),G.search=q.search,G.query=q.query;else if(q.search!=null){if(mt){G.host=Ct.shift(),G.hostname=G.host;var Ut=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Ut&&(G.auth=Ut.shift(),G.hostname=Ut.shift(),G.host=G.hostname)}return G.search=q.search,G.query=q.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!Ct.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var kt=Ct.slice(-1)[0],Te=(G.host||q.host||Ct.length>1)&&(kt==="."||kt==="..")||kt==="",Re=0,Ue=Ct.length;Ue>=0;Ue--)kt=Ct[Ue],kt==="."?Ct.splice(Ue,1):kt===".."?(Ct.splice(Ue,1),Re++):Re&&(Ct.splice(Ue,1),Re--);if(!Le&&!Xe)for(;Re--;Re)Ct.unshift("..");Le&&Ct[0]!==""&&(!Ct[0]||Ct[0].charAt(0)!=="/")&&Ct.unshift(""),Te&&Ct.join("/").substr(-1)!=="/"&&Ct.push("");var nt=Ct[0]===""||Ct[0]&&Ct[0].charAt(0)==="/";if(mt){G.hostname=nt?"":Ct.length?Ct.shift():"",G.host=G.hostname;var Ut=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Ut&&(G.auth=Ut.shift(),G.hostname=Ut.shift(),G.host=G.hostname)}return Le=Le||G.host&&Ct.length,Le&&!nt&&Ct.unshift(""),Ct.length>0?G.pathname=Ct.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=q.auth||G.auth,G.slashes=G.slashes||q.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var q=this.host,te=r.exec(q);te&&(te=te[0],te!==":"&&(this.port=te.substr(1)),q=q.substr(0,q.length-te.length)),q&&(this.hostname=q)},Ag.parse=V,Ag.resolve=ie,Ag.resolveObject=ne,Ag.format=$,Ag.Url=e,Ag}var zue=Uue();const _D=dl(zue);function ds(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ds=function(){return l},l}ds();function cW(n,e,t){ds().f[0]++,ds().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(ds().f[1]++,ds().s[1]++,r.ok)ds().b[0][1]++;else throw ds().b[0][0]++,ds().s[2]++,new Error("Failed to load metadata for "+n);return ds().s[3]++,r.json()}).then(r=>{ds().f[2]++,ds().s[4]++,t(r)}).catch(()=>{ds().f[3]++,ds().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),ds().s[6]++,t(e)})}function Nue(n,e){if(ds().f[4]++,ds().s[7]++,n)ds().b[1][1]++;else return ds().b[1][0]++,ds().s[8]++,e([]);const t=(ds().s[9]++,_D.parse(n)),r=(ds().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");ds().s[11]++,t.pathname===r?(ds().b[2][0]++,ds().s[12]++,t.pathname="/fontstacks.json"):(ds().b[2][1]++,ds().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(ds().s[14]++,_D.format(t));ds().s[15]++,cW(i,[],e)}function Wue(n,e){if(ds().f[5]++,ds().s[16]++,n)ds().b[3][1]++;else return ds().b[3][0]++,ds().s[17]++,e([]);const t=(ds().s[18]++,n+".json");ds().s[19]++,cW(t,{},r=>(ds().f[6]++,ds().s[20]++,e(Object.keys(r))))}function rc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return rc=function(){return l},l}rc();function jue(){rc().f[0]++;const n=(rc().s[0]++,new URL(window.location.href));return rc().s[1]++,n.searchParams.get("style")}function hW(n,e){rc().f[1]++,rc().s[2]++,console.log("Loading style",n),rc().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return rc().f[2]++,rc().s[4]++,t.json()}).then(function(t){rc().f[3]++,rc().s[5]++,e(Cc.ensureStyleValidity(t))}).catch(function(){rc().f[4]++,rc().s[6]++,console.warn("Could not fetch default style",n),rc().s[7]++,e(Cc.emptyStyle)})}function bD(){rc().f[5]++;const n=(rc().s[8]++,new URL(window.location.href));rc().s[9]++,n.searchParams.delete("style"),rc().s[10]++,window.history.replaceState({},document.title,n.toString())}function Nh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Nh=function(){return l},l}Nh();function dW(n,e){Nh().f[0]++;const t=(Nh().s[0]++,AY(n,e));return Nh().s[1]++,t.map(r=>(Nh().f[1]++,Nh().s[2]++,r.command+" "+r.args.join(" ")))}function Gue(n,e){return Nh().f[2]++,Nh().s[3]++,dW(n,e).map(t=>(Nh().f[3]++,Nh().s[4]++,"Undo "+t))}function Que(n,e){return Nh().f[4]++,Nh().s[5]++,dW(n,e).map(t=>(Nh().f[5]++,Nh().s[6]++,"Redo "+t))}function vi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vi=function(){return l},l}vi();const A3=(vi().s[0]++,"maputnik"),fW=(vi().s[1]++,"style"),xD=(vi().s[2]++,{latest:[A3,"latest_style"].join(":")}),Yue=(vi().s[3]++,tW[0].url);function MD(n){vi().f[0]++,vi().s[4]++,hW(Yue,n)}function que(){vi().f[1]++;const n=(vi().s[5]++,[]);vi().s[6]++;for(let e=(vi().s[7]++,0);e<window.localStorage.length;e++){const t=(vi().s[8]++,window.localStorage.key(e));vi().s[9]++,pW(t)?(vi().b[0][0]++,vi().s[10]++,n.push(Vue(t))):vi().b[0][1]++}return vi().s[11]++,n}function pW(n){vi().f[2]++;const e=(vi().s[12]++,n.split(":"));return vi().s[13]++,vi().b[1][0]++,e.length===3&&(vi().b[1][1]++,e[0]===A3)&&(vi().b[1][2]++,e[1]===fW)}function Vue(n){if(vi().f[3]++,vi().s[14]++,pW(n))vi().b[2][1]++;else throw vi().b[2][0]++,vi().s[15]++,"Key is not a valid style key";const e=(vi().s[16]++,n.split(":")),t=(vi().s[17]++,e[2]);return vi().s[18]++,t}function wD(n){return vi().f[4]++,vi().s[19]++,[A3,fW,n].join(":")}class SD{constructor(){Pn(this,"mapStyles");vi().f[5]++,vi().s[20]++,this.mapStyles=que()}init(e){vi().f[6]++,vi().s[21]++,e(null)}purge(){vi().f[7]++,vi().s[22]++;for(let e=(vi().s[23]++,0);e<window.localStorage.length;e++){const t=(vi().s[24]++,window.localStorage.key(e));vi().s[25]++,t.startsWith(A3)?(vi().b[3][0]++,vi().s[26]++,window.localStorage.removeItem(t)):vi().b[3][1]++}}latestStyle(e){if(vi().f[8]++,vi().s[27]++,this.mapStyles.length===0)return vi().b[4][0]++,vi().s[28]++,MD(e);vi().b[4][1]++;const t=(vi().s[29]++,window.localStorage.getItem(xD.latest)),r=(vi().s[30]++,window.localStorage.getItem(wD(t)));if(vi().s[31]++,r)return vi().b[5][0]++,vi().s[32]++,e(JSON.parse(r));vi().b[5][1]++,vi().s[33]++,MD(e)}save(e){vi().f[9]++,vi().s[34]++,e=Cc.ensureStyleValidity(e);const t=(vi().s[35]++,wD(e.id));return vi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),vi().s[37]++,window.localStorage.setItem(xD.latest,e.id),vi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var H6=function(n,e){return H6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},H6(n,e)};function mW(n,e){H6(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Hue(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function $ue(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return s}function Zue(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat($ue(arguments[e]));return n}var gW=function(){function n(e,t){this.target=t,this.type=e}return n}(),Xue=function(n){mW(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(gW),Jue=function(n){mW(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(gW);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var ece=function(){if(typeof WebSocket<"u")return WebSocket},tce=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},ug={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},nce=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var l=i._options.minUptime,o=l===void 0?ug.minUptime:l;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(p){return i._ws.send(p)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(p){return i._callEventListener(s,p)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(l){return i._callEventListener(s,l)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(l){return i._callEventListener(s,l)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(l){return i._callEventListener(s,l)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?ug.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=Hue(i),l=s.next();!l.done;l=s.next()){var o=l.value;this._callEventListener(e,o)}}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Zue(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?ug.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?ug.minReconnectionDelay:i,l=e.maxReconnectionDelay,o=l===void 0?ug.maxReconnectionDelay:l,p=0;return this._retryCount>0&&(p=s*Math.pow(r,this._retryCount-1),p>o&&(p=o)),this._debug("next delay",p),p},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?ug.maxRetries:r,s=t.connectionTimeout,l=s===void 0?ug.connectionTimeout:s,o=t.WebSocket,p=o===void 0?ece():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!tce(p))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(v){e._closeCalled||(e._debug("connect",{url:v,protocols:e._protocols}),e._ws=e._protocols?new p(v,e._protocols):new p(v),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Xue(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Jue(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function Mi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mi=function(){return l},l}Mi();class rce{constructor(e){Pn(this,"localUrl");Pn(this,"websocketUrl");Pn(this,"latestStyleId",(Mi().s[0]++,void 0));Pn(this,"onLocalStyleChange");Mi().f[0]++,Mi().s[1]++,this.onLocalStyleChange=(Mi().b[0][0]++,e.onLocalStyleChange||(Mi().b[0][1]++,()=>{Mi().f[1]++}));const t=(Mi().s[2]++,Mi().b[1][0]++,e.port||(Mi().b[1][1]++,"8000")),r=(Mi().s[3]++,Mi().b[2][0]++,e.host||(Mi().b[2][1]++,"localhost"));Mi().s[4]++,this.localUrl=`http://${r}:${t}`,Mi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,Mi().s[6]++,this.init=this.init.bind(this)}init(e){Mi().f[2]++,Mi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(Mi().f[3]++,Mi().s[8]++,t.json())).then(t=>{Mi().f[4]++;const r=(Mi().s[9]++,t);Mi().s[10]++,this.latestStyleId=r[0],Mi().s[11]++,this.notifyLocalChanges(),Mi().s[12]++,e(null)}).catch(()=>{Mi().f[5]++,Mi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){Mi().f[6]++;const e=(Mi().s[14]++,new nce(this.websocketUrl));Mi().s[15]++,e.onmessage=t=>{if(Mi().f[7]++,Mi().s[16]++,t.data)Mi().b[3][1]++;else{Mi().b[3][0]++,Mi().s[17]++;return}Mi().s[18]++,console.log("Received style update from API");let r=(Mi().s[19]++,Cc.emptyStyle);Mi().s[20]++;try{Mi().s[21]++,r=JSON.parse(t.data)}catch(s){Mi().s[22]++,console.error(s)}const i=(Mi().s[23]++,Cc.ensureStyleValidity(r));Mi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(Mi().f[8]++,Mi().s[25]++,this.latestStyleId)Mi().b[4][0]++,Mi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return Mi().f[9]++,Mi().s[27]++,t.json()}).then(function(t){Mi().f[10]++,Mi().s[28]++,e(Cc.ensureStyleValidity(t))});else throw Mi().b[4][1]++,Mi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){Mi().f[11]++;const t=(Mi().s[30]++,HF(Cc.stripAccessTokens(Cc.replaceAccessTokens(e)))),r=(Mi().s[31]++,e.id);return Mi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){Mi().f[12]++,Mi().s[33]++,i?(Mi().b[5][0]++,Mi().s[34]++,console.error(i)):Mi().b[5][1]++}),Mi().s[35]++,e}}function Cl(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cl=function(){return l},l}Cl();class ice{constructor(e=(Cl().b[0][0]++,[])){Pn(this,"revisions");Pn(this,"currentIdx");Cl().f[0]++,Cl().s[0]++,this.revisions=e,Cl().s[1]++,this.currentIdx=e.length-1}get latest(){return Cl().f[1]++,Cl().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Cl().f[2]++,Cl().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Cl().f[3]++,Cl().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Cl().s[5]++,this.revisions.push(e),Cl().s[6]++,this.currentIdx++}undo(){return Cl().f[4]++,Cl().s[7]++,this.currentIdx>0?(Cl().b[1][0]++,Cl().s[8]++,this.currentIdx--):Cl().b[1][1]++,Cl().s[9]++,this.current}redo(){return Cl().f[5]++,Cl().s[10]++,this.currentIdx<this.revisions.length-1?(Cl().b[2][0]++,Cl().s[11]++,this.currentIdx++):Cl().b[2][1]++,Cl().s[12]++,this.current}}var KE,ED;function oce(){if(ED)return KE;ED=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,p=typeof window=="object"&&window&&window.Object===Object&&window,v=typeof self=="object"&&self&&self.Object===Object&&self,x=p||v||Function("return this")(),B=Object.prototype,k=B.toString,P=Math.max,D=Math.min,N=function(){return x.Date.now()};function W(te,G,oe){var fe,he,Me,me,pe,qe,Se=0,vt=!1,Je=!1,Ke=!0;if(typeof te!="function")throw new TypeError(n);G=q(G)||0,$(oe)&&(vt=!!oe.leading,Je="maxWait"in oe,Me=Je?P(q(oe.maxWait)||0,G):Me,Ke="trailing"in oe?!!oe.trailing:Ke);function je(Te){var Re=fe,Ue=he;return fe=he=void 0,Se=Te,me=te.apply(Ue,Re),me}function Pe(Te){return Se=Te,pe=setTimeout(Ct,G),vt?je(Te):me}function Le(Te){var Re=Te-qe,Ue=Te-Se,nt=G-Re;return Je?D(nt,Me-Ue):nt}function Xe(Te){var Re=Te-qe,Ue=Te-Se;return qe===void 0||Re>=G||Re<0||Je&&Ue>=Me}function Ct(){var Te=N();if(Xe(Te))return Gt(Te);pe=setTimeout(Ct,Le(Te))}function Gt(Te){return pe=void 0,Ke&&fe?je(Te):(fe=he=void 0,me)}function mt(){pe!==void 0&&clearTimeout(pe),Se=0,fe=qe=he=pe=void 0}function Ut(){return pe===void 0?me:Gt(N())}function kt(){var Te=N(),Re=Xe(Te);if(fe=arguments,he=this,qe=Te,Re){if(pe===void 0)return Pe(qe);if(Je)return pe=setTimeout(Ct,G),je(qe)}return pe===void 0&&(pe=setTimeout(Ct,G)),me}return kt.cancel=mt,kt.flush=Ut,kt}function V(te,G,oe){var fe=!0,he=!0;if(typeof te!="function")throw new TypeError(n);return $(oe)&&(fe="leading"in oe?!!oe.leading:fe,he="trailing"in oe?!!oe.trailing:he),W(te,G,{leading:fe,maxWait:G,trailing:he})}function $(te){var G=typeof te;return!!te&&(G=="object"||G=="function")}function ie(te){return!!te&&typeof te=="object"}function ne(te){return typeof te=="symbol"||ie(te)&&k.call(te)==t}function q(te){if(typeof te=="number")return te;if(ne(te))return e;if($(te)){var G=typeof te.valueOf=="function"?te.valueOf():te;te=$(G)?G+"":G}if(typeof te!="string")return te===0?te:+te;te=te.replace(r,"");var oe=s.test(te);return oe||l.test(te)?o(te.slice(2),oe?2:8):i.test(te)?e:+te}return KE=V,KE}var sce=oce();const ace=dl(sce);var jv={exports:{}};jv.exports;var BD;function lce(){return BD||(BD=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",p="[object Array]",v="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",k="[object Error]",P="[object Function]",D="[object GeneratorFunction]",N="[object Map]",W="[object Number]",V="[object Null]",$="[object Object]",ie="[object Promise]",ne="[object Proxy]",q="[object RegExp]",te="[object Set]",G="[object String]",oe="[object Symbol]",fe="[object Undefined]",he="[object WeakMap]",Me="[object ArrayBuffer]",me="[object DataView]",pe="[object Float32Array]",qe="[object Float64Array]",Se="[object Int8Array]",vt="[object Int16Array]",Je="[object Int32Array]",Ke="[object Uint8Array]",je="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Le="[object Uint32Array]",Xe=/[\\^$.*+?()[\]{}|]/g,Ct=/^\[object .+?Constructor\]$/,Gt=/^(?:0|[1-9]\d*)$/,mt={};mt[pe]=mt[qe]=mt[Se]=mt[vt]=mt[Je]=mt[Ke]=mt[je]=mt[Pe]=mt[Le]=!0,mt[o]=mt[p]=mt[Me]=mt[x]=mt[me]=mt[B]=mt[k]=mt[P]=mt[N]=mt[W]=mt[$]=mt[q]=mt[te]=mt[G]=mt[he]=!1;var Ut=typeof window=="object"&&window&&window.Object===Object&&window,kt=typeof self=="object"&&self&&self.Object===Object&&self,Te=Ut||kt||Function("return this")(),Re=e&&!e.nodeType&&e,Ue=Re&&!0&&n&&!n.nodeType&&n,nt=Ue&&Ue.exports===Re,_t=nt&&Ut.process,gt=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Kt=gt&&gt.isTypedArray;function $t(J,Be){for(var lt=-1,qt=J==null?0:J.length,Br=0,Gn=[];++lt<qt;){var Zr=J[lt];Be(Zr,lt,J)&&(Gn[Br++]=Zr)}return Gn}function Rt(J,Be){for(var lt=-1,qt=Be.length,Br=J.length;++lt<qt;)J[Br+lt]=Be[lt];return J}function _n(J,Be){for(var lt=-1,qt=J==null?0:J.length;++lt<qt;)if(Be(J[lt],lt,J))return!0;return!1}function pr(J,Be){for(var lt=-1,qt=Array(J);++lt<J;)qt[lt]=Be(lt);return qt}function nn(J){return function(Be){return J(Be)}}function Xn(J,Be){return J.has(Be)}function Fn(J,Be){return J==null?void 0:J[Be]}function an(J){var Be=-1,lt=Array(J.size);return J.forEach(function(qt,Br){lt[++Be]=[Br,qt]}),lt}function Bn(J,Be){return function(lt){return J(Be(lt))}}function Cr(J){var Be=-1,lt=Array(J.size);return J.forEach(function(qt){lt[++Be]=qt}),lt}var lr=Array.prototype,hr=Function.prototype,We=Object.prototype,ce=Te["__core-js_shared__"],ye=hr.toString,rt=We.hasOwnProperty,Et=function(){var J=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ht=We.toString,Zt=RegExp("^"+ye.call(rt).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jn=nt?Te.Buffer:void 0,He=Te.Symbol,ae=Te.Uint8Array,_e=We.propertyIsEnumerable,f=lr.splice,Qe=He?He.toStringTag:void 0,Ee=Object.getOwnPropertySymbols,it=Jn?Jn.isBuffer:void 0,ut=Bn(Object.keys,Object),at=jr(Te,"DataView"),zt=jr(Te,"Map"),Qt=jr(Te,"Promise"),Nt=jr(Te,"Set"),rn=jr(Te,"WeakMap"),Rn=jr(Object,"create"),Dn=Qi(at),mr=Qi(zt),Tr=Qi(Qt),Jt=Qi(Nt),br=Qi(rn),Gr=He?He.prototype:void 0,Si=Gr?Gr.valueOf:void 0;function Fr(J){var Be=-1,lt=J==null?0:J.length;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function yn(){this.__data__=Rn?Rn(null):{},this.size=0}function ar(J){var Be=this.has(J)&&delete this.__data__[J];return this.size-=Be?1:0,Be}function Pr(J){var Be=this.__data__;if(Rn){var lt=Be[J];return lt===r?void 0:lt}return rt.call(Be,J)?Be[J]:void 0}function Cs(J){var Be=this.__data__;return Rn?Be[J]!==void 0:rt.call(Be,J)}function Ao(J,Be){var lt=this.__data__;return this.size+=this.has(J)?0:1,lt[J]=Rn&&Be===void 0?r:Be,this}Fr.prototype.clear=yn,Fr.prototype.delete=ar,Fr.prototype.get=Pr,Fr.prototype.has=Cs,Fr.prototype.set=Ao;function ui(J){var Be=-1,lt=J==null?0:J.length;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function $r(){this.__data__=[],this.size=0}function _s(J){var Be=this.__data__,lt=dr(Be,J);if(lt<0)return!1;var qt=Be.length-1;return lt==qt?Be.pop():f.call(Be,lt,1),--this.size,!0}function fs(J){var Be=this.__data__,lt=dr(Be,J);return lt<0?void 0:Be[lt][1]}function Ja(J){return dr(this.__data__,J)>-1}function sa(J,Be){var lt=this.__data__,qt=dr(lt,J);return qt<0?(++this.size,lt.push([J,Be])):lt[qt][1]=Be,this}ui.prototype.clear=$r,ui.prototype.delete=_s,ui.prototype.get=fs,ui.prototype.has=Ja,ui.prototype.set=sa;function Wo(J){var Be=-1,lt=J==null?0:J.length;for(this.clear();++Be<lt;){var qt=J[Be];this.set(qt[0],qt[1])}}function zo(){this.size=0,this.__data__={hash:new Fr,map:new(zt||ui),string:new Fr}}function So(J){var Be=di(this,J).delete(J);return this.size-=Be?1:0,Be}function pi(J){return di(this,J).get(J)}function tA(J){return di(this,J).has(J)}function _l(J,Be){var lt=di(this,J),qt=lt.size;return lt.set(J,Be),this.size+=lt.size==qt?0:1,this}Wo.prototype.clear=zo,Wo.prototype.delete=So,Wo.prototype.get=pi,Wo.prototype.has=tA,Wo.prototype.set=_l;function Ni(J){var Be=-1,lt=J==null?0:J.length;for(this.__data__=new Wo;++Be<lt;)this.add(J[Be])}function wr(J){return this.__data__.set(J,r),this}function Fa(J){return this.__data__.has(J)}Ni.prototype.add=Ni.prototype.push=wr,Ni.prototype.has=Fa;function bs(J){var Be=this.__data__=new ui(J);this.size=Be.size}function Rs(){this.__data__=new ui,this.size=0}function Ve(J){var Be=this.__data__,lt=Be.delete(J);return this.size=Be.size,lt}function xt(J){return this.__data__.get(J)}function xn(J){return this.__data__.has(J)}function Yn(J,Be){var lt=this.__data__;if(lt instanceof ui){var qt=lt.__data__;if(!zt||qt.length<t-1)return qt.push([J,Be]),this.size=++lt.size,this;lt=this.__data__=new Wo(qt)}return lt.set(J,Be),this.size=lt.size,this}bs.prototype.clear=Rs,bs.prototype.delete=Ve,bs.prototype.get=xt,bs.prototype.has=xn,bs.prototype.set=Yn;function fn(J,Be){var lt=Ba(J),qt=!lt&&La(J),Br=!lt&&!qt&&Gs(J),Gn=!lt&&!qt&&!Br&&XA(J),Zr=lt||qt||Br||Gn,oi=Zr?pr(J.length,String):[],Or=oi.length;for(var ni in J)rt.call(J,ni)&&!(Zr&&(ni=="length"||Br&&(ni=="offset"||ni=="parent")||Gn&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||aa(ni,Or)))&&oi.push(ni);return oi}function dr(J,Be){for(var lt=J.length;lt--;)if(_o(J[lt][0],Be))return lt;return-1}function Wi(J,Be,lt){var qt=Be(J);return Ba(J)?qt:Rt(qt,lt(J))}function Co(J){return J==null?J===void 0?fe:V:Qe&&Qe in Object(J)?Ii(J):ns(J)}function ls(J){return wi(J)&&Co(J)==o}function pa(J,Be,lt,qt,Br){return J===Be?!0:J==null||Be==null||!wi(J)&&!wi(Be)?J!==J&&Be!==Be:nA(J,Be,lt,qt,pa,Br)}function nA(J,Be,lt,qt,Br,Gn){var Zr=Ba(J),oi=Ba(Be),Or=Zr?p:$o(J),ni=oi?p:$o(Be);Or=Or==o?$:Or,ni=ni==o?$:ni;var $i=Or==$,Eo=ni==$,si=Or==ni;if(si&&Gs(J)){if(!Gs(Be))return!1;Zr=!0,$i=!1}if(si&&!$i)return Gn||(Gn=new bs),Zr||XA(J)?ma(J,Be,lt,qt,Br,Gn):Ea(J,Be,Or,lt,qt,Br,Gn);if(!(lt&i)){var _i=$i&&rt.call(J,"__wrapped__"),Ri=Eo&&rt.call(Be,"__wrapped__");if(_i||Ri){var Yi=_i?J.value():J,mi=Ri?Be.value():Be;return Gn||(Gn=new bs),Br(Yi,mi,lt,qt,Gn)}}return si?(Gn||(Gn=new bs),_c(J,Be,lt,qt,Br,Gn)):!1}function Ci(J){if(!wA(J)||jo(J))return!1;var Be=el(J)?Zt:Ct;return Be.test(Qi(J))}function ZA(J){return wi(J)&&Oa(J.length)&&!!mt[Co(J)]}function rA(J){if(!iA(J))return ut(J);var Be=[];for(var lt in Object(J))rt.call(J,lt)&&lt!="constructor"&&Be.push(lt);return Be}function ma(J,Be,lt,qt,Br,Gn){var Zr=lt&i,oi=J.length,Or=Be.length;if(oi!=Or&&!(Zr&&Or>oi))return!1;var ni=Gn.get(J);if(ni&&Gn.get(Be))return ni==Be;var $i=-1,Eo=!0,si=lt&s?new Ni:void 0;for(Gn.set(J,Be),Gn.set(Be,J);++$i<oi;){var _i=J[$i],Ri=Be[$i];if(qt)var Yi=Zr?qt(Ri,_i,$i,Be,J,Gn):qt(_i,Ri,$i,J,Be,Gn);if(Yi!==void 0){if(Yi)continue;Eo=!1;break}if(si){if(!_n(Be,function(mi,Ds){if(!Xn(si,Ds)&&(_i===mi||Br(_i,mi,lt,qt,Gn)))return si.push(Ds)})){Eo=!1;break}}else if(!(_i===Ri||Br(_i,Ri,lt,qt,Gn))){Eo=!1;break}}return Gn.delete(J),Gn.delete(Be),Eo}function Ea(J,Be,lt,qt,Br,Gn,Zr){switch(lt){case me:if(J.byteLength!=Be.byteLength||J.byteOffset!=Be.byteOffset)return!1;J=J.buffer,Be=Be.buffer;case Me:return!(J.byteLength!=Be.byteLength||!Gn(new ae(J),new ae(Be)));case x:case B:case W:return _o(+J,+Be);case k:return J.name==Be.name&&J.message==Be.message;case q:case G:return J==Be+"";case N:var oi=an;case te:var Or=qt&i;if(oi||(oi=Cr),J.size!=Be.size&&!Or)return!1;var ni=Zr.get(J);if(ni)return ni==Be;qt|=s,Zr.set(J,Be);var $i=ma(oi(J),oi(Be),qt,Br,Gn,Zr);return Zr.delete(J),$i;case oe:if(Si)return Si.call(J)==Si.call(Be)}return!1}function _c(J,Be,lt,qt,Br,Gn){var Zr=lt&i,oi=Ws(J),Or=oi.length,ni=Ws(Be),$i=ni.length;if(Or!=$i&&!Zr)return!1;for(var Eo=Or;Eo--;){var si=oi[Eo];if(!(Zr?si in Be:rt.call(Be,si)))return!1}var _i=Gn.get(J);if(_i&&Gn.get(Be))return _i==Be;var Ri=!0;Gn.set(J,Be),Gn.set(Be,J);for(var Yi=Zr;++Eo<Or;){si=oi[Eo];var mi=J[si],Ds=Be[si];if(qt)var Ua=Zr?qt(Ds,mi,si,Be,J,Gn):qt(mi,Ds,si,J,Be,Gn);if(!(Ua===void 0?mi===Ds||Br(mi,Ds,lt,qt,Gn):Ua)){Ri=!1;break}Yi||(Yi=si=="constructor")}if(Ri&&!Yi){var SA=J.constructor,As=Be.constructor;SA!=As&&"constructor"in J&&"constructor"in Be&&!(typeof SA=="function"&&SA instanceof SA&&typeof As=="function"&&As instanceof As)&&(Ri=!1)}return Gn.delete(J),Gn.delete(Be),Ri}function Ws(J){return Wi(J,eo,bl)}function di(J,Be){var lt=J.__data__;return js(Be)?lt[typeof Be=="string"?"string":"hash"]:lt.map}function jr(J,Be){var lt=Fn(J,Be);return Ci(lt)?lt:void 0}function Ii(J){var Be=rt.call(J,Qe),lt=J[Qe];try{J[Qe]=void 0;var qt=!0}catch{}var Br=Ht.call(J);return qt&&(Be?J[Qe]=lt:delete J[Qe]),Br}var bl=Ee?function(J){return J==null?[]:(J=Object(J),$t(Ee(J),function(Be){return _e.call(J,Be)}))}:Sr,$o=Co;(at&&$o(new at(new ArrayBuffer(1)))!=me||zt&&$o(new zt)!=N||Qt&&$o(Qt.resolve())!=ie||Nt&&$o(new Nt)!=te||rn&&$o(new rn)!=he)&&($o=function(J){var Be=Co(J),lt=Be==$?J.constructor:void 0,qt=lt?Qi(lt):"";if(qt)switch(qt){case Dn:return me;case mr:return N;case Tr:return ie;case Jt:return te;case br:return he}return Be});function aa(J,Be){return Be=Be??l,!!Be&&(typeof J=="number"||Gt.test(J))&&J>-1&&J%1==0&&J<Be}function js(J){var Be=typeof J;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?J!=="__proto__":J===null}function jo(J){return!!Et&&Et in J}function iA(J){var Be=J&&J.constructor,lt=typeof Be=="function"&&Be.prototype||We;return J===lt}function ns(J){return Ht.call(J)}function Qi(J){if(J!=null){try{return ye.call(J)}catch{}try{return J+""}catch{}}return""}function _o(J,Be){return J===Be||J!==J&&Be!==Be}var La=ls(function(){return arguments}())?ls:function(J){return wi(J)&&rt.call(J,"callee")&&!_e.call(J,"callee")},Ba=Array.isArray;function uo(J){return J!=null&&Oa(J.length)&&!el(J)}var Gs=it||no;function oA(J,Be){return pa(J,Be)}function el(J){if(!wA(J))return!1;var Be=Co(J);return Be==P||Be==D||Be==v||Be==ne}function Oa(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=l}function wA(J){var Be=typeof J;return J!=null&&(Be=="object"||Be=="function")}function wi(J){return J!=null&&typeof J=="object"}var XA=Kt?nn(Kt):ZA;function eo(J){return uo(J)?fn(J):rA(J)}function Sr(){return[]}function no(){return!1}n.exports=oA}(jv,jv.exports)),jv.exports}var Ace=lce();const $6=dl(Ace);function Ui(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ui=function(){return l},l}Ui();class uce{constructor(e=(Ui().b[0][0]++,{})){Pn(this,"onSourcesChange");Pn(this,"onVectorLayersChange");Pn(this,"throttledAnalyzeVectorLayerFields");Pn(this,"_sources");Pn(this,"_vectorLayers");Ui().f[0]++,Ui().s[0]++,this.onSourcesChange=(Ui().b[1][0]++,e.onSourcesChange||(Ui().b[1][1]++,()=>{Ui().f[1]++})),Ui().s[1]++,this.onVectorLayersChange=(Ui().b[2][0]++,e.onVectorLayersChange||(Ui().b[2][1]++,()=>{Ui().f[2]++})),Ui().s[2]++,this._sources={},Ui().s[3]++,this._vectorLayers={},Ui().s[4]++,this.throttledAnalyzeVectorLayerFields=ace(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Ui().f[3]++;const t=(Ui().s[5]++,{...this._sources});Ui().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Ui().f[4]++,Ui().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Ui().s[8]++,$6(t,this._sources)?Ui().b[3][1]++:(Ui().b[3][0]++,Ui().s[9]++,this.onSourcesChange(this._sources)),Ui().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Ui().f[5]++;const t=(Ui().s[11]++,{...this._vectorLayers});Ui().s[12]++,Object.keys(this._sources).forEach(r=>{Ui().f[6]++,Ui().s[13]++,(Ui().b[4][0]++,this._sources[r]||(Ui().b[4][1]++,[])).forEach(i=>{Ui().f[7]++;const s=(Ui().s[14]++,Ui().b[5][0]++,this._vectorLayers[i]||(Ui().b[5][1]++,{})),l=(Ui().s[15]++,{sourceLayer:i});Ui().s[16]++,e.querySourceFeatures(r,l).forEach(o=>{Ui().f[8]++,Ui().s[17]++,Object.keys(o.properties).forEach(p=>{Ui().f[9]++;const v=(Ui().s[18]++,Ui().b[6][0]++,s[p]||(Ui().b[6][1]++,{}));Ui().s[19]++,v[o.properties[p]]={},Ui().s[20]++,s[p]=v})}),Ui().s[21]++,this._vectorLayers[i]=s})}),Ui().s[22]++,$6(t,this._vectorLayers)?Ui().b[7][1]++:(Ui().b[7][0]++,Ui().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Ui().f[10]++,Ui().s[24]++,this._sources}get vectorLayers(){return Ui().f[11]++,Ui().s[25]++,this._vectorLayers}}function Zs(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zs=function(){return l},l}Zs();const rC=(Zs().s[0]++,{});function u8(){Zs().f[0]++;const n=(Zs().s[1]++,new URL(window.location.href).searchParams),e=(Zs().s[2]++,n.get("debug"));return Zs().s[3]++,e?(Zs().b[0][0]++,Zs().s[4]++,!!e.match(/^(|1|true)$/)):(Zs().b[0][1]++,Zs().s[5]++,!1)}function yW(){return Zs().f[1]++,Zs().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function cce(n,e,t){if(Zs().f[2]++,Zs().s[7]++,u8())Zs().b[1][1]++;else throw Zs().b[1][0]++,Zs().s[8]++,yW();Zs().s[9]++,rC[n]=(Zs().b[2][0]++,rC[n]||(Zs().b[2][1]++,{})),Zs().s[10]++,rC[n][e]=t}function hce(n,e){if(Zs().f[3]++,Zs().s[11]++,u8())Zs().b[3][1]++;else throw Zs().b[3][0]++,Zs().s[12]++,yW();if(Zs().s[13]++,Object.prototype.hasOwnProperty.call(rC,n))return Zs().b[4][0]++,Zs().s[14]++,rC[n][e];Zs().b[4][1]++}const dg=(Zs().s[15]++,{enabled:u8,get:hce,set:cce});Zs().s[16]++;window.debug=dg;function we(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="bafcb93873c2a71cab2bdafeb2ce6a3195766cd8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:2},end:{line:54,column:3}},5:{start:{line:43,column:24},end:{line:43,column:95}},6:{start:{line:44,column:4},end:{line:46,column:5}},7:{start:{line:45,column:6},end:{line:45,column:47}},8:{start:{line:47,column:9},end:{line:54,column:3}},9:{start:{line:48,column:24},end:{line:48,column:96}},10:{start:{line:49,column:4},end:{line:51,column:5}},11:{start:{line:50,column:6},end:{line:50,column:47}},12:{start:{line:53,column:4},end:{line:53,column:15}},13:{start:{line:57,column:2},end:{line:66,column:4}},14:{start:{line:73,column:4},end:{line:73,column:17}},15:{start:{line:74,column:4},end:{line:74,column:19}},16:{start:{line:75,column:4},end:{line:75,column:45}},17:{start:{line:76,column:19},end:{line:76,column:75}},18:{start:{line:77,column:15},end:{line:77,column:38}},19:{start:{line:78,column:4},end:{line:80,column:5}},20:{start:{line:79,column:6},end:{line:79,column:34}},21:{start:{line:81,column:4},end:{line:85,column:7}},22:{start:{line:82,column:40},end:{line:82,column:86}},23:{start:{line:86,column:22},end:{line:137,column:5}},24:{start:{line:90,column:10},end:{line:90,column:40}},25:{start:{line:96,column:10},end:{line:96,column:35}},26:{start:{line:102,column:10},end:{line:102,column:37}},27:{start:{line:108,column:10},end:{line:108,column:38}},28:{start:{line:114,column:10},end:{line:114,column:39}},29:{start:{line:120,column:10},end:{line:122,column:12}},30:{start:{line:128,column:10},end:{line:128,column:63}},31:{start:{line:134,column:10},end:{line:134,column:36}},32:{start:{line:138,column:4},end:{line:151,column:7}},33:{start:{line:139,column:6},end:{line:150,column:7}},34:{start:{line:140,column:8},end:{line:140,column:24}},35:{start:{line:141,column:8},end:{line:141,column:30}},36:{start:{line:142,column:13},end:{line:150,column:7}},37:{start:{line:143,column:25},end:{line:145,column:10}},38:{start:{line:144,column:10},end:{line:144,column:41}},39:{start:{line:146,column:8},end:{line:149,column:9}},40:{start:{line:147,column:10},end:{line:147,column:44}},41:{start:{line:148,column:10},end:{line:148,column:29}},42:{start:{line:152,column:21},end:{line:152,column:38}},43:{start:{line:153,column:4},end:{line:172,column:5}},44:{start:{line:154,column:6},end:{line:154,column:41}},45:{start:{line:155,column:6},end:{line:155,column:74}},46:{start:{line:155,column:43},end:{line:155,column:72}},47:{start:{line:156,column:6},end:{line:156,column:31}},48:{start:{line:158,column:6},end:{line:160,column:7}},49:{start:{line:159,column:8},end:{line:159,column:33}},50:{start:{line:161,column:6},end:{line:171,column:9}},51:{start:{line:162,column:8},end:{line:165,column:9}},52:{start:{line:163,column:10},end:{line:163,column:74}},53:{start:{line:164,column:10},end:{line:164,column:45}},54:{start:{line:166,column:8},end:{line:166,column:104}},55:{start:{line:166,column:50},end:{line:166,column:102}},56:{start:{line:167,column:8},end:{line:170,column:9}},57:{start:{line:168,column:10},end:{line:168,column:63}},58:{start:{line:169,column:10},end:{line:169,column:69}},59:{start:{line:173,column:4},end:{line:176,column:5}},60:{start:{line:174,column:6},end:{line:174,column:65}},61:{start:{line:175,column:6},end:{line:175,column:59}},62:{start:{line:177,column:4},end:{line:211,column:6}},63:{start:{line:212,column:4},end:{line:214,column:7}},64:{start:{line:213,column:35},end:{line:213,column:69}},65:{start:{line:216,column:19},end:{line:234,column:3}},66:{start:{line:217,column:4},end:{line:233,column:5}},67:{start:{line:218,column:6},end:{line:224,column:7}},68:{start:{line:219,column:8},end:{line:219,column:27}},69:{start:{line:220,column:8},end:{line:220,column:22}},70:{start:{line:221,column:13},end:{line:224,column:7}},71:{start:{line:222,column:8},end:{line:222,column:27}},72:{start:{line:223,column:8},end:{line:223,column:22}},73:{start:{line:226,column:6},end:{line:232,column:7}},74:{start:{line:227,column:8},end:{line:227,column:27}},75:{start:{line:228,column:8},end:{line:228,column:22}},76:{start:{line:229,column:13},end:{line:232,column:7}},77:{start:{line:230,column:8},end:{line:230,column:27}},78:{start:{line:231,column:8},end:{line:231,column:22}},79:{start:{line:236,column:4},end:{line:236,column:60}},80:{start:{line:239,column:4},end:{line:239,column:63}},81:{start:{line:242,column:4},end:{line:242,column:40}},82:{start:{line:245,column:21},end:{line:245,column:55}},83:{start:{line:246,column:24},end:{line:246,column:93}},84:{start:{line:247,column:21},end:{line:247,column:110}},85:{start:{line:248,column:4},end:{line:250,column:7}},86:{start:{line:249,column:6},end:{line:249,column:80}},87:{start:{line:253,column:4},end:{line:255,column:7}},88:{start:{line:254,column:6},end:{line:254,column:80}},89:{start:{line:257,column:29},end:{line:271,column:3}},90:{start:{line:258,column:4},end:{line:262,column:5}},91:{start:{line:259,column:6},end:{line:261,column:9}},92:{start:{line:263,column:25},end:{line:269,column:5}},93:{start:{line:270,column:4},end:{line:270,column:38}},94:{start:{line:272,column:19},end:{line:395,column:3}},95:{start:{line:273,column:4},end:{line:278,column:6}},96:{start:{line:279,column:4},end:{line:281,column:5}},97:{start:{line:280,column:6},end:{line:280,column:71}},98:{start:{line:282,column:4},end:{line:284,column:5}},99:{start:{line:283,column:6},end:{line:283,column:71}},100:{start:{line:285,column:4},end:{line:289,column:5}},101:{start:{line:286,column:6},end:{line:288,column:7}},102:{start:{line:287,column:8},end:{line:287,column:63}},103:{start:{line:290,column:4},end:{line:292,column:5}},104:{start:{line:291,column:6},end:{line:291,column:44}},105:{start:{line:293,column:19},end:{line:293,column:51}},106:{start:{line:294,column:24},end:{line:294,column:26}},107:{start:{line:295,column:4},end:{line:306,column:5}},108:{start:{line:296,column:26},end:{line:296,column:42}},109:{start:{line:297,column:6},end:{line:305,column:9}},110:{start:{line:298,column:8},end:{line:303,column:9}},111:{start:{line:299,column:24},end:{line:301,column:11}},112:{start:{line:302,column:10},end:{line:302,column:34}},113:{start:{line:304,column:8},end:{line:304,column:40}},114:{start:{line:307,column:25},end:{line:358,column:6}},115:{start:{line:308,column:23},end:{line:308,column:109}},116:{start:{line:309,column:6},end:{line:322,column:7}},117:{start:{line:310,column:35},end:{line:310,column:43}},118:{start:{line:311,column:8},end:{line:321,column:10}},119:{start:{line:323,column:33},end:{line:323,column:100}},120:{start:{line:324,column:6},end:{line:337,column:7}},121:{start:{line:325,column:35},end:{line:325,column:53}},122:{start:{line:326,column:8},end:{line:336,column:10}},123:{start:{line:338,column:25},end:{line:338,column:88}},124:{start:{line:339,column:6},end:{line:357,column:7}},125:{start:{line:340,column:52},end:{line:340,column:62}},126:{start:{line:341,column:20},end:{line:341,column:78}},127:{start:{line:342,column:8},end:{line:352,column:10}},128:{start:{line:354,column:8},end:{line:356,column:10}},129:{start:{line:359,column:24},end:{line:359,column:30}},130:{start:{line:360,column:4},end:{line:374,column:5}},131:{start:{line:361,column:6},end:{line:361,column:42}},132:{start:{line:362,column:6},end:{line:373,column:9}},133:{start:{line:363,column:28},end:{line:363,column:33}},134:{start:{line:364,column:8},end:{line:372,column:9}},135:{start:{line:365,column:10},end:{line:371,column:11}},136:{start:{line:366,column:28},end:{line:366,column:49}},137:{start:{line:367,column:30},end:{line:367,column:69}},138:{start:{line:368,column:12},end:{line:368,column:44}},139:{start:{line:370,column:12},end:{line:370,column:30}},140:{start:{line:375,column:4},end:{line:377,column:5}},141:{start:{line:376,column:6},end:{line:376,column:40}},142:{start:{line:378,column:4},end:{line:380,column:5}},143:{start:{line:379,column:6},end:{line:379,column:40}},144:{start:{line:381,column:4},end:{line:383,column:5}},145:{start:{line:382,column:6},end:{line:382,column:47}},146:{start:{line:384,column:4},end:{line:386,column:5}},147:{start:{line:385,column:6},end:{line:385,column:31}},148:{start:{line:387,column:4},end:{line:394,column:7}},149:{start:{line:392,column:6},end:{line:392,column:26}},150:{start:{line:393,column:6},end:{line:393,column:27}},151:{start:{line:396,column:11},end:{line:403,column:3}},152:{start:{line:397,column:24},end:{line:397,column:49}},153:{start:{line:398,column:21},end:{line:398,column:67}},154:{start:{line:399,column:4},end:{line:399,column:61}},155:{start:{line:400,column:4},end:{line:402,column:7}},156:{start:{line:404,column:11},end:{line:411,column:3}},157:{start:{line:405,column:24},end:{line:405,column:49}},158:{start:{line:406,column:21},end:{line:406,column:67}},159:{start:{line:407,column:4},end:{line:407,column:61}},160:{start:{line:408,column:4},end:{line:410,column:7}},161:{start:{line:412,column:16},end:{line:426,column:3}},162:{start:{line:413,column:33},end:{line:413,column:37}},163:{start:{line:414,column:17},end:{line:414,column:43}},164:{start:{line:415,column:4},end:{line:415,column:53}},165:{start:{line:416,column:4},end:{line:416,column:53}},166:{start:{line:417,column:4},end:{line:417,column:38}},167:{start:{line:417,column:31},end:{line:417,column:38}},168:{start:{line:418,column:4},end:{line:422,column:5}},169:{start:{line:419,column:6},end:{line:421,column:9}},170:{start:{line:423,column:4},end:{line:423,column:29}},171:{start:{line:424,column:4},end:{line:424,column:49}},172:{start:{line:425,column:4},end:{line:425,column:32}},173:{start:{line:427,column:19},end:{line:433,column:3}},174:{start:{line:428,column:25},end:{line:431,column:5}},175:{start:{line:432,column:4},end:{line:432,column:38}},176:{start:{line:434,column:19},end:{line:439,column:3}},177:{start:{line:435,column:19},end:{line:435,column:45}},178:{start:{line:436,column:28},end:{line:436,column:43}},179:{start:{line:437,column:4},end:{line:437,column:37}},180:{start:{line:438,column:4},end:{line:438,column:41}},181:{start:{line:440,column:16},end:{line:447,column:3}},182:{start:{line:441,column:19},end:{line:441,column:45}},183:{start:{line:442,column:26},end:{line:442,column:41}},184:{start:{line:443,column:24},end:{line:443,column:55}},185:{start:{line:444,column:4},end:{line:444,column:46}},186:{start:{line:445,column:4},end:{line:445,column:48}},187:{start:{line:446,column:4},end:{line:446,column:39}},188:{start:{line:448,column:28},end:{line:457,column:3}},189:{start:{line:449,column:19},end:{line:449,column:45}},190:{start:{line:450,column:26},end:{line:450,column:41}},191:{start:{line:451,column:18},end:{line:451,column:45}},192:{start:{line:452,column:26},end:{line:452,column:70}},193:{start:{line:453,column:4},end:{line:453,column:88}},194:{start:{line:454,column:4},end:{line:454,column:33}},195:{start:{line:455,column:4},end:{line:455,column:33}},196:{start:{line:456,column:4},end:{line:456,column:39}},197:{start:{line:458,column:20},end:{line:465,column:3}},198:{start:{line:459,column:26},end:{line:459,column:61}},199:{start:{line:460,column:4},end:{line:463,column:6}},200:{start:{line:464,column:4},end:{line:464,column:39}},201:{start:{line:466,column:19},end:{line:470,column:3}},202:{start:{line:467,column:26},end:{line:467,column:61}},203:{start:{line:468,column:4},end:{line:468,column:33}},204:{start:{line:469,column:4},end:{line:469,column:39}},205:{start:{line:471,column:16},end:{line:475,column:3}},206:{start:{line:472,column:4},end:{line:474,column:27}},207:{start:{line:476,column:21},end:{line:490,column:3}},208:{start:{line:477,column:21},end:{line:477,column:44}},209:{start:{line:478,column:4},end:{line:489,column:5}},210:{start:{line:479,column:27},end:{line:485,column:7}},211:{start:{line:486,column:6},end:{line:486,column:26}},212:{start:{line:488,column:6},end:{line:488,column:22}},213:{start:{line:491,column:14},end:{line:495,column:3}},214:{start:{line:492,column:4},end:{line:492,column:34}},215:{start:{line:493,column:4},end:{line:493,column:47}},216:{start:{line:494,column:4},end:{line:494,column:34}},217:{start:{line:497,column:23},end:{line:497,column:25}},218:{start:{line:498,column:4},end:{line:538,column:5}},219:{start:{line:499,column:6},end:{line:537,column:7}},220:{start:{line:500,column:8},end:{line:503,column:10}},221:{start:{line:504,column:18},end:{line:504,column:25}},222:{start:{line:505,column:8},end:{line:509,column:9}},223:{start:{line:506,column:10},end:{line:506,column:62}},224:{start:{line:508,column:10},end:{line:508,column:63}},225:{start:{line:510,column:32},end:{line:523,column:9}},226:{start:{line:511,column:10},end:{line:513,column:11}},227:{start:{line:512,column:12},end:{line:512,column:19}},228:{start:{line:514,column:26},end:{line:516,column:12}},229:{start:{line:517,column:10},end:{line:519,column:11}},230:{start:{line:518,column:12},end:{line:518,column:47}},231:{start:{line:520,column:10},end:{line:522,column:13}},232:{start:{line:524,column:8},end:{line:534,column:9}},233:{start:{line:525,column:10},end:{line:527,column:13}},234:{start:{line:525,column:69},end:{line:525,column:90}},235:{start:{line:526,column:12},end:{line:526,column:74}},236:{start:{line:529,column:10},end:{line:533,column:13}},237:{start:{line:531,column:32},end:{line:531,column:47}},238:{start:{line:531,column:64},end:{line:531,column:85}},239:{start:{line:532,column:12},end:{line:532,column:74}},240:{start:{line:536,column:8},end:{line:536,column:86}},241:{start:{line:539,column:4},end:{line:544,column:5}},242:{start:{line:540,column:6},end:{line:540,column:39}},243:{start:{line:541,column:6},end:{line:543,column:9}},244:{start:{line:547,column:21},end:{line:547,column:55}},245:{start:{line:548,column:4},end:{line:548,column:53}},246:{start:{line:550,column:16},end:{line:554,column:3}},247:{start:{line:551,column:4},end:{line:553,column:7}},248:{start:{line:556,column:40},end:{line:556,column:50}},249:{start:{line:557,column:21},end:{line:568,column:5}},250:{start:{line:560,column:8},end:{line:562,column:11}},251:{start:{line:565,column:8},end:{line:565,column:44}},252:{start:{line:566,column:8},end:{line:566,column:28}},253:{start:{line:569,column:21},end:{line:569,column:40}},254:{start:{line:571,column:4},end:{line:593,column:5}},255:{start:{line:572,column:6},end:{line:580,column:8}},256:{start:{line:582,column:6},end:{line:592,column:8}},257:{start:{line:595,column:4},end:{line:597,column:5}},258:{start:{line:596,column:6},end:{line:596,column:63}},259:{start:{line:598,column:25},end:{line:598,column:27}},260:{start:{line:599,column:4},end:{line:601,column:5}},261:{start:{line:600,column:6},end:{line:600,column:52}},262:{start:{line:602,column:4},end:{line:602,column:160}},263:{start:{line:604,column:18},end:{line:622,column:3}},264:{start:{line:605,column:43},end:{line:605,column:53}},265:{start:{line:606,column:35},end:{line:606,column:45}},266:{start:{line:607,column:16},end:{line:607,column:38}},267:{start:{line:608,column:20},end:{line:608,column:50}},268:{start:{line:609,column:4},end:{line:609,column:70}},269:{start:{line:610,column:23},end:{line:610,column:122}},270:{start:{line:610,column:66},end:{line:610,column:91}},271:{start:{line:610,column:109},end:{line:610,column:121}},272:{start:{line:611,column:4},end:{line:615,column:5}},273:{start:{line:612,column:6},end:{line:612,column:58}},274:{start:{line:614,column:6},end:{line:614,column:39}},275:{start:{line:616,column:4},end:{line:620,column:5}},276:{start:{line:617,column:6},end:{line:617,column:38}},277:{start:{line:618,column:11},end:{line:620,column:5}},278:{start:{line:619,column:6},end:{line:619,column:46}},279:{start:{line:621,column:4},end:{line:621,column:71}},280:{start:{line:623,column:27},end:{line:668,column:3}},281:{start:{line:624,column:16},end:{line:624,column:38}},282:{start:{line:625,column:23},end:{line:625,column:52}},283:{start:{line:626,column:4},end:{line:638,column:5}},284:{start:{line:627,column:21},end:{line:627,column:42}},285:{start:{line:628,column:23},end:{line:628,column:25}},286:{start:{line:629,column:6},end:{line:631,column:9}},287:{start:{line:630,column:8},end:{line:630,column:35}},288:{start:{line:632,column:6},end:{line:637,column:9}},289:{start:{line:639,column:17},end:{line:639,column:45}},290:{start:{line:640,column:4},end:{line:642,column:5}},291:{start:{line:641,column:6},end:{line:641,column:29}},292:{start:{line:643,column:17},end:{line:643,column:46}},293:{start:{line:644,column:4},end:{line:667,column:5}},294:{start:{line:645,column:6},end:{line:666,column:7}},295:{start:{line:646,column:22},end:{line:646,column:37}},296:{start:{line:647,column:46},end:{line:650,column:9}},297:{start:{line:651,column:20},end:{line:651,column:24}},298:{start:{line:652,column:8},end:{line:657,column:9}},299:{start:{line:653,column:33},end:{line:653,column:63}},300:{start:{line:654,column:10},end:{line:656,column:11}},301:{start:{line:655,column:12},end:{line:655,column:26}},302:{start:{line:658,column:8},end:{line:663,column:9}},303:{start:{line:659,column:10},end:{line:662,column:13}},304:{start:{line:665,column:8},end:{line:665,column:26}},305:{start:{line:669,column:18},end:{line:674,column:3}},306:{start:{line:670,column:4},end:{line:673,column:27}},307:{start:{line:676,column:4},end:{line:681,column:27}},308:{start:{line:684,column:4},end:{line:684,column:60}},309:{start:{line:687,column:4},end:{line:687,column:34}},310:{start:{line:689,column:28},end:{line:696,column:3}},311:{start:{line:690,column:4},end:{line:695,column:7}},312:{start:{line:697,column:28},end:{line:704,column:3}},313:{start:{line:698,column:4},end:{line:703,column:7}},314:{start:{line:706,column:19},end:{line:706,column:51}},315:{start:{line:707,column:26},end:{line:707,column:92}},316:{start:{line:708,column:36},end:{line:721,column:5}},317:{start:{line:722,column:38},end:{line:736,column:5}},318:{start:{line:737,column:24},end:{line:756,column:14}},319:{start:{line:757,column:24},end:{line:767,column:14}},320:{start:{line:768,column:35},end:{line:828,column:8}},321:{start:{line:829,column:4},end:{line:839,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:55,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:56,column:9},end:{line:56,column:23}},loc:{start:{line:56,column:52},end:{line:67,column:1}},line:56},2:{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:21},end:{line:215,column:3}},line:72},3:{name:"(anonymous_3)",decl:{start:{line:82,column:26},end:{line:82,column:27}},loc:{start:{line:82,column:40},end:{line:82,column:86}},line:82},4:{name:"(anonymous_4)",decl:{start:{line:89,column:17},end:{line:89,column:18}},loc:{start:{line:89,column:23},end:{line:91,column:9}},line:89},5:{name:"(anonymous_5)",decl:{start:{line:95,column:17},end:{line:95,column:18}},loc:{start:{line:95,column:23},end:{line:97,column:9}},line:95},6:{name:"(anonymous_6)",decl:{start:{line:101,column:17},end:{line:101,column:18}},loc:{start:{line:101,column:23},end:{line:103,column:9}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:23},end:{line:109,column:9}},line:107},8:{name:"(anonymous_8)",decl:{start:{line:113,column:17},end:{line:113,column:18}},loc:{start:{line:113,column:23},end:{line:115,column:9}},line:113},9:{name:"(anonymous_9)",decl:{start:{line:119,column:17},end:{line:119,column:18}},loc:{start:{line:119,column:23},end:{line:123,column:9}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},11:{name:"(anonymous_11)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},12:{name:"(anonymous_12)",decl:{start:{line:138,column:44},end:{line:138,column:45}},loc:{start:{line:138,column:51},end:{line:151,column:5}},line:138},13:{name:"(anonymous_13)",decl:{start:{line:143,column:40},end:{line:143,column:41}},loc:{start:{line:143,column:55},end:{line:145,column:9}},line:143},14:{name:"(anonymous_14)",decl:{start:{line:155,column:29},end:{line:155,column:30}},loc:{start:{line:155,column:43},end:{line:155,column:72}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:161,column:27},end:{line:161,column:28}},loc:{start:{line:161,column:36},end:{line:171,column:7}},line:161},16:{name:"(anonymous_16)",decl:{start:{line:166,column:36},end:{line:166,column:37}},loc:{start:{line:166,column:50},end:{line:166,column:102}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:213,column:28},end:{line:213,column:29}},loc:{start:{line:213,column:35},end:{line:213,column:69}},line:213},18:{name:"(anonymous_18)",decl:{start:{line:216,column:19},end:{line:216,column:20}},loc:{start:{line:216,column:26},end:{line:234,column:3}},line:216},19:{name:"(anonymous_19)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:22},end:{line:237,column:3}},line:235},20:{name:"(anonymous_20)",decl:{start:{line:238,column:2},end:{line:238,column:3}},loc:{start:{line:238,column:25},end:{line:240,column:3}},line:238},21:{name:"(anonymous_21)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:27},end:{line:243,column:3}},line:241},22:{name:"(anonymous_22)",decl:{start:{line:244,column:2},end:{line:244,column:3}},loc:{start:{line:244,column:27},end:{line:251,column:3}},line:244},23:{name:"(anonymous_23)",decl:{start:{line:248,column:37},end:{line:248,column:38}},loc:{start:{line:248,column:48},end:{line:250,column:5}},line:248},24:{name:"(anonymous_24)",decl:{start:{line:252,column:2},end:{line:252,column:3}},loc:{start:{line:252,column:23},end:{line:256,column:3}},line:252},25:{name:"(anonymous_25)",decl:{start:{line:253,column:36},end:{line:253,column:37}},loc:{start:{line:253,column:47},end:{line:255,column:5}},line:253},26:{name:"(anonymous_26)",decl:{start:{line:257,column:29},end:{line:257,column:30}},loc:{start:{line:257,column:50},end:{line:271,column:3}},line:257},27:{name:"(anonymous_27)",decl:{start:{line:272,column:19},end:{line:272,column:20}},loc:{start:{line:272,column:44},end:{line:395,column:3}},line:272},28:{name:"(anonymous_28)",decl:{start:{line:297,column:30},end:{line:297,column:31}},loc:{start:{line:297,column:48},end:{line:305,column:7}},line:297},29:{name:"(anonymous_29)",decl:{start:{line:307,column:56},end:{line:307,column:57}},loc:{start:{line:307,column:67},end:{line:358,column:5}},line:307},30:{name:"(anonymous_30)",decl:{start:{line:362,column:21},end:{line:362,column:22}},loc:{start:{line:362,column:32},end:{line:373,column:7}},line:362},31:{name:"(anonymous_31)",decl:{start:{line:391,column:7},end:{line:391,column:8}},loc:{start:{line:391,column:13},end:{line:394,column:5}},line:391},32:{name:"(anonymous_32)",decl:{start:{line:396,column:11},end:{line:396,column:12}},loc:{start:{line:396,column:17},end:{line:403,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:404,column:11},end:{line:404,column:12}},loc:{start:{line:404,column:17},end:{line:411,column:3}},line:404},34:{name:"(anonymous_34)",decl:{start:{line:412,column:16},end:{line:412,column:17}},loc:{start:{line:412,column:26},end:{line:426,column:3}},line:412},35:{name:"(anonymous_35)",decl:{start:{line:427,column:19},end:{line:427,column:20}},loc:{start:{line:427,column:38},end:{line:433,column:3}},line:427},36:{name:"(anonymous_36)",decl:{start:{line:434,column:19},end:{line:434,column:20}},loc:{start:{line:434,column:30},end:{line:439,column:3}},line:434},37:{name:"(anonymous_37)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:27},end:{line:447,column:3}},line:440},38:{name:"(anonymous_38)",decl:{start:{line:448,column:28},end:{line:448,column:29}},loc:{start:{line:448,column:39},end:{line:457,column:3}},line:448},39:{name:"(anonymous_39)",decl:{start:{line:458,column:20},end:{line:458,column:21}},loc:{start:{line:458,column:46},end:{line:465,column:3}},line:458},40:{name:"(anonymous_40)",decl:{start:{line:466,column:19},end:{line:466,column:20}},loc:{start:{line:466,column:37},end:{line:470,column:3}},line:466},41:{name:"(anonymous_41)",decl:{start:{line:471,column:16},end:{line:471,column:17}},loc:{start:{line:471,column:30},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:21},end:{line:476,column:22}},loc:{start:{line:476,column:35},end:{line:490,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:491,column:14},end:{line:491,column:15}},loc:{start:{line:491,column:40},end:{line:495,column:3}},line:491},44:{name:"(anonymous_44)",decl:{start:{line:496,column:2},end:{line:496,column:3}},loc:{start:{line:496,column:17},end:{line:545,column:3}},line:496},45:{name:"(anonymous_45)",decl:{start:{line:510,column:32},end:{line:510,column:33}},loc:{start:{line:510,column:42},end:{line:523,column:9}},line:510},46:{name:"(anonymous_46)",decl:{start:{line:525,column:59},end:{line:525,column:60}},loc:{start:{line:525,column:69},end:{line:525,column:90}},line:525},47:{name:"(anonymous_47)",decl:{start:{line:525,column:98},end:{line:525,column:99}},loc:{start:{line:525,column:107},end:{line:527,column:11}},line:525},48:{name:"(anonymous_48)",decl:{start:{line:531,column:18},end:{line:531,column:19}},loc:{start:{line:531,column:32},end:{line:531,column:47}},line:531},49:{name:"(anonymous_49)",decl:{start:{line:531,column:54},end:{line:531,column:55}},loc:{start:{line:531,column:64},end:{line:531,column:85}},line:531},50:{name:"(anonymous_50)",decl:{start:{line:531,column:93},end:{line:531,column:94}},loc:{start:{line:531,column:102},end:{line:533,column:11}},line:531},51:{name:"(anonymous_51)",decl:{start:{line:546,column:2},end:{line:546,column:3}},loc:{start:{line:546,column:17},end:{line:549,column:3}},line:546},52:{name:"(anonymous_52)",decl:{start:{line:550,column:16},end:{line:550,column:17}},loc:{start:{line:550,column:29},end:{line:554,column:3}},line:550},53:{name:"(anonymous_53)",decl:{start:{line:555,column:2},end:{line:555,column:3}},loc:{start:{line:555,column:16},end:{line:603,column:3}},line:555},54:{name:"(anonymous_54)",decl:{start:{line:559,column:27},end:{line:559,column:28}},loc:{start:{line:559,column:42},end:{line:563,column:7}},line:559},55:{name:"(anonymous_55)",decl:{start:{line:564,column:20},end:{line:564,column:21}},loc:{start:{line:564,column:27},end:{line:567,column:7}},line:564},56:{name:"(anonymous_56)",decl:{start:{line:604,column:18},end:{line:604,column:19}},loc:{start:{line:604,column:24},end:{line:622,column:3}},line:604},57:{name:"(anonymous_57)",decl:{start:{line:610,column:50},end:{line:610,column:51}},loc:{start:{line:610,column:66},end:{line:610,column:91}},line:610},58:{name:"(anonymous_58)",decl:{start:{line:610,column:100},end:{line:610,column:101}},loc:{start:{line:610,column:109},end:{line:610,column:121}},line:610},59:{name:"(anonymous_59)",decl:{start:{line:623,column:27},end:{line:623,column:28}},loc:{start:{line:623,column:41},end:{line:668,column:3}},line:623},60:{name:"(anonymous_60)",decl:{start:{line:629,column:21},end:{line:629,column:22}},loc:{start:{line:629,column:36},end:{line:631,column:7}},line:629},61:{name:"(anonymous_61)",decl:{start:{line:669,column:18},end:{line:669,column:19}},loc:{start:{line:669,column:29},end:{line:674,column:3}},line:669},62:{name:"(anonymous_62)",decl:{start:{line:675,column:2},end:{line:675,column:3}},loc:{start:{line:675,column:29},end:{line:682,column:3}},line:675},63:{name:"(anonymous_63)",decl:{start:{line:683,column:2},end:{line:683,column:3}},loc:{start:{line:683,column:25},end:{line:685,column:3}},line:683},64:{name:"(anonymous_64)",decl:{start:{line:686,column:2},end:{line:686,column:3}},loc:{start:{line:686,column:30},end:{line:688,column:3}},line:686},65:{name:"(anonymous_65)",decl:{start:{line:689,column:28},end:{line:689,column:29}},loc:{start:{line:689,column:44},end:{line:696,column:3}},line:689},66:{name:"(anonymous_66)",decl:{start:{line:697,column:28},end:{line:697,column:29}},loc:{start:{line:697,column:44},end:{line:704,column:3}},line:697},67:{name:"(anonymous_67)",decl:{start:{line:705,column:2},end:{line:705,column:3}},loc:{start:{line:705,column:11},end:{line:840,column:3}},line:705}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:47,column:9},end:{line:54,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},6:{loc:{start:{line:78,column:8},end:{line:78,column:89}},type:"binary-expr",locations:[{start:{line:78,column:8},end:{line:78,column:20}},{start:{line:78,column:25},end:{line:78,column:54}},{start:{line:78,column:58},end:{line:78,column:88}}],line:78},7:{loc:{start:{line:121,column:12},end:{line:121,column:61}},type:"cond-expr",locations:[{start:{line:121,column:44},end:{line:121,column:53}},{start:{line:121,column:56},end:{line:121,column:61}}],line:121},8:{loc:{start:{line:139,column:6},end:{line:150,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:150,column:7}},{start:{line:142,column:13},end:{line:150,column:7}}],line:139},9:{loc:{start:{line:142,column:13},end:{line:150,column:7}},type:"if",locations:[{start:{line:142,column:13},end:{line:150,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:142},10:{loc:{start:{line:142,column:17},end:{line:142,column:88}},type:"binary-expr",locations:[{start:{line:142,column:17},end:{line:142,column:44}},{start:{line:142,column:48},end:{line:142,column:88}}],line:142},11:{loc:{start:{line:146,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:146,column:8},end:{line:149,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:153,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:172,column:5}},{start:{line:157,column:11},end:{line:172,column:5}}],line:153},13:{loc:{start:{line:153,column:8},end:{line:153,column:104}},type:"binary-expr",locations:[{start:{line:153,column:8},end:{line:153,column:16}},{start:{line:153,column:20},end:{line:153,column:104}}],line:153},14:{loc:{start:{line:158,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:160,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:158},15:{loc:{start:{line:162,column:8},end:{line:165,column:9}},type:"if",locations:[{start:{line:162,column:8},end:{line:165,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},16:{loc:{start:{line:167,column:8},end:{line:170,column:9}},type:"if",locations:[{start:{line:167,column:8},end:{line:170,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},17:{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},18:{loc:{start:{line:217,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:233,column:5}},{start:{line:225,column:11},end:{line:233,column:5}}],line:217},19:{loc:{start:{line:218,column:6},end:{line:224,column:7}},type:"if",locations:[{start:{line:218,column:6},end:{line:224,column:7}},{start:{line:221,column:13},end:{line:224,column:7}}],line:218},20:{loc:{start:{line:218,column:10},end:{line:218,column:53}},type:"binary-expr",locations:[{start:{line:218,column:10},end:{line:218,column:19}},{start:{line:218,column:23},end:{line:218,column:33}},{start:{line:218,column:37},end:{line:218,column:53}}],line:218},21:{loc:{start:{line:221,column:13},end:{line:224,column:7}},type:"if",locations:[{start:{line:221,column:13},end:{line:224,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:221},22:{loc:{start:{line:221,column:17},end:{line:221,column:46}},type:"binary-expr",locations:[{start:{line:221,column:17},end:{line:221,column:26}},{start:{line:221,column:30},end:{line:221,column:46}}],line:221},23:{loc:{start:{line:226,column:6},end:{line:232,column:7}},type:"if",locations:[{start:{line:226,column:6},end:{line:232,column:7}},{start:{line:229,column:13},end:{line:232,column:7}}],line:226},24:{loc:{start:{line:226,column:10},end:{line:226,column:39}},type:"binary-expr",locations:[{start:{line:226,column:10},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:39}}],line:226},25:{loc:{start:{line:229,column:13},end:{line:232,column:7}},type:"if",locations:[{start:{line:229,column:13},end:{line:232,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},26:{loc:{start:{line:229,column:17},end:{line:229,column:46}},type:"binary-expr",locations:[{start:{line:229,column:17},end:{line:229,column:26}},{start:{line:229,column:30},end:{line:229,column:46}}],line:229},27:{loc:{start:{line:245,column:21},end:{line:245,column:55}},type:"binary-expr",locations:[{start:{line:245,column:21},end:{line:245,column:49}},{start:{line:245,column:53},end:{line:245,column:55}}],line:245},28:{loc:{start:{line:246,column:24},end:{line:246,column:93}},type:"binary-expr",locations:[{start:{line:246,column:24},end:{line:246,column:70}},{start:{line:246,column:74},end:{line:246,column:93}}],line:246},29:{loc:{start:{line:247,column:21},end:{line:247,column:110}},type:"cond-expr",locations:[{start:{line:247,column:55},end:{line:247,column:96}},{start:{line:247,column:99},end:{line:247,column:110}}],line:247},30:{loc:{start:{line:258,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:258,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:258},31:{loc:{start:{line:258,column:8},end:{line:258,column:123}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:40}},{start:{line:258,column:44},end:{line:258,column:123}}],line:258},32:{loc:{start:{line:272,column:30},end:{line:272,column:39}},type:"default-arg",locations:[{start:{line:272,column:37},end:{line:272,column:39}}],line:272},33:{loc:{start:{line:279,column:4},end:{line:281,column:5}},type:"if",locations:[{start:{line:279,column:4},end:{line:281,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},34:{loc:{start:{line:279,column:8},end:{line:279,column:62}},type:"binary-expr",locations:[{start:{line:279,column:8},end:{line:279,column:23}},{start:{line:279,column:27},end:{line:279,column:62}}],line:279},35:{loc:{start:{line:282,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:282,column:4},end:{line:284,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},36:{loc:{start:{line:282,column:8},end:{line:282,column:62}},type:"binary-expr",locations:[{start:{line:282,column:8},end:{line:282,column:23}},{start:{line:282,column:27},end:{line:282,column:62}}],line:282},37:{loc:{start:{line:286,column:6},end:{line:288,column:7}},type:"if",locations:[{start:{line:286,column:6},end:{line:288,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:10},end:{line:286,column:69}},type:"binary-expr",locations:[{start:{line:286,column:10},end:{line:286,column:16}},{start:{line:286,column:20},end:{line:286,column:35}},{start:{line:286,column:39},end:{line:286,column:69}}],line:286},39:{loc:{start:{line:290,column:4},end:{line:292,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:292,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:290},40:{loc:{start:{line:293,column:19},end:{line:293,column:51}},type:"binary-expr",locations:[{start:{line:293,column:19},end:{line:293,column:45}},{start:{line:293,column:49},end:{line:293,column:51}}],line:293},41:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:295},42:{loc:{start:{line:295,column:8},end:{line:295,column:35}},type:"binary-expr",locations:[{start:{line:295,column:8},end:{line:295,column:16}},{start:{line:295,column:20},end:{line:295,column:35}}],line:295},43:{loc:{start:{line:298,column:8},end:{line:303,column:9}},type:"if",locations:[{start:{line:298,column:8},end:{line:303,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:298},44:{loc:{start:{line:298,column:12},end:{line:298,column:56}},type:"binary-expr",locations:[{start:{line:298,column:12},end:{line:298,column:27}},{start:{line:298,column:31},end:{line:298,column:56}}],line:298},45:{loc:{start:{line:309,column:6},end:{line:322,column:7}},type:"if",locations:[{start:{line:309,column:6},end:{line:322,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:309},46:{loc:{start:{line:324,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:324,column:6},end:{line:337,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:324},47:{loc:{start:{line:339,column:6},end:{line:357,column:7}},type:"if",locations:[{start:{line:339,column:6},end:{line:357,column:7}},{start:{line:353,column:13},end:{line:357,column:7}}],line:339},48:{loc:{start:{line:341,column:20},end:{line:341,column:78}},type:"cond-expr",locations:[{start:{line:341,column:40},end:{line:341,column:67}},{start:{line:341,column:70},end:{line:341,column:78}}],line:341},49:{loc:{start:{line:341,column:20},end:{line:341,column:37}},type:"binary-expr",locations:[{start:{line:341,column:20},end:{line:341,column:25}},{start:{line:341,column:29},end:{line:341,column:37}}],line:341},50:{loc:{start:{line:360,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:360,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:360},51:{loc:{start:{line:364,column:8},end:{line:372,column:9}},type:"if",locations:[{start:{line:364,column:8},end:{line:372,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},52:{loc:{start:{line:375,column:4},end:{line:377,column:5}},type:"if",locations:[{start:{line:375,column:4},end:{line:377,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:375},53:{loc:{start:{line:378,column:4},end:{line:380,column:5}},type:"if",locations:[{start:{line:378,column:4},end:{line:380,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:378},54:{loc:{start:{line:381,column:4},end:{line:383,column:5}},type:"if",locations:[{start:{line:381,column:4},end:{line:383,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:381},55:{loc:{start:{line:384,column:4},end:{line:386,column:5}},type:"if",locations:[{start:{line:384,column:4},end:{line:386,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:384},56:{loc:{start:{line:417,column:4},end:{line:417,column:38}},type:"if",locations:[{start:{line:417,column:4},end:{line:417,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:417},57:{loc:{start:{line:418,column:4},end:{line:422,column:5}},type:"if",locations:[{start:{line:418,column:4},end:{line:422,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:418},58:{loc:{start:{line:452,column:26},end:{line:452,column:70}},type:"cond-expr",locations:[{start:{line:452,column:46},end:{line:452,column:65}},{start:{line:452,column:68},end:{line:452,column:70}}],line:452},59:{loc:{start:{line:453,column:31},end:{line:453,column:87}},type:"cond-expr",locations:[{start:{line:453,column:69},end:{line:453,column:78}},{start:{line:453,column:81},end:{line:453,column:87}}],line:453},60:{loc:{start:{line:477,column:21},end:{line:477,column:44}},type:"binary-expr",locations:[{start:{line:477,column:21},end:{line:477,column:38}},{start:{line:477,column:42},end:{line:477,column:44}}],line:477},61:{loc:{start:{line:478,column:4},end:{line:489,column:5}},type:"if",locations:[{start:{line:478,column:4},end:{line:489,column:5}},{start:{line:487,column:11},end:{line:489,column:5}}],line:478},62:{loc:{start:{line:499,column:6},end:{line:537,column:7}},type:"if",locations:[{start:{line:499,column:6},end:{line:537,column:7}},{start:{line:535,column:13},end:{line:537,column:7}}],line:499},63:{loc:{start:{line:499,column:10},end:{line:499,column:149}},type:"binary-expr",locations:[{start:{line:499,column:10},end:{line:499,column:72}},{start:{line:499,column:76},end:{line:499,column:97}},{start:{line:499,column:101},end:{line:499,column:149}}],line:499},64:{loc:{start:{line:511,column:10},end:{line:513,column:11}},type:"if",locations:[{start:{line:511,column:10},end:{line:513,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:511},65:{loc:{start:{line:524,column:8},end:{line:534,column:9}},type:"if",locations:[{start:{line:524,column:8},end:{line:534,column:9}},{start:{line:528,column:15},end:{line:534,column:9}}],line:524},66:{loc:{start:{line:536,column:26},end:{line:536,column:85}},type:"binary-expr",locations:[{start:{line:536,column:26},end:{line:536,column:49}},{start:{line:536,column:53},end:{line:536,column:85}}],line:536},67:{loc:{start:{line:539,column:4},end:{line:544,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:544,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:539},68:{loc:{start:{line:547,column:21},end:{line:547,column:55}},type:"binary-expr",locations:[{start:{line:547,column:21},end:{line:547,column:49}},{start:{line:547,column:53},end:{line:547,column:55}}],line:547},69:{loc:{start:{line:548,column:11},end:{line:548,column:52}},type:"binary-expr",locations:[{start:{line:548,column:11},end:{line:548,column:40}},{start:{line:548,column:44},end:{line:548,column:52}}],line:548},70:{loc:{start:{line:558,column:16},end:{line:558,column:41}},type:"binary-expr",locations:[{start:{line:558,column:16},end:{line:558,column:29}},{start:{line:558,column:33},end:{line:558,column:41}}],line:558},71:{loc:{start:{line:571,column:4},end:{line:593,column:5}},type:"if",locations:[{start:{line:571,column:4},end:{line:593,column:5}},{start:{line:581,column:11},end:{line:593,column:5}}],line:571},72:{loc:{start:{line:595,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:597,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:595},73:{loc:{start:{line:599,column:4},end:{line:601,column:5}},type:"if",locations:[{start:{line:599,column:4},end:{line:601,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:599},74:{loc:{start:{line:610,column:66},end:{line:610,column:91}},type:"cond-expr",locations:[{start:{line:610,column:81},end:{line:610,column:84}},{start:{line:610,column:87},end:{line:610,column:91}}],line:610},75:{loc:{start:{line:611,column:4},end:{line:615,column:5}},type:"if",locations:[{start:{line:611,column:4},end:{line:615,column:5}},{start:{line:613,column:11},end:{line:615,column:5}}],line:611},76:{loc:{start:{line:616,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:616,column:4},end:{line:620,column:5}},{start:{line:618,column:11},end:{line:620,column:5}}],line:616},77:{loc:{start:{line:618,column:11},end:{line:620,column:5}},type:"if",locations:[{start:{line:618,column:11},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:618},78:{loc:{start:{line:626,column:4},end:{line:638,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:638,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},79:{loc:{start:{line:626,column:8},end:{line:626,column:39}},type:"binary-expr",locations:[{start:{line:626,column:8},end:{line:626,column:18}},{start:{line:626,column:22},end:{line:626,column:39}}],line:626},80:{loc:{start:{line:640,column:4},end:{line:642,column:5}},type:"if",locations:[{start:{line:640,column:4},end:{line:642,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},81:{loc:{start:{line:640,column:8},end:{line:640,column:27}},type:"binary-expr",locations:[{start:{line:640,column:8},end:{line:640,column:12}},{start:{line:640,column:16},end:{line:640,column:27}}],line:640},82:{loc:{start:{line:644,column:4},end:{line:667,column:5}},type:"if",locations:[{start:{line:644,column:4},end:{line:667,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:644},83:{loc:{start:{line:652,column:8},end:{line:657,column:9}},type:"if",locations:[{start:{line:652,column:8},end:{line:657,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:652},84:{loc:{start:{line:654,column:10},end:{line:656,column:11}},type:"if",locations:[{start:{line:654,column:10},end:{line:656,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:654},85:{loc:{start:{line:658,column:8},end:{line:663,column:9}},type:"if",locations:[{start:{line:658,column:8},end:{line:663,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:658},86:{loc:{start:{line:706,column:19},end:{line:706,column:51}},type:"binary-expr",locations:[{start:{line:706,column:19},end:{line:706,column:45}},{start:{line:706,column:49},end:{line:706,column:51}}],line:706},87:{loc:{start:{line:707,column:26},end:{line:707,column:92}},type:"cond-expr",locations:[{start:{line:707,column:46},end:{line:707,column:83}},{start:{line:707,column:86},end:{line:707,column:92}}],line:707},88:{loc:{start:{line:737,column:24},end:{line:756,column:14}},type:"cond-expr",locations:[{start:{line:737,column:56},end:{line:756,column:5}},{start:{line:756,column:8},end:{line:756,column:14}}],line:737},89:{loc:{start:{line:757,column:24},end:{line:767,column:14}},type:"cond-expr",locations:[{start:{line:757,column:97},end:{line:767,column:5}},{start:{line:767,column:8},end:{line:767,column:14}}],line:757}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AA+uBmB,SAAA,KAkNA,YAlNA;AA9uBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEW,eAAA,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEM,cAAA,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEI,YAAA,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAQ,SAAA,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bafcb93873c2a71cab2bdafeb2ce6a3195766cd8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return we=function(){return l},l}we();we().s[0]++;window.Buffer=IG.Buffer;function bb(n,e){we().f[0]++;const t=(we().s[1]++,n.match(/\.tilehosting\.com/)),r=(we().s[2]++,n.match(/\.maptiler\.com/)),i=(we().s[3]++,n.match(/\.thunderforest\.com/));if(we().s[4]++,we().b[1][0]++,t||(we().b[1][1]++,r)){we().b[0][0]++;const s=(we().s[5]++,Cc.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(we().s[6]++,s)return we().b[2][0]++,we().s[7]++,n.replace("{key}",s);we().b[2][1]++}else if(we().b[0][1]++,we().s[8]++,i){we().b[3][0]++;const s=(we().s[9]++,Cc.getAccessToken("thunderforest",e,{allowFallback:!0}));if(we().s[10]++,s)return we().b[4][0]++,we().s[11]++,n.replace("{key}",s);we().b[4][1]++}else return we().b[3][1]++,we().s[12]++,n}function OD(n,e,t){return we().f[1]++,we().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class dce extends Zn.Component{constructor(t){we().f[2]++,we().s[14]++;super(t);Pn(this,"revisionStore");Pn(this,"styleStore");Pn(this,"layerWatcher");Pn(this,"handleKeyPress",(we().s[65]++,t=>{we().f[18]++,we().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(we().b[18][0]++,we().s[67]++,we().b[20][0]++,t.metaKey&&(we().b[20][1]++,t.shiftKey)&&(we().b[20][2]++,t.keyCode===90)?(we().b[19][0]++,we().s[68]++,t.preventDefault(),we().s[69]++,this.onRedo()):(we().b[19][1]++,we().s[70]++,we().b[22][0]++,t.metaKey&&(we().b[22][1]++,t.keyCode===90)?(we().b[21][0]++,we().s[71]++,t.preventDefault(),we().s[72]++,this.onUndo()):we().b[21][1]++)):(we().b[18][1]++,we().s[73]++,we().b[24][0]++,t.ctrlKey&&(we().b[24][1]++,t.keyCode===90)?(we().b[23][0]++,we().s[74]++,t.preventDefault(),we().s[75]++,this.onUndo()):(we().b[23][1]++,we().s[76]++,we().b[26][0]++,t.ctrlKey&&(we().b[26][1]++,t.keyCode===89)?(we().b[25][0]++,we().s[77]++,t.preventDefault(),we().s[78]++,this.onRedo()):we().b[25][1]++))}));Pn(this,"onChangeMetadataProperty",(we().s[89]++,(t,r)=>{we().f[26]++,we().s[90]++,we().b[31][0]++,t==="maputnik:renderer"&&(we().b[31][1]++,r!==PG(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(we().b[30][0]++,we().s[91]++,this.setState({mapState:"map"})):we().b[30][1]++;const i=(we().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});we().s[93]++,this.onStyleChanged(i)}));Pn(this,"onStyleChanged",(we().s[94]++,(t,r=(we().b[32][0]++,{}))=>{we().f[27]++,we().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},we().s[96]++,we().b[34][0]++,t.glyphs&&(we().b[34][1]++,typeof t.glyphs=="string")?(we().b[33][0]++,we().s[97]++,t.glyphs=bb(t.glyphs,t)):we().b[33][1]++,we().s[98]++,we().b[36][0]++,t.sprite&&(we().b[36][1]++,typeof t.sprite=="string")?(we().b[35][0]++,we().s[99]++,t.sprite=bb(t.sprite,t)):we().b[35][1]++,we().s[100]++;for(const[p,v]of Object.entries(t.sources))we().s[101]++,we().b[38][0]++,v&&(we().b[38][1]++,"url"in v)&&(we().b[38][2]++,typeof v.url=="string")?(we().b[37][0]++,we().s[102]++,v.url=bb(v.url,t)):we().b[37][1]++;we().s[103]++,r.initialLoad?(we().b[39][0]++,we().s[104]++,this.getInitialStateFromUrl(t)):we().b[39][1]++;const i=(we().s[105]++,we().b[40][0]++,Jd(t)||(we().b[40][1]++,[])),s=(we().s[106]++,[]);if(we().s[107]++,we().b[42][0]++,t&&(we().b[42][1]++,t.layers)){we().b[41][0]++;const p=(we().s[108]++,new window.Map);we().s[109]++,t.layers.forEach((v,x)=>{if(we().f[28]++,we().s[110]++,we().b[44][0]++,v.id===""&&(we().b[44][1]++,p.has(v.id))){we().b[43][0]++;const B=(we().s[111]++,new Error(`layers[${x}]: duplicate layer id [empty_string], previously used`));we().s[112]++,s.push(B)}else we().b[43][1]++;we().s[113]++,p.set(v.id,!0)})}else we().b[41][1]++;const l=(we().s[114]++,s.concat(i).map(p=>{we().f[29]++;const v=(we().s[115]++,p.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(we().s[116]++,v){we().b[45][0]++;const[,k,P]=(we().s[117]++,v);return we().s[118]++,{message:p.message,parsed:{type:"layer",data:{index:parseInt(k,10),key:"id",message:P}}}}else we().b[45][1]++;const x=(we().s[119]++,p.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(we().s[120]++,x){we().b[46][0]++;const[,k,P]=(we().s[121]++,x);return we().s[122]++,{message:p.message,parsed:{type:"layer",data:{index:parseInt(k,10),key:"source",message:P}}}}else we().b[46][1]++;const B=(we().s[123]++,p.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(we().s[124]++,B){we().b[47][0]++;const[,k,P,D,N]=(we().s[125]++,B),W=(we().s[126]++,we().b[49][0]++,P&&(we().b[49][1]++,D)?(we().b[48][0]++,[P,D].join(".")):(we().b[48][1]++,D));return we().s[127]++,{message:p.message,parsed:{type:"layer",data:{index:parseInt(k,10),key:W,message:N}}}}else return we().b[47][1]++,we().s[128]++,{message:p.message}}));let o=(we().s[129]++,void 0);we().s[130]++,i.length>0?(we().b[50][0]++,we().s[131]++,o=V8(t),we().s[132]++,i.forEach(p=>{we().f[30]++;const{message:v}=(we().s[133]++,p);if(we().s[134]++,v){we().b[51][0]++,we().s[135]++;try{const x=(we().s[136]++,v.split(":")[0]),B=(we().s[137]++,x.match(/^\S+?\[\d+\]\.[^[]+/)[0]);we().s[138]++,G2.unset(o,B)}catch(x){we().s[139]++,console.warn(x)}}else we().b[51][1]++})):we().b[50][1]++,we().s[140]++,t.glyphs!==this.state.mapStyle.glyphs?(we().b[52][0]++,we().s[141]++,this.updateFonts(t.glyphs)):we().b[52][1]++,we().s[142]++,t.sprite!==this.state.mapStyle.sprite?(we().b[53][0]++,we().s[143]++,this.updateIcons(t.sprite)):we().b[53][1]++,we().s[144]++,r.addRevision?(we().b[54][0]++,we().s[145]++,this.revisionStore.addRevision(t)):we().b[54][1]++,we().s[146]++,r.save?(we().b[55][0]++,we().s[147]++,this.saveStyle(t)):we().b[55][1]++,we().s[148]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:l},()=>{we().f[31]++,we().s[149]++,this.fetchSources(),we().s[150]++,this.setStateInUrl()})}));Pn(this,"onUndo",(we().s[151]++,()=>{we().f[32]++;const t=(we().s[152]++,this.revisionStore.undo()),r=(we().s[153]++,Gue(this.state.mapStyle,t));we().s[154]++,this.onStyleChanged(t,{addRevision:!1}),we().s[155]++,this.setState({infos:r})}));Pn(this,"onRedo",(we().s[156]++,()=>{we().f[33]++;const t=(we().s[157]++,this.revisionStore.redo()),r=(we().s[158]++,Que(this.state.mapStyle,t));we().s[159]++,this.onStyleChanged(t,{addRevision:!1}),we().s[160]++,this.setState({infos:r})}));Pn(this,"onMoveLayer",(we().s[161]++,t=>{we().f[34]++;let{oldIndex:r,newIndex:i}=(we().s[162]++,t),s=(we().s[163]++,this.state.mapStyle.layers);if(we().s[164]++,r=$8(r,0,s.length-1),we().s[165]++,i=$8(i,0,s.length-1),we().s[166]++,r===i){we().b[56][0]++,we().s[167]++;return}else we().b[56][1]++;we().s[168]++,r===this.state.selectedLayerIndex?(we().b[57][0]++,we().s[169]++,this.setState({selectedLayerIndex:i})):we().b[57][1]++,we().s[170]++,s=s.slice(0),we().s[171]++,DG(s,r,i),we().s[172]++,this.onLayersChange(s)}));Pn(this,"onLayersChange",(we().s[173]++,t=>{we().f[35]++;const r=(we().s[174]++,{...this.state.mapStyle,layers:t});we().s[175]++,this.onStyleChanged(r)}));Pn(this,"onLayerDestroy",(we().s[176]++,t=>{we().f[36]++;const r=(we().s[177]++,this.state.mapStyle.layers),i=(we().s[178]++,r.slice(0));we().s[179]++,i.splice(t,1),we().s[180]++,this.onLayersChange(i)}));Pn(this,"onLayerCopy",(we().s[181]++,t=>{we().f[37]++;const r=(we().s[182]++,this.state.mapStyle.layers),i=(we().s[183]++,r.slice(0)),s=(we().s[184]++,V8(i[t]));we().s[185]++,s.id=s.id+"-copy",we().s[186]++,i.splice(t,0,s),we().s[187]++,this.onLayersChange(i)}));Pn(this,"onLayerVisibilityToggle",(we().s[188]++,t=>{we().f[38]++;const r=(we().s[189]++,this.state.mapStyle.layers),i=(we().s[190]++,r.slice(0)),s=(we().s[191]++,{...i[t]}),l=(we().s[192]++,"layout"in s?(we().b[58][0]++,{...s.layout}):(we().b[58][1]++,{}));we().s[193]++,l.visibility=l.visibility==="none"?(we().b[59][0]++,"visible"):(we().b[59][1]++,"none"),we().s[194]++,s.layout=l,we().s[195]++,i[t]=s,we().s[196]++,this.onLayersChange(i)}));Pn(this,"onLayerIdChange",(we().s[197]++,(t,r,i)=>{we().f[39]++;const s=(we().s[198]++,this.state.mapStyle.layers.slice(0));we().s[199]++,s[t]={...s[t],id:i},we().s[200]++,this.onLayersChange(s)}));Pn(this,"onLayerChanged",(we().s[201]++,(t,r)=>{we().f[40]++;const i=(we().s[202]++,this.state.mapStyle.layers.slice(0));we().s[203]++,i[t]=r,we().s[204]++,this.onLayersChange(i)}));Pn(this,"setMapState",(we().s[205]++,t=>{we().f[41]++,we().s[206]++,this.setState({mapState:t},this.setStateInUrl)}));Pn(this,"setDefaultValues",(we().s[207]++,t=>{we().f[42]++;const r=(we().s[208]++,we().b[60][0]++,t.metadata||(we().b[60][1]++,{}));if(we().s[209]++,r["maputnik:renderer"]===void 0){we().b[61][0]++;const i=(we().s[210]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return we().s[211]++,i}else return we().b[61][1]++,we().s[212]++,t}));Pn(this,"openStyle",(we().s[213]++,(t,r)=>{we().f[43]++,we().s[214]++,this.setState({fileHandle:r}),we().s[215]++,t=this.setDefaultValues(t),we().s[216]++,this.onStyleChanged(t)}));Pn(this,"onMapChange",(we().s[246]++,t=>{we().f[52]++,we().s[247]++,this.setState({mapView:t})}));Pn(this,"setStateInUrl",(we().s[263]++,()=>{we().f[56]++;const{mapState:t,mapStyle:r,isOpen:i}=(we().s[264]++,this.state),{selectedLayerIndex:s}=(we().s[265]++,this.state),l=(we().s[266]++,new URL(location.href)),o=(we().s[267]++,r7(JSON.stringify(r)));we().s[268]++,l.searchParams.set("layer",`${o}~${s}`);const p=(we().s[269]++,Object.entries(i).map(([v,x])=>(we().f[57]++,we().s[270]++,x===!0?(we().b[74][0]++,v):(we().b[74][1]++,null))).filter(v=>(we().f[58]++,we().s[271]++,v!==null)));we().s[272]++,p.length>0?(we().b[75][0]++,we().s[273]++,l.searchParams.set("modal",p.join(","))):(we().b[75][1]++,we().s[274]++,l.searchParams.delete("modal")),we().s[275]++,t==="map"?(we().b[76][0]++,we().s[276]++,l.searchParams.delete("view")):(we().b[76][1]++,we().s[277]++,t==="inspect"?(we().b[77][0]++,we().s[278]++,l.searchParams.set("view","inspect")):we().b[77][1]++),we().s[279]++,history.replaceState({selectedLayerIndex:s},"Maputnik",l.href)}));Pn(this,"getInitialStateFromUrl",(we().s[280]++,t=>{we().f[59]++;const r=(we().s[281]++,new URL(location.href)),i=(we().s[282]++,r.searchParams.get("modal"));if(we().s[283]++,we().b[79][0]++,i&&(we().b[79][1]++,i!=="")){we().b[78][0]++;const o=(we().s[284]++,i.split(",")),p=(we().s[285]++,{});we().s[286]++,o.forEach(v=>{we().f[60]++,we().s[287]++,p[v]=!0}),we().s[288]++,this.setState({isOpen:{...this.state.isOpen,...p}})}else we().b[78][1]++;const s=(we().s[289]++,r.searchParams.get("view"));we().s[290]++,we().b[81][0]++,s&&(we().b[81][1]++,s!=="")?(we().b[80][0]++,we().s[291]++,this.setMapState(s)):we().b[80][1]++;const l=(we().s[292]++,r.searchParams.get("layer"));if(we().s[293]++,l){we().b[82][0]++,we().s[294]++;try{const o=(we().s[295]++,l.split("~")),[p,v]=(we().s[296]++,[o[0],parseInt(o[1],10)]);let x=(we().s[297]++,!0);if(we().s[298]++,p!=="-"){we().b[83][0]++;const B=(we().s[299]++,r7(JSON.stringify(t)));we().s[300]++,B!==parseInt(p,10)?(we().b[84][0]++,we().s[301]++,x=!1):we().b[84][1]++}else we().b[83][1]++;we().s[302]++,x?(we().b[85][0]++,we().s[303]++,this.setState({selectedLayerIndex:v,selectedLayerOriginalId:t.layers[v].id})):we().b[85][1]++}catch(o){we().s[304]++,console.warn(o)}}else we().b[82][1]++}));Pn(this,"onLayerSelect",(we().s[305]++,t=>{we().f[61]++,we().s[306]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));Pn(this,"onChangeOpenlayersDebug",(we().s[310]++,(t,r)=>{we().f[65]++,we().s[311]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));Pn(this,"onChangeMaplibreGlDebug",(we().s[312]++,(t,r)=>{we().f[66]++,we().s[313]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));we().s[15]++,_G(this),we().s[16]++,this.revisionStore=new ice;const r=(we().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(we().s[18]++,r.get("localport"));we().s[19]++,we().b[6][0]++,i==null&&(we().b[6][1]++,window.location.port!=="80")&&(we().b[6][2]++,window.location.port!=="443")?(we().b[5][0]++,we().s[20]++,i=window.location.port):we().b[5][1]++,we().s[21]++,this.styleStore=new rce({onLocalStyleChange:o=>(we().f[3]++,we().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(we().s[23]++,[{key:"?",handler:()=>{we().f[4]++,we().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{we().f[5]++,we().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{we().f[6]++,we().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{we().f[7]++,we().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{we().f[8]++,we().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{we().f[9]++,we().s[29]++,this.setMapState(this.state.mapState==="map"?(we().b[7][0]++,"inspect"):(we().b[7][1]++,"map"))}},{key:"m",handler:()=>{we().f[10]++,we().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{we().f[11]++,we().s[31]++,this.toggleModal("debug")}}]);we().s[32]++,document.body.addEventListener("keyup",o=>{if(we().f[12]++,we().s[33]++,o.key==="Escape")we().b[8][0]++,we().s[34]++,o.target.blur(),we().s[35]++,document.body.focus();else if(we().b[8][1]++,we().s[36]++,we().b[10][0]++,this.state.isOpen.shortcuts||(we().b[10][1]++,document.activeElement===document.body)){we().b[9][0]++;const p=(we().s[37]++,s.find(v=>(we().f[13]++,we().s[38]++,v.key===o.key)));we().s[39]++,p?(we().b[11][0]++,we().s[40]++,this.setModal("shortcuts",!1),we().s[41]++,p.handler()):we().b[11][1]++}else we().b[9][1]++});const l=(we().s[42]++,jue());we().s[43]++,we().b[13][0]++,l&&(we().b[13][1]++,window.confirm("Load style from URL: "+l+" and discard current changes?"))?(we().b[12][0]++,we().s[44]++,this.styleStore=new SD,we().s[45]++,hW(l,o=>(we().f[14]++,we().s[46]++,this.onStyleChanged(o))),we().s[47]++,bD()):(we().b[12][1]++,we().s[48]++,l?(we().b[14][0]++,we().s[49]++,bD()):we().b[14][1]++,we().s[50]++,this.styleStore.init(o=>{we().f[15]++,we().s[51]++,o?(we().b[15][0]++,we().s[52]++,console.log("Falling back to local storage for storing styles"),we().s[53]++,this.styleStore=new SD):we().b[15][1]++,we().s[54]++,this.styleStore.latestStyle(p=>(we().f[16]++,we().s[55]++,this.onStyleChanged(p,{initialLoad:!0}))),we().s[56]++,dg.enabled()?(we().b[16][0]++,we().s[57]++,dg.set("maputnik","styleStore",this.styleStore),we().s[58]++,dg.set("maputnik","revisionStore",this.revisionStore)):we().b[16][1]++})),we().s[59]++,dg.enabled()?(we().b[17][0]++,we().s[60]++,dg.set("maputnik","revisionStore",this.revisionStore),we().s[61]++,dg.set("maputnik","styleStore",this.styleStore)):we().b[17][1]++,we().s[62]++,this.state={errors:[],infos:[],mapStyle:Cc.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Bs,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},we().s[63]++,this.layerWatcher=new uce({onVectorLayersChange:o=>(we().f[17]++,we().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){we().f[19]++,we().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){we().f[20]++,we().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){we().f[21]++,we().s[81]++,this.styleStore.save(t)}updateFonts(t){we().f[22]++;const r=(we().s[82]++,we().b[27][0]++,this.state.mapStyle.metadata||(we().b[27][1]++,{})),i=(we().s[83]++,we().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(we().b[28][1]++,VN.openmaptiles)),s=(we().s[84]++,typeof t=="string"?(we().b[29][0]++,t.replace("{key}",i)):(we().b[29][1]++,t));we().s[85]++,Nue(s,l=>{we().f[23]++,we().s[86]++,this.setState({spec:OD(this.state.spec,"glyphs",l)})})}updateIcons(t){we().f[24]++,we().s[87]++,Wue(t,r=>{we().f[25]++,we().s[88]++,this.setState({spec:OD(this.state.spec,"sprite",r)})})}fetchSources(){we().f[44]++;const t=(we().s[217]++,{});we().s[218]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(we().s[219]++,we().b[63][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(we().b[63][1]++,i.type==="vector")&&(we().b[63][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){we().b[62][0]++,we().s[220]++,t[r]={type:i.type,layers:[]};let s=(we().s[221]++,i.url);we().s[222]++;try{we().s[223]++,s=bb(s,this.state.mapStyle)}catch(o){we().s[224]++,console.warn("Failed to setFetchAccessToken: ",o)}we().s[225]++;const l=o=>{if(we().f[45]++,we().s[226]++,Object.prototype.hasOwnProperty.call(o,"vector_layers"))we().b[64][1]++;else{we().b[64][0]++,we().s[227]++;return}const p=(we().s[228]++,Object.assign({},{[r]:this.state.sources[r]}));we().s[229]++;for(const v of o.vector_layers)we().s[230]++,p[r].layers.push(v.id);we().s[231]++,this.setState({sources:p})};we().s[232]++,s.startsWith("pmtiles://")?(we().b[65][0]++,we().s[233]++,new jE(s.substr(10)).getTileJson("").then(o=>(we().f[46]++,we().s[234]++,l(o))).catch(o=>{we().f[47]++,we().s[235]++,console.error("Failed to process sources for '%s'",s,o)})):(we().b[65][1]++,we().s[236]++,fetch(s,{mode:"cors"}).then(o=>(we().f[48]++,we().s[237]++,o.json())).then(o=>(we().f[49]++,we().s[238]++,l(o))).catch(o=>{we().f[50]++,we().s[239]++,console.error("Failed to process sources for '%s'",s,o)}))}else we().b[62][1]++,we().s[240]++,t[r]=(we().b[66][0]++,this.state.sources[r]||(we().b[66][1]++,this.state.mapStyle.sources[r]));we().s[241]++,$6(this.state.sources,t)?we().b[67][1]++:(we().b[67][0]++,we().s[242]++,console.debug("Setting sources"),we().s[243]++,this.setState({sources:t}))}_getRenderer(){we().f[51]++;const t=(we().s[244]++,we().b[68][0]++,this.state.mapStyle.metadata||(we().b[68][1]++,{}));return we().s[245]++,we().b[69][0]++,t["maputnik:renderer"]||(we().b[69][1]++,"mlgljs")}mapRenderer(){we().f[53]++;const{mapStyle:t,dirtyMapStyle:r}=(we().s[248]++,this.state),i=(we().s[249]++,{mapStyle:(we().b[70][0]++,r||(we().b[70][1]++,t)),replaceAccessTokens:v=>(we().f[54]++,we().s[250]++,Cc.replaceAccessTokens(v,{allowFallback:!0})),onDataChange:v=>{we().f[55]++,we().s[251]++,this.layerWatcher.analyzeMap(v.map),we().s[252]++,this.fetchSources()}}),s=(we().s[253]++,this._getRenderer());let l;we().s[254]++,s==="ol"?(we().b[71][0]++,we().s[255]++,l=Ae.jsx(vne,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(we().b[71][1]++,we().s[256]++,l=Ae.jsx(i$,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;we().s[257]++,this.state.mapState.match(/^filter-/)?(we().b[72][0]++,we().s[258]++,o=this.state.mapState.replace(/^filter-/,"")):we().b[72][1]++;const p=(we().s[259]++,{});return we().s[260]++,o?(we().b[73][0]++,we().s[261]++,p.filter=`url('#${o}')`):we().b[73][1]++,we().s[262]++,Ae.jsx("div",{style:p,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:l})}setModal(t,r){we().f[62]++,we().s[307]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){we().f[63]++,we().s[308]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){we().f[64]++,we().s[309]++,this.setState({fileHandle:t})}render(){we().f[67]++;const t=(we().s[314]++,we().b[86][0]++,this.state.mapStyle.layers||(we().b[86][1]++,[])),r=(we().s[315]++,t.length>0?(we().b[87][0]++,t[this.state.selectedLayerIndex]):(we().b[87][1]++,void 0)),i=(we().s[316]++,Ae.jsx(tAe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(we().s[317]++,Ae.jsx(nie,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),l=(we().s[318]++,r?(we().b[88][0]++,Ae.jsx(Kle,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(we().b[88][1]++,void 0)),o=(we().s[319]++,this.state.errors.length+this.state.infos.length>0?(we().b[89][0]++,Ae.jsx(iAe,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(we().b[89][1]++,void 0)),p=(we().s[320]++,Ae.jsxs("div",{children:[Ae.jsx(rue,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),Ae.jsx(tue,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),Ae.jsx(lAe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),Ae.jsx(EAe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),Ae.jsx(JAe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),Ae.jsx(QAe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return we().s[321]++,Ae.jsx(rAe,{toolbar:i,layerList:s,layerEditor:l,map:this.mapRenderer(),bottom:o,modals:p})}}const fce=aj.createRoot(document.querySelector("#app"));fce.render(Ae.jsx(DE.Provider,{value:{className:"react-icons"},children:Ae.jsx(dce,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-DLBoRPQN.js.map
